<app-student-navbar-page></app-student-navbar-page>

<h4>Cart Page</h4>

<p-table
  [value]="cartItem"
  responsiveLayout="scroll"
  [ngStyle]="{ width: '100%' }"
>
  <ng-template pTemplate="header">
    <tr>
      <th>Product</th>
      <th>Unit Price</th>
      <th>Quantity</th>
      <th>Total</th>
      <th>Action</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product let-rowIndex="rowIndex">
    <tr>
      <td>{{ product.id }}</td>
      <td>{{ product.data.data.data.price | currency: " MYR" }}</td>
      <td>
        <p-inputNumber
          [(ngModel)]="cartItem[rowIndex].data.quantity"
          [showButtons]="true"
          [min]="0"
          buttonLayout="horizontal"
          spinnerMode="horizontal"
          decrementButtonClass="p-button-danger"
          incrementButtonClass="p-button-success"
          incrementButtonIcon="pi pi-plus"
          decrementButtonIcon="pi pi-minus"
          (click)="updateQuantity(cartItem[rowIndex].data.quantity,product)"
        ></p-inputNumber>
      </td>
      <td>
        {{
          product.data.data.data.price * cartItem[rowIndex].data.quantity
            | currency: " MYR"
        }}
      </td>
      <td><button mat-raised-button (click)="payNow(product)">Pay Now</button></td>
    </tr>
  </ng-template>
</p-table>
