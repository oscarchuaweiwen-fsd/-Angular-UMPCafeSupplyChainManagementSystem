(self.webpackChunkumpcafe_supply_chain_management_system=self.webpackChunkumpcafe_supply_chain_management_system||[]).push([[179],{8255:et=>{function xe($){return Promise.resolve().then(()=>{var p=new Error("Cannot find module '"+$+"'");throw p.code="MODULE_NOT_FOUND",p})}xe.keys=()=>[],xe.resolve=xe,xe.id=8255,et.exports=xe},7716:(et,xe,$)=>{"use strict";$.d(xe,{deG:()=>vi,tb:()=>hS,AFp:()=>cS,ip1:()=>Gv,CZH:()=>ll,hGG:()=>qS,z2F:()=>fl,sBO:()=>Cv,Sil:()=>Yf,_Vd:()=>as,EJc:()=>XC,SBq:()=>zn,qLn:()=>Ys,vpe:()=>hs,gxx:()=>Xs,tBr:()=>Ra,XFs:()=>Ye,OlP:()=>Bn,zs3:()=>_n,ZZ4:()=>Wp,aQg:()=>_f,soG:()=>_g,YKP:()=>Qp,v3s:()=>PS,h0i:()=>ia,PXZ:()=>IM,R0b:()=>Yi,FiY:()=>Co,Lbi:()=>fS,g9A:()=>dS,Qsj:()=>sD,FYo:()=>yv,JOm:()=>ao,Tiy:()=>mf,q3G:()=>Gt,tp0:()=>Eo,EAV:()=>OM,Rgc:()=>wf,dDg:()=>IS,DyG:()=>pd,q4F:()=>oC,GfV:()=>Tc,s_b:()=>Kp,ifc:()=>Qe,eFA:()=>Kn,G48:()=>MS,Gpc:()=>te,f3M:()=>Tm,X6Q:()=>on,_c5:()=>HS,VLi:()=>AS,c2e:()=>pS,zSh:()=>uc,wAp:()=>dt,vHH:()=>Se,EiD:()=>kt,mCW:()=>ni,qzn:()=>Gs,JVY:()=>K_,pB0:()=>J_,eBb:()=>Bh,L6k:()=>Rm,LAX:()=>Z_,cg1:()=>vc,Tjo:()=>VM,kL8:()=>Ky,yhl:()=>xm,dqk:()=>dn,sIi:()=>_p,CqO:()=>Tr,QGY:()=>Ap,F4k:()=>wr,RDi:()=>nd,AaK:()=>ce,z3N:()=>es,qOj:()=>Cy,TTD:()=>ma,_Bn:()=>cv,xp6:()=>fw,uIk:()=>nb,ekj:()=>Hy,Suo:()=>UD,Xpm:()=>Xn,lG2:()=>gh,Yz7:()=>Zt,cJS:()=>xn,oAB:()=>ph,Yjl:()=>Qg,Y36:()=>pc,_UZ:()=>hb,BQk:()=>gb,ynx:()=>Ry,qZA:()=>fb,TgZ:()=>xy,EpF:()=>Ny,n5z:()=>gm,Ikx:()=>Qy,LFG:()=>pn,$8M:()=>xh,NdJ:()=>Xd,CRH:()=>Ii,kcU:()=>ad,O4$:()=>sd,oxw:()=>bT,Hsn:()=>CT,F$t:()=>Py,Q6J:()=>Sp,WLB:()=>lg,iGM:()=>LD,MAs:()=>tT,CHM:()=>Ml,LSH:()=>Jl,kYT:()=>Yg,YNc:()=>eT,W1O:()=>GC,_uU:()=>$y,Oqu:()=>Hu,hij:()=>af,Gf:()=>VD});var p=$(9765),me=$(5319),P=$(7574),re=$(6682),we=$(8819);function ie(s){for(let a in s)if(s[a]===ie)return a;throw Error("Could not find renamed property on target object.")}function be(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function oe(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const W=ie({__forward_ref__:ie});function te(s){return s.__forward_ref__=te,s.toString=function(){return ce(this())},s}function H(s){return J(s)?s():s}function J(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===te}class Se extends Error{constructor(a,l){super(function(s,a){return`${s?`NG0${s}: `:""}${a}`}(a,l)),this.code=a}}function Pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Pe(s)}function en(s,a){const l=a?` in ${a}`:"";throw new Se("201",`No provider for ${Fe(s)} found${l}`)}function rt(s,a){null==s&&function(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function Zt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function xn(s){return{providers:s.providers||[],imports:s.imports||[]}}function ur(s){return Ki(s,zt)||Ki(s,hr)}function Ki(s,a){return s.hasOwnProperty(a)?s[a]:null}function Cl(s){return s&&(s.hasOwnProperty(Nt)||s.hasOwnProperty(pr))?s[Nt]:null}const zt=ie({\u0275prov:ie}),Nt=ie({\u0275inj:ie}),hr=ie({ngInjectableDef:ie}),pr=ie({ngInjectorDef:ie});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let bn;function Un(s){const a=bn;return bn=s,a}function ho(s,a,l){const d=ur(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&Ye.Optional?null:void 0!==a?a:void en(ce(s),"Injector")}function Ri(s){return{toString:s}.toString()}var Jn=(()=>((Jn=Jn||{})[Jn.OnPush=0]="OnPush",Jn[Jn.Default=1]="Default",Jn))(),Qe=(()=>((Qe=Qe||{})[Qe.Emulated=0]="Emulated",Qe[Qe.None=2]="None",Qe[Qe.ShadowDom=3]="ShadowDom",Qe))();const Dt="undefined"!=typeof globalThis&&globalThis,hh="undefined"!=typeof window&&window,ws="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ni="undefined"!=typeof global&&global,dn=Dt||Ni||hh||ws,K={},Q=[],ne=ie({\u0275cmp:ie}),Ce=ie({\u0275dir:ie}),se=ie({\u0275pipe:ie}),je=ie({\u0275mod:ie}),pt=ie({\u0275loc:ie}),Vt=ie({\u0275fac:ie}),tn=ie({__NG_ELEMENT_ID__:ie});let sn=0;function Xn(s){return Ri(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Jn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Q,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Qe.Emulated,id:"c",styles:s.styles||Q,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.directives,v=s.features,C=s.pipes;return d.id+=sn++,d.inputs=Kc(s.inputs,l),d.outputs=Kc(s.outputs),v&&v.forEach(E=>E(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(Qr):null,d.pipeDefs=C?()=>("function"==typeof C?C():C).map(Go):null,d})}function Qr(s){return Mr(s)||function(s){return s[Ce]||null}(s)}function Go(s){return function(s){return s[se]||null}(s)}const Qc={};function ph(s){return Ri(()=>{const a={type:s.type,bootstrap:s.bootstrap||Q,declarations:s.declarations||Q,imports:s.imports||Q,exports:s.exports||Q,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Qc[s.id]=s.type),a})}function Yg(s,a){return Ri(()=>{const l=Pi(s,!0);l.declarations=a.declarations||Q,l.imports=a.imports||Q,l.exports=a.exports||Q})}function Kc(s,a){if(null==s)return K;const l={};for(const d in s)if(s.hasOwnProperty(d)){let g=s[d],v=g;Array.isArray(g)&&(v=g[1],g=g[0]),l[g]=d,a&&(a[g]=v)}return l}const gh=Xn;function Qg(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Mr(s){return s[ne]||null}function Pi(s,a){const l=s[je]||null;if(!l&&!0===a)throw new Error(`Type ${ce(s)} does not have '\u0275mod' property.`);return l}function Tn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Fi(s){return Array.isArray(s)&&!0===s[1]}function wl(s){return 0!=(8&s.flags)}function Rr(s){return 2==(2&s.flags)}function Jc(s){return 1==(1&s.flags)}function go(s){return null!==s.template}function Ji(s){return 0!=(512&s[2])}function $o(s,a){return s.hasOwnProperty(Vt)?s[Vt]:null}class vh{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function ma(){return ed}function ed(s){return s.type.prototype.ngOnChanges&&(s.setInput=Jg),Zg}function Zg(){const s=_h(this),a=null==s?void 0:s.current;if(a){const l=s.previous;if(l===K)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Jg(s,a,l,d){const g=_h(s)||function(s,a){return s[ya]=a}(s,{previous:K,current:null}),v=g.current||(g.current={}),C=g.previous,E=this.declaredInputs[l],D=C[E];v[E]=new vh(D&&D.currentValue,a,C===K),s[d]=a}ma.ngInherit=!0;const ya="__ngSimpleChanges__";function _h(s){return s[ya]||null}const hn="http://www.w3.org/2000/svg";let td;function nd(s){td=s}function En(s){return!!s.listen}const _t={createRenderer:(s,a)=>void 0!==td?td:"undefined"!=typeof document?document:void 0};function vn(s){for(;Array.isArray(s);)s=s[0];return s}function cu(s,a){return vn(a[s])}function ki(s,a){return vn(a[s.index])}function Is(s,a){return s.data[a]}function Jr(s,a){const l=a[s];return Tn(l)?l:l[0]}function tm(s){return 4==(4&s[2])}function nm(s){return 128==(128&s[2])}function Ms(s,a){return null==a?null:s[a]}function Ch(s){s[18]=0}function xs(s,a){s[5]+=a;let l=s,d=s[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const mt={lFrame:Rs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function S_(){return mt.bindingsEnabled}function Me(){return mt.lFrame.lView}function Wt(){return mt.lFrame.tView}function Ml(s){return mt.lFrame.contextLView=s,s[8]}function Sn(){let s=xl();for(;null!==s&&64===s.type;)s=s.parent;return s}function xl(){return mt.lFrame.currentTNode}function jr(s,a){const l=mt.lFrame;l.currentTNode=s,l.isParent=a}function Rl(){return mt.lFrame.isParent}function Nl(){mt.lFrame.isParent=!1}function _a(){return mt.isInCheckNoChangesMode}function Wo(s){mt.isInCheckNoChangesMode=s}function vo(){return mt.lFrame.bindingIndex++}function sm(s,a){const l=mt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Xr(a)}function Xr(s){mt.lFrame.currentDirectiveIndex=s}function id(){return mt.lFrame.currentQueryIndex}function ba(s){mt.lFrame.currentQueryIndex=s}function am(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function wh(s,a,l){if(l&Ye.SkipSelf){let g=a,v=s;for(;!(g=g.parent,null!==g||l&Ye.Host||(g=am(v),null===g||(v=v[15],10&g.type))););if(null===g)return!1;a=g,s=v}const d=mt.lFrame=od();return d.currentTNode=a,d.lView=s,!0}function Ca(s){const a=od(),l=s[1];mt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function od(){const s=mt.lFrame,a=null===s?null:s.child;return null===a?Rs(s):a}function Rs(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function um(){const s=mt.lFrame;return mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const x_=um;function zo(){const s=um();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function tr(){return mt.lFrame.selectedIndex}function eo(s){mt.lFrame.selectedIndex=s}function On(){const s=mt.lFrame;return Is(s.tView,s.selectedIndex)}function sd(){mt.lFrame.currentNamespace=hn}function ad(){mt.lFrame.currentNamespace=null}function Ns(s,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const v=s.data[l].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:M,ngOnDestroy:N}=v;C&&(s.contentHooks||(s.contentHooks=[])).push(-l,C),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),D&&(s.viewHooks||(s.viewHooks=[])).push(-l,D),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function Os(s,a,l){Ps(s,a,3,l)}function Pl(s,a,l,d){(3&s[2])===l&&Ps(s,a,l,d)}function Fl(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function Ps(s,a,l,d){const v=null!=d?d:-1,C=a.length-1;let E=0;for(let D=void 0!==d?65535&s[18]:0;D<C;D++)if("number"==typeof a[D+1]){if(E=a[D],null!=d&&E>=d)break}else a[D]<0&&(s[18]+=65536),(E<v||-1==v)&&(lm(s,l,a,D),s[18]=(4294901760&s[18])+D+2),D++}function lm(s,a,l,d){const g=l[d]<0,v=l[d+1],E=s[g?-l[d]:l[d]];if(g){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{v.call(E)}finally{}}}else try{v.call(E)}finally{}}class fu{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Sh(s,a,l){const d=En(s);let g=0;for(;g<l.length;){const v=l[g];if("number"==typeof v){if(0!==v)break;g++;const C=l[g++],E=l[g++],D=l[g++];d?s.setAttribute(a,E,D,C):a.setAttributeNS(C,E,D)}else{const C=v,E=l[++g];to(C)?d&&s.setProperty(a,C,E):d?s.setAttribute(a,C,E):a.setAttribute(C,E),g++}}return g}function dm(s){return 3===s||4===s||6===s}function to(s){return 64===s.charCodeAt(0)}function Ll(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const g=a[d];"number"==typeof g?l=g:0===l||fm(s,l,g,null,-1===l||2===l?a[++d]:null)}}return s}function fm(s,a,l,d,g){let v=0,C=s.length;if(-1===a)C=-1;else for(;v<s.length;){const E=s[v++];if("number"==typeof E){if(E===a){C=-1;break}if(E>a){C=v-1;break}}}for(;v<s.length;){const E=s[v];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==g&&(s[v+1]=g));if(d===s[v+1])return void(s[v+2]=g)}v++,null!==d&&v++,null!==g&&v++}-1!==C&&(s.splice(C,0,a),v=C+1),s.splice(v++,0,l),null!==d&&s.splice(v++,0,d),null!==g&&s.splice(v++,0,g)}function ud(s){return-1!==s}function Ea(s){return 32767&s}function Vl(s,a){let l=function(s){return s>>16}(s),d=a;for(;l>0;)d=d[15],l--;return d}let hm=!0;function wa(s){const a=hm;return hm=s,a}let zE=0;function hu(s,a){const l=cd(s,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(s.injectorIndex=a.length,Ah(d.data,s),Ah(a,null),Ah(d.blueprint,null));const g=nn(s,a),v=s.injectorIndex;if(ud(g)){const C=Ea(g),E=Vl(g,a),D=E[1].data;for(let M=0;M<8;M++)a[v+M]=E[C+M]|D[C+M]}return a[v+8]=g,v}function Ah(s,a){s.push(0,0,0,0,0,0,0,0,a)}function cd(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function nn(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,g=a;for(;null!==g;){const v=g[1],C=v.type;if(d=2===C?v.declTNode:1===C?g[6]:null,null===d)return-1;if(l++,g=g[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Ta(s,a,l){!function(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(tn)&&(d=l[tn]),null==d&&(d=l[tn]=zE++);const g=255&d;a.data[s+(g>>5)]|=1<<g}(s,a,l)}function ot(s,a,l){if(l&Ye.Optional)return s;en(a,"NodeInjector")}function Ul(s,a,l,d){if(l&Ye.Optional&&void 0===d&&(d=null),0==(l&(Ye.Self|Ye.Host))){const g=s[9],v=Un(void 0);try{return g?g.get(a,d,l&Ye.Optional):ho(a,d,l&Ye.Optional)}finally{Un(v)}}return ot(d,a,l)}function ct(s,a,l,d=Ye.Default,g){if(null!==s){const v=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(tn)?s[tn]:void 0;return"number"==typeof a?a>=0?255&a:In:a}(l);if("function"==typeof v){if(!wh(a,s,d))return d&Ye.Host?ot(g,l,d):Ul(a,l,d,g);try{const C=v(d);if(null!=C||d&Ye.Optional)return C;en(l)}finally{x_()}}else if("number"==typeof v){let C=null,E=cd(s,a),D=-1,M=d&Ye.Host?a[16][6]:null;for((-1===E||d&Ye.SkipSelf)&&(D=-1===E?nn(s,a):a[E+8],-1!==D&&_o(d,!1)?(C=a[1],E=Ea(D),a=Vl(D,a)):E=-1);-1!==E;){const N=a[1];if(Gr(v,E,N.data)){const k=Vi(E,a,l,C,d,M);if(k!==Mh)return k}D=a[E+8],-1!==D&&_o(d,a[1].data[E+8]===M)&&Gr(v,E,a)?(C=N,E=Ea(D),a=Vl(D,a)):E=-1}}}return Ul(a,l,d,g)}const Mh={};function In(){return new gu(Sn(),Me())}function Vi(s,a,l,d,g,v){const C=a[1],E=C.data[s+8],N=Pn(E,C,l,null==d?Rr(E)&&hm:d!=C&&0!=(3&E.type),g&Ye.Host&&v===E);return null!==N?pu(a,C,N,E):Mh}function Pn(s,a,l,d,g){const v=s.providerIndexes,C=a.data,E=1048575&v,D=s.directiveStart,N=v>>20,U=g?E+N:s.directiveEnd;for(let Y=d?E:E+N;Y<U;Y++){const ee=C[Y];if(Y<D&&l===ee||Y>=D&&ee.type===l)return Y}if(g){const Y=C[D];if(Y&&go(Y)&&Y.type===l)return D}return null}function pu(s,a,l,d){let g=s[l];const v=a.data;if(function(s){return s instanceof fu}(g)){const C=g;C.resolving&&function(s,a){throw new Se("200",`Circular dependency in DI detected for ${s}`)}(Fe(v[l]));const E=wa(C.canSeeViewProviders);C.resolving=!0;const D=C.injectImpl?Un(C.injectImpl):null;wh(s,d,Ye.Default);try{g=s[l]=C.factory(void 0,v,s,d),a.firstCreatePass&&l>=d.directiveStart&&function(s,a,l){const{ngOnChanges:d,ngOnInit:g,ngDoCheck:v}=a.type.prototype;if(d){const C=ed(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,C),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,C)}g&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,g),v&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v))}(l,v[l],a)}finally{null!==D&&Un(D),wa(E),C.resolving=!1,x_()}}return g}function Gr(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function _o(s,a){return!(s&Ye.Self||s&Ye.Host&&a)}class gu{constructor(a,l){this._tNode=a,this._lView=l}get(a,l){return ct(this._tNode,this._lView,a,void 0,l)}}function gm(s){return Ri(()=>{const a=s.prototype.constructor,l=a[Vt]||dd(a),d=Object.prototype;let g=Object.getPrototypeOf(s.prototype).constructor;for(;g&&g!==d;){const v=g[Vt]||dd(g);if(v&&v!==l)return v;g=Object.getPrototypeOf(g)}return v=>new v})}function dd(s){return J(s)?()=>{const a=dd(H(s));return a&&a()}:$o(s)}function xh(s){return function(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let g=0;for(;g<d;){const v=l[g];if(dm(v))break;if(0===v)g+=2;else if("number"==typeof v)for(g++;g<d&&"string"==typeof l[g];)g++;else{if(v===a)return l[g+1];g+=2}}}return null}(Sn(),s)}const Da="__parameters__";function ks(s,a,l){return Ri(()=>{const d=function(s){return function(...l){if(s){const d=s(...l);for(const g in d)this[g]=d[g]}}}(a);function g(...v){if(this instanceof g)return d.apply(this,v),this;const C=new g(...v);return E.annotation=C,E;function E(D,M,N){const k=D.hasOwnProperty(Da)?D[Da]:Object.defineProperty(D,Da,{value:[]})[Da];for(;k.length<=N;)k.push(null);return(k[N]=k[N]||[]).push(C),D}}return l&&(g.prototype=Object.create(l.prototype)),g.prototype.ngMetadataName=s,g.annotationCls=g,g})}class Bn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Zt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const vi=new Bn("AnalyzeForEntryComponents"),pd=Function;function mr(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(a===s&&(a=s.slice(0,l)),mr(d,a)):a!==s&&a.push(d)}return a}function yr(s,a){s.forEach(l=>Array.isArray(l)?yr(l,a):a(l))}function Ls(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function Vs(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Us(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}function rr(s,a,l){let d=Ko(s,a);return d>=0?s[1|d]=l:(d=~d,function(s,a,l,d){let g=s.length;if(g==a)s.push(l,d);else if(1===g)s.push(d,s[0]),s[0]=l;else{for(g--,s.push(s[g-1],s[g]);g>a;)s[g]=s[g-2],g--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function Qo(s,a){const l=Ko(s,a);if(l>=0)return s[1|l]}function Ko(s,a){return function(s,a,l){let d=0,g=s.length>>l;for(;g!==d;){const v=d+(g-d>>1),C=s[v<<l];if(a===C)return v<<l;C>a?g=v:d=v+1}return~(g<<l)}(s,a,1)}const Gl={},_d="__NG_DI_FLAG__",Ia="ngTempTokenPath",Oh=/\n/gm,Ph="__source",$l=ie({provide:String,useValue:ie});let Aa;function Zo(s){const a=Aa;return Aa=s,a}function Wl(s,a=Ye.Default){if(void 0===Aa)throw new Error("inject() must be called from an injection context");return null===Aa?ho(s,void 0,a):Aa.get(s,a&Ye.Optional?null:void 0,a)}function pn(s,a=Ye.Default){return(bn||Wl)(H(s),a)}const Tm=pn;function Ma(s){const a=[];for(let l=0;l<s.length;l++){const d=H(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let g,v=Ye.Default;for(let C=0;C<d.length;C++){const E=d[C],D=Dm(E);"number"==typeof D?-1===D?g=E.token:v|=D:g=E}a.push(pn(g,v))}else a.push(pn(d))}return a}function Jo(s,a){return s[_d]=a,s.prototype[_d]=a,s}function Dm(s){return s[_d]}function Sm(s,a,l,d){const g=s[Ia];throw a[Ph]&&g.unshift(a[Ph]),s.message=function(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let g=ce(a);if(Array.isArray(a))g=a.map(ce).join(" -> ");else if("object"==typeof a){let v=[];for(let C in a)if(a.hasOwnProperty(C)){let E=a[C];v.push(C+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}g=`{${v.join(", ")}}`}return`${l}${d?"("+d+")":""}[${g}]: ${s.replace(Oh,"\n  ")}`}("\n"+s.message,g,l,d),s.ngTokenPath=g,s[Ia]=null,s}const Ra=Jo(ks("Inject",s=>({token:s})),-1),Co=Jo(ks("Optional"),8),Eo=Jo(ks("SkipSelf"),4);let jn;function ir(s){var a;return(null===(a=function(){if(void 0===jn&&(jn=null,dn.trustedTypes))try{jn=dn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return jn}())||void 0===a?void 0:a.createHTML(s))||s}class Or{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Vh extends Or{getTypeName(){return"HTML"}}class Du extends Or{getTypeName(){return"Style"}}class Mm extends Or{getTypeName(){return"Script"}}class Uh extends Or{getTypeName(){return"URL"}}class wd extends Or{getTypeName(){return"ResourceURL"}}function es(s){return s instanceof Or?s.changingThisBreaksApplicationSecurity:s}function Gs(s,a){const l=xm(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function xm(s){return s instanceof Or&&s.getTypeName()||null}function K_(s){return new Vh(s)}function Rm(s){return new Du(s)}function Bh(s){return new Mm(s)}function Z_(s){return new Uh(s)}function J_(s){return new wd(s)}class jh{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(ir(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class Hh{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=ir(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=ir(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let g=l.length-1;0<g;g--){const C=l.item(g).name;("xmlns:ns1"===C||0===C.indexOf("ns1:"))&&a.removeAttribute(C)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const X_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ni(s){return(s=String(s)).match(X_)||s.match(Pa)?s:"unsafe:"+s}function Bi(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function qs(...s){const a={};for(const l of s)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const ro=Bi("area,br,col,hr,img,wbr"),$s=Bi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gh=Bi("rp,rt"),qr=qs(ro,qs($s,Bi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qs(Gh,Bi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qs(Gh,$s)),Ql=Bi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kl=Bi("srcset"),Td=qs(Ql,Kl,Bi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fm=Bi("script,style,template");class km{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let g=this.checkClobberedElement(l,l.nextSibling);if(g){l=g;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!qr.hasOwnProperty(l))return this.sanitizedSomething=!0,!Fm.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let g=0;g<d.length;g++){const v=d.item(g),C=v.name,E=C.toLowerCase();if(!Td.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let D=v.value;Ql[E]&&(D=ni(D)),Kl[E]&&(s=D,D=(s=String(s)).split(",").map(a=>ni(a.trim())).join(", ")),this.buf.push(" ",C,'="',Zl(D),'"')}var s;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();qr.hasOwnProperty(l)&&!ro.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Zl(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const qh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$h=/([^\#-~ |!])/g;function Zl(s){return s.replace(/&/g,"&amp;").replace(qh,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace($h,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Hn;function kt(s,a){let l=null;try{Hn=Hn||function(s){const a=new Hh(s);return function(){try{return!!(new window.DOMParser).parseFromString(ir(""),"text/html")}catch(s){return!1}}()?new jh(a):a}(s);let d=a?String(a):"";l=Hn.getInertBodyElement(d);let g=5,v=d;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,d=v,v=l.innerHTML,l=Hn.getInertBodyElement(d)}while(d!==v);return ir((new km).sanitizeChildren(ri(l)||l))}finally{if(l){const d=ri(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function ri(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Gt=(()=>((Gt=Gt||{})[Gt.NONE=0]="NONE",Gt[Gt.HTML=1]="HTML",Gt[Gt.STYLE=2]="STYLE",Gt[Gt.SCRIPT=3]="SCRIPT",Gt[Gt.URL=4]="URL",Gt[Gt.RESOURCE_URL=5]="RESOURCE_URL",Gt))();function Jl(s){const a=function(){const s=Me();return s&&s[12]}();return a?a.sanitize(Gt.URL,s)||"":Gs(s,"URL")?es(s):ni(Pe(s))}const zh="__ngContext__";function Wn(s,a){s[zh]=a}function Nd(s){const a=function(s){return s[zh]||null}(s);return a?Array.isArray(a)?a:a.lView:null}function Iu(s){return s.ngOriginalError}function Xh(s,...a){s.error(...a)}class Ys{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=this._findContext(a),g=(s=a)&&s.ngErrorLogger||Xh;var s;g(this._console,"ERROR",a),l&&g(this._console,"ORIGINAL ERROR",l),d&&g(this._console,"ERROR CONTEXT",d)}_findContext(a){return a?a.ngDebugContext||this._findContext(Iu(a)):null}_findOriginalError(a){let l=a&&Iu(a);for(;l&&Iu(l);)l=Iu(l);return l||null}}const kd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(dn))();function bi(s){return s instanceof Function?s():s}var ao=(()=>((ao=ao||{})[ao.Important=1]="Important",ao[ao.DashCase=2]="DashCase",ao))();function Ua(s,a){return undefined(s,a)}function Do(s){const a=s[3];return Fi(a)?a[3]:a}function ns(s){return Ym(s[13])}function op(s){return Ym(s[4])}function Ym(s){for(;null!==s&&!Fi(s);)s=s[4];return s}function Au(s,a,l,d,g){if(null!=d){let v,C=!1;Fi(d)?v=d:Tn(d)&&(C=!0,d=d[0]);const E=vn(d);0===s&&null!==l?null==g?F(a,l,E):R(a,l,E,g||null,!0):1===s&&null!==l?R(a,l,E,g||null,!0):2===s?function(s,a,l){const d=z(s,a);d&&function(s,a,l,d){En(s)?s.removeChild(a,l,d):a.removeChild(l)}(s,d,a,l)}(a,E,C):3===s&&a.destroyNode(E),null!=v&&function(s,a,l,d,g){const v=l[7];v!==vn(l)&&Au(a,s,d,v,g);for(let E=10;E<l.length;E++){const D=l[E];nc(D[1],D,s,a,d,v)}}(a,s,v,l,g)}}function Ld(s,a,l){return En(s)?s.createElement(a,l):null===l?s.createElement(a):s.createElementNS(l,a)}function tc(s,a){const l=s[9],d=l.indexOf(a),g=a[3];1024&a[2]&&(a[2]&=-1025,xs(g,-1)),l.splice(d,1)}function xu(s,a){if(s.length<=10)return;const l=10+a,d=s[l];if(d){const g=d[17];null!==g&&g!==s&&tc(g,d),a>0&&(s[l-1][4]=d[4]);const v=Vs(s,10+a);!function(s,a){nc(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const C=v[19];null!==C&&C.detachView(v[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function h(s,a){if(!(256&a[2])){const l=a[11];En(l)&&l.destroyNode&&nc(s,a,l,3,null,null),function(s){let a=s[13];if(!a)return f(s[1],s);for(;a;){let l=null;if(Tn(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==s;)Tn(a)&&f(a[1],a),a=a[3];null===a&&(a=s),Tn(a)&&f(a[1],a),l=a&&a[4]}a=l}}(a)}}function f(s,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const g=a[l[d]];if(!(g instanceof fu)){const v=l[d+1];if(Array.isArray(v))for(let C=0;C<v.length;C+=2){const E=g[v[C]],D=v[C+1];try{D.call(E)}finally{}}else try{v.call(g)}finally{}}}}(s,a),function(s,a){const l=s.cleanup,d=a[7];let g=-1;if(null!==l)for(let v=0;v<l.length-1;v+=2)if("string"==typeof l[v]){const C=l[v+1],E="function"==typeof C?C(a):vn(a[C]),D=d[g=l[v+2]],M=l[v+3];"boolean"==typeof M?E.removeEventListener(l[v],D,M):M>=0?d[g=M]():d[g=-M].unsubscribe(),v+=2}else{const C=d[g=l[v+1]];l[v].call(C)}if(null!==d){for(let v=g+1;v<d.length;v++)d[v]();a[7]=null}}(s,a),1===a[1].type&&En(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&Fi(a[3])){l!==a[3]&&tc(l,a);const d=a[19];null!==d&&d.detachView(s)}}}function T(s,a,l){return function(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const g=s.data[d.directiveStart].encapsulation;if(g===Qe.None||g===Qe.Emulated)return null}return ki(d,l)}(s,a.parent,l)}function R(s,a,l,d,g){En(s)?s.insertBefore(a,l,d,g):a.insertBefore(l,d,g)}function F(s,a,l){En(s)?s.appendChild(a,l):a.appendChild(l)}function V(s,a,l,d,g){null!==d?R(s,a,l,d,g):F(s,a,l)}function z(s,a){return En(s)?s.parentNode(a):a.parentNode}function Te(s,a,l){return He(s,a,l)}let He=function(s,a,l){return 40&s.type?ki(s,l):null};function It(s,a,l,d){const g=T(s,d,a),v=a[11],E=Te(d.parent||a[6],d,a);if(null!=g)if(Array.isArray(l))for(let D=0;D<l.length;D++)V(v,g,l[D],E,!1);else V(v,g,l,E,!1)}function An(s,a){if(null!==a){const l=a.type;if(3&l)return ki(a,s);if(4&l)return Ru(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return An(s,d);{const g=s[a.index];return Fi(g)?Ru(-1,g):vn(g)}}if(32&l)return Ua(a,s)()||vn(s[a.index]);{const d=ii(s,a);return null!==d?Array.isArray(d)?d[0]:An(Do(s[16]),d):An(s,a.next)}}return null}function ii(s,a){return null!==a?s[16][6].projection[a.projection]:null}function Ru(s,a){const l=10+s+1;if(l<a.length){const d=a[l],g=d[1].firstChild;if(null!==g)return An(d,g)}return a[7]}function Ks(s,a,l,d,g,v,C){for(;null!=l;){const E=d[l.index],D=l.type;if(C&&0===a&&(E&&Wn(vn(E),d),l.flags|=4),64!=(64&l.flags))if(8&D)Ks(s,a,l.child,d,g,v,!1),Au(a,s,g,E,v);else if(32&D){const M=Ua(l,d);let N;for(;N=M();)Au(a,s,g,N,v);Au(a,s,g,E,v)}else 16&D?nw(s,a,d,l,g,v):Au(a,s,g,E,v);l=C?l.projectionNext:l.next}}function nc(s,a,l,d,g,v){Ks(l,d,s.firstChild,a,g,v,!1)}function nw(s,a,l,d,g,v){const C=l[16],D=C[6].projection[d.projection];if(Array.isArray(D))for(let M=0;M<D.length;M++)Au(a,s,g,D[M],v);else Ks(s,a,D,C[3],g,v,!0)}function rw(s,a,l){En(s)?s.setAttribute(a,"style",l):a.style.cssText=l}function f0(s,a,l){En(s)?""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l):a.className=l}function iw(s,a,l){let d=s.length;for(;;){const g=s.indexOf(a,l);if(-1===g)return g;if(0===g||s.charCodeAt(g-1)<=32){const v=a.length;if(g+v===d||s.charCodeAt(g+v)<=32)return g}l=g+1}}const ow="ng-template";function WI(s,a,l){let d=0;for(;d<s.length;){let g=s[d++];if(l&&"class"===g){if(g=s[d],-1!==iw(g.toLowerCase(),a,0))return!0}else if(1===g){for(;d<s.length&&"string"==typeof(g=s[d++]);)if(g.toLowerCase()===a)return!0;return!1}}return!1}function sw(s){return 4===s.type&&s.value!==ow}function zI(s,a,l){return a===(4!==s.type||l?s.value:ow)}function YI(s,a,l){let d=4;const g=s.attrs||[],v=function(s){for(let a=0;a<s.length;a++)if(dm(s[a]))return a;return s.length}(g);let C=!1;for(let E=0;E<a.length;E++){const D=a[E];if("number"!=typeof D){if(!C)if(4&d){if(d=2|1&d,""!==D&&!zI(s,D,l)||""===D&&1===a.length){if(So(d))return!1;C=!0}}else{const M=8&d?D:a[++E];if(8&d&&null!==s.attrs){if(!WI(s.attrs,M,l)){if(So(d))return!1;C=!0}continue}const k=QI(8&d?"class":D,g,sw(s),l);if(-1===k){if(So(d))return!1;C=!0;continue}if(""!==M){let U;U=k>v?"":g[k+1].toLowerCase();const Y=8&d?U:null;if(Y&&-1!==iw(Y,M,0)||2&d&&M!==U){if(So(d))return!1;C=!0}}}}else{if(!C&&!So(d)&&!So(D))return!1;if(C&&So(D))continue;C=!1,d=D|1&d}}return So(d)||C}function So(s){return 0==(1&s)}function QI(s,a,l,d){if(null===a)return-1;let g=0;if(d||!l){let v=!1;for(;g<a.length;){const C=a[g];if(C===s)return g;if(3===C||6===C)v=!0;else{if(1===C||2===C){let E=a[++g];for(;"string"==typeof E;)E=a[++g];continue}if(4===C)break;if(0===C){g+=4;continue}}g+=v?1:2}return-1}return function(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function aw(s,a,l=!1){for(let d=0;d<a.length;d++)if(YI(s,a[d],l))return!0;return!1}function uw(s,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(s.length===d.length){for(let g=0;g<s.length;g++)if(s[g]!==d[g])continue e;return!0}}return!1}function XI(s,a){return s?":not("+a.trim()+")":a}function lw(s){let a=s[0],l=1,d=2,g="",v=!1;for(;l<s.length;){let C=s[l];if("string"==typeof C)if(2&d){const E=s[++l];g+="["+C+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?g+="."+C:4&d&&(g+=" "+C);else""!==g&&!So(C)&&(a+=XI(v,g),g=""),d=C,v=v||!So(d);l++}return""!==g&&(a+=XI(v,g)),a}const At={};function fw(s){hw(Wt(),Me(),tr()+s,_a())}function hw(s,a,l,d){if(!d)if(3==(3&a[2])){const v=s.preOrderCheckHooks;null!==v&&Os(a,v,l)}else{const v=s.preOrderHooks;null!==v&&Pl(a,v,0,l)}eo(l)}function Jm(s,a){return s<<17|a<<2}function rs(s){return s>>17&32767}function p0(s){return 2|s}function ja(s){return(131068&s)>>2}function g0(s,a){return-131069&s|a<<2}function ey(s){return 1|s}function cA(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const g=l[d],v=l[d+1];if(-1!==v){const C=s.data[v];ba(g),C.contentQueries(2,a[v],v)}}}function Pu(s,a,l,d,g,v,C,E,D,M){const N=a.blueprint.slice();return N[0]=g,N[2]=140|d,Ch(N),N[3]=N[15]=s,N[8]=l,N[10]=C||s&&s[10],N[11]=E||s&&s[11],N[12]=D||s&&s[12]||null,N[9]=M||s&&s[9]||null,N[6]=v,N[16]=2==a.type?s[16]:N,N}function oc(s,a,l,d,g){let v=s.data[a];if(null===v)v=function(s,a,l,d,g){const v=xl(),C=Rl(),D=s.data[a]=function(s,a,l,d,g,v){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?v:v&&v.parent,l,a,d,g);return null===s.firstChild&&(s.firstChild=D),null!==v&&(C?null==v.child&&null!==D.parent&&(v.child=D):null===v.next&&(v.next=D)),D}(s,a,l,d,g),mt.lFrame.inI18n&&(v.flags|=64);else if(64&v.type){v.type=l,v.value=d,v.attrs=g;const C=function(){const s=mt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();v.injectorIndex=null===C?-1:C.injectorIndex}return jr(v,!0),v}function oi(s,a,l,d){if(0===l)return-1;const g=a.length;for(let v=0;v<l;v++)a.push(d),s.blueprint.push(d),s.data.push(null);return g}function dp(s,a,l){Ca(a);try{const d=s.viewQuery;null!==d&&dy(1,d,l);const g=s.template;null!==g&&_w(s,a,g,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&cA(s,a),s.staticViewQueries&&dy(2,s.viewQuery,l);const v=s.components;null!==v&&function(s,a){for(let l=0;l<a.length;l++)hp(s,a[l])}(a,v)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[2]&=-5,zo()}}function sc(s,a,l,d){const g=a[2];if(256==(256&g))return;Ca(a);const v=_a();try{Ch(a),function(s){mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&_w(s,a,l,2,d);const C=3==(3&g);if(!v)if(C){const M=s.preOrderCheckHooks;null!==M&&Os(a,M,null)}else{const M=s.preOrderHooks;null!==M&&Pl(a,M,0,null),Fl(a,0)}if(function(s){for(let a=ns(s);null!==a;a=op(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const g=l[d],v=g[3];0==(1024&g[2])&&xs(v,1),g[2]|=1024}}}(a),function(s){for(let a=ns(s);null!==a;a=op(a))for(let l=10;l<a.length;l++){const d=a[l],g=d[1];nm(d)&&sc(g,d,g.template,d[8])}}(a),null!==s.contentQueries&&cA(s,a),!v)if(C){const M=s.contentCheckHooks;null!==M&&Os(a,M)}else{const M=s.contentHooks;null!==M&&Pl(a,M,1),Fl(a,1)}!function(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const g=l[d];if(g<0)eo(~g);else{const v=g,C=l[++d],E=l[++d];sm(C,v),E(2,a[v])}}}finally{eo(-1)}}(s,a);const E=s.components;null!==E&&function(s,a){for(let l=0;l<a.length;l++)yA(s,a[l])}(a,E);const D=s.viewQuery;if(null!==D&&dy(2,D,d),!v)if(C){const M=s.viewCheckHooks;null!==M&&Os(a,M)}else{const M=s.viewHooks;null!==M&&Pl(a,M,2),Fl(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),v||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,xs(a[3],-1))}finally{zo()}}function fA(s,a,l,d){const g=a[10],v=!_a(),C=tm(a);try{v&&!C&&g.begin&&g.begin(),C&&dp(s,a,d),sc(s,a,l,d)}finally{v&&!C&&g.end&&g.end()}}function _w(s,a,l,d,g){const v=tr(),C=2&d;try{eo(-1),C&&a.length>20&&hw(s,a,20,_a()),l(d,g)}finally{eo(v)}}function bw(s,a,l){if(wl(a)){const g=a.directiveEnd;for(let v=a.directiveStart;v<g;v++){const C=s.data[v];C.contentQueries&&C.contentQueries(1,l[v],v)}}}function Fu(s,a,l){!S_()||(function(s,a,l,d){const g=l.directiveStart,v=l.directiveEnd;s.firstCreatePass||hu(l,a),Wn(d,a);const C=l.initialInputs;for(let E=g;E<v;E++){const D=s.data[E],M=go(D);M&&Aw(a,l,D);const N=pu(a,s,E,l);Wn(N,a),null!==C&&Mw(0,E-g,N,D,0,C),M&&(Jr(l.index,a)[8]=N)}}(s,a,l,ki(l,a)),128==(128&l.flags)&&function(s,a,l){const d=l.directiveStart,g=l.directiveEnd,C=l.index,E=mt.lFrame.currentDirectiveIndex;try{eo(C);for(let D=d;D<g;D++){const M=s.data[D],N=a[D];Xr(D),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&A0(M,N)}}finally{eo(-1),Xr(E)}}(s,a,l))}function Zs(s,a,l=ki){const d=a.localNames;if(null!==d){let g=a.index+1;for(let v=0;v<d.length;v+=2){const C=d[v+1],E=-1===C?l(a,s):s[C];s[g++]=E}}}function b0(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Er(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Er(s,a,l,d,g,v,C,E,D,M){const N=20+d,k=N+g,U=function(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:At);return l}(N,k),Y="function"==typeof M?M():M;return U[1]={type:s,blueprint:U,template:l,queries:null,viewQuery:E,declTNode:a,data:U.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:D,consts:Y,incompleteFirstPass:!1}}function E0(s,a,l,d){const g=Nw(a);null===l?g.push(d):(g.push(l),s.firstCreatePass&&fy(s).push(d,g.length-1))}function w0(s,a,l){for(let d in s)if(s.hasOwnProperty(d)){const g=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,g):l[d]=[a,g]}return l}function Hi(s,a,l,d,g,v,C,E){const D=ki(a,l);let N,M=a.inputs;!E&&null!=M&&(N=M[d])?(hy(s,l,N,d,g),Rr(a)&&function(s,a){const l=Jr(a,s);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),g=null!=C?C(g,a.value||"",d):g,En(v)?v.setProperty(D,d,g):to(d)||(D.setProperty?D.setProperty(d,g):D[d]=g))}function ay(s,a,l,d){let g=!1;if(S_()){const v=function(s,a,l){const d=s.directiveRegistry;let g=null;if(d)for(let v=0;v<d.length;v++){const C=d[v];aw(l,C.selectors,!1)&&(g||(g=[]),Ta(hu(l,a),s,C.type),go(C)?(M0(s,l),g.unshift(C)):g.push(C))}return g}(s,a,l),C=null===d?null:{"":-1};if(null!==v){g=!0,R0(l,s.data.length,v.length);for(let N=0;N<v.length;N++){const k=v[N];k.providersResolver&&k.providersResolver(k)}let E=!1,D=!1,M=oi(s,a,v.length,null);for(let N=0;N<v.length;N++){const k=v[N];l.mergedAttrs=Ll(l.mergedAttrs,k.hostAttrs),N0(s,l,a,M,k),uy(M,k,C),null!==k.contentQueries&&(l.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(l.flags|=128);const U=k.type.prototype;!E&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!D&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),D=!0),M++}!function(s,a){const d=a.directiveEnd,g=s.data,v=a.attrs,C=[];let E=null,D=null;for(let M=a.directiveStart;M<d;M++){const N=g[M],k=N.inputs,U=null===v||sw(a)?null:pR(k,v);C.push(U),E=w0(k,M,E),D=w0(N.outputs,M,D)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=C,a.inputs=E,a.outputs=D}(s,l)}C&&function(s,a,l){if(a){const d=s.localNames=[];for(let g=0;g<a.length;g+=2){const v=l[a[g+1]];if(null==v)throw new Se("301",`Export of name '${a[g+1]}' not found!`);d.push(a[g],v)}}}(l,d,C)}return l.mergedAttrs=Ll(l.mergedAttrs,l.attrs),g}function D0(s,a,l,d,g,v){const C=v.hostBindings;if(C){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const D=~a.index;(function(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=D&&E.push(D),E.push(d,g,C)}}function A0(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function M0(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function uy(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;go(a)&&(l[""]=s)}}function R0(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function N0(s,a,l,d,g){s.data[d]=g;const v=g.factory||(g.factory=$o(g.type)),C=new fu(v,go(g),null);s.blueprint[d]=C,l[d]=C,D0(s,a,0,d,oi(s,l,g.hostVars,At),g)}function Aw(s,a,l){const d=ki(a,s),g=b0(l),v=s[10],C=ac(s,Pu(s,g,null,l.onPush?64:16,d,a,v,v.createRenderer(d,l),null,null));s[a.index]=C}function Fn(s,a,l,d,g,v){const C=ki(s,a);!function(s,a,l,d,g,v,C){if(null==v)En(s)?s.removeAttribute(a,g,l):a.removeAttribute(g);else{const E=null==C?Pe(v):C(v,d||"",g);En(s)?s.setAttribute(a,g,E,l):l?a.setAttributeNS(l,g,E):a.setAttribute(g,E)}}(a[11],C,v,s.value,l,d,g)}function Mw(s,a,l,d,g,v){const C=v[a];if(null!==C){const E=d.setInput;for(let D=0;D<C.length;){const M=C[D++],N=C[D++],k=C[D++];null!==E?d.setInput(l,k,M,N):l[N]=k}}}function pR(s,a){let l=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;s.hasOwnProperty(g)&&(null===l&&(l=[]),l.push(g,s[g],a[d+1])),d+=2}else d+=2;else d+=4}return l}function fp(s,a,l,d){return new Array(s,!0,!1,a,null,0,d,l,null,null)}function yA(s,a){const l=Jr(a,s);if(nm(l)){const d=l[1];80&l[2]?sc(d,l,d.template,l[8]):l[5]>0&&Bd(l)}}function Bd(s){for(let d=ns(s);null!==d;d=op(d))for(let g=10;g<d.length;g++){const v=d[g];if(1024&v[2]){const C=v[1];sc(C,v,C.template,v[8])}else v[5]>0&&Bd(v)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const g=Jr(l[d],s);nm(g)&&g[5]>0&&Bd(g)}}function hp(s,a){const l=Jr(a,s),d=l[1];(function(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(d,l),dp(d,l,l[8])}function ac(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function O0(s){for(;s;){s[2]|=64;const a=Do(s);if(Ji(s)&&!a)return s;s=a}return null}function F0(s,a,l){const d=a[10];d.begin&&d.begin();try{sc(s,a,s.template,l)}catch(g){throw k0(a,g),g}finally{d.end&&d.end()}}function xw(s){!function(s){for(let a=0;a<s.components.length;a++){const l=s.components[a],d=Nd(l),g=d[1];fA(g,d,g.template,l)}}(s[8])}function dy(s,a,l){ba(0),a(s,l)}const mR=(()=>Promise.resolve(null))();function Nw(s){return s[7]||(s[7]=[])}function fy(s){return s.cleanup||(s.cleanup=[])}function k0(s,a){const l=s[9],d=l?l.get(Ys,null):null;d&&d.handleError(a)}function hy(s,a,l,d,g){for(let v=0;v<l.length;){const C=l[v++],E=l[v++],D=a[C],M=s.data[C];null!==M.setInput?M.setInput(D,g,d,E):D[E]=g}}function Ao(s,a,l){const d=cu(a,s);!function(s,a,l){En(s)?s.setValue(a,l):a.textContent=l}(s[11],d,l)}function L0(s,a,l){let d=l?s.styles:null,g=l?s.classes:null,v=0;if(null!==a)for(let C=0;C<a.length;C++){const E=a[C];"number"==typeof E?v=E:1==v?g=oe(g,E):2==v&&(d=oe(d,E+": "+a[++C]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=g:s.classesWithoutHost=g}const Xs=new Bn("INJECTOR",-1);class Pw{get(a,l=Gl){if(l===Gl){const d=new Error(`NullInjectorError: No provider for ${ce(a)}!`);throw d.name="NullInjectorError",d}return l}}const uc=new Bn("Set Injector scope."),Hd={},V0={};let gy;function my(){return void 0===gy&&(gy=new Pw),gy}function qa(s,a=null,l=null,d){return new mp(s,l,a||my(),d)}class mp{constructor(a,l,d,g=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const v=[];l&&yr(l,E=>this.processProvider(E,a,l)),yr([a],E=>this.processInjectorType(E,[],v)),this.records.set(Xs,Vu(void 0,this));const C=this.records.get(uc);this.scope=null!=C?C.value:null,this.source=g||("object"==typeof a?null:ce(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=Gl,d=Ye.Default){this.assertNotDestroyed();const g=Zo(this),v=Un(void 0);try{if(!(d&Ye.SkipSelf)){let E=this.records.get(a);if(void 0===E){const D=("function"==typeof(s=a)||"object"==typeof s&&s instanceof Bn)&&ur(a);E=D&&this.injectableDefInScope(D)?Vu(yp(a),Hd):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&Ye.Self?my():this.parent).get(a,l=d&Ye.Optional&&l===Gl?null:l)}catch(C){if("NullInjectorError"===C.name){if((C[Ia]=C[Ia]||[]).unshift(ce(a)),g)throw C;return Sm(C,a,"R3InjectorError",this.source)}throw C}finally{Un(v),Zo(g)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,g)=>a.push(ce(g))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,l,d){if(!(a=H(a)))return!1;let g=Cl(a);const v=null==g&&a.ngModule||void 0,C=void 0===v?a:v,E=-1!==d.indexOf(C);if(void 0!==v&&(g=Cl(v)),null==g)return!1;if(null!=g.imports&&!E){let N;d.push(C);try{yr(g.imports,k=>{this.processInjectorType(k,l,d)&&(void 0===N&&(N=[]),N.push(k))})}finally{}if(void 0!==N)for(let k=0;k<N.length;k++){const{ngModule:U,providers:Y}=N[k];yr(Y,ee=>this.processProvider(ee,U,Y||Q))}}this.injectorDefTypes.add(C);const D=$o(C)||(()=>new C);this.records.set(C,Vu(D,Hd));const M=g.providers;if(null!=M&&!E){const N=a;yr(M,k=>this.processProvider(k,N,M))}return void 0!==v&&void 0!==a.providers}processProvider(a,l,d){let g=lc(a=H(a))?a:H(a&&a.provide);const v=B0(s=a)?Vu(void 0,s.useValue):Vu(Gd(s),Hd);var s;if(lc(a)||!0!==a.multi)this.records.get(g);else{let C=this.records.get(g);C||(C=Vu(void 0,Hd,!0),C.factory=()=>Ma(C.multi),this.records.set(g,C)),g=a,C.multi.push(a)}this.records.set(g,v)}hydrate(a,l){return l.value===Hd&&(l.value=V0,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(s=l.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var s}injectableDefInScope(a){if(!a.providedIn)return!1;const l=H(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function yp(s){const a=ur(s),l=null!==a?a.factory:$o(s);if(null!==l)return l;if(s instanceof Bn)throw new Error(`Token ${ce(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const a=s.length;if(a>0){const d=Us(a,"?");throw new Error(`Can't resolve all parameters for ${ce(s)}: (${d.join(", ")}).`)}const l=function(s){const a=s&&(s[zt]||s[hr]);if(a){const l=function(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Error("unreachable")}function Gd(s,a,l){let d;if(lc(s)){const g=H(s);return $o(g)||yp(g)}if(B0(s))d=()=>H(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Ma(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))d=()=>pn(H(s.useExisting));else{const g=H(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return $o(g)||yp(g);d=()=>new g(...Ma(s.deps))}return d}function Vu(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function B0(s){return null!==s&&"object"==typeof s&&$l in s}function lc(s){return"function"==typeof s}const H0=function(s,a,l){return function(s,a=null,l=null,d){const g=qa(s,a,l,d);return g._resolveInjectorDefTypes(),g}({name:l},a,s,l)};class _n{static create(a,l){return Array.isArray(a)?H0(a,l,""):H0(a.providers,a.parent,a.name||"")}}function OA(s,a){Ns(Nd(s)[1],Sn())}function Cy(s){let a=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let g;if(go(s))g=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");g=a.\u0275dir}if(g){if(l){d.push(g);const C=s;C.inputs=Yw(s.inputs),C.declaredInputs=Yw(s.declaredInputs),C.outputs=Yw(s.outputs);const E=g.hostBindings;E&&FA(s,E);const D=g.viewQuery,M=g.contentQueries;if(D&&TR(s,D),M&&Qw(s,M),be(s.inputs,g.inputs),be(s.declaredInputs,g.declaredInputs),be(s.outputs,g.outputs),go(g)&&g.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(g.data.animation)}}const v=g.features;if(v)for(let C=0;C<v.length;C++){const E=v[C];E&&E.ngInherit&&E(s),E===Cy&&(l=!1)}}a=Object.getPrototypeOf(a)}!function(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const g=s[d];g.hostVars=a+=g.hostVars,g.hostAttrs=Ll(g.hostAttrs,l=Ll(l,g.hostAttrs))}}(d)}function Yw(s){return s===K?{}:s===Q?[]:s}function TR(s,a){const l=s.viewQuery;s.viewQuery=l?(d,g)=>{a(d,g),l(d,g)}:a}function Qw(s,a){const l=s.contentQueries;s.contentQueries=l?(d,g,v)=>{a(d,g,v),l(d,g,v)}:a}function FA(s,a){const l=s.hostBindings;s.hostBindings=l?(d,g)=>{a(d,g),l(d,g)}:a}_n.THROW_IF_NOT_FOUND=Gl,_n.NULL=new Pw,_n.\u0275prov=Zt({token:_n,providedIn:"any",factory:()=>pn(Xs)}),_n.__NG_ELEMENT_ID__=-1;let eb=null;function $d(){if(!eb){const s=dn.Symbol;if(s&&s.iterator)eb=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(eb=d)}}}return eb}function _p(s){return!!tb(s)&&(Array.isArray(s)||!(s instanceof Map)&&$d()in s)}function tb(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function si(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function nb(s,a,l,d){const g=Me();return si(g,vo(),a)&&(Wt(),Fn(On(),g,s,a,l,d)),nb}function eT(s,a,l,d,g,v,C,E){const D=Me(),M=Wt(),N=s+20,k=M.firstCreatePass?function(s,a,l,d,g,v,C,E,D){const M=a.consts,N=oc(a,s,4,C||null,Ms(M,E));ay(a,l,N,Ms(M,D)),Ns(a,N);const k=N.tViews=Er(2,N,d,g,v,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,N),k.queries=a.queries.embeddedTView(N)),N}(N,M,D,a,l,d,g,v,C):M.data[N];jr(k,!1);const U=D[11].createComment("");It(M,D,U,k),Wn(U,D),ac(D,D[N]=fp(U,D,U,k)),Jc(k)&&Fu(M,D,k),null!=C&&Zs(D,k,E)}function tT(s){return function(s,a){return s[a]}(mt.lFrame.contextLView,20+s)}function pc(s,a=Ye.Default){const l=Me();return null===l?pn(s,a):ct(Sn(),l,H(s),a)}function Sp(s,a,l){const d=Me();return si(d,vo(),a)&&Hi(Wt(),On(),d,s,a,d[11],l,!1),Sp}function Ip(s,a,l,d,g){const C=g?"class":"style";hy(s,l,a.inputs[C],C,d)}function xy(s,a,l,d){const g=Me(),v=Wt(),C=20+s,E=g[11],D=g[C]=Ld(E,a,mt.lFrame.currentNamespace),M=v.firstCreatePass?function(s,a,l,d,g,v,C){const E=a.consts,M=oc(a,s,2,g,Ms(E,v));return ay(a,l,M,Ms(E,C)),null!==M.attrs&&L0(M,M.attrs,!1),null!==M.mergedAttrs&&L0(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(C,v,g,0,a,l,d):v.data[C];jr(M,!0);const N=M.mergedAttrs;null!==N&&Sh(E,D,N);const k=M.classes;null!==k&&f0(E,D,k);const U=M.styles;null!==U&&rw(E,D,U),64!=(64&M.flags)&&It(v,g,D,M),0===mt.lFrame.elementDepthCount&&Wn(D,g),mt.lFrame.elementDepthCount++,Jc(M)&&(Fu(v,g,M),bw(v,M,g)),null!==d&&Zs(g,M)}function fb(){let s=Sn();Rl()?Nl():(s=s.parent,jr(s,!1));const a=s;mt.lFrame.elementDepthCount--;const l=Wt();l.firstCreatePass&&(Ns(l,s),wl(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(a)&&Ip(l,a,Me(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(a)&&Ip(l,a,Me(),a.stylesWithoutHost,!1)}function hb(s,a,l,d){xy(s,a,l,d),fb()}function Ry(s,a,l){const d=Me(),g=Wt(),v=s+20,C=g.firstCreatePass?function(s,a,l,d,g){const v=a.consts,C=Ms(v,d),E=oc(a,s,8,"ng-container",C);return null!==C&&L0(E,C,!0),ay(a,l,E,Ms(v,g)),null!==a.queries&&a.queries.elementStart(a,E),E}(v,g,d,a,l):g.data[v];jr(C,!0);const E=d[v]=d[11].createComment("");It(g,d,E,C),Wn(E,d),Jc(C)&&(Fu(g,d,C),bw(g,C,d)),null!=l&&Zs(d,C)}function gb(){let s=Sn();const a=Wt();Rl()?Nl():(s=s.parent,jr(s,!1)),a.firstCreatePass&&(Ns(a,s),wl(s)&&a.queries.elementEnd(s))}function Ny(){return Me()}function Ap(s){return!!s&&"function"==typeof s.then}function wr(s){return!!s&&"function"==typeof s.subscribe}const Tr=wr;function Xd(s,a,l,d){const g=Me(),v=Wt(),C=Sn();return function(s,a,l,d,g,v,C,E){const D=Jc(d),N=s.firstCreatePass&&fy(s),k=a[8],U=Nw(a);let Y=!0;if(3&d.type||E){const ae=ki(d,a),ke=E?E(ae):ae,De=U.length,lt=E?Et=>E(vn(Et[d.index])):d.index;if(En(l)){let Et=null;if(!E&&D&&(Et=function(s,a,l,d){const g=s.cleanup;if(null!=g)for(let v=0;v<g.length-1;v+=2){const C=g[v];if(C===l&&g[v+1]===d){const E=a[7],D=g[v+2];return E.length>D?E[D]:null}"string"==typeof C&&(v+=2)}return null}(s,a,g,d.index)),null!==Et)(Et.__ngLastListenerFn__||Et).__ngNextListenerFn__=v,Et.__ngLastListenerFn__=v,Y=!1;else{v=vb(d,a,k,v,!1);const Xt=l.listen(ke,g,v);U.push(v,Xt),N&&N.push(g,lt,De,De+1)}}else v=vb(d,a,k,v,!0),ke.addEventListener(g,v,C),U.push(v),N&&N.push(g,lt,De,C)}else v=vb(d,a,k,v,!1);const ee=d.outputs;let ye;if(Y&&null!==ee&&(ye=ee[g])){const ae=ye.length;if(ae)for(let ke=0;ke<ae;ke+=2){const Lr=a[ye[ke]][ye[ke+1]].subscribe(v),ys=U.length;U.push(v,Lr),N&&N.push(g,d.index,ys,-(ys+1))}}}(v,g,g[11],C,s,a,!!l,d),Xd}function yb(s,a,l,d){try{return!1!==l(d)}catch(g){return k0(s,g),!1}}function vb(s,a,l,d,g){return function v(C){if(C===Function)return d;const E=2&s.flags?Jr(s.index,a):a;0==(32&a[2])&&O0(E);let D=yb(a,0,d,C),M=v.__ngNextListenerFn__;for(;M;)D=yb(a,0,M,C)&&D,M=M.__ngNextListenerFn__;return g&&!1===D&&(C.preventDefault(),C.returnValue=!1),D}}function bT(s=1){return function(s){return(mt.lFrame.contextLView=function(s,a){for(;s>0;)a=a[15],s--;return a}(s,mt.lFrame.contextLView))[8]}(s)}function _b(s,a){let l=null;const d=function(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(s);for(let g=0;g<a.length;g++){const v=a[g];if("*"!==v){if(null===d?aw(s,v,!0):uw(d,v))return g}else l=g}return l}function Py(s){const a=Me()[16][6];if(!a.projection){const d=a.projection=Us(s?s.length:1,null),g=d.slice();let v=a.child;for(;null!==v;){const C=s?_b(v,s):0;null!==C&&(g[C]?g[C].projectionNext=v:d[C]=v,g[C]=v),v=v.next}}}function CT(s,a=0,l){const d=Me(),g=Wt(),v=oc(g,20+s,16,null,l||null);null===v.projection&&(v.projection=a),Nl(),64!=(64&v.flags)&&function(s,a,l){nw(a[11],0,a,l,T(s,l,a),Te(l.parent||a[6],l,a))}(g,d,v)}function DT(s,a,l,d,g){const v=s[l+1],C=null===a;let E=d?rs(v):ja(v),D=!1;for(;0!==E&&(!1===D||C);){const N=s[E+1];XA(s[E],a)&&(D=!0,s[E+1]=d?ey(N):p0(N)),E=d?rs(N):ja(N)}D&&(s[l+1]=d?p0(v):ey(v))}function XA(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Ko(s,a)>=0}function Hy(s,a){return function(s,a,l,d){const g=Me(),v=Wt(),C=function(s){const a=mt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}(2);v.firstUpdatePass&&function(s,a,l,d){const g=s.data;if(null===g[l+1]){const v=g[tr()],C=function(s,a){return a>=s.expandoStartIndex}(s,l);(function(s,a){return 0!=(s.flags&(a?16:32))})(v,d)&&null===a&&!C&&(a=!1),a=function(s,a,l,d){const g=function(s){const a=mt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let v=d?a.residualClasses:a.residualStyles;if(null===g)0===(d?a.classBindings:a.styleBindings)&&(l=rf(l=qy(null,s,a,l,d),a.attrs,d),v=null);else{const C=a.directiveStylingLast;if(-1===C||s[C]!==g)if(l=qy(g,s,a,l,d),null===v){let D=function(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==ja(d))return s[rs(d)]}(s,a,d);void 0!==D&&Array.isArray(D)&&(D=qy(null,s,a,D[1],d),D=rf(D,a.attrs,d),function(s,a,l,d){s[rs(l?a.classBindings:a.styleBindings)]=d}(s,a,d,D))}else v=function(s,a,l){let d;const g=a.directiveEnd;for(let v=1+a.directiveStylingLast;v<g;v++)d=rf(d,s[v].hostAttrs,l);return rf(d,a.attrs,l)}(s,a,d)}return void 0!==v&&(d?a.residualClasses=v:a.residualStyles=v),l}(g,v,a,d),function(s,a,l,d,g,v){let C=v?a.classBindings:a.styleBindings,E=rs(C),D=ja(C);s[d]=l;let N,M=!1;if(Array.isArray(l)){const k=l;N=k[1],(null===N||Ko(k,N)>0)&&(M=!0)}else N=l;if(g)if(0!==D){const U=rs(s[E+1]);s[d+1]=Jm(U,E),0!==U&&(s[U+1]=g0(s[U+1],d)),s[E+1]=function(s,a){return 131071&s|a<<17}(s[E+1],d)}else s[d+1]=Jm(E,0),0!==E&&(s[E+1]=g0(s[E+1],d)),E=d;else s[d+1]=Jm(D,0),0===E?E=d:s[D+1]=g0(s[D+1],d),D=d;M&&(s[d+1]=p0(s[d+1])),DT(s,N,d,!0),DT(s,N,d,!1),function(s,a,l,d,g){const v=g?s.residualClasses:s.residualStyles;null!=v&&"string"==typeof a&&Ko(v,a)>=0&&(l[d+1]=ey(l[d+1]))}(a,N,s,d,v),C=Jm(E,D),v?a.classBindings=C:a.styleBindings=C}(g,v,a,l,C,d)}}(v,s,C,d),a!==At&&si(g,C,a)&&function(s,a,l,d,g,v,C,E){if(!(3&a.type))return;const D=s.data,M=D[E+1];ta(function(s){return 1==(1&s)}(M)?sf(D,a,l,g,ja(M),C):void 0)||(ta(v)||function(s){return 2==(2&s)}(M)&&(v=sf(D,null,l,g,E,C)),function(s,a,l,d,g){const v=En(s);if(a)g?v?s.addClass(l,d):l.classList.add(d):v?s.removeClass(l,d):l.classList.remove(d);else{let C=-1===d.indexOf("-")?void 0:ao.DashCase;if(null==g)v?s.removeStyle(l,d,C):l.style.removeProperty(d);else{const E="string"==typeof g&&g.endsWith("!important");E&&(g=g.slice(0,-10),C|=ao.Important),v?s.setStyle(l,d,g,C):l.style.setProperty(d,g,E?"important":"")}}}(d,C,cu(tr(),l),g,v))}(v,v.data[tr()],g,g[11],s,g[C+1]=function(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ce(es(s)))),s}(a,l),d,C)}(s,a,null,!0),Hy}function qy(s,a,l,d,g){let v=null;const C=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<C&&(v=a[E],d=rf(d,v.hostAttrs,g),v!==s);)E++;return null!==s&&(l.directiveStylingLast=E),d}function rf(s,a,l){const d=l?1:2;let g=-1;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?g=C:g===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),rr(s,C,!!l||a[++v]))}return void 0===s?null:s}function sf(s,a,l,d,g,v){const C=null===a;let E;for(;g>0;){const D=s[g],M=Array.isArray(D),N=M?D[1]:D,k=null===N;let U=l[g+1];U===At&&(U=k?Q:void 0);let Y=k?Qo(U,d):N===d?U:void 0;if(M&&!ta(Y)&&(Y=Qo(D,d)),ta(Y)&&(E=Y,C))return E;const ee=s[g+1];g=C?rs(ee):ja(ee)}if(null!==a){let D=v?a.residualClasses:a.residualStyles;null!=D&&(E=Qo(D,d))}return E}function ta(s){return void 0!==s}function $y(s,a=""){const l=Me(),d=Wt(),g=s+20,v=d.firstCreatePass?oc(d,g,1,a,null):d.data[g],C=l[g]=function(s,a){return En(s)?s.createText(a):s.createTextNode(a)}(l[11],a);It(d,l,C,v),jr(v,!1)}function Hu(s){return af("",s,""),Hu}function af(s,a,l){const d=Me(),g=function(s,a,l,d){return si(s,vo(),l)?a+Pe(l)+d:At}(d,s,a,l);return g!==At&&Ao(d,tr(),g),af}function Qy(s,a,l){const d=Me();return si(d,vo(),a)&&Hi(Wt(),On(),d,s,a,d[11],l,!0),Qy}const Wa=void 0;var c1=["en",[["a","p"],["AM","PM"],Wa],[["AM","PM"],Wa,Wa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wa,"{1} 'at' {0}",Wa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let uf={};function vc(s){const a=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Ub(a);if(l)return l;const d=a.split("-")[0];if(l=Ub(d),l)return l;if("en"===d)return c1;throw new Error(`Missing locale data for the locale "${s}".`)}function Ky(s){return vc(s)[dt.PluralCase]}function Ub(s){return s in uf||(uf[s]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[s]),uf[s]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const Jy="en-US";let Bb=Jy;function lf(s){rt(s,"Expected localeId to be defined"),"string"==typeof s&&(Bb=s.toLowerCase().replace(/_/g,"-"))}function uv(s,a,l,d,g){if(s=H(s),Array.isArray(s))for(let v=0;v<s.length;v++)uv(s[v],a,l,d,g);else{const v=Wt(),C=Me();let E=lc(s)?s:H(s.provide),D=Gd(s);const M=Sn(),N=1048575&M.providerIndexes,k=M.directiveStart,U=M.providerIndexes>>20;if(lc(s)||!s.multi){const Y=new fu(D,g,pc),ee=Oo(E,a,g?N:N+U,k);-1===ee?(Ta(hu(M,C),v,E),ut(v,s,a.length),a.push(E),M.directiveStart++,M.directiveEnd++,g&&(M.providerIndexes+=1048576),l.push(Y),C.push(Y)):(l[ee]=Y,C[ee]=Y)}else{const Y=Oo(E,a,N+U,k),ee=Oo(E,a,N,N+U),ye=Y>=0&&l[Y],ae=ee>=0&&l[ee];if(g&&!ae||!g&&!ye){Ta(hu(M,C),v,E);const ke=function(s,a,l,d,g){const v=new fu(s,l,pc);return v.multi=[],v.index=a,v.componentProviders=0,Qu(v,g,d&&!l),v}(g?gf:Hp,l.length,g,d,D);!g&&ae&&(l[ee].providerFactory=ke),ut(v,s,a.length,0),a.push(E),M.directiveStart++,M.directiveEnd++,g&&(M.providerIndexes+=1048576),l.push(ke),C.push(ke)}else ut(v,s,Y>-1?Y:ee,Qu(l[g?ee:Y],D,!g&&d));!g&&d&&ae&&l[ee].componentProviders++}}}function ut(s,a,l,d){const g=lc(a);if(g||function(s){return!!s.useClass}(a)){const C=(a.useClass||a).prototype.ngOnDestroy;if(C){const E=s.destroyHooks||(s.destroyHooks=[]);if(!g&&a.multi){const D=E.indexOf(l);-1===D?E.push(l,[d,C]):E[D+1].push(d,C)}else E.push(l,C)}}}function Qu(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function Oo(s,a,l,d){for(let g=l;g<d;g++)if(a[g]===s)return g;return-1}function Hp(s,a,l,d){return lv(this.multi,[])}function gf(s,a,l,d){const g=this.multi;let v;if(this.providerFactory){const C=this.providerFactory.componentProviders,E=pu(l,l[1],this.providerFactory.index,d);v=E.slice(0,C),lv(g,v);for(let D=C;D<E.length;D++)v.push(E[D])}else v=[],lv(g,v);return v}function lv(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function cv(s,a=[]){return l=>{l.providersResolver=(d,g)=>function(s,a,l){const d=Wt();if(d.firstCreatePass){const g=go(s);uv(l,d.data,d.blueprint,g,!0),uv(a,d.data,d.blueprint,g,!1)}}(d,g?g(s):s,a)}}class fv{}const rC="ngComponent";class pv{resolveComponentFactory(a){throw function(s){const a=Error(`No component factory found for ${ce(s)}. Did you add it to @NgModule.entryComponents?`);return a[rC]=s,a}(a)}}class as{}function dr(...s){}function wc(s,a){return new zn(ki(s,a))}as.NULL=new pv;const mv=function(){return wc(Sn(),Me())};let zn=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=mv,s})();function oD(s){return s instanceof zn?s.nativeElement:s}class yv{}let sD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>E1(),s})();const E1=function(){const s=Me(),l=Jr(Sn().index,s);return function(s){return s[11]}(Tn(l)?l:s)};let mf=(()=>{class s{}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:()=>null}),s})();class Tc{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const oC=new Tc("12.2.1");class sC{constructor(){}supports(a){return _p(a)}create(a){return new uD(a)}}const aD=(s,a)=>a;class uD{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||aD}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,g=0,v=null;for(;l||d;){const C=!d||l&&l.currentIndex<_v(d,g,v)?l:d,E=_v(C,g,v),D=C.currentIndex;if(C===d)g--,d=d._nextRemoved;else if(l=l._next,null==C.previousIndex)g++;else{v||(v=[]);const M=E-g,N=D-g;if(M!=N){for(let U=0;U<M;U++){const Y=U<v.length?v[U]:v[U]=0,ee=Y+U;N<=ee&&ee<M&&(v[U]=Y+1)}v[C.previousIndex]=N-M}}E!==D&&a(C,E,D)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!_p(a))throw new Error(`Error trying to diff '${ce(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let g,v,C,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)v=a[E],C=this._trackByFn(E,v),null!==l&&Object.is(l.trackById,C)?(d&&(l=this._verifyReinsertion(l,v,C,E)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,C,E),d=!0),l=l._next}else g=0,function(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[$d()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,E=>{C=this._trackByFn(g,E),null!==l&&Object.is(l.trackById,C)?(d&&(l=this._verifyReinsertion(l,E,C,g)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,C,g),d=!0),l=l._next,g++}),this.length=g;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,g){let v;return null===a?v=this._itTail:(v=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,v,g)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,g))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,v,g)):a=this._addAfter(new yf(l,d),v,g),a}_verifyReinsertion(a,l,d,g){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?a=this._reinsertAfter(v,a._prev,g):a.currentIndex!=g&&(a.currentIndex=g,this._addToMoves(a,g)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const g=a._prevRemoved,v=a._nextRemoved;return null===g?this._removalsHead=v:g._nextRemoved=v,null===v?this._removalsTail=g:v._prevRemoved=g,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const g=null===l?this._itHead:l._next;return a._next=g,a._prev=l,null===g?this._itTail=a:g._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new $p),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $p),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class yf{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vv{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class $p{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new vv,this.map.set(l,d)),d.add(a)}get(a,l){const g=this.map.get(a);return g?g.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _v(s,a,l){const d=s.previousIndex;if(null===d)return d;let g=0;return l&&d<l.length&&(g=l[d]),d+a+g}class bv{constructor(){}supports(a){return a instanceof Map||tb(a)}create(){return new aC}}class aC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||tb(a)))throw new Error(`Error trying to diff '${ce(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,g)=>{if(l&&l.key===g)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const v=this._getOrCreateRecordForKey(g,d);l=this._insertBeforeOrAppend(l,v)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const g=this._records.get(a);this._maybeAddToChanges(g,l);const v=g._prev,C=g._next;return v&&(v._next=C),C&&(C._prev=v),g._next=null,g._prev=null,g}const d=new vf(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class vf{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uo(){return new Wp([new sC])}let Wp=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const g=d.factories.slice();l=l.concat(g)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||uo()),deps:[[s,new Eo,new Co]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(s){return s.name||typeof s}(l)}'`)}}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:uo}),s})();function uC(){return new _f([new bv])}let _f=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const g=d.factories.slice();l=l.concat(g)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||uC()),deps:[[s,new Eo,new Co]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:uC}),s})();function Zu(s,a,l,d,g=!1){for(;null!==l;){const v=a[l.index];if(null!==v&&d.push(vn(v)),Fi(v))for(let E=10;E<v.length;E++){const D=v[E],M=D[1].firstChild;null!==M&&Zu(D[1],D,M,d)}const C=l.type;if(8&C)Zu(s,a,l.child,d);else if(32&C){const E=Ua(l,a);let D;for(;D=E();)d.push(D)}else if(16&C){const E=ii(a,l);if(Array.isArray(E))d.push(...E);else{const D=Do(a[16]);Zu(D[1],D,E,d,!0)}}l=g?l.projectionNext:l.next}return d}class bf{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Zu(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Fi(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(xu(a,d),Vs(l,d))}this._attachedToViewContainer=!1}h(this._lView[1],this._lView)}onDestroy(a){E0(this._lView[1],this._lView,null,a)}markForCheck(){O0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){F0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,a,l){Wo(!0);try{F0(s,a,l)}finally{Wo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,nc(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class T1 extends bf{constructor(a){super(a),this._view=a}detectChanges(){xw(this._view)}checkNoChanges(){!function(s){Wo(!0);try{xw(s)}finally{Wo(!1)}}(this._view)}get context(){return null}}const cD=function(s){return function(s,a,l){if(Rr(s)&&!l){const d=Jr(s.index,a);return new bf(d,d)}return 47&s.type?new bf(a[16],a):null}(Sn(),Me(),16==(16&s))};let Cv=(()=>{class s{}return s.__NG_ELEMENT_ID__=cD,s})();const dD=[new bv],Dc=new Wp([new sC]),fD=new _f(dD),Ef=function(){return Dr(Sn(),Me())};let wf=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ef,s})();const hD=wf,Yp=class extends hD{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=Pu(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(l)),dp(l,d,a),new bf(d)}};function Dr(s,a){return 4&s.type?new Yp(a,s,wc(s,a)):null}class ia{}class Qp{}const R1=function(){return cC(Sn(),Me())};let Kp=(()=>{class s{}return s.__NG_ELEMENT_ID__=R1,s})();const Zp=Kp,Ya=class extends Zp{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return wc(this._hostTNode,this._hostLView)}get injector(){return new gu(this._hostTNode,this._hostLView)}get parentInjector(){const a=nn(this._hostTNode,this._hostLView);if(ud(a)){const l=Vl(a,this._hostLView),d=Ea(a);return new gu(l[1].data[d+8],l)}return new gu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=lC(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const g=a.createEmbeddedView(l||{});return this.insert(g,d),g}createComponent(a,l,d,g,v){const C=d||this.parentInjector;if(!v&&null==a.ngModule&&C){const D=C.get(ia,null);D&&(v=D)}const E=a.create(C,g,void 0,v);return this.insert(E.hostView,l),E}insert(a,l){const d=a._lView,g=d[1];if(Fi(d[3])){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const k=d[3],U=new Ya(k,k[6],k[3]);U.detach(U.indexOf(a))}}const v=this._adjustIndex(l),C=this._lContainer;!function(s,a,l,d){const g=10+d,v=l.length;d>0&&(l[g-1][4]=a),d<v-10?(a[4]=l[g],Ls(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const C=a[17];null!==C&&l!==C&&function(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(C,a);const E=a[19];null!==E&&E.insertView(s),a[2]|=128}(g,d,C,v);const E=Ru(v,C),D=d[11],M=z(D,C[7]);return null!==M&&function(s,a,l,d,g,v){d[0]=g,d[6]=a,nc(s,d,l,1,g,v)}(g,C[6],D,d,M,E),a.attachToViewContainerRef(),Ls(Ev(C),v,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=lC(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=xu(this._lContainer,l);d&&(Vs(Ev(this._lContainer),l),h(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=xu(this._lContainer,l);return d&&null!=Vs(Ev(this._lContainer),l)?new bf(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function lC(s){return s[8]}function Ev(s){return s[8]||(s[8]=[])}function cC(s,a){let l;const d=a[s.index];if(Fi(d))l=d;else{let g;if(8&s.type)g=vn(d);else{const v=a[11];g=v.createComment("");const C=ki(s,a);R(v,z(v,C),g,function(s,a){return En(s)?s.nextSibling(a):a.nextSibling}(v,C),!1)}a[s.index]=l=fp(d,a,g,s),ac(a,l)}return new Ya(l,s,a)}const Lf={};class MC extends as{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Mr(a);return new xC(l,this.ngModule)}}function fs(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}const xv=new Bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kd});class xC extends fv{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=a.selectors.map(lw).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return fs(this.componentDef.inputs)}get outputs(){return fs(this.componentDef.outputs)}create(a,l,d,g){const v=(g=g||this.ngModule)?function(s,a){return{get:(l,d,g)=>{const v=s.get(l,Lf,g);return v!==Lf||d===Lf?v:a.get(l,d,g)}}}(a,g.injector):a,C=v.get(yv,_t),E=v.get(mf,null),D=C.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",N=d?function(s,a,l){if(En(s))return s.selectRootElement(a,l===Qe.ShadowDom);let d="string"==typeof a?s.querySelector(a):a;return d.textContent="",d}(D,d,this.componentDef.encapsulation):Ld(C.createRenderer(null,this.componentDef),M,function(s){const a=s.toLowerCase();return"svg"===a?hn:"math"===a?"http://www.w3.org/1998/MathML/":null}(M)),k=this.componentDef.onPush?576:528,U=function(s,a){return{components:[],scheduler:s||kd,clean:mR,playerHandler:a||null,flags:0}}(),Y=Er(0,null,null,1,0,null,null,null,null,null),ee=Pu(null,Y,U,k,null,null,C,D,E,v);let ye,ae;Ca(ee);try{const ke=function(s,a,l,d,g,v){const C=l[1];l[20]=s;const D=oc(C,20,2,"#host",null),M=D.mergedAttrs=a.hostAttrs;null!==M&&(L0(D,M,!0),null!==s&&(Sh(g,s,M),null!==D.classes&&f0(g,s,D.classes),null!==D.styles&&rw(g,s,D.styles)));const N=d.createRenderer(s,a),k=Pu(l,b0(a),null,a.onPush?64:16,l[20],D,d,N,v||null,null);return C.firstCreatePass&&(Ta(hu(D,l),C,a.type),M0(C,D),R0(D,l.length,1)),ac(l,k),l[20]=k}(N,this.componentDef,ee,C,D);if(N)if(d)Sh(D,N,["ng-version",oC.full]);else{const{attrs:De,classes:lt}=function(s){const a=[],l=[];let d=1,g=2;for(;d<s.length;){let v=s[d];if("string"==typeof v)2===g?""!==v&&a.push(v,s[++d]):8===g&&l.push(v);else{if(!So(g))break;g=v}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);De&&Sh(D,N,De),lt&&lt.length>0&&f0(D,N,lt.join(" "))}if(ae=Is(Y,20),void 0!==l){const De=ae.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const Et=l[lt];De.push(null!=Et?Array.from(Et):null)}}ye=function(s,a,l,d,g){const v=l[1],C=function(s,a,l){const d=Sn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),N0(s,d,a,oi(s,a,1,null),l));const g=pu(a,s,d.directiveStart,d);Wn(g,a);const v=ki(d,a);return v&&Wn(v,a),g}(v,l,a);if(d.components.push(C),s[8]=C,g&&g.forEach(D=>D(C,a)),a.contentQueries){const D=Sn();a.contentQueries(1,C,D.directiveStart)}const E=Sn();return!v.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(eo(E.index),D0(l[1],E,0,E.directiveStart,E.directiveEnd,a),A0(a,C)),C}(ke,this.componentDef,ee,U,[OA]),dp(Y,ee,null)}finally{zo()}return new ID(this.componentType,ye,wc(ae,ee),ee,ae)}}class ID extends class{}{constructor(a,l,d,g,v){super(),this.location=d,this._rootLView=g,this._tNode=v,this.instance=l,this.hostView=this.changeDetectorRef=new T1(g),this.componentType=a}get injector(){return new gu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}const Vf=new Map;class z1 extends ia{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new MC(this);const d=Pi(a),g=a[pt]||null;g&&lf(g),this._bootstrapComponents=bi(d.bootstrap),this._r3Injector=qa(a,l,[{provide:ia,useValue:this},{provide:as,useValue:this.componentFactoryResolver}],ce(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=_n.THROW_IF_NOT_FOUND,d=Ye.Default){return a===_n||a===ia||a===Xs?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class OC extends Qp{constructor(a){super(),this.moduleType=a,null!==Pi(a)&&function(s){const a=new Set;!function l(d){const g=Pi(d,!0),v=g.id;null!==v&&(function(s,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${s} - ${ce(a)} vs ${ce(a.name)}`)}(v,Vf.get(v),d),Vf.set(v,d));const C=bi(g.imports);for(const E of C)a.has(E)||(a.add(E),l(E))}(s)}(a)}create(a){return new z1(this.moduleType,a)}}function lg(s,a,l,d,g){return function(s,a,l,d,g,v,C){const E=a+l;return function(s,a,l,d){const g=si(s,a,l);return si(s,a+1,d)||g}(s,E,g,v)?function(s,a,l){return s[a]=l}(s,E+2,C?d.call(C,g,v):d(g,v)):function(s,a){const l=s[a];return l===At?void 0:l}(s,E+2)}(Me(),function(){const s=mt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}(),s,a,l,d,g)}function kC(s){return a=>{setTimeout(s,void 0,a)}}const hs=class extends p.xQ{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var g,v,C;let E=a,D=l||(()=>null),M=d;if(a&&"object"==typeof a){const k=a;E=null===(g=k.next)||void 0===g?void 0:g.bind(k),D=null===(v=k.error)||void 0===v?void 0:v.bind(k),M=null===(C=k.complete)||void 0===C?void 0:C.bind(k)}this.__isAsync&&(D=kC(D),E&&(E=kC(E)),M&&(M=kC(M)));const N=super.subscribe({next:E,error:D,complete:M});return a instanceof me.w&&a.add(N),N}};function tM(){return this._results[$d()]()}class Ja{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=$d(),d=Ja.prototype;d[l]||(d[l]=tM)}get changes(){return this._changes||(this._changes=new hs)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const g=mr(a);(this._changesDetected=!function(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let g=s[d],v=a[d];if(l&&(g=l(g),v=l(v)),v!==g)return!1}return!0}(d._results,g,l))&&(d._results=g,d.length=g.length,d.last=g[this.length-1],d.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Fv{constructor(a){this.queryList=a,this.matches=null}clone(){return new Fv(this.queryList)}setDirty(){this.queryList.setDirty()}}class LC{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,g=[];for(let v=0;v<d;v++){const C=l.getByIndex(v);g.push(this.queries[C.indexInDeclarationView].clone())}return new LC(g)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Lv(a,l).matches&&this.queries[l].setDirty()}}class FD{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class VC{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const g=null!==l?l.length:0,v=this.getByIndex(d).embeddedTView(a,g);v&&(v.indexInDeclarationView=d,null!==l?l.push(v):l=[v])}return null!==l?new VC(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class UC{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new UC(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let g=0;g<d.length;g++){const v=d[g];this.matchTNodeWithReadOption(a,l,BC(l,v)),this.matchTNodeWithReadOption(a,l,Pn(l,a,v,!1,!1))}else d===wf?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Pn(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const g=this.metadata.read;if(null!==g)if(g===zn||g===Kp||g===wf&&4&l.type)this.addMatch(l.index,-2);else{const v=Pn(l,a,g,!1,!1);null!==v&&this.addMatch(l.index,v)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function BC(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function rM(s,a,l,d){return-1===l?function(s,a){return 11&s.type?wc(s,a):4&s.type?Dr(s,a):null}(a,s):-2===l?function(s,a,l){return l===zn?wc(a,s):l===wf?Dr(a,s):l===Kp?cC(a,s):void 0}(s,a,d):pu(s,s[1],l,a)}function kD(s,a,l,d){const g=a[19].queries[d];if(null===g.matches){const v=s.data,C=l.matches,E=[];for(let D=0;D<C.length;D+=2){const M=C[D];E.push(M<0?null:rM(a,v[M],C[D+1],l.metadata.read))}g.matches=E}return g.matches}function jC(s,a,l,d){const g=s.queries.getByIndex(l),v=g.matches;if(null!==v){const C=kD(s,a,g,l);for(let E=0;E<v.length;E+=2){const D=v[E];if(D>0)d.push(C[E/2]);else{const M=v[E+1],N=a[-D];for(let k=10;k<N.length;k++){const U=N[k];U[17]===U[3]&&jC(U[1],U,M,d)}if(null!==N[9]){const k=N[9];for(let U=0;U<k.length;U++){const Y=k[U];jC(Y[1],Y,M,d)}}}}}return d}function LD(s){const a=Me(),l=Wt(),d=id();ba(d+1);const g=Lv(l,d);if(s.dirty&&tm(a)===(2==(2&g.metadata.flags))){if(null===g.matches)s.reset([]);else{const v=g.crossesNgTemplate?jC(l,a,d,[]):kD(l,a,g,d);s.reset(v,oD),s.notifyOnChanges()}return!0}return!1}function VD(s,a,l){const d=Wt();d.firstCreatePass&&(kv(d,new FD(s,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),HC(d,Me(),a)}function UD(s,a,l,d){const g=Wt();if(g.firstCreatePass){const v=Sn();kv(g,new FD(a,l,d),v.index),function(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(g,s),2==(2&l)&&(g.staticContentQueries=!0)}HC(g,Me(),l)}function Ii(){return s=Me(),a=id(),s[19].queries[a].queryList;var s,a}function HC(s,a,l){const d=new Ja(4==(4&l));E0(s,a,d,d.destroy),null===a[19]&&(a[19]=new LC),a[19].queries.push(new Fv(d))}function kv(s,a,l){null===s.queries&&(s.queries=new VC),s.queries.track(new UC(a,l))}function Lv(s,a){return s.queries.getByIndex(a)}function GC(s,a){return Dr(s,a)}const Gv=new Bn("Application Initializer");let ll=(()=>{class s{constructor(l){this.appInits=l,this.resolve=dr,this.reject=dr,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,g)=>{this.resolve=d,this.reject=g})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const v=this.appInits[g]();if(Ap(v))l.push(v);else if(Tr(v)){const C=new Promise((E,D)=>{v.subscribe({complete:E,error:D})});l.push(C)}}Promise.all(l).then(()=>{d()}).catch(g=>{this.reject(g)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(pn(Gv,8))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();const cS=new Bn("AppId"),Xa={provide:cS,useFactory:function(){return`${JC()}${JC()}${JC()}`},deps:[]};function JC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dS=new Bn("Platform Initializer"),fS=new Bn("Platform ID"),hS=new Bn("appBootstrapListener");let pS=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();const _g=new Bn("LocaleId"),XC=new Bn("DefaultCurrencyCode");class mS{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}const bg=function(s){return new OC(s)},yS=bg,CM=function(s){return Promise.resolve(bg(s))},vS=function(s){const a=bg(s),d=bi(Pi(s).declarations).reduce((g,v)=>{const C=Mr(v);return C&&g.push(new xC(C)),g},[]);return new mS(a,d)},_S=vS,$v=function(s){return Promise.resolve(vS(s))};let Yf=(()=>{class s{constructor(){this.compileModuleSync=yS,this.compileModuleAsync=CM,this.compileModuleAndAllComponentsSync=_S,this.compileModuleAndAllComponentsAsync=$v}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();const rE=(()=>Promise.resolve(0))();function cl(s){"undefined"==typeof Zone?rE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Yi{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hs(!1),this.onMicrotaskEmpty=new hs(!1),this.onStable=new hs(!1),this.onError=new hs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!d&&l,g.shouldCoalesceRunChangeDetection=d,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function(){let s=dn.requestAnimationFrame,a=dn.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(s){const a=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(dn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Wv(s),s.isCheckStableRunning=!0,Qf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Wv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,g,v,C,E)=>{try{return DS(s),l.invokeTask(g,v,C,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||s.shouldCoalesceRunChangeDetection)&&a(),SS(s)}},onInvoke:(l,d,g,v,C,E,D)=>{try{return DS(s),l.invoke(g,v,C,E,D)}finally{s.shouldCoalesceRunChangeDetection&&a(),SS(s)}},onHasTask:(l,d,g,v)=>{l.hasTask(g,v),d===g&&("microTask"==v.change?(s._hasPendingMicrotasks=v.microTask,Wv(s),Qf(s)):"macroTask"==v.change&&(s.hasPendingMacrotasks=v.macroTask))},onHandleError:(l,d,g,v)=>(l.handleError(g,v),s.runOutsideAngular(()=>s.onError.emit(v)),!1)})}(g)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,g){const v=this._inner,C=v.scheduleEventTask("NgZoneEvent: "+g,a,wM,dr,dr);try{return v.runTask(C,l,d)}finally{v.cancelTask(C)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const wM={};function Qf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Wv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function DS(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function SS(s){s._nesting--,Qf(s)}class TM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hs,this.onMicrotaskEmpty=new hs,this.onStable=new hs,this.onError=new hs}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,g){return a.apply(l,d)}}let IS=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yi.assertNotInAngularZone(),cl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cl(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,g){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==v),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:g})}whenStable(l,d,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,g){return[]}}return s.\u0275fac=function(l){return new(l||s)(pn(Yi))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})(),zv=(()=>{class s{constructor(){this._applications=new Map,Yv.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Yv.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();class iE{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function AS(s){Yv=s}let Yv=new iE,oE=!0,Cg=!1;function on(){return Cg=!0,oE}function MS(){if(Cg)throw new Error("Cannot enable prod mode after platform setup.");oE=!1}let Uo;const kc=new Bn("AllowMultipleToken");class IM{constructor(a,l){this.name=a,this.token=l}}function Kn(s,a,l=[]){const d=`Platform: ${a}`,g=new Bn(d);return(v=[])=>{let C=sE();if(!C||C.injector.get(kc,!1))if(s)s(l.concat(v).concat({provide:g,useValue:!0}));else{const E=l.concat(v).concat({provide:g,useValue:!0},{provide:uc,useValue:"platform"});!function(s){if(Uo&&!Uo.destroyed&&!Uo.injector.get(kc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Uo=s.get(aE);const a=s.get(dS,null);a&&a.forEach(l=>l())}(_n.create({providers:E,name:d}))}return function(s){const a=sE();if(!a)throw new Error("No platform exists!");if(!a.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return a}(g)}}function sE(){return Uo&&!Uo.destroyed?Uo:null}let aE=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const E=function(s,a){let l;return l="noop"===s?new TM:("zone.js"===s?void 0:s)||new Yi({enableLongStackTrace:on(),shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),D=[{provide:Yi,useValue:E}];return E.run(()=>{const M=_n.create({providers:D,parent:this.injector,name:l.moduleType.name}),N=l.create(M),k=N.injector.get(Ys,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const U=E.onError.subscribe({next:Y=>{k.handleError(Y)}});N.onDestroy(()=>{uE(this._modules,N),U.unsubscribe()})}),function(s,a,l){try{const d=l();return Ap(d)?d.catch(g=>{throw a.runOutsideAngular(()=>s.handleError(g)),g}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(k,E,()=>{const U=N.injector.get(ll);return U.runInitializers(),U.donePromise.then(()=>(lf(N.injector.get(_g,Jy)||Jy),this._moduleDoBootstrap(N),N))})})}bootstrapModule(l,d=[]){const g=dl({},d);return function(s,a,l){const d=new OC(l);return Promise.resolve(d)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,g))}_moduleDoBootstrap(l){const d=l.injector.get(fl);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(g=>d.bootstrap(g));else{if(!l.instance.ngDoBootstrap)throw new Error(`The module ${ce(l.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(pn(_n))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();function dl(s,a){return Array.isArray(a)?a.reduce(dl,s):Object.assign(Object.assign({},s),a)}let fl=(()=>{class s{constructor(l,d,g,v,C){this._zone=l,this._injector=d,this._exceptionHandler=g,this._componentFactoryResolver=v,this._initStatus=C,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),D=new P.y(M=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Yi.assertNotInAngularZone(),cl(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{N.unsubscribe(),k.unsubscribe()}});this.isStable=(0,re.T)(E,D.pipe((0,we.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let g;g=l instanceof fv?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(g.componentType);const v=function(s){return s.isBoundToModule}(g)?void 0:this._injector.get(ia),E=g.create(_n.NULL,[],d||g.selector,v),D=E.location.nativeElement,M=E.injector.get(IS,null),N=M&&E.injector.get(zv);return M&&N&&N.registerApplication(D,M),E.onDestroy(()=>{this.detachView(E.hostView),uE(this.components,E),N&&N.unregisterApplication(D)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;uE(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(hS,[]).concat(this._bootstrapListeners).forEach(g=>g(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(pn(Yi),pn(_n),pn(Ys),pn(as),pn(ll))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();function uE(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}class PS{}class RM{}const NM={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let OM=(()=>{class s{constructor(l,d){this._compiler=l,this._config=d||NM}load(l){return this.loadAndCompile(l)}loadAndCompile(l){let[d,g]=l.split("#");return void 0===g&&(g="default"),$(8255)(d).then(v=>v[g]).then(v=>kS(v,d,g)).then(v=>this._compiler.compileModuleAsync(v))}loadFactory(l){let[d,g]=l.split("#"),v="NgFactory";return void 0===g&&(g="default",v=""),$(8255)(this._config.factoryPathPrefix+d+this._config.factoryPathSuffix).then(C=>C[g+v]).then(C=>kS(C,d,g))}}return s.\u0275fac=function(l){return new(l||s)(pn(Yf),pn(RM,8))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();function kS(s,a,l){if(!s)throw new Error(`Cannot find '${l}' in '${a}'`);return s}const VM=function(s){return null},HS=Kn(null,"core",[{provide:fS,useValue:"unknown"},{provide:aE,deps:[_n]},{provide:zv,deps:[]},{provide:pS,deps:[]}]),jc=[{provide:fl,useClass:fl,deps:[Yi,_n,Ys,as,ll]},{provide:xv,deps:[Yi],useFactory:function(s){let a=[];return s.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:ll,useClass:ll,deps:[[new Co,Gv]]},{provide:Yf,useClass:Yf,deps:[]},Xa,{provide:Wp,useFactory:function(){return Dc},deps:[]},{provide:_f,useFactory:function(){return fD},deps:[]},{provide:_g,useFactory:function(s){return lf(s=s||"undefined"!=typeof $localize&&$localize.locale||Jy),s},deps:[[new Ra(_g),new Co,new Eo]]},{provide:XC,useValue:"USD"}];let qS=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(pn(fl))},s.\u0275mod=ph({type:s}),s.\u0275inj=xn({providers:jc}),s})()},57:(et,xe,$)=>{"use strict";$.d(xe,{hO:()=>cn,xv:()=>qe,Dh:()=>Ie,HU:()=>te,GT:()=>Se,sI:()=>gn,on:()=>$e,ss:()=>H,pX:()=>ve,yq:()=>gt});var p=$(7771),me=$(3637),P=$(3342),re=$(3101),we=$(6136),ie=$(7716),be=$(2329);function ce(){}et=$.hmd(et);class oe{constructor(pe,ge=p.N){this.zone=pe,this.delegate=ge}now(){return this.delegate.now()}schedule(pe,ge,le){const Ae=this.zone;return this.delegate.schedule(function(ft){Ae.runGuarded(()=>{pe.apply(this,[ft])})},ge,le)}}class W{constructor(pe){this.zone=pe,this.task=null}call(pe,ge){const le=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ce,{},ce,ce)),ge.pipe((0,P.b)({next:le,complete:le,error:le})).subscribe(pe).add(le)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class te{constructor(pe){this.ngZone=pe,this.outsideAngular=pe.runOutsideAngular(()=>new oe(Zone.current)),this.insideAngular=pe.run(()=>new oe(Zone.current,me.z))}}function H(fe){return function(ge){return(ge=ge.lift(new W(fe.ngZone))).pipe((0,re.R)(fe.outsideAngular),(0,we.QV)(fe.insideAngular))}}const J=["ngOnDestroy"],ve=(fe,pe,ge,le={})=>new Proxy(fe,{get:(Ae,he)=>ge.runOutsideAngular(()=>{var ft;if(fe[he])return(null===(ft=null==le?void 0:le.spy)||void 0===ft?void 0:ft.get)&&le.spy.get(he,fe[he]),fe[he];if(J.indexOf(he)>-1)return()=>{};const ht=pe.toPromise().then(mn=>{const at=mn&&mn[he];return"function"==typeof at?at.bind(mn):at&&at.then?at.then(rt=>ge.run(()=>rt)):ge.run(()=>at)});return new Proxy(()=>{},{get:(mn,at)=>ht[at],apply:(mn,at,rt)=>ht.then(ze=>{var Ke;const xt=ze&&ze(...rt);return(null===(Ke=null==le?void 0:le.spy)||void 0===Ke?void 0:Ke.apply)&&le.spy.apply(he,rt,xt),xt})})})}),Se=(fe,pe)=>{pe.forEach(ge=>{Object.getOwnPropertyNames(ge.prototype||ge).forEach(le=>{Object.defineProperty(fe.prototype,le,Object.getOwnPropertyDescriptor(ge.prototype||ge,le))})})},Ie=new ie.OlP("angularfire2.app.options"),qe=new ie.OlP("angularfire2.app.nameOrConfig"),Fe=new ie.GfV("6.1.5");function $e(fe,pe,ge){const Ae="object"==typeof ge&&ge||{};Ae.name=Ae.name||"string"==typeof ge&&ge||"[DEFAULT]";const ft=be.Z.apps.filter(ht=>ht&&ht.name===Ae.name)[0]||pe.runOutsideAngular(()=>be.Z.initializeApp(fe,Ae));try{JSON.stringify(fe)!==JSON.stringify(ft.options)&&Be("error",`${ft.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ht){}return ft}const gt=()=>{Be("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},Be=(fe,...pe)=>{(0,ie.X6Q)()&&"undefined"!=typeof console&&console[fe](...pe)};function gn(fe,pe,ge,le,Ae){const[he,...ft]=globalThis.\u0275AngularfireInstanceCache.get(fe)||[];if(he){try{Ae.some((ht,mn)=>{const at=ft[mn];return ht&&"object"==typeof ht?JSON.stringify(ht)!==JSON.stringify(at):ht!==at})&&Be("error",`${pe} was already initialized on the ${ge.name} Firebase App instance with different settings.${et.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(ht){}return he}{const ht=le();return globalThis.\u0275AngularfireInstanceCache.set(fe,[ht,...Ae]),ht}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const Kt={provide:class{},useFactory:$e,deps:[Ie,ie.R0b,[new ie.FiY,qe]]};let cn=(()=>{class fe{constructor(ge){be.Z.registerVersion("angularfire",Fe.full,ge.toString()),be.Z.registerVersion("angular",ie.q4F.full)}static initializeApp(ge,le){return{ngModule:fe,providers:[{provide:Ie,useValue:ge},{provide:qe,useValue:le}]}}}return fe.\u0275fac=function(ge){return new(ge||fe)(ie.LFG(ie.Lbi))},fe.\u0275mod=ie.oAB({type:fe}),fe.\u0275inj=ie.cJS({providers:[Kt]}),fe})()},9759:(et,xe,$)=>{"use strict";$.d(xe,{Z:()=>rt});var we,Be,p=$(4762),me=$(4685),P=$(6034),re=$(300),ie=((we={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",we["bad-app-name"]="Illegal App name: '{$appName}",we["duplicate-app"]="Firebase App named '{$appName}' already exists",we["app-deleted"]="Firebase App named '{$appName}' already deleted",we["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",we["invalid-log-argument"]="First argument to `onLog` must be null or a function.",we),be=new me.LL("app","Firebase",ie),ce="@firebase/app",en="[DEFAULT]",gn=((Be={})[ce]="fire-core",Be["@firebase/analytics"]="fire-analytics",Be["@firebase/app-check"]="fire-app-check",Be["@firebase/auth"]="fire-auth",Be["@firebase/database"]="fire-rtdb",Be["@firebase/functions"]="fire-fn",Be["@firebase/installations"]="fire-iid",Be["@firebase/messaging"]="fire-fcm",Be["@firebase/performance"]="fire-perf",Be["@firebase/remote-config"]="fire-rc",Be["@firebase/storage"]="fire-gcs",Be["@firebase/firestore"]="fire-fst",Be["fire-js"]="fire-js",Be["firebase-wrapper"]="fire-js-all",Be),Kt=new re.Yd("@firebase/app"),cn=function(){function ze(Ke,xt,yn){var Zt=this;this.firebase_=yn,this.isDeleted_=!1,this.name_=xt.name,this.automaticDataCollectionEnabled_=xt.automaticDataCollectionEnabled||!1,this.options_=(0,me.p$)(Ke),this.container=new P.H0(xt.name),this._addComponent(new P.wA("app",function(){return Zt},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(xi){return Zt._addComponent(xi)})}return Object.defineProperty(ze.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Ke){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Ke},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),ze.prototype.delete=function(){var Ke=this;return new Promise(function(xt){Ke.checkDestroyed_(),xt()}).then(function(){return Ke.firebase_.INTERNAL.removeApp(Ke.name_),Promise.all(Ke.container.getProviders().map(function(xt){return xt.delete()}))}).then(function(){Ke.isDeleted_=!0})},ze.prototype._getService=function(Ke,xt){var yn;void 0===xt&&(xt=en),this.checkDestroyed_();var Zt=this.container.getProvider(Ke);return!Zt.isInitialized()&&"EXPLICIT"===(null===(yn=Zt.getComponent())||void 0===yn?void 0:yn.instantiationMode)&&Zt.initialize(),Zt.getImmediate({identifier:xt})},ze.prototype._removeServiceInstance=function(Ke,xt){void 0===xt&&(xt=en),this.container.getProvider(Ke).clearInstance(xt)},ze.prototype._addComponent=function(Ke){try{this.container.addComponent(Ke)}catch(xt){Kt.debug("Component "+Ke.name+" failed to register with FirebaseApp "+this.name,xt)}},ze.prototype._addOrOverwriteComponent=function(Ke){this.container.addOrOverwriteComponent(Ke)},ze.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},ze.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw be.create("app-deleted",{appName:this.name_})},ze}();cn.prototype.name&&cn.prototype.options||cn.prototype.delete||console.log("dc");var le=function ge(){var ze=function(ze){var Ke={},xt=new Map,yn={__esModule:!0,initializeApp:function(zt,Nt){void 0===Nt&&(Nt={}),("object"!=typeof Nt||null===Nt)&&(Nt={name:Nt});var pr=Nt;void 0===pr.name&&(pr.name=en);var Ye=pr.name;if("string"!=typeof Ye||!Ye)throw be.create("bad-app-name",{appName:String(Ye)});if((0,me.r3)(Ke,Ye))throw be.create("duplicate-app",{appName:Ye});var bn=new ze(zt,pr,yn);return Ke[Ye]=bn,bn},app:xi,registerVersion:function(zt,Nt,hr){var pr,Ye=null!==(pr=gn[zt])&&void 0!==pr?pr:zt;hr&&(Ye+="-"+hr);var bn=Ye.match(/\s|\//),qn=Nt.match(/\s|\//);if(bn||qn){var Un=['Unable to register library "'+Ye+'" with version "'+Nt+'":'];return bn&&Un.push('library name "'+Ye+'" contains illegal characters (whitespace or "/")'),bn&&qn&&Un.push("and"),qn&&Un.push('version name "'+Nt+'" contains illegal characters (whitespace or "/")'),void Kt.warn(Un.join(" "))}Ki(new P.wA(Ye+"-version",function(){return{library:Ye,version:Nt}},"VERSION"))},setLogLevel:re.Ub,onLog:function(zt,Nt){if(null!==zt&&"function"!=typeof zt)throw be.create("invalid-log-argument");(0,re.Am)(zt,Nt)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:Ki,removeApp:function(zt){delete Ke[zt]},components:xt,useAsService:function(zt,Nt){return"serverAuth"===Nt?null:Nt}}};function xi(zt){if(!(0,me.r3)(Ke,zt=zt||en))throw be.create("no-app",{appName:zt});return Ke[zt]}function Ki(zt){var Nt=zt.name;if(xt.has(Nt))return Kt.debug("There were multiple attempts to register component "+Nt+"."),"PUBLIC"===zt.type?yn[Nt]:null;if(xt.set(Nt,zt),"PUBLIC"===zt.type){var hr=function(qn){if(void 0===qn&&(qn=xi()),"function"!=typeof qn[Nt])throw be.create("invalid-app-argument",{appName:Nt});return qn[Nt]()};void 0!==zt.serviceProps&&(0,me.ZB)(hr,zt.serviceProps),yn[Nt]=hr,ze.prototype[Nt]=function(){for(var qn=[],Un=0;Un<arguments.length;Un++)qn[Un]=arguments[Un];return this._getService.bind(this,Nt).apply(this,zt.multipleInstances?qn:[])}}for(var pr=0,Ye=Object.keys(Ke);pr<Ye.length;pr++)Ke[Ye[pr]]._addComponent(zt);return"PUBLIC"===zt.type?yn[Nt]:null}return yn.default=yn,Object.defineProperty(yn,"apps",{get:function(){return Object.keys(Ke).map(function(zt){return Ke[zt]})}}),xi.App=ze,yn}(cn);return ze.INTERNAL=(0,p.pi)((0,p.pi)({},ze.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function(xt){(0,me.ZB)(ze,xt)},createSubscribe:me.ne,ErrorFactory:me.LL,deepExtend:me.ZB}),ze}(),Ae=function(){function ze(Ke){this.container=Ke}return ze.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(xt){if(function(ze){var Ke=ze.getComponent();return"VERSION"===(null==Ke?void 0:Ke.type)}(xt)){var yn=xt.getImmediate();return yn.library+"/"+yn.version}return null}).filter(function(xt){return xt}).join(" ")},ze}();if((0,me.jU)()&&void 0!==self.firebase){Kt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ht=self.firebase.SDK_VERSION;ht&&ht.indexOf("LITE")>=0&&Kt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var mn=le.initializeApp;le.initializeApp=function(){for(var ze=[],Ke=0;Ke<arguments.length;Ke++)ze[Ke]=arguments[Ke];return(0,me.UG)()&&Kt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),mn.apply(void 0,ze)};var ze,at=le;(ze=at).INTERNAL.registerComponent(new P.wA("platform-logger",function(xt){return new Ae(xt)},"PRIVATE")),ze.registerVersion(ce,"0.6.29",undefined),ze.registerVersion("fire-js","");const rt=at},6034:(et,xe,$)=>{"use strict";$.d(xe,{wA:()=>P,H0:()=>ce,zt:()=>we});var p=$(4762),me=$(4685),P=function(){function oe(W,te,H){this.name=W,this.instanceFactory=te,this.type=H,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return oe.prototype.setInstantiationMode=function(W){return this.instantiationMode=W,this},oe.prototype.setMultipleInstances=function(W){return this.multipleInstances=W,this},oe.prototype.setServiceProps=function(W){return this.serviceProps=W,this},oe.prototype.setInstanceCreatedCallback=function(W){return this.onInstanceCreated=W,this},oe}(),re="[DEFAULT]",we=function(){function oe(W,te){this.name=W,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return oe.prototype.get=function(W){var te=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(te)){var H=new me.BH;if(this.instancesDeferred.set(te,H),this.isInitialized(te)||this.shouldAutoInitialize())try{var J=this.getOrInitializeService({instanceIdentifier:te});J&&H.resolve(J)}catch(ve){}}return this.instancesDeferred.get(te).promise},oe.prototype.getImmediate=function(W){var te,H=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),J=null!==(te=null==W?void 0:W.optional)&&void 0!==te&&te;if(!this.isInitialized(H)&&!this.shouldAutoInitialize()){if(J)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:H})}catch(ve){if(J)return null;throw ve}},oe.prototype.getComponent=function(){return this.component},oe.prototype.setComponent=function(W){var te,H;if(W.name!==this.name)throw Error("Mismatching Component "+W.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=W,this.shouldAutoInitialize()){if(function(oe){return"EAGER"===oe.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:re})}catch($e){}try{for(var J=(0,p.XA)(this.instancesDeferred.entries()),ve=J.next();!ve.done;ve=J.next()){var Se=(0,p.CR)(ve.value,2),qe=Se[1],Pe=this.normalizeInstanceIdentifier(Se[0]);try{var Fe=this.getOrInitializeService({instanceIdentifier:Pe});qe.resolve(Fe)}catch($e){}}}catch($e){te={error:$e}}finally{try{ve&&!ve.done&&(H=J.return)&&H.call(J)}finally{if(te)throw te.error}}}},oe.prototype.clearInstance=function(W){void 0===W&&(W=re),this.instancesDeferred.delete(W),this.instances.delete(W)},oe.prototype.delete=function(){return(0,p.mG)(this,void 0,void 0,function(){var W;return(0,p.Jh)(this,function(te){switch(te.label){case 0:return W=Array.from(this.instances.values()),[4,Promise.all((0,p.ev)((0,p.ev)([],(0,p.CR)(W.filter(function(H){return"INTERNAL"in H}).map(function(H){return H.INTERNAL.delete()}))),(0,p.CR)(W.filter(function(H){return"_delete"in H}).map(function(H){return H._delete()}))))];case 1:return te.sent(),[2]}})})},oe.prototype.isComponentSet=function(){return null!=this.component},oe.prototype.isInitialized=function(W){return void 0===W&&(W=re),this.instances.has(W)},oe.prototype.initialize=function(W){var te,H;void 0===W&&(W={});var J=W.options,ve=void 0===J?{}:J,Se=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(Se))throw Error(this.name+"("+Se+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Ie=this.getOrInitializeService({instanceIdentifier:Se,options:ve});try{for(var qe=(0,p.XA)(this.instancesDeferred.entries()),Pe=qe.next();!Pe.done;Pe=qe.next()){var Fe=(0,p.CR)(Pe.value,2),gt=Fe[1];Se===this.normalizeInstanceIdentifier(Fe[0])&&gt.resolve(Ie)}}catch(en){te={error:en}}finally{try{Pe&&!Pe.done&&(H=qe.return)&&H.call(qe)}finally{if(te)throw te.error}}return Ie},oe.prototype.onInit=function(W,te){var H,J=this.normalizeInstanceIdentifier(te),ve=null!==(H=this.onInitCallbacks.get(J))&&void 0!==H?H:new Set;ve.add(W),this.onInitCallbacks.set(J,ve);var Se=this.instances.get(J);return Se&&W(Se,J),function(){ve.delete(W)}},oe.prototype.invokeOnInitCallbacks=function(W,te){var H,J,ve=this.onInitCallbacks.get(te);if(ve)try{for(var Se=(0,p.XA)(ve),Ie=Se.next();!Ie.done;Ie=Se.next()){var qe=Ie.value;try{qe(W,te)}catch(Pe){}}}catch(Pe){H={error:Pe}}finally{try{Ie&&!Ie.done&&(J=Se.return)&&J.call(Se)}finally{if(H)throw H.error}}},oe.prototype.getOrInitializeService=function(W){var te=W.instanceIdentifier,H=W.options,J=void 0===H?{}:H,ve=this.instances.get(te);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:ie(te),options:J}),this.instances.set(te,ve),this.invokeOnInitCallbacks(ve,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,ve)}catch(Se){}return ve||null},oe.prototype.normalizeInstanceIdentifier=function(W){return void 0===W&&(W=re),this.component?this.component.multipleInstances?W:re:W},oe.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},oe}();function ie(oe){return oe===re?void 0:oe}var ce=function(){function oe(W){this.name=W,this.providers=new Map}return oe.prototype.addComponent=function(W){var te=this.getProvider(W.name);if(te.isComponentSet())throw new Error("Component "+W.name+" has already been registered with "+this.name);te.setComponent(W)},oe.prototype.addOrOverwriteComponent=function(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)},oe.prototype.getProvider=function(W){if(this.providers.has(W))return this.providers.get(W);var te=new we(W,this);return this.providers.set(W,te),te},oe.prototype.getProviders=function(){return Array.from(this.providers.values())},oe}()},9192:(et,xe,$)=>{"use strict";var p=$(9759),me=$(6034),P=$(4685),re=$(4762),we=$(300);et=$.hmd(et);var ce="";function oe(h){ce=h}var h,W=function(){function h(f){this.domStorage_=f,this.prefix_="firebase:"}return h.prototype.set=function(f,y){null==y?this.domStorage_.removeItem(this.prefixedName_(f)):this.domStorage_.setItem(this.prefixedName_(f),(0,P.Pz)(y))},h.prototype.get=function(f){var y=this.domStorage_.getItem(this.prefixedName_(f));return null==y?null:(0,P.cI)(y)},h.prototype.remove=function(f){this.domStorage_.removeItem(this.prefixedName_(f))},h.prototype.prefixedName_=function(f){return this.prefix_+f},h.prototype.toString=function(){return this.domStorage_.toString()},h}(),te=function(){function h(){this.cache_={},this.isInMemoryStorage=!0}return h.prototype.set=function(f,y){null==y?delete this.cache_[f]:this.cache_[f]=y},h.prototype.get=function(f){return(0,P.r3)(this.cache_,f)?this.cache_[f]:null},h.prototype.remove=function(f){delete this.cache_[f]},h}(),H=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){var f=window[h];return f.setItem("firebase:sentinel","cache"),f.removeItem("firebase:sentinel"),new W(f)}}catch(y){}return new te},J=H("localStorage"),ve=H("sessionStorage"),Se=new we.Yd("@firebase/database"),Ie=(h=1,function(){return h++}),qe=function(h){var f=(0,P.dS)(h),y=new P.gQ;y.update(f);var b=y.digest();return P.US.encodeByteArray(b)},Pe=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];for(var y="",b=0;b<h.length;b++){var T=h[b];Array.isArray(T)||T&&"object"==typeof T&&"number"==typeof T.length?y+=Pe.apply(null,T):y+="object"==typeof T?(0,P.Pz)(T):T,y+=" "}return y},Fe=null,$e=!0,gt=function(h,f){(0,P.hu)(!f||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(Se.logLevel=we.in.VERBOSE,Fe=Se.log.bind(Se),f&&ve.set("logging_enabled",!0)):"function"==typeof h?Fe=h:(Fe=null,ve.remove("logging_enabled"))},Be=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];if(!0===$e&&($e=!1,null===Fe&&!0===ve.get("logging_enabled")&&gt(!0)),Fe){var y=Pe.apply(null,h);Fe(y)}},en=function(h){return function(){for(var f=[],y=0;y<arguments.length;y++)f[y]=arguments[y];Be.apply(void 0,(0,re.ev)([h],(0,re.CR)(f)))}},gn=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];var y="FIREBASE INTERNAL ERROR: "+Pe.apply(void 0,(0,re.ev)([],(0,re.CR)(h)));Se.error(y)},Kt=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];var y="FIREBASE FATAL ERROR: "+Pe.apply(void 0,(0,re.ev)([],(0,re.CR)(h)));throw Se.error(y),new Error(y)},cn=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];var y="FIREBASE WARNING: "+Pe.apply(void 0,(0,re.ev)([],(0,re.CR)(h)));Se.warn(y)},pe=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},le="[MIN_NAME]",Ae="[MAX_NAME]",he=function(h,f){if(h===f)return 0;if(h===le||f===Ae)return-1;if(f===le||h===Ae)return 1;var y=ur(h),b=ur(f);return null!==y?null!==b?y-b==0?h.length-f.length:y-b:-1:null!==b?1:h<f?-1:1},ft=function(h,f){return h===f?0:h<f?-1:1},ht=function(h,f){if(f&&h in f)return f[h];throw new Error("Missing required key ("+h+") in object: "+(0,P.Pz)(f))},mn=function(h){if("object"!=typeof h||null===h)return(0,P.Pz)(h);var f=[];for(var y in h)f.push(y);f.sort();for(var b="{",T=0;T<f.length;T++)0!==T&&(b+=","),b+=(0,P.Pz)(f[T]),b+=":",b+=mn(h[f[T]]);return b+"}"},at=function(h,f){var y=h.length;if(y<=f)return[h];for(var b=[],T=0;T<y;T+=f)b.push(h.substring(T,T+f>y?y:T+f));return b};function rt(h,f){for(var y in h)h.hasOwnProperty(y)&&f(y,h[y])}var ze=function(h){(0,P.hu)(!pe(h),"Invalid JSON number");var T,I,R,F,V,b=1023;0===h?(I=0,R=0,T=1/h==-1/0?1:0):(T=h<0,(h=Math.abs(h))>=Math.pow(2,1-b)?(I=(F=Math.min(Math.floor(Math.log(h)/Math.LN2),b))+b,R=Math.round(h*Math.pow(2,52-F)-Math.pow(2,52))):(I=0,R=Math.round(h/Math.pow(2,-1074))));var G=[];for(V=52;V;V-=1)G.push(R%2?1:0),R=Math.floor(R/2);for(V=11;V;V-=1)G.push(I%2?1:0),I=Math.floor(I/2);G.push(T?1:0),G.reverse();var z=G.join(""),ue="";for(V=0;V<64;V+=8){var Te=parseInt(z.substr(V,8),2).toString(16);1===Te.length&&(Te="0"+Te),ue+=Te}return ue.toLowerCase()},Zt=new RegExp("^-?(0*)\\d{1,10}$"),xi=-2147483648,xn=2147483647,ur=function(h){if(Zt.test(h)){var f=Number(h);if(f>=xi&&f<=xn)return f}return null},Ki=function(h){try{h()}catch(f){setTimeout(function(){throw cn("Exception was thrown by user callback.",f.stack||""),f},Math.floor(0))}},Es=function(h,f){var y=setTimeout(h,f);return"object"==typeof y&&y.unref&&y.unref(),y},Cl=function(){function h(f,y){var b=this;this.appName_=f,this.appCheckProvider=y,this.appCheck=null==y?void 0:y.getImmediate({optional:!0}),this.appCheck||null==y||y.get().then(function(T){return b.appCheck=T})}return h.prototype.getToken=function(f){var y=this;return this.appCheck?this.appCheck.getToken(f):new Promise(function(b,T){setTimeout(function(){y.appCheck?y.getToken(f).then(b,T):b(null)},0)})},h.prototype.addTokenChangeListener=function(f){var y;null===(y=this.appCheckProvider)||void 0===y||y.get().then(function(b){return b.addTokenListener(f)})},h.prototype.notifyForInvalidToken=function(){cn('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},h}(),zt=function(){function h(f,y,b){var T=this;this.appName_=f,this.firebaseOptions_=y,this.authProvider_=b,this.auth_=null,this.auth_=b.getImmediate({optional:!0}),this.auth_||b.onInit(function(I){return T.auth_=I})}return h.prototype.getToken=function(f){var y=this;return this.auth_?this.auth_.getToken(f).catch(function(b){return b&&"auth/token-not-initialized"===b.code?(Be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(b)}):new Promise(function(b,T){setTimeout(function(){y.auth_?y.getToken(f).then(b,T):b(null)},0)})},h.prototype.addTokenChangeListener=function(f){this.auth_?this.auth_.addAuthTokenListener(f):this.authProvider_.get().then(function(y){return y.addAuthTokenListener(f)})},h.prototype.removeTokenChangeListener=function(f){this.authProvider_.get().then(function(y){return y.removeAuthTokenListener(f)})},h.prototype.notifyForInvalidToken=function(){var f='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';cn(f+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},h}(),Nt=function(){function h(f){this.accessToken=f}return h.prototype.getToken=function(f){return Promise.resolve({accessToken:this.accessToken})},h.prototype.addTokenChangeListener=function(f){f(this.accessToken)},h.prototype.removeTokenChangeListener=function(f){},h.prototype.notifyForInvalidToken=function(){},h.OWNER="owner",h}(),Un=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jn="websocket",fh="long_polling",Rn=function(){function h(f,y,b,T,I,R,F){void 0===I&&(I=!1),void 0===R&&(R=""),void 0===F&&(F=!1),this.secure=y,this.namespace=b,this.webSocketOnly=T,this.nodeAdmin=I,this.persistenceKey=R,this.includeNamespaceInQueryParams=F,this._host=f.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=J.get("host:"+f)||this._host}return h.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},h.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(h.prototype,"host",{get:function(){return this._host},set:function(f){f!==this.internalHost&&(this.internalHost=f,this.isCacheableHost()&&J.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),h.prototype.toString=function(){var f=this.toURLString();return this.persistenceKey&&(f+="<"+this.persistenceKey+">"),f},h.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},h}();function Dt(h,f,y){var b;if((0,P.hu)("string"==typeof f,"typeof type must == string"),(0,P.hu)("object"==typeof y,"typeof params must == object"),f===Jn)b=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(f!==fh)throw new Error("Unknown connection type: "+f);b=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(y.ns=h.namespace);var T=[];return rt(y,function(I,R){T.push(I+"="+R)}),b+T.join("&")}var hh=function(){function h(){this.counters_={}}return h.prototype.incrementCounter=function(f,y){void 0===y&&(y=1),(0,P.r3)(this.counters_,f)||(this.counters_[f]=0),this.counters_[f]+=y},h.prototype.get=function(){return(0,P.p$)(this.counters_)},h}(),ws={},Ni={};function dn(h){var f=h.toString();return ws[f]||(ws[f]=new hh),ws[f]}var zg=function(){function h(f){this.onMessage_=f,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return h.prototype.closeAfter=function(f,y){this.closeAfterResponse=f,this.onClose=y,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},h.prototype.handleResponse=function(f,y){var b=this;this.pendingResponses[f]=y;for(var T=function(){var F=I.pendingResponses[I.currentResponseNum];delete I.pendingResponses[I.currentResponseNum];for(var V=function(z){F[z]&&Ki(function(){b.onMessage_(F[z])})},G=0;G<F.length;++G)V(G);if(I.currentResponseNum===I.closeAfterResponse)return I.onClose&&(I.onClose(),I.onClose=null),"break";I.currentResponseNum++},I=this;this.pendingResponses[this.currentResponseNum]&&"break"!==T(););},h}(),K="start",Q="close",Kc=function(){function h(f,y,b,T,I,R,F){var V=this;this.connId=f,this.repoInfo=y,this.applicationId=b,this.appCheckToken=T,this.authToken=I,this.transportSessionId=R,this.lastSessionId=F,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=en(f),this.stats_=dn(y),this.urlFn=function(G){return V.appCheckToken&&(G.ac=V.appCheckToken),Dt(y,fh,G)}}return h.prototype.open=function(f,y){var b=this;this.curSegmentNum=0,this.onDisconnect_=y,this.myPacketOrderer=new zg(f),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){b.log_("Timed out trying to connect."),b.onClosed_(),b.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,P.Yr)()||"complete"===document.readyState)h();else{var f=!1,y=function(){document.body?f||(f=!0,h()):setTimeout(y,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",y,!1),window.addEventListener("load",y,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&y()}),window.attachEvent("onload",y))}}(function(){if(!b.isClosed_){b.scriptTagHolder=new gh(function(){for(var R=[],F=0;F<arguments.length;F++)R[F]=arguments[F];var V=(0,re.CR)(R,5),G=V[0],z=V[1],ue=V[2];if(b.incrementIncomingBytes_(R),b.scriptTagHolder)if(b.connectTimeoutTimer_&&(clearTimeout(b.connectTimeoutTimer_),b.connectTimeoutTimer_=null),b.everConnected_=!0,G===K)b.id=z,b.password=ue;else{if(G!==Q)throw new Error("Unrecognized command received: "+G);z?(b.scriptTagHolder.sendNewPolls=!1,b.myPacketOrderer.closeAfter(z,function(){b.onClosed_()})):b.onClosed_()}},function(){for(var R=[],F=0;F<arguments.length;F++)R[F]=arguments[F];var V=(0,re.CR)(R,2),G=V[0],z=V[1];b.incrementIncomingBytes_(R),b.myPacketOrderer.handleResponse(G,z)},function(){b.onClosed_()},b.urlFn);var T={start:"t"};T.ser=Math.floor(1e8*Math.random()),b.scriptTagHolder.uniqueCallbackIdentifier&&(T.cb=b.scriptTagHolder.uniqueCallbackIdentifier),T.v="5",b.transportSessionId&&(T.s=b.transportSessionId),b.lastSessionId&&(T.ls=b.lastSessionId),b.applicationId&&(T.p=b.applicationId),b.appCheckToken&&(T.ac=b.appCheckToken),"undefined"!=typeof location&&location.hostname&&Un.test(location.hostname)&&(T.r="f");var I=b.urlFn(T);b.log_("Connecting via long-poll to "+I),b.scriptTagHolder.addTag(I,function(){})}})},h.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},h.forceAllow=function(){h.forceAllow_=!0},h.forceDisallow=function(){h.forceDisallow_=!0},h.isAvailable=function(){return!((0,P.Yr)()||!h.forceAllow_&&(h.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},h.prototype.markConnectionHealthy=function(){},h.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},h.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},h.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},h.prototype.send=function(f){var y=(0,P.Pz)(f);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);for(var b=(0,P.h$)(y),T=at(b,1840),I=0;I<T.length;I++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,T.length,T[I]),this.curSegmentNum++},h.prototype.addDisconnectPingFrame=function(f,y){if(!(0,P.Yr)()){this.myDisconnFrame=document.createElement("iframe");var b={dframe:"t"};b.id=f,b.pw=y,this.myDisconnFrame.src=this.urlFn(b),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},h.prototype.incrementIncomingBytes_=function(f){var y=(0,P.Pz)(f).length;this.bytesReceived+=y,this.stats_.incrementCounter("bytes_received",y)},h}(),gh=function(){function h(f,y,b,T){if(this.onDisconnect=b,this.urlFn=T,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=f,this.onMessageCB=y;else{this.uniqueCallbackIdentifier=Ie(),window["pLPCommand"+this.uniqueCallbackIdentifier]=f,window["pRTLPCB"+this.uniqueCallbackIdentifier]=y,this.myIFrame=h.createIFrame_();var I="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(I='<script>document.domain="'+document.domain+'";<\/script>');var F="<html><body>"+I+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(F),this.myIFrame.doc.close()}catch(V){Be("frame writing exception"),V.stack&&Be(V.stack),Be(V)}}}return h.createIFrame_=function(){var f=document.createElement("iframe");if(f.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(f);try{f.contentWindow.document||Be("No IE domain setting required")}catch(T){var b=document.domain;f.src="javascript:void((function(){document.open();document.domain='"+b+"';document.close();})())"}return f.contentDocument?f.doc=f.contentDocument:f.contentWindow?f.doc=f.contentWindow.document:f.document&&(f.doc=f.document),f},h.prototype.close=function(){var f=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==f.myIFrame&&(document.body.removeChild(f.myIFrame),f.myIFrame=null)},Math.floor(0)));var y=this.onDisconnect;y&&(this.onDisconnect=null,y())},h.prototype.startLongPoll=function(f,y){for(this.myID=f,this.myPW=y,this.alive=!0;this.newRequest_(););},h.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var f={};f.id=this.myID,f.pw=this.myPW,f.ser=this.currentSerial;for(var y=this.urlFn(f),b="",T=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+b.length<=1870;){var R=this.pendingSegs.shift();b=b+"&seg"+T+"="+R.seg+"&ts"+T+"="+R.ts+"&d"+T+"="+R.d,T++}return this.addLongPollTag_(y+=b,this.currentSerial),!0}return!1},h.prototype.enqueueSegment=function(f,y,b){this.pendingSegs.push({seg:f,ts:y,d:b}),this.alive&&this.newRequest_()},h.prototype.addLongPollTag_=function(f,y){var b=this;this.outstandingRequests.add(y);var T=function(){b.outstandingRequests.delete(y),b.newRequest_()},I=setTimeout(T,Math.floor(25e3));this.addTag(f,function(){clearTimeout(I),T()})},h.prototype.addTag=function(f,y){var b=this;(0,P.Yr)()?this.doNodeLongPoll(f,y):setTimeout(function(){try{if(!b.sendNewPolls)return;var T=b.myIFrame.doc.createElement("script");T.type="text/javascript",T.async=!0,T.src=f,T.onload=T.onreadystatechange=function(){var I=T.readyState;(!I||"loaded"===I||"complete"===I)&&(T.onload=T.onreadystatechange=null,T.parentNode&&T.parentNode.removeChild(T),y())},T.onerror=function(){Be("Long-poll script failed to load: "+f),b.sendNewPolls=!1,b.close()},b.myIFrame.doc.body.appendChild(T)}catch(I){}},Math.floor(1))},h}(),Br=null;"undefined"!=typeof MozWebSocket?Br=MozWebSocket:"undefined"!=typeof WebSocket&&(Br=WebSocket);var gr=function(){function h(f,y,b,T,I,R,F){this.connId=f,this.applicationId=b,this.appCheckToken=T,this.authToken=I,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=en(this.connId),this.stats_=dn(y),this.connURL=h.connectionURL_(y,R,F,T),this.nodeAdmin=y.nodeAdmin}return h.connectionURL_=function(f,y,b,T){var I={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&Un.test(location.hostname)&&(I.r="f"),y&&(I.s=y),b&&(I.ls=b),T&&(I.ac=T),Dt(f,Jn,I)},h.prototype.open=function(f,y){var b=this;this.onDisconnect=y,this.onMessage=f,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,J.set("previous_websocket_failure",!0);try{if((0,P.Yr)()){var I={headers:{"User-Agent":"Firebase/5/"+ce+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(I.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(I.headers["X-Firebase-AppCheck"]=this.appCheckToken);var R=process.env,F=0===this.connURL.indexOf("wss://")?R.HTTPS_PROXY||R.https_proxy:R.HTTP_PROXY||R.http_proxy;F&&(I.proxy={origin:F}),this.mySock=new Br(this.connURL,[],I)}else this.mySock=new Br(this.connURL,[],I={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(G){this.log_("Error instantiating WebSocket.");var V=G.message||G.data;return V&&this.log_(V),void this.onClosed_()}this.mySock.onopen=function(){b.log_("Websocket connected."),b.everConnected_=!0},this.mySock.onclose=function(){b.log_("Websocket connection was disconnected."),b.mySock=null,b.onClosed_()},this.mySock.onmessage=function(G){b.handleIncomingFrame(G)},this.mySock.onerror=function(G){b.log_("WebSocket error.  Closing connection.");var z=G.message||G.data;z&&b.log_(z),b.onClosed_()}},h.prototype.start=function(){},h.forceDisallow=function(){h.forceDisallow_=!0},h.isAvailable=function(){var f=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&b.length>1&&parseFloat(b[1])<4.4&&(f=!0)}return!f&&null!==Br&&!h.forceDisallow_},h.previouslyFailed=function(){return J.isInMemoryStorage||!0===J.get("previous_websocket_failure")},h.prototype.markConnectionHealthy=function(){J.remove("previous_websocket_failure")},h.prototype.appendFrame_=function(f){if(this.frames.push(f),this.frames.length===this.totalFrames){var y=this.frames.join("");this.frames=null;var b=(0,P.cI)(y);this.onMessage(b)}},h.prototype.handleNewFrameCount_=function(f){this.totalFrames=f,this.frames=[]},h.prototype.extractFrameCount_=function(f){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),f.length<=6){var y=Number(f);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),f},h.prototype.handleIncomingFrame=function(f){if(null!==this.mySock){var y=f.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{var b=this.extractFrameCount_(y);null!==b&&this.appendFrame_(b)}}},h.prototype.send=function(f){this.resetKeepAlive();var y=(0,P.Pz)(f);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);var b=at(y,16384);b.length>1&&this.sendString_(String(b.length));for(var T=0;T<b.length;T++)this.sendString_(b[T])},h.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},h.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},h.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},h.prototype.resetKeepAlive=function(){var f=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){f.mySock&&f.sendString_("0"),f.resetKeepAlive()},Math.floor(45e3))},h.prototype.sendString_=function(f){try{this.mySock.send(f)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h}(),Pi=function(){function h(f){this.initTransports_(f)}return Object.defineProperty(h,"ALL_TRANSPORTS",{get:function(){return[Kc,gr]},enumerable:!1,configurable:!0}),h.prototype.initTransports_=function(f){var y,b,T=gr&&gr.isAvailable(),I=T&&!gr.previouslyFailed();if(f.webSocketOnly&&(T||cn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),I=!0),I)this.transports_=[gr];else{var R=this.transports_=[];try{for(var F=(0,re.XA)(h.ALL_TRANSPORTS),V=F.next();!V.done;V=F.next()){var G=V.value;G&&G.isAvailable()&&R.push(G)}}catch(z){y={error:z}}finally{try{V&&!V.done&&(b=F.return)&&b.call(F)}finally{if(y)throw y.error}}}},h.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},h.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},h}(),Ts=function(){function h(f,y,b,T,I,R,F,V,G,z){this.id=f,this.repoInfo_=y,this.applicationId_=b,this.appCheckToken_=T,this.authToken_=I,this.onMessage_=R,this.onReady_=F,this.onDisconnect_=V,this.onKill_=G,this.lastSessionId=z,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=en("c:"+this.id+":"),this.transportManager_=new Pi(y),this.log_("Connection created"),this.start_()}return h.prototype.start_=function(){var f=this,y=this.transportManager_.initialTransport();this.conn_=new y(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=y.responsesRequiredToBeHealthy||0;var b=this.connReceiver_(this.conn_),T=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){f.conn_&&f.conn_.open(b,T)},Math.floor(0));var I=y.healthyTimeout||0;I>0&&(this.healthyTimeout_=Es(function(){f.healthyTimeout_=null,f.isHealthy_||(f.conn_&&f.conn_.bytesReceived>102400?(f.log_("Connection exceeded healthy timeout but has received "+f.conn_.bytesReceived+" bytes.  Marking connection healthy."),f.isHealthy_=!0,f.conn_.markConnectionHealthy()):f.conn_&&f.conn_.bytesSent>10240?f.log_("Connection exceeded healthy timeout but has sent "+f.conn_.bytesSent+" bytes.  Leaving connection alive."):(f.log_("Closing unhealthy connection after timeout."),f.close()))},Math.floor(I)))},h.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},h.prototype.disconnReceiver_=function(f){var y=this;return function(b){f===y.conn_?y.onConnectionLost_(b):f===y.secondaryConn_?(y.log_("Secondary connection lost."),y.onSecondaryConnectionLost_()):y.log_("closing an old connection")}},h.prototype.connReceiver_=function(f){var y=this;return function(b){2!==y.state_&&(f===y.rx_?y.onPrimaryMessageReceived_(b):f===y.secondaryConn_?y.onSecondaryMessageReceived_(b):y.log_("message on old connection"))}},h.prototype.sendRequest=function(f){this.sendData_({t:"d",d:f})},h.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},h.prototype.onSecondaryControl_=function(f){if("t"in f){var y=f.t;"a"===y?this.upgradeIfSecondaryHealthy_():"r"===y?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===y&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},h.prototype.onSecondaryMessageReceived_=function(f){var y=ht("t",f),b=ht("d",f);if("c"===y)this.onSecondaryControl_(b);else{if("d"!==y)throw new Error("Unknown protocol layer: "+y);this.pendingDataMessages.push(b)}},h.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},h.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},h.prototype.onPrimaryMessageReceived_=function(f){var y=ht("t",f),b=ht("d",f);"c"===y?this.onControl_(b):"d"===y&&this.onDataMessage_(b)},h.prototype.onDataMessage_=function(f){this.onPrimaryResponse_(),this.onMessage_(f)},h.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},h.prototype.onControl_=function(f){var y=ht("t",f);if("d"in f){var b=f.d;if("h"===y)this.onHandshake_(b);else if("n"===y){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var T=0;T<this.pendingDataMessages.length;++T)this.onDataMessage_(this.pendingDataMessages[T]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===y?this.onConnectionShutdown_(b):"r"===y?this.onReset_(b):"e"===y?gn("Server Error: "+b):"o"===y?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gn("Unknown control packet command: "+y)}},h.prototype.onHandshake_=function(f){var y=f.ts,b=f.v,T=f.h;this.sessionId=f.s,this.repoInfo_.host=T,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,y),"5"!==b&&cn("Protocol version mismatch detected"),this.tryStartUpgrade_())},h.prototype.tryStartUpgrade_=function(){var f=this.transportManager_.upgradeTransport();f&&this.startUpgrade_(f)},h.prototype.startUpgrade_=function(f){var y=this;this.secondaryConn_=new f(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=f.responsesRequiredToBeHealthy||0;var b=this.connReceiver_(this.secondaryConn_),T=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(b,T),Es(function(){y.secondaryConn_&&(y.log_("Timed out trying to upgrade."),y.secondaryConn_.close())},Math.floor(6e4))},h.prototype.onReset_=function(f){this.log_("Reset packet received.  New host: "+f),this.repoInfo_.host=f,1===this.state_?this.close():(this.closeConnections_(),this.start_())},h.prototype.onConnectionEstablished_=function(f,y){var b=this;this.log_("Realtime connection established."),this.conn_=f,this.state_=1,this.onReady_&&(this.onReady_(y,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Es(function(){b.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},h.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},h.prototype.onSecondaryConnectionLost_=function(){var f=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===f||this.rx_===f)&&this.close()},h.prototype.onConnectionLost_=function(f){this.conn_=null,f||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(J.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},h.prototype.onConnectionShutdown_=function(f){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(f),this.onKill_=null),this.onDisconnect_=null,this.close()},h.prototype.sendData_=function(f){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(f)},h.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},h.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},h}(),Zc=function(){function h(){}return h.prototype.put=function(f,y,b,T){},h.prototype.merge=function(f,y,b,T){},h.prototype.refreshAuthToken=function(f){},h.prototype.refreshAppCheckToken=function(f){},h.prototype.onDisconnectPut=function(f,y,b){},h.prototype.onDisconnectMerge=function(f,y,b){},h.prototype.onDisconnectCancel=function(f,y){},h.prototype.reportStats=function(f){},h}(),ou=function(){function h(f){this.allowedEvents_=f,this.listeners_={},(0,P.hu)(Array.isArray(f)&&f.length>0,"Requires a non-empty array")}return h.prototype.trigger=function(f){for(var y=[],b=1;b<arguments.length;b++)y[b-1]=arguments[b];if(Array.isArray(this.listeners_[f]))for(var T=(0,re.ev)([],(0,re.CR)(this.listeners_[f])),I=0;I<T.length;I++)T[I].callback.apply(T[I].context,y)},h.prototype.on=function(f,y,b){this.validateEventType_(f),this.listeners_[f]=this.listeners_[f]||[],this.listeners_[f].push({callback:y,context:b});var T=this.getInitialEvent(f);T&&y.apply(b,T)},h.prototype.off=function(f,y,b){this.validateEventType_(f);for(var T=this.listeners_[f]||[],I=0;I<T.length;I++)if(T[I].callback===y&&(!b||b===T[I].context))return void T.splice(I,1)},h.prototype.validateEventType_=function(f){(0,P.hu)(this.allowedEvents_.find(function(y){return y===f}),"Unknown event: "+f)},h}(),xr=function(h){function f(){var y=h.call(this,["online"])||this;return y.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",function(){y.online_||(y.online_=!0,y.trigger("online",!0))},!1),window.addEventListener("offline",function(){y.online_&&(y.online_=!1,y.trigger("online",!1))},!1)),y}return(0,re.ZT)(f,h),f.getInstance=function(){return new f},f.prototype.getInitialEvent=function(y){return(0,P.hu)("online"===y,"Unknown event type: "+y),[this.online_]},f.prototype.currentlyOnline=function(){return this.online_},f}(ou),Ot=function(){function h(f,y){if(void 0===y){this.pieces_=f.split("/");for(var b=0,T=0;T<this.pieces_.length;T++)this.pieces_[T].length>0&&(this.pieces_[b]=this.pieces_[T],b++);this.pieces_.length=b,this.pieceNum_=0}else this.pieces_=f,this.pieceNum_=y}return h.prototype.toString=function(){for(var f="",y=this.pieceNum_;y<this.pieces_.length;y++)""!==this.pieces_[y]&&(f+="/"+this.pieces_[y]);return f||"/"},h}();function it(){return new Ot("")}function Pt(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function Ss(h){return h.pieces_.length-h.pieceNum_}function $t(h){var f=h.pieceNum_;return f<h.pieces_.length&&f++,new Ot(h.pieces_,f)}function El(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function po(h,f){return void 0===f&&(f=0),h.pieces_.slice(h.pieceNum_+f)}function Zi(h){if(h.pieceNum_>=h.pieces_.length)return null;for(var f=[],y=h.pieceNum_;y<h.pieces_.length-1;y++)f.push(h.pieces_[y]);return new Ot(f,0)}function Ft(h,f){for(var y=[],b=h.pieceNum_;b<h.pieces_.length;b++)y.push(h.pieces_[b]);if(f instanceof Ot)for(b=f.pieceNum_;b<f.pieces_.length;b++)y.push(f.pieces_[b]);else{var T=f.split("/");for(b=0;b<T.length;b++)T[b].length>0&&y.push(T[b])}return new Ot(y,0)}function Ut(h){return h.pieceNum_>=h.pieces_.length}function Tn(h,f){var y=Pt(h),b=Pt(f);if(null===y)return f;if(y===b)return Tn($t(h),$t(f));throw new Error("INTERNAL ERROR: innerPath ("+f+") is not within outerPath ("+h+")")}function Fi(h,f){for(var y=po(h,0),b=po(f,0),T=0;T<y.length&&T<b.length;T++){var I=he(y[T],b[T]);if(0!==I)return I}return y.length===b.length?0:y.length<b.length?-1:1}function wl(h,f){if(Ss(h)!==Ss(f))return!1;for(var y=h.pieceNum_,b=f.pieceNum_;y<=h.pieces_.length;y++,b++)if(h.pieces_[y]!==f.pieces_[b])return!1;return!0}function Rr(h,f){var y=h.pieceNum_,b=f.pieceNum_;if(Ss(h)>Ss(f))return!1;for(;y<h.pieces_.length;){if(h.pieces_[y]!==f.pieces_[b])return!1;++y,++b}return!0}var Jc=function(f,y){this.errorPrefix_=y,this.parts_=po(f,0),this.byteLength_=Math.max(1,this.parts_.length);for(var b=0;b<this.parts_.length;b++)this.byteLength_+=(0,P.ug)(this.parts_[b]);v_(this)};function v_(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ga(h))}function ga(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}var yh,vh,__=function(h){function f(){var b,T,y=h.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(T="visibilitychange",b="hidden"):void 0!==document.mozHidden?(T="mozvisibilitychange",b="mozHidden"):void 0!==document.msHidden?(T="msvisibilitychange",b="msHidden"):void 0!==document.webkitHidden&&(T="webkitvisibilitychange",b="webkitHidden")),y.visible_=!0,T&&document.addEventListener(T,function(){var I=!document[b];I!==y.visible_&&(y.visible_=I,y.trigger("visible",I))},!1),y}return(0,re.ZT)(f,h),f.getInstance=function(){return new f},f.prototype.getInitialEvent=function(y){return(0,P.hu)("visible"===y,"Unknown event type: "+y),[this.visible_]},f}(ou),Xc=1e3,au=function(h){function f(y,b,T,I,R,F,V,G){var z=h.call(this)||this;if(z.repoInfo_=y,z.applicationId_=b,z.onDataUpdate_=T,z.onConnectStatus_=I,z.onServerInfoUpdate_=R,z.authTokenProvider_=F,z.appCheckTokenProvider_=V,z.authOverride_=G,z.id=f.nextPersistentConnectionId_++,z.log_=en("p:"+z.id+":"),z.interruptReasons_={},z.listens=new Map,z.outstandingPuts_=[],z.outstandingGets_=[],z.outstandingPutCount_=0,z.outstandingGetCount_=0,z.onDisconnectRequestQueue_=[],z.connected_=!1,z.reconnectDelay_=Xc,z.maxReconnectDelay_=3e5,z.securityDebugCallback_=null,z.lastSessionId=null,z.establishConnectionTimer_=null,z.visible_=!1,z.requestCBHash_={},z.requestNumber_=0,z.realtime_=null,z.authToken_=null,z.appCheckToken_=null,z.forceTokenRefresh_=!1,z.invalidAuthTokenCount_=0,z.invalidAppCheckTokenCount_=0,z.firstConnection_=!0,z.lastConnectionAttemptTime_=null,z.lastConnectionEstablishedTime_=null,G&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return __.getInstance().on("visible",z.onVisible_,z),-1===y.host.indexOf("fblocal")&&xr.getInstance().on("online",z.onOnline_,z),z}return(0,re.ZT)(f,h),f.prototype.sendRequest=function(y,b,T){var I=++this.requestNumber_,R={r:I,a:y,b};this.log_((0,P.Pz)(R)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(R),T&&(this.requestCBHash_[I]=T)},f.prototype.get=function(y){var b=this;this.initConnection_();var T=new P.BH,I={p:y._path.toString(),q:y._queryObject},R={action:"g",request:I,onComplete:function(V){var G=V.d;"ok"===V.s?(b.onDataUpdate_(I.p,G,!1,null),T.resolve(G)):T.reject(G)}};this.outstandingGets_.push(R),this.outstandingGetCount_++;var F=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var V=b.outstandingGets_[F];void 0===V||R!==V||(delete b.outstandingGets_[F],b.outstandingGetCount_--,0===b.outstandingGetCount_&&(b.outstandingGets_=[]),b.log_("get "+F+" timed out on connection"),T.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(F),T.promise},f.prototype.listen=function(y,b,T,I){this.initConnection_();var R=y._queryIdentifier,F=y._path.toString();this.log_("Listen called for "+F+" "+R),this.listens.has(F)||this.listens.set(F,new Map),(0,P.hu)(y._queryParams.isDefault()||!y._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(F).has(R),"listen() called twice for same path/queryId.");var V={onComplete:I,hashFn:b,query:y,tag:T};this.listens.get(F).set(R,V),this.connected_&&this.sendListen_(V)},f.prototype.sendGet_=function(y){var b=this,T=this.outstandingGets_[y];this.sendRequest("g",T.request,function(I){delete b.outstandingGets_[y],b.outstandingGetCount_--,0===b.outstandingGetCount_&&(b.outstandingGets_=[]),T.onComplete&&T.onComplete(I)})},f.prototype.sendListen_=function(y){var b=this,T=y.query,I=T._path.toString(),R=T._queryIdentifier;this.log_("Listen on "+I+" for "+R);var F={p:I};y.tag&&(F.q=T._queryObject,F.t=y.tag),F.h=y.hashFn(),this.sendRequest("q",F,function(G){var z=G.d,ue=G.s;f.warnOnListenWarnings_(z,T),(b.listens.get(I)&&b.listens.get(I).get(R))===y&&(b.log_("listen response",G),"ok"!==ue&&b.removeListen_(I,R),y.onComplete&&y.onComplete(ue,z))})},f.warnOnListenWarnings_=function(y,b){if(y&&"object"==typeof y&&(0,P.r3)(y,"w")){var T=(0,P.DV)(y,"w");if(Array.isArray(T)&&~T.indexOf("no_index")){var I='".indexOn": "'+b._queryParams.getIndex().toString()+'"',R=b._path.toString();cn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+I+" at "+R+" to your security rules for better performance.")}}},f.prototype.refreshAuthToken=function(y){this.authToken_=y,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(y)},f.prototype.reduceReconnectDelayIfAdminCredential_=function(y){(y&&40===y.length||(0,P.GJ)(y))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},f.prototype.refreshAppCheckToken=function(y){this.appCheckToken_=y,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},f.prototype.tryAuth=function(){var y=this;if(this.connected_&&this.authToken_){var b=this.authToken_,T=(0,P.w9)(b)?"auth":"gauth",I={cred:b};null===this.authOverride_?I.noauth=!0:"object"==typeof this.authOverride_&&(I.authvar=this.authOverride_),this.sendRequest(T,I,function(R){var F=R.s,V=R.d||"error";y.authToken_===b&&("ok"===F?y.invalidAuthTokenCount_=0:y.onAuthRevoked_(F,V))})}},f.prototype.tryAppCheck=function(){var y=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(b){var T=b.s,I=b.d||"error";"ok"===T?y.invalidAppCheckTokenCount_=0:y.onAppCheckRevoked_(T,I)})},f.prototype.unlisten=function(y,b){var T=y._path.toString(),I=y._queryIdentifier;this.log_("Unlisten called for "+T+" "+I),(0,P.hu)(y._queryParams.isDefault()||!y._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(T,I)&&this.connected_&&this.sendUnlisten_(T,I,y._queryObject,b)},f.prototype.sendUnlisten_=function(y,b,T,I){this.log_("Unlisten on "+y+" for "+b);var R={p:y};I&&(R.q=T,R.t=I),this.sendRequest("n",R)},f.prototype.onDisconnectPut=function(y,b,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",y,b,T):this.onDisconnectRequestQueue_.push({pathString:y,action:"o",data:b,onComplete:T})},f.prototype.onDisconnectMerge=function(y,b,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",y,b,T):this.onDisconnectRequestQueue_.push({pathString:y,action:"om",data:b,onComplete:T})},f.prototype.onDisconnectCancel=function(y,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",y,null,b):this.onDisconnectRequestQueue_.push({pathString:y,action:"oc",data:null,onComplete:b})},f.prototype.sendOnDisconnect_=function(y,b,T,I){var R={p:b,d:T};this.log_("onDisconnect "+y,R),this.sendRequest(y,R,function(F){I&&setTimeout(function(){I(F.s,F.d)},Math.floor(0))})},f.prototype.put=function(y,b,T,I){this.putInternal("p",y,b,T,I)},f.prototype.merge=function(y,b,T,I){this.putInternal("m",y,b,T,I)},f.prototype.putInternal=function(y,b,T,I,R){this.initConnection_();var F={p:b,d:T};void 0!==R&&(F.h=R),this.outstandingPuts_.push({action:y,request:F,onComplete:I}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+b)},f.prototype.sendPut_=function(y){var b=this,T=this.outstandingPuts_[y].action,I=this.outstandingPuts_[y].request,R=this.outstandingPuts_[y].onComplete;this.outstandingPuts_[y].queued=this.connected_,this.sendRequest(T,I,function(F){b.log_(T+" response",F),delete b.outstandingPuts_[y],b.outstandingPutCount_--,0===b.outstandingPutCount_&&(b.outstandingPuts_=[]),R&&R(F.s,F.d)})},f.prototype.reportStats=function(y){var b=this;if(this.connected_){var T={c:y};this.log_("reportStats",T),this.sendRequest("s",T,function(I){"ok"!==I.s&&b.log_("reportStats","Error sending stats: "+I.d)})}},f.prototype.onDataMessage_=function(y){if("r"in y){this.log_("from server: "+(0,P.Pz)(y));var b=y.r,T=this.requestCBHash_[b];T&&(delete this.requestCBHash_[b],T(y.b))}else{if("error"in y)throw"A server-side error has occurred: "+y.error;"a"in y&&this.onDataPush_(y.a,y.b)}},f.prototype.onDataPush_=function(y,b){this.log_("handleServerMessage",y,b),"d"===y?this.onDataUpdate_(b.p,b.d,!1,b.t):"m"===y?this.onDataUpdate_(b.p,b.d,!0,b.t):"c"===y?this.onListenRevoked_(b.p,b.q):"ac"===y?this.onAuthRevoked_(b.s,b.d):"apc"===y?this.onAppCheckRevoked_(b.s,b.d):"sd"===y?this.onSecurityDebugPacket_(b):gn("Unrecognized action received from server: "+(0,P.Pz)(y)+"\nAre you using the latest client?")},f.prototype.onReady_=function(y,b){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(y),this.lastSessionId=b,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},f.prototype.scheduleConnect_=function(y){var b=this;(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){b.establishConnectionTimer_=null,b.establishConnection_()},Math.floor(y))},f.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},f.prototype.onVisible_=function(y){y&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xc,this.realtime_||this.scheduleConnect_(0)),this.visible_=y},f.prototype.onOnline_=function(y){y?(this.log_("Browser went online."),this.reconnectDelay_=Xc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},f.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var b=(new Date).getTime()-this.lastConnectionAttemptTime_,T=Math.max(0,this.reconnectDelay_-b);T=Math.random()*T,this.log_("Trying to reconnect in "+T+"ms"),this.scheduleConnect_(T),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},f.prototype.establishConnection_=function(){return(0,re.mG)(this,void 0,void 0,function(){var y,b,T,I,R,F,V,G,ue,Te,Oe,He,yt,nt=this;return(0,re.Jh)(this,function(It){switch(It.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,y=this.onDataMessage_.bind(this),b=this.onReady_.bind(this),T=this.onRealtimeDisconnect_.bind(this),I=this.id+":"+f.nextConnectionId_++,R=this.lastSessionId,F=!1,V=null,this.realtime_={close:G=function(){V?V.close():(F=!0,T())},sendRequest:function(An){(0,P.hu)(V,"sendRequest call when we're not connected not allowed."),V.sendRequest(An)}},ue=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,It.label=1;case 1:return It.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(ue),this.appCheckTokenProvider_.getToken(ue)])];case 2:return Te=re.CR.apply(void 0,[It.sent(),2]),Oe=Te[0],He=Te[1],F?Be("getToken() completed but was canceled"):(Be("getToken() completed. Creating connection."),this.authToken_=Oe&&Oe.accessToken,this.appCheckToken_=He&&He.token,V=new Ts(I,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,y,b,T,function(An){cn(An+" ("+nt.repoInfo_.toString()+")"),nt.interrupt("server_kill")},R)),[3,4];case 3:return yt=It.sent(),this.log_("Failed to get token: "+yt),F||(this.repoInfo_.nodeAdmin&&cn(yt),G()),[3,4];case 4:return[2]}})})},f.prototype.interrupt=function(y){Be("Interrupting connection for reason: "+y),this.interruptReasons_[y]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},f.prototype.resume=function(y){Be("Resuming connection for reason: "+y),delete this.interruptReasons_[y],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Xc,this.realtime_||this.scheduleConnect_(0))},f.prototype.handleTimestamp_=function(y){var b=y-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:b})},f.prototype.cancelSentTransactions_=function(){for(var y=0;y<this.outstandingPuts_.length;y++){var b=this.outstandingPuts_[y];b&&"h"in b.request&&b.queued&&(b.onComplete&&b.onComplete("disconnect"),delete this.outstandingPuts_[y],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},f.prototype.onListenRevoked_=function(y,b){var T;T=b?b.map(function(R){return mn(R)}).join("$"):"default";var I=this.removeListen_(y,T);I&&I.onComplete&&I.onComplete("permission_denied")},f.prototype.removeListen_=function(y,b){var I,T=new Ot(y).toString();if(this.listens.has(T)){var R=this.listens.get(T);I=R.get(b),R.delete(b),0===R.size&&this.listens.delete(T)}else I=void 0;return I},f.prototype.onAuthRevoked_=function(y,b){Be("Auth token revoked: "+y+"/"+b),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===y||"permission_denied"===y)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},f.prototype.onAppCheckRevoked_=function(y,b){Be("App check token revoked: "+y+"/"+b),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===y||"permission_denied"===y)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},f.prototype.onSecurityDebugPacket_=function(y){this.securityDebugCallback_?this.securityDebugCallback_(y):"msg"in y&&console.log("FIREBASE: "+y.msg.replace("\n","\nFIREBASE: "))},f.prototype.restoreState_=function(){var y,b,T,I;this.tryAuth(),this.tryAppCheck();try{for(var R=(0,re.XA)(this.listens.values()),F=R.next();!F.done;F=R.next()){var V=F.value;try{for(var G=(T=void 0,(0,re.XA)(V.values())),z=G.next();!z.done;z=G.next())this.sendListen_(z.value)}catch(He){T={error:He}}finally{try{z&&!z.done&&(I=G.return)&&I.call(G)}finally{if(T)throw T.error}}}}catch(He){y={error:He}}finally{try{F&&!F.done&&(b=R.return)&&b.call(R)}finally{if(y)throw y.error}}for(var Te=0;Te<this.outstandingPuts_.length;Te++)this.outstandingPuts_[Te]&&this.sendPut_(Te);for(;this.onDisconnectRequestQueue_.length;){var Oe=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(Oe.action,Oe.pathString,Oe.data,Oe.onComplete)}for(Te=0;Te<this.outstandingGets_.length;Te++)this.outstandingGets_[Te]&&this.sendGet_(Te)},f.prototype.sendConnectStats_=function(){var y={},b="js";(0,P.Yr)()&&(b=this.repoInfo_.nodeAdmin?"admin_node":"node"),y["sdk."+b+"."+ce.replace(/\./g,"-")]=1,(0,P.uI)()?y["framework.cordova"]=1:(0,P.b$)()&&(y["framework.reactnative"]=1),this.reportStats(y)},f.prototype.shouldReconnect_=function(){var y=xr.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&y},f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f}(Zc),Yt=function(){function h(f,y){this.name=f,this.node=y}return h.Wrap=function(f,y){return new h(f,y)},h}(),mh=function(){function h(){}return h.prototype.getCompare=function(){return this.compare.bind(this)},h.prototype.indexedValueChanged=function(f,y){var b=new Yt(le,f),T=new Yt(le,y);return 0!==this.compare(b,T)},h.prototype.minPost=function(){return Yt.MIN},h}(),E_=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return(0,re.ZT)(f,h),Object.defineProperty(f,"__EMPTY_NODE",{get:function(){return yh},set:function(y){yh=y},enumerable:!1,configurable:!0}),f.prototype.compare=function(y,b){return he(y.name,b.name)},f.prototype.isDefinedOn=function(y){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")},f.prototype.indexedValueChanged=function(y,b){return!1},f.prototype.minPost=function(){return Yt.MIN},f.prototype.maxPost=function(){return new Yt(Ae,yh)},f.prototype.makePost=function(y,b){return(0,P.hu)("string"==typeof y,"KeyIndex indexValue must always be a string."),new Yt(y,yh)},f.prototype.toString=function(){return".key"},f}(mh),mo=new E_,Tl=function(){function h(f,y,b,T,I){void 0===I&&(I=null),this.isReverse_=T,this.resultGenerator_=I,this.nodeStack_=[];for(var R=1;!f.isEmpty();)if(f=f,R=y?b(f.key,y):1,T&&(R*=-1),R<0)f=this.isReverse_?f.left:f.right;else{if(0===R){this.nodeStack_.push(f);break}this.nodeStack_.push(f),f=this.isReverse_?f.right:f.left}}return h.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var y,f=this.nodeStack_.pop();if(y=this.resultGenerator_?this.resultGenerator_(f.key,f.value):{key:f.key,value:f.value},this.isReverse_)for(f=f.left;!f.isEmpty();)this.nodeStack_.push(f),f=f.right;else for(f=f.right;!f.isEmpty();)this.nodeStack_.push(f),f=f.left;return y},h.prototype.hasNext=function(){return this.nodeStack_.length>0},h.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var f=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(f.key,f.value):{key:f.key,value:f.value}},h}(),gi=function(){function h(f,y,b,T,I){this.key=f,this.value=y,this.color=null!=b?b:h.RED,this.left=null!=T?T:yo.EMPTY_NODE,this.right=null!=I?I:yo.EMPTY_NODE}return h.prototype.copy=function(f,y,b,T,I){return new h(null!=f?f:this.key,null!=y?y:this.value,null!=b?b:this.color,null!=T?T:this.left,null!=I?I:this.right)},h.prototype.count=function(){return this.left.count()+1+this.right.count()},h.prototype.isEmpty=function(){return!1},h.prototype.inorderTraversal=function(f){return this.left.inorderTraversal(f)||!!f(this.key,this.value)||this.right.inorderTraversal(f)},h.prototype.reverseTraversal=function(f){return this.right.reverseTraversal(f)||f(this.key,this.value)||this.left.reverseTraversal(f)},h.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},h.prototype.minKey=function(){return this.min_().key},h.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},h.prototype.insert=function(f,y,b){var T=this,I=b(f,T.key);return(T=I<0?T.copy(null,null,null,T.left.insert(f,y,b),null):0===I?T.copy(null,y,null,null,null):T.copy(null,null,null,null,T.right.insert(f,y,b))).fixUp_()},h.prototype.removeMin_=function(){if(this.left.isEmpty())return yo.EMPTY_NODE;var f=this;return!f.left.isRed_()&&!f.left.left.isRed_()&&(f=f.moveRedLeft_()),(f=f.copy(null,null,null,f.left.removeMin_(),null)).fixUp_()},h.prototype.remove=function(f,y){var b,T;if(y(f,(b=this).key)<0)!b.left.isEmpty()&&!b.left.isRed_()&&!b.left.left.isRed_()&&(b=b.moveRedLeft_()),b=b.copy(null,null,null,b.left.remove(f,y),null);else{if(b.left.isRed_()&&(b=b.rotateRight_()),!b.right.isEmpty()&&!b.right.isRed_()&&!b.right.left.isRed_()&&(b=b.moveRedRight_()),0===y(f,b.key)){if(b.right.isEmpty())return yo.EMPTY_NODE;T=b.right.min_(),b=b.copy(T.key,T.value,null,null,b.right.removeMin_())}b=b.copy(null,null,null,null,b.right.remove(f,y))}return b.fixUp_()},h.prototype.isRed_=function(){return this.color},h.prototype.fixUp_=function(){var f=this;return f.right.isRed_()&&!f.left.isRed_()&&(f=f.rotateLeft_()),f.left.isRed_()&&f.left.left.isRed_()&&(f=f.rotateRight_()),f.left.isRed_()&&f.right.isRed_()&&(f=f.colorFlip_()),f},h.prototype.moveRedLeft_=function(){var f=this.colorFlip_();return f.right.left.isRed_()&&(f=(f=(f=f.copy(null,null,null,null,f.right.rotateRight_())).rotateLeft_()).colorFlip_()),f},h.prototype.moveRedRight_=function(){var f=this.colorFlip_();return f.left.left.isRed_()&&(f=(f=f.rotateRight_()).colorFlip_()),f},h.prototype.rotateLeft_=function(){var f=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,f,null)},h.prototype.rotateRight_=function(){var f=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,f)},h.prototype.colorFlip_=function(){var f=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,f,y)},h.prototype.checkMaxDepth_=function(){var f=this.check_();return Math.pow(2,f)<=this.count()+1},h.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var f=this.left.check_();if(f!==this.right.check_())throw new Error("Black depths differ");return f+(this.isRed_()?0:1)},h.RED=!0,h.BLACK=!1,h}(),BE=function(){function h(){}return h.prototype.copy=function(f,y,b,T,I){return this},h.prototype.insert=function(f,y,b){return new gi(f,y,null)},h.prototype.remove=function(f,y){return this},h.prototype.count=function(){return 0},h.prototype.isEmpty=function(){return!0},h.prototype.inorderTraversal=function(f){return!1},h.prototype.reverseTraversal=function(f){return!1},h.prototype.minKey=function(){return null},h.prototype.maxKey=function(){return null},h.prototype.check_=function(){return 0},h.prototype.isRed_=function(){return!1},h}(),yo=function(){function h(f,y){void 0===y&&(y=h.EMPTY_NODE),this.comparator_=f,this.root_=y}return h.prototype.insert=function(f,y){return new h(this.comparator_,this.root_.insert(f,y,this.comparator_).copy(null,null,gi.BLACK,null,null))},h.prototype.remove=function(f){return new h(this.comparator_,this.root_.remove(f,this.comparator_).copy(null,null,gi.BLACK,null,null))},h.prototype.get=function(f){for(var y,b=this.root_;!b.isEmpty();){if(0===(y=this.comparator_(f,b.key)))return b.value;y<0?b=b.left:y>0&&(b=b.right)}return null},h.prototype.getPredecessorKey=function(f){for(var y,b=this.root_,T=null;!b.isEmpty();){if(0===(y=this.comparator_(f,b.key))){if(b.left.isEmpty())return T?T.key:null;for(b=b.left;!b.right.isEmpty();)b=b.right;return b.key}y<0?b=b.left:y>0&&(T=b,b=b.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},h.prototype.isEmpty=function(){return this.root_.isEmpty()},h.prototype.count=function(){return this.root_.count()},h.prototype.minKey=function(){return this.root_.minKey()},h.prototype.maxKey=function(){return this.root_.maxKey()},h.prototype.inorderTraversal=function(f){return this.root_.inorderTraversal(f)},h.prototype.reverseTraversal=function(f){return this.root_.reverseTraversal(f)},h.prototype.getIterator=function(f){return new Tl(this.root_,null,this.comparator_,!1,f)},h.prototype.getIteratorFrom=function(f,y){return new Tl(this.root_,f,this.comparator_,!1,y)},h.prototype.getReverseIteratorFrom=function(f,y){return new Tl(this.root_,f,this.comparator_,!0,y)},h.prototype.getReverseIterator=function(f){return new Tl(this.root_,null,this.comparator_,!0,f)},h.EMPTY_NODE=new BE,h}();function Kg(h,f){return he(h.name,f.name)}function $o(h,f){return he(h,f)}var Jg,_h,bh,rd,lu,ed=function(h){return"number"==typeof h?"number:"+ze(h):"string:"+h},Zg=function(h){if(h.isLeafNode()){var f=h.val();(0,P.hu)("string"==typeof f||"number"==typeof f||"object"==typeof f&&(0,P.r3)(f,".sv"),"Priority must be a string or number.")}else(0,P.hu)(h===vh||h.isEmpty(),"priority of unexpected type.");(0,P.hu)(h===vh||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ya=function(){function h(f,y){void 0===y&&(y=h.__childrenNodeConstructor.EMPTY_NODE),this.value_=f,this.priorityNode_=y,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Zg(this.priorityNode_)}return Object.defineProperty(h,"__childrenNodeConstructor",{get:function(){return Jg},set:function(f){Jg=f},enumerable:!1,configurable:!0}),h.prototype.isLeafNode=function(){return!0},h.prototype.getPriority=function(){return this.priorityNode_},h.prototype.updatePriority=function(f){return new h(this.value_,f)},h.prototype.getImmediateChild=function(f){return".priority"===f?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE},h.prototype.getChild=function(f){return Ut(f)?this:".priority"===Pt(f)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE},h.prototype.hasChild=function(){return!1},h.prototype.getPredecessorChildName=function(f,y){return null},h.prototype.updateImmediateChild=function(f,y){return".priority"===f?this.updatePriority(y):y.isEmpty()&&".priority"!==f?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(f,y).updatePriority(this.priorityNode_)},h.prototype.updateChild=function(f,y){var b=Pt(f);return null===b?y:y.isEmpty()&&".priority"!==b?this:((0,P.hu)(".priority"!==b||1===Ss(f),".priority must be the last token in a path"),this.updateImmediateChild(b,h.__childrenNodeConstructor.EMPTY_NODE.updateChild($t(f),y)))},h.prototype.isEmpty=function(){return!1},h.prototype.numChildren=function(){return 0},h.prototype.forEachChild=function(f,y){return!1},h.prototype.val=function(f){return f&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},h.prototype.hash=function(){if(null===this.lazyHash_){var f="";this.priorityNode_.isEmpty()||(f+="priority:"+ed(this.priorityNode_.val())+":");var y=typeof this.value_;f+=y+":",f+="number"===y?ze(this.value_):this.value_,this.lazyHash_=qe(f)}return this.lazyHash_},h.prototype.getValue=function(){return this.value_},h.prototype.compareTo=function(f){return f===h.__childrenNodeConstructor.EMPTY_NODE?1:f instanceof h.__childrenNodeConstructor?-1:((0,P.hu)(f.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(f))},h.prototype.compareToLeafNode_=function(f){var y=typeof f.value_,b=typeof this.value_,T=h.VALUE_TYPE_ORDER.indexOf(y),I=h.VALUE_TYPE_ORDER.indexOf(b);return(0,P.hu)(T>=0,"Unknown leaf type: "+y),(0,P.hu)(I>=0,"Unknown leaf type: "+b),T===I?"object"===b?0:this.value_<f.value_?-1:this.value_===f.value_?0:1:I-T},h.prototype.withIndex=function(){return this},h.prototype.isIndexed=function(){return!0},h.prototype.equals=function(f){return f===this||!!f.isLeafNode()&&(this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_))},h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h}(),hn=new(function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return(0,re.ZT)(f,h),f.prototype.compare=function(y,b){var T=y.node.getPriority(),I=b.node.getPriority(),R=T.compareTo(I);return 0===R?he(y.name,b.name):R},f.prototype.isDefinedOn=function(y){return!y.getPriority().isEmpty()},f.prototype.indexedValueChanged=function(y,b){return!y.getPriority().equals(b.getPriority())},f.prototype.minPost=function(){return Yt.MIN},f.prototype.maxPost=function(){return new Yt(Ae,new ya("[PRIORITY-POST]",bh))},f.prototype.makePost=function(y,b){var T=_h(y);return new Yt(b,new ya("[PRIORITY-POST]",T))},f.prototype.toString=function(){return".priority"},f}(mh)),em=Math.log(2),td=function(){function h(f){this.count=parseInt(Math.log(f+1)/em,10),this.current_=this.count-1;var T=parseInt(Array(this.count+1).join("1"),2);this.bits_=f+1&T}return h.prototype.nextBitIsOne=function(){var f=!(this.bits_&1<<this.current_);return this.current_--,f},h}(),nd=function(h,f,y,b){h.sort(f);var T=function(V,G){var ue,Te,z=G-V;if(0===z)return null;if(1===z)return ue=h[V],Te=y?y(ue):ue,new gi(Te,ue.node,gi.BLACK,null,null);var Oe=parseInt(z/2,10)+V,He=T(V,Oe),yt=T(Oe+1,G);return ue=h[Oe],Te=y?y(ue):ue,new gi(Te,ue.node,gi.BLACK,He,yt)},F=function(V){for(var G=null,z=null,ue=h.length,Te=function(It,An){var ii=ue-It,Ru=ue;ue-=It;var Vd=T(ii+1,Ru),Ks=h[ii],nc=y?y(Ks):Ks;Oe(new gi(nc,Ks.node,An,null,Vd))},Oe=function(It){G?(G.left=It,G=It):(z=It,G=It)},He=0;He<V.count;++He){var yt=V.nextBitIsOne(),nt=Math.pow(2,V.count-(He+1));yt?Te(nt,gi.BLACK):(Te(nt,gi.BLACK),Te(nt,gi.RED))}return z}(new td(h.length));return new yo(b||f,F)},uu={},En=function(){function h(f,y){this.indexes_=f,this.indexSet_=y}return Object.defineProperty(h,"Default",{get:function(){return(0,P.hu)(uu&&hn,"ChildrenNode.ts has not been loaded"),rd=rd||new h({".priority":uu},{".priority":hn})},enumerable:!1,configurable:!0}),h.prototype.get=function(f){var y=(0,P.DV)(this.indexes_,f);if(!y)throw new Error("No index defined for "+f);return y instanceof yo?y:null},h.prototype.hasIndex=function(f){return(0,P.r3)(this.indexSet_,f.toString())},h.prototype.addIndex=function(f,y){(0,P.hu)(f!==mo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var b=[],T=!1,I=y.getIterator(Yt.Wrap),R=I.getNext();R;)T=T||f.isDefinedOn(R.node),b.push(R),R=I.getNext();var F;F=T?nd(b,f.getCompare()):uu;var V=f.toString(),G=(0,re.pi)({},this.indexSet_);G[V]=f;var z=(0,re.pi)({},this.indexes_);return z[V]=F,new h(z,G)},h.prototype.addToIndexes=function(f,y){var b=this;return new h((0,P.UI)(this.indexes_,function(I,R){var F=(0,P.DV)(b.indexSet_,R);if((0,P.hu)(F,"Missing index implementation for "+R),I===uu){if(F.isDefinedOn(f.node)){for(var V=[],G=y.getIterator(Yt.Wrap),z=G.getNext();z;)z.name!==f.name&&V.push(z),z=G.getNext();return V.push(f),nd(V,F.getCompare())}return uu}var ue=y.get(f.name),Te=I;return ue&&(Te=Te.remove(new Yt(f.name,ue))),Te.insert(f,f.node)}),this.indexSet_)},h.prototype.removeFromIndexes=function(f,y){return new h((0,P.UI)(this.indexes_,function(T){if(T===uu)return T;var I=y.get(f.name);return I?T.remove(new Yt(f.name,I)):T}),this.indexSet_)},h}(),_t=function(){function h(f,y,b){this.children_=f,this.priorityNode_=y,this.indexMap_=b,this.lazyHash_=null,this.priorityNode_&&Zg(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(h,"EMPTY_NODE",{get:function(){return lu||(lu=new h(new yo($o),null,En.Default))},enumerable:!1,configurable:!0}),h.prototype.isLeafNode=function(){return!1},h.prototype.getPriority=function(){return this.priorityNode_||lu},h.prototype.updatePriority=function(f){return this.children_.isEmpty()?this:new h(this.children_,f,this.indexMap_)},h.prototype.getImmediateChild=function(f){if(".priority"===f)return this.getPriority();var y=this.children_.get(f);return null===y?lu:y},h.prototype.getChild=function(f){var y=Pt(f);return null===y?this:this.getImmediateChild(y).getChild($t(f))},h.prototype.hasChild=function(f){return null!==this.children_.get(f)},h.prototype.updateImmediateChild=function(f,y){if((0,P.hu)(y,"We should always be passing snapshot nodes"),".priority"===f)return this.updatePriority(y);var b=new Yt(f,y),T=void 0,I=void 0;y.isEmpty()?(T=this.children_.remove(f),I=this.indexMap_.removeFromIndexes(b,this.children_)):(T=this.children_.insert(f,y),I=this.indexMap_.addToIndexes(b,this.children_));var R=T.isEmpty()?lu:this.priorityNode_;return new h(T,R,I)},h.prototype.updateChild=function(f,y){var b=Pt(f);if(null===b)return y;(0,P.hu)(".priority"!==Pt(f)||1===Ss(f),".priority must be the last token in a path");var T=this.getImmediateChild(b).updateChild($t(f),y);return this.updateImmediateChild(b,T)},h.prototype.isEmpty=function(){return this.children_.isEmpty()},h.prototype.numChildren=function(){return this.children_.count()},h.prototype.val=function(f){if(this.isEmpty())return null;var y={},b=0,T=0,I=!0;if(this.forEachChild(hn,function(V,G){y[V]=G.val(f),b++,I&&h.INTEGER_REGEXP_.test(V)?T=Math.max(T,Number(V)):I=!1}),!f&&I&&T<2*b){var R=[];for(var F in y)R[F]=y[F];return R}return f&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y},h.prototype.hash=function(){if(null===this.lazyHash_){var f="";this.getPriority().isEmpty()||(f+="priority:"+ed(this.getPriority().val())+":"),this.forEachChild(hn,function(y,b){var T=b.hash();""!==T&&(f+=":"+y+":"+T)}),this.lazyHash_=""===f?"":qe(f)}return this.lazyHash_},h.prototype.getPredecessorChildName=function(f,y,b){var T=this.resolveIndex_(b);if(T){var I=T.getPredecessorKey(new Yt(f,y));return I?I.name:null}return this.children_.getPredecessorKey(f)},h.prototype.getFirstChildName=function(f){var y=this.resolveIndex_(f);if(y){var b=y.minKey();return b&&b.name}return this.children_.minKey()},h.prototype.getFirstChild=function(f){var y=this.getFirstChildName(f);return y?new Yt(y,this.children_.get(y)):null},h.prototype.getLastChildName=function(f){var y=this.resolveIndex_(f);if(y){var b=y.maxKey();return b&&b.name}return this.children_.maxKey()},h.prototype.getLastChild=function(f){var y=this.getLastChildName(f);return y?new Yt(y,this.children_.get(y)):null},h.prototype.forEachChild=function(f,y){var b=this.resolveIndex_(f);return b?b.inorderTraversal(function(T){return y(T.name,T.node)}):this.children_.inorderTraversal(y)},h.prototype.getIterator=function(f){return this.getIteratorFrom(f.minPost(),f)},h.prototype.getIteratorFrom=function(f,y){var b=this.resolveIndex_(y);if(b)return b.getIteratorFrom(f,function(R){return R});for(var T=this.children_.getIteratorFrom(f.name,Yt.Wrap),I=T.peek();null!=I&&y.compare(I,f)<0;)T.getNext(),I=T.peek();return T},h.prototype.getReverseIterator=function(f){return this.getReverseIteratorFrom(f.maxPost(),f)},h.prototype.getReverseIteratorFrom=function(f,y){var b=this.resolveIndex_(y);if(b)return b.getReverseIteratorFrom(f,function(R){return R});for(var T=this.children_.getReverseIteratorFrom(f.name,Yt.Wrap),I=T.peek();null!=I&&y.compare(I,f)>0;)T.getNext(),I=T.peek();return T},h.prototype.compareTo=function(f){return this.isEmpty()?f.isEmpty()?0:-1:f.isLeafNode()||f.isEmpty()?1:f===vn?-1:0},h.prototype.withIndex=function(f){if(f===mo||this.indexMap_.hasIndex(f))return this;var y=this.indexMap_.addIndex(f,this.children_);return new h(this.children_,this.priorityNode_,y)},h.prototype.isIndexed=function(f){return f===mo||this.indexMap_.hasIndex(f)},h.prototype.equals=function(f){if(f===this)return!0;if(f.isLeafNode())return!1;var y=f;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){for(var b=this.getIterator(hn),T=y.getIterator(hn),I=b.getNext(),R=T.getNext();I&&R;){if(I.name!==R.name||!I.node.equals(R.node))return!1;I=b.getNext(),R=T.getNext()}return null===I&&null===R}return!1}return!1},h.prototype.resolveIndex_=function(f){return f===mo?null:this.indexMap_.get(f.toString())},h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h}(),vn=new(function(h){function f(){return h.call(this,new yo($o),_t.EMPTY_NODE,En.Default)||this}return(0,re.ZT)(f,h),f.prototype.compareTo=function(y){return y===this?0:1},f.prototype.equals=function(y){return y===this},f.prototype.getPriority=function(){return this},f.prototype.getImmediateChild=function(y){return _t.EMPTY_NODE},f.prototype.isEmpty=function(){return!1},f}(_t));function Dn(h,f){if(void 0===f&&(f=null),null===h)return _t.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(f=h[".priority"]),(0,P.hu)(null===f||"string"==typeof f||"number"==typeof f||"object"==typeof f&&".sv"in f,"Invalid priority type found: "+typeof f),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new ya(h,Dn(f));if(h instanceof Array){var V=_t.EMPTY_NODE;return rt(h,function(G,z){if((0,P.r3)(h,G)&&"."!==G.substring(0,1)){var ue=Dn(z);(ue.isLeafNode()||!ue.isEmpty())&&(V=V.updateImmediateChild(G,ue))}}),V.updatePriority(Dn(f))}var b=[],T=!1;if(rt(h,function(G,z){if("."!==G.substring(0,1)){var ue=Dn(z);ue.isEmpty()||(T=T||!ue.getPriority().isEmpty(),b.push(new Yt(G,ue)))}}),0===b.length)return _t.EMPTY_NODE;var R=nd(b,Kg,function(G){return G.name},$o);if(T){var F=nd(b,hn.getCompare());return new _t(R,Dn(f),new En({".priority":F},{".priority":hn}))}return new _t(R,Dn(f),En.Default)}Object.defineProperties(Yt,{MIN:{value:new Yt(le,_t.EMPTY_NODE)},MAX:{value:new Yt(Ae,vn)}}),E_.__EMPTY_NODE=_t.EMPTY_NODE,ya.__childrenNodeConstructor=_t,function(h){vh=h}(vn),function(h){bh=h}(vn),function(h){_h=h}(Dn);var cu=function(h){function f(y){var b=h.call(this)||this;return b.indexPath_=y,(0,P.hu)(!Ut(y)&&".priority"!==Pt(y),"Can't create PathIndex with empty path or .priority key"),b}return(0,re.ZT)(f,h),f.prototype.extractChild=function(y){return y.getChild(this.indexPath_)},f.prototype.isDefinedOn=function(y){return!y.getChild(this.indexPath_).isEmpty()},f.prototype.compare=function(y,b){var T=this.extractChild(y.node),I=this.extractChild(b.node),R=T.compareTo(I);return 0===R?he(y.name,b.name):R},f.prototype.makePost=function(y,b){var T=Dn(y),I=_t.EMPTY_NODE.updateChild(this.indexPath_,T);return new Yt(b,I)},f.prototype.maxPost=function(){var y=_t.EMPTY_NODE.updateChild(this.indexPath_,vn);return new Yt(Ae,y)},f.prototype.toString=function(){return po(this.indexPath_,0).join("/")},f}(mh),Dl=new(function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return(0,re.ZT)(f,h),f.prototype.compare=function(y,b){var T=y.node.compareTo(b.node);return 0===T?he(y.name,b.name):T},f.prototype.isDefinedOn=function(y){return!0},f.prototype.indexedValueChanged=function(y,b){return!y.equals(b)},f.prototype.minPost=function(){return Yt.MIN},f.prototype.maxPost=function(){return Yt.MAX},f.prototype.makePost=function(y,b){var T=Dn(y);return new Yt(b,T)},f.prototype.toString=function(){return".value"},f}(mh)),Is="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",nm=function(){var h=0,f=[];return function(y){var b=y===h;h=y;var T,I=new Array(8);for(T=7;T>=0;T--)I[T]=Is.charAt(y%64),y=Math.floor(y/64);(0,P.hu)(0===y,"Cannot push at time == 0");var R=I.join("");if(b){for(T=11;T>=0&&63===f[T];T--)f[T]=0;f[T]++}else for(T=0;T<12;T++)f[T]=Math.floor(64*Math.random());for(T=0;T<12;T++)R+=Is.charAt(f[T]);return(0,P.hu)(20===R.length,"nextPushId: Length should be 20."),R}}(),Sl=function(h){if(h===""+xn)return"-";var f=ur(h);if(null!=f)return""+(f+1);for(var y=new Array(h.length),b=0;b<y.length;b++)y[b]=h.charAt(b);if(y.length<786)return y.push("-"),y.join("");for(var T=y.length-1;T>=0&&"z"===y[T];)T--;if(-1===T)return Ae;var R=Is.charAt(Is.indexOf(y[T])+1);return y[T]=R,y.slice(0,T+1).join("")},Ms=function(h){if(h===""+xi)return le;var f=ur(h);if(null!=f)return""+(f-1);for(var y=new Array(h.length),b=0;b<y.length;b++)y[b]=h.charAt(b);return"-"===y[y.length-1]?1===y.length?""+xn:(delete y[y.length-1],y.join("")):(y[y.length-1]=Is.charAt(Is.indexOf(y[y.length-1])-1),y.join("")+"z".repeat(786-y.length))};function Ch(h){return{type:"value",snapshotNode:h}}function xs(h,f){return{type:"child_added",snapshotNode:f,childName:h}}function mt(h,f){return{type:"child_removed",snapshotNode:f,childName:h}}function Il(h,f,y){return{type:"child_changed",snapshotNode:f,childName:h,oldSnap:y}}var Eh=function(){function h(f){this.index_=f}return h.prototype.updateChild=function(f,y,b,T,I,R){(0,P.hu)(f.isIndexed(this.index_),"A node must be indexed if only a child is updated");var F=f.getImmediateChild(y);return F.getChild(T).equals(b.getChild(T))&&F.isEmpty()===b.isEmpty()||(null!=R&&(b.isEmpty()?f.hasChild(y)?R.trackChildChange(mt(y,F)):(0,P.hu)(f.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):F.isEmpty()?R.trackChildChange(xs(y,b)):R.trackChildChange(Il(y,b,F))),f.isLeafNode()&&b.isEmpty())?f:f.updateImmediateChild(y,b).withIndex(this.index_)},h.prototype.updateFullNode=function(f,y,b){return null!=b&&(f.isLeafNode()||f.forEachChild(hn,function(T,I){y.hasChild(T)||b.trackChildChange(mt(T,I))}),y.isLeafNode()||y.forEachChild(hn,function(T,I){if(f.hasChild(T)){var R=f.getImmediateChild(T);R.equals(I)||b.trackChildChange(Il(T,I,R))}else b.trackChildChange(xs(T,I))})),y.withIndex(this.index_)},h.prototype.updatePriority=function(f,y){return f.isEmpty()?_t.EMPTY_NODE:f.updatePriority(y)},h.prototype.filtersNodes=function(){return!1},h.prototype.getIndexedFilter=function(){return this},h.prototype.getIndex=function(){return this.index_},h}(),rm=function(){function h(f){this.indexedFilter_=new Eh(f.getIndex()),this.index_=f.getIndex(),this.startPost_=h.getStartPost_(f),this.endPost_=h.getEndPost_(f)}return h.prototype.getStartPost=function(){return this.startPost_},h.prototype.getEndPost=function(){return this.endPost_},h.prototype.matches=function(f){return this.index_.compare(this.getStartPost(),f)<=0&&this.index_.compare(f,this.getEndPost())<=0},h.prototype.updateChild=function(f,y,b,T,I,R){return this.matches(new Yt(y,b))||(b=_t.EMPTY_NODE),this.indexedFilter_.updateChild(f,y,b,T,I,R)},h.prototype.updateFullNode=function(f,y,b){y.isLeafNode()&&(y=_t.EMPTY_NODE);var T=y.withIndex(this.index_);T=T.updatePriority(_t.EMPTY_NODE);var I=this;return y.forEachChild(hn,function(R,F){I.matches(new Yt(R,F))||(T=T.updateImmediateChild(R,_t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(f,T,b)},h.prototype.updatePriority=function(f,y){return f},h.prototype.filtersNodes=function(){return!0},h.prototype.getIndexedFilter=function(){return this.indexedFilter_},h.prototype.getIndex=function(){return this.index_},h.getStartPost_=function(f){if(f.hasStart()){var y=f.getIndexStartName();return f.getIndex().makePost(f.getIndexStartValue(),y)}return f.getIndex().minPost()},h.getEndPost_=function(f){if(f.hasEnd()){var y=f.getIndexEndName();return f.getIndex().makePost(f.getIndexEndValue(),y)}return f.getIndex().maxPost()},h}(),S_=function(){function h(f){this.rangedFilter_=new rm(f),this.index_=f.getIndex(),this.limit_=f.getLimit(),this.reverse_=!f.isViewFromLeft()}return h.prototype.updateChild=function(f,y,b,T,I,R){return this.rangedFilter_.matches(new Yt(y,b))||(b=_t.EMPTY_NODE),f.getImmediateChild(y).equals(b)?f:f.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(f,y,b,T,I,R):this.fullLimitUpdateChild_(f,y,b,I,R)},h.prototype.updateFullNode=function(f,y,b){var T;if(y.isLeafNode()||y.isEmpty())T=_t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<y.numChildren()&&y.isIndexed(this.index_)){T=_t.EMPTY_NODE.withIndex(this.index_);var I=void 0;I=this.reverse_?y.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):y.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var R=0;I.hasNext()&&R<this.limit_;){var F=I.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),F)<=0:this.index_.compare(F,this.rangedFilter_.getEndPost())<=0))break;T=T.updateImmediateChild(F.name,F.node),R++}}else{T=(T=y.withIndex(this.index_)).updatePriority(_t.EMPTY_NODE);var G=void 0,z=void 0,ue=void 0;if(I=void 0,this.reverse_){I=T.getReverseIterator(this.index_),G=this.rangedFilter_.getEndPost(),z=this.rangedFilter_.getStartPost();var Te=this.index_.getCompare();ue=function(nt,It){return Te(It,nt)}}else I=T.getIterator(this.index_),G=this.rangedFilter_.getStartPost(),z=this.rangedFilter_.getEndPost(),ue=this.index_.getCompare();R=0;for(var Oe=!1;I.hasNext();)F=I.getNext(),!Oe&&ue(G,F)<=0&&(Oe=!0),Oe&&R<this.limit_&&ue(F,z)<=0?R++:T=T.updateImmediateChild(F.name,_t.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(f,T,b)},h.prototype.updatePriority=function(f,y){return f},h.prototype.filtersNodes=function(){return!0},h.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},h.prototype.getIndex=function(){return this.index_},h.prototype.fullLimitUpdateChild_=function(f,y,b,T,I){var R;if(this.reverse_){var F=this.index_.getCompare();R=function(An,ii){return F(ii,An)}}else R=this.index_.getCompare();var V=f;(0,P.hu)(V.numChildren()===this.limit_,"");var G=new Yt(y,b),z=this.reverse_?V.getFirstChild(this.index_):V.getLastChild(this.index_),ue=this.rangedFilter_.matches(G);if(V.hasChild(y)){for(var Te=V.getImmediateChild(y),Oe=T.getChildAfterChild(this.index_,z,this.reverse_);null!=Oe&&(Oe.name===y||V.hasChild(Oe.name));)Oe=T.getChildAfterChild(this.index_,Oe,this.reverse_);var He=null==Oe?1:R(Oe,G);if(ue&&!b.isEmpty()&&He>=0)return null!=I&&I.trackChildChange(Il(y,b,Te)),V.updateImmediateChild(y,b);null!=I&&I.trackChildChange(mt(y,Te));var nt=V.updateImmediateChild(y,_t.EMPTY_NODE);return null!=Oe&&this.rangedFilter_.matches(Oe)?(null!=I&&I.trackChildChange(xs(Oe.name,Oe.node)),nt.updateImmediateChild(Oe.name,Oe.node)):nt}return b.isEmpty()?f:ue&&R(z,G)>=0?(null!=I&&(I.trackChildChange(mt(z.name,z.node)),I.trackChildChange(xs(y,b))),V.updateImmediateChild(y,b).updateImmediateChild(z.name,_t.EMPTY_NODE)):f},h}(),im=function(){function h(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hn}return h.prototype.hasStart=function(){return this.startSet_},h.prototype.hasStartAfter=function(){return this.startAfterSet_},h.prototype.hasEndBefore=function(){return this.endBeforeSet_},h.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},h.prototype.getIndexStartValue=function(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},h.prototype.getIndexStartName=function(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:le},h.prototype.hasEnd=function(){return this.endSet_},h.prototype.getIndexEndValue=function(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},h.prototype.getIndexEndName=function(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ae},h.prototype.hasLimit=function(){return this.limitSet_},h.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},h.prototype.getLimit=function(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},h.prototype.getIndex=function(){return this.index_},h.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},h.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===hn},h.prototype.copy=function(){var f=new h;return f.limitSet_=this.limitSet_,f.limit_=this.limit_,f.startSet_=this.startSet_,f.indexStartValue_=this.indexStartValue_,f.startNameSet_=this.startNameSet_,f.indexStartName_=this.indexStartName_,f.endSet_=this.endSet_,f.indexEndValue_=this.indexEndValue_,f.endNameSet_=this.endNameSet_,f.indexEndName_=this.indexEndName_,f.index_=this.index_,f.viewFrom_=this.viewFrom_,f},h}();function Ml(h,f,y){var b=h.copy();return b.startSet_=!0,void 0===f&&(f=null),b.indexStartValue_=f,null!=y?(b.startNameSet_=!0,b.indexStartName_=y):(b.startNameSet_=!1,b.indexStartName_=""),b}function xl(h,f,y){var b=h.copy();return b.endSet_=!0,void 0===f&&(f=null),b.indexEndValue_=f,void 0!==y?(b.endNameSet_=!0,b.indexEndName_=y):(b.endNameSet_=!1,b.indexEndName_=""),b}function jr(h,f){var y=h.copy();return y.index_=f,y}function Rl(h){var y,f={};return h.isDefault()||(h.index_===hn?y="$priority":h.index_===Dl?y="$value":h.index_===mo?y="$key":((0,P.hu)(h.index_ instanceof cu,"Unrecognized index type!"),y=h.index_.toString()),f.orderBy=(0,P.Pz)(y),h.startSet_&&(f.startAt=(0,P.Pz)(h.indexStartValue_),h.startNameSet_&&(f.startAt+=","+(0,P.Pz)(h.indexStartName_))),h.endSet_&&(f.endAt=(0,P.Pz)(h.indexEndValue_),h.endNameSet_&&(f.endAt+=","+(0,P.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?f.limitToFirst=h.limit_:f.limitToLast=h.limit_)),f}function Nl(h){var f={};if(h.startSet_&&(f.sp=h.indexStartValue_,h.startNameSet_&&(f.sn=h.indexStartName_)),h.endSet_&&(f.ep=h.indexEndValue_,h.endNameSet_&&(f.en=h.indexEndName_)),h.limitSet_){f.l=h.limit_;var y=h.viewFrom_;""===y&&(y=h.isViewFromLeft()?"l":"r"),f.vf=y}return h.index_!==hn&&(f.i=h.index_.toString()),f}var HE=function(h){function f(y,b,T,I){var R=h.call(this)||this;return R.repoInfo_=y,R.onDataUpdate_=b,R.authTokenProvider_=T,R.appCheckTokenProvider_=I,R.log_=en("p:rest:"),R.listens_={},R}return(0,re.ZT)(f,h),f.prototype.reportStats=function(y){throw new Error("Method not implemented.")},f.getListenId_=function(y,b){return void 0!==b?"tag$"+b:((0,P.hu)(y._queryParams.isDefault(),"should have a tag if it's not a default query."),y._path.toString())},f.prototype.listen=function(y,b,T,I){var R=this,F=y._path.toString();this.log_("Listen called for "+F+" "+y._queryIdentifier);var V=f.getListenId_(y,T),G={};this.listens_[V]=G;var z=Rl(y._queryParams);this.restRequest_(F+".json",z,function(ue,Te){var Oe=Te;404===ue&&(Oe=null,ue=null),null===ue&&R.onDataUpdate_(F,Oe,!1,T),(0,P.DV)(R.listens_,V)===G&&I(ue?401===ue?"permission_denied":"rest_error:"+ue:"ok",null)})},f.prototype.unlisten=function(y,b){var T=f.getListenId_(y,b);delete this.listens_[T]},f.prototype.get=function(y){var b=this,T=Rl(y._queryParams),I=y._path.toString(),R=new P.BH;return this.restRequest_(I+".json",T,function(F,V){var G=V;404===F&&(G=null,F=null),null===F?(b.onDataUpdate_(I,G,!1,null),R.resolve(G)):R.reject(new Error(G))}),R.promise},f.prototype.refreshAuthToken=function(y){},f.prototype.restRequest_=function(y,b,T){var I=this;return void 0===b&&(b={}),b.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(R){var F=(0,re.CR)(R,2),V=F[0],G=F[1];V&&V.accessToken&&(b.auth=V.accessToken),G&&G.token&&(b.ac=G.token);var z=(I.repoInfo_.secure?"https://":"http://")+I.repoInfo_.host+y+"?ns="+I.repoInfo_.namespace+(0,P.xO)(b);I.log_("Sending REST request for "+z);var ue=new XMLHttpRequest;ue.onreadystatechange=function(){if(T&&4===ue.readyState){I.log_("REST Response for "+z+" received. status:",ue.status,"response:",ue.responseText);var Te=null;if(ue.status>=200&&ue.status<300){try{Te=(0,P.cI)(ue.responseText)}catch(Oe){cn("Failed to parse JSON response for "+z+": "+ue.responseText)}T(null,Te)}else 401!==ue.status&&404!==ue.status&&cn("Got unsuccessful REST response for "+z+" Status: "+ue.status),T(ue.status);T=null}},ue.open("GET",z,!0),ue.send()})},f}(Zc),I_=function(){function h(){this.rootNode_=_t.EMPTY_NODE}return h.prototype.getNode=function(f){return this.rootNode_.getChild(f)},h.prototype.updateSnapshot=function(f,y){this.rootNode_=this.rootNode_.updateChild(f,y)},h}();function _a(){return{value:null,children:new Map}}function Wo(h,f,y){if(Ut(f))h.value=y,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(f,y);else{var b=Pt(f);h.children.has(b)||h.children.set(b,_a()),Wo(h.children.get(b),f=$t(f),y)}}function $n(h,f){if(Ut(f))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;var y=h.value;return h.value=null,y.forEachChild(hn,function(I,R){Wo(h,new Ot(I),R)}),$n(h,f)}if(h.children.size>0){var b=Pt(f);return f=$t(f),h.children.has(b)&&$n(h.children.get(b),f)&&h.children.delete(b),0===h.children.size}return!0}function mi(h,f,y){null!==h.value?y(f,h.value):function(h,f){h.children.forEach(function(y,b){f(b,y)})}(h,function(b,T){mi(T,new Ot(f.toString()+"/"+b),y)})}var vo=function(){function h(f){this.collection_=f,this.last_=null}return h.prototype.get=function(){var f=this.collection_.get(),y=(0,re.pi)({},f);return this.last_&&rt(this.last_,function(b,T){y[b]=y[b]-T}),this.last_=f,y},h}(),sm=function(){function h(f,y){this.server_=y,this.statsToReport_={},this.statsListener_=new vo(f);var b=1e4+2e4*Math.random();Es(this.reportStats_.bind(this),Math.floor(b))}return h.prototype.reportStats_=function(){var f=this,y=this.statsListener_.get(),b={},T=!1;rt(y,function(I,R){R>0&&(0,P.r3)(f.statsToReport_,I)&&(b[I]=R,T=!0)}),T&&this.server_.reportStats(b),Es(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},h}(),Xr=(()=>(function(h){h[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Xr||(Xr={})),Xr))();function ba(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}var am=function(){function h(f,y,b){this.path=f,this.affectedTree=y,this.revert=b,this.type=Xr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return h.prototype.operationForChild=function(f){if(Ut(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var y=this.affectedTree.subtree(new Ot(f));return new h(it(),y,this.revert)}return(0,P.hu)(Pt(this.path)===f,"operationForChild called for unrelated child."),new h($t(this.path),this.affectedTree,this.revert)},h}(),wh=function(){function h(f,y){this.source=f,this.path=y,this.type=Xr.LISTEN_COMPLETE}return h.prototype.operationForChild=function(f){return Ut(this.path)?new h(this.source,it()):new h(this.source,$t(this.path))},h}(),Ca=function(){function h(f,y,b){this.source=f,this.path=y,this.snap=b,this.type=Xr.OVERWRITE}return h.prototype.operationForChild=function(f){return Ut(this.path)?new h(this.source,it(),this.snap.getImmediateChild(f)):new h(this.source,$t(this.path),this.snap)},h}(),od=function(){function h(f,y,b){this.source=f,this.path=y,this.children=b,this.type=Xr.MERGE}return h.prototype.operationForChild=function(f){if(Ut(this.path)){var y=this.children.subtree(new Ot(f));return y.isEmpty()?null:y.value?new Ca(this.source,it(),y.value):new h(this.source,it(),y)}return(0,P.hu)(Pt(this.path)===f,"Can't get a merge for a child not on the path of the operation"),new h(this.source,$t(this.path),this.children)},h.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},h}(),Rs=function(){function h(f,y,b){this.node_=f,this.fullyInitialized_=y,this.filtered_=b}return h.prototype.isFullyInitialized=function(){return this.fullyInitialized_},h.prototype.isFiltered=function(){return this.filtered_},h.prototype.isCompleteForPath=function(f){if(Ut(f))return this.isFullyInitialized()&&!this.filtered_;var y=Pt(f);return this.isCompleteForChild(y)},h.prototype.isCompleteForChild=function(f){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(f)},h.prototype.getNode=function(){return this.node_},h}(),um=function(f){this.query_=f,this.index_=this.query_._queryParams.getIndex()};function zo(h,f,y,b,T,I){var R=b.filter(function(F){return F.type===y});R.sort(function(F,V){return function(h,f,y){if(null==f.childName||null==y.childName)throw(0,P.g5)("Should only compare child_ events.");var b=new Yt(f.childName,f.snapshotNode),T=new Yt(y.childName,y.snapshotNode);return h.index_.compare(b,T)}(h,F,V)}),R.forEach(function(F){var V=function(h,f,y){return"value"===f.type||"child_removed"===f.type||(f.prevName=y.getPredecessorChildName(f.childName,f.snapshotNode,h.index_)),f}(h,F,I);T.forEach(function(G){G.respondsTo(F.type)&&f.push(G.createEvent(V,h.query_))})})}function tr(h,f){return{eventCache:h,serverCache:f}}function eo(h,f,y,b){return tr(new Rs(f,y,b),h.serverCache)}function On(h,f,y,b){return tr(h.eventCache,new Rs(f,y,b))}function sd(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function du(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}var ad,yi=function(){function h(f,y){void 0===y&&(ad||(ad=new yo(ft)),y=ad),this.value=f,this.children=y}return h.fromObject=function(f){var y=new h(null);return rt(f,function(b,T){y=y.set(new Ot(b),T)}),y},h.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},h.prototype.findRootMostMatchingPathAndValue=function(f,y){if(null!=this.value&&y(this.value))return{path:it(),value:this.value};if(Ut(f))return null;var b=Pt(f),T=this.children.get(b);if(null!==T){var I=T.findRootMostMatchingPathAndValue($t(f),y);return null!=I?{path:Ft(new Ot(b),I.path),value:I.value}:null}return null},h.prototype.findRootMostValueAndPath=function(f){return this.findRootMostMatchingPathAndValue(f,function(){return!0})},h.prototype.subtree=function(f){if(Ut(f))return this;var y=Pt(f),b=this.children.get(y);return null!==b?b.subtree($t(f)):new h(null)},h.prototype.set=function(f,y){if(Ut(f))return new h(y,this.children);var b=Pt(f),I=(this.children.get(b)||new h(null)).set($t(f),y),R=this.children.insert(b,I);return new h(this.value,R)},h.prototype.remove=function(f){if(Ut(f))return this.children.isEmpty()?new h(null):new h(null,this.children);var y=Pt(f),b=this.children.get(y);if(b){var T=b.remove($t(f)),I=void 0;return I=T.isEmpty()?this.children.remove(y):this.children.insert(y,T),null===this.value&&I.isEmpty()?new h(null):new h(this.value,I)}return this},h.prototype.get=function(f){if(Ut(f))return this.value;var y=Pt(f),b=this.children.get(y);return b?b.get($t(f)):null},h.prototype.setTree=function(f,y){if(Ut(f))return y;var R,b=Pt(f),I=(this.children.get(b)||new h(null)).setTree($t(f),y);return R=I.isEmpty()?this.children.remove(b):this.children.insert(b,I),new h(this.value,R)},h.prototype.fold=function(f){return this.fold_(it(),f)},h.prototype.fold_=function(f,y){var b={};return this.children.inorderTraversal(function(T,I){b[T]=I.fold_(Ft(f,T),y)}),y(f,this.value,b)},h.prototype.findOnPath=function(f,y){return this.findOnPath_(f,it(),y)},h.prototype.findOnPath_=function(f,y,b){var T=!!this.value&&b(y,this.value);if(T)return T;if(Ut(f))return null;var I=Pt(f),R=this.children.get(I);return R?R.findOnPath_($t(f),Ft(y,I),b):null},h.prototype.foreachOnPath=function(f,y){return this.foreachOnPath_(f,it(),y)},h.prototype.foreachOnPath_=function(f,y,b){if(Ut(f))return this;this.value&&b(y,this.value);var T=Pt(f),I=this.children.get(T);return I?I.foreachOnPath_($t(f),Ft(y,T),b):new h(null)},h.prototype.foreach=function(f){this.foreach_(it(),f)},h.prototype.foreach_=function(f,y){this.children.inorderTraversal(function(b,T){T.foreach_(Ft(f,b),y)}),this.value&&y(f,this.value)},h.prototype.foreachChild=function(f){this.children.inorderTraversal(function(y,b){b.value&&f(y,b.value)})},h}(),ei=function(){function h(f){this.writeTree_=f}return h.empty=function(){return new h(new yi(null))},h}();function Ns(h,f,y){if(Ut(f))return new ei(new yi(y));var b=h.writeTree_.findRootMostValueAndPath(f);if(null!=b){var T=b.path,I=b.value,R=Tn(T,f);return I=I.updateChild(R,y),new ei(h.writeTree_.set(T,I))}var F=new yi(y),V=h.writeTree_.setTree(f,F);return new ei(V)}function Os(h,f,y){var b=h;return rt(y,function(T,I){b=Ns(b,Ft(f,T),I)}),b}function Pl(h,f){if(Ut(f))return ei.empty();var y=h.writeTree_.setTree(f,new yi(null));return new ei(y)}function Fl(h,f){return null!=Ps(h,f)}function Ps(h,f){var y=h.writeTree_.findRootMostValueAndPath(f);return null!=y?h.writeTree_.get(y.path).getChild(Tn(y.path,f)):null}function lm(h){var f=[],y=h.writeTree_.value;return null!=y?y.isLeafNode()||y.forEachChild(hn,function(b,T){f.push(new Yt(b,T))}):h.writeTree_.children.inorderTraversal(function(b,T){null!=T.value&&f.push(new Yt(b,T.value))}),f}function Hr(h,f){if(Ut(f))return h;var y=Ps(h,f);return new ei(null!=y?new yi(y):h.writeTree_.subtree(f))}function fu(h){return h.writeTree_.isEmpty()}function kl(h,f){return cm(it(),h.writeTree_,f)}function cm(h,f,y){if(null!=f.value)return y.updateChild(h,f.value);var b=null;return f.children.inorderTraversal(function(T,I){".priority"===T?((0,P.hu)(null!==I.value,"Priority writes must always be leaf nodes"),b=I.value):y=cm(Ft(h,T),I,y)}),!y.getChild(h).isEmpty()&&null!==b&&(y=y.updateChild(Ft(h,".priority"),b)),y}function Fs(h,f){return Ah(f,h)}function qI(h,f){if(h.snap)return Rr(h.path,f);for(var y in h.children)if(h.children.hasOwnProperty(y)&&Rr(Ft(h.path,y),f))return!0;return!1}function dm(h){return h.visible}function to(h,f,y){for(var b=ei.empty(),T=0;T<h.length;++T){var I=h[T];if(f(I)){var R=I.path,F=void 0;if(I.snap)Rr(y,R)?b=Ns(b,F=Tn(y,R),I.snap):Rr(R,y)&&(F=Tn(R,y),b=Ns(b,it(),I.snap.getChild(F)));else{if(!I.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Rr(y,R))b=Os(b,F=Tn(y,R),I.children);else if(Rr(R,y))if(Ut(F=Tn(R,y)))b=Os(b,it(),I.children);else{var V=(0,P.DV)(I.children,Pt(F));if(V){var G=V.getChild($t(F));b=Ns(b,it(),G)}}}}}return b}function Ll(h,f,y,b,T){if(b||T){var V=Hr(h.visibleWrites,f);return!T&&fu(V)?y:T||null!=y||Fl(V,it())?kl(to(h.allWrites,function(Te){return(Te.visible||T)&&(!b||!~b.indexOf(Te.writeId))&&(Rr(Te.path,f)||Rr(f,Te.path))},f),y||_t.EMPTY_NODE):null}var I=Ps(h.visibleWrites,f);if(null!=I)return I;var R=Hr(h.visibleWrites,f);return fu(R)?y:null!=y||Fl(R,it())?kl(R,y||_t.EMPTY_NODE):null}function wa(h,f,y,b){return Ll(h.writeTree,h.treePath,f,y,b)}function P_(h,f){return function(h,f,y){var b=_t.EMPTY_NODE,T=Ps(h.visibleWrites,f);if(T)return T.isLeafNode()||T.forEachChild(hn,function(F,V){b=b.updateImmediateChild(F,V)}),b;if(y){var I=Hr(h.visibleWrites,f);return y.forEachChild(hn,function(F,V){var G=kl(Hr(I,new Ot(F)),V);b=b.updateImmediateChild(F,G)}),lm(I).forEach(function(F){b=b.updateImmediateChild(F.name,F.node)}),b}return lm(Hr(h.visibleWrites,f)).forEach(function(F){b=b.updateImmediateChild(F.name,F.node)}),b}(h.writeTree,h.treePath,f)}function Ih(h,f,y,b){return function(h,f,y,b,T){(0,P.hu)(b||T,"Either existingEventSnap or existingServerSnap must exist");var I=Ft(f,y);if(Fl(h.visibleWrites,I))return null;var R=Hr(h.visibleWrites,I);return fu(R)?T.getChild(y):kl(R,T.getChild(y))}(h.writeTree,h.treePath,f,y,b)}function ld(h,f){return function(h,f){return Ps(h.visibleWrites,f)}(h.writeTree,Ft(h.treePath,f))}function pm(h,f,y){return function(h,f,y,b){var T=Ft(f,y),I=Ps(h.visibleWrites,T);return null!=I?I:b.isCompleteForChild(y)?kl(Hr(h.visibleWrites,T),b.getNode().getImmediateChild(y)):null}(h.writeTree,h.treePath,f,y)}function hu(h,f){return Ah(Ft(h.treePath,f),h.writeTree)}function Ah(h,f){return{treePath:h,writeTree:f}}var cd=function(){function h(){this.changeMap=new Map}return h.prototype.trackChildChange=function(f){var y=f.type,b=f.childName;(0,P.hu)("child_added"===y||"child_changed"===y||"child_removed"===y,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==b,"Only non-priority child changes can be tracked.");var T=this.changeMap.get(b);if(T){var I=T.type;if("child_added"===y&&"child_removed"===I)this.changeMap.set(b,Il(b,f.snapshotNode,T.snapshotNode));else if("child_removed"===y&&"child_added"===I)this.changeMap.delete(b);else if("child_removed"===y&&"child_changed"===I)this.changeMap.set(b,mt(b,T.oldSnap));else if("child_changed"===y&&"child_added"===I)this.changeMap.set(b,xs(b,f.snapshotNode));else{if("child_changed"!==y||"child_changed"!==I)throw(0,P.g5)("Illegal combination of changes: "+f+" occurred after "+T);this.changeMap.set(b,Il(b,f.snapshotNode,T.oldSnap))}}else this.changeMap.set(b,f)},h.prototype.getChanges=function(){return Array.from(this.changeMap.values())},h}(),Ta=new(function(){function h(){}return h.prototype.getCompleteChild=function(f){return null},h.prototype.getChildAfterChild=function(f,y,b){return null},h}()),Nr=function(){function h(f,y,b){void 0===b&&(b=null),this.writes_=f,this.viewCache_=y,this.optCompleteServerCache_=b}return h.prototype.getCompleteChild=function(f){var y=this.viewCache_.eventCache;if(y.isCompleteForChild(f))return y.getNode().getImmediateChild(f);var b=null!=this.optCompleteServerCache_?new Rs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pm(this.writes_,f,b)},h.prototype.getChildAfterChild=function(f,y,b){var T=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:du(this.viewCache_),I=function(h,f,y,b,T,I){return function(h,f,y,b,T,I,R){var F,V=Hr(h.visibleWrites,f),G=Ps(V,it());if(null!=G)F=G;else{if(null==y)return[];F=kl(V,y)}if((F=F.withIndex(R)).isEmpty()||F.isLeafNode())return[];for(var z=[],ue=R.getCompare(),Te=I?F.getReverseIteratorFrom(b,R):F.getIteratorFrom(b,R),Oe=Te.getNext();Oe&&z.length<T;)0!==ue(Oe,b)&&z.push(Oe),Oe=Te.getNext();return z}(h.writeTree,h.treePath,f,y,b,T,I)}(this.writes_,T,y,1,b,f);return 0===I.length?null:I[0]},h}();function In(h,f,y,b,T,I){var R=f.eventCache;if(null!=ld(b,y))return f;var F=void 0,V=void 0;if(Ut(y))if((0,P.hu)(f.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),f.serverCache.isFiltered()){var G=du(f),ue=P_(b,G instanceof _t?G:_t.EMPTY_NODE);F=h.filter.updateFullNode(f.eventCache.getNode(),ue,I)}else{var Te=wa(b,du(f));F=h.filter.updateFullNode(f.eventCache.getNode(),Te,I)}else{var Oe=Pt(y);if(".priority"===Oe){(0,P.hu)(1===Ss(y),"Can't have a priority with additional path components");var He=R.getNode(),yt=Ih(b,y,He,V=f.serverCache.getNode());F=null!=yt?h.filter.updatePriority(He,yt):R.getNode()}else{var nt=$t(y),It=void 0;if(R.isCompleteForChild(Oe)){V=f.serverCache.getNode();var An=Ih(b,y,R.getNode(),V);It=null!=An?R.getNode().getImmediateChild(Oe).updateChild(nt,An):R.getNode().getImmediateChild(Oe)}else It=pm(b,Oe,f.serverCache);F=null!=It?h.filter.updateChild(R.getNode(),Oe,It,nt,T,I):R.getNode()}}return eo(f,F,R.isFullyInitialized()||Ut(y),h.filter.filtersNodes())}function Vi(h,f,y,b,T,I,R,F){var G,V=f.serverCache,z=R?h.filter:h.filter.getIndexedFilter();if(Ut(y))G=z.updateFullNode(V.getNode(),b,null);else if(z.filtersNodes()&&!V.isFiltered()){var ue=V.getNode().updateChild(y,b);G=z.updateFullNode(V.getNode(),ue,null)}else{var Te=Pt(y);if(!V.isCompleteForPath(y)&&Ss(y)>1)return f;var Oe=$t(y),yt=V.getNode().getImmediateChild(Te).updateChild(Oe,b);G=".priority"===Te?z.updatePriority(V.getNode(),yt):z.updateChild(V.getNode(),Te,yt,Oe,Ta,null)}var nt=On(f,G,V.isFullyInitialized()||Ut(y),z.filtersNodes());return In(h,nt,y,T,new Nr(T,nt,I),F)}function Pn(h,f,y,b,T,I,R){var V,G,F=f.eventCache,z=new Nr(T,f,I);if(Ut(y))G=h.filter.updateFullNode(f.eventCache.getNode(),b,R),V=eo(f,G,!0,h.filter.filtersNodes());else{var ue=Pt(y);if(".priority"===ue)G=h.filter.updatePriority(f.eventCache.getNode(),b),V=eo(f,G,F.isFullyInitialized(),F.isFiltered());else{var Te=$t(y),Oe=F.getNode().getImmediateChild(ue),He=void 0;if(Ut(Te))He=b;else{var yt=z.getCompleteChild(ue);He=null!=yt?".priority"===El(Te)&&yt.getChild(Zi(Te)).isEmpty()?yt:yt.updateChild(Te,b):_t.EMPTY_NODE}V=Oe.equals(He)?f:eo(f,h.filter.updateChild(F.getNode(),ue,He,Te,z,R),F.isFullyInitialized(),h.filter.filtersNodes())}}return V}function pu(h,f){return h.eventCache.isCompleteForChild(f)}function Gr(h,f,y){return y.foreach(function(b,T){f=f.updateChild(b,T)}),f}function _o(h,f,y,b,T,I,R,F){if(f.serverCache.getNode().isEmpty()&&!f.serverCache.isFullyInitialized())return f;var G,V=f;G=Ut(y)?b:new yi(null).setTree(y,b);var z=f.serverCache.getNode();return G.children.inorderTraversal(function(ue,Te){if(z.hasChild(ue)){var He=Gr(0,f.serverCache.getNode().getImmediateChild(ue),Te);V=Vi(h,V,new Ot(ue),He,T,I,R,F)}}),G.children.inorderTraversal(function(ue,Te){var Oe=!f.serverCache.isCompleteForChild(ue)&&void 0===Te.value;if(!z.hasChild(ue)&&!Oe){var yt=Gr(0,f.serverCache.getNode().getImmediateChild(ue),Te);V=Vi(h,V,new Ot(ue),yt,T,I,R,F)}}),V}var xh=function(){function h(f,y){this.query_=f,this.eventRegistrations_=[];var b=this.query_._queryParams,T=new Eh(b.getIndex()),I=function(h){return h.loadsAllData()?new Eh(h.getIndex()):h.hasLimit()?new S_(h):new rm(h)}(b);this.processor_=function(h){return{filter:h}}(I);var R=y.serverCache,F=y.eventCache,V=T.updateFullNode(_t.EMPTY_NODE,R.getNode(),null),G=I.updateFullNode(_t.EMPTY_NODE,F.getNode(),null),z=new Rs(V,R.isFullyInitialized(),T.filtersNodes()),ue=new Rs(G,F.isFullyInitialized(),I.filtersNodes());this.viewCache_=tr(ue,z),this.eventGenerator_=new um(this.query_)}return Object.defineProperty(h.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),h}();function yu(h,f){var y=du(h.viewCache_);return y&&(h.query._queryParams.loadsAllData()||!Ut(f)&&!y.getImmediateChild(Pt(f)).isEmpty())?y.getChild(f):null}function vu(h){return 0===h.eventRegistrations_.length}function ks(h,f,y){var b=[];if(y){(0,P.hu)(null==f,"A cancel should cancel all event registrations.");var T=h.query._path;h.eventRegistrations_.forEach(function(V){var G=V.createCancelEvent(y,T);G&&b.push(G)})}if(f){for(var I=[],R=0;R<h.eventRegistrations_.length;++R){var F=h.eventRegistrations_[R];if(F.matches(f)){if(f.hasAnyCallback()){I=I.concat(h.eventRegistrations_.slice(R+1));break}}else I.push(F)}h.eventRegistrations_=I}else h.eventRegistrations_=[];return b}function k_(h,f,y,b){f.type===Xr.MERGE&&null!==f.source.queryId&&((0,P.hu)(du(h.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(sd(h.viewCache_),"Missing event cache, even though we have a server cache"));var T=h.viewCache_,I=function(h,f,y,b,T){var R,F,I=new cd;if(y.type===Xr.OVERWRITE){var V=y;V.source.fromUser?R=Pn(h,f,V.path,V.snap,b,T,I):((0,P.hu)(V.source.fromServer,"Unknown source."),F=V.source.tagged||f.serverCache.isFiltered()&&!Ut(V.path),R=Vi(h,f,V.path,V.snap,b,T,F,I))}else if(y.type===Xr.MERGE){var G=y;G.source.fromUser?R=function(h,f,y,b,T,I,R){var F=f;return b.foreach(function(V,G){var z=Ft(y,V);pu(f,Pt(z))&&(F=Pn(h,F,z,G,T,I,R))}),b.foreach(function(V,G){var z=Ft(y,V);pu(f,Pt(z))||(F=Pn(h,F,z,G,T,I,R))}),F}(h,f,G.path,G.children,b,T,I):((0,P.hu)(G.source.fromServer,"Unknown source."),F=G.source.tagged||f.serverCache.isFiltered(),R=_o(h,f,G.path,G.children,b,T,F,I))}else if(y.type===Xr.ACK_USER_WRITE){var z=y;R=z.revert?function(h,f,y,b,T,I){var R;if(null!=ld(b,y))return f;var F=new Nr(b,f,T),V=f.eventCache.getNode(),G=void 0;if(Ut(y)||".priority"===Pt(y)){var z=void 0;if(f.serverCache.isFullyInitialized())z=wa(b,du(f));else{var ue=f.serverCache.getNode();(0,P.hu)(ue instanceof _t,"serverChildren would be complete if leaf node"),z=P_(b,ue)}G=h.filter.updateFullNode(V,z=z,I)}else{var Te=Pt(y),Oe=pm(b,Te,f.serverCache);null==Oe&&f.serverCache.isCompleteForChild(Te)&&(Oe=V.getImmediateChild(Te)),(G=null!=Oe?h.filter.updateChild(V,Te,Oe,$t(y),F,I):f.eventCache.getNode().hasChild(Te)?h.filter.updateChild(V,Te,_t.EMPTY_NODE,$t(y),F,I):V).isEmpty()&&f.serverCache.isFullyInitialized()&&(R=wa(b,du(f))).isLeafNode()&&(G=h.filter.updateFullNode(G,R,I))}return R=f.serverCache.isFullyInitialized()||null!=ld(b,it()),eo(f,G,R,h.filter.filtersNodes())}(h,f,z.path,b,T,I):function(h,f,y,b,T,I,R){if(null!=ld(T,y))return f;var F=f.serverCache.isFiltered(),V=f.serverCache;if(null!=b.value){if(Ut(y)&&V.isFullyInitialized()||V.isCompleteForPath(y))return Vi(h,f,y,V.getNode().getChild(y),T,I,F,R);if(Ut(y)){var G=new yi(null);return V.getNode().forEachChild(mo,function(ue,Te){G=G.set(new Ot(ue),Te)}),_o(h,f,y,G,T,I,F,R)}return f}var z=new yi(null);return b.foreach(function(ue,Te){var Oe=Ft(y,ue);V.isCompleteForPath(Oe)&&(z=z.set(ue,V.getNode().getChild(Oe)))}),_o(h,f,y,z,T,I,F,R)}(h,f,z.path,z.affectedTree,b,T,I)}else{if(y.type!==Xr.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+y.type);R=function(h,f,y,b,T){var I=f.serverCache;return In(h,On(f,I.getNode(),I.isFullyInitialized()||Ut(y),I.isFiltered()),y,b,Ta,T)}(h,f,y.path,b,I)}var ue=I.getChanges();return function(h,f,y){var b=f.eventCache;if(b.isFullyInitialized()){var T=b.getNode().isLeafNode()||b.getNode().isEmpty(),I=sd(h);(y.length>0||!h.eventCache.isFullyInitialized()||T&&!b.getNode().equals(I)||!b.getNode().getPriority().equals(I.getPriority()))&&y.push(Ch(sd(f)))}}(f,R,ue),{viewCache:R,changes:ue}}(h.processor_,T,f,y,b);return function(h,f){(0,P.hu)(f.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(f.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,I.viewCache),(0,P.hu)(I.viewCache.serverCache.isFullyInitialized()||!T.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=I.viewCache,mm(h,I.changes,I.viewCache.eventCache.getNode(),null)}function mm(h,f,y,b){return function(h,f,y,b){var T=[],I=[];return f.forEach(function(R){"child_changed"===R.type&&h.index_.indexedValueChanged(R.oldSnap,R.snapshotNode)&&I.push(function(h,f){return{type:"child_moved",snapshotNode:f,childName:h}}(R.childName,R.snapshotNode))}),zo(h,T,"child_removed",f,b,y),zo(h,T,"child_added",f,b,y),zo(h,T,"child_moved",I,b,y),zo(h,T,"child_changed",f,b,y),zo(h,T,"value",f,b,y),T}(h.eventGenerator_,f,y,b?[b]:h.eventRegistrations_)}var Rh,_i,ym=function(){this.views=new Map};function vm(h,f,y,b){var T,I,R=f.source.queryId;if(null!==R){var F=h.views.get(R);return(0,P.hu)(null!=F,"SyncTree gave us an op for an invalid query."),k_(F,f,y,b)}var V=[];try{for(var G=(0,re.XA)(h.views.values()),z=G.next();!z.done;z=G.next())V=V.concat(k_(F=z.value,f,y,b))}catch(ue){T={error:ue}}finally{try{z&&!z.done&&(I=G.return)&&I.call(G)}finally{if(T)throw T.error}}return V}function hd(h,f,y,b,T){var R=h.views.get(f._queryIdentifier);if(!R){var F=wa(y,T?b:null),V=!1;F?V=!0:b instanceof _t?(F=P_(y,b),V=!1):(F=_t.EMPTY_NODE,V=!1);var G=tr(new Rs(F,V,!1),new Rs(b,T,!1));return new xh(f,G)}return R}function V_(h){var f,y,b=[];try{for(var T=(0,re.XA)(h.views.values()),I=T.next();!I.done;I=T.next()){var R=I.value;R.query._queryParams.loadsAllData()||b.push(R)}}catch(F){f={error:F}}finally{try{I&&!I.done&&(y=T.return)&&y.call(T)}finally{if(f)throw f.error}}return b}function Sa(h,f){var y,b,T=null;try{for(var I=(0,re.XA)(h.views.values()),R=I.next();!R.done;R=I.next())T=T||yu(R.value,f)}catch(V){y={error:V}}finally{try{R&&!R.done&&(b=I.return)&&b.call(I)}finally{if(y)throw y.error}}return T}function _m(h,f){return f._queryParams.loadsAllData()?no(h):h.views.get(f._queryIdentifier)}function U_(h,f){return null!=_m(h,f)}function _u(h){return null!=no(h)}function no(h){var f,y;try{for(var b=(0,re.XA)(h.views.values()),T=b.next();!T.done;T=b.next()){var I=T.value;if(I.query._queryParams.loadsAllData())return I}}catch(R){f={error:R}}finally{try{T&&!T.done&&(y=b.return)&&y.call(b)}finally{if(f)throw f.error}}return null}var Nh=1,bm=function(f){this.listenProvider_=f,this.syncPointTree_=new yi(null),this.pendingWriteTree_={visibleWrites:ei.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function bo(h,f,y,b,T){return function(h,f,y,b,T){(0,P.hu)(b>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===T&&(T=!0),h.allWrites.push({path:f,snap:y,writeId:b,visible:T}),T&&(h.visibleWrites=Ns(h.visibleWrites,f,y)),h.lastWriteId=b}(h.pendingWriteTree_,f,y,b,T),T?Qo(h,new Ca({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},f,y)):[]}function yr(h,f,y){void 0===y&&(y=!1);var b=function(h,f){for(var y=0;y<h.allWrites.length;y++){var b=h.allWrites[y];if(b.writeId===f)return b}return null}(h.pendingWriteTree_,f);if(function(h,f){var y=h.allWrites.findIndex(function(G){return G.writeId===f});(0,P.hu)(y>=0,"removeWrite called with nonexistent writeId.");var b=h.allWrites[y];h.allWrites.splice(y,1);for(var T=b.visible,I=!1,R=h.allWrites.length-1;T&&R>=0;){var F=h.allWrites[R];F.visible&&(R>=y&&qI(F,b.path)?T=!1:Rr(b.path,F.path)&&(I=!0)),R--}return!!T&&(I?(function(h){h.visibleWrites=to(h.allWrites,dm,it()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(b.snap?h.visibleWrites=Pl(h.visibleWrites,b.path):rt(b.children,function(G){h.visibleWrites=Pl(h.visibleWrites,Ft(b.path,G))}),!0))}(h.pendingWriteTree_,f)){var I=new yi(null);return null!=b.snap?I=I.set(it(),!0):rt(b.children,function(R){I=I.set(new Ot(R),!0)}),Qo(h,new am(b.path,I,y))}return[]}function Ls(h,f,y){return Qo(h,new Ca({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},f,y))}function gd(h,f,y,b){var T=f._path,I=h.syncPointTree_.get(T),R=[];if(I&&("default"===f._queryIdentifier||U_(I,f))){var F=function(h,f,y,b){var T,I,R=f._queryIdentifier,F=[],V=[],G=_u(h);if("default"===R)try{for(var z=(0,re.XA)(h.views.entries()),ue=z.next();!ue.done;ue=z.next()){var He,Te=(0,re.CR)(ue.value,2),Oe=Te[0];V=V.concat(ks(He=Te[1],y,b)),vu(He)&&(h.views.delete(Oe),He.query._queryParams.loadsAllData()||F.push(He.query))}}catch(yt){T={error:yt}}finally{try{ue&&!ue.done&&(I=z.return)&&I.call(z)}finally{if(T)throw T.error}}else(He=h.views.get(R))&&(V=V.concat(ks(He,y,b)),vu(He)&&(h.views.delete(R),He.query._queryParams.loadsAllData()||F.push(He.query)));return G&&!_u(h)&&F.push(new((0,P.hu)(Rh,"Reference.ts has not been loaded"),Rh)(f._repo,f._path)),{removed:F,events:V}}(I,f,y,b);(function(h){return 0===h.views.size})(I)&&(h.syncPointTree_=h.syncPointTree_.remove(T));var V=F.removed;R=F.events;var G=-1!==V.findIndex(function(An){return An._queryParams.loadsAllData()}),z=h.syncPointTree_.findOnPath(T,function(An,ii){return _u(ii)});if(G&&!z){var ue=h.syncPointTree_.subtree(T);if(!ue.isEmpty())for(var Te=function(h){return h.fold(function(f,y,b){if(y&&_u(y))return[no(y)];var I=[];return y&&(I=V_(y)),rt(b,function(R,F){I=I.concat(F)}),I})}(ue),Oe=0;Oe<Te.length;++Oe){var He=Te[Oe],yt=He.query,nt=Bs(h,He);h.listenProvider_.startListening(Cu(yt),Bl(h,yt),nt.hashFn,nt.onComplete)}}!z&&V.length>0&&!b&&(G?h.listenProvider_.stopListening(Cu(f),null):V.forEach(function(An){var ii=h.queryToTagMap.get(jl(An));h.listenProvider_.stopListening(Cu(An),ii)})),function(h,f){for(var y=0;y<f.length;++y){var b=f[y];if(!b._queryParams.loadsAllData()){var T=jl(b),I=h.queryToTagMap.get(T);h.queryToTagMap.delete(T),h.tagToQueryMap.delete(I)}}}(h,V)}return R}function j_(h,f,y){var b=f._path,T=null,I=!1;h.syncPointTree_.foreachOnPath(b,function(yt,nt){var It=Tn(yt,b);T=T||Sa(nt,It),I=I||_u(nt)});var F,R=h.syncPointTree_.get(b);R?(I=I||_u(R),T=T||Sa(R,it())):(R=new ym,h.syncPointTree_=h.syncPointTree_.set(b,R)),null!=T?F=!0:(F=!1,T=_t.EMPTY_NODE,h.syncPointTree_.subtree(b).foreachChild(function(yt,nt){var It=Sa(nt,it());It&&(T=T.updateImmediateChild(yt,It))}));var G=U_(R,f);if(!G&&!f._queryParams.loadsAllData()){var z=jl(f);(0,P.hu)(!h.queryToTagMap.has(z),"View does not exist, but we have a tag");var ue=Nh++;h.queryToTagMap.set(z,ue),h.tagToQueryMap.set(ue,z)}var Oe=function(h,f,y,b,T,I){var R=hd(h,f,b,T,I);return h.views.has(f._queryIdentifier)||h.views.set(f._queryIdentifier,R),function(h,f){h.eventRegistrations_.push(f)}(R,y),function(h,f){var y=h.viewCache_.eventCache,b=[];return y.getNode().isLeafNode()||y.getNode().forEachChild(hn,function(I,R){b.push(xs(I,R))}),y.isFullyInitialized()&&b.push(Ch(y.getNode())),mm(h,b,y.getNode(),f)}(R,y)}(R,f,y,Fs(h.pendingWriteTree_,b),T,F);if(!G&&!I){var He=_m(R,f);Oe=Oe.concat(function(h,f,y){var b=f._path,T=Bl(h,f),I=Bs(h,y),R=h.listenProvider_.startListening(Cu(f),T,I.hashFn,I.onComplete),F=h.syncPointTree_.subtree(b);if(T)(0,P.hu)(!_u(F.value),"If we're adding a query, it shouldn't be shadowed");else for(var V=F.fold(function(ue,Te,Oe){if(!Ut(ue)&&Te&&_u(Te))return[no(Te).query];var He=[];return Te&&(He=He.concat(V_(Te).map(function(yt){return yt.query}))),rt(Oe,function(yt,nt){He=He.concat(nt)}),He}),G=0;G<V.length;++G){var z=V[G];h.listenProvider_.stopListening(Cu(z),Bl(h,z))}return R}(h,f,He))}return Oe}function bu(h,f,y){var T=h.pendingWriteTree_,I=h.syncPointTree_.findOnPath(f,function(R,F){var G=Sa(F,Tn(R,f));if(G)return G});return Ll(T,f,I,y,!0)}function Qo(h,f){return Ko(f,h.syncPointTree_,null,Fs(h.pendingWriteTree_,it()))}function Ko(h,f,y,b){if(Ut(h.path))return H_(h,f,y,b);var T=f.get(it());null==y&&null!=T&&(y=Sa(T,it()));var I=[],R=Pt(h.path),F=h.operationForChild(R),V=f.children.get(R);if(V&&F){var G=y?y.getImmediateChild(R):null,z=hu(b,R);I=I.concat(Ko(F,V,G,z))}return T&&(I=I.concat(vm(T,h,b,y))),I}function H_(h,f,y,b){var T=f.get(it());null==y&&null!=T&&(y=Sa(T,it()));var I=[];return f.children.inorderTraversal(function(R,F){var V=y?y.getImmediateChild(R):null,G=hu(b,R),z=h.operationForChild(R);z&&(I=I.concat(H_(z,F,V,G)))}),T&&(I=I.concat(vm(T,h,b,y))),I}function Bs(h,f){var y=f.query,b=Bl(h,y);return{hashFn:function(){return(function(h){return h.viewCache_.serverCache.getNode()}(f)||_t.EMPTY_NODE).hash()},onComplete:function(T){if("ok"===T)return b?function(h,f,y){var b=md(h,y);if(b){var T=yd(b),I=T.path,R=T.queryId,F=Tn(I,f);return vd(h,I,new wh(ba(R),F))}return[]}(h,y._path,b):function(h,f){return Qo(h,new wh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},f))}(h,y._path);var I=function(h,f){var y="Unknown Error";"too_big"===h?y="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?y="Client doesn't have permission to access the desired data.":"unavailable"===h&&(y="The service is unavailable");var b=new Error(h+" at "+f._path.toString()+": "+y);return b.code=h.toUpperCase(),b}(T,y);return gd(h,y,null,I)}}}function Bl(h,f){var y=jl(f);return h.queryToTagMap.get(y)}function jl(h){return h._path.toString()+"$"+h._queryIdentifier}function md(h,f){return h.tagToQueryMap.get(f)}function yd(h){var f=h.indexOf("$");return(0,P.hu)(-1!==f&&f<h.length-1,"Bad queryKey."),{queryId:h.substr(f+1),path:new Ot(h.substr(0,f))}}function vd(h,f,y){var b=h.syncPointTree_.get(f);return(0,P.hu)(b,"Missing sync point for query tag that we're tracking"),vm(b,y,Fs(h.pendingWriteTree_,f),null)}function Cu(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new((0,P.hu)(_i,"Reference.ts has not been loaded"),_i)(h._repo,h._path):h}var _d=function(){function h(f){this.node_=f}return h.prototype.getImmediateChild=function(f){return new h(this.node_.getImmediateChild(f))},h.prototype.node=function(){return this.node_},h}(),Ia=function(){function h(f,y){this.syncTree_=f,this.path_=y}return h.prototype.getImmediateChild=function(f){var y=Ft(this.path_,f);return new h(this.syncTree_,y)},h.prototype.node=function(){return bu(this.syncTree_,this.path_)},h}(),Oh=function(h,f,y){return h&&"object"==typeof h?((0,P.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?ql(h[".sv"],f,y):"object"==typeof h[".sv"]?Ph(h[".sv"],f):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},ql=function(h,f,y){switch(h){case"timestamp":return y.timestamp;default:(0,P.hu)(!1,"Unexpected server value: "+h)}},Ph=function(h,f,y){h.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));var b=h.increment;"number"!=typeof b&&(0,P.hu)(!1,"Unexpected increment value: "+b);var T=f.node();if((0,P.hu)(null!=T,"Expected ChildrenNode.EMPTY_NODE for nulls"),!T.isLeafNode())return b;var R=T.getValue();return"number"!=typeof R?b:R+b},wm=function(h,f,y,b){return Aa(f,new Ia(y,h),b)},$l=function(h,f,y){return Aa(h,new _d(f),y)};function Aa(h,f,y){var I,b=h.getPriority().val(),T=Oh(b,f.getImmediateChild(".priority"),y);if(h.isLeafNode()){var R=h,F=Oh(R.getValue(),f,y);return F!==R.getValue()||T!==R.getPriority().val()?new ya(F,Dn(T)):h}var V=h;return I=V,T!==V.getPriority().val()&&(I=I.updatePriority(new ya(T))),V.forEachChild(hn,function(G,z){var ue=Aa(z,f.getImmediateChild(G),y);ue!==z&&(I=I.updateImmediateChild(G,ue))}),I}var Zo=function(f,y,b){void 0===f&&(f=""),void 0===y&&(y=null),void 0===b&&(b={children:{},childCount:0}),this.name=f,this.parent=y,this.node=b};function Wl(h,f){for(var y=f instanceof Ot?f:new Ot(f),b=h,T=Pt(y);null!==T;){var I=(0,P.DV)(b.node.children,T)||{children:{},childCount:0};b=new Zo(T,b,I),T=Pt(y=$t(y))}return b}function pn(h){return h.node.value}function bd(h,f){h.node.value=f,Im(h)}function Tm(h){return h.node.childCount>0}function Jo(h,f){rt(h.node.children,function(y,b){f(new Zo(y,h,b))})}function Dm(h,f,y,b){y&&!b&&f(h),Jo(h,function(T){Dm(T,f,!0,b)}),y&&b&&f(h)}function xa(h){return new Ot(null===h.parent?h.name:xa(h.parent)+"/"+h.name)}function Im(h){null!==h.parent&&function(h,f,y){var b=function(h){return void 0===pn(h)&&!Tm(h)}(y),T=(0,P.r3)(h.node.children,f);b&&T?(delete h.node.children[f],h.node.childCount--,Im(h)):!b&&!T&&(h.node.children[f]=y.node,h.node.childCount++,Im(h))}(h.parent,h.name,h)}var Co=/[\[\].#$\/\u0000-\u001F\u007F]/,Cd=/[\[\].#$\u0000-\u001F\u007F]/,Eo=10485760,ti=function(h){return"string"==typeof h&&0!==h.length&&!Co.test(h)},Ed=function(h){return"string"==typeof h&&0!==h.length&&!Cd.test(h)},Hs=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!pe(h)||h&&"object"==typeof h&&(0,P.r3)(h,".sv")},Ui=function(h,f,y,b){b&&void 0===f||zl((0,P.gK)(h,"value"),f,y)},zl=function(h,f,y){var b=y instanceof Ot?new Jc(y,h):y;if(void 0===f)throw new Error(h+"contains undefined "+ga(b));if("function"==typeof f)throw new Error(h+"contains a function "+ga(b)+" with contents = "+f.toString());if(pe(f))throw new Error(h+"contains "+f.toString()+" "+ga(b));if("string"==typeof f&&f.length>Eo/3&&(0,P.ug)(f)>Eo)throw new Error(h+"contains a string greater than "+Eo+" utf8 bytes "+ga(b)+" ('"+f.substring(0,50)+"...')");if(f&&"object"==typeof f){var T=!1,I=!1;if(rt(f,function(R,F){if(".value"===R)T=!0;else if(".priority"!==R&&".sv"!==R&&(I=!0,!ti(R)))throw new Error(h+" contains an invalid key ("+R+") "+ga(b)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(h,f){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(f),h.byteLength_+=(0,P.ug)(f),v_(h)})(b,R),zl(h,F,b),function(h){var f=h.parts_.pop();h.byteLength_-=(0,P.ug)(f),h.parts_.length>0&&(h.byteLength_-=1)}(b)}),T&&I)throw new Error(h+' contains ".value" child '+ga(b)+" in addition to actual children.")}},Na=function(h,f,y,b){if(!b||void 0!==f){var T=(0,P.gK)(h,"values");if(!f||"object"!=typeof f||Array.isArray(f))throw new Error(T+" must be an object containing the children to replace.");var I=[];rt(f,function(R,F){var V=new Ot(R);if(zl(T,F,Ft(y,V)),".priority"===El(V)&&!Hs(F))throw new Error(T+"contains an invalid value for '"+V.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");I.push(V)}),function(h,f){var y,b;for(y=0;y<f.length;y++)for(var T=po(b=f[y]),I=0;I<T.length;I++)if((".priority"!==T[I]||I!==T.length-1)&&!ti(T[I]))throw new Error(h+"contains an invalid key ("+T[I]+") in path "+b.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');f.sort(Fi);var R=null;for(y=0;y<f.length;y++){if(b=f[y],null!==R&&Rr(R,b))throw new Error(h+"contains a path "+R.toString()+" that is ancestor of another path "+b.toString());R=b}}(T,I)}},wo=function(h,f,y){if(!y||void 0!==f){if(pe(f))throw new Error((0,P.gK)(h,"priority")+"is "+f.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Hs(f))throw new Error((0,P.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},q_=function(h,f,y){if(!y||void 0!==f)switch(f){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)(h,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},wu=function(h,f,y,b){if(!(b&&void 0===y||ti(y)))throw new Error((0,P.gK)(h,f)+'was an invalid key = "'+y+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Oa=function(h,f,y,b){if(!(b&&void 0===y||Ed(y)))throw new Error((0,P.gK)(h,f)+'was an invalid path = "'+y+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vr=function(h,f){if(".info"===Pt(f))throw new Error(h+" failed = Can't modify data under /.info/")},Xo=function(h,f){var y=f.path.toString();if("string"!=typeof f.repoInfo.host||0===f.repoInfo.host.length||!ti(f.repoInfo.namespace)&&"localhost"!==f.repoInfo.host.split(":")[0]||0!==y.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Ed(h)}(y))throw new Error((0,P.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},W_=function(h,f,y,b){if((!b||void 0!==y)&&"boolean"!=typeof y)throw new Error((0,P.gK)(h,f)+"must be a boolean.")},z_=function(){this.eventLists_=[],this.recursionDepth_=0};function jn(h,f){for(var y=null,b=0;b<f.length;b++){var T=f[b],I=T.getPath();null!==y&&!wl(I,y.path)&&(h.eventLists_.push(y),y=null),null===y&&(y={events:[],path:I}),y.events.push(T)}y&&h.eventLists_.push(y)}function To(h,f,y){jn(h,y),Am(h,function(b){return wl(b,f)})}function ir(h,f,y){jn(h,y),Am(h,function(b){return Rr(b,f)||Rr(f,b)})}function Am(h,f){h.recursionDepth_++;for(var y=!0,b=0;b<h.eventLists_.length;b++){var T=h.eventLists_[b];T&&(f(T.path)?(Y_(h.eventLists_[b]),h.eventLists_[b]=null):y=!1)}y&&(h.eventLists_=[]),h.recursionDepth_--}function Y_(h){for(var f=0;f<h.events.length;f++){var y=h.events[f];if(null!==y){h.events[f]=null;var b=y.getEventRunner();Fe&&Be("event: "+y.toString()),Ki(b)}}}var Q_="repo_interrupt",Fh=function(){function h(f,y,b,T){this.repoInfo_=f,this.forceRestClient_=y,this.authTokenProvider_=b,this.appCheckProvider_=T,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new z_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_a(),this.transactionQueueTree_=new Zo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return h.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},h}();function Lh(h){var y=h.infoData_.getNode(new Ot(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+y}function Tu(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:Lh(h)})}function Or(h,f,y,b,T){h.dataUpdateCount++;var I=new Ot(f);y=h.interceptServerDataCallback_?h.interceptServerDataCallback_(f,y):y;var R=[];if(T)if(b){var F=(0,P.UI)(y,function(Te){return Dn(Te)});R=function(h,f,y,b){var T=md(h,b);if(T){var I=yd(T),R=I.path,F=I.queryId,V=Tn(R,f),G=yi.fromObject(y);return vd(h,R,new od(ba(F),V,G))}return[]}(h.serverSyncTree_,I,F,T)}else{var V=Dn(y);R=function(h,f,y,b){var T=md(h,b);if(null!=T){var I=yd(T),R=I.path,F=I.queryId,V=Tn(R,f);return vd(h,R,new Ca(ba(F),V,y))}return[]}(h.serverSyncTree_,I,V,T)}else if(b){var G=(0,P.UI)(y,function(Te){return Dn(Te)});R=function(h,f,y){var b=yi.fromObject(y);return Qo(h,new od({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},f,b))}(h.serverSyncTree_,I,G)}else{var z=Dn(y);R=Ls(h.serverSyncTree_,I,z)}var ue=I;R.length>0&&(ue=$s(h,I)),ir(h.eventQueue_,ue,R)}function Du(h,f){Uh(h,"connected",f),!1===f&&function(h){Pa(h,"onDisconnectEvents");var f=Tu(h),y=_a();mi(h.onDisconnect_,it(),function(T,I){var R=wm(T,I,h.serverSyncTree_,f);Wo(y,T,R)});var b=[];mi(y,it(),function(T,I){b=b.concat(Ls(h.serverSyncTree_,T,I));var R=Ql(h,T);$s(h,R)}),h.onDisconnect_=_a(),ir(h.eventQueue_,it(),b)}(h)}function Uh(h,f,y){var b=new Ot("/.info/"+f),T=Dn(y);h.infoData_.updateSnapshot(b,T);var I=Ls(h.infoSyncTree_,b,T);ir(h.eventQueue_,b,I)}function wd(h){return h.nextWriteId_++}function Gs(h,f,y,b,T){Pa(h,"set",{path:f.toString(),value:y,priority:b});var I=Tu(h),R=Dn(y,b),F=bu(h.serverSyncTree_,f),V=$l(R,F,I),G=wd(h),z=bo(h.serverSyncTree_,f,V,G,!0);jn(h.eventQueue_,z),h.server_.put(f.toString(),R.val(!0),function(Te,Oe){var He="ok"===Te;He||cn("set at "+f+" failed: "+Te);var yt=yr(h.serverSyncTree_,G,!He);ir(h.eventQueue_,f,yt),ni(0,T,Te,Oe)});var ue=Ql(h,f);$s(h,ue),ir(h.eventQueue_,ue,[])}function Rm(h,f,y){h.server_.onDisconnectCancel(f.toString(),function(b,T){"ok"===b&&$n(h.onDisconnect_,f),ni(0,y,b,T)})}function Bh(h,f,y,b){var T=Dn(y);h.server_.onDisconnectPut(f.toString(),T.val(!0),function(I,R){"ok"===I&&Wo(h.onDisconnect_,f,T),ni(0,b,I,R)})}function jh(h,f,y){var b;b=".info"===Pt(f._path)?gd(h.infoSyncTree_,f,y):gd(h.serverSyncTree_,f,y),To(h.eventQueue_,f._path,b)}function Hh(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Q_)}function Pa(h){for(var f=[],y=1;y<arguments.length;y++)f[y-1]=arguments[y];var b="";h.persistentConnection_&&(b=h.persistentConnection_.id+":"),Be.apply(void 0,(0,re.ev)([b],(0,re.CR)(f)))}function ni(h,f,y,b){f&&Ki(function(){if("ok"===y)f(null);else{var T=(y||"error").toUpperCase(),I=T;b&&(I+=": "+b);var R=new Error(I);R.code=T,f(R)}})}function Bi(h,f,y){return bu(h.serverSyncTree_,f,y)||_t.EMPTY_NODE}function qs(h,f){if(void 0===f&&(f=h.transactionQueueTree_),f||qr(h,f),pn(f)){var y=JE(h,f);(0,P.hu)(y.length>0,"Sending zero length transaction queue"),y.every(function(T){return 0===T.status})&&function(h,f,y){for(var b=y.map(function(Te){return Te.currentWriteId}),T=Bi(h,f,b),I=T,R=T.hash(),F=0;F<y.length;F++){var V=y[F];(0,P.hu)(0===V.status,"tryToSendTransactionQueue_: items in queue should all be run."),V.status=1,V.retryCount++;var G=Tn(f,V.path);I=I.updateChild(G,V.currentOutputSnapshotRaw)}var z=I.val(!0),ue=f;h.server_.put(ue.toString(),z,function(Te){Pa(h,"transaction put response",{path:ue.toString(),status:Te});var Oe=[];if("ok"===Te){for(var He=[],yt=function(It){y[It].status=2,Oe=Oe.concat(yr(h.serverSyncTree_,y[It].currentWriteId)),y[It].onComplete&&He.push(function(){return y[It].onComplete(null,!0,y[It].currentOutputSnapshotResolved)}),y[It].unwatcher()},nt=0;nt<y.length;nt++)yt(nt);for(qr(h,Wl(h.transactionQueueTree_,f)),qs(h,h.transactionQueueTree_),ir(h.eventQueue_,f,Oe),nt=0;nt<He.length;nt++)Ki(He[nt])}else{if("datastale"===Te)for(nt=0;nt<y.length;nt++)y[nt].status=3===y[nt].status?4:0;else for(cn("transaction at "+ue.toString()+" failed: "+Te),nt=0;nt<y.length;nt++)y[nt].status=4,y[nt].abortReason=Te;$s(h,f)}},R)}(h,xa(f),y)}else Tm(f)&&Jo(f,function(T){qs(h,T)})}function $s(h,f){var y=Pm(h,f),b=xa(y);return function(h,f,y){if(0!==f.length){for(var b=[],T=[],R=f.filter(function(G){return 0===G.status}).map(function(G){return G.currentWriteId}),F=function(G){var Oe,z=f[G],ue=Tn(y,z.path),Te=!1;if((0,P.hu)(null!==ue,"rerunTransactionsUnderNode_: relativePath should not be null."),4===z.status)Te=!0,Oe=z.abortReason,T=T.concat(yr(h.serverSyncTree_,z.currentWriteId,!0));else if(0===z.status)if(z.retryCount>=25)Te=!0,Oe="maxretry",T=T.concat(yr(h.serverSyncTree_,z.currentWriteId,!0));else{var He=Bi(h,z.path,R);z.currentInputSnapshot=He;var yt=f[G].update(He.val());if(void 0!==yt){zl("transaction failed: Data returned ",yt,z.path);var nt=Dn(yt);"object"==typeof yt&&null!=yt&&(0,P.r3)(yt,".priority")||(nt=nt.updatePriority(He.getPriority()));var An=z.currentWriteId,ii=Tu(h),Ru=$l(nt,He,ii);z.currentOutputSnapshotRaw=nt,z.currentOutputSnapshotResolved=Ru,z.currentWriteId=wd(h),R.splice(R.indexOf(An),1),T=(T=T.concat(bo(h.serverSyncTree_,z.path,Ru,z.currentWriteId,z.applyLocally))).concat(yr(h.serverSyncTree_,An,!0))}else Te=!0,Oe="nodata",T=T.concat(yr(h.serverSyncTree_,z.currentWriteId,!0))}ir(h.eventQueue_,y,T),T=[],Te&&(f[G].status=2,setTimeout(f[G].unwatcher,Math.floor(0)),f[G].onComplete&&b.push("nodata"===Oe?function(){return f[G].onComplete(null,!1,f[G].currentInputSnapshot)}:function(){return f[G].onComplete(new Error(Oe),!1,null)}))},V=0;V<f.length;V++)F(V);for(qr(h,h.transactionQueueTree_),V=0;V<b.length;V++)Ki(b[V]);qs(h,h.transactionQueueTree_)}}(h,JE(h,y),b),b}function Pm(h,f){var y,b=h.transactionQueueTree_;for(y=Pt(f);null!==y&&void 0===pn(b);)b=Wl(b,y),y=Pt(f=$t(f));return b}function JE(h,f){var y=[];return _r(h,f,y),y.sort(function(b,T){return b.order-T.order}),y}function _r(h,f,y){var b=pn(f);if(b)for(var T=0;T<b.length;T++)y.push(b[T]);Jo(f,function(I){_r(h,I,y)})}function qr(h,f){var y=pn(f);if(y){for(var b=0,T=0;T<y.length;T++)2!==y[T].status&&(y[b]=y[T],b++);y.length=b,bd(f,y.length>0?y:void 0)}Jo(f,function(I){qr(h,I)})}function Ql(h,f){var y=xa(Pm(h,f)),b=Wl(h.transactionQueueTree_,f);return function(h,f,y){for(var b=h.parent;null!==b;){if(f(b))return!0;b=b.parent}}(b,function(T){Kl(h,T)}),Kl(h,b),Dm(b,function(T){Kl(h,T)}),y}function Kl(h,f){var y=pn(f);if(y){for(var b=[],T=[],I=-1,R=0;R<y.length;R++)3===y[R].status||(1===y[R].status?((0,P.hu)(I===R-1,"All SENT items should be at beginning of queue."),I=R,y[R].status=3,y[R].abortReason="set"):((0,P.hu)(0===y[R].status,"Unexpected transaction status in abort"),y[R].unwatcher(),T=T.concat(yr(h.serverSyncTree_,y[R].currentWriteId,!0)),y[R].onComplete&&b.push(y[R].onComplete.bind(null,new Error("set"),!1,null))));for(-1===I?bd(f,void 0):y.length=I+1,ir(h.eventQueue_,xa(f),T),R=0;R<b.length;R++)Ki(b[R])}}var Td=function(h,f){var y=Fm(h),b=y.namespace;return"firebase.com"===y.domain&&Kt(y.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!b||"undefined"===b)&&"localhost"!==y.domain&&Kt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),y.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&cn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Rn(y.host,y.secure,b,f,"ws"===y.scheme||"wss"===y.scheme,"",b!==y.subdomain),path:new Ot(y.pathString)}},Fm=function(h){var f="",y="",b="",T="",I="",R=!0,F="https",V=443;if("string"==typeof h){var G=h.indexOf("//");G>=0&&(F=h.substring(0,G-1),h=h.substring(G+2));var z=h.indexOf("/");-1===z&&(z=h.length);var ue=h.indexOf("?");-1===ue&&(ue=h.length),f=h.substring(0,Math.min(z,ue)),z<ue&&(T=function(h){for(var f="",y=h.split("/"),b=0;b<y.length;b++)if(y[b].length>0){var T=y[b];try{T=decodeURIComponent(T.replace(/\+/g," "))}catch(I){}f+="/"+T}return f}(h.substring(z,ue)));var Te=function(h){var f,y,b={};"?"===h.charAt(0)&&(h=h.substring(1));try{for(var T=(0,re.XA)(h.split("&")),I=T.next();!I.done;I=T.next()){var R=I.value;if(0!==R.length){var F=R.split("=");2===F.length?b[decodeURIComponent(F[0])]=decodeURIComponent(F[1]):cn("Invalid query segment '"+R+"' in query '"+h+"'")}}}catch(V){f={error:V}}finally{try{I&&!I.done&&(y=T.return)&&y.call(T)}finally{if(f)throw f.error}}return b}(h.substring(Math.min(h.length,ue)));(G=f.indexOf(":"))>=0?(R="https"===F||"wss"===F,V=parseInt(f.substring(G+1),10)):G=f.length;var Oe=f.slice(0,G);if("localhost"===Oe.toLowerCase())y="localhost";else if(Oe.split(".").length<=2)y=Oe;else{var He=f.indexOf(".");b=f.substring(0,He).toLowerCase(),y=f.substring(He+1),I=b}"ns"in Te&&(I=Te.ns)}return{host:f,port:V,domain:y,subdomain:b,secure:R,scheme:F,pathString:T,namespace:I}},km=function(){function h(f,y,b,T){this.eventType=f,this.eventRegistration=y,this.snapshot=b,this.prevName=T}return h.prototype.getPath=function(){var f=this.snapshot.ref;return"value"===this.eventType?f._path:f.parent._path},h.prototype.getEventType=function(){return this.eventType},h.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},h.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())},h}(),qh=function(){function h(f,y,b){this.eventRegistration=f,this.error=y,this.path=b}return h.prototype.getPath=function(){return this.path},h.prototype.getEventType=function(){return"cancel"},h.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},h.prototype.toString=function(){return this.path.toString()+":cancel"},h}(),$h=function(){function h(f,y){this.snapshotCallback=f,this.cancelCallback=y}return h.prototype.onValue=function(f,y){this.snapshotCallback.call(null,f,y)},h.prototype.onCancel=function(f){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,f)},Object.defineProperty(h.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),h.prototype.matches=function(f){return this.snapshotCallback===f.snapshotCallback||this.snapshotCallback.userCallback===f.snapshotCallback.userCallback&&this.snapshotCallback.context===f.snapshotCallback.context},h}(),Zl=function(){function h(f,y){this._repo=f,this._path=y}return h.prototype.cancel=function(){var f=new P.BH;return Rm(this._repo,this._path,f.wrapCallback(function(){})),f.promise},h.prototype.remove=function(){vr("OnDisconnect.remove",this._path);var f=new P.BH;return Bh(this._repo,this._path,null,f.wrapCallback(function(){})),f.promise},h.prototype.set=function(f){vr("OnDisconnect.set",this._path),Ui("OnDisconnect.set",f,this._path,!1);var y=new P.BH;return Bh(this._repo,this._path,f,y.wrapCallback(function(){})),y.promise},h.prototype.setWithPriority=function(f,y){vr("OnDisconnect.setWithPriority",this._path),Ui("OnDisconnect.setWithPriority",f,this._path,!1),wo("OnDisconnect.setWithPriority",y,!1);var b=new P.BH;return function(h,f,y,b,T){var I=Dn(y,b);h.server_.onDisconnectPut(f.toString(),I.val(!0),function(R,F){"ok"===R&&Wo(h.onDisconnect_,f,I),ni(0,T,R,F)})}(this._repo,this._path,f,y,b.wrapCallback(function(){})),b.promise},h.prototype.update=function(f){vr("OnDisconnect.update",this._path),Na("OnDisconnect.update",f,this._path,!1);var y=new P.BH;return function(h,f,y,b){if((0,P.xb)(y))return Be("onDisconnect().update() called with empty data.  Don't do anything."),void ni(0,b,"ok",void 0);h.server_.onDisconnectMerge(f.toString(),y,function(T,I){"ok"===T&&rt(y,function(R,F){var V=Dn(F);Wo(h.onDisconnect_,Ft(f,R),V)}),ni(0,b,T,I)})}(this._repo,this._path,f,y.wrapCallback(function(){})),y.promise},h}(),Hn=function(){function h(f,y,b,T){this._repo=f,this._path=y,this._queryParams=b,this._orderByCalled=T}return Object.defineProperty(h.prototype,"key",{get:function(){return Ut(this._path)?null:El(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"ref",{get:function(){return new Gt(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"_queryIdentifier",{get:function(){var f=Nl(this._queryParams),y=mn(f);return"{}"===y?"default":y},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"_queryObject",{get:function(){return Nl(this._queryParams)},enumerable:!1,configurable:!0}),h.prototype.isEqual=function(f){if(!((f=(0,P.m9)(f))instanceof h))return!1;var y=this._repo===f._repo,b=wl(this._path,f._path);return y&&b&&this._queryIdentifier===f._queryIdentifier},h.prototype.toJSON=function(){return this.toString()},h.prototype.toString=function(){return this._repo.toString()+function(h){for(var f="",y=h.pieceNum_;y<h.pieces_.length;y++)""!==h.pieces_[y]&&(f+="/"+encodeURIComponent(String(h.pieces_[y])));return f||"/"}(this._path)},h}();function kt(h,f){if(!0===h._orderByCalled)throw new Error(f+": You can't combine multiple orderBy calls.")}function ri(h){var f=null,y=null;if(h.hasStart()&&(f=h.getIndexStartValue()),h.hasEnd()&&(y=h.getIndexEndValue()),h.getIndex()===mo){var b="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",T="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==le)throw new Error(b);if("string"!=typeof f)throw new Error(T)}if(h.hasEnd()){if(h.getIndexEndName()!==Ae)throw new Error(b);if("string"!=typeof y)throw new Error(T)}}else if(h.getIndex()===hn){if(null!=f&&!Hs(f)||null!=y&&!Hs(y))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(h.getIndex()instanceof cu||h.getIndex()===Dl,"unknown index type."),null!=f&&"object"==typeof f||null!=y&&"object"==typeof y)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Dd(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Gt=function(h){function f(y,b){return h.call(this,y,b,new im,!1)||this}return(0,re.ZT)(f,h),Object.defineProperty(f.prototype,"parent",{get:function(){var y=Zi(this._path);return null===y?null:new f(this._repo,y)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"root",{get:function(){for(var y=this;null!==y.parent;)y=y.parent;return y},enumerable:!1,configurable:!0}),f}(Hn),Sd=function(){function h(f,y,b){this._node=f,this.ref=y,this._index=b}return Object.defineProperty(h.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),h.prototype.child=function(f){var y=new Ot(f),b=Ws(this.ref,f);return new h(this._node.getChild(y),b,hn)},h.prototype.exists=function(){return!this._node.isEmpty()},h.prototype.exportVal=function(){return this._node.val(!0)},h.prototype.forEach=function(f){var y=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(T,I){return f(new h(I,Ws(y.ref,T),hn))})},h.prototype.hasChild=function(f){var y=new Ot(f);return!this._node.getChild(y).isEmpty()},h.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},h.prototype.toJSON=function(){return this.exportVal()},h.prototype.val=function(){return this._node.val()},h}();function Id(h,f){return(h=(0,P.m9)(h))._checkNotDeleted("ref"),void 0!==f?Ws(h._root,f):h._root}function Jl(h,f){(h=(0,P.m9)(h))._checkNotDeleted("refFromURL");var y=Td(f,h._repo.repoInfo_.nodeAdmin);Xo("refFromURL",y);var b=y.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&b.host!==h._repo.repoInfo_.host&&Kt("refFromURL: Host name does not match the current database: (found "+b.host+" but expected "+h._repo.repoInfo_.host+")"),Id(h,y.path.toString())}function Ws(h,f){return null===Pt((h=(0,P.m9)(h))._path)?((y=f)&&(y=y.replace(/^\/*\.info(\/|$)/,"/")),Oa("child","path",y,!1)):Oa("child","path",f,!1),new Gt(h._repo,Ft(h._path,f));var y}function Ad(h,f){h=(0,P.m9)(h),vr("push",h._path),Ui("push",f,h._path,!0);var R,y=Lh(h._repo),b=nm(y),T=Ws(h,b),I=Ws(h,b);return R=null!=f?Md(I,f).then(function(){return I}):Promise.resolve(I),T.then=R.then.bind(R),T.catch=R.then.bind(R,void 0),T}function Xl(h){return vr("remove",h._path),Md(h,null)}function Md(h,f){h=(0,P.m9)(h),vr("set",h._path),Ui("set",f,h._path,!1);var y=new P.BH;return Gs(h._repo,h._path,f,null,y.wrapCallback(function(){})),y.promise}function xd(h,f){h=(0,P.m9)(h),vr("setPriority",h._path),wo("setPriority",f,!1);var y=new P.BH;return Gs(h._repo,Ft(h._path,".priority"),f,null,y.wrapCallback(function(){})),y.promise}function n0(h,f,y){if(vr("setWithPriority",h._path),Ui("setWithPriority",f,h._path,!1),wo("setWithPriority",y,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";var b=new P.BH;return Gs(h._repo,h._path,f,y,b.wrapCallback(function(){})),b.promise}function Lm(h,f){Na("update",f,h._path,!1);var y=new P.BH;return function(h,f,y,b){Pa(h,"update",{path:f.toString(),value:y});var T=!0,I=Tu(h),R={};if(rt(y,function(G,z){T=!1,R[G]=wm(Ft(f,G),Dn(z),h.serverSyncTree_,I)}),T)Be("update() called with empty data.  Don't do anything."),ni(0,b,"ok",void 0);else{var F=wd(h),V=function(h,f,y,b){!function(h,f,y,b){(0,P.hu)(b>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:f,children:y,writeId:b,visible:!0}),h.visibleWrites=Os(h.visibleWrites,f,y),h.lastWriteId=b}(h.pendingWriteTree_,f,y,b);var T=yi.fromObject(y);return Qo(h,new od({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},f,T))}(h.serverSyncTree_,f,R,F);jn(h.eventQueue_,V),h.server_.merge(f.toString(),y,function(G,z){var ue="ok"===G;ue||cn("update at "+f+" failed: "+G);var Te=yr(h.serverSyncTree_,F,!ue),Oe=Te.length>0?$s(h,f):f;ir(h.eventQueue_,Oe,Te),ni(0,b,G,z)}),rt(y,function(G){var z=Ql(h,Ft(f,G));$s(h,z)}),ir(h.eventQueue_,f,[])}}(h._repo,h._path,f,y.wrapCallback(function(){})),y.promise}function Wh(h){return function(h,f){var y=function(h,f){var y=f._path,b=null;h.syncPointTree_.foreachOnPath(y,function(G,z){var ue=Tn(G,y);b=b||Sa(z,ue)});var T=h.syncPointTree_.get(y);T?b=b||Sa(T,it()):(T=new ym,h.syncPointTree_=h.syncPointTree_.set(y,T));var I=null!=b,R=I?new Rs(b,!0,!1):null;return function(h){return sd(h.viewCache_)}(hd(T,f,Fs(h.pendingWriteTree_,f._path),I?R.getNode():_t.EMPTY_NODE,I))}(h.serverSyncTree_,f);return null!=y?Promise.resolve(y):h.server_.get(f).then(function(b){var T=Dn(b).withIndex(f._queryParams.getIndex()),I=Ls(h.serverSyncTree_,f._path,T);return To(h.eventQueue_,f._path,I),Promise.resolve(T)},function(b){return Pa(h,"get for query "+(0,P.Pz)(f)+" failed: "+b),Promise.reject(new Error(b))})}((h=(0,P.m9)(h))._repo,h).then(function(f){return new Sd(f,new Gt(h._repo,h._path),h._queryParams.getIndex())})}var Fa=function(){function h(f){this.callbackContext=f}return h.prototype.respondsTo=function(f){return"value"===f},h.prototype.createEvent=function(f,y){var b=y._queryParams.getIndex();return new km("value",this,new Sd(f.snapshotNode,new Gt(y._repo,y._path),b))},h.prototype.getEventRunner=function(f){var y=this;return"cancel"===f.getEventType()?function(){return y.callbackContext.onCancel(f.error)}:function(){return y.callbackContext.onValue(f.snapshot,null)}},h.prototype.createCancelEvent=function(f,y){return this.callbackContext.hasCancelCallback?new qh(this,f,y):null},h.prototype.matches=function(f){return f instanceof h&&(!f.callbackContext||!this.callbackContext||f.callbackContext.matches(this.callbackContext))},h.prototype.hasAnyCallback=function(){return null!==this.callbackContext},h}(),br=function(){function h(f,y){this.eventType=f,this.callbackContext=y}return h.prototype.respondsTo=function(f){var y="children_added"===f?"child_added":f;return this.eventType===("children_removed"===y?"child_removed":y)},h.prototype.createCancelEvent=function(f,y){return this.callbackContext.hasCancelCallback?new qh(this,f,y):null},h.prototype.createEvent=function(f,y){(0,P.hu)(null!=f.childName,"Child events should have a childName.");var b=Ws(new Gt(y._repo,y._path),f.childName),T=y._queryParams.getIndex();return new km(f.type,this,new Sd(f.snapshotNode,b,T),f.prevName)},h.prototype.getEventRunner=function(f){var y=this;return"cancel"===f.getEventType()?function(){return y.callbackContext.onCancel(f.error)}:function(){return y.callbackContext.onValue(f.snapshot,f.prevName)}},h.prototype.matches=function(f){return f instanceof h&&this.eventType===f.eventType&&(!this.callbackContext||!f.callbackContext||this.callbackContext.matches(f.callbackContext))},h.prototype.hasAnyCallback=function(){return!!this.callbackContext},h}();function ka(h,f,y,b,T){var I;if("object"==typeof b&&(I=void 0,T=b),"function"==typeof b&&(I=b),T&&T.onlyOnce){var R=y,F=function(z,ue){jh(h._repo,h,G),R(z,ue)};F.userCallback=y.userCallback,F.context=y.context,y=F}var V=new $h(y,I||void 0),G="value"===f?new Fa(V):new br(f,V);return function(h,f,y){var b;b=".info"===Pt(f._path)?j_(h.infoSyncTree_,f,y):j_(h.serverSyncTree_,f,y),To(h.eventQueue_,f._path,b)}(h._repo,h,G),function(){return jh(h._repo,h,G)}}function Rd(h,f,y,b){return ka(h,"value",f,y,b)}function zh(h,f,y,b){return ka(h,"child_added",f,y,b)}function Wn(h,f,y,b){return ka(h,"child_changed",f,y,b)}function Su(h,f,y,b){return ka(h,"child_moved",f,y,b)}function Nd(h,f,y,b){return ka(h,"child_removed",f,y,b)}function Vm(h,f,y){var b=null,T=y?new $h(y):null;"value"===f?b=new Fa(T):f&&(b=new br(f,T)),jh(h._repo,h,b)}var io=function(){},Yh=function(h){function f(y,b){var T=h.call(this)||this;return T._value=y,T._key=b,T}return(0,re.ZT)(f,h),f.prototype._apply=function(y){Ui("endAt",this._value,y._path,!0);var b=xl(y._queryParams,this._value,this._key);if(Dd(b),ri(b),y._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hn(y._repo,y._path,b,y._orderByCalled)},f}(io);function Um(h,f){return wu("endAt","key",f,!0),new Yh(h,f)}var Od=function(h){function f(y,b){var T=h.call(this)||this;return T._value=y,T._key=b,T}return(0,re.ZT)(f,h),f.prototype._apply=function(y){Ui("endBefore",this._value,y._path,!1);var b=function(h,f,y){var T;return h.index_===mo?("string"==typeof f&&(f=Ms(f)),T=xl(h,f,y)):T=xl(h,f,null==y?le:Ms(y)),T.endBeforeSet_=!0,T}(y._queryParams,this._value,this._key);if(Dd(b),ri(b),y._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hn(y._repo,y._path,b,y._orderByCalled)},f}(io);function Qh(h,f){return wu("endBefore","key",f,!0),new Od(h,f)}var oo=function(h){function f(y,b){var T=h.call(this)||this;return T._value=y,T._key=b,T}return(0,re.ZT)(f,h),f.prototype._apply=function(y){Ui("startAt",this._value,y._path,!0);var b=Ml(y._queryParams,this._value,this._key);if(Dd(b),ri(b),y._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Hn(y._repo,y._path,b,y._orderByCalled)},f}(io);function ec(h,f){return void 0===h&&(h=null),wu("startAt","key",f,!0),new oo(h,f)}var Bm=function(h){function f(y,b){var T=h.call(this)||this;return T._value=y,T._key=b,T}return(0,re.ZT)(f,h),f.prototype._apply=function(y){Ui("startAfter",this._value,y._path,!1);var b=function(h,f,y){var b;return h.index_===mo?("string"==typeof f&&(f=Sl(f)),b=Ml(h,f,y)):b=Ml(h,f,null==y?Ae:Sl(y)),b.startAfterSet_=!0,b}(y._queryParams,this._value,this._key);if(Dd(b),ri(b),y._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Hn(y._repo,y._path,b,y._orderByCalled)},f}(io);function jm(h,f){return wu("startAfter","key",f,!0),new Bm(h,f)}var Hm=function(h){function f(y){var b=h.call(this)||this;return b._limit=y,b}return(0,re.ZT)(f,h),f.prototype._apply=function(y){if(y._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Hn(y._repo,y._path,function(h,f){var y=h.copy();return y.limitSet_=!0,y.limit_=f,y.viewFrom_="l",y}(y._queryParams,this._limit),y._orderByCalled)},f}(io);function zs(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Hm(h)}var Kh=function(h){function f(y){var b=h.call(this)||this;return b._limit=y,b}return(0,re.ZT)(f,h),f.prototype._apply=function(y){if(y._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Hn(y._repo,y._path,function(h,f){var y=h.copy();return y.limitSet_=!0,y.limit_=f,y.viewFrom_="r",y}(y._queryParams,this._limit),y._orderByCalled)},f}(io);function r0(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Kh(h)}var Zh=function(h){function f(y){var b=h.call(this)||this;return b._path=y,b}return(0,re.ZT)(f,h),f.prototype._apply=function(y){kt(y,"orderByChild");var b=new Ot(this._path);if(Ut(b))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var T=new cu(b),I=jr(y._queryParams,T);return ri(I),new Hn(y._repo,y._path,I,!0)},f}(io);function Jh(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Oa("orderByChild","path",h,!1),new Zh(h)}var Iu=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return(0,re.ZT)(f,h),f.prototype._apply=function(y){kt(y,"orderByKey");var b=jr(y._queryParams,mo);return ri(b),new Hn(y._repo,y._path,b,!0)},f}(io);function Gm(){return new Iu}var Xh=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return(0,re.ZT)(f,h),f.prototype._apply=function(y){kt(y,"orderByPriority");var b=jr(y._queryParams,hn);return ri(b),new Hn(y._repo,y._path,b,!0)},f}(io);function Ys(){return new Xh}var i0=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return(0,re.ZT)(f,h),f.prototype._apply=function(y){kt(y,"orderByValue");var b=jr(y._queryParams,Dl);return ri(b),new Hn(y._repo,y._path,b,!0)},f}(io);function Pd(){return new i0}var qm=function(h){function f(y,b){var T=h.call(this)||this;return T._value=y,T._key=b,T}return(0,re.ZT)(f,h),f.prototype._apply=function(y){if(Ui("equalTo",this._value,y._path,!1),y._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(y._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Yh(this._value,this._key)._apply(new oo(this._value,this._key)._apply(y))},f}(io);function o0(h,f){return wu("equalTo","key",f,!0),new qm(h,f)}function so(h){for(var f,y,b=[],T=1;T<arguments.length;T++)b[T-1]=arguments[T];var I=(0,P.m9)(h);try{for(var R=(0,re.XA)(b),F=R.next();!F.done;F=R.next()){var V=F.value;I=V._apply(I)}}catch(G){f={error:G}}finally{try{F&&!F.done&&(y=R.return)&&y.call(R)}finally{if(f)throw f.error}}return I}(function(h){(0,P.hu)(!Rh,"__referenceConstructor has already been defined"),Rh=h})(Gt),function(h){(0,P.hu)(!_i,"__referenceConstructor has already been defined"),_i=h}(Gt);var Cr={},La=!1;function tp(h,f,y,b,T){var I=b||h.options.databaseURL;void 0===I&&(h.options.projectId||Kt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Be("Using default host for project ",h.options.projectId),I=h.options.projectId+"-default-rtdb.firebaseio.com");var V,R=Td(I,T),F=R.repoInfo,G=void 0;"undefined"!=typeof process&&(G=process.env.FIREBASE_DATABASE_EMULATOR_HOST),G?(V=!0,F=(R=Td(I="http://"+G+"?ns="+F.namespace,T)).repoInfo):V=!R.repoInfo.secure;var z=T&&V?new Nt(Nt.OWNER):new zt(h.name,h.options,f);Xo("Invalid Firebase Database URL",R),Ut(R.path)||Kt("Database URL must point to the root of a Firebase Database (not including a child path).");var ue=function(h,f,y,b){var T=Cr[f.name];T||(Cr[f.name]=T={});var I=T[h.toURLString()];return I&&Kt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),I=new Fh(h,La,y,b),T[h.toURLString()]=I,I}(F,h,z,new Cl(h.name,y));return new s0(ue,h)}var s0=function(){function h(f,y){this._repoInternal=f,this.app=y,this.type="database",this._instanceStarted=!1}return Object.defineProperty(h.prototype,"_repo",{get:function(){return this._instanceStarted||(function(h,f,y){if(h.stats_=dn(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new HE(h.repoInfo_,function(b,T,I,R){Or(h,b,T,I,R)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(function(){return Du(h,!0)},0);else{if(null!=y){if("object"!=typeof y)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(y)}catch(b){throw new Error("Invalid authOverride provided: "+b)}}h.persistentConnection_=new au(h.repoInfo_,f,function(b,T,I,R){Or(h,b,T,I,R)},function(b){Du(h,b)},function(b){!function(h,f){rt(f,function(y,b){Uh(h,y,b)})}(h,b)},h.authTokenProvider_,h.appCheckProvider_,y),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(function(b){h.server_.refreshAuthToken(b)}),h.appCheckProvider_.addTokenChangeListener(function(b){h.server_.refreshAppCheckToken(b.token)}),h.statsReporter_=function(h,f){var y=h.toString();return Ni[y]||(Ni[y]=f()),Ni[y]}(h.repoInfo_,function(){return new sm(h.stats_,h.server_)}),h.infoData_=new I_,h.infoSyncTree_=new bm({startListening:function(b,T,I,R){var F=[],V=h.infoData_.getNode(b._path);return V.isEmpty()||(F=Ls(h.infoSyncTree_,b._path,V),setTimeout(function(){R("ok")},0)),F},stopListening:function(){}}),Uh(h,"connected",!1),h.serverSyncTree_=new bm({startListening:function(b,T,I,R){return h.server_.listen(b,I,T,function(F,V){var G=R(F,V);ir(h.eventQueue_,b._path,G)}),[]},stopListening:function(b,T){h.server_.unlisten(b,T)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Gt(this._repo,it())),this._rootInternal},enumerable:!1,configurable:!0}),h.prototype._delete=function(){return null!==this._rootInternal&&(function(h,f){var y=Cr[f];(!y||y[h.key]!==h)&&Kt("Database "+f+"("+h.repoInfo_+") has already been deleted."),Hh(h),delete y[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},h.prototype._checkNotDeleted=function(f){null===this._rootInternal&&Kt("Cannot call "+f+" on a deleted database.")},h}();function u0(h){(h=(0,P.m9)(h))._checkNotDeleted("goOffline"),Hh(h._repo)}function Va(h){(h=(0,P.m9)(h))._checkNotDeleted("goOnline"),function(h){h.persistentConnection_&&h.persistentConnection_.resume(Q_)}(h._repo)}var bi={".sv":"timestamp"},Wm=function(){function h(f,y){this.committed=f,this.snapshot=y}return h.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},h}();function l0(h,f,y){var b;if(h=(0,P.m9)(h),vr("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";var T=null===(b=null==y?void 0:y.applyLocally)||void 0===b||b,I=new P.BH,F=Rd(h,function(){});return function(h,f,y,b,T,I){Pa(h,"transaction on "+f);var R={path:f,update:y,onComplete:b,status:null,order:Ie(),applyLocally:I,retryCount:0,unwatcher:T,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},F=Bi(h,f,void 0);R.currentInputSnapshot=F;var V=R.update(F.val());if(void 0===V)R.unwatcher(),R.currentOutputSnapshotRaw=null,R.currentOutputSnapshotResolved=null,R.onComplete&&R.onComplete(null,!1,R.currentInputSnapshot);else{zl("transaction failed: Data returned ",V,R.path),R.status=0;var G=Wl(h.transactionQueueTree_,f),z=pn(G)||[];z.push(R),bd(G,z);var ue=void 0;"object"==typeof V&&null!==V&&(0,P.r3)(V,".priority")?(ue=(0,P.DV)(V,".priority"),(0,P.hu)(Hs(ue),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ue=(bu(h.serverSyncTree_,f)||_t.EMPTY_NODE).getPriority().val();var Oe=Tu(h),He=Dn(V,ue),yt=$l(He,F,Oe);R.currentOutputSnapshotRaw=He,R.currentOutputSnapshotResolved=yt,R.currentWriteId=wd(h);var nt=bo(h.serverSyncTree_,f,yt,R.currentWriteId,R.applyLocally);ir(h.eventQueue_,f,nt),qs(h,h.transactionQueueTree_)}}(h._repo,h._path,f,function(V,G,z){var ue=null;V?I.reject(V):(ue=new Sd(z,new Gt(h._repo,h._path),hn),I.resolve(new Wm(G,ue)))},F,T),I.promise}var ao=function(){function h(f){this._delegate=f}return h.prototype.cancel=function(f){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",f,!0);var y=this._delegate.cancel();return f&&y.then(function(){return f(null)},function(b){return f(b)}),y},h.prototype.remove=function(f){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",f,!0);var y=this._delegate.remove();return f&&y.then(function(){return f(null)},function(b){return f(b)}),y},h.prototype.set=function(f,y){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",y,!0);var b=this._delegate.set(f);return y&&b.then(function(){return y(null)},function(T){return y(T)}),b},h.prototype.setWithPriority=function(f,y,b){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",b,!0);var T=this._delegate.setWithPriority(f,y);return b&&T.then(function(){return b(null)},function(I){return b(I)}),T},h.prototype.update=function(f,y){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(f)){for(var b={},T=0;T<f.length;++T)b[""+T]=f[T];f=b,cn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",y,!0);var I=this._delegate.update(f);return y&&I.then(function(){return y(null)},function(R){return y(R)}),I},h}(),rp=function(){function h(f,y){this.committed=f,this.snapshot=y}return h.prototype.toJSON=function(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},h}(),Ua=function(){function h(f,y){this._database=f,this._delegate=y}return h.prototype.val=function(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},h.prototype.exportVal=function(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},h.prototype.toJSON=function(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},h.prototype.exists=function(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},h.prototype.child=function(f){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),f=String(f),Oa("DataSnapshot.child","path",f,!1),new h(this._database,this._delegate.child(f))},h.prototype.hasChild=function(f){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Oa("DataSnapshot.hasChild","path",f,!1),this._delegate.hasChild(f)},h.prototype.getPriority=function(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},h.prototype.forEach=function(f){var y=this;return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",f,!1),this._delegate.forEach(function(b){return f(new h(y._database,b))})},h.prototype.hasChildren=function(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(h.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),h.prototype.numChildren=function(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},h.prototype.getRef=function(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Qs(this._database,this._delegate.ref)},Object.defineProperty(h.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),h}(),ip=function(){function h(f,y){this.database=f,this._delegate=y}return h.prototype.on=function(f,y,b,T){var R,I=this;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",y,!1);var F=h.getCancelAndContextArgs_("Query.on",b,T),V=function(z,ue){y.call(F.context,new Ua(I.database,z),ue)};V.userCallback=y,V.context=F.context;var G=null===(R=F.cancel)||void 0===R?void 0:R.bind(F.context);switch(f){case"value":return Rd(this._delegate,V,G),y;case"child_added":return zh(this._delegate,V,G),y;case"child_removed":return Nd(this._delegate,V,G),y;case"child_changed":return Wn(this._delegate,V,G),y;case"child_moved":return Su(this._delegate,V,G),y;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},h.prototype.off=function(f,y,b){if((0,P.Dv)("Query.off",0,3,arguments.length),q_("Query.off",f,!0),(0,P.Wj)("Query.off","callback",y,!0),(0,P.lb)("Query.off","context",b,!0),y){var T=function(){};T.userCallback=y,T.context=b,Vm(this._delegate,f,T)}else Vm(this._delegate,f)},h.prototype.get=function(){var f=this;return Wh(this._delegate).then(function(y){return new Ua(f.database,y)})},h.prototype.once=function(f,y,b,T){var I=this;(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",y,!0);var R=h.getCancelAndContextArgs_("Query.once",b,T),F=new P.BH,V=function(z,ue){var Te=new Ua(I.database,z);y&&y.call(R.context,Te,ue),F.resolve(Te)};V.userCallback=y,V.context=R.context;var G=function(z){R.cancel&&R.cancel.call(R.context,z),F.reject(z)};switch(f){case"value":Rd(this._delegate,V,G,{onlyOnce:!0});break;case"child_added":zh(this._delegate,V,G,{onlyOnce:!0});break;case"child_removed":Nd(this._delegate,V,G,{onlyOnce:!0});break;case"child_changed":Wn(this._delegate,V,G,{onlyOnce:!0});break;case"child_moved":Su(this._delegate,V,G,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return F.promise},h.prototype.limitToFirst=function(f){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new h(this.database,so(this._delegate,zs(f)))},h.prototype.limitToLast=function(f){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new h(this.database,so(this._delegate,r0(f)))},h.prototype.orderByChild=function(f){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new h(this.database,so(this._delegate,Jh(f)))},h.prototype.orderByKey=function(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new h(this.database,so(this._delegate,Gm()))},h.prototype.orderByPriority=function(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new h(this.database,so(this._delegate,Ys()))},h.prototype.orderByValue=function(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new h(this.database,so(this._delegate,Pd()))},h.prototype.startAt=function(f,y){return void 0===f&&(f=null),(0,P.Dv)("Query.startAt",0,2,arguments.length),new h(this.database,so(this._delegate,ec(f,y)))},h.prototype.startAfter=function(f,y){return void 0===f&&(f=null),(0,P.Dv)("Query.startAfter",0,2,arguments.length),new h(this.database,so(this._delegate,jm(f,y)))},h.prototype.endAt=function(f,y){return void 0===f&&(f=null),(0,P.Dv)("Query.endAt",0,2,arguments.length),new h(this.database,so(this._delegate,Um(f,y)))},h.prototype.endBefore=function(f,y){return void 0===f&&(f=null),(0,P.Dv)("Query.endBefore",0,2,arguments.length),new h(this.database,so(this._delegate,Qh(f,y)))},h.prototype.equalTo=function(f,y){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new h(this.database,so(this._delegate,o0(f,y)))},h.prototype.toString=function(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},h.prototype.toJSON=function(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},h.prototype.isEqual=function(f){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(f instanceof h)){var y="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(y)}return this._delegate.isEqual(f._delegate)},h.getCancelAndContextArgs_=function(f,y,b){var T={cancel:void 0,context:void 0};if(y&&b)T.cancel=y,(0,P.Wj)(f,"cancel",T.cancel,!0),T.context=b,(0,P.lb)(f,"context",T.context,!0);else if(y)if("object"==typeof y&&null!==y)T.context=y;else{if("function"!=typeof y)throw new Error((0,P.gK)(f,"cancelOrContext")+" must either be a cancel callback or a context object.");T.cancel=y}return T},Object.defineProperty(h.prototype,"ref",{get:function(){return new Qs(this.database,new Gt(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),h}(),Qs=function(h){function f(y,b){var T=h.call(this,y,new Hn(b._repo,b._path,new im,!1))||this;return T.database=y,T._delegate=b,T}return(0,re.ZT)(f,h),f.prototype.getKey=function(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},f.prototype.child=function(y){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof y&&(y=String(y)),new f(this.database,Ws(this._delegate,y))},f.prototype.getParent=function(){(0,P.Dv)("Reference.parent",0,0,arguments.length);var y=this._delegate.parent;return y?new f(this.database,y):null},f.prototype.getRoot=function(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new f(this.database,this._delegate.root)},f.prototype.set=function(y,b){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",b,!0);var T=Md(this._delegate,y);return b&&T.then(function(){return b(null)},function(I){return b(I)}),T},f.prototype.update=function(y,b){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(y)){for(var T={},I=0;I<y.length;++I)T[""+I]=y[I];y=T,cn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vr("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",b,!0);var R=Lm(this._delegate,y);return b&&R.then(function(){return b(null)},function(F){return b(F)}),R},f.prototype.setWithPriority=function(y,b,T){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",T,!0);var I=n0(this._delegate,y,b);return T&&I.then(function(){return T(null)},function(R){return T(R)}),I},f.prototype.remove=function(y){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",y,!0);var b=Xl(this._delegate);return y&&b.then(function(){return y(null)},function(T){return y(T)}),b},f.prototype.transaction=function(y,b,T){var I=this;(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",y,!1),(0,P.Wj)("Reference.transaction","onComplete",b,!0),W_("Reference.transaction","applyLocally",T,!0);var R=l0(this._delegate,y,{applyLocally:T}).then(function(F){return new rp(F.committed,new Ua(I.database,F.snapshot))});return b&&R.then(function(F){return b(null,F.committed,F.snapshot)},function(F){return b(F,!1,null)}),R},f.prototype.setPriority=function(y,b){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",b,!0);var T=xd(this._delegate,y);return b&&T.then(function(){return b(null)},function(I){return b(I)}),T},f.prototype.push=function(y,b){var T=this;(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",b,!0);var I=Ad(this._delegate,y),R=I.then(function(V){return new f(T.database,V)});b&&R.then(function(){return b(null)},function(V){return b(V)});var F=new f(this.database,I);return F.then=R.then.bind(R),F.catch=R.catch.bind(R,void 0),F},f.prototype.onDisconnect=function(){return vr("Reference.onDisconnect",this._delegate._path),new ao(new Zl(this._delegate._repo,this._delegate._path))},Object.defineProperty(f.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),f}(ip),Do=function(){function h(f,y){var b=this;this._delegate=f,this.app=y,this.INTERNAL={delete:function(){return b._delegate._delete()}}}return h.prototype.useEmulator=function(f,y,b){void 0===b&&(b={}),function(h,f,y,b){void 0===b&&(b={}),(h=(0,P.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&Kt("Cannot call useEmulator() after instance has already been initialized.");var T=h._repoInternal,I=void 0;if(T.repoInfo_.nodeAdmin)b.mockUserToken&&Kt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),I=new Nt(Nt.OWNER);else if(b.mockUserToken){var R=(0,P.Sg)(b.mockUserToken,h.app.options.projectId);I=new Nt(R)}!function(h,f,y,b){h.repoInfo_=new Rn(f+":"+y,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),b&&(h.authTokenProvider_=b)}(T,f,y,I)}(this._delegate,f,y,b)},h.prototype.ref=function(f){if((0,P.Dv)("database.ref",0,1,arguments.length),f instanceof Qs){var y=Jl(this._delegate,f.toString());return new Qs(this,y)}return y=Id(this._delegate,f),new Qs(this,y)},h.prototype.refFromURL=function(f){var y="database.refFromURL";(0,P.Dv)(y,1,1,arguments.length);var b=Jl(this._delegate,f);return new Qs(this,b)},h.prototype.goOffline=function(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),u0(this._delegate)},h.prototype.goOnline=function(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),Va(this._delegate)},h.ServerValue={TIMESTAMP:bi,increment:function(f){return function(h){return{".sv":{increment:h}}}(f)}},h}(),Qm=Object.freeze({__proto__:null,forceLongPolling:function(){gr.forceDisallow(),Kc.forceAllow()},forceWebSockets:function(){Kc.forceDisallow()},isWebSocketsAvailable:function(){return gr.isAvailable()},setSecurityDebugCallback:function(h,f){h._delegate._repo.persistentConnection_.securityDebugCallback_=f},stats:function(h,f){!function(h,f){if(void 0===f&&(f=!1),"undefined"!=typeof console){var y;f?(h.statsListener_||(h.statsListener_=new vo(h.stats_)),y=h.statsListener_.get()):y=h.stats_.get();var b=Object.keys(y).reduce(function(T,I){return Math.max(I.length,T)},0);rt(y,function(T,I){for(var R=T,F=T.length;F<b+2;F++)R+=" ";console.log(R+I)})}}(h._delegate._repo,f)},statsIncrementCounter:function(h,f){!function(h,f){h.stats_.incrementCounter(f),function(h,f){h.statsToReport_[f]=!0}(h.statsReporter_,f)}(h._delegate._repo,f)},dataUpdateCount:function(h){return h._delegate._repo.dataUpdateCount},interceptServerData:function(h,f){return function(h,f){h.interceptServerDataCallback_=f}(h._delegate._repo,f)},initStandalone:function(h){var f=h.app,y=h.url,T=h.customAuthImpl,I=h.namespace,R=h.nodeAdmin,F=void 0!==R&&R;oe(h.version);var V=new me.zt("auth-internal",new me.H0("database-standalone"));return V.setComponent(new me.wA("auth-internal",function(){return T},"PRIVATE")),{instance:new Do(tp(f,V,void 0,y,F),f),namespace:I}}}),Ld=au;au.prototype.simpleListen=function(h,f){this.sendRequest("q",{p:h},f)},au.prototype.echo=function(h,f){this.sendRequest("echo",{d:h},f)};var Zm=Object.freeze({__proto__:null,DataConnection:Ld,RealTimeConnection:Ts,hijackHash:function(h){var f=au.prototype.put;return au.prototype.put=function(y,b,T,I){void 0!==I&&(I=h()),f.call(this,y,b,T,I)},function(){au.prototype.put=f}},ConnectionTarget:Rn,queryIdentifier:function(h){return h._delegate._queryIdentifier},forceRestClient:function(h){!function(h){La=h}(h)}}),tc=Do.ServerValue;!function(h){oe(h.SDK_VERSION);var f=h.INTERNAL.registerComponent(new me.wA("database",function(y,b){var T=b.instanceIdentifier,I=y.getProvider("app").getImmediate(),R=y.getProvider("auth-internal"),F=y.getProvider("app-check-internal");return new Do(tp(I,R,F,T),I)},"PUBLIC").setServiceProps({Reference:Qs,Query:ip,Database:Do,DataSnapshot:Ua,enableLogging:gt,INTERNAL:Qm,ServerValue:tc,TEST_ACCESS:Zm}).setMultipleInstances(!0));h.registerVersion("@firebase/database","0.10.9"),(0,P.Yr)()&&(et.exports=f)}(p.Z)},300:(et,xe,$)=>{"use strict";function p(){for(var H=0,J=0,ve=arguments.length;J<ve;J++)H+=arguments[J].length;var Se=Array(H),Ie=0;for(J=0;J<ve;J++)for(var qe=arguments[J],Pe=0,Fe=qe.length;Pe<Fe;Pe++,Ie++)Se[Ie]=qe[Pe];return Se}$.d(xe,{in:()=>re,Yd:()=>oe,Ub:()=>W,Am:()=>te});var me,P=[],re=(()=>{return(H=re||(re={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",re;var H})(),we={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},ie=re.INFO,be=((me={})[re.DEBUG]="log",me[re.VERBOSE]="log",me[re.INFO]="info",me[re.WARN]="warn",me[re.ERROR]="error",me),ce=function(H,J){for(var ve=[],Se=2;Se<arguments.length;Se++)ve[Se-2]=arguments[Se];if(!(J<H.logLevel)){var Ie=(new Date).toISOString(),qe=be[J];if(!qe)throw new Error("Attempted to log a message with an invalid logType (value: "+J+")");console[qe].apply(console,p(["["+Ie+"]  "+H.name+":"],ve))}},oe=function(){function H(J){this.name=J,this._logLevel=ie,this._logHandler=ce,this._userLogHandler=null,P.push(this)}return Object.defineProperty(H.prototype,"logLevel",{get:function(){return this._logLevel},set:function(J){if(!(J in re))throw new TypeError('Invalid value "'+J+'" assigned to `logLevel`');this._logLevel=J},enumerable:!1,configurable:!0}),H.prototype.setLogLevel=function(J){this._logLevel="string"==typeof J?we[J]:J},Object.defineProperty(H.prototype,"logHandler",{get:function(){return this._logHandler},set:function(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(J){this._userLogHandler=J},enumerable:!1,configurable:!0}),H.prototype.debug=function(){for(var J=[],ve=0;ve<arguments.length;ve++)J[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,p([this,re.DEBUG],J)),this._logHandler.apply(this,p([this,re.DEBUG],J))},H.prototype.log=function(){for(var J=[],ve=0;ve<arguments.length;ve++)J[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,p([this,re.VERBOSE],J)),this._logHandler.apply(this,p([this,re.VERBOSE],J))},H.prototype.info=function(){for(var J=[],ve=0;ve<arguments.length;ve++)J[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,p([this,re.INFO],J)),this._logHandler.apply(this,p([this,re.INFO],J))},H.prototype.warn=function(){for(var J=[],ve=0;ve<arguments.length;ve++)J[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,p([this,re.WARN],J)),this._logHandler.apply(this,p([this,re.WARN],J))},H.prototype.error=function(){for(var J=[],ve=0;ve<arguments.length;ve++)J[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,p([this,re.ERROR],J)),this._logHandler.apply(this,p([this,re.ERROR],J))},H}();function W(H){P.forEach(function(J){J.setLogLevel(H)})}function te(H,J){for(var ve=function(Pe){var Fe=null;J&&J.level&&(Fe=we[J.level]),Pe.userLogHandler=null===H?null:function($e,gt){for(var Be=[],en=2;en<arguments.length;en++)Be[en-2]=arguments[en];var gn=Be.map(function(Kt){if(null==Kt)return null;if("string"==typeof Kt)return Kt;if("number"==typeof Kt||"boolean"==typeof Kt)return Kt.toString();if(Kt instanceof Error)return Kt.message;try{return JSON.stringify(Kt)}catch(cn){return null}}).filter(function(Kt){return Kt}).join(" ");gt>=(null!=Fe?Fe:$e.logLevel)&&H({level:re[gt].toLowerCase(),message:gn,args:Be,type:$e.name})}},Se=0,Ie=P;Se<Ie.length;Se++)ve(Ie[Se])}},4685:(et,xe,$)=>{"use strict";$.d(xe,{BH:()=>J,LL:()=>he,gQ:()=>Nt,hu:()=>P,g5:()=>re,US:()=>be,h$:()=>ce,r3:()=>Zt,Sg:()=>ve,ne:()=>hr,p$:()=>W,ZB:()=>te,gK:()=>ho,m9:()=>zg,z$:()=>Se,GJ:()=>yn,jU:()=>Pe,ru:()=>Fe,d:()=>gt,xb:()=>xn,w1:()=>Be,uI:()=>Ie,UG:()=>qe,Yr:()=>gn,b$:()=>$e,G6:()=>Kt,Mn:()=>en,w9:()=>xt,cI:()=>mn,UI:()=>ur,xO:()=>Es,DV:()=>xi,ug:()=>Rn,dS:()=>fh,Pz:()=>at,Dv:()=>Un,Wj:()=>Ri,lb:()=>Jn});var p=$(4762),P=function(K,Q){if(!K)throw re(Q)},re=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},we=function(K){for(var Q=[],ne=0,Ce=0;Ce<K.length;Ce++){var se=K.charCodeAt(Ce);se<128?Q[ne++]=se:se<2048?(Q[ne++]=se>>6|192,Q[ne++]=63&se|128):55296==(64512&se)&&Ce+1<K.length&&56320==(64512&K.charCodeAt(Ce+1))?(se=65536+((1023&se)<<10)+(1023&K.charCodeAt(++Ce)),Q[ne++]=se>>18|240,Q[ne++]=se>>12&63|128,Q[ne++]=se>>6&63|128,Q[ne++]=63&se|128):(Q[ne++]=se>>12|224,Q[ne++]=se>>6&63|128,Q[ne++]=63&se|128)}return Q},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(K,Q){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var ne=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[],se=0;se<K.length;se+=3){var je=K[se],pt=se+1<K.length,Vt=pt?K[se+1]:0,tn=se+2<K.length,sn=tn?K[se+2]:0,Qr=(15&Vt)<<2|sn>>6,Go=63&sn;tn||(Go=64,pt||(Qr=64)),Ce.push(ne[je>>2],ne[(3&je)<<4|Vt>>4],ne[Qr],ne[Go])}return Ce.join("")},encodeString:function(K,Q){return this.HAS_NATIVE_SUPPORT&&!Q?btoa(K):this.encodeByteArray(we(K),Q)},decodeString:function(K,Q){return this.HAS_NATIVE_SUPPORT&&!Q?atob(K):function(K){for(var Q=[],ne=0,Ce=0;ne<K.length;){var se=K[ne++];if(se<128)Q[Ce++]=String.fromCharCode(se);else if(se>191&&se<224){var je=K[ne++];Q[Ce++]=String.fromCharCode((31&se)<<6|63&je)}else if(se>239&&se<365){var tn=((7&se)<<18|(63&(je=K[ne++]))<<12|(63&(pt=K[ne++]))<<6|63&K[ne++])-65536;Q[Ce++]=String.fromCharCode(55296+(tn>>10)),Q[Ce++]=String.fromCharCode(56320+(1023&tn))}else{je=K[ne++];var pt=K[ne++];Q[Ce++]=String.fromCharCode((15&se)<<12|(63&je)<<6|63&pt)}}return Q.join("")}(this.decodeStringToByteArray(K,Q))},decodeStringToByteArray:function(K,Q){this.init_();for(var ne=Q?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[],se=0;se<K.length;){var je=ne[K.charAt(se++)],Vt=se<K.length?ne[K.charAt(se)]:0,sn=++se<K.length?ne[K.charAt(se)]:64,Ur=++se<K.length?ne[K.charAt(se)]:64;if(++se,null==je||null==Vt||null==sn||null==Ur)throw Error();Ce.push(je<<2|Vt>>4),64!==sn&&(Ce.push(Vt<<4&240|sn>>2),64!==Ur&&Ce.push(sn<<6&192|Ur))}return Ce},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},ce=function(K){var Q=we(K);return be.encodeByteArray(Q,!0)},oe=function(K){try{return be.decodeString(K,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function W(K){return te(void 0,K)}function te(K,Q){if(!(Q instanceof Object))return Q;switch(Q.constructor){case Date:return new Date(Q.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return Q}for(var Ce in Q)!Q.hasOwnProperty(Ce)||!H(Ce)||(K[Ce]=te(K[Ce],Q[Ce]));return K}function H(K){return"__proto__"!==K}var J=function(){function K(){var Q=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(ne,Ce){Q.resolve=ne,Q.reject=Ce})}return K.prototype.wrapCallback=function(Q){var ne=this;return function(Ce,se){Ce?ne.reject(Ce):ne.resolve(se),"function"==typeof Q&&(ne.promise.catch(function(){}),1===Q.length?Q(Ce):Q(Ce,se))}},K}();function ve(K,Q){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Ce=Q||"demo-project",se=K.iat||0,je=K.sub||K.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var pt=(0,p.pi)({iss:"https://securetoken.google.com/"+Ce,aud:Ce,iat:se,exp:se+3600,auth_time:se,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},K);return[be.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),be.encodeString(JSON.stringify(pt),!1),""].join(".")}function Se(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function qe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function Pe(){return"object"==typeof self&&self.self===self}function Fe(){var K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function gt(){return Se().indexOf("Electron/")>=0}function Be(){var K=Se();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function en(){return Se().indexOf("MSAppHost/")>=0}function gn(){return!1}function Kt(){return!qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var Ae=function(K){function Q(ne,Ce,se){var je=K.call(this,Ce)||this;return je.code=ne,je.customData=se,je.name="FirebaseError",Object.setPrototypeOf(je,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(je,he.prototype.create),je}return(0,p.ZT)(Q,K),Q}(Error),he=function(){function K(Q,ne,Ce){this.service=Q,this.serviceName=ne,this.errors=Ce}return K.prototype.create=function(Q){for(var ne=[],Ce=1;Ce<arguments.length;Ce++)ne[Ce-1]=arguments[Ce];var se=ne[0]||{},je=this.service+"/"+Q,pt=this.errors[Q],Vt=pt?ft(pt,se):"Error",tn=this.serviceName+": "+Vt+" ("+je+").",sn=new Ae(je,tn,se);return sn},K}();function ft(K,Q){return K.replace(ht,function(ne,Ce){var se=Q[Ce];return null!=se?String(se):"<"+Ce+"?>"})}var ht=/\{\$([^}]+)}/g;function mn(K){return JSON.parse(K)}function at(K){return JSON.stringify(K)}var rt=function(K){var Q={},ne={},Ce={},se="";try{var je=K.split(".");Q=mn(oe(je[0])||""),ne=mn(oe(je[1])||""),se=je[2],Ce=ne.d||{},delete ne.d}catch(pt){}return{header:Q,claims:ne,data:Ce,signature:se}},xt=function(K){var ne=rt(K).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},yn=function(K){var Q=rt(K).claims;return"object"==typeof Q&&!0===Q.admin};function Zt(K,Q){return Object.prototype.hasOwnProperty.call(K,Q)}function xi(K,Q){if(Object.prototype.hasOwnProperty.call(K,Q))return K[Q]}function xn(K){for(var Q in K)if(Object.prototype.hasOwnProperty.call(K,Q))return!1;return!0}function ur(K,Q,ne){var Ce={};for(var se in K)Object.prototype.hasOwnProperty.call(K,se)&&(Ce[se]=Q.call(ne,K[se],se,K));return Ce}function Es(K){for(var Q=[],ne=function(tn,sn){Array.isArray(sn)?sn.forEach(function(Xn){Q.push(encodeURIComponent(tn)+"="+encodeURIComponent(Xn))}):Q.push(encodeURIComponent(tn)+"="+encodeURIComponent(sn))},Ce=0,se=Object.entries(K);Ce<se.length;Ce++){var je=se[Ce];ne(je[0],je[1])}return Q.length?"&"+Q.join("&"):""}var Nt=function(){function K(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var Q=1;Q<this.blockSize;++Q)this.pad_[Q]=0;this.reset()}return K.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},K.prototype.compress_=function(Q,ne){ne||(ne=0);var Ce=this.W_;if("string"==typeof Q)for(var se=0;se<16;se++)Ce[se]=Q.charCodeAt(ne)<<24|Q.charCodeAt(ne+1)<<16|Q.charCodeAt(ne+2)<<8|Q.charCodeAt(ne+3),ne+=4;else for(se=0;se<16;se++)Ce[se]=Q[ne]<<24|Q[ne+1]<<16|Q[ne+2]<<8|Q[ne+3],ne+=4;for(se=16;se<80;se++)Ce[se]=4294967295&((je=Ce[se-3]^Ce[se-8]^Ce[se-14]^Ce[se-16])<<1|je>>>31);var Ur,Qr,pt=this.chain_[0],Vt=this.chain_[1],tn=this.chain_[2],sn=this.chain_[3],Xn=this.chain_[4];for(se=0;se<80;se++){se<40?se<20?(Ur=sn^Vt&(tn^sn),Qr=1518500249):(Ur=Vt^tn^sn,Qr=1859775393):se<60?(Ur=Vt&tn|sn&(Vt|tn),Qr=2400959708):(Ur=Vt^tn^sn,Qr=3395469782);var je=(pt<<5|pt>>>27)+Ur+Xn+Qr+Ce[se]&4294967295;Xn=sn,sn=tn,tn=4294967295&(Vt<<30|Vt>>>2),Vt=pt,pt=je}this.chain_[0]=this.chain_[0]+pt&4294967295,this.chain_[1]=this.chain_[1]+Vt&4294967295,this.chain_[2]=this.chain_[2]+tn&4294967295,this.chain_[3]=this.chain_[3]+sn&4294967295,this.chain_[4]=this.chain_[4]+Xn&4294967295},K.prototype.update=function(Q,ne){if(null!=Q){void 0===ne&&(ne=Q.length);for(var Ce=ne-this.blockSize,se=0,je=this.buf_,pt=this.inbuf_;se<ne;){if(0===pt)for(;se<=Ce;)this.compress_(Q,se),se+=this.blockSize;if("string"==typeof Q){for(;se<ne;)if(je[pt]=Q.charCodeAt(se),++se,++pt===this.blockSize){this.compress_(je),pt=0;break}}else for(;se<ne;)if(je[pt]=Q[se],++se,++pt===this.blockSize){this.compress_(je),pt=0;break}}this.inbuf_=pt,this.total_+=ne}},K.prototype.digest=function(){var Q=[],ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Ce=this.blockSize-1;Ce>=56;Ce--)this.buf_[Ce]=255&ne,ne/=256;this.compress_(this.buf_);var se=0;for(Ce=0;Ce<5;Ce++)for(var je=24;je>=0;je-=8)Q[se]=this.chain_[Ce]>>je&255,++se;return Q},K}();function hr(K,Q){var ne=new pr(K,Q);return ne.subscribe.bind(ne)}var pr=function(){function K(Q,ne){var Ce=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(function(){Q(Ce)}).catch(function(se){Ce.error(se)})}return K.prototype.next=function(Q){this.forEachObserver(function(ne){ne.next(Q)})},K.prototype.error=function(Q){this.forEachObserver(function(ne){ne.error(Q)}),this.close(Q)},K.prototype.complete=function(){this.forEachObserver(function(Q){Q.complete()}),this.close()},K.prototype.subscribe=function(Q,ne,Ce){var je,se=this;if(void 0===Q&&void 0===ne&&void 0===Ce)throw new Error("Missing Observer.");void 0===(je=function(K,Q){if("object"!=typeof K||null===K)return!1;for(var ne=0,Ce=["next","error","complete"];ne<Ce.length;ne++){var se=Ce[ne];if(se in K&&"function"==typeof K[se])return!0}return!1}(Q)?Q:{next:Q,error:ne,complete:Ce}).next&&(je.next=qn),void 0===je.error&&(je.error=qn),void 0===je.complete&&(je.complete=qn);var pt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{se.finalError?je.error(se.finalError):je.complete()}catch(Vt){}}),this.observers.push(je),pt},K.prototype.unsubscribeOne=function(Q){void 0===this.observers||void 0===this.observers[Q]||(delete this.observers[Q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},K.prototype.forEachObserver=function(Q){if(!this.finalized)for(var ne=0;ne<this.observers.length;ne++)this.sendOne(ne,Q)},K.prototype.sendOne=function(Q,ne){var Ce=this;this.task.then(function(){if(void 0!==Ce.observers&&void 0!==Ce.observers[Q])try{ne(Ce.observers[Q])}catch(se){"undefined"!=typeof console&&console.error&&console.error(se)}})},K.prototype.close=function(Q){var ne=this;this.finalized||(this.finalized=!0,void 0!==Q&&(this.finalError=Q),this.task.then(function(){ne.observers=void 0,ne.onNoObservers=void 0}))},K}();function qn(){}var Un=function(K,Q,ne,Ce){var se;if(Ce<Q?se="at least "+Q:Ce>ne&&(se=0===ne?"none":"no more than "+ne),se)throw new Error(K+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+se+".")};function ho(K,Q){return K+" failed: "+Q+" argument "}function Ri(K,Q,ne,Ce){if((!Ce||ne)&&"function"!=typeof ne)throw new Error(ho(K,Q)+"must be a valid function.")}function Jn(K,Q,ne,Ce){if((!Ce||ne)&&("object"!=typeof ne||null===ne))throw new Error(ho(K,Q)+"must be a valid context object.")}var fh=function(K){for(var Q=[],ne=0,Ce=0;Ce<K.length;Ce++){var se=K.charCodeAt(Ce);if(se>=55296&&se<=56319){var je=se-55296;Ce++,P(Ce<K.length,"Surrogate pair missing trail surrogate."),se=65536+(je<<10)+(K.charCodeAt(Ce)-56320)}se<128?Q[ne++]=se:se<2048?(Q[ne++]=se>>6|192,Q[ne++]=63&se|128):se<65536?(Q[ne++]=se>>12|224,Q[ne++]=se>>6&63|128,Q[ne++]=63&se|128):(Q[ne++]=se>>18|240,Q[ne++]=se>>12&63|128,Q[ne++]=se>>6&63|128,Q[ne++]=63&se|128)}return Q},Rn=function(K){for(var Q=0,ne=0;ne<K.length;ne++){var Ce=K.charCodeAt(ne);Ce<128?Q++:Ce<2048?Q+=2:Ce>=55296&&Ce<=56319?(Q+=4,ne++):Q+=3}return Q};function zg(K){return K&&K._delegate?K._delegate:K}},2329:(et,xe,$)=>{"use strict";$.d(xe,{Z:()=>p.Z});var p=$(9759),P="8.9.1";p.Z.registerVersion("firebase",P,"app"),p.Z.SDK_VERSION=P},7574:(et,xe,$)=>{"use strict";$.d(xe,{y:()=>te});var p=$(7393),P=$(9181),re=$(6490),ie=$(6554),be=$(4487);var W=$(2494);let te=(()=>{class J{constructor(Se){this._isScalar=!1,Se&&(this._subscribe=Se)}lift(Se){const Ie=new J;return Ie.source=this,Ie.operator=Se,Ie}subscribe(Se,Ie,qe){const{operator:Pe}=this,Fe=function(J,ve,Se){if(J){if(J instanceof p.L)return J;if(J[P.b])return J[P.b]()}return J||ve||Se?new p.L(J,ve,Se):new p.L(re.c)}(Se,Ie,qe);if(Fe.add(Pe?Pe.call(Fe,this.source):this.source||W.v.useDeprecatedSynchronousErrorHandling&&!Fe.syncErrorThrowable?this._subscribe(Fe):this._trySubscribe(Fe)),W.v.useDeprecatedSynchronousErrorHandling&&Fe.syncErrorThrowable&&(Fe.syncErrorThrowable=!1,Fe.syncErrorThrown))throw Fe.syncErrorValue;return Fe}_trySubscribe(Se){try{return this._subscribe(Se)}catch(Ie){W.v.useDeprecatedSynchronousErrorHandling&&(Se.syncErrorThrown=!0,Se.syncErrorValue=Ie),function(J){for(;J;){const{closed:ve,destination:Se,isStopped:Ie}=J;if(ve||Ie)return!1;J=Se&&Se instanceof p.L?Se:null}return!0}(Se)?Se.error(Ie):console.warn(Ie)}}forEach(Se,Ie){return new(Ie=H(Ie))((qe,Pe)=>{let Fe;Fe=this.subscribe($e=>{try{Se($e)}catch(gt){Pe(gt),Fe&&Fe.unsubscribe()}},Pe,qe)})}_subscribe(Se){const{source:Ie}=this;return Ie&&Ie.subscribe(Se)}[ie.L](){return this}pipe(...Se){return 0===Se.length?this:function(J){return 0===J.length?be.y:1===J.length?J[0]:function(Se){return J.reduce((Ie,qe)=>qe(Ie),Se)}}(Se)(this)}toPromise(Se){return new(Se=H(Se))((Ie,qe)=>{let Pe;this.subscribe(Fe=>Pe=Fe,Fe=>qe(Fe),()=>Ie(Pe))})}}return J.create=ve=>new J(ve),J})();function H(J){if(J||(J=W.v.Promise||Promise),!J)throw new Error("no Promise impl found");return J}},6490:(et,xe,$)=>{"use strict";$.d(xe,{c:()=>P});var p=$(2494),me=$(4449);const P={closed:!0,next(re){},error(re){if(p.v.useDeprecatedSynchronousErrorHandling)throw re;(0,me.z)(re)},complete(){}}},9765:(et,xe,$)=>{"use strict";$.d(xe,{Yc:()=>be,xQ:()=>ce});var p=$(7574),me=$(7393),P=$(5319),re=$(7971),we=$(8858),ie=$(9181);class be extends me.L{constructor(te){super(te),this.destination=te}}let ce=(()=>{class W extends p.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ie.b](){return new be(this)}lift(H){const J=new oe(this,this);return J.operator=H,J}next(H){if(this.closed)throw new re.N;if(!this.isStopped){const{observers:J}=this,ve=J.length,Se=J.slice();for(let Ie=0;Ie<ve;Ie++)Se[Ie].next(H)}}error(H){if(this.closed)throw new re.N;this.hasError=!0,this.thrownError=H,this.isStopped=!0;const{observers:J}=this,ve=J.length,Se=J.slice();for(let Ie=0;Ie<ve;Ie++)Se[Ie].error(H);this.observers.length=0}complete(){if(this.closed)throw new re.N;this.isStopped=!0;const{observers:H}=this,J=H.length,ve=H.slice();for(let Se=0;Se<J;Se++)ve[Se].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(H){if(this.closed)throw new re.N;return super._trySubscribe(H)}_subscribe(H){if(this.closed)throw new re.N;return this.hasError?(H.error(this.thrownError),P.w.EMPTY):this.isStopped?(H.complete(),P.w.EMPTY):(this.observers.push(H),new we.W(this,H))}asObservable(){const H=new p.y;return H.source=this,H}}return W.create=(te,H)=>new oe(te,H),W})();class oe extends ce{constructor(te,H){super(),this.destination=te,this.source=H}next(te){const{destination:H}=this;H&&H.next&&H.next(te)}error(te){const{destination:H}=this;H&&H.error&&this.destination.error(te)}complete(){const{destination:te}=this;te&&te.complete&&this.destination.complete()}_subscribe(te){const{source:H}=this;return H?this.source.subscribe(te):P.w.EMPTY}}},8858:(et,xe,$)=>{"use strict";$.d(xe,{W:()=>me});var p=$(5319);class me extends p.w{constructor(re,we){super(),this.subject=re,this.subscriber=we,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const re=this.subject,we=re.observers;if(this.subject=null,!we||0===we.length||re.isStopped||re.closed)return;const ie=we.indexOf(this.subscriber);-1!==ie&&we.splice(ie,1)}}},7393:(et,xe,$)=>{"use strict";$.d(xe,{L:()=>be});var p=$(9105),me=$(6490),P=$(5319),re=$(9181),we=$(2494),ie=$(4449);class be extends P.w{constructor(W,te,H){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=me.c;break;case 1:if(!W){this.destination=me.c;break}if("object"==typeof W){W instanceof be?(this.syncErrorThrowable=W.syncErrorThrowable,this.destination=W,W.add(this)):(this.syncErrorThrowable=!0,this.destination=new ce(this,W));break}default:this.syncErrorThrowable=!0,this.destination=new ce(this,W,te,H)}}[re.b](){return this}static create(W,te,H){const J=new be(W,te,H);return J.syncErrorThrowable=!1,J}next(W){this.isStopped||this._next(W)}error(W){this.isStopped||(this.isStopped=!0,this._error(W))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(W){this.destination.next(W)}_error(W){this.destination.error(W),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:W}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=W,this}}class ce extends be{constructor(W,te,H,J){super(),this._parentSubscriber=W;let ve,Se=this;(0,p.m)(te)?ve=te:te&&(ve=te.next,H=te.error,J=te.complete,te!==me.c&&(Se=Object.create(te),(0,p.m)(Se.unsubscribe)&&this.add(Se.unsubscribe.bind(Se)),Se.unsubscribe=this.unsubscribe.bind(this))),this._context=Se,this._next=ve,this._error=H,this._complete=J}next(W){if(!this.isStopped&&this._next){const{_parentSubscriber:te}=this;we.v.useDeprecatedSynchronousErrorHandling&&te.syncErrorThrowable?this.__tryOrSetError(te,this._next,W)&&this.unsubscribe():this.__tryOrUnsub(this._next,W)}}error(W){if(!this.isStopped){const{_parentSubscriber:te}=this,{useDeprecatedSynchronousErrorHandling:H}=we.v;if(this._error)H&&te.syncErrorThrowable?(this.__tryOrSetError(te,this._error,W),this.unsubscribe()):(this.__tryOrUnsub(this._error,W),this.unsubscribe());else if(te.syncErrorThrowable)H?(te.syncErrorValue=W,te.syncErrorThrown=!0):(0,ie.z)(W),this.unsubscribe();else{if(this.unsubscribe(),H)throw W;(0,ie.z)(W)}}}complete(){if(!this.isStopped){const{_parentSubscriber:W}=this;if(this._complete){const te=()=>this._complete.call(this._context);we.v.useDeprecatedSynchronousErrorHandling&&W.syncErrorThrowable?(this.__tryOrSetError(W,te),this.unsubscribe()):(this.__tryOrUnsub(te),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(W,te){try{W.call(this._context,te)}catch(H){if(this.unsubscribe(),we.v.useDeprecatedSynchronousErrorHandling)throw H;(0,ie.z)(H)}}__tryOrSetError(W,te,H){if(!we.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{te.call(this._context,H)}catch(J){return we.v.useDeprecatedSynchronousErrorHandling?(W.syncErrorValue=J,W.syncErrorThrown=!0,!0):((0,ie.z)(J),!0)}return!1}_unsubscribe(){const{_parentSubscriber:W}=this;this._context=null,this._parentSubscriber=null,W.unsubscribe()}}},5319:(et,xe,$)=>{"use strict";$.d(xe,{w:()=>ie});var p=$(9796),me=$(1555),P=$(9105);const we=(()=>{function ce(oe){return Error.call(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((W,te)=>`${te+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe,this}return ce.prototype=Object.create(Error.prototype),ce})();class ie{constructor(oe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,oe&&(this._ctorUnsubscribe=!0,this._unsubscribe=oe)}unsubscribe(){let oe;if(this.closed)return;let{_parentOrParents:W,_ctorUnsubscribe:te,_unsubscribe:H,_subscriptions:J}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,W instanceof ie)W.remove(this);else if(null!==W)for(let ve=0;ve<W.length;++ve)W[ve].remove(this);if((0,P.m)(H)){te&&(this._unsubscribe=void 0);try{H.call(this)}catch(ve){oe=ve instanceof we?be(ve.errors):[ve]}}if((0,p.k)(J)){let ve=-1,Se=J.length;for(;++ve<Se;){const Ie=J[ve];if((0,me.K)(Ie))try{Ie.unsubscribe()}catch(qe){oe=oe||[],qe instanceof we?oe=oe.concat(be(qe.errors)):oe.push(qe)}}}if(oe)throw new we(oe)}add(oe){let W=oe;if(!oe)return ie.EMPTY;switch(typeof oe){case"function":W=new ie(oe);case"object":if(W===this||W.closed||"function"!=typeof W.unsubscribe)return W;if(this.closed)return W.unsubscribe(),W;if(!(W instanceof ie)){const J=W;W=new ie,W._subscriptions=[J]}break;default:throw new Error("unrecognized teardown "+oe+" added to Subscription.")}let{_parentOrParents:te}=W;if(null===te)W._parentOrParents=this;else if(te instanceof ie){if(te===this)return W;W._parentOrParents=[te,this]}else{if(-1!==te.indexOf(this))return W;te.push(this)}const H=this._subscriptions;return null===H?this._subscriptions=[W]:H.push(W),W}remove(oe){const W=this._subscriptions;if(W){const te=W.indexOf(oe);-1!==te&&W.splice(te,1)}}}var ce;function be(ce){return ce.reduce((oe,W)=>oe.concat(W instanceof we?W.errors:W),[])}ie.EMPTY=((ce=new ie).closed=!0,ce)},2494:(et,xe,$)=>{"use strict";$.d(xe,{v:()=>me});let p=!1;const me={Promise:void 0,set useDeprecatedSynchronousErrorHandling(P){if(P){const re=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+re.stack)}else p&&console.log("RxJS: Back to a better error behavior. Thank you. <3");p=P},get useDeprecatedSynchronousErrorHandling(){return p}}},5345:(et,xe,$)=>{"use strict";$.d(xe,{IY:()=>re,Ds:()=>ie,ft:()=>ce});var p=$(7393),me=$(7574),P=$(7444);class re extends p.L{constructor(W){super(),this.parent=W}_next(W){this.parent.notifyNext(W)}_error(W){this.parent.notifyError(W),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ie extends p.L{notifyNext(W){this.destination.next(W)}notifyError(W){this.destination.error(W)}notifyComplete(){this.destination.complete()}}function ce(oe,W){if(W.closed)return;if(oe instanceof me.y)return oe.subscribe(W);let te;try{te=(0,P.s)(oe)(W)}catch(H){W.error(H)}return te}},2441:(et,xe,$)=>{"use strict";$.d(xe,{c:()=>we,N:()=>ie});var p=$(9765),me=$(7574),P=$(5319),re=$(1307);class we extends me.y{constructor(te,H){super(),this.source=te,this.subjectFactory=H,this._refCount=0,this._isComplete=!1}_subscribe(te){return this.getSubject().subscribe(te)}getSubject(){const te=this._subject;return(!te||te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let te=this._connection;return te||(this._isComplete=!1,te=this._connection=new P.w,te.add(this.source.subscribe(new be(this.getSubject(),this))),te.closed&&(this._connection=null,te=P.w.EMPTY)),te}refCount(){return(0,re.x)()(this)}}const ie=(()=>{const W=we.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:W._subscribe},_isComplete:{value:W._isComplete,writable:!0},getSubject:{value:W.getSubject},connect:{value:W.connect},refCount:{value:W.refCount}}})();class be extends p.Yc{constructor(te,H){super(te),this.connectable=H}_error(te){this._unsubscribe(),super._error(te)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const te=this.connectable;if(te){this.connectable=null;const H=te._connection;te._refCount=0,te._subject=null,te._connection=null,H&&H.unsubscribe()}}}},9193:(et,xe,$)=>{"use strict";$.d(xe,{E:()=>me,c:()=>P});var p=$(7574);const me=new p.y(we=>we.complete());function P(we){return we?function(we){return new p.y(ie=>we.schedule(()=>ie.complete()))}(we):me}},4402:(et,xe,$)=>{"use strict";$.d(xe,{D:()=>Se});var p=$(7574),me=$(7444),P=$(5319),re=$(6554),be=$(4087),ce=$(377),te=$(4072),H=$(9489);function Se(Ie,qe){return qe?function(Ie,qe){if(null!=Ie){if(function(Ie){return Ie&&"function"==typeof Ie[re.L]}(Ie))return function(Ie,qe){return new p.y(Pe=>{const Fe=new P.w;return Fe.add(qe.schedule(()=>{const $e=Ie[re.L]();Fe.add($e.subscribe({next(gt){Fe.add(qe.schedule(()=>Pe.next(gt)))},error(gt){Fe.add(qe.schedule(()=>Pe.error(gt)))},complete(){Fe.add(qe.schedule(()=>Pe.complete()))}}))})),Fe})}(Ie,qe);if((0,te.t)(Ie))return function(Ie,qe){return new p.y(Pe=>{const Fe=new P.w;return Fe.add(qe.schedule(()=>Ie.then($e=>{Fe.add(qe.schedule(()=>{Pe.next($e),Fe.add(qe.schedule(()=>Pe.complete()))}))},$e=>{Fe.add(qe.schedule(()=>Pe.error($e)))}))),Fe})}(Ie,qe);if((0,H.z)(Ie))return(0,be.r)(Ie,qe);if(function(Ie){return Ie&&"function"==typeof Ie[ce.hZ]}(Ie)||"string"==typeof Ie)return function(Ie,qe){if(!Ie)throw new Error("Iterable cannot be null");return new p.y(Pe=>{const Fe=new P.w;let $e;return Fe.add(()=>{$e&&"function"==typeof $e.return&&$e.return()}),Fe.add(qe.schedule(()=>{$e=Ie[ce.hZ](),Fe.add(qe.schedule(function(){if(Pe.closed)return;let gt,Be;try{const en=$e.next();gt=en.value,Be=en.done}catch(en){return void Pe.error(en)}Be?Pe.complete():(Pe.next(gt),this.schedule())}))})),Fe})}(Ie,qe)}throw new TypeError((null!==Ie&&typeof Ie||Ie)+" is not observable")}(Ie,qe):Ie instanceof p.y?Ie:new p.y((0,me.s)(Ie))}},6693:(et,xe,$)=>{"use strict";$.d(xe,{n:()=>re});var p=$(7574),me=$(5015),P=$(4087);function re(we,ie){return ie?(0,P.r)(we,ie):new p.y((0,me.V)(we))}},6682:(et,xe,$)=>{"use strict";$.d(xe,{T:()=>we});var p=$(7574),me=$(4869),P=$(3282),re=$(6693);function we(...ie){let be=Number.POSITIVE_INFINITY,ce=null,oe=ie[ie.length-1];return(0,me.K)(oe)?(ce=ie.pop(),ie.length>1&&"number"==typeof ie[ie.length-1]&&(be=ie.pop())):"number"==typeof oe&&(be=ie.pop()),null===ce&&1===ie.length&&ie[0]instanceof p.y?ie[0]:(0,P.J)(be)((0,re.n)(ie,ce))}},5917:(et,xe,$)=>{"use strict";$.d(xe,{of:()=>re});var p=$(4869),me=$(6693),P=$(4087);function re(...we){let ie=we[we.length-1];return(0,p.K)(ie)?(we.pop(),(0,P.r)(we,ie)):(0,me.n)(we)}},205:(et,xe,$)=>{"use strict";$.d(xe,{_:()=>me});var p=$(7574);function me(re,we){return new p.y(we?ie=>we.schedule(P,0,{error:re,subscriber:ie}):ie=>ie.error(re))}function P({error:re,subscriber:we}){we.error(re)}},8002:(et,xe,$)=>{"use strict";$.d(xe,{U:()=>me});var p=$(7393);function me(we,ie){return function(ce){if("function"!=typeof we)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ce.lift(new P(we,ie))}}class P{constructor(ie,be){this.project=ie,this.thisArg=be}call(ie,be){return be.subscribe(new re(ie,this.project,this.thisArg))}}class re extends p.L{constructor(ie,be,ce){super(ie),this.project=be,this.count=0,this.thisArg=ce||this}_next(ie){let be;try{be=this.project.call(this.thisArg,ie,this.count++)}catch(ce){return void this.destination.error(ce)}this.destination.next(be)}}},3282:(et,xe,$)=>{"use strict";$.d(xe,{J:()=>P});var p=$(9773),me=$(4487);function P(re=Number.POSITIVE_INFINITY){return(0,p.zg)(me.y,re)}},9773:(et,xe,$)=>{"use strict";$.d(xe,{zg:()=>re});var p=$(8002),me=$(4402),P=$(5345);function re(ce,oe,W=Number.POSITIVE_INFINITY){return"function"==typeof oe?te=>te.pipe(re((H,J)=>(0,me.D)(ce(H,J)).pipe((0,p.U)((ve,Se)=>oe(H,ve,J,Se))),W)):("number"==typeof oe&&(W=oe),te=>te.lift(new we(ce,W)))}class we{constructor(oe,W=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=W}call(oe,W){return W.subscribe(new ie(oe,this.project,this.concurrent))}}class ie extends P.Ds{constructor(oe,W,te=Number.POSITIVE_INFINITY){super(oe),this.project=W,this.concurrent=te,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let W;const te=this.index++;try{W=this.project(oe,te)}catch(H){return void this.destination.error(H)}this.active++,this._innerSub(W)}_innerSub(oe){const W=new P.IY(this),te=this.destination;te.add(W);const H=(0,P.ft)(oe,W);H!==W&&te.add(H)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe){this.destination.next(oe)}notifyComplete(){const oe=this.buffer;this.active--,oe.length>0?this._next(oe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(et,xe,$)=>{"use strict";$.d(xe,{ht:()=>oe,QV:()=>be});var p=$(7393),me=$(9193),P=$(5917),re=$(205);class ie{constructor(H,J,ve){this.kind=H,this.value=J,this.error=ve,this.hasValue="N"===H}observe(H){switch(this.kind){case"N":return H.next&&H.next(this.value);case"E":return H.error&&H.error(this.error);case"C":return H.complete&&H.complete()}}do(H,J,ve){switch(this.kind){case"N":return H&&H(this.value);case"E":return J&&J(this.error);case"C":return ve&&ve()}}accept(H,J,ve){return H&&"function"==typeof H.next?this.observe(H):this.do(H,J,ve)}toObservable(){switch(this.kind){case"N":return(0,P.of)(this.value);case"E":return(0,re._)(this.error);case"C":return(0,me.c)()}throw new Error("unexpected notification kind value")}static createNext(H){return void 0!==H?new ie("N",H):ie.undefinedValueNotification}static createError(H){return new ie("E",void 0,H)}static createComplete(){return ie.completeNotification}}function be(te,H=0){return function(ve){return ve.lift(new ce(te,H))}}ie.completeNotification=new ie("C"),ie.undefinedValueNotification=new ie("N",void 0);class ce{constructor(H,J=0){this.scheduler=H,this.delay=J}call(H,J){return J.subscribe(new oe(H,this.scheduler,this.delay))}}class oe extends p.L{constructor(H,J,ve=0){super(H),this.scheduler=J,this.delay=ve}static dispatch(H){const{notification:J,destination:ve}=H;J.observe(ve),this.unsubscribe()}scheduleMessage(H){this.destination.add(this.scheduler.schedule(oe.dispatch,this.delay,new W(H,this.destination)))}_next(H){this.scheduleMessage(ie.createNext(H))}_error(H){this.scheduleMessage(ie.createError(H)),this.unsubscribe()}_complete(){this.scheduleMessage(ie.createComplete()),this.unsubscribe()}}class W{constructor(H,J){this.notification=H,this.destination=J}}},1307:(et,xe,$)=>{"use strict";$.d(xe,{x:()=>me});var p=$(7393);function me(){return function(ie){return ie.lift(new P(ie))}}class P{constructor(ie){this.connectable=ie}call(ie,be){const{connectable:ce}=this;ce._refCount++;const oe=new re(ie,ce),W=be.subscribe(oe);return oe.closed||(oe.connection=ce.connect()),W}}class re extends p.L{constructor(ie,be){super(ie),this.connectable=be}_unsubscribe(){const{connectable:ie}=this;if(!ie)return void(this.connection=null);this.connectable=null;const be=ie._refCount;if(be<=0)return void(this.connection=null);if(ie._refCount=be-1,be>1)return void(this.connection=null);const{connection:ce}=this,oe=ie._connection;this.connection=null,oe&&(!ce||oe===ce)&&oe.unsubscribe()}}},8819:(et,xe,$)=>{"use strict";$.d(xe,{B:()=>be});var p=$(2441);var re=$(1307),we=$(9765);function ie(){return new we.xQ}function be(){return ce=>(0,re.x)()(function(ce,oe){return function(te){let H;H="function"==typeof ce?ce:function(){return ce};const J=Object.create(te,p.N);return J.source=te,J.subjectFactory=H,J}}(ie)(ce))}},3101:(et,xe,$)=>{"use strict";$.d(xe,{R:()=>qe});var p=$(7574);let me=1;const P=Promise.resolve(),re={};function we(Fe){return Fe in re&&(delete re[Fe],!0)}const ie={setImmediate(Fe){const $e=me++;return re[$e]=!0,P.then(()=>we($e)&&Fe()),$e},clearImmediate(Fe){we(Fe)}};var ce=$(6465),W=$(6102);const J=new class extends W.v{flush($e){this.active=!0,this.scheduled=void 0;const{actions:gt}=this;let Be,en=-1,gn=gt.length;$e=$e||gt.shift();do{if(Be=$e.execute($e.state,$e.delay))break}while(++en<gn&&($e=gt.shift()));if(this.active=!1,Be){for(;++en<gn&&($e=gt.shift());)$e.unsubscribe();throw Be}}}(class extends ce.o{constructor($e,gt){super($e,gt),this.scheduler=$e,this.work=gt}requestAsyncId($e,gt,Be=0){return null!==Be&&Be>0?super.requestAsyncId($e,gt,Be):($e.actions.push(this),$e.scheduled||($e.scheduled=ie.setImmediate($e.flush.bind($e,null))))}recycleAsyncId($e,gt,Be=0){if(null!==Be&&Be>0||null===Be&&this.delay>0)return super.recycleAsyncId($e,gt,Be);0===$e.actions.length&&(ie.clearImmediate(gt),$e.scheduled=void 0)}});var ve=$(9796);class Ie extends p.y{constructor($e,gt=0,Be=J){var Fe;super(),this.source=$e,this.delayTime=gt,this.scheduler=Be,(!(!(0,ve.k)(Fe=gt)&&Fe-parseFloat(Fe)+1>=0)||gt<0)&&(this.delayTime=0),(!Be||"function"!=typeof Be.schedule)&&(this.scheduler=J)}static create($e,gt=0,Be=J){return new Ie($e,gt,Be)}static dispatch($e){const{source:gt,subscriber:Be}=$e;return this.add(gt.subscribe(Be))}_subscribe($e){return this.scheduler.schedule(Ie.dispatch,this.delayTime,{source:this.source,subscriber:$e})}}function qe(Fe,$e=0){return function(Be){return Be.lift(new Pe(Fe,$e))}}class Pe{constructor($e,gt){this.scheduler=$e,this.delay=gt}call($e,gt){return new Ie(gt,this.delay,this.scheduler).subscribe($e)}}},3342:(et,xe,$)=>{"use strict";$.d(xe,{b:()=>re});var p=$(7393);function me(){}var P=$(9105);function re(be,ce,oe){return function(te){return te.lift(new we(be,ce,oe))}}class we{constructor(ce,oe,W){this.nextOrObserver=ce,this.error=oe,this.complete=W}call(ce,oe){return oe.subscribe(new ie(ce,this.nextOrObserver,this.error,this.complete))}}class ie extends p.L{constructor(ce,oe,W,te){super(ce),this._tapNext=me,this._tapError=me,this._tapComplete=me,this._tapError=W||me,this._tapComplete=te||me,(0,P.m)(oe)?(this._context=this,this._tapNext=oe):oe&&(this._context=oe,this._tapNext=oe.next||me,this._tapError=oe.error||me,this._tapComplete=oe.complete||me)}_next(ce){try{this._tapNext.call(this._context,ce)}catch(oe){return void this.destination.error(oe)}this.destination.next(ce)}_error(ce){try{this._tapError.call(this._context,ce)}catch(oe){return void this.destination.error(oe)}this.destination.error(ce)}_complete(){try{this._tapComplete.call(this._context)}catch(ce){return void this.destination.error(ce)}return this.destination.complete()}}},4087:(et,xe,$)=>{"use strict";$.d(xe,{r:()=>P});var p=$(7574),me=$(5319);function P(re,we){return new p.y(ie=>{const be=new me.w;let ce=0;return be.add(we.schedule(function(){ce!==re.length?(ie.next(re[ce++]),ie.closed||be.add(this.schedule())):ie.complete()})),be})}},6465:(et,xe,$)=>{"use strict";$.d(xe,{o:()=>P});var p=$(5319);class me extends p.w{constructor(we,ie){super()}schedule(we,ie=0){return this}}class P extends me{constructor(we,ie){super(we,ie),this.scheduler=we,this.work=ie,this.pending=!1}schedule(we,ie=0){if(this.closed)return this;this.state=we;const be=this.id,ce=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(ce,be,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(ce,this.id,ie),this}requestAsyncId(we,ie,be=0){return setInterval(we.flush.bind(we,this),be)}recycleAsyncId(we,ie,be=0){if(null!==be&&this.delay===be&&!1===this.pending)return ie;clearInterval(ie)}execute(we,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(we,ie);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,ie){let ce,be=!1;try{this.work(we)}catch(oe){be=!0,ce=!!oe&&oe||new Error(oe)}if(be)return this.unsubscribe(),ce}_unsubscribe(){const we=this.id,ie=this.scheduler,be=ie.actions,ce=be.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ce&&be.splice(ce,1),null!=we&&(this.id=this.recycleAsyncId(ie,we,null)),this.delay=null}}},6102:(et,xe,$)=>{"use strict";$.d(xe,{v:()=>me});let p=(()=>{class P{constructor(we,ie=P.now){this.SchedulerAction=we,this.now=ie}schedule(we,ie=0,be){return new this.SchedulerAction(this,we).schedule(be,ie)}}return P.now=()=>Date.now(),P})();class me extends p{constructor(re,we=p.now){super(re,()=>me.delegate&&me.delegate!==this?me.delegate.now():we()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(re,we=0,ie){return me.delegate&&me.delegate!==this?me.delegate.schedule(re,we,ie):super.schedule(re,we,ie)}flush(re){const{actions:we}=this;if(this.active)return void we.push(re);let ie;this.active=!0;do{if(ie=re.execute(re.state,re.delay))break}while(re=we.shift());if(this.active=!1,ie){for(;re=we.shift();)re.unsubscribe();throw ie}}}},3637:(et,xe,$)=>{"use strict";$.d(xe,{z:()=>P,P:()=>re});var p=$(6465);const P=new($(6102).v)(p.o),re=P},7771:(et,xe,$)=>{"use strict";$.d(xe,{c:()=>ie,N:()=>we});var p=$(6465),P=$(6102);const we=new class extends P.v{}(class extends p.o{constructor(ce,oe){super(ce,oe),this.scheduler=ce,this.work=oe}schedule(ce,oe=0){return oe>0?super.schedule(ce,oe):(this.delay=oe,this.state=ce,this.scheduler.flush(this),this)}execute(ce,oe){return oe>0||this.closed?super.execute(ce,oe):this._execute(ce,oe)}requestAsyncId(ce,oe,W=0){return null!==W&&W>0||null===W&&this.delay>0?super.requestAsyncId(ce,oe,W):ce.flush(this)}}),ie=we},377:(et,xe,$)=>{"use strict";$.d(xe,{hZ:()=>me});const me="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(et,xe,$)=>{"use strict";$.d(xe,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(et,xe,$)=>{"use strict";$.d(xe,{b:()=>p});const p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(et,xe,$)=>{"use strict";$.d(xe,{N:()=>me});const me=(()=>{function P(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return P.prototype=Object.create(Error.prototype),P})()},4449:(et,xe,$)=>{"use strict";function p(me){setTimeout(()=>{throw me},0)}$.d(xe,{z:()=>p})},4487:(et,xe,$)=>{"use strict";function p(me){return me}$.d(xe,{y:()=>p})},9796:(et,xe,$)=>{"use strict";$.d(xe,{k:()=>p});const p=Array.isArray||(me=>me&&"number"==typeof me.length)},9489:(et,xe,$)=>{"use strict";$.d(xe,{z:()=>p});const p=me=>me&&"number"==typeof me.length&&"function"!=typeof me},9105:(et,xe,$)=>{"use strict";function p(me){return"function"==typeof me}$.d(xe,{m:()=>p})},1555:(et,xe,$)=>{"use strict";function p(me){return null!==me&&"object"==typeof me}$.d(xe,{K:()=>p})},4072:(et,xe,$)=>{"use strict";function p(me){return!!me&&"function"!=typeof me.subscribe&&"function"==typeof me.then}$.d(xe,{t:()=>p})},4869:(et,xe,$)=>{"use strict";function p(me){return me&&"function"==typeof me.schedule}$.d(xe,{K:()=>p})},7444:(et,xe,$)=>{"use strict";$.d(xe,{s:()=>te});var p=$(5015),me=$(4449),re=$(377),ie=$(6554),ce=$(9489),oe=$(4072),W=$(1555);const te=H=>{if(H&&"function"==typeof H[ie.L])return(H=>J=>{const ve=H[ie.L]();if("function"!=typeof ve.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ve.subscribe(J)})(H);if((0,ce.z)(H))return(0,p.V)(H);if((0,oe.t)(H))return(H=>J=>(H.then(ve=>{J.closed||(J.next(ve),J.complete())},ve=>J.error(ve)).then(null,me.z),J))(H);if(H&&"function"==typeof H[re.hZ])return(H=>J=>{const ve=H[re.hZ]();for(;;){let Se;try{Se=ve.next()}catch(Ie){return J.error(Ie),J}if(Se.done){J.complete();break}if(J.next(Se.value),J.closed)break}return"function"==typeof ve.return&&J.add(()=>{ve.return&&ve.return()}),J})(H);{const ve=`You provided ${(0,W.K)(H)?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ve)}}},5015:(et,xe,$)=>{"use strict";$.d(xe,{V:()=>p});const p=me=>P=>{for(let re=0,we=me.length;re<we&&!P.closed;re++)P.next(me[re]);P.complete()}},2120:(et,xe,$)=>{"use strict";var p=$(7716);let me=null;function P(){return me}const be=new p.OlP("DocumentToken");let ce=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=(0,p.Yz7)({factory:oe,token:i,providedIn:"platform"}),i})();function oe(){return(0,p.LFG)(te)}const W=new p.OlP("Location Initialized");let te=(()=>{class i extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const o=P().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",t,!1),()=>o.removeEventListener("popstate",t)}onHashChange(t){const o=P().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",t,!1),()=>o.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,o,u){H()?this._history.pushState(t,o,u):this.location.hash=u}replaceState(t,o,u){H()?this._history.replaceState(t,o,u):this.location.hash=u}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(be))},i.\u0275prov=(0,p.Yz7)({factory:J,token:i,providedIn:"platform"}),i})();function H(){return!!window.history.pushState}function J(){return new te((0,p.LFG)(be))}function ve(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function Se(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function Ie(i){return i&&"?"!==i[0]?"?"+i:i}let qe=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=(0,p.Yz7)({factory:Pe,token:i,providedIn:"root"}),i})();function Pe(i){const e=(0,p.LFG)(be).location;return new $e((0,p.LFG)(ce),e&&e.origin||"")}const Fe=new p.OlP("appBaseHref");let $e=(()=>{class i extends qe{constructor(t,o){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ve(this._baseHref,t)}path(t=!1){const o=this._platformLocation.pathname+Ie(this._platformLocation.search),u=this._platformLocation.hash;return u&&t?`${o}${u}`:o}pushState(t,o,u,c){const m=this.prepareExternalUrl(u+Ie(c));this._platformLocation.pushState(t,o,m)}replaceState(t,o,u,c){const m=this.prepareExternalUrl(u+Ie(c));this._platformLocation.replaceState(t,o,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var o,u;null===(u=(o=this._platformLocation).historyGo)||void 0===u||u.call(o,t)}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(ce),p.LFG(Fe,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),gt=(()=>{class i extends qe{constructor(t,o){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(t){const o=ve(this._baseHref,t);return o.length>0?"#"+o:o}pushState(t,o,u,c){let m=this.prepareExternalUrl(u+Ie(c));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(t,o,m)}replaceState(t,o,u,c){let m=this.prepareExternalUrl(u+Ie(c));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(t,o,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var o,u;null===(u=(o=this._platformLocation).historyGo)||void 0===u||u.call(o,t)}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(ce),p.LFG(Fe,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),Be=(()=>{class i{constructor(t,o){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const u=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=Se(Kt(u)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,o=""){return this.path()==this.normalize(t+Ie(o))}normalize(t){return i.stripTrailingSlash(function(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,Kt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,o="",u=null){this._platformStrategy.pushState(u,"",t,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ie(o)),u)}replaceState(t,o="",u=null){this._platformStrategy.replaceState(u,"",t,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ie(o)),u)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var o,u;null===(u=(o=this._platformStrategy).historyGo)||void 0===u||u.call(o,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(t="",o){this._urlChangeListeners.forEach(u=>u(t,o))}subscribe(t,o,u){return this._subject.subscribe({next:t,error:o,complete:u})}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(qe),p.LFG(ce))},i.normalizeQueryParams=Ie,i.joinWithSlash=ve,i.stripTrailingSlash=Se,i.\u0275prov=(0,p.Yz7)({factory:en,token:i,providedIn:"root"}),i})();function en(){return new Be((0,p.LFG)(qe),(0,p.LFG)(ce))}function Kt(i){return i.replace(/\/index.html$/,"")}var pe=(()=>((pe=pe||{})[pe.Zero=0]="Zero",pe[pe.One=1]="One",pe[pe.Two=2]="Two",pe[pe.Few=3]="Few",pe[pe.Many=4]="Many",pe[pe.Other=5]="Other",pe))();const zt=p.kL8;class ha{}let Zc=(()=>{class i extends ha{constructor(t){super(),this.locale=t}getPluralCategory(t,o){switch(zt(o||this.locale)(t)){case pe.Zero:return"zero";case pe.One:return"one";case pe.Two:return"two";case pe.Few:return"few";case pe.Many:return"many";default:return"other"}}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(p.soG))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();let Ds=(()=>{class i{constructor(t,o,u,c){this._iterableDiffers=t,this._keyValueDiffers=o,this._ngEl=u,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),t.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),t.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(o.item)}`);this._toggleClass(o.item,!0)}),t.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(o=>this._toggleClass(o,!0)):Object.keys(t).forEach(o=>this._toggleClass(o,!!t[o])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(o=>this._toggleClass(o,!1)):Object.keys(t).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(t,o){(t=t.trim())&&t.split(/\s+/g).forEach(u=>{o?this._renderer.addClass(this._ngEl.nativeElement,u):this._renderer.removeClass(this._ngEl.nativeElement,u)})}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},i.\u0275dir=p.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i})(),$t=(()=>{class i{constructor(t,o){this._viewContainer=t,this._context=new El,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){su("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){su("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,o){return!0}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(p.s_b),p.Y36(p.Rgc))},i.\u0275dir=p.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class El{constructor(){this.$implicit=null,this.ngIf=null}}function su(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let ma=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[{provide:ha,useClass:Zc}]}),i})();function bh(i){return"server"===i}let hn=(()=>{class i{}return i.\u0275prov=(0,p.Yz7)({token:i,providedIn:"root",factory:()=>new em((0,p.LFG)(be),window)}),i})();class em{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const o=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let u=o.currentNode;for(;u;){const c=u.shadowRoot;if(c){const m=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(m)return m}u=o.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),o=t.left+this.window.pageXOffset,u=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(o-c[0],u-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=td(this.window.history)||td(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function td(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class lu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new lu,me||(me=i)}onAndCancel(e,t,o){return e.addEventListener(t,o,!1),()=>{e.removeEventListener(t,o,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(_t=_t||document.querySelector("base"),_t?_t.getAttribute("href"):null);return null==t?null:function(i){vn=vn||document.createElement("a"),vn.setAttribute("href",i);const e=vn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_t=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const o=t.indexOf("="),[u,c]=-1==o?[t,""]:[t.slice(0,o),t.slice(o+1)];if(u.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let vn,_t=null;const Dn=new p.OlP("TRANSITION_ID"),ki=[{provide:p.ip1,useFactory:function(i,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const o=P();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(c=>c.getAttribute("ng-transition")===i).forEach(c=>o.remove(c))})}},deps:[Dn,be,p.zs3],multi:!0}];class Dl{static init(){(0,p.VLi)(new Dl)}addToWindow(e){p.dqk.getAngularTestability=(o,u=!0)=>{const c=e.findTestabilityInTree(o,u);if(null==c)throw new Error("Could not find testability for element.");return c},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(o=>{const u=p.dqk.getAllAngularTestabilities();let c=u.length,m=!1;const _=function(w){m=m||w,c--,0==c&&o(m)};u.forEach(function(w){w.whenStable(_)})})}findTestabilityInTree(e,t,o){if(null==t)return null;const u=e.getTestability(t);return null!=u?u:o?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Is=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();const Al=new p.OlP("EventManagerPlugins");let Me=(()=>{class i{constructor(t,o){this._zone=o,this._eventNameToPlugin=new Map,t.forEach(u=>u.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,o,u){return this._findPluginFor(o).addEventListener(t,o,u)}addGlobalEventListener(t,o,u){return this._findPluginFor(o).addGlobalEventListener(t,o,u)}getZone(){return this._zone}_findPluginFor(t){const o=this._eventNameToPlugin.get(t);if(o)return o;const u=this._plugins;for(let c=0;c<u.length;c++){const m=u[c];if(m.supports(t))return this._eventNameToPlugin.set(t,m),m}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Al),p.LFG(p.R0b))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();class Wt{constructor(e){this._doc=e}addGlobalEventListener(e,t,o){const u=P().getGlobalEventTarget(this._doc,e);if(!u)throw new Error(`Unsupported event target ${u} for event ${t}`);return this.addEventListener(u,t,o)}}let Ml=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const o=new Set;t.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),o.add(u))}),this.onStylesAdded(o)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),Sn=(()=>{class i extends Ml{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,o,u){t.forEach(c=>{const m=this._doc.createElement("style");m.textContent=c,u.push(o.appendChild(m))})}addHost(t){const o=[];this._addStylesToHost(this._stylesSet,t,o),this._hostNodes.set(t,o)}removeHost(t){const o=this._hostNodes.get(t);o&&o.forEach(xl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((o,u)=>{this._addStylesToHost(t,u,o)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(xl))}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(be))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();function xl(i){P().remove(i)}const va={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jr=/%COMP%/g;function $n(i,e,t){for(let o=0;o<e.length;o++){let u=e[o];Array.isArray(u)?$n(i,u,t):(u=u.replace(jr,i),t.push(u))}return t}function mi(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let vo=(()=>{class i{constructor(t,o,u){this.eventManager=t,this.sharedStylesHost=o,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new Li(t)}createRenderer(t,o){if(!t||!o)return this.defaultRenderer;switch(o.encapsulation){case p.ifc.Emulated:{let u=this.rendererByCompId.get(o.id);return u||(u=new M_(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,u)),u.applyToHost(t),u}case 1:case p.ifc.ShadowDom:return new Xr(this.eventManager,this.sharedStylesHost,t,o);default:if(!this.rendererByCompId.has(o.id)){const u=$n(o.id,o.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Me),p.LFG(Sn),p.LFG(p.AFp))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();class Li{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(va[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,o){e&&e.insertBefore(t,o)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error(`The selector "${e}" did not match any elements`);return t||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,o,u){if(u){t=u+":"+t;const c=va[u];c?e.setAttributeNS(c,t,o):e.setAttribute(t,o)}else e.setAttribute(t,o)}removeAttribute(e,t,o){if(o){const u=va[o];u?e.removeAttributeNS(u,t):e.removeAttribute(`${o}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,o,u){u&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,o,u&p.JOm.Important?"important":""):e.style[t]=o}removeStyle(e,t,o){o&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,o){e[t]=o}setValue(e,t){e.nodeValue=t}listen(e,t,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mi(o)):this.eventManager.addEventListener(e,t,mi(o))}}class M_ extends Li{constructor(e,t,o,u){super(e),this.component=o;const c=$n(u+"-"+o.id,o.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(jr,u+"-"+o.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(jr,i)}(u+"-"+o.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const o=super.createElement(e,t);return super.setAttribute(o,this.contentAttr,""),o}}class Xr extends Li{constructor(e,t,o,u){super(e),this.sharedStylesHost=t,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=$n(u.id,u.styles,[]);for(let m=0;m<c.length;m++){const _=document.createElement("style");_.textContent=c[m],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,o){return super.insertBefore(this.nodeOrShadowRoot(e),t,o)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ol=(()=>{class i extends Wt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,o,u){return t.addEventListener(o,u,!1),()=>this.removeEventListener(t,o,u)}removeEventListener(t,o,u){return t.removeEventListener(o,u)}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(be))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();const zo=["alt","control","meta","shift"],N_={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ad={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let O_=(()=>{class i extends Wt{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,o,u){const c=i.parseEventName(o),m=i.eventCallback(c.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,c.domEventName,m))}static parseEventName(t){const o=t.toLowerCase().split("."),u=o.shift();if(0===o.length||"keydown"!==u&&"keyup"!==u)return null;const c=i._normalizeKey(o.pop());let m="";if(zo.forEach(w=>{const S=o.indexOf(w);S>-1&&(o.splice(S,1),m+=w+".")}),m+=c,0!=o.length||0===c.length)return null;const _={};return _.domEventName=u,_.fullKey=m,_}static getEventFullKey(t){let o="",u=function(i){let e=i.key;if(null==e){if(e=i.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===i.location&&tr.hasOwnProperty(e)&&(e=tr[e]))}return N_[e]||e}(t);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),zo.forEach(c=>{c!=u&&ad[c](t)&&(o+=c+".")}),o+=u,o}static eventCallback(t,o,u){return c=>{i.getEventFullKey(c)===t&&u.runGuarded(()=>o(c))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(be))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();const Fs=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function(){lu.makeCurrent(),Dl.init()},multi:!0},{provide:be,useFactory:function(){return(0,p.RDi)(document),document},deps:[]}]),Th=[[],{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function(){return new p.qLn},deps:[]},{provide:Al,useClass:Ol,multi:!0,deps:[be,p.R0b,p.Lbi]},{provide:Al,useClass:O_,multi:!0,deps:[be]},[],{provide:vo,useClass:vo,deps:[Me,Sn,p.AFp]},{provide:p.FYo,useExisting:vo},{provide:Ml,useExisting:Sn},{provide:Sn,useClass:Sn,deps:[be]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:Me,useClass:Me,deps:[Al,p.R0b]},{provide:class{},useClass:Is,deps:[]},[]];let Dh=(()=>{class i{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:i,providers:[{provide:p.AFp,useValue:t.appId},{provide:Dn,useExisting:p.AFp},ki]}}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(i,12))},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:Th,imports:[ma,p.hGG]}),i})();"undefined"!=typeof window&&window;const cd_firebase={apiKey:"AIzaSyA0170oJhaAshcTwIbj-W97RT3TZrVFOIo",authDomain:"ump-cafe-supply-chain.firebaseapp.com",projectId:"ump-cafe-supply-chain",storageBucket:"ump-cafe-supply-chain.appspot.com",messagingSenderId:"293844040560",appId:"1:293844040560:web:f2309fd986e7bf9757adb5",measurementId:"G-8ZM1TDQ23L"};var nn=$(57),Ta=$(3637),Nr=$(7574),ot=$(5917),Ul=$(6682),ct=$(8002),Mh=$(8819),In=$(4402),Vi=$(5345);function Pn(i,e){return"function"==typeof e?t=>t.pipe(Pn((o,u)=>(0,In.D)(i(o,u)).pipe((0,ct.U)((c,m)=>e(o,c,u,m))))):t=>t.lift(new pu(i))}class pu{constructor(e){this.project=e}call(e,t){return t.subscribe(new F_(e,this.project))}}class F_ extends Vi.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const o=this.index++;try{t=this.project(e,o)}catch(u){return void this.destination.error(u)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const o=new Vi.IY(this),u=this.destination;u.add(o),this.innerSubscription=(0,Vi.ft)(e,o),this.innerSubscription!==o&&u.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var Gr=$(7393);function _o(i,e){let t=!1;return arguments.length>=2&&(t=!0),function(u){return u.lift(new gu(i,e,t))}}class gu{constructor(e,t,o=!1){this.accumulator=e,this.seed=t,this.hasSeed=o}call(e,t){return t.subscribe(new gm(e,this.accumulator,this.seed,this.hasSeed))}}class gm extends Gr.L{constructor(e,t,o,u){super(e),this.accumulator=t,this._seed=o,this.hasSeed=u,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let o;try{o=this.accumulator(this.seed,e,t)}catch(u){this.destination.error(u)}this.seed=o,this.destination.next(o)}}function dd(i,e){return t=>t.lift(new xh(i,e))}class xh{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new mu(e,this.compare,this.keySelector))}}class mu extends Gr.L{constructor(e,t,o){super(e),this.keySelector=o,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:u}=this;t=u?u(e):e}catch(u){return this.destination.error(u)}let o=!1;if(this.hasKey)try{const{compare:u}=this;o=u(this.key,t)}catch(u){return this.destination.error(u)}else this.hasKey=!0;o||(this.key=t,this.destination.next(e))}}class Da extends Gr.L{notifyNext(e,t,o,u,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class yu extends Gr.L{constructor(e,t,o){super(),this.parent=e,this.outerValue=t,this.outerIndex=o,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var vu=$(7444);function fd(i,e,t,o,u=new yu(i,t,o)){if(!u.closed)return e instanceof Nr.y?e.subscribe(u):(0,vu.s)(e)(u)}class k_{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new YE(e,this.observables,this.project))}}class YE extends Da{constructor(e,t,o){super(e),this.observables=t,this.project=o,this.toRespond=[];const u=t.length;this.values=new Array(u);for(let c=0;c<u;c++)this.toRespond.push(c);for(let c=0;c<u;c++)this.add(fd(this,t[c],void 0,c))}notifyNext(e,t,o){this.values[o]=t;const u=this.toRespond;if(u.length>0){const c=u.indexOf(o);-1!==c&&u.splice(c,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(o){return void this.destination.error(o)}this.destination.next(t)}}class Rh{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new ym(e,this.predicate))}}class ym extends Gr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}$(9192);var vi=$(9765),Yo=$(6136),vm=$(7771),hd=$(5319),L_=$(7971),QE=$(8858);class V_ extends vi.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Sa(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,o=t?this._events:this._trimBufferThenGetEvents(),u=this.scheduler,c=o.length;let m;if(this.closed)throw new L_.N;if(this.isStopped||this.hasError?m=hd.w.EMPTY:(this.observers.push(e),m=new QE.W(this,e)),u&&e.add(e=new Yo.ht(e,u)),t)for(let _=0;_<c&&!e.closed;_++)e.next(o[_]);else for(let _=0;_<c&&!e.closed;_++)e.next(o[_].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),m}_getNow(){return(this.scheduler||vm.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,o=this._windowTime,u=this._events,c=u.length;let m=0;for(;m<c&&!(e-u[m].time<o);)m++;return c>t&&(m=Math.max(m,c-t)),m>0&&u.splice(0,m),u}}class Sa{constructor(e,t){this.time=e,this.value=t}}function _m(i,e,t){let o;return o=i&&"object"==typeof i?i:{bufferSize:i,windowTime:e,refCount:!1,scheduler:t},u=>u.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:o}){let u,m,c=0,_=!1,w=!1;return function(x){let O;c++,!u||_?(_=!1,u=new V_(i,e,o),O=u.subscribe(this),m=x.subscribe({next(L){u.next(L)},error(L){_=!0,u.error(L)},complete(){w=!0,m=void 0,u.complete()}}),w&&(m=void 0)):O=u.subscribe(this),this.add(()=>{c--,O.unsubscribe(),O=void 0,m&&!w&&t&&0===c&&(m.unsubscribe(),m=void 0,u=void 0)})}}(o))}const no=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();function _i(i,e){return function(o){return o.lift(new nr(i,e))}}class nr{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new pd(e,this.predicate,this.thisArg))}}class pd extends Gr.L{constructor(e,t,o){super(e),this.predicate=t,this.thisArg=o,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(o){return void this.destination.error(o)}t&&this.destination.next(e)}}const bm=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();var bo=$(9193);function mr(i){return e=>0===i?(0,bo.c)():e.lift(new yr(i))}class yr{constructor(e){if(this.total=e,this.total<0)throw new bm}call(e,t){return t.subscribe(new Ls(e,this.total))}}class Ls extends Gr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,o=++this.count;o<=t&&(this.destination.next(e),o===t&&(this.destination.complete(),this.unsubscribe()))}}function Vs(i=null){return e=>e.lift(new Us(i))}class Us{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Cm(e,this.defaultValue))}}class Cm extends Gr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function gd(i=j_){return e=>e.lift(new B_(i))}class B_{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new KE(e,this.errorFactory))}}class KE extends Gr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function j_(){return new no}var bu=$(4487);function rr(i,e){const t=arguments.length>=2;return o=>o.pipe(i?_i((u,c)=>i(u,c,o)):bu.y,mr(1),t?Vs(e):gd(()=>new no))}function Qo(i,e){return e?Pn(()=>i,e):Pn(()=>i)}var Ko=$(3101);const Bs=new p.OlP("angularfire2.auth.use-emulator"),Bl=new p.OlP("angularfire2.auth.settings"),jl=new p.OlP("angularfire2.auth.tenant-id"),md=new p.OlP("angularfire2.auth.langugage-code"),yd=new p.OlP("angularfire2.auth.use-device-language"),vd=new p.OlP("angularfire.auth.persistence");let js=(()=>{class i{constructor(t,o,u,c,m,_,w,S,x,O){const L=new nn.HU(c),j=(0,nn.ss)(L),q=new vi.xQ,X=(0,ot.of)(void 0).pipe((0,Yo.QV)(L.outsideAngular),Pn(()=>c.runOutsideAngular(()=>$.e(336).then($.bind($,1336)))),(0,ct.U)(()=>(0,nn.on)(t,c,o)),(0,ct.U)(de=>c.runOutsideAngular(()=>{const Ee=m,Re=_;return(0,nn.sI)(`${de.name}.auth`,"AngularFireAuth",de,()=>{const Ve=c.runOutsideAngular(()=>de.auth());if(Ee&&Ve.useEmulator(`http://${Ee.join(":")}`),w&&(Ve.tenantId=w),Ve.languageCode=S,x&&Ve.useDeviceLanguage(),Re)for(const[Ze,Xe]of Object.entries(Re))Ve.settings[Ze]=Xe;return O&&Ve.setPersistence(O),Ve},[Ee,w,S,x,Re,O])})),_m({bufferSize:1,refCount:!1}));if(bh(u))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ot.of)(null);else{X.pipe(rr()).subscribe();const Ee=X.pipe(Pn(Xe=>Xe.getRedirectResult().then(Lt=>Lt,()=>null)),j,_m({bufferSize:1,refCount:!1})),Re=Xe=>new Nr.y(Lt=>({unsubscribe:c.runOutsideAngular(()=>Xe(Lt))})),Ve=X.pipe(Pn(Xe=>Re(Xe.onAuthStateChanged.bind(Xe)))),Ze=X.pipe(Pn(Xe=>Re(Xe.onIdTokenChanged.bind(Xe))));this.authState=Ee.pipe(Qo(Ve),(0,Ko.R)(L.outsideAngular),(0,Yo.QV)(L.insideAngular)),this.user=Ee.pipe(Qo(Ze),(0,Ko.R)(L.outsideAngular),(0,Yo.QV)(L.insideAngular)),this.idToken=this.user.pipe(Pn(Xe=>Xe?(0,In.D)(Xe.getIdToken()):(0,ot.of)(null))),this.idTokenResult=this.user.pipe(Pn(Xe=>Xe?(0,In.D)(Xe.getIdTokenResult()):(0,ot.of)(null))),this.credential=(0,Ul.T)(Ee,q,this.authState.pipe(_i(Xe=>!Xe))).pipe((0,ct.U)(Xe=>(null==Xe?void 0:Xe.user)?Xe:null),(0,Ko.R)(L.outsideAngular),(0,Yo.QV)(L.insideAngular))}return(0,nn.pX)(this,X,c,{spy:{apply:(de,Ee,Re)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&Re.then(Ve=>q.next(Ve))}}})}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(nn.Dh),p.LFG(nn.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Bs,8),p.LFG(Bl,8),p.LFG(jl,8),p.LFG(md,8),p.LFG(yd,8),p.LFG(vd,8))},i.\u0275prov=p.Yz7({factory:function(){return new i(p.LFG(nn.Dh),p.LFG(nn.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Bs,8),p.LFG(Bl,8),p.LFG(jl,8),p.LFG(md,8),p.LFG(yd,8),p.LFG(vd,8))},token:i,providedIn:"any"}),i})();var Hl=$(2329);function _d(i){return null==i}function Ia(i){return"function"==typeof i.set}function Em(i,e){return Ia(e)?e:i.ref(e)}function Oh(i,e){if(function(i){return"string"==typeof i}(i))return e.stringCase();if(Ia(i))return e.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function ql(i,e,t="on",o=Ta.z){return new Nr.y(u=>{let c=null;return c=i[t](e,(m,_)=>{o.schedule(()=>{u.next({snapshot:m,prevKey:_})}),"once"===t&&o.schedule(()=>u.complete())},m=>{o.schedule(()=>u.error(m))}),"on"===t?{unsubscribe(){null!=c&&i.off(e,c)}}:{unsubscribe(){}}}).pipe((0,ct.U)(u=>{const{snapshot:c,prevKey:m}=u;let _=null;return c.exists()&&(_=c.key),{type:e,payload:c,prevKey:m,key:_}}),(0,Mh.B)())}function wm(i,e){const t=i.length;for(let o=0;o<t;o++)if(i[o].payload.key===e)return o;return-1}function Aa(i,e){const{payload:t,prevKey:o,key:u}=e,c=wm(i,u),m=function(i,e){if(_d(e))return 0;{const t=wm(i,e);return-1===t?i.length:t+1}}(i,o);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let _=null;e.payload.forEach(w=>{const S={payload:w,type:"value",prevKey:_,key:w.key};return _=w.key,i=[...i,S],!1})}return i;case"child_added":if(c>-1){const _=i[c-1];(_&&_.key||null)!==o&&(i=i.filter(w=>w.payload.key!==t.key)).splice(m,0,e)}else{if(null==o)return[e,...i];(i=i.slice()).splice(m,0,e)}return i;case"child_removed":return i.filter(_=>_.payload.key!==t.key);case"child_changed":return i.map(_=>_.payload.key===u?e:_);case"child_moved":if(c>-1){const _=i.splice(c,1)[0];return(i=i.slice()).splice(m,0,_),i}return i;default:return i}}function Zo(i){return(_d(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function Wl(i,e,t){return function(i,e,t){return ql(i,"value","once",t).pipe(Pn(o=>{const u=[(0,ot.of)(o)];return e.forEach(c=>u.push(ql(i,c,"on",t))),(0,Ul.T)(...u).pipe(_o(Aa,[]))}),dd())}(i,e=Zo(e),t)}function pn(i,e,t){const o=(e=Zo(e)).map(u=>ql(i,u,"on",t));return(0,Ul.T)(...o)}function Jo(i,e){return function(o,u){return Oh(o,{stringCase:()=>i.child(o)[e](u),firebaseCase:()=>o[e](u),snapshotCase:()=>o.ref[e](u)})}}function Dm(i){return function(t){return t?Oh(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}}function xa(i,e){return function(){return ql(i,"value","on",e)}}const Ra=new p.OlP("angularfire2.realtimeDatabaseURL"),Co=new p.OlP("angularfire2.database.use-emulator");let Cd=(()=>{class i{constructor(t,o,u,c,m,_,w){this.schedulers=new nn.HU(m),this.keepUnstableUntilFirst=(0,nn.ss)(this.schedulers);const S=_,x=(0,nn.on)(t,m,o);!Hl.Z.auth&&w&&(0,nn.yq)(),this.database=(0,nn.sI)(`${x.name}.database.${u}`,"AngularFireDatabase",x,()=>{const O=m.runOutsideAngular(()=>x.database(u||void 0));return S&&O.useEmulator(...S),O},[S])}list(t,o){const u=this.schedulers.ngZone.runOutsideAngular(()=>Em(this.database,t));let c=u;return o&&(c=o(u)),function(i,e){const t=e.schedulers.outsideAngular,o=e.schedulers.ngZone.run(()=>i.ref);return{query:i,update:Jo(o,"update"),set:Jo(o,"set"),push:u=>o.push(u),remove:Dm(o),snapshotChanges:u=>Wl(i,u,t).pipe(e.keepUnstableUntilFirst),stateChanges:u=>pn(i,u,t).pipe(e.keepUnstableUntilFirst),auditTrail:u=>function(i,e,t){return function(i,e,t){return function(i,e){return ql(i,"value","on",e).pipe((0,ct.U)(t=>{let o;return t.payload.forEach(u=>(o=u.key,!1)),{data:t,lastKeyToLoad:o}}))}(i,t).pipe(function(...i){return e=>{let t;return"function"==typeof i[i.length-1]&&(t=i.pop()),e.lift(new k_(i,t))}}(e),(0,ct.U)(([u,c])=>{const m=u.lastKeyToLoad,_=c.map(w=>w.key);return{actions:c,lastKeyToLoad:m,loadedKeys:_}}),function(i){return e=>e.lift(new Rh(i))}(u=>-1===u.loadedKeys.indexOf(u.lastKeyToLoad)),(0,ct.U)(u=>u.actions))}(i,pn(i,e).pipe(_o((u,c)=>[...u,c],[])),t)}(i,u,t).pipe(e.keepUnstableUntilFirst),valueChanges:(u,c)=>Wl(i,u,t).pipe((0,ct.U)(_=>_.map(w=>c&&c.idField?Object.assign(Object.assign({},w.payload.val()),{[c.idField]:w.key}):w.payload.val())),e.keepUnstableUntilFirst)}}(c,this)}object(t){return function(i,e){return{query:i,snapshotChanges:()=>xa(i,e.schedulers.outsideAngular)().pipe(e.keepUnstableUntilFirst),update:t=>i.ref.update(t),set:t=>i.ref.set(t),remove:()=>i.ref.remove(),valueChanges:()=>xa(i,e.schedulers.outsideAngular)().pipe(e.keepUnstableUntilFirst,(0,ct.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Em(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(nn.Dh),p.LFG(nn.xv,8),p.LFG(Ra,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Co,8),p.LFG(Bs,8))},i.\u0275prov=p.Yz7({factory:function(){return new i(p.LFG(nn.Dh),p.LFG(nn.xv,8),p.LFG(Ra,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Co,8),p.LFG(Bs,8))},token:i,providedIn:"any"}),i})(),Eo=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[Cd]}),i})();class ti extends vi.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new L_.N;return this._value}next(e){super.next(this._value=e)}}var Ed=$(4869),Eu=$(9796),Hs=$(6693);const Ui={};class G_{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Na(e,this.resultSelector))}}class Na extends Da{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ui),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let o=0;o<t;o++)this.add(fd(this,e[o],void 0,o))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,o){const u=this.values,m=this.toRespond?u[o]===Ui?--this.toRespond:this.toRespond:0;u[o]=t,0===m&&(this.resultSelector?this._tryResultSelector(u):this.destination.next(u.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(o){return void this.destination.error(o)}this.destination.next(t)}}var wo=$(3282);function wu(...i){return(0,wo.J)(1)((0,ot.of)(...i))}function Oa(i){return new Nr.y(e=>{let t;try{t=i()}catch(u){return void e.error(u)}return(t?(0,In.D)(t):(0,bo.c)()).subscribe(e)})}var $_=$(2441);function vr(...i){const e=i[i.length-1];return(0,Ed.K)(e)?(i.pop(),t=>wu(i,t,e)):t=>wu(i,t)}function Xo(i){return function(t){const o=new W_(i),u=t.lift(o);return o.caught=u}}class W_{constructor(e){this.selector=e}call(e,t){return t.subscribe(new z_(e,this.selector,this.caught))}}class z_ extends Vi.Ds{constructor(e,t,o){super(e),this.selector=t,this.caught=o}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const o=new Vi.IY(this);this.add(o);const u=(0,Vi.ft)(t,o);u!==o&&this.add(u)}}}var jn=$(9773);function To(i,e){return(0,jn.zg)(i,e,1)}function ir(i){return function(t){return 0===i?(0,bo.c)():t.lift(new Am(i))}}class Am{constructor(e){if(this.total=e,this.total<0)throw new bm}call(e,t){return t.subscribe(new Y_(e,this.total))}}class Y_ extends Gr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,o=this.total,u=this.count++;t.length<o?t.push(e):t[u%o]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const o=this.count>=this.total?this.total:this.count,u=this.ring;for(let c=0;c<o;c++){const m=t++%o;e.next(u[m])}}e.complete()}}var or=$(3342),Fh=$(1307);class Lh{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Tu(e,this.callback))}}class Tu extends Gr.L{constructor(e,t){super(e),this.add(new hd.w(t))}}class Or{constructor(e,t){this.id=e,this.url=t}}class Vh extends Or{constructor(e,t,o="imperative",u=null){super(e,t),this.navigationTrigger=o,this.restoredState=u}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Du extends Or{constructor(e,t,o){super(e,t),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Mm extends Or{constructor(e,t,o){super(e,t),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uh extends Or{constructor(e,t,o){super(e,t),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wd extends Or{constructor(e,t,o,u){super(e,t),this.urlAfterRedirects=o,this.state=u}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class es extends Or{constructor(e,t,o,u){super(e,t),this.urlAfterRedirects=o,this.state=u}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gs extends Or{constructor(e,t,o,u,c){super(e,t),this.urlAfterRedirects=o,this.state=u,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xm extends Or{constructor(e,t,o,u){super(e,t),this.urlAfterRedirects=o,this.state=u}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K_ extends Or{constructor(e,t,o,u){super(e,t),this.urlAfterRedirects=o,this.state=u}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rm{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bh{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Z_{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J_{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nm{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jh{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hh{constructor(e,t,o){this.routerEvent=e,this.position=t,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ht="primary";class X_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yl(i){return new X_(i)}const Pa="ngNavigationCancelingError";function ni(i){const e=Error("NavigationCancelingError: "+i);return e[Pa]=!0,e}function Bi(i,e,t){const o=t.path.split("/");if(o.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||o.length<i.length))return null;const u={};for(let c=0;c<o.length;c++){const m=o[c],_=i[c];if(m.startsWith(":"))u[m.substring(1)]=_;else if(m!==_.path)return null}return{consumed:i.slice(0,o.length),posParams:u}}function ro(i,e){const t=i?Object.keys(i):void 0,o=e?Object.keys(e):void 0;if(!t||!o||t.length!=o.length)return!1;let u;for(let c=0;c<t.length;c++)if(u=t[c],!$s(i[u],e[u]))return!1;return!0}function $s(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),o=[...e].sort();return t.every((u,c)=>o[c]===u)}return i===e}function Gh(i){return Array.prototype.concat.apply([],i)}function Pm(i){return i.length>0?i[i.length-1]:null}function _r(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function qr(i){return(0,p.CqO)(i)?i:(0,p.QGY)(i)?(0,In.D)(Promise.resolve(i)):(0,ot.of)(i)}const Kl={exact:function Fm(i,e,t){if(!Gt(i.segments,e.segments)||!Zl(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const o in e.children)if(!i.children[o]||!Fm(i.children[o],e.children[o],t))return!1;return!0},subset:qh},e0={exact:function(i,e){return ro(i,e)},subset:function(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>$s(i[t],e[t]))},ignored:()=>!0};function t0(i,e,t){return Kl[t.paths](i.root,e.root,t.matrixParams)&&e0[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function qh(i,e,t){return $h(i,e,e.segments,t)}function $h(i,e,t,o){if(i.segments.length>t.length){const u=i.segments.slice(0,t.length);return!(!Gt(u,t)||e.hasChildren()||!Zl(u,t,o))}if(i.segments.length===t.length){if(!Gt(i.segments,t)||!Zl(i.segments,t,o))return!1;for(const u in e.children)if(!i.children[u]||!qh(i.children[u],e.children[u],o))return!1;return!0}{const u=t.slice(0,i.segments.length),c=t.slice(i.segments.length);return!!(Gt(i.segments,u)&&Zl(i.segments,u,o)&&i.children[Ht])&&$h(i.children[Ht],e,c,o)}}function Zl(i,e,t){return e.every((o,u)=>e0[t](i[u].parameters,o.parameters))}class Hn{constructor(e,t,o){this.root=e,this.queryParams=t,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yl(this.queryParams)),this._queryParamMap}toString(){return Ws.serialize(this)}}class kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,_r(t,(o,u)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ad(this)}}class ri{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Yl(this.parameters)),this._parameterMap}toString(){return br(this)}}function Gt(i,e){return i.length===e.length&&i.every((t,o)=>t.path===e[o].path)}class Id{}class Jl{parse(e){const t=new Yh(e);return new Hn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var i;return`${`/${Xl(e.root,!0)}`}${function(i){const e=Object.keys(i).map(t=>{const o=i[t];return Array.isArray(o)?o.map(u=>`${xd(t)}=${xd(u)}`).join("&"):`${xd(t)}=${xd(o)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${i=e.fragment,encodeURI(i)}`:""}`}}const Ws=new Jl;function Ad(i){return i.segments.map(e=>br(e)).join("/")}function Xl(i,e){if(!i.hasChildren())return Ad(i);if(e){const t=i.children[Ht]?Xl(i.children[Ht],!1):"",o=[];return _r(i.children,(u,c)=>{c!==Ht&&o.push(`${c}:${Xl(u,!1)}`)}),o.length>0?`${t}(${o.join("//")})`:t}{const t=function(i,e){let t=[];return _r(i.children,(o,u)=>{u===Ht&&(t=t.concat(e(o,u)))}),_r(i.children,(o,u)=>{u!==Ht&&(t=t.concat(e(o,u)))}),t}(i,(o,u)=>u===Ht?[Xl(i.children[Ht],!1)]:[`${u}:${Xl(o,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Ht]?`${Ad(i)}/${t[0]}`:`${Ad(i)}/(${t.join("//")})`}}function Md(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xd(i){return Md(i).replace(/%3B/gi,";")}function Lm(i){return Md(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wh(i){return decodeURIComponent(i)}function Fa(i){return Wh(i.replace(/\+/g,"%20"))}function br(i){return`${Lm(i.path)}${function(i){return Object.keys(i).map(e=>`;${Lm(e)}=${Lm(i[e])}`).join("")}(i.parameters)}`}const zh=/^[^\/()?;=#]+/;function Wn(i){const e=i.match(zh);return e?e[0]:""}const Su=/^[^=?&#]+/,Vm=/^[^?&#]+/;class Yh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(o[Ht]=new kt(e,t)),o}parseSegment(){const e=Wn(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ri(Wh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Wn(this.remaining);if(!t)return;this.capture(t);let o="";if(this.consumeOptional("=")){const u=Wn(this.remaining);u&&(o=u,this.capture(o))}e[Wh(t)]=Wh(o)}parseQueryParam(e){const t=function(i){const e=i.match(Su);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let o="";if(this.consumeOptional("=")){const m=function(i){const e=i.match(Vm);return e?e[0]:""}(this.remaining);m&&(o=m,this.capture(o))}const u=Fa(t),c=Fa(o);if(e.hasOwnProperty(u)){let m=e[u];Array.isArray(m)||(m=[m],e[u]=m),m.push(c)}else e[u]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=Wn(this.remaining),u=this.remaining[o.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error(`Cannot parse url '${this.url}'`);let c;o.indexOf(":")>-1?(c=o.substr(0,o.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Ht);const m=this.parseChildren();t[c]=1===Object.keys(m).length?m[Ht]:new kt([],m),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Um{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Od(e,this._root);return t?t.children.map(o=>o.value):[]}firstChild(e){const t=Od(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Qh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(u=>u.value).filter(u=>u!==e)}pathFromRoot(e){return Qh(e,this._root).map(t=>t.value)}}function Od(i,e){if(i===e.value)return e;for(const t of e.children){const o=Od(i,t);if(o)return o}return null}function Qh(i,e){if(i===e.value)return[e];for(const t of e.children){const o=Qh(i,t);if(o.length)return o.unshift(e),o}return[]}class oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ec(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class Bm extends Um{constructor(e,t){super(e),this.snapshot=t,Iu(this,e)}toString(){return this.snapshot.toString()}}function jm(i,e){const t=function(i,e){const m=new Zh([],{},{},"",{},Ht,e,null,i.root,-1,{});return new Jh("",new oo(m,[]))}(i,e),o=new ti([new ri("",{})]),u=new ti({}),c=new ti({}),m=new ti({}),_=new ti(""),w=new zs(o,u,m,_,c,Ht,e,t.root);return w.snapshot=t.root,new Bm(new oo(w,[]),t)}class zs{constructor(e,t,o,u,c,m,_,w){this.url=e,this.params=t,this.queryParams=o,this.fragment=u,this.data=c,this.outlet=m,this.component=_,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(e=>Yl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(e=>Yl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kh(i,e="emptyOnly"){const t=i.pathFromRoot;let o=0;if("always"!==e)for(o=t.length-1;o>=1;){const u=t[o],c=t[o-1];if(u.routeConfig&&""===u.routeConfig.path)o--;else{if(c.component)break;o--}}return function(i){return i.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(o))}class Zh{constructor(e,t,o,u,c,m,_,w,S,x,O){this.url=e,this.params=t,this.queryParams=o,this.fragment=u,this.data=c,this.outlet=m,this.component=_,this.routeConfig=w,this._urlSegment=S,this._lastPathIndex=x,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jh extends Um{constructor(e,t){super(t),this.url=e,Iu(this,t)}toString(){return Gm(this._root)}}function Iu(i,e){e.value._routerState=i,e.children.forEach(t=>Iu(i,t))}function Gm(i){const e=i.children.length>0?` { ${i.children.map(Gm).join(", ")} } `:"";return`${i.value}${e}`}function Xh(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,ro(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),ro(e.params,t.params)||i.params.next(t.params),function(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!ro(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),ro(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Ys(i,e){return ro(i.params,e.params)&&function(i,e){return Gt(i,e)&&i.every((t,o)=>ro(t.parameters,e[o].parameters))}(i.url,e.url)&&!(!i.parent!=!e.parent)&&(!i.parent||Ys(i.parent,e.parent))}function Pd(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const o=t.value;o._futureSnapshot=e.value;const u=function(i,e,t){return e.children.map(o=>{for(const u of t.children)if(i.shouldReuseRoute(o.value,u.value.snapshot))return Pd(i,o,u);return Pd(i,o)})}(i,e,t);return new oo(o,u)}{if(i.shouldAttach(e.value)){const c=i.retrieve(e.value);if(null!==c){const m=c.route;return qm(e,m),m}}const o=function(i){return new zs(new ti(i.url),new ti(i.params),new ti(i.queryParams),new ti(i.fragment),new ti(i.data),i.outlet,i.component,i)}(e.value),u=e.children.map(c=>Pd(i,c));return new oo(o,u)}}function qm(i,e){if(i.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=i.value;for(let t=0;t<i.children.length;++t)qm(i.children[t],e.children[t])}function Cr(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function La(i){return"object"==typeof i&&null!=i&&i.outlets}function ep(i,e,t,o,u){let c={};return o&&_r(o,(m,_)=>{c[_]=Array.isArray(m)?m.map(w=>`${w}`):`${m}`}),new Hn(t.root===i?e:tp(t.root,i,e),c,u)}function tp(i,e,t){const o={};return _r(i.children,(u,c)=>{o[c]=u===e?t:tp(u,e,t)}),new kt(i.segments,o)}class np{constructor(e,t,o){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=o,e&&o.length>0&&Cr(o[0]))throw new Error("Root segment cannot have matrix parameters");const u=o.find(La);if(u&&u!==Pm(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kd{constructor(e,t,o){this.segmentGroup=e,this.processChildren=t,this.index=o}}function Va(i,e,t){if(i||(i=new kt([],{})),0===i.segments.length&&i.hasChildren())return bi(i,e,t);const o=function(i,e,t){let o=0,u=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;u<i.segments.length;){if(o>=t.length)return c;const m=i.segments[u],_=t[o];if(La(_))break;const w=`${_}`,S=o<t.length-1?t[o+1]:null;if(u>0&&void 0===w)break;if(w&&S&&"object"==typeof S&&void 0===S.outlets){if(!ao(w,S,m))return c;o+=2}else{if(!ao(w,{},m))return c;o++}u++}return{match:!0,pathIndex:u,commandIndex:o}}(i,e,t),u=t.slice(o.commandIndex);if(o.match&&o.pathIndex<i.segments.length){const c=new kt(i.segments.slice(0,o.pathIndex),{});return c.children[Ht]=new kt(i.segments.slice(o.pathIndex),i.children),bi(c,0,u)}return o.match&&0===u.length?new kt(i.segments,{}):o.match&&!i.hasChildren()?$m(i,e,t):o.match?bi(i,0,u):$m(i,e,t)}function bi(i,e,t){if(0===t.length)return new kt(i.segments,{});{const o=function(i){return La(i[0])?i[0].outlets:{[Ht]:i}}(t),u={};return _r(o,(c,m)=>{"string"==typeof c&&(c=[c]),null!==c&&(u[m]=Va(i.children[m],e,c))}),_r(i.children,(c,m)=>{void 0===o[m]&&(u[m]=c)}),new kt(i.segments,u)}}function $m(i,e,t){const o=i.segments.slice(0,e);let u=0;for(;u<t.length;){const c=t[u];if(La(c)){const w=Wm(c.outlets);return new kt(o,w)}if(0===u&&Cr(t[0])){o.push(new ri(i.segments[e].path,l0(t[0]))),u++;continue}const m=La(c)?c.outlets[Ht]:`${c}`,_=u<t.length-1?t[u+1]:null;m&&_&&Cr(_)?(o.push(new ri(m,l0(_))),u+=2):(o.push(new ri(m,{})),u++)}return new kt(o,{})}function Wm(i){const e={};return _r(i,(t,o)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[o]=$m(new kt([],{}),0,t))}),e}function l0(i){const e={};return _r(i,(t,o)=>e[o]=`${t}`),e}function ao(i,e,t){return i==t.path&&ro(e,t.parameters)}class Ua{constructor(e,t,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=o,this.forwardEvent=u}activate(e){const t=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,o,e),Xh(this.futureState.root),this.activateChildRoutes(t,o,e)}deactivateChildRoutes(e,t,o){const u=ec(t);e.children.forEach(c=>{const m=c.value.outlet;this.deactivateRoutes(c,u[m],o),delete u[m]}),_r(u,(c,m)=>{this.deactivateRouteAndItsChildren(c,o)})}deactivateRoutes(e,t,o){const u=e.value,c=t?t.value:null;if(u===c)if(u.component){const m=o.getContext(u.outlet);m&&this.deactivateChildRoutes(e,t,m.children)}else this.deactivateChildRoutes(e,t,o);else c&&this.deactivateRouteAndItsChildren(t,o)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const o=t.getContext(e.value.outlet);if(o&&o.outlet){const u=o.outlet.detach(),c=o.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const o=t.getContext(e.value.outlet),u=o&&e.value.component?o.children:t,c=ec(e);for(const m of Object.keys(c))this.deactivateRouteAndItsChildren(c[m],u);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(e,t,o){const u=ec(t);e.children.forEach(c=>{this.activateRoutes(c,u[c.value.outlet],o),this.forwardEvent(new jh(c.value.snapshot))}),e.children.length&&this.forwardEvent(new J_(e.value.snapshot))}activateRoutes(e,t,o){const u=e.value,c=t?t.value:null;if(Xh(u),u===c)if(u.component){const m=o.getOrCreateContext(u.outlet);this.activateChildRoutes(e,t,m.children)}else this.activateChildRoutes(e,t,o);else if(u.component){const m=o.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const _=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),m.children.onOutletReAttached(_.contexts),m.attachRef=_.componentRef,m.route=_.route.value,m.outlet&&m.outlet.attach(_.componentRef,_.route.value),ip(_.route)}else{const _=function(i){for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(u.snapshot),w=_?_.module.componentFactoryResolver:null;m.attachRef=null,m.route=u,m.resolver=w,m.outlet&&m.outlet.activateWith(u,w),this.activateChildRoutes(e,null,m.children)}}else this.activateChildRoutes(e,null,o)}}function ip(i){Xh(i.value),i.children.forEach(ip)}class Do{constructor(e,t){this.routes=e,this.module=t}}function ts(i){return"function"==typeof i}function ns(i){return i instanceof Hn}const Ba=Symbol("INITIAL_VALUE");function Mu(){return Pn(i=>function(...i){let e,t;return(0,Ed.K)(i[i.length-1])&&(t=i.pop()),"function"==typeof i[i.length-1]&&(e=i.pop()),1===i.length&&(0,Eu.k)(i[0])&&(i=i[0]),(0,Hs.n)(i,t).lift(new G_(e))}(i.map(e=>e.pipe(mr(1),vr(Ba)))).pipe(_o((e,t)=>{let o=!1;return t.reduce((u,c,m)=>u!==Ba?u:(c===Ba&&(o=!0),o||!1!==c&&m!==t.length-1&&!ns(c)?u:c),e)},Ba),_i(e=>e!==Ba),(0,ct.U)(e=>ns(e)?e:!0===e),mr(1)))}let Qm=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=p.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,o){1&t&&p._UZ(0,"router-outlet")},directives:function(){return[cp]},encapsulation:2}),i})();function Ld(i,e=""){for(let t=0;t<i.length;t++){const o=i[t];c0(o,d0(e,o))}}function c0(i,e){i.children&&Ld(i.children,e)}function d0(i,e){return e?i||e.path?i&&!e.path?`${i}/`:!i&&e.path?e.path:`${i}/${e.path}`:"":i}function sp(i){const e=i.children&&i.children.map(sp),t=e?Object.assign(Object.assign({},i),{children:e}):Object.assign({},i);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ht&&(t.component=Qm),t}function ji(i){return i.outlet||Ht}function Km(i,e){const t=i.filter(o=>ji(o)===e);return t.push(...i.filter(o=>ji(o)!==e)),t}const Zm={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function tc(i,e,t){var o;if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?Object.assign({},Zm):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||Bi)(t,i,e);if(!c)return Object.assign({},Zm);const m={};_r(c.posParams,(w,S)=>{m[S]=w.path});const _=c.consumed.length>0?Object.assign(Object.assign({},m),c.consumed[c.consumed.length-1].parameters):m;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:_,positionalParamSegments:null!==(o=c.posParams)&&void 0!==o?o:{}}}function xu(i,e,t,o,u="corrected"){if(t.length>0&&function(i,e,t){return t.some(o=>T(i,e,o)&&ji(o)!==Ht)}(i,t,o)){const m=new kt(e,function(i,e,t,o){const u={};u[Ht]=o,o._sourceSegment=i,o._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&ji(c)!==Ht){const m=new kt([],{});m._sourceSegment=i,m._segmentIndexShift=e.length,u[ji(c)]=m}return u}(i,e,o,new kt(t,i.children)));return m._sourceSegment=i,m._segmentIndexShift=e.length,{segmentGroup:m,slicedSegments:[]}}if(0===t.length&&function(i,e,t){return t.some(o=>T(i,e,o))}(i,t,o)){const m=new kt(i.segments,function(i,e,t,o,u,c){const m={};for(const _ of o)if(T(i,t,_)&&!u[ji(_)]){const w=new kt([],{});w._sourceSegment=i,w._segmentIndexShift="legacy"===c?i.segments.length:e.length,m[ji(_)]=w}return Object.assign(Object.assign({},u),m)}(i,e,t,o,i.children,u));return m._sourceSegment=i,m._segmentIndexShift=e.length,{segmentGroup:m,slicedSegments:t}}const c=new kt(i.segments,i.children);return c._sourceSegment=i,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function T(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function I(i,e,t,o){return!!(ji(i)===o||o!==Ht&&T(e,t,i))&&("**"===i.path||tc(e,i,t).matched)}function R(i,e,t){return 0===e.length&&!i.children[t]}class F{constructor(e){this.segmentGroup=e||null}}class V{constructor(e){this.urlTree=e}}function G(i){return new Nr.y(e=>e.error(new F(i)))}function z(i){return new Nr.y(e=>e.error(new V(i)))}function ue(i){return new Nr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class He{constructor(e,t,o,u,c){this.configLoader=t,this.urlSerializer=o,this.urlTree=u,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=xu(this.urlTree.root,[],[],this.config).segmentGroup,t=new kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ht).pipe((0,ct.U)(c=>this.createUrlTree(nt(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xo(c=>{if(c instanceof V)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof F?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ht).pipe((0,ct.U)(u=>this.createUrlTree(nt(u),e.queryParams,e.fragment))).pipe(Xo(u=>{throw u instanceof F?this.noMatchError(u):u}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,o){const u=e.segments.length>0?new kt([],{[Ht]:e}):e;return new Hn(u,t,o)}expandSegmentGroup(e,t,o,u){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(e,t,o).pipe((0,ct.U)(c=>new kt([],c))):this.expandSegment(e,o,t,o.segments,u,!0)}expandChildren(e,t,o){const u=[];for(const c of Object.keys(o.children))"primary"===c?u.unshift(c):u.push(c);return(0,In.D)(u).pipe(To(c=>{const m=o.children[c],_=Km(t,c);return this.expandSegmentGroup(e,_,m,c).pipe((0,ct.U)(w=>({segment:w,outlet:c})))}),_o((c,m)=>(c[m.outlet]=m.segment,c),{}),function(i,e){const t=arguments.length>=2;return o=>o.pipe(i?_i((u,c)=>i(u,c,o)):bu.y,ir(1),t?Vs(e):gd(()=>new no))}())}expandSegment(e,t,o,u,c,m){return(0,In.D)(o).pipe(To(_=>this.expandSegmentAgainstRoute(e,t,o,_,u,c,m).pipe(Xo(S=>{if(S instanceof F)return(0,ot.of)(null);throw S}))),rr(_=>!!_),Xo((_,w)=>{if(_ instanceof no||"EmptyError"===_.name){if(R(t,u,c))return(0,ot.of)(new kt([],{}));throw new F(t)}throw _}))}expandSegmentAgainstRoute(e,t,o,u,c,m,_){return I(u,t,c,m)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(e,t,u,c,m):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,o,u,c,m):G(t):G(t)}expandSegmentAgainstRouteUsingRedirect(e,t,o,u,c,m){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,o,u,m):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,o,u,c,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,o,u){const c=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?z(c):this.lineralizeSegments(o,c).pipe((0,jn.zg)(m=>{const _=new kt(m,{});return this.expandSegment(e,_,t,m,u,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,o,u,c,m){const{matched:_,consumedSegments:w,lastChild:S,positionalParamSegments:x}=tc(t,u,c);if(!_)return G(t);const O=this.applyRedirectCommands(w,u.redirectTo,x);return u.redirectTo.startsWith("/")?z(O):this.lineralizeSegments(u,O).pipe((0,jn.zg)(L=>this.expandSegment(e,t,o,L.concat(c.slice(S)),m,!1)))}matchSegmentAgainstRoute(e,t,o,u,c){if("**"===o.path)return o.loadChildren?(o._loadedConfig?(0,ot.of)(o._loadedConfig):this.configLoader.load(e.injector,o)).pipe((0,ct.U)(L=>(o._loadedConfig=L,new kt(u,{})))):(0,ot.of)(new kt(u,{}));const{matched:m,consumedSegments:_,lastChild:w}=tc(t,o,u);if(!m)return G(t);const S=u.slice(w);return this.getChildConfig(e,o,u).pipe((0,jn.zg)(O=>{const L=O.module,j=O.routes,{segmentGroup:q,slicedSegments:X}=xu(t,_,S,j),de=new kt(q.segments,q.children);if(0===X.length&&de.hasChildren())return this.expandChildren(L,j,de).pipe((0,ct.U)(Ze=>new kt(_,Ze)));if(0===j.length&&0===X.length)return(0,ot.of)(new kt(_,{}));const Ee=ji(o)===c;return this.expandSegment(L,de,j,X,Ee?Ht:c,!0).pipe((0,ct.U)(Ve=>new kt(_.concat(Ve.segments),Ve.children)))}))}getChildConfig(e,t,o){return t.children?(0,ot.of)(new Do(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ot.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,o).pipe((0,jn.zg)(u=>{return u?this.configLoader.load(e.injector,t).pipe((0,ct.U)(c=>(t._loadedConfig=c,c))):(i=t,new Nr.y(e=>e.error(ni(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))));var i})):(0,ot.of)(new Do([],e))}runCanLoadGuards(e,t,o){const u=t.canLoad;if(!u||0===u.length)return(0,ot.of)(!0);const c=u.map(m=>{const _=e.get(m);let w;if((i=_)&&ts(i.canLoad))w=_.canLoad(t,o);else{if(!ts(_))throw new Error("Invalid CanLoad guard");w=_(t,o)}var i;return qr(w)});return(0,ot.of)(c).pipe(Mu(),(0,or.b)(m=>{if(!ns(m))return;const _=ni(`Redirecting to "${this.urlSerializer.serialize(m)}"`);throw _.url=m,_}),(0,ct.U)(m=>!0===m))}lineralizeSegments(e,t){let o=[],u=t.root;for(;;){if(o=o.concat(u.segments),0===u.numberOfChildren)return(0,ot.of)(o);if(u.numberOfChildren>1||!u.children[Ht])return ue(e.redirectTo);u=u.children[Ht]}}applyRedirectCommands(e,t,o){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,o)}applyRedirectCreatreUrlTree(e,t,o,u){const c=this.createSegmentGroup(e,t.root,o,u);return new Hn(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const o={};return _r(e,(u,c)=>{if("string"==typeof u&&u.startsWith(":")){const _=u.substring(1);o[c]=t[_]}else o[c]=u}),o}createSegmentGroup(e,t,o,u){const c=this.createSegments(e,t.segments,o,u);let m={};return _r(t.children,(_,w)=>{m[w]=this.createSegmentGroup(e,_,o,u)}),new kt(c,m)}createSegments(e,t,o,u){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,u):this.findOrReturn(c,o))}findPosParam(e,t,o){const u=o[t.path.substring(1)];if(!u)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return u}findOrReturn(e,t){let o=0;for(const u of t){if(u.path===e.path)return t.splice(o),u;o++}return e}}function nt(i){const e={};for(const o of Object.keys(i.children)){const c=nt(i.children[o]);(c.segments.length>0||c.hasChildren())&&(e[o]=c)}return function(i){if(1===i.numberOfChildren&&i.children[Ht]){const e=i.children[Ht];return new kt(i.segments.concat(e.segments),e.children)}return i}(new kt(i.segments,e))}class An{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ii{constructor(e,t){this.component=e,this.route=t}}function Ru(i,e,t){const o=i._root;return ap(o,e?e._root:null,t,[o.value])}function Ks(i,e,t){const o=function(i){if(!i)return null;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(o?o.module.injector:t).get(i)}function ap(i,e,t,o,u={canDeactivateChecks:[],canActivateChecks:[]}){const c=ec(e);return i.children.forEach(m=>{(function(i,e,t,o,u={canDeactivateChecks:[],canActivateChecks:[]}){const c=i.value,m=e?e.value:null,_=t?t.getContext(i.value.outlet):null;if(m&&c.routeConfig===m.routeConfig){const w=function(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Gt(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Gt(i.url,e.url)||!ro(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ys(i,e)||!ro(i.queryParams,e.queryParams);case"paramsChange":default:return!Ys(i,e)}}(m,c,c.routeConfig.runGuardsAndResolvers);w?u.canActivateChecks.push(new An(o)):(c.data=m.data,c._resolvedData=m._resolvedData),ap(i,e,c.component?_?_.children:null:t,o,u),w&&_&&_.outlet&&_.outlet.isActivated&&u.canDeactivateChecks.push(new ii(_.outlet.component,m))}else m&&up(e,_,u),u.canActivateChecks.push(new An(o)),ap(i,null,c.component?_?_.children:null:t,o,u)})(m,c[m.value.outlet],t,o.concat([m.value]),u),delete c[m.value.outlet]}),_r(c,(m,_)=>up(m,t.getContext(_),u)),u}function up(i,e,t){const o=ec(i),u=i.value;_r(o,(c,m)=>{up(c,u.component?e?e.children.getContext(m):null:e,t)}),t.canDeactivateChecks.push(new ii(u.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,u))}class YI{}function So(i){return new Nr.y(e=>e.error(i))}class aw{constructor(e,t,o,u,c,m){this.rootComponentType=e,this.config=t,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=m}recognize(){const e=xu(this.urlTree.root,[],[],this.config.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ht);if(null===t)return null;const o=new Zh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new oo(o,t),c=new Jh(this.url,u);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,o=Kh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(o.params),t.data=Object.freeze(o.data),e.children.forEach(u=>this.inheritParamsAndData(u))}processSegmentGroup(e,t,o){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,o)}processChildren(e,t){const o=[];for(const c of Object.keys(t.children)){const m=t.children[c],_=Km(e,c),w=this.processSegmentGroup(_,m,c);if(null===w)return null;o.push(...w)}const u=uw(o);return u.sort((e,t)=>e.value.outlet===Ht?-1:t.value.outlet===Ht?1:e.value.outlet.localeCompare(t.value.outlet)),u}processSegment(e,t,o,u){for(const c of e){const m=this.processSegmentAgainstRoute(c,t,o,u);if(null!==m)return m}return R(t,o,u)?[]:null}processSegmentAgainstRoute(e,t,o,u){if(e.redirectTo||!I(e,t,o,u))return null;let c,m=[],_=[];if("**"===e.path){const j=o.length>0?Pm(o).parameters:{};c=new Zh(o,j,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dw(e),ji(e),e.component,e,lw(t),cw(t)+o.length,At(e))}else{const j=tc(t,e,o);if(!j.matched)return null;m=j.consumedSegments,_=o.slice(j.lastChild),c=new Zh(m,j.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dw(e),ji(e),e.component,e,lw(t),cw(t)+m.length,At(e))}const w=(i=e).children?i.children:i.loadChildren?i._loadedConfig.routes:[],{segmentGroup:S,slicedSegments:x}=xu(t,m,_,w.filter(j=>void 0===j.redirectTo),this.relativeLinkResolution);var i;if(0===x.length&&S.hasChildren()){const j=this.processChildren(w,S);return null===j?null:[new oo(c,j)]}if(0===w.length&&0===x.length)return[new oo(c,[])];const O=ji(e)===u,L=this.processSegment(w,S,x,O?Ht:u);return null===L?null:[new oo(c,L)]}}function JI(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uw(i){const e=[],t=new Set;for(const o of i){if(!JI(o)){e.push(o);continue}const u=e.find(c=>o.value.routeConfig===c.value.routeConfig);void 0!==u?(u.children.push(...o.children),t.add(u)):e.push(o)}for(const o of t){const u=uw(o.children);e.push(new oo(o.value,u))}return e.filter(o=>!t.has(o))}function lw(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function cw(i){let e=i,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function dw(i){return i.data||{}}function At(i){return i.resolve||{}}function h0(i){return Pn(e=>{const t=i(e);return t?(0,In.D)(t).pipe((0,ct.U)(()=>e)):(0,ot.of)(e)})}class g0 extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Xm=new p.OlP("ROUTES");class ey{constructor(e,t,o,u){this.loader=e,this.compiler=t,this.onLoadStartListener=o,this.onLoadEndListener=u}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const u=this.loadModuleFactory(t.loadChildren).pipe((0,ct.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const m=c.create(e);return new Do(Gh(m.injector.get(Xm,void 0,p.XFs.Self|p.XFs.Optional)).map(sp),m)}),Xo(c=>{throw t._loader$=void 0,c}));return t._loader$=new $_.c(u,()=>new vi.xQ).pipe((0,Fh.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,In.D)(this.loader.load(e)):qr(e()).pipe((0,jn.zg)(t=>t instanceof p.YKP?(0,ot.of)(t):(0,In.D)(this.compiler.compileModuleAsync(t))))}}class oR{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new rc,this.attachRef=null}}class rc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const o=this.getOrCreateContext(e);o.outlet=t,this.contexts.set(e,o)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new oR,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Ha{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ty(i){throw i}function ny(i,e,t){return e.parse("/")}function ry(i,e){return(0,ot.of)(null)}const aR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ci=(()=>{class i{constructor(t,o,u,c,m,_,w,S){this.rootComponentType=t,this.urlSerializer=o,this.rootContexts=u,this.location=c,this.config=S,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new vi.xQ,this.errorHandler=ty,this.malformedUriErrorHandler=ny,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ry,afterPreactivation:ry},this.urlHandlingStrategy=new Ha,this.routeReuseStrategy=new g0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=m.get(p.h0i),this.console=m.get(p.c2e);const L=m.get(p.R0b);this.isNgZoneEnabled=L instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(S),this.currentUrlTree=new Hn(new kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ey(_,w,j=>this.triggerEvent(new Rm(j)),j=>this.triggerEvent(new Bh(j))),this.routerState=jm(this.currentUrlTree,this.rootComponentType),this.transitions=new ti({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const o=this.events;return t.pipe(_i(u=>0!==u.id),(0,ct.U)(u=>Object.assign(Object.assign({},u),{extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),Pn(u=>{let c=!1,m=!1;return(0,ot.of)(u).pipe((0,or.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pn(_=>{const w=!this.navigated||_.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return(0,ot.of)(_).pipe(Pn(x=>{const O=this.transitions.getValue();return o.next(new Vh(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),O!==this.transitions.getValue()?bo.E:Promise.resolve(x)}),function(i,e,t,o){return Pn(u=>function(i,e,t,o,u){return new He(i,e,t,o,u).apply()}(i,e,t,u.extractedUrl,o).pipe((0,ct.U)(c=>Object.assign(Object.assign({},u),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,or.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(i,e,t,o,u){return(0,jn.zg)(c=>function(i,e,t,o,u="emptyOnly",c="legacy"){try{const m=new aw(i,e,t,o,u,c).recognize();return null===m?So(new YI):(0,ot.of)(m)}catch(m){return So(m)}}(i,e,c.urlAfterRedirects,t(c.urlAfterRedirects),o,u).pipe((0,ct.U)(m=>Object.assign(Object.assign({},c),{targetSnapshot:m}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,or.b)(x=>{"eager"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(x.urlAfterRedirects,x),this.browserUrlTree=x.urlAfterRedirects);const O=new wd(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);o.next(O)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:L,source:j,restoredState:q,extras:X}=_,de=new Vh(O,this.serializeUrl(L),j,q);o.next(de);const Ee=jm(L,this.rootComponentType).snapshot;return(0,ot.of)(Object.assign(Object.assign({},_),{targetSnapshot:Ee,urlAfterRedirects:L,extras:Object.assign(Object.assign({},X),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),bo.E}),h0(_=>{const{targetSnapshot:w,id:S,extractedUrl:x,rawUrl:O,extras:{skipLocationChange:L,replaceUrl:j}}=_;return this.hooks.beforePreactivation(w,{navigationId:S,appliedUrlTree:x,rawUrlTree:O,skipLocationChange:!!L,replaceUrl:!!j})}),(0,or.b)(_=>{const w=new es(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),(0,ct.U)(_=>Object.assign(Object.assign({},_),{guards:Ru(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(i,e){return(0,jn.zg)(t=>{const{targetSnapshot:o,currentSnapshot:u,guards:{canActivateChecks:c,canDeactivateChecks:m}}=t;return 0===m.length&&0===c.length?(0,ot.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(i,e,t,o){return(0,In.D)(i).pipe((0,jn.zg)(u=>function(i,e,t,o,u){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,ot.of)(!0);const m=c.map(_=>{const w=Ks(_,e,u);let S;if(function(i){return i&&ts(i.canDeactivate)}(w))S=qr(w.canDeactivate(i,e,t,o));else{if(!ts(w))throw new Error("Invalid CanDeactivate guard");S=qr(w(i,e,t,o))}return S.pipe(rr())});return(0,ot.of)(m).pipe(Mu())}(u.component,u.route,t,e,o)),rr(u=>!0!==u,!0))}(m,o,u,i).pipe((0,jn.zg)(_=>_&&function(i){return"boolean"==typeof i}(_)?function(i,e,t,o){return(0,In.D)(e).pipe(To(u=>wu(function(i,e){return null!==i&&e&&e(new Z_(i)),(0,ot.of)(!0)}(u.route.parent,o),function(i,e){return null!==i&&e&&e(new Nm(i)),(0,ot.of)(!0)}(u.route,o),function(i,e,t){const o=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(m=>function(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(m)).filter(m=>null!==m).map(m=>Oa(()=>{const _=m.guards.map(w=>{const S=Ks(w,m.node,t);let x;if(function(i){return i&&ts(i.canActivateChild)}(S))x=qr(S.canActivateChild(o,i));else{if(!ts(S))throw new Error("Invalid CanActivateChild guard");x=qr(S(o,i))}return x.pipe(rr())});return(0,ot.of)(_).pipe(Mu())}));return(0,ot.of)(c).pipe(Mu())}(i,u.path,t),function(i,e,t){const o=e.routeConfig?e.routeConfig.canActivate:null;if(!o||0===o.length)return(0,ot.of)(!0);const u=o.map(c=>Oa(()=>{const m=Ks(c,e,t);let _;if(function(i){return i&&ts(i.canActivate)}(m))_=qr(m.canActivate(e,i));else{if(!ts(m))throw new Error("Invalid CanActivate guard");_=qr(m(e,i))}return _.pipe(rr())}));return(0,ot.of)(u).pipe(Mu())}(i,u.route,t))),rr(u=>!0!==u,!0))}(o,c,i,e):(0,ot.of)(_)),(0,ct.U)(_=>Object.assign(Object.assign({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,or.b)(_=>{if(ns(_.guardsResult)){const S=ni(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw S.url=_.guardsResult,S}const w=new Gs(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(w)}),_i(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),h0(_=>{if(_.guards.canActivateChecks.length)return(0,ot.of)(_).pipe((0,or.b)(w=>{const S=new xm(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(S)}),Pn(w=>{let S=!1;return(0,ot.of)(w).pipe(function(i,e){return(0,jn.zg)(t=>{const{targetSnapshot:o,guards:{canActivateChecks:u}}=t;if(!u.length)return(0,ot.of)(t);let c=0;return(0,In.D)(u).pipe(To(m=>function(i,e,t,o){return function(i,e,t,o){const u=Object.keys(i);if(0===u.length)return(0,ot.of)({});const c={};return(0,In.D)(u).pipe((0,jn.zg)(m=>function(i,e,t,o){const u=Ks(i,e,o);return qr(u.resolve?u.resolve(e,t):u(e,t))}(i[m],e,t,o).pipe((0,or.b)(_=>{c[m]=_}))),ir(1),(0,jn.zg)(()=>Object.keys(c).length===u.length?(0,ot.of)(c):bo.E))}(i._resolve,i,e,o).pipe((0,ct.U)(c=>(i._resolvedData=c,i.data=Object.assign(Object.assign({},i.data),Kh(i,t).resolve),null)))}(m.route,o,i,e)),(0,or.b)(()=>c++),ir(1),(0,jn.zg)(m=>c===u.length?(0,ot.of)(t):bo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,or.b)({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,or.b)(w=>{const S=new K_(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(S)}))}),h0(_=>{const{targetSnapshot:w,id:S,extractedUrl:x,rawUrl:O,extras:{skipLocationChange:L,replaceUrl:j}}=_;return this.hooks.afterPreactivation(w,{navigationId:S,appliedUrlTree:x,rawUrlTree:O,skipLocationChange:!!L,replaceUrl:!!j})}),(0,ct.U)(_=>{const w=function(i,e,t){const o=Pd(i,e._root,t?t._root:void 0);return new Bm(o,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:w})}),(0,or.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((i,e,t)=>(0,ct.U)(o=>(new Ua(e,o.targetRouterState,o.currentRouterState,t).activate(i),o)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,or.b)({next(){c=!0},complete(){c=!0}}),function(i){return e=>e.lift(new Lh(i))}(()=>{if(!c&&!m){const _=`Navigation ID ${u.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(u),this.cancelNavigationTransition(u,_)):this.cancelNavigationTransition(u,_)}this.currentNavigation=null}),Xo(_=>{if(m=!0,function(i){return i&&i[Pa]}(_)){const w=ns(_.url);w||(this.navigated=!0,this.restoreHistory(u,!0));const S=new Mm(u.id,this.serializeUrl(u.extractedUrl),_.message);o.next(S),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree);this.scheduleNavigation(x,"imperative",null,{skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{this.restoreHistory(u,!0);const w=new Uh(u.id,this.serializeUrl(u.extractedUrl),_);o.next(w);try{u.resolve(this.errorHandler(_))}catch(S){u.reject(S)}}return bo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const o=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,o)&&setTimeout(()=>{const{source:u,state:c,urlTree:m}=o,_={replaceUrl:!0};if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(_.state=w)}this.scheduleNavigation(m,u,c,_)},0),this.lastLocationChangeInfo=o}))}extractLocationChangeInfoFromEvent(t){var o;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,o){if(!t)return!0;const u=o.urlTree.toString()===t.urlTree.toString();return o.transitionId!==t.transitionId||!u||!("hashchange"===o.source&&"popstate"===t.source||"popstate"===o.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ld(t),this.config=t.map(sp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,o={}){const{relativeTo:u,queryParams:c,fragment:m,queryParamsHandling:_,preserveFragment:w}=o,S=u||this.routerState.root,x=w?this.currentUrlTree.fragment:m;let O=null;switch(_){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=c||null}return null!==O&&(O=this.removeEmptyProps(O)),function(i,e,t,o,u){if(0===t.length)return ep(e.root,e.root,e,o,u);const c=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new np(!0,0,i);let e=0,t=!1;const o=i.reduce((u,c,m)=>{if("object"==typeof c&&null!=c){if(c.outlets){const _={};return _r(c.outlets,(w,S)=>{_[S]="string"==typeof w?w.split("/"):w}),[...u,{outlets:_}]}if(c.segmentPath)return[...u,c.segmentPath]}return"string"!=typeof c?[...u,c]:0===m?(c.split("/").forEach((_,w)=>{0==w&&"."===_||(0==w&&""===_?t=!0:".."===_?e++:""!=_&&u.push(_))}),u):[...u,c]},[]);return new np(t,e,o)}(t);if(c.toRoot())return ep(e.root,new kt([],{}),e,o,u);const m=function(i,e,t){if(i.isAbsolute)return new kd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new kd(c,c===e.root,0)}const o=Cr(i.commands[0])?0:1;return function(i,e,t){let o=i,u=e,c=t;for(;c>u;){if(c-=u,o=o.parent,!o)throw new Error("Invalid number of '../'");u=o.segments.length}return new kd(o,!1,u-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+o,i.numberOfDoubleDots)}(c,e,i),_=m.processChildren?bi(m.segmentGroup,m.index,c.commands):Va(m.segmentGroup,m.index,c.commands);return ep(m.segmentGroup,_,e,o,u)}(S,this.currentUrlTree,t,O,null!=x?x:null)}navigateByUrl(t,o={skipLocationChange:!1}){const u=ns(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,o)}navigate(t,o={skipLocationChange:!1}){return function(i){for(let e=0;e<i.length;e++){const t=i[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,o),o)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let o;try{o=this.urlSerializer.parse(t)}catch(u){o=this.malformedUriErrorHandler(u,this.urlSerializer,t)}return o}isActive(t,o){let u;if(u=!0===o?Object.assign({},aR):!1===o?Object.assign({},eA):o,ns(t))return t0(this.currentUrlTree,t,u);const c=this.parseUrl(t);return t0(this.currentUrlTree,c,u)}removeEmptyProps(t){return Object.keys(t).reduce((o,u)=>{const c=t[u];return null!=c&&(o[u]=c),o},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Du(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,o,u,c,m){var _,w;if(this.disposed)return Promise.resolve(!1);const S=this.getTransition(),x="imperative"!==o&&"imperative"===(null==S?void 0:S.source),j=(this.lastSuccessfulId===S.id||this.currentNavigation?S.rawUrl:S.urlAfterRedirects).toString()===t.toString();if(x&&j)return Promise.resolve(!0);let q,X,de;m?(q=m.resolve,X=m.reject,de=m.promise):de=new Promise((Ve,Ze)=>{q=Ve,X=Ze});const Ee=++this.navigationId;let Re;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),Re=u&&u.\u0275routerPageId?u.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Re=0,this.setTransition({id:Ee,targetPageId:Re,source:o,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:q,reject:X,promise:de,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),de.catch(Ve=>Promise.reject(Ve))}setBrowserUrl(t,o){const u=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(u)||o.extras.replaceUrl?this.location.replaceState(u,"",c):this.location.go(u,"",c)}restoreHistory(t,o=!1){var u,c;if("computed"===this.canceledNavigationResolution){const m=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)||0===m?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===m&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(m)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,o){const u=new Mm(t.id,this.serializeUrl(t.extractedUrl),o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,o){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:o}:{navigationId:t}}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(p.DyG),p.LFG(Id),p.LFG(rc),p.LFG(Be),p.LFG(p.zs3),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(void 0))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),lp=(()=>{class i{constructor(t,o,u){this.router=t,this.route=o,this.locationStrategy=u,this.commands=[],this.onChanges=new vi.xQ,this.subscription=t.events.subscribe(c=>{c instanceof Du&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,o,u,c,m){if(0!==t||o||u||c||m||"string"==typeof this.target&&"_self"!=this.target)return!0;const _={skipLocationChange:ic(this.skipLocationChange),replaceUrl:ic(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ic(this.preserveFragment)})}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(Ci),p.Y36(zs),p.Y36(qe))},i.\u0275dir=p.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,o){1&t&&p.NdJ("click",function(c){return o.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&(p.Ikx("href",o.href,p.LSH),p.uIk("target",o.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[p.TTD]}),i})();function ic(i){return""===i||!!i}let cp=(()=>{class i{constructor(t,o,u,c,m){this.parentContexts=t,this.location=o,this.resolver=u,this.changeDetector=m,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.name=c||Ht,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,o){this.activated=t,this._activatedRoute=o,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const m=(o=o||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,w=new lR(t,_,this.location.injector);this.activated=this.location.createComponent(m,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(rc),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},i.\u0275dir=p.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class lR{constructor(e,t,o){this.route=e,this.childContexts=t,this.parent=o}get(e,t){return e===zs?this.route:e===rc?this.childContexts:this.parent.get(e,t)}}class nA{}class rA{preload(e,t){return(0,ot.of)(null)}}let iA=(()=>{class i{constructor(t,o,u,c,m){this.router=t,this.injector=c,this.preloadingStrategy=m,this.loader=new ey(o,u,S=>t.triggerEvent(new Rm(S)),S=>t.triggerEvent(new Bh(S)))}setUpPreloading(){this.subscription=this.router.events.pipe(_i(t=>t instanceof Du),To(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,o){const u=[];for(const c of o)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const m=c._loadedConfig;u.push(this.processRoutes(m.module,m.routes))}else c.loadChildren&&!c.canLoad?u.push(this.preloadConfig(t,c)):c.children&&u.push(this.processRoutes(t,c.children));return(0,In.D)(u).pipe((0,wo.J)(),(0,ct.U)(c=>{}))}preloadConfig(t,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?(0,ot.of)(o._loadedConfig):this.loader.load(t.injector,o)).pipe((0,jn.zg)(c=>(o._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Ci),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(nA))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),mw=(()=>{class i{constructor(t,o,u={}){this.router=t,this.viewportScroller=o,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Du&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,o){this.router.triggerEvent(new Hh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Ci),p.LFG(hn),p.LFG(void 0))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();const Ud=new p.OlP("ROUTER_CONFIGURATION"),oA=new p.OlP("ROUTER_FORROOT_GUARD"),fR=[Be,{provide:Id,useClass:Jl},{provide:Ci,useFactory:function(i,e,t,o,u,c,m,_={},w,S){const x=new Ci(null,i,e,t,o,u,c,Gh(m));return w&&(x.urlHandlingStrategy=w),S&&(x.routeReuseStrategy=S),function(i,e){i.errorHandler&&(e.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(e.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(e.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(e.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(e.urlUpdateStrategy=i.urlUpdateStrategy)}(_,x),_.enableTracing&&x.events.subscribe(O=>{var L,j;null===(L=console.group)||void 0===L||L.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(j=console.groupEnd)||void 0===j||j.call(console)}),x},deps:[Id,rc,Be,p.zs3,p.v3s,p.Sil,Xm,Ud,[class{},new p.FiY],[class{},new p.FiY]]},rc,{provide:zs,useFactory:function(i){return i.routerState.root},deps:[Ci]},{provide:p.v3s,useClass:p.EAV},iA,rA,class{preload(e,t){return t().pipe(Xo(()=>(0,ot.of)(null)))}},{provide:Ud,useValue:{enableTracing:!1}}];function Nu(){return new p.PXZ("Router",Ci)}let iy=(()=>{class i{constructor(t,o){}static forRoot(t,o){return{ngModule:i,providers:[fR,v0(t),{provide:oA,useFactory:y0,deps:[[Ci,new p.FiY,new p.tp0]]},{provide:Ud,useValue:o||{}},{provide:qe,useFactory:yw,deps:[ce,[new p.tBr(Fe),new p.FiY],Ud]},{provide:mw,useFactory:sA,deps:[Ci,hn,Ud]},{provide:nA,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:rA},{provide:p.PXZ,multi:!0,useFactory:Nu},[oy,{provide:p.ip1,multi:!0,useFactory:uA,deps:[oy]},{provide:sy,useFactory:hR,deps:[oy]},{provide:p.tb,multi:!0,useExisting:sy}]]}}static forChild(t){return{ngModule:i,providers:[v0(t)]}}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(oA,8),p.LFG(Ci,8))},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({}),i})();function sA(i,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new mw(i,e,t)}function yw(i,e,t={}){return t.useHash?new gt(i,e):new $e(i,e)}function y0(i){return"guarded"}function v0(i){return[{provide:p.deG,multi:!0,useValue:i},{provide:Xm,multi:!0,useValue:i}]}let oy=(()=>{class i{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new vi.xQ}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const u=new Promise(_=>o=_),c=this.injector.get(Ci),m=this.injector.get(Ud);return"disabled"===m.initialNavigation?(c.setUpLocationChangeListener(),o(!0)):"enabled"===m.initialNavigation||"enabledBlocking"===m.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,ot.of)(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),c.initialNavigation()):o(!0),u})}bootstrapListener(t){const o=this.injector.get(Ud),u=this.injector.get(iA),c=this.injector.get(mw),m=this.injector.get(Ci),_=this.injector.get(p.z2F);t===_.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&m.initialNavigation(),u.setUpPreloading(),c.init(),m.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(p.zs3))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();function uA(i){return i.appInitializer.bind(i)}function hR(i){return i.bootstrapListener.bind(i)}const sy=new p.OlP("Router Initializer");var dA=$(1555);function Pu(i,e){return new Nr.y(t=>{const o=i.length;if(0===o)return void t.complete();const u=new Array(o);let c=0,m=0;for(let _=0;_<o;_++){const w=(0,In.D)(i[_]);let S=!1;t.add(w.subscribe({next:x=>{S||(S=!0,m++),u[_]=x},error:x=>t.error(x),complete:()=>{c++,(c===o||!S)&&(m===o&&t.next(e?e.reduce((x,O,L)=>(x[O]=u[L],x),{}):u),t.complete())}}))}})}let oc=(()=>{class i{constructor(t,o){this._renderer=t,this._elementRef=o,this.onChange=u=>{},this.onTouched=()=>{}}setProperty(t,o){this._renderer.setProperty(this._elementRef.nativeElement,t,o)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(p.Qsj),p.Y36(p.SBq))},i.\u0275dir=p.lG2({type:i}),i})(),Ga=(()=>{class i extends oc{}return i.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(i)))(o||i)}}(),i.\u0275dir=p.lG2({type:i,features:[p.qOj]}),i})();const oi=new p.OlP("NgValueAccessor"),fA={provide:oi,useExisting:(0,p.Gpc)(()=>Fu),multi:!0},bw=new p.OlP("CompositionEventMode");let Fu=(()=>{class i extends oc{constructor(t,o,u){super(t,o),this._compositionMode=u,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=P()?P().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(bw,8))},i.\u0275dir=p.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,o){1&t&&p.NdJ("input",function(c){return o._handleInput(c.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(c){return o._compositionEnd(c.target.value)})},features:[p._Bn([fA]),p.qOj]}),i})();function Zs(i){return null==i||0===i.length}function b0(i){return null!=i&&"number"==typeof i.length}const Er=new p.OlP("NgValidators"),ku=new p.OlP("NgAsyncValidators"),Cw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wn{static min(e){return function(i){return e=>{if(Zs(e.value)||Zs(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}(e)}static max(e){return function(i){return e=>{if(Zs(e.value)||Zs(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}(e)}static required(e){return Ew(e)}static requiredTrue(e){return function(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function(i){return Zs(i.value)||Cw.test(i.value)?null:{email:!0}}(e)}static minLength(e){return Tw(e)}static maxLength(e){return function(i){return e=>b0(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(i){if(!i)return Lu;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),o=>{if(Zs(o.value))return null;const u=o.value;return e.test(u)?null:{pattern:{requiredPattern:t,actualValue:u}}}}(e)}static nullValidator(e){return null}static compose(e){return D0(e)}static composeAsync(e){return Sw(e)}}function Ew(i){return Zs(i.value)?{required:!0}:null}function Tw(i){return e=>Zs(e.value)||!b0(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function Lu(i){return null}function hA(i){return null!=i}function pA(i){const e=(0,p.QGY)(i)?(0,In.D)(i):i;return(0,p.CqO)(e),e}function T0(i){let e={};return i.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function gA(i,e){return e.map(t=>t(i))}function ay(i){return i.map(e=>function(i){return!i.validate}(e)?e:t=>e.validate(t))}function D0(i){if(!i)return null;const e=i.filter(hA);return 0==e.length?null:function(t){return T0(gA(t,e))}}function S0(i){return null!=i?D0(ay(i)):null}function Sw(i){if(!i)return null;const e=i.filter(hA);return 0==e.length?null:function(t){return function(...i){if(1===i.length){const e=i[0];if((0,Eu.k)(e))return Pu(e,null);if((0,dA.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Pu(t.map(o=>e[o]),t)}}if("function"==typeof i[i.length-1]){const e=i.pop();return Pu(i=1===i.length&&(0,Eu.k)(i[0])?i[0]:i,null).pipe((0,ct.U)(t=>e(...t)))}return Pu(i,null)}(gA(t,e).map(pA)).pipe((0,ct.U)(T0))}}function I0(i){return null!=i?Sw(ay(i)):null}function A0(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Iw(i){return i._rawValidators}function M0(i){return i._rawAsyncValidators}function x0(i){return i?Array.isArray(i)?i:[i]:[]}function uy(i,e){return Array.isArray(i)?i.includes(e):i===e}function R0(i,e){const t=x0(e);return x0(i).forEach(u=>{uy(t,u)||t.push(u)}),t}function N0(i,e){return x0(e).filter(t=>!uy(i,t))}let Aw=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=S0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=I0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,o){return!!this.control&&this.control.hasError(t,o)}getError(t,o){return this.control?this.control.getError(t,o):null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=p.lG2({type:i}),i})(),Fn=(()=>{class i extends Aw{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(i)))(o||i)}}(),i.\u0275dir=p.lG2({type:i,features:[p.qOj]}),i})();class Js extends Aw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Mw{constructor(e){this._cd=e}is(e){var t,o,u;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(u=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===u?void 0:u[e])}}let fp=(()=>{class i extends Mw{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(Js,2))},i.\u0275dir=p.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,o){2&t&&p.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[p.qOj]}),i})(),ly=(()=>{class i extends Mw{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(Fn,10))},i.\u0275dir=p.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,o){2&t&&p.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))("ng-submitted",o.is("submitted"))},features:[p.qOj]}),i})();function hp(i,e){P0(i,e),e.valueAccessor.writeValue(i.value),function(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&Rw(i,e)})}(i,e),function(i,e){const t=(o,u)=>{e.valueAccessor.writeValue(o),u&&e.viewToModelUpdate(o)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&Rw(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function(i,e){if(e.valueAccessor.setDisabledState){const t=o=>{e.valueAccessor.setDisabledState(o)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function cy(i,e,t=!0){const o=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(o),e.valueAccessor.registerOnTouched(o)),jd(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function ac(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function P0(i,e){const t=Iw(i);null!==e.validator?i.setValidators(A0(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const o=M0(i);null!==e.asyncValidator?i.setAsyncValidators(A0(o,e.asyncValidator)):"function"==typeof o&&i.setAsyncValidators([o]);const u=()=>i.updateValueAndValidity();ac(e._rawValidators,u),ac(e._rawAsyncValidators,u)}function jd(i,e){let t=!1;if(null!==i){if(null!==e.validator){const u=Iw(i);if(Array.isArray(u)&&u.length>0){const c=u.filter(m=>m!==e.validator);c.length!==u.length&&(t=!0,i.setValidators(c))}}if(null!==e.asyncValidator){const u=M0(i);if(Array.isArray(u)&&u.length>0){const c=u.filter(m=>m!==e.asyncValidator);c.length!==u.length&&(t=!0,i.setAsyncValidators(c))}}}const o=()=>{};return ac(e._rawValidators,o),ac(e._rawAsyncValidators,o),t}function Rw(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Ao(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}const pp="VALID",py="INVALID",gp="PENDING",Xs="DISABLED";function uc(i){return(my(i)?i.validators:i)||null}function Hd(i){return Array.isArray(i)?S0(i):i||null}function V0(i,e){return(my(e)?e.asyncValidators:i)||null}function gy(i){return Array.isArray(i)?I0(i):i||null}function my(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class U0{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Hd(this._rawValidators),this._composedAsyncValidatorFn=gy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pp}get invalid(){return this.status===py}get pending(){return this.status==gp}get disabled(){return this.status===Xs}get enabled(){return this.status!==Xs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Hd(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=gy(e)}addValidators(e){this.setValidators(R0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(R0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(N0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(N0(e,this._rawAsyncValidators))}hasValidator(e){return uy(this._rawValidators,e)}hasAsyncValidator(e){return uy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gp,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xs,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pp,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pp||this.status===gp)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xs:pp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gp,this._hasOwnPendingAsyncValidator=!0;const t=pA(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(i,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let o=i;return e.forEach(u=>{o=o instanceof mp?o.controls.hasOwnProperty(u)?o.controls[u]:null:o instanceof yp&&o.at(u)||null}),o}(this,e)}getError(e,t){const o=t?this.get(t):this;return o&&o.errors?o.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Xs:this.errors?py:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gp)?gp:this._anyControlsHaveStatus(py)?py:pp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){my(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class qa extends U0{constructor(e=null,t,o){super(uc(t),V0(o,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ao(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ao(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class mp extends U0{constructor(e,t,o){super(uc(t),V0(o,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,o={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((o,u)=>{o.reset(e[u],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,o)=>(e[o]=t instanceof qa?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,o)=>!!o._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const o=this.controls[t];o&&e(o,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const o=this.controls[t];if(this.contains(t)&&e(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,o)=>((t.enabled||this.disabled)&&(e[o]=t.value),e))}_reduceChildren(e,t){let o=e;return this._forEachChild((u,c)=>{o=t(o,u,c)}),o}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,o)=>{if(void 0===e[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class yp extends U0{constructor(e,t,o){super(uc(t),V0(o,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,o={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((o,u)=>{this._throwIfControlMissing(u),this.at(u).setValue(o,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((o,u)=>{this.at(u)&&this.at(u).patchValue(o,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((o,u)=>{o.reset(e[u],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof qa?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,o)=>!!o._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,o)=>{e(t,o)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,o)=>{if(void 0===e[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let j0=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=p.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),wA=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({}),i})();const q0=new p.OlP("NgModelWithFormControlWarning"),Vw={provide:Fn,useExisting:(0,p.Gpc)(()=>cc)};let cc=(()=>{class i extends Fn{constructor(t,o){super(),this.validators=t,this.asyncValidators=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(o)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const o=this.form.get(t.path);return hp(o,t),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),o}getControl(t){return this.form.get(t.path)}removeControl(t){cy(t.control||null,t,!1),Ao(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,o){this.form.get(t.path).setValue(o)}onSubmit(t){return this.submitted=!0,function(i,e){i._syncPendingControls(),e.forEach(t=>{const o=t.control;"submit"===o.updateOn&&o._pendingChange&&(t.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const o=t.control,u=this.form.get(t.path);o!==u&&(cy(o||null,t),u instanceof qa&&(hp(u,t),t.control=u))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const o=this.form.get(t.path);(function(i,e){P0(i,e)})(o,t),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const o=this.form.get(t.path);o&&function(i,e){return jd(i,e)}(o,t)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){P0(this.form,this),this._oldForm&&jd(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(Er,10),p.Y36(ku,10))},i.\u0275dir=p.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,o){1&t&&p.NdJ("submit",function(c){return o.onSubmit(c)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Vw]),p.qOj,p.TTD]}),i})();const Bw={provide:Js,useExisting:(0,p.Gpc)(()=>qd)};let qd=(()=>{class i extends Js{constructor(t,o,u,c,m){super(),this._ngModelWarningConfig=m,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(o),this._setAsyncValidators(u),this.valueAccessor=function(i,e){if(!e)return null;let t,o,u;return Array.isArray(e),e.forEach(c=>{c.constructor===Fu?t=c:function(i){return Object.getPrototypeOf(i.constructor)===Ga}(c)?o=c:u=c}),u||o||t||null}(0,c)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(i,e){return[...e.path,i]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(Fn,13),p.Y36(Er,10),p.Y36(ku,10),p.Y36(oi,10),p.Y36(q0,8))},i.\u0275dir=p.lG2({type:i,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([Bw]),p.qOj,p.TTD]}),i._ngModelWarningSentOnce=!1,i})();const jw={provide:oi,useExisting:(0,p.Gpc)(()=>_y),multi:!0};function z0(i,e){return null==i?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${i}: ${e}`.slice(0,50))}let _y=(()=>{class i extends Ga{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=this._getOptionId(t);null==o&&this.setProperty("selectedIndex",-1);const u=z0(o,t);this.setProperty("value",u)}registerOnChange(t){this.onChange=o=>{this.value=this._getOptionValue(o),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o),t))return o;return null}_getOptionValue(t){const o=function(i){return i.split(":")[0]}(t);return this._optionMap.has(o)?this._optionMap.get(o):t}}return i.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(i)))(o||i)}}(),i.\u0275dir=p.lG2({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,o){1&t&&p.NdJ("change",function(c){return o.onChange(c.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([jw]),p.qOj]}),i})(),Hw=(()=>{class i{constructor(t,o,u){this._element=t,this._renderer=o,this._select=u,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(z0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(_y,9))},i.\u0275dir=p.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const AA={provide:oi,useExisting:(0,p.Gpc)(()=>Q0),multi:!0};function Y0(i,e){return null==i?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${i}: ${e}`.slice(0,50))}let Q0=(()=>{class i extends Ga{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let o;if(this.value=t,Array.isArray(t)){const u=t.map(c=>this._getOptionId(c));o=(c,m)=>{c._setSelected(u.indexOf(m.toString())>-1)}}else o=(u,c)=>{u._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(t){this.onChange=o=>{const u=[];if(void 0!==o.selectedOptions){const c=o.selectedOptions;for(let m=0;m<c.length;m++){const _=c.item(m),w=this._getOptionValue(_.value);u.push(w)}}else{const c=o.options;for(let m=0;m<c.length;m++){const _=c.item(m);if(_.selected){const w=this._getOptionValue(_.value);u.push(w)}}}this.value=u,t(u)}}_registerOption(t){const o=(this._idCounter++).toString();return this._optionMap.set(o,t),o}_getOptionId(t){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o)._value,t))return o;return null}_getOptionValue(t){const o=function(i){return i.split(":")[0]}(t);return this._optionMap.has(o)?this._optionMap.get(o)._value:t}}return i.\u0275fac=function(){let e;return function(o){return(e||(e=p.n5z(i)))(o||i)}}(),i.\u0275dir=p.lG2({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,o){1&t&&p.NdJ("change",function(c){return o.onChange(c.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([AA]),p.qOj]}),i})(),Gw=(()=>{class i{constructor(t,o,u){this._element=t,this._renderer=o,this._select=u,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Y0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Y0(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Q0,9))},i.\u0275dir=p.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const CR={provide:Er,useExisting:(0,p.Gpc)(()=>vp),multi:!0};let vp=(()=>{class i{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Ew(t):null}registerOnValidatorChange(t){this._onChange=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=p.lG2({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,o){2&t&&p.uIk("required",o.required?"":null)},inputs:{required:"required"},features:[p._Bn([CR])]}),i})();const Ww={provide:Er,useExisting:(0,p.Gpc)(()=>by),multi:!0};let by=(()=>{class i{constructor(){this._validator=Lu}ngOnChanges(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this.enabled()?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=this.enabled()?Tw(function(i){return"number"==typeof i?i:parseInt(i,10)}(this.minlength)):Lu}enabled(){return null!=this.minlength}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=p.lG2({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,o){2&t&&p.uIk("minlength",o.enabled()?o.minlength:null)},inputs:{minlength:"minlength"},features:[p._Bn([Ww]),p.TTD]}),i})(),Qw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[wA]]}),i})(),FA=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[Qw]}),i})(),Kw=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:q0,useValue:t.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[Qw]}),i})(),X0=(()=>{class i{group(t,o=null){const u=this._reduceControls(t);let _,c=null,m=null;return null!=o&&(function(i){return void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn}(o)?(c=null!=o.validators?o.validators:null,m=null!=o.asyncValidators?o.asyncValidators:null,_=null!=o.updateOn?o.updateOn:void 0):(c=null!=o.validator?o.validator:null,m=null!=o.asyncValidator?o.asyncValidator:null)),new mp(u,{asyncValidators:m,updateOn:_,validators:c})}control(t,o,u){return new qa(t,o,u)}array(t,o,u){const c=t.map(m=>this._createControl(m));return new yp(c,o,u)}_reduceControls(t){const o={};return Object.keys(t).forEach(u=>{o[u]=this._createControl(t[u])}),o}_createControl(t){return t instanceof qa||t instanceof mp||t instanceof yp?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=(0,p.Yz7)({factory:function(){return new i},token:i,providedIn:Kw}),i})();function $d(i,e){1&i&&(p.TgZ(0,"div",17),p._uU(1," Email Address is not registered. "),p.qZA())}function Zw(i,e){1&i&&p._UZ(0,"i",20)}function os(i,e){1&i&&p._UZ(0,"i",21)}function _p(i,e){if(1&i&&(p.TgZ(0,"div"),p.YNc(1,Zw,1,0,"i",18),p.YNc(2,os,1,0,"i",19),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.fp.errors.required),p.xp6(1),p.Q6J("ngIf",t.fp.errors.email)}}let LA=(()=>{class i{constructor(t,o){this.fb=t,this.auth=o,this.form2=this.fb.group({fpassword:["",[wn.required,wn.email]]})}ngOnInit(){}get fp(){return this.form2.get("fpassword")}forgotPassword(){this.auth.sendPasswordResetEmail(this.form2.get("fpassword").value).then(t=>{console.log("success"),this.form2.setErrors({notfound:!1})},t=>{console.log(t.code),"auth/user-not-found"===t.code&&this.form2.setErrors({notfound:!0})})}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(X0),p.Y36(js))},i.\u0275cmp=p.Xpm({type:i,selectors:[["app-forgotpassword-page"]],decls:26,vars:4,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"forgotpassword"],["class","alert alert-danger",4,"ngIf"],["action","",3,"formGroup"],[1,"error"],["type","email","placeholder","Email Address","required","","formControlName","fpassword"],[4,"ngIf"],[3,"disabled","click"],[1,"special"],["routerLink","/","href",""],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"alert","alert-danger"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Please enter your email address.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Formatting of email address is invalid.",4,"ngIf"],["id","tooltip","data-tooltip","Please enter your email address.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","Formatting of email address is invalid.",1,"fas","fa-exclamation-triangle"]],template:function(t,o){1&t&&(p._UZ(0,"link",0),p._UZ(1,"link",1),p._UZ(2,"link",2),p.TgZ(3,"body"),p.TgZ(4,"div",3),p.TgZ(5,"div",4),p._UZ(6,"img",5),p.TgZ(7,"h1"),p._uU(8," UMP Supply Chain "),p._UZ(9,"br"),p._uU(10," Management System "),p.qZA(),p.qZA(),p.TgZ(11,"div",6),p.TgZ(12,"h3"),p._uU(13,"Forgot Password?"),p.qZA(),p.YNc(14,$d,2,0,"div",7),p.TgZ(15,"form",8),p.TgZ(16,"div",9),p._UZ(17,"input",10),p.YNc(18,_p,3,2,"div",11),p.qZA(),p.TgZ(19,"button",12),p.NdJ("click",function(){return o.forgotPassword()}),p._uU(20," Reset Password "),p.qZA(),p.TgZ(21,"div",13),p.TgZ(22,"a",14),p._uU(23,"Back to Login?"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.O4$(),p.TgZ(24,"svg",15),p._UZ(25,"path",16),p.qZA(),p.qZA()),2&t&&(p.xp6(14),p.Q6J("ngIf",1==(null==o.form2.errors?null:o.form2.errors.notfound)),p.xp6(1),p.Q6J("formGroup",o.form2),p.xp6(3),p.Q6J("ngIf",o.fp.touched&&o.fp.invalid),p.xp6(1),p.Q6J("disabled",o.form2.invalid))},directives:[$t,j0,ly,cc,Fu,vp,fp,qd,lp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.forgotpassword[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;position:relative;margin-left:4.8rem}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 25px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:2rem;top:-2rem;left:-2.5rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999}.login[_ngcontent-%COMP%]{margin-top:10px}.title[_ngcontent-%COMP%]{margin-top:100px}.special[_ngcontent-%COMP%]{margin-left:1rem}}']}),i})();function VA(i,e){1&i&&(p.TgZ(0,"div",22),p._uU(1," Please verify your email address. "),p.qZA())}function tb(i,e){1&i&&(p.TgZ(0,"div",22),p._uU(1," Your password is invalid. "),p.qZA())}function ea(i,e){1&i&&(p.TgZ(0,"div",22),p._uU(1," Your email address is not registered. "),p.qZA())}function bp(i,e){1&i&&p._UZ(0,"i",25)}function si(i,e){1&i&&p._UZ(0,"i",26)}function fc(i,e){if(1&i&&(p.TgZ(0,"div"),p.YNc(1,bp,1,0,"i",23),p.YNc(2,si,1,0,"i",24),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.emailaddress.errors.required),p.xp6(1),p.Q6J("ngIf",t.emailaddress.errors.email)}}function Ey(i,e){1&i&&p._UZ(0,"i",28)}function Mo(i,e){if(1&i&&(p.TgZ(0,"div",9),p.YNc(1,Ey,1,0,"i",27),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.getpassword.errors.required)}}const nb=function(i,e){return{"fa-eye":i,"fa-eye-slash":e}};let Wd=(()=>{class i{constructor(t,o){this.fAuth=t,this.fb=o,this.email="",this.password="",this.errMessage="",this.visibility=!0,this.form=o.group({email:["",[wn.required,wn.email]],password:["",[wn.required]]})}ngOnInit(){}onVisible(){this.visibility=!this.visibility}login(){console.log(this.form),this.fAuth.signInWithEmailAndPassword(this.form.value.email,this.form.value.password).then(t=>{var o;console.log(t),(null===(o=t.user)||void 0===o?void 0:o.emailVerified)||this.form.setErrors({emailVerify:!0,wrongpassword:!1,notregister:!1})}).catch(t=>{"auth/wrong-password"===t.code&&this.form.setErrors({wrongpassword:!0,notregister:!1}),"auth/user-not-found"===t.code&&this.form.setErrors({notregister:!0,wrongpassword:!1})})}get emailaddress(){return this.form.get("email")}get getpassword(){return this.form.get("password")}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(js),p.Y36(X0))},i.\u0275cmp=p.Xpm({type:i,selectors:[["app-home-page"]],decls:34,vars:13,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"login"],[3,"formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"error"],["type","email","name","email","formControlName","email","placeholder","Email Address","required","",1,"icon-email",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"visible"],["name","password","placeholder","Password","formControlName","password","required","",1,"icon-password",3,"type"],[1,"far",3,"ngClass","click"],["class","error",4,"ngIf"],[1,"special"],["routerLink","/register",1,"new-user"],["routerLink","/forgotpassword",1,"forgot-password"],[3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"alert","alert-danger"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip"," Email Address is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","  Formatting of Email Address\n            is incorrect.",4,"ngIf"],["id","tooltip","data-tooltip"," Email Address is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","  Formatting of Email Address\n            is incorrect.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Password is required.",4,"ngIf"],["id","tooltip2","data-tooltip"," Password is required.",1,"fas","fa-exclamation-triangle"]],template:function(t,o){1&t&&(p._UZ(0,"link",0),p._UZ(1,"link",1),p._UZ(2,"link",2),p.TgZ(3,"body"),p.TgZ(4,"div",3),p.TgZ(5,"div",4),p._UZ(6,"img",5),p.TgZ(7,"h1"),p._uU(8," UMP Supply Chain "),p._UZ(9,"br"),p._uU(10," Management System "),p.qZA(),p.qZA(),p.TgZ(11,"div",6),p.TgZ(12,"h3"),p._uU(13,"User Login"),p.qZA(),p.TgZ(14,"form",7),p.YNc(15,VA,2,0,"div",8),p.YNc(16,tb,2,0,"div",8),p.YNc(17,ea,2,0,"div",8),p.TgZ(18,"div",9),p.TgZ(19,"input",10),p.NdJ("ngModelChange",function(c){return o.email=c}),p.qZA(),p.YNc(20,fc,3,2,"div",11),p.qZA(),p.TgZ(21,"div",12),p._UZ(22,"input",13),p.TgZ(23,"i",14),p.NdJ("click",function(){return o.onVisible()}),p.qZA(),p.qZA(),p.YNc(24,Mo,2,1,"div",15),p.TgZ(25,"div",16),p.TgZ(26,"a",17),p._uU(27,"New User? Create one!"),p.qZA(),p.TgZ(28,"a",18),p._uU(29,"Forgot Password?"),p.qZA(),p.qZA(),p.TgZ(30,"button",19),p.NdJ("click",function(){return o.login()}),p._uU(31,"Login"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.O4$(),p.TgZ(32,"svg",20),p._UZ(33,"path",21),p.qZA(),p.qZA()),2&t&&(p.xp6(14),p.Q6J("formGroup",o.form),p.xp6(1),p.Q6J("ngIf",1==(null==o.form.errors?null:o.form.errors.emailVerify)),p.xp6(1),p.Q6J("ngIf",1==(null==o.form.errors?null:o.form.errors.wrongpassword)),p.xp6(1),p.Q6J("ngIf",1==(null==o.form.errors?null:o.form.errors.notregister)),p.xp6(2),p.Q6J("ngModel",o.email),p.xp6(1),p.Q6J("ngIf",o.emailaddress.invalid&&o.emailaddress.touched),p.xp6(2),p.Q6J("type",o.visibility?"password":"text"),p.xp6(1),p.Q6J("ngClass",p.WLB(10,nb,!o.visibility,o.visibility)),p.xp6(1),p.Q6J("ngIf",o.getpassword.touched&&o.getpassword.invalid),p.xp6(6),p.Q6J("disabled",o.form.invalid))},directives:[j0,ly,cc,$t,Fu,fp,qd,vp,Ds,lp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.login[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;margin-left:10%;position:relative}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px auto}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.visible[_ngcontent-%COMP%]{position:relative}.far.fa-eye[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.far.fa-eye-slash[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 25px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}p[_ngcontent-%COMP%]{font-size:12px;height:1px;margin-top:-10px;color:red}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:red;transition:.3s all ease-in-out}#tooltip2[_ngcontent-%COMP%]{position:absolute;right:1.4rem;margin-right:10px;bottom:1.2rem;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}#tooltip2[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:1rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999}.login[_ngcontent-%COMP%]{margin-top:10px}.title[_ngcontent-%COMP%]{margin-top:100px}}']}),i})();class zd{constructor(){}static passwordVerification(e){let t=e.get("rpassword"),o=e.get("rconfirmpassword");return(null==t?void 0:t.value)!==(null==o?void 0:o.value)?{passwordVerification:!0}:null}}function Uu(){return i=>i.lift(new Yd)}class Yd{call(e,t){return t.subscribe(new Qd(e))}}class Qd extends Gr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Kd=$(9759),B=$(4762),Jt=$(4685),xo=$(300),wy=function(i,e){return(wy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(t[u]=o[u])})(i,e)};function rb(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],o=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Je,Xw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ty=Ty||{},Mt=Xw||self;function Cp(){}function Dy(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ep(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ib="closure_uid_"+(1e9*Math.random()>>>0),tT=0;function nT(i,e,t){return i.call.apply(i.bind,arguments)}function UA(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function ai(i,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nT:UA).apply(null,arguments)}function Sy(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Pr(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,c){for(var m=Array(arguments.length-2),_=2;_<arguments.length;_++)m[_-2]=arguments[_];return e.prototype[u].apply(o,m)}}function Bu(){this.s=this.s,this.o=this.o}var BA={};Bu.prototype.s=!1,Bu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,ib)&&i[ib]||(i[ib]=++tT)}(this);delete BA[i]}},Bu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var iT=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(var t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},jA=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){for(var o=i.length,u="string"==typeof i?i.split(""):i,c=0;c<o;c++)c in u&&e.call(t,u[c],c,i)};function ob(i){return Array.prototype.concat.apply([],arguments)}function oT(i){var e=i.length;if(0<e){for(var t=Array(e),o=0;o<e;o++)t[o]=i[o];return t}return[]}function sb(i){return/^[\s\xa0]*$/.test(i)}var wi,GA=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ei(i,e){return-1!=i.indexOf(e)}function sT(i,e){return i<e?-1:i>e?1:0}e:{var aT=Mt.navigator;if(aT){var Iy=aT.userAgent;if(Iy){wi=Iy;break e}}wi=""}function wp(i,e,t){for(var o in i)e.call(t,i[o],o,i)}function uT(i){var e={};for(var t in i)e[t]=i[t];return e}var qA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $A(i,e){for(var t,o,u=1;u<arguments.length;u++){for(t in o=arguments[u])i[t]=o[t];for(var c=0;c<qA.length;c++)t=qA[c],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function lT(i){return lT[" "](i),i}lT[" "]=Cp;var Dp,i,cT=Ei(wi,"Opera"),Tp=Ei(wi,"Trident")||Ei(wi,"MSIE"),dT=Ei(wi,"Edge"),ju=dT||Tp,fT=Ei(wi,"Gecko")&&!(Ei(wi.toLowerCase(),"webkit")&&!Ei(wi,"Edge"))&&!(Ei(wi,"Trident")||Ei(wi,"MSIE"))&&!Ei(wi,"Edge"),hT=Ei(wi.toLowerCase(),"webkit")&&!Ei(wi,"Edge");function pT(){var i=Mt.document;return i?i.documentMode:void 0}e:{var Zd="",ab=(i=wi,fT?/rv:([^\);]+)(\)|;)/.exec(i):dT?/Edge\/([\d\.]+)/.exec(i):Tp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):hT?/WebKit\/(\S+)/.exec(i):cT?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(ab&&(Zd=ab?ab[1]:""),Tp){var Ay=pT();if(null!=Ay&&Ay>parseFloat(Zd)){Dp=String(Ay);break e}}Dp=Zd}var zA={};function YA(){return e=zA,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var i=0,e=GA(String(Dp)).split("."),t=GA("9").split("."),o=Math.max(e.length,t.length),u=0;0==i&&u<o;u++){var c=e[u]||"",m=t[u]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==c[0].length&&0==m[0].length)break;i=sT(0==c[1].length?0:parseInt(c[1],10),0==m[1].length?0:parseInt(m[1],10))||sT(0==c[2].length,0==m[2].length)||sT(c[2],m[2]),c=c[3],m=m[3]}while(0==i)}return 0<=i}();var e}var QA=Mt.document&&Tp&&(pT()||parseInt(Dp,10))||void 0,mT=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Mt.addEventListener("test",Cp,e),Mt.removeEventListener("test",Cp,e)}catch(t){}return i}();function ui(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Jd(i,e){if(ui.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(fT){e:{try{lT(e.nodeName);var u=!0;break e}catch(c){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:yT[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Jd.Z.h.call(this)}}ui.prototype.h=function(){this.defaultPrevented=!0},Pr(Jd,ui);var yT={2:"touch",3:"pen",4:"mouse"};Jd.prototype.h=function(){Jd.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var hc="closure_listenable_"+(1e6*Math.random()|0),DR=0;function lb(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++DR,this.ca=this.fa=!1}function My(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function cb(i){this.src=i,this.g={},this.h=0}function pc(i,e){var t=e.type;if(t in i.g){var c,o=i.g[t],u=iT(o,e);(c=0<=u)&&Array.prototype.splice.call(o,u,1),c&&(My(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function db(i,e,t,o){for(var u=0;u<i.length;++u){var c=i[u];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==o)return u}return-1}cb.prototype.add=function(i,e,t,o,u){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var m=db(i,e,o,u);return-1<m?(e=i[m],t||(e.fa=!1)):((e=new lb(e,this.src,c,!!o,u)).fa=t,i.push(e)),e};var Sp="closure_lm_"+(1e6*Math.random()|0),Ip={};function vT(i,e,t,o,u){if(o&&o.once)return hb(i,e,t,o,u);if(Array.isArray(e)){for(var c=0;c<e.length;c++)vT(i,e[c],t,o,u);return null}return t=Ap(t),i&&i[hc]?i.N(e,t,Ep(o)?!!o.capture:!!o,u):xy(i,e,t,!1,o,u)}function xy(i,e,t,o,u,c){if(!e)throw Error("Invalid event type");var m=Ep(u)?!!u.capture:!!u,_=mb(i);if(_||(i[Sp]=_=new cb(i)),(t=_.add(e,t,o,m,c)).proxy)return t;if(o=function(){var e=gb;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)mT||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Ry(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function hb(i,e,t,o,u){if(Array.isArray(e)){for(var c=0;c<e.length;c++)hb(i,e[c],t,o,u);return null}return t=Ap(t),i&&i[hc]?i.O(e,t,Ep(o)?!!o.capture:!!o,u):xy(i,e,t,!0,o,u)}function KA(i,e,t,o,u){if(Array.isArray(e))for(var c=0;c<e.length;c++)KA(i,e[c],t,o,u);else o=Ep(o)?!!o.capture:!!o,t=Ap(t),i&&i[hc]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=db(c=i.g[e],t,o,u))&&(My(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=mb(i))&&(e=i.g[e.toString()],i=-1,e&&(i=db(e,t,o,u)),(t=-1<i?e[i]:null)&&pb(t))}function pb(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[hc])pc(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Ry(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=mb(e))?(pc(t,i),0==t.h&&(t.src=null,e[Sp]=null)):My(i)}}}function Ry(i){return i in Ip?Ip[i]:Ip[i]="on"+i}function gb(i,e){if(i.ca)i=!0;else{e=new Jd(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&pb(i),i=t.call(o,e)}return i}function mb(i){return(i=i[Sp])instanceof cb?i:null}var Ny="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ap(i){return"function"==typeof i?i:(i[Ny]||(i[Ny]=function(e){return i.handleEvent(e)}),i[Ny])}function wr(){Bu.call(this),this.i=new cb(this),this.P=this,this.I=null}function Tr(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new ui(e,i);else if(e instanceof ui)e.target=e.target||i;else{var u=e;$A(e=new ui(o,i),u)}if(u=!0,t)for(var c=t.length-1;0<=c;c--){var m=e.g=t[c];u=Xd(m,o,!0,e)&&u}if(u=Xd(m=e.g=i,o,!0,e)&&u,u=Xd(m,o,!1,e)&&u,t)for(c=0;c<t.length;c++)u=Xd(m=e.g=t[c],o,!1,e)&&u}function Xd(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,c=0;c<e.length;++c){var m=e[c];if(m&&!m.ca&&m.capture==t){var _=m.listener,w=m.ia||m.src;m.fa&&pc(i.i,m),u=!1!==_.call(w,o)&&u}}return u&&!o.defaultPrevented}Pr(wr,Bu),wr.prototype[hc]=!0,wr.prototype.removeEventListener=function(i,e,t,o){KA(this,i,e,t,o)},wr.prototype.M=function(){if(wr.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)My(t[o]);delete i.g[e],i.h--}}this.I=null},wr.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},wr.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Oy=Mt.JSON.stringify;function ZA(){var i=ky,e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Py,_T=function(){function i(){this.h=this.g=null}return i.prototype.add=function(e,t){var o=yb.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o},i}(),yb=new(function(){function i(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return i.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},i}())(function(){return new vb},function(i){return i.reset()}),vb=function(){function i(){this.next=this.g=this.h=null}return i.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},i.prototype.reset=function(){this.next=this.g=this.h=null},i}();function bT(i){Mt.setTimeout(function(){throw i},0)}function _b(i,e){Py||function(){var i=Mt.Promise.resolve(void 0);Py=function(){i.then(ET)}}(),Fy||(Py(),Fy=!0),ky.add(i,e)}var Fy=!1,ky=new _T;function ET(){for(var i;i=ZA();){try{i.h.call(i.g)}catch(t){bT(t)}var e=yb;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Fy=!1}function Mp(i,e){wr.call(this),this.h=i||1,this.g=e||Mt,this.j=ai(this.kb,this),this.l=Date.now()}function Ly(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Vy(i,e,t){if("function"==typeof i)t&&(i=ai(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=ai(i.handleEvent,i)}return 2147483647<Number(e)?-1:Mt.setTimeout(i,e||0)}function bb(i){i.g=Vy(function(){i.g=null,i.i&&(i.i=!1,bb(i))},i.j);var e=i.h;i.h=null,i.m.apply(null,e)}Pr(Mp,wr),(Je=Mp.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Tr(this,"tick"),this.da&&(Ly(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){Mp.Z.M.call(this),Ly(this),delete this.g};var wT=function(i){function e(t,o){var u=i.call(this)||this;return u.m=t,u.j=o,u.h=null,u.i=!1,u.g=null,u}return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}wy(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:bb(this)},e.prototype.M=function(){i.prototype.M.call(this),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Bu);function ef(i){Bu.call(this),this.h=i,this.g={}}Pr(ef,Bu);var Cb=[];function JA(i,e,t,o){Array.isArray(t)||(t&&(Cb[0]=t.toString()),t=Cb);for(var u=0;u<t.length;u++){var c=vT(e,t[u],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function TT(i){wp(i.g,function(e,t){this.g.hasOwnProperty(t)&&pb(e)},i),i.g={}}function Uy(){this.g=!0}function kn(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var c=u[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var m=1;m<u.length;m++)u[m]=""}}}return Oy(t)}catch(_){return e}}(i,t)+(o?" "+o:"")})}ef.prototype.M=function(){ef.Z.M.call(this),TT(this)},ef.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Uy.prototype.Aa=function(){this.g=!1},Uy.prototype.info=function(){};var gc={},Eb=null;function By(){return Eb=Eb||new wr}function wb(i){ui.call(this,gc.Ma,i)}function tf(i){var e=By();Tr(e,new wb(e,i))}function mc(i,e){ui.call(this,gc.STAT_EVENT,i),this.stat=e}function Ti(i){var e=By();Tr(e,new mc(e,i))}function IT(i,e){ui.call(this,gc.Na,i),this.size=e}function nf(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){i()},e)}gc.Ma="serverreachability",Pr(wb,ui),gc.STAT_EVENT="statevent",Pr(mc,ui),gc.Na="timingevent",Pr(IT,ui);var jy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Tb={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function AT(){}function Hy(){}AT.prototype.h=null;var Ro,Gi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sb(){ui.call(this,"d")}function Ib(){ui.call(this,"c")}function qi(){}function Di(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new ef(this),this.P=MT,this.W=new Mp(i=ju?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ab}function Ab(){this.i=null,this.g="",this.h=!1}Pr(Sb,ui),Pr(Ib,ui),Pr(qi,AT),qi.prototype.g=function(){return new XMLHttpRequest},qi.prototype.i=function(){return{}},Ro=new qi;var MT=45e3,Mb={},Gy={};function xb(i,e,t){i.K=1,i.v=Wy(na(e)),i.s=t,i.U=!0,xT(i,null)}function xT(i,e){i.F=Date.now(),of(i),i.A=na(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),VT(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Ab,i.g=Yb(i.l,t?e:null,!i.s),0<i.O&&(i.L=new wT(ai(i.Ia,i,i.g),i.O)),JA(i.V,i.g,"readystatechange",i.gb),e=i.H?uT(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),tf(1),function(i,e,t,o,u,c){i.info(function(){if(i.g)if(c)for(var m="",_=c.split("&"),w=0;w<_.length;w++){var S=_[w].split("=");if(1<S.length){var x=S[0];S=S[1];var O=x.split("_");m=2<=O.length&&"type"==O[1]?m+(x+"=")+S+"&":m+(x+"=redacted&")}}else m=null;else m=c;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.X,i.s)}function qy(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function rf(i,e,t){for(var u,o=!0;!i.I&&i.C<t.length;){if((u=t1(i,t))==Gy){4==e&&(i.o=4,Ti(14),o=!1),kn(i.j,i.m,null,"[Incomplete Response]");break}if(u==Mb){i.o=4,Ti(15),kn(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}kn(i.j,i.m,u,null),Rb(i,u)}qy(i)&&u!=Gy&&u!=Mb&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ti(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),bc(e),e.L=!0,Ti(11))):(kn(i.j,i.m,t,"[Invalid Chunked Response]"),ta(i),sf(i))}function t1(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Gy:(t=Number(e.substring(t,o)),isNaN(t)?Mb:(o+=1)+t>e.length?Gy:(e=e.substr(o,t),i.C=o+t,e))}function of(i){i.Y=Date.now()+i.P,RT(i,i.P)}function RT(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=nf(ai(i.eb,i),e)}function xp(i){i.B&&(Mt.clearTimeout(i.B),i.B=null)}function sf(i){0==i.l.G||i.I||QT(i.l,i)}function ta(i){xp(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ly(i.W),TT(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Rb(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||zy(t.i,i)))if(t.I=i.N,!i.J&&zy(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(de){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=nf(ai(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;iv(t),Wu(t)}_c(t),Ti(18)}if(1>=Fb(t.i)&&t.ka){try{t.ka()}catch(de){}t.ka=void 0}}else zu(t,11)}else if((i.J||t.g==i)&&iv(t),!sb(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){var c=u[e];if(t.U=c[0],c=c[1],2==t.G)if("c"==c[0]){t.J=c[1],t.la=c[2];var m=c[3];null!=m&&(t.ma=m,t.h.info("VER="+t.ma));var _=c[4];null!=_&&(t.za=_,t.h.info("SVER="+t.za));var w=c[5];null!=w&&"number"==typeof w&&0<w&&(t.K=o=1.5*w,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;var S=i.g;if(S){var x=S.g?S.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(x){var O=o.i;!O.g&&(Ei(x,"spdy")||Ei(x,"quic")||Ei(x,"h2"))&&(O.j=O.l,O.g=new Set,O.h&&(Yy(O,O.h),O.h=null))}if(o.D){var L=S.g?S.g.getResponseHeader("X-HTTP-Session-Id"):null;L&&(o.sa=L,Ln(o.F,o.D,L))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var j=i;if((o=t).oa=KT(o,o.H?o.la:null,o.W),j.J){Qy(o.i,j);var q=j,X=o.K;X&&q.setTimeout(X),q.B&&(xp(q),of(q)),o.g=j}else zT(o);0<t.l.length&&nv(t)}else"stop"!=c[0]&&"close"!=c[0]||zu(t,7);else 3==t.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?zu(t,7):Hb(t):"noop"!=c[0]&&t.j&&t.j.wa(c),t.A=0)}tf(4)}catch(de){}}function $y(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Dy(i)||"string"==typeof i)jA(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Dy(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;u=(o=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Dy(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i)).length;for(var c=0;c<u;c++)e.call(void 0,o[c],t&&t[c],i)}}function Hu(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Hu)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function af(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Gu(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)Gu(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function Gu(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Je=Di.prototype).setTimeout=function(i){this.P=i},Je.gb=function(i){i=i.target;var e=this.L;e&&3==ra(i)?e.l():this.Ia(i)},Je.Ia=function(i){try{if(i==this.g)e:{var e=ra(this.g),t=this.g.Da(),o=this.g.ba();if(!(3>e)&&(3!=e||ju||this.g&&(this.h.h||this.g.ga()||jb(this.g)))){this.I||4!=e||7==t||tf(8==t||0>=o?3:2),xp(this);var u=this.g.ba();this.N=u;t:if(qy(this)){var c=jb(this.g);i="";var m=c.length,_=4==ra(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ta(this),sf(this);var w="";break t}this.h.i=new Mt.TextDecoder}for(t=0;t<m;t++)this.h.h=!0,i+=this.h.i.decode(c[t],{stream:_&&t==m-1});c.splice(0,m),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.ga();if(this.i=200==u,function(i,e,t,o,u,c,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+c+" "+m})}(this.j,this.u,this.A,this.m,this.X,e,u),this.i){if(this.$&&!this.J){t:{if(this.g){var S,x=this.g;if((S=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sb(S)){var O=S;break t}}O=null}if(!(u=O)){this.i=!1,this.o=3,Ti(12),ta(this),sf(this);break e}kn(this.j,this.m,u,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rb(this,u)}this.U?(rf(this,e,w),ju&&this.i&&3==e&&(JA(this.V,this.W,"tick",this.fb),this.W.start())):(kn(this.j,this.m,w,null),Rb(this,w)),4==e&&ta(this),this.i&&!this.I&&(4==e?QT(this.l,this):(this.i=!1,of(this)))}else 400==u&&0<w.indexOf("Unknown SID")?(this.o=3,Ti(12)):(this.o=0,Ti(13)),ta(this),sf(this)}}}catch(L){}},Je.fb=function(){if(this.g){var i=ra(this.g),e=this.g.ga();this.C<e.length&&(xp(this),rf(this,i,e),this.i&&4!=i&&of(this))}},Je.cancel=function(){this.I=!0,ta(this)},Je.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(tf(3),Ti(17)),ta(this),this.o=2,sf(this)):RT(this,this.Y-i)},(Je=Hu.prototype).R=function(){af(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Je.T=function(){return af(this),this.g.concat()},Je.get=function(i,e){return Gu(this.h,i)?this.h[i]:e},Je.set=function(i,e){Gu(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Je.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],c=this.get(u);i.call(e,c,u,this)}};var Nb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qu(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof qu){this.g=void 0!==e?e:i.g,Rp(this,i.j),this.s=i.s,Np(this,i.i),Op(this,i.m),this.l=i.l,e=i.h;var t=new kp;t.i=e.i,e.g&&(t.g=new Hu(e.g),t.h=e.h),PT(this,t),this.o=i.o}else i&&(t=String(i).match(Nb))?(this.g=!!e,Rp(this,t[1]||"",!0),this.s=Pp(t[2]||""),Np(this,t[3]||"",!0),Op(this,t[4]),this.l=Pp(t[5]||"",!0),PT(this,t[6]||"",!0),this.o=Pp(t[7]||"")):(this.g=!!e,this.h=new kp(null,this.g))}function na(i){return new qu(i)}function Rp(i,e,t){i.j=t?Pp(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Np(i,e,t){i.i=t?Pp(e,!0):e}function Op(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function PT(i,e,t){e instanceof kp?(i.h=e,function(i,e){e&&!i.j&&($u(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(kT(this,o),VT(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Fp(e,a1)),i.h=new kp(e,i.g))}function Ln(i,e,t){i.h.set(e,t)}function Wy(i){return Ln(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Pp(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Fp(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,i1),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function i1(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}qu.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Fp(e,FT,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Fp(e,FT,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Fp(t,"/"==t.charAt(0)?s1:o1,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Fp(t,u1)),i.join("")};var FT=/[#\/\?@]/g,o1=/[#\?:]/g,s1=/[#\?]/g,a1=/[#\?@]/g,u1=/#/g;function kp(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function $u(i){i.g||(i.g=new Hu,i.h=0,i.i&&function(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var c=i[t].substring(0,o);u=i[t].substring(o+1)}else c=i[t];e(c,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kT(i,e){$u(i),e=yc(i,e),Gu(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Gu((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&af(i)))}function LT(i,e){return $u(i),e=yc(i,e),Gu(i.g.h,e)}function VT(i,e,t){kT(i,e),0<t.length&&(i.i=null,i.g.set(yc(i,e),oT(t)),i.h+=t.length)}function yc(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(Je=kp.prototype).add=function(i,e){$u(this),this.i=null,i=yc(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(i,e){$u(this),this.g.forEach(function(t,o){jA(t,function(u){i.call(e,u,o,this)},this)},this)},Je.T=function(){$u(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],c=0;c<u.length;c++)t.push(e[o]);return t},Je.R=function(i){$u(this);var e=[];if("string"==typeof i)LT(this,i)&&(e=ob(e,this.g.get(yc(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=ob(e,i[t])}return e},Je.set=function(i,e){return $u(this),this.i=null,LT(this,i=yc(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Je.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var c=0;c<o.length;c++){var m=u;""!==o[c]&&(m+="="+encodeURIComponent(String(o[c]))),i.push(m)}}return this.i=i.join("&")};var BT=function(e,t){this.h=e,this.g=t};function Ob(i){this.l=i||jT,i=Mt.PerformanceNavigationTiming?0<(i=Mt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var jT=10;function Pb(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Fb(i){return i.h?1:i.g?i.g.size:0}function zy(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Yy(i,e){i.g?i.g.add(e):i.h=e}function Qy(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function kb(i){var e,t;if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var o=i.i;try{for(var u=rb(i.g.values()),c=u.next();!c.done;c=u.next())o=o.concat(c.value.D)}catch(_){e={error:_}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}return o}return oT(i.i)}function Wa(){}function l1(){this.g=new Wa}function c1(i,e,t){var o=t||"";try{$y(i,function(u,c){var m=u;Ep(u)&&(m=Oy(u)),e.push(o+c+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Lb(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(c){}}function vc(i){this.l=i.$b||null,this.j=i.ib||!1}function Vb(i,e){wr.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Ky,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ob.prototype.cancel=function(){var i,e;if(this.i=kb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var t=rb(this.g.values()),o=t.next();!o.done;o=t.next())o.value.cancel()}catch(c){i={error:c}}finally{try{o&&!o.done&&(e=t.return)&&e.call(t)}finally{if(i)throw i.error}}this.g.clear()}},Wa.prototype.stringify=function(i){return Mt.JSON.stringify(i,void 0)},Wa.prototype.parse=function(i){return Mt.JSON.parse(i,void 0)},Pr(vc,AT),vc.prototype.g=function(){return new Vb(this.l,this.j)},vc.prototype.i=function(i){return function(){return i}}({}),Pr(Vb,wr);var Ky=0;function Ub(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Zy(i){i.readyState=4,i.l=null,i.j=null,i.A=null,dt(i)}function dt(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Je=Vb.prototype).open=function(i,e){if(this.readyState!=Ky)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,dt(this)},Je.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zy(this)),this.readyState=Ky},Je.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,dt(this)),this.g&&(this.readyState=3,dt(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ub(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Zy(this):dt(this),3==this.readyState&&Ub(this)}},Je.Ua=function(i){this.g&&(this.response=this.responseText=i,Zy(this))},Je.Ta=function(i){this.g&&(this.response=i,Zy(this))},Je.ha=function(){this.g&&Zy(this)},Je.setRequestHeader=function(i,e){this.v.append(i,e)},Je.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],e=this.h.entries(),t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Vb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var d1=Mt.JSON.parse;function lr(i){wr.call(this),this.headers=new Hu,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=HT,this.K=this.L=!1}Pr(lr,wr);var HT="",Jy=/^https?$/i,f1=["POST","PUT"];function ev(i){return"content-type"==i.toLowerCase()}function Gn(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,h1(i),lf(i)}function h1(i){i.D||(i.D=!0,Tr(i,"complete"),Tr(i,"error"))}function Bb(i){if(i.h&&void 0!==Ty&&(!i.C[1]||4!=ra(i)||2!=i.ba()))if(i.v&&4==ra(i))Vy(i.Fa,0,i);else if(Tr(i,"readystatechange"),4==ra(i)){i.h=!1;try{var o,e=i.ba();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}if(!(o=t)){var u;if(u=0===e){var c=String(i.H).match(Nb)[1]||null;if(!c&&Mt.self&&Mt.self.location){var m=Mt.self.location.protocol;c=m.substr(0,m.length-1)}u=!Jy.test(c?c.toLowerCase():"")}o=u}if(o)Tr(i,"complete"),Tr(i,"success");else{i.m=6;try{var _=2<ra(i)?i.g.statusText:""}catch(w){_=""}i.j=_+" ["+i.ba()+"]",h1(i)}}finally{lf(i)}}}function lf(i,e){if(i.g){GT(i);var t=i.g,o=i.C[0]?Cp:null;i.g=null,i.C=null,e||Tr(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function GT(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Mt.clearTimeout(i.A),i.A=null)}function ra(i){return i.g?i.g.readyState:0}function jb(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case HT:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tv(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function(i){var e="";return wp(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Ln(i,e,t))}function Lp(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function $T(i){this.za=0,this.l=[],this.h=new Uy,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Lp("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Lp("baseRetryDelayMs",5e3,i),this.$a=Lp("retryDelaySeedMs",1e4,i),this.Ya=Lp("forwardChannelMaxRetries",2,i),this.ra=Lp("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Ob(i&&i.concurrentRequestLimit),this.Ca=new l1,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Hb(i){if(WT(i),3==i.G){var e=i.V++,t=na(i.F);Ln(t,"SID",i.J),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),cf(i,t),(e=new Di(i,i.h,e,void 0)).K=2,e.v=Wy(na(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Yb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),of(e)}zb(i)}function Wu(i){i.g&&(bc(i),i.g.cancel(),i.g=null)}function WT(i){Wu(i),i.u&&(Mt.clearTimeout(i.u),i.u=null),iv(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Mt.clearTimeout(i.m),i.m=null)}function Gb(i,e){i.l.push(new BT(i.Za++,e)),3==i.G&&nv(i)}function nv(i){Pb(i.i)||i.m||(i.m=!0,_b(i.Ha,i),i.C=0)}function qb(i,e){var t;t=e?e.m:i.V++;var o=na(i.F);Ln(o,"SID",i.J),Ln(o,"RID",t),Ln(o,"AID",i.U),cf(i,o),i.o&&i.s&&tv(o,i.o,i.s),t=new Di(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=$b(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Yy(i.i,t),xb(t,o,e)}function cf(i,e){i.j&&$y({},function(t,o){Ln(e,o,t)})}function $b(i,e,t){t=Math.min(i.l.length,t);var o=i.j?ai(i.j.Oa,i.j,i):null;e:for(var u=i.l,c=-1;;){var m=["count="+t];-1==c?0<t?m.push("ofs="+(c=u[0].h)):c=0:m.push("ofs="+c);for(var _=!0,w=0;w<t;w++){var S=u[w].h,x=u[w].g;if(0>(S-=c))c=Math.max(0,u[w].h-100),_=!1;else try{c1(x,m,"req"+S+"_")}catch(O){o&&o(x)}}if(_){o=m.join("&");break e}}return i=i.l.splice(0,t),e.D=i,o}function zT(i){i.g||i.u||(i.Y=1,_b(i.Ga,i),i.A=0)}function _c(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=nf(ai(i.Ga,i),Wb(i,i.A)),i.A++,0))}function bc(i){null!=i.B&&(Mt.clearTimeout(i.B),i.B=null)}function YT(i){i.g=new Di(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=na(i.oa);Ln(e,"RID","rpc"),Ln(e,"SID",i.J),Ln(e,"CI",i.N?"0":"1"),Ln(e,"AID",i.U),cf(i,e),Ln(e,"TYPE","xmlhttp"),i.o&&i.s&&tv(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Wy(na(e)),t.s=null,t.U=!0,xT(t,i)}function iv(i){null!=i.v&&(Mt.clearTimeout(i.v),i.v=null)}function QT(i,e){var t=null;if(i.g==e){iv(i),bc(i),i.g=null;var o=2}else{if(!zy(i.i,e))return;t=e.D,Qy(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Tr(o=By(),new IT(o,t,e,u)),nv(i)}else zT(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function(i,e){return!(Fb(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=nf(ai(i.Ha,i,e),Wb(i,i.C)),i.C++,0)))}(i,e)||2==o&&_c(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:zu(i,5);break;case 4:zu(i,10);break;case 3:zu(i,6);break;default:zu(i,2)}}function Wb(i,e){var t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function zu(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=ai(i.jb,i);t||(t=new qu("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||Rp(t,"https"),Wy(t)),function(i,e){var t=new Uy;if(Mt.Image){var o=new Image;o.onload=Sy(Lb,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Sy(Lb,t,o,"TestLoadImage: error",!1,e),o.onabort=Sy(Lb,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Sy(Lb,t,o,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Ti(2);i.G=0,i.j&&i.j.va(e),zb(i),WT(i)}function zb(i){i.G=0,i.I=-1,i.j&&((0!=kb(i.i).length||0!=i.l.length)&&(i.i.i.length=0,oT(i.l),i.l.length=0),i.j.ua())}function KT(i,e,t){var o=function(i){return i instanceof qu?na(i):new qu(i,void 0)}(t);if(""!=o.i)e&&Np(o,e+"."+o.i),Op(o,o.m);else{var u=Mt.location;o=function(i,e,t,o){var u=new qu(null,void 0);return i&&Rp(u,i),e&&Np(u,e),t&&Op(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&wp(i.aa,function(c,m){Ln(o,m,c)}),t=i.sa,(e=i.D)&&t&&Ln(o,e,t),Ln(o,"VER",i.ma),cf(i,o),o}function Yb(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t&&i.Ba&&!i.qa?new vc({ib:!0}):i.qa)).L=i.H,e}function ZT(){}function ov(){if(Tp&&!(10<=Number(QA)))throw Error("Environmental error: no available transport.")}function No(i,e){wr.call(this),this.g=new $T(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!sb(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sb(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Vp(this)}function p1(i){Sb.call(this);var e=i.__sm__;if(e){e:{for(var t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function g1(){Ib.call(this),this.status=1}function Vp(i){this.g=i}(Je=lr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ro.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Ro),this.g.onreadystatechange=ai(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(c){return void Gn(this,c)}i=t||"";var u=new Hu(this.headers);o&&$y(o,function(c,m){u.set(m,c)}),o=function(i){e:{for(var e=ev,t=i.length,o="string"==typeof i?i.split(""):i,u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=Mt.FormData&&i instanceof Mt.FormData,!(0<=iT(f1,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(c,m){this.g.setRequestHeader(m,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{GT(this),0<this.B&&((this.K=function(i){return Tp&&YA()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.pa,this)):this.A=Vy(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){Gn(this,c)}},Je.pa=function(){void 0!==Ty&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tr(this,"timeout"),this.abort(8))},Je.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Tr(this,"complete"),Tr(this,"abort"),lf(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lf(this,!0)),lr.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?Bb(this):this.cb())},Je.cb=function(){Bb(this)},Je.ba=function(){try{return 2<ra(this)?this.g.status:-1}catch(i){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Je.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),d1(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=$T.prototype).ma=8,Je.G=1,Je.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Je.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var e=new Di(this,this.h,i,void 0),t=this.s;if(this.P&&(t?$A(t=uT(t),this.P):t=this.P),null===this.o&&(e.H=t),this.ja)e:{for(var o=0,u=0;u<this.l.length;u++){var c=this.l[u];if(void 0===(c="__data__"in c.g&&"string"==typeof(c=c.g.__data__)?c.length:void 0))break;if(4096<(o+=c)){o=u;break e}if(4096===o||u===this.l.length-1){o=u+1;break e}}o=1e3}else o=1e3;o=$b(this,e,o),Ln(u=na(this.F),"RID",i),Ln(u,"CVER",22),this.D&&Ln(u,"X-HTTP-Session-Id",this.D),cf(this,u),this.o&&t&&tv(u,this.o,t),Yy(this.i,e),this.Ra&&Ln(u,"TYPE","init"),this.ja?(Ln(u,"$req",o),Ln(u,"SID","null"),e.$=!0,xb(e,u,null)):xb(e,u,o),this.G=2}}else 3==this.G&&(i?qb(this,i):0==this.l.length||Pb(this.i)||qb(this))},Je.Ga=function(){if(this.u=null,YT(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=nf(ai(this.bb,this),i)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ti(10),Wu(this),YT(this))},Je.ab=function(){null!=this.v&&(this.v=null,Wu(this),_c(this),Ti(19))},Je.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Ti(2)):(this.h.info("Failed to ping google.com"),Ti(1))},(Je=ZT.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},ov.prototype.g=function(i,e){return new No(i,e)},Pr(No,wr),No.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),_b(ai(i.hb,i,e))),Ti(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=KT(i,null,i.W),nv(i)},No.prototype.close=function(){Hb(this.g)},No.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Gb(this.g,e)}else this.v?((e={}).__data__=Oy(i),Gb(this.g,e)):Gb(this.g,i)},No.prototype.M=function(){this.g.j=null,delete this.j,Hb(this.g),delete this.g,No.Z.M.call(this)},Pr(p1,Sb),Pr(g1,Ib),Pr(Vp,ZT),Vp.prototype.xa=function(){Tr(this.g,"a")},Vp.prototype.wa=function(i){Tr(this.g,new p1(i))},Vp.prototype.va=function(i){Tr(this.g,new g1(i))},Vp.prototype.ua=function(){Tr(this.g,"b")},ov.prototype.createWebChannel=ov.prototype.g,No.prototype.send=No.prototype.u,No.prototype.open=No.prototype.m,No.prototype.close=No.prototype.close,jy.NO_ERROR=0,jy.TIMEOUT=8,jy.HTTP_ERROR=6,Tb.COMPLETE="complete",Hy.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",wr.prototype.listen=wr.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var sv=jy,JT=Tb,Kb=gc,Cc_PROXY=10,Cc_NOPROXY=11,XT=vc,Bp=Hy,eD=lr,$i=function(){function i(e,t){var o=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(u){return o.t(u)},this.i=function(u){return t.writeSequenceNumber(u)})}return i.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},i.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},i}();$i.o=-1;var _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ne=function(i){function e(t,o){var u=this;return(u=i.call(this,o)||this).code=t,u.message=o,u.name="FirebaseError",u.toString=function(){return u.name+": [code="+u.code+"]: "+u.message},u}return(0,B.ZT)(e,i),e}(Error),li=new xo.Yd("@firebase/firestore");function Zb(){return li.logLevel}function Ue(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(li.logLevel<=xo.in.DEBUG){var o=e.map(Jb);li.debug.apply(li,(0,B.ev)(["Firestore (8.8.1): "+i],o))}}function cr(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(li.logLevel<=xo.in.ERROR){var o=e.map(Jb);li.error.apply(li,(0,B.ev)(["Firestore (8.8.1): "+i],o))}}function df(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(li.logLevel<=xo.in.WARN){var o=e.map(Jb);li.warn.apply(li,(0,B.ev)(["Firestore (8.8.1): "+i],o))}}function Jb(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function st(i){void 0===i&&(i="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+i;throw cr(e),new Error(e)}function bt(i,e){i||st()}function Ge(i,e){return i}function m1(i){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(var o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}var Xb=function(){function i(){}return i.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,o="";o.length<20;)for(var u=m1(40),c=0;c<u.length;++c)o.length<20&&u[c]<t&&(o+=e.charAt(u[c]%e.length));return o},i}();function Qt(i,e){return i<e?-1:i>e?1:0}function ff(i,e,t){return i.length===e.length&&i.every(function(o,u){return t(o,e[u])})}function tD(i){return i+"\0"}var Wi=function(){function i(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return i.now=function(){return i.fromMillis(Date.now())},i.fromDate=function(e){return i.fromMillis(e.getTime())},i.fromMillis=function(e){var t=Math.floor(e/1e3);return new i(t,Math.floor(1e6*(e-1e3*t)))},i.prototype.toDate=function(){return new Date(this.toMillis())},i.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},i.prototype._compareTo=function(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)},i.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},i.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},i.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},i.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},i}(),Bt=function(){function i(e){this.timestamp=e}return i.fromTimestamp=function(e){return new i(e)},i.min=function(){return new i(new Wi(0,0))},i.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},i.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},i.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},i.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},i.prototype.toTimestamp=function(){return this.timestamp},i}();function nD(i){var e=0;for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Yu(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function rD(i){for(var e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}var iD=function(){function i(e,t,o){void 0===t?t=0:t>e.length&&st(),void 0===o?o=e.length-t:o>e.length-t&&st(),this.segments=e,this.offset=t,this.len=o}return Object.defineProperty(i.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return 0===i.comparator(this,e)},i.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof i?e.forEach(function(o){t.push(o)}):t.push(e),this.construct(t)},i.prototype.limit=function(){return this.offset+this.length},i.prototype.popFirst=function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)},i.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},i.prototype.firstSegment=function(){return this.segments[this.offset]},i.prototype.lastSegment=function(){return this.get(this.length-1)},i.prototype.get=function(e){return this.segments[this.offset+e]},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},i.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},i.prototype.forEach=function(e){for(var t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])},i.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},i.comparator=function(e,t){for(var o=Math.min(e.length,t.length),u=0;u<o;u++){var c=e.get(u),m=t.get(u);if(c<m)return-1;if(c>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0},i}(),an=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,B.ZT)(e,i),e.prototype.construct=function(t,o,u){return new e(t,o,u)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var u=[],c=0,m=t;c<m.length;c++){var _=m[c];if(_.indexOf("//")>=0)throw new Ne(_e.INVALID_ARGUMENT,"Invalid segment ("+_+"). Paths must not contain // in them.");u.push.apply(u,_.split("/").filter(function(w){return w.length>0}))}return new e(u)},e.emptyPath=function(){return new e([])},e}(iD),y1=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ss=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,B.ZT)(e,i),e.prototype.construct=function(t,o,u){return new e(t,o,u)},e.isValidIdentifier=function(t){return y1.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var o=[],u="",c=0,m=function(){if(0===u.length)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");o.push(u),u=""},_=!1;c<t.length;){var w=t[c];if("\\"===w){if(c+1===t.length)throw new Ne(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var S=t[c+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new Ne(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);u+=S,c+=2}else"`"===w?(_=!_,c++):"."!==w||_?(u+=w,c++):(m(),c++)}if(m(),_)throw new Ne(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(o)},e.emptyPath=function(){return new e([])},e}(iD),hf=function(){function i(e){this.fields=e,e.sort(ss.comparator)}return i.prototype.covers=function(e){for(var t=0,o=this.fields;t<o.length;t++)if(o[t].isPrefixOf(e))return!0;return!1},i.prototype.isEqual=function(e){return ff(this.fields,e.fields,function(t,o){return t.isEqual(o)})},i}(),Si=function(){function i(e){this.binaryString=e}return i.fromBase64String=function(e){return new i(atob(e))},i.fromUint8Array=function(e){return new i(function(t){for(var o="",u=0;u<t.length;++u)o+=String.fromCharCode(t[u]);return o}(e))},i.prototype.toBase64=function(){return btoa(this.binaryString)},i.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)},i.prototype.approximateByteSize=function(){return 2*this.binaryString.length},i.prototype.compareTo=function(e){return Qt(this.binaryString,e.binaryString)},i.prototype.isEqual=function(e){return this.binaryString===e.binaryString},i}();Si.EMPTY_BYTE_STRING=new Si("");var v1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(i){if(bt(!!i),"string"==typeof i){var e=0,t=v1.exec(i);if(bt(!!t),t[1]){var o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}var u=new Date(i);return{seconds:Math.floor(u.getTime()/1e3),nanos:e}}return{seconds:sr(i.seconds),nanos:sr(i.nanos)}}function sr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function pf(i){return"string"==typeof i?Si.fromBase64String(i):Si.fromUint8Array(i)}function eC(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tC(i){var e=i.mapValue.fields.__previous_value__;return eC(e)?tC(e):e}function jp(i){var e=za(i.mapValue.fields.__local_write_time__.timestampValue);return new Wi(e.seconds,e.nanos)}function Ec(i){return null==i}function av(i){return 0===i&&1/i==-1/0}function uv(i){return"number"==typeof i&&Number.isInteger(i)&&!av(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var ut=function(){function i(e){this.path=e}return i.fromPath=function(e){return new i(an.fromString(e))},i.fromName=function(e){return new i(an.fromString(e).popFirst(5))},i.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},i.prototype.isEqual=function(e){return null!==e&&0===an.comparator(this.path,e.path)},i.prototype.toString=function(){return this.path.toString()},i.comparator=function(e,t){return an.comparator(e.path,t.path)},i.isDocumentKey=function(e){return e.length%2==0},i.fromSegments=function(e){return new i(new an(e.slice()))},i}();function Qu(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?eC(i)?4:10:st()}function Oo(i,e){var u,t=Qu(i);if(t!==Qu(e))return!1;switch(t){case 0:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return jp(i).isEqual(jp(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;var c=za(o.timestampValue),m=za(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,pf(i.bytesValue).isEqual(pf(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return sr(o.geoPointValue.latitude)===sr(u.geoPointValue.latitude)&&sr(o.geoPointValue.longitude)===sr(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return sr(o.integerValue)===sr(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){var c=sr(o.doubleValue),m=sr(u.doubleValue);return c===m?av(c)===av(m):isNaN(c)&&isNaN(m)}return!1}(i,e);case 9:return ff(i.arrayValue.values||[],e.arrayValue.values||[],Oo);case 10:return function(o,u){var c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(nD(c)!==nD(m))return!1;for(var _ in c)if(c.hasOwnProperty(_)&&(void 0===m[_]||!Oo(c[_],m[_])))return!1;return!0}(i,e);default:return st()}}function Hp(i,e){return void 0!==(i.values||[]).find(function(t){return Oo(t,e)})}function gf(i,e){var u,c,m,_,t=Qu(i),o=Qu(e);if(t!==o)return Qt(t,o);switch(t){case 0:return 0;case 1:return Qt(i.booleanValue,e.booleanValue);case 2:return c=e,(m=sr((u=i).integerValue||u.doubleValue))<(_=sr(c.integerValue||c.doubleValue))?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1;case 3:return lv(i.timestampValue,e.timestampValue);case 4:return lv(jp(i),jp(e));case 5:return Qt(i.stringValue,e.stringValue);case 6:return function(u,c){var m=pf(u),_=pf(c);return m.compareTo(_)}(i.bytesValue,e.bytesValue);case 7:return function(u,c){for(var m=u.split("/"),_=c.split("/"),w=0;w<m.length&&w<_.length;w++){var S=Qt(m[w],_[w]);if(0!==S)return S}return Qt(m.length,_.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,c){var m=Qt(sr(u.latitude),sr(c.latitude));return 0!==m?m:Qt(sr(u.longitude),sr(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,c){for(var m=u.values||[],_=c.values||[],w=0;w<m.length&&w<_.length;++w){var S=gf(m[w],_[w]);if(S)return S}return Qt(m.length,_.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,c){var m=u.fields||{},_=Object.keys(m),w=c.fields||{},S=Object.keys(w);_.sort(),S.sort();for(var x=0;x<_.length&&x<S.length;++x){var O=Qt(_[x],S[x]);if(0!==O)return O;var L=gf(m[_[x]],w[S[x]]);if(0!==L)return L}return Qt(_.length,S.length)}(i.mapValue,e.mapValue);default:throw st()}}function lv(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Qt(i,e);var t=za(i),o=za(e),u=Qt(t.seconds,o.seconds);return 0!==u?u:Qt(t.nanos,o.nanos)}function nC(i){return cv(i)}function cv(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(u=za(i.timestampValue)).seconds+","+u.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?pf(i.bytesValue).toBase64():"referenceValue"in i?ut.fromName(i.referenceValue).toString():"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(o){for(var u="[",c=!0,m=0,_=o.values||[];m<_.length;m++)c?c=!1:u+=",",u+=cv(_[m]);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){for(var u="{",c=!0,m=0,_=Object.keys(o.fields||{}).sort();m<_.length;m++){var w=_[m];c?c=!1:u+=",",u+=w+":"+cv(o.fields[w])}return u+"}"}(i.mapValue):st();var u,e}function dv(i,e){return{referenceValue:"projects/"+i.projectId+"/databases/"+i.database+"/documents/"+e.path.canonicalString()}}function fv(i){return!!i&&"integerValue"in i}function hv(i){return!!i&&"arrayValue"in i}function rC(i){return!!i&&"nullValue"in i}function _1(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function pv(i){return!!i&&"mapValue"in i}function as(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){var e={mapValue:{fields:{}}};return Yu(i.mapValue.fields,function(u,c){return e.mapValue.fields[u]=as(c)}),e}if(i.arrayValue){for(var t={arrayValue:{values:[]}},o=0;o<(i.arrayValue.values||[]).length;++o)t.arrayValue.values[o]=as(i.arrayValue.values[o]);return t}return Object.assign({},i)}var Po=function(){function i(e){this.value=e}return i.empty=function(){return new i({mapValue:{}})},i.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,o=0;o<e.length-1;++o)if(!pv(t=(t.mapValue.fields||{})[e.get(o)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},i.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=as(t)},i.prototype.setAll=function(e){var t=this,o=ss.emptyPath(),u={},c=[];e.forEach(function(_,w){if(!o.isImmediateParentOf(w)){var S=t.getFieldsMap(o);t.applyChanges(S,u,c),u={},c=[],o=w.popLast()}_?u[w.lastSegment()]=as(_):c.push(w.lastSegment())});var m=this.getFieldsMap(o);this.applyChanges(m,u,c)},i.prototype.delete=function(e){var t=this.field(e.popLast());pv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},i.prototype.isEqual=function(e){return Oo(this.value,e.value)},i.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var o=0;o<e.length;++o){var u=t.mapValue.fields[e.get(o)];pv(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields},i.prototype.applyChanges=function(e,t,o){Yu(t,function(_,w){return e[_]=w});for(var u=0,c=o;u<c.length;u++)delete e[c[u]]},i.prototype.clone=function(){return new i(as(this.value))},i}();function gv(i){var e=[];return Yu(i.fields,function(t,o){var u=new ss([t]);if(pv(o)){var c=gv(o.mapValue).fields;if(0===c.length)e.push(u);else for(var m=0,_=c;m<_.length;m++)e.push(u.child(_[m]))}else e.push(u)}),new hf(e)}var dr=function(){function i(e,t,o,u,c){this.key=e,this.documentType=t,this.version=o,this.data=u,this.documentState=c}return i.newInvalidDocument=function(e){return new i(e,0,Bt.min(),Po.empty(),0)},i.newFoundDocument=function(e,t,o){return new i(e,1,t,o,0)},i.newNoDocument=function(e,t){return new i(e,2,t,Po.empty(),0)},i.newUnknownDocument=function(e,t){return new i(e,3,t,Po.empty(),2)},i.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},i.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Po.empty(),this.documentState=0,this},i.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Po.empty(),this.documentState=2,this},i.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},i.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(i.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),i.prototype.isValidDocument=function(){return 0!==this.documentType},i.prototype.isFoundDocument=function(){return 1===this.documentType},i.prototype.isNoDocument=function(){return 2===this.documentType},i.prototype.isUnknownDocument=function(){return 3===this.documentType},i.prototype.isEqual=function(e){return e instanceof i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},i.prototype.clone=function(){return new i(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},i.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},i}(),b1=function(i,e,t,o,u,c,m){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===o&&(o=[]),void 0===u&&(u=null),void 0===c&&(c=null),void 0===m&&(m=null),this.path=i,this.collectionGroup=e,this.orderBy=t,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.h=null};function wc(i,e,t,o,u,c,m){return void 0===e&&(e=null),void 0===t&&(t=[]),void 0===o&&(o=[]),void 0===u&&(u=null),void 0===c&&(c=null),void 0===m&&(m=null),new b1(i,e,t,o,u,c,m)}function Gp(i){var e=Ge(i);if(null===e.h){var t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(o){return(u=o).field.canonicalString()+u.op.toString()+nC(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(function(o){return(u=o).field.canonicalString()+u.dir;var u}).join(","),Ec(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=mf(e.startAt)),e.endAt&&(t+="|ub:",t+=mf(e.endAt)),e.h=t}return e.h}function iC(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<i.orderBy.length;t++)if(!oC(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(var o=0;o<i.filters.length;o++)if((u=i.filters[o]).op!==(c=e.filters[o]).op||!u.field.isEqual(c.field)||!Oo(u.value,c.value))return!1;var u,c;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!aD(i.startAt,e.startAt)&&aD(i.endAt,e.endAt)}function mv(i){return ut.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}var zn=function(i){function e(t,o,u){var c=this;return(c=i.call(this)||this).field=t,c.op=o,c.value=u,c}return(0,B.ZT)(e,i),e.create=function(t,o,u){return t.isKeyField()?"in"===o||"not-in"===o?this.l(t,o,u):new oD(t,o,u):"array-contains"===o?new C1(t,u):"in"===o?new MR(t,u):"not-in"===o?new E1(t,u):"array-contains-any"===o?new w1(t,u):new e(t,o,u)},e.l=function(t,o,u){return"in"===o?new AR(t,u):new yv(t,u)},e.prototype.matches=function(t){var o=t.data.field(this.field);return"!="===this.op?null!==o&&this.m(gf(o,this.value)):null!==o&&Qu(this.value)===Qu(o)&&this.m(gf(o,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return st()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),oD=function(i){function e(t,o,u){var c=this;return(c=i.call(this,t,o,u)||this).key=ut.fromName(u.referenceValue),c}return(0,B.ZT)(e,i),e.prototype.matches=function(t){var o=ut.comparator(t.key,this.key);return this.m(o)},e}(zn),AR=function(i){function e(t,o){var u=this;return(u=i.call(this,t,"in",o)||this).keys=sD(0,o),u}return(0,B.ZT)(e,i),e.prototype.matches=function(t){return this.keys.some(function(o){return o.isEqual(t.key)})},e}(zn),yv=function(i){function e(t,o){var u=this;return(u=i.call(this,t,"not-in",o)||this).keys=sD(0,o),u}return(0,B.ZT)(e,i),e.prototype.matches=function(t){return!this.keys.some(function(o){return o.isEqual(t.key)})},e}(zn);function sD(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(function(o){return ut.fromName(o.referenceValue)})}var C1=function(i){function e(t,o){return i.call(this,t,"array-contains",o)||this}return(0,B.ZT)(e,i),e.prototype.matches=function(t){var o=t.data.field(this.field);return hv(o)&&Hp(o.arrayValue,this.value)},e}(zn),MR=function(i){function e(t,o){return i.call(this,t,"in",o)||this}return(0,B.ZT)(e,i),e.prototype.matches=function(t){var o=t.data.field(this.field);return null!==o&&Hp(this.value.arrayValue,o)},e}(zn),E1=function(i){function e(t,o){return i.call(this,t,"not-in",o)||this}return(0,B.ZT)(e,i),e.prototype.matches=function(t){if(Hp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var o=t.data.field(this.field);return null!==o&&!Hp(this.value.arrayValue,o)},e}(zn),w1=function(i){function e(t,o){return i.call(this,t,"array-contains-any",o)||this}return(0,B.ZT)(e,i),e.prototype.matches=function(t){var o=this,u=t.data.field(this.field);return!(!hv(u)||!u.arrayValue.values)&&u.arrayValue.values.some(function(c){return Hp(o.value.arrayValue,c)})},e}(zn),qp=function(i,e){this.position=i,this.before=e};function mf(i){return(i.before?"b":"a")+":"+i.position.map(function(e){return nC(e)}).join(",")}var Tc=function(i,e){void 0===e&&(e="asc"),this.field=i,this.dir=e};function oC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function sC(i,e,t){for(var o=0,u=0;u<i.position.length;u++){var c=e[u],m=i.position[u];if(o=c.field.isKeyField()?ut.comparator(ut.fromName(m.referenceValue),t.key):gf(m,t.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return i.before?o<=0:o<0}function aD(i,e){if(null===i)return null===e;if(null===e||i.before!==e.before||i.position.length!==e.position.length)return!1;for(var t=0;t<i.position.length;t++)if(!Oo(i.position[t],e.position[t]))return!1;return!0}var Ku=function(i,e,t,o,u,c,m,_){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===o&&(o=[]),void 0===u&&(u=null),void 0===c&&(c="F"),void 0===m&&(m=null),void 0===_&&(_=null),this.path=i,this.collectionGroup=e,this.explicitOrderBy=t,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=_,this.p=null,this.T=null};function uD(i,e,t,o,u,c,m,_){return new Ku(i,e,t,o,u,c,m,_)}function yf(i){return new Ku(i)}function vv(i){return!Ec(i.limit)&&"F"===i.limitType}function $p(i){return!Ec(i.limit)&&"L"===i.limitType}function _v(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function bv(i){for(var e=0,t=i.filters;e<t.length;e++){var o=t[e];if(o.g())return o.field}return null}function aC(i){return null!==i.collectionGroup}function vf(i){var e=Ge(i);if(null===e.p){e.p=[];var t=bv(e),o=_v(e);if(null!==t&&null===o)t.isKeyField()||e.p.push(new Tc(t)),e.p.push(new Tc(ss.keyField(),"asc"));else{for(var u=!1,c=0,m=e.explicitOrderBy;c<m.length;c++){var _=m[c];e.p.push(_),_.field.isKeyField()&&(u=!0)}if(!u){var w=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Tc(ss.keyField(),w))}}}return e.p}function uo(i){var e=Ge(i);if(!e.T)if("F"===e.limitType)e.T=wc(e.path,e.collectionGroup,vf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var t=[],o=0,u=vf(e);o<u.length;o++){var c=u[o];t.push(new Tc(c.field,"desc"===c.dir?"asc":"desc"))}var _=e.endAt?new qp(e.endAt.position,!e.endAt.before):null,w=e.startAt?new qp(e.startAt.position,!e.startAt.before):null;e.T=wc(e.path,e.collectionGroup,t,e.filters,e.limit,_,w)}return e.T}function Wp(i,e,t){return new Ku(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function zp(i,e){return iC(uo(i),uo(e))&&i.limitType===e.limitType}function uC(i){return Gp(uo(i))+"|lt:"+i.limitType}function _f(i){return"Query(target="+(t=(e=uo(i)).path.canonicalString(),null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map(function(o){return(u=o).field.canonicalString()+" "+u.op+" "+nC(u.value);var u}).join(", ")+"]"),Ec(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map(function(o){return(u=o).field.canonicalString()+" ("+u.dir+")";var u}).join(", ")+"]"),e.startAt&&(t+=", startAt: "+mf(e.startAt)),e.endAt&&(t+=", endAt: "+mf(e.endAt)),"Target("+t+"); limitType=")+i.limitType+")";var e,t}function Zu(i,e){return e.isFoundDocument()&&(u=(o=e).key.path,null!==(t=i).collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):ut.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u))&&function(t,o){for(var u=0,c=t.explicitOrderBy;u<c.length;u++){var m=c[u];if(!m.field.isKeyField()&&null===o.data.field(m.field))return!1}return!0}(i,e)&&function(t,o){for(var u=0,c=t.filters;u<c.length;u++)if(!c[u].matches(o))return!1;return!0}(i,e)&&function(t,o){return!(t.startAt&&!sC(t.startAt,vf(t),o)||t.endAt&&sC(t.endAt,vf(t),o))}(i,e);var t,o,u}function bf(i){return function(e,t){for(var o=!1,u=0,c=vf(i);u<c.length;u++){var m=c[u],_=T1(m,e,t);if(0!==_)return _;o=o||m.field.isKeyField()}return 0}}function T1(i,e,t){var u,m,_,w,o=i.field.isKeyField()?ut.comparator(e.key,t.key):(m=t,_=e.data.field(u=i.field),w=m.data.field(u),null!==_&&null!==w?gf(_,w):st());switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return st()}}function lD(i,e){if(i.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:av(e)?"-0":e}}function D1(i){return{integerValue:""+i}}function cD(i,e){return uv(e)?D1(e):lD(i,e)}var Cv=function(){this._=void 0};function S1(i,e,t){return i instanceof Cf?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(o=t).seconds,nanos:o.nanoseconds}}}},(u=e)&&(c.fields.__previous_value__=u),{mapValue:c}):i instanceof Dc?fD(i,e):i instanceof Sc?A1(i,e):function(o,u){var c=dD(o,u),m=wf(c)+wf(o.A);return fv(c)&&fv(o.A)?D1(m):lD(o.R,m)}(i,e);var o,u,c}function I1(i,e,t){return i instanceof Dc?fD(i,e):i instanceof Sc?A1(i,e):t}function dD(i,e){return i instanceof Ef?fv(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}var Cf=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,B.ZT)(e,i),e}(Cv),Dc=function(i){function e(t){var o=this;return(o=i.call(this)||this).elements=t,o}return(0,B.ZT)(e,i),e}(Cv);function fD(i,e){for(var t=hD(e),o=function(m){t.some(function(_){return Oo(_,m)})||t.push(m)},u=0,c=i.elements;u<c.length;u++)o(c[u]);return{arrayValue:{values:t}}}var Sc=function(i){function e(t){var o=this;return(o=i.call(this)||this).elements=t,o}return(0,B.ZT)(e,i),e}(Cv);function A1(i,e){for(var t=hD(e),o=function(m){t=t.filter(function(_){return!Oo(_,m)})},u=0,c=i.elements;u<c.length;u++)o(c[u]);return{arrayValue:{values:t}}}var Ef=function(i){function e(t,o){var u=this;return(u=i.call(this)||this).R=t,u.A=o,u}return(0,B.ZT)(e,i),e}(Cv);function wf(i){return sr(i.integerValue||i.doubleValue)}function hD(i){return hv(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var Yp=function(i,e){this.field=i,this.transform=e},M1=function(i,e){this.version=i,this.transformResults=e},Dr=function(){function i(e,t){this.updateTime=e,this.exists=t}return i.none=function(){return new i},i.exists=function(e){return new i(void 0,e)},i.updateTime=function(e){return new i(e)},Object.defineProperty(i.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},i}();function ia(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}var Qp=function(){};function x1(i,e,t){var o,u,c,m,_;i instanceof Zp?(u=e,c=t,m=(o=i).value.clone(),_=Ev(o.fieldTransforms,u,c.transformResults),m.setAll(_),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()):i instanceof Ya?function(o,u,c){if(ia(o.precondition,u)){var m=Ev(o.fieldTransforms,u,c.transformResults),_=u.data;_.setAll(lC(o)),_.setAll(m),u.convertToFoundDocument(c.version,_).setHasCommittedMutations()}else u.convertToUnknownDocument(c.version)}(i,e,t):function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function pD(i,e,t){var u;i instanceof Zp?function(o,u,c){if(ia(o.precondition,u)){var m=o.value.clone(),_=cC(o.fieldTransforms,c,u);m.setAll(_),u.convertToFoundDocument(gD(u),m).setHasLocalMutations()}}(i,e,t):i instanceof Ya?function(o,u,c){if(ia(o.precondition,u)){var m=cC(o.fieldTransforms,c,u),_=u.data;_.setAll(lC(o)),_.setAll(m),u.convertToFoundDocument(gD(u),_).setHasLocalMutations()}}(i,e,t):ia(i.precondition,u=e)&&u.convertToNoDocument(Bt.min())}function R1(i,e){for(var t=null,o=0,u=i.fieldTransforms;o<u.length;o++){var c=u[o],m=e.data.field(c.field),_=dD(c.transform,m||null);null!=_&&(null==t&&(t=Po.empty()),t.set(c.field,_))}return t||null}function Kp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&ff(t,o,function(u,c){return(m=u).field.isEqual((_=c).field)&&(S=_.transform,(w=m.transform)instanceof Dc&&S instanceof Dc||w instanceof Sc&&S instanceof Sc?ff(w.elements,S.elements,Oo):w instanceof Ef&&S instanceof Ef?Oo(w.A,S.A):w instanceof Cf&&S instanceof Cf);var m,_,w,S})))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function gD(i){return i.isFoundDocument()?i.version:Bt.min()}var Zp=function(i){function e(t,o,u,c){void 0===c&&(c=[]);var m=this;return(m=i.call(this)||this).key=t,m.value=o,m.precondition=u,m.fieldTransforms=c,m.type=0,m}return(0,B.ZT)(e,i),e}(Qp),Ya=function(i){function e(t,o,u,c,m){void 0===m&&(m=[]);var _=this;return(_=i.call(this)||this).key=t,_.data=o,_.fieldMask=u,_.precondition=c,_.fieldTransforms=m,_.type=1,_}return(0,B.ZT)(e,i),e}(Qp);function lC(i){var e=new Map;return i.fieldMask.fields.forEach(function(t){if(!t.isEmpty()){var o=i.data.field(t);e.set(t,o)}}),e}function Ev(i,e,t){var o=new Map;bt(i.length===t.length);for(var u=0;u<t.length;u++){var c=i[u],m=c.transform,_=e.data.field(c.field);o.set(c.field,I1(m,_,t[u]))}return o}function cC(i,e,t){for(var o=new Map,u=0,c=i;u<c.length;u++){var m=c[u],_=m.transform,w=t.data.field(m.field);o.set(m.field,S1(_,w,e))}return o}var ar,rn,Jp=function(i){function e(t,o){var u=this;return(u=i.call(this)||this).key=t,u.precondition=o,u.type=2,u.fieldTransforms=[],u}return(0,B.ZT)(e,i),e}(Qp),wv=function(i){function e(t,o){var u=this;return(u=i.call(this)||this).key=t,u.precondition=o,u.type=3,u.fieldTransforms=[],u}return(0,B.ZT)(e,i),e}(Qp),N1=function(i){this.count=i};function dC(i){switch(i){case _e.OK:return st();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return st()}}function Xp(i){if(void 0===i)return cr("GRPC error has no .code"),_e.UNKNOWN;switch(i){case ar.OK:return _e.OK;case ar.CANCELLED:return _e.CANCELLED;case ar.UNKNOWN:return _e.UNKNOWN;case ar.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case ar.INTERNAL:return _e.INTERNAL;case ar.UNAVAILABLE:return _e.UNAVAILABLE;case ar.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case ar.NOT_FOUND:return _e.NOT_FOUND;case ar.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case ar.ABORTED:return _e.ABORTED;case ar.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case ar.DATA_LOSS:return _e.DATA_LOSS;default:return st()}}(rn=ar||(ar={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";var Sr=function(){function i(e,t){this.comparator=e,this.root=t||Fo.EMPTY}return i.prototype.insert=function(e,t){return new i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fo.BLACK,null,null))},i.prototype.remove=function(e){return new i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fo.BLACK,null,null))},i.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null},i.prototype.indexOf=function(e){for(var t=0,o=this.root;!o.isEmpty();){var u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1},i.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(i.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),i.prototype.minKey=function(){return this.root.minKey()},i.prototype.maxKey=function(){return this.root.maxKey()},i.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},i.prototype.forEach=function(e){this.inorderTraversal(function(t,o){return e(t,o),!1})},i.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,o){return e.push(t+":"+o),!1}),"{"+e.join(", ")+"}"},i.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},i.prototype.getIterator=function(){return new fC(this.root,null,this.comparator,!1)},i.prototype.getIteratorFrom=function(e){return new fC(this.root,e,this.comparator,!1)},i.prototype.getReverseIterator=function(){return new fC(this.root,null,this.comparator,!0)},i.prototype.getReverseIteratorFrom=function(e){return new fC(this.root,e,this.comparator,!0)},i}(),fC=function(){function i(e,t,o,u){this.isReverse=u,this.nodeStack=[];for(var c=1;!e.isEmpty();)if(c=t?o(e.key,t):1,u&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return i.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},i.prototype.hasNext=function(){return this.nodeStack.length>0},i.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},i}(),Fo=function(){function i(e,t,o,u,c){this.key=e,this.value=t,this.color=null!=o?o:i.RED,this.left=null!=u?u:i.EMPTY,this.right=null!=c?c:i.EMPTY,this.size=this.left.size+1+this.right.size}return i.prototype.copy=function(e,t,o,u,c){return new i(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=c?c:this.right)},i.prototype.isEmpty=function(){return!1},i.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},i.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},i.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},i.prototype.minKey=function(){return this.min().key},i.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},i.prototype.insert=function(e,t,o){var u=this,c=o(e,u.key);return(u=c<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===c?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o))).fixUp()},i.prototype.removeMin=function(){if(this.left.isEmpty())return i.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},i.prototype.remove=function(e,t){var o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return i.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()},i.prototype.isRed=function(){return this.color},i.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},i.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},i.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},i.prototype.rotateLeft=function(){var e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},i.prototype.rotateRight=function(){var e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},i.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},i.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},i.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();var e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)},i}();Fo.EMPTY=null,Fo.RED=!0,Fo.BLACK=!1,Fo.EMPTY=new(function(){function i(){this.size=0}return Object.defineProperty(i.prototype,"key",{get:function(){throw st()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){throw st()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){throw st()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){throw st()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){throw st()},enumerable:!1,configurable:!0}),i.prototype.copy=function(e,t,o,u,c){return this},i.prototype.insert=function(e,t,o){return new Fo(e,t)},i.prototype.remove=function(e,t){return this},i.prototype.isEmpty=function(){return!0},i.prototype.inorderTraversal=function(e){return!1},i.prototype.reverseTraversal=function(e){return!1},i.prototype.minKey=function(){return null},i.prototype.maxKey=function(){return null},i.prototype.isRed=function(){return!1},i.prototype.checkMaxDepth=function(){return!0},i.prototype.check=function(){return 0},i}());var Ct=function(){function i(e){this.comparator=e,this.data=new Sr(this.comparator)}return i.prototype.has=function(e){return null!==this.data.get(e)},i.prototype.first=function(){return this.data.minKey()},i.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(i.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(e){return this.data.indexOf(e)},i.prototype.forEach=function(e){this.data.inorderTraversal(function(t,o){return e(t),!1})},i.prototype.forEachInRange=function(e,t){for(var o=this.data.getIteratorFrom(e[0]);o.hasNext();){var u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}},i.prototype.forEachWhile=function(e,t){var o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return},i.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},i.prototype.getIterator=function(){return new Qa(this.data.getIterator())},i.prototype.getIteratorFrom=function(e){return new Qa(this.data.getIteratorFrom(e))},i.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},i.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},i.prototype.isEmpty=function(){return this.data.isEmpty()},i.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(o){t=t.add(o)}),t},i.prototype.isEqual=function(e){if(!(e instanceof i)||this.size!==e.size)return!1;for(var t=this.data.getIterator(),o=e.data.getIterator();t.hasNext();){var u=t.getNext().key,c=o.getNext().key;if(0!==this.comparator(u,c))return!1}return!0},i.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},i.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},i.prototype.copy=function(e){var t=new i(this.comparator);return t.data=e,t},i}(),Qa=function(){function i(e){this.iter=e}return i.prototype.getNext=function(){return this.iter.getNext().key},i.prototype.hasNext=function(){return this.iter.hasNext()},i}(),Tf=new Sr(ut.comparator);function ci(){return Tf}var xR=new Sr(ut.comparator);function wt(){return xR}var ko=new Sr(ut.comparator);function Tv(){return ko}var Ic=new Ct(ut.comparator);function Cn(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var t=Ic,o=0,u=i;o<u.length;o++){var c=u[o];t=t.add(c)}return t}var mD=new Ct(Qt);function eg(){return mD}var yD=function(){function i(e,t,o,u,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=c}return i.createSynthesizedRemoteEventForCurrentChange=function(e,t){var o=new Map;return o.set(e,hC.createSynthesizedTargetChangeForCurrentChange(e,t)),new i(Bt.min(),o,eg(),ci(),Cn())},i}(),hC=function(){function i(e,t,o,u,c){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=c}return i.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new i(Si.EMPTY_BYTE_STRING,t,Cn(),Cn(),Cn())},i}(),Dv=function(i,e,t,o){this.v=i,this.removedTargetIds=e,this.key=t,this.P=o},lo=function(i,e){this.targetId=i,this.V=e},Vn=function(i,e,t,o){void 0===t&&(t=Si.EMPTY_BYTE_STRING),void 0===o&&(o=null),this.state=i,this.targetIds=e,this.resumeToken=t,this.cause=o},Lo=function(){function i(){this.S=0,this.D=pC(),this.C=Si.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(i.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),i.prototype.O=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},i.prototype.M=function(){var e=Cn(),t=Cn(),o=Cn();return this.D.forEach(function(u,c){switch(c){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:st()}}),new hC(this.C,this.N,e,t,o)},i.prototype.L=function(){this.F=!1,this.D=pC()},i.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},i.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},i.prototype.U=function(){this.S+=1},i.prototype.K=function(){this.S-=1},i.prototype.j=function(){this.F=!0,this.N=!0},i}(),vD=function(){function i(e){this.W=e,this.G=new Map,this.H=ci(),this.J=_D(),this.Y=new Ct(Qt)}return i.prototype.X=function(e){for(var t=0,o=e.v;t<o.length;t++){var u=o[t];e.P&&e.P.isFoundDocument()?this.Z(u,e.P):this.tt(u,e.key,e.P)}for(var c=0,m=e.removedTargetIds;c<m.length;c++)this.tt(u=m[c],e.key,e.P)},i.prototype.et=function(e){var t=this;this.forEachTarget(e,function(o){var u=t.nt(o);switch(e.state){case 0:t.st(o)&&u.O(e.resumeToken);break;case 1:u.K(),u.k||u.L(),u.O(e.resumeToken);break;case 2:u.K(),u.k||t.removeTarget(o);break;case 3:t.st(o)&&(u.j(),u.O(e.resumeToken));break;case 4:t.st(o)&&(t.it(o),u.O(e.resumeToken));break;default:st()}})},i.prototype.forEachTarget=function(e,t){var o=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach(function(u,c){o.st(c)&&t(c)})},i.prototype.rt=function(e){var t=e.targetId,o=e.V.count,u=this.ot(t);if(u){var c=u.target;if(mv(c))if(0===o){var m=new ut(c.path);this.tt(t,m,dr.newNoDocument(m,Bt.min()))}else bt(1===o);else this.ct(t)!==o&&(this.it(t),this.Y=this.Y.add(t))}},i.prototype.ut=function(e){var t=this,o=new Map;this.G.forEach(function(m,_){var w=t.ot(_);if(w){if(m.current&&mv(w.target)){var S=new ut(w.target.path);null!==t.H.get(S)||t.at(_,S)||t.tt(_,S,dr.newNoDocument(S,e))}m.$&&(o.set(_,m.M()),m.L())}});var u=Cn();this.J.forEach(function(m,_){var w=!0;_.forEachWhile(function(S){var x=t.ot(S);return!x||2===x.purpose||(w=!1,!1)}),w&&(u=u.add(m))});var c=new yD(e,o,this.Y,this.H,u);return this.H=ci(),this.J=_D(),this.Y=new Ct(Qt),c},i.prototype.Z=function(e,t){if(this.st(e)){var o=this.at(e,t.key)?2:0;this.nt(e).B(t.key,o),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},i.prototype.tt=function(e,t,o){if(this.st(e)){var u=this.nt(e);this.at(e,t)?u.B(t,1):u.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),o&&(this.H=this.H.insert(t,o))}},i.prototype.removeTarget=function(e){this.G.delete(e)},i.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},i.prototype.U=function(e){this.nt(e).U()},i.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Lo,this.G.set(e,t)),t},i.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Ct(Qt),this.J=this.J.insert(e,t)),t},i.prototype.st=function(e){var t=null!==this.ot(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t},i.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},i.prototype.it=function(e){var t=this;this.G.set(e,new Lo),this.W.getRemoteKeysForTarget(e).forEach(function(o){t.tt(e,o,null)})},i.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},i}();function _D(){return new Sr(ut.comparator)}function pC(){return new Sr(ut.comparator)}var gC={asc:"ASCENDING",desc:"DESCENDING"},Df={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tg=function(i,e){this.databaseId=i,this.I=e};function ng(i,e){return i.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ju(i,e){return i.I?e.toBase64():e.toUint8Array()}function O1(i,e){return ng(i,e.toTimestamp())}function Ir(i){return bt(!!i),Bt.fromTimestamp((t=za(i),new Wi(t.seconds,t.nanos)));var t}function rg(i,e){return(t=i,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Sf(i){var e=an.fromString(i);return bt($r(e)),e}function Ac(i,e){return rg(i.databaseId,e.path)}function us(i,e){var t=Sf(e);if(t.get(1)!==i.databaseId.projectId)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ut(mC(t))}function Xu(i,e){return rg(i.databaseId,e)}function bD(i){var e=Sf(i);return 4===e.length?an.emptyPath():mC(e)}function el(i){return new an(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function mC(i){return bt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function yC(i,e,t){return{name:Ac(i,e),fields:t.value.mapValue.fields}}function vC(i,e,t){var o=us(i,e.name),u=Ir(e.updateTime),c=new Po({mapValue:{fields:e.fields}}),m=dr.newFoundDocument(o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Mc(i,e){var t,u;if(e instanceof Zp)t={update:yC(i,e.key,e.value)};else if(e instanceof Jp)t={delete:Ac(i,e.key)};else if(e instanceof Ya)t={update:yC(i,e.key,e.data),updateMask:V1(e.fieldMask)};else{if(!(e instanceof wv))return st();t={verify:Ac(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(function(o){return function(u,c){var m=c.transform;if(m instanceof Cf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Dc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Sc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ef)return{fieldPath:c.field.canonicalString(),increment:m.A};throw st()}(0,o)})),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:O1(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:st()),t}function CD(i,e){var S,t=e.currentDocument?void 0!==(S=e.currentDocument).updateTime?Dr.updateTime(Ir(S.updateTime)):void 0!==S.exists?Dr.exists(S.exists):Dr.none():Dr.none(),o=e.updateTransforms?e.updateTransforms.map(function(S){return function(x,O){var L=null;"setToServerValue"in O?(bt("REQUEST_TIME"===O.setToServerValue),L=new Cf):"appendMissingElements"in O?L=new Dc(O.appendMissingElements.values||[]):"removeAllFromArray"in O?L=new Sc(O.removeAllFromArray.values||[]):"increment"in O?L=new Ef(x,O.increment):st();var X=ss.fromServerFormat(O.fieldPath);return new Yp(X,L)}(i,S)}):[];if(e.update){var u=us(i,e.update.name),c=new Po({mapValue:{fields:e.update.fields}});if(e.updateMask){var m=function(S){return new hf((S.fieldPaths||[]).map(function(O){return ss.fromServerFormat(O)}))}(e.updateMask);return new Ya(u,c,m,t,o)}return new Zp(u,c,t,o)}if(e.delete){var _=us(i,e.delete);return new Jp(_,t)}if(e.verify){var w=us(i,e.verify);return new wv(w,t)}return st()}function Sv(i,e){return{documents:[Xu(i,e.path)]}}function Iv(i,e){var t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Xu(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Xu(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);var u=function(_){if(0!==_.length){var w=_.map(function(S){return function(x){if("=="===x.op){if(_1(x.value))return{unaryFilter:{field:If(x.field),op:"IS_NAN"}};if(rC(x.value))return{unaryFilter:{field:If(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(_1(x.value))return{unaryFilter:{field:If(x.field),op:"IS_NOT_NAN"}};if(rC(x.value))return{unaryFilter:{field:If(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:If(x.field),op:L1(x.op),value:x.value}}}(S)});return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}}(e.filters);u&&(t.structuredQuery.where=u);var c=function(_){if(0!==_.length)return _.map(function(w){return{field:If((S=w).field),direction:ig(S.dir)};var S})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);var w,m=(w=e.limit,i.I||Ec(w)?w:{value:w});return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=Tt(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Tt(e.endAt)),t}function P1(i){var e=bD(i.parent),t=i.structuredQuery,o=t.from?t.from.length:0,u=null;if(o>0){bt(1===o);var c=t.from[0];c.allDescendants?u=c.collectionId:e=e.child(c.collectionId)}var m=[];t.where&&(m=F1(t.where));var _=[];t.orderBy&&(_=t.orderBy.map(function(O){return new Tc(Af((L=O).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction));var L}));var O,L,w=null;t.limit&&(w=Ec(L="object"==typeof(O=t.limit)?O.value:O)?null:L);var S=null;t.startAt&&(S=k1(t.startAt));var x=null;return t.endAt&&(x=k1(t.endAt)),uD(e,u,_,m,w,"F",S,x)}function F1(i){return i?void 0!==i.unaryFilter?[NR(i)]:void 0!==i.fieldFilter?[RR(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(function(e){return F1(e)}).reduce(function(e,t){return e.concat(t)}):st():[]}function Tt(i){return{before:i.before,values:i.position}}function k1(i){return new qp(i.values||[],!!i.before)}function ig(i){return gC[i]}function L1(i){return Df[i]}function If(i){return{fieldPath:i.canonicalString()}}function Af(i){return ss.fromServerFormat(i.fieldPath)}function RR(i){return zn.create(Af(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return st()}}(i.fieldFilter.op),i.fieldFilter.value)}function NR(i){switch(i.unaryFilter.op){case"IS_NAN":var e=Af(i.unaryFilter.field);return zn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var t=Af(i.unaryFilter.field);return zn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var o=Af(i.unaryFilter.field);return zn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var u=Af(i.unaryFilter.field);return zn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return st()}}function V1(i){var e=[];return i.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function $r(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ls(i){for(var e="",t=0;t<i.length;t++)e.length>0&&(e=Av(e)),e=U1(i.get(t),e);return Av(e)}function U1(i,e){for(var t=e,o=i.length,u=0;u<o;u++){var c=i.charAt(u);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function Av(i){return i+"\x01\x01"}function Ka(i){var e=i.length;if(bt(e>=2),2===e)return bt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),an.emptyPath();for(var t=e-2,o=[],u="",c=0;c<e;){var m=i.indexOf("\x01",c);switch((m<0||m>t)&&st(),i.charAt(m+1)){case"\x01":var _=i.substring(c,m),w=void 0;0===u.length?w=_:(w=u+=_,u=""),o.push(w);break;case"\x10":u+=i.substring(c,m),u+="\0";break;case"\x11":u+=i.substring(c,m+1);break;default:st()}c=m+2}return new an(o)}var B1=function(i,e){this.seconds=i,this.nanoseconds=e},co=function(i,e,t){this.ownerId=i,this.allowTabSynchronization=e,this.leaseTimestampMs=t};co.store="owner",co.key="owner";var tl=function(i,e,t){this.userId=i,this.lastAcknowledgedBatchId=e,this.lastStreamToken=t};tl.store="mutationQueues",tl.keyPath="userId";var Mn=function(i,e,t,o,u){this.userId=i,this.batchId=e,this.localWriteTimeMs=t,this.baseMutations=o,this.mutations=u};Mn.store="mutations",Mn.keyPath="batchId",Mn.userMutationsIndex="userMutationsIndex",Mn.userMutationsKeyPath=["userId","batchId"];var di=function(){function i(){}return i.prefixForUser=function(e){return[e]},i.prefixForPath=function(e,t){return[e,ls(t)]},i.key=function(e,t,o){return[e,ls(t),o]},i}();di.store="documentMutations",di.PLACEHOLDER=new di;var _C=function(i,e){this.path=i,this.readTime=e},j1=function(i,e){this.path=i,this.version=e},Yn=function(i,e,t,o,u,c){this.unknownDocument=i,this.noDocument=e,this.document=t,this.hasCommittedMutations=o,this.readTime=u,this.parentPath=c};Yn.store="remoteDocuments",Yn.readTimeIndex="readTimeIndex",Yn.readTimeIndexPath="readTime",Yn.collectionReadTimeIndex="collectionReadTimeIndex",Yn.collectionReadTimeIndexPath=["parentPath","readTime"];var cs=function(i){this.byteSize=i};cs.store="remoteDocumentGlobal",cs.key="remoteDocumentGlobalKey";var fi=function(i,e,t,o,u,c,m){this.targetId=i,this.canonicalId=e,this.readTime=t,this.resumeToken=o,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=c,this.query=m};fi.store="targets",fi.keyPath="targetId",fi.queryTargetsIndexName="queryTargetsIndex",fi.queryTargetsKeyPath=["canonicalId","targetId"];var Wr=function(i,e,t){this.targetId=i,this.path=e,this.sequenceNumber=t};Wr.store="targetDocuments",Wr.keyPath=["targetId","path"],Wr.documentTargetsIndex="documentTargetsIndex",Wr.documentTargetsKeyPath=["path","targetId"];var Vo=function(i,e,t,o){this.highestTargetId=i,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=t,this.targetCount=o};Vo.key="targetGlobalKey",Vo.store="targetGlobal";var xc=function(i,e){this.collectionId=i,this.parent=e};xc.store="collectionParents",xc.keyPath=["collectionId","parent"];var Za=function(i,e,t,o){this.clientId=i,this.updateTimeMs=e,this.networkEnabled=t,this.inForeground=o};Za.store="clientMetadata",Za.keyPath="clientId";var Mf=function(i,e,t){this.bundleId=i,this.createTime=e,this.version=t};Mf.store="bundles",Mf.keyPath="bundleId";var xf=function(i,e,t){this.name=i,this.readTime=e,this.bundledQuery=t};xf.store="namedQueries",xf.keyPath="name";var H1=(0,B.ev)((0,B.ev)([],(0,B.ev)((0,B.ev)([],(0,B.ev)((0,B.ev)([],(0,B.ev)((0,B.ev)([],[tl.store,Mn.store,di.store,Yn.store,fi.store,co.store,Vo.store,Wr.store]),[Za.store])),[cs.store])),[xc.store])),[Mf.store,xf.store]),ED="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rf=function(){function i(){this.onCommittedListeners=[]}return i.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},i.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},i}(),hi=function(){var i=this;this.promise=new Promise(function(e,t){i.resolve=e,i.reject=t})},Le=function(){function i(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(o){t.isDone=!0,t.result=o,t.nextCallback&&t.nextCallback(o)},function(o){t.isDone=!0,t.error=o,t.catchCallback&&t.catchCallback(o)})}return i.prototype.catch=function(e){return this.next(void 0,e)},i.prototype.next=function(e,t){var o=this;return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new i(function(u,c){o.nextCallback=function(m){o.wrapSuccess(e,m).next(u,c)},o.catchCallback=function(m){o.wrapFailure(t,m).next(u,c)}})},i.prototype.toPromise=function(){var e=this;return new Promise(function(t,o){e.next(t,o)})},i.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof i?t:i.resolve(t)}catch(o){return i.reject(o)}},i.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):i.resolve(t)},i.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):i.reject(t)},i.resolve=function(e){return new i(function(t,o){t(e)})},i.reject=function(e){return new i(function(t,o){o(e)})},i.waitFor=function(e){return new i(function(t,o){var u=0,c=0,m=!1;e.forEach(function(_){++u,_.next(function(){++c,m&&c===u&&t()},function(w){return o(w)})}),m=!0,c===u&&t()})},i.or=function(e){for(var t=i.resolve(!1),o=function(m){t=t.next(function(_){return _?i.resolve(_):m()})},u=0,c=e;u<c.length;u++)o(c[u]);return t},i.forEach=function(e,t){var o=this,u=[];return e.forEach(function(c,m){u.push(t.call(o,c,m))}),this.waitFor(u)},i}(),bC=function(){function i(e,t){var o=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new hi,this.transaction.oncomplete=function(){o.ft.resolve()},this.transaction.onabort=function(){t.error?o.ft.reject(new Nf(e,t.error)):o.ft.resolve()},this.transaction.onerror=function(u){var c=CC(u.target.error);o.ft.reject(new Nf(e,c))}}return i.open=function(e,t,o,u){try{return new i(t,e.transaction(u,o))}catch(c){throw new Nf(t,c)}},Object.defineProperty(i.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),i.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},i.prototype.store=function(e){var t=this.transaction.objectStore(e);return new G1(t)},i}(),oa=function(){function i(e,t,o){this.name=e,this.version=t,this.wt=o,12.2===i._t((0,Jt.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return i.delete=function(e){return Ue("SimpleDb","Removing database:",e),Nc(window.indexedDB.deleteDatabase(e)).toPromise()},i.yt=function(){if("undefined"==typeof indexedDB)return!1;if(i.gt())return!0;var e=(0,Jt.z$)(),t=i._t(e),o=0<t&&t<10,u=i.Et(e),c=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)},i.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},i.It=function(e,t){return e.store(t)},i._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)},i.Et=function(e){var t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)},i.prototype.At=function(e){return(0,B.mG)(this,void 0,void 0,function(){var t,o=this;return(0,B.Jh)(this,function(u){switch(u.label){case 0:return this.db?[3,2]:(Ue("SimpleDb","Opening database:",this.name),t=this,[4,new Promise(function(c,m){var _=indexedDB.open(o.name,o.version);_.onsuccess=function(w){c(w.target.result)},_.onblocked=function(){m(new Nf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=function(w){var S=w.target.error;m("VersionError"===S.name?new Ne(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Nf(e,S))},_.onupgradeneeded=function(w){Ue("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',w.oldVersion),o.wt.Rt(w.target.result,_.transaction,w.oldVersion,o.version).next(function(){Ue("SimpleDb","Database upgrade to version "+o.version+" complete")})}})]);case 1:t.db=u.sent(),u.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(c){return o.bt(c)}),this.db)]}})})},i.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},i.prototype.runTransaction=function(e,t,o,u){return(0,B.mG)(this,void 0,void 0,function(){var c,m,_,w,S;return(0,B.Jh)(this,function(x){switch(x.label){case 0:c="readonly"===t,m=0,_=function(){var O,L,j,q,X;return(0,B.Jh)(this,function(de){switch(de.label){case 0:++m,de.label=1;case 1:return de.trys.push([1,4,,5]),[4,w.At(e)];case 2:return w.db=de.sent(),O=bC.open(w.db,e,c?"readonly":"readwrite",o),L=u(O).catch(function(Ee){return O.abort(Ee),Le.reject(Ee)}).toPromise(),j={},L.catch(function(){}),[4,O.dt];case 3:return[2,(j.value=(de.sent(),L),j)];case 4:return Ue("SimpleDb","Transaction failed with error:",(q=de.sent()).message,"Retrying:",X="FirebaseError"!==q.name&&m<3),w.close(),X?[3,5]:[2,{value:Promise.reject(q)}];case 5:return[2]}})},w=this,x.label=1;case 1:return[5,_()];case 2:if("object"==typeof(S=x.sent()))return[2,S.value];x.label=3;case 3:return[3,1];case 4:return[2]}})})},i.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},i}(),OR=function(){function i(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(i.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),i.prototype.done=function(){this.Vt=!0},i.prototype.Ct=function(e){this.St=e},i.prototype.delete=function(){return Nc(this.Pt.delete())},i}(),Nf=function(i){function e(t,o){var u=this;return(u=i.call(this,_e.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+o)||this).name="IndexedDbTransactionError",u}return(0,B.ZT)(e,i),e}(Ne);function Rc(i){return"IndexedDbTransactionError"===i.name}var G1=function(){function i(e){this.store=e}return i.prototype.put=function(e,t){var o;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Nc(o)},i.prototype.add=function(e){return Ue("SimpleDb","ADD",this.store.name,e,e),Nc(this.store.add(e))},i.prototype.get=function(e){var t=this;return Nc(this.store.get(e)).next(function(o){return void 0===o&&(o=null),Ue("SimpleDb","GET",t.store.name,e,o),o})},i.prototype.delete=function(e){return Ue("SimpleDb","DELETE",this.store.name,e),Nc(this.store.delete(e))},i.prototype.count=function(){return Ue("SimpleDb","COUNT",this.store.name),Nc(this.store.count())},i.prototype.Nt=function(e,t){var o=this.cursor(this.options(e,t)),u=[];return this.xt(o,function(c,m){u.push(m)}).next(function(){return u})},i.prototype.Ft=function(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);var o=this.options(e,t);o.kt=!1;var u=this.cursor(o);return this.xt(u,function(c,m,_){return _.delete()})},i.prototype.$t=function(e,t){var o;t?o=e:(o={},t=e);var u=this.cursor(o);return this.xt(u,t)},i.prototype.Ot=function(e){var t=this.cursor({});return new Le(function(o,u){t.onerror=function(c){var m=CC(c.target.error);u(m)},t.onsuccess=function(c){var m=c.target.result;m?e(m.primaryKey,m.value).next(function(_){_?m.continue():o()}):o()}})},i.prototype.xt=function(e,t){var o=[];return new Le(function(u,c){e.onerror=function(m){c(m.target.error)},e.onsuccess=function(m){var _=m.target.result;if(_){var w=new OR(_),S=t(_.primaryKey,_.value,w);if(S instanceof Le){var x=S.catch(function(O){return w.done(),Le.reject(O)});o.push(x)}w.isDone?u():null===w.Dt?_.continue():_.continue(w.Dt)}else u()}}).next(function(){return Le.waitFor(o)})},i.prototype.options=function(e,t){var o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}},i.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var o=this.store.index(e.index);return e.kt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},i}();function Nc(i){return new Le(function(e,t){i.onsuccess=function(o){e(o.target.result)},i.onerror=function(o){var u=CC(o.target.error);t(u)}})}var wD=!1;function CC(i){var e=oa._t((0,Jt.z$)());if(e>=12.2&&e<13){var t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){var o=new Ne("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+t+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return wD||(wD=!0,setTimeout(function(){throw o},0)),o}}return i}var EC=function(i){function e(t,o){var u=this;return(u=i.call(this)||this).Mt=t,u.currentSequenceNumber=o,u}return(0,B.ZT)(e,i),e}(Rf);function zi(i,e){var t=Ge(i);return oa.It(t.Mt,e)}var wC=function(){function i(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}return i.prototype.applyToRemoteDocument=function(e,t){for(var o=t.mutationResults,u=0;u<this.mutations.length;u++){var c=this.mutations[u];c.key.isEqual(e.key)&&x1(c,e,o[u])}},i.prototype.applyToLocalView=function(e){for(var t=0,o=this.baseMutations;t<o.length;t++)(m=o[t]).key.isEqual(e.key)&&pD(m,e,this.localWriteTime);for(var u=0,c=this.mutations;u<c.length;u++){var m;(m=c[u]).key.isEqual(e.key)&&pD(m,e,this.localWriteTime)}},i.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach(function(o){var u=e.get(o.key),c=u;t.applyToLocalView(c),u.isValidDocument()||c.convertToNoDocument(Bt.min())})},i.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Cn())},i.prototype.isEqual=function(e){return this.batchId===e.batchId&&ff(this.mutations,e.mutations,function(t,o){return Kp(t,o)})&&ff(this.baseMutations,e.baseMutations,function(t,o){return Kp(t,o)})},i}(),PR=function(){function i(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}return i.from=function(e,t,o){bt(e.mutations.length===o.length);for(var u=Tv(),c=e.mutations,m=0;m<c.length;m++)u=u.insert(c[m].key,o[m].version);return new i(e,t,o,u)},i}(),TC=function(){function i(e,t,o,u,c,m,_){void 0===c&&(c=Bt.min()),void 0===m&&(m=Bt.min()),void 0===_&&(_=Si.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=_}return i.prototype.withSequenceNumber=function(e){return new i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},i.prototype.withResumeToken=function(e,t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},i.prototype.withLastLimboFreeSnapshotVersion=function(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},i}(),q1=function(i){this.Lt=i};function og(i,e){if(e.document)return vC(i.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=ut.fromSegments(e.noDocument.path),o=Pf(e.noDocument.readTime),u=dr.newNoDocument(t,o);return e.hasCommittedMutations?u.setHasCommittedMutations():u}if(e.unknownDocument){var c=ut.fromSegments(e.unknownDocument.path);return o=Pf(e.unknownDocument.version),dr.newUnknownDocument(c,o)}return st()}function TD(i,e,t){var O,L,o=DC(t),u=e.key.path.popLast().toArray();if(e.isFoundDocument()){var c={name:Ac(O=i.Lt,(L=e).key),fields:L.data.value.mapValue.fields,updateTime:ng(O,L.version.toTimestamp())},m=e.hasCommittedMutations;return new Yn(null,null,c,m,o,u)}if(e.isNoDocument()){var _=e.key.path.toArray(),w=Of(e.version);return m=e.hasCommittedMutations,new Yn(null,new _C(_,w),null,m,o,u)}if(e.isUnknownDocument()){var S=e.key.path.toArray(),x=Of(e.version);return new Yn(new j1(S,x),null,null,!0,o,u)}return st()}function DC(i){var e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function DD(i){var e=new Wi(i[0],i[1]);return Bt.fromTimestamp(e)}function Of(i){var e=i.toTimestamp();return new B1(e.seconds,e.nanoseconds)}function Pf(i){var e=new Wi(i.seconds,i.nanoseconds);return Bt.fromTimestamp(e)}function Ff(i,e){for(var t=(e.baseMutations||[]).map(function(w){return CD(i.Lt,w)}),o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);var m=e.mutations.map(function(w){return CD(i.Lt,w)}),_=Wi.fromMillis(e.localWriteTimeMs);return new wC(e.batchId,_,t,m)}function kf(i){var e,t,o=Pf(i.readTime),u=void 0!==i.lastLimboFreeSnapshotVersion?Pf(i.lastLimboFreeSnapshotVersion):Bt.min();return void 0!==i.query.documents?(bt(1===(t=i.query).documents.length),e=uo(yf(bD(t.documents[0])))):e=uo(P1(i.query)),new TC(e,i.targetId,0,i.lastListenSequenceNumber,o,u,Si.fromBase64String(i.resumeToken))}function Mv(i,e){var t,o=Of(e.snapshotVersion),u=Of(e.lastLimboFreeSnapshotVersion);t=mv(e.target)?Sv(i.Lt,e.target):Iv(i.Lt,e.target);var c=e.resumeToken.toBase64();return new fi(e.targetId,Gp(e.target),o,c,e.sequenceNumber,u,t)}function SC(i){var e=P1({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Wp(e,e.limit,"L"):e}var Lf=function(){function i(){}return i.prototype.getBundleMetadata=function(e,t){return zr(e).get(t).next(function(o){if(o)return{id:(u=o).bundleId,createTime:Pf(u.createTime),version:u.version};var u})},i.prototype.saveBundleMetadata=function(e,t){return zr(e).put({bundleId:(o=t).id,createTime:Of(Ir(o.createTime)),version:o.version});var o},i.prototype.getNamedQuery=function(e,t){return IC(e).get(t).next(function(o){if(o)return{name:(u=o).name,query:SC(u.bundledQuery),readTime:Pf(u.readTime)};var u})},i.prototype.saveNamedQuery=function(e,t){return IC(e).put({name:(o=t).name,readTime:Of(Ir(o.readTime)),bundledQuery:o.bundledQuery});var o},i}();function zr(i){return zi(i,Mf.store)}function IC(i){return zi(i,xf.store)}var ds=function(){function i(){this.Bt=new sg}return i.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),Le.resolve()},i.prototype.getCollectionParents=function(e,t){return Le.resolve(this.Bt.getEntries(t))},i}(),sg=function(){function i(){this.index={}}return i.prototype.add=function(e){var t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Ct(an.comparator),c=!u.has(o);return this.index[t]=u.add(o),c},i.prototype.has=function(e){var t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)},i.prototype.getEntries=function(e){return(this.index[e]||new Ct(an.comparator)).toArray()},i}(),$1=function(){function i(){this.qt=new sg}return i.prototype.addToCollectionParentIndex=function(e,t){var o=this;if(!this.qt.has(t)){var u=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(function(){o.qt.add(t)});var m={collectionId:u,parent:ls(c)};return AC(e).put(m)}return Le.resolve()},i.prototype.getCollectionParents=function(e,t){var o=[],u=IDBKeyRange.bound([t,""],[tD(t),""],!1,!0);return AC(e).Nt(u).next(function(c){for(var m=0,_=c;m<_.length;m++){var w=_[m];if(w.collectionId!==t)break;o.push(Ka(w.parent))}return o})},i}();function AC(i){return zi(i,xc.store)}var MC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fs=function(){function i(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}return i.withCacheSize=function(e){return new i(e,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},i}();function SD(i,e,t){var o=i.store(Mn.store),u=i.store(di.store),c=[],m=IDBKeyRange.only(t.batchId),_=0,w=o.$t({range:m},function(q,X,de){return _++,de.delete()});c.push(w.next(function(){bt(1===_)}));for(var S=[],x=0,O=t.mutations;x<O.length;x++){var L=O[x],j=di.key(e,L.key.path,t.batchId);c.push(u.delete(j)),S.push(L.key)}return Le.waitFor(c).next(function(){return S})}function xv(i){if(!i)return 0;var e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw st();e=i.noDocument}return JSON.stringify(e).length}fs.DEFAULT_COLLECTION_PERCENTILE=10,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fs.DEFAULT=new fs(41943040,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fs.DISABLED=new fs(-1,0,0);var W1=function(){function i(e,t,o,u){this.userId=e,this.R=t,this.Ut=o,this.referenceDelegate=u,this.Kt={}}return i.Qt=function(e,t,o,u){return bt(""!==e.uid),new i(e.isAuthenticated()?e.uid:"",t,o,u)},i.prototype.checkEmpty=function(e){var t=!0,o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nl(e).$t({index:Mn.userMutationsIndex,range:o},function(u,c,m){t=!1,m.done()}).next(function(){return t})},i.prototype.addMutationBatch=function(e,t,o,u){var c=this,m=ag(e),_=nl(e);return _.add({}).next(function(w){bt("number"==typeof w);for(var S=new wC(w,t,o,u),x=function(Ee,Re,Ve){var Ze=Ve.baseMutations.map(function(Lt){return Mc(Ee.Lt,Lt)}),Xe=Ve.mutations.map(function(Lt){return Mc(Ee.Lt,Lt)});return new Mn(Re,Ve.batchId,Ve.localWriteTime.toMillis(),Ze,Xe)}(c.R,c.userId,S),O=[],L=new Ct(function(Ee,Re){return Qt(Ee.canonicalString(),Re.canonicalString())}),j=0,q=u;j<q.length;j++){var X=q[j],de=di.key(c.userId,X.key.path,w);L=L.add(X.key.path.popLast()),O.push(_.put(x)),O.push(m.put(de,di.PLACEHOLDER))}return L.forEach(function(Ee){O.push(c.Ut.addToCollectionParentIndex(e,Ee))}),e.addOnCommittedListener(function(){c.Kt[w]=S.keys()}),Le.waitFor(O).next(function(){return S})})},i.prototype.lookupMutationBatch=function(e,t){var o=this;return nl(e).get(t).next(function(u){return u?(bt(u.userId===o.userId),Ff(o.R,u)):null})},i.prototype.jt=function(e,t){var o=this;return this.Kt[t]?Le.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next(function(u){if(u){var c=u.keys();return o.Kt[t]=c,c}return null})},i.prototype.getNextMutationBatchAfterBatchId=function(e,t){var o=this,u=t+1,c=IDBKeyRange.lowerBound([this.userId,u]),m=null;return nl(e).$t({index:Mn.userMutationsIndex,range:c},function(_,w,S){w.userId===o.userId&&(bt(w.batchId>=u),m=Ff(o.R,w)),S.done()}).next(function(){return m})},i.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),o=-1;return nl(e).$t({index:Mn.userMutationsIndex,range:t,reverse:!0},function(u,c,m){o=c.batchId,m.done()}).next(function(){return o})},i.prototype.getAllMutationBatches=function(e){var t=this,o=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nl(e).Nt(Mn.userMutationsIndex,o).next(function(u){return u.map(function(c){return Ff(t.R,c)})})},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var o=this,u=di.prefixForPath(this.userId,t.path),c=IDBKeyRange.lowerBound(u),m=[];return ag(e).$t({range:c},function(_,w,S){var x=_[0],L=_[2],j=Ka(_[1]);if(x===o.userId&&t.path.isEqual(j))return nl(e).get(L).next(function(q){if(!q)throw st();bt(q.userId===o.userId),m.push(Ff(o.R,q))});S.done()}).next(function(){return m})},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var o=this,u=new Ct(Qt),c=[];return t.forEach(function(m){var _=di.prefixForPath(o.userId,m.path),w=IDBKeyRange.lowerBound(_),S=ag(e).$t({range:w},function(x,O,L){var j=x[0],X=x[2],de=Ka(x[1]);j===o.userId&&m.path.isEqual(de)?u=u.add(X):L.done()});c.push(S)}),Le.waitFor(c).next(function(){return o.Wt(e,u)})},i.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var o=this,u=t.path,c=u.length+1,m=di.prefixForPath(this.userId,u),_=IDBKeyRange.lowerBound(m),w=new Ct(Qt);return ag(e).$t({range:_},function(S,x,O){var L=S[0],q=S[2],X=Ka(S[1]);L===o.userId&&u.isPrefixOf(X)?X.length===c&&(w=w.add(q)):O.done()}).next(function(){return o.Wt(e,w)})},i.prototype.Wt=function(e,t){var o=this,u=[],c=[];return t.forEach(function(m){c.push(nl(e).get(m).next(function(_){if(null===_)throw st();bt(_.userId===o.userId),u.push(Ff(o.R,_))}))}),Le.waitFor(c).next(function(){return u})},i.prototype.removeMutationBatch=function(e,t){var o=this;return SD(e.Mt,this.userId,t).next(function(u){return e.addOnCommittedListener(function(){o.Gt(t.batchId)}),Le.forEach(u,function(c){return o.referenceDelegate.markPotentiallyOrphaned(e,c)})})},i.prototype.Gt=function(e){delete this.Kt[e]},i.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(o){if(!o)return Le.resolve();var u=IDBKeyRange.lowerBound(di.prefixForUser(t.userId)),c=[];return ag(e).$t({range:u},function(m,_,w){if(m[0]===t.userId){var S=Ka(m[1]);c.push(S)}else w.done()}).next(function(){bt(0===c.length)})})},i.prototype.containsKey=function(e,t){return xC(e,this.userId,t)},i.prototype.zt=function(e){var t=this;return ID(e).get(this.userId).next(function(o){return o||new tl(t.userId,-1,"")})},i}();function xC(i,e,t){var o=di.prefixForPath(e,t.path),u=o[1],c=IDBKeyRange.lowerBound(o),m=!1;return ag(i).$t({range:c,kt:!0},function(_,w,S){_[0]===e&&_[1]===u&&(m=!0),S.done()}).next(function(){return m})}function nl(i){return zi(i,Mn.store)}function ag(i){return zi(i,di.store)}function ID(i){return zi(i,tl.store)}var Rv=function(){function i(e){this.Ht=e}return i.prototype.next=function(){return this.Ht+=2,this.Ht},i.Jt=function(){return new i(0)},i.Yt=function(){return new i(-1)},i}(),Vf=function(){function i(e,t){this.referenceDelegate=e,this.R=t}return i.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next(function(o){var u=new Rv(o.highestTargetId);return o.highestTargetId=u.next(),t.Zt(e,o).next(function(){return o.highestTargetId})})},i.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(t){return Bt.fromTimestamp(new Wi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},i.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(t){return t.highestListenSequenceNumber})},i.prototype.setTargetsMetadata=function(e,t,o){var u=this;return this.Xt(e).next(function(c){return c.highestListenSequenceNumber=t,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),u.Zt(e,c)})},i.prototype.addTargetData=function(e,t){var o=this;return this.te(e,t).next(function(){return o.Xt(e).next(function(u){return u.targetCount+=1,o.ee(t,u),o.Zt(e,u)})})},i.prototype.updateTargetData=function(e,t){return this.te(e,t)},i.prototype.removeTargetData=function(e,t){var o=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ug(e).delete(t.targetId)}).next(function(){return o.Xt(e)}).next(function(u){return bt(u.targetCount>0),u.targetCount-=1,o.Zt(e,u)})},i.prototype.removeTargets=function(e,t,o){var u=this,c=0,m=[];return ug(e).$t(function(_,w){var S=kf(w);S.sequenceNumber<=t&&null===o.get(S.targetId)&&(c++,m.push(u.removeTargetData(e,S)))}).next(function(){return Le.waitFor(m)}).next(function(){return c})},i.prototype.forEachTarget=function(e,t){return ug(e).$t(function(o,u){var c=kf(u);t(c)})},i.prototype.Xt=function(e){return RC(e).get(Vo.key).next(function(t){return bt(null!==t),t})},i.prototype.Zt=function(e,t){return RC(e).put(Vo.key,t)},i.prototype.te=function(e,t){return ug(e).put(Mv(this.R,t))},i.prototype.ee=function(e,t){var o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o},i.prototype.getTargetCount=function(e){return this.Xt(e).next(function(t){return t.targetCount})},i.prototype.getTargetData=function(e,t){var o=Gp(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]),c=null;return ug(e).$t({range:u,index:fi.queryTargetsIndexName},function(m,_,w){var S=kf(_);iC(t,S.target)&&(c=S,w.done())}).next(function(){return c})},i.prototype.addMatchingKeys=function(e,t,o){var u=this,c=[],m=rl(e);return t.forEach(function(_){var w=ls(_.path);c.push(m.put(new Wr(o,w))),c.push(u.referenceDelegate.addReference(e,o,_))}),Le.waitFor(c)},i.prototype.removeMatchingKeys=function(e,t,o){var u=this,c=rl(e);return Le.forEach(t,function(m){var _=ls(m.path);return Le.waitFor([c.delete([o,_]),u.referenceDelegate.removeReference(e,o,m)])})},i.prototype.removeMatchingKeysForTargetId=function(e,t){var o=rl(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)},i.prototype.getMatchingKeysForTargetId=function(e,t){var o=IDBKeyRange.bound([t],[t+1],!1,!0),u=rl(e),c=Cn();return u.$t({range:o,kt:!0},function(m,_,w){var S=Ka(m[1]),x=new ut(S);c=c.add(x)}).next(function(){return c})},i.prototype.containsKey=function(e,t){var o=ls(t.path),u=IDBKeyRange.bound([o],[tD(o)],!1,!0),c=0;return rl(e).$t({index:Wr.documentTargetsIndex,kt:!0,range:u},function(m,_,w){0!==m[0]&&(c++,w.done())}).next(function(){return c>0})},i.prototype.lt=function(e,t){return ug(e).get(t).next(function(o){return o?kf(o):null})},i}();function ug(i){return zi(i,fi.store)}function RC(i){return zi(i,Vo.store)}function rl(i){return zi(i,Wr.store)}function Uf(i){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){if(i.code!==_e.FAILED_PRECONDITION||i.message!==ED)throw i;return Ue("LocalStore","Unexpectedly lost primary lease"),[2]})})}function NC(i,e){var o=i[1],c=e[1],m=Qt(i[0],e[0]);return 0===m?Qt(o,c):m}var z1=function(){function i(e){this.ne=e,this.buffer=new Ct(NC),this.se=0}return i.prototype.ie=function(){return++this.se},i.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var o=this.buffer.last();NC(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}},Object.defineProperty(i.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),i}(),OC=function(){function i(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return i.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},i.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(i.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),i.prototype.ue=function(e){var t=this,o=this.oe?3e5:6e4;Ue("LruGarbageCollector","Garbage collection scheduled in "+o+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,function(){return(0,B.mG)(t,void 0,void 0,function(){var u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:this.ce=null,this.oe=!0,c.label=1;case 1:return c.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return c.sent(),[3,7];case 3:return Rc(u=c.sent())?(Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u),[3,6]):[3,4];case 4:return[4,Uf(u)];case 5:c.sent(),c.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return c.sent(),[2]}})})})},i}(),Y1=function(){function i(e,t){this.ae=e,this.params=t}return i.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next(function(o){return Math.floor(t/100*o)})},i.prototype.nthSequenceNumber=function(e,t){var o=this;if(0===t)return Le.resolve($i.o);var u=new z1(t);return this.ae.forEachTarget(e,function(c){return u.re(c.sequenceNumber)}).next(function(){return o.ae.le(e,function(c){return u.re(c)})}).next(function(){return u.maxValue})},i.prototype.removeTargets=function(e,t,o){return this.ae.removeTargets(e,t,o)},i.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},i.prototype.collect=function(e,t){var o=this;return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(MC)):this.getCacheSize(e).next(function(u){return u<o.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; Cache size "+u+" is lower than threshold "+o.params.cacheSizeCollectionThreshold),MC):o.fe(e,t)})},i.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},i.prototype.fe=function(e,t){var o,u,c,m,_,w,S,x=this,O=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(L){return L>x.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+x.params.maximumSequenceNumbersToCollect+" from "+L),u=x.params.maximumSequenceNumbersToCollect):u=L,m=Date.now(),x.nthSequenceNumber(e,u)}).next(function(L){return o=L,_=Date.now(),x.removeTargets(e,o,t)}).next(function(L){return c=L,w=Date.now(),x.removeOrphanedDocuments(e,o)}).next(function(L){return S=Date.now(),Zb()<=xo.in.DEBUG&&Ue("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(m-O)+"ms\n\tDetermined least recently used "+u+" in "+(_-m)+"ms\n\tRemoved "+c+" targets in "+(w-_)+"ms\n\tRemoved "+L+" documents in "+(S-w)+"ms\nTotal Duration: "+(S-O)+"ms"),Le.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:L})})},i}(),Q1=function(){function i(e,t){this.db=e,this.garbageCollector=new Y1(this,t)}return i.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(o){return t.next(function(u){return o+u})})},i.prototype.de=function(e){var t=0;return this.le(e,function(o){t++}).next(function(){return t})},i.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},i.prototype.le=function(e,t){return this.we(e,function(o,u){return t(u)})},i.prototype.addReference=function(e,t,o){return lg(e,o)},i.prototype.removeReference=function(e,t,o){return lg(e,o)},i.prototype.removeTargets=function(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)},i.prototype.markPotentiallyOrphaned=function(e,t){return lg(e,t)},i.prototype._e=function(e,t){return u=t,c=!1,ID(o=e).Ot(function(m){return xC(o,m,u).next(function(_){return _&&(c=!0),Le.resolve(!_)})}).next(function(){return c});var o,u,c},i.prototype.removeOrphanedDocuments=function(e,t){var o=this,u=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[],m=0;return this.we(e,function(_,w){if(w<=t){var S=o._e(e,_).next(function(x){if(!x)return m++,u.getEntry(e,_).next(function(){return u.removeEntry(_),rl(e).delete([0,ls(_.path)])})});c.push(S)}}).next(function(){return Le.waitFor(c)}).next(function(){return u.apply(e)}).next(function(){return m})},i.prototype.removeTarget=function(e,t){var o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)},i.prototype.updateLimboDocument=function(e,t){return lg(e,t)},i.prototype.we=function(e,t){var o,u=rl(e),c=$i.o;return u.$t({index:Wr.documentTargetsIndex},function(m,_){var S=_.path,x=_.sequenceNumber;0===m[0]?(c!==$i.o&&t(new ut(Ka(o)),c),c=x,o=S):c=$i.o}).next(function(){c!==$i.o&&t(new ut(Ka(o)),c)})},i.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},i}();function lg(i,e){return rl(i).put((o=i.currentSequenceNumber,new Wr(0,ls(e.path),o)));var o}var Bf=function(){function i(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return i.prototype.get=function(e){var t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(var u=0,c=o;u<c.length;u++){var m=c[u],w=m[1];if(this.equalsFn(m[0],e))return w}},i.prototype.has=function(e){return void 0!==this.get(e)},i.prototype.set=function(e,t){var o=this.mapKeyFn(e),u=this.inner[o];if(void 0!==u){for(var c=0;c<u.length;c++)if(this.equalsFn(u[c][0],e))return void(u[c]=[e,t]);u.push([e,t])}else this.inner[o]=[[e,t]]},i.prototype.delete=function(e){var t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(var u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),!0;return!1},i.prototype.forEach=function(e){Yu(this.inner,function(t,o){for(var u=0,c=o;u<c.length;u++){var m=c[u];e(m[0],m[1])}})},i.prototype.isEmpty=function(){return rD(this.inner)},i}(),AD=function(){function i(){this.changes=new Bf(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return i.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:Bt.min()},i.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},i.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:dr.newInvalidDocument(e),readTime:t})},i.prototype.getEntry=function(e,t){this.assertNotApplied();var o=this.changes.get(t);return void 0!==o?Le.resolve(o.document):this.getFromCache(e,t)},i.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},i.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},i.prototype.assertNotApplied=function(){},i}(),K1=function(){function i(e,t){this.R=e,this.Ut=t}return i.prototype.addEntry=function(e,t,o){return il(e).put(Nv(t),o)},i.prototype.removeEntry=function(e,t){var o=il(e),u=Nv(t);return o.delete(u)},i.prototype.updateMetadata=function(e,t){var o=this;return this.getMetadata(e).next(function(u){return u.byteSize+=t,o.me(e,u)})},i.prototype.getEntry=function(e,t){var o=this;return il(e).get(Nv(t)).next(function(u){return o.ye(t,u)})},i.prototype.ge=function(e,t){var o=this;return il(e).get(Nv(t)).next(function(u){return{document:o.ye(t,u),size:xv(u)}})},i.prototype.getEntries=function(e,t){var o=this,u=ci();return this.pe(e,t,function(c,m){var _=o.ye(c,m);u=u.insert(c,_)}).next(function(){return u})},i.prototype.Ee=function(e,t){var o=this,u=ci(),c=new Sr(ut.comparator);return this.pe(e,t,function(m,_){var w=o.ye(m,_);u=u.insert(m,w),c=c.insert(m,xv(_))}).next(function(){return{documents:u,Te:c}})},i.prototype.pe=function(e,t,o){if(t.isEmpty())return Le.resolve();var u=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator(),m=c.getNext();return il(e).$t({range:u},function(_,w,S){for(var x=ut.fromSegments(_);m&&ut.comparator(m,x)<0;)o(m,null),m=c.getNext();m&&m.isEqual(x)&&(o(m,w),m=c.hasNext()?c.getNext():null),m?S.Ct(m.path.toArray()):S.done()}).next(function(){for(;m;)o(m,null),m=c.hasNext()?c.getNext():null})},i.prototype.getDocumentsMatchingQuery=function(e,t,o){var u=this,c=ci(),m=t.path.length+1,_={};if(o.isEqual(Bt.min())){var w=t.path.toArray();_.range=IDBKeyRange.lowerBound(w)}else{var S=t.path.toArray(),x=DC(o);_.range=IDBKeyRange.lowerBound([S,x],!0),_.index=Yn.collectionReadTimeIndex}return il(e).$t(_,function(O,L,j){if(O.length===m){var q=og(u.R,L);t.path.isPrefixOf(q.key.path)?Zu(t,q)&&(c=c.insert(q.key,q)):j.done()}}).next(function(){return c})},i.prototype.newChangeBuffer=function(e){return new Z1(this,!!e&&e.trackRemovals)},i.prototype.getSize=function(e){return this.getMetadata(e).next(function(t){return t.byteSize})},i.prototype.getMetadata=function(e){return MD(e).get(cs.key).next(function(t){return bt(!!t),t})},i.prototype.me=function(e,t){return MD(e).put(cs.key,t)},i.prototype.ye=function(e,t){if(t){var o=og(this.R,t);if(!o.isNoDocument()||!o.version.isEqual(Bt.min()))return o}return dr.newInvalidDocument(e)},i}(),Z1=function(i){function e(t,o){var u=this;return(u=i.call(this)||this).Ie=t,u.trackRemovals=o,u.Ae=new Bf(function(c){return c.toString()},function(c,m){return c.isEqual(m)}),u}return(0,B.ZT)(e,i),e.prototype.applyChanges=function(t){var o=this,u=[],c=0,m=new Ct(function(_,w){return Qt(_.canonicalString(),w.canonicalString())});return this.changes.forEach(function(_,w){var S=o.Ae.get(_);if(w.document.isValidDocument()){var x=TD(o.Ie.R,w.document,o.getReadTime(_));m=m.add(_.path.popLast());var O=xv(x);c+=O-S,u.push(o.Ie.addEntry(t,_,x))}else if(c-=S,o.trackRemovals){var L=TD(o.Ie.R,dr.newNoDocument(_,Bt.min()),o.getReadTime(_));u.push(o.Ie.addEntry(t,_,L))}else u.push(o.Ie.removeEntry(t,_))}),m.forEach(function(_){u.push(o.Ie.Ut.addToCollectionParentIndex(t,_))}),u.push(this.Ie.updateMetadata(t,c)),Le.waitFor(u)},e.prototype.getFromCache=function(t,o){var u=this;return this.Ie.ge(t,o).next(function(c){return u.Ae.set(o,c.size),c.document})},e.prototype.getAllFromCache=function(t,o){var u=this;return this.Ie.Ee(t,o).next(function(c){var m=c.documents;return c.Te.forEach(function(_,w){u.Ae.set(_,w)}),m})},e}(AD);function MD(i){return zi(i,cs.store)}function il(i){return zi(i,Yn.store)}function Nv(i){return i.path.toArray()}var cg=function(){function i(e){this.R=e}return i.prototype.Rt=function(e,t,o,u){var c=this;bt(o<u&&o>=0&&u<=11);var w,m=new bC("createOrUpgrade",t);o<1&&u>=1&&(e.createObjectStore(co.store),(w=e).createObjectStore(tl.store,{keyPath:tl.keyPath}),w.createObjectStore(Mn.store,{keyPath:Mn.keyPath,autoIncrement:!0}).createIndex(Mn.userMutationsIndex,Mn.userMutationsKeyPath,{unique:!0}),w.createObjectStore(di.store),PC(e),function(w){w.createObjectStore(Yn.store)}(e));var _=Le.resolve();return o<3&&u>=3&&(0!==o&&(function(w){w.deleteObjectStore(Wr.store),w.deleteObjectStore(fi.store),w.deleteObjectStore(Vo.store)}(e),PC(e)),_=_.next(function(){return function(w){var S=w.store(Vo.store),x=new Vo(0,0,Bt.min().toTimestamp(),0);return S.put(Vo.key,x)}(m)})),o<4&&u>=4&&(0!==o&&(_=_.next(function(){return function(w,S){return S.store(Mn.store).Nt().next(function(x){w.deleteObjectStore(Mn.store),w.createObjectStore(Mn.store,{keyPath:Mn.keyPath,autoIncrement:!0}).createIndex(Mn.userMutationsIndex,Mn.userMutationsKeyPath,{unique:!0});var O=S.store(Mn.store),L=x.map(function(j){return O.put(j)});return Le.waitFor(L)})}(e,m)})),_=_.next(function(){!function(w){w.createObjectStore(Za.store,{keyPath:Za.keyPath})}(e)})),o<5&&u>=5&&(_=_.next(function(){return c.Re(m)})),o<6&&u>=6&&(_=_.next(function(){return function(w){w.createObjectStore(cs.store)}(e),c.be(m)})),o<7&&u>=7&&(_=_.next(function(){return c.ve(m)})),o<8&&u>=8&&(_=_.next(function(){return c.Pe(e,m)})),o<9&&u>=9&&(_=_.next(function(){(function(w){w.objectStoreNames.contains("remoteDocumentChanges")&&w.deleteObjectStore("remoteDocumentChanges")})(e),function(w){var S=w.objectStore(Yn.store);S.createIndex(Yn.readTimeIndex,Yn.readTimeIndexPath,{unique:!1}),S.createIndex(Yn.collectionReadTimeIndex,Yn.collectionReadTimeIndexPath,{unique:!1})}(t)})),o<10&&u>=10&&(_=_.next(function(){return c.Ve(m)})),o<11&&u>=11&&(_=_.next(function(){(function(w){w.createObjectStore(Mf.store,{keyPath:Mf.keyPath})})(e),function(w){w.createObjectStore(xf.store,{keyPath:xf.keyPath})}(e)})),_},i.prototype.be=function(e){var t=0;return e.store(Yn.store).$t(function(o,u){t+=xv(u)}).next(function(){var o=new cs(t);return e.store(cs.store).put(cs.key,o)})},i.prototype.Re=function(e){var t=this,o=e.store(tl.store),u=e.store(Mn.store);return o.Nt().next(function(c){return Le.forEach(c,function(m){var _=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return u.Nt(Mn.userMutationsIndex,_).next(function(w){return Le.forEach(w,function(S){bt(S.userId===m.userId);var x=Ff(t.R,S);return SD(e,m.userId,x).next(function(){})})})})})},i.prototype.ve=function(e){var t=e.store(Wr.store),o=e.store(Yn.store);return e.store(Vo.store).get(Vo.key).next(function(u){var c=[];return o.$t(function(m,_){var w=new an(m),S=[0,ls(w)];c.push(t.get(S).next(function(x){return x?Le.resolve():t.put(new Wr(0,ls(w),u.highestListenSequenceNumber))}))}).next(function(){return Le.waitFor(c)})})},i.prototype.Pe=function(e,t){e.createObjectStore(xc.store,{keyPath:xc.keyPath});var o=t.store(xc.store),u=new sg,c=function(m){if(u.add(m)){var _=m.lastSegment(),w=m.popLast();return o.put({collectionId:_,parent:ls(w)})}};return t.store(Yn.store).$t({kt:!0},function(m,_){var w=new an(m);return c(w.popLast())}).next(function(){return t.store(di.store).$t({kt:!0},function(m,_){var S=Ka(m[1]);return c(S.popLast())})})},i.prototype.Ve=function(e){var t=this,o=e.store(fi.store);return o.$t(function(u,c){var m=kf(c),_=Mv(t.R,m);return o.put(_)})},i}();function PC(i){i.createObjectStore(Wr.store,{keyPath:Wr.keyPath}).createIndex(Wr.documentTargetsIndex,Wr.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(fi.store,{keyPath:fi.keyPath}).createIndex(fi.queryTargetsIndexName,fi.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Vo.store)}var Ov="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xD=function(){function i(e,t,o,u,c,m,_,w,S,x){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Se=c,this.window=m,this.document=_,this.De=S,this.Ce=x,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(O){return Promise.resolve()},!i.yt())throw new Ne(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Q1(this,u),this.Le=t+"main",this.R=new q1(w),this.Be=new oa(this.Le,11,new cg(this.R)),this.qe=new Vf(this.referenceDelegate,this.R),this.Ut=new $1,this.Ue=new K1(this.R,this.Ut),this.Ke=new Lf,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===x&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return i.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,Ov);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new $i(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},i.prototype.He=function(e){var t=this;return this.Me=function(o){return(0,B.mG)(t,void 0,void 0,function(){return(0,B.Jh)(this,function(u){return this.started?[2,e(o)]:[2]})})},e(this.isPrimary)},i.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt(function(o){return(0,B.mG)(t,void 0,void 0,function(){return(0,B.Jh)(this,function(u){switch(u.label){case 0:return null===o.newVersion?[4,e()]:[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})})},i.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return(0,B.mG)(t,void 0,void 0,function(){return(0,B.Jh)(this,function(o){switch(o.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})}))},i.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return dg(t).put(new Za(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(t).next(function(o){o||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(t)}).next(function(o){return e.isPrimary&&!o?e.Xe(t).next(function(){return!1}):!!o&&e.Ze(t).next(function(){return!0})})}).catch(function(t){if(Rc(t))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Se.enqueueRetryable(function(){return e.Me(t)}),e.isPrimary=t})},i.prototype.Je=function(e){var t=this;return jf(e).get(co.key).next(function(o){return Le.resolve(t.tn(o))})},i.prototype.en=function(e){return dg(e).delete(this.clientId)},i.prototype.nn=function(){return(0,B.mG)(this,void 0,void 0,function(){var e,t,o,c=this;return(0,B.Jh)(this,function(m){switch(m.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(_){var w=zi(_,Za.store);return w.Nt().next(function(S){var x=c.rn(S,18e5),O=S.filter(function(L){return-1===x.indexOf(L)});return Le.forEach(O,function(L){return w.delete(L.clientId)}).next(function(){return O})})}).catch(function(){return[]})]);case 1:if(e=m.sent(),this.Qe)for(t=0,o=e;t<o.length;t++)this.Qe.removeItem(this.on(o[t].clientId));m.label=2;case 2:return[2]}})})},i.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},i.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},i.prototype.Ye=function(e){var t=this;return this.Ce?Le.resolve(!0):jf(e).get(co.key).next(function(o){if(null!==o&&t.sn(o.leaseTimestampMs,5e3)&&!t.cn(o.ownerId)){if(t.tn(o)&&t.networkEnabled)return!0;if(!t.tn(o)){if(!o.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,Ov);return!1}}return!(!t.networkEnabled||!t.inForeground)||dg(e).Nt().next(function(u){return void 0===t.rn(u,5e3).find(function(c){return!(t.clientId===c.clientId||!(!t.networkEnabled&&c.networkEnabled||!t.inForeground&&c.inForeground&&t.networkEnabled===c.networkEnabled))})})}).next(function(o){return t.isPrimary!==o&&Ue("IndexedDbPersistence","Client "+(o?"is":"is not")+" eligible for a primary lease."),o})},i.prototype.shutdown=function(){return(0,B.mG)(this,void 0,void 0,function(){var e=this;return(0,B.Jh)(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[co.store,Za.store],function(o){var u=new EC(o,$i.o);return e.Xe(u).next(function(){return e.en(u)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},i.prototype.rn=function(e,t){var o=this;return e.filter(function(u){return o.sn(u.updateTimeMs,t)&&!o.cn(u.clientId)})},i.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return dg(t).Nt().next(function(o){return e.rn(o,18e5).map(function(u){return u.clientId})})})},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.getMutationQueue=function(e){return W1.Qt(e,this.R,this.Ut,this.referenceDelegate)},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(e,t,o){var c,u=this;return Ue("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===t?"readonly":"readwrite",H1,function(_){return c=new EC(_,u.Ne?u.Ne.next():$i.o),"readwrite-primary"===t?u.Je(c).next(function(w){return!!w||u.Ye(c)}).next(function(w){if(!w)throw cr("Failed to obtain primary lease for action '"+e+"'."),u.isPrimary=!1,u.Se.enqueueRetryable(function(){return u.Me(!1)}),new Ne(_e.FAILED_PRECONDITION,ED);return o(c)}).next(function(w){return u.Ze(c).next(function(){return w})}):u.dn(c).next(function(){return o(c)})}).then(function(_){return c.raiseOnCommittedEvent(),_})},i.prototype.dn=function(e){var t=this;return jf(e).get(co.key).next(function(o){if(null!==o&&t.sn(o.leaseTimestampMs,5e3)&&!t.cn(o.ownerId)&&!t.tn(o)&&!(t.Ce||t.allowTabSynchronization&&o.allowTabSynchronization))throw new Ne(_e.FAILED_PRECONDITION,Ov)})},i.prototype.Ze=function(e){var t=new co(this.clientId,this.allowTabSynchronization,Date.now());return jf(e).put(co.key,t)},i.yt=function(){return oa.yt()},i.prototype.Xe=function(e){var t=this,o=jf(e);return o.get(co.key).next(function(u){return t.tn(u)?(Ue("IndexedDbPersistence","Releasing primary lease."),o.delete(co.key)):Le.resolve()})},i.prototype.sn=function(e,t){var o=Date.now();return!(e<o-t||e>o&&(cr("Detected an update time that is in the future: "+e+" > "+o),1))},i.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},i.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},i.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),(0,Jt.G6)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},i.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},i.prototype.cn=function(e){var t;try{var o=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return Ue("IndexedDbPersistence","Client '"+e+"' "+(o?"is":"is not")+" zombied in LocalStorage"),o}catch(u){return cr("IndexedDbPersistence","Failed to get zombied client id.",u),!1}},i.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}},i.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},i.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},i}();function jf(i){return zi(i,co.store)}function dg(i){return zi(i,Za.store)}function FC(i,e){var t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}var J1=function(i,e){this.progress=i,this.wn=e},RD=function(){function i(e,t,o){this.Ue=e,this._n=t,this.Ut=o}return i.prototype.mn=function(e,t){var o=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(u){return o.yn(e,t,u)})},i.prototype.yn=function(e,t,o){return this.Ue.getEntry(e,t).next(function(u){for(var c=0,m=o;c<m.length;c++)m[c].applyToLocalView(u);return u})},i.prototype.gn=function(e,t){e.forEach(function(o,u){for(var c=0,m=t;c<m.length;c++)m[c].applyToLocalView(u)})},i.prototype.pn=function(e,t){var o=this;return this.Ue.getEntries(e,t).next(function(u){return o.En(e,u).next(function(){return u})})},i.prototype.En=function(e,t){var o=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(u){return o.gn(t,u)})},i.prototype.getDocumentsMatchingQuery=function(e,t,o){return ut.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.Tn(e,t.path):aC(t)?this.In(e,t,o):this.An(e,t,o);var u},i.prototype.Tn=function(e,t){return this.mn(e,new ut(t)).next(function(o){var u=wt();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})},i.prototype.In=function(e,t,o){var u=this,c=t.collectionGroup,m=wt();return this.Ut.getCollectionParents(e,c).next(function(_){return Le.forEach(_,function(w){var x,O,S=(x=t,O=w.child(c),new Ku(O,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt));return u.An(e,S,o).next(function(x){x.forEach(function(O,L){m=m.insert(O,L)})})}).next(function(){return m})})},i.prototype.An=function(e,t,o){var u,c,m=this;return this.Ue.getDocumentsMatchingQuery(e,t,o).next(function(_){return u=_,m._n.getAllMutationBatchesAffectingQuery(e,t)}).next(function(_){return m.Rn(e,c=_,u).next(function(w){u=w;for(var S=0,x=c;S<x.length;S++)for(var O=x[S],L=0,j=O.mutations;L<j.length;L++){var q=j[L],X=q.key,de=u.get(X);null==de&&(de=dr.newInvalidDocument(X),u=u.insert(X,de)),pD(q,de,O.localWriteTime),de.isFoundDocument()||(u=u.remove(X))}})}).next(function(){return u.forEach(function(_,w){Zu(t,w)||(u=u.remove(_))}),u})},i.prototype.Rn=function(e,t,o){for(var u=Cn(),c=0,m=t;c<m.length;c++)for(var _=0,w=m[c].mutations;_<w.length;_++){var S=w[_];S instanceof Ya&&null===o.get(S.key)&&(u=u.add(S.key))}var x=o;return this.Ue.getEntries(e,u).next(function(O){return O.forEach(function(L,j){j.isFoundDocument()&&(x=x.insert(L,j))}),x})},i}(),X1=function(){function i(e,t,o,u){this.targetId=e,this.fromCache=t,this.bn=o,this.vn=u}return i.Pn=function(e,t){for(var o=Cn(),u=Cn(),c=0,m=t.docChanges;c<m.length;c++){var _=m[c];switch(_.type){case 0:o=o.add(_.doc.key);break;case 1:u=u.add(_.doc.key)}}return new i(e,t.fromCache,o,u)},i}(),ND=function(){function i(){}return i.prototype.Vn=function(e){this.Sn=e},i.prototype.getDocumentsMatchingQuery=function(e,t,o,u){var m,c=this;return 0===(m=t).filters.length&&null===m.limit&&null==m.startAt&&null==m.endAt&&(0===m.explicitOrderBy.length||1===m.explicitOrderBy.length&&m.explicitOrderBy[0].field.isKeyField())||o.isEqual(Bt.min())?this.Dn(e,t):this.Sn.pn(e,u).next(function(m){var _=c.Cn(t,m);return(vv(t)||$p(t))&&c.Nn(t.limitType,_,u,o)?c.Dn(e,t):(Zb()<=xo.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_f(t)),c.Sn.getDocumentsMatchingQuery(e,t,o).next(function(w){return _.forEach(function(S){w=w.insert(S.key,S)}),w}))})},i.prototype.Cn=function(e,t){var o=new Ct(bf(e));return t.forEach(function(u,c){Zu(e,c)&&(o=o.add(c))}),o},i.prototype.Nn=function(e,t,o,u){if(o.size!==t.size)return!0;var c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)},i.prototype.Dn=function(e,t){return Zb()<=xo.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",_f(t)),this.Sn.getDocumentsMatchingQuery(e,t,Bt.min())},i}(),eM=function(){function i(e,t,o,u){this.persistence=e,this.xn=t,this.R=u,this.Fn=new Sr(Qt),this.kn=new Bf(function(c){return Gp(c)},iC),this.$n=Bt.min(),this._n=e.getMutationQueue(o),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new RD(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return i.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(o){return e.collect(o,t.Fn)})},i}();function OD(i,e,t,o){return new eM(i,e,t,o)}function Hf(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u,c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:return t=Ge(i),o=t._n,u=t.Mn,[4,t.persistence.runTransaction("Handle user change","readonly",function(_){var w;return t._n.getAllMutationBatches(_).next(function(S){return w=S,o=t.persistence.getMutationQueue(e),u=new RD(t.On,o,t.persistence.getIndexManager()),o.getAllMutationBatches(_)}).next(function(S){for(var x=[],O=[],L=Cn(),j=0,q=w;j<q.length;j++){var X=q[j];x.push(X.batchId);for(var de=0,Ee=X.mutations;de<Ee.length;de++)L=L.add(Ee[de].key)}for(var Ve=0,Ze=S;Ve<Ze.length;Ve++){var Xe=Ze[Ve];O.push(Xe.batchId);for(var Lt=0,un=Xe.mutations;Lt<un.length;Lt++)L=L.add(un[Lt].key)}return u.pn(_,L).next(function(fo){return{Ln:fo,removedBatchIds:x,addedBatchIds:O}})})})];case 1:return c=m.sent(),[2,(t._n=o,t.Mn=u,t.xn.Vn(t.Mn),c)]}})})}function fg(i,e){var t=Ge(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(o){var m,_,w,S,x,O,L,u=e.batch.keys(),c=t.On.newChangeBuffer({trackRemovals:!0});return(m=t,_=o,w=e,S=c,x=w.batch,O=x.keys(),L=Le.resolve(),O.forEach(function(j){L=L.next(function(){return S.getEntry(_,j)}).next(function(q){var X=w.docVersions.get(j);bt(null!==X),q.version.compareTo(X)<0&&(x.applyToRemoteDocument(q,w),q.isValidDocument()&&S.addEntry(q,w.commitVersion))})}),L.next(function(){return m._n.removeMutationBatch(_,x)})).next(function(){return c.apply(o)}).next(function(){return t._n.performConsistencyCheck(o)}).next(function(){return t.Mn.pn(o,u)})})}function PD(i){var e=Ge(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function kC(i,e){var t=Ge(i),o=e.snapshotVersion,u=t.Fn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",function(c){var m=t.On.newChangeBuffer({trackRemovals:!0});u=t.Fn;var _=[];e.targetChanges.forEach(function(x,O){var X,de,Ee,L=u.get(O);if(L){_.push(t.qe.removeMatchingKeys(c,x.removedDocuments,O).next(function(){return t.qe.addMatchingKeys(c,x.addedDocuments,O)}));var j=x.resumeToken;if(j.approximateByteSize()>0){var q=L.withResumeToken(j,o).withSequenceNumber(c.currentSequenceNumber);u=u.insert(O,q),X=L,Ee=x,bt((de=q).resumeToken.approximateByteSize()>0),(0===X.resumeToken.approximateByteSize()||de.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&_.push(t.qe.updateTargetData(c,q))}}});var w=ci();if(e.documentUpdates.forEach(function(x,O){e.resolvedLimboDocuments.has(x)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,x))}),_.push(hs(c,m,e.documentUpdates,o,void 0).next(function(x){w=x})),!o.isEqual(Bt.min())){var S=t.qe.getLastRemoteSnapshotVersion(c).next(function(x){return t.qe.setTargetsMetadata(c,c.currentSequenceNumber,o)});_.push(S)}return Le.waitFor(_).next(function(){return m.apply(c)}).next(function(){return t.Mn.En(c,w)}).next(function(){return w})}).then(function(c){return t.Fn=u,c})}function hs(i,e,t,o,u){var c=Cn();return t.forEach(function(m){return c=c.add(m)}),e.getEntries(i,c).next(function(m){var _=ci();return t.forEach(function(w,S){var x=m.get(w),O=(null==u?void 0:u.get(w))||o;S.isNoDocument()&&S.version.isEqual(Bt.min())?(e.removeEntry(w,O),_=_.insert(w,S)):!x.isValidDocument()||S.version.compareTo(x.version)>0||0===S.version.compareTo(x.version)&&x.hasPendingWrites?(e.addEntry(S,O),_=_.insert(w,S)):Ue("LocalStore","Ignoring outdated watch update for ",w,". Current version:",x.version," Watch version:",S.version)}),_})}function tM(i,e){var t=Ge(i);return t.persistence.runTransaction("Get next mutation batch","readonly",function(o){return void 0===e&&(e=-1),t._n.getNextMutationBatchAfterBatchId(o,e)})}function Ja(i,e){var t=Ge(i);return t.persistence.runTransaction("Allocate target","readwrite",function(o){var u;return t.qe.getTargetData(o,e).next(function(c){return c?Le.resolve(u=c):t.qe.allocateTargetId(o).next(function(m){return u=new TC(e,m,0,o.currentSequenceNumber),t.qe.addTargetData(o,u).next(function(){return u})})})}).then(function(o){var u=t.Fn.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Fn=t.Fn.insert(o.targetId,o),t.kn.set(e,o.targetId)),o})}function Gf(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u,c,m;return(0,B.Jh)(this,function(_){switch(_.label){case 0:o=Ge(i),u=o.Fn.get(e),c=t?"readwrite":"readwrite-primary",_.label=1;case 1:return _.trys.push([1,4,,5]),t?[3,3]:[4,o.persistence.runTransaction("Release target",c,function(w){return o.persistence.referenceDelegate.removeTarget(w,u)})];case 2:_.sent(),_.label=3;case 3:return[3,5];case 4:if(!Rc(m=_.sent()))throw m;return Ue("LocalStore","Failed to update sequence numbers for target "+e+": "+m),[3,5];case 5:return o.Fn=o.Fn.remove(e),o.kn.delete(u.target),[2]}})})}function Pv(i,e,t){var o=Ge(i),u=Bt.min(),c=Cn();return o.persistence.runTransaction("Execute query","readonly",function(m){return(_=o,w=m,S=uo(e),x=Ge(_),O=x.kn.get(S),void 0!==O?Le.resolve(x.Fn.get(O)):x.qe.getTargetData(w,S)).next(function(_){if(_)return u=_.lastLimboFreeSnapshotVersion,o.qe.getMatchingKeysForTargetId(m,_.targetId).next(function(w){c=w})}).next(function(){return o.xn.getDocumentsMatchingQuery(m,e,t?u:Bt.min(),t?c:Cn())}).next(function(_){return{documents:_,Bn:c}});var _,w,S,x,O})}function nM(i,e){var t=Ge(i),o=Ge(t.qe),u=t.Fn.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",function(c){return o.lt(c,e).next(function(m){return m?m.target:null})})}function Fv(i){var e=Ge(i);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return u=t,c=e.$n,m=Ge(e.On),_=ci(),w=DC(c),S=il(u),x=IDBKeyRange.lowerBound(w,!0),S.$t({index:Yn.readTimeIndex,range:x},function(O,L){var j=og(m.R,L);_=_.insert(j.key,j),w=L.readTime}).next(function(){return{wn:_,readTime:DD(w)}});var u,c,m,_,w,S,x}).then(function(t){var o=t.wn;return e.$n=t.readTime,o})}function LC(i){return(0,B.mG)(this,void 0,void 0,function(){var e;return(0,B.Jh)(this,function(t){return[2,(e=Ge(i)).persistence.runTransaction("Synchronize last document change read time","readonly",function(o){return c=il(o),m=Bt.min(),c.$t({index:Yn.readTimeIndex,reverse:!0},function(_,w,S){w.readTime&&(m=DD(w.readTime)),S.done()}).next(function(){return m});var c,m}).then(function(o){e.$n=o})]})})}function FD(i,e,t,o){return(0,B.mG)(this,void 0,void 0,function(){var u,c,m,_,w,S,x,O,L,j;return(0,B.Jh)(this,function(q){switch(q.label){case 0:for(u=Ge(i),c=Cn(),m=ci(),_=Tv(),w=0,S=t;w<S.length;w++)O=e.qn((x=S[w]).metadata.name),x.document&&(c=c.add(O)),m=m.insert(O,e.Un(x)),_=_.insert(O,e.Kn(x.metadata.readTime));return L=u.On.newChangeBuffer({trackRemovals:!0}),[4,Ja(u,(X=o,uo(yf(an.fromString("__bundle__/docs/"+X)))))];case 1:return j=q.sent(),[2,u.persistence.runTransaction("Apply bundle documents","readwrite",function(X){return hs(X,L,m,Bt.min(),_).next(function(de){return L.apply(X),de}).next(function(de){return u.qe.removeMatchingKeysForTargetId(X,j.targetId).next(function(){return u.qe.addMatchingKeys(X,c,j.targetId)}).next(function(){return u.Mn.En(X,de)}).next(function(){return de})})})]}var X})})}function VC(i,e,t){return void 0===t&&(t=Cn()),(0,B.mG)(this,void 0,void 0,function(){var o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return[4,Ja(i,uo(SC(e.bundledQuery)))];case 1:return o=c.sent(),[2,(u=Ge(i)).persistence.runTransaction("Save named query","readwrite",function(m){var _=Ir(e.readTime);if(o.snapshotVersion.compareTo(_)>=0)return u.Ke.saveNamedQuery(m,e);var w=o.withResumeToken(Si.EMPTY_BYTE_STRING,_);return u.Fn=u.Fn.insert(w.targetId,w),u.qe.updateTargetData(m,w).next(function(){return u.qe.removeMatchingKeysForTargetId(m,o.targetId)}).next(function(){return u.qe.addMatchingKeys(m,t,o.targetId)}).next(function(){return u.Ke.saveNamedQuery(m,e)})})]}})})}var UC=function(){function i(e){this.R=e,this.Qn=new Map,this.jn=new Map}return i.prototype.getBundleMetadata=function(e,t){return Le.resolve(this.Qn.get(t))},i.prototype.saveBundleMetadata=function(e,t){var o;return this.Qn.set(t.id,{id:(o=t).id,version:o.version,createTime:Ir(o.createTime)}),Le.resolve()},i.prototype.getNamedQuery=function(e,t){return Le.resolve(this.jn.get(t))},i.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:(o=t).name,query:SC(o.bundledQuery),readTime:Ir(o.readTime)}),Le.resolve();var o},i}(),BC=function(){function i(){this.Wn=new Ct(Fr.Gn),this.zn=new Ct(Fr.Hn)}return i.prototype.isEmpty=function(){return this.Wn.isEmpty()},i.prototype.addReference=function(e,t){var o=new Fr(e,t);this.Wn=this.Wn.add(o),this.zn=this.zn.add(o)},i.prototype.Jn=function(e,t){var o=this;e.forEach(function(u){return o.addReference(u,t)})},i.prototype.removeReference=function(e,t){this.Yn(new Fr(e,t))},i.prototype.Xn=function(e,t){var o=this;e.forEach(function(u){return o.removeReference(u,t)})},i.prototype.Zn=function(e){var t=this,o=new ut(new an([])),u=new Fr(o,e),c=new Fr(o,e+1),m=[];return this.zn.forEachInRange([u,c],function(_){t.Yn(_),m.push(_.key)}),m},i.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},i.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},i.prototype.es=function(e){var t=new ut(new an([])),o=new Fr(t,e),u=new Fr(t,e+1),c=Cn();return this.zn.forEachInRange([o,u],function(m){c=c.add(m.key)}),c},i.prototype.containsKey=function(e){var t=new Fr(e,0),o=this.Wn.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)},i}(),Fr=function(){function i(e,t){this.key=e,this.ns=t}return i.Gn=function(e,t){return ut.comparator(e.key,t.key)||Qt(e.ns,t.ns)},i.Hn=function(e,t){return Qt(e.ns,t.ns)||ut.comparator(e.key,t.key)},i}(),rM=function(){function i(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Ct(Fr.Gn)}return i.prototype.checkEmpty=function(e){return Le.resolve(0===this._n.length)},i.prototype.addMutationBatch=function(e,t,o,u){var c=this.ss;this.ss++;var m=new wC(c,t,o,u);this._n.push(m);for(var _=0,w=u;_<w.length;_++){var S=w[_];this.rs=this.rs.add(new Fr(S.key,c)),this.Ut.addToCollectionParentIndex(e,S.key.path.popLast())}return Le.resolve(m)},i.prototype.lookupMutationBatch=function(e,t){return Le.resolve(this.os(t))},i.prototype.getNextMutationBatchAfterBatchId=function(e,t){var u=this.cs(t+1),c=u<0?0:u;return Le.resolve(this._n.length>c?this._n[c]:null)},i.prototype.getHighestUnacknowledgedBatchId=function(){return Le.resolve(0===this._n.length?-1:this.ss-1)},i.prototype.getAllMutationBatches=function(e){return Le.resolve(this._n.slice())},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var o=this,u=new Fr(t,0),c=new Fr(t,Number.POSITIVE_INFINITY),m=[];return this.rs.forEachInRange([u,c],function(_){var w=o.os(_.ns);m.push(w)}),Le.resolve(m)},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var o=this,u=new Ct(Qt);return t.forEach(function(c){var m=new Fr(c,0),_=new Fr(c,Number.POSITIVE_INFINITY);o.rs.forEachInRange([m,_],function(w){u=u.add(w.ns)})}),Le.resolve(this.us(u))},i.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var o=t.path,u=o.length+1,c=o;ut.isDocumentKey(c)||(c=c.child(""));var m=new Fr(new ut(c),0),_=new Ct(Qt);return this.rs.forEachWhile(function(w){var S=w.key.path;return!!o.isPrefixOf(S)&&(S.length===u&&(_=_.add(w.ns)),!0)},m),Le.resolve(this.us(_))},i.prototype.us=function(e){var t=this,o=[];return e.forEach(function(u){var c=t.os(u);null!==c&&o.push(c)}),o},i.prototype.removeMutationBatch=function(e,t){var o=this;bt(0===this.hs(t.batchId,"removed")),this._n.shift();var u=this.rs;return Le.forEach(t.mutations,function(c){var m=new Fr(c.key,t.batchId);return u=u.delete(m),o.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(function(){o.rs=u})},i.prototype.Gt=function(e){},i.prototype.containsKey=function(e,t){var o=new Fr(t,0),u=this.rs.firstAfterOrEqual(o);return Le.resolve(t.isEqual(u&&u.key))},i.prototype.performConsistencyCheck=function(e){return Le.resolve()},i.prototype.hs=function(e,t){return this.cs(e)},i.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},i.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},i}(),iM=function(){function i(e,t){this.Ut=e,this.ls=t,this.docs=new Sr(ut.comparator),this.size=0}return i.prototype.addEntry=function(e,t,o){var u=t.key,c=this.docs.get(u),m=c?c.size:0,_=this.ls(t);return this.docs=this.docs.insert(u,{document:t.clone(),size:_,readTime:o}),this.size+=_-m,this.Ut.addToCollectionParentIndex(e,u.path.popLast())},i.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},i.prototype.getEntry=function(e,t){var o=this.docs.get(t);return Le.resolve(o?o.document.clone():dr.newInvalidDocument(t))},i.prototype.getEntries=function(e,t){var o=this,u=ci();return t.forEach(function(c){var m=o.docs.get(c);u=u.insert(c,m?m.document.clone():dr.newInvalidDocument(c))}),Le.resolve(u)},i.prototype.getDocumentsMatchingQuery=function(e,t,o){for(var u=ci(),c=new ut(t.path.child("")),m=this.docs.getIteratorFrom(c);m.hasNext();){var _=m.getNext(),S=_.value,x=S.document,O=S.readTime;if(!t.path.isPrefixOf(_.key.path))break;O.compareTo(o)<=0||Zu(t,x)&&(u=u.insert(x.key,x.clone()))}return Le.resolve(u)},i.prototype.fs=function(e,t){return Le.forEach(this.docs,function(o){return t(o)})},i.prototype.newChangeBuffer=function(e){return new kD(this)},i.prototype.getSize=function(e){return Le.resolve(this.size)},i}(),kD=function(i){function e(t){var o=this;return(o=i.call(this)||this).Ie=t,o}return(0,B.ZT)(e,i),e.prototype.applyChanges=function(t){var o=this,u=[];return this.changes.forEach(function(c,m){m.document.isValidDocument()?u.push(o.Ie.addEntry(t,m.document,o.getReadTime(c))):o.Ie.removeEntry(c)}),Le.waitFor(u)},e.prototype.getFromCache=function(t,o){return this.Ie.getEntry(t,o)},e.prototype.getAllFromCache=function(t,o){return this.Ie.getEntries(t,o)},e}(AD),jC=function(){function i(e){this.persistence=e,this.ds=new Bf(function(t){return Gp(t)},iC),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.ws=0,this._s=new BC,this.targetCount=0,this.ys=Rv.Jt()}return i.prototype.forEachTarget=function(e,t){return this.ds.forEach(function(o,u){return t(u)}),Le.resolve()},i.prototype.getLastRemoteSnapshotVersion=function(e){return Le.resolve(this.lastRemoteSnapshotVersion)},i.prototype.getHighestSequenceNumber=function(e){return Le.resolve(this.ws)},i.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),Le.resolve(this.highestTargetId)},i.prototype.setTargetsMetadata=function(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ws&&(this.ws=t),Le.resolve()},i.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Rv(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},i.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,Le.resolve()},i.prototype.updateTargetData=function(e,t){return this.te(t),Le.resolve()},i.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,Le.resolve()},i.prototype.removeTargets=function(e,t,o){var u=this,c=0,m=[];return this.ds.forEach(function(_,w){w.sequenceNumber<=t&&null===o.get(w.targetId)&&(u.ds.delete(_),m.push(u.removeMatchingKeysForTargetId(e,w.targetId)),c++)}),Le.waitFor(m).next(function(){return c})},i.prototype.getTargetCount=function(e){return Le.resolve(this.targetCount)},i.prototype.getTargetData=function(e,t){var o=this.ds.get(t)||null;return Le.resolve(o)},i.prototype.addMatchingKeys=function(e,t,o){return this._s.Jn(t,o),Le.resolve()},i.prototype.removeMatchingKeys=function(e,t,o){this._s.Xn(t,o);var u=this.persistence.referenceDelegate,c=[];return u&&t.forEach(function(m){c.push(u.markPotentiallyOrphaned(e,m))}),Le.waitFor(c)},i.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),Le.resolve()},i.prototype.getMatchingKeysForTargetId=function(e,t){var o=this._s.es(t);return Le.resolve(o)},i.prototype.containsKey=function(e,t){return Le.resolve(this._s.containsKey(t))},i}(),LD=function(){function i(e,t){var o=this;this.gs={},this.Ne=new $i(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new jC(this),this.Ut=new ds,this.Ue=new iM(this.Ut,function(m){return o.referenceDelegate.ps(m)}),this.R=new q1(t),this.Ke=new UC(this.R)}return i.prototype.start=function(){return Promise.resolve()},i.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.setDatabaseDeletedListener=function(){},i.prototype.setNetworkEnabled=function(){},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new rM(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(e,t,o){var u=this;Ue("MemoryPersistence","Starting transaction:",e);var c=new VD(this.Ne.next());return this.referenceDelegate.Es(),o(c).next(function(m){return u.referenceDelegate.Ts(c).next(function(){return m})}).toPromise().then(function(m){return c.raiseOnCommittedEvent(),m})},i.prototype.Is=function(e,t){return Le.or(Object.values(this.gs).map(function(o){return function(){return o.containsKey(e,t)}}))},i}(),VD=function(i){function e(t){var o=this;return(o=i.call(this)||this).currentSequenceNumber=t,o}return(0,B.ZT)(e,i),e}(Rf),UD=function(){function i(e){this.persistence=e,this.As=new BC,this.Rs=null}return i.bs=function(e){return new i(e)},Object.defineProperty(i.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw st()},enumerable:!1,configurable:!0}),i.prototype.addReference=function(e,t,o){return this.As.addReference(o,t),this.vs.delete(o.toString()),Le.resolve()},i.prototype.removeReference=function(e,t,o){return this.As.removeReference(o,t),this.vs.add(o.toString()),Le.resolve()},i.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),Le.resolve()},i.prototype.removeTarget=function(e,t){var o=this;this.As.Zn(t.targetId).forEach(function(c){return o.vs.add(c.toString())});var u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(e,t.targetId).next(function(c){c.forEach(function(m){return o.vs.add(m.toString())})}).next(function(){return u.removeTargetData(e,t)})},i.prototype.Es=function(){this.Rs=new Set},i.prototype.Ts=function(e){var t=this,o=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.vs,function(u){var c=ut.fromPath(u);return t.Ps(e,c).next(function(m){m||o.removeEntry(c)})}).next(function(){return t.Rs=null,o.apply(e)})},i.prototype.updateLimboDocument=function(e,t){var o=this;return this.Ps(e,t).next(function(u){u?o.vs.delete(t.toString()):o.vs.add(t.toString())})},i.prototype.ps=function(e){return 0},i.prototype.Ps=function(e,t){var o=this;return Le.or([function(){return Le.resolve(o.As.containsKey(t))},function(){return o.persistence.getTargetCache().containsKey(e,t)},function(){return o.persistence.Is(e,t)}])},i}(),Ii=function(){function i(e){this.uid=e}return i.prototype.isAuthenticated=function(){return null!=this.uid},i.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},i.prototype.isEqual=function(e){return e.uid===this.uid},i}();function BD(i,e){return"firestore_clients_"+i+"_"+e}function HC(i,e,t){var o="firestore_mutations_"+i+"_"+t;return e.isAuthenticated()&&(o+="_"+e.uid),o}function kv(i,e){return"firestore_targets_"+i+"_"+e}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid");var jD=function(){function i(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}return i.Vs=function(e,t,o){var u,c=JSON.parse(o),m="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return m&&c.error&&(m="string"==typeof c.error.message&&"string"==typeof c.error.code)&&(u=new Ne(c.error.code,c.error.message)),m?new i(e,t,c.state,u):(cr("SharedClientState","Failed to parse mutation state for ID '"+t+"': "+o),null)},i.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},i}(),Lv=function(){function i(e,t,o){this.targetId=e,this.state=t,this.error=o}return i.Vs=function(e,t){var o,u=JSON.parse(t),c="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return c&&u.error&&(c="string"==typeof u.error.message&&"string"==typeof u.error.code)&&(o=new Ne(u.error.code,u.error.message)),c?new i(e,u.state,o):(cr("SharedClientState","Failed to parse target state for ID '"+e+"': "+t),null)},i.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},i}(),GC=function(){function i(e,t){this.clientId=e,this.activeTargetIds=t}return i.Vs=function(e,t){for(var o=JSON.parse(t),u="object"==typeof o&&o.activeTargetIds instanceof Array,c=eg(),m=0;u&&m<o.activeTargetIds.length;++m)u=uv(o.activeTargetIds[m]),c=c.add(o.activeTargetIds[m]);return u?new i(e,c):(cr("SharedClientState","Failed to parse client data for instance '"+e+"': "+t),null)},i}(),FR=function(){function i(e,t){this.clientId=e,this.onlineState=t}return i.Vs=function(e){var t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new i(t.clientId,t.onlineState):(cr("SharedClientState","Failed to parse online state: "+e),null)},i}(),Yr=function(){function i(){this.activeTargetIds=eg()}return i.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},i.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},i.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},i}(),ol=function(){function i(e,t,o,u,c){this.window=e,this.Se=t,this.persistenceKey=o,this.Ns=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Sr(Qt),this.started=!1,this.$s=[];var m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Os=BD(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new Yr),this.Ls=new RegExp("^firestore_clients_"+m+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+m+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+m+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(_){return"firestore_bundle_loaded_"+_}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return i.yt=function(e){return!(!e||!e.localStorage)},i.prototype.start=function(){return(0,B.mG)(this,void 0,void 0,function(){var e,t,o,u,c,m,_,w,S,x,L=this;return(0,B.Jh)(this,function(j){switch(j.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=j.sent(),t=0,o=e;t<o.length;t++)(u=o[t])!==this.Ns&&(c=this.getItem(BD(this.persistenceKey,u)))&&(m=GC.Vs(u,c))&&(this.ks=this.ks.insert(m.clientId,m));for(this.Qs(),(_=this.storage.getItem(this.Us))&&(w=this.js(_))&&this.Ws(w),S=0,x=this.$s;S<x.length;S++)this.Fs(x[S]);return this.$s=[],this.window.addEventListener("pagehide",function(){return L.shutdown()}),this.started=!0,[2]}})})},i.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},i.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},i.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach(function(o,u){u.activeTargetIds.has(e)&&(t=!0)}),t},i.prototype.addPendingMutation=function(e){this.zs(e,"pending")},i.prototype.updateMutationState=function(e,t,o){this.zs(e,t,o),this.Hs(e)},i.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var o=this.storage.getItem(kv(this.persistenceKey,e));if(o){var u=Lv.Vs(e,o);u&&(t=u.state)}}return this.Js.Ds(e),this.Qs(),t},i.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},i.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},i.prototype.clearQueryState=function(e){this.removeItem(kv(this.persistenceKey,e))},i.prototype.updateQueryState=function(e,t,o){this.Ys(e,t,o)},i.prototype.handleUserChange=function(e,t,o){var u=this;t.forEach(function(c){u.Hs(c)}),this.currentUser=e,o.forEach(function(c){u.addPendingMutation(c)})},i.prototype.setOnlineState=function(e){this.Xs(e)},i.prototype.notifyBundleLoaded=function(){this.Zs()},i.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},i.prototype.getItem=function(e){var t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t},i.prototype.setItem=function(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)},i.prototype.removeItem=function(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)},i.prototype.Fs=function(e){var t=this,o=e;if(o.storageArea===this.storage){if(Ue("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Os)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,B.mG)(t,void 0,void 0,function(){var u,c,m,_,w,S;return(0,B.Jh)(this,function(x){if(this.started){if(null!==o.key)if(this.Ls.test(o.key)){if(null==o.newValue)return u=this.ti(o.key),[2,this.ei(u,null)];if(c=this.ni(o.key,o.newValue))return[2,this.ei(c.clientId,c)]}else if(this.Bs.test(o.key)){if(null!==o.newValue&&(m=this.si(o.key,o.newValue)))return[2,this.ii(m)]}else if(this.qs.test(o.key)){if(null!==o.newValue&&(_=this.ri(o.key,o.newValue)))return[2,this.oi(_)]}else if(o.key===this.Us){if(null!==o.newValue&&(w=this.js(o.newValue)))return[2,this.Ws(w)]}else if(o.key===this.Ms)(S=function(O){var L=$i.o;if(null!=O)try{var j=JSON.parse(O);bt("number"==typeof j),L=j}catch(q){cr("SharedClientState","Failed to read sequence number from WebStorage",q)}return L}(o.newValue))!==$i.o&&this.sequenceNumberHandler(S);else if(o.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(o);return[2]})})})}},Object.defineProperty(i.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),i.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},i.prototype.zs=function(e,t,o){var u=new jD(this.currentUser,e,t,o),c=HC(this.persistenceKey,this.currentUser,e);this.setItem(c,u.Ss())},i.prototype.Hs=function(e){var t=HC(this.persistenceKey,this.currentUser,e);this.removeItem(t)},i.prototype.Xs=function(e){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:e}))},i.prototype.Ys=function(e,t,o){var u=kv(this.persistenceKey,e),c=new Lv(e,t,o);this.setItem(u,c.Ss())},i.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},i.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},i.prototype.ni=function(e,t){var o=this.ti(e);return GC.Vs(o,t)},i.prototype.si=function(e,t){var o=this.Bs.exec(e),u=Number(o[1]);return jD.Vs(new Ii(void 0!==o[2]?o[2]:null),u,t)},i.prototype.ri=function(e,t){var o=this.qs.exec(e),u=Number(o[1]);return Lv.Vs(u,t)},i.prototype.js=function(e){return FR.Vs(e)},i.prototype.ii=function(e){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(Ue("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},i.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},i.prototype.ei=function(e,t){var o=this,u=t?this.ks.insert(e,t):this.ks.remove(e),c=this.Gs(this.ks),m=this.Gs(u),_=[],w=[];return m.forEach(function(S){c.has(S)||_.push(S)}),c.forEach(function(S){m.has(S)||w.push(S)}),this.syncEngine.hi(_,w).then(function(){o.ks=u})},i.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},i.prototype.Gs=function(e){var t=eg();return e.forEach(function(o,u){t=t.unionWith(u.activeTargetIds)}),t},i}(),HD=function(){function i(){this.li=new Yr,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return i.prototype.addPendingMutation=function(e){},i.prototype.updateMutationState=function(e,t,o){},i.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},i.prototype.updateQueryState=function(e,t,o){this.fi[e]=t},i.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},i.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},i.prototype.clearQueryState=function(e){delete this.fi[e]},i.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},i.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},i.prototype.start=function(){return this.li=new Yr,Promise.resolve()},i.prototype.handleUserChange=function(e,t,o){},i.prototype.setOnlineState=function(e){},i.prototype.shutdown=function(){},i.prototype.writeSequenceNumber=function(e){},i.prototype.notifyBundleLoaded=function(){},i}(),oM=function(){function i(){}return i.prototype.di=function(e){},i.prototype.shutdown=function(){},i}(),sM=function(){function i(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return i.prototype.di=function(e){this.gi.push(e)},i.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},i.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},i.prototype._i=function(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},i.prototype.yi=function(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},i.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},i}(),hg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},aM=function(){function i(e){this.Ei=e.Ei,this.Ti=e.Ti}return i.prototype.Ii=function(e){this.Ai=e},i.prototype.Ri=function(e){this.bi=e},i.prototype.onMessage=function(e){this.vi=e},i.prototype.close=function(){this.Ti()},i.prototype.send=function(e){this.Ei(e)},i.prototype.Pi=function(){this.Ai()},i.prototype.Vi=function(e){this.bi(e)},i.prototype.Si=function(e){this.vi(e)},i}(),qC=function(i){function e(t){var o=this;return(o=i.call(this,t)||this).forceLongPolling=t.forceLongPolling,o.autoDetectLongPolling=t.autoDetectLongPolling,o.useFetchStreams=t.useFetchStreams,o}return(0,B.ZT)(e,i),e.prototype.ki=function(t,o,u,c){return new Promise(function(m,_){var w=new eD;w.listenOnce(JT.COMPLETE,function(){try{switch(w.getLastErrorCode()){case sv.NO_ERROR:var x=w.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(x)),m(x);break;case sv.TIMEOUT:Ue("Connection",'RPC "'+t+'" timed out'),_(new Ne(_e.DEADLINE_EXCEEDED,"Request time out"));break;case sv.HTTP_ERROR:var O=w.getStatus();if(Ue("Connection",'RPC "'+t+'" failed with status:',O,"response text:",w.getResponseText()),O>0){var L=w.getResponseJson().error;if(L&&L.status&&L.message){var j=(X=L.status.toLowerCase().replace(/_/g,"-"),Object.values(_e).indexOf(X)>=0?X:_e.UNKNOWN);_(new Ne(j,L.message))}else _(new Ne(_e.UNKNOWN,"Server responded with status "+w.getStatus()))}else _(new Ne(_e.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Ue("Connection",'RPC "'+t+'" completed.')}var X});var S=JSON.stringify(c);w.send(o,"POST",S,u,15)})},e.prototype.Oi=function(t,o){var u=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=new ov,m=By(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new XT({})),this.Fi(_.initMessageHeaders,o),(0,Jt.uI)()||(0,Jt.b$)()||(0,Jt.d)()||(0,Jt.w1)()||(0,Jt.Mn)()||(0,Jt.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");var w=u.join("");Ue("Connection","Creating WebChannel: "+w,_);var S=c.createWebChannel(w,_),x=!1,O=!1,L=new aM({Ei:function(q){O?Ue("Connection","Not sending because WebChannel is closed:",q):(x||(Ue("Connection","Opening WebChannel transport."),S.open(),x=!0),Ue("Connection","WebChannel sending:",q),S.send(q))},Ti:function(){return S.close()}}),j=function(q,X,de){q.listen(X,function(Ee){try{de(Ee)}catch(Re){setTimeout(function(){throw Re},0)}})};return j(S,Bp.EventType.OPEN,function(){O||Ue("Connection","WebChannel transport opened.")}),j(S,Bp.EventType.CLOSE,function(){O||(O=!0,Ue("Connection","WebChannel transport closed"),L.Vi())}),j(S,Bp.EventType.ERROR,function(q){O||(O=!0,df("Connection","WebChannel transport errored:",q),L.Vi(new Ne(_e.UNAVAILABLE,"The operation could not be completed")))}),j(S,Bp.EventType.MESSAGE,function(q){var X;if(!O){var de=q.data[0];bt(!!de);var Re=de.error||(null===(X=de[0])||void 0===X?void 0:X.error);if(Re){Ue("Connection","WebChannel received error:",Re);var Ve=Re.status,Ze=function(Lt){var un=ar[Lt];if(void 0!==un)return Xp(un)}(Ve),Xe=Re.message;void 0===Ze&&(Ze=_e.INTERNAL,Xe="Unknown error status: "+Ve+" with message "+Re.message),O=!0,L.Vi(new Ne(Ze,Xe)),S.close()}else Ue("Connection","WebChannel received:",de),L.Si(de)}}),j(m,Kb.STAT_EVENT,function(q){q.stat===Cc_PROXY?Ue("Connection","Detected buffering proxy"):q.stat===Cc_NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(function(){L.Pi()},0),L},e}(function(){function i(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Di=(e.ssl?"https":"http")+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return i.prototype.Ni=function(e,t,o,u){var c=this.xi(e,t);Ue("RestConnection","Sending: ",c,o);var m={};return this.Fi(m,u),this.ki(e,c,m,o).then(function(_){return Ue("RestConnection","Received: ",_),_},function(_){throw df("RestConnection",e+" failed with error: ",_,"url: ",c,"request:",o),_})},i.prototype.$i=function(e,t,o,u){return this.Ni(e,t,o,u)},i.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var o in t.authHeaders)t.authHeaders.hasOwnProperty(o)&&(e[o]=t.authHeaders[o])},i.prototype.xi=function(e,t){return this.Di+"/v1/"+t+":"+hg[e]},i}());function GD(){return"undefined"!=typeof window?window:null}function pg(){return"undefined"!=typeof document?document:null}function gg(i){return new tg(i,!0)}var $C=function(){function i(e,t,o,u,c){void 0===o&&(o=1e3),void 0===u&&(u=1.5),void 0===c&&(c=6e4),this.Se=e,this.timerId=t,this.Mi=o,this.Li=u,this.Bi=c,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return i.prototype.reset=function(){this.qi=0},i.prototype.Qi=function(){this.qi=this.Bi},i.prototype.ji=function(e){var t=this;this.cancel();var o=Math.floor(this.qi+this.Wi()),u=Math.max(0,Date.now()-this.Ki),c=Math.max(0,o-u);c>0&&Ue("ExponentialBackoff","Backing off for "+c+" ms (base delay: "+this.qi+" ms, delay with jitter: "+o+" ms, last attempt: "+u+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,c,function(){return t.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},i.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},i.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},i.prototype.Wi=function(){return(Math.random()-.5)*this.qi},i}(),Vv=function(){function i(e,t,o,u,c,m){this.Se=e,this.zi=o,this.Hi=u,this.Ji=c,this.listener=m,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new $C(e,t)}return i.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},i.prototype.er=function(){return 2===this.state},i.prototype.start=function(){3!==this.state?this.auth():this.nr()},i.prototype.stop=function(){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},i.prototype.sr=function(){this.state=0,this.Zi.reset()},i.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},i.prototype.cr=function(e){this.ur(),this.stream.send(e)},i.prototype.rr=function(){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},i.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},i.prototype.close=function(e,t){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(o){switch(o.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===_e.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return o.sent(),[2]}})})},i.prototype.ar=function(){},i.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),o=this.Yi;this.Ji.getToken().then(function(u){e.Yi===o&&e.lr(u)},function(u){t(function(){var c=new Ne(_e.UNKNOWN,"Fetching auth token failed: "+u.message);return e.dr(c)})})},i.prototype.lr=function(e){var t=this,o=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){o(function(){return t.state=2,t.listener.Ii()})}),this.stream.Ri(function(u){o(function(){return t.dr(u)})}),this.stream.onMessage(function(u){o(function(){return t.onMessage(u)})})},i.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return(0,B.mG)(e,void 0,void 0,function(){return(0,B.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},i.prototype.dr=function(e){return Ue("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},i.prototype.hr=function(e){var t=this;return function(o){t.Se.enqueueAndForget(function(){return t.Yi===e?o():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},i}(),qD=function(i){function e(t,o,u,c,m){var _=this;return(_=i.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",o,u,m)||this).R=c,_}return(0,B.ZT)(e,i),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var o=function(c,m){var _,de;if("targetChange"in m){var w="NO_CHANGE"===(de=m.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===de?1:"REMOVE"===de?2:"CURRENT"===de?3:"RESET"===de?4:st(),S=m.targetChange.targetIds||[],x=function(de,Ee){return de.I?(bt(void 0===Ee||"string"==typeof Ee),Si.fromBase64String(Ee||"")):(bt(void 0===Ee||Ee instanceof Uint8Array),Si.fromUint8Array(Ee||new Uint8Array))}(c,m.targetChange.resumeToken),O=(L=m.targetChange.cause)&&function(de){var Ee=void 0===de.code?_e.UNKNOWN:Xp(de.code);return new Ne(Ee,de.message||"")}(L);_=new Vn(w,S,x,O||null)}else if("documentChange"in m){S=us(c,(w=m.documentChange).document.name),x=Ir(w.document.updateTime);var L=new Po({mapValue:{fields:w.document.fields}}),j=(O=dr.newFoundDocument(S,x,L),w.targetIds||[]);_=new Dv(j,w.removedTargetIds||[],O.key,O)}else if("documentDelete"in m)S=us(c,(w=m.documentDelete).document),x=w.readTime?Ir(w.readTime):Bt.min(),L=dr.newNoDocument(S,x),_=new Dv([],O=w.removedTargetIds||[],L.key,L);else if("documentRemove"in m)S=us(c,(w=m.documentRemove).document),_=new Dv([],x=w.removedTargetIds||[],S,null);else{if(!("filter"in m))return st();var X=m.filter;S=new N1(w=X.count||0),_=new lo(x=X.targetId,S)}return _}(this.R,t),u=function(c){if(!("targetChange"in c))return Bt.min();var m=c.targetChange;return m.targetIds&&m.targetIds.length?Bt.min():m.readTime?Ir(m.readTime):Bt.min()}(t);return this.listener._r(o,u)},e.prototype.mr=function(t){var c,m,_,w,o={};o.database=el(this.R),o.addTarget=(c=this.R,(_=mv(w=(m=t).target)?{documents:Sv(c,w)}:{query:Iv(c,w)}).targetId=m.targetId,m.resumeToken.approximateByteSize()>0?_.resumeToken=Ju(c,m.resumeToken):m.snapshotVersion.compareTo(Bt.min())>0&&(_.readTime=ng(c,m.snapshotVersion.toTimestamp())),_);var u=function(c,m){var _=function(w,S){switch(S){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,m.purpose);return null==_?null:{"goog-listen-tags":_}}(0,t);u&&(o.labels=u),this.cr(o)},e.prototype.yr=function(t){var o={};o.database=el(this.R),o.removeTarget=t,this.cr(o)},e}(Vv),$D=function(i){function e(t,o,u,c,m){var _=this;return(_=i.call(this,t,"write_stream_connection_backoff","write_stream_idle",o,u,m)||this).R=c,_.gr=!1,_}return(0,B.ZT)(e,i),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,i.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(bt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var o=(m=t.commitTime,(c=t.writeResults)&&c.length>0?(bt(void 0!==m),c.map(function(_){return S=m,(x=Ir((w=_).updateTime?w.updateTime:S)).isEqual(Bt.min())&&(x=Ir(S)),new M1(x,w.transformResults||[]);var w,S,x})):[]),u=Ir(t.commitTime);return this.listener.Tr(u,o)}var c,m;return bt(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=el(this.R),this.cr(t)},e.prototype.Er=function(t){var o=this,u={streamToken:this.lastStreamToken,writes:t.map(function(c){return Mc(o.R,c)})};this.cr(u)},e}(Vv),Uv=function(i){function e(t,o,u){var c=this;return(c=i.call(this)||this).credentials=t,c.Hi=o,c.R=u,c.Rr=!1,c}return(0,B.ZT)(e,i),e.prototype.br=function(){if(this.Rr)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,o,u){var c=this;return this.br(),this.credentials.getToken().then(function(m){return c.Hi.Ni(t,o,u,m)}).catch(function(m){throw"FirebaseError"===m.name?(m.code===_e.UNAUTHENTICATED&&c.credentials.invalidateToken(),m):new Ne(_e.UNKNOWN,m.toString())})},e.prototype.$i=function(t,o,u){var c=this;return this.br(),this.credentials.getToken().then(function(m){return c.Hi.$i(t,o,u,m)}).catch(function(m){throw"FirebaseError"===m.name?(m.code===_e.UNAUTHENTICATED&&c.credentials.invalidateToken(),m):new Ne(_e.UNKNOWN,m.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),WC=function(){function i(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return i.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},i.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},i.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},i.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},i.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(cr(t),this.Vr=!1):Ue("OnlineStateTracker",t)},i.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},i}(),kR=function(i,e,t,o,u){var c=this;this.localStore=i,this.datastore=e,this.asyncQueue=t,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=u,this.Lr.di(function(m){t.enqueueAndForget(function(){return(0,B.mG)(c,void 0,void 0,function(){return(0,B.Jh)(this,function(_){switch(_.label){case 0:return al(this)?(Ue("RemoteStore","Restarting streams for network reachability change."),[4,function(w){return(0,B.mG)(this,void 0,void 0,function(){var S;return(0,B.Jh)(this,function(x){switch(x.label){case 0:return(S=Ge(w)).Or.add(4),[4,$f(S)];case 1:return x.sent(),S.Br.set("Unknown"),S.Or.delete(4),[4,qf(S)];case 2:return x.sent(),[2]}})})}(this)]):[3,2];case 1:_.sent(),_.label=2;case 2:return[2]}})})})}),this.Br=new WC(t,o)};function qf(i){return(0,B.mG)(this,void 0,void 0,function(){var e,t;return(0,B.Jh)(this,function(o){switch(o.label){case 0:if(!al(i))return[3,4];e=0,t=i.Mr,o.label=1;case 1:return e<t.length?[4,(0,t[e])(!0)]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function $f(i){return(0,B.mG)(this,void 0,void 0,function(){var e,t;return(0,B.Jh)(this,function(o){switch(o.label){case 0:e=0,t=i.Mr,o.label=1;case 1:return e<t.length?[4,(0,t[e])(!1)]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function mg(i,e){var t=Ge(i);t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),vg(t)?yg(t):Pc(t).er()&&Bv(t,e))}function sl(i,e){var t=Ge(i),o=Pc(t);t.$r.delete(e),o.er()&&WD(t,e),0===t.$r.size&&(o.er()?o.ir():al(t)&&t.Br.set("Unknown"))}function Bv(i,e){i.qr.U(e.targetId),Pc(i).mr(e)}function WD(i,e){i.qr.U(e),Pc(i).yr(e)}function yg(i){i.qr=new vD({getRemoteKeysForTarget:function(e){return i.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return i.$r.get(e)||null}}),Pc(i).start(),i.Br.Sr()}function vg(i){return al(i)&&!Pc(i).tr()&&i.$r.size>0}function al(i){return 0===Ge(i).Or.size}function zD(i){i.qr=void 0}function YD(i){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){return i.$r.forEach(function(t,o){Bv(i,t)}),[2]})})}function QD(i,e){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(t){return zD(i),vg(i)?(i.Br.Nr(e),yg(i)):i.Br.set("Unknown"),[2]})})}function KD(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u,c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:if(i.Br.set("Online"),!(e instanceof Vn&&2===e.state&&e.cause))return[3,6];m.label=1;case 1:return m.trys.push([1,3,,5]),[4,function(_,w){return(0,B.mG)(this,void 0,void 0,function(){var S,x,O,L;return(0,B.Jh)(this,function(j){switch(j.label){case 0:S=w.cause,x=0,O=w.targetIds,j.label=1;case 1:return x<O.length?_.$r.has(L=O[x])?[4,_.remoteSyncer.rejectListen(L,S)]:[3,3]:[3,5];case 2:j.sent(),_.$r.delete(L),_.qr.removeTarget(L),j.label=3;case 3:j.label=4;case 4:return x++,[3,1];case 5:return[2]}})})}(i,e)];case 2:return m.sent(),[3,5];case 3:return o=m.sent(),Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),[4,jv(i,o)];case 4:return m.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Dv?i.qr.X(e):e instanceof lo?i.qr.rt(e):i.qr.et(e),t.isEqual(Bt.min()))return[3,13];m.label=7;case 7:return m.trys.push([7,11,,13]),[4,PD(i.localStore)];case 8:return u=m.sent(),t.compareTo(u)>=0?[4,(_=i,w=t,S=_.qr.ut(w),S.targetChanges.forEach(function(x,O){if(x.resumeToken.approximateByteSize()>0){var L=_.$r.get(O);L&&_.$r.set(O,L.withResumeToken(x.resumeToken,w))}}),S.targetMismatches.forEach(function(x){var O=_.$r.get(x);if(O){_.$r.set(x,O.withResumeToken(Si.EMPTY_BYTE_STRING,O.snapshotVersion)),WD(_,x);var L=new TC(O.target,x,1,O.sequenceNumber);Bv(_,L)}}),_.remoteSyncer.applyRemoteEvent(S))]:[3,10];case 9:m.sent(),m.label=10;case 10:return[3,13];case 11:return Ue("RemoteStore","Failed to raise snapshot:",c=m.sent()),[4,jv(i,c)];case 12:return m.sent(),[3,13];case 13:return[2]}var _,w,S})})}function jv(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o=this;return(0,B.Jh)(this,function(u){switch(u.label){case 0:if(!Rc(e))throw e;return i.Or.add(1),[4,$f(i)];case 1:return u.sent(),i.Br.set("Offline"),t||(t=function(){return PD(i.localStore)}),i.asyncQueue.enqueueRetryable(function(){return(0,B.mG)(o,void 0,void 0,function(){return(0,B.Jh)(this,function(c){switch(c.label){case 0:return Ue("RemoteStore","Retrying IndexedDB access"),[4,t()];case 1:return c.sent(),i.Or.delete(1),[4,qf(i)];case 2:return c.sent(),[2]}})})}),[2]}})})}function zC(i,e){return e().catch(function(t){return jv(i,t,e)})}function Oc(i){return(0,B.mG)(this,void 0,void 0,function(){var e,t,o,u,c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:e=Ge(i),t=ul(e),o=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,m.label=1;case 1:if(!(al(_=e)&&_.kr.length<10))return[3,7];m.label=2;case 2:return m.trys.push([2,4,,6]),[4,tM(e.localStore,o)];case 3:return null===(u=m.sent())?(0===e.kr.length&&t.ir(),[3,7]):(o=u.batchId,function(_,w){_.kr.push(w);var S=ul(_);S.er()&&S.pr&&S.Er(w.mutations)}(e,u),[3,6]);case 4:return c=m.sent(),[4,jv(e,c)];case 5:return m.sent(),[3,6];case 6:return[3,1];case 7:return ZD(e)&&JD(e),[2]}var _})})}function ZD(i){return al(i)&&!ul(i).tr()&&i.kr.length>0}function JD(i){ul(i).start()}function XD(i){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){return ul(i).Ar(),[2]})})}function uM(i){return(0,B.mG)(this,void 0,void 0,function(){var e,t,o;return(0,B.Jh)(this,function(c){for(e=ul(i),t=0,o=i.kr;t<o.length;t++)e.Er(o[t].mutations);return[2]})})}function eS(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return o=i.kr.shift(),u=PR.from(o,e,t),[4,zC(i,function(){return i.remoteSyncer.applySuccessfulWrite(u)})];case 1:return c.sent(),[4,Oc(i)];case 2:return c.sent(),[2]}})})}function tS(i,e){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(t){switch(t.label){case 0:return e&&ul(i).pr?[4,function(o,u){return(0,B.mG)(this,void 0,void 0,function(){var c,m;return(0,B.Jh)(this,function(_){switch(_.label){case 0:return dC(m=u.code)&&m!==_e.ABORTED?(c=o.kr.shift(),ul(o).sr(),[4,zC(o,function(){return o.remoteSyncer.rejectFailedWrite(c.batchId,u)})]):[3,3];case 1:return _.sent(),[4,Oc(o)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}(i,e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return ZD(i)&&JD(i),[2]}})})}function Hv(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t;return(0,B.Jh)(this,function(o){switch(o.label){case 0:return t=Ge(i),e?(t.Or.delete(2),[4,qf(t)]):[3,2];case 1:return o.sent(),[3,5];case 2:return e?[3,4]:(t.Or.add(2),[4,$f(t)]);case 3:o.sent(),t.Br.set("Unknown"),o.label=4;case 4:o.label=5;case 5:return[2]}})})}function Pc(i){var t,o,u,c,e=this;return i.Ur||(i.Ur=(t=i.datastore,o=i.asyncQueue,u={Ii:YD.bind(null,i),Ri:QD.bind(null,i),_r:KD.bind(null,i)},(c=Ge(t)).br(),new qD(o,c.Hi,c.credentials,c.R,u)),i.Mr.push(function(t){return(0,B.mG)(e,void 0,void 0,function(){return(0,B.Jh)(this,function(o){switch(o.label){case 0:return t?(i.Ur.sr(),vg(i)?yg(i):i.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,i.Ur.stop()];case 2:o.sent(),zD(i),o.label=3;case 3:return[2]}})})})),i.Ur}function ul(i){var t,o,u,c,e=this;return i.Kr||(i.Kr=(t=i.datastore,o=i.asyncQueue,u={Ii:XD.bind(null,i),Ri:tS.bind(null,i),Ir:uM.bind(null,i),Tr:eS.bind(null,i)},(c=Ge(t)).br(),new $D(o,c.Hi,c.credentials,c.R,u)),i.Mr.push(function(t){return(0,B.mG)(e,void 0,void 0,function(){return(0,B.Jh)(this,function(o){switch(o.label){case 0:return t?(i.Kr.sr(),[4,Oc(i)]):[3,2];case 1:return o.sent(),[3,4];case 2:return[4,i.Kr.stop()];case 3:o.sent(),i.kr.length>0&&(Ue("RemoteStore","Stopping write stream with "+i.kr.length+" pending writes"),i.kr=[]),o.label=4;case 4:return[2]}})})})),i.Kr}var lM=function(){function i(e,t,o,u,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=c,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(m){})}return i.createAndSchedule=function(e,t,o,u,c){var m=new i(e,t,Date.now()+o,u,c);return m.start(o),m},i.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},i.prototype.skipDelay=function(){return this.handleDelayElapsed()},i.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},i.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},i.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},i}();function Wf(i,e){if(cr("AsyncQueue",e+": "+i),Rc(i))return new Ne(_e.UNAVAILABLE,e+": "+i);throw i}var YC=function(){function i(e){this.comparator=e?function(t,o){return e(t,o)||ut.comparator(t.key,o.key)}:function(t,o){return ut.comparator(t.key,o.key)},this.keyedMap=wt(),this.sortedSet=new Sr(this.comparator)}return i.emptySet=function(e){return new i(e.comparator)},i.prototype.has=function(e){return null!=this.keyedMap.get(e)},i.prototype.get=function(e){return this.keyedMap.get(e)},i.prototype.first=function(){return this.sortedSet.minKey()},i.prototype.last=function(){return this.sortedSet.maxKey()},i.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},i.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(i.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,o){return e(t),!1})},i.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},i.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},i.prototype.isEqual=function(e){if(!(e instanceof i)||this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();t.hasNext();){var u=t.getNext().key,c=o.getNext().key;if(!u.isEqual(c))return!1}return!0},i.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},i.prototype.copy=function(e,t){var o=new i;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o},i}(),cM=function(){function i(){this.Qr=new Sr(ut.comparator)}return i.prototype.track=function(e){var t=e.doc.key,o=this.Qr.get(t);o?0!==e.type&&3===o.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==o.type?this.Qr=this.Qr.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Qr=this.Qr.remove(t):1===e.type&&2===o.type?this.Qr=this.Qr.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):st():this.Qr=this.Qr.insert(t,e)},i.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(t,o){e.push(o)}),e},i}(),QC=function(){function i(e,t,o,u,c,m,_,w){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=c,this.fromCache=m,this.syncStateChanged=_,this.excludesMetadataChanges=w}return i.fromInitialDocuments=function(e,t,o,u){var c=[];return t.forEach(function(m){c.push({type:0,doc:m})}),new i(e,t,YC.emptySet(t),c,o,u,!0,!1)},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(var u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0},i}(),LR=function(){this.Wr=void 0,this.listeners=[]},VR=function(){this.queries=new Bf(function(i){return uC(i)},zp),this.onlineState="Unknown",this.Gr=new Set};function nS(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u,c,m,_,w;return(0,B.Jh)(this,function(S){switch(S.label){case 0:if(t=Ge(i),u=!1,(c=t.queries.get(o=e.query))||(u=!0,c=new LR),!u)return[3,4];S.label=1;case 1:return S.trys.push([1,3,,4]),m=c,[4,t.onListen(o)];case 2:return m.Wr=S.sent(),[3,4];case 3:return _=S.sent(),w=Wf(_,"Initialization of query '"+_f(e.query)+"' failed"),[2,void e.onError(w)];case 4:return t.queries.set(o,c),c.listeners.push(e),e.zr(t.onlineState),c.Wr&&e.Hr(c.Wr)&&iS(t),[2]}})})}function rS(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u,c,m;return(0,B.Jh)(this,function(_){return t=Ge(i),u=!1,(c=t.queries.get(o=e.query))&&(m=c.listeners.indexOf(e))>=0&&(c.listeners.splice(m,1),u=0===c.listeners.length),u?[2,(t.queries.delete(o),t.onUnlisten(o))]:[2]})})}function UR(i,e){for(var t=Ge(i),o=!1,u=0,c=e;u<c.length;u++){var m=c[u],w=t.queries.get(m.query);if(w){for(var S=0,x=w.listeners;S<x.length;S++)x[S].Hr(m)&&(o=!0);w.Wr=m}}o&&iS(t)}function BR(i,e,t){var o=Ge(i),u=o.queries.get(e);if(u)for(var c=0,m=u.listeners;c<m.length;c++)m[c].onError(t);o.queries.delete(e)}function iS(i){i.Gr.forEach(function(e){e.next()})}var oS=function(){function i(e,t,o){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=o||{}}return i.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],o=0,u=e.docChanges;o<u.length;o++){var c=u[o];3!==c.type&&t.push(c)}e=new QC(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var m=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),m=!0):this.eo(e,this.onlineState)&&(this.no(e),m=!0),this.Xr=e,m},i.prototype.onError=function(e){this.Jr.error(e)},i.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},i.prototype.eo=function(e,t){return!e.fromCache||!(this.options.so&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)},i.prototype.Zr=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},i.prototype.no=function(e){e=QC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},i}(),jR=function(){function i(e,t){this.payload=e,this.byteLength=t}return i.prototype.io=function(){return"metadata"in this.payload},i}(),dM=function(){function i(e){this.R=e}return i.prototype.qn=function(e){return us(this.R,e)},i.prototype.Un=function(e){return e.metadata.exists?vC(this.R,e.document,!1):dr.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},i.prototype.Kn=function(e){return Ir(e)},i}();!function(){function i(e,t,o){this.ro=e,this.localStore=t,this.R=o,this.queries=[],this.documents=[],this.progress=function(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}(e)}i.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},i.prototype.co=function(e){for(var t=new Map,o=new dM(this.R),u=0,c=e;u<c.length;u++){var m=c[u];if(m.metadata.queries)for(var _=o.qn(m.metadata.name),w=0,S=m.metadata.queries;w<S.length;w++){var x=S[w],O=(t.get(x)||Cn()).add(_);t.set(x,O)}}return t},i.prototype.complete=function(){return(0,B.mG)(this,void 0,void 0,function(){var e,t,o,u,c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:return[4,FD(this.localStore,new dM(this.R),this.documents,this.ro.id)];case 1:e=m.sent(),t=this.co(this.documents),o=0,u=this.queries,m.label=2;case 2:return o<u.length?[4,VC(this.localStore,c=u[o],t.get(c.name))]:[3,5];case 3:m.sent(),m.label=4;case 4:return o++,[3,2];case 5:return[2,(this.progress.taskState="Success",new J1(Object.assign({},this.progress),e))]}})})}}();var hM=function(i){this.key=i},pM=function(i){this.key=i},gM=function(){function i(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=Cn(),this.mutatedKeys=Cn(),this.lo=bf(e),this.fo=new YC(this.lo)}return Object.defineProperty(i.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),i.prototype._o=function(e,t){var o=this,u=t?t.mo:new cM,c=t?t.fo:this.fo,m=t?t.mutatedKeys:this.mutatedKeys,_=c,w=!1,S=vv(this.query)&&c.size===this.query.limit?c.last():null,x=$p(this.query)&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal(function(L,j){var q=c.get(L),X=Zu(o.query,j)?j:null,de=!!q&&o.mutatedKeys.has(q.key),Ee=!!X&&(X.hasLocalMutations||o.mutatedKeys.has(X.key)&&X.hasCommittedMutations),Re=!1;q&&X?q.data.isEqual(X.data)?de!==Ee&&(u.track({type:3,doc:X}),Re=!0):o.yo(q,X)||(u.track({type:2,doc:X}),Re=!0,(S&&o.lo(X,S)>0||x&&o.lo(X,x)<0)&&(w=!0)):!q&&X?(u.track({type:0,doc:X}),Re=!0):q&&!X&&(u.track({type:1,doc:q}),Re=!0,(S||x)&&(w=!0)),Re&&(X?(_=_.add(X),m=Ee?m.add(L):m.delete(L)):(_=_.delete(L),m=m.delete(L)))}),vv(this.query)||$p(this.query))for(;_.size>this.query.limit;){var O=vv(this.query)?_.last():_.first();_=_.delete(O.key),m=m.delete(O.key),u.track({type:1,doc:O})}return{fo:_,mo:u,Nn:w,mutatedKeys:m}},i.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},i.prototype.applyChanges=function(e,t,o){var u=this,c=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var m=e.mo.jr();m.sort(function(x,O){return j=O.type,(q=function(X){switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}})(x.type)-q(j)||u.lo(x.doc,O.doc);var j,q}),this.po(o);var _=t?this.Eo():[],w=0===this.ho.size&&this.current?1:0,S=w!==this.ao;return this.ao=w,0!==m.length||S?{snapshot:new QC(this.query,e.fo,c,m,e.mutatedKeys,0===w,S,!1),To:_}:{To:_}},i.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new cM,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},i.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},i.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach(function(o){return t.uo=t.uo.add(o)}),e.modifiedDocuments.forEach(function(o){}),e.removedDocuments.forEach(function(o){return t.uo=t.uo.delete(o)}),this.current=e.current)},i.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=Cn(),this.fo.forEach(function(u){e.Io(u.key)&&(e.ho=e.ho.add(u.key))});var o=[];return t.forEach(function(u){e.ho.has(u)||o.push(new pM(u))}),this.ho.forEach(function(u){t.has(u)||o.push(new hM(u))}),o},i.prototype.Ao=function(e){this.uo=e.Bn,this.ho=Cn();var t=this._o(e.documents);return this.applyChanges(t,!0)},i.prototype.Ro=function(){return QC.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},i}(),mM=function(i,e,t){this.query=i,this.targetId=e,this.view=t},yM=function(i){this.key=i,this.bo=!1},vM=function(){function i(e,t,o,u,c,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=m,this.vo={},this.Po=new Bf(function(_){return uC(_)},zp),this.Vo=new Map,this.So=new Set,this.Do=new Sr(ut.comparator),this.Co=new Map,this.No=new BC,this.xo={},this.Fo=new Map,this.ko=Rv.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(i.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),i}();function GR(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,u,c,m,_;return(0,B.Jh)(this,function(w){switch(w.label){case 0:return t=eE(i),(c=t.Po.get(e))?(t.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.Ro(),[3,4]):[3,1];case 1:return[4,Ja(t.localStore,uo(e))];case 2:return m=w.sent(),_=t.sharedClientState.addLocalQueryTarget(m.targetId),[4,sS(t,e,m.targetId,"current"===_)];case 3:u=w.sent(),t.isPrimaryClient&&mg(t.remoteStore,m),w.label=4;case 4:return[2,u]}})})}function sS(i,e,t,o){return(0,B.mG)(this,void 0,void 0,function(){var u,c,m,_,w,S;return(0,B.Jh)(this,function(x){switch(x.label){case 0:return i.Oo=function(O,L,j){return function(q,X,de,Ee){return(0,B.mG)(this,void 0,void 0,function(){var Re,Ve,Ze;return(0,B.Jh)(this,function(Xe){switch(Xe.label){case 0:return(Re=X.view._o(de)).Nn?[4,Pv(q.localStore,X.query,!1).then(function(Lt){return X.view._o(Lt.documents,Re)})]:[3,2];case 1:Re=Xe.sent(),Xe.label=2;case 2:return Ve=Ee&&Ee.targetChanges.get(X.targetId),Ze=X.view.applyChanges(Re,q.isPrimaryClient,Ve),[2,(ll(q,X.targetId,Ze.To),Ze.snapshot)]}})})}(i,O,L,j)},[4,Pv(i.localStore,e,!0)];case 1:return u=x.sent(),c=new gM(e,u.Bn),m=c._o(u.documents),_=hC.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),w=c.applyChanges(m,i.isPrimaryClient,_),ll(i,t,w.To),S=new mM(e,t,c),[2,(i.Po.set(e,S),i.Vo.has(t)?i.Vo.get(t).push(e):i.Vo.set(t,[e]),w.snapshot)]}})})}function qR(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return t=Ge(i),o=t.Po.get(e),(u=t.Vo.get(o.targetId)).length>1?[2,(t.Vo.set(o.targetId,u.filter(function(m){return!zp(m,e)})),void t.Po.delete(e))]:t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)?[3,2]:[4,Gf(t.localStore,o.targetId,!1).then(function(){t.sharedClientState.clearQueryState(o.targetId),sl(t.remoteStore,o.targetId),zf(t,o.targetId)}).catch(Uf)]):[3,3];case 1:c.sent(),c.label=2;case 2:return[3,5];case 3:return zf(t,o.targetId),[4,Gf(t.localStore,o.targetId,!0)];case 4:c.sent(),c.label=5;case 5:return[2]}})})}function _M(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u,c,m;return(0,B.Jh)(this,function(_){switch(_.label){case 0:o=gS(i),_.label=1;case 1:return _.trys.push([1,5,,6]),[4,(w=o.localStore,S=e,O=Ge(w),L=Wi.now(),j=S.reduce(function(q,X){return q.add(X.key)},Cn()),O.persistence.runTransaction("Locally write mutations","readwrite",function(q){return O.Mn.pn(q,j).next(function(X){x=X;for(var de=[],Ee=0,Re=S;Ee<Re.length;Ee++){var Ve=Re[Ee],Ze=R1(Ve,x.get(Ve.key));null!=Ze&&de.push(new Ya(Ve.key,Ze,gv(Ze.value.mapValue),Dr.exists(!0)))}return O._n.addMutationBatch(q,L,de,S)})}).then(function(q){return q.applyToLocalDocumentSet(x),{batchId:q.batchId,changes:x}}))];case 2:return u=_.sent(),o.sharedClientState.addPendingMutation(u.batchId),function(w,S,x){var O=w.xo[w.currentUser.toKey()];O||(O=new Sr(Qt)),O=O.insert(S,x),w.xo[w.currentUser.toKey()]=O}(o,u.batchId,t),[4,Xa(o,u.changes)];case 3:return _.sent(),[4,Oc(o.remoteStore)];case 4:return _.sent(),[3,6];case 5:return c=_.sent(),m=Wf(c,"Failed to persist write"),t.reject(m),[3,6];case 6:return[2]}var w,S,x,O,L,j})})}function aS(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o;return(0,B.Jh)(this,function(u){switch(u.label){case 0:t=Ge(i),u.label=1;case 1:return u.trys.push([1,4,,6]),[4,kC(t.localStore,e)];case 2:return o=u.sent(),e.targetChanges.forEach(function(c,m){var _=t.Co.get(m);_&&(bt(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?_.bo=!0:c.modifiedDocuments.size>0?bt(_.bo):c.removedDocuments.size>0&&(bt(_.bo),_.bo=!1))}),[4,Xa(t,o,e)];case 3:return u.sent(),[3,6];case 4:return[4,Uf(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function uS(i,e,t){var o=Ge(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){var u=[];o.Po.forEach(function(c,m){var _=m.view.zr(e);_.snapshot&&u.push(_.snapshot)}),function(c,m){var _=Ge(c);_.onlineState=m;var w=!1;_.queries.forEach(function(S,x){for(var O=0,L=x.listeners;O<L.length;O++)L[O].zr(m)&&(w=!0)}),w&&iS(_)}(o.eventManager,e),u.length&&o.vo._r(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function $R(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u,c,m,_,w;return(0,B.Jh)(this,function(S){switch(S.label){case 0:return(o=Ge(i)).sharedClientState.updateQueryState(e,"rejected",t),u=o.Co.get(e),(c=u&&u.key)?(m=(m=new Sr(ut.comparator)).insert(c,dr.newNoDocument(c,Bt.min())),_=Cn().add(c),w=new yD(Bt.min(),new Map,new Ct(Qt),m,_),[4,aS(o,w)]):[3,2];case 1:return S.sent(),o.Do=o.Do.remove(c),o.Co.delete(e),ZC(o),[3,4];case 2:return[4,Gf(o.localStore,e,!1).then(function(){return zf(o,e,t)}).catch(Uf)];case 3:S.sent(),S.label=4;case 4:return[2]}})})}function WR(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:t=Ge(i),o=e.batch.batchId,c.label=1;case 1:return c.trys.push([1,4,,6]),[4,fg(t.localStore,e)];case 2:return u=c.sent(),lS(t,o,null),KC(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),[4,Xa(t,u)];case 3:return c.sent(),[3,6];case 4:return[4,Uf(c.sent())];case 5:return c.sent(),[3,6];case 6:return[2]}})})}function zR(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:o=Ge(i),c.label=1;case 1:return c.trys.push([1,4,,6]),[4,(m=o.localStore,_=e,w=Ge(m),w.persistence.runTransaction("Reject batch","readwrite-primary",function(S){var x;return w._n.lookupMutationBatch(S,_).next(function(O){return bt(null!==O),x=O.keys(),w._n.removeMutationBatch(S,O)}).next(function(){return w._n.performConsistencyCheck(S)}).next(function(){return w.Mn.pn(S,x)})}))];case 2:return u=c.sent(),lS(o,e,t),KC(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),[4,Xa(o,u)];case 3:return c.sent(),[3,6];case 4:return[4,Uf(c.sent())];case 5:return c.sent(),[3,6];case 6:return[2]}var m,_,w})})}function YR(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u,c,m;return(0,B.Jh)(this,function(_){switch(_.label){case 0:al((t=Ge(i)).remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),_.label=1;case 1:return _.trys.push([1,3,,4]),[4,(w=t.localStore,S=Ge(w),S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(x){return S._n.getHighestUnacknowledgedBatchId(x)}))];case 2:return-1===(o=_.sent())?[2,void e.resolve()]:((u=t.Fo.get(o)||[]).push(e),t.Fo.set(o,u),[3,4]);case 3:return c=_.sent(),m=Wf(c,"Initialization of waitForPendingWrites() operation failed"),e.reject(m),[3,4];case 4:return[2]}var w,S})})}function KC(i,e){(i.Fo.get(e)||[]).forEach(function(t){t.resolve()}),i.Fo.delete(e)}function lS(i,e,t){var o=Ge(i),u=o.xo[o.currentUser.toKey()];if(u){var c=u.get(e);c&&(t?c.reject(t):c.resolve(),u=u.remove(e)),o.xo[o.currentUser.toKey()]=u}}function zf(i,e,t){void 0===t&&(t=null),i.sharedClientState.removeLocalQueryTarget(e);for(var o=0,u=i.Vo.get(e);o<u.length;o++){var c=u[o];i.Po.delete(c),t&&i.vo.Mo(c,t)}i.Vo.delete(e),i.isPrimaryClient&&i.No.Zn(e).forEach(function(m){i.No.containsKey(m)||Gv(i,m)})}function Gv(i,e){i.So.delete(e.path.canonicalString());var t=i.Do.get(e);null!==t&&(sl(i.remoteStore,t),i.Do=i.Do.remove(e),i.Co.delete(t),ZC(i))}function ll(i,e,t){for(var o=0,u=t;o<u.length;o++){var c=u[o];c instanceof hM?(i.No.addReference(c.key,e),cS(i,c)):c instanceof pM?(Ue("SyncEngine","Document no longer in limbo: "+c.key),i.No.removeReference(c.key,e),i.No.containsKey(c.key)||Gv(i,c.key)):st()}}function cS(i,e){var t=e.key,o=t.path.canonicalString();i.Do.get(t)||i.So.has(o)||(Ue("SyncEngine","New document in limbo: "+t),i.So.add(o),ZC(i))}function ZC(i){for(;i.So.size>0&&i.Do.size<i.maxConcurrentLimboResolutions;){var e=i.So.values().next().value;i.So.delete(e);var t=new ut(an.fromString(e)),o=i.ko.next();i.Co.set(o,new yM(t)),i.Do=i.Do.insert(t,o),mg(i.remoteStore,new TC(uo(yf(t.path)),o,2,$i.o))}}function Xa(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u,c,m;return(0,B.Jh)(this,function(_){switch(_.label){case 0:return o=Ge(i),u=[],c=[],m=[],o.Po.isEmpty()?[3,3]:(o.Po.forEach(function(w,S){m.push(o.Oo(S,e,t).then(function(x){if(x){o.isPrimaryClient&&o.sharedClientState.updateQueryState(S.targetId,x.fromCache?"not-current":"current"),u.push(x);var O=X1.Pn(S.targetId,x);c.push(O)}}))}),[4,Promise.all(m)]);case 1:return _.sent(),o.vo._r(u),[4,function(w,S){return(0,B.mG)(this,void 0,void 0,function(){var x,O,L,j,q,X,de,Re;return(0,B.Jh)(this,function(Ve){switch(Ve.label){case 0:x=Ge(w),Ve.label=1;case 1:return Ve.trys.push([1,3,,4]),[4,x.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Ze){return Le.forEach(S,function(Xe){return Le.forEach(Xe.bn,function(Lt){return x.persistence.referenceDelegate.addReference(Ze,Xe.targetId,Lt)}).next(function(){return Le.forEach(Xe.vn,function(Lt){return x.persistence.referenceDelegate.removeReference(Ze,Xe.targetId,Lt)})})})})];case 2:return Ve.sent(),[3,4];case 3:if(!Rc(O=Ve.sent()))throw O;return Ue("LocalStore","Failed to update sequence numbers: "+O),[3,4];case 4:for(L=0,j=S;L<j.length;L++)X=(q=j[L]).targetId,q.fromCache||(de=x.Fn.get(X),Re=de.withLastLimboFreeSnapshotVersion(de.snapshotVersion),x.Fn=x.Fn.insert(X,Re));return[2]}})})}(o.localStore,c)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}function JC(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o;return(0,B.Jh)(this,function(u){switch(u.label){case 0:return(t=Ge(i)).currentUser.isEqual(e)?[3,3]:(Ue("SyncEngine","User change. New user:",e.toKey()),[4,Hf(t.localStore,e)]);case 1:return o=u.sent(),t.currentUser=e,(c=t).Fo.forEach(function(_){_.forEach(function(w){w.reject(new Ne(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Fo.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),[4,Xa(t,o.Ln)];case 2:u.sent(),u.label=3;case 3:return[2]}var c})})}function dS(i,e){var t=Ge(i),o=t.Co.get(e);if(o&&o.bo)return Cn().add(o.key);var u=Cn(),c=t.Vo.get(e);if(!c)return u;for(var m=0,_=c;m<_.length;m++){var S=t.Po.get(_[m]);u=u.unionWith(S.view.wo)}return u}function fS(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return[4,Pv((t=Ge(i)).localStore,e.query,!0)];case 1:return o=c.sent(),u=e.view.Ao(o),[2,(t.isPrimaryClient&&ll(t,e.targetId,u.To),u)]}})})}function hS(i){return(0,B.mG)(this,void 0,void 0,function(){var e;return(0,B.Jh)(this,function(t){return[2,Fv((e=Ge(i)).localStore).then(function(o){return Xa(e,o)})]})})}function QR(i,e,t,o){return(0,B.mG)(this,void 0,void 0,function(){var u,c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:return[4,(_=(u=Ge(i)).localStore,w=e,S=Ge(_),x=Ge(S._n),S.persistence.runTransaction("Lookup mutation documents","readonly",function(O){return x.jt(O,w).next(function(L){return L?S.Mn.pn(O,L):Le.resolve(null)})}))];case 1:return null===(c=m.sent())?[3,6]:"pending"!==t?[3,3]:[4,Oc(u.remoteStore)];case 2:return m.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(lS(u,e,o||null),KC(u,e),function(_,w){Ge(Ge(_)._n).Gt(w)}(u.localStore,e)):st(),m.label=4;case 4:return[4,Xa(u,c)];case 5:return m.sent(),[3,7];case 6:Ue("SyncEngine","Cannot apply mutation batch with id: "+e),m.label=7;case 7:return[2]}var _,w,S,x})})}function pS(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u,c,m,w,S;return(0,B.Jh)(this,function(x){switch(x.label){case 0:return eE(t=Ge(i)),gS(t),!0!==e||!0===t.$o?[3,3]:(o=t.sharedClientState.getAllActiveQueryTargets(),[4,_g(t,o.toArray())]);case 1:return u=x.sent(),t.$o=!0,[4,Hv(t.remoteStore,!0)];case 2:for(x.sent(),c=0,m=u;c<m.length;c++)mg(t.remoteStore,m[c]);return[3,7];case 3:return!1!==e||!1===t.$o?[3,7]:(w=[],S=Promise.resolve(),t.Vo.forEach(function(O,L){t.sharedClientState.isLocalQueryTarget(L)?w.push(L):S=S.then(function(){return zf(t,L),Gf(t.localStore,L,!0)}),sl(t.remoteStore,L)}),[4,S]);case 4:return x.sent(),[4,_g(t,w)];case 5:return x.sent(),(L=Ge(t)).Co.forEach(function(j,q){sl(L.remoteStore,q)}),L.No.ts(),L.Co=new Map,L.Do=new Sr(ut.comparator),t.$o=!1,[4,Hv(t.remoteStore,!1)];case 6:x.sent(),x.label=7;case 7:return[2]}var L})})}function _g(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u,c,m,_,w,S,x,O,L,q,X,de;return(0,B.Jh)(this,function(Ee){switch(Ee.label){case 0:o=Ge(i),u=[],c=[],m=0,_=e,Ee.label=1;case 1:return m<_.length?(S=void 0,(x=o.Vo.get(w=_[m]))&&0!==x.length?[4,Ja(o.localStore,uo(x[0]))]:[3,7]):[3,13];case 2:S=Ee.sent(),O=0,L=x,Ee.label=3;case 3:return O<L.length?(q=o.Po.get(L[O]),[4,fS(o,q)]):[3,6];case 4:(X=Ee.sent()).snapshot&&c.push(X.snapshot),Ee.label=5;case 5:return O++,[3,3];case 6:return[3,11];case 7:return[4,nM(o.localStore,w)];case 8:return de=Ee.sent(),[4,Ja(o.localStore,de)];case 9:return S=Ee.sent(),[4,sS(o,XC(de),w,!1)];case 10:Ee.sent(),Ee.label=11;case 11:u.push(S),Ee.label=12;case 12:return m++,[3,1];case 13:return[2,(o.vo._r(c),u)]}})})}function XC(i){return uD(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function KR(i){var e=Ge(i);return Ge(Ge(e.localStore).persistence).fn()}function ZR(i,e,t,o){return(0,B.mG)(this,void 0,void 0,function(){var u,c,m;return(0,B.Jh)(this,function(_){switch(_.label){case 0:return(u=Ge(i)).$o?(Ue("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!u.Vo.has(e))return[3,8];switch(t){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Fv(u.localStore)];case 3:return c=_.sent(),m=yD.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,Xa(u,c,m)];case 4:return _.sent(),[3,8];case 5:return[4,Gf(u.localStore,e,!0)];case 6:return _.sent(),zf(u,e,o),[3,8];case 7:st(),_.label=8;case 8:return[2]}})})}function JR(i,e,t){return(0,B.mG)(this,void 0,void 0,function(){var o,u,c,m,_,w,S,x,O;return(0,B.Jh)(this,function(j){switch(j.label){case 0:if(!(o=eE(i)).$o)return[3,10];u=0,c=e,j.label=1;case 1:return u<c.length?o.Vo.has(m=c[u])?(Ue("SyncEngine","Adding an already active target "+m),[3,5]):[4,nM(o.localStore,m)]:[3,6];case 2:return _=j.sent(),[4,Ja(o.localStore,_)];case 3:return w=j.sent(),[4,sS(o,XC(_),w.targetId,!1)];case 4:j.sent(),mg(o.remoteStore,w),j.label=5;case 5:return u++,[3,1];case 6:S=function(q){return(0,B.Jh)(this,function(X){switch(X.label){case 0:return o.Vo.has(q)?[4,Gf(o.localStore,q,!1).then(function(){sl(o.remoteStore,q),zf(o,q)}).catch(Uf)]:[3,2];case 1:X.sent(),X.label=2;case 2:return[2]}})},x=0,O=t,j.label=7;case 7:return x<O.length?[5,S(O[x])]:[3,10];case 8:j.sent(),j.label=9;case 9:return x++,[3,7];case 10:return[2]}})})}function eE(i){var e=Ge(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=aS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$R.bind(null,e),e.vo._r=UR.bind(null,e.eventManager),e.vo.Mo=BR.bind(null,e.eventManager),e}function gS(i){var e=Ge(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zR.bind(null,e),e}var mS=function(){function i(){this.synchronizeTabs=!1}return i.prototype.initialize=function(e){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(t){switch(t.label){case 0:return this.R=gg(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},i.prototype.Uo=function(e){return null},i.prototype.Ko=function(e){return OD(this.persistence,new ND,e.initialUser,this.R)},i.prototype.qo=function(e){return new LD(UD.bs,this.R)},i.prototype.Bo=function(e){return new HD},i.prototype.terminate=function(){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},i}(),bM=function(i){function e(t,o,u){var c=this;return(c=i.call(this)||this).Qo=t,c.cacheSizeBytes=o,c.forceOwnership=u,c.synchronizeTabs=!1,c}return(0,B.ZT)(e,i),e.prototype.initialize=function(t){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(o){switch(o.label){case 0:return[4,i.prototype.initialize.call(this,t)];case 1:return o.sent(),[4,LC(this.localStore)];case 2:return o.sent(),[4,this.Qo.initialize(this,t)];case 3:return o.sent(),[4,gS(this.Qo.syncEngine)];case 4:return o.sent(),[4,Oc(this.Qo.remoteStore)];case 5:return o.sent(),[2]}})})},e.prototype.Ko=function(t){return OD(this.persistence,new ND,t.initialUser,this.R)},e.prototype.Uo=function(t){return new OC(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var o=FC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?fs.withCacheSize(this.cacheSizeBytes):fs.DEFAULT;return new xD(this.synchronizeTabs,o,t.clientId,u,t.asyncQueue,GD(),pg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new HD},e}(mS),XR=function(i){function e(t,o){var u=this;return(u=i.call(this,t,o,!1)||this).Qo=t,u.cacheSizeBytes=o,u.synchronizeTabs=!0,u}return(0,B.ZT)(e,i),e.prototype.initialize=function(t){return(0,B.mG)(this,void 0,void 0,function(){var o,u=this;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return[4,i.prototype.initialize.call(this,t)];case 1:return c.sent(),o=this.Qo.syncEngine,this.sharedClientState instanceof ol?(this.sharedClientState.syncEngine={ui:QR.bind(null,o),ai:ZR.bind(null,o),hi:JR.bind(null,o),fn:KR.bind(null,o),ci:hS.bind(null,o)},[4,this.sharedClientState.start()]):[3,3];case 2:c.sent(),c.label=3;case 3:return[4,this.persistence.He(function(m){return(0,B.mG)(u,void 0,void 0,function(){return(0,B.Jh)(this,function(_){switch(_.label){case 0:return[4,pS(this.Qo.syncEngine,m)];case 1:return _.sent(),this.gcScheduler&&(m&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):m||this.gcScheduler.stop()),[2]}})})})];case 4:return c.sent(),[2]}})})},e.prototype.Bo=function(t){var o=GD();if(!ol.yt(o))throw new Ne(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var u=FC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ol(o,t.asyncQueue,u,t.clientId,t.initialUser)},e}(bM),bg=function(){function i(){}return i.prototype.initialize=function(e,t){return(0,B.mG)(this,void 0,void 0,function(){var o=this;return(0,B.Jh)(this,function(u){switch(u.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(c){return uS(o.syncEngine,c,1)},this.remoteStore.remoteSyncer.handleCredentialChange=JC.bind(null,this.syncEngine),[4,Hv(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:u.sent(),u.label=2;case 2:return[2]}})})},i.prototype.createEventManager=function(e){return new VR},i.prototype.createDatastore=function(e){var o=gg(e.databaseInfo.databaseId),u=new qC(e.databaseInfo);return new Uv(e.credentials,u,o)},i.prototype.createRemoteStore=function(e){var t,o,u,c,m,_=this;return t=this.localStore,o=this.datastore,u=e.asyncQueue,c=function(w){return uS(_.syncEngine,w,0)},m=sM.yt()?new sM:new oM,new kR(t,o,u,c,m)},i.prototype.createSyncEngine=function(e,t){return S=t,x=new vM(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions),S&&(x.$o=!0),x;var S,x},i.prototype.terminate=function(){return function(e){return(0,B.mG)(this,void 0,void 0,function(){var t;return(0,B.Jh)(this,function(o){switch(o.label){case 0:return t=Ge(e),Ue("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,$f(t)];case 1:return o.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}})})}(this.remoteStore)},i}(),tE=function(){function i(e){this.observer=e,this.muted=!1}return i.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},i.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},i.prototype.Wo=function(){this.muted=!0},i.prototype.jo=function(e,t){var o=this;this.muted||setTimeout(function(){o.muted||e(t)},0)},i}(),CM=(function(){function i(e,t){var o=this;this.Go=e,this.R=t,this.metadata=new hi,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(u){u&&u.io()?o.metadata.resolve(u.payload.metadata):o.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==u?void 0:u.payload)))},function(u){return o.metadata.reject(u)})}i.prototype.close=function(){return this.Go.cancel()},i.prototype.getMetadata=function(){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){return[2,this.metadata.promise]})})},i.prototype.Lo=function(){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},i.prototype.Ho=function(){return(0,B.mG)(this,void 0,void 0,function(){var e,t,o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return[4,this.Jo()];case 1:return null===(e=c.sent())?[2,null]:(t=this.zo.decode(e),o=Number(t),isNaN(o)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(o)]);case 2:return u=c.sent(),[2,new jR(JSON.parse(u),e.length+o)]}})})},i.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})},i.prototype.Jo=function(){return(0,B.mG)(this,void 0,void 0,function(){var e,t;return(0,B.Jh)(this,function(o){switch(o.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(o.sent())return[3,3];o.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}})})},i.prototype.Xo=function(e){return(0,B.mG)(this,void 0,void 0,function(){var t;return(0,B.Jh)(this,function(o){switch(o.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:o.sent()&&this.Yo("Reached the end of bundle when more is expected."),o.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}})})},i.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},i.prototype.tc=function(){return(0,B.mG)(this,void 0,void 0,function(){var e,t;return(0,B.Jh)(this,function(o){switch(o.label){case 0:return[4,this.Go.read()];case 1:return(e=o.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}})})}}(),function(){function i(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return i.prototype.lookup=function(e){return(0,B.mG)(this,void 0,void 0,function(){var t,o=this;return(0,B.Jh)(this,function(u){switch(u.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ne(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(c,m){return(0,B.mG)(this,void 0,void 0,function(){var _,w,S,x,O,L;return(0,B.Jh)(this,function(j){switch(j.label){case 0:return _=Ge(c),w=el(_.R)+"/documents",S={documents:m.map(function(q){return Ac(_.R,q)})},[4,_.$i("BatchGetDocuments",w,S)];case 1:return x=j.sent(),O=new Map,x.forEach(function(q){var de,Ee,X=(de=_.R,"found"in(Ee=q)?function(Re,Ve){bt(!!Ve.found);var Ze=us(Re,Ve.found.name),Xe=Ir(Ve.found.updateTime),Lt=new Po({mapValue:{fields:Ve.found.fields}});return dr.newFoundDocument(Ze,Xe,Lt)}(de,Ee):"missing"in Ee?function(Re,Ve){bt(!!Ve.missing),bt(!!Ve.readTime);var Ze=us(Re,Ve.missing),Xe=Ir(Ve.readTime);return dr.newNoDocument(Ze,Xe)}(de,Ee):st());O.set(X.key.toString(),X)}),L=[],[2,(m.forEach(function(q){var X=O.get(q.toString());bt(!!X),L.push(X)}),L)]}})})}(this.datastore,e)];case 1:return[2,((t=u.sent()).forEach(function(c){return o.recordVersion(c)}),t)]}})})},i.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},i.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())},i.prototype.delete=function(e){this.write(new Jp(e,this.precondition(e))),this.writtenDocs.add(e.toString())},i.prototype.commit=function(){return(0,B.mG)(this,void 0,void 0,function(){var e,t=this;return(0,B.Jh)(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(u){e.delete(u.key.toString())}),e.forEach(function(u,c){var m=ut.fromPath(c);t.mutations.push(new wv(m,t.precondition(m)))}),[4,function(u,c){return(0,B.mG)(this,void 0,void 0,function(){var m,_,w;return(0,B.Jh)(this,function(S){switch(S.label){case 0:return m=Ge(u),_=el(m.R)+"/documents",w={writes:c.map(function(x){return Mc(m.R,x)})},[4,m.Ni("Commit",_,w)];case 1:return S.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return o.sent(),this.committed=!0,[2]}})})},i.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Bt.min()}var o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Ne(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},i.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Dr.updateTime(t):Dr.none()},i.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bt.min()))throw new Ne(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dr.updateTime(t)}return Dr.exists(!0)},i.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},i.prototype.ensureCommitNotCalled=function(){},i}()),tN=function(){function i(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.ec=5,this.Zi=new $C(this.asyncQueue,"transaction_retry")}return i.prototype.run=function(){this.ec-=1,this.nc()},i.prototype.nc=function(){var e=this;this.Zi.ji(function(){return(0,B.mG)(e,void 0,void 0,function(){var t,o,u=this;return(0,B.Jh)(this,function(c){return t=new CM(this.datastore),(o=this.sc(t))&&o.then(function(m){u.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){u.deferred.resolve(m)}).catch(function(_){u.ic(_)})})}).catch(function(m){u.ic(m)}),[2]})})})},i.prototype.sc=function(e){try{var t=this.updateFunction(e);return!Ec(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(o){return this.deferred.reject(o),null}},i.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return t.nc(),Promise.resolve()})):this.deferred.reject(e)},i.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!dC(t)}return!1},i}(),vS=function(){function i(e,t,o){var u=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=o,this.user=Ii.UNAUTHENTICATED,this.clientId=Xb.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,function(c){return(0,B.mG)(u,void 0,void 0,function(){return(0,B.Jh)(this,function(m){switch(m.label){case 0:return Ue("FirestoreClient","Received user=",c.uid),[4,this.credentialListener(c)];case 1:return m.sent(),this.user=c,[2]}})})})}return i.prototype.getConfiguration=function(){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},i.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},i.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")},i.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,B.mG)(e,void 0,void 0,function(){var o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:c.sent(),c.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:c.sent(),c.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return o=c.sent(),u=Wf(o,"Failed to shutdown persistence"),t.reject(u),[3,6];case 6:return[2]}})})}),t.promise},i}();function _S(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o,u=this;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return i.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return t=c.sent(),[4,e.initialize(t)];case 2:return c.sent(),o=t.initialUser,i.setCredentialChangeListener(function(m){return(0,B.mG)(u,void 0,void 0,function(){return(0,B.Jh)(this,function(_){switch(_.label){case 0:return o.isEqual(m)?[3,2]:[4,Hf(e.localStore,m)];case 1:_.sent(),o=m,_.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=e,[2]}})})}function EM(i,e){return(0,B.mG)(this,void 0,void 0,function(){var t,o;return(0,B.Jh)(this,function(u){switch(u.label){case 0:return i.asyncQueue.verifyOperationInProgress(),[4,bS(i)];case 1:return t=u.sent(),Ue("FirestoreClient","Initializing OnlineComponentProvider"),[4,i.getConfiguration()];case 2:return o=u.sent(),[4,e.initialize(t,o)];case 3:return u.sent(),i.setCredentialChangeListener(function(c){return function(m,_){return(0,B.mG)(this,void 0,void 0,function(){var w,S;return(0,B.Jh)(this,function(x){switch(x.label){case 0:return(w=Ge(m)).asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials"),S=al(w),w.Or.add(3),[4,$f(w)];case 1:return x.sent(),S&&w.Br.set("Unknown"),[4,w.remoteSyncer.handleCredentialChange(_)];case 2:return x.sent(),w.Or.delete(3),[4,qf(w)];case 3:return x.sent(),[2]}})})}(e.remoteStore,c)}),i.onlineComponents=e,[2]}})})}function bS(i){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){switch(e.label){case 0:return i.offlineComponents?[3,2]:(Ue("FirestoreClient","Using default OfflineComponentProvider"),[4,_S(i,new mS)]);case 1:e.sent(),e.label=2;case 2:return[2,i.offlineComponents]}})})}function $v(i){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){switch(e.label){case 0:return i.onlineComponents?[3,2]:(Ue("FirestoreClient","Using default OnlineComponentProvider"),[4,EM(i,new bg)]);case 1:e.sent(),e.label=2;case 2:return[2,i.onlineComponents]}})})}function Yf(i){return bS(i).then(function(e){return e.persistence})}function nE(i){return bS(i).then(function(e){return e.localStore})}function CS(i){return $v(i).then(function(e){return e.remoteStore})}function rE(i){return $v(i).then(function(e){return e.syncEngine})}function cl(i){return(0,B.mG)(this,void 0,void 0,function(){var e,t;return(0,B.Jh)(this,function(o){switch(o.label){case 0:return[4,$v(i)];case 1:return e=o.sent(),[2,((t=e.eventManager).onListen=GR.bind(null,e.syncEngine),t.onUnlisten=qR.bind(null,e.syncEngine),t)]}})})}function ES(i,e,t){var o=this;void 0===t&&(t={});var u=new hi;return i.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(o,void 0,void 0,function(){var c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:return c=function(_,w,S,x,O){var L=new tE({next:function(q){w.enqueueAndForget(function(){return rS(_,j)});var X=q.docs.has(S);!X&&q.fromCache?O.reject(new Ne(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):X&&q.fromCache&&x&&"server"===x.source?O.reject(new Ne(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):O.resolve(q)},error:function(q){return O.reject(q)}}),j=new oS(yf(S.path),L,{includeMetadataChanges:!0,so:!0});return nS(_,j)},[4,cl(i)];case 1:return[2,c.apply(void 0,[m.sent(),i.asyncQueue,e,t,u])]}})})}),u.promise}function Yi(i,e,t){var o=this;void 0===t&&(t={});var u=new hi;return i.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(o,void 0,void 0,function(){var c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:return c=function(_,w,S,x,O){var L=new tE({next:function(q){w.enqueueAndForget(function(){return rS(_,j)}),q.fromCache&&"server"===x.source?O.reject(new Ne(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):O.resolve(q)},error:function(q){return O.reject(q)}}),j=new oS(S,L,{includeMetadataChanges:!0,so:!0});return nS(_,j)},[4,cl(i)];case 1:return[2,c.apply(void 0,[m.sent(),i.asyncQueue,e,t,u])]}})})}),u.promise}var wM=function(i,e,t,o,u,c,m,_){this.databaseId=i,this.appId=e,this.persistenceKey=t,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.useFetchStreams=_},Qf=function(){function i(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(i.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return e instanceof i&&e.projectId===this.projectId&&e.database===this.database},i}(),wS=new Map,TS=function(i,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+i},Wv=function(){function i(){this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(null)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable(function(){return t(Ii.UNAUTHENTICATED)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),DS=function(){function i(e){this.token=e,this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(this.token)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(e,t){var o=this;this.changeListener=t,e.enqueueRetryable(function(){return t(o.token.user)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),SS=function(){function i(e){var t=this;this.currentUser=Ii.UNAUTHENTICATED,this.oc=new hi,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable(function(){return t.changeListener(t.currentUser)})};var o=function(u){Ue("FirebaseCredentialsProvider","Auth detected"),t.auth=u,t.auth.addAuthTokenListener(t.uc)};e.onInit(function(u){return o(u)}),setTimeout(function(){if(!t.auth){var u=e.getImmediate({optional:!0});u?o(u):(Ue("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}},0)}return i.prototype.getToken=function(){var e=this,t=this.cc,o=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(o).then(function(u){return e.cc!==t?(Ue("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):u?(bt("string"==typeof u.accessToken),new TS(u.accessToken,e.currentUser)):null}):Promise.resolve(null)},i.prototype.invalidateToken=function(){this.forceRefresh=!0},i.prototype.setChangeListener=function(e,t){var o=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return(0,B.mG)(o,void 0,void 0,function(){return(0,B.Jh)(this,function(u){switch(u.label){case 0:return[4,this.oc.promise];case 1:return u.sent(),[4,t(this.currentUser)];case 2:return u.sent(),this.changeListener=t,[2]}})})})},i.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},i.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Ii(e)},i}(),TM=function(){function i(e,t,o){this.hc=e,this.lc=t,this.fc=o,this.type="FirstParty",this.user=Ii.FIRST_PARTY}return Object.defineProperty(i.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),i}(),IS=function(){function i(e,t,o){this.hc=e,this.lc=t,this.fc=o}return i.prototype.getToken=function(){return Promise.resolve(new TM(this.hc,this.lc,this.fc))},i.prototype.setChangeListener=function(e,t){e.enqueueRetryable(function(){return t(Ii.FIRST_PARTY)})},i.prototype.removeChangeListener=function(){},i.prototype.invalidateToken=function(){},i}();function zv(i,e,t){if(!t)throw new Ne(_e.INVALID_ARGUMENT,"Function "+i+"() cannot be called with an empty "+e+".")}function iE(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne(_e.INVALID_ARGUMENT,"Invalid options passed to function "+i+'(): You cannot specify both "merge" and "mergeFields".');return e}function AS(i,e,t,o){if(!0===e&&!0===o)throw new Ne(_e.INVALID_ARGUMENT,i+" and "+t+" cannot be used together.")}function Yv(i){if(!ut.isDocumentKey(i))throw new Ne(_e.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+i+" has "+i.length+".")}function oE(i){if(ut.isDocumentKey(i))throw new Ne(_e.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+i+" has "+i.length+".")}function Cg(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=i.substring(0,20)+"..."),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";var e=function(t){if(t.constructor){var o=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(o&&o.length>1)return o[1]}return null}(i);return e?"a custom "+e+" object":"an object"}return"function"==typeof i?"a function":st()}function on(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ne(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var t=Cg(i);throw new Ne(_e.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}return i}function MS(i,e){if(e<=0)throw new Ne(_e.INVALID_ARGUMENT,"Function "+i+"() requires a positive number, but it was: "+e+".")}var Uo=function(){function i(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,AS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return i.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},i}(),Eg=function(){function i(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uo({}),this._settingsFrozen=!1,e instanceof Qf?(this._databaseId=e,this._credentials=new Wv):(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ne(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qf(o.options.projectId)}(e),this._credentials=new SS(t))}return Object.defineProperty(i.prototype,"app",{get:function(){if(!this._app)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),i.prototype._setSettings=function(e){if(this._settingsFrozen)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uo(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new Wv;switch(t.type){case"gapi":var o=t.client;return bt(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new IS(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(_e.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},i.prototype._getSettings=function(){return this._settings},i.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},i.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},i.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},i.prototype._terminate=function(){return(t=wS.get(this))&&(Ue("ComponentProvider","Removing Datastore"),wS.delete(this),t.terminate()),Promise.resolve();var t},i}(),Qn=function(){function i(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}return Object.defineProperty(i.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new Fc(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),i.prototype.withConverter=function(e){return new i(this.firestore,e,this._key)},i}(),Qi=function(){function i(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}return i.prototype.withConverter=function(e){return new i(this.firestore,e,this._query)},i}(),Fc=function(i){function e(t,o,u){var c=this;return(c=i.call(this,t,o,yf(u))||this)._path=u,c.type="collection",c}return(0,B.ZT)(e,i),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Qn(this.firestore,null,new ut(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Qi);function xS(i,e){for(var t,o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];if(i=(0,Jt.m9)(i),zv("collection","path",e),i instanceof Eg)return oE(t=an.fromString.apply(an,(0,B.ev)([e],o))),new Fc(i,null,t);if(!(i instanceof Qn||i instanceof Fc))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return oE(t=an.fromString.apply(an,(0,B.ev)([i.path],o)).child(an.fromString(e))),new Fc(i.firestore,null,t)}function Qv(i,e){for(var t,o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];if(i=(0,Jt.m9)(i),1===arguments.length&&(e=Xb.u()),zv("doc","path",e),i instanceof Eg)return Yv(t=an.fromString.apply(an,(0,B.ev)([e],o))),new Qn(i,null,new ut(t));if(!(i instanceof Qn||i instanceof Fc))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Yv(t=i._path.child(an.fromString.apply(an,(0,B.ev)([e],o)))),new Qn(i.firestore,i instanceof Fc?i.converter:null,new ut(t))}function RS(i,e){return i=(0,Jt.m9)(i),e=(0,Jt.m9)(e),(i instanceof Qn||i instanceof Fc)&&(e instanceof Qn||e instanceof Fc)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function DM(i,e){return i=(0,Jt.m9)(i),e=(0,Jt.m9)(e),i instanceof Qi&&e instanceof Qi&&i.firestore===e.firestore&&zp(i._query,e._query)&&i.converter===e.converter}var SM=function(){function i(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new $C(this,"async_queue_retry"),this.Ic=function(){var o=pg();o&&Ue("AsyncQueue","Visibility state changed to "+o.visibilityState),e.Zi.Gi()};var t=pg();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(i.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),i.prototype.enqueueAndForget=function(e){this.enqueue(e)},i.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},i.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=pg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},i.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise(function(){});var o=new hi;return this.Rc(function(){return t._c&&t.Ec?Promise.resolve():(e().then(o.resolve,o.reject),o.promise)}).then(function(){return o.promise})},i.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget(function(){return t.wc.push(e),t.bc()})},i.prototype.bc=function(){return(0,B.mG)(this,void 0,void 0,function(){var e,t=this;return(0,B.Jh)(this,function(o){switch(o.label){case 0:if(0===this.wc.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return o.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Rc(e=o.sent()))throw e;return Ue("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return t.bc()}),o.label=5;case 5:return[2]}})})},i.prototype.Rc=function(e){var t=this,o=this.dc.then(function(){return t.gc=!0,e().catch(function(u){throw t.yc=u,t.gc=!1,cr("INTERNAL UNHANDLED ERROR: ",(m=(c=u).message||"",c.stack&&(m=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),m)),u;var c,m}).then(function(u){return t.gc=!1,u})});return this.dc=o,o},i.prototype.enqueueAfterDelay=function(e,t,o){var u=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var c=lM.createAndSchedule(this,e,t,o,function(m){return u.vc(m)});return this.mc.push(c),c},i.prototype.Ac=function(){this.yc&&st()},i.prototype.verifyOperationInProgress=function(){},i.prototype.Pc=function(){return(0,B.mG)(this,void 0,void 0,function(){var e;return(0,B.Jh)(this,function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}})})},i.prototype.Vc=function(e){for(var t=0,o=this.mc;t<o.length;t++)if(o[t].timerId===e)return!0;return!1},i.prototype.Sc=function(e){var t=this;return this.Pc().then(function(){t.mc.sort(function(m,_){return m.targetTimeMs-_.targetTimeMs});for(var o=0,u=t.mc;o<u.length;o++){var c=u[o];if(c.skipDelay(),"all"!==e&&c.timerId===e)break}return t.Pc()})},i.prototype.Dc=function(e){this.Tc.push(e)},i.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},i}();function kc(i){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var o=e,u=0,c=["next","error","complete"];u<c.length;u++){var m=c[u];if(m in o&&"function"==typeof o[m])return!0}return!1}(i)}!function(){function i(){this._progressObserver={},this._taskCompletionResolver=new hi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}i.prototype.onProgress=function(e,t,o){this._progressObserver={next:e,error:t,complete:o}},i.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},i.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},i.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},i.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},i.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}();var Kn=function(i){function e(t,o){var u=this;return(u=i.call(this,t,o)||this).type="firestore",u._queue=new SM,u._persistenceKey="name"in t?t.name:"[DEFAULT]",u}return(0,B.ZT)(e,i),e.prototype._terminate=function(){return this._firestoreClient||MM(this),this._firestoreClient.terminate()},e}(Eg);function kr(i){return i._firestoreClient||MM(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function MM(i){var e,c,_,t=i._freezeSettings(),o=(c=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new wM(i._databaseId,c,i._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));i._firestoreClient=new vS(i._credentials,i._queue,o)}function sE(i,e,t){var o=this,u=new hi;return i.asyncQueue.enqueue(function(){return(0,B.mG)(o,void 0,void 0,function(){var c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:return m.trys.push([0,3,,4]),[4,_S(i,t)];case 1:return m.sent(),[4,EM(i,e)];case 2:return m.sent(),u.resolve(),[3,4];case 3:if(!("FirebaseError"===(_=c=m.sent()).name?_.code===_e.FAILED_PRECONDITION||_.code===_e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&_ instanceof DOMException)||22===_.code||20===_.code||11===_.code))throw c;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),u.reject(c),[3,4];case 4:return[2]}var _})})}).then(function(){return u.promise})}function aE(i){if(i._initialized||i._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sa=function(){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o=0;o<e.length;++o)if(0===e[o].length)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ss(e)}return i.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},i}(),Lc=function(){function i(e){this._byteString=e}return i.fromBase64String=function(e){try{return new i(Si.fromBase64String(e))}catch(t){throw new Ne(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},i.fromUint8Array=function(e){return new i(Si.fromUint8Array(e))},i.prototype.toBase64=function(){return this._byteString.toBase64()},i.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},i.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},i.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},i}(),dl=function(i){this._methodName=i},fl=function(){function i(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(i.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},i.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},i.prototype._compareTo=function(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)},i}(),uE=/^__.*__$/,NS=function(){function i(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}return i.prototype.toMutation=function(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zp(e,this.data,t,this.fieldTransforms)},i}(),OS=function(){function i(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}return i.prototype.toMutation=function(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)},i}();function PS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}var xM=function(){function i(e,t,o,u,c,m){this.settings=e,this.databaseId=t,this.R=o,this.ignoreUndefinedProperties=u,void 0===c&&this.Cc(),this.fieldTransforms=c||[],this.fieldMask=m||[]}return Object.defineProperty(i.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),i.prototype.xc=function(e){return new i(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},i.prototype.Fc=function(e){var t,o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.xc({path:o,kc:!1});return u.$c(e),u},i.prototype.Oc=function(e){var t,o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.xc({path:o,kc:!1});return u.Cc(),u},i.prototype.Mc=function(e){return this.xc({path:void 0,kc:!0})},i.prototype.Lc=function(e){return Xv(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},i.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},i.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},i.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(PS(this.Nc)&&uE.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},i}(),nN=function(){function i(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=o||gg(e)}return i.prototype.Uc=function(e,t,o,u){return void 0===u&&(u=!1),new xM({Nc:e,methodName:t,qc:o,path:ss.emptyPath(),kc:!1,Bc:u},this.databaseId,this.R,this.ignoreUndefinedProperties)},i}();function Kf(i){var e=i._freezeSettings(),t=gg(i._databaseId);return new nN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function wg(i,e,t,o,u,c){void 0===c&&(c={});var m=i.Uc(c.merge||c.mergeFields?2:0,e,t,u);Zv("Data must be an object, but it was:",m,o);var _,w,S=Ar(o,m);if(c.merge)_=new hf(m.fieldMask),w=m.fieldTransforms;else if(c.mergeFields){for(var x=[],O=0,L=c.mergeFields;O<L.length;O++){var j=Jv(e,L[O],t);if(!m.contains(j))throw new Ne(_e.INVALID_ARGUMENT,"Field '"+j+"' is specified in your field mask but missing from your input data.");BS(x,j)||x.push(j)}_=new hf(x),w=m.fieldTransforms.filter(function(q){return _.covers(q.field)})}else _=null,w=m.fieldTransforms;return new NS(new Po(S),_,w)}var Kv=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,B.ZT)(e,i),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(dl);function FS(i,e,t){return new xM({Nc:3,qc:e.settings.qc,methodName:i._methodName,kc:t},e.databaseId,e.R,e.ignoreUndefinedProperties)}var RM=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,B.ZT)(e,i),e.prototype._toFieldTransform=function(t){return new Yp(t.path,new Cf)},e.prototype.isEqual=function(t){return t instanceof e},e}(dl),NM=function(i){function e(t,o){var u=this;return(u=i.call(this,t)||this).Kc=o,u}return(0,B.ZT)(e,i),e.prototype._toFieldTransform=function(t){var o=FS(this,t,!0),u=this.Kc.map(function(m){return eu(m,o)}),c=new Dc(u);return new Yp(t.path,c)},e.prototype.isEqual=function(t){return this===t},e}(dl),OM=function(i){function e(t,o){var u=this;return(u=i.call(this,t)||this).Kc=o,u}return(0,B.ZT)(e,i),e.prototype._toFieldTransform=function(t){var o=FS(this,t,!0),u=this.Kc.map(function(m){return eu(m,o)}),c=new Sc(u);return new Yp(t.path,c)},e.prototype.isEqual=function(t){return this===t},e}(dl),kS=function(i){function e(t,o){var u=this;return(u=i.call(this,t)||this).Qc=o,u}return(0,B.ZT)(e,i),e.prototype._toFieldTransform=function(t){var o=new Ef(t.R,cD(t.R,this.Qc));return new Yp(t.path,o)},e.prototype.isEqual=function(t){return this===t},e}(dl);function LS(i,e,t,o){var u=i.Uc(1,e,t);Zv("Data must be an object, but it was:",u,o);var c=[],m=Po.empty();Yu(o,function(w,S){var x=Zf(e,w,t);S=(0,Jt.m9)(S);var O=u.Oc(x);if(S instanceof Kv)c.push(x);else{var L=eu(S,O);null!=L&&(c.push(x),m.set(x,L))}});var _=new hf(c);return new OS(m,_,u.fieldTransforms)}function VS(i,e,t,o,u,c){var m=i.Uc(1,e,t),_=[Jv(e,o,t)],w=[u];if(c.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var S=0;S<c.length;S+=2)_.push(Jv(e,c[S])),w.push(c[S+1]);for(var x=[],O=Po.empty(),L=_.length-1;L>=0;--L)if(!BS(x,_[L])){var j=_[L],q=w[L];q=(0,Jt.m9)(q);var X=m.Oc(j);if(q instanceof Kv)x.push(j);else{var de=eu(q,X);null!=de&&(x.push(j),O.set(j,de))}}var Ee=new hf(x);return new OS(O,Ee,m.fieldTransforms)}function US(i,e,t,o){return void 0===o&&(o=!1),eu(t,i.Uc(o?4:3,e))}function eu(i,e){if(PM(i=(0,Jt.m9)(i)))return Zv("Unsupported field value:",e,i),Ar(i,e);if(i instanceof dl)return function(t,o){if(!PS(o.Nc))throw o.Lc(t._methodName+"() can only be used with update() and set()");if(!o.path)throw o.Lc(t._methodName+"() is not currently supported inside arrays");var u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,o){for(var u=[],c=0,m=0,_=t;m<_.length;m++){var w=eu(_[m],o.Mc(c));null==w&&(w={nullValue:"NULL_VALUE"}),u.push(w),c++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cD(o.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var u=Wi.fromDate(t);return{timestampValue:ng(o.R,u)}}if(t instanceof Wi)return u=new Wi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ng(o.R,u)};if(t instanceof fl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lc)return{bytesValue:Ju(o.R,t._byteString)};if(t instanceof Qn){var c=t.firestore._databaseId;if(!c.isEqual(u=o.databaseId))throw o.Lc("Document reference is for database "+c.projectId+"/"+c.database+" but should be for database "+u.projectId+"/"+u.database);return{referenceValue:rg(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.Lc("Unsupported field value: "+Cg(t))}(i,e)}function Ar(i,e){var t={};return rD(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yu(i,function(o,u){var c=eu(u,e.Fc(o));null!=c&&(t[o]=c)}),{mapValue:{fields:t}}}function PM(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Wi||i instanceof fl||i instanceof Lc||i instanceof Qn||i instanceof dl)}function Zv(i,e,t){if(!PM(t)||"object"!=typeof(u=t)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){var o=Cg(t);throw e.Lc("an object"===o?i+" a custom object":i+" "+o)}var u}function Jv(i,e,t){if((e=(0,Jt.m9)(e))instanceof sa)return e._internalPath;if("string"==typeof e)return Zf(i,e);throw Xv("Field path arguments must be of type string or FieldPath.",i,!1,void 0,t)}var FM=new RegExp("[~\\*/\\[\\]]");function Zf(i,e,t){if(e.search(FM)>=0)throw Xv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",i,!1,void 0,t);try{return(new(sa.bind.apply(sa,(0,B.ev)([void 0],e.split(".")))))._internalPath}catch(o){throw Xv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",i,!1,void 0,t)}}function Xv(i,e,t,o,u){var c=o&&!o.isEmpty(),m=void 0!==u,_="Function "+e+"() called with invalid data";t&&(_+=" (via `toFirestore()`)");var w="";return(c||m)&&(w+=" (found",c&&(w+=" in field "+o),m&&(w+=" in document "+u),w+=")"),new Ne(_e.INVALID_ARGUMENT,(_+=". ")+i+w)}function BS(i,e){return i.some(function(t){return t.isEqual(e)})}var Jf=function(){function i(e,t,o,u,c){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=c}return Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ref",{get:function(){return new Qn(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),i.prototype.exists=function(){return null!==this._document},i.prototype.data=function(){if(this._document){if(this._converter){var e=new Vc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},i.prototype.get=function(e){if(this._document){var t=this._document.data.field(Tg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},i}(),Vc=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,B.ZT)(e,i),e.prototype.data=function(){return i.prototype.data.call(this)},e}(Jf);function Tg(i,e){return"string"==typeof e?Zf(i,e):e instanceof sa?e._internalPath:e._delegate._internalPath}var tu=function(){function i(e,t){this.hasPendingWrites=e,this.fromCache=t}return i.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},i}(),ps=function(i){function e(t,o,u,c,m,_){var w=this;return(w=i.call(this,t,o,u,c,_)||this)._firestore=t,w._firestoreImpl=t,w.metadata=m,w}return(0,B.ZT)(e,i),e.prototype.exists=function(){return i.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var o=new Dg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,o){if(void 0===o&&(o={}),this._document){var u=this._document.data.field(Tg("DocumentSnapshot.get",t));if(null!==u)return this._userDataWriter.convertValue(u,o.serverTimestamps)}},e}(Jf),Dg=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,B.ZT)(e,i),e.prototype.data=function(t){return void 0===t&&(t={}),i.prototype.data.call(this,t)},e}(ps),gs=function(){function i(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new tu(u.hasPendingWrites,u.fromCache),this.query=o}return Object.defineProperty(i.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(e,t){var o=this;this._snapshot.docs.forEach(function(u){e.call(t,new Dg(o._firestore,o._userDataWriter,u.key,u,new tu(o._snapshot.mutatedKeys.has(u.key),o._snapshot.fromCache),o.query.converter))})},i.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){var c=0;return o._snapshot.docChanges.map(function(_){return{type:"added",doc:new Dg(o._firestore,o._userDataWriter,_.doc.key,_.doc,new tu(o._snapshot.mutatedKeys.has(_.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:c++}})}var m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(function(_){return u||3!==_.type}).map(function(_){var w=new Dg(o._firestore,o._userDataWriter,_.doc.key,_.doc,new tu(o._snapshot.mutatedKeys.has(_.doc.key),o._snapshot.fromCache),o.query.converter),S=-1,x=-1;return 0!==_.type&&(S=m.indexOf(_.doc.key),m=m.delete(_.doc.key)),1!==_.type&&(x=(m=m.add(_.doc)).indexOf(_.doc.key)),{type:kM(_.type),doc:w,oldIndex:S,newIndex:x}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},i}();function kM(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function e_(i,e){return i instanceof ps&&e instanceof ps?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof gs&&e instanceof gs&&i._firestore===e._firestore&&DM(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function lE(i){if($p(i)&&0===i.explicitOrderBy.length)throw new Ne(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Zn=function(){};function Uc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var o=0,u=e;o<u.length;o++){var c=u[o];i=c._apply(i)}return i}var LM=function(i){function e(t,o,u){var c=this;return(c=i.call(this)||this).jc=t,c.Wc=o,c.Gc=u,c.type="where",c}return(0,B.ZT)(e,i),e.prototype._apply=function(t){var c,_,o=Kf(t.firestore),u=function(c,m,_,w,S,x,O){var L;if(S.isKeyField()){if("array-contains"===x||"array-contains-any"===x)throw new Ne(_e.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+x+"' queries on FieldPath.documentId().");if("in"===x||"not-in"===x){HM(O,x);for(var j=[],q=0,X=O;q<X.length;q++)j.push(jM(w,c,X[q]));L={arrayValue:{values:j}}}else L=jM(w,c,O)}else"in"!==x&&"not-in"!==x&&"array-contains-any"!==x||HM(O,x),L=US(_,"where",O,"in"===x||"not-in"===x);var Ee=zn.create(S,x,L);return function(Re,Ve){if(Ve.g()){var Ze=bv(Re);if(null!==Ze&&!Ze.isEqual(Ve.field))throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Ze.toString()+"' and '"+Ve.field.toString()+"'");var Xe=_v(Re);null!==Xe&&HS(0,Ve.field,Xe)}var Lt=function(un,bs){for(var fo=0,ca=un.filters;fo<ca.length;fo++){var NE=ca[fo];if(bs.indexOf(NE.op)>=0)return NE.op}return null}(Re,function(un){switch(un){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ve.op));if(null!==Lt)throw new Ne(_e.INVALID_ARGUMENT,Lt===Ve.op?"Invalid query. You cannot use more than one '"+Ve.op.toString()+"' filter.":"Invalid query. You cannot use '"+Ve.op.toString()+"' filters with '"+Lt.toString()+"' filters.")}(c,Ee),Ee}(t._query,0,o,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Qi(t.firestore,t.converter,(_=(c=t._query).filters.concat([u]),new Ku(c.path,c.collectionGroup,c.explicitOrderBy.slice(),_,c.limit,c.limitType,c.startAt,c.endAt)))},e}(Zn),VM=function(i){function e(t,o){var u=this;return(u=i.call(this)||this).jc=t,u.zc=o,u.type="orderBy",u}return(0,B.ZT)(e,i),e.prototype._apply=function(t){var u,m,o=function(u,c,m){if(null!==u.startAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var _=new Tc(c,m);return function(w,S){if(null===_v(w)){var x=bv(w);null!==x&&HS(0,x,S.field)}}(u,_),_}(t._query,this.jc,this.zc);return new Qi(t.firestore,t.converter,(m=(u=t._query).explicitOrderBy.concat([o]),new Ku(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)))},e}(Zn),UM=function(i){function e(t,o,u){var c=this;return(c=i.call(this)||this).type=t,c.Hc=o,c.Jc=u,c}return(0,B.ZT)(e,i),e.prototype._apply=function(t){return new Qi(t.firestore,t.converter,Wp(t._query,this.Hc,this.Jc))},e}(Zn),Sg=function(i){function e(t,o,u){var c=this;return(c=i.call(this)||this).type=t,c.Yc=o,c.Xc=u,c}return(0,B.ZT)(e,i),e.prototype._apply=function(t){var u,c,o=BM(t,this.type,this.Yc,this.Xc);return new Qi(t.firestore,t.converter,(c=o,new Ku((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)))},e}(Zn),jS=function(i){function e(t,o,u){var c=this;return(c=i.call(this)||this).type=t,c.Yc=o,c.Xc=u,c}return(0,B.ZT)(e,i),e.prototype._apply=function(t){var u,c,o=BM(t,this.type,this.Yc,this.Xc);return new Qi(t.firestore,t.converter,(c=o,new Ku((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)))},e}(Zn);function BM(i,e,t,o){if(t[0]=(0,Jt.m9)(t[0]),t[0]instanceof Jf)return function(c,m,_,w,S){if(!w)throw new Ne(_e.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+_+"().");for(var x=[],O=0,L=vf(c);O<L.length;O++){var j=L[O];if(j.field.isKeyField())x.push(dv(m,w.key));else{var q=w.data.field(j.field);if(eC(q))throw new Ne(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+j.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===q){var X=j.field.canonicalString();throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+X+"' (used as the orderBy) does not exist.")}x.push(q)}}return new qp(x,S)}(i._query,i.firestore._databaseId,e,t[0]._document,o);var u=Kf(i.firestore);return function(c,m,_,w,S,x){var O=c.explicitOrderBy;if(S.length>O.length)throw new Ne(_e.INVALID_ARGUMENT,"Too many arguments provided to "+w+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var L=[],j=0;j<S.length;j++){var q=S[j];if(O[j].field.isKeyField()){if("string"!=typeof q)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+w+"(), but got a "+typeof q);if(!aC(c)&&-1!==q.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+w+"() must be a plain document ID, but '"+q+"' contains a slash.");var X=c.path.child(an.fromString(q));if(!ut.isDocumentKey(X))throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+w+"() must result in a valid document path, but '"+X+"' is not because it contains an odd number of segments.");var de=new ut(X);L.push(dv(m,de))}else{var Ee=US(_,w,q);L.push(Ee)}}return new qp(L,x)}(i._query,i.firestore._databaseId,u,e,t,o)}function jM(i,e,t){if("string"==typeof(t=(0,Jt.m9)(t))){if(""===t)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!aC(e)&&-1!==t.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var o=e.path.child(an.fromString(t));if(!ut.isDocumentKey(o))throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+o+"' is not because it has an odd number of segments ("+o.length+").");return dv(i,new ut(o))}if(t instanceof Qn)return dv(i,t._key);throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Cg(t)+".")}function HM(i,e){if(!Array.isArray(i)||0===i.length)throw new Ne(_e.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(i.length>10)throw new Ne(_e.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function HS(i,e,t){if(!t.isEqual(e))throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+t.toString()+"' instead.")}var cE=function(){function i(){}return i.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),Qu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}},i.prototype.convertObject=function(e,t){var o=this,u={};return Yu(e.fields,function(c,m){u[c]=o.convertValue(m,t)}),u},i.prototype.convertGeoPoint=function(e){return new fl(sr(e.latitude),sr(e.longitude))},i.prototype.convertArray=function(e,t){var o=this;return(e.values||[]).map(function(u){return o.convertValue(u,t)})},i.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var o=tC(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(jp(e));default:return null}},i.prototype.convertTimestamp=function(e){var t=za(e);return new Wi(t.seconds,t.nanos)},i.prototype.convertDocumentKey=function(e,t){var o=an.fromString(e);bt($r(o));var u=new Qf(o.get(1),o.get(3)),c=new ut(o.popFirst(5));return u.isEqual(t)||cr("Document "+c+" contains a document reference within a different database ("+u.projectId+"/"+u.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),c},i}();function t_(i,e,t){return i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e}var GM=function(i){function e(t){var o=this;return(o=i.call(this)||this).firestore=t,o}return(0,B.ZT)(e,i),e.prototype.convertBytes=function(t){return new Lc(t)},e.prototype.convertReference=function(t){var o=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,o)},e}(cE),qM=function(){function i(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kf(e)}return i.prototype.set=function(e,t,o){this._verifyNotCommitted();var u=Bc(e,this._firestore),c=t_(u.converter,t,o),m=wg(this._dataReader,"WriteBatch.set",u._key,c,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,Dr.none())),this},i.prototype.update=function(e,t,o){for(var u=[],c=3;c<arguments.length;c++)u[c-3]=arguments[c];this._verifyNotCommitted();var m,_=Bc(e,this._firestore);return m="string"==typeof(t=(0,Jt.m9)(t))||t instanceof sa?VS(this._dataReader,"WriteBatch.update",_._key,t,o,u):LS(this._dataReader,"WriteBatch.update",_._key,t),this._mutations.push(m.toMutation(_._key,Dr.exists(!0))),this},i.prototype.delete=function(e){this._verifyNotCommitted();var t=Bc(e,this._firestore);return this._mutations=this._mutations.concat(new Jp(t._key,Dr.none())),this},i.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},i.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ne(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},i}();function Bc(i,e){if((i=(0,Jt.m9)(i)).firestore!==e)throw new Ne(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}var jc=function(i){function e(t){var o=this;return(o=i.call(this)||this).firestore=t,o}return(0,B.ZT)(e,i),e.prototype.convertBytes=function(t){return new Lc(t)},e.prototype.convertReference=function(t){var o=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,o)},e}(cE);function GS(i,e,t){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];i=on(i,Qn);var c=on(i.firestore,Kn),m=Kf(c);return n_(c,[("string"==typeof(e=(0,Jt.m9)(e))||e instanceof sa?VS(m,"updateDoc",i._key,e,t,o):LS(m,"updateDoc",i._key,e)).toMutation(i._key,Dr.exists(!0))])}function qS(i){for(var e,t,o,u=[],c=1;c<arguments.length;c++)u[c-1]=arguments[c];i=(0,Jt.m9)(i);var m={includeMetadataChanges:!1},_=0;"object"!=typeof u[_]||kc(u[_])||(m=u[_],_++);var w,S,x,O={includeMetadataChanges:m.includeMetadataChanges};if(kc(u[_])){var L=u[_];u[_]=null===(e=L.next)||void 0===e?void 0:e.bind(L),u[_+1]=null===(t=L.error)||void 0===t?void 0:t.bind(L),u[_+2]=null===(o=L.complete)||void 0===o?void 0:o.bind(L)}if(i instanceof Qn)S=on(i.firestore,Kn),x=yf(i._key.path),w={next:function(X){u[_]&&u[_]($S(S,i,X))},error:u[_+1],complete:u[_+2]};else{var j=on(i,Qi);S=on(j.firestore,Kn),x=j._query;var q=new jc(S);w={next:function(X){u[_]&&u[_](new gs(S,q,j,X))},error:u[_+1],complete:u[_+2]},lE(i._query)}return function(X,de,Ee,Re){var Ve=this,Ze=new tE(Re),Xe=new oS(de,Ze,Ee);return X.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(Ve,void 0,void 0,function(){var Lt;return(0,B.Jh)(this,function(un){switch(un.label){case 0:return Lt=nS,[4,cl(X)];case 1:return[2,Lt.apply(void 0,[un.sent(),Xe])]}})})}),function(){Ze.Wo(),X.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(Ve,void 0,void 0,function(){var Lt;return(0,B.Jh)(this,function(un){switch(un.label){case 0:return Lt=rS,[4,cl(X)];case 1:return[2,Lt.apply(void 0,[un.sent(),Xe])]}})})})}}(kr(S),x,O,w)}function n_(i,e){return function(t,o){var u=this,c=new hi;return t.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(u,void 0,void 0,function(){var m;return(0,B.Jh)(this,function(_){switch(_.label){case 0:return m=_M,[4,rE(t)];case 1:return[2,m.apply(void 0,[_.sent(),o,c])]}})})}),c.promise}(kr(i),e)}function $S(i,e,t){var o=t.docs.get(e._key),u=new jc(i);return new ps(i,u,e._key,o,new tu(t.hasPendingWrites,t.fromCache),e.converter)}var $M=function(i){function e(t,o){var u=this;return(u=i.call(this,t,o)||this)._firestore=t,u}return(0,B.ZT)(e,i),e.prototype.get=function(t){var o=this,u=Bc(t,this._firestore),c=new jc(this._firestore);return i.prototype.get.call(this,t).then(function(m){return new ps(o._firestore,c,u._key,m._document,new tu(!1,!1),u.converter)})},e}(function(){function i(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kf(e)}return i.prototype.get=function(e){var t=this,o=Bc(e,this._firestore),u=new GM(this._firestore);return this._transaction.lookup([o._key]).then(function(c){if(!c||1!==c.length)return st();var m=c[0];if(m.isFoundDocument())return new Jf(t._firestore,u,m.key,m,o.converter);if(m.isNoDocument())return new Jf(t._firestore,u,o._key,null,o.converter);throw st()})},i.prototype.set=function(e,t,o){var u=Bc(e,this._firestore),c=t_(u.converter,t,o),m=wg(this._dataReader,"Transaction.set",u._key,c,null!==u.converter,o);return this._transaction.set(u._key,m),this},i.prototype.update=function(e,t,o){for(var u=[],c=3;c<arguments.length;c++)u[c-3]=arguments[c];var m,_=Bc(e,this._firestore);return m="string"==typeof(t=(0,Jt.m9)(t))||t instanceof sa?VS(this._dataReader,"Transaction.update",_._key,t,o,u):LS(this._dataReader,"Transaction.update",_._key,t),this._transaction.update(_._key,m),this},i.prototype.delete=function(e){var t=Bc(e,this._firestore);return this._transaction.delete(t._key),this},i}());function WS(){if("undefined"==typeof Uint8Array)throw new Ne(_e.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function zS(){if("undefined"==typeof atob)throw new Ne(_e.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var YS=function(){function i(e){this._delegate=e}return i.fromBase64String=function(e){return zS(),new i(Lc.fromBase64String(e))},i.fromUint8Array=function(e){return WS(),new i(Lc.fromUint8Array(e))},i.prototype.toBase64=function(){return zS(),this._delegate.toBase64()},i.prototype.toUint8Array=function(){return WS(),this._delegate.toUint8Array()},i.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},i.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},i}(),WM=function(){function i(){}return i.prototype.enableIndexedDbPersistence=function(e,t){return function(o,u){aE(o=on(o,Kn));var c=kr(o),m=o._freezeSettings(),_=new bg;return sE(c,_,new bM(_,m.cacheSizeBytes,null==u?void 0:u.forceOwnership))}(e._delegate,{forceOwnership:t})},i.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(t){aE(t=on(t,Kn));var o=kr(t),u=t._freezeSettings(),c=new bg;return sE(o,c,new XR(c,u.cacheSizeBytes))}(e._delegate)},i.prototype.clearIndexedDbPersistence=function(e){return function(t){var o=this;if(t._initialized&&!t._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var u=new hi;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,B.mG)(o,void 0,void 0,function(){var c;return(0,B.Jh)(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),[4,function(_){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(S){switch(S.label){case 0:return oa.yt()?[4,oa.delete(_+"main")]:[2,Promise.resolve()];case 1:return S.sent(),[2]}})})}(FC(t._databaseId,t._persistenceKey))];case 1:return m.sent(),u.resolve(),[3,3];case 2:return c=m.sent(),u.reject(c),[3,3];case 3:return[2]}})})}),u.promise}(e._delegate)},i}(),Bo=function(){function i(e,t,o){var u=this;this._delegate=t,this.Zc=o,this.INTERNAL={delete:function(){return u.terminate()}},e instanceof Qf||(this.tu=e)}return Object.defineProperty(i.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),i.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||df("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},i.prototype.useEmulator=function(e,t,o){void 0===o&&(o={}),function(u,c,m,_){void 0===_&&(_={});var w=(u=on(u,Eg))._getSettings();if("firestore.googleapis.com"!==w.host&&w.host!==c&&df("Host has been set in both settings() and useEmulator(), emulator host will be used"),u._setSettings(Object.assign(Object.assign({},w),{host:c+":"+m,ssl:!1})),_.mockUserToken){var S=(0,Jt.Sg)(_.mockUserToken),x=_.mockUserToken.sub||_.mockUserToken.user_id;if(!x)throw new Ne(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u._credentials=new DS(new TS(S,new Ii(x)))}}(this._delegate,e,t,o)},i.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,B.mG)(t,void 0,void 0,function(){var o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return[4,Yf(e)];case 1:return o=c.sent(),[4,CS(e)];case 2:return u=c.sent(),[2,(o.setNetworkEnabled(!0),m=u,_=Ge(m),_.Or.delete(0),qf(_))]}var m,_})})})}(kr(on(this._delegate,Kn)))},i.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,B.mG)(t,void 0,void 0,function(){var o,u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return[4,Yf(e)];case 1:return o=c.sent(),[4,CS(e)];case 2:return u=c.sent(),[2,(o.setNetworkEnabled(!1),function(m){return(0,B.mG)(this,void 0,void 0,function(){var _;return(0,B.Jh)(this,function(w){switch(w.label){case 0:return(_=Ge(m)).Or.add(0),[4,$f(_)];case 1:return w.sent(),_.Br.set("Offline"),[2]}})})}(u))]}})})})}(kr(on(this._delegate,Kn)))},i.prototype.enablePersistence=function(e){var t=!1,o=!1;return e&&AS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",o=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,o)},i.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},i.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},i.prototype.waitForPendingWrites=function(){return function(e){var t=this,o=new hi;return e.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(t,void 0,void 0,function(){var u;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return u=YR,[4,rE(e)];case 1:return[2,u.apply(void 0,[c.sent(),o])]}})})}),o.promise}(kr(on(this._delegate,Kn)))},i.prototype.onSnapshotsInSync=function(e){return o=e,function(u,c){var m=this,_=new tE(c);return u.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(m,void 0,void 0,function(){var w;return(0,B.Jh)(this,function(S){switch(S.label){case 0:return w=function(x,O){Ge(x).Gr.add(O),O.next()},[4,cl(u)];case 1:return[2,w.apply(void 0,[S.sent(),_])]}})})}),function(){_.Wo(),u.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(m,void 0,void 0,function(){var w;return(0,B.Jh)(this,function(S){switch(S.label){case 0:return w=function(x,O){Ge(x).Gr.delete(O)},[4,cl(u)];case 1:return[2,w.apply(void 0,[S.sent(),_])]}})})})}}(kr(on(this._delegate,Kn)),kc(o)?o:{next:o});var o},Object.defineProperty(i.prototype,"app",{get:function(){if(!this.tu)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),i.prototype.collection=function(e){try{return new fE(this,xS(this._delegate,e))}catch(t){throw Ai(t,"collection()","Firestore.collection()")}},i.prototype.doc=function(e){try{return new Hc(this,Qv(this._delegate,e))}catch(t){throw Ai(t,"doc()","Firestore.doc()")}},i.prototype.collectionGroup=function(e){try{return new Ig(this,function(t,o){if(t=on(t,Eg),zv("collectionGroup","collection id",o),o.indexOf("/")>=0)throw new Ne(_e.INVALID_ARGUMENT,"Invalid collection ID '"+o+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Qi(t,null,(u=o,new Ku(an.emptyPath(),u)));var u}(this._delegate,e))}catch(t){throw Ai(t,"collectionGroup()","Firestore.collectionGroup()")}},i.prototype.runTransaction=function(e){var o,t=this;return function(c,m){var _=this,w=new hi;return c.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(_,void 0,void 0,function(){var S;return(0,B.Jh)(this,function(x){switch(x.label){case 0:return[4,(O=c,$v(O).then(function(L){return L.datastore}))];case 1:return S=x.sent(),new tN(c.asyncQueue,S,m,w).run(),[2]}var O})})}),w.promise}(kr(o=this._delegate),function(c){return function(o){return e(new QS(t,o))}(new $M(o,c))})},i.prototype.batch=function(){var e=this;return kr(this._delegate),new KS(new qM(this._delegate,function(t){return n_(e._delegate,t)}))},i.prototype.loadBundle=function(e){throw new Ne(_e.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},i.prototype.namedQuery=function(e){throw new Ne(_e.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},i}(),r_=function(i){function e(t){var o=this;return(o=i.call(this)||this).firestore=t,o}return(0,B.ZT)(e,i),e.prototype.convertBytes=function(t){return new YS(new Lc(t))},e.prototype.convertReference=function(t){var o=this.convertDocumentKey(t,this.firestore._databaseId);return Hc.eu(o,this.firestore,null)},e}(cE),QS=function(){function i(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new r_(e)}return i.prototype.get=function(e){var t=this,o=nu(e);return this._delegate.get(o).then(function(u){return new eh(t._firestore,new ps(t._firestore._delegate,t._userDataWriter,u._key,u._document,u.metadata,o.converter))})},i.prototype.set=function(e,t,o){var u=nu(e);return o?(iE("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this},i.prototype.update=function(e,t,o){for(var u,c=[],m=3;m<arguments.length;m++)c[m-3]=arguments[m];var _=nu(e);return 2===arguments.length?this._delegate.update(_,t):(u=this._delegate).update.apply(u,(0,B.ev)([_,t,o],c)),this},i.prototype.delete=function(e){var t=nu(e);return this._delegate.delete(t),this},i}(),KS=function(){function i(e){this._delegate=e}return i.prototype.set=function(e,t,o){var u=nu(e);return o?(iE("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this},i.prototype.update=function(e,t,o){for(var u,c=[],m=3;m<arguments.length;m++)c[m-3]=arguments[m];var _=nu(e);return 2===arguments.length?this._delegate.update(_,t):(u=this._delegate).update.apply(u,(0,B.ev)([_,t,o],c)),this},i.prototype.delete=function(e){var t=nu(e);return this._delegate.delete(t),this},i.prototype.commit=function(){return this._delegate.commit()},i}(),dE=function(){function i(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}return i.prototype.fromFirestore=function(e,t){var o=new Dg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new i_(this._firestore,o),null!=t?t:{})},i.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},i.nu=function(e,t){var o=i.su,u=o.get(e);u||(u=new WeakMap,o.set(e,u));var c=u.get(t);return c||(c=new i(e,new r_(e),t),u.set(t,c)),c},i}();dE.su=new WeakMap;var Hc=function(){function i(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new r_(e)}return i.iu=function(e,t,o){if(e.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new i(t,new Qn(t._delegate,o,new ut(e)))},i.eu=function(e,t,o){return new i(t,new Qn(t._delegate,o,e))},Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new fE(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),i.prototype.collection=function(e){try{return new fE(this.firestore,xS(this._delegate,e))}catch(t){throw Ai(t,"collection()","DocumentReference.collection()")}},i.prototype.isEqual=function(e){return(e=(0,Jt.m9)(e))instanceof Qn&&RS(this._delegate,e)},i.prototype.set=function(e,t){t=iE("DocumentReference.set",t);try{return function(o,u,c){o=on(o,Qn);var m=on(o.firestore,Kn),_=t_(o.converter,u,c);return n_(m,[wg(Kf(m),"setDoc",o._key,_,null!==o.converter,c).toMutation(o._key,Dr.none())])}(this._delegate,e,t)}catch(o){throw Ai(o,"setDoc()","DocumentReference.set()")}},i.prototype.update=function(e,t){for(var o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];try{return 1===arguments.length?GS(this._delegate,e):GS.apply(void 0,(0,B.ev)([this._delegate,e,t],o))}catch(c){throw Ai(c,"updateDoc()","DocumentReference.update()")}},i.prototype.delete=function(){return n_(on((e=this._delegate).firestore,Kn),[new Jp(e._key,Dr.none())]);var e},i.prototype.onSnapshot=function(){for(var e=this,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var u=ZS(t),c=Xf(t,function(m){return new eh(e.firestore,new ps(e.firestore._delegate,e._userDataWriter,m._key,m._document,m.metadata,e._delegate.converter))});return qS(this._delegate,u,c)},i.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(o){o=on(o,Qn);var u=on(o.firestore,Kn),c=kr(u),m=new jc(u);return function(_,w){var S=this,x=new hi;return _.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(S,void 0,void 0,function(){var O;return(0,B.Jh)(this,function(L){switch(L.label){case 0:return O=function(j,q,X){return(0,B.mG)(this,void 0,void 0,function(){var de,Ee;return(0,B.Jh)(this,function(Re){switch(Re.label){case 0:return Re.trys.push([0,2,,3]),[4,(Ve=j,Ze=q,Xe=Ge(Ve),Xe.persistence.runTransaction("read document","readonly",function(Lt){return Xe.Mn.mn(Lt,Ze)}))];case 1:return(Ee=Re.sent()).isFoundDocument()?X.resolve(Ee):Ee.isNoDocument()?X.resolve(null):X.reject(new Ne(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return de=Re.sent(),Ee=Wf(de,"Failed to get document '"+q+" from cache"),X.reject(Ee),[3,3];case 3:return[2]}var Ve,Ze,Xe})})},[4,nE(_)];case 1:return[2,O.apply(void 0,[L.sent(),w,x])]}})})}),x.promise}(c,o._key).then(function(_){return new ps(u,m,o._key,_,new tu(null!==_&&_.hasLocalMutations,!0),o.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(o){o=on(o,Qn);var u=on(o.firestore,Kn);return ES(kr(u),o._key,{source:"server"}).then(function(c){return $S(u,o,c)})}(this._delegate):function(o){o=on(o,Qn);var u=on(o.firestore,Kn);return ES(kr(u),o._key).then(function(c){return $S(u,o,c)})}(this._delegate)).then(function(o){return new eh(t.firestore,new ps(t.firestore._delegate,t._userDataWriter,o._key,o._document,o.metadata,t._delegate.converter))})},i.prototype.withConverter=function(e){return new i(this.firestore,this._delegate.withConverter(e?dE.nu(this.firestore,e):null))},i}();function Ai(i,e,t){return i.message=i.message.replace(e,t),i}function ZS(i){for(var e=0,t=i;e<t.length;e++){var o=t[e];if("object"==typeof o&&!kc(o))return o}return{}}function Xf(i,e){var t,o,u;return{next:function(c){u.next&&u.next(e(c))},error:null===(t=(u=kc(i[0])?i[0]:kc(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]}).error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}var eh=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"ref",{get:function(){return new Hc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),i.prototype.data=function(e){return this._delegate.data(e)},i.prototype.get=function(e,t){return this._delegate.get(e,t)},i.prototype.isEqual=function(e){return e_(this._delegate,e._delegate)},i}(),i_=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,B.ZT)(e,i),e.prototype.data=function(t){return this._delegate.data(t)},e}(eh),Ig=function(){function i(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new r_(e)}return i.prototype.where=function(e,t,o){try{return new i(this.firestore,Uc(this._delegate,(m=o,_=t,w=Tg("where",u=e),new LM(w,_,m))))}catch(u){throw Ai(u,/(orderBy|where)\(\)/,"Query.$1()")}var u,m,_,w},i.prototype.orderBy=function(e,t){try{return new i(this.firestore,Uc(this._delegate,function(o,u){void 0===u&&(u="asc");var c=u,m=Tg("orderBy",o);return new VM(m,c)}(e,t)))}catch(o){throw Ai(o,/(orderBy|where)\(\)/,"Query.$1()")}},i.prototype.limit=function(e){try{return new i(this.firestore,Uc(this._delegate,(MS("limit",t=e),new UM("limit",t,"F"))))}catch(t){throw Ai(t,"limit()","Query.limit()")}var t},i.prototype.limitToLast=function(e){try{return new i(this.firestore,Uc(this._delegate,(MS("limitToLast",t=e),new UM("limitToLast",t,"L"))))}catch(t){throw Ai(t,"limitToLast()","Query.limitToLast()")}var t},i.prototype.startAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Uc(this._delegate,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new Sg("startAt",o,!0)}.apply(void 0,e)))}catch(o){throw Ai(o,"startAt()","Query.startAt()")}},i.prototype.startAfter=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Uc(this._delegate,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new Sg("startAfter",o,!1)}.apply(void 0,e)))}catch(o){throw Ai(o,"startAfter()","Query.startAfter()")}},i.prototype.endBefore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Uc(this._delegate,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new jS("endBefore",o,!0)}.apply(void 0,e)))}catch(o){throw Ai(o,"endBefore()","Query.endBefore()")}},i.prototype.endAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Uc(this._delegate,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new jS("endAt",o,!1)}.apply(void 0,e)))}catch(o){throw Ai(o,"endAt()","Query.endAt()")}},i.prototype.isEqual=function(e){return DM(this._delegate,e._delegate)},i.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(o){o=on(o,Qi);var u=on(o.firestore,Kn),c=kr(u),m=new jc(u);return function(_,w){var S=this,x=new hi;return _.asyncQueue.enqueueAndForget(function(){return(0,B.mG)(S,void 0,void 0,function(){var O;return(0,B.Jh)(this,function(L){switch(L.label){case 0:return O=function(j,q,X){return(0,B.mG)(this,void 0,void 0,function(){var de,Ee,Re,Ve,Ze;return(0,B.Jh)(this,function(Xe){switch(Xe.label){case 0:return Xe.trys.push([0,2,,3]),[4,Pv(j,q,!0)];case 1:return Ze=Xe.sent(),de=new gM(q,Ze.Bn),Ee=de._o(Ze.documents),Re=de.applyChanges(Ee,!1),X.resolve(Re.snapshot),[3,3];case 2:return Ve=Xe.sent(),Ze=Wf(Ve,"Failed to execute query '"+q+" against cache"),X.reject(Ze),[3,3];case 3:return[2]}})})},[4,nE(_)];case 1:return[2,O.apply(void 0,[L.sent(),w,x])]}})})}),x.promise}(c,o._query).then(function(_){return new gs(u,m,o,_)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(o){o=on(o,Qi);var u=on(o.firestore,Kn),c=kr(u),m=new jc(u);return Yi(c,o._query,{source:"server"}).then(function(_){return new gs(u,m,o,_)})}(this._delegate):function(o){o=on(o,Qi);var u=on(o.firestore,Kn),c=kr(u),m=new jc(u);return lE(o._query),Yi(c,o._query).then(function(_){return new gs(u,m,o,_)})}(this._delegate)).then(function(o){return new JS(t.firestore,new gs(t.firestore._delegate,t._userDataWriter,t._delegate,o._snapshot))})},i.prototype.onSnapshot=function(){for(var e=this,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var u=ZS(t),c=Xf(t,function(m){return new JS(e.firestore,new gs(e.firestore._delegate,e._userDataWriter,e._delegate,m._snapshot))});return qS(this._delegate,u,c)},i.prototype.withConverter=function(e){return new i(this.firestore,this._delegate.withConverter(e?dE.nu(this.firestore,e):null))},i}(),rN=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doc",{get:function(){return new i_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),i}(),JS=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"query",{get:function(){return new Ig(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new i_(e._firestore,t)})},enumerable:!1,configurable:!0}),i.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map(function(o){return new rN(t._firestore,o)})},i.prototype.forEach=function(e,t){var o=this;this._delegate.forEach(function(u){e.call(t,new i_(o._firestore,u))})},i.prototype.isEqual=function(e){return e_(this._delegate,e._delegate)},i}(),fE=function(i){function e(t,o){var u=this;return(u=i.call(this,t,o)||this).firestore=t,u._delegate=o,u}return(0,B.ZT)(e,i),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Hc(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Hc(this.firestore,void 0===t?Qv(this._delegate):Qv(this._delegate,t))}catch(o){throw Ai(o,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var u,c,m,_,w,o=this;return(u=this._delegate,c=t,m=on(u.firestore,Kn),_=Qv(u),w=t_(u.converter,c),n_(m,[wg(Kf(u.firestore),"addDoc",_._key,w,null!==u.converter,{}).toMutation(_._key,Dr.exists(!1))]).then(function(){return _})).then(function(u){return new Hc(o.firestore,u)})},e.prototype.isEqual=function(t){return RS(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?dE.nu(this.firestore,t):null))},e}(Ig);function nu(i){return on(i,Qn)}var YM=function(){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(sa.bind.apply(sa,(0,B.ev)([void 0],e)))}return i.documentId=function(){return new i(ss.keyField().canonicalString())},i.prototype.isEqual=function(e){return(e=(0,Jt.m9)(e))instanceof sa&&this._delegate._internalPath.isEqual(e._internalPath)},i}(),QM=function(){function i(e){this._delegate=e}return i.serverTimestamp=function(){var e=new RM("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new i(e)},i.delete=function(){var e=new Kv("deleteField");return e._methodName="FieldValue.delete",new i(e)},i.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return new NM("arrayUnion",u)}.apply(void 0,e);return o._methodName="FieldValue.arrayUnion",new i(o)},i.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return new OM("arrayRemove",u)}.apply(void 0,e);return o._methodName="FieldValue.arrayRemove",new i(o)},i.increment=function(e){var t=new kS("increment",e);return t._methodName="FieldValue.increment",new i(t)},i.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},i}(),KM=$(6034),ZM={Firestore:Bo,GeoPoint:fl,Timestamp:Wi,Blob:YS,Transaction:QS,WriteBatch:KS,DocumentReference:Hc,DocumentSnapshot:eh,Query:Ig,QueryDocumentSnapshot:i_,QuerySnapshot:JS,CollectionReference:fE,FieldPath:YM,FieldValue:QM,setLogLevel:function(i){li.setLogLevel(i)},CACHE_SIZE_UNLIMITED:-1};function XM(i,e){return function(i,e=Ta.z){return new Nr.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function hE(i,e){return XM(i,e).pipe((0,ct.U)(t=>({payload:t,type:"query"})))}function Ag(i,e){return hE(i,e).pipe(vr(void 0),Uu(),(0,ct.U)(([t,o])=>{const u=o.payload.docChanges(),c=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,_)=>{const w=u.find(x=>x.doc.ref.isEqual(m.ref)),S=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(m.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(m.metadata)||!w&&S&&JSON.stringify(S.metadata)===JSON.stringify(m.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:m}})}),c}))}function pE(i,e,t){return Ag(i,t).pipe(_o((o,u)=>function(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Mg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Mg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Mg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(c=>c.payload),e),[]),dd(),(0,ct.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Mg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function o_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}!function(i){i.INTERNAL.registerComponent(new KM.wA("firestore",function(o){return e=o.getProvider("app").getImmediate(),t=o.getProvider("auth-internal"),new Bo(e,new Kn(e,t),new WM);var e,t},"PUBLIC").setServiceProps(Object.assign({},ZM))),i.registerVersion("@firebase/firestore","2.3.10")}(Kd.Z);class xg{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=Ag(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ct.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe(vr(void 0),Uu(),_i(([o,u])=>u.length>0||!o),(0,ct.U)(([o,u])=>u),this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(_o((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=o_(e);return pE(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return hE(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),this.afs.keepUnstableUntilFirst)}get(e){return(0,In.D)(this.query.get(e)).pipe((0,Yo.QV)(this.afs.schedulers.insideAngular))}add(e){return this.ref.add(e)}doc(e){return new Rg(this.ref.doc(e),this.afs)}}class Rg{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:c}=rI(o,t);return new xg(u,c,this.afs)}snapshotChanges(){return function(i,e){return XM(i,e).pipe(vr(void 0),Uu(),(0,ct.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,In.D)(this.ref.get(e)).pipe((0,Yo.QV)(this.afs.schedulers.insideAngular))}}class tI{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ag(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),_i(t=>t.length>0),this.afs.keepUnstableUntilFirst):Ag(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(_o((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=o_(e);return pE(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return hE(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),this.afs.keepUnstableUntilFirst)}get(e){return(0,In.D)(this.query.get(e)).pipe((0,Yo.QV)(this.afs.schedulers.insideAngular))}}const s_=new p.OlP("angularfire2.enableFirestorePersistence"),mE=new p.OlP("angularfire2.firestore.persistenceSettings"),nI=new p.OlP("angularfire2.firestore.settings"),yE=new p.OlP("angularfire2.firestore.use-emulator");function rI(i,e=(t=>t)){return{query:e(i),ref:i}}let iI=(()=>{class i{constructor(t,o,u,c,m,_,w,S,x){this.schedulers=new nn.HU(_),this.keepUnstableUntilFirst=(0,nn.ss)(this.schedulers);const O=(0,nn.on)(t,_,o);!Hl.Z.auth&&x&&(0,nn.yq)();const L=S;[this.firestore,this.persistenceEnabled$]=(0,nn.sI)(`${O.name}.firestore`,"AngularFirestore",O,()=>{const j=_.runOutsideAngular(()=>O.firestore());if(c&&j.settings(c),L&&j.useEmulator(...L),u&&!bh(m)){const q=()=>{try{return(0,In.D)(j.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(X){return"undefined"!=typeof console&&console.warn(X),(0,ot.of)(!1)}};return[j,_.runOutsideAngular(q)]}return[j,(0,ot.of)(!1)]},[c,L,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:m}=rI(u,o),_=this.schedulers.ngZone.run(()=>c);return new xg(_,m,this)}collectionGroup(t,o){const u=o||(m=>m),c=this.firestore.collectionGroup(t);return new tI(u(c),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Rg(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(nn.Dh),p.LFG(nn.xv,8),p.LFG(s_,8),p.LFG(nI,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(mE,8),p.LFG(yE,8),p.LFG(Bs,8))},i.\u0275prov=p.Yz7({factory:function(){return new i(p.LFG(nn.Dh),p.LFG(nn.xv,8),p.LFG(s_,8),p.LFG(nI,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(mE,8),p.LFG(yE,8),p.LFG(Bs,8))},token:i,providedIn:"any"}),i})(),ex=(()=>{class i{static enablePersistence(t){return{ngModule:i,providers:[{provide:s_,useValue:!0},{provide:mE,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[iI]}),i})(),vE=(()=>{class i{constructor(t){this.el=t}onBlur(){this.el.nativeElement.value=this.el.nativeElement.value.toUpperCase()}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(p.SBq))},i.\u0275dir=p.lG2({type:i,selectors:[["","appRegisterD",""]],hostBindings:function(t,o){1&t&&p.NdJ("blur",function(){return o.onBlur()})}}),i})();function tx(i,e){1&i&&p._UZ(0,"i",32)}function Mi(i,e){1&i&&p._UZ(0,"i",33)}function Ng(i,e){if(1&i&&(p.TgZ(0,"div",29),p.YNc(1,tx,1,0,"i",30),p.YNc(2,Mi,1,0,"i",31),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.e.errors.required),p.xp6(1),p.Q6J("ngIf",t.e.errors.email)}}function a_(i,e){1&i&&(p.TgZ(0,"div",34),p._uU(1," Email Address is existed. "),p.qZA())}function oI(i,e){1&i&&p._UZ(0,"i",37)}function u_(i,e){1&i&&p._UZ(0,"i",38)}function _E(i,e){if(1&i&&(p.TgZ(0,"div",29),p.YNc(1,oI,1,0,"i",35),p.YNc(2,u_,1,0,"i",36),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.p.errors.required),p.xp6(1),p.Q6J("ngIf",t.p.errors.minlength)}}function sI(i,e){1&i&&p._UZ(0,"i",37)}function l_(i,e){if(1&i&&(p.TgZ(0,"div",29),p.YNc(1,sI,1,0,"i",35),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.cp.errors.required)}}function nx(i,e){1&i&&(p.TgZ(0,"div",29),p._UZ(1,"i",39),p.qZA())}function rx(i,e){1&i&&p._UZ(0,"i",41)}function ix(i,e){if(1&i&&(p.TgZ(0,"div",29),p.YNc(1,rx,1,0,"i",40),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.name.errors.required)}}function ox(i,e){1&i&&p._UZ(0,"i",43)}function aI(i,e){if(1&i&&(p.TgZ(0,"div",29),p.YNc(1,ox,1,0,"i",42),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.pn.errors.required)}}function sx(i,e){1&i&&(p.TgZ(0,"div",34),p._uU(1," Date of Birth is required. "),p.qZA())}function ax(i,e){if(1&i&&(p.TgZ(0,"div"),p.YNc(1,sx,2,0,"div",10),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.d.errors.required)}}function ux(i,e){1&i&&(p.TgZ(0,"div",34),p._uU(1," Gender is required. "),p.qZA())}function hl(i,e){if(1&i&&(p.TgZ(0,"div"),p.YNc(1,ux,2,0,"div",10),p.qZA()),2&i){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.g.errors.required)}}const th=function(i,e){return{"fa-eye":i,"fa-eye-slash":e}},lx=[{path:"",component:Wd},{path:"register",component:(()=>{class i{constructor(t,o,u){this.fb=t,this.auth=o,this.firestore=u,this.visibility=!0,this.form1=t.group({remail:["",[wn.required,wn.email]],rpassword:["",wn.required,wn.minLength],rconfirmpassword:["",[wn.required]],name:["",[wn.required]],phonenumber:["",wn.required],date:["",wn.required],role:["Role",wn.required],gender:["Gender",wn.required]},{validator:zd.passwordVerification})}ngOnInit(){}onVisible(){this.visibility=!this.visibility}getRole(t){this.role=t.target.value}getDate(t){this.date=t.target.value}getGender(t){this.gender=t.target.value}get cp(){return this.form1.get("rconfirmpassword")}get p(){return this.form1.get("rpassword")}get e(){return this.form1.get("remail")}get name(){return this.form1.get("name")}get pn(){return this.form1.get("phonenumber")}get d(){return this.form1.get("date")}get g(){return this.form1.get("gender")}get r(){return this.form1.get("role")}submit(){this.auth.fetchSignInMethodsForEmail(this.form1.get("remail").value).then(t=>{1===t.length&&(this.form1.setErrors({emailExist:!0}),console.log(this.form1))}),this.auth.createUserWithEmailAndPassword(this.form1.get("remail").value,this.form1.get("rpassword").value).then(t=>{var o,u;console.log(t),this.auth.currentUser.then(c=>{null==c||c.sendEmailVerification()}).then(c=>{console.log(c)}),"1"===this.form1.get("role").value?(console.log("student"),this.firestore.collection("Student").doc(null===(o=t.user)||void 0===o?void 0:o.uid).set({u:"hey"})):"2"===this.form1.get("role").value&&(console.log("supplier"),this.firestore.collection("Supplier").doc(null===(u=t.user)||void 0===u?void 0:u.uid).set({u:"hey"}))}).catch(t=>{console.log(t)})}}return i.\u0275fac=function(t){return new(t||i)(p.Y36(X0),p.Y36(js),p.Y36(iI))},i.\u0275cmp=p.Xpm({type:i,selectors:[["app-register-page"]],decls:55,vars:21,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"registration"],[3,"formGroup"],["type","text","placeholder","Email Address","formControlName","remail","required","",1,"icon-email"],["class","error",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"visible"],["name","rpassword","placeholder","Password","required","","formControlName","rpassword","minlength","6",1,"i",3,"type"],[1,"far",3,"ngClass","click"],["name","rconfirmpassword","placeholder","Confirm Password","required","","formControlName","rconfirmpassword",1,"i",3,"type"],["type","text","name","","placeholder","Name","formControlName","name","required","","appRegisterD","",1,"i"],["type","text","placeholder","Phone Number","formControlName","phonenumber","required","",1,"i"],["type","date","placeholder","Date","formControlName","date","required","",1,"i",3,"change"],[4,"ngIf"],["aria-label","Default select example","formControlName","gender","required","",1,"form-select",3,"change"],["selected",""],["value","1"],["value","2"],["aria-label","Default select example","required","","formControlName","role",1,"form-select","mt-2",3,"change"],[1,"special"],["routerLink","/",1,"new-user"],[3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"error"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Email Address is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Formatting of Email Address is invalid.",4,"ngIf"],["id","tooltip","data-tooltip","Email Address is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","Formatting of Email Address is invalid.",1,"fas","fa-exclamation-triangle"],[1,"alert","alert-danger"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Password is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Minimum Length must be at least mixed of 6 characters.",4,"ngIf"],["id","tooltip2","data-tooltip"," Password is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip2","data-tooltip"," Minimum Length must be at least mixed of 6 characters.",1,"fas","fa-exclamation-triangle"],["id","tooltip2","data-tooltip"," Password is not matched.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Name is required.",4,"ngIf"],["id","tooltip","data-tooltip","Name is required.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Phone Number is required.",4,"ngIf"],["id","tooltip","data-tooltip","Phone Number is required.",1,"fas","fa-exclamation-triangle"]],template:function(t,o){1&t&&(p._UZ(0,"link",0),p._UZ(1,"link",1),p._UZ(2,"link",2),p.TgZ(3,"body"),p.TgZ(4,"div",3),p.TgZ(5,"div",4),p._UZ(6,"img",5),p.TgZ(7,"h1"),p._uU(8," UMP Supply Chain "),p._UZ(9,"br"),p._uU(10," Management System "),p.qZA(),p.qZA(),p.TgZ(11,"div",6),p.TgZ(12,"h3"),p._uU(13,"Sign Up "),p.qZA(),p.TgZ(14,"form",7),p._UZ(15,"input",8),p.YNc(16,Ng,3,2,"div",9),p.YNc(17,a_,2,0,"div",10),p.TgZ(18,"div",11),p._UZ(19,"input",12),p.TgZ(20,"i",13),p.NdJ("click",function(){return o.onVisible()}),p.qZA(),p.qZA(),p.YNc(21,_E,3,2,"div",9),p.TgZ(22,"div",11),p._UZ(23,"input",14),p.TgZ(24,"i",13),p.NdJ("click",function(){return o.onVisible()}),p.qZA(),p.qZA(),p.YNc(25,l_,2,1,"div",9),p.YNc(26,nx,2,0,"div",9),p._UZ(27,"input",15),p.YNc(28,ix,2,1,"div",9),p._UZ(29,"input",16),p.YNc(30,aI,2,1,"div",9),p.TgZ(31,"input",17),p.NdJ("change",function(c){return o.getDate(c)}),p.qZA(),p.YNc(32,ax,2,1,"div",18),p.TgZ(33,"select",19),p.NdJ("change",function(c){return o.getGender(c)}),p.TgZ(34,"option",20),p._uU(35,"Gender"),p.qZA(),p.TgZ(36,"option",21),p._uU(37,"Male"),p.qZA(),p.TgZ(38,"option",22),p._uU(39,"Female"),p.qZA(),p.qZA(),p.YNc(40,hl,2,1,"div",18),p.TgZ(41,"select",23),p.NdJ("change",function(c){return o.getRole(c)}),p.TgZ(42,"option"),p._uU(43,"Role"),p.qZA(),p.TgZ(44,"option",21),p._uU(45,"Student"),p.qZA(),p.TgZ(46,"option",22),p._uU(47,"Supplier"),p.qZA(),p.qZA(),p.TgZ(48,"div",24),p.TgZ(49,"a",25),p._uU(50,"Already Registered? Login Now!"),p.qZA(),p.qZA(),p.TgZ(51,"button",26),p.NdJ("click",function(){return o.submit()}),p._uU(52,"Sign Up"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.O4$(),p.TgZ(53,"svg",27),p._UZ(54,"path",28),p.qZA(),p.qZA()),2&t&&(p.xp6(14),p.Q6J("formGroup",o.form1),p.xp6(2),p.Q6J("ngIf",o.e.touched&&o.e.invalid),p.xp6(1),p.Q6J("ngIf",null==o.form1.errors?null:o.form1.errors.emailExist),p.xp6(2),p.Q6J("type",o.visibility?"password":"text"),p.xp6(1),p.Q6J("ngClass",p.WLB(15,th,!o.visibility,o.visibility)),p.xp6(1),p.Q6J("ngIf",o.p.touched&&o.p.invalid),p.xp6(2),p.Q6J("type",o.visibility?"password":"text"),p.xp6(1),p.Q6J("ngClass",p.WLB(18,th,!o.visibility,o.visibility)),p.xp6(1),p.Q6J("ngIf",o.cp.touched&&o.cp.invalid),p.xp6(1),p.Q6J("ngIf",(null==o.form1.errors?null:o.form1.errors.passwordVerification)&&o.cp.valid&&o.p.valid),p.xp6(2),p.Q6J("ngIf",o.name.touched&&o.name.invalid),p.xp6(2),p.Q6J("ngIf",o.pn.touched&&o.pn.invalid),p.xp6(2),p.Q6J("ngIf",o.d.touched&&o.d.invalid),p.xp6(8),p.Q6J("ngIf",o.g.touched&&o.g.invalid),p.xp6(11),p.Q6J("disabled",o.form1.invalid))},directives:[j0,ly,cc,Fu,fp,qd,vp,$t,by,Ds,vE,_y,Hw,Gw,lp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.registration[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999;width:400px}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;position:relative;padding-left:8rem}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-4rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px auto}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 25px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:-2.25rem;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}.visible[_ngcontent-%COMP%]{position:relative}.far.fa-eye[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.far.fa-eye-slash[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}#tooltip2[_ngcontent-%COMP%]{position:absolute;right:1.4rem;margin-right:10px;bottom:1.2rem;color:red;transition:.3s all ease-in-out}#tooltip2[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100%;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:4rem;top:-2rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999;display:none}.registration[_ngcontent-%COMP%]{margin-top:-1.5rem}.title[_ngcontent-%COMP%]{margin-top:100px}}.i.ng-pristine.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}']}),i})()},{path:"forgotpassword",component:LA}];let cx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[iy.forRoot(lx)],iy]}),i})(),dx=(()=>{class i{constructor(){this.title="UMPCafeSupplyChainManagementSystem"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=p.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(t,o){1&t&&p._UZ(0,"router-outlet")},directives:[cp],styles:[""]}),i})();function rh(i,e=null){return{type:4,styles:e,timings:i}}function qt(i){return{type:6,styles:i,offset:null}}function pl(i){return{type:5,steps:i}}function Gc(i,e=null){return{type:8,animation:i,options:e}}function bE(i){Promise.resolve(null).then(i)}class qc{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){bE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(o=>o()),t.length=0}}let pI;try{pI="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){pI=!1}let gl=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function(i){return"browser"===i}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!pI)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(p.Lbi))},i.\u0275prov=(0,p.Yz7)({factory:function(){return new i((0,p.LFG)(p.Lbi))},token:i,providedIn:"root"}),i})(),gI=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({}),i})(),v=(()=>{class i{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=(0,p.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})(),D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[v]}),i})();"undefined"!=typeof Element&&Element;const yN="cdk-high-contrast-black-on-white",vN="cdk-high-contrast-white-on-black",yx="cdk-high-contrast-active";let _N=(()=>{class i{constructor(t,o){this._platform=t,this._document=o}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const o=this._document.defaultView||window,u=o&&o.getComputedStyle?o.getComputedStyle(t):null,c=(u&&u.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(yx),t.remove(yN),t.remove(vN);const o=this.getHighContrastMode();1===o?(t.add(yx),t.add(yN)):2===o&&(t.add(yx),t.add(vN))}}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(gl),p.LFG(be))},i.\u0275prov=(0,p.Yz7)({factory:function(){return new i((0,p.LFG)(gl),(0,p.LFG)(be))},token:i,providedIn:"root"}),i})(),EN=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({}),i})();const wN=new p.GfV("11.2.13");function TN(){return"undefined"!=typeof window&&void 0!==window.document}function vx(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let Ex=(i,e)=>!1,wx=(i,e)=>!1,IN=(i,e,t)=>[];const AN=vx();(AN||"undefined"!=typeof Element)&&(Ex=TN()?(i,e)=>{for(;e&&e!==document.documentElement;){if(e===i)return!0;e=e.parentNode||e.host}return!1}:(i,e)=>i.contains(e),wx=(()=>{if(AN||Element.prototype.matches)return(i,e)=>i.matches(e);{const i=Element.prototype,e=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return e?(t,o)=>e.apply(t,[o]):wx}})(),IN=(i,e,t)=>{let o=[];if(t){const u=i.querySelectorAll(e);for(let c=0;c<u.length;c++)o.push(u[c])}else{const u=i.querySelector(e);u&&o.push(u)}return o});let Lg=null,MN=!1;function Tx(i){Lg||(Lg=("undefined"!=typeof document?document.body:null)||{},MN=!!Lg.style&&"WebkitAppearance"in Lg.style);let e=!0;return Lg.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in Lg.style,!e&&MN&&(e="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in Lg.style)),e}const Dx=wx,Sx=Ex,Ix=IN;let RN=(()=>{class i{validateStyleProperty(t){return Tx(t)}matchesElement(t,o){return Dx(t,o)}containsElement(t,o){return Sx(t,o)}query(t,o,u){return Ix(t,o,u)}computeStyle(t,o,u){return u||""}animate(t,o,u,c,m,_=[],w){return new qc(u,c)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();class _I{}_I.NOOP=new RN;function FN(i,e,t){return t?e+":"+t+";":""}function kN(i){let e="";for(let t=0;t<i.style.length;t++){const o=i.style.item(t);e+=FN(0,o,i.style.getPropertyValue(o))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=FN(0,PP(t),i.style[t]));i.setAttribute("style",e)}function yl(i,e,t){i.style&&(Object.keys(e).forEach(o=>{const u=Nx(o);t&&!t.hasOwnProperty(o)&&(t[o]=i.style[u]),i.style[u]=e[o]}),vx()&&kN(i))}function Ug(i,e){i.style&&(Object.keys(e).forEach(t=>{const o=Nx(t);i.style[o]=""}),vx()&&kN(i))}const OP=/-+([a-z0-9])/g;function Nx(i){return i.replace(OP,(...e)=>e[1].toUpperCase())}function PP(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class g_{constructor(e,t,o){this._element=e,this._startStyles=t,this._endStyles=o,this._state=0;let u=g_.initialStylesByElement.get(e);u||g_.initialStylesByElement.set(e,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&yl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(yl(this._element,this._initialStyles),this._endStyles&&(yl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(g_.initialStylesByElement.delete(this._element),this._startStyles&&(Ug(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ug(this._element,this._endStyles),this._endStyles=null),yl(this._element,this._initialStyles),this._state=3)}}g_.initialStylesByElement=new WeakMap;const bO=new p.GfV("11.2.13"),ik=new p.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Hg,jo=(()=>{class i{constructor(t,o,u){this._hasDoneGlobalChecks=!1,this._document=u,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=o,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,p.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const o=this._document.createElement("div");o.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(o);const u=getComputedStyle(o);u&&"none"!==u.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(o)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&bO.full!==wN.full&&console.warn("The Angular Material version ("+bO.full+") does not match the Angular CDK version ("+wN.full+").\nPlease ensure the versions of these two packages exactly match.")}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(_N),p.LFG(ik,8),p.LFG(be))},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[EN],EN]}),i})();try{Hg="undefined"!=typeof Intl}catch(i){Hg=!1}let SO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[jo,gI],jo]}),i})();$(9105);let Hk=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[ma,jo],jo]}),i})(),Zk=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[jo],jo]}),i})();$(205);let CL=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[jo],jo]}),i})();function KO(i,e,t){const o={timing:i,delay:0,rotateX:e,rotateY:t};return Gc([qt({"backface-visibility":"visible"}),rh("{{ timing }}s {{ delay }}s ease-in",pl([qt({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),qt({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),qt({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),qt({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),qt({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:o})}RegExp(/^(?=.*?[a-z])/),RegExp(/^(?=.*?[A-Z])/),RegExp(/^(?=.*?[0-9])/),RegExp(/^(?=.*?[" !"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"])/),KO(1,1,0),KO(1,0,1),Gc(rh("{{ timing }}s {{ delay }}s",pl([qt({transform:"translate3d(0, 0, 0)",offset:0}),qt({transform:"translate3d(-10px, 0, 0)",offset:.1}),qt({transform:"translate3d(10px, 0, 0)",offset:.2}),qt({transform:"translate3d(-10px, 0, 0)",offset:.3}),qt({transform:"translate3d(10px, 0, 0)",offset:.4}),qt({transform:"translate3d(-10px, 0, 0)",offset:.5}),qt({transform:"translate3d(10px, 0, 0)",offset:.6}),qt({transform:"translate3d(-10px, 0, 0)",offset:.7}),qt({transform:"translate3d(10px, 0, 0)",offset:.8}),qt({transform:"translate3d(-10px, 0, 0)",offset:.9}),qt({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}});let JL=(()=>{class i{static forRoot(){return{ngModule:i,providers:[]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[ma,Hk,Zk,CL,SO]]}),i})(),I2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[ma,jo,D],jo]}),i})(),A2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i,bootstrap:[dx]}),i.\u0275inj=p.cJS({providers:[],imports:[[Dh,cx,nn.hO.initializeApp(cd_firebase),Eo,FA,Kw.withConfig({warnOnNgModelWithFormControl:"never"}),JL,I2,ex]]}),i})();(0,p.G48)(),Fs().bootstrapModule(A2).catch(i=>console.error(i))},4762:(et,xe,$)=>{"use strict";$.d(xe,{ZT:()=>me,pi:()=>P,mG:()=>ce,Jh:()=>oe,XA:()=>H,CR:()=>J,ev:()=>Ie});var p=function(fe,pe){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,le){ge.__proto__=le}||function(ge,le){for(var Ae in le)Object.prototype.hasOwnProperty.call(le,Ae)&&(ge[Ae]=le[Ae])})(fe,pe)};function me(fe,pe){if("function"!=typeof pe&&null!==pe)throw new TypeError("Class extends value "+String(pe)+" is not a constructor or null");function ge(){this.constructor=fe}p(fe,pe),fe.prototype=null===pe?Object.create(pe):(ge.prototype=pe.prototype,new ge)}var P=function(){return(P=Object.assign||function(pe){for(var ge,le=1,Ae=arguments.length;le<Ae;le++)for(var he in ge=arguments[le])Object.prototype.hasOwnProperty.call(ge,he)&&(pe[he]=ge[he]);return pe}).apply(this,arguments)};function ce(fe,pe,ge,le){return new(ge||(ge=Promise))(function(he,ft){function ht(rt){try{at(le.next(rt))}catch(ze){ft(ze)}}function mn(rt){try{at(le.throw(rt))}catch(ze){ft(ze)}}function at(rt){rt.done?he(rt.value):function(he){return he instanceof ge?he:new ge(function(ft){ft(he)})}(rt.value).then(ht,mn)}at((le=le.apply(fe,pe||[])).next())})}function oe(fe,pe){var le,Ae,he,ft,ge={label:0,sent:function(){if(1&he[0])throw he[1];return he[1]},trys:[],ops:[]};return ft={next:ht(0),throw:ht(1),return:ht(2)},"function"==typeof Symbol&&(ft[Symbol.iterator]=function(){return this}),ft;function ht(at){return function(rt){return function(at){if(le)throw new TypeError("Generator is already executing.");for(;ge;)try{if(le=1,Ae&&(he=2&at[0]?Ae.return:at[0]?Ae.throw||((he=Ae.return)&&he.call(Ae),0):Ae.next)&&!(he=he.call(Ae,at[1])).done)return he;switch(Ae=0,he&&(at=[2&at[0],he.value]),at[0]){case 0:case 1:he=at;break;case 4:return ge.label++,{value:at[1],done:!1};case 5:ge.label++,Ae=at[1],at=[0];continue;case 7:at=ge.ops.pop(),ge.trys.pop();continue;default:if(!(he=(he=ge.trys).length>0&&he[he.length-1])&&(6===at[0]||2===at[0])){ge=0;continue}if(3===at[0]&&(!he||at[1]>he[0]&&at[1]<he[3])){ge.label=at[1];break}if(6===at[0]&&ge.label<he[1]){ge.label=he[1],he=at;break}if(he&&ge.label<he[2]){ge.label=he[2],ge.ops.push(at);break}he[2]&&ge.ops.pop(),ge.trys.pop();continue}at=pe.call(fe,ge)}catch(rt){at=[6,rt],Ae=0}finally{le=he=0}if(5&at[0])throw at[1];return{value:at[0]?at[1]:void 0,done:!0}}([at,rt])}}}function H(fe){var pe="function"==typeof Symbol&&Symbol.iterator,ge=pe&&fe[pe],le=0;if(ge)return ge.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&le>=fe.length&&(fe=void 0),{value:fe&&fe[le++],done:!fe}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(fe,pe){var ge="function"==typeof Symbol&&fe[Symbol.iterator];if(!ge)return fe;var Ae,ft,le=ge.call(fe),he=[];try{for(;(void 0===pe||pe-- >0)&&!(Ae=le.next()).done;)he.push(Ae.value)}catch(ht){ft={error:ht}}finally{try{Ae&&!Ae.done&&(ge=le.return)&&ge.call(le)}finally{if(ft)throw ft.error}}return he}function Ie(fe,pe,ge){if(ge||2===arguments.length)for(var he,le=0,Ae=pe.length;le<Ae;le++)(he||!(le in pe))&&(he||(he=Array.prototype.slice.call(pe,0,le)),he[le]=pe[le]);return fe.concat(he||Array.prototype.slice.call(pe))}}},et=>{et(et.s=2120)}]);