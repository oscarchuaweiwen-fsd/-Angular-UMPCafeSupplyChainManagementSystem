(self.webpackChunkumpcafe_supply_chain_management_system=self.webpackChunkumpcafe_supply_chain_management_system||[]).push([[179],{8255:ai=>{function _n(nt){return Promise.resolve().then(()=>{var s=new Error("Cannot find module '"+nt+"'");throw s.code="MODULE_NOT_FOUND",s})}_n.keys=()=>[],_n.resolve=_n,_n.id=8255,ai.exports=_n},7716:(ai,_n,nt)=>{"use strict";nt.d(_n,{deG:()=>Bn,tb:()=>UC,AFp:()=>NC,ip1:()=>tw,CZH:()=>c_,hGG:()=>YR,z2F:()=>ow,sBO:()=>Am,Sil:()=>Ap,_Vd:()=>Tm,EJc:()=>HC,SBq:()=>Id,qLn:()=>Dh,vpe:()=>Dc,gxx:()=>Cd,tBr:()=>qs,XFs:()=>Yn,OlP:()=>Po,zs3:()=>de,ZZ4:()=>y0,aQg:()=>v0,soG:()=>Ld,YKP:()=>TT,v3s:()=>CR,h0i:()=>km,PXZ:()=>_R,R0b:()=>oc,FiY:()=>wl,Lbi:()=>VC,g9A:()=>zC,n_E:()=>Ub,Qsj:()=>dT,FYo:()=>Mb,JOm:()=>Xa,Tiy:()=>Yh,q3G:()=>oi,tp0:()=>Zs,EAV:()=>AR,Rgc:()=>Iy,dDg:()=>gI,DyG:()=>U,q4F:()=>ky,GfV:()=>$1,s_b:()=>w0,ifc:()=>$n,eFA:()=>xI,Ez6:()=>Do,G48:()=>hR,Gpc:()=>Et,f3M:()=>cr,X6Q:()=>jC,_c5:()=>BR,VLi:()=>uR,c2e:()=>IM,zSh:()=>kl,wAp:()=>ki,vHH:()=>an,EiD:()=>ud,mCW:()=>ja,qzn:()=>Eh,JVY:()=>M_,pB0:()=>A_,eBb:()=>Yl,L6k:()=>Hf,LAX:()=>wv,cg1:()=>O1,Tjo:()=>LR,kL8:()=>NE,yhl:()=>T_,dqk:()=>br,sIi:()=>Vh,CqO:()=>Wu,QGY:()=>rn,F4k:()=>Dn,RDi:()=>ch,AaK:()=>Be,z3N:()=>Xc,qOj:()=>ao,TTD:()=>sr,_Bn:()=>q1,xp6:()=>kv,uIk:()=>Ux,Tol:()=>n0,Gre:()=>_b,ekj:()=>mb,Suo:()=>Hb,Xpm:()=>He,lG2:()=>xt,Yz7:()=>Yi,cJS:()=>fr,oAB:()=>yt,Yjl:()=>Ft,Y36:()=>dy,_UZ:()=>Kx,GkF:()=>Dk,BQk:()=>vE,ynx:()=>e0,qZA:()=>Jx,TgZ:()=>Qx,EpF:()=>cu,n5z:()=>tp,Ikx:()=>a0,LFG:()=>wi,$8M:()=>bh,NdJ:()=>ub,CRH:()=>q0,kcU:()=>gh,O4$:()=>Bc,oxw:()=>qi,ALo:()=>CC,lcZ:()=>Gy,Hsn:()=>f1,F$t:()=>bE,Q6J:()=>Wx,s9C:()=>Mr,DdM:()=>KT,VKq:()=>zb,WLB:()=>_C,kEZ:()=>yC,l5B:()=>vC,qbA:()=>eM,HTZ:()=>tM,Hh0:()=>nM,rFY:()=>U0,iGM:()=>aM,MAs:()=>uE,pYS:()=>Ih,CHM:()=>td,oJD:()=>Ya,LSH:()=>bc,kYT:()=>Ot,Udp:()=>fb,WFA:()=>Gn,d8E:()=>l0,YNc:()=>Jw,W1O:()=>Z0,_uU:()=>TE,Oqu:()=>w1,hij:()=>ym,AsE:()=>yy,Gf:()=>Nm});var s=nt(9765),Vt=nt(5319),Ee=nt(7574),A=nt(6682),gt=nt(8819);function Dt(c){for(let u in c)if(c[u]===Dt)return u;throw Error("Could not find renamed property on target object.")}function wt(c,u){for(const m in u)u.hasOwnProperty(m)&&!c.hasOwnProperty(m)&&(c[m]=u[m])}function Be(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(Be).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const u=c.toString();if(null==u)return""+u;const m=u.indexOf("\n");return-1===m?u:u.substring(0,m)}function Ge(c,u){return null==c||""===c?null===u?"":u:null==u||""===u?c:c+" "+u}const Ve=Dt({__forward_ref__:Dt});function Et(c){return c.__forward_ref__=Et,c.toString=function(){return Be(this())},c}function lt(c){return Ct(c)?c():c}function Ct(c){return"function"==typeof c&&c.hasOwnProperty(Ve)&&c.__forward_ref__===Et}class an extends Error{constructor(u,m){super(function(c,u){return`${c?`NG0${c}: `:""}${u}`}(u,m)),this.code=u}}function dn(c){return"string"==typeof c?c:null==c?"":String(c)}function Mt(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():dn(c)}function Di(c,u){const m=u?` in ${u}`:"";throw new an("201",`No provider for ${Mt(c)} found${m}`)}function ii(c,u){null==c&&function(c,u,m,b){throw new Error(`ASSERTION ERROR: ${c}`+(null==b?"":` [Expected=> ${m} ${b} ${u} <=Actual]`))}(u,c,null,"!=")}function Yi(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}const Do=Yi;function fr(c){return{providers:c.providers||[],imports:c.imports||[]}}function io(c){return Or(c,Li)||Or(c,co)}function Or(c,u){return c.hasOwnProperty(u)?c[u]:null}function hs(c){return c&&(c.hasOwnProperty(Si)||c.hasOwnProperty(Io))?c[Si]:null}const Li=Dt({\u0275prov:Dt}),Si=Dt({\u0275inj:Dt}),co=Dt({ngInjectableDef:Dt}),Io=Dt({ngInjectorDef:Dt});var Yn=(()=>((Yn=Yn||{})[Yn.Default=0]="Default",Yn[Yn.Host=1]="Host",Yn[Yn.Self=2]="Self",Yn[Yn.SkipSelf=4]="SkipSelf",Yn[Yn.Optional=8]="Optional",Yn))();let yr;function vr(c){const u=yr;return yr=c,u}function ns(c,u,m){const b=io(c);return b&&"root"==b.providedIn?void 0===b.value?b.value=b.factory():b.value:m&Yn.Optional?null:void 0!==u?u:void Di(Be(c),"Injector")}function uo(c){return{toString:c}.toString()}var Ur=(()=>((Ur=Ur||{})[Ur.OnPush=0]="OnPush",Ur[Ur.Default=1]="Default",Ur))(),$n=(()=>(($n=$n||{})[$n.Emulated=0]="Emulated",$n[$n.None=2]="None",$n[$n.ShadowDom=3]="ShadowDom",$n))();const Ei="undefined"!=typeof globalThis&&globalThis,Nl="undefined"!=typeof window&&window,Vs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_s="undefined"!=typeof global&&global,br=Ei||_s||Nl||Vs,ft={},dt=[],Tt=Dt({\u0275cmp:Dt}),Jt=Dt({\u0275dir:Dt}),Lt=Dt({\u0275pipe:Dt}),Ln=Dt({\u0275mod:Dt}),di=Dt({\u0275loc:Dt}),Oi=Dt({\u0275fac:Dt}),ir=Dt({__NG_ELEMENT_ID__:Dt});let er=0;function He(c){return uo(()=>{const m={},b={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:m,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===Ur.OnPush,directiveDefs:null,pipeDefs:null,selectors:c.selectors||dt,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||$n.Emulated,id:"c",styles:c.styles||dt,_:null,setInput:null,schemas:c.schemas||null,tView:null},T=c.directives,N=c.features,j=c.pipes;return b.id+=er++,b.inputs=Pt(c.inputs,m),b.outputs=Pt(c.outputs),N&&N.forEach(W=>W(b)),b.directiveDefs=T?()=>("function"==typeof T?T():T).map(De):null,b.pipeDefs=j?()=>("function"==typeof j?j():j).map(qe):null,b})}function De(c){return en(c)||function(c){return c[Jt]||null}(c)}function qe(c){return function(c){return c[Lt]||null}(c)}const it={};function yt(c){return uo(()=>{const u={type:c.type,bootstrap:c.bootstrap||dt,declarations:c.declarations||dt,imports:c.imports||dt,exports:c.exports||dt,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null};return null!=c.id&&(it[c.id]=c.type),u})}function Ot(c,u){return uo(()=>{const m=p(c,!0);m.declarations=u.declarations||dt,m.imports=u.imports||dt,m.exports=u.exports||dt})}function Pt(c,u){if(null==c)return ft;const m={};for(const b in c)if(c.hasOwnProperty(b)){let T=c[b],N=T;Array.isArray(T)&&(N=T[1],T=T[0]),m[T]=b,u&&(u[T]=N)}return m}const xt=He;function Ft(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,onDestroy:c.type.prototype.ngOnDestroy||null}}function en(c){return c[Tt]||null}function p(c,u){const m=c[Ln]||null;if(!m&&!0===u)throw new Error(`Type ${Be(c)} does not have '\u0275mod' property.`);return m}const Y=16;function rr(c){return Array.isArray(c)&&"object"==typeof c[1]}function yo(c){return Array.isArray(c)&&!0===c[1]}function Tr(c){return 0!=(8&c.flags)}function or(c){return 2==(2&c.flags)}function No(c){return 1==(1&c.flags)}function xr(c){return null!==c.template}function ys(c){return 0!=(512&c[2])}function hl(c,u){return c.hasOwnProperty(Oi)?c[Oi]:null}class bu{constructor(u,m,b){this.previousValue=u,this.currentValue=m,this.firstChange=b}isFirstChange(){return this.firstChange}}function sr(){return dl}function dl(c){return c.type.prototype.ngOnChanges&&(c.setInput=oh),rh}function rh(){const c=sh(this),u=null==c?void 0:c.current;if(u){const m=c.previous;if(m===ft)c.previous=u;else for(let b in u)m[b]=u[b];c.current=null,this.ngOnChanges(u)}}function oh(c,u,m,b){const T=sh(c)||function(c,u){return c[Zi]=u}(c,{previous:ft,current:null}),N=T.current||(T.current={}),j=T.previous,W=this.declaredInputs[m],ie=j[W];N[W]=new bu(ie&&ie.currentValue,u,j===ft),c[b]=u}sr.ngInherit=!0;const Zi="__ngSimpleChanges__";function sh(c){return c[Zi]||null}const ui="http://www.w3.org/2000/svg";let xu;function ch(c){xu=c}function Kh(){return void 0!==xu?xu:"undefined"!=typeof document?document:void 0}function Xr(c){return!!c.listen}const Ii={createRenderer:(c,u)=>Kh()};function Pr(c){for(;Array.isArray(c);)c=c[0];return c}function Fc(c,u){return Pr(u[c])}function Ma(c,u){return Pr(u[c.index])}function Aa(c,u){return c.data[u]}function Ba(c,u){return c[u]}function Gs(c,u){const m=u[c];return rr(m)?m:m[0]}function ra(c){return 4==(4&c[2])}function qd(c){return 128==(128&c[2])}function za(c,u){return null==u?null:c[u]}function ed(c){c[18]=0}function Va(c,u){c[5]+=u;let m=c,b=c[3];for(;null!==b&&(1===u&&1===m[5]||-1===u&&0===m[5]);)b[5]+=u,m=b,b=b[3]}const bi={lFrame:_l(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Df(){return bi.bindingsEnabled}function wn(){return bi.lFrame.lView}function hr(){return bi.lFrame.tView}function td(c){return bi.lFrame.contextLView=c,c[8]}function wo(){let c=nd();for(;null!==c&&64===c.type;)c=c.parent;return c}function nd(){return bi.lFrame.currentTNode}function ds(c,u){const m=bi.lFrame;m.currentTNode=c,m.isParent=u}function pl(){return bi.lFrame.isParent}function ph(){bi.lFrame.isParent=!1}function oa(){return bi.isInCheckNoChangesMode}function fl(c){bi.isInCheckNoChangesMode=c}function so(){const c=bi.lFrame;let u=c.bindingRootIndex;return-1===u&&(u=c.bindingRootIndex=c.tView.bindingStartIndex),u}function Wo(){return bi.lFrame.bindingIndex}function Ha(){return bi.lFrame.bindingIndex++}function Ui(c){const u=bi.lFrame,m=u.bindingIndex;return u.bindingIndex=u.bindingIndex+c,m}function Up(c,u){const m=bi.lFrame;m.bindingIndex=m.bindingRootIndex=c,js(u)}function js(c){bi.lFrame.currentDirectiveIndex=c}function Nc(c){const u=bi.lFrame.currentDirectiveIndex;return-1===u?null:c[u]}function id(){return bi.lFrame.currentQueryIndex}function Eu(c){bi.lFrame.currentQueryIndex=c}function Wd(c){const u=c[1];return 2===u.type?u.declTNode:1===u.type?c[6]:null}function ka(c,u,m){if(m&Yn.SkipSelf){let T=u,N=c;for(;!(T=T.parent,null!==T||m&Yn.Host||(T=Wd(N),null===T||(N=N[15],10&T.type))););if(null===T)return!1;u=T,c=N}const b=bi.lFrame=gl();return b.currentTNode=u,b.lView=c,!0}function ml(c){const u=gl(),m=c[1];bi.lFrame=u,u.currentTNode=m.firstChild,u.lView=c,u.tView=m,u.contextLView=c,u.bindingIndex=m.bindingStartIndex,u.inI18n=!1}function gl(){const c=bi.lFrame,u=null===c?null:c.child;return null===u?_l(c):u}function _l(c){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=u),u}function Hp(){const c=bi.lFrame;return bi.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const mh=Hp;function Ds(){const c=Hp();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function Vo(){return bi.lFrame.selectedIndex}function sa(c){bi.lFrame.selectedIndex=c}function Fr(){const c=bi.lFrame;return Aa(c.tView,c.selectedIndex)}function Bc(){bi.lFrame.currentNamespace=ui}function gh(){bi.lFrame.currentNamespace=null}function yl(c,u){for(let m=u.directiveStart,b=u.directiveEnd;m<b;m++){const N=c.data[m].type.prototype,{ngAfterContentInit:j,ngAfterContentChecked:W,ngAfterViewInit:ie,ngAfterViewChecked:he,ngOnDestroy:Te}=N;j&&(c.contentHooks||(c.contentHooks=[])).push(-m,j),W&&((c.contentHooks||(c.contentHooks=[])).push(m,W),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(m,W)),ie&&(c.viewHooks||(c.viewHooks=[])).push(-m,ie),he&&((c.viewHooks||(c.viewHooks=[])).push(m,he),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(m,he)),null!=Te&&(c.destroyHooks||(c.destroyHooks=[])).push(m,Te)}}function Vl(c,u,m){vl(c,u,3,m)}function _h(c,u,m,b){(3&c[2])===m&&vl(c,u,m,b)}function yh(c,u){let m=c[2];(3&m)===u&&(m&=2047,m+=1,c[2]=m)}function vl(c,u,m,b){const N=null!=b?b:-1,j=u.length-1;let W=0;for(let ie=void 0!==b?65535&c[18]:0;ie<j;ie++)if("number"==typeof u[ie+1]){if(W=u[ie],null!=b&&W>=b)break}else u[ie]<0&&(c[18]+=65536),(W<N||-1==N)&&(Tu(c,m,u,ie),c[18]=(4294901760&c[18])+ie+2),ie++}function Tu(c,u,m,b){const T=m[b]<0,N=m[b+1],W=c[T?-m[b]:m[b]];if(T){if(c[2]>>11<c[18]>>16&&(3&c[2])===u){c[2]+=2048;try{N.call(W)}finally{}}}else try{N.call(W)}finally{}}class fs{constructor(u,m,b){this.factory=u,this.resolving=!1,this.canSeeViewProviders=m,this.injectImpl=b}}function Qd(c,u,m){const b=Xr(c);let T=0;for(;T<m.length;){const N=m[T];if("number"==typeof N){if(0!==N)break;T++;const j=m[T++],W=m[T++],ie=m[T++];b?c.setAttribute(u,W,ie,j):u.setAttributeNS(j,W,ie)}else{const j=N,W=m[++T];Qr(j)?b&&c.setProperty(u,j,W):b?c.setAttribute(u,j,W):u.setAttribute(j,W),T++}}return T}function Yp(c){return 3===c||4===c||6===c}function Qr(c){return 64===c.charCodeAt(0)}function od(c,u){if(null!==u&&0!==u.length)if(null===c||0===c.length)c=u.slice();else{let m=-1;for(let b=0;b<u.length;b++){const T=u[b];"number"==typeof T?m=T:0===m||bl(c,m,T,null,-1===m||2===m?u[++b]:null)}}return c}function bl(c,u,m,b,T){let N=0,j=c.length;if(-1===u)j=-1;else for(;N<c.length;){const W=c[N++];if("number"==typeof W){if(W===u){j=-1;break}if(W>u){j=N-1;break}}}for(;N<c.length;){const W=c[N];if("number"==typeof W)break;if(W===m){if(null===b)return void(null!==T&&(c[N+1]=T));if(b===c[N+1])return void(c[N+2]=T)}N++,null!==b&&N++,null!==T&&N++}-1!==j&&(c.splice(j,0,u),N=j+1),c.splice(N++,0,m),null!==b&&c.splice(N++,0,b),null!==T&&c.splice(N++,0,T)}function vh(c){return-1!==c}function aa(c){return 32767&c}function Vc(c,u){let m=function(c){return c>>16}(c),b=u;for(;m>0;)b=b[15],m--;return b}let qp=!0;function Au(c){const u=qp;return qp=c,u}let pc=0;function ku(c,u){const m=qn(c,u);if(-1!==m)return m;const b=u[1];b.firstCreatePass&&(c.injectorIndex=u.length,Du(b.data,c),Du(u,null),Du(b.blueprint,null));const T=wr(c,u),N=c.injectorIndex;if(vh(T)){const j=aa(T),W=Vc(T,u),ie=W[1].data;for(let he=0;he<8;he++)u[N+he]=W[j+he]|ie[j+he]}return u[N+8]=T,N}function Du(c,u){c.push(0,0,0,0,0,0,0,0,u)}function qn(c,u){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===u[c.injectorIndex+8]?-1:c.injectorIndex}function wr(c,u){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let m=0,b=null,T=u;for(;null!==T;){const N=T[1],j=N.type;if(b=2===j?N.declTNode:1===j?T[6]:null,null===b)return-1;if(m++,T=T[15],-1!==b.injectorIndex)return b.injectorIndex|m<<16}return-1}function xl(c,u,m){!function(c,u,m){let b;"string"==typeof m?b=m.charCodeAt(0)||0:m.hasOwnProperty(ir)&&(b=m[ir]),null==b&&(b=m[ir]=pc++);const T=255&b;u.data[c+(T>>5)]|=1<<T}(c,u,m)}function Qn(c,u,m){if(m&Yn.Optional)return c;Di(u,"NodeInjector")}function vs(c,u,m,b){if(m&Yn.Optional&&void 0===b&&(b=null),0==(m&(Yn.Self|Yn.Host))){const T=c[9],N=vr(void 0);try{return T?T.get(u,b,m&Yn.Optional):ns(u,b,m&Yn.Optional)}finally{vr(N)}}return Qn(b,u,m)}function ri(c,u,m,b=Yn.Default,T){if(null!==c){const N=function(c){if("string"==typeof c)return c.charCodeAt(0)||0;const u=c.hasOwnProperty(ir)?c[ir]:void 0;return"number"==typeof u?u>=0?255&u:jr:u}(m);if("function"==typeof N){if(!ka(u,c,b))return b&Yn.Host?Qn(T,m,b):vs(u,m,b,T);try{const j=N(b);if(null!=j||b&Yn.Optional)return j;Di(m)}finally{mh()}}else if("number"==typeof N){let j=null,W=qn(c,u),ie=-1,he=b&Yn.Host?u[Y][6]:null;for((-1===W||b&Yn.SkipSelf)&&(ie=-1===W?wr(c,u):u[W+8],-1!==ie&&la(b,!1)?(j=u[1],W=aa(ie),u=Vc(ie,u)):W=-1);-1!==W;){const Te=u[1];if($o(N,W,Te.data)){const Le=Is(W,u,m,j,b,he);if(Le!==Kd)return Le}ie=u[W+8],-1!==ie&&la(b,u[1].data[W+8]===he)&&$o(N,W,u)?(j=Te,W=aa(ie),u=Vc(ie,u)):W=-1}}}return vs(u,m,b,T)}const Kd={};function jr(){return new Uc(wo(),wn())}function Is(c,u,m,b,T,N){const j=u[1],W=j.data[c+8],Te=Yr(W,j,m,null==b?or(W)&&qp:b!=j&&0!=(3&W.type),T&Yn.Host&&N===W);return null!==Te?Hl(u,j,Te,W):Kd}function Yr(c,u,m,b,T){const N=c.providerIndexes,j=u.data,W=1048575&N,ie=c.directiveStart,Te=N>>20,Ze=T?W+Te:c.directiveEnd;for(let _t=b?W:W+Te;_t<Ze;_t++){const At=j[_t];if(_t<ie&&m===At||_t>=ie&&At.type===m)return _t}if(T){const _t=j[ie];if(_t&&xr(_t)&&_t.type===m)return ie}return null}function Hl(c,u,m,b){let T=c[m];const N=u.data;if(function(c){return c instanceof fs}(T)){const j=T;j.resolving&&function(c,u){throw new an("200",`Circular dependency in DI detected for ${c}`)}(Mt(N[m]));const W=Au(j.canSeeViewProviders);j.resolving=!0;const ie=j.injectImpl?vr(j.injectImpl):null;ka(c,b,Yn.Default);try{T=c[m]=j.factory(void 0,N,c,b),u.firstCreatePass&&m>=b.directiveStart&&function(c,u,m){const{ngOnChanges:b,ngOnInit:T,ngDoCheck:N}=u.type.prototype;if(b){const j=dl(u);(m.preOrderHooks||(m.preOrderHooks=[])).push(c,j),(m.preOrderCheckHooks||(m.preOrderCheckHooks=[])).push(c,j)}T&&(m.preOrderHooks||(m.preOrderHooks=[])).push(0-c,T),N&&((m.preOrderHooks||(m.preOrderHooks=[])).push(c,N),(m.preOrderCheckHooks||(m.preOrderCheckHooks=[])).push(c,N))}(m,N[m],u)}finally{null!==ie&&vr(ie),Au(W),j.resolving=!1,mh()}}return T}function $o(c,u,m){return!!(m[u+(c>>5)]&1<<c)}function la(c,u){return!(c&Yn.Self||c&Yn.Host&&u)}class Uc{constructor(u,m){this._tNode=u,this._lView=m}get(u,m){return ri(this._tNode,this._lView,u,void 0,m)}}function tp(c){return uo(()=>{const u=c.prototype.constructor,m=u[Oi]||fc(u),b=Object.prototype;let T=Object.getPrototypeOf(c.prototype).constructor;for(;T&&T!==b;){const N=T[Oi]||fc(T);if(N&&N!==m)return N;T=Object.getPrototypeOf(T)}return N=>new N})}function fc(c){return Ct(c)?()=>{const u=fc(lt(c));return u&&u()}:hl(c)}function bh(c){return function(c,u){if("class"===u)return c.classes;if("style"===u)return c.styles;const m=c.attrs;if(m){const b=m.length;let T=0;for(;T<b;){const N=m[T];if(Yp(N))break;if(0===N)T+=2;else if("number"==typeof N)for(T++;T<b&&"string"==typeof m[T];)T++;else{if(N===u)return m[T+1];T+=2}}}return null}(wo(),c)}const Gl="__parameters__";function mc(c,u,m){return uo(()=>{const b=function(c){return function(...m){if(c){const b=c(...m);for(const T in b)this[T]=b[T]}}}(u);function T(...N){if(this instanceof T)return b.apply(this,N),this;const j=new T(...N);return W.annotation=j,W;function W(ie,he,Te){const Le=ie.hasOwnProperty(Gl)?ie[Gl]:Object.defineProperty(ie,Gl,{value:[]})[Gl];for(;Le.length<=Te;)Le.push(null);return(Le[Te]=Le[Te]||[]).push(j),ie}}return m&&(T.prototype=Object.create(m.prototype)),T.prototype.ngMetadataName=c,T.annotationCls=T,T})}class Po{constructor(u,m){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof m?this.__NG_ELEMENT_ID__=m:void 0!==m&&(this.\u0275prov=Yi({token:this,providedIn:m.providedIn||"root",factory:m.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Bn=new Po("AnalyzeForEntryComponents"),U=Function;function ue(c,u){void 0===u&&(u=c);for(let m=0;m<c.length;m++){let b=c[m];Array.isArray(b)?(u===c&&(u=c.slice(0,m)),ue(b,u)):u!==c&&u.push(b)}return u}function fe(c,u){c.forEach(m=>Array.isArray(m)?fe(m,u):u(m))}function Ce(c,u,m){u>=c.length?c.push(m):c.splice(u,0,m)}function Ae(c,u){return u>=c.length-1?c.pop():c.splice(u,1)[0]}function Pe(c,u){const m=[];for(let b=0;b<c;b++)m.push(u);return m}function ot(c,u,m){let b=rt(c,u);return b>=0?c[1|b]=m:(b=~b,function(c,u,m,b){let T=c.length;if(T==u)c.push(m,b);else if(1===T)c.push(b,c[0]),c[0]=m;else{for(T--,c.push(c[T-1],c[T]);T>u;)c[T]=c[T-2],T--;c[u]=m,c[u+1]=b}}(c,b,u,m)),b}function vt(c,u){const m=rt(c,u);if(m>=0)return c[1|m]}function rt(c,u){return function(c,u,m){let b=0,T=c.length>>m;for(;T!==b;){const N=b+(T-b>>1),j=c[N<<m];if(u===j)return N<<m;j>u?T=N:b=N+1}return~(T<<m)}(c,u,1)}const ci={},ar="__NG_DI_FLAG__",mr="ngTempTokenPath",Bi=/\n/gm,ho="__source",bs=Dt({provide:String,useValue:Dt});let Uo;function Xo(c){const u=Uo;return Uo=c,u}function ha(c,u=Yn.Default){if(void 0===Uo)throw new Error("inject() must be called from an injection context");return null===Uo?ns(c,void 0,u):Uo.get(c,u&Yn.Optional?null:void 0,u)}function wi(c,u=Yn.Default){return(yr||ha)(lt(c),u)}const cr=wi;function qr(c){const u=[];for(let m=0;m<c.length;m++){const b=lt(c[m]);if(Array.isArray(b)){if(0===b.length)throw new Error("Arguments array must have arguments.");let T,N=Yn.Default;for(let j=0;j<b.length;j++){const W=b[j],ie=Jr(W);"number"==typeof ie?-1===ie?T=W.token:N|=ie:T=W}u.push(wi(T,N))}else u.push(wi(b))}return u}function po(c,u){return c[ar]=u,c.prototype[ar]=u,c}function Jr(c){return c[ar]}function da(c,u,m,b){const T=c[mr];throw u[ho]&&T.unshift(u[ho]),c.message=function(c,u,m,b=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.substr(2):c;let T=Be(u);if(Array.isArray(u))T=u.map(Be).join(" -> ");else if("object"==typeof u){let N=[];for(let j in u)if(u.hasOwnProperty(j)){let W=u[j];N.push(j+":"+("string"==typeof W?JSON.stringify(W):Be(W)))}T=`{${N.join(", ")}}`}return`${m}${b?"("+b+")":""}[${T}]: ${c.replace(Bi,"\n  ")}`}("\n"+c.message,T,m,b),c.ngTokenPath=T,c[mr]=null,c}const qs=po(mc("Inject",c=>({token:c})),-1),wl=po(mc("Optional"),8),Zs=po(mc("SkipSelf"),4);let pa,Vf;function Ro(c){var u;return(null===(u=function(){if(void 0===pa&&(pa=null,br.trustedTypes))try{pa=br.trustedTypes.createPolicy("angular",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch(c){}return pa}())||void 0===u?void 0:u.createHTML(c))||c}function Uf(c){var u;return(null===(u=function(){if(void 0===Vf&&(Vf=null,br.trustedTypes))try{Vf=br.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch(c){}return Vf}())||void 0===u?void 0:u.createHTML(c))||c}class Os{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class _c extends Os{getTypeName(){return"HTML"}}class Fu extends Os{getTypeName(){return"Style"}}class Ws extends Os{getTypeName(){return"Script"}}class yc extends Os{getTypeName(){return"URL"}}class Sh extends Os{getTypeName(){return"ResourceURL"}}function Xc(c){return c instanceof Os?c.changingThisBreaksApplicationSecurity:c}function Eh(c,u){const m=T_(c);if(null!=m&&m!==u){if("ResourceURL"===m&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${m} (see https://g.co/ng/security#xss)`)}return m===u}function T_(c){return c instanceof Os&&c.getTypeName()||null}function M_(c){return new _c(c)}function Hf(c){return new Fu(c)}function Yl(c){return new Ws(c)}function wv(c){return new yc(c)}function A_(c){return new Sh(c)}class Cr{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const m=(new window.DOMParser).parseFromString(Ro(u),"text/html").body;return null===m?this.inertDocumentHelper.getInertBodyElement(u):(m.removeChild(m.firstChild),m)}catch(m){return null}}}class Gf{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const m=this.inertDocument.createElement("html");this.inertDocument.appendChild(m);const b=this.inertDocument.createElement("body");m.appendChild(b)}}getInertBodyElement(u){const m=this.inertDocument.createElement("template");if("content"in m)return m.innerHTML=Ro(u),m;const b=this.inertDocument.createElement("body");return b.innerHTML=Ro(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(b),b}stripCustomNsAttrs(u){const m=u.attributes;for(let T=m.length-1;0<T;T--){const j=m.item(T).name;("xmlns:ns1"===j||0===j.indexOf("ns1:"))&&u.removeAttribute(j)}let b=u.firstChild;for(;b;)b.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(b),b=b.nextSibling}}const ld=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ja(c){return(c=String(c)).match(ld)||c.match(Hi)?c:"unsafe:"+c}function Cl(c){const u={};for(const m of c.split(","))u[m]=!0;return u}function vc(...c){const u={};for(const m of c)for(const b in m)m.hasOwnProperty(b)&&(u[b]=!0);return u}const D_=Cl("area,br,col,hr,img,wbr"),Lu=Cl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),I_=Cl("rp,rt"),Zl=vc(D_,vc(Lu,Cl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vc(I_,Cl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vc(I_,Lu)),$p=Cl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),os=Cl("srcset"),Xp=vc($p,os,Cl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rg=Cl("script,style,template");class og{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let m=u.firstChild,b=!0;for(;m;)if(m.nodeType===Node.ELEMENT_NODE?b=this.startElement(m):m.nodeType===Node.TEXT_NODE?this.chars(m.nodeValue):this.sanitizedSomething=!0,b&&m.firstChild)m=m.firstChild;else for(;m;){m.nodeType===Node.ELEMENT_NODE&&this.endElement(m);let T=this.checkClobberedElement(m,m.nextSibling);if(T){m=T;break}m=this.checkClobberedElement(m,m.parentNode)}return this.buf.join("")}startElement(u){const m=u.nodeName.toLowerCase();if(!Zl.hasOwnProperty(m))return this.sanitizedSomething=!0,!rg.hasOwnProperty(m);this.buf.push("<"),this.buf.push(m);const b=u.attributes;for(let T=0;T<b.length;T++){const N=b.item(T),j=N.name,W=j.toLowerCase();if(!Xp.hasOwnProperty(W)){this.sanitizedSomething=!0;continue}let ie=N.value;$p[W]&&(ie=ja(ie)),os[W]&&(c=ie,ie=(c=String(c)).split(",").map(u=>ja(u.trim())).join(", ")),this.buf.push(" ",j,'="',sg(ie),'"')}var c;return this.buf.push(">"),!0}endElement(u){const m=u.nodeName.toLowerCase();Zl.hasOwnProperty(m)&&!D_.hasOwnProperty(m)&&(this.buf.push("</"),this.buf.push(m),this.buf.push(">"))}chars(u){this.buf.push(sg(u))}checkClobberedElement(u,m){if(m&&(u.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return m}}const P_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fa=/([^\#-~ |!])/g;function sg(c){return c.replace(/&/g,"&amp;").replace(P_,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(fa,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fs;function ud(c,u){let m=null;try{Fs=Fs||function(c){const u=new Gf(c);return function(){try{return!!(new window.DOMParser).parseFromString(Ro(""),"text/html")}catch(c){return!1}}()?new Cr(u):u}(c);let b=u?String(u):"";m=Fs.getInertBodyElement(b);let T=5,N=b;do{if(0===T)throw new Error("Failed to sanitize html because the input is unstable");T--,b=N,N=m.innerHTML,m=Fs.getInertBodyElement(b)}while(b!==N);return Ro((new og).sanitizeChildren(El(m)||m))}finally{if(m){const b=El(m)||m;for(;b.firstChild;)b.removeChild(b.firstChild)}}}function El(c){return"content"in c&&function(c){return c.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===c.nodeName}(c)?c.content:null}var oi=(()=>((oi=oi||{})[oi.NONE=0]="NONE",oi[oi.HTML=1]="HTML",oi[oi.STYLE=2]="STYLE",oi[oi.SCRIPT=3]="SCRIPT",oi[oi.URL=4]="URL",oi[oi.RESOURCE_URL=5]="RESOURCE_URL",oi))();function Ya(c){const u=Mh();return u?Uf(u.sanitize(oi.HTML,c)||""):Eh(c,"HTML")?Uf(Xc(c)):ud(Kh(),dn(c))}function bc(c){const u=Mh();return u?u.sanitize(oi.URL,c)||"":Eh(c,"URL")?Xc(c):ja(dn(c))}function Mh(){const c=wn();return c&&c[12]}const Kp="__ngContext__";function $s(c,u){c[Kp]=u}function ef(c){const u=function(c){return c[Kp]||null}(c);return u?Array.isArray(u)?u:u.lView:null}function Zf(c){return c.ngOriginalError}function O_(c,...u){c.error(...u)}class Dh{constructor(){this._console=console}handleError(u){const m=this._findOriginalError(u),b=this._findContext(u),T=(c=u)&&c.ngErrorLogger||O_;var c;T(this._console,"ERROR",u),m&&T(this._console,"ORIGINAL ERROR",m),b&&T(this._console,"ERROR CONTEXT",b)}_findContext(u){return u?u.ngDebugContext||this._findContext(Zf(u)):null}_findOriginalError(u){let m=u&&Zf(u);for(;m&&Zf(m);)m=Zf(m);return m||null}}const md=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(br))();function Ih(c){return c.ownerDocument.body}function $l(c){return c instanceof Function?c():c}var Xa=(()=>((Xa=Xa||{})[Xa.Important=1]="Important",Xa[Xa.DashCase=2]="DashCase",Xa))();function Jc(c,u){return undefined(c,u)}function Rh(c){const u=c[3];return yo(u)?u[3]:u}function of(c){return _g(c[13])}function eu(c){return _g(c[4])}function _g(c){for(;null!==c&&!yo(c);)c=c[4];return c}function up(c,u,m,b,T){if(null!=b){let N,j=!1;yo(b)?N=b:rr(b)&&(j=!0,b=b[0]);const W=Pr(b);0===c&&null!==m?null==T?Oe(u,m,W):ye(u,m,W,T||null,!0):1===c&&null!==m?ye(u,m,W,T||null,!0):2===c?function(c,u,m){const b=pt(c,u);b&&function(c,u,m,b){Xr(c)?c.removeChild(u,m,b):u.removeChild(m)}(c,b,u,m)}(u,W,j):3===c&&u.destroyNode(W),null!=N&&function(c,u,m,b,T){const N=m[7];N!==Pr(m)&&up(u,c,b,N,T);for(let W=10;W<m.length;W++){const ie=m[W];Qa(ie[1],ie,c,u,b,N)}}(u,c,N,m,T)}}function gd(c,u,m){return Xr(c)?c.createElement(u,m):null===m?c.createElement(u):c.createElementNS(m,u)}function Pa(c,u){const m=c[9],b=m.indexOf(u),T=u[3];1024&u[2]&&(u[2]&=-1025,Va(T,-1)),m.splice(b,1)}function Qf(c,u){if(c.length<=10)return;const m=10+u,b=c[m];if(b){const T=b[17];null!==T&&T!==c&&Pa(T,b),u>0&&(c[m-1][4]=b[4]);const N=Ae(c,10+u);!function(c,u){Qa(c,u,u[11],2,null,null),u[0]=null,u[6]=null}(b[1],b);const j=N[19];null!==j&&j.detachView(N[1]),b[3]=null,b[4]=null,b[2]&=-129}return b}function E(c,u){if(!(256&u[2])){const m=u[11];Xr(m)&&m.destroyNode&&Qa(c,u,m,3,null,null),function(c){let u=c[13];if(!u)return S(c[1],c);for(;u;){let m=null;if(rr(u))m=u[13];else{const b=u[10];b&&(m=b)}if(!m){for(;u&&!u[4]&&u!==c;)rr(u)&&S(u[1],u),u=u[3];null===u&&(u=c),rr(u)&&S(u[1],u),m=u&&u[4]}u=m}}(u)}}function S(c,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function(c,u){let m;if(null!=c&&null!=(m=c.destroyHooks))for(let b=0;b<m.length;b+=2){const T=u[m[b]];if(!(T instanceof fs)){const N=m[b+1];if(Array.isArray(N))for(let j=0;j<N.length;j+=2){const W=T[N[j]],ie=N[j+1];try{ie.call(W)}finally{}}else try{N.call(T)}finally{}}}}(c,u),function(c,u){const m=c.cleanup,b=u[7];let T=-1;if(null!==m)for(let N=0;N<m.length-1;N+=2)if("string"==typeof m[N]){const j=m[N+1],W="function"==typeof j?j(u):Pr(u[j]),ie=b[T=m[N+2]],he=m[N+3];"boolean"==typeof he?W.removeEventListener(m[N],ie,he):he>=0?b[T=he]():b[T=-he].unsubscribe(),N+=2}else{const j=b[T=m[N+1]];m[N].call(j)}if(null!==b){for(let N=T+1;N<b.length;N++)b[N]();u[7]=null}}(c,u),1===u[1].type&&Xr(u[11])&&u[11].destroy();const m=u[17];if(null!==m&&yo(u[3])){m!==u[3]&&Pa(m,u);const b=u[19];null!==b&&b.detachView(c)}}}function Q(c,u,m){return function(c,u,m){let b=u;for(;null!==b&&40&b.type;)b=(u=b).parent;if(null===b)return m[0];if(2&b.flags){const T=c.data[b.directiveStart].encapsulation;if(T===$n.None||T===$n.Emulated)return null}return Ma(b,m)}(c,u.parent,m)}function ye(c,u,m,b,T){Xr(c)?c.insertBefore(u,m,b,T):u.insertBefore(m,b,T)}function Oe(c,u,m){Xr(c)?c.appendChild(u,m):u.appendChild(m)}function Ye(c,u,m,b,T){null!==b?ye(c,u,m,b,T):Oe(c,u,m)}function pt(c,u){return Xr(c)?c.parentNode(u):u.parentNode}function cn(c,u,m){return Wn(c,u,m)}let Wn=function(c,u,m){return 40&c.type?Ma(c,m):null};function Wi(c,u,m,b){const T=Q(c,b,u),N=u[11],W=cn(b.parent||u[6],b,u);if(null!=T)if(Array.isArray(m))for(let ie=0;ie<m.length;ie++)Ye(N,T,m[ie],W,!1);else Ye(N,T,m,W,!1)}function Qo(c,u){if(null!==u){const m=u.type;if(3&m)return Ma(u,c);if(4&m)return _d(-1,c[u.index]);if(8&m){const b=u.child;if(null!==b)return Qo(c,b);{const T=c[u.index];return yo(T)?_d(-1,T):Pr(T)}}if(32&m)return Jc(u,c)()||Pr(c[u.index]);{const b=Ml(c,u);return null!==b?Array.isArray(b)?b[0]:Qo(Rh(c[Y]),b):Qo(c,u.next)}}return null}function Ml(c,u){return null!==u?c[Y][6].projection[u.projection]:null}function _d(c,u){const m=10+c+1;if(m<u.length){const b=u[m],T=b[1].firstChild;if(null!==T)return Qo(b,T)}return u[7]}function vo(c,u,m,b,T,N,j){for(;null!=m;){const W=b[m.index],ie=m.type;if(j&&0===u&&(W&&$s(Pr(W),b),m.flags|=4),64!=(64&m.flags))if(8&ie)vo(c,u,m.child,b,T,N,!1),up(u,c,T,W,N);else if(32&ie){const he=Jc(m,b);let Te;for(;Te=he();)up(u,c,T,Te,N);up(u,c,T,W,N)}else 16&ie?hp(c,u,b,m,T,N):up(u,c,T,W,N);m=j?m.projectionNext:m.next}}function Qa(c,u,m,b,T,N){vo(m,b,c.firstChild,u,T,N,!1)}function hp(c,u,m,b,T,N){const j=m[Y],ie=j[6].projection[b.projection];if(Array.isArray(ie))for(let he=0;he<ie.length;he++)up(u,c,T,ie[he],N);else vo(c,u,ie,j[3],T,N,!0)}function Ex(c,u,m){Xr(c)?c.setAttribute(u,"style",m):u.style.cssText=m}function cf(c,u,m){Xr(c)?""===m?c.removeAttribute(u,"class"):c.setAttribute(u,"class",m):u.className=m}function Kf(c,u,m){let b=c.length;for(;;){const T=c.indexOf(u,m);if(-1===T)return T;if(0===T||c.charCodeAt(T-1)<=32){const N=u.length;if(T+N===b||c.charCodeAt(T+N)<=32)return T}m=T+1}}const Mv="ng-template";function Tx(c,u,m){let b=0;for(;b<c.length;){let T=c[b++];if(m&&"class"===T){if(T=c[b],-1!==Kf(T.toLowerCase(),u,0))return!0}else if(1===T){for(;b<c.length&&"string"==typeof(T=c[b++]);)if(T.toLowerCase()===u)return!0;return!1}}return!1}function em(c){return 4===c.type&&c.value!==Mv}function Kr(c,u,m){return u===(4!==c.type||m?c.value:Mv)}function Av(c,u,m){let b=4;const T=c.attrs||[],N=function(c){for(let u=0;u<c.length;u++)if(Yp(c[u]))return u;return c.length}(T);let j=!1;for(let W=0;W<u.length;W++){const ie=u[W];if("number"!=typeof ie){if(!j)if(4&b){if(b=2|1&b,""!==ie&&!Kr(c,ie,m)||""===ie&&1===u.length){if(tu(b))return!1;j=!0}}else{const he=8&b?ie:u[++W];if(8&b&&null!==c.attrs){if(!Tx(c.attrs,he,m)){if(tu(b))return!1;j=!0}continue}const Le=Mx(8&b?"class":ie,T,em(c),m);if(-1===Le){if(tu(b))return!1;j=!0;continue}if(""!==he){let Ze;Ze=Le>N?"":T[Le+1].toLowerCase();const _t=8&b?Ze:null;if(_t&&-1!==Kf(_t,he,0)||2&b&&he!==Ze){if(tu(b))return!1;j=!0}}}}else{if(!j&&!tu(b)&&!tu(ie))return!1;if(j&&tu(ie))continue;j=!1,b=ie|1&b}}return tu(b)||j}function tu(c){return 0==(1&c)}function Mx(c,u,m,b){if(null===u)return-1;let T=0;if(b||!m){let N=!1;for(;T<u.length;){const j=u[T];if(j===c)return T;if(3===j||6===j)N=!0;else{if(1===j||2===j){let W=u[++T];for(;"string"==typeof W;)W=u[++T];continue}if(4===j)break;if(0===j){T+=4;continue}}T+=N?1:2}return-1}return function(c,u){let m=c.indexOf(4);if(m>-1)for(m++;m<c.length;){const b=c[m];if("number"==typeof b)return-1;if(b===u)return m;m++}return-1}(u,c)}function Fh(c,u,m=!1){for(let b=0;b<u.length;b++)if(Av(c,u[b],m))return!0;return!1}function Bw(c,u){e:for(let m=0;m<u.length;m++){const b=u[m];if(c.length===b.length){for(let T=0;T<c.length;T++)if(c[T]!==b[T])continue e;return!0}}return!1}function kx(c,u){return c?":not("+u.trim()+")":u}function zw(c){let u=c[0],m=1,b=2,T="",N=!1;for(;m<c.length;){let j=c[m];if("string"==typeof j)if(2&b){const W=c[++m];T+="["+j+(W.length>0?'="'+W+'"':"")+"]"}else 8&b?T+="."+j:4&b&&(T+=" "+j);else""!==T&&!tu(j)&&(u+=kx(N,T),T=""),b=j,N=N||!tu(b);m++}return""!==T&&(u+=kx(N,T)),u}const $i={};function kv(c){Dv(hr(),wn(),Vo()+c,oa())}function Dv(c,u,m,b){if(!b)if(3==(3&u[2])){const N=c.preOrderCheckHooks;null!==N&&Vl(u,N,m)}else{const N=c.preOrderHooks;null!==N&&_h(u,N,0,m)}sa(m)}function dp(c,u){return c<<17|u<<2}function Ja(c){return c>>17&32767}function Pv(c){return 2|c}function yd(c){return(131068&c)>>2}function hf(c,u){return-131069&c|u<<2}function H_(c){return 1|c}function Lx(c,u){const m=c.contentQueries;if(null!==m)for(let b=0;b<m.length;b+=2){const T=m[b],N=m[b+1];if(-1!==N){const j=c.data[N];Eu(T),j.contentQueries(2,u[N],N)}}}function W_(c,u,m,b,T,N,j,W,ie,he){const Te=u.blueprint.slice();return Te[0]=T,Te[2]=140|b,ed(Te),Te[3]=Te[15]=c,Te[8]=m,Te[10]=j||c&&c[10],Te[11]=W||c&&c[11],Te[12]=ie||c&&c[12]||null,Te[9]=he||c&&c[9]||null,Te[6]=N,Te[Y]=2==u.type?c[Y]:Te,Te}function Lh(c,u,m,b,T){let N=c.data[u];if(null===N)N=function(c,u,m,b,T){const N=nd(),j=pl(),ie=c.data[u]=function(c,u,m,b,T,N){return{type:m,index:b,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:T,attrs:N,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,j?N:N&&N.parent,m,u,b,T);return null===c.firstChild&&(c.firstChild=ie),null!==N&&(j?null==N.child&&null!==ie.parent&&(N.child=ie):null===N.next&&(N.next=ie)),ie}(c,u,m,b,T),bi.lFrame.inI18n&&(N.flags|=64);else if(64&N.type){N.type=m,N.value=b,N.attrs=T;const j=function(){const c=bi.lFrame,u=c.currentTNode;return c.isParent?u:u.parent}();N.injectorIndex=null===j?-1:j.injectorIndex}return ds(N,!0),N}function mp(c,u,m,b){if(0===m)return-1;const T=u.length;for(let N=0;N<m;N++)u.push(b),c.blueprint.push(b),c.data.push(null);return T}function Cg(c,u,m){ml(u);try{const b=c.viewQuery;null!==b&&ry(1,b,m);const T=c.template;null!==T&&bd(c,u,T,1,m),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&Lx(c,u),c.staticViewQueries&&ry(2,c.viewQuery,m);const N=c.components;null!==N&&function(c,u){for(let m=0;m<u.length;m++)Xv(c,u[m])}(u,N)}catch(b){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),b}finally{u[2]&=-5,Ds()}}function We(c,u,m,b){const T=u[2];if(256==(256&T))return;ml(u);const N=oa();try{ed(u),function(c){bi.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==m&&bd(c,u,m,2,b);const j=3==(3&T);if(!N)if(j){const he=c.preOrderCheckHooks;null!==he&&Vl(u,he,null)}else{const he=c.preOrderHooks;null!==he&&_h(u,he,0,null),yh(u,0)}if(function(c){for(let u=of(c);null!==u;u=eu(u)){if(!u[2])continue;const m=u[9];for(let b=0;b<m.length;b++){const T=m[b],N=T[3];0==(1024&T[2])&&Va(N,1),T[2]|=1024}}}(u),function(c){for(let u=of(c);null!==u;u=eu(u))for(let m=10;m<u.length;m++){const b=u[m],T=b[1];qd(b)&&We(T,b,T.template,b[8])}}(u),null!==c.contentQueries&&Lx(c,u),!N)if(j){const he=c.contentCheckHooks;null!==he&&Vl(u,he)}else{const he=c.contentHooks;null!==he&&_h(u,he,1),yh(u,1)}!function(c,u){const m=c.hostBindingOpCodes;if(null!==m)try{for(let b=0;b<m.length;b++){const T=m[b];if(T<0)sa(~T);else{const N=T,j=m[++b],W=m[++b];Up(j,N),W(2,u[N])}}}finally{sa(-1)}}(c,u);const W=c.components;null!==W&&function(c,u){for(let m=0;m<u.length;m++)$v(c,u[m])}(u,W);const ie=c.viewQuery;if(null!==ie&&ry(2,ie,b),!N)if(j){const he=c.viewCheckHooks;null!==he&&Vl(u,he)}else{const he=c.viewHooks;null!==he&&_h(u,he,2),yh(u,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),N||(u[2]&=-73),1024&u[2]&&(u[2]&=-1025,Va(u[3],-1))}finally{Ds()}}function Zr(c,u,m,b){const T=u[10],N=!oa(),j=ra(u);try{N&&!j&&T.begin&&T.begin(),j&&Cg(c,u,b),We(c,u,m,b)}finally{N&&!j&&T.end&&T.end()}}function bd(c,u,m,b,T){const N=Vo(),j=2&b;try{sa(-1),j&&u.length>20&&Dv(c,u,20,oa()),m(b,T)}finally{sa(N)}}function ff(c,u,m){if(Tr(u)){const T=u.directiveEnd;for(let N=u.directiveStart;N<T;N++){const j=c.data[N];j.contentQueries&&j.contentQueries(1,m[N],N)}}}function Sg(c,u,m){!Df()||(function(c,u,m,b){const T=m.directiveStart,N=m.directiveEnd;c.firstCreatePass||ku(m,u),$s(b,u);const j=m.initialInputs;for(let W=T;W<N;W++){const ie=c.data[W],he=xr(ie);he&&ey(u,m,ie);const Te=Hl(u,c,W,m);$s(Te,u),null!==j&&yp(0,W-T,Te,ie,0,j),he&&(Gs(m.index,u)[8]=Te)}}(c,u,m,Ma(m,u)),128==(128&m.flags)&&function(c,u,m){const b=m.directiveStart,T=m.directiveEnd,j=m.index,W=bi.lFrame.currentDirectiveIndex;try{sa(j);for(let ie=b;ie<T;ie++){const he=c.data[ie],Te=u[ie];js(ie),(null!==he.hostBindings||0!==he.hostVars||null!==he.hostAttrs)&&xd(he,Te)}}finally{sa(-1),js(W)}}(c,u,m))}function $_(c,u,m=Ma){const b=u.localNames;if(null!==b){let T=u.index+1;for(let N=0;N<b.length;N+=2){const j=b[N+1],W=-1===j?m(u,c):c[j];c[T++]=W}}}function Nx(c){const u=c.tView;return null===u||u.incompleteFirstPass?c.tView=si(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):u}function si(c,u,m,b,T,N,j,W,ie,he){const Te=20+b,Le=Te+T,Ze=function(c,u){const m=[];for(let b=0;b<u;b++)m.push(b<c?null:$i);return m}(Te,Le),_t="function"==typeof he?he():he;return Ze[1]={type:c,blueprint:Ze,template:m,queries:null,viewQuery:W,declTNode:u,data:Ze.slice().fill(null,Te),bindingStartIndex:Te,expandoStartIndex:Le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof N?N():N,pipeRegistry:"function"==typeof j?j():j,firstChild:null,schemas:ie,consts:_t,incompleteFirstPass:!1}}function gp(c,u,m,b){const T=Kv(u);null===m?T.push(b):(T.push(m),c.firstCreatePass&&yf(c).push(b,T.length-1))}function X_(c,u,m){for(let b in c)if(c.hasOwnProperty(b)){const T=c[b];(m=null===m?{}:m).hasOwnProperty(b)?m[b].push(u,T):m[b]=[u,T]}return m}function Ka(c,u,m,b,T,N,j,W){const ie=Ma(u,m);let Te,he=u.inputs;!W&&null!=he&&(Te=he[b])?(vp(c,m,Te,b,T),or(u)&&function(c,u){const m=Gs(u,c);16&m[2]||(m[2]|=64)}(m,u.index)):3&u.type&&(b=function(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(b),T=null!=j?j(T,u.value||"",b):T,Xr(N)?N.setProperty(ie,b,T):Qr(b)||(ie.setProperty?ie.setProperty(b,T):ie[b]=T))}function Eg(c,u,m,b){let T=!1;if(Df()){const N=function(c,u,m){const b=c.directiveRegistry;let T=null;if(b)for(let N=0;N<b.length;N++){const j=b[N];Fh(m,j.selectors,!1)&&(T||(T=[]),xl(ku(m,u),c,j.type),xr(j)?(So(c,m),T.unshift(j)):T.push(j))}return T}(c,u,m),j=null===b?null:{"":-1};if(null!==N){T=!0,K_(m,c.data.length,N.length);for(let Te=0;Te<N.length;Te++){const Le=N[Te];Le.providersResolver&&Le.providersResolver(Le)}let W=!1,ie=!1,he=mp(c,u,N.length,null);for(let Te=0;Te<N.length;Te++){const Le=N[Te];m.mergedAttrs=od(m.mergedAttrs,Le.hostAttrs),Tg(c,m,u,he,Le),Yv(he,Le,j),null!==Le.contentQueries&&(m.flags|=8),(null!==Le.hostBindings||null!==Le.hostAttrs||0!==Le.hostVars)&&(m.flags|=128);const Ze=Le.type.prototype;!W&&(Ze.ngOnChanges||Ze.ngOnInit||Ze.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(m.index),W=!0),!ie&&(Ze.ngOnChanges||Ze.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(m.index),ie=!0),he++}!function(c,u){const b=u.directiveEnd,T=c.data,N=u.attrs,j=[];let W=null,ie=null;for(let he=u.directiveStart;he<b;he++){const Te=T[he],Le=Te.inputs,Ze=null===N||em(u)?null:qv(Le,N);j.push(Ze),W=X_(Le,he,W),ie=X_(Te.outputs,he,ie)}null!==W&&(W.hasOwnProperty("class")&&(u.flags|=16),W.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=j,u.inputs=W,u.outputs=ie}(c,m)}j&&function(c,u,m){if(u){const b=c.localNames=[];for(let T=0;T<u.length;T+=2){const N=m[u[T+1]];if(null==N)throw new an("301",`Export of name '${u[T+1]}' not found!`);b.push(u[T],N)}}}(m,b,j)}return m.mergedAttrs=od(m.mergedAttrs,m.attrs),T}function Gv(c,u,m,b,T,N){const j=N.hostBindings;if(j){let W=c.hostBindingOpCodes;null===W&&(W=c.hostBindingOpCodes=[]);const ie=~u.index;(function(c){let u=c.length;for(;u>0;){const m=c[--u];if("number"==typeof m&&m<0)return m}return 0})(W)!=ie&&W.push(ie),W.push(b,T,j)}}function xd(c,u){null!==c.hostBindings&&c.hostBindings(1,u)}function So(c,u){u.flags|=2,(c.components||(c.components=[])).push(u.index)}function Yv(c,u,m){if(m){if(u.exportAs)for(let b=0;b<u.exportAs.length;b++)m[u.exportAs[b]]=c;xr(u)&&(m[""]=c)}}function K_(c,u,m){c.flags|=1,c.directiveStart=u,c.directiveEnd=u+m,c.providerIndexes=u}function Tg(c,u,m,b,T){c.data[b]=T;const N=T.factory||(T.factory=hl(T.type)),j=new fs(N,xr(T),null);c.blueprint[b]=j,m[b]=j,Gv(c,u,0,b,mp(c,m,T.hostVars,$i),T)}function ey(c,u,m){const b=Ma(u,c),T=Nx(m),N=c[10],j=Nh(c,W_(c,T,null,m.onPush?64:16,b,u,N,N.createRenderer(b,m),null,null));c[u.index]=j}function Xl(c,u,m,b,T,N){const j=Ma(c,u);!function(c,u,m,b,T,N,j){if(null==N)Xr(c)?c.removeAttribute(u,T,m):u.removeAttribute(T);else{const W=null==j?dn(N):j(N,b||"",T);Xr(c)?c.setAttribute(u,T,W,m):m?u.setAttributeNS(m,T,W):u.setAttribute(T,W)}}(u[11],j,N,c.value,m,b,T)}function yp(c,u,m,b,T,N){const j=N[u];if(null!==j){const W=b.setInput;for(let ie=0;ie<j.length;){const he=j[ie++],Te=j[ie++],Le=j[ie++];null!==W?b.setInput(m,Le,he,Te):m[Te]=Le}}}function qv(c,u){let m=null,b=0;for(;b<u.length;){const T=u[b];if(0!==T)if(5!==T){if("number"==typeof T)break;c.hasOwnProperty(T)&&(null===m&&(m=[]),m.push(T,c[T],u[b+1])),b+=2}else b+=2;else b+=4}return m}function _f(c,u,m,b){return new Array(c,!0,!1,u,null,0,b,m,null,null)}function $v(c,u){const m=Gs(u,c);if(qd(m)){const b=m[1];80&m[2]?We(b,m,b.template,m[8]):m[5]>0&&Mg(m)}}function Mg(c){for(let b=of(c);null!==b;b=eu(b))for(let T=10;T<b.length;T++){const N=b[T];if(1024&N[2]){const j=N[1];We(j,N,j.template,N[8])}else N[5]>0&&Mg(N)}const m=c[1].components;if(null!==m)for(let b=0;b<m.length;b++){const T=Gs(m[b],c);qd(T)&&T[5]>0&&Mg(T)}}function Xv(c,u){const m=Gs(u,c),b=m[1];(function(c,u){for(let m=u.length;m<c.blueprint.length;m++)u.push(c.blueprint[m])})(b,m),Cg(b,m,m[8])}function Nh(c,u){return c[13]?c[14][4]=u:c[13]=u,c[14]=u,u}function am(c){for(;c;){c[2]|=64;const u=Rh(c);if(ys(c)&&!u)return c;c=u}return null}function ny(c,u,m){const b=u[10];b.begin&&b.begin();try{We(c,u,c.template,m)}catch(T){throw eb(u,T),T}finally{b.end&&b.end()}}function iy(c){!function(c){for(let u=0;u<c.components.length;u++){const m=c.components[u],b=ef(m),T=b[1];Zr(T,b,T.template,m)}}(c[8])}function ry(c,u,m){Eu(0),u(c,m)}const lm=(()=>Promise.resolve(null))();function Kv(c){return c[7]||(c[7]=[])}function yf(c){return c.cleanup||(c.cleanup=[])}function wd(c,u,m){return(null===c||xr(c))&&(m=function(c){for(;Array.isArray(c);){if("object"==typeof c[1])return c;c=c[0]}return null}(m[u.index])),m[11]}function eb(c,u){const m=c[9],b=m?m.get(Dh,null):null;b&&b.handleError(u)}function vp(c,u,m,b,T){for(let N=0;N<m.length;){const j=m[N++],W=m[N++],ie=u[j],he=c.data[j];null!==he.setInput?he.setInput(ie,T,b,W):ie[W]=T}}function ou(c,u,m){const b=Fc(u,c);!function(c,u,m){Xr(c)?c.setValue(u,m):u.textContent=m}(c[11],b,m)}function Gu(c,u,m){let b=m?c.styles:null,T=m?c.classes:null,N=0;if(null!==u)for(let j=0;j<u.length;j++){const W=u[j];"number"==typeof W?N=W:1==N?T=Ge(T,W):2==N&&(b=Ge(b,W+": "+u[++j]+";"))}m?c.styles=b:c.stylesWithoutHost=b,m?c.classes=T:c.classesWithoutHost=T}const Cd=new Po("INJECTOR",-1);class Dg{get(u,m=ci){if(m===ci){const b=new Error(`NullInjectorError: No provider for ${Be(u)}!`);throw b.name="NullInjectorError",b}return m}}const kl=new Po("Set Injector scope."),su={},tb={};let cm;function um(){return void 0===cm&&(cm=new Dg),cm}function Ig(c,u=null,m=null,b){return new nb(c,m,u||um(),b)}class nb{constructor(u,m,b,T=null){this.parent=b,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const N=[];m&&fe(m,W=>this.processProvider(W,u,m)),fe([u],W=>this.processInjectorType(W,[],N)),this.records.set(Cd,Sd(void 0,this));const j=this.records.get(kl);this.scope=null!=j?j.value:null,this.source=T||("object"==typeof u?null:Be(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,m=ci,b=Yn.Default){this.assertNotDestroyed();const T=Xo(this),N=vr(void 0);try{if(!(b&Yn.SkipSelf)){let W=this.records.get(u);if(void 0===W){const ie=("function"==typeof(c=u)||"object"==typeof c&&c instanceof Po)&&io(u);W=ie&&this.injectableDefInScope(ie)?Sd(hm(u),su):null,this.records.set(u,W)}if(null!=W)return this.hydrate(u,W)}return(b&Yn.Self?um():this.parent).get(u,m=b&Yn.Optional&&m===ci?null:m)}catch(j){if("NullInjectorError"===j.name){if((j[mr]=j[mr]||[]).unshift(Be(u)),T)throw j;return da(j,u,"R3InjectorError",this.source)}throw j}finally{vr(N),Xo(T)}var c}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((b,T)=>u.push(Be(T))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(u,m,b){if(!(u=lt(u)))return!1;let T=hs(u);const N=null==T&&u.ngModule||void 0,j=void 0===N?u:N,W=-1!==b.indexOf(j);if(void 0!==N&&(T=hs(N)),null==T)return!1;if(null!=T.imports&&!W){let Te;b.push(j);try{fe(T.imports,Le=>{this.processInjectorType(Le,m,b)&&(void 0===Te&&(Te=[]),Te.push(Le))})}finally{}if(void 0!==Te)for(let Le=0;Le<Te.length;Le++){const{ngModule:Ze,providers:_t}=Te[Le];fe(_t,At=>this.processProvider(At,Ze,_t||dt))}}this.injectorDefTypes.add(j);const ie=hl(j)||(()=>new j);this.records.set(j,Sd(ie,su));const he=T.providers;if(null!=he&&!W){const Te=u;fe(he,Le=>this.processProvider(Le,Te,he))}return void 0!==N&&void 0!==u.providers}processProvider(u,m,b){let T=x(u=lt(u))?u:lt(u&&u.provide);const N=g(c=u)?Sd(void 0,c.useValue):Sd(dm(c),su);var c;if(x(u)||!0!==u.multi)this.records.get(T);else{let j=this.records.get(T);j||(j=Sd(void 0,su,!0),j.factory=()=>qr(j.multi),this.records.set(T,j)),T=u,j.multi.push(u)}this.records.set(T,N)}hydrate(u,m){return m.value===su&&(m.value=tb,m.value=m.factory()),"object"==typeof m.value&&m.value&&null!==(c=m.value)&&"object"==typeof c&&"function"==typeof c.ngOnDestroy&&this.onDestroy.add(m.value),m.value;var c}injectableDefInScope(u){if(!u.providedIn)return!1;const m=lt(u.providedIn);return"string"==typeof m?"any"===m||m===this.scope:this.injectorDefTypes.has(m)}}function hm(c){const u=io(c),m=null!==u?u.factory:hl(c);if(null!==m)return m;if(c instanceof Po)throw new Error(`Token ${Be(c)} is missing a \u0275prov definition.`);if(c instanceof Function)return function(c){const u=c.length;if(u>0){const b=Pe(u,"?");throw new Error(`Can't resolve all parameters for ${Be(c)}: (${b.join(", ")}).`)}const m=function(c){const u=c&&(c[Li]||c[co]);if(u){const m=function(c){if(c.hasOwnProperty("name"))return c.name;const u=(""+c).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${m}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${m}" class.`),u}return null}(c);return null!==m?()=>m.factory(c):()=>new c}(c);throw new Error("unreachable")}function dm(c,u,m){let b;if(x(c)){const T=lt(c);return hl(T)||hm(T)}if(g(c))b=()=>lt(c.useValue);else if(function(c){return!(!c||!c.useFactory)}(c))b=()=>c.useFactory(...qr(c.deps||[]));else if(function(c){return!(!c||!c.useExisting)}(c))b=()=>wi(lt(c.useExisting));else{const T=lt(c&&(c.useClass||c.provide));if(!function(c){return!!c.deps}(c))return hl(T)||hm(T);b=()=>new T(...qr(c.deps))}return b}function Sd(c,u,m=!1){return{factory:c,value:u,multi:m?[]:void 0}}function g(c){return null!==c&&"object"==typeof c&&bs in c}function x(c){return"function"==typeof c}const ce=function(c,u,m){return function(c,u=null,m=null,b){const T=Ig(c,u,m,b);return T._resolveInjectorDefTypes(),T}({name:m},u,c,m)};class de{static create(u,m){return Array.isArray(u)?ce(u,m,""):ce(u.providers,u.parent,u.name||"")}}function Oa(c,u){yl(ef(c)[1],wo())}function ao(c){let u=function(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),m=!0;const b=[c];for(;u;){let T;if(xr(c))T=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Error("Directives cannot inherit Components");T=u.\u0275dir}if(T){if(m){b.push(T);const j=c;j.inputs=_a(c.inputs),j.declaredInputs=_a(c.declaredInputs),j.outputs=_a(c.outputs);const W=T.hostBindings;W&&Ec(c,W);const ie=T.viewQuery,he=T.contentQueries;if(ie&&Bh(c,ie),he&&Sc(c,he),wt(c.inputs,T.inputs),wt(c.declaredInputs,T.declaredInputs),wt(c.outputs,T.outputs),xr(T)&&T.data.animation){const Te=c.data;Te.animation=(Te.animation||[]).concat(T.data.animation)}}const N=T.features;if(N)for(let j=0;j<N.length;j++){const W=N[j];W&&W.ngInherit&&W(c),W===ao&&(m=!1)}}u=Object.getPrototypeOf(u)}!function(c){let u=0,m=null;for(let b=c.length-1;b>=0;b--){const T=c[b];T.hostVars=u+=T.hostVars,T.hostAttrs=od(T.hostAttrs,m=od(m,T.hostAttrs))}}(b)}function _a(c){return c===ft?{}:c===dt?[]:c}function Bh(c,u){const m=c.viewQuery;c.viewQuery=m?(b,T)=>{u(b,T),m(b,T)}:u}function Sc(c,u){const m=c.contentQueries;c.contentQueries=m?(b,T,N)=>{u(b,T,N),m(b,T,N)}:u}function Ec(c,u){const m=c.hostBindings;c.hostBindings=m?(b,T)=>{u(b,T),m(b,T)}:u}de.THROW_IF_NOT_FOUND=ci,de.NULL=new Dg,de.\u0275prov=Yi({token:de,providedIn:"any",factory:()=>wi(Cd)}),de.__NG_ELEMENT_ID__=-1;let zh=null;function Ko(){if(!zh){const c=br.Symbol;if(c&&c.iterator)zh=c.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let m=0;m<u.length;++m){const b=u[m];"entries"!==b&&"size"!==b&&Map.prototype[b]===Map.prototype.entries&&(zh=b)}}}return zh}class rl{constructor(u){this.wrapped=u}static wrap(u){return new rl(u)}static unwrap(u){return rl.isWrapped(u)?u.wrapped:u}static isWrapped(u){return u instanceof rl}}function Vh(c){return!!Ao(c)&&(Array.isArray(c)||!(c instanceof Map)&&Ko()in c)}function Ao(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function Lo(c,u,m){return c[u]=m}function ya(c,u){return c[u]}function Bs(c,u,m){return!Object.is(c[u],m)&&(c[u]=m,!0)}function Tc(c,u,m,b){const T=Bs(c,u,m);return Bs(c,u+1,b)||T}function Ed(c,u,m,b,T){const N=Tc(c,u,m,b);return Bs(c,u+2,T)||N}function va(c,u,m,b,T,N){const j=Tc(c,u,m,b);return Tc(c,u+2,T,N)||j}function Ux(c,u,m,b){const T=wn();return Bs(T,Ha(),u)&&(hr(),Xl(Fr(),T,c,u,m,b)),Ux}function ay(c,u,m,b){return Bs(c,Ha(),m)?u+dn(m)+b:$i}function Jw(c,u,m,b,T,N,j,W){const ie=wn(),he=hr(),Te=c+20,Le=he.firstCreatePass?function(c,u,m,b,T,N,j,W,ie){const he=u.consts,Te=Lh(u,c,4,j||null,za(he,W));Eg(u,m,Te,za(he,ie)),yl(u,Te);const Le=Te.tViews=si(2,Te,b,T,N,u.directiveRegistry,u.pipeRegistry,null,u.schemas,he);return null!==u.queries&&(u.queries.template(u,Te),Le.queries=u.queries.embeddedTView(Te)),Te}(Te,he,ie,u,m,b,T,N,j):he.data[Te];ds(Le,!1);const Ze=ie[11].createComment("");Wi(he,ie,Ze,Le),$s(Ze,ie),Nh(ie,ie[Te]=_f(Ze,ie,Ze,Le)),No(Le)&&Sg(he,ie,Le),null!=j&&$_(ie,Le,W)}function uE(c){return Ba(bi.lFrame.contextLView,20+c)}function dy(c,u=Yn.Default){const m=wn();return null===m?wi(c,u):ri(wo(),m,lt(c),u)}function Wx(c,u,m){const b=wn();return Bs(b,Ha(),u)&&Ka(hr(),Fr(),b,c,u,b[11],m,!1),Wx}function $x(c,u,m,b,T){const j=T?"class":"style";vp(c,m,u.inputs[j],j,b)}function Qx(c,u,m,b){const T=wn(),N=hr(),j=20+c,W=T[11],ie=T[j]=gd(W,u,bi.lFrame.currentNamespace),he=N.firstCreatePass?function(c,u,m,b,T,N,j){const W=u.consts,he=Lh(u,c,2,T,za(W,N));return Eg(u,m,he,za(W,j)),null!==he.attrs&&Gu(he,he.attrs,!1),null!==he.mergedAttrs&&Gu(he,he.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,he),he}(j,N,T,0,u,m,b):N.data[j];ds(he,!0);const Te=he.mergedAttrs;null!==Te&&Qd(W,ie,Te);const Le=he.classes;null!==Le&&cf(W,ie,Le);const Ze=he.styles;null!==Ze&&Ex(W,ie,Ze),64!=(64&he.flags)&&Wi(N,T,ie,he),0===bi.lFrame.elementDepthCount&&$s(ie,T),bi.lFrame.elementDepthCount++,No(he)&&(Sg(N,T,he),ff(N,he,T)),null!==b&&$_(T,he)}function Jx(){let c=wo();pl()?ph():(c=c.parent,ds(c,!1));const u=c;bi.lFrame.elementDepthCount--;const m=hr();m.firstCreatePass&&(yl(m,c),Tr(c)&&m.queries.elementEnd(c)),null!=u.classesWithoutHost&&function(c){return 0!=(16&c.flags)}(u)&&$x(m,u,wn(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function(c){return 0!=(32&c.flags)}(u)&&$x(m,u,wn(),u.stylesWithoutHost,!1)}function Kx(c,u,m,b){Qx(c,u,m,b),Jx()}function e0(c,u,m){const b=wn(),T=hr(),N=c+20,j=T.firstCreatePass?function(c,u,m,b,T){const N=u.consts,j=za(N,b),W=Lh(u,c,8,"ng-container",j);return null!==j&&Gu(W,j,!0),Eg(u,m,W,za(N,T)),null!==u.queries&&u.queries.elementStart(u,W),W}(N,T,b,u,m):T.data[N];ds(j,!0);const W=b[N]=b[11].createComment("");Wi(T,b,W,j),$s(W,b),No(j)&&(Sg(T,b,j),ff(T,j,b)),null!=m&&$_(b,j)}function vE(){let c=wo();const u=hr();pl()?ph():(c=c.parent,ds(c,!1)),u.firstCreatePass&&(yl(u,c),Tr(c)&&u.queries.elementEnd(c))}function Dk(c,u,m){e0(c,u,m),vE()}function cu(){return wn()}function rn(c){return!!c&&"function"==typeof c.then}function Dn(c){return!!c&&"function"==typeof c.subscribe}const Wu=Dn;function ub(c,u,m,b){const T=wn(),N=hr(),j=wo();return fy(N,T,T[11],j,c,u,!!m,b),ub}function Gn(c,u){const m=wo(),b=wn(),T=hr();return fy(T,b,wd(Nc(T.data),m,b),m,c,u,!1),Gn}function fy(c,u,m,b,T,N,j,W){const ie=No(b),Te=c.firstCreatePass&&yf(c),Le=u[8],Ze=Kv(u);let _t=!0;if(3&b.type||W){const qt=Ma(b,u),Pn=W?W(qt):qt,yn=Ze.length,fi=W?ji=>W(Pr(ji[b.index])):b.index;if(Xr(m)){let ji=null;if(!W&&ie&&(ji=function(c,u,m,b){const T=c.cleanup;if(null!=T)for(let N=0;N<T.length-1;N+=2){const j=T[N];if(j===m&&T[N+1]===b){const W=u[7],ie=T[N+2];return W.length>ie?W[ie]:null}"string"==typeof j&&(N+=2)}return null}(c,u,T,b.index)),null!==ji)(ji.__ngLastListenerFn__||ji).__ngNextListenerFn__=N,ji.__ngLastListenerFn__=N,_t=!1;else{N=vi(b,u,Le,N,!1);const Er=m.listen(Pn,T,N);Ze.push(N,Er),Te&&Te.push(T,fi,yn,yn+1)}}else N=vi(b,u,Le,N,!0),Pn.addEventListener(T,N,j),Ze.push(N),Te&&Te.push(T,fi,yn,j)}else N=vi(b,u,Le,N,!1);const At=b.outputs;let tn;if(_t&&null!==At&&(tn=At[T])){const qt=tn.length;if(qt)for(let Pn=0;Pn<qt;Pn+=2){const Na=u[tn[Pn]][tn[Pn+1]].subscribe(N),gu=Ze.length;Ze.push(N,Na),Te&&Te.push(T,b.index,gu,-(gu+1))}}}function t0(c,u,m,b){try{return!1!==m(b)}catch(T){return eb(c,T),!1}}function vi(c,u,m,b,T){return function N(j){if(j===Function)return b;const W=2&c.flags?Gs(c.index,u):u;0==(32&u[2])&&am(W);let ie=t0(u,0,b,j),he=N.__ngNextListenerFn__;for(;he;)ie=t0(u,0,he,j)&&ie,he=he.__ngNextListenerFn__;return T&&!1===ie&&(j.preventDefault(),j.returnValue=!1),ie}}function qi(c=1){return function(c){return(bi.lFrame.contextLView=function(c,u){for(;c>0;)u=u[15],c--;return u}(c,bi.lFrame.contextLView))[8]}(c)}function Jn(c,u){let m=null;const b=function(c){const u=c.attrs;if(null!=u){const m=u.indexOf(5);if(0==(1&m))return u[m+1]}return null}(c);for(let T=0;T<u.length;T++){const N=u[T];if("*"!==N){if(null===b?Fh(c,N,!0):Bw(b,N))return T}else m=T}return m}function bE(c){const u=wn()[Y][6];if(!u.projection){const b=u.projection=Pe(c?c.length:1,null),T=b.slice();let N=u.child;for(;null!==N;){const j=c?Jn(N,c):0;null!==j&&(T[j]?T[j].projectionNext=N:b[j]=N,T[j]=N),N=N.next}}}function f1(c,u=0,m){const b=wn(),T=hr(),N=Lh(T,20+c,16,null,m||null);null===N.projection&&(N.projection=u),ph(),64!=(64&N.flags)&&function(c,u,m){hp(u[11],0,u,m,Q(c,m,u),cn(m.parent||u[6],m,u))}(T,b,N)}function Mr(c,u,m){return fm(c,"",u,"",m),Mr}function fm(c,u,m,b,T){const N=wn(),j=ay(N,u,m,b);return j!==$i&&Ka(hr(),Fr(),N,c,j,N[11],T,!1),fm}function Jl(c,u,m,b,T){const N=c[m+1],j=null===u;let W=b?Ja(N):yd(N),ie=!1;for(;0!==W&&(!1===ie||j);){const Te=c[W+1];Ik(c[W],u)&&(ie=!0,c[W+1]=b?H_(Te):Pv(Te)),W=b?Ja(Te):yd(Te)}ie&&(c[m+1]=b?Pv(N):H_(N))}function Ik(c,u){return null===c||null==u||(Array.isArray(c)?c[1]:c)===u||!(!Array.isArray(c)||"string"!=typeof u)&&rt(c,u)>=0}const es={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ks(c){return c.substring(es.key,es.keyEnd)}function b1(c,u){const m=es.textEnd;return m===u?-1:(u=es.keyEnd=function(c,u,m){for(;u<m&&c.charCodeAt(u)>32;)u++;return u}(c,es.key=u,m),Bg(c,u,m))}function Bg(c,u,m){for(;u<m&&c.charCodeAt(u)<=32;)u++;return u}function fb(c,u,m){return Uh(c,u,m,!1),fb}function mb(c,u){return Uh(c,u,null,!0),mb}function n0(c){uu(ot,Ad,c,!0)}function Ad(c,u){for(let m=function(c){return function(c){es.key=0,es.keyEnd=0,es.value=0,es.valueEnd=0,es.textEnd=c.length}(c),b1(c,Bg(c,0,es.textEnd))}(u);m>=0;m=b1(u,m))ot(c,Ks(u),!0)}function Uh(c,u,m,b){const T=wn(),N=hr(),j=Ui(2);N.firstUpdatePass&&hu(N,c,j,b),u!==$i&&Bs(T,j,u)&&CE(N,N.data[Vo()],T,T[11],c,T[j+1]=function(c,u){return null==c||("string"==typeof u?c+=u:"object"==typeof c&&(c=Be(Xc(c)))),c}(u,m),b,j)}function uu(c,u,m,b){const T=hr(),N=Ui(2);T.firstUpdatePass&&hu(T,null,N,b);const j=wn();if(m!==$i&&Bs(j,N,m)){const W=T.data[Vo()];if(EE(W,b)&&!_y(T,N)){let ie=b?W.classesWithoutHost:W.stylesWithoutHost;null!==ie&&(m=Ge(ie,m||"")),$x(T,W,j,m,b)}else!function(c,u,m,b,T,N,j,W){T===$i&&(T=dt);let ie=0,he=0,Te=0<T.length?T[0]:null,Le=0<N.length?N[0]:null;for(;null!==Te||null!==Le;){const Ze=ie<T.length?T[ie+1]:void 0,_t=he<N.length?N[he+1]:void 0;let tn,At=null;Te===Le?(ie+=2,he+=2,Ze!==_t&&(At=Le,tn=_t)):null===Le||null!==Te&&Te<Le?(ie+=2,At=Te):(he+=2,At=Le,tn=_t),null!==At&&CE(c,u,m,b,At,tn,j,W),Te=ie<T.length?T[ie]:null,Le=he<N.length?N[he]:null}}(T,W,j,j[11],j[N+1],j[N+1]=function(c,u,m){if(null==m||""===m)return dt;const b=[],T=Xc(m);if(Array.isArray(T))for(let N=0;N<T.length;N++)c(b,T[N],!0);else if("object"==typeof T)for(const N in T)T.hasOwnProperty(N)&&c(b,N,T[N]);else"string"==typeof T&&u(b,T);return b}(c,u,m),b,N)}}function _y(c,u){return u>=c.expandoStartIndex}function hu(c,u,m,b){const T=c.data;if(null===T[m+1]){const N=T[Vo()],j=_y(c,m);EE(N,b)&&null===u&&!j&&(u=!1),u=function(c,u,m,b){const T=Nc(c);let N=b?u.residualClasses:u.residualStyles;if(null===T)0===(b?u.classBindings:u.styleBindings)&&(m=_m(m=Ug(null,c,u,m,b),u.attrs,b),N=null);else{const j=u.directiveStylingLast;if(-1===j||c[j]!==T)if(m=Ug(T,c,u,m,b),null===N){let ie=function(c,u,m){const b=m?u.classBindings:u.styleBindings;if(0!==yd(b))return c[Ja(b)]}(c,u,b);void 0!==ie&&Array.isArray(ie)&&(ie=Ug(null,c,u,ie[1],b),ie=_m(ie,u.attrs,b),function(c,u,m,b){c[Ja(m?u.classBindings:u.styleBindings)]=b}(c,u,b,ie))}else N=function(c,u,m){let b;const T=u.directiveEnd;for(let N=1+u.directiveStylingLast;N<T;N++)b=_m(b,c[N].hostAttrs,m);return _m(b,u.attrs,m)}(c,u,b)}return void 0!==N&&(b?u.residualClasses=N:u.residualStyles=N),m}(T,N,u,b),function(c,u,m,b,T,N){let j=N?u.classBindings:u.styleBindings,W=Ja(j),ie=yd(j);c[b]=m;let Te,he=!1;if(Array.isArray(m)){const Le=m;Te=Le[1],(null===Te||rt(Le,Te)>0)&&(he=!0)}else Te=m;if(T)if(0!==ie){const Ze=Ja(c[W+1]);c[b+1]=dp(Ze,W),0!==Ze&&(c[Ze+1]=hf(c[Ze+1],b)),c[W+1]=function(c,u){return 131071&c|u<<17}(c[W+1],b)}else c[b+1]=dp(W,0),0!==W&&(c[W+1]=hf(c[W+1],b)),W=b;else c[b+1]=dp(ie,0),0===W?W=b:c[ie+1]=hf(c[ie+1],b),ie=b;he&&(c[b+1]=Pv(c[b+1])),Jl(c,Te,b,!0),Jl(c,Te,b,!1),function(c,u,m,b,T){const N=T?c.residualClasses:c.residualStyles;null!=N&&"string"==typeof u&&rt(N,u)>=0&&(m[b+1]=H_(m[b+1]))}(u,Te,c,b,N),j=dp(W,ie),N?u.classBindings=j:u.styleBindings=j}(T,N,u,m,j,b)}}function Ug(c,u,m,b,T){let N=null;const j=m.directiveEnd;let W=m.directiveStylingLast;for(-1===W?W=m.directiveStart:W++;W<j&&(N=u[W],b=_m(b,N.hostAttrs,T),N!==c);)W++;return null!==c&&(m.directiveStylingLast=W),b}function _m(c,u,m){const b=m?1:2;let T=-1;if(null!==u)for(let N=0;N<u.length;N++){const j=u[N];"number"==typeof j?T=j:T===b&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),ot(c,j,!!m||u[++N]))}return void 0===c?null:c}function CE(c,u,m,b,T,N,j,W){if(!(3&u.type))return;const ie=c.data,he=ie[W+1];gb(function(c){return 1==(1&c)}(he)?SE(ie,u,m,T,yd(he),j):void 0)||(gb(N)||function(c){return 2==(2&c)}(he)&&(N=SE(ie,null,m,T,W,j)),function(c,u,m,b,T){const N=Xr(c);if(u)T?N?c.addClass(m,b):m.classList.add(b):N?c.removeClass(m,b):m.classList.remove(b);else{let j=-1===b.indexOf("-")?void 0:Xa.DashCase;if(null==T)N?c.removeStyle(m,b,j):m.style.removeProperty(b);else{const W="string"==typeof T&&T.endsWith("!important");W&&(T=T.slice(0,-10),j|=Xa.Important),N?c.setStyle(m,b,T,j):m.style.setProperty(b,T,W?"important":"")}}}(b,j,Fc(Vo(),m),T,N))}function SE(c,u,m,b,T,N){const j=null===u;let W;for(;T>0;){const ie=c[T],he=Array.isArray(ie),Te=he?ie[1]:ie,Le=null===Te;let Ze=m[T+1];Ze===$i&&(Ze=Le?dt:void 0);let _t=Le?vt(Ze,b):Te===b?Ze:void 0;if(he&&!gb(_t)&&(_t=vt(ie,b)),gb(_t)&&(W=_t,j))return W;const At=c[T+1];T=j?Ja(At):yd(At)}if(null!==u){let ie=N?u.residualClasses:u.residualStyles;null!=ie&&(W=vt(ie,b))}return W}function gb(c){return void 0!==c}function EE(c,u){return 0!=(c.flags&(u?16:32))}function TE(c,u=""){const m=wn(),b=hr(),T=c+20,N=b.firstCreatePass?Lh(b,T,1,u,null):b.data[T],j=m[T]=function(c,u){return Xr(c)?c.createText(u):c.createTextNode(u)}(m[11],u);Wi(b,m,j,N),ds(N,!1)}function w1(c){return ym("",c,""),w1}function ym(c,u,m){const b=wn(),T=ay(b,c,u,m);return T!==$i&&ou(b,Vo(),T),ym}function yy(c,u,m,b,T){const N=wn(),j=function(c,u,m,b,T,N){const W=Tc(c,Wo(),m,T);return Ui(2),W?u+dn(m)+b+dn(T)+N:$i}(N,c,u,m,b,T);return j!==$i&&ou(N,Vo(),j),yy}function _b(c,u,m){uu(ot,Ad,ay(wn(),c,u,m),!0)}function a0(c,u,m){const b=wn();return Bs(b,Ha(),u)&&Ka(hr(),Fr(),b,c,u,b[11],m,!0),a0}function l0(c,u,m){const b=wn();if(Bs(b,Ha(),u)){const N=hr(),j=Fr();Ka(N,j,b,c,u,wd(Nc(N.data),j,b),m,!0)}return l0}const kd=void 0;var Kl=["en",[["a","p"],["AM","PM"],kd],[["AM","PM"],kd,kd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kd,"{1} 'at' {0}",kd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(c){const u=Math.floor(Math.abs(c)),m=c.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===m?1:5}];let bf={};function O1(c){const u=function(c){return c.toLowerCase().replace(/_/g,"-")}(c);let m=F1(u);if(m)return m;const b=u.split("-")[0];if(m=F1(b),m)return m;if("en"===b)return Kl;throw new Error(`Missing locale data for the locale "${c}".`)}function NE(c){return O1(c)[ki.PluralCase]}function F1(c){return c in bf||(bf[c]=br.ng&&br.ng.common&&br.ng.common.locales&&br.ng.common.locales[c]),bf[c]}var ki=(()=>((ki=ki||{})[ki.LocaleId=0]="LocaleId",ki[ki.DayPeriodsFormat=1]="DayPeriodsFormat",ki[ki.DayPeriodsStandalone=2]="DayPeriodsStandalone",ki[ki.DaysFormat=3]="DaysFormat",ki[ki.DaysStandalone=4]="DaysStandalone",ki[ki.MonthsFormat=5]="MonthsFormat",ki[ki.MonthsStandalone=6]="MonthsStandalone",ki[ki.Eras=7]="Eras",ki[ki.FirstDayOfWeek=8]="FirstDayOfWeek",ki[ki.WeekendRange=9]="WeekendRange",ki[ki.DateFormat=10]="DateFormat",ki[ki.TimeFormat=11]="TimeFormat",ki[ki.DateTimeFormat=12]="DateTimeFormat",ki[ki.NumberSymbols=13]="NumberSymbols",ki[ki.NumberFormats=14]="NumberFormats",ki[ki.CurrencyCode=15]="CurrencyCode",ki[ki.CurrencySymbol=16]="CurrencySymbol",ki[ki.CurrencyName=17]="CurrencyName",ki[ki.Currencies=18]="Currencies",ki[ki.Directionality=19]="Directionality",ki[ki.PluralCase=20]="PluralCase",ki[ki.ExtraData=21]="ExtraData",ki))();const bb="en-US";let L1=bb;function c0(c){ii(c,"Expected localeId to be defined"),"string"==typeof c&&(L1=c.toLowerCase().replace(/_/g,"-"))}function Fn(c,u,m,b,T){if(c=lt(c),Array.isArray(c))for(let N=0;N<c.length;N++)Fn(c[N],u,m,b,T);else{const N=hr(),j=wn();let W=x(c)?c:lt(c.provide),ie=dm(c);const he=wo(),Te=1048575&he.providerIndexes,Le=he.directiveStart,Ze=he.providerIndexes>>20;if(x(c)||!c.multi){const _t=new fs(ie,T,dy),At=j1(W,u,T?Te:Te+Ze,Le);-1===At?(xl(ku(he,j),N,W),d0(N,c,u.length),u.push(W),he.directiveStart++,he.directiveEnd++,T&&(he.providerIndexes+=1048576),m.push(_t),j.push(_t)):(m[At]=_t,j[At]=_t)}else{const _t=j1(W,u,Te+Ze,Le),At=j1(W,u,Te,Te+Ze),tn=_t>=0&&m[_t],qt=At>=0&&m[At];if(T&&!qt||!T&&!tn){xl(ku(he,j),N,W);const Pn=function(c,u,m,b,T){const N=new fs(c,m,dy);return N.multi=[],N.index=u,N.componentProviders=0,$g(N,T,b&&!m),N}(T?Xg:Sb,m.length,T,b,ie);!T&&qt&&(m[At].providerFactory=Pn),d0(N,c,u.length,0),u.push(W),he.directiveStart++,he.directiveEnd++,T&&(he.providerIndexes+=1048576),m.push(Pn),j.push(Pn)}else d0(N,c,_t>-1?_t:At,$g(m[T?At:_t],ie,!T&&b));!T&&b&&qt&&m[At].componentProviders++}}}function d0(c,u,m,b){const T=x(u);if(T||function(c){return!!c.useClass}(u)){const j=(u.useClass||u).prototype.ngOnDestroy;if(j){const W=c.destroyHooks||(c.destroyHooks=[]);if(!T&&u.multi){const ie=W.indexOf(m);-1===ie?W.push(m,[b,j]):W[ie+1].push(b,j)}else W.push(m,j)}}}function $g(c,u,m){return m&&c.componentProviders++,c.multi.push(u)-1}function j1(c,u,m,b){for(let T=m;T<b;T++)if(u[T]===c)return T;return-1}function Sb(c,u,m,b){return Y1(this.multi,[])}function Xg(c,u,m,b){const T=this.multi;let N;if(this.providerFactory){const j=this.providerFactory.componentProviders,W=Hl(m,m[1],this.providerFactory.index,b);N=W.slice(0,j),Y1(T,N);for(let ie=j;ie<W.length;ie++)N.push(W[ie])}else N=[],Y1(T,N);return N}function Y1(c,u){for(let m=0;m<c.length;m++)u.push((0,c[m])());return u}function q1(c,u=[]){return m=>{m.providersResolver=(b,T)=>function(c,u,m){const b=hr();if(b.firstCreatePass){const T=xr(c);Fn(m,b.data,b.blueprint,T,!0),Fn(u,b.data,b.blueprint,T,!1)}}(b,T?T(c):c,u)}}class W1{}const p0="ngComponent";class f0{resolveComponentFactory(u){throw function(c){const u=Error(`No component factory found for ${Be(c)}. Did you add it to @NgModule.entryComponents?`);return u[p0]=c,u}(u)}}class Tm{}function My(...c){}function Dd(c,u){return new Id(Ma(c,u))}Tm.NULL=new f0;const Tb=function(){return Dd(wo(),wn())};let Id=(()=>{class c{constructor(m){this.nativeElement=m}}return c.__NG_ELEMENT_ID__=Tb,c})();function g0(c){return c instanceof Id?c.nativeElement:c}class Mb{}let dT=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>Jk(),c})();const Jk=function(){const c=wn(),m=Gs(wo().index,c);return function(c){return c[11]}(rr(m)?m:c)};let Yh=(()=>{class c{}return c.\u0275prov=Yi({token:c,providedIn:"root",factory:()=>null}),c})();class $1{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const ky=new $1("12.2.1");class gT{constructor(){}supports(u){return Vh(u)}create(u){return new Dy(u)}}const _T=(c,u)=>u;class Dy{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||_T}forEachItem(u){let m;for(m=this._itHead;null!==m;m=m._next)u(m)}forEachOperation(u){let m=this._itHead,b=this._removalsHead,T=0,N=null;for(;m||b;){const j=!b||m&&m.currentIndex<Kg(b,T,N)?m:b,W=Kg(j,T,N),ie=j.currentIndex;if(j===b)T--,b=b._nextRemoved;else if(m=m._next,null==j.previousIndex)T++;else{N||(N=[]);const he=W-T,Te=ie-T;if(he!=Te){for(let Ze=0;Ze<he;Ze++){const _t=Ze<N.length?N[Ze]:N[Ze]=0,At=_t+Ze;Te<=At&&At<he&&(N[Ze]=_t+1)}N[j.previousIndex]=Te-he}}W!==ie&&u(j,W,ie)}}forEachPreviousItem(u){let m;for(m=this._previousItHead;null!==m;m=m._nextPrevious)u(m)}forEachAddedItem(u){let m;for(m=this._additionsHead;null!==m;m=m._nextAdded)u(m)}forEachMovedItem(u){let m;for(m=this._movesHead;null!==m;m=m._nextMoved)u(m)}forEachRemovedItem(u){let m;for(m=this._removalsHead;null!==m;m=m._nextRemoved)u(m)}forEachIdentityChange(u){let m;for(m=this._identityChangesHead;null!==m;m=m._nextIdentityChange)u(m)}diff(u){if(null==u&&(u=[]),!Vh(u))throw new Error(`Error trying to diff '${Be(u)}'. Only arrays and iterables are allowed`);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let T,N,j,m=this._itHead,b=!1;if(Array.isArray(u)){this.length=u.length;for(let W=0;W<this.length;W++)N=u[W],j=this._trackByFn(W,N),null!==m&&Object.is(m.trackById,j)?(b&&(m=this._verifyReinsertion(m,N,j,W)),Object.is(m.item,N)||this._addIdentityChange(m,N)):(m=this._mismatch(m,N,j,W),b=!0),m=m._next}else T=0,function(c,u){if(Array.isArray(c))for(let m=0;m<c.length;m++)u(c[m]);else{const m=c[Ko()]();let b;for(;!(b=m.next()).done;)u(b.value)}}(u,W=>{j=this._trackByFn(T,W),null!==m&&Object.is(m.trackById,j)?(b&&(m=this._verifyReinsertion(m,W,j,T)),Object.is(m.item,W)||this._addIdentityChange(m,W)):(m=this._mismatch(m,W,j,T),b=!0),m=m._next,T++}),this.length=T;return this._truncate(m),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,m,b,T){let N;return null===u?N=this._itTail:(N=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null))?(Object.is(u.item,m)||this._addIdentityChange(u,m),this._reinsertAfter(u,N,T)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(b,T))?(Object.is(u.item,m)||this._addIdentityChange(u,m),this._moveAfter(u,N,T)):u=this._addAfter(new yT(m,b),N,T),u}_verifyReinsertion(u,m,b,T){let N=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null);return null!==N?u=this._reinsertAfter(N,u._prev,T):u.currentIndex!=T&&(u.currentIndex=T,this._addToMoves(u,T)),u}_truncate(u){for(;null!==u;){const m=u._next;this._addToRemovals(this._unlink(u)),u=m}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,m,b){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const T=u._prevRemoved,N=u._nextRemoved;return null===T?this._removalsHead=N:T._nextRemoved=N,null===N?this._removalsTail=T:N._prevRemoved=T,this._insertAfter(u,m,b),this._addToMoves(u,b),u}_moveAfter(u,m,b){return this._unlink(u),this._insertAfter(u,m,b),this._addToMoves(u,b),u}_addAfter(u,m,b){return this._insertAfter(u,m,b),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,m,b){const T=null===m?this._itHead:m._next;return u._next=T,u._prev=m,null===T?this._itTail=u:T._prev=u,null===m?this._itHead=u:m._next=u,null===this._linkedRecords&&(this._linkedRecords=new vT),this._linkedRecords.put(u),u.currentIndex=b,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const m=u._prev,b=u._next;return null===m?this._itHead=b:m._next=b,null===b?this._itTail=m:b._prev=m,u}_addToMoves(u,m){return u.previousIndex===m||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vT),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,m){return u.item=m,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class yT{constructor(u,m){this.item=u,this.trackById=m,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _0{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,m){let b;for(b=this._head;null!==b;b=b._nextDup)if((null===m||m<=b.currentIndex)&&Object.is(b.trackById,u))return b;return null}remove(u){const m=u._prevDup,b=u._nextDup;return null===m?this._head=b:m._nextDup=b,null===b?this._tail=m:b._prevDup=m,null===this._head}}class vT{constructor(){this.map=new Map}put(u){const m=u.trackById;let b=this.map.get(m);b||(b=new _0,this.map.set(m,b)),b.add(u)}get(u,m){const T=this.map.get(u);return T?T.get(u,m):null}remove(u){const m=u.trackById;return this.map.get(m).remove(u)&&this.map.delete(m),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Kg(c,u,m){const b=c.previousIndex;if(null===b)return b;let T=0;return m&&b<m.length&&(T=m[b]),b+u+T}class X1{constructor(){}supports(u){return u instanceof Map||Ao(u)}create(){return new Mm}}class Mm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let m;for(m=this._mapHead;null!==m;m=m._next)u(m)}forEachPreviousItem(u){let m;for(m=this._previousMapHead;null!==m;m=m._nextPrevious)u(m)}forEachChangedItem(u){let m;for(m=this._changesHead;null!==m;m=m._nextChanged)u(m)}forEachAddedItem(u){let m;for(m=this._additionsHead;null!==m;m=m._nextAdded)u(m)}forEachRemovedItem(u){let m;for(m=this._removalsHead;null!==m;m=m._nextRemoved)u(m)}diff(u){if(u){if(!(u instanceof Map||Ao(u)))throw new Error(`Error trying to diff '${Be(u)}'. Only maps and objects are allowed`)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let m=this._mapHead;if(this._appendAfter=null,this._forEach(u,(b,T)=>{if(m&&m.key===T)this._maybeAddToChanges(m,b),this._appendAfter=m,m=m._next;else{const N=this._getOrCreateRecordForKey(T,b);m=this._insertBeforeOrAppend(m,N)}}),m){m._prev&&(m._prev._next=null),this._removalsHead=m;for(let b=m;null!==b;b=b._nextRemoved)b===this._mapHead&&(this._mapHead=null),this._records.delete(b.key),b._nextRemoved=b._next,b.previousValue=b.currentValue,b.currentValue=null,b._prev=null,b._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,m){if(u){const b=u._prev;return m._next=u,m._prev=b,u._prev=m,b&&(b._next=m),u===this._mapHead&&(this._mapHead=m),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=m,m._prev=this._appendAfter):this._mapHead=m,this._appendAfter=m,null}_getOrCreateRecordForKey(u,m){if(this._records.has(u)){const T=this._records.get(u);this._maybeAddToChanges(T,m);const N=T._prev,j=T._next;return N&&(N._next=j),j&&(j._prev=N),T._next=null,T._prev=null,T}const b=new e_(u);return this._records.set(u,b),b.currentValue=m,this._addToAdditions(b),b}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,m){Object.is(m,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=m,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,m){u instanceof Map?u.forEach(m):Object.keys(u).forEach(b=>m(u[b],b))}}class e_{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Q1(){return new y0([new gT])}let y0=(()=>{class c{constructor(m){this.factories=m}static create(m,b){if(null!=b){const T=b.factories.slice();m=m.concat(T)}return new c(m)}static extend(m){return{provide:c,useFactory:b=>c.create(m,b||Q1()),deps:[[c,new Zs,new wl]]}}find(m){const b=this.factories.find(T=>T.supports(m));if(null!=b)return b;throw new Error(`Cannot find a differ supporting object '${m}' of type '${function(c){return c.name||typeof c}(m)}'`)}}return c.\u0275prov=Yi({token:c,providedIn:"root",factory:Q1}),c})();function bT(){return new v0([new X1])}let v0=(()=>{class c{constructor(m){this.factories=m}static create(m,b){if(b){const T=b.factories.slice();m=m.concat(T)}return new c(m)}static extend(m){return{provide:c,useFactory:b=>c.create(m,b||bT()),deps:[[c,new Zs,new wl]]}}find(m){const b=this.factories.find(T=>T.supports(m));if(b)return b;throw new Error(`Cannot find a differ supporting object '${m}'`)}}return c.\u0275prov=Yi({token:c,providedIn:"root",factory:bT}),c})();function t_(c,u,m,b,T=!1){for(;null!==m;){const N=u[m.index];if(null!==N&&b.push(Pr(N)),yo(N))for(let W=10;W<N.length;W++){const ie=N[W],he=ie[1].firstChild;null!==he&&t_(ie[1],ie,he,b)}const j=m.type;if(8&j)t_(c,u,m.child,b);else if(32&j){const W=Jc(m,u);let ie;for(;ie=W();)b.push(ie)}else if(16&j){const W=Ml(u,m);if(Array.isArray(W))b.push(...W);else{const ie=Rh(u[Y]);t_(ie[1],ie,W,b,!0)}}m=T?m.projectionNext:m.next}return b}class Sp{constructor(u,m){this._lView=u,this._cdRefInjectingView=m,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,m=u[1];return t_(m,u,m.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(yo(u)){const m=u[8],b=m?m.indexOf(this):-1;b>-1&&(Qf(u,b),Ae(m,b))}this._attachedToViewContainer=!1}E(this._lView[1],this._lView)}onDestroy(u){gp(this._lView[1],this._lView,null,u)}markForCheck(){am(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ny(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(c,u,m){fl(!0);try{ny(c,u,m)}finally{fl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var u;this._appRef=null,Qa(this._lView[1],u=this._lView,u[11],2,null,null)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=u}}class xT extends Sp{constructor(u){super(u),this._view=u}detectChanges(){iy(this._view)}checkNoChanges(){!function(c){fl(!0);try{iy(c)}finally{fl(!1)}}(this._view)}get context(){return null}}const wT=function(c){return function(c,u,m){if(or(c)&&!m){const b=Gs(c.index,u);return new Sp(b,b)}return 47&c.type?new Sp(u[Y],u):null}(wo(),wn(),16==(16&c))};let Am=(()=>{class c{}return c.__NG_ELEMENT_ID__=wT,c})();const CT=[new X1],nD=new y0([new gT]),Ab=new v0(CT),iD=function(){return kb(wo(),wn())};let Iy=(()=>{class c{}return c.__NG_ELEMENT_ID__=iD,c})();const rD=Iy,ET=class extends rD{constructor(u,m,b){super(),this._declarationLView=u,this._declarationTContainer=m,this.elementRef=b}createEmbeddedView(u){const m=this._declarationTContainer.tViews,b=W_(this._declarationLView,m,u,16,null,m.declTNode,null,null,null,null);b[17]=this._declarationLView[this._declarationTContainer.index];const N=this._declarationLView[19];return null!==N&&(b[19]=N.createEmbeddedView(m)),Cg(m,b,u),new Sp(b)}};function kb(c,u){return 4&c.type?new ET(u,c,Dd(c,u)):null}class km{}class TT{}const AT=function(){return kT(wo(),wn())};let w0=(()=>{class c{}return c.__NG_ELEMENT_ID__=AT,c})();const Ry=w0,Db=class extends Ry{constructor(u,m,b){super(),this._lContainer=u,this._hostTNode=m,this._hostLView=b}get element(){return Dd(this._hostTNode,this._hostLView)}get injector(){return new Uc(this._hostTNode,this._hostLView)}get parentInjector(){const u=wr(this._hostTNode,this._hostLView);if(vh(u)){const m=Vc(u,this._hostLView),b=aa(u);return new Uc(m[1].data[b+8],m)}return new Uc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const m=K1(this._lContainer);return null!==m&&m[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,m,b){const T=u.createEmbeddedView(m||{});return this.insert(T,b),T}createComponent(u,m,b,T,N){const j=b||this.parentInjector;if(!N&&null==u.ngModule&&j){const ie=j.get(km,null);ie&&(N=ie)}const W=u.create(j,T,void 0,N);return this.insert(W.hostView,m),W}insert(u,m){const b=u._lView,T=b[1];if(yo(b[3])){const Te=this.indexOf(u);if(-1!==Te)this.detach(Te);else{const Le=b[3],Ze=new Db(Le,Le[6],Le[3]);Ze.detach(Ze.indexOf(u))}}const N=this._adjustIndex(m),j=this._lContainer;!function(c,u,m,b){const T=10+b,N=m.length;b>0&&(m[T-1][4]=u),b<N-10?(u[4]=m[T],Ce(m,10+b,u)):(m.push(u),u[4]=null),u[3]=m;const j=u[17];null!==j&&m!==j&&function(c,u){const m=c[9];u[Y]!==u[3][3][Y]&&(c[2]=!0),null===m?c[9]=[u]:m.push(u)}(j,u);const W=u[19];null!==W&&W.insertView(c),u[2]|=128}(T,b,j,N);const W=_d(N,j),ie=b[11],he=pt(ie,j[7]);return null!==he&&function(c,u,m,b,T,N){b[0]=T,b[6]=u,Qa(c,b,m,1,T,N)}(T,j[6],ie,b,he,W),u.attachToViewContainerRef(),Ce(C0(j),N,u),u}move(u,m){return this.insert(u,m)}indexOf(u){const m=K1(this._lContainer);return null!==m?m.indexOf(u):-1}remove(u){const m=this._adjustIndex(u,-1),b=Qf(this._lContainer,m);b&&(Ae(C0(this._lContainer),m),E(b[1],b))}detach(u){const m=this._adjustIndex(u,-1),b=Qf(this._lContainer,m);return b&&null!=Ae(C0(this._lContainer),m)?new Sp(b):null}_adjustIndex(u,m=0){return null==u?this.length+m:u}};function K1(c){return c[8]}function C0(c){return c[8]||(c[8]=[])}function kT(c,u){let m;const b=u[c.index];if(yo(b))m=b;else{let T;if(8&c.type)T=Pr(b);else{const N=u[11];T=N.createComment("");const j=Ma(c,u);ye(N,pt(N,j),T,function(c,u){return Xr(c)?c.nextSibling(u):u.nextSibling}(N,j),!1)}u[c.index]=m=_f(b,u,T,c),Nh(u,m)}return new Db(m,c,u)}const Hy={};class N0 extends Tm{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const m=en(u);return new WT(m,this.ngModule)}}function mC(c){const u=[];for(let m in c)c.hasOwnProperty(m)&&u.push({propName:c[m],templateName:m});return u}const BD=new Po("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>md});class WT extends W1{constructor(u,m){super(),this.componentDef=u,this.ngModule=m,this.componentType=u.type,this.selector=u.selectors.map(zw).join(","),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!m}get inputs(){return mC(this.componentDef.inputs)}get outputs(){return mC(this.componentDef.outputs)}create(u,m,b,T){const N=(T=T||this.ngModule)?function(c,u){return{get:(m,b,T)=>{const N=c.get(m,Hy,T);return N!==Hy||b===Hy?N:u.get(m,b,T)}}}(u,T.injector):u,j=N.get(Mb,Ii),W=N.get(Yh,null),ie=j.createRenderer(null,this.componentDef),he=this.componentDef.selectors[0][0]||"div",Te=b?function(c,u,m){if(Xr(c))return c.selectRootElement(u,m===$n.ShadowDom);let b="string"==typeof u?c.querySelector(u):u;return b.textContent="",b}(ie,b,this.componentDef.encapsulation):gd(j.createRenderer(null,this.componentDef),he,function(c){const u=c.toLowerCase();return"svg"===u?ui:"math"===u?"http://www.w3.org/1998/MathML/":null}(he)),Le=this.componentDef.onPush?576:528,Ze=function(c,u){return{components:[],scheduler:c||md,clean:lm,playerHandler:u||null,flags:0}}(),_t=si(0,null,null,1,0,null,null,null,null,null),At=W_(null,_t,Ze,Le,null,null,j,ie,W,N);let tn,qt;ml(At);try{const Pn=function(c,u,m,b,T,N){const j=m[1];m[20]=c;const ie=Lh(j,20,2,"#host",null),he=ie.mergedAttrs=u.hostAttrs;null!==he&&(Gu(ie,he,!0),null!==c&&(Qd(T,c,he),null!==ie.classes&&cf(T,c,ie.classes),null!==ie.styles&&Ex(T,c,ie.styles)));const Te=b.createRenderer(c,u),Le=W_(m,Nx(u),null,u.onPush?64:16,m[20],ie,b,Te,N||null,null);return j.firstCreatePass&&(xl(ku(ie,m),j,u.type),So(j,ie),K_(ie,m.length,1)),Nh(m,Le),m[20]=Le}(Te,this.componentDef,At,j,ie);if(Te)if(b)Qd(ie,Te,["ng-version",ky.full]);else{const{attrs:yn,classes:fi}=function(c){const u=[],m=[];let b=1,T=2;for(;b<c.length;){let N=c[b];if("string"==typeof N)2===T?""!==N&&u.push(N,c[++b]):8===T&&m.push(N);else{if(!tu(T))break;T=N}b++}return{attrs:u,classes:m}}(this.componentDef.selectors[0]);yn&&Qd(ie,Te,yn),fi&&fi.length>0&&cf(ie,Te,fi.join(" "))}if(qt=Aa(_t,20),void 0!==m){const yn=qt.projection=[];for(let fi=0;fi<this.ngContentSelectors.length;fi++){const ji=m[fi];yn.push(null!=ji?Array.from(ji):null)}}tn=function(c,u,m,b,T){const N=m[1],j=function(c,u,m){const b=wo();c.firstCreatePass&&(m.providersResolver&&m.providersResolver(m),Tg(c,b,u,mp(c,u,1,null),m));const T=Hl(u,c,b.directiveStart,b);$s(T,u);const N=Ma(b,u);return N&&$s(N,u),T}(N,m,u);if(b.components.push(j),c[8]=j,T&&T.forEach(ie=>ie(j,u)),u.contentQueries){const ie=wo();u.contentQueries(1,j,ie.directiveStart)}const W=wo();return!N.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(sa(W.index),Gv(m[1],W,0,W.directiveStart,W.directiveEnd,u),xd(u,j)),j}(Pn,this.componentDef,At,Ze,[Oa]),Cg(_t,At,null)}finally{Ds()}return new $T(this.componentType,tn,Dd(qt,At),At,qt)}}class $T extends class{}{constructor(u,m,b,T,N){super(),this.location=b,this._rootLView=T,this._tNode=N,this.instance=m,this.hostView=this.changeDetectorRef=new xT(T),this.componentType=u}get injector(){return new Uc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}const Sf=new Map;class JT extends km{constructor(u,m){super(),this._parent=m,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new N0(this);const b=p(u),T=u[di]||null;T&&c0(T),this._bootstrapComponents=$l(b.bootstrap),this._r3Injector=Ig(u,m,[{provide:km,useValue:this},{provide:Tm,useValue:this.componentFactoryResolver}],Be(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,m=de.THROW_IF_NOT_FOUND,b=Yn.Default){return u===de||u===km||u===Cd?this:this._r3Injector.get(u,m,b)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(m=>m()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class V0 extends TT{constructor(u){super(),this.moduleType=u,null!==p(u)&&function(c){const u=new Set;!function m(b){const T=p(b,!0),N=T.id;null!==N&&(function(c,u,m){if(u&&u!==m)throw new Error(`Duplicate module registered for ${c} - ${Be(u)} vs ${Be(u.name)}`)}(N,Sf.get(N),b),Sf.set(N,b));const j=$l(T.imports);for(const W of j)u.has(W)||(u.add(W),m(W))}(c)}(u)}create(u){return new JT(this.moduleType,u)}}function KT(c,u,m){const b=so()+c,T=wn();return T[b]===$i?Lo(T,b,m?u.call(m):u()):ya(T,b)}function zb(c,u,m,b){return bC(wn(),so(),c,u,m,b)}function _C(c,u,m,b,T){return function(c,u,m,b,T,N,j){const W=u+m;return Tc(c,W,T,N)?Lo(c,W+2,j?b.call(j,T,N):b(T,N)):a_(c,W+2)}(wn(),so(),c,u,m,b,T)}function yC(c,u,m,b,T,N){return function(c,u,m,b,T,N,j,W){const ie=u+m;return Ed(c,ie,T,N,j)?Lo(c,ie+3,W?b.call(W,T,N,j):b(T,N,j)):a_(c,ie+3)}(wn(),so(),c,u,m,b,T,N)}function vC(c,u,m,b,T,N,j){return function(c,u,m,b,T,N,j,W,ie){const he=u+m;return va(c,he,T,N,j,W)?Lo(c,he+4,ie?b.call(ie,T,N,j,W):b(T,N,j,W)):a_(c,he+4)}(wn(),so(),c,u,m,b,T,N,j)}function eM(c,u,m,b,T,N,j,W){const ie=so()+c,he=wn(),Te=va(he,ie,m,b,T,N);return Bs(he,ie+4,j)||Te?Lo(he,ie+5,W?u.call(W,m,b,T,N,j):u(m,b,T,N,j)):ya(he,ie+5)}function tM(c,u,m,b,T,N,j,W,ie){const he=so()+c,Te=wn(),Le=va(Te,he,m,b,T,N);return Tc(Te,he+4,j,W)||Le?Lo(Te,he+6,ie?u.call(ie,m,b,T,N,j,W):u(m,b,T,N,j,W)):ya(Te,he+6)}function nM(c,u,m,b,T,N,j,W,ie,he){const Te=so()+c,Le=wn();let Ze=va(Le,Te,m,b,T,N);return Ed(Le,Te+4,j,W,ie)||Ze?Lo(Le,Te+7,he?u.call(he,m,b,T,N,j,W,ie):u(m,b,T,N,j,W,ie)):ya(Le,Te+7)}function U0(c,u,m,b){return function(c,u,m,b,T,N){let j=u+m,W=!1;for(let ie=0;ie<T.length;ie++)Bs(c,j++,T[ie])&&(W=!0);return W?Lo(c,j,b.apply(N,T)):a_(c,j)}(wn(),so(),c,u,m,b)}function a_(c,u){const m=c[u];return m===$i?void 0:m}function bC(c,u,m,b,T,N){const j=u+m;return Bs(c,j,T)?Lo(c,j+1,N?b.call(N,T):b(T)):a_(c,j+1)}function CC(c,u){const m=hr();let b;const T=c+20;m.firstCreatePass?(b=function(c,u){if(u)for(let m=u.length-1;m>=0;m--){const b=u[m];if(c===b.name)return b}throw new an("302",`The pipe '${c}' could not be found!`)}(u,m.pipeRegistry),m.data[T]=b,b.onDestroy&&(m.destroyHooks||(m.destroyHooks=[])).push(T,b.onDestroy)):b=m.data[T];const N=b.factory||(b.factory=hl(b.type)),j=vr(dy);try{const W=Au(!1),ie=N();return Au(W),function(c,u,m,b){m>=c.data.length&&(c.data[m]=null,c.blueprint[m]=null),u[m]=b}(m,wn(),T,ie),ie}finally{vr(j)}}function Gy(c,u,m){const b=c+20,T=wn(),N=Ba(T,b);return function(c,u){rl.isWrapped(u)&&(u=rl.unwrap(u),c[Wo()]=$i);return u}(T,function(c,u){return c[1].data[u].pure}(T,b)?bC(T,so(),u,N.transform,m,N):N.transform(m))}function SC(c){return u=>{setTimeout(c,void 0,u)}}const Dc=class extends s.xQ{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,m,b){var T,N,j;let W=u,ie=m||(()=>null),he=b;if(u&&"object"==typeof u){const Le=u;W=null===(T=Le.next)||void 0===T?void 0:T.bind(Le),ie=null===(N=Le.error)||void 0===N?void 0:N.bind(Le),he=null===(j=Le.complete)||void 0===j?void 0:j.bind(Le)}this.__isAsync&&(ie=SC(ie),W&&(W=SC(W)),he&&(he=SC(he)));const Te=super.subscribe({next:W,error:ie,complete:he});return u instanceof Vt.w&&u.add(Te),Te}};function jD(){return this._results[Ko()]()}class Ub{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const m=Ko(),b=Ub.prototype;b[m]||(b[m]=jD)}get changes(){return this._changes||(this._changes=new Dc)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,m){return this._results.reduce(u,m)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,m){const b=this;b.dirty=!1;const T=ue(u);(this._changesDetected=!function(c,u,m){if(c.length!==u.length)return!1;for(let b=0;b<c.length;b++){let T=c[b],N=u[b];if(m&&(T=m(T),N=m(N)),N!==T)return!1}return!0}(b._results,T,m))&&(b._results=T,b.length=T.length,b.last=T[this.length-1],b.first=T[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class H0{constructor(u){this.queryList=u,this.matches=null}clone(){return new H0(this.queryList)}setDirty(){this.queryList.setDirty()}}class G0{constructor(u=[]){this.queries=u}createEmbeddedView(u){const m=u.queries;if(null!==m){const b=null!==u.contentQueries?u.contentQueries[0]:m.length,T=[];for(let N=0;N<b;N++){const j=m.getByIndex(N);T.push(this.queries[j.indexInDeclarationView].clone())}return new G0(T)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let m=0;m<this.queries.length;m++)null!==hM(u,m).matches&&this.queries[m].setDirty()}}class Od{constructor(u,m,b=null){this.predicate=u,this.flags=m,this.read=b}}class Ef{constructor(u=[]){this.queries=u}elementStart(u,m){for(let b=0;b<this.queries.length;b++)this.queries[b].elementStart(u,m)}elementEnd(u){for(let m=0;m<this.queries.length;m++)this.queries[m].elementEnd(u)}embeddedTView(u){let m=null;for(let b=0;b<this.length;b++){const T=null!==m?m.length:0,N=this.getByIndex(b).embeddedTView(u,T);N&&(N.indexInDeclarationView=b,null!==m?m.push(N):m=[N])}return null!==m?new Ef(m):null}template(u,m){for(let b=0;b<this.queries.length;b++)this.queries[b].template(u,m)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class Tf{constructor(u,m=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=m}elementStart(u,m){this.isApplyingToNode(m)&&this.matchTNode(u,m)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,m){this.elementStart(u,m)}embeddedTView(u,m){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,m),new Tf(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const m=this._declarationNodeIndex;let b=u.parent;for(;null!==b&&8&b.type&&b.index!==m;)b=b.parent;return m===(null!==b?b.index:-1)}return this._appliesToNextNode}matchTNode(u,m){const b=this.metadata.predicate;if(Array.isArray(b))for(let T=0;T<b.length;T++){const N=b[T];this.matchTNodeWithReadOption(u,m,j0(m,N)),this.matchTNodeWithReadOption(u,m,Yr(m,u,N,!1,!1))}else b===Iy?4&m.type&&this.matchTNodeWithReadOption(u,m,-1):this.matchTNodeWithReadOption(u,m,Yr(m,u,b,!1,!1))}matchTNodeWithReadOption(u,m,b){if(null!==b){const T=this.metadata.read;if(null!==T)if(T===Id||T===w0||T===Iy&&4&m.type)this.addMatch(m.index,-2);else{const N=Yr(m,u,T,!1,!1);null!==N&&this.addMatch(m.index,N)}else this.addMatch(m.index,b)}}addMatch(u,m){null===this.matches?this.matches=[u,m]:this.matches.push(u,m)}}function j0(c,u){const m=c.localNames;if(null!==m)for(let b=0;b<m.length;b+=2)if(m[b]===u)return m[b+1];return null}function ZD(c,u,m,b){return-1===m?function(c,u){return 11&c.type?Dd(c,u):4&c.type?kb(c,u):null}(u,c):-2===m?function(c,u,m){return m===Id?Dd(u,c):m===Iy?kb(u,c):m===w0?kT(u,c):void 0}(c,u,b):Hl(c,c[1],m,u)}function EC(c,u,m,b){const T=u[19].queries[b];if(null===T.matches){const N=c.data,j=m.matches,W=[];for(let ie=0;ie<j.length;ie+=2){const he=j[ie];W.push(he<0?null:ZD(u,N[he],j[ie+1],m.metadata.read))}T.matches=W}return T.matches}function Y0(c,u,m,b){const T=c.queries.getByIndex(m),N=T.matches;if(null!==N){const j=EC(c,u,T,m);for(let W=0;W<N.length;W+=2){const ie=N[W];if(ie>0)b.push(j[W/2]);else{const he=N[W+1],Te=u[-ie];for(let Le=10;Le<Te.length;Le++){const Ze=Te[Le];Ze[17]===Ze[3]&&Y0(Ze[1],Ze,he,b)}if(null!==Te[9]){const Le=Te[9];for(let Ze=0;Ze<Le.length;Ze++){const _t=Le[Ze];Y0(_t[1],_t,he,b)}}}}}return b}function aM(c){const u=wn(),m=hr(),b=id();Eu(b+1);const T=hM(m,b);if(c.dirty&&ra(u)===(2==(2&T.metadata.flags))){if(null===T.matches)c.reset([]);else{const N=T.crossesNgTemplate?Y0(m,u,b,[]):EC(m,u,T,b);c.reset(N,g0),c.notifyOnChanges()}return!0}return!1}function Nm(c,u,m){const b=hr();b.firstCreatePass&&(uM(b,new Od(c,u,m),-1),2==(2&u)&&(b.staticViewQueries=!0)),cM(b,wn(),u)}function Hb(c,u,m,b){const T=hr();if(T.firstCreatePass){const N=wo();uM(T,new Od(u,m,b),N.index),function(c,u){const m=c.contentQueries||(c.contentQueries=[]);u!==(m.length?m[m.length-1]:-1)&&m.push(c.queries.length-1,u)}(T,c),2==(2&m)&&(T.staticContentQueries=!0)}cM(T,wn(),m)}function q0(){return c=wn(),u=id(),c[19].queries[u].queryList;var c,u}function cM(c,u,m){const b=new Ub(4==(4&m));gp(c,u,b,b.destroy),null===u[19]&&(u[19]=new G0),u[19].queries.push(new H0(b))}function uM(c,u,m){null===c.queries&&(c.queries=new Ef),c.queries.track(new Tf(u,m))}function hM(c,u){return c.queries.getByIndex(u)}function Z0(c,u){return kb(c,u)}const tw=new Po("Application Initializer");let c_=(()=>{class c{constructor(m){this.appInits=m,this.resolve=My,this.reject=My,this.initialized=!1,this.done=!1,this.donePromise=new Promise((b,T)=>{this.resolve=b,this.reject=T})}runInitializers(){if(this.initialized)return;const m=[],b=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let T=0;T<this.appInits.length;T++){const N=this.appInits[T]();if(rn(N))m.push(N);else if(Wu(N)){const j=new Promise((W,ie)=>{N.subscribe({complete:W,error:ie})});m.push(j)}}Promise.all(m).then(()=>{b()}).catch(T=>{this.reject(T)}),0===m.length&&b(),this.initialized=!0}}return c.\u0275fac=function(m){return new(m||c)(wi(tw,8))},c.\u0275prov=Yi({token:c,factory:c.\u0275fac}),c})();const NC=new Po("AppId"),BC={provide:NC,useFactory:function(){return`${qb()}${qb()}${qb()}`},deps:[]};function qb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zC=new Po("Platform Initializer"),VC=new Po("Platform ID"),UC=new Po("appBootstrapListener");let IM=(()=>{class c{log(m){console.log(m)}warn(m){console.warn(m)}}return c.\u0275fac=function(m){return new(m||c)},c.\u0275prov=Yi({token:c,factory:c.\u0275fac}),c})();const Ld=new Po("LocaleId"),HC=new Po("DefaultCurrencyCode");class Sa{constructor(u,m){this.ngModuleFactory=u,this.componentFactories=m}}const PM=function(c){return new V0(c)},tR=PM,Xy=function(c){return Promise.resolve(PM(c))},pI=function(c){const u=PM(c),b=$l(p(c).declarations).reduce((T,N)=>{const j=en(N);return j&&T.push(new WT(j)),T},[]);return new Sa(u,b)},iR=pI,nw=function(c){return Promise.resolve(pI(c))};let Ap=(()=>{class c{constructor(){this.compileModuleSync=tR,this.compileModuleAsync=Xy,this.compileModuleAndAllComponentsSync=iR,this.compileModuleAndAllComponentsAsync=nw}clearCache(){}clearCacheFor(m){}getModuleId(m){}}return c.\u0275fac=function(m){return new(m||c)},c.\u0275prov=Yi({token:c,factory:c.\u0275fac}),c})();const fI=(()=>Promise.resolve(0))();function GC(c){"undefined"==typeof Zone?fI.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class oc{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:m=!1,shouldCoalesceRunChangeDetection:b=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dc(!1),this.onMicrotaskEmpty=new Dc(!1),this.onStable=new Dc(!1),this.onError=new Dc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const T=this;T._nesting=0,T._outer=T._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(T._inner=T._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(T._inner=T._inner.fork(Zone.longStackTraceZoneSpec)),T.shouldCoalesceEventChangeDetection=!b&&m,T.shouldCoalesceRunChangeDetection=b,T.lastRequestAnimationFrameId=-1,T.nativeRequestAnimationFrame=function(){let c=br.requestAnimationFrame,u=br.cancelAnimationFrame;if("undefined"!=typeof Zone&&c&&u){const m=c[Zone.__symbol__("OriginalDelegate")];m&&(c=m);const b=u[Zone.__symbol__("OriginalDelegate")];b&&(u=b)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function(c){const u=()=>{!function(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(br,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,RM(c),c.isCheckStableRunning=!0,Qy(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),RM(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(m,b,T,N,j,W)=>{try{return mI(c),m.invokeTask(T,N,j,W)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===N.type||c.shouldCoalesceRunChangeDetection)&&u(),OM(c)}},onInvoke:(m,b,T,N,j,W,ie)=>{try{return mI(c),m.invoke(T,N,j,W,ie)}finally{c.shouldCoalesceRunChangeDetection&&u(),OM(c)}},onHasTask:(m,b,T,N)=>{m.hasTask(T,N),b===T&&("microTask"==N.change?(c._hasPendingMicrotasks=N.microTask,RM(c),Qy(c)):"macroTask"==N.change&&(c.hasPendingMacrotasks=N.macroTask))},onHandleError:(m,b,T,N)=>(m.handleError(T,N),c.runOutsideAngular(()=>c.onError.emit(N)),!1)})}(T)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(oc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,m,b){return this._inner.run(u,m,b)}runTask(u,m,b,T){const N=this._inner,j=N.scheduleEventTask("NgZoneEvent: "+T,u,rw,My,My);try{return N.runTask(j,m,b)}finally{N.cancelTask(j)}}runGuarded(u,m,b){return this._inner.runGuarded(u,m,b)}runOutsideAngular(u){return this._outer.run(u)}}const rw={};function Qy(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function RM(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function mI(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function OM(c){c._nesting--,Qy(c)}class lR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dc,this.onMicrotaskEmpty=new Dc,this.onStable=new Dc,this.onError=new Dc}run(u,m,b){return u.apply(m,b)}runGuarded(u,m,b){return u.apply(m,b)}runOutsideAngular(u){return u()}runTask(u,m,b,T){return u.apply(m,b)}}let gI=(()=>{class c{constructor(m){this._ngZone=m,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),m.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oc.assertNotInAngularZone(),GC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())GC(()=>{for(;0!==this._callbacks.length;){let m=this._callbacks.pop();clearTimeout(m.timeoutId),m.doneCb(this._didWork)}this._didWork=!1});else{let m=this.getPendingTasks();this._callbacks=this._callbacks.filter(b=>!b.updateCb||!b.updateCb(m)||(clearTimeout(b.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(m=>({source:m.source,creationLocation:m.creationLocation,data:m.data})):[]}addCallback(m,b,T){let N=-1;b&&b>0&&(N=setTimeout(()=>{this._callbacks=this._callbacks.filter(j=>j.timeoutId!==N),m(this._didWork,this.getPendingTasks())},b)),this._callbacks.push({doneCb:m,timeoutId:N,updateCb:T})}whenStable(m,b,T){if(T&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(m,b,T),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(m,b,T){return[]}}return c.\u0275fac=function(m){return new(m||c)(wi(oc))},c.\u0275prov=Yi({token:c,factory:c.\u0275fac}),c})(),_I=(()=>{class c{constructor(){this._applications=new Map,FM.addToWindow(this)}registerApplication(m,b){this._applications.set(m,b)}unregisterApplication(m){this._applications.delete(m)}unregisterAllApplications(){this._applications.clear()}getTestability(m){return this._applications.get(m)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(m,b=!0){return FM.findTestabilityInTree(this,m,b)}}return c.\u0275fac=function(m){return new(m||c)},c.\u0275prov=Yi({token:c,factory:c.\u0275fac}),c})();class cR{addToWindow(u){}findTestabilityInTree(u,m,b){return null}}function uR(c){FM=c}let FM=new cR,yI=!0,vI=!1;function jC(){return vI=!0,yI}function hR(){if(vI)throw new Error("Cannot enable prod mode after platform setup.");yI=!1}let kp;const bI=new Po("AllowMultipleToken");class _R{constructor(u,m){this.name=u,this.token=m}}function xI(c,u,m=[]){const b=`Platform: ${u}`,T=new Po(b);return(N=[])=>{let j=wI();if(!j||j.injector.get(bI,!1))if(c)c(m.concat(N).concat({provide:T,useValue:!0}));else{const W=m.concat(N).concat({provide:T,useValue:!0},{provide:kl,useValue:"platform"});!function(c){if(kp&&!kp.destroyed&&!kp.injector.get(bI,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");kp=c.get(CI);const u=c.get(zC,null);u&&u.forEach(m=>m())}(de.create({providers:W,name:b}))}return function(c){const u=wI();if(!u)throw new Error("No platform exists!");if(!u.injector.get(c,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return u}(T)}}function wI(){return kp&&!kp.destroyed?kp:null}let CI=(()=>{class c{constructor(m){this._injector=m,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(m,b){const W=function(c,u){let m;return m="noop"===c?new lR:("zone.js"===c?void 0:c)||new oc({enableLongStackTrace:jC(),shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),m}(b?b.ngZone:void 0,{ngZoneEventCoalescing:b&&b.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:b&&b.ngZoneRunCoalescing||!1}),ie=[{provide:oc,useValue:W}];return W.run(()=>{const he=de.create({providers:ie,parent:this.injector,name:m.moduleType.name}),Te=m.create(he),Le=Te.injector.get(Dh,null);if(!Le)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return W.runOutsideAngular(()=>{const Ze=W.onError.subscribe({next:_t=>{Le.handleError(_t)}});Te.onDestroy(()=>{NM(this._modules,Te),Ze.unsubscribe()})}),function(c,u,m){try{const b=m();return rn(b)?b.catch(T=>{throw u.runOutsideAngular(()=>c.handleError(T)),T}):b}catch(b){throw u.runOutsideAngular(()=>c.handleError(b)),b}}(Le,W,()=>{const Ze=Te.injector.get(c_);return Ze.runInitializers(),Ze.donePromise.then(()=>(c0(Te.injector.get(Ld,bb)||bb),this._moduleDoBootstrap(Te),Te))})})}bootstrapModule(m,b=[]){const T=SI({},b);return function(c,u,m){const b=new V0(m);return Promise.resolve(b)}(0,0,m).then(N=>this.bootstrapModuleFactory(N,T))}_moduleDoBootstrap(m){const b=m.injector.get(ow);if(m._bootstrapComponents.length>0)m._bootstrapComponents.forEach(T=>b.bootstrap(T));else{if(!m.instance.ngDoBootstrap)throw new Error(`The module ${Be(m.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);m.instance.ngDoBootstrap(b)}this._modules.push(m)}onDestroy(m){this._destroyListeners.push(m)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(m=>m.destroy()),this._destroyListeners.forEach(m=>m()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(m){return new(m||c)(wi(de))},c.\u0275prov=Yi({token:c,factory:c.\u0275fac}),c})();function SI(c,u){return Array.isArray(u)?u.reduce(SI,c):Object.assign(Object.assign({},c),u)}let ow=(()=>{class c{constructor(m,b,T,N,j){this._zone=m,this._injector=b,this._exceptionHandler=T,this._componentFactoryResolver=N,this._initStatus=j,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const W=new Ee.y(he=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{he.next(this._stable),he.complete()})}),ie=new Ee.y(he=>{let Te;this._zone.runOutsideAngular(()=>{Te=this._zone.onStable.subscribe(()=>{oc.assertNotInAngularZone(),GC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,he.next(!0))})})});const Le=this._zone.onUnstable.subscribe(()=>{oc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{he.next(!1)}))});return()=>{Te.unsubscribe(),Le.unsubscribe()}});this.isStable=(0,A.T)(W,ie.pipe((0,gt.B)()))}bootstrap(m,b){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let T;T=m instanceof W1?m:this._componentFactoryResolver.resolveComponentFactory(m),this.componentTypes.push(T.componentType);const N=function(c){return c.isBoundToModule}(T)?void 0:this._injector.get(km),W=T.create(de.NULL,[],b||T.selector,N),ie=W.location.nativeElement,he=W.injector.get(gI,null),Te=he&&W.injector.get(_I);return he&&Te&&Te.registerApplication(ie,he),W.onDestroy(()=>{this.detachView(W.hostView),NM(this.components,W),Te&&Te.unregisterApplication(ie)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let m of this._views)m.detectChanges()}catch(m){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(m))}finally{this._runningTick=!1}}attachView(m){const b=m;this._views.push(b),b.attachToAppRef(this)}detachView(m){const b=m;NM(this._views,b),b.detachFromAppRef()}_loadComponent(m){this.attachView(m.hostView),this.tick(),this.components.push(m),this._injector.get(UC,[]).concat(this._bootstrapListeners).forEach(T=>T(m))}ngOnDestroy(){this._views.slice().forEach(m=>m.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return c.\u0275fac=function(m){return new(m||c)(wi(oc),wi(de),wi(Dh),wi(Tm),wi(c_))},c.\u0275prov=Yi({token:c,factory:c.\u0275fac}),c})();function NM(c,u){const m=c.indexOf(u);m>-1&&c.splice(m,1)}class CR{}class TR{}const MR={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let AR=(()=>{class c{constructor(m,b){this._compiler=m,this._config=b||MR}load(m){return this.loadAndCompile(m)}loadAndCompile(m){let[b,T]=m.split("#");return void 0===T&&(T="default"),nt(8255)(b).then(N=>N[T]).then(N=>AI(N,b,T)).then(N=>this._compiler.compileModuleAsync(N))}loadFactory(m){let[b,T]=m.split("#"),N="NgFactory";return void 0===T&&(T="default",N=""),nt(8255)(this._config.factoryPathPrefix+b+this._config.factoryPathSuffix).then(j=>j[T+N]).then(j=>AI(j,b,T))}}return c.\u0275fac=function(m){return new(m||c)(wi(Ap),wi(TR,8))},c.\u0275prov=Yi({token:c,factory:c.\u0275fac}),c})();function AI(c,u,m){if(!c)throw new Error(`Cannot find '${m}' in '${u}'`);return c}const LR=function(c){return null},BR=xI(null,"core",[{provide:VC,useValue:"unknown"},{provide:CI,deps:[de]},{provide:_I,deps:[]},{provide:IM,deps:[]}]),GR=[{provide:ow,useClass:ow,deps:[oc,de,Dh,Tm,c_]},{provide:BD,deps:[oc],useFactory:function(c){let u=[];return c.onStable.subscribe(()=>{for(;u.length;)u.pop()()}),function(m){u.push(m)}}},{provide:c_,useClass:c_,deps:[[new wl,tw]]},{provide:Ap,useClass:Ap,deps:[]},BC,{provide:y0,useFactory:function(){return nD},deps:[]},{provide:v0,useFactory:function(){return Ab},deps:[]},{provide:Ld,useFactory:function(c){return c0(c=c||"undefined"!=typeof $localize&&$localize.locale||bb),c},deps:[[new qs(Ld),new wl,new Zs]]},{provide:HC,useValue:"USD"}];let YR=(()=>{class c{constructor(m){}}return c.\u0275fac=function(m){return new(m||c)(wi(ow))},c.\u0275mod=yt({type:c}),c.\u0275inj=fr({providers:GR}),c})()},57:(ai,_n,nt)=>{"use strict";nt.d(_n,{hO:()=>Ki,xv:()=>Rn,Dh:()=>Qe,HU:()=>Et,GT:()=>an,sI:()=>zr,on:()=>Vi,ss:()=>lt,pX:()=>zt,yq:()=>$r});var s=nt(7771),Vt=nt(3637),Ee=nt(3342),A=nt(9673),gt=nt(9746),Dt=nt(7716),wt=nt(2329);function Be(){}ai=nt.hmd(ai);class Ge{constructor(Gt,$t=s.N){this.zone=Gt,this.delegate=$t}now(){return this.delegate.now()}schedule(Gt,$t,Ht){const fn=this.zone;return this.delegate.schedule(function(On){fn.runGuarded(()=>{Gt.apply(this,[On])})},$t,Ht)}}class Ve{constructor(Gt){this.zone=Gt,this.task=null}call(Gt,$t){const Ht=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Be,{},Be,Be)),$t.pipe((0,Ee.b)({next:Ht,complete:Ht,error:Ht})).subscribe(Gt).add(Ht)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Et{constructor(Gt){this.ngZone=Gt,this.outsideAngular=Gt.runOutsideAngular(()=>new Ge(Zone.current)),this.insideAngular=Gt.run(()=>new Ge(Zone.current,Vt.z))}}function lt(Zt){return function($t){return($t=$t.lift(new Ve(Zt.ngZone))).pipe((0,A.R)(Zt.outsideAngular),(0,gt.QV)(Zt.insideAngular))}}const Ct=["ngOnDestroy"],zt=(Zt,Gt,$t,Ht={})=>new Proxy(Zt,{get:(fn,Yt)=>$t.runOutsideAngular(()=>{var On;if(Zt[Yt])return(null===(On=null==Ht?void 0:Ht.spy)||void 0===On?void 0:On.get)&&Ht.spy.get(Yt,Zt[Yt]),Zt[Yt];if(Ct.indexOf(Yt)>-1)return()=>{};const hi=Gt.toPromise().then(mi=>{const Un=mi&&mi[Yt];return"function"==typeof Un?Un.bind(mi):Un&&Un.then?Un.then(ii=>$t.run(()=>ii)):$t.run(()=>Un)});return new Proxy(()=>{},{get:(mi,Un)=>hi[Un],apply:(mi,Un,ii)=>hi.then(Hn=>{var jn;const xi=Hn&&Hn(...ii);return(null===(jn=null==Ht?void 0:Ht.spy)||void 0===jn?void 0:jn.apply)&&Ht.spy.apply(Yt,ii,xi),xi})})})}),an=(Zt,Gt)=>{Gt.forEach($t=>{Object.getOwnPropertyNames($t.prototype||$t).forEach(Ht=>{Object.defineProperty(Zt.prototype,Ht,Object.getOwnPropertyDescriptor($t.prototype||$t,Ht))})})},Qe=new Dt.OlP("angularfire2.app.options"),Rn=new Dt.OlP("angularfire2.app.nameOrConfig"),Mt=new Dt.GfV("6.1.5");function Vi(Zt,Gt,$t){const fn="object"==typeof $t&&$t||{};fn.name=fn.name||"string"==typeof $t&&$t||"[DEFAULT]";const On=wt.Z.apps.filter(hi=>hi&&hi.name===fn.name)[0]||Gt.runOutsideAngular(()=>wt.Z.initializeApp(Zt,fn));try{JSON.stringify(Zt)!==JSON.stringify(On.options)&&Vn("error",`${On.name} Firebase App already initialized with different options${ai.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(hi){}return On}const $r=()=>{Vn("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},Vn=(Zt,...Gt)=>{(0,Dt.X6Q)()&&"undefined"!=typeof console&&console[Zt](...Gt)};function zr(Zt,Gt,$t,Ht,fn){const[Yt,...On]=globalThis.\u0275AngularfireInstanceCache.get(Zt)||[];if(Yt){try{fn.some((hi,mi)=>{const Un=On[mi];return hi&&"object"==typeof hi?JSON.stringify(hi)!==JSON.stringify(Un):hi!==Un})&&Vn("error",`${Gt} was already initialized on the ${$t.name} Firebase App instance with different settings.${ai.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(hi){}return Yt}{const hi=Ht();return globalThis.\u0275AngularfireInstanceCache.set(Zt,[hi,...fn]),hi}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const Ji={provide:class{},useFactory:Vi,deps:[Qe,Dt.R0b,[new Dt.FiY,Rn]]};let Ki=(()=>{class Zt{constructor($t){wt.Z.registerVersion("angularfire",Mt.full,$t.toString()),wt.Z.registerVersion("angular",Dt.q4F.full)}static initializeApp($t,Ht){return{ngModule:Zt,providers:[{provide:Qe,useValue:$t},{provide:Rn,useValue:Ht}]}}}return Zt.\u0275fac=function($t){return new($t||Zt)(Dt.LFG(Dt.Lbi))},Zt.\u0275mod=Dt.oAB({type:Zt}),Zt.\u0275inj=Dt.cJS({providers:[Ji]}),Zt})()},9759:(ai,_n,nt)=>{"use strict";nt.d(_n,{Z:()=>ii});var gt,Vn,s=nt(4762),Vt=nt(4685),Ee=nt(6034),A=nt(300),Dt=((gt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",gt["bad-app-name"]="Illegal App name: '{$appName}",gt["duplicate-app"]="Firebase App named '{$appName}' already exists",gt["app-deleted"]="Firebase App named '{$appName}' already deleted",gt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",gt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",gt),wt=new Vt.LL("app","Firebase",Dt),Be="@firebase/app",Di="[DEFAULT]",zr=((Vn={})[Be]="fire-core",Vn["@firebase/analytics"]="fire-analytics",Vn["@firebase/app-check"]="fire-app-check",Vn["@firebase/auth"]="fire-auth",Vn["@firebase/database"]="fire-rtdb",Vn["@firebase/functions"]="fire-fn",Vn["@firebase/installations"]="fire-iid",Vn["@firebase/messaging"]="fire-fcm",Vn["@firebase/performance"]="fire-perf",Vn["@firebase/remote-config"]="fire-rc",Vn["@firebase/storage"]="fire-gcs",Vn["@firebase/firestore"]="fire-fst",Vn["fire-js"]="fire-js",Vn["firebase-wrapper"]="fire-js-all",Vn),Ji=new A.Yd("@firebase/app"),Ki=function(){function Hn(jn,xi,li){var Yi=this;this.firebase_=li,this.isDeleted_=!1,this.name_=xi.name,this.automaticDataCollectionEnabled_=xi.automaticDataCollectionEnabled||!1,this.options_=(0,Vt.p$)(jn),this.container=new Ee.H0(xi.name),this._addComponent(new Ee.wA("app",function(){return Yi},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(Do){return Yi._addComponent(Do)})}return Object.defineProperty(Hn.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(jn){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=jn},enumerable:!1,configurable:!0}),Object.defineProperty(Hn.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Hn.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Hn.prototype.delete=function(){var jn=this;return new Promise(function(xi){jn.checkDestroyed_(),xi()}).then(function(){return jn.firebase_.INTERNAL.removeApp(jn.name_),Promise.all(jn.container.getProviders().map(function(xi){return xi.delete()}))}).then(function(){jn.isDeleted_=!0})},Hn.prototype._getService=function(jn,xi){var li;void 0===xi&&(xi=Di),this.checkDestroyed_();var Yi=this.container.getProvider(jn);return!Yi.isInitialized()&&"EXPLICIT"===(null===(li=Yi.getComponent())||void 0===li?void 0:li.instantiationMode)&&Yi.initialize(),Yi.getImmediate({identifier:xi})},Hn.prototype._removeServiceInstance=function(jn,xi){void 0===xi&&(xi=Di),this.container.getProvider(jn).clearInstance(xi)},Hn.prototype._addComponent=function(jn){try{this.container.addComponent(jn)}catch(xi){Ji.debug("Component "+jn.name+" failed to register with FirebaseApp "+this.name,xi)}},Hn.prototype._addOrOverwriteComponent=function(jn){this.container.addOrOverwriteComponent(jn)},Hn.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Hn.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw wt.create("app-deleted",{appName:this.name_})},Hn}();Ki.prototype.name&&Ki.prototype.options||Ki.prototype.delete||console.log("dc");var Ht=function $t(){var Hn=function(Hn){var jn={},xi=new Map,li={__esModule:!0,initializeApp:function(Li,Si){void 0===Si&&(Si={}),("object"!=typeof Si||null===Si)&&(Si={name:Si});var Io=Si;void 0===Io.name&&(Io.name=Di);var Yn=Io.name;if("string"!=typeof Yn||!Yn)throw wt.create("bad-app-name",{appName:String(Yn)});if((0,Vt.r3)(jn,Yn))throw wt.create("duplicate-app",{appName:Yn});var yr=new Hn(Li,Io,li);return jn[Yn]=yr,yr},app:Do,registerVersion:function(Li,Si,co){var Io,Yn=null!==(Io=zr[Li])&&void 0!==Io?Io:Li;co&&(Yn+="-"+co);var yr=Yn.match(/\s|\//),Vr=Si.match(/\s|\//);if(yr||Vr){var vr=['Unable to register library "'+Yn+'" with version "'+Si+'":'];return yr&&vr.push('library name "'+Yn+'" contains illegal characters (whitespace or "/")'),yr&&Vr&&vr.push("and"),Vr&&vr.push('version name "'+Si+'" contains illegal characters (whitespace or "/")'),void Ji.warn(vr.join(" "))}Or(new Ee.wA(Yn+"-version",function(){return{library:Yn,version:Si}},"VERSION"))},setLogLevel:A.Ub,onLog:function(Li,Si){if(null!==Li&&"function"!=typeof Li)throw wt.create("invalid-log-argument");(0,A.Am)(Li,Si)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:Or,removeApp:function(Li){delete jn[Li]},components:xi,useAsService:function(Li,Si){return"serverAuth"===Si?null:Si}}};function Do(Li){if(!(0,Vt.r3)(jn,Li=Li||Di))throw wt.create("no-app",{appName:Li});return jn[Li]}function Or(Li){var Si=Li.name;if(xi.has(Si))return Ji.debug("There were multiple attempts to register component "+Si+"."),"PUBLIC"===Li.type?li[Si]:null;if(xi.set(Si,Li),"PUBLIC"===Li.type){var co=function(Vr){if(void 0===Vr&&(Vr=Do()),"function"!=typeof Vr[Si])throw wt.create("invalid-app-argument",{appName:Si});return Vr[Si]()};void 0!==Li.serviceProps&&(0,Vt.ZB)(co,Li.serviceProps),li[Si]=co,Hn.prototype[Si]=function(){for(var Vr=[],vr=0;vr<arguments.length;vr++)Vr[vr]=arguments[vr];return this._getService.bind(this,Si).apply(this,Li.multipleInstances?Vr:[])}}for(var Io=0,Yn=Object.keys(jn);Io<Yn.length;Io++)jn[Yn[Io]]._addComponent(Li);return"PUBLIC"===Li.type?li[Si]:null}return li.default=li,Object.defineProperty(li,"apps",{get:function(){return Object.keys(jn).map(function(Li){return jn[Li]})}}),Do.App=Hn,li}(Ki);return Hn.INTERNAL=(0,s.pi)((0,s.pi)({},Hn.INTERNAL),{createFirebaseNamespace:$t,extendNamespace:function(xi){(0,Vt.ZB)(Hn,xi)},createSubscribe:Vt.ne,ErrorFactory:Vt.LL,deepExtend:Vt.ZB}),Hn}(),fn=function(){function Hn(jn){this.container=jn}return Hn.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(xi){if(function(Hn){var jn=Hn.getComponent();return"VERSION"===(null==jn?void 0:jn.type)}(xi)){var li=xi.getImmediate();return li.library+"/"+li.version}return null}).filter(function(xi){return xi}).join(" ")},Hn}();if((0,Vt.jU)()&&void 0!==self.firebase){Ji.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var hi=self.firebase.SDK_VERSION;hi&&hi.indexOf("LITE")>=0&&Ji.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var mi=Ht.initializeApp;Ht.initializeApp=function(){for(var Hn=[],jn=0;jn<arguments.length;jn++)Hn[jn]=arguments[jn];return(0,Vt.UG)()&&Ji.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),mi.apply(void 0,Hn)};var Hn,Un=Ht;(Hn=Un).INTERNAL.registerComponent(new Ee.wA("platform-logger",function(xi){return new fn(xi)},"PRIVATE")),Hn.registerVersion(Be,"0.6.29",undefined),Hn.registerVersion("fire-js","");const ii=Un},6034:(ai,_n,nt)=>{"use strict";nt.d(_n,{wA:()=>Ee,H0:()=>Be,zt:()=>gt});var s=nt(4762),Vt=nt(4685),Ee=function(){function Ge(Ve,Et,lt){this.name=Ve,this.instanceFactory=Et,this.type=lt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ge.prototype.setInstantiationMode=function(Ve){return this.instantiationMode=Ve,this},Ge.prototype.setMultipleInstances=function(Ve){return this.multipleInstances=Ve,this},Ge.prototype.setServiceProps=function(Ve){return this.serviceProps=Ve,this},Ge.prototype.setInstanceCreatedCallback=function(Ve){return this.onInstanceCreated=Ve,this},Ge}(),A="[DEFAULT]",gt=function(){function Ge(Ve,Et){this.name=Ve,this.container=Et,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return Ge.prototype.get=function(Ve){var Et=this.normalizeInstanceIdentifier(Ve);if(!this.instancesDeferred.has(Et)){var lt=new Vt.BH;if(this.instancesDeferred.set(Et,lt),this.isInitialized(Et)||this.shouldAutoInitialize())try{var Ct=this.getOrInitializeService({instanceIdentifier:Et});Ct&&lt.resolve(Ct)}catch(zt){}}return this.instancesDeferred.get(Et).promise},Ge.prototype.getImmediate=function(Ve){var Et,lt=this.normalizeInstanceIdentifier(null==Ve?void 0:Ve.identifier),Ct=null!==(Et=null==Ve?void 0:Ve.optional)&&void 0!==Et&&Et;if(!this.isInitialized(lt)&&!this.shouldAutoInitialize()){if(Ct)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:lt})}catch(zt){if(Ct)return null;throw zt}},Ge.prototype.getComponent=function(){return this.component},Ge.prototype.setComponent=function(Ve){var Et,lt;if(Ve.name!==this.name)throw Error("Mismatching Component "+Ve.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=Ve,this.shouldAutoInitialize()){if(function(Ge){return"EAGER"===Ge.instantiationMode}(Ve))try{this.getOrInitializeService({instanceIdentifier:A})}catch(Vi){}try{for(var Ct=(0,s.XA)(this.instancesDeferred.entries()),zt=Ct.next();!zt.done;zt=Ct.next()){var an=(0,s.CR)(zt.value,2),Rn=an[1],dn=this.normalizeInstanceIdentifier(an[0]);try{var Mt=this.getOrInitializeService({instanceIdentifier:dn});Rn.resolve(Mt)}catch(Vi){}}}catch(Vi){Et={error:Vi}}finally{try{zt&&!zt.done&&(lt=Ct.return)&&lt.call(Ct)}finally{if(Et)throw Et.error}}}},Ge.prototype.clearInstance=function(Ve){void 0===Ve&&(Ve=A),this.instancesDeferred.delete(Ve),this.instances.delete(Ve)},Ge.prototype.delete=function(){return(0,s.mG)(this,void 0,void 0,function(){var Ve;return(0,s.Jh)(this,function(Et){switch(Et.label){case 0:return Ve=Array.from(this.instances.values()),[4,Promise.all((0,s.ev)((0,s.ev)([],(0,s.CR)(Ve.filter(function(lt){return"INTERNAL"in lt}).map(function(lt){return lt.INTERNAL.delete()}))),(0,s.CR)(Ve.filter(function(lt){return"_delete"in lt}).map(function(lt){return lt._delete()}))))];case 1:return Et.sent(),[2]}})})},Ge.prototype.isComponentSet=function(){return null!=this.component},Ge.prototype.isInitialized=function(Ve){return void 0===Ve&&(Ve=A),this.instances.has(Ve)},Ge.prototype.initialize=function(Ve){var Et,lt;void 0===Ve&&(Ve={});var Ct=Ve.options,zt=void 0===Ct?{}:Ct,an=this.normalizeInstanceIdentifier(Ve.instanceIdentifier);if(this.isInitialized(an))throw Error(this.name+"("+an+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Qe=this.getOrInitializeService({instanceIdentifier:an,options:zt});try{for(var Rn=(0,s.XA)(this.instancesDeferred.entries()),dn=Rn.next();!dn.done;dn=Rn.next()){var Mt=(0,s.CR)(dn.value,2),$r=Mt[1];an===this.normalizeInstanceIdentifier(Mt[0])&&$r.resolve(Qe)}}catch(Di){Et={error:Di}}finally{try{dn&&!dn.done&&(lt=Rn.return)&&lt.call(Rn)}finally{if(Et)throw Et.error}}return Qe},Ge.prototype.onInit=function(Ve,Et){var lt,Ct=this.normalizeInstanceIdentifier(Et),zt=null!==(lt=this.onInitCallbacks.get(Ct))&&void 0!==lt?lt:new Set;zt.add(Ve),this.onInitCallbacks.set(Ct,zt);var an=this.instances.get(Ct);return an&&Ve(an,Ct),function(){zt.delete(Ve)}},Ge.prototype.invokeOnInitCallbacks=function(Ve,Et){var lt,Ct,zt=this.onInitCallbacks.get(Et);if(zt)try{for(var an=(0,s.XA)(zt),Qe=an.next();!Qe.done;Qe=an.next()){var Rn=Qe.value;try{Rn(Ve,Et)}catch(dn){}}}catch(dn){lt={error:dn}}finally{try{Qe&&!Qe.done&&(Ct=an.return)&&Ct.call(an)}finally{if(lt)throw lt.error}}},Ge.prototype.getOrInitializeService=function(Ve){var Et=Ve.instanceIdentifier,lt=Ve.options,Ct=void 0===lt?{}:lt,zt=this.instances.get(Et);if(!zt&&this.component&&(zt=this.component.instanceFactory(this.container,{instanceIdentifier:Dt(Et),options:Ct}),this.instances.set(Et,zt),this.invokeOnInitCallbacks(zt,Et),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Et,zt)}catch(an){}return zt||null},Ge.prototype.normalizeInstanceIdentifier=function(Ve){return void 0===Ve&&(Ve=A),this.component?this.component.multipleInstances?Ve:A:Ve},Ge.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Ge}();function Dt(Ge){return Ge===A?void 0:Ge}var Be=function(){function Ge(Ve){this.name=Ve,this.providers=new Map}return Ge.prototype.addComponent=function(Ve){var Et=this.getProvider(Ve.name);if(Et.isComponentSet())throw new Error("Component "+Ve.name+" has already been registered with "+this.name);Et.setComponent(Ve)},Ge.prototype.addOrOverwriteComponent=function(Ve){this.getProvider(Ve.name).isComponentSet()&&this.providers.delete(Ve.name),this.addComponent(Ve)},Ge.prototype.getProvider=function(Ve){if(this.providers.has(Ve))return this.providers.get(Ve);var Et=new gt(Ve,this);return this.providers.set(Ve,Et),Et},Ge.prototype.getProviders=function(){return Array.from(this.providers.values())},Ge}()},9192:(ai,_n,nt)=>{"use strict";var s=nt(9759),Vt=nt(6034),Ee=nt(4685),A=nt(4762),gt=nt(300);ai=nt.hmd(ai);var Be="";function Ge(E){Be=E}var E,Ve=function(){function E(S){this.domStorage_=S,this.prefix_="firebase:"}return E.prototype.set=function(S,I){null==I?this.domStorage_.removeItem(this.prefixedName_(S)):this.domStorage_.setItem(this.prefixedName_(S),(0,Ee.Pz)(I))},E.prototype.get=function(S){var I=this.domStorage_.getItem(this.prefixedName_(S));return null==I?null:(0,Ee.cI)(I)},E.prototype.remove=function(S){this.domStorage_.removeItem(this.prefixedName_(S))},E.prototype.prefixedName_=function(S){return this.prefix_+S},E.prototype.toString=function(){return this.domStorage_.toString()},E}(),Et=function(){function E(){this.cache_={},this.isInMemoryStorage=!0}return E.prototype.set=function(S,I){null==I?delete this.cache_[S]:this.cache_[S]=I},E.prototype.get=function(S){return(0,Ee.r3)(this.cache_,S)?this.cache_[S]:null},E.prototype.remove=function(S){delete this.cache_[S]},E}(),lt=function(E){try{if("undefined"!=typeof window&&void 0!==window[E]){var S=window[E];return S.setItem("firebase:sentinel","cache"),S.removeItem("firebase:sentinel"),new Ve(S)}}catch(I){}return new Et},Ct=lt("localStorage"),zt=lt("sessionStorage"),an=new gt.Yd("@firebase/database"),Qe=(E=1,function(){return E++}),Rn=function(E){var S=(0,Ee.dS)(E),I=new Ee.gQ;I.update(S);var V=I.digest();return Ee.US.encodeByteArray(V)},dn=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];for(var I="",V=0;V<E.length;V++){var Q=E[V];Array.isArray(Q)||Q&&"object"==typeof Q&&"number"==typeof Q.length?I+=dn.apply(null,Q):I+="object"==typeof Q?(0,Ee.Pz)(Q):Q,I+=" "}return I},Mt=null,Vi=!0,$r=function(E,S){(0,Ee.hu)(!S||!0===E||!1===E,"Can't turn on custom loggers persistently."),!0===E?(an.logLevel=gt.in.VERBOSE,Mt=an.log.bind(an),S&&zt.set("logging_enabled",!0)):"function"==typeof E?Mt=E:(Mt=null,zt.remove("logging_enabled"))},Vn=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];if(!0===Vi&&(Vi=!1,null===Mt&&!0===zt.get("logging_enabled")&&$r(!0)),Mt){var I=dn.apply(null,E);Mt(I)}},Di=function(E){return function(){for(var S=[],I=0;I<arguments.length;I++)S[I]=arguments[I];Vn.apply(void 0,(0,A.ev)([E],(0,A.CR)(S)))}},zr=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];var I="FIREBASE INTERNAL ERROR: "+dn.apply(void 0,(0,A.ev)([],(0,A.CR)(E)));an.error(I)},Ji=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];var I="FIREBASE FATAL ERROR: "+dn.apply(void 0,(0,A.ev)([],(0,A.CR)(E)));throw an.error(I),new Error(I)},Ki=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];var I="FIREBASE WARNING: "+dn.apply(void 0,(0,A.ev)([],(0,A.CR)(E)));an.warn(I)},Gt=function(E){return"number"==typeof E&&(E!=E||E===Number.POSITIVE_INFINITY||E===Number.NEGATIVE_INFINITY)},Ht="[MIN_NAME]",fn="[MAX_NAME]",Yt=function(E,S){if(E===S)return 0;if(E===Ht||S===fn)return-1;if(S===Ht||E===fn)return 1;var I=io(E),V=io(S);return null!==I?null!==V?I-V==0?E.length-S.length:I-V:-1:null!==V?1:E<S?-1:1},On=function(E,S){return E===S?0:E<S?-1:1},hi=function(E,S){if(S&&E in S)return S[E];throw new Error("Missing required key ("+E+") in object: "+(0,Ee.Pz)(S))},mi=function(E){if("object"!=typeof E||null===E)return(0,Ee.Pz)(E);var S=[];for(var I in E)S.push(I);S.sort();for(var V="{",Q=0;Q<S.length;Q++)0!==Q&&(V+=","),V+=(0,Ee.Pz)(S[Q]),V+=":",V+=mi(E[S[Q]]);return V+"}"},Un=function(E,S){var I=E.length;if(I<=S)return[E];for(var V=[],Q=0;Q<I;Q+=S)V.push(E.substring(Q,Q+S>I?I:Q+S));return V};function ii(E,S){for(var I in E)E.hasOwnProperty(I)&&S(I,E[I])}var Hn=function(E){(0,Ee.hu)(!Gt(E),"Invalid JSON number");var Q,le,ye,Oe,Ye,V=1023;0===E?(le=0,ye=0,Q=1/E==-1/0?1:0):(Q=E<0,(E=Math.abs(E))>=Math.pow(2,1-V)?(le=(Oe=Math.min(Math.floor(Math.log(E)/Math.LN2),V))+V,ye=Math.round(E*Math.pow(2,52-Oe)-Math.pow(2,52))):(le=0,ye=Math.round(E/Math.pow(2,-1074))));var st=[];for(Ye=52;Ye;Ye-=1)st.push(ye%2?1:0),ye=Math.floor(ye/2);for(Ye=11;Ye;Ye-=1)st.push(le%2?1:0),le=Math.floor(le/2);st.push(Q?1:0),st.reverse();var pt=st.join(""),Wt="";for(Ye=0;Ye<64;Ye+=8){var cn=parseInt(pt.substr(Ye,8),2).toString(16);1===cn.length&&(cn="0"+cn),Wt+=cn}return Wt.toLowerCase()},Yi=new RegExp("^-?(0*)\\d{1,10}$"),Do=-2147483648,fr=2147483647,io=function(E){if(Yi.test(E)){var S=Number(E);if(S>=Do&&S<=fr)return S}return null},Or=function(E){try{E()}catch(S){setTimeout(function(){throw Ki("Exception was thrown by user callback.",S.stack||""),S},Math.floor(0))}},Ri=function(E,S){var I=setTimeout(E,S);return"object"==typeof I&&I.unref&&I.unref(),I},hs=function(){function E(S,I){var V=this;this.appName_=S,this.appCheckProvider=I,this.appCheck=null==I?void 0:I.getImmediate({optional:!0}),this.appCheck||null==I||I.get().then(function(Q){return V.appCheck=Q})}return E.prototype.getToken=function(S){var I=this;return this.appCheck?this.appCheck.getToken(S):new Promise(function(V,Q){setTimeout(function(){I.appCheck?I.getToken(S).then(V,Q):V(null)},0)})},E.prototype.addTokenChangeListener=function(S){var I;null===(I=this.appCheckProvider)||void 0===I||I.get().then(function(V){return V.addTokenListener(S)})},E.prototype.notifyForInvalidToken=function(){Ki('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},E}(),Li=function(){function E(S,I,V){var Q=this;this.appName_=S,this.firebaseOptions_=I,this.authProvider_=V,this.auth_=null,this.auth_=V.getImmediate({optional:!0}),this.auth_||V.onInit(function(le){return Q.auth_=le})}return E.prototype.getToken=function(S){var I=this;return this.auth_?this.auth_.getToken(S).catch(function(V){return V&&"auth/token-not-initialized"===V.code?(Vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(V)}):new Promise(function(V,Q){setTimeout(function(){I.auth_?I.getToken(S).then(V,Q):V(null)},0)})},E.prototype.addTokenChangeListener=function(S){this.auth_?this.auth_.addAuthTokenListener(S):this.authProvider_.get().then(function(I){return I.addAuthTokenListener(S)})},E.prototype.removeTokenChangeListener=function(S){this.authProvider_.get().then(function(I){return I.removeAuthTokenListener(S)})},E.prototype.notifyForInvalidToken=function(){var S='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';Ki(S+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},E}(),Si=function(){function E(S){this.accessToken=S}return E.prototype.getToken=function(S){return Promise.resolve({accessToken:this.accessToken})},E.prototype.addTokenChangeListener=function(S){S(this.accessToken)},E.prototype.removeTokenChangeListener=function(S){},E.prototype.notifyForInvalidToken=function(){},E.OWNER="owner",E}(),vr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ur="websocket",is="long_polling",Hr=function(){function E(S,I,V,Q,le,ye,Oe){void 0===le&&(le=!1),void 0===ye&&(ye=""),void 0===Oe&&(Oe=!1),this.secure=I,this.namespace=V,this.webSocketOnly=Q,this.nodeAdmin=le,this.persistenceKey=ye,this.includeNamespaceInQueryParams=Oe,this._host=S.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ct.get("host:"+S)||this._host}return E.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},E.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(E.prototype,"host",{get:function(){return this._host},set:function(S){S!==this.internalHost&&(this.internalHost=S,this.isCacheableHost()&&Ct.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),E.prototype.toString=function(){var S=this.toURLString();return this.persistenceKey&&(S+="<"+this.persistenceKey+">"),S},E.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},E}();function Ei(E,S,I){var V;if((0,Ee.hu)("string"==typeof S,"typeof type must == string"),(0,Ee.hu)("object"==typeof I,"typeof params must == object"),S===Ur)V=(E.secure?"wss://":"ws://")+E.internalHost+"/.ws?";else{if(S!==is)throw new Error("Unknown connection type: "+S);V=(E.secure?"https://":"http://")+E.internalHost+"/.lp?"}(function(E){return E.host!==E.internalHost||E.isCustomHost()||E.includeNamespaceInQueryParams})(E)&&(I.ns=E.namespace);var Q=[];return ii(I,function(le,ye){Q.push(le+"="+ye)}),V+Q.join("&")}var Nl=function(){function E(){this.counters_={}}return E.prototype.incrementCounter=function(S,I){void 0===I&&(I=1),(0,Ee.r3)(this.counters_,S)||(this.counters_[S]=0),this.counters_[S]+=I},E.prototype.get=function(){return(0,Ee.p$)(this.counters_)},E}(),Vs={},_s={};function br(E){var S=E.toString();return Vs[S]||(Vs[S]=new Nl),Vs[S]}var cc=function(){function E(S){this.onMessage_=S,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return E.prototype.closeAfter=function(S,I){this.closeAfterResponse=S,this.onClose=I,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},E.prototype.handleResponse=function(S,I){var V=this;this.pendingResponses[S]=I;for(var Q=function(){var Oe=le.pendingResponses[le.currentResponseNum];delete le.pendingResponses[le.currentResponseNum];for(var Ye=function(pt){Oe[pt]&&Or(function(){V.onMessage_(Oe[pt])})},st=0;st<Oe.length;++st)Ye(st);if(le.currentResponseNum===le.closeAfterResponse)return le.onClose&&(le.onClose(),le.onClose=null),"break";le.currentResponseNum++},le=this;this.pendingResponses[this.currentResponseNum]&&"break"!==Q(););},E}(),Pt=function(){function E(S,I,V,Q,le,ye,Oe){var Ye=this;this.connId=S,this.repoInfo=I,this.applicationId=V,this.appCheckToken=Q,this.authToken=le,this.transportSessionId=ye,this.lastSessionId=Oe,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Di(S),this.stats_=br(I),this.urlFn=function(st){return Ye.appCheckToken&&(st.ac=Ye.appCheckToken),Ei(I,is,st)}}return E.prototype.open=function(S,I){var V=this;this.curSegmentNum=0,this.onDisconnect_=I,this.myPacketOrderer=new cc(S),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){V.log_("Timed out trying to connect."),V.onClosed_(),V.connectTimeoutTimer_=null},Math.floor(3e4)),function(E){if((0,Ee.Yr)()||"complete"===document.readyState)E();else{var S=!1,I=function(){document.body?S||(S=!0,E()):setTimeout(I,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",I,!1),window.addEventListener("load",I,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&I()}),window.attachEvent("onload",I))}}(function(){if(!V.isClosed_){V.scriptTagHolder=new xt(function(){for(var ye=[],Oe=0;Oe<arguments.length;Oe++)ye[Oe]=arguments[Oe];var Ye=(0,A.CR)(ye,5),st=Ye[0],pt=Ye[1],Wt=Ye[2];if(V.incrementIncomingBytes_(ye),V.scriptTagHolder)if(V.connectTimeoutTimer_&&(clearTimeout(V.connectTimeoutTimer_),V.connectTimeoutTimer_=null),V.everConnected_=!0,"start"===st)V.id=pt,V.password=Wt;else{if("close"!==st)throw new Error("Unrecognized command received: "+st);pt?(V.scriptTagHolder.sendNewPolls=!1,V.myPacketOrderer.closeAfter(pt,function(){V.onClosed_()})):V.onClosed_()}},function(){for(var ye=[],Oe=0;Oe<arguments.length;Oe++)ye[Oe]=arguments[Oe];var Ye=(0,A.CR)(ye,2),st=Ye[0],pt=Ye[1];V.incrementIncomingBytes_(ye),V.myPacketOrderer.handleResponse(st,pt)},function(){V.onClosed_()},V.urlFn);var Q={start:"t"};Q.ser=Math.floor(1e8*Math.random()),V.scriptTagHolder.uniqueCallbackIdentifier&&(Q.cb=V.scriptTagHolder.uniqueCallbackIdentifier),Q.v="5",V.transportSessionId&&(Q.s=V.transportSessionId),V.lastSessionId&&(Q.ls=V.lastSessionId),V.applicationId&&(Q.p=V.applicationId),V.appCheckToken&&(Q.ac=V.appCheckToken),"undefined"!=typeof location&&location.hostname&&vr.test(location.hostname)&&(Q.r="f");var le=V.urlFn(Q);V.log_("Connecting via long-poll to "+le),V.scriptTagHolder.addTag(le,function(){})}})},E.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},E.forceAllow=function(){E.forceAllow_=!0},E.forceDisallow=function(){E.forceDisallow_=!0},E.isAvailable=function(){return!((0,Ee.Yr)()||!E.forceAllow_&&(E.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},E.prototype.markConnectionHealthy=function(){},E.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},E.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},E.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},E.prototype.send=function(S){var I=(0,Ee.Pz)(S);this.bytesSent+=I.length,this.stats_.incrementCounter("bytes_sent",I.length);for(var V=(0,Ee.h$)(I),Q=Un(V,1840),le=0;le<Q.length;le++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,Q.length,Q[le]),this.curSegmentNum++},E.prototype.addDisconnectPingFrame=function(S,I){if(!(0,Ee.Yr)()){this.myDisconnFrame=document.createElement("iframe");var V={dframe:"t"};V.id=S,V.pw=I,this.myDisconnFrame.src=this.urlFn(V),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},E.prototype.incrementIncomingBytes_=function(S){var I=(0,Ee.Pz)(S).length;this.bytesReceived+=I,this.stats_.incrementCounter("bytes_received",I)},E}(),xt=function(){function E(S,I,V,Q){if(this.onDisconnect=V,this.urlFn=Q,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Ee.Yr)())this.commandCB=S,this.onMessageCB=I;else{this.uniqueCallbackIdentifier=Qe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=S,window["pRTLPCB"+this.uniqueCallbackIdentifier]=I,this.myIFrame=E.createIFrame_();var le="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(le='<script>document.domain="'+document.domain+'";<\/script>');var Oe="<html><body>"+le+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(Oe),this.myIFrame.doc.close()}catch(Ye){Vn("frame writing exception"),Ye.stack&&Vn(Ye.stack),Vn(Ye)}}}return E.createIFrame_=function(){var S=document.createElement("iframe");if(S.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(S);try{S.contentWindow.document||Vn("No IE domain setting required")}catch(Q){var V=document.domain;S.src="javascript:void((function(){document.open();document.domain='"+V+"';document.close();})())"}return S.contentDocument?S.doc=S.contentDocument:S.contentWindow?S.doc=S.contentWindow.document:S.document&&(S.doc=S.document),S},E.prototype.close=function(){var S=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==S.myIFrame&&(document.body.removeChild(S.myIFrame),S.myIFrame=null)},Math.floor(0)));var I=this.onDisconnect;I&&(this.onDisconnect=null,I())},E.prototype.startLongPoll=function(S,I){for(this.myID=S,this.myPW=I,this.alive=!0;this.newRequest_(););},E.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var S={};S.id=this.myID,S.pw=this.myPW,S.ser=this.currentSerial;for(var I=this.urlFn(S),V="",Q=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+V.length<=1870;){var ye=this.pendingSegs.shift();V=V+"&seg"+Q+"="+ye.seg+"&ts"+Q+"="+ye.ts+"&d"+Q+"="+ye.d,Q++}return this.addLongPollTag_(I+=V,this.currentSerial),!0}return!1},E.prototype.enqueueSegment=function(S,I,V){this.pendingSegs.push({seg:S,ts:I,d:V}),this.alive&&this.newRequest_()},E.prototype.addLongPollTag_=function(S,I){var V=this;this.outstandingRequests.add(I);var Q=function(){V.outstandingRequests.delete(I),V.newRequest_()},le=setTimeout(Q,Math.floor(25e3));this.addTag(S,function(){clearTimeout(le),Q()})},E.prototype.addTag=function(S,I){var V=this;(0,Ee.Yr)()?this.doNodeLongPoll(S,I):setTimeout(function(){try{if(!V.sendNewPolls)return;var Q=V.myIFrame.doc.createElement("script");Q.type="text/javascript",Q.async=!0,Q.src=S,Q.onload=Q.onreadystatechange=function(){var le=Q.readyState;(!le||"loaded"===le||"complete"===le)&&(Q.onload=Q.onreadystatechange=null,Q.parentNode&&Q.parentNode.removeChild(Q),I())},Q.onerror=function(){Vn("Long-poll script failed to load: "+S),V.sendNewPolls=!1,V.close()},V.myIFrame.doc.body.appendChild(Q)}catch(le){}},Math.floor(1))},E}(),ve=null;"undefined"!=typeof MozWebSocket?ve=MozWebSocket:"undefined"!=typeof WebSocket&&(ve=WebSocket);var d=function(){function E(S,I,V,Q,le,ye,Oe){this.connId=S,this.applicationId=V,this.appCheckToken=Q,this.authToken=le,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Di(this.connId),this.stats_=br(I),this.connURL=E.connectionURL_(I,ye,Oe,Q),this.nodeAdmin=I.nodeAdmin}return E.connectionURL_=function(S,I,V,Q){var le={v:"5"};return!(0,Ee.Yr)()&&"undefined"!=typeof location&&location.hostname&&vr.test(location.hostname)&&(le.r="f"),I&&(le.s=I),V&&(le.ls=V),Q&&(le.ac=Q),Ei(S,Ur,le)},E.prototype.open=function(S,I){var V=this;this.onDisconnect=I,this.onMessage=S,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ct.set("previous_websocket_failure",!0);try{if((0,Ee.Yr)()){var le={headers:{"User-Agent":"Firebase/5/"+Be+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(le.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(le.headers["X-Firebase-AppCheck"]=this.appCheckToken);var ye=process.env,Oe=0===this.connURL.indexOf("wss://")?ye.HTTPS_PROXY||ye.https_proxy:ye.HTTP_PROXY||ye.http_proxy;Oe&&(le.proxy={origin:Oe}),this.mySock=new ve(this.connURL,[],le)}else this.mySock=new ve(this.connURL,[],le={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(st){this.log_("Error instantiating WebSocket.");var Ye=st.message||st.data;return Ye&&this.log_(Ye),void this.onClosed_()}this.mySock.onopen=function(){V.log_("Websocket connected."),V.everConnected_=!0},this.mySock.onclose=function(){V.log_("Websocket connection was disconnected."),V.mySock=null,V.onClosed_()},this.mySock.onmessage=function(st){V.handleIncomingFrame(st)},this.mySock.onerror=function(st){V.log_("WebSocket error.  Closing connection.");var pt=st.message||st.data;pt&&V.log_(pt),V.onClosed_()}},E.prototype.start=function(){},E.forceDisallow=function(){E.forceDisallow_=!0},E.isAvailable=function(){var S=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var V=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);V&&V.length>1&&parseFloat(V[1])<4.4&&(S=!0)}return!S&&null!==ve&&!E.forceDisallow_},E.previouslyFailed=function(){return Ct.isInMemoryStorage||!0===Ct.get("previous_websocket_failure")},E.prototype.markConnectionHealthy=function(){Ct.remove("previous_websocket_failure")},E.prototype.appendFrame_=function(S){if(this.frames.push(S),this.frames.length===this.totalFrames){var I=this.frames.join("");this.frames=null;var V=(0,Ee.cI)(I);this.onMessage(V)}},E.prototype.handleNewFrameCount_=function(S){this.totalFrames=S,this.frames=[]},E.prototype.extractFrameCount_=function(S){if((0,Ee.hu)(null===this.frames,"We already have a frame buffer"),S.length<=6){var I=Number(S);if(!isNaN(I))return this.handleNewFrameCount_(I),null}return this.handleNewFrameCount_(1),S},E.prototype.handleIncomingFrame=function(S){if(null!==this.mySock){var I=S.data;if(this.bytesReceived+=I.length,this.stats_.incrementCounter("bytes_received",I.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(I);else{var V=this.extractFrameCount_(I);null!==V&&this.appendFrame_(V)}}},E.prototype.send=function(S){this.resetKeepAlive();var I=(0,Ee.Pz)(S);this.bytesSent+=I.length,this.stats_.incrementCounter("bytes_sent",I.length);var V=Un(I,16384);V.length>1&&this.sendString_(String(V.length));for(var Q=0;Q<V.length;Q++)this.sendString_(V[Q])},E.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},E.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},E.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},E.prototype.resetKeepAlive=function(){var S=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){S.mySock&&S.sendString_("0"),S.resetKeepAlive()},Math.floor(45e3))},E.prototype.sendString_=function(S){try{this.mySock.send(S)}catch(I){this.log_("Exception thrown from WebSocket.send():",I.message||I.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},E.responsesRequiredToBeHealthy=2,E.healthyTimeout=3e4,E}(),p=function(){function E(S){this.initTransports_(S)}return Object.defineProperty(E,"ALL_TRANSPORTS",{get:function(){return[Pt,d]},enumerable:!1,configurable:!0}),E.prototype.initTransports_=function(S){var I,V,Q=d&&d.isAvailable(),le=Q&&!d.previouslyFailed();if(S.webSocketOnly&&(Q||Ki("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),le=!0),le)this.transports_=[d];else{var ye=this.transports_=[];try{for(var Oe=(0,A.XA)(E.ALL_TRANSPORTS),Ye=Oe.next();!Ye.done;Ye=Oe.next()){var st=Ye.value;st&&st.isAvailable()&&ye.push(st)}}catch(pt){I={error:pt}}finally{try{Ye&&!Ye.done&&(V=Oe.return)&&V.call(Oe)}finally{if(I)throw I.error}}}},E.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},E.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},E}(),Me=function(){function E(S,I,V,Q,le,ye,Oe,Ye,st,pt){this.id=S,this.repoInfo_=I,this.applicationId_=V,this.appCheckToken_=Q,this.authToken_=le,this.onMessage_=ye,this.onReady_=Oe,this.onDisconnect_=Ye,this.onKill_=st,this.lastSessionId=pt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Di("c:"+this.id+":"),this.transportManager_=new p(I),this.log_("Connection created"),this.start_()}return E.prototype.start_=function(){var S=this,I=this.transportManager_.initialTransport();this.conn_=new I(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=I.responsesRequiredToBeHealthy||0;var V=this.connReceiver_(this.conn_),Q=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){S.conn_&&S.conn_.open(V,Q)},Math.floor(0));var le=I.healthyTimeout||0;le>0&&(this.healthyTimeout_=Ri(function(){S.healthyTimeout_=null,S.isHealthy_||(S.conn_&&S.conn_.bytesReceived>102400?(S.log_("Connection exceeded healthy timeout but has received "+S.conn_.bytesReceived+" bytes.  Marking connection healthy."),S.isHealthy_=!0,S.conn_.markConnectionHealthy()):S.conn_&&S.conn_.bytesSent>10240?S.log_("Connection exceeded healthy timeout but has sent "+S.conn_.bytesSent+" bytes.  Leaving connection alive."):(S.log_("Closing unhealthy connection after timeout."),S.close()))},Math.floor(le)))},E.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},E.prototype.disconnReceiver_=function(S){var I=this;return function(V){S===I.conn_?I.onConnectionLost_(V):S===I.secondaryConn_?(I.log_("Secondary connection lost."),I.onSecondaryConnectionLost_()):I.log_("closing an old connection")}},E.prototype.connReceiver_=function(S){var I=this;return function(V){2!==I.state_&&(S===I.rx_?I.onPrimaryMessageReceived_(V):S===I.secondaryConn_?I.onSecondaryMessageReceived_(V):I.log_("message on old connection"))}},E.prototype.sendRequest=function(S){this.sendData_({t:"d",d:S})},E.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},E.prototype.onSecondaryControl_=function(S){if("t"in S){var I=S.t;"a"===I?this.upgradeIfSecondaryHealthy_():"r"===I?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===I&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},E.prototype.onSecondaryMessageReceived_=function(S){var I=hi("t",S),V=hi("d",S);if("c"===I)this.onSecondaryControl_(V);else{if("d"!==I)throw new Error("Unknown protocol layer: "+I);this.pendingDataMessages.push(V)}},E.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},E.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},E.prototype.onPrimaryMessageReceived_=function(S){var I=hi("t",S),V=hi("d",S);"c"===I?this.onControl_(V):"d"===I&&this.onDataMessage_(V)},E.prototype.onDataMessage_=function(S){this.onPrimaryResponse_(),this.onMessage_(S)},E.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},E.prototype.onControl_=function(S){var I=hi("t",S);if("d"in S){var V=S.d;if("h"===I)this.onHandshake_(V);else if("n"===I){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var Q=0;Q<this.pendingDataMessages.length;++Q)this.onDataMessage_(this.pendingDataMessages[Q]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===I?this.onConnectionShutdown_(V):"r"===I?this.onReset_(V):"e"===I?zr("Server Error: "+V):"o"===I?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zr("Unknown control packet command: "+I)}},E.prototype.onHandshake_=function(S){var I=S.ts,V=S.v,Q=S.h;this.sessionId=S.s,this.repoInfo_.host=Q,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,I),"5"!==V&&Ki("Protocol version mismatch detected"),this.tryStartUpgrade_())},E.prototype.tryStartUpgrade_=function(){var S=this.transportManager_.upgradeTransport();S&&this.startUpgrade_(S)},E.prototype.startUpgrade_=function(S){var I=this;this.secondaryConn_=new S(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=S.responsesRequiredToBeHealthy||0;var V=this.connReceiver_(this.secondaryConn_),Q=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(V,Q),Ri(function(){I.secondaryConn_&&(I.log_("Timed out trying to upgrade."),I.secondaryConn_.close())},Math.floor(6e4))},E.prototype.onReset_=function(S){this.log_("Reset packet received.  New host: "+S),this.repoInfo_.host=S,1===this.state_?this.close():(this.closeConnections_(),this.start_())},E.prototype.onConnectionEstablished_=function(S,I){var V=this;this.log_("Realtime connection established."),this.conn_=S,this.state_=1,this.onReady_&&(this.onReady_(I,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ri(function(){V.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},E.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},E.prototype.onSecondaryConnectionLost_=function(){var S=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===S||this.rx_===S)&&this.close()},E.prototype.onConnectionLost_=function(S){this.conn_=null,S||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ct.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},E.prototype.onConnectionShutdown_=function(S){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(S),this.onKill_=null),this.onDisconnect_=null,this.close()},E.prototype.sendData_=function(S){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(S)},E.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},E.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},E}(),ze=function(){function E(){}return E.prototype.put=function(S,I,V,Q){},E.prototype.merge=function(S,I,V,Q){},E.prototype.refreshAuthToken=function(S){},E.prototype.refreshAppCheckToken=function(S){},E.prototype.onDisconnectPut=function(S,I,V){},E.prototype.onDisconnectMerge=function(S,I,V){},E.prototype.onDisconnectCancel=function(S,I){},E.prototype.reportStats=function(S){},E}(),Ke=function(){function E(S){this.allowedEvents_=S,this.listeners_={},(0,Ee.hu)(Array.isArray(S)&&S.length>0,"Requires a non-empty array")}return E.prototype.trigger=function(S){for(var I=[],V=1;V<arguments.length;V++)I[V-1]=arguments[V];if(Array.isArray(this.listeners_[S]))for(var Q=(0,A.ev)([],(0,A.CR)(this.listeners_[S])),le=0;le<Q.length;le++)Q[le].callback.apply(Q[le].context,I)},E.prototype.on=function(S,I,V){this.validateEventType_(S),this.listeners_[S]=this.listeners_[S]||[],this.listeners_[S].push({callback:I,context:V});var Q=this.getInitialEvent(S);Q&&I.apply(V,Q)},E.prototype.off=function(S,I,V){this.validateEventType_(S);for(var Q=this.listeners_[S]||[],le=0;le<Q.length;le++)if(Q[le].callback===I&&(!V||V===Q[le].context))return void Q.splice(le,1)},E.prototype.validateEventType_=function(S){(0,Ee.hu)(this.allowedEvents_.find(function(I){return I===S}),"Unknown event: "+S)},E}(),Y=function(E){function S(){var I=E.call(this,["online"])||this;return I.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Ee.uI)()&&(window.addEventListener("online",function(){I.online_||(I.online_=!0,I.trigger("online",!0))},!1),window.addEventListener("offline",function(){I.online_&&(I.online_=!1,I.trigger("online",!1))},!1)),I}return(0,A.ZT)(S,E),S.getInstance=function(){return new S},S.prototype.getInitialEvent=function(I){return(0,Ee.hu)("online"===I,"Unknown event type: "+I),[this.online_]},S.prototype.currentlyOnline=function(){return this.online_},S}(Ke),Ie=function(){function E(S,I){if(void 0===I){this.pieces_=S.split("/");for(var V=0,Q=0;Q<this.pieces_.length;Q++)this.pieces_[Q].length>0&&(this.pieces_[V]=this.pieces_[Q],V++);this.pieces_.length=V,this.pieceNum_=0}else this.pieces_=S,this.pieceNum_=I}return E.prototype.toString=function(){for(var S="",I=this.pieceNum_;I<this.pieces_.length;I++)""!==this.pieces_[I]&&(S+="/"+this.pieces_[I]);return S||"/"},E}();function Je(){return new Ie("")}function Nt(E){return E.pieceNum_>=E.pieces_.length?null:E.pieces_[E.pieceNum_]}function St(E){return E.pieces_.length-E.pieceNum_}function Xt(E){var S=E.pieceNum_;return S<E.pieces_.length&&S++,new Ie(E.pieces_,S)}function gn(E){return E.pieceNum_<E.pieces_.length?E.pieces_[E.pieces_.length-1]:null}function Kn(E,S){return void 0===S&&(S=0),E.pieces_.slice(E.pieceNum_+S)}function Ni(E){if(E.pieceNum_>=E.pieces_.length)return null;for(var S=[],I=E.pieceNum_;I<E.pieces_.length-1;I++)S.push(E.pieces_[I]);return new Ie(S,0)}function Nn(E,S){for(var I=[],V=E.pieceNum_;V<E.pieces_.length;V++)I.push(E.pieces_[V]);if(S instanceof Ie)for(V=S.pieceNum_;V<S.pieces_.length;V++)I.push(S.pieces_[V]);else{var Q=S.split("/");for(V=0;V<Q.length;V++)Q[V].length>0&&I.push(Q[V])}return new Ie(I,0)}function ei(E){return E.pieceNum_>=E.pieces_.length}function rr(E,S){var I=Nt(E),V=Nt(S);if(null===I)return S;if(I===V)return rr(Xt(E),Xt(S));throw new Error("INTERNAL ERROR: innerPath ("+S+") is not within outerPath ("+E+")")}function yo(E,S){for(var I=Kn(E,0),V=Kn(S,0),Q=0;Q<I.length&&Q<V.length;Q++){var le=Yt(I[Q],V[Q]);if(0!==le)return le}return I.length===V.length?0:I.length<V.length?-1:1}function Tr(E,S){if(St(E)!==St(S))return!1;for(var I=E.pieceNum_,V=S.pieceNum_;I<=E.pieces_.length;I++,V++)if(E.pieces_[I]!==S.pieces_[V])return!1;return!0}function or(E,S){var I=E.pieceNum_,V=S.pieceNum_;if(St(E)>St(S))return!1;for(;I<E.pieces_.length;){if(E.pieces_[I]!==S.pieces_[V])return!1;++I,++V}return!0}var No=function(S,I){this.errorPrefix_=I,this.parts_=Kn(S,0),this.byteLength_=Math.max(1,this.parts_.length);for(var V=0;V<this.parts_.length;V++)this.byteLength_+=(0,Ee.ug)(this.parts_[V]);Us(this)};function Us(E){if(E.byteLength_>768)throw new Error(E.errorPrefix_+"has a key path longer than 768 bytes ("+E.byteLength_+").");if(E.parts_.length>32)throw new Error(E.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ro(E))}function ro(E){return 0===E.parts_.length?"":"in property '"+E.parts_.join(".")+"'"}var ih,bu,Bo=function(E){function S(){var V,Q,I=E.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(Q="visibilitychange",V="hidden"):void 0!==document.mozHidden?(Q="mozvisibilitychange",V="mozHidden"):void 0!==document.msHidden?(Q="msvisibilitychange",V="msHidden"):void 0!==document.webkitHidden&&(Q="webkitvisibilitychange",V="webkitHidden")),I.visible_=!0,Q&&document.addEventListener(Q,function(){var le=!document[V];le!==I.visible_&&(I.visible_=le,I.trigger("visible",le))},!1),I}return(0,A.ZT)(S,E),S.getInstance=function(){return new S},S.prototype.getInitialEvent=function(I){return(0,Ee.hu)("visible"===I,"Unknown event type: "+I),[this.visible_]},S}(Ke),yu=1e3,uc=function(E){function S(I,V,Q,le,ye,Oe,Ye,st){var pt=E.call(this)||this;if(pt.repoInfo_=I,pt.applicationId_=V,pt.onDataUpdate_=Q,pt.onConnectStatus_=le,pt.onServerInfoUpdate_=ye,pt.authTokenProvider_=Oe,pt.appCheckTokenProvider_=Ye,pt.authOverride_=st,pt.id=S.nextPersistentConnectionId_++,pt.log_=Di("p:"+pt.id+":"),pt.interruptReasons_={},pt.listens=new Map,pt.outstandingPuts_=[],pt.outstandingGets_=[],pt.outstandingPutCount_=0,pt.outstandingGetCount_=0,pt.onDisconnectRequestQueue_=[],pt.connected_=!1,pt.reconnectDelay_=yu,pt.maxReconnectDelay_=3e5,pt.securityDebugCallback_=null,pt.lastSessionId=null,pt.establishConnectionTimer_=null,pt.visible_=!1,pt.requestCBHash_={},pt.requestNumber_=0,pt.realtime_=null,pt.authToken_=null,pt.appCheckToken_=null,pt.forceTokenRefresh_=!1,pt.invalidAuthTokenCount_=0,pt.invalidAppCheckTokenCount_=0,pt.firstConnection_=!0,pt.lastConnectionAttemptTime_=null,pt.lastConnectionEstablishedTime_=null,st&&!(0,Ee.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Bo.getInstance().on("visible",pt.onVisible_,pt),-1===I.host.indexOf("fblocal")&&Y.getInstance().on("online",pt.onOnline_,pt),pt}return(0,A.ZT)(S,E),S.prototype.sendRequest=function(I,V,Q){var le=++this.requestNumber_,ye={r:le,a:I,b:V};this.log_((0,Ee.Pz)(ye)),(0,Ee.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(ye),Q&&(this.requestCBHash_[le]=Q)},S.prototype.get=function(I){var V=this;this.initConnection_();var Q=new Ee.BH,le={p:I._path.toString(),q:I._queryObject},ye={action:"g",request:le,onComplete:function(Ye){var st=Ye.d;"ok"===Ye.s?(V.onDataUpdate_(le.p,st,!1,null),Q.resolve(st)):Q.reject(st)}};this.outstandingGets_.push(ye),this.outstandingGetCount_++;var Oe=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var Ye=V.outstandingGets_[Oe];void 0===Ye||ye!==Ye||(delete V.outstandingGets_[Oe],V.outstandingGetCount_--,0===V.outstandingGetCount_&&(V.outstandingGets_=[]),V.log_("get "+Oe+" timed out on connection"),Q.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(Oe),Q.promise},S.prototype.listen=function(I,V,Q,le){this.initConnection_();var ye=I._queryIdentifier,Oe=I._path.toString();this.log_("Listen called for "+Oe+" "+ye),this.listens.has(Oe)||this.listens.set(Oe,new Map),(0,Ee.hu)(I._queryParams.isDefault()||!I._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Ee.hu)(!this.listens.get(Oe).has(ye),"listen() called twice for same path/queryId.");var Ye={onComplete:le,hashFn:V,query:I,tag:Q};this.listens.get(Oe).set(ye,Ye),this.connected_&&this.sendListen_(Ye)},S.prototype.sendGet_=function(I){var V=this,Q=this.outstandingGets_[I];this.sendRequest("g",Q.request,function(le){delete V.outstandingGets_[I],V.outstandingGetCount_--,0===V.outstandingGetCount_&&(V.outstandingGets_=[]),Q.onComplete&&Q.onComplete(le)})},S.prototype.sendListen_=function(I){var V=this,Q=I.query,le=Q._path.toString(),ye=Q._queryIdentifier;this.log_("Listen on "+le+" for "+ye);var Oe={p:le};I.tag&&(Oe.q=Q._queryObject,Oe.t=I.tag),Oe.h=I.hashFn(),this.sendRequest("q",Oe,function(st){var pt=st.d,Wt=st.s;S.warnOnListenWarnings_(pt,Q),(V.listens.get(le)&&V.listens.get(le).get(ye))===I&&(V.log_("listen response",st),"ok"!==Wt&&V.removeListen_(le,ye),I.onComplete&&I.onComplete(Wt,pt))})},S.warnOnListenWarnings_=function(I,V){if(I&&"object"==typeof I&&(0,Ee.r3)(I,"w")){var Q=(0,Ee.DV)(I,"w");if(Array.isArray(Q)&&~Q.indexOf("no_index")){var le='".indexOn": "'+V._queryParams.getIndex().toString()+'"',ye=V._path.toString();Ki("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+le+" at "+ye+" to your security rules for better performance.")}}},S.prototype.refreshAuthToken=function(I){this.authToken_=I,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(I)},S.prototype.reduceReconnectDelayIfAdminCredential_=function(I){(I&&40===I.length||(0,Ee.GJ)(I))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},S.prototype.refreshAppCheckToken=function(I){this.appCheckToken_=I,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},S.prototype.tryAuth=function(){var I=this;if(this.connected_&&this.authToken_){var V=this.authToken_,Q=(0,Ee.w9)(V)?"auth":"gauth",le={cred:V};null===this.authOverride_?le.noauth=!0:"object"==typeof this.authOverride_&&(le.authvar=this.authOverride_),this.sendRequest(Q,le,function(ye){var Oe=ye.s,Ye=ye.d||"error";I.authToken_===V&&("ok"===Oe?I.invalidAuthTokenCount_=0:I.onAuthRevoked_(Oe,Ye))})}},S.prototype.tryAppCheck=function(){var I=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(V){var Q=V.s,le=V.d||"error";"ok"===Q?I.invalidAppCheckTokenCount_=0:I.onAppCheckRevoked_(Q,le)})},S.prototype.unlisten=function(I,V){var Q=I._path.toString(),le=I._queryIdentifier;this.log_("Unlisten called for "+Q+" "+le),(0,Ee.hu)(I._queryParams.isDefault()||!I._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(Q,le)&&this.connected_&&this.sendUnlisten_(Q,le,I._queryObject,V)},S.prototype.sendUnlisten_=function(I,V,Q,le){this.log_("Unlisten on "+I+" for "+V);var ye={p:I};le&&(ye.q=Q,ye.t=le),this.sendRequest("n",ye)},S.prototype.onDisconnectPut=function(I,V,Q){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",I,V,Q):this.onDisconnectRequestQueue_.push({pathString:I,action:"o",data:V,onComplete:Q})},S.prototype.onDisconnectMerge=function(I,V,Q){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",I,V,Q):this.onDisconnectRequestQueue_.push({pathString:I,action:"om",data:V,onComplete:Q})},S.prototype.onDisconnectCancel=function(I,V){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",I,null,V):this.onDisconnectRequestQueue_.push({pathString:I,action:"oc",data:null,onComplete:V})},S.prototype.sendOnDisconnect_=function(I,V,Q,le){var ye={p:V,d:Q};this.log_("onDisconnect "+I,ye),this.sendRequest(I,ye,function(Oe){le&&setTimeout(function(){le(Oe.s,Oe.d)},Math.floor(0))})},S.prototype.put=function(I,V,Q,le){this.putInternal("p",I,V,Q,le)},S.prototype.merge=function(I,V,Q,le){this.putInternal("m",I,V,Q,le)},S.prototype.putInternal=function(I,V,Q,le,ye){this.initConnection_();var Oe={p:V,d:Q};void 0!==ye&&(Oe.h=ye),this.outstandingPuts_.push({action:I,request:Oe,onComplete:le}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+V)},S.prototype.sendPut_=function(I){var V=this,Q=this.outstandingPuts_[I].action,le=this.outstandingPuts_[I].request,ye=this.outstandingPuts_[I].onComplete;this.outstandingPuts_[I].queued=this.connected_,this.sendRequest(Q,le,function(Oe){V.log_(Q+" response",Oe),delete V.outstandingPuts_[I],V.outstandingPutCount_--,0===V.outstandingPutCount_&&(V.outstandingPuts_=[]),ye&&ye(Oe.s,Oe.d)})},S.prototype.reportStats=function(I){var V=this;if(this.connected_){var Q={c:I};this.log_("reportStats",Q),this.sendRequest("s",Q,function(le){"ok"!==le.s&&V.log_("reportStats","Error sending stats: "+le.d)})}},S.prototype.onDataMessage_=function(I){if("r"in I){this.log_("from server: "+(0,Ee.Pz)(I));var V=I.r,Q=this.requestCBHash_[V];Q&&(delete this.requestCBHash_[V],Q(I.b))}else{if("error"in I)throw"A server-side error has occurred: "+I.error;"a"in I&&this.onDataPush_(I.a,I.b)}},S.prototype.onDataPush_=function(I,V){this.log_("handleServerMessage",I,V),"d"===I?this.onDataUpdate_(V.p,V.d,!1,V.t):"m"===I?this.onDataUpdate_(V.p,V.d,!0,V.t):"c"===I?this.onListenRevoked_(V.p,V.q):"ac"===I?this.onAuthRevoked_(V.s,V.d):"apc"===I?this.onAppCheckRevoked_(V.s,V.d):"sd"===I?this.onSecurityDebugPacket_(V):zr("Unrecognized action received from server: "+(0,Ee.Pz)(I)+"\nAre you using the latest client?")},S.prototype.onReady_=function(I,V){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(I),this.lastSessionId=V,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},S.prototype.scheduleConnect_=function(I){var V=this;(0,Ee.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){V.establishConnectionTimer_=null,V.establishConnection_()},Math.floor(I))},S.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},S.prototype.onVisible_=function(I){I&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yu,this.realtime_||this.scheduleConnect_(0)),this.visible_=I},S.prototype.onOnline_=function(I){I?(this.log_("Browser went online."),this.reconnectDelay_=yu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},S.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var V=(new Date).getTime()-this.lastConnectionAttemptTime_,Q=Math.max(0,this.reconnectDelay_-V);Q=Math.random()*Q,this.log_("Trying to reconnect in "+Q+"ms"),this.scheduleConnect_(Q),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},S.prototype.establishConnection_=function(){return(0,A.mG)(this,void 0,void 0,function(){var I,V,Q,le,ye,Oe,Ye,st,Wt,cn,Mn,Wn,Pi,yi=this;return(0,A.Jh)(this,function(Wi){switch(Wi.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,I=this.onDataMessage_.bind(this),V=this.onReady_.bind(this),Q=this.onRealtimeDisconnect_.bind(this),le=this.id+":"+S.nextConnectionId_++,ye=this.lastSessionId,Oe=!1,Ye=null,this.realtime_={close:st=function(){Ye?Ye.close():(Oe=!0,Q())},sendRequest:function(Qo){(0,Ee.hu)(Ye,"sendRequest call when we're not connected not allowed."),Ye.sendRequest(Qo)}},Wt=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,Wi.label=1;case 1:return Wi.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(Wt),this.appCheckTokenProvider_.getToken(Wt)])];case 2:return cn=A.CR.apply(void 0,[Wi.sent(),2]),Mn=cn[0],Wn=cn[1],Oe?Vn("getToken() completed but was canceled"):(Vn("getToken() completed. Creating connection."),this.authToken_=Mn&&Mn.accessToken,this.appCheckToken_=Wn&&Wn.token,Ye=new Me(le,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,I,V,Q,function(Qo){Ki(Qo+" ("+yi.repoInfo_.toString()+")"),yi.interrupt("server_kill")},ye)),[3,4];case 3:return Pi=Wi.sent(),this.log_("Failed to get token: "+Pi),Oe||(this.repoInfo_.nodeAdmin&&Ki(Pi),st()),[3,4];case 4:return[2]}})})},S.prototype.interrupt=function(I){Vn("Interrupting connection for reason: "+I),this.interruptReasons_[I]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},S.prototype.resume=function(I){Vn("Resuming connection for reason: "+I),delete this.interruptReasons_[I],(0,Ee.xb)(this.interruptReasons_)&&(this.reconnectDelay_=yu,this.realtime_||this.scheduleConnect_(0))},S.prototype.handleTimestamp_=function(I){var V=I-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:V})},S.prototype.cancelSentTransactions_=function(){for(var I=0;I<this.outstandingPuts_.length;I++){var V=this.outstandingPuts_[I];V&&"h"in V.request&&V.queued&&(V.onComplete&&V.onComplete("disconnect"),delete this.outstandingPuts_[I],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},S.prototype.onListenRevoked_=function(I,V){var Q;Q=V?V.map(function(ye){return mi(ye)}).join("$"):"default";var le=this.removeListen_(I,Q);le&&le.onComplete&&le.onComplete("permission_denied")},S.prototype.removeListen_=function(I,V){var le,Q=new Ie(I).toString();if(this.listens.has(Q)){var ye=this.listens.get(Q);le=ye.get(V),ye.delete(V),0===ye.size&&this.listens.delete(Q)}else le=void 0;return le},S.prototype.onAuthRevoked_=function(I,V){Vn("Auth token revoked: "+I+"/"+V),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===I||"permission_denied"===I)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},S.prototype.onAppCheckRevoked_=function(I,V){Vn("App check token revoked: "+I+"/"+V),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===I||"permission_denied"===I)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},S.prototype.onSecurityDebugPacket_=function(I){this.securityDebugCallback_?this.securityDebugCallback_(I):"msg"in I&&console.log("FIREBASE: "+I.msg.replace("\n","\nFIREBASE: "))},S.prototype.restoreState_=function(){var I,V,Q,le;this.tryAuth(),this.tryAppCheck();try{for(var ye=(0,A.XA)(this.listens.values()),Oe=ye.next();!Oe.done;Oe=ye.next()){var Ye=Oe.value;try{for(var st=(Q=void 0,(0,A.XA)(Ye.values())),pt=st.next();!pt.done;pt=st.next())this.sendListen_(pt.value)}catch(Wn){Q={error:Wn}}finally{try{pt&&!pt.done&&(le=st.return)&&le.call(st)}finally{if(Q)throw Q.error}}}}catch(Wn){I={error:Wn}}finally{try{Oe&&!Oe.done&&(V=ye.return)&&V.call(ye)}finally{if(I)throw I.error}}for(var cn=0;cn<this.outstandingPuts_.length;cn++)this.outstandingPuts_[cn]&&this.sendPut_(cn);for(;this.onDisconnectRequestQueue_.length;){var Mn=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(Mn.action,Mn.pathString,Mn.data,Mn.onComplete)}for(cn=0;cn<this.outstandingGets_.length;cn++)this.outstandingGets_[cn]&&this.sendGet_(cn)},S.prototype.sendConnectStats_=function(){var I={},V="js";(0,Ee.Yr)()&&(V=this.repoInfo_.nodeAdmin?"admin_node":"node"),I["sdk."+V+"."+Be.replace(/\./g,"-")]=1,(0,Ee.uI)()?I["framework.cordova"]=1:(0,Ee.b$)()&&(I["framework.reactnative"]=1),this.reportStats(I)},S.prototype.shouldReconnect_=function(){var I=Y.getInstance().currentlyOnline();return(0,Ee.xb)(this.interruptReasons_)&&I},S.nextPersistentConnectionId_=0,S.nextConnectionId_=0,S}(ze),dr=function(){function E(S,I){this.name=S,this.node=I}return E.Wrap=function(S,I){return new E(S,I)},E}(),Lp=function(){function E(){}return E.prototype.getCompare=function(){return this.compare.bind(this)},E.prototype.indexedValueChanged=function(S,I){var V=new dr(Ht,S),Q=new dr(Ht,I);return 0!==this.compare(V,Q)},E.prototype.minPost=function(){return dr.MIN},E}(),Ud=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,A.ZT)(S,E),Object.defineProperty(S,"__EMPTY_NODE",{get:function(){return ih},set:function(I){ih=I},enumerable:!1,configurable:!0}),S.prototype.compare=function(I,V){return Yt(I.name,V.name)},S.prototype.isDefinedOn=function(I){throw(0,Ee.g5)("KeyIndex.isDefinedOn not expected to be called.")},S.prototype.indexedValueChanged=function(I,V){return!1},S.prototype.minPost=function(){return dr.MIN},S.prototype.maxPost=function(){return new dr(fn,ih)},S.prototype.makePost=function(I,V){return(0,Ee.hu)("string"==typeof I,"KeyIndex indexValue must always be a string."),new dr(I,ih)},S.prototype.toString=function(){return".key"},S}(Lp),ul=new Ud,Jh=function(){function E(S,I,V,Q,le){void 0===le&&(le=null),this.isReverse_=Q,this.resultGenerator_=le,this.nodeStack_=[];for(var ye=1;!S.isEmpty();)if(S=S,ye=I?V(S.key,I):1,Q&&(ye*=-1),ye<0)S=this.isReverse_?S.left:S.right;else{if(0===ye){this.nodeStack_.push(S);break}this.nodeStack_.push(S),S=this.isReverse_?S.right:S.left}}return E.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var I,S=this.nodeStack_.pop();if(I=this.resultGenerator_?this.resultGenerator_(S.key,S.value):{key:S.key,value:S.value},this.isReverse_)for(S=S.left;!S.isEmpty();)this.nodeStack_.push(S),S=S.right;else for(S=S.right;!S.isEmpty();)this.nodeStack_.push(S),S=S.left;return I},E.prototype.hasNext=function(){return this.nodeStack_.length>0},E.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var S=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(S.key,S.value):{key:S.key,value:S.value}},E}(),ia=function(){function E(S,I,V,Q,le){this.key=S,this.value=I,this.color=null!=V?V:E.RED,this.left=null!=Q?Q:zo.EMPTY_NODE,this.right=null!=le?le:zo.EMPTY_NODE}return E.prototype.copy=function(S,I,V,Q,le){return new E(null!=S?S:this.key,null!=I?I:this.value,null!=V?V:this.color,null!=Q?Q:this.left,null!=le?le:this.right)},E.prototype.count=function(){return this.left.count()+1+this.right.count()},E.prototype.isEmpty=function(){return!1},E.prototype.inorderTraversal=function(S){return this.left.inorderTraversal(S)||!!S(this.key,this.value)||this.right.inorderTraversal(S)},E.prototype.reverseTraversal=function(S){return this.right.reverseTraversal(S)||S(this.key,this.value)||this.left.reverseTraversal(S)},E.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},E.prototype.minKey=function(){return this.min_().key},E.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},E.prototype.insert=function(S,I,V){var Q=this,le=V(S,Q.key);return(Q=le<0?Q.copy(null,null,null,Q.left.insert(S,I,V),null):0===le?Q.copy(null,I,null,null,null):Q.copy(null,null,null,null,Q.right.insert(S,I,V))).fixUp_()},E.prototype.removeMin_=function(){if(this.left.isEmpty())return zo.EMPTY_NODE;var S=this;return!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),(S=S.copy(null,null,null,S.left.removeMin_(),null)).fixUp_()},E.prototype.remove=function(S,I){var V,Q;if(I(S,(V=this).key)<0)!V.left.isEmpty()&&!V.left.isRed_()&&!V.left.left.isRed_()&&(V=V.moveRedLeft_()),V=V.copy(null,null,null,V.left.remove(S,I),null);else{if(V.left.isRed_()&&(V=V.rotateRight_()),!V.right.isEmpty()&&!V.right.isRed_()&&!V.right.left.isRed_()&&(V=V.moveRedRight_()),0===I(S,V.key)){if(V.right.isEmpty())return zo.EMPTY_NODE;Q=V.right.min_(),V=V.copy(Q.key,Q.value,null,null,V.right.removeMin_())}V=V.copy(null,null,null,null,V.right.remove(S,I))}return V.fixUp_()},E.prototype.isRed_=function(){return this.color},E.prototype.fixUp_=function(){var S=this;return S.right.isRed_()&&!S.left.isRed_()&&(S=S.rotateLeft_()),S.left.isRed_()&&S.left.left.isRed_()&&(S=S.rotateRight_()),S.left.isRed_()&&S.right.isRed_()&&(S=S.colorFlip_()),S},E.prototype.moveRedLeft_=function(){var S=this.colorFlip_();return S.right.left.isRed_()&&(S=(S=(S=S.copy(null,null,null,null,S.right.rotateRight_())).rotateLeft_()).colorFlip_()),S},E.prototype.moveRedRight_=function(){var S=this.colorFlip_();return S.left.left.isRed_()&&(S=(S=S.rotateRight_()).colorFlip_()),S},E.prototype.rotateLeft_=function(){var S=this.copy(null,null,E.RED,null,this.right.left);return this.right.copy(null,null,this.color,S,null)},E.prototype.rotateRight_=function(){var S=this.copy(null,null,E.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,S)},E.prototype.colorFlip_=function(){var S=this.left.copy(null,null,!this.left.color,null,null),I=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,S,I)},E.prototype.checkMaxDepth_=function(){var S=this.check_();return Math.pow(2,S)<=this.count()+1},E.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var S=this.left.check_();if(S!==this.right.check_())throw new Error("Black depths differ");return S+(this.isRed_()?0:1)},E.RED=!0,E.BLACK=!1,E}(),S_=function(){function E(){}return E.prototype.copy=function(S,I,V,Q,le){return this},E.prototype.insert=function(S,I,V){return new ia(S,I,null)},E.prototype.remove=function(S,I){return this},E.prototype.count=function(){return 0},E.prototype.isEmpty=function(){return!0},E.prototype.inorderTraversal=function(S){return!1},E.prototype.reverseTraversal=function(S){return!1},E.prototype.minKey=function(){return null},E.prototype.maxKey=function(){return null},E.prototype.check_=function(){return 0},E.prototype.isRed_=function(){return!1},E}(),zo=function(){function E(S,I){void 0===I&&(I=E.EMPTY_NODE),this.comparator_=S,this.root_=I}return E.prototype.insert=function(S,I){return new E(this.comparator_,this.root_.insert(S,I,this.comparator_).copy(null,null,ia.BLACK,null,null))},E.prototype.remove=function(S){return new E(this.comparator_,this.root_.remove(S,this.comparator_).copy(null,null,ia.BLACK,null,null))},E.prototype.get=function(S){for(var I,V=this.root_;!V.isEmpty();){if(0===(I=this.comparator_(S,V.key)))return V.value;I<0?V=V.left:I>0&&(V=V.right)}return null},E.prototype.getPredecessorKey=function(S){for(var I,V=this.root_,Q=null;!V.isEmpty();){if(0===(I=this.comparator_(S,V.key))){if(V.left.isEmpty())return Q?Q.key:null;for(V=V.left;!V.right.isEmpty();)V=V.right;return V.key}I<0?V=V.left:I>0&&(Q=V,V=V.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},E.prototype.isEmpty=function(){return this.root_.isEmpty()},E.prototype.count=function(){return this.root_.count()},E.prototype.minKey=function(){return this.root_.minKey()},E.prototype.maxKey=function(){return this.root_.maxKey()},E.prototype.inorderTraversal=function(S){return this.root_.inorderTraversal(S)},E.prototype.reverseTraversal=function(S){return this.root_.reverseTraversal(S)},E.prototype.getIterator=function(S){return new Jh(this.root_,null,this.comparator_,!1,S)},E.prototype.getIteratorFrom=function(S,I){return new Jh(this.root_,S,this.comparator_,!1,I)},E.prototype.getReverseIteratorFrom=function(S,I){return new Jh(this.root_,S,this.comparator_,!0,I)},E.prototype.getReverseIterator=function(S){return new Jh(this.root_,null,this.comparator_,!0,S)},E.EMPTY_NODE=new S_,E}();function Hd(E,S){return Yt(E.name,S.name)}function hl(E,S){return Yt(E,S)}var oh,sh,ah,Kh,uh,dl=function(E){return"number"==typeof E?"number:"+Hn(E):"string:"+E},rh=function(E){if(E.isLeafNode()){var S=E.val();(0,Ee.hu)("string"==typeof S||"number"==typeof S||"object"==typeof S&&(0,Ee.r3)(S,".sv"),"Priority must be a string or number.")}else(0,Ee.hu)(E===bu||E.isEmpty(),"priority of unexpected type.");(0,Ee.hu)(E===bu||E.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Zi=function(){function E(S,I){void 0===I&&(I=E.__childrenNodeConstructor.EMPTY_NODE),this.value_=S,this.priorityNode_=I,this.lazyHash_=null,(0,Ee.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),rh(this.priorityNode_)}return Object.defineProperty(E,"__childrenNodeConstructor",{get:function(){return oh},set:function(S){oh=S},enumerable:!1,configurable:!0}),E.prototype.isLeafNode=function(){return!0},E.prototype.getPriority=function(){return this.priorityNode_},E.prototype.updatePriority=function(S){return new E(this.value_,S)},E.prototype.getImmediateChild=function(S){return".priority"===S?this.priorityNode_:E.__childrenNodeConstructor.EMPTY_NODE},E.prototype.getChild=function(S){return ei(S)?this:".priority"===Nt(S)?this.priorityNode_:E.__childrenNodeConstructor.EMPTY_NODE},E.prototype.hasChild=function(){return!1},E.prototype.getPredecessorChildName=function(S,I){return null},E.prototype.updateImmediateChild=function(S,I){return".priority"===S?this.updatePriority(I):I.isEmpty()&&".priority"!==S?this:E.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(S,I).updatePriority(this.priorityNode_)},E.prototype.updateChild=function(S,I){var V=Nt(S);return null===V?I:I.isEmpty()&&".priority"!==V?this:((0,Ee.hu)(".priority"!==V||1===St(S),".priority must be the last token in a path"),this.updateImmediateChild(V,E.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xt(S),I)))},E.prototype.isEmpty=function(){return!1},E.prototype.numChildren=function(){return 0},E.prototype.forEachChild=function(S,I){return!1},E.prototype.val=function(S){return S&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},E.prototype.hash=function(){if(null===this.lazyHash_){var S="";this.priorityNode_.isEmpty()||(S+="priority:"+dl(this.priorityNode_.val())+":");var I=typeof this.value_;S+=I+":",S+="number"===I?Hn(this.value_):this.value_,this.lazyHash_=Rn(S)}return this.lazyHash_},E.prototype.getValue=function(){return this.value_},E.prototype.compareTo=function(S){return S===E.__childrenNodeConstructor.EMPTY_NODE?1:S instanceof E.__childrenNodeConstructor?-1:((0,Ee.hu)(S.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(S))},E.prototype.compareToLeafNode_=function(S){var I=typeof S.value_,V=typeof this.value_,Q=E.VALUE_TYPE_ORDER.indexOf(I),le=E.VALUE_TYPE_ORDER.indexOf(V);return(0,Ee.hu)(Q>=0,"Unknown leaf type: "+I),(0,Ee.hu)(le>=0,"Unknown leaf type: "+V),Q===le?"object"===V?0:this.value_<S.value_?-1:this.value_===S.value_?0:1:le-Q},E.prototype.withIndex=function(){return this},E.prototype.isIndexed=function(){return!0},E.prototype.equals=function(S){return S===this||!!S.isLeafNode()&&(this.value_===S.value_&&this.priorityNode_.equals(S.priorityNode_))},E.VALUE_TYPE_ORDER=["object","boolean","number","string"],E}(),ui=new(function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,A.ZT)(S,E),S.prototype.compare=function(I,V){var Q=I.node.getPriority(),le=V.node.getPriority(),ye=Q.compareTo(le);return 0===ye?Yt(I.name,V.name):ye},S.prototype.isDefinedOn=function(I){return!I.getPriority().isEmpty()},S.prototype.indexedValueChanged=function(I,V){return!I.getPriority().equals(V.getPriority())},S.prototype.minPost=function(){return dr.MIN},S.prototype.maxPost=function(){return new dr(fn,new Zi("[PRIORITY-POST]",ah))},S.prototype.makePost=function(I,V){var Q=sh(I);return new dr(V,new Zi("[PRIORITY-POST]",Q))},S.prototype.toString=function(){return".priority"},S}(Lp)),lh=Math.log(2),xu=function(){function E(S){this.count=parseInt(Math.log(S+1)/lh,10),this.current_=this.count-1;var Q=parseInt(Array(this.count+1).join("1"),2);this.bits_=S+1&Q}return E.prototype.nextBitIsOne=function(){var S=!(this.bits_&1<<this.current_);return this.current_--,S},E}(),ch=function(E,S,I,V){E.sort(S);var Q=function(Ye,st){var Wt,cn,pt=st-Ye;if(0===pt)return null;if(1===pt)return Wt=E[Ye],cn=I?I(Wt):Wt,new ia(cn,Wt.node,ia.BLACK,null,null);var Mn=parseInt(pt/2,10)+Ye,Wn=Q(Ye,Mn),Pi=Q(Mn+1,st);return Wt=E[Mn],cn=I?I(Wt):Wt,new ia(cn,Wt.node,ia.BLACK,Wn,Pi)},Oe=function(Ye){for(var st=null,pt=null,Wt=E.length,cn=function(Wi,Qo){var Ml=Wt-Wi,_d=Wt;Wt-=Wi;var lf=Q(Ml+1,_d),vo=E[Ml],Qa=I?I(vo):vo;Mn(new ia(Qa,vo.node,Qo,null,lf))},Mn=function(Wi){st?(st.left=Wi,st=Wi):(pt=Wi,st=Wi)},Wn=0;Wn<Ye.count;++Wn){var Pi=Ye.nextBitIsOne(),yi=Math.pow(2,Ye.count-(Wn+1));Pi?cn(yi,ia.BLACK):(cn(yi,ia.BLACK),cn(yi,ia.RED))}return pt}(new xu(E.length));return new zo(V||S,Oe)},Bl={},Xr=function(){function E(S,I){this.indexes_=S,this.indexSet_=I}return Object.defineProperty(E,"Default",{get:function(){return(0,Ee.hu)(Bl&&ui,"ChildrenNode.ts has not been loaded"),Kh=Kh||new E({".priority":Bl},{".priority":ui})},enumerable:!1,configurable:!0}),E.prototype.get=function(S){var I=(0,Ee.DV)(this.indexes_,S);if(!I)throw new Error("No index defined for "+S);return I instanceof zo?I:null},E.prototype.hasIndex=function(S){return(0,Ee.r3)(this.indexSet_,S.toString())},E.prototype.addIndex=function(S,I){(0,Ee.hu)(S!==ul,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var V=[],Q=!1,le=I.getIterator(dr.Wrap),ye=le.getNext();ye;)Q=Q||S.isDefinedOn(ye.node),V.push(ye),ye=le.getNext();var Oe;Oe=Q?ch(V,S.getCompare()):Bl;var Ye=S.toString(),st=(0,A.pi)({},this.indexSet_);st[Ye]=S;var pt=(0,A.pi)({},this.indexes_);return pt[Ye]=Oe,new E(pt,st)},E.prototype.addToIndexes=function(S,I){var V=this;return new E((0,Ee.UI)(this.indexes_,function(le,ye){var Oe=(0,Ee.DV)(V.indexSet_,ye);if((0,Ee.hu)(Oe,"Missing index implementation for "+ye),le===Bl){if(Oe.isDefinedOn(S.node)){for(var Ye=[],st=I.getIterator(dr.Wrap),pt=st.getNext();pt;)pt.name!==S.name&&Ye.push(pt),pt=st.getNext();return Ye.push(S),ch(Ye,Oe.getCompare())}return Bl}var Wt=I.get(S.name),cn=le;return Wt&&(cn=cn.remove(new dr(S.name,Wt))),cn.insert(S,S.node)}),this.indexSet_)},E.prototype.removeFromIndexes=function(S,I){return new E((0,Ee.UI)(this.indexes_,function(Q){if(Q===Bl)return Q;var le=I.get(S.name);return le?Q.remove(new dr(S.name,le)):Q}),this.indexSet_)},E}(),Ii=function(){function E(S,I,V){this.children_=S,this.priorityNode_=I,this.indexMap_=V,this.lazyHash_=null,this.priorityNode_&&rh(this.priorityNode_),this.children_.isEmpty()&&(0,Ee.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(E,"EMPTY_NODE",{get:function(){return uh||(uh=new E(new zo(hl),null,Xr.Default))},enumerable:!1,configurable:!0}),E.prototype.isLeafNode=function(){return!1},E.prototype.getPriority=function(){return this.priorityNode_||uh},E.prototype.updatePriority=function(S){return this.children_.isEmpty()?this:new E(this.children_,S,this.indexMap_)},E.prototype.getImmediateChild=function(S){if(".priority"===S)return this.getPriority();var I=this.children_.get(S);return null===I?uh:I},E.prototype.getChild=function(S){var I=Nt(S);return null===I?this:this.getImmediateChild(I).getChild(Xt(S))},E.prototype.hasChild=function(S){return null!==this.children_.get(S)},E.prototype.updateImmediateChild=function(S,I){if((0,Ee.hu)(I,"We should always be passing snapshot nodes"),".priority"===S)return this.updatePriority(I);var V=new dr(S,I),Q=void 0,le=void 0;I.isEmpty()?(Q=this.children_.remove(S),le=this.indexMap_.removeFromIndexes(V,this.children_)):(Q=this.children_.insert(S,I),le=this.indexMap_.addToIndexes(V,this.children_));var ye=Q.isEmpty()?uh:this.priorityNode_;return new E(Q,ye,le)},E.prototype.updateChild=function(S,I){var V=Nt(S);if(null===V)return I;(0,Ee.hu)(".priority"!==Nt(S)||1===St(S),".priority must be the last token in a path");var Q=this.getImmediateChild(V).updateChild(Xt(S),I);return this.updateImmediateChild(V,Q)},E.prototype.isEmpty=function(){return this.children_.isEmpty()},E.prototype.numChildren=function(){return this.children_.count()},E.prototype.val=function(S){if(this.isEmpty())return null;var I={},V=0,Q=0,le=!0;if(this.forEachChild(ui,function(Ye,st){I[Ye]=st.val(S),V++,le&&E.INTEGER_REGEXP_.test(Ye)?Q=Math.max(Q,Number(Ye)):le=!1}),!S&&le&&Q<2*V){var ye=[];for(var Oe in I)ye[Oe]=I[Oe];return ye}return S&&!this.getPriority().isEmpty()&&(I[".priority"]=this.getPriority().val()),I},E.prototype.hash=function(){if(null===this.lazyHash_){var S="";this.getPriority().isEmpty()||(S+="priority:"+dl(this.getPriority().val())+":"),this.forEachChild(ui,function(I,V){var Q=V.hash();""!==Q&&(S+=":"+I+":"+Q)}),this.lazyHash_=""===S?"":Rn(S)}return this.lazyHash_},E.prototype.getPredecessorChildName=function(S,I,V){var Q=this.resolveIndex_(V);if(Q){var le=Q.getPredecessorKey(new dr(S,I));return le?le.name:null}return this.children_.getPredecessorKey(S)},E.prototype.getFirstChildName=function(S){var I=this.resolveIndex_(S);if(I){var V=I.minKey();return V&&V.name}return this.children_.minKey()},E.prototype.getFirstChild=function(S){var I=this.getFirstChildName(S);return I?new dr(I,this.children_.get(I)):null},E.prototype.getLastChildName=function(S){var I=this.resolveIndex_(S);if(I){var V=I.maxKey();return V&&V.name}return this.children_.maxKey()},E.prototype.getLastChild=function(S){var I=this.getLastChildName(S);return I?new dr(I,this.children_.get(I)):null},E.prototype.forEachChild=function(S,I){var V=this.resolveIndex_(S);return V?V.inorderTraversal(function(Q){return I(Q.name,Q.node)}):this.children_.inorderTraversal(I)},E.prototype.getIterator=function(S){return this.getIteratorFrom(S.minPost(),S)},E.prototype.getIteratorFrom=function(S,I){var V=this.resolveIndex_(I);if(V)return V.getIteratorFrom(S,function(ye){return ye});for(var Q=this.children_.getIteratorFrom(S.name,dr.Wrap),le=Q.peek();null!=le&&I.compare(le,S)<0;)Q.getNext(),le=Q.peek();return Q},E.prototype.getReverseIterator=function(S){return this.getReverseIteratorFrom(S.maxPost(),S)},E.prototype.getReverseIteratorFrom=function(S,I){var V=this.resolveIndex_(I);if(V)return V.getReverseIteratorFrom(S,function(ye){return ye});for(var Q=this.children_.getReverseIteratorFrom(S.name,dr.Wrap),le=Q.peek();null!=le&&I.compare(le,S)>0;)Q.getNext(),le=Q.peek();return Q},E.prototype.compareTo=function(S){return this.isEmpty()?S.isEmpty()?0:-1:S.isLeafNode()||S.isEmpty()?1:S===Pr?-1:0},E.prototype.withIndex=function(S){if(S===ul||this.indexMap_.hasIndex(S))return this;var I=this.indexMap_.addIndex(S,this.children_);return new E(this.children_,this.priorityNode_,I)},E.prototype.isIndexed=function(S){return S===ul||this.indexMap_.hasIndex(S)},E.prototype.equals=function(S){if(S===this)return!0;if(S.isLeafNode())return!1;var I=S;if(this.getPriority().equals(I.getPriority())){if(this.children_.count()===I.children_.count()){for(var V=this.getIterator(ui),Q=I.getIterator(ui),le=V.getNext(),ye=Q.getNext();le&&ye;){if(le.name!==ye.name||!le.node.equals(ye.node))return!1;le=V.getNext(),ye=Q.getNext()}return null===le&&null===ye}return!1}return!1},E.prototype.resolveIndex_=function(S){return S===ul?null:this.indexMap_.get(S.toString())},E.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,E}(),Pr=new(function(E){function S(){return E.call(this,new zo(hl),Ii.EMPTY_NODE,Xr.Default)||this}return(0,A.ZT)(S,E),S.prototype.compareTo=function(I){return I===this?0:1},S.prototype.equals=function(I){return I===this},S.prototype.getPriority=function(){return this},S.prototype.getImmediateChild=function(I){return Ii.EMPTY_NODE},S.prototype.isEmpty=function(){return!1},S}(Ii));function oo(E,S){if(void 0===S&&(S=null),null===E)return Ii.EMPTY_NODE;if("object"==typeof E&&".priority"in E&&(S=E[".priority"]),(0,Ee.hu)(null===S||"string"==typeof S||"number"==typeof S||"object"==typeof S&&".sv"in S,"Invalid priority type found: "+typeof S),"object"==typeof E&&".value"in E&&null!==E[".value"]&&(E=E[".value"]),"object"!=typeof E||".sv"in E)return new Zi(E,oo(S));if(E instanceof Array){var Ye=Ii.EMPTY_NODE;return ii(E,function(st,pt){if((0,Ee.r3)(E,st)&&"."!==st.substring(0,1)){var Wt=oo(pt);(Wt.isLeafNode()||!Wt.isEmpty())&&(Ye=Ye.updateImmediateChild(st,Wt))}}),Ye.updatePriority(oo(S))}var V=[],Q=!1;if(ii(E,function(st,pt){if("."!==st.substring(0,1)){var Wt=oo(pt);Wt.isEmpty()||(Q=Q||!Wt.getPriority().isEmpty(),V.push(new dr(st,Wt)))}}),0===V.length)return Ii.EMPTY_NODE;var ye=ch(V,Hd,function(st){return st.name},hl);if(Q){var Oe=ch(V,ui.getCompare());return new Ii(ye,oo(S),new Xr({".priority":Oe},{".priority":ui}))}return new Ii(ye,oo(S),Xr.Default)}Object.defineProperties(dr,{MIN:{value:new dr(Ht,Ii.EMPTY_NODE)},MAX:{value:new dr(fn,Pr)}}),Ud.__EMPTY_NODE=Ii.EMPTY_NODE,Zi.__childrenNodeConstructor=Ii,function(E){bu=E}(Pr),function(E){ah=E}(Pr),function(E){sh=E}(oo);var Fc=function(E){function S(I){var V=E.call(this)||this;return V.indexPath_=I,(0,Ee.hu)(!ei(I)&&".priority"!==Nt(I),"Can't create PathIndex with empty path or .priority key"),V}return(0,A.ZT)(S,E),S.prototype.extractChild=function(I){return I.getChild(this.indexPath_)},S.prototype.isDefinedOn=function(I){return!I.getChild(this.indexPath_).isEmpty()},S.prototype.compare=function(I,V){var Q=this.extractChild(I.node),le=this.extractChild(V.node),ye=Q.compareTo(le);return 0===ye?Yt(I.name,V.name):ye},S.prototype.makePost=function(I,V){var Q=oo(I),le=Ii.EMPTY_NODE.updateChild(this.indexPath_,Q);return new dr(V,le)},S.prototype.maxPost=function(){var I=Ii.EMPTY_NODE.updateChild(this.indexPath_,Pr);return new dr(fn,I)},S.prototype.toString=function(){return Kn(this.indexPath_,0).join("/")},S}(Lp),hh=new(function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,A.ZT)(S,E),S.prototype.compare=function(I,V){var Q=I.node.compareTo(V.node);return 0===Q?Yt(I.name,V.name):Q},S.prototype.isDefinedOn=function(I){return!0},S.prototype.indexedValueChanged=function(I,V){return!I.equals(V)},S.prototype.minPost=function(){return dr.MIN},S.prototype.maxPost=function(){return dr.MAX},S.prototype.makePost=function(I,V){var Q=oo(I);return new dr(V,Q)},S.prototype.toString=function(){return".value"},S}(Lp)),Aa="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qd=function(){var E=0,S=[];return function(I){var V=I===E;E=I;var Q,le=new Array(8);for(Q=7;Q>=0;Q--)le[Q]=Aa.charAt(I%64),I=Math.floor(I/64);(0,Ee.hu)(0===I,"Cannot push at time == 0");var ye=le.join("");if(V){for(Q=11;Q>=0&&63===S[Q];Q--)S[Q]=0;S[Q]++}else for(Q=0;Q<12;Q++)S[Q]=Math.floor(64*Math.random());for(Q=0;Q<12;Q++)ye+=Aa.charAt(S[Q]);return(0,Ee.hu)(20===ye.length,"nextPushId: Length should be 20."),ye}}(),Lc=function(E){if(E===""+fr)return"-";var S=io(E);if(null!=S)return""+(S+1);for(var I=new Array(E.length),V=0;V<I.length;V++)I[V]=E.charAt(V);if(I.length<786)return I.push("-"),I.join("");for(var Q=I.length-1;Q>=0&&"z"===I[Q];)Q--;if(-1===Q)return fn;var ye=Aa.charAt(Aa.indexOf(I[Q])+1);return I[Q]=ye,I.slice(0,Q+1).join("")},za=function(E){if(E===""+Do)return Ht;var S=io(E);if(null!=S)return""+(S-1);for(var I=new Array(E.length),V=0;V<I.length;V++)I[V]=E.charAt(V);return"-"===I[I.length-1]?1===I.length?""+fr:(delete I[I.length-1],I.join("")):(I[I.length-1]=Aa.charAt(Aa.indexOf(I[I.length-1])-1),I.join("")+"z".repeat(786-I.length))};function ed(E){return{type:"value",snapshotNode:E}}function Va(E,S){return{type:"child_added",snapshotNode:S,childName:E}}function bi(E,S){return{type:"child_removed",snapshotNode:S,childName:E}}function wu(E,S,I){return{type:"child_changed",snapshotNode:S,childName:E,oldSnap:I}}var Cu=function(){function E(S){this.index_=S}return E.prototype.updateChild=function(S,I,V,Q,le,ye){(0,Ee.hu)(S.isIndexed(this.index_),"A node must be indexed if only a child is updated");var Oe=S.getImmediateChild(I);return Oe.getChild(Q).equals(V.getChild(Q))&&Oe.isEmpty()===V.isEmpty()||(null!=ye&&(V.isEmpty()?S.hasChild(I)?ye.trackChildChange(bi(I,Oe)):(0,Ee.hu)(S.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Oe.isEmpty()?ye.trackChildChange(Va(I,V)):ye.trackChildChange(wu(I,V,Oe))),S.isLeafNode()&&V.isEmpty())?S:S.updateImmediateChild(I,V).withIndex(this.index_)},E.prototype.updateFullNode=function(S,I,V){return null!=V&&(S.isLeafNode()||S.forEachChild(ui,function(Q,le){I.hasChild(Q)||V.trackChildChange(bi(Q,le))}),I.isLeafNode()||I.forEachChild(ui,function(Q,le){if(S.hasChild(Q)){var ye=S.getImmediateChild(Q);ye.equals(le)||V.trackChildChange(wu(Q,le,ye))}else V.trackChildChange(Va(Q,le))})),I.withIndex(this.index_)},E.prototype.updatePriority=function(S,I){return S.isEmpty()?Ii.EMPTY_NODE:S.updatePriority(I)},E.prototype.filtersNodes=function(){return!1},E.prototype.getIndexedFilter=function(){return this},E.prototype.getIndex=function(){return this.index_},E}(),Zd=function(){function E(S){this.indexedFilter_=new Cu(S.getIndex()),this.index_=S.getIndex(),this.startPost_=E.getStartPost_(S),this.endPost_=E.getEndPost_(S)}return E.prototype.getStartPost=function(){return this.startPost_},E.prototype.getEndPost=function(){return this.endPost_},E.prototype.matches=function(S){return this.index_.compare(this.getStartPost(),S)<=0&&this.index_.compare(S,this.getEndPost())<=0},E.prototype.updateChild=function(S,I,V,Q,le,ye){return this.matches(new dr(I,V))||(V=Ii.EMPTY_NODE),this.indexedFilter_.updateChild(S,I,V,Q,le,ye)},E.prototype.updateFullNode=function(S,I,V){I.isLeafNode()&&(I=Ii.EMPTY_NODE);var Q=I.withIndex(this.index_);Q=Q.updatePriority(Ii.EMPTY_NODE);var le=this;return I.forEachChild(ui,function(ye,Oe){le.matches(new dr(ye,Oe))||(Q=Q.updateImmediateChild(ye,Ii.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(S,Q,V)},E.prototype.updatePriority=function(S,I){return S},E.prototype.filtersNodes=function(){return!0},E.prototype.getIndexedFilter=function(){return this.indexedFilter_},E.prototype.getIndex=function(){return this.index_},E.getStartPost_=function(S){if(S.hasStart()){var I=S.getIndexStartName();return S.getIndex().makePost(S.getIndexStartValue(),I)}return S.getIndex().minPost()},E.getEndPost_=function(S){if(S.hasEnd()){var I=S.getIndexEndName();return S.getIndex().makePost(S.getIndexEndValue(),I)}return S.getIndex().maxPost()},E}(),Df=function(){function E(S){this.rangedFilter_=new Zd(S),this.index_=S.getIndex(),this.limit_=S.getLimit(),this.reverse_=!S.isViewFromLeft()}return E.prototype.updateChild=function(S,I,V,Q,le,ye){return this.rangedFilter_.matches(new dr(I,V))||(V=Ii.EMPTY_NODE),S.getImmediateChild(I).equals(V)?S:S.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(S,I,V,Q,le,ye):this.fullLimitUpdateChild_(S,I,V,le,ye)},E.prototype.updateFullNode=function(S,I,V){var Q;if(I.isLeafNode()||I.isEmpty())Q=Ii.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<I.numChildren()&&I.isIndexed(this.index_)){Q=Ii.EMPTY_NODE.withIndex(this.index_);var le=void 0;le=this.reverse_?I.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):I.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var ye=0;le.hasNext()&&ye<this.limit_;){var Oe=le.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),Oe)<=0:this.index_.compare(Oe,this.rangedFilter_.getEndPost())<=0))break;Q=Q.updateImmediateChild(Oe.name,Oe.node),ye++}}else{Q=(Q=I.withIndex(this.index_)).updatePriority(Ii.EMPTY_NODE);var st=void 0,pt=void 0,Wt=void 0;if(le=void 0,this.reverse_){le=Q.getReverseIterator(this.index_),st=this.rangedFilter_.getEndPost(),pt=this.rangedFilter_.getStartPost();var cn=this.index_.getCompare();Wt=function(yi,Wi){return cn(Wi,yi)}}else le=Q.getIterator(this.index_),st=this.rangedFilter_.getStartPost(),pt=this.rangedFilter_.getEndPost(),Wt=this.index_.getCompare();ye=0;for(var Mn=!1;le.hasNext();)Oe=le.getNext(),!Mn&&Wt(st,Oe)<=0&&(Mn=!0),Mn&&ye<this.limit_&&Wt(Oe,pt)<=0?ye++:Q=Q.updateImmediateChild(Oe.name,Ii.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(S,Q,V)},E.prototype.updatePriority=function(S,I){return S},E.prototype.filtersNodes=function(){return!0},E.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},E.prototype.getIndex=function(){return this.index_},E.prototype.fullLimitUpdateChild_=function(S,I,V,Q,le){var ye;if(this.reverse_){var Oe=this.index_.getCompare();ye=function(Qo,Ml){return Oe(Ml,Qo)}}else ye=this.index_.getCompare();var Ye=S;(0,Ee.hu)(Ye.numChildren()===this.limit_,"");var st=new dr(I,V),pt=this.reverse_?Ye.getFirstChild(this.index_):Ye.getLastChild(this.index_),Wt=this.rangedFilter_.matches(st);if(Ye.hasChild(I)){for(var cn=Ye.getImmediateChild(I),Mn=Q.getChildAfterChild(this.index_,pt,this.reverse_);null!=Mn&&(Mn.name===I||Ye.hasChild(Mn.name));)Mn=Q.getChildAfterChild(this.index_,Mn,this.reverse_);var Wn=null==Mn?1:ye(Mn,st);if(Wt&&!V.isEmpty()&&Wn>=0)return null!=le&&le.trackChildChange(wu(I,V,cn)),Ye.updateImmediateChild(I,V);null!=le&&le.trackChildChange(bi(I,cn));var yi=Ye.updateImmediateChild(I,Ii.EMPTY_NODE);return null!=Mn&&this.rangedFilter_.matches(Mn)?(null!=le&&le.trackChildChange(Va(Mn.name,Mn.node)),yi.updateImmediateChild(Mn.name,Mn.node)):yi}return V.isEmpty()?S:Wt&&ye(pt,st)>=0?(null!=le&&(le.trackChildChange(bi(pt.name,pt.node)),le.trackChildChange(Va(I,V))),Ye.updateImmediateChild(I,V).updateImmediateChild(pt.name,Ii.EMPTY_NODE)):S},E}(),Su=function(){function E(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ui}return E.prototype.hasStart=function(){return this.startSet_},E.prototype.hasStartAfter=function(){return this.startAfterSet_},E.prototype.hasEndBefore=function(){return this.endBeforeSet_},E.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},E.prototype.getIndexStartValue=function(){return(0,Ee.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},E.prototype.getIndexStartName=function(){return(0,Ee.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ht},E.prototype.hasEnd=function(){return this.endSet_},E.prototype.getIndexEndValue=function(){return(0,Ee.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},E.prototype.getIndexEndName=function(){return(0,Ee.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fn},E.prototype.hasLimit=function(){return this.limitSet_},E.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},E.prototype.getLimit=function(){return(0,Ee.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},E.prototype.getIndex=function(){return this.index_},E.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},E.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ui},E.prototype.copy=function(){var S=new E;return S.limitSet_=this.limitSet_,S.limit_=this.limit_,S.startSet_=this.startSet_,S.indexStartValue_=this.indexStartValue_,S.startNameSet_=this.startNameSet_,S.indexStartName_=this.indexStartName_,S.endSet_=this.endSet_,S.indexEndValue_=this.indexEndValue_,S.endNameSet_=this.endNameSet_,S.indexEndName_=this.indexEndName_,S.index_=this.index_,S.viewFrom_=this.viewFrom_,S},E}();function td(E,S,I){var V=E.copy();return V.startSet_=!0,void 0===S&&(S=null),V.indexStartValue_=S,null!=I?(V.startNameSet_=!0,V.indexStartName_=I):(V.startNameSet_=!1,V.indexStartName_=""),V}function nd(E,S,I){var V=E.copy();return V.endSet_=!0,void 0===S&&(S=null),V.indexEndValue_=S,void 0!==I?(V.endNameSet_=!0,V.indexEndName_=I):(V.endNameSet_=!1,V.indexEndName_=""),V}function ds(E,S){var I=E.copy();return I.index_=S,I}function pl(E){var I,S={};return E.isDefault()||(E.index_===ui?I="$priority":E.index_===hh?I="$value":E.index_===ul?I="$key":((0,Ee.hu)(E.index_ instanceof Fc,"Unrecognized index type!"),I=E.index_.toString()),S.orderBy=(0,Ee.Pz)(I),E.startSet_&&(S.startAt=(0,Ee.Pz)(E.indexStartValue_),E.startNameSet_&&(S.startAt+=","+(0,Ee.Pz)(E.indexStartName_))),E.endSet_&&(S.endAt=(0,Ee.Pz)(E.indexEndValue_),E.endNameSet_&&(S.endAt+=","+(0,Ee.Pz)(E.indexEndName_))),E.limitSet_&&(E.isViewFromLeft()?S.limitToFirst=E.limit_:S.limitToLast=E.limit_)),S}function ph(E){var S={};if(E.startSet_&&(S.sp=E.indexStartValue_,E.startNameSet_&&(S.sn=E.indexStartName_)),E.endSet_&&(S.ep=E.indexEndValue_,E.endNameSet_&&(S.en=E.indexEndName_)),E.limitSet_){S.l=E.limit_;var I=E.viewFrom_;""===I&&(I=E.isViewFromLeft()?"l":"r"),S.vf=I}return E.index_!==ui&&(S.i=E.index_.toString()),S}var Qm=function(E){function S(I,V,Q,le){var ye=E.call(this)||this;return ye.repoInfo_=I,ye.onDataUpdate_=V,ye.authTokenProvider_=Q,ye.appCheckTokenProvider_=le,ye.log_=Di("p:rest:"),ye.listens_={},ye}return(0,A.ZT)(S,E),S.prototype.reportStats=function(I){throw new Error("Method not implemented.")},S.getListenId_=function(I,V){return void 0!==V?"tag$"+V:((0,Ee.hu)(I._queryParams.isDefault(),"should have a tag if it's not a default query."),I._path.toString())},S.prototype.listen=function(I,V,Q,le){var ye=this,Oe=I._path.toString();this.log_("Listen called for "+Oe+" "+I._queryIdentifier);var Ye=S.getListenId_(I,Q),st={};this.listens_[Ye]=st;var pt=pl(I._queryParams);this.restRequest_(Oe+".json",pt,function(Wt,cn){var Mn=cn;404===Wt&&(Mn=null,Wt=null),null===Wt&&ye.onDataUpdate_(Oe,Mn,!1,Q),(0,Ee.DV)(ye.listens_,Ye)===st&&le(Wt?401===Wt?"permission_denied":"rest_error:"+Wt:"ok",null)})},S.prototype.unlisten=function(I,V){var Q=S.getListenId_(I,V);delete this.listens_[Q]},S.prototype.get=function(I){var V=this,Q=pl(I._queryParams),le=I._path.toString(),ye=new Ee.BH;return this.restRequest_(le+".json",Q,function(Oe,Ye){var st=Ye;404===Oe&&(st=null,Oe=null),null===Oe?(V.onDataUpdate_(le,st,!1,null),ye.resolve(st)):ye.reject(new Error(st))}),ye.promise},S.prototype.refreshAuthToken=function(I){},S.prototype.restRequest_=function(I,V,Q){var le=this;return void 0===V&&(V={}),V.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(ye){var Oe=(0,A.CR)(ye,2),Ye=Oe[0],st=Oe[1];Ye&&Ye.accessToken&&(V.auth=Ye.accessToken),st&&st.token&&(V.ac=st.token);var pt=(le.repoInfo_.secure?"https://":"http://")+le.repoInfo_.host+I+"?ns="+le.repoInfo_.namespace+(0,Ee.xO)(V);le.log_("Sending REST request for "+pt);var Wt=new XMLHttpRequest;Wt.onreadystatechange=function(){if(Q&&4===Wt.readyState){le.log_("REST Response for "+pt+" received. status:",Wt.status,"response:",Wt.responseText);var cn=null;if(Wt.status>=200&&Wt.status<300){try{cn=(0,Ee.cI)(Wt.responseText)}catch(Mn){Ki("Failed to parse JSON response for "+pt+": "+Wt.responseText)}Q(null,cn)}else 401!==Wt.status&&404!==Wt.status&&Ki("Got unsuccessful REST response for "+pt+" Status: "+Wt.status),Q(Wt.status);Q=null}},Wt.open("GET",pt,!0),Wt.send()})},S}(ze),zp=function(){function E(){this.rootNode_=Ii.EMPTY_NODE}return E.prototype.getNode=function(S){return this.rootNode_.getChild(S)},E.prototype.updateSnapshot=function(S,I){this.rootNode_=this.rootNode_.updateChild(S,I)},E}();function oa(){return{value:null,children:new Map}}function fl(E,S,I){if(ei(S))E.value=I,E.children.clear();else if(null!==E.value)E.value=E.value.updateChild(S,I);else{var V=Nt(S);E.children.has(V)||E.children.set(V,oa()),fl(E.children.get(V),S=Xt(S),I)}}function so(E,S){if(ei(S))return E.value=null,E.children.clear(),!0;if(null!==E.value){if(E.value.isLeafNode())return!1;var I=E.value;return E.value=null,I.forEachChild(ui,function(le,ye){fl(E,new Ie(le),ye)}),so(E,S)}if(E.children.size>0){var V=Nt(S);return S=Xt(S),E.children.has(V)&&so(E.children.get(V),S)&&E.children.delete(V),0===E.children.size}return!0}function Wo(E,S,I){null!==E.value?I(S,E.value):function(E,S){E.children.forEach(function(I,V){S(V,I)})}(E,function(V,Q){Wo(Q,new Ie(S.toString()+"/"+V),I)})}var Ha=function(){function E(S){this.collection_=S,this.last_=null}return E.prototype.get=function(){var S=this.collection_.get(),I=(0,A.pi)({},S);return this.last_&&ii(this.last_,function(V,Q){I[V]=I[V]-Q}),this.last_=S,I},E}(),Up=function(){function E(S,I){this.server_=I,this.statsToReport_={},this.statsListener_=new Ha(S);var V=1e4+2e4*Math.random();Ri(this.reportStats_.bind(this),Math.floor(V))}return E.prototype.reportStats_=function(){var S=this,I=this.statsListener_.get(),V={},Q=!1;ii(I,function(le,ye){ye>0&&(0,Ee.r3)(S.statsToReport_,le)&&(V[le]=ye,Q=!0)}),Q&&this.server_.reportStats(V),Ri(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},E}(),js=(()=>(function(E){E[E.OVERWRITE=0]="OVERWRITE",E[E.MERGE=1]="MERGE",E[E.ACK_USER_WRITE=2]="ACK_USER_WRITE",E[E.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(js||(js={})),js))();function Eu(E){return{fromUser:!1,fromServer:!0,queryId:E,tagged:!0}}var Wd=function(){function E(S,I,V){this.path=S,this.affectedTree=I,this.revert=V,this.type=js.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return E.prototype.operationForChild=function(S){if(ei(this.path)){if(null!=this.affectedTree.value)return(0,Ee.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var I=this.affectedTree.subtree(new Ie(S));return new E(Je(),I,this.revert)}return(0,Ee.hu)(Nt(this.path)===S,"operationForChild called for unrelated child."),new E(Xt(this.path),this.affectedTree,this.revert)},E}(),ka=function(){function E(S,I){this.source=S,this.path=I,this.type=js.LISTEN_COMPLETE}return E.prototype.operationForChild=function(S){return ei(this.path)?new E(this.source,Je()):new E(this.source,Xt(this.path))},E}(),ml=function(){function E(S,I,V){this.source=S,this.path=I,this.snap=V,this.type=js.OVERWRITE}return E.prototype.operationForChild=function(S){return ei(this.path)?new E(this.source,Je(),this.snap.getImmediateChild(S)):new E(this.source,Xt(this.path),this.snap)},E}(),gl=function(){function E(S,I,V){this.source=S,this.path=I,this.children=V,this.type=js.MERGE}return E.prototype.operationForChild=function(S){if(ei(this.path)){var I=this.children.subtree(new Ie(S));return I.isEmpty()?null:I.value?new ml(this.source,Je(),I.value):new E(this.source,Je(),I)}return(0,Ee.hu)(Nt(this.path)===S,"Can't get a merge for a child not on the path of the operation"),new E(this.source,Xt(this.path),this.children)},E.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},E}(),_l=function(){function E(S,I,V){this.node_=S,this.fullyInitialized_=I,this.filtered_=V}return E.prototype.isFullyInitialized=function(){return this.fullyInitialized_},E.prototype.isFiltered=function(){return this.filtered_},E.prototype.isCompleteForPath=function(S){if(ei(S))return this.isFullyInitialized()&&!this.filtered_;var I=Nt(S);return this.isCompleteForChild(I)},E.prototype.isCompleteForChild=function(S){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(S)},E.prototype.getNode=function(){return this.node_},E}(),Hp=function(S){this.query_=S,this.index_=this.query_._queryParams.getIndex()};function Ds(E,S,I,V,Q,le){var ye=V.filter(function(Oe){return Oe.type===I});ye.sort(function(Oe,Ye){return function(E,S,I){if(null==S.childName||null==I.childName)throw(0,Ee.g5)("Should only compare child_ events.");var V=new dr(S.childName,S.snapshotNode),Q=new dr(I.childName,I.snapshotNode);return E.index_.compare(V,Q)}(E,Oe,Ye)}),ye.forEach(function(Oe){var Ye=function(E,S,I){return"value"===S.type||"child_removed"===S.type||(S.prevName=I.getPredecessorChildName(S.childName,S.snapshotNode,E.index_)),S}(E,Oe,le);Q.forEach(function(st){st.respondsTo(Oe.type)&&S.push(st.createEvent(Ye,E.query_))})})}function Vo(E,S){return{eventCache:E,serverCache:S}}function sa(E,S,I,V){return Vo(new _l(S,I,V),E.serverCache)}function Fr(E,S,I,V){return Vo(E.eventCache,new _l(S,I,V))}function Bc(E){return E.eventCache.isFullyInitialized()?E.eventCache.getNode():null}function zl(E){return E.serverCache.isFullyInitialized()?E.serverCache.getNode():null}var gh,Da=function(){function E(S,I){void 0===I&&(gh||(gh=new zo(On)),I=gh),this.value=S,this.children=I}return E.fromObject=function(S){var I=new E(null);return ii(S,function(V,Q){I=I.set(new Ie(V),Q)}),I},E.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},E.prototype.findRootMostMatchingPathAndValue=function(S,I){if(null!=this.value&&I(this.value))return{path:Je(),value:this.value};if(ei(S))return null;var V=Nt(S),Q=this.children.get(V);if(null!==Q){var le=Q.findRootMostMatchingPathAndValue(Xt(S),I);return null!=le?{path:Nn(new Ie(V),le.path),value:le.value}:null}return null},E.prototype.findRootMostValueAndPath=function(S){return this.findRootMostMatchingPathAndValue(S,function(){return!0})},E.prototype.subtree=function(S){if(ei(S))return this;var I=Nt(S),V=this.children.get(I);return null!==V?V.subtree(Xt(S)):new E(null)},E.prototype.set=function(S,I){if(ei(S))return new E(I,this.children);var V=Nt(S),le=(this.children.get(V)||new E(null)).set(Xt(S),I),ye=this.children.insert(V,le);return new E(this.value,ye)},E.prototype.remove=function(S){if(ei(S))return this.children.isEmpty()?new E(null):new E(null,this.children);var I=Nt(S),V=this.children.get(I);if(V){var Q=V.remove(Xt(S)),le=void 0;return le=Q.isEmpty()?this.children.remove(I):this.children.insert(I,Q),null===this.value&&le.isEmpty()?new E(null):new E(this.value,le)}return this},E.prototype.get=function(S){if(ei(S))return this.value;var I=Nt(S),V=this.children.get(I);return V?V.get(Xt(S)):null},E.prototype.setTree=function(S,I){if(ei(S))return I;var ye,V=Nt(S),le=(this.children.get(V)||new E(null)).setTree(Xt(S),I);return ye=le.isEmpty()?this.children.remove(V):this.children.insert(V,le),new E(this.value,ye)},E.prototype.fold=function(S){return this.fold_(Je(),S)},E.prototype.fold_=function(S,I){var V={};return this.children.inorderTraversal(function(Q,le){V[Q]=le.fold_(Nn(S,Q),I)}),I(S,this.value,V)},E.prototype.findOnPath=function(S,I){return this.findOnPath_(S,Je(),I)},E.prototype.findOnPath_=function(S,I,V){var Q=!!this.value&&V(I,this.value);if(Q)return Q;if(ei(S))return null;var le=Nt(S),ye=this.children.get(le);return ye?ye.findOnPath_(Xt(S),Nn(I,le),V):null},E.prototype.foreachOnPath=function(S,I){return this.foreachOnPath_(S,Je(),I)},E.prototype.foreachOnPath_=function(S,I,V){if(ei(S))return this;this.value&&V(I,this.value);var Q=Nt(S),le=this.children.get(Q);return le?le.foreachOnPath_(Xt(S),Nn(I,Q),V):new E(null)},E.prototype.foreach=function(S){this.foreach_(Je(),S)},E.prototype.foreach_=function(S,I){this.children.inorderTraversal(function(V,Q){Q.foreach_(Nn(S,V),I)}),this.value&&I(S,this.value)},E.prototype.foreachChild=function(S){this.children.inorderTraversal(function(I,V){V.value&&S(I,V.value)})},E}(),ps=function(){function E(S){this.writeTree_=S}return E.empty=function(){return new E(new Da(null))},E}();function yl(E,S,I){if(ei(S))return new ps(new Da(I));var V=E.writeTree_.findRootMostValueAndPath(S);if(null!=V){var Q=V.path,le=V.value,ye=rr(Q,S);return le=le.updateChild(ye,I),new ps(E.writeTree_.set(Q,le))}var Oe=new Da(I),Ye=E.writeTree_.setTree(S,Oe);return new ps(Ye)}function Vl(E,S,I){var V=E;return ii(I,function(Q,le){V=yl(V,Nn(S,Q),le)}),V}function _h(E,S){if(ei(S))return ps.empty();var I=E.writeTree_.setTree(S,new Da(null));return new ps(I)}function yh(E,S){return null!=vl(E,S)}function vl(E,S){var I=E.writeTree_.findRootMostValueAndPath(S);return null!=I?E.writeTree_.get(I.path).getChild(rr(I.path,S)):null}function Tu(E){var S=[],I=E.writeTree_.value;return null!=I?I.isLeafNode()||I.forEachChild(ui,function(V,Q){S.push(new dr(V,Q))}):E.writeTree_.children.inorderTraversal(function(V,Q){null!=Q.value&&S.push(new dr(V,Q.value))}),S}function rs(E,S){if(ei(S))return E;var I=vl(E,S);return new ps(null!=I?new Da(I):E.writeTree_.subtree(S))}function fs(E){return E.writeTree_.isEmpty()}function hc(E,S){return Gp(Je(),E.writeTree_,S)}function Gp(E,S,I){if(null!=S.value)return I.updateChild(E,S.value);var V=null;return S.children.inorderTraversal(function(Q,le){".priority"===Q?((0,Ee.hu)(null!==le.value,"Priority writes must always be leaf nodes"),V=le.value):I=Gp(Nn(E,Q),le,I)}),!I.getChild(E).isEmpty()&&null!==V&&(I=I.updateChild(Nn(E,".priority"),V)),I}function dc(E,S){return Du(S,E)}function Rf(E,S){if(E.snap)return or(E.path,S);for(var I in E.children)if(E.children.hasOwnProperty(I)&&or(Nn(E.path,I),S))return!0;return!1}function Yp(E){return E.visible}function Qr(E,S,I){for(var V=ps.empty(),Q=0;Q<E.length;++Q){var le=E[Q];if(S(le)){var ye=le.path,Oe=void 0;if(le.snap)or(I,ye)?V=yl(V,Oe=rr(I,ye),le.snap):or(ye,I)&&(Oe=rr(ye,I),V=yl(V,Je(),le.snap.getChild(Oe)));else{if(!le.children)throw(0,Ee.g5)("WriteRecord should have .snap or .children");if(or(I,ye))V=Vl(V,Oe=rr(I,ye),le.children);else if(or(ye,I))if(ei(Oe=rr(ye,I)))V=Vl(V,Je(),le.children);else{var Ye=(0,Ee.DV)(le.children,Nt(Oe));if(Ye){var st=Ye.getChild(Xt(Oe));V=yl(V,Je(),st)}}}}}return V}function od(E,S,I,V,Q){if(V||Q){var Ye=rs(E.visibleWrites,S);return!Q&&fs(Ye)?I:Q||null!=I||yh(Ye,Je())?hc(Qr(E.allWrites,function(cn){return(cn.visible||Q)&&(!V||!~V.indexOf(cn.writeId))&&(or(cn.path,S)||or(S,cn.path))},S),I||Ii.EMPTY_NODE):null}var le=vl(E.visibleWrites,S);if(null!=le)return le;var ye=rs(E.visibleWrites,S);return fs(ye)?I:null!=I||yh(ye,Je())?hc(ye,I||Ii.EMPTY_NODE):null}function Au(E,S,I,V){return od(E.writeTree,E.treePath,S,I,V)}function Of(E,S){return function(E,S,I){var V=Ii.EMPTY_NODE,Q=vl(E.visibleWrites,S);if(Q)return Q.isLeafNode()||Q.forEachChild(ui,function(Oe,Ye){V=V.updateImmediateChild(Oe,Ye)}),V;if(I){var le=rs(E.visibleWrites,S);return I.forEachChild(ui,function(Oe,Ye){var st=hc(rs(le,new Ie(Oe)),Ye);V=V.updateImmediateChild(Oe,st)}),Tu(le).forEach(function(Oe){V=V.updateImmediateChild(Oe.name,Oe.node)}),V}return Tu(rs(E.visibleWrites,S)).forEach(function(Oe){V=V.updateImmediateChild(Oe.name,Oe.node)}),V}(E.writeTree,E.treePath,S)}function Jd(E,S,I,V){return function(E,S,I,V,Q){(0,Ee.hu)(V||Q,"Either existingEventSnap or existingServerSnap must exist");var le=Nn(S,I);if(yh(E.visibleWrites,le))return null;var ye=rs(E.visibleWrites,le);return fs(ye)?Q.getChild(I):hc(ye,Q.getChild(I))}(E.writeTree,E.treePath,S,I,V)}function Ul(E,S){return function(E,S){return vl(E.visibleWrites,S)}(E.writeTree,Nn(E.treePath,S))}function Zp(E,S,I){return function(E,S,I,V){var Q=Nn(S,I),le=vl(E.visibleWrites,Q);return null!=le?le:V.isCompleteForChild(I)?hc(rs(E.visibleWrites,Q),V.getNode().getImmediateChild(I)):null}(E.writeTree,E.treePath,S,I)}function ku(E,S){return Du(Nn(E.treePath,S),E.writeTree)}function Du(E,S){return{treePath:E,writeTree:S}}var qn=function(){function E(){this.changeMap=new Map}return E.prototype.trackChildChange=function(S){var I=S.type,V=S.childName;(0,Ee.hu)("child_added"===I||"child_changed"===I||"child_removed"===I,"Only child changes supported for tracking"),(0,Ee.hu)(".priority"!==V,"Only non-priority child changes can be tracked.");var Q=this.changeMap.get(V);if(Q){var le=Q.type;if("child_added"===I&&"child_removed"===le)this.changeMap.set(V,wu(V,S.snapshotNode,Q.snapshotNode));else if("child_removed"===I&&"child_added"===le)this.changeMap.delete(V);else if("child_removed"===I&&"child_changed"===le)this.changeMap.set(V,bi(V,Q.oldSnap));else if("child_changed"===I&&"child_added"===le)this.changeMap.set(V,Va(V,S.snapshotNode));else{if("child_changed"!==I||"child_changed"!==le)throw(0,Ee.g5)("Illegal combination of changes: "+S+" occurred after "+Q);this.changeMap.set(V,wu(V,S.snapshotNode,Q.oldSnap))}}else this.changeMap.set(V,S)},E.prototype.getChanges=function(){return Array.from(this.changeMap.values())},E}(),xl=new(function(){function E(){}return E.prototype.getCompleteChild=function(S){return null},E.prototype.getChildAfterChild=function(S,I,V){return null},E}()),Gr=function(){function E(S,I,V){void 0===V&&(V=null),this.writes_=S,this.viewCache_=I,this.optCompleteServerCache_=V}return E.prototype.getCompleteChild=function(S){var I=this.viewCache_.eventCache;if(I.isCompleteForChild(S))return I.getNode().getImmediateChild(S);var V=null!=this.optCompleteServerCache_?new _l(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zp(this.writes_,S,V)},E.prototype.getChildAfterChild=function(S,I,V){var Q=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zl(this.viewCache_),le=function(E,S,I,V,Q,le){return function(E,S,I,V,Q,le,ye){var Oe,Ye=rs(E.visibleWrites,S),st=vl(Ye,Je());if(null!=st)Oe=st;else{if(null==I)return[];Oe=hc(Ye,I)}if((Oe=Oe.withIndex(ye)).isEmpty()||Oe.isLeafNode())return[];for(var pt=[],Wt=ye.getCompare(),cn=le?Oe.getReverseIteratorFrom(V,ye):Oe.getIteratorFrom(V,ye),Mn=cn.getNext();Mn&&pt.length<Q;)0!==Wt(Mn,V)&&pt.push(Mn),Mn=cn.getNext();return pt}(E.writeTree,E.treePath,S,I,V,Q,le)}(this.writes_,Q,I,1,V,S);return 0===le.length?null:le[0]},E}();function jr(E,S,I,V,Q,le){var ye=S.eventCache;if(null!=Ul(V,I))return S;var Oe=void 0,Ye=void 0;if(ei(I))if((0,Ee.hu)(S.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),S.serverCache.isFiltered()){var st=zl(S),Wt=Of(V,st instanceof Ii?st:Ii.EMPTY_NODE);Oe=E.filter.updateFullNode(S.eventCache.getNode(),Wt,le)}else{var cn=Au(V,zl(S));Oe=E.filter.updateFullNode(S.eventCache.getNode(),cn,le)}else{var Mn=Nt(I);if(".priority"===Mn){(0,Ee.hu)(1===St(I),"Can't have a priority with additional path components");var Wn=ye.getNode(),Pi=Jd(V,I,Wn,Ye=S.serverCache.getNode());Oe=null!=Pi?E.filter.updatePriority(Wn,Pi):ye.getNode()}else{var yi=Xt(I),Wi=void 0;if(ye.isCompleteForChild(Mn)){Ye=S.serverCache.getNode();var Qo=Jd(V,I,ye.getNode(),Ye);Wi=null!=Qo?ye.getNode().getImmediateChild(Mn).updateChild(yi,Qo):ye.getNode().getImmediateChild(Mn)}else Wi=Zp(V,Mn,S.serverCache);Oe=null!=Wi?E.filter.updateChild(ye.getNode(),Mn,Wi,yi,Q,le):ye.getNode()}}return sa(S,Oe,ye.isFullyInitialized()||ei(I),E.filter.filtersNodes())}function Is(E,S,I,V,Q,le,ye,Oe){var st,Ye=S.serverCache,pt=ye?E.filter:E.filter.getIndexedFilter();if(ei(I))st=pt.updateFullNode(Ye.getNode(),V,null);else if(pt.filtersNodes()&&!Ye.isFiltered()){var Wt=Ye.getNode().updateChild(I,V);st=pt.updateFullNode(Ye.getNode(),Wt,null)}else{var cn=Nt(I);if(!Ye.isCompleteForPath(I)&&St(I)>1)return S;var Mn=Xt(I),Pi=Ye.getNode().getImmediateChild(cn).updateChild(Mn,V);st=".priority"===cn?pt.updatePriority(Ye.getNode(),Pi):pt.updateChild(Ye.getNode(),cn,Pi,Mn,xl,null)}var yi=Fr(S,st,Ye.isFullyInitialized()||ei(I),pt.filtersNodes());return jr(E,yi,I,Q,new Gr(Q,yi,le),Oe)}function Yr(E,S,I,V,Q,le,ye){var Ye,st,Oe=S.eventCache,pt=new Gr(Q,S,le);if(ei(I))st=E.filter.updateFullNode(S.eventCache.getNode(),V,ye),Ye=sa(S,st,!0,E.filter.filtersNodes());else{var Wt=Nt(I);if(".priority"===Wt)st=E.filter.updatePriority(S.eventCache.getNode(),V),Ye=sa(S,st,Oe.isFullyInitialized(),Oe.isFiltered());else{var cn=Xt(I),Mn=Oe.getNode().getImmediateChild(Wt),Wn=void 0;if(ei(cn))Wn=V;else{var Pi=pt.getCompleteChild(Wt);Wn=null!=Pi?".priority"===gn(cn)&&Pi.getChild(Ni(cn)).isEmpty()?Pi:Pi.updateChild(cn,V):Ii.EMPTY_NODE}Ye=Mn.equals(Wn)?S:sa(S,E.filter.updateChild(Oe.getNode(),Wt,Wn,cn,pt,ye),Oe.isFullyInitialized(),E.filter.filtersNodes())}}return Ye}function Hl(E,S){return E.eventCache.isCompleteForChild(S)}function $o(E,S,I){return I.foreach(function(V,Q){S=S.updateChild(V,Q)}),S}function la(E,S,I,V,Q,le,ye,Oe){if(S.serverCache.getNode().isEmpty()&&!S.serverCache.isFullyInitialized())return S;var st,Ye=S;st=ei(I)?V:new Da(null).setTree(I,V);var pt=S.serverCache.getNode();return st.children.inorderTraversal(function(Wt,cn){if(pt.hasChild(Wt)){var Wn=$o(0,S.serverCache.getNode().getImmediateChild(Wt),cn);Ye=Is(E,Ye,new Ie(Wt),Wn,Q,le,ye,Oe)}}),st.children.inorderTraversal(function(Wt,cn){var Mn=!S.serverCache.isCompleteForChild(Wt)&&void 0===cn.value;if(!pt.hasChild(Wt)&&!Mn){var Pi=$o(0,S.serverCache.getNode().getImmediateChild(Wt),cn);Ye=Is(E,Ye,new Ie(Wt),Pi,Q,le,ye,Oe)}}),Ye}var bh=function(){function E(S,I){this.query_=S,this.eventRegistrations_=[];var V=this.query_._queryParams,Q=new Cu(V.getIndex()),le=function(E){return E.loadsAllData()?new Cu(E.getIndex()):E.hasLimit()?new Df(E):new Zd(E)}(V);this.processor_=function(E){return{filter:E}}(le);var ye=I.serverCache,Oe=I.eventCache,Ye=Q.updateFullNode(Ii.EMPTY_NODE,ye.getNode(),null),st=le.updateFullNode(Ii.EMPTY_NODE,Oe.getNode(),null),pt=new _l(Ye,ye.isFullyInitialized(),Q.filtersNodes()),Wt=new _l(st,Oe.isFullyInitialized(),le.filtersNodes());this.viewCache_=Vo(Wt,pt),this.eventGenerator_=new Hp(this.query_)}return Object.defineProperty(E.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),E}();function Iu(E,S){var I=zl(E.viewCache_);return I&&(E.query._queryParams.loadsAllData()||!ei(S)&&!I.getImmediateChild(Nt(S)).isEmpty())?I.getChild(S):null}function Gc(E){return 0===E.eventRegistrations_.length}function mc(E,S,I){var V=[];if(I){(0,Ee.hu)(null==S,"A cancel should cancel all event registrations.");var Q=E.query._path;E.eventRegistrations_.forEach(function(Ye){var st=Ye.createCancelEvent(I,Q);st&&V.push(st)})}if(S){for(var le=[],ye=0;ye<E.eventRegistrations_.length;++ye){var Oe=E.eventRegistrations_[ye];if(Oe.matches(S)){if(S.hasAnyCallback()){le=le.concat(E.eventRegistrations_.slice(ye+1));break}}else le.push(Oe)}E.eventRegistrations_=le}else E.eventRegistrations_=[];return V}function Pu(E,S,I,V){S.type===js.MERGE&&null!==S.source.queryId&&((0,Ee.hu)(zl(E.viewCache_),"We should always have a full cache before handling merges"),(0,Ee.hu)(Bc(E.viewCache_),"Missing event cache, even though we have a server cache"));var Q=E.viewCache_,le=function(E,S,I,V,Q){var ye,Oe,le=new qn;if(I.type===js.OVERWRITE){var Ye=I;Ye.source.fromUser?ye=Yr(E,S,Ye.path,Ye.snap,V,Q,le):((0,Ee.hu)(Ye.source.fromServer,"Unknown source."),Oe=Ye.source.tagged||S.serverCache.isFiltered()&&!ei(Ye.path),ye=Is(E,S,Ye.path,Ye.snap,V,Q,Oe,le))}else if(I.type===js.MERGE){var st=I;st.source.fromUser?ye=function(E,S,I,V,Q,le,ye){var Oe=S;return V.foreach(function(Ye,st){var pt=Nn(I,Ye);Hl(S,Nt(pt))&&(Oe=Yr(E,Oe,pt,st,Q,le,ye))}),V.foreach(function(Ye,st){var pt=Nn(I,Ye);Hl(S,Nt(pt))||(Oe=Yr(E,Oe,pt,st,Q,le,ye))}),Oe}(E,S,st.path,st.children,V,Q,le):((0,Ee.hu)(st.source.fromServer,"Unknown source."),Oe=st.source.tagged||S.serverCache.isFiltered(),ye=la(E,S,st.path,st.children,V,Q,Oe,le))}else if(I.type===js.ACK_USER_WRITE){var pt=I;ye=pt.revert?function(E,S,I,V,Q,le){var ye;if(null!=Ul(V,I))return S;var Oe=new Gr(V,S,Q),Ye=S.eventCache.getNode(),st=void 0;if(ei(I)||".priority"===Nt(I)){var pt=void 0;if(S.serverCache.isFullyInitialized())pt=Au(V,zl(S));else{var Wt=S.serverCache.getNode();(0,Ee.hu)(Wt instanceof Ii,"serverChildren would be complete if leaf node"),pt=Of(V,Wt)}st=E.filter.updateFullNode(Ye,pt=pt,le)}else{var cn=Nt(I),Mn=Zp(V,cn,S.serverCache);null==Mn&&S.serverCache.isCompleteForChild(cn)&&(Mn=Ye.getImmediateChild(cn)),(st=null!=Mn?E.filter.updateChild(Ye,cn,Mn,Xt(I),Oe,le):S.eventCache.getNode().hasChild(cn)?E.filter.updateChild(Ye,cn,Ii.EMPTY_NODE,Xt(I),Oe,le):Ye).isEmpty()&&S.serverCache.isFullyInitialized()&&(ye=Au(V,zl(S))).isLeafNode()&&(st=E.filter.updateFullNode(st,ye,le))}return ye=S.serverCache.isFullyInitialized()||null!=Ul(V,Je()),sa(S,st,ye,E.filter.filtersNodes())}(E,S,pt.path,V,Q,le):function(E,S,I,V,Q,le,ye){if(null!=Ul(Q,I))return S;var Oe=S.serverCache.isFiltered(),Ye=S.serverCache;if(null!=V.value){if(ei(I)&&Ye.isFullyInitialized()||Ye.isCompleteForPath(I))return Is(E,S,I,Ye.getNode().getChild(I),Q,le,Oe,ye);if(ei(I)){var st=new Da(null);return Ye.getNode().forEachChild(ul,function(Wt,cn){st=st.set(new Ie(Wt),cn)}),la(E,S,I,st,Q,le,Oe,ye)}return S}var pt=new Da(null);return V.foreach(function(Wt,cn){var Mn=Nn(I,Wt);Ye.isCompleteForPath(Mn)&&(pt=pt.set(Wt,Ye.getNode().getChild(Mn)))}),la(E,S,I,pt,Q,le,Oe,ye)}(E,S,pt.path,pt.affectedTree,V,Q,le)}else{if(I.type!==js.LISTEN_COMPLETE)throw(0,Ee.g5)("Unknown operation type: "+I.type);ye=function(E,S,I,V,Q){var le=S.serverCache;return jr(E,Fr(S,le.getNode(),le.isFullyInitialized()||ei(I),le.isFiltered()),I,V,xl,Q)}(E,S,I.path,V,le)}var Wt=le.getChanges();return function(E,S,I){var V=S.eventCache;if(V.isFullyInitialized()){var Q=V.getNode().isLeafNode()||V.getNode().isEmpty(),le=Bc(E);(I.length>0||!E.eventCache.isFullyInitialized()||Q&&!V.getNode().equals(le)||!V.getNode().getPriority().equals(le.getPriority()))&&I.push(ed(Bc(S)))}}(S,ye,Wt),{viewCache:ye,changes:Wt}}(E.processor_,Q,S,I,V);return function(E,S){(0,Ee.hu)(S.eventCache.getNode().isIndexed(E.filter.getIndex()),"Event snap not indexed"),(0,Ee.hu)(S.serverCache.getNode().isIndexed(E.filter.getIndex()),"Server snap not indexed")}(E.processor_,le.viewCache),(0,Ee.hu)(le.viewCache.serverCache.isFullyInitialized()||!Q.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),E.viewCache_=le.viewCache,xh(E,le.changes,le.viewCache.eventCache.getNode(),null)}function xh(E,S,I,V){return function(E,S,I,V){var Q=[],le=[];return S.forEach(function(ye){"child_changed"===ye.type&&E.index_.indexedValueChanged(ye.oldSnap,ye.snapshotNode)&&le.push(function(E,S){return{type:"child_moved",snapshotNode:S,childName:E}}(ye.childName,ye.snapshotNode))}),Ds(E,Q,"child_removed",S,V,I),Ds(E,Q,"child_added",S,V,I),Ds(E,Q,"child_moved",le,V,I),Ds(E,Q,"child_changed",S,V,I),Ds(E,Q,"value",S,V,I),Q}(E.eventGenerator_,S,I,V?[V]:E.eventRegistrations_)}var np,w,ip=function(){this.views=new Map};function Yc(E,S,I,V){var Q,le,ye=S.source.queryId;if(null!==ye){var Oe=E.views.get(ye);return(0,Ee.hu)(null!=Oe,"SyncTree gave us an op for an invalid query."),Pu(Oe,S,I,V)}var Ye=[];try{for(var st=(0,A.XA)(E.views.values()),pt=st.next();!pt.done;pt=st.next())Ye=Ye.concat(Pu(Oe=pt.value,S,I,V))}catch(Wt){Q={error:Wt}}finally{try{pt&&!pt.done&&(le=st.return)&&le.call(st)}finally{if(Q)throw Q.error}}return Ye}function ms(E,S,I,V,Q){var ye=E.views.get(S._queryIdentifier);if(!ye){var Oe=Au(I,Q?V:null),Ye=!1;Oe?Ye=!0:V instanceof Ii?(Oe=Of(I,V),Ye=!1):(Oe=Ii.EMPTY_NODE,Ye=!1);var st=Vo(new _l(Oe,Ye,!1),new _l(V,Q,!1));return new bh(S,st)}return ye}function Lf(E){var S,I,V=[];try{for(var Q=(0,A.XA)(E.views.values()),le=Q.next();!le.done;le=Q.next()){var ye=le.value;ye.query._queryParams.loadsAllData()||V.push(ye)}}catch(Oe){S={error:Oe}}finally{try{le&&!le.done&&(I=Q.return)&&I.call(Q)}finally{if(S)throw S.error}}return V}function qc(E,S){var I,V,Q=null;try{for(var le=(0,A.XA)(E.views.values()),ye=le.next();!ye.done;ye=le.next())Q=Q||Iu(ye.value,S)}catch(Ye){I={error:Ye}}finally{try{ye&&!ye.done&&(V=le.return)&&V.call(le)}finally{if(I)throw I.error}}return Q}function rp(E,S){return S._queryParams.loadsAllData()?f(E):E.views.get(S._queryIdentifier)}function op(E,S){return null!=rp(E,S)}function P(E){return null!=f(E)}function f(E){var S,I;try{for(var V=(0,A.XA)(E.views.values()),Q=V.next();!Q.done;Q=V.next()){var le=Q.value;if(le.query._queryParams.loadsAllData())return le}}catch(ye){S={error:ye}}finally{try{Q&&!Q.done&&(I=V.return)&&I.call(V)}finally{if(S)throw S.error}}return null}var q=1,ee=function(S){this.listenProvider_=S,this.syncPointTree_=new Da(null),this.pendingWriteTree_={visibleWrites:ps.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function se(E,S,I,V,Q){return function(E,S,I,V,Q){(0,Ee.hu)(V>E.lastWriteId,"Stacking an older write on top of newer ones"),void 0===Q&&(Q=!0),E.allWrites.push({path:S,snap:I,writeId:V,visible:Q}),Q&&(E.visibleWrites=yl(E.visibleWrites,S,I)),E.lastWriteId=V}(E.pendingWriteTree_,S,I,V,Q),Q?vt(E,new ml({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},S,I)):[]}function fe(E,S,I){void 0===I&&(I=!1);var V=function(E,S){for(var I=0;I<E.allWrites.length;I++){var V=E.allWrites[I];if(V.writeId===S)return V}return null}(E.pendingWriteTree_,S);if(function(E,S){var I=E.allWrites.findIndex(function(st){return st.writeId===S});(0,Ee.hu)(I>=0,"removeWrite called with nonexistent writeId.");var V=E.allWrites[I];E.allWrites.splice(I,1);for(var Q=V.visible,le=!1,ye=E.allWrites.length-1;Q&&ye>=0;){var Oe=E.allWrites[ye];Oe.visible&&(ye>=I&&Rf(Oe,V.path)?Q=!1:or(V.path,Oe.path)&&(le=!0)),ye--}return!!Q&&(le?(function(E){E.visibleWrites=Qr(E.allWrites,Yp,Je()),E.lastWriteId=E.allWrites.length>0?E.allWrites[E.allWrites.length-1].writeId:-1}(E),!0):(V.snap?E.visibleWrites=_h(E.visibleWrites,V.path):ii(V.children,function(st){E.visibleWrites=_h(E.visibleWrites,Nn(V.path,st))}),!0))}(E.pendingWriteTree_,S)){var le=new Da(null);return null!=V.snap?le=le.set(Je(),!0):ii(V.children,function(ye){le=le.set(new Ie(ye),!0)}),vt(E,new Wd(V.path,le,I))}return[]}function Ce(E,S,I){return vt(E,new ml({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},S,I))}function $e(E,S,I,V){var Q=S._path,le=E.syncPointTree_.get(Q),ye=[];if(le&&("default"===S._queryIdentifier||op(le,S))){var Oe=function(E,S,I,V){var Q,le,ye=S._queryIdentifier,Oe=[],Ye=[],st=P(E);if("default"===ye)try{for(var pt=(0,A.XA)(E.views.entries()),Wt=pt.next();!Wt.done;Wt=pt.next()){var Wn,cn=(0,A.CR)(Wt.value,2),Mn=cn[0];Ye=Ye.concat(mc(Wn=cn[1],I,V)),Gc(Wn)&&(E.views.delete(Mn),Wn.query._queryParams.loadsAllData()||Oe.push(Wn.query))}}catch(Pi){Q={error:Pi}}finally{try{Wt&&!Wt.done&&(le=pt.return)&&le.call(pt)}finally{if(Q)throw Q.error}}else(Wn=E.views.get(ye))&&(Ye=Ye.concat(mc(Wn,I,V)),Gc(Wn)&&(E.views.delete(ye),Wn.query._queryParams.loadsAllData()||Oe.push(Wn.query)));return st&&!P(E)&&Oe.push(new((0,Ee.hu)(np,"Reference.ts has not been loaded"),np)(S._repo,S._path)),{removed:Oe,events:Ye}}(le,S,I,V);(function(E){return 0===E.views.size})(le)&&(E.syncPointTree_=E.syncPointTree_.remove(Q));var Ye=Oe.removed;ye=Oe.events;var st=-1!==Ye.findIndex(function(Qo){return Qo._queryParams.loadsAllData()}),pt=E.syncPointTree_.findOnPath(Q,function(Qo,Ml){return P(Ml)});if(st&&!pt){var Wt=E.syncPointTree_.subtree(Q);if(!Wt.isEmpty())for(var cn=function(E){return E.fold(function(S,I,V){if(I&&P(I))return[f(I)];var le=[];return I&&(le=Lf(I)),ii(V,function(ye,Oe){le=le.concat(Oe)}),le})}(Wt),Mn=0;Mn<cn.length;++Mn){var Wn=cn[Mn],Pi=Wn.query,yi=Kt(E,Wn);E.listenProvider_.startListening(An(Pi),sn(E,Pi),yi.hashFn,yi.onComplete)}}!pt&&Ye.length>0&&!V&&(st?E.listenProvider_.stopListening(An(S),null):Ye.forEach(function(Qo){var Ml=E.queryToTagMap.get(un(Qo));E.listenProvider_.stopListening(An(Qo),Ml)})),function(E,S){for(var I=0;I<S.length;++I){var V=S[I];if(!V._queryParams.loadsAllData()){var Q=un(V),le=E.queryToTagMap.get(Q);E.queryToTagMap.delete(Q),E.tagToQueryMap.delete(le)}}}(E,Ye)}return ye}function Ue(E,S,I){var V=S._path,Q=null,le=!1;E.syncPointTree_.foreachOnPath(V,function(Pi,yi){var Wi=rr(Pi,V);Q=Q||qc(yi,Wi),le=le||P(yi)});var Oe,ye=E.syncPointTree_.get(V);ye?(le=le||P(ye),Q=Q||qc(ye,Je())):(ye=new ip,E.syncPointTree_=E.syncPointTree_.set(V,ye)),null!=Q?Oe=!0:(Oe=!1,Q=Ii.EMPTY_NODE,E.syncPointTree_.subtree(V).foreachChild(function(Pi,yi){var Wi=qc(yi,Je());Wi&&(Q=Q.updateImmediateChild(Pi,Wi))}));var st=op(ye,S);if(!st&&!S._queryParams.loadsAllData()){var pt=un(S);(0,Ee.hu)(!E.queryToTagMap.has(pt),"View does not exist, but we have a tag");var Wt=q++;E.queryToTagMap.set(pt,Wt),E.tagToQueryMap.set(Wt,pt)}var Mn=function(E,S,I,V,Q,le){var ye=ms(E,S,V,Q,le);return E.views.has(S._queryIdentifier)||E.views.set(S._queryIdentifier,ye),function(E,S){E.eventRegistrations_.push(S)}(ye,I),function(E,S){var I=E.viewCache_.eventCache,V=[];return I.getNode().isLeafNode()||I.getNode().forEachChild(ui,function(le,ye){V.push(Va(le,ye))}),I.isFullyInitialized()&&V.push(ed(I.getNode())),xh(E,V,I.getNode(),S)}(ye,I)}(ye,S,I,dc(E.pendingWriteTree_,V),Q,Oe);if(!st&&!le){var Wn=rp(ye,S);Mn=Mn.concat(function(E,S,I){var V=S._path,Q=sn(E,S),le=Kt(E,I),ye=E.listenProvider_.startListening(An(S),Q,le.hashFn,le.onComplete),Oe=E.syncPointTree_.subtree(V);if(Q)(0,Ee.hu)(!P(Oe.value),"If we're adding a query, it shouldn't be shadowed");else for(var Ye=Oe.fold(function(Wt,cn,Mn){if(!ei(Wt)&&cn&&P(cn))return[f(cn).query];var Wn=[];return cn&&(Wn=Wn.concat(Lf(cn).map(function(Pi){return Pi.query}))),ii(Mn,function(Pi,yi){Wn=Wn.concat(yi)}),Wn}),st=0;st<Ye.length;++st){var pt=Ye[st];E.listenProvider_.stopListening(An(pt),sn(E,pt))}return ye}(E,S,Wn))}return Mn}function tt(E,S,I){var Q=E.pendingWriteTree_,le=E.syncPointTree_.findOnPath(S,function(ye,Oe){var st=qc(Oe,rr(ye,S));if(st)return st});return od(Q,S,le,I,!0)}function vt(E,S){return rt(S,E.syncPointTree_,null,dc(E.pendingWriteTree_,Je()))}function rt(E,S,I,V){if(ei(E.path))return ht(E,S,I,V);var Q=S.get(Je());null==I&&null!=Q&&(I=qc(Q,Je()));var le=[],ye=Nt(E.path),Oe=E.operationForChild(ye),Ye=S.children.get(ye);if(Ye&&Oe){var st=I?I.getImmediateChild(ye):null,pt=ku(V,ye);le=le.concat(rt(Oe,Ye,st,pt))}return Q&&(le=le.concat(Yc(Q,E,V,I))),le}function ht(E,S,I,V){var Q=S.get(Je());null==I&&null!=Q&&(I=qc(Q,Je()));var le=[];return S.children.inorderTraversal(function(ye,Oe){var Ye=I?I.getImmediateChild(ye):null,st=ku(V,ye),pt=E.operationForChild(ye);pt&&(le=le.concat(ht(pt,Oe,Ye,st)))}),Q&&(le=le.concat(Yc(Q,E,V,I))),le}function Kt(E,S){var I=S.query,V=sn(E,I);return{hashFn:function(){return(function(E){return E.viewCache_.serverCache.getNode()}(S)||Ii.EMPTY_NODE).hash()},onComplete:function(Q){if("ok"===Q)return V?function(E,S,I){var V=ut(E,I);if(V){var Q=En(V),le=Q.path,ye=Q.queryId,Oe=rr(le,S);return bn(E,le,new ka(Eu(ye),Oe))}return[]}(E,I._path,V):function(E,S){return vt(E,new ka({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},S))}(E,I._path);var le=function(E,S){var I="Unknown Error";"too_big"===E?I="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===E?I="Client doesn't have permission to access the desired data.":"unavailable"===E&&(I="The service is unavailable");var V=new Error(E+" at "+S._path.toString()+": "+I);return V.code=E.toUpperCase(),V}(Q,I);return $e(E,I,null,le)}}}function sn(E,S){var I=un(S);return E.queryToTagMap.get(I)}function un(E){return E._path.toString()+"$"+E._queryIdentifier}function ut(E,S){return E.tagToQueryMap.get(S)}function En(E){var S=E.indexOf("$");return(0,Ee.hu)(-1!==S&&S<E.length-1,"Bad queryKey."),{queryId:E.substr(S+1),path:new Ie(E.substr(0,S))}}function bn(E,S,I){var V=E.syncPointTree_.get(S);return(0,Ee.hu)(V,"Missing sync point for query tag that we're tracking"),Yc(V,I,dc(E.pendingWriteTree_,S),null)}function An(E){return E._queryParams.loadsAllData()&&!E._queryParams.isDefault()?new((0,Ee.hu)(w,"Reference.ts has not been loaded"),w)(E._repo,E._path):E}var ar=function(){function E(S){this.node_=S}return E.prototype.getImmediateChild=function(S){return new E(this.node_.getImmediateChild(S))},E.prototype.node=function(){return this.node_},E}(),mr=function(){function E(S,I){this.syncTree_=S,this.path_=I}return E.prototype.getImmediateChild=function(S){var I=Nn(this.path_,S);return new E(this.syncTree_,I)},E.prototype.node=function(){return tt(this.syncTree_,this.path_)},E}(),Bi=function(E,S,I){return E&&"object"==typeof E?((0,Ee.hu)(".sv"in E,"Unexpected leaf node or priority contents"),"string"==typeof E[".sv"]?pr(E[".sv"],S,I):"object"==typeof E[".sv"]?ho(E[".sv"],S):void(0,Ee.hu)(!1,"Unexpected server value: "+JSON.stringify(E,null,2))):E},pr=function(E,S,I){switch(E){case"timestamp":return I.timestamp;default:(0,Ee.hu)(!1,"Unexpected server value: "+E)}},ho=function(E,S,I){E.hasOwnProperty("increment")||(0,Ee.hu)(!1,"Unexpected server value: "+JSON.stringify(E,null,2));var V=E.increment;"number"!=typeof V&&(0,Ee.hu)(!1,"Unexpected increment value: "+V);var Q=S.node();if((0,Ee.hu)(null!=Q,"Expected ChildrenNode.EMPTY_NODE for nulls"),!Q.isLeafNode())return V;var ye=Q.getValue();return"number"!=typeof ye?V:ye+V},ua=function(E,S,I,V){return Uo(S,new mr(I,E),V)},bs=function(E,S,I){return Uo(E,new ar(S),I)};function Uo(E,S,I){var le,V=E.getPriority().val(),Q=Bi(V,S.getImmediateChild(".priority"),I);if(E.isLeafNode()){var ye=E,Oe=Bi(ye.getValue(),S,I);return Oe!==ye.getValue()||Q!==ye.getPriority().val()?new Zi(Oe,oo(Q)):E}var Ye=E;return le=Ye,Q!==Ye.getPriority().val()&&(le=le.updatePriority(new Zi(Q))),Ye.forEachChild(ui,function(st,pt){var Wt=Uo(pt,S.getImmediateChild(st),I);Wt!==pt&&(le=le.updateImmediateChild(st,Wt))}),le}var Xo=function(S,I,V){void 0===S&&(S=""),void 0===I&&(I=null),void 0===V&&(V={children:{},childCount:0}),this.name=S,this.parent=I,this.node=V};function ha(E,S){for(var I=S instanceof Ie?S:new Ie(S),V=E,Q=Nt(I);null!==Q;){var le=(0,Ee.DV)(V.node.children,Q)||{children:{},childCount:0};V=new Xo(Q,V,le),Q=Nt(I=Xt(I))}return V}function wi(E){return E.node.value}function Nr(E,S){E.node.value=S,Ys(E)}function cr(E){return E.node.childCount>0}function po(E,S){ii(E.node.children,function(I,V){S(new Xo(I,E,V))})}function Jr(E,S,I,V){I&&!V&&S(E),po(E,function(Q){Jr(Q,S,!0,V)}),I&&V&&S(E)}function Ps(E){return new Ie(null===E.parent?E.name:Ps(E.parent)+"/"+E.name)}function Ys(E){null!==E.parent&&function(E,S,I){var V=function(E){return void 0===wi(E)&&!cr(E)}(I),Q=(0,Ee.r3)(E.node.children,S);V&&Q?(delete E.node.children[S],E.node.childCount--,Ys(E)):!V&&!Q&&(E.node.children[S]=I.node,E.node.childCount++,Ys(E))}(E.parent,E.name,E)}var wl=/[\[\].#$\/\u0000-\u001F\u007F]/,Zc=/[\[\].#$\u0000-\u001F\u007F]/,Zs=10485760,sd=function(E){return"string"==typeof E&&0!==E.length&&!wl.test(E)},Wc=function(E){return"string"==typeof E&&0!==E.length&&!Zc.test(E)},fo=function(E){return null===E||"string"==typeof E||"number"==typeof E&&!Gt(E)||E&&"object"==typeof E&&(0,Ee.r3)(E,".sv")},Ia=function(E,S,I,V){V&&void 0===S||Ru((0,Ee.gK)(E,"value"),S,I)},Ru=function(E,S,I){var V=I instanceof Ie?new No(I,E):I;if(void 0===S)throw new Error(E+"contains undefined "+ro(V));if("function"==typeof S)throw new Error(E+"contains a function "+ro(V)+" with contents = "+S.toString());if(Gt(S))throw new Error(E+"contains "+S.toString()+" "+ro(V));if("string"==typeof S&&S.length>Zs/3&&(0,Ee.ug)(S)>Zs)throw new Error(E+"contains a string greater than "+Zs+" utf8 bytes "+ro(V)+" ('"+S.substring(0,50)+"...')");if(S&&"object"==typeof S){var Q=!1,le=!1;if(ii(S,function(ye,Oe){if(".value"===ye)Q=!0;else if(".priority"!==ye&&".sv"!==ye&&(le=!0,!sd(ye)))throw new Error(E+" contains an invalid key ("+ye+") "+ro(V)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(E,S){E.parts_.length>0&&(E.byteLength_+=1),E.parts_.push(S),E.byteLength_+=(0,Ee.ug)(S),Us(E)})(V,ye),Ru(E,Oe,V),function(E){var S=E.parts_.pop();E.byteLength_-=(0,Ee.ug)(S),E.parts_.length>0&&(E.byteLength_-=1)}(V)}),Q&&le)throw new Error(E+' contains ".value" child '+ro(V)+" in addition to actual children.")}},Ou=function(E,S,I,V){if(!V||void 0!==S){var Q=(0,Ee.gK)(E,"values");if(!S||"object"!=typeof S||Array.isArray(S))throw new Error(Q+" must be an object containing the children to replace.");var le=[];ii(S,function(ye,Oe){var Ye=new Ie(ye);if(Ru(Q,Oe,Nn(I,Ye)),".priority"===gn(Ye)&&!fo(Oe))throw new Error(Q+"contains an invalid value for '"+Ye.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");le.push(Ye)}),function(E,S){var I,V;for(I=0;I<S.length;I++)for(var Q=Kn(V=S[I]),le=0;le<Q.length;le++)if((".priority"!==Q[le]||le!==Q.length-1)&&!sd(Q[le]))throw new Error(E+"contains an invalid key ("+Q[le]+") in path "+V.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');S.sort(yo);var ye=null;for(I=0;I<S.length;I++){if(V=S[I],null!==ye&&or(ye,V))throw new Error(E+"contains a path "+ye.toString()+" that is ancestor of another path "+V.toString());ye=V}}(Q,le)}},jl=function(E,S,I){if(!I||void 0!==S){if(Gt(S))throw new Error((0,Ee.gK)(E,"priority")+"is "+S.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fo(S))throw new Error((0,Ee.gK)(E,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bv=function(E,S,I){if(!I||void 0!==S)switch(S){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Ee.gK)(E,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Nf=function(E,S,I,V){if(!(V&&void 0===I||sd(I)))throw new Error((0,Ee.gK)(E,S)+'was an invalid key = "'+I+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},$c=function(E,S,I,V){if(!(V&&void 0===I||Wc(I)))throw new Error((0,Ee.gK)(E,S)+'was an invalid path = "'+I+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Rs=function(E,S){if(".info"===Nt(S))throw new Error(E+" failed = Can't modify data under /.info/")},Wp=function(E,S){var I=S.path.toString();if("string"!=typeof S.repoInfo.host||0===S.repoInfo.host.length||!sd(S.repoInfo.namespace)&&"localhost"!==S.repoInfo.host.split(":")[0]||0!==I.length&&!function(E){return E&&(E=E.replace(/^\/*\.info(\/|$)/,"/")),Wc(E)}(I))throw new Error((0,Ee.gK)(E,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Bf=function(E,S,I,V){if((!V||void 0!==I)&&"boolean"!=typeof I)throw new Error((0,Ee.gK)(E,S)+"must be a boolean.")},xs=function(){this.eventLists_=[],this.recursionDepth_=0};function pa(E,S){for(var I=null,V=0;V<S.length;V++){var Q=S[V],le=Q.getPath();null!==I&&!Tr(le,I.path)&&(E.eventLists_.push(I),I=null),null===I&&(I={events:[],path:le}),I.events.push(Q)}I&&E.eventLists_.push(I)}function Ch(E,S,I){pa(E,I),ws(E,function(V){return Tr(V,S)})}function Ro(E,S,I){pa(E,I),ws(E,function(V){return or(V,S)||or(S,V)})}function ws(E,S){E.recursionDepth_++;for(var I=!0,V=0;V<E.eventLists_.length;V++){var Q=E.eventLists_[V];Q&&(S(Q.path)?(ad(E.eventLists_[V]),E.eventLists_[V]=null):I=!1)}I&&(E.eventLists_=[]),E.recursionDepth_--}function ad(E){for(var S=0;S<E.events.length;S++){var I=E.events[S];if(null!==I){E.events[S]=null;var V=I.getEventRunner();Mt&&Vn("event: "+I.toString()),Or(V)}}}var zf="repo_interrupt",eg=function(){function E(S,I,V,Q){this.repoInfo_=S,this.forceRestClient_=I,this.authTokenProvider_=V,this.appCheckProvider_=Q,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xs,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oa(),this.transactionQueueTree_=new Xo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return E.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},E}();function Go(E){var I=E.infoData_.getNode(new Ie(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+I}function gc(E){return function(E){return(E=E||{}).timestamp=E.timestamp||(new Date).getTime(),E}({timestamp:Go(E)})}function Os(E,S,I,V,Q){E.dataUpdateCount++;var le=new Ie(S);I=E.interceptServerDataCallback_?E.interceptServerDataCallback_(S,I):I;var ye=[];if(Q)if(V){var Oe=(0,Ee.UI)(I,function(cn){return oo(cn)});ye=function(E,S,I,V){var Q=ut(E,V);if(Q){var le=En(Q),ye=le.path,Oe=le.queryId,Ye=rr(ye,S),st=Da.fromObject(I);return bn(E,ye,new gl(Eu(Oe),Ye,st))}return[]}(E.serverSyncTree_,le,Oe,Q)}else{var Ye=oo(I);ye=function(E,S,I,V){var Q=ut(E,V);if(null!=Q){var le=En(Q),ye=le.path,Oe=le.queryId,Ye=rr(ye,S);return bn(E,ye,new ml(Eu(Oe),Ye,I))}return[]}(E.serverSyncTree_,le,Ye,Q)}else if(V){var st=(0,Ee.UI)(I,function(cn){return oo(cn)});ye=function(E,S,I){var V=Da.fromObject(I);return vt(E,new gl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},S,V))}(E.serverSyncTree_,le,st)}else{var pt=oo(I);ye=Ce(E.serverSyncTree_,le,pt)}var Wt=le;ye.length>0&&(Wt=Lu(E,le)),Ro(E.eventQueue_,Wt,ye)}function Fu(E,S){yc(E,"connected",S),!1===S&&function(E){Hi(E,"onDisconnectEvents");var S=gc(E),I=oa();Wo(E.onDisconnect_,Je(),function(Q,le){var ye=ua(Q,le,E.serverSyncTree_,S);fl(I,Q,ye)});var V=[];Wo(I,Je(),function(Q,le){V=V.concat(Ce(E.serverSyncTree_,Q,le));var ye=$p(E,Q);Lu(E,ye)}),E.onDisconnect_=oa(),Ro(E.eventQueue_,Je(),V)}(E)}function yc(E,S,I){var V=new Ie("/.info/"+S),Q=oo(I);E.infoData_.updateSnapshot(V,Q);var le=Ce(E.infoSyncTree_,V,Q);Ro(E.eventQueue_,V,le)}function Sh(E){return E.nextWriteId_++}function Eh(E,S,I,V,Q){Hi(E,"set",{path:S.toString(),value:I,priority:V});var le=gc(E),ye=oo(I,V),Oe=tt(E.serverSyncTree_,S),Ye=bs(ye,Oe,le),st=Sh(E),pt=se(E.serverSyncTree_,S,Ye,st,!0);pa(E.eventQueue_,pt),E.server_.put(S.toString(),ye.val(!0),function(cn,Mn){var Wn="ok"===cn;Wn||Ki("set at "+S+" failed: "+cn);var Pi=fe(E.serverSyncTree_,st,!Wn);Ro(E.eventQueue_,S,Pi),ja(0,Q,cn,Mn)});var Wt=$p(E,S);Lu(E,Wt),Ro(E.eventQueue_,Wt,[])}function Hf(E,S,I){E.server_.onDisconnectCancel(S.toString(),function(V,Q){"ok"===V&&so(E.onDisconnect_,S),ja(0,I,V,Q)})}function Yl(E,S,I,V){var Q=oo(I);E.server_.onDisconnectPut(S.toString(),Q.val(!0),function(le,ye){"ok"===le&&fl(E.onDisconnect_,S,Q),ja(0,V,le,ye)})}function Cr(E,S,I){var V;V=".info"===Nt(S._path)?$e(E.infoSyncTree_,S,I):$e(E.serverSyncTree_,S,I),Ch(E.eventQueue_,S._path,V)}function Gf(E){E.persistentConnection_&&E.persistentConnection_.interrupt(zf)}function Hi(E){for(var S=[],I=1;I<arguments.length;I++)S[I-1]=arguments[I];var V="";E.persistentConnection_&&(V=E.persistentConnection_.id+":"),Vn.apply(void 0,(0,A.ev)([V],(0,A.CR)(S)))}function ja(E,S,I,V){S&&Or(function(){if("ok"===I)S(null);else{var Q=(I||"error").toUpperCase(),le=Q;V&&(le+=": "+V);var ye=new Error(le);ye.code=Q,S(ye)}})}function Cl(E,S,I){return tt(E.serverSyncTree_,S,I)||Ii.EMPTY_NODE}function vc(E,S){if(void 0===S&&(S=E.transactionQueueTree_),S||Zl(E,S),wi(S)){var I=tg(E,S);(0,Ee.hu)(I.length>0,"Sending zero length transaction queue"),I.every(function(Q){return 0===Q.status})&&function(E,S,I){for(var V=I.map(function(cn){return cn.currentWriteId}),Q=Cl(E,S,V),le=Q,ye=Q.hash(),Oe=0;Oe<I.length;Oe++){var Ye=I[Oe];(0,Ee.hu)(0===Ye.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ye.status=1,Ye.retryCount++;var st=rr(S,Ye.path);le=le.updateChild(st,Ye.currentOutputSnapshotRaw)}var pt=le.val(!0),Wt=S;E.server_.put(Wt.toString(),pt,function(cn){Hi(E,"transaction put response",{path:Wt.toString(),status:cn});var Mn=[];if("ok"===cn){for(var Wn=[],Pi=function(Wi){I[Wi].status=2,Mn=Mn.concat(fe(E.serverSyncTree_,I[Wi].currentWriteId)),I[Wi].onComplete&&Wn.push(function(){return I[Wi].onComplete(null,!0,I[Wi].currentOutputSnapshotResolved)}),I[Wi].unwatcher()},yi=0;yi<I.length;yi++)Pi(yi);for(Zl(E,ha(E.transactionQueueTree_,S)),vc(E,E.transactionQueueTree_),Ro(E.eventQueue_,S,Mn),yi=0;yi<Wn.length;yi++)Or(Wn[yi])}else{if("datastale"===cn)for(yi=0;yi<I.length;yi++)I[yi].status=3===I[yi].status?4:0;else for(Ki("transaction at "+Wt.toString()+" failed: "+cn),yi=0;yi<I.length;yi++)I[yi].status=4,I[yi].abortReason=cn;Lu(E,S)}},ye)}(E,Ps(S),I)}else cr(S)&&po(S,function(Q){vc(E,Q)})}function Lu(E,S){var I=ql(E,S),V=Ps(I);return function(E,S,I){if(0!==S.length){for(var V=[],Q=[],ye=S.filter(function(st){return 0===st.status}).map(function(st){return st.currentWriteId}),Oe=function(st){var Mn,pt=S[st],Wt=rr(I,pt.path),cn=!1;if((0,Ee.hu)(null!==Wt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===pt.status)cn=!0,Mn=pt.abortReason,Q=Q.concat(fe(E.serverSyncTree_,pt.currentWriteId,!0));else if(0===pt.status)if(pt.retryCount>=25)cn=!0,Mn="maxretry",Q=Q.concat(fe(E.serverSyncTree_,pt.currentWriteId,!0));else{var Wn=Cl(E,pt.path,ye);pt.currentInputSnapshot=Wn;var Pi=S[st].update(Wn.val());if(void 0!==Pi){Ru("transaction failed: Data returned ",Pi,pt.path);var yi=oo(Pi);"object"==typeof Pi&&null!=Pi&&(0,Ee.r3)(Pi,".priority")||(yi=yi.updatePriority(Wn.getPriority()));var Qo=pt.currentWriteId,Ml=gc(E),_d=bs(yi,Wn,Ml);pt.currentOutputSnapshotRaw=yi,pt.currentOutputSnapshotResolved=_d,pt.currentWriteId=Sh(E),ye.splice(ye.indexOf(Qo),1),Q=(Q=Q.concat(se(E.serverSyncTree_,pt.path,_d,pt.currentWriteId,pt.applyLocally))).concat(fe(E.serverSyncTree_,Qo,!0))}else cn=!0,Mn="nodata",Q=Q.concat(fe(E.serverSyncTree_,pt.currentWriteId,!0))}Ro(E.eventQueue_,I,Q),Q=[],cn&&(S[st].status=2,setTimeout(S[st].unwatcher,Math.floor(0)),S[st].onComplete&&V.push("nodata"===Mn?function(){return S[st].onComplete(null,!1,S[st].currentInputSnapshot)}:function(){return S[st].onComplete(new Error(Mn),!1,null)}))},Ye=0;Ye<S.length;Ye++)Oe(Ye);for(Zl(E,E.transactionQueueTree_),Ye=0;Ye<V.length;Ye++)Or(V[Ye]);vc(E,E.transactionQueueTree_)}}(E,tg(E,I),V),V}function ql(E,S){var I,V=E.transactionQueueTree_;for(I=Nt(S);null!==I&&void 0===wi(V);)V=ha(V,I),I=Nt(S=Xt(S));return V}function tg(E,S){var I=[];return ng(E,S,I),I.sort(function(V,Q){return V.order-Q.order}),I}function ng(E,S,I){var V=wi(S);if(V)for(var Q=0;Q<V.length;Q++)I.push(V[Q]);po(S,function(le){ng(E,le,I)})}function Zl(E,S){var I=wi(S);if(I){for(var V=0,Q=0;Q<I.length;Q++)2!==I[Q].status&&(I[V]=I[Q],V++);I.length=V,Nr(S,I.length>0?I:void 0)}po(S,function(le){Zl(E,le)})}function $p(E,S){var I=Ps(ql(E,S)),V=ha(E.transactionQueueTree_,S);return function(E,S,I){for(var V=E.parent;null!==V;){if(S(V))return!0;V=V.parent}}(V,function(Q){os(E,Q)}),os(E,V),Jr(V,function(Q){os(E,Q)}),I}function os(E,S){var I=wi(S);if(I){for(var V=[],Q=[],le=-1,ye=0;ye<I.length;ye++)3===I[ye].status||(1===I[ye].status?((0,Ee.hu)(le===ye-1,"All SENT items should be at beginning of queue."),le=ye,I[ye].status=3,I[ye].abortReason="set"):((0,Ee.hu)(0===I[ye].status,"Unexpected transaction status in abort"),I[ye].unwatcher(),Q=Q.concat(fe(E.serverSyncTree_,I[ye].currentWriteId,!0)),I[ye].onComplete&&V.push(I[ye].onComplete.bind(null,new Error("set"),!1,null))));for(-1===le?Nr(S,void 0):I.length=le+1,Ro(E.eventQueue_,Ps(S),Q),ye=0;ye<V.length;ye++)Or(V[ye])}}var Xp=function(E,S){var I=rg(E),V=I.namespace;return"firebase.com"===I.domain&&Ji(I.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!V||"undefined"===V)&&"localhost"!==I.domain&&Ji("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),I.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ki("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Hr(I.host,I.secure,V,S,"ws"===I.scheme||"wss"===I.scheme,"",V!==I.subdomain),path:new Ie(I.pathString)}},rg=function(E){var S="",I="",V="",Q="",le="",ye=!0,Oe="https",Ye=443;if("string"==typeof E){var st=E.indexOf("//");st>=0&&(Oe=E.substring(0,st-1),E=E.substring(st+2));var pt=E.indexOf("/");-1===pt&&(pt=E.length);var Wt=E.indexOf("?");-1===Wt&&(Wt=E.length),S=E.substring(0,Math.min(pt,Wt)),pt<Wt&&(Q=function(E){for(var S="",I=E.split("/"),V=0;V<I.length;V++)if(I[V].length>0){var Q=I[V];try{Q=decodeURIComponent(Q.replace(/\+/g," "))}catch(le){}S+="/"+Q}return S}(E.substring(pt,Wt)));var cn=function(E){var S,I,V={};"?"===E.charAt(0)&&(E=E.substring(1));try{for(var Q=(0,A.XA)(E.split("&")),le=Q.next();!le.done;le=Q.next()){var ye=le.value;if(0!==ye.length){var Oe=ye.split("=");2===Oe.length?V[decodeURIComponent(Oe[0])]=decodeURIComponent(Oe[1]):Ki("Invalid query segment '"+ye+"' in query '"+E+"'")}}}catch(Ye){S={error:Ye}}finally{try{le&&!le.done&&(I=Q.return)&&I.call(Q)}finally{if(S)throw S.error}}return V}(E.substring(Math.min(E.length,Wt)));(st=S.indexOf(":"))>=0?(ye="https"===Oe||"wss"===Oe,Ye=parseInt(S.substring(st+1),10)):st=S.length;var Mn=S.slice(0,st);if("localhost"===Mn.toLowerCase())I="localhost";else if(Mn.split(".").length<=2)I=Mn;else{var Wn=S.indexOf(".");V=S.substring(0,Wn).toLowerCase(),I=S.substring(Wn+1),le=V}"ns"in cn&&(le=cn.ns)}return{host:S,port:Ye,domain:I,subdomain:V,secure:ye,scheme:Oe,pathString:Q,namespace:le}},og=function(){function E(S,I,V,Q){this.eventType=S,this.eventRegistration=I,this.snapshot=V,this.prevName=Q}return E.prototype.getPath=function(){var S=this.snapshot.ref;return"value"===this.eventType?S._path:S.parent._path},E.prototype.getEventType=function(){return this.eventType},E.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},E.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,Ee.Pz)(this.snapshot.exportVal())},E}(),P_=function(){function E(S,I,V){this.eventRegistration=S,this.error=I,this.path=V}return E.prototype.getPath=function(){return this.path},E.prototype.getEventType=function(){return"cancel"},E.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},E.prototype.toString=function(){return this.path.toString()+":cancel"},E}(),fa=function(){function E(S,I){this.snapshotCallback=S,this.cancelCallback=I}return E.prototype.onValue=function(S,I){this.snapshotCallback.call(null,S,I)},E.prototype.onCancel=function(S){return(0,Ee.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,S)},Object.defineProperty(E.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),E.prototype.matches=function(S){return this.snapshotCallback===S.snapshotCallback||this.snapshotCallback.userCallback===S.snapshotCallback.userCallback&&this.snapshotCallback.context===S.snapshotCallback.context},E}(),sg=function(){function E(S,I){this._repo=S,this._path=I}return E.prototype.cancel=function(){var S=new Ee.BH;return Hf(this._repo,this._path,S.wrapCallback(function(){})),S.promise},E.prototype.remove=function(){Rs("OnDisconnect.remove",this._path);var S=new Ee.BH;return Yl(this._repo,this._path,null,S.wrapCallback(function(){})),S.promise},E.prototype.set=function(S){Rs("OnDisconnect.set",this._path),Ia("OnDisconnect.set",S,this._path,!1);var I=new Ee.BH;return Yl(this._repo,this._path,S,I.wrapCallback(function(){})),I.promise},E.prototype.setWithPriority=function(S,I){Rs("OnDisconnect.setWithPriority",this._path),Ia("OnDisconnect.setWithPriority",S,this._path,!1),jl("OnDisconnect.setWithPriority",I,!1);var V=new Ee.BH;return function(E,S,I,V,Q){var le=oo(I,V);E.server_.onDisconnectPut(S.toString(),le.val(!0),function(ye,Oe){"ok"===ye&&fl(E.onDisconnect_,S,le),ja(0,Q,ye,Oe)})}(this._repo,this._path,S,I,V.wrapCallback(function(){})),V.promise},E.prototype.update=function(S){Rs("OnDisconnect.update",this._path),Ou("OnDisconnect.update",S,this._path,!1);var I=new Ee.BH;return function(E,S,I,V){if((0,Ee.xb)(I))return Vn("onDisconnect().update() called with empty data.  Don't do anything."),void ja(0,V,"ok",void 0);E.server_.onDisconnectMerge(S.toString(),I,function(Q,le){"ok"===Q&&ii(I,function(ye,Oe){var Ye=oo(Oe);fl(E.onDisconnect_,Nn(S,ye),Ye)}),ja(0,V,Q,le)})}(this._repo,this._path,S,I.wrapCallback(function(){})),I.promise},E}(),Fs=function(){function E(S,I,V,Q){this._repo=S,this._path=I,this._queryParams=V,this._orderByCalled=Q}return Object.defineProperty(E.prototype,"key",{get:function(){return ei(this._path)?null:gn(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"ref",{get:function(){return new oi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"_queryIdentifier",{get:function(){var S=ph(this._queryParams),I=mi(S);return"{}"===I?"default":I},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"_queryObject",{get:function(){return ph(this._queryParams)},enumerable:!1,configurable:!0}),E.prototype.isEqual=function(S){if(!((S=(0,Ee.m9)(S))instanceof E))return!1;var I=this._repo===S._repo,V=Tr(this._path,S._path);return I&&V&&this._queryIdentifier===S._queryIdentifier},E.prototype.toJSON=function(){return this.toString()},E.prototype.toString=function(){return this._repo.toString()+function(E){for(var S="",I=E.pieceNum_;I<E.pieces_.length;I++)""!==E.pieces_[I]&&(S+="/"+encodeURIComponent(String(E.pieces_[I])));return S||"/"}(this._path)},E}();function ud(E,S){if(!0===E._orderByCalled)throw new Error(S+": You can't combine multiple orderBy calls.")}function El(E){var S=null,I=null;if(E.hasStart()&&(S=E.getIndexStartValue()),E.hasEnd()&&(I=E.getIndexEndValue()),E.getIndex()===ul){var V="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",Q="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(E.hasStart()){if(E.getIndexStartName()!==Ht)throw new Error(V);if("string"!=typeof S)throw new Error(Q)}if(E.hasEnd()){if(E.getIndexEndName()!==fn)throw new Error(V);if("string"!=typeof I)throw new Error(Q)}}else if(E.getIndex()===ui){if(null!=S&&!fo(S)||null!=I&&!fo(I))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Ee.hu)(E.getIndex()instanceof Fc||E.getIndex()===hh,"unknown index type."),null!=S&&"object"==typeof S||null!=I&&"object"==typeof I)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Tl(E){if(E.hasStart()&&E.hasEnd()&&E.hasLimit()&&!E.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var oi=function(E){function S(I,V){return E.call(this,I,V,new Su,!1)||this}return(0,A.ZT)(S,E),Object.defineProperty(S.prototype,"parent",{get:function(){var I=Ni(this._path);return null===I?null:new S(this._repo,I)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"root",{get:function(){for(var I=this;null!==I.parent;)I=I.parent;return I},enumerable:!1,configurable:!0}),S}(Fs),Ya=function(){function E(S,I,V){this._node=S,this.ref=I,this._index=V}return Object.defineProperty(E.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),E.prototype.child=function(S){var I=new Ie(S),V=Nu(this.ref,S);return new E(this._node.getChild(I),V,ui)},E.prototype.exists=function(){return!this._node.isEmpty()},E.prototype.exportVal=function(){return this._node.val(!0)},E.prototype.forEach=function(S){var I=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(Q,le){return S(new E(le,Nu(I.ref,Q),ui))})},E.prototype.hasChild=function(S){var I=new Ie(S);return!this._node.getChild(I).isEmpty()},E.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},E.prototype.toJSON=function(){return this.exportVal()},E.prototype.val=function(){return this._node.val()},E}();function ag(E,S){return(E=(0,Ee.m9)(E))._checkNotDeleted("ref"),void 0!==S?Nu(E._root,S):E._root}function bc(E,S){(E=(0,Ee.m9)(E))._checkNotDeleted("refFromURL");var I=Xp(S,E._repo.repoInfo_.nodeAdmin);Wp("refFromURL",I);var V=I.repoInfo;return!E._repo.repoInfo_.isCustomHost()&&V.host!==E._repo.repoInfo_.host&&Ji("refFromURL: Host name does not match the current database: (found "+V.host+" but expected "+E._repo.repoInfo_.host+")"),ag(E,I.path.toString())}function Nu(E,S){return null===Nt((E=(0,Ee.m9)(E))._path)?((I=S)&&(I=I.replace(/^\/*\.info(\/|$)/,"/")),$c("child","path",I,!1)):$c("child","path",S,!1),new oi(E._repo,Nn(E._path,S));var I}function jf(E,S){E=(0,Ee.m9)(E),Rs("push",E._path),Ia("push",S,E._path,!0);var ye,I=Go(E._repo),V=qd(I),Q=Nu(E,V),le=Nu(E,V);return ye=null!=S?hd(le,S).then(function(){return le}):Promise.resolve(le),Q.then=ye.then.bind(ye),Q.catch=ye.then.bind(ye,void 0),Q}function lg(E){return Rs("remove",E._path),hd(E,null)}function hd(E,S){E=(0,Ee.m9)(E),Rs("set",E._path),Ia("set",S,E._path,!1);var I=new Ee.BH;return Eh(E._repo,E._path,S,null,I.wrapCallback(function(){})),I.promise}function Yf(E,S){E=(0,Ee.m9)(E),Rs("setPriority",E._path),jl("setPriority",S,!1);var I=new Ee.BH;return Eh(E._repo,Nn(E._path,".priority"),S,null,I.wrapCallback(function(){})),I.promise}function Qp(E,S,I){if(Rs("setWithPriority",E._path),Ia("setWithPriority",S,E._path,!1),jl("setWithPriority",I,!1),".length"===E.key||".keys"===E.key)throw"setWithPriority failed: "+E.key+" is a read-only object.";var V=new Ee.BH;return Eh(E._repo,E._path,S,I,V.wrapCallback(function(){})),V.promise}function Cv(E,S){Ou("update",S,E._path,!1);var I=new Ee.BH;return function(E,S,I,V){Hi(E,"update",{path:S.toString(),value:I});var Q=!0,le=gc(E),ye={};if(ii(I,function(st,pt){Q=!1,ye[st]=ua(Nn(S,st),oo(pt),E.serverSyncTree_,le)}),Q)Vn("update() called with empty data.  Don't do anything."),ja(0,V,"ok",void 0);else{var Oe=Sh(E),Ye=function(E,S,I,V){!function(E,S,I,V){(0,Ee.hu)(V>E.lastWriteId,"Stacking an older merge on top of newer ones"),E.allWrites.push({path:S,children:I,writeId:V,visible:!0}),E.visibleWrites=Vl(E.visibleWrites,S,I),E.lastWriteId=V}(E.pendingWriteTree_,S,I,V);var Q=Da.fromObject(I);return vt(E,new gl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},S,Q))}(E.serverSyncTree_,S,ye,Oe);pa(E.eventQueue_,Ye),E.server_.merge(S.toString(),I,function(st,pt){var Wt="ok"===st;Wt||Ki("update at "+S+" failed: "+st);var cn=fe(E.serverSyncTree_,Oe,!Wt),Mn=cn.length>0?Lu(E,S):S;Ro(E.eventQueue_,Mn,cn),ja(0,V,st,pt)}),ii(I,function(st){var pt=$p(E,Nn(S,st));Lu(E,pt)}),Ro(E.eventQueue_,S,[])}}(E._repo,E._path,S,I.wrapCallback(function(){})),I.promise}function dd(E){return function(E,S){var I=function(E,S){var I=S._path,V=null;E.syncPointTree_.foreachOnPath(I,function(st,pt){var Wt=rr(st,I);V=V||qc(pt,Wt)});var Q=E.syncPointTree_.get(I);Q?V=V||qc(Q,Je()):(Q=new ip,E.syncPointTree_=E.syncPointTree_.set(I,Q));var le=null!=V,ye=le?new _l(V,!0,!1):null;return function(E){return Bc(E.viewCache_)}(ms(Q,S,dc(E.pendingWriteTree_,S._path),le?ye.getNode():Ii.EMPTY_NODE,le))}(E.serverSyncTree_,S);return null!=I?Promise.resolve(I):E.server_.get(S).then(function(V){var Q=oo(V).withIndex(S._queryParams.getIndex()),le=Ce(E.serverSyncTree_,S._path,Q);return Ch(E.eventQueue_,S._path,le),Promise.resolve(Q)},function(V){return Hi(E,"get for query "+(0,Ee.Pz)(S)+" failed: "+V),Promise.reject(new Error(V))})}((E=(0,Ee.m9)(E))._repo,E).then(function(S){return new Ya(S,new oi(E._repo,E._path),E._queryParams.getIndex())})}var Mh=function(){function E(S){this.callbackContext=S}return E.prototype.respondsTo=function(S){return"value"===S},E.prototype.createEvent=function(S,I){var V=I._queryParams.getIndex();return new og("value",this,new Ya(S.snapshotNode,new oi(I._repo,I._path),V))},E.prototype.getEventRunner=function(S){var I=this;return"cancel"===S.getEventType()?function(){return I.callbackContext.onCancel(S.error)}:function(){return I.callbackContext.onValue(S.snapshot,null)}},E.prototype.createCancelEvent=function(S,I){return this.callbackContext.hasCancelCallback?new P_(this,S,I):null},E.prototype.matches=function(S){return S instanceof E&&(!S.callbackContext||!this.callbackContext||S.callbackContext.matches(this.callbackContext))},E.prototype.hasAnyCallback=function(){return null!==this.callbackContext},E}(),Ss=function(){function E(S,I){this.eventType=S,this.callbackContext=I}return E.prototype.respondsTo=function(S){var I="children_added"===S?"child_added":S;return this.eventType===("children_removed"===I?"child_removed":I)},E.prototype.createCancelEvent=function(S,I){return this.callbackContext.hasCancelCallback?new P_(this,S,I):null},E.prototype.createEvent=function(S,I){(0,Ee.hu)(null!=S.childName,"Child events should have a childName.");var V=Nu(new oi(I._repo,I._path),S.childName),Q=I._queryParams.getIndex();return new og(S.type,this,new Ya(S.snapshotNode,V,Q),S.prevName)},E.prototype.getEventRunner=function(S){var I=this;return"cancel"===S.getEventType()?function(){return I.callbackContext.onCancel(S.error)}:function(){return I.callbackContext.onValue(S.snapshot,S.prevName)}},E.prototype.matches=function(S){return S instanceof E&&this.eventType===S.eventType&&(!this.callbackContext||!S.callbackContext||this.callbackContext.matches(S.callbackContext))},E.prototype.hasAnyCallback=function(){return!!this.callbackContext},E}();function xc(E,S,I,V,Q){var le;if("object"==typeof V&&(le=void 0,Q=V),"function"==typeof V&&(le=V),Q&&Q.onlyOnce){var ye=I,Oe=function(pt,Wt){Cr(E._repo,E,st),ye(pt,Wt)};Oe.userCallback=I.userCallback,Oe.context=I.context,I=Oe}var Ye=new fa(I,le||void 0),st="value"===S?new Mh(Ye):new Ss(S,Ye);return function(E,S,I){var V;V=".info"===Nt(S._path)?Ue(E.infoSyncTree_,S,I):Ue(E.serverSyncTree_,S,I),Ch(E.eventQueue_,S._path,V)}(E._repo,E,st),function(){return Cr(E._repo,E,st)}}function Jp(E,S,I,V){return xc(E,"value",S,I,V)}function Kp(E,S,I,V){return xc(E,"child_added",S,I,V)}function $s(E,S,I,V){return xc(E,"child_changed",S,I,V)}function sp(E,S,I,V){return xc(E,"child_moved",S,I,V)}function ef(E,S,I,V){return xc(E,"child_removed",S,I,V)}function pd(E,S,I){var V=null,Q=I?new fa(I):null;"value"===S?V=new Mh(Q):S&&(V=new Ss(S,Q)),Cr(E._repo,E,V)}var Wl=function(){},tf=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,A.ZT)(S,E),S.prototype._apply=function(I){Ia("endAt",this._value,I._path,!0);var V=nd(I._queryParams,this._value,this._key);if(Tl(V),El(V),I._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fs(I._repo,I._path,V,I._orderByCalled)},S}(Wl);function Ah(E,S){return Nf("endAt","key",S,!0),new tf(E,S)}var qa=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,A.ZT)(S,E),S.prototype._apply=function(I){Ia("endBefore",this._value,I._path,!1);var V=function(E,S,I){var Q;return E.index_===ul?("string"==typeof S&&(S=za(S)),Q=nd(E,S,I)):Q=nd(E,S,null==I?Ht:za(I)),Q.endBeforeSet_=!0,Q}(I._queryParams,this._value,this._key);if(Tl(V),El(V),I._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fs(I._repo,I._path,V,I._orderByCalled)},S}(Wl);function Sv(E,S){return Nf("endBefore","key",S,!0),new qa(E,S)}var ap=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,A.ZT)(S,E),S.prototype._apply=function(I){Ia("startAt",this._value,I._path,!0);var V=td(I._queryParams,this._value,this._key);if(Tl(V),El(V),I._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fs(I._repo,I._path,V,I._orderByCalled)},S}(Wl);function cg(E,S){return void 0===E&&(E=null),Nf("startAt","key",S,!0),new ap(E,S)}var ug=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,A.ZT)(S,E),S.prototype._apply=function(I){Ia("startAfter",this._value,I._path,!1);var V=function(E,S,I){var V;return E.index_===ul?("string"==typeof S&&(S=Lc(S)),V=td(E,S,I)):V=td(E,S,null==I?fn:Lc(I)),V.startAfterSet_=!0,V}(I._queryParams,this._value,this._key);if(Tl(V),El(V),I._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fs(I._repo,I._path,V,I._orderByCalled)},S}(Wl);function Bu(E,S){return Nf("startAfter","key",S,!0),new ug(E,S)}var kh=function(E){function S(I){var V=E.call(this)||this;return V._limit=I,V}return(0,A.ZT)(S,E),S.prototype._apply=function(I){if(I._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fs(I._repo,I._path,function(E,S){var I=E.copy();return I.limitSet_=!0,I.limit_=S,I.viewFrom_="l",I}(I._queryParams,this._limit),I._orderByCalled)},S}(Wl);function qf(E){if("number"!=typeof E||Math.floor(E)!==E||E<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new kh(E)}var lp=function(E){function S(I){var V=E.call(this)||this;return V._limit=I,V}return(0,A.ZT)(S,E),S.prototype._apply=function(I){if(I._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fs(I._repo,I._path,function(E,S){var I=E.copy();return I.limitSet_=!0,I.limit_=S,I.viewFrom_="r",I}(I._queryParams,this._limit),I._orderByCalled)},S}(Wl);function R_(E){if("number"!=typeof E||Math.floor(E)!==E||E<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new lp(E)}var Za=function(E){function S(I){var V=E.call(this)||this;return V._path=I,V}return(0,A.ZT)(S,E),S.prototype._apply=function(I){ud(I,"orderByChild");var V=new Ie(this._path);if(ei(V))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var Q=new Fc(V),le=ds(I._queryParams,Q);return El(le),new Fs(I._repo,I._path,le,!0)},S}(Wl);function fd(E){if("$key"===E)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===E)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===E)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return $c("orderByChild","path",E,!1),new Za(E)}var Zf=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,A.ZT)(S,E),S.prototype._apply=function(I){ud(I,"orderByKey");var V=ds(I._queryParams,ul);return El(V),new Fs(I._repo,I._path,V,!0)},S}(Wl);function Wf(){return new Zf}var O_=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,A.ZT)(S,E),S.prototype._apply=function(I){ud(I,"orderByPriority");var V=ds(I._queryParams,ui);return El(V),new Fs(I._repo,I._path,V,!0)},S}(Wl);function Dh(){return new O_}var F_=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,A.ZT)(S,E),S.prototype._apply=function(I){ud(I,"orderByValue");var V=ds(I._queryParams,hh);return El(V),new Fs(I._repo,I._path,V,!0)},S}(Wl);function hg(){return new F_}var dg=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,A.ZT)(S,E),S.prototype._apply=function(I){if(Ia("equalTo",this._value,I._path,!1),I._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(I._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new tf(this._value,this._key)._apply(new ap(this._value,this._key)._apply(I))},S}(Wl);function pg(E,S){return Nf("equalTo","key",S,!0),new dg(E,S)}function Wa(E){for(var S,I,V=[],Q=1;Q<arguments.length;Q++)V[Q-1]=arguments[Q];var le=(0,Ee.m9)(E);try{for(var ye=(0,A.XA)(V),Oe=ye.next();!Oe.done;Oe=ye.next()){var Ye=Oe.value;le=Ye._apply(le)}}catch(st){S={error:st}}finally{try{Oe&&!Oe.done&&(I=ye.return)&&I.call(ye)}finally{if(S)throw S.error}}return le}(function(E){(0,Ee.hu)(!np,"__referenceConstructor has already been defined"),np=E})(oi),function(E){(0,Ee.hu)(!w,"__referenceConstructor has already been defined"),w=E}(oi);var $a={},Co=!1;function cp(E,S,I,V,Q){var le=V||E.options.databaseURL;void 0===le&&(E.options.projectId||Ji("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vn("Using default host for project ",E.options.projectId),le=E.options.projectId+"-default-rtdb.firebaseio.com");var Ye,ye=Xp(le,Q),Oe=ye.repoInfo,st=void 0;"undefined"!=typeof process&&(st=process.env.FIREBASE_DATABASE_EMULATOR_HOST),st?(Ye=!0,Oe=(ye=Xp(le="http://"+st+"?ns="+Oe.namespace,Q)).repoInfo):Ye=!ye.repoInfo.secure;var pt=Q&&Ye?new Si(Si.OWNER):new Li(E.name,E.options,S);Wp("Invalid Firebase Database URL",ye),ei(ye.path)||Ji("Database URL must point to the root of a Firebase Database (not including a child path).");var Wt=function(E,S,I,V){var Q=$a[S.name];Q||($a[S.name]=Q={});var le=Q[E.toURLString()];return le&&Ji("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),le=new eg(E,Co,I,V),Q[E.toURLString()]=le,le}(Oe,E,pt,new hs(E.name,I));return new fg(Wt,E)}var fg=function(){function E(S,I){this._repoInternal=S,this.app=I,this.type="database",this._instanceStarted=!1}return Object.defineProperty(E.prototype,"_repo",{get:function(){return this._instanceStarted||(function(E,S,I){if(E.stats_=br(E.repoInfo_),E.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)E.server_=new Qm(E.repoInfo_,function(V,Q,le,ye){Os(E,V,Q,le,ye)},E.authTokenProvider_,E.appCheckProvider_),setTimeout(function(){return Fu(E,!0)},0);else{if(null!=I){if("object"!=typeof I)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Ee.Pz)(I)}catch(V){throw new Error("Invalid authOverride provided: "+V)}}E.persistentConnection_=new uc(E.repoInfo_,S,function(V,Q,le,ye){Os(E,V,Q,le,ye)},function(V){Fu(E,V)},function(V){!function(E,S){ii(S,function(I,V){yc(E,I,V)})}(E,V)},E.authTokenProvider_,E.appCheckProvider_,I),E.server_=E.persistentConnection_}E.authTokenProvider_.addTokenChangeListener(function(V){E.server_.refreshAuthToken(V)}),E.appCheckProvider_.addTokenChangeListener(function(V){E.server_.refreshAppCheckToken(V.token)}),E.statsReporter_=function(E,S){var I=E.toString();return _s[I]||(_s[I]=S()),_s[I]}(E.repoInfo_,function(){return new Up(E.stats_,E.server_)}),E.infoData_=new zp,E.infoSyncTree_=new ee({startListening:function(V,Q,le,ye){var Oe=[],Ye=E.infoData_.getNode(V._path);return Ye.isEmpty()||(Oe=Ce(E.infoSyncTree_,V._path,Ye),setTimeout(function(){ye("ok")},0)),Oe},stopListening:function(){}}),yc(E,"connected",!1),E.serverSyncTree_=new ee({startListening:function(V,Q,le,ye){return E.server_.listen(V,le,Q,function(Oe,Ye){var st=ye(Oe,Ye);Ro(E.eventQueue_,V._path,st)}),[]},stopListening:function(V,Q){E.server_.unlisten(V,Q)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new oi(this._repo,Je())),this._rootInternal},enumerable:!1,configurable:!0}),E.prototype._delete=function(){return null!==this._rootInternal&&(function(E,S){var I=$a[S];(!I||I[E.key]!==E)&&Ji("Database "+S+"("+E.repoInfo_+") has already been deleted."),Gf(E),delete I[E.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},E.prototype._checkNotDeleted=function(S){null===this._rootInternal&&Ji("Cannot call "+S+" on a deleted database.")},E}();function Ih(E){(E=(0,Ee.m9)(E))._checkNotDeleted("goOffline"),Gf(E._repo)}function Ph(E){(E=(0,Ee.m9)(E))._checkNotDeleted("goOnline"),function(E){E.persistentConnection_&&E.persistentConnection_.resume(zf)}(E._repo)}var $l={".sv":"timestamp"},Vu=function(){function E(S,I){this.committed=S,this.snapshot=I}return E.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},E}();function Sx(E,S,I){var V;if(E=(0,Ee.m9)(E),Rs("Reference.transaction",E._path),".length"===E.key||".keys"===E.key)throw"Reference.transaction failed: "+E.key+" is a read-only object.";var Q=null===(V=null==I?void 0:I.applyLocally)||void 0===V||V,le=new Ee.BH,Oe=Jp(E,function(){});return function(E,S,I,V,Q,le){Hi(E,"transaction on "+S);var ye={path:S,update:I,onComplete:V,status:null,order:Qe(),applyLocally:le,retryCount:0,unwatcher:Q,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Oe=Cl(E,S,void 0);ye.currentInputSnapshot=Oe;var Ye=ye.update(Oe.val());if(void 0===Ye)ye.unwatcher(),ye.currentOutputSnapshotRaw=null,ye.currentOutputSnapshotResolved=null,ye.onComplete&&ye.onComplete(null,!1,ye.currentInputSnapshot);else{Ru("transaction failed: Data returned ",Ye,ye.path),ye.status=0;var st=ha(E.transactionQueueTree_,S),pt=wi(st)||[];pt.push(ye),Nr(st,pt);var Wt=void 0;"object"==typeof Ye&&null!==Ye&&(0,Ee.r3)(Ye,".priority")?(Wt=(0,Ee.DV)(Ye,".priority"),(0,Ee.hu)(fo(Wt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Wt=(tt(E.serverSyncTree_,S)||Ii.EMPTY_NODE).getPriority().val();var Mn=gc(E),Wn=oo(Ye,Wt),Pi=bs(Wn,Oe,Mn);ye.currentOutputSnapshotRaw=Wn,ye.currentOutputSnapshotResolved=Pi,ye.currentWriteId=Sh(E);var yi=se(E.serverSyncTree_,S,Pi,ye.currentWriteId,ye.applyLocally);Ro(E.eventQueue_,S,yi),vc(E,E.transactionQueueTree_)}}(E._repo,E._path,S,function(Ye,st,pt){var Wt=null;Ye?le.reject(Ye):(Wt=new Ya(pt,new oi(E._repo,E._path),ui),le.resolve(new Vu(st,Wt)))},Oe,Q),le.promise}var Xa=function(){function E(S){this._delegate=S}return E.prototype.cancel=function(S){(0,Ee.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Ee.Wj)("OnDisconnect.cancel","onComplete",S,!0);var I=this._delegate.cancel();return S&&I.then(function(){return S(null)},function(V){return S(V)}),I},E.prototype.remove=function(S){(0,Ee.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Ee.Wj)("OnDisconnect.remove","onComplete",S,!0);var I=this._delegate.remove();return S&&I.then(function(){return S(null)},function(V){return S(V)}),I},E.prototype.set=function(S,I){(0,Ee.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Ee.Wj)("OnDisconnect.set","onComplete",I,!0);var V=this._delegate.set(S);return I&&V.then(function(){return I(null)},function(Q){return I(Q)}),V},E.prototype.setWithPriority=function(S,I,V){(0,Ee.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Ee.Wj)("OnDisconnect.setWithPriority","onComplete",V,!0);var Q=this._delegate.setWithPriority(S,I);return V&&Q.then(function(){return V(null)},function(le){return V(le)}),Q},E.prototype.update=function(S,I){if((0,Ee.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(S)){for(var V={},Q=0;Q<S.length;++Q)V[""+Q]=S[Q];S=V,Ki("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Ee.Wj)("OnDisconnect.update","onComplete",I,!0);var le=this._delegate.update(S);return I&&le.then(function(){return I(null)},function(ye){return I(ye)}),le},E}(),mg=function(){function E(S,I){this.committed=S,this.snapshot=I}return E.prototype.toJSON=function(){return(0,Ee.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},E}(),Jc=function(){function E(S,I){this._database=S,this._delegate=I}return E.prototype.val=function(){return(0,Ee.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},E.prototype.exportVal=function(){return(0,Ee.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},E.prototype.toJSON=function(){return(0,Ee.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},E.prototype.exists=function(){return(0,Ee.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},E.prototype.child=function(S){return(0,Ee.Dv)("DataSnapshot.child",0,1,arguments.length),S=String(S),$c("DataSnapshot.child","path",S,!1),new E(this._database,this._delegate.child(S))},E.prototype.hasChild=function(S){return(0,Ee.Dv)("DataSnapshot.hasChild",1,1,arguments.length),$c("DataSnapshot.hasChild","path",S,!1),this._delegate.hasChild(S)},E.prototype.getPriority=function(){return(0,Ee.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},E.prototype.forEach=function(S){var I=this;return(0,Ee.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Ee.Wj)("DataSnapshot.forEach","action",S,!1),this._delegate.forEach(function(V){return S(new E(I._database,V))})},E.prototype.hasChildren=function(){return(0,Ee.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(E.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),E.prototype.numChildren=function(){return(0,Ee.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},E.prototype.getRef=function(){return(0,Ee.Dv)("DataSnapshot.ref",0,0,arguments.length),new Kc(this._database,this._delegate.ref)},Object.defineProperty(E.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),E}(),rf=function(){function E(S,I){this.database=S,this._delegate=I}return E.prototype.on=function(S,I,V,Q){var ye,le=this;(0,Ee.Dv)("Query.on",2,4,arguments.length),(0,Ee.Wj)("Query.on","callback",I,!1);var Oe=E.getCancelAndContextArgs_("Query.on",V,Q),Ye=function(pt,Wt){I.call(Oe.context,new Jc(le.database,pt),Wt)};Ye.userCallback=I,Ye.context=Oe.context;var st=null===(ye=Oe.cancel)||void 0===ye?void 0:ye.bind(Oe.context);switch(S){case"value":return Jp(this._delegate,Ye,st),I;case"child_added":return Kp(this._delegate,Ye,st),I;case"child_removed":return ef(this._delegate,Ye,st),I;case"child_changed":return $s(this._delegate,Ye,st),I;case"child_moved":return sp(this._delegate,Ye,st),I;default:throw new Error((0,Ee.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},E.prototype.off=function(S,I,V){if((0,Ee.Dv)("Query.off",0,3,arguments.length),bv("Query.off",S,!0),(0,Ee.Wj)("Query.off","callback",I,!0),(0,Ee.lb)("Query.off","context",V,!0),I){var Q=function(){};Q.userCallback=I,Q.context=V,pd(this._delegate,S,Q)}else pd(this._delegate,S)},E.prototype.get=function(){var S=this;return dd(this._delegate).then(function(I){return new Jc(S.database,I)})},E.prototype.once=function(S,I,V,Q){var le=this;(0,Ee.Dv)("Query.once",1,4,arguments.length),(0,Ee.Wj)("Query.once","callback",I,!0);var ye=E.getCancelAndContextArgs_("Query.once",V,Q),Oe=new Ee.BH,Ye=function(pt,Wt){var cn=new Jc(le.database,pt);I&&I.call(ye.context,cn,Wt),Oe.resolve(cn)};Ye.userCallback=I,Ye.context=ye.context;var st=function(pt){ye.cancel&&ye.cancel.call(ye.context,pt),Oe.reject(pt)};switch(S){case"value":Jp(this._delegate,Ye,st,{onlyOnce:!0});break;case"child_added":Kp(this._delegate,Ye,st,{onlyOnce:!0});break;case"child_removed":ef(this._delegate,Ye,st,{onlyOnce:!0});break;case"child_changed":$s(this._delegate,Ye,st,{onlyOnce:!0});break;case"child_moved":sp(this._delegate,Ye,st,{onlyOnce:!0});break;default:throw new Error((0,Ee.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return Oe.promise},E.prototype.limitToFirst=function(S){return(0,Ee.Dv)("Query.limitToFirst",1,1,arguments.length),new E(this.database,Wa(this._delegate,qf(S)))},E.prototype.limitToLast=function(S){return(0,Ee.Dv)("Query.limitToLast",1,1,arguments.length),new E(this.database,Wa(this._delegate,R_(S)))},E.prototype.orderByChild=function(S){return(0,Ee.Dv)("Query.orderByChild",1,1,arguments.length),new E(this.database,Wa(this._delegate,fd(S)))},E.prototype.orderByKey=function(){return(0,Ee.Dv)("Query.orderByKey",0,0,arguments.length),new E(this.database,Wa(this._delegate,Wf()))},E.prototype.orderByPriority=function(){return(0,Ee.Dv)("Query.orderByPriority",0,0,arguments.length),new E(this.database,Wa(this._delegate,Dh()))},E.prototype.orderByValue=function(){return(0,Ee.Dv)("Query.orderByValue",0,0,arguments.length),new E(this.database,Wa(this._delegate,hg()))},E.prototype.startAt=function(S,I){return void 0===S&&(S=null),(0,Ee.Dv)("Query.startAt",0,2,arguments.length),new E(this.database,Wa(this._delegate,cg(S,I)))},E.prototype.startAfter=function(S,I){return void 0===S&&(S=null),(0,Ee.Dv)("Query.startAfter",0,2,arguments.length),new E(this.database,Wa(this._delegate,Bu(S,I)))},E.prototype.endAt=function(S,I){return void 0===S&&(S=null),(0,Ee.Dv)("Query.endAt",0,2,arguments.length),new E(this.database,Wa(this._delegate,Ah(S,I)))},E.prototype.endBefore=function(S,I){return void 0===S&&(S=null),(0,Ee.Dv)("Query.endBefore",0,2,arguments.length),new E(this.database,Wa(this._delegate,Sv(S,I)))},E.prototype.equalTo=function(S,I){return(0,Ee.Dv)("Query.equalTo",1,2,arguments.length),new E(this.database,Wa(this._delegate,pg(S,I)))},E.prototype.toString=function(){return(0,Ee.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},E.prototype.toJSON=function(){return(0,Ee.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},E.prototype.isEqual=function(S){if((0,Ee.Dv)("Query.isEqual",1,1,arguments.length),!(S instanceof E)){var I="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(I)}return this._delegate.isEqual(S._delegate)},E.getCancelAndContextArgs_=function(S,I,V){var Q={cancel:void 0,context:void 0};if(I&&V)Q.cancel=I,(0,Ee.Wj)(S,"cancel",Q.cancel,!0),Q.context=V,(0,Ee.lb)(S,"context",Q.context,!0);else if(I)if("object"==typeof I&&null!==I)Q.context=I;else{if("function"!=typeof I)throw new Error((0,Ee.gK)(S,"cancelOrContext")+" must either be a cancel callback or a context object.");Q.cancel=I}return Q},Object.defineProperty(E.prototype,"ref",{get:function(){return new Kc(this.database,new oi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),E}(),Kc=function(E){function S(I,V){var Q=E.call(this,I,new Fs(V._repo,V._path,new Su,!1))||this;return Q.database=I,Q._delegate=V,Q}return(0,A.ZT)(S,E),S.prototype.getKey=function(){return(0,Ee.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},S.prototype.child=function(I){return(0,Ee.Dv)("Reference.child",1,1,arguments.length),"number"==typeof I&&(I=String(I)),new S(this.database,Nu(this._delegate,I))},S.prototype.getParent=function(){(0,Ee.Dv)("Reference.parent",0,0,arguments.length);var I=this._delegate.parent;return I?new S(this.database,I):null},S.prototype.getRoot=function(){return(0,Ee.Dv)("Reference.root",0,0,arguments.length),new S(this.database,this._delegate.root)},S.prototype.set=function(I,V){(0,Ee.Dv)("Reference.set",1,2,arguments.length),(0,Ee.Wj)("Reference.set","onComplete",V,!0);var Q=hd(this._delegate,I);return V&&Q.then(function(){return V(null)},function(le){return V(le)}),Q},S.prototype.update=function(I,V){if((0,Ee.Dv)("Reference.update",1,2,arguments.length),Array.isArray(I)){for(var Q={},le=0;le<I.length;++le)Q[""+le]=I[le];I=Q,Ki("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rs("Reference.update",this._delegate._path),(0,Ee.Wj)("Reference.update","onComplete",V,!0);var ye=Cv(this._delegate,I);return V&&ye.then(function(){return V(null)},function(Oe){return V(Oe)}),ye},S.prototype.setWithPriority=function(I,V,Q){(0,Ee.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Ee.Wj)("Reference.setWithPriority","onComplete",Q,!0);var le=Qp(this._delegate,I,V);return Q&&le.then(function(){return Q(null)},function(ye){return Q(ye)}),le},S.prototype.remove=function(I){(0,Ee.Dv)("Reference.remove",0,1,arguments.length),(0,Ee.Wj)("Reference.remove","onComplete",I,!0);var V=lg(this._delegate);return I&&V.then(function(){return I(null)},function(Q){return I(Q)}),V},S.prototype.transaction=function(I,V,Q){var le=this;(0,Ee.Dv)("Reference.transaction",1,3,arguments.length),(0,Ee.Wj)("Reference.transaction","transactionUpdate",I,!1),(0,Ee.Wj)("Reference.transaction","onComplete",V,!0),Bf("Reference.transaction","applyLocally",Q,!0);var ye=Sx(this._delegate,I,{applyLocally:Q}).then(function(Oe){return new mg(Oe.committed,new Jc(le.database,Oe.snapshot))});return V&&ye.then(function(Oe){return V(null,Oe.committed,Oe.snapshot)},function(Oe){return V(Oe,!1,null)}),ye},S.prototype.setPriority=function(I,V){(0,Ee.Dv)("Reference.setPriority",1,2,arguments.length),(0,Ee.Wj)("Reference.setPriority","onComplete",V,!0);var Q=Yf(this._delegate,I);return V&&Q.then(function(){return V(null)},function(le){return V(le)}),Q},S.prototype.push=function(I,V){var Q=this;(0,Ee.Dv)("Reference.push",0,2,arguments.length),(0,Ee.Wj)("Reference.push","onComplete",V,!0);var le=jf(this._delegate,I),ye=le.then(function(Ye){return new S(Q.database,Ye)});V&&ye.then(function(){return V(null)},function(Ye){return V(Ye)});var Oe=new S(this.database,le);return Oe.then=ye.then.bind(ye),Oe.catch=ye.catch.bind(ye,void 0),Oe},S.prototype.onDisconnect=function(){return Rs("Reference.onDisconnect",this._delegate._path),new Xa(new sg(this._delegate._repo,this._delegate._path))},Object.defineProperty(S.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),S}(rf),Rh=function(){function E(S,I){var V=this;this._delegate=S,this.app=I,this.INTERNAL={delete:function(){return V._delegate._delete()}}}return E.prototype.useEmulator=function(S,I,V){void 0===V&&(V={}),function(E,S,I,V){void 0===V&&(V={}),(E=(0,Ee.m9)(E))._checkNotDeleted("useEmulator"),E._instanceStarted&&Ji("Cannot call useEmulator() after instance has already been initialized.");var Q=E._repoInternal,le=void 0;if(Q.repoInfo_.nodeAdmin)V.mockUserToken&&Ji('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),le=new Si(Si.OWNER);else if(V.mockUserToken){var ye=(0,Ee.Sg)(V.mockUserToken,E.app.options.projectId);le=new Si(ye)}!function(E,S,I,V){E.repoInfo_=new Hr(S+":"+I,!1,E.repoInfo_.namespace,E.repoInfo_.webSocketOnly,E.repoInfo_.nodeAdmin,E.repoInfo_.persistenceKey,E.repoInfo_.includeNamespaceInQueryParams),V&&(E.authTokenProvider_=V)}(Q,S,I,le)}(this._delegate,S,I,V)},E.prototype.ref=function(S){if((0,Ee.Dv)("database.ref",0,1,arguments.length),S instanceof Kc){var I=bc(this._delegate,S.toString());return new Kc(this,I)}return I=ag(this._delegate,S),new Kc(this,I)},E.prototype.refFromURL=function(S){var I="database.refFromURL";(0,Ee.Dv)(I,1,1,arguments.length);var V=bc(this._delegate,S);return new Kc(this,V)},E.prototype.goOffline=function(){return(0,Ee.Dv)("database.goOffline",0,0,arguments.length),Ih(this._delegate)},E.prototype.goOnline=function(){return(0,Ee.Dv)("database.goOnline",0,0,arguments.length),Ph(this._delegate)},E.ServerValue={TIMESTAMP:$l,increment:function(S){return function(E){return{".sv":{increment:E}}}(S)}},E}(),z_=Object.freeze({__proto__:null,forceLongPolling:function(){d.forceDisallow(),Pt.forceAllow()},forceWebSockets:function(){Pt.forceDisallow()},isWebSocketsAvailable:function(){return d.isAvailable()},setSecurityDebugCallback:function(E,S){E._delegate._repo.persistentConnection_.securityDebugCallback_=S},stats:function(E,S){!function(E,S){if(void 0===S&&(S=!1),"undefined"!=typeof console){var I;S?(E.statsListener_||(E.statsListener_=new Ha(E.stats_)),I=E.statsListener_.get()):I=E.stats_.get();var V=Object.keys(I).reduce(function(Q,le){return Math.max(le.length,Q)},0);ii(I,function(Q,le){for(var ye=Q,Oe=Q.length;Oe<V+2;Oe++)ye+=" ";console.log(ye+le)})}}(E._delegate._repo,S)},statsIncrementCounter:function(E,S){!function(E,S){E.stats_.incrementCounter(S),function(E,S){E.statsToReport_[S]=!0}(E.statsReporter_,S)}(E._delegate._repo,S)},dataUpdateCount:function(E){return E._delegate._repo.dataUpdateCount},interceptServerData:function(E,S){return function(E,S){E.interceptServerDataCallback_=S}(E._delegate._repo,S)},initStandalone:function(E){var S=E.app,I=E.url,Q=E.customAuthImpl,le=E.namespace,ye=E.nodeAdmin,Oe=void 0!==ye&&ye;Ge(E.version);var Ye=new Vt.zt("auth-internal",new Vt.H0("database-standalone"));return Ye.setComponent(new Vt.wA("auth-internal",function(){return Q},"PRIVATE")),{instance:new Rh(cp(S,Ye,void 0,I,Oe),S),namespace:le}}}),gd=uc;uc.prototype.simpleListen=function(E,S){this.sendRequest("q",{p:E},S)},uc.prototype.echo=function(E,S){this.sendRequest("echo",{d:E},S)};var Xf=Object.freeze({__proto__:null,DataConnection:gd,RealTimeConnection:Me,hijackHash:function(E){var S=uc.prototype.put;return uc.prototype.put=function(I,V,Q,le){void 0!==le&&(le=E()),S.call(this,I,V,Q,le)},function(){uc.prototype.put=S}},ConnectionTarget:Hr,queryIdentifier:function(E){return E._delegate._queryIdentifier},forceRestClient:function(E){!function(E){Co=E}(E)}}),Pa=Rh.ServerValue;!function(E){Ge(E.SDK_VERSION);var S=E.INTERNAL.registerComponent(new Vt.wA("database",function(I,V){var Q=V.instanceIdentifier,le=I.getProvider("app").getImmediate(),ye=I.getProvider("auth-internal"),Oe=I.getProvider("app-check-internal");return new Rh(cp(le,ye,Oe,Q),le)},"PUBLIC").setServiceProps({Reference:Kc,Query:rf,Database:Rh,DataSnapshot:Jc,enableLogging:$r,INTERNAL:z_,ServerValue:Pa,TEST_ACCESS:Xf}).setMultipleInstances(!0));E.registerVersion("@firebase/database","0.10.9"),(0,Ee.Yr)()&&(ai.exports=S)}(s.Z)},300:(ai,_n,nt)=>{"use strict";function s(){for(var lt=0,Ct=0,zt=arguments.length;Ct<zt;Ct++)lt+=arguments[Ct].length;var an=Array(lt),Qe=0;for(Ct=0;Ct<zt;Ct++)for(var Rn=arguments[Ct],dn=0,Mt=Rn.length;dn<Mt;dn++,Qe++)an[Qe]=Rn[dn];return an}nt.d(_n,{in:()=>A,Yd:()=>Ge,Ub:()=>Ve,Am:()=>Et});var Vt,Ee=[],A=(()=>{return(lt=A||(A={}))[lt.DEBUG=0]="DEBUG",lt[lt.VERBOSE=1]="VERBOSE",lt[lt.INFO=2]="INFO",lt[lt.WARN=3]="WARN",lt[lt.ERROR=4]="ERROR",lt[lt.SILENT=5]="SILENT",A;var lt})(),gt={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},Dt=A.INFO,wt=((Vt={})[A.DEBUG]="log",Vt[A.VERBOSE]="log",Vt[A.INFO]="info",Vt[A.WARN]="warn",Vt[A.ERROR]="error",Vt),Be=function(lt,Ct){for(var zt=[],an=2;an<arguments.length;an++)zt[an-2]=arguments[an];if(!(Ct<lt.logLevel)){var Qe=(new Date).toISOString(),Rn=wt[Ct];if(!Rn)throw new Error("Attempted to log a message with an invalid logType (value: "+Ct+")");console[Rn].apply(console,s(["["+Qe+"]  "+lt.name+":"],zt))}},Ge=function(){function lt(Ct){this.name=Ct,this._logLevel=Dt,this._logHandler=Be,this._userLogHandler=null,Ee.push(this)}return Object.defineProperty(lt.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Ct){if(!(Ct in A))throw new TypeError('Invalid value "'+Ct+'" assigned to `logLevel`');this._logLevel=Ct},enumerable:!1,configurable:!0}),lt.prototype.setLogLevel=function(Ct){this._logLevel="string"==typeof Ct?gt[Ct]:Ct},Object.defineProperty(lt.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Ct){if("function"!=typeof Ct)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ct},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Ct){this._userLogHandler=Ct},enumerable:!1,configurable:!0}),lt.prototype.debug=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,A.DEBUG],Ct)),this._logHandler.apply(this,s([this,A.DEBUG],Ct))},lt.prototype.log=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,A.VERBOSE],Ct)),this._logHandler.apply(this,s([this,A.VERBOSE],Ct))},lt.prototype.info=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,A.INFO],Ct)),this._logHandler.apply(this,s([this,A.INFO],Ct))},lt.prototype.warn=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,A.WARN],Ct)),this._logHandler.apply(this,s([this,A.WARN],Ct))},lt.prototype.error=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,A.ERROR],Ct)),this._logHandler.apply(this,s([this,A.ERROR],Ct))},lt}();function Ve(lt){Ee.forEach(function(Ct){Ct.setLogLevel(lt)})}function Et(lt,Ct){for(var zt=function(dn){var Mt=null;Ct&&Ct.level&&(Mt=gt[Ct.level]),dn.userLogHandler=null===lt?null:function(Vi,$r){for(var Vn=[],Di=2;Di<arguments.length;Di++)Vn[Di-2]=arguments[Di];var zr=Vn.map(function(Ji){if(null==Ji)return null;if("string"==typeof Ji)return Ji;if("number"==typeof Ji||"boolean"==typeof Ji)return Ji.toString();if(Ji instanceof Error)return Ji.message;try{return JSON.stringify(Ji)}catch(Ki){return null}}).filter(function(Ji){return Ji}).join(" ");$r>=(null!=Mt?Mt:Vi.logLevel)&&lt({level:A[$r].toLowerCase(),message:zr,args:Vn,type:Vi.name})}},an=0,Qe=Ee;an<Qe.length;an++)zt(Qe[an])}},4685:(ai,_n,nt)=>{"use strict";nt.d(_n,{BH:()=>Ct,LL:()=>Yt,gQ:()=>Si,hu:()=>Ee,g5:()=>A,US:()=>wt,h$:()=>Be,r3:()=>Yi,Sg:()=>zt,ne:()=>co,p$:()=>Ve,ZB:()=>Et,gK:()=>ns,m9:()=>cc,z$:()=>an,GJ:()=>li,jU:()=>dn,ru:()=>Mt,d:()=>$r,xb:()=>fr,w1:()=>Vn,uI:()=>Qe,UG:()=>Rn,Yr:()=>zr,b$:()=>Vi,G6:()=>Ji,Mn:()=>Di,w9:()=>xi,cI:()=>mi,UI:()=>io,xO:()=>Ri,DV:()=>Do,ug:()=>Hr,dS:()=>is,Pz:()=>Un,Dv:()=>vr,Wj:()=>uo,lb:()=>Ur});var s=nt(4762),Ee=function(ft,dt){if(!ft)throw A(dt)},A=function(ft){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ft)},gt=function(ft){for(var dt=[],Tt=0,Jt=0;Jt<ft.length;Jt++){var Lt=ft.charCodeAt(Jt);Lt<128?dt[Tt++]=Lt:Lt<2048?(dt[Tt++]=Lt>>6|192,dt[Tt++]=63&Lt|128):55296==(64512&Lt)&&Jt+1<ft.length&&56320==(64512&ft.charCodeAt(Jt+1))?(Lt=65536+((1023&Lt)<<10)+(1023&ft.charCodeAt(++Jt)),dt[Tt++]=Lt>>18|240,dt[Tt++]=Lt>>12&63|128,dt[Tt++]=Lt>>6&63|128,dt[Tt++]=63&Lt|128):(dt[Tt++]=Lt>>12|224,dt[Tt++]=Lt>>6&63|128,dt[Tt++]=63&Lt|128)}return dt},wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(ft,dt){if(!Array.isArray(ft))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Tt=dt?this.byteToCharMapWebSafe_:this.byteToCharMap_,Jt=[],Lt=0;Lt<ft.length;Lt+=3){var Ln=ft[Lt],di=Lt+1<ft.length,Oi=di?ft[Lt+1]:0,ir=Lt+2<ft.length,er=ir?ft[Lt+2]:0,De=(15&Oi)<<2|er>>6,qe=63&er;ir||(qe=64,di||(De=64)),Jt.push(Tt[Ln>>2],Tt[(3&Ln)<<4|Oi>>4],Tt[De],Tt[qe])}return Jt.join("")},encodeString:function(ft,dt){return this.HAS_NATIVE_SUPPORT&&!dt?btoa(ft):this.encodeByteArray(gt(ft),dt)},decodeString:function(ft,dt){return this.HAS_NATIVE_SUPPORT&&!dt?atob(ft):function(ft){for(var dt=[],Tt=0,Jt=0;Tt<ft.length;){var Lt=ft[Tt++];if(Lt<128)dt[Jt++]=String.fromCharCode(Lt);else if(Lt>191&&Lt<224){var Ln=ft[Tt++];dt[Jt++]=String.fromCharCode((31&Lt)<<6|63&Ln)}else if(Lt>239&&Lt<365){var ir=((7&Lt)<<18|(63&(Ln=ft[Tt++]))<<12|(63&(di=ft[Tt++]))<<6|63&ft[Tt++])-65536;dt[Jt++]=String.fromCharCode(55296+(ir>>10)),dt[Jt++]=String.fromCharCode(56320+(1023&ir))}else{Ln=ft[Tt++];var di=ft[Tt++];dt[Jt++]=String.fromCharCode((15&Lt)<<12|(63&Ln)<<6|63&di)}}return dt.join("")}(this.decodeStringToByteArray(ft,dt))},decodeStringToByteArray:function(ft,dt){this.init_();for(var Tt=dt?this.charToByteMapWebSafe_:this.charToByteMap_,Jt=[],Lt=0;Lt<ft.length;){var Ln=Tt[ft.charAt(Lt++)],Oi=Lt<ft.length?Tt[ft.charAt(Lt)]:0,er=++Lt<ft.length?Tt[ft.charAt(Lt)]:64,we=++Lt<ft.length?Tt[ft.charAt(Lt)]:64;if(++Lt,null==Ln||null==Oi||null==er||null==we)throw Error();Jt.push(Ln<<2|Oi>>4),64!==er&&(Jt.push(Oi<<4&240|er>>2),64!==we&&Jt.push(er<<6&192|we))}return Jt},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var ft=0;ft<this.ENCODED_VALS.length;ft++)this.byteToCharMap_[ft]=this.ENCODED_VALS.charAt(ft),this.charToByteMap_[this.byteToCharMap_[ft]]=ft,this.byteToCharMapWebSafe_[ft]=this.ENCODED_VALS_WEBSAFE.charAt(ft),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ft]]=ft,ft>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ft)]=ft,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ft)]=ft)}}},Be=function(ft){var dt=gt(ft);return wt.encodeByteArray(dt,!0)},Ge=function(ft){try{return wt.decodeString(ft,!0)}catch(dt){console.error("base64Decode failed: ",dt)}return null};function Ve(ft){return Et(void 0,ft)}function Et(ft,dt){if(!(dt instanceof Object))return dt;switch(dt.constructor){case Date:return new Date(dt.getTime());case Object:void 0===ft&&(ft={});break;case Array:ft=[];break;default:return dt}for(var Jt in dt)!dt.hasOwnProperty(Jt)||!lt(Jt)||(ft[Jt]=Et(ft[Jt],dt[Jt]));return ft}function lt(ft){return"__proto__"!==ft}var Ct=function(){function ft(){var dt=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Tt,Jt){dt.resolve=Tt,dt.reject=Jt})}return ft.prototype.wrapCallback=function(dt){var Tt=this;return function(Jt,Lt){Jt?Tt.reject(Jt):Tt.resolve(Lt),"function"==typeof dt&&(Tt.promise.catch(function(){}),1===dt.length?dt(Jt):dt(Jt,Lt))}},ft}();function zt(ft,dt){if(ft.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Jt=dt||"demo-project",Lt=ft.iat||0,Ln=ft.sub||ft.user_id;if(!Ln)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var di=(0,s.pi)({iss:"https://securetoken.google.com/"+Jt,aud:Jt,iat:Lt,exp:Lt+3600,auth_time:Lt,sub:Ln,user_id:Ln,firebase:{sign_in_provider:"custom",identities:{}}},ft);return[wt.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),wt.encodeString(JSON.stringify(di),!1),""].join(".")}function an(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function Rn(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ft){return!1}}function dn(){return"object"==typeof self&&self.self===self}function Mt(){var ft="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ft&&void 0!==ft.id}function Vi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $r(){return an().indexOf("Electron/")>=0}function Vn(){var ft=an();return ft.indexOf("MSIE ")>=0||ft.indexOf("Trident/")>=0}function Di(){return an().indexOf("MSAppHost/")>=0}function zr(){return!1}function Ji(){return!Rn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var fn=function(ft){function dt(Tt,Jt,Lt){var Ln=ft.call(this,Jt)||this;return Ln.code=Tt,Ln.customData=Lt,Ln.name="FirebaseError",Object.setPrototypeOf(Ln,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ln,Yt.prototype.create),Ln}return(0,s.ZT)(dt,ft),dt}(Error),Yt=function(){function ft(dt,Tt,Jt){this.service=dt,this.serviceName=Tt,this.errors=Jt}return ft.prototype.create=function(dt){for(var Tt=[],Jt=1;Jt<arguments.length;Jt++)Tt[Jt-1]=arguments[Jt];var Lt=Tt[0]||{},Ln=this.service+"/"+dt,di=this.errors[dt],Oi=di?On(di,Lt):"Error",ir=this.serviceName+": "+Oi+" ("+Ln+").",er=new fn(Ln,ir,Lt);return er},ft}();function On(ft,dt){return ft.replace(hi,function(Tt,Jt){var Lt=dt[Jt];return null!=Lt?String(Lt):"<"+Jt+"?>"})}var hi=/\{\$([^}]+)}/g;function mi(ft){return JSON.parse(ft)}function Un(ft){return JSON.stringify(ft)}var ii=function(ft){var dt={},Tt={},Jt={},Lt="";try{var Ln=ft.split(".");dt=mi(Ge(Ln[0])||""),Tt=mi(Ge(Ln[1])||""),Lt=Ln[2],Jt=Tt.d||{},delete Tt.d}catch(di){}return{header:dt,claims:Tt,data:Jt,signature:Lt}},xi=function(ft){var Tt=ii(ft).claims;return!!Tt&&"object"==typeof Tt&&Tt.hasOwnProperty("iat")},li=function(ft){var dt=ii(ft).claims;return"object"==typeof dt&&!0===dt.admin};function Yi(ft,dt){return Object.prototype.hasOwnProperty.call(ft,dt)}function Do(ft,dt){if(Object.prototype.hasOwnProperty.call(ft,dt))return ft[dt]}function fr(ft){for(var dt in ft)if(Object.prototype.hasOwnProperty.call(ft,dt))return!1;return!0}function io(ft,dt,Tt){var Jt={};for(var Lt in ft)Object.prototype.hasOwnProperty.call(ft,Lt)&&(Jt[Lt]=dt.call(Tt,ft[Lt],Lt,ft));return Jt}function Ri(ft){for(var dt=[],Tt=function(ir,er){Array.isArray(er)?er.forEach(function(He){dt.push(encodeURIComponent(ir)+"="+encodeURIComponent(He))}):dt.push(encodeURIComponent(ir)+"="+encodeURIComponent(er))},Jt=0,Lt=Object.entries(ft);Jt<Lt.length;Jt++){var Ln=Lt[Jt];Tt(Ln[0],Ln[1])}return dt.length?"&"+dt.join("&"):""}var Si=function(){function ft(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var dt=1;dt<this.blockSize;++dt)this.pad_[dt]=0;this.reset()}return ft.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ft.prototype.compress_=function(dt,Tt){Tt||(Tt=0);var Jt=this.W_;if("string"==typeof dt)for(var Lt=0;Lt<16;Lt++)Jt[Lt]=dt.charCodeAt(Tt)<<24|dt.charCodeAt(Tt+1)<<16|dt.charCodeAt(Tt+2)<<8|dt.charCodeAt(Tt+3),Tt+=4;else for(Lt=0;Lt<16;Lt++)Jt[Lt]=dt[Tt]<<24|dt[Tt+1]<<16|dt[Tt+2]<<8|dt[Tt+3],Tt+=4;for(Lt=16;Lt<80;Lt++)Jt[Lt]=4294967295&((Ln=Jt[Lt-3]^Jt[Lt-8]^Jt[Lt-14]^Jt[Lt-16])<<1|Ln>>>31);var we,De,di=this.chain_[0],Oi=this.chain_[1],ir=this.chain_[2],er=this.chain_[3],He=this.chain_[4];for(Lt=0;Lt<80;Lt++){Lt<40?Lt<20?(we=er^Oi&(ir^er),De=1518500249):(we=Oi^ir^er,De=1859775393):Lt<60?(we=Oi&ir|er&(Oi|ir),De=2400959708):(we=Oi^ir^er,De=3395469782);var Ln=(di<<5|di>>>27)+we+He+De+Jt[Lt]&4294967295;He=er,er=ir,ir=4294967295&(Oi<<30|Oi>>>2),Oi=di,di=Ln}this.chain_[0]=this.chain_[0]+di&4294967295,this.chain_[1]=this.chain_[1]+Oi&4294967295,this.chain_[2]=this.chain_[2]+ir&4294967295,this.chain_[3]=this.chain_[3]+er&4294967295,this.chain_[4]=this.chain_[4]+He&4294967295},ft.prototype.update=function(dt,Tt){if(null!=dt){void 0===Tt&&(Tt=dt.length);for(var Jt=Tt-this.blockSize,Lt=0,Ln=this.buf_,di=this.inbuf_;Lt<Tt;){if(0===di)for(;Lt<=Jt;)this.compress_(dt,Lt),Lt+=this.blockSize;if("string"==typeof dt){for(;Lt<Tt;)if(Ln[di]=dt.charCodeAt(Lt),++Lt,++di===this.blockSize){this.compress_(Ln),di=0;break}}else for(;Lt<Tt;)if(Ln[di]=dt[Lt],++Lt,++di===this.blockSize){this.compress_(Ln),di=0;break}}this.inbuf_=di,this.total_+=Tt}},ft.prototype.digest=function(){var dt=[],Tt=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Jt=this.blockSize-1;Jt>=56;Jt--)this.buf_[Jt]=255&Tt,Tt/=256;this.compress_(this.buf_);var Lt=0;for(Jt=0;Jt<5;Jt++)for(var Ln=24;Ln>=0;Ln-=8)dt[Lt]=this.chain_[Jt]>>Ln&255,++Lt;return dt},ft}();function co(ft,dt){var Tt=new Io(ft,dt);return Tt.subscribe.bind(Tt)}var Io=function(){function ft(dt,Tt){var Jt=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Tt,this.task.then(function(){dt(Jt)}).catch(function(Lt){Jt.error(Lt)})}return ft.prototype.next=function(dt){this.forEachObserver(function(Tt){Tt.next(dt)})},ft.prototype.error=function(dt){this.forEachObserver(function(Tt){Tt.error(dt)}),this.close(dt)},ft.prototype.complete=function(){this.forEachObserver(function(dt){dt.complete()}),this.close()},ft.prototype.subscribe=function(dt,Tt,Jt){var Ln,Lt=this;if(void 0===dt&&void 0===Tt&&void 0===Jt)throw new Error("Missing Observer.");void 0===(Ln=function(ft,dt){if("object"!=typeof ft||null===ft)return!1;for(var Tt=0,Jt=["next","error","complete"];Tt<Jt.length;Tt++){var Lt=Jt[Tt];if(Lt in ft&&"function"==typeof ft[Lt])return!0}return!1}(dt)?dt:{next:dt,error:Tt,complete:Jt}).next&&(Ln.next=Vr),void 0===Ln.error&&(Ln.error=Vr),void 0===Ln.complete&&(Ln.complete=Vr);var di=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Lt.finalError?Ln.error(Lt.finalError):Ln.complete()}catch(Oi){}}),this.observers.push(Ln),di},ft.prototype.unsubscribeOne=function(dt){void 0===this.observers||void 0===this.observers[dt]||(delete this.observers[dt],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ft.prototype.forEachObserver=function(dt){if(!this.finalized)for(var Tt=0;Tt<this.observers.length;Tt++)this.sendOne(Tt,dt)},ft.prototype.sendOne=function(dt,Tt){var Jt=this;this.task.then(function(){if(void 0!==Jt.observers&&void 0!==Jt.observers[dt])try{Tt(Jt.observers[dt])}catch(Lt){"undefined"!=typeof console&&console.error&&console.error(Lt)}})},ft.prototype.close=function(dt){var Tt=this;this.finalized||(this.finalized=!0,void 0!==dt&&(this.finalError=dt),this.task.then(function(){Tt.observers=void 0,Tt.onNoObservers=void 0}))},ft}();function Vr(){}var vr=function(ft,dt,Tt,Jt){var Lt;if(Jt<dt?Lt="at least "+dt:Jt>Tt&&(Lt=0===Tt?"none":"no more than "+Tt),Lt)throw new Error(ft+" failed: Was called with "+Jt+(1===Jt?" argument.":" arguments.")+" Expects "+Lt+".")};function ns(ft,dt){return ft+" failed: "+dt+" argument "}function uo(ft,dt,Tt,Jt){if((!Jt||Tt)&&"function"!=typeof Tt)throw new Error(ns(ft,dt)+"must be a valid function.")}function Ur(ft,dt,Tt,Jt){if((!Jt||Tt)&&("object"!=typeof Tt||null===Tt))throw new Error(ns(ft,dt)+"must be a valid context object.")}var is=function(ft){for(var dt=[],Tt=0,Jt=0;Jt<ft.length;Jt++){var Lt=ft.charCodeAt(Jt);if(Lt>=55296&&Lt<=56319){var Ln=Lt-55296;Jt++,Ee(Jt<ft.length,"Surrogate pair missing trail surrogate."),Lt=65536+(Ln<<10)+(ft.charCodeAt(Jt)-56320)}Lt<128?dt[Tt++]=Lt:Lt<2048?(dt[Tt++]=Lt>>6|192,dt[Tt++]=63&Lt|128):Lt<65536?(dt[Tt++]=Lt>>12|224,dt[Tt++]=Lt>>6&63|128,dt[Tt++]=63&Lt|128):(dt[Tt++]=Lt>>18|240,dt[Tt++]=Lt>>12&63|128,dt[Tt++]=Lt>>6&63|128,dt[Tt++]=63&Lt|128)}return dt},Hr=function(ft){for(var dt=0,Tt=0;Tt<ft.length;Tt++){var Jt=ft.charCodeAt(Tt);Jt<128?dt++:Jt<2048?dt+=2:Jt>=55296&&Jt<=56319?(dt+=4,Tt++):dt+=3}return dt};function cc(ft){return ft&&ft._delegate?ft._delegate:ft}},3300:(ai,_n,nt)=>{"use strict";var s;function Vt(ve){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(ve)}function Ee(ve,d){if(!(ve instanceof d))throw new TypeError("Cannot call a class as a function")}function A(ve,d){for(var p=0;p<d.length;p++){var y=d[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(ve,y.key,y)}}function gt(ve,d,p){return d&&A(ve.prototype,d),p&&A(ve,p),ve}function Dt(ve,d,p){return d in ve?Object.defineProperty(ve,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):ve[d]=p,ve}function wt(ve,d){var p=Object.keys(ve);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(ve);d&&(y=y.filter(function(C){return Object.getOwnPropertyDescriptor(ve,C).enumerable})),p.push.apply(p,y)}return p}function Be(ve){for(var d=1;d<arguments.length;d++){var p=null!=arguments[d]?arguments[d]:{};d%2?wt(Object(p),!0).forEach(function(y){Dt(ve,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(p)):wt(Object(p)).forEach(function(y){Object.defineProperty(ve,y,Object.getOwnPropertyDescriptor(p,y))})}return ve}function Ge(ve,d){if("function"!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(d&&d.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),d&&Et(ve,d)}function Ve(ve){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(d){return d.__proto__||Object.getPrototypeOf(d)})(ve)}function Et(ve,d){return(Et=Object.setPrototypeOf||function(p,y){return p.__proto__=y,p})(ve,d)}function lt(ve,d){return!d||"object"!=typeof d&&"function"!=typeof d?function(p){if(void 0===p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}(ve):d}function Ct(ve){var d=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(p){return!1}}();return function(){var p,y=Ve(ve);if(d){var C=Ve(this).constructor;p=Reflect.construct(y,arguments,C)}else p=y.apply(this,arguments);return lt(this,p)}}function zt(ve){return function(d){if(Array.isArray(d))return an(d)}(ve)||function(d){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d))return Array.from(d)}(ve)||function(d,p){if(d){if("string"==typeof d)return an(d,p);var y=Object.prototype.toString.call(d).slice(8,-1);if("Object"===y&&d.constructor&&(y=d.constructor.name),"Map"===y||"Set"===y)return Array.from(d);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return an(d,p)}}(ve)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(ve,d){(null==d||d>ve.length)&&(d=ve.length);for(var p=0,y=new Array(d);p<d;p++)y[p]=ve[p];return y}var Qe=function(){function ve(){Ee(this,ve)}return gt(ve,[{key:"shadeRGBColor",value:function(d,p){var y=p.split(","),C=d<0?0:255,M=d<0?-1*d:d,L=parseInt(y[0].slice(4),10),R=parseInt(y[1],10),H=parseInt(y[2],10);return"rgb("+(Math.round((C-L)*M)+L)+","+(Math.round((C-R)*M)+R)+","+(Math.round((C-H)*M)+H)+")"}},{key:"shadeHexColor",value:function(d,p){var y=parseInt(p.slice(1),16),C=d<0?0:255,M=d<0?-1*d:d,L=y>>16,R=y>>8&255,H=255&y;return"#"+(16777216+65536*(Math.round((C-L)*M)+L)+256*(Math.round((C-R)*M)+R)+(Math.round((C-H)*M)+H)).toString(16).slice(1)}},{key:"shadeColor",value:function(d,p){return ve.isColorHex(p)?this.shadeHexColor(d,p):this.shadeRGBColor(d,p)}}],[{key:"bind",value:function(d,p){return function(){return d.apply(p,arguments)}}},{key:"isObject",value:function(d){return d&&"object"===Vt(d)&&!Array.isArray(d)&&null!=d}},{key:"listToArray",value:function(d){var p,y=[];for(p=0;p<d.length;p++)y[p]=d[p];return y}},{key:"extend",value:function(d,p){var y=this;"function"!=typeof Object.assign&&(Object.assign=function(M){if(null==M)throw new TypeError("Cannot convert undefined or null to object");for(var L=Object(M),R=1;R<arguments.length;R++){var H=arguments[R];if(null!=H)for(var G in H)H.hasOwnProperty(G)&&(L[G]=H[G])}return L});var C=Object.assign({},d);return this.isObject(d)&&this.isObject(p)&&Object.keys(p).forEach(function(M){y.isObject(p[M])&&M in d?C[M]=y.extend(d[M],p[M]):Object.assign(C,Dt({},M,p[M]))}),C}},{key:"extendArray",value:function(d,p){var y=[];return d.map(function(C){y.push(ve.extend(p,C))}),y}},{key:"monthMod",value:function(d){return d%12}},{key:"clone",value:function(d){if("[object Array]"===Object.prototype.toString.call(d)){for(var p=[],y=0;y<d.length;y++)p[y]=this.clone(d[y]);return p}if("[object Null]"===Object.prototype.toString.call(d))return null;if("[object Date]"===Object.prototype.toString.call(d))return d;if("object"===Vt(d)){var C={};for(var M in d)d.hasOwnProperty(M)&&(C[M]=this.clone(d[M]));return C}return d}},{key:"log10",value:function(d){return Math.log(d)/Math.LN10}},{key:"roundToBase10",value:function(d){return Math.pow(10,Math.floor(Math.log10(d)))}},{key:"roundToBase",value:function(d,p){return Math.pow(p,Math.floor(Math.log(d)/Math.log(p)))}},{key:"parseNumber",value:function(d){return null===d?d:parseFloat(d)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(d){var p=String(d).split(/[eE]/);if(1===p.length)return p[0];var y="",C=d<0?"-":"",M=p[0].replace(".",""),L=Number(p[1])+1;if(L<0){for(y=C+"0.";L++;)y+="0";return y+M.replace(/^-/,"")}for(L-=M.length;L--;)y+="0";return M+y}},{key:"getDimensions",value:function(d){var p=getComputedStyle(d,null),y=d.clientHeight,C=d.clientWidth;return y-=parseFloat(p.paddingTop)+parseFloat(p.paddingBottom),[C-=parseFloat(p.paddingLeft)+parseFloat(p.paddingRight),y]}},{key:"getBoundingClientRect",value:function(d){var p=d.getBoundingClientRect();return{top:p.top,right:p.right,bottom:p.bottom,left:p.left,width:d.clientWidth,height:d.clientHeight,x:p.left,y:p.top}}},{key:"getLargestStringFromArr",value:function(d){return d.reduce(function(p,y){return Array.isArray(y)&&(y=y.reduce(function(C,M){return C.length>M.length?C:M})),p.length>y.length?p:y},0)}},{key:"hexToRgba",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==d.substring(0,1)&&(d="#999999");var y=d.replace("#","");y=y.match(new RegExp("(.{"+y.length/3+"})","g"));for(var C=0;C<y.length;C++)y[C]=parseInt(1===y[C].length?y[C]+y[C]:y[C],16);return void 0!==p&&y.push(p),"rgba("+y.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(d){return parseFloat(d.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(d){return(d=d.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===d.length?"#"+("0"+parseInt(d[1],10).toString(16)).slice(-2)+("0"+parseInt(d[2],10).toString(16)).slice(-2)+("0"+parseInt(d[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(d){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(d)}},{key:"getPolygonPos",value:function(d,p){for(var y=[],C=2*Math.PI/p,M=0;M<p;M++){var L={};L.x=d*Math.sin(M*C),L.y=-d*Math.cos(M*C),y.push(L)}return y}},{key:"polarToCartesian",value:function(d,p,y,C){var M=(C-90)*Math.PI/180;return{x:d+y*Math.cos(M),y:p+y*Math.sin(M)}}},{key:"escapeString",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",y=d.toString().slice();return y.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,p)}},{key:"negToZero",value:function(d){return d<0?0:d}},{key:"moveIndexInArray",value:function(d,p,y){if(y>=d.length)for(var C=y-d.length+1;C--;)d.push(void 0);return d.splice(y,0,d.splice(p,1)[0]),d}},{key:"extractNumber",value:function(d){return parseFloat(d.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(d,p){for(;(d=d.parentElement)&&!d.classList.contains(p););return d}},{key:"setELstyles",value:function(d,p){for(var y in p)p.hasOwnProperty(y)&&(d.style.key=p[y])}},{key:"isNumber",value:function(d){return!isNaN(d)&&parseFloat(Number(d))===d&&!isNaN(parseInt(d,10))}},{key:"isFloat",value:function(d){return Number(d)===d&&d%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var d=window.navigator.userAgent,p=d.indexOf("MSIE ");if(p>0)return parseInt(d.substring(p+5,d.indexOf(".",p)),10);if(d.indexOf("Trident/")>0){var y=d.indexOf("rv:");return parseInt(d.substring(y+3,d.indexOf(".",y)),10)}var C=d.indexOf("Edge/");return C>0&&parseInt(d.substring(C+5,d.indexOf(".",C)),10)}},{key:"sanitizeDom",value:function(d){return String(d).replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;")}}]),ve}(),Rn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.setEasingFunctions()}return gt(ve,[{key:"setEasingFunctions",value:function(){var d;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":d="-";break;case"easein":d="<";break;case"easeout":d=">";break;case"easeinout":d="<>";break;case"swing":d=function(p){var y=1.70158;return(p-=1)*p*((y+1)*p+y)+1};break;case"bounce":d=function(p){return p<1/2.75?7.5625*p*p:p<2/2.75?7.5625*(p-=1.5/2.75)*p+.75:p<2.5/2.75?7.5625*(p-=2.25/2.75)*p+.9375:7.5625*(p-=2.625/2.75)*p+.984375};break;case"elastic":d=function(p){return p===!!p?p:Math.pow(2,-10*p)*Math.sin((p-.075)*(2*Math.PI)/.3)+1};break;default:d="<>"}this.w.globals.easing=d}}},{key:"animateLine",value:function(d,p,y,C){d.attr(p).animate(C).attr(y)}},{key:"animateMarker",value:function(d,p,y,C,M,L){p||(p=0),d.attr({r:p,width:p,height:p}).animate(C,M).attr({r:y,width:y.width,height:y.height}).afterAll(function(){L()})}},{key:"animateCircle",value:function(d,p,y,C,M){d.attr({r:p.r,cx:p.cx,cy:p.cy}).animate(C,M).attr({r:y.r,cx:y.cx,cy:y.cy})}},{key:"animateRect",value:function(d,p,y,C,M){d.attr(p).animate(C).attr(y).afterAll(function(){return M()})}},{key:"animatePathsGradually",value:function(d){var J=this.w,te=0;J.config.chart.animations.animateGradually.enabled&&(te=J.config.chart.animations.animateGradually.delay),J.config.chart.animations.dynamicAnimation.enabled&&J.globals.dataChanged&&"bar"!==J.config.chart.type&&(te=0),this.morphSVG(d.el,d.realIndex,d.j,"line"!==J.config.chart.type||J.globals.comboCharts?d.fill:"stroke",d.pathFrom,d.pathTo,d.speed,d.delay*te)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(d){d.el.classList.remove("apexcharts-element-hidden")})}},{key:"animationCompleted",value:function(d){var p=this.w;p.globals.animationEnded||(p.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof p.config.chart.events.animationEnd&&p.config.chart.events.animationEnd(this.ctx,{el:d,w:p}))}},{key:"morphSVG",value:function(d,p,y,C,M,L,R,H){var G=this,J=this.w;M||(M=d.attr("pathFrom")),L||(L=d.attr("pathTo"));var te=function(K){return"radar"===J.config.chart.type&&(R=1),"M 0 ".concat(J.globals.gridHeight)};(!M||M.indexOf("undefined")>-1||M.indexOf("NaN")>-1)&&(M=te()),(!L||L.indexOf("undefined")>-1||L.indexOf("NaN")>-1)&&(L=te()),J.globals.shouldAnimate||(R=1),d.plot(M).animate(1,J.globals.easing,H).plot(M).animate(R,J.globals.easing,H).plot(L).afterAll(function(){Qe.isNumber(y)?y===J.globals.series[J.globals.maxValsInArrayIndex].length-2&&J.globals.shouldAnimate&&G.animationCompleted(d):"none"!==C&&J.globals.shouldAnimate&&(!J.globals.comboCharts&&p===J.globals.series.length-1||J.globals.comboCharts)&&G.animationCompleted(d),G.showDelayedElements()})}}]),ve}(),dn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"getDefaultFilter",value:function(d,p){var y=this.w;d.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==y.config.states.normal.filter?this.applyFilter(d,p,y.config.states.normal.filter.type,y.config.states.normal.filter.value):y.config.chart.dropShadow.enabled&&this.dropShadow(d,y.config.chart.dropShadow,p)}},{key:"addNormalFilter",value:function(d,p){var y=this.w;y.config.chart.dropShadow.enabled&&!d.node.classList.contains("apexcharts-marker")&&this.dropShadow(d,y.config.chart.dropShadow,p)}},{key:"addLightenFilter",value:function(d,p,y){var C=this,M=this.w,L=y.intensity;d.unfilter(!0),new window.SVG.Filter,d.filter(function(R){var H=M.config.chart.dropShadow;(H.enabled?C.addShadow(R,p,H):R).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:L}})}),d.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(d.filterer.node)}},{key:"addDarkenFilter",value:function(d,p,y){var C=this,M=this.w,L=y.intensity;d.unfilter(!0),new window.SVG.Filter,d.filter(function(R){var H=M.config.chart.dropShadow;(H.enabled?C.addShadow(R,p,H):R).componentTransfer({rgb:{type:"linear",slope:L}})}),d.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(d.filterer.node)}},{key:"applyFilter",value:function(d,p,y){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(y){case"none":this.addNormalFilter(d,p);break;case"lighten":this.addLightenFilter(d,p,{intensity:C});break;case"darken":this.addDarkenFilter(d,p,{intensity:C})}}},{key:"addShadow",value:function(d,p,y){var C=y.blur,M=y.top,L=y.left,R=y.color,H=y.opacity,G=d.flood(Array.isArray(R)?R[p]:R,H).composite(d.sourceAlpha,"in").offset(L,M).gaussianBlur(C).merge(d.source);return d.blend(d.source,G)}},{key:"dropShadow",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,C=p.top,M=p.left,L=p.blur,R=p.color,H=p.opacity,G=p.noUserSpaceOnUse,J=this.w;return d.unfilter(!0),Qe.isIE()&&"radialBar"===J.config.chart.type||(R=Array.isArray(R)?R[y]:R,d.filter(function(te){var K;K=Qe.isSafari()||Qe.isFirefox()||Qe.isIE()?te.flood(R,H).composite(te.sourceAlpha,"in").offset(M,C).gaussianBlur(L):te.flood(R,H).composite(te.sourceAlpha,"in").offset(M,C).gaussianBlur(L).merge(te.source),te.blend(te.source,K)}),G||d.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(d.filterer.node)),d}},{key:"setSelectionFilter",value:function(d,p,y){var C=this.w;if(void 0!==C.globals.selectedDataPoints[p]&&C.globals.selectedDataPoints[p].indexOf(y)>-1){d.node.setAttribute("selected",!0);var M=C.config.states.active.filter;"none"!==M&&this.applyFilter(d,p,M.type,M.value)}}},{key:"_scaleFilterSize",value:function(d){!function(p){for(var y in p)p.hasOwnProperty(y)&&d.setAttribute(y,p[y])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),ve}(),Mt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"drawLine",value:function(d,p,y,C){var M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,H=this.w,G=H.globals.dom.Paper.line().attr({x1:d,y1:p,x2:y,y2:C,stroke:M,"stroke-dasharray":L,"stroke-width":R});return G}},{key:"drawRect",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,H=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,G=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,J=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,te=this.w,K=te.globals.dom.Paper.rect();return K.attr({x:d,y:p,width:y>0?y:0,height:C>0?C:0,rx:M,ry:M,opacity:R,"stroke-width":null!==H?H:0,stroke:null!==G?G:"none","stroke-dasharray":J}),K.node.setAttribute("fill",L),K}},{key:"drawPolygon",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",M=this.w,L=M.globals.dom.Paper.polygon(d).attr({fill:C,stroke:p,"stroke-width":y});return L}},{key:"drawCircle",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=this.w;d<0&&(d=0);var C=y.globals.dom.Paper.circle(2*d);return null!==p&&C.attr(p),C}},{key:"drawPath",value:function(d){var p=d.d,y=void 0===p?"":p,C=d.stroke,M=void 0===C?"#a8a8a8":C,L=d.strokeWidth,R=void 0===L?1:L,H=d.fill,G=d.fillOpacity,J=void 0===G?1:G,te=d.strokeOpacity,K=void 0===te?1:te,ae=d.classes,pe=d.strokeLinecap,ge=void 0===pe?null:pe,xe=d.strokeDashArray,Me=void 0===xe?0:xe,ze=this.w;return null===ge&&(ge=ze.config.stroke.lineCap),(y.indexOf("undefined")>-1||y.indexOf("NaN")>-1)&&(y="M 0 ".concat(ze.globals.gridHeight)),ze.globals.dom.Paper.path(y).attr({fill:H,"fill-opacity":J,stroke:M,"stroke-opacity":K,"stroke-linecap":ge,"stroke-width":R,"stroke-dasharray":Me,class:ae})}},{key:"group",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,p=this.w,y=p.globals.dom.Paper.group();return null!==d&&y.attr(d),y}},{key:"move",value:function(d,p){return["M",d,p].join(" ")}},{key:"line",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=null;return null===y?C=["L",d,p].join(" "):"H"===y?C=["H",d].join(" "):"V"===y&&(C=["V",p].join(" ")),C}},{key:"curve",value:function(d,p,y,C,M,L){return["C",d,p,y,C,M,L].join(" ")}},{key:"quadraticCurve",value:function(d,p,y,C){return["Q",d,p,y,C].join(" ")}},{key:"arc",value:function(d,p,y,C,M,L,R){var H=arguments.length>7&&void 0!==arguments[7]&&arguments[7],G="A";H&&(G="a");var J=[G,d,p,y,C,M,L,R].join(" ");return J}},{key:"renderPaths",value:function(d){var p,y=d.j,C=d.realIndex,M=d.pathFrom,L=d.pathTo,R=d.stroke,H=d.strokeWidth,G=d.strokeLinecap,J=d.fill,te=d.animationDelay,K=d.initialSpeed,ae=d.dataChangeSpeed,pe=d.className,ge=d.shouldClipToGrid,xe=void 0===ge||ge,Me=d.bindEventsOnPaths,ze=void 0===Me||Me,Ke=d.drawShadow,Y=void 0===Ke||Ke,ne=this.w,be=new dn(this.ctx),Ie=new Rn(this.ctx),Je=this.w.config.chart.animations.enabled,Nt=Je&&this.w.config.chart.animations.dynamicAnimation.enabled,St=!!(Je&&!ne.globals.resized||Nt&&ne.globals.dataChanged&&ne.globals.shouldAnimate);St?p=M:(p=L,ne.globals.animationEnded=!0);var gn,Xt=ne.config.stroke.dashArray;gn=Array.isArray(Xt)?Xt[C]:ne.config.stroke.dashArray;var hn=this.drawPath({d:p,stroke:R,strokeWidth:H,fill:J,fillOpacity:1,classes:pe,strokeLinecap:G,strokeDashArray:gn});hn.attr("index",C),xe&&hn.attr({"clip-path":"url(#gridRectMask".concat(ne.globals.cuid,")")}),"none"!==ne.config.states.normal.filter.type?be.getDefaultFilter(hn,C):ne.config.chart.dropShadow.enabled&&Y&&(!ne.config.chart.dropShadow.enabledOnSeries||ne.config.chart.dropShadow.enabledOnSeries&&-1!==ne.config.chart.dropShadow.enabledOnSeries.indexOf(C))&&be.dropShadow(hn,ne.config.chart.dropShadow,C),ze&&(hn.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,hn)),hn.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,hn)),hn.node.addEventListener("mousedown",this.pathMouseDown.bind(this,hn))),hn.attr({pathTo:L,pathFrom:M});var Ni={el:hn,j:y,realIndex:C,pathFrom:M,pathTo:L,fill:J,strokeWidth:H,delay:te};return!Je||ne.globals.resized||ne.globals.dataChanged?!ne.globals.resized&&ne.globals.dataChanged||Ie.showDelayedElements():Ie.animatePathsGradually(Be(Be({},Ni),{},{speed:K})),ne.globals.dataChanged&&Nt&&St&&Ie.animatePathsGradually(Be(Be({},Ni),{},{speed:ae})),hn}},{key:"drawPattern",value:function(d,p,y){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,L=this.w,R=L.globals.dom.Paper.pattern(p,y,function(H){"horizontalLines"===d?H.line(0,0,y,0).stroke({color:C,width:M+1}):"verticalLines"===d?H.line(0,0,0,p).stroke({color:C,width:M+1}):"slantedLines"===d?H.line(0,0,p,y).stroke({color:C,width:M}):"squares"===d?H.rect(p,y).fill("none").stroke({color:C,width:M}):"circles"===d&&H.circle(p).fill("none").stroke({color:C,width:M})});return R}},{key:"drawGradient",value:function(d,p,y,C,M){var L,R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,G=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,J=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,te=this.w;p.length<9&&0===p.indexOf("#")&&(p=Qe.hexToRgba(p,C)),y.length<9&&0===y.indexOf("#")&&(y=Qe.hexToRgba(y,M));var K=0,ae=1,pe=1,ge=null;null!==H&&(K=void 0!==H[0]?H[0]/100:0,ae=void 0!==H[1]?H[1]/100:1,pe=void 0!==H[2]?H[2]/100:1,ge=void 0!==H[3]?H[3]/100:null);var xe=!("donut"!==te.config.chart.type&&"pie"!==te.config.chart.type&&"polarArea"!==te.config.chart.type&&"bubble"!==te.config.chart.type);if(L=te.globals.dom.Paper.gradient(xe?"radial":"linear",null===G||0===G.length?function(Ke){Ke.at(K,p,C),Ke.at(ae,y,M),Ke.at(pe,y,M),null!==ge&&Ke.at(ge,p,C)}:function(Ke){(Array.isArray(G[J])?G[J]:G).forEach(function(Y){Ke.at(Y.offset/100,Y.color,Y.opacity)})}),xe){var Me=te.globals.gridWidth/2,ze=te.globals.gridHeight/2;L.attr("bubble"!==te.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:Me,cy:ze,r:R}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===d?L.from(0,0).to(0,1):"diagonal"===d?L.from(0,0).to(1,1):"horizontal"===d?L.from(0,1).to(1,1):"diagonal2"===d&&L.from(1,0).to(0,1);return L}},{key:"drawText",value:function(d){var p,y=d.x,C=d.y,M=d.text,L=d.textAnchor,R=d.fontSize,H=d.fontFamily,G=d.fontWeight,J=d.foreColor,te=d.opacity,K=d.cssClass,ae=void 0===K?"":K,pe=d.isPlainText,ge=void 0===pe||pe,xe=this.w;return void 0===M&&(M=""),L||(L="start"),J&&J.length||(J=xe.config.chart.foreColor),H=H||xe.config.chart.fontFamily,G=G||"regular",(p=Array.isArray(M)?xe.globals.dom.Paper.text(function(Me){for(var ze=0;ze<M.length;ze++)0===ze?Me.tspan(M[ze]):Me.tspan(M[ze]).newLine()}):ge?xe.globals.dom.Paper.plain(M):xe.globals.dom.Paper.text(function(Me){return Me.tspan(M)})).attr({x:y,y:C,"text-anchor":L,"dominant-baseline":"auto","font-size":R,"font-family":H,"font-weight":G,fill:J,class:"apexcharts-text "+ae}),p.node.style.fontFamily=H,p.node.style.opacity=te,p}},{key:"drawMarker",value:function(d,p,y){d=d||0;var C=y.pSize||0,M=null;if("square"===y.shape||"rect"===y.shape){var L=void 0===y.pRadius?C/2:y.pRadius;null!==p&&C||(C=0,L=0);var R=1.2*C+L,H=this.drawRect(R,R,R,R,L);H.attr({x:d-R/2,y:p-R/2,cx:d,cy:p,class:y.class?y.class:"",fill:y.pointFillColor,"fill-opacity":y.pointFillOpacity?y.pointFillOpacity:1,stroke:y.pointStrokeColor,"stroke-width":y.pointStrokeWidth?y.pointStrokeWidth:0,"stroke-opacity":y.pointStrokeOpacity?y.pointStrokeOpacity:1}),M=H}else"circle"!==y.shape&&y.shape||(Qe.isNumber(p)||(C=0,p=0),M=this.drawCircle(C,{cx:d,cy:p,class:y.class?y.class:"",stroke:y.pointStrokeColor,fill:y.pointFillColor,"fill-opacity":y.pointFillOpacity?y.pointFillOpacity:1,"stroke-width":y.pointStrokeWidth?y.pointStrokeWidth:0,"stroke-opacity":y.pointStrokeOpacity?y.pointStrokeOpacity:1}));return M}},{key:"pathMouseEnter",value:function(d,p){var y=this.w,C=new dn(this.ctx),M=parseInt(d.node.getAttribute("index"),10),L=parseInt(d.node.getAttribute("j"),10);if("function"==typeof y.config.chart.events.dataPointMouseEnter&&y.config.chart.events.dataPointMouseEnter(p,this.ctx,{seriesIndex:M,dataPointIndex:L,w:y}),this.ctx.events.fireEvent("dataPointMouseEnter",[p,this.ctx,{seriesIndex:M,dataPointIndex:L,w:y}]),("none"===y.config.states.active.filter.type||"true"!==d.node.getAttribute("selected"))&&"none"!==y.config.states.hover.filter.type&&"none"!==y.config.states.active.filter.type&&!y.globals.isTouchDevice){var R=y.config.states.hover.filter;C.applyFilter(d,M,R.type,R.value)}}},{key:"pathMouseLeave",value:function(d,p){var y=this.w,C=new dn(this.ctx),M=parseInt(d.node.getAttribute("index"),10),L=parseInt(d.node.getAttribute("j"),10);"function"==typeof y.config.chart.events.dataPointMouseLeave&&y.config.chart.events.dataPointMouseLeave(p,this.ctx,{seriesIndex:M,dataPointIndex:L,w:y}),this.ctx.events.fireEvent("dataPointMouseLeave",[p,this.ctx,{seriesIndex:M,dataPointIndex:L,w:y}]),"none"!==y.config.states.active.filter.type&&"true"===d.node.getAttribute("selected")||"none"!==y.config.states.hover.filter.type&&C.getDefaultFilter(d,M)}},{key:"pathMouseDown",value:function(d,p){var y=this.w,C=new dn(this.ctx),M=parseInt(d.node.getAttribute("index"),10),L=parseInt(d.node.getAttribute("j"),10),R="false";if("true"===d.node.getAttribute("selected")){if(d.node.setAttribute("selected","false"),y.globals.selectedDataPoints[M].indexOf(L)>-1){var H=y.globals.selectedDataPoints[M].indexOf(L);y.globals.selectedDataPoints[M].splice(H,1)}}else{if(!y.config.states.active.allowMultipleDataPointsSelection&&y.globals.selectedDataPoints.length>0){y.globals.selectedDataPoints=[];var G=y.globals.dom.Paper.select(".apexcharts-series path").members,J=y.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,te=function(ae){Array.prototype.forEach.call(ae,function(pe){pe.node.setAttribute("selected","false"),C.getDefaultFilter(pe,M)})};te(G),te(J)}d.node.setAttribute("selected","true"),R="true",void 0===y.globals.selectedDataPoints[M]&&(y.globals.selectedDataPoints[M]=[]),y.globals.selectedDataPoints[M].push(L)}if("true"===R){var K=y.config.states.active.filter;"none"!==K&&C.applyFilter(d,M,K.type,K.value)}else"none"!==y.config.states.active.filter.type&&C.getDefaultFilter(d,M);"function"==typeof y.config.chart.events.dataPointSelection&&y.config.chart.events.dataPointSelection(p,this.ctx,{selectedDataPoints:y.globals.selectedDataPoints,seriesIndex:M,dataPointIndex:L,w:y}),p&&this.ctx.events.fireEvent("dataPointSelection",[p,this.ctx,{selectedDataPoints:y.globals.selectedDataPoints,seriesIndex:M,dataPointIndex:L,w:y}])}},{key:"rotateAroundCenter",value:function(d){var p=d.getBBox();return{x:p.x+p.width/2,y:p.y+p.height/2}}},{key:"getTextRects",value:function(d,p,y,C){var M=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],L=this.w,R=this.drawText({x:-200,y:-200,text:d,textAnchor:"start",fontSize:p,fontFamily:y,foreColor:"#fff",opacity:0});C&&R.attr("transform",C),L.globals.dom.Paper.add(R);var H=R.bbox();return M||(H=R.node.getBoundingClientRect()),R.remove(),{width:H.width,height:H.height}}},{key:"placeTextWithEllipsis",value:function(d,p,y){if("function"==typeof d.getComputedTextLength&&(d.textContent=p,p.length>0&&d.getComputedTextLength()>=y/1.1)){for(var C=p.length-3;C>0;C-=3)if(d.getSubStringLength(0,C)<=y/1.1)return void(d.textContent=p.substring(0,C)+"...");d.textContent="."}}}],[{key:"setAttrs",value:function(d,p){for(var y in p)p.hasOwnProperty(y)&&d.setAttribute(y,p[y])}}]),ve}(),Vi=function(){function ve(d){Ee(this,ve),this.w=d.w,this.annoCtx=d}return gt(ve,[{key:"setOrientations",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=this.w;if("vertical"===d.label.orientation){var C=null!==p?p:0,M=y.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(C,"']"));if(null!==M){var L=M.getBoundingClientRect();M.setAttribute("x",parseFloat(M.getAttribute("x"))-L.height+4),M.setAttribute("y","top"===d.label.position?parseFloat(M.getAttribute("y"))+L.width:parseFloat(M.getAttribute("y"))-L.width);var R=this.annoCtx.graphics.rotateAroundCenter(M),H=R.x,G=R.y;M.setAttribute("transform","rotate(-90 ".concat(H," ").concat(G,")"))}}}},{key:"addBackgroundToAnno",value:function(d,p){var y=this.w;if(!d||!p.label.text||p.label.text&&!p.label.text.trim())return null;var C=y.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),M=d.getBoundingClientRect(),L=p.label.style.padding.left,R=p.label.style.padding.right,H=p.label.style.padding.top,G=p.label.style.padding.bottom;"vertical"===p.label.orientation&&(H=p.label.style.padding.left,G=p.label.style.padding.right,L=p.label.style.padding.top,R=p.label.style.padding.bottom);var K=this.annoCtx.graphics.drawRect(M.left-C.left-L-y.globals.barPadForNumericAxis,M.top-C.top-H,M.width+L+R,M.height+H+G,p.label.borderRadius,p.label.style.background,1,p.label.borderWidth,p.label.borderColor,0);return p.id&&K.node.classList.add(p.id),K}},{key:"annotationsBackground",value:function(){var d=this,p=this.w,y=function(C,M,L){var R=p.globals.dom.baseEl.querySelector(".apexcharts-".concat(L,"-annotations .apexcharts-").concat(L,"-annotation-label[rel='").concat(M,"']"));if(R){var H=R.parentNode,G=d.addBackgroundToAnno(R,C);G&&H.insertBefore(G.node,R)}};p.config.annotations.xaxis.map(function(C,M){y(C,M,"xaxis")}),p.config.annotations.yaxis.map(function(C,M){y(C,M,"yaxis")}),p.config.annotations.points.map(function(C,M){y(C,M,"point")})}},{key:"getStringX",value:function(d){var p=this.w,y=d;p.config.xaxis.convertedCatToNumeric&&p.globals.categoryLabels.length&&(d=p.globals.categoryLabels.indexOf(d)+1);var C=p.globals.labels.indexOf(d),M=p.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(C+1)+")");return M&&(y=parseFloat(M.getAttribute("x"))),y}}]),ve}(),$r=function(){function ve(d){Ee(this,ve),this.w=d.w,this.annoCtx=d,this.invertAxis=this.annoCtx.invertAxis}return gt(ve,[{key:"addXaxisAnnotation",value:function(d,p,y){var C=this.w,M=this.invertAxis?C.globals.minY:C.globals.minX,L=this.invertAxis?C.globals.maxY:C.globals.maxX,R=this.invertAxis?C.globals.yRange[0]:C.globals.xRange,H=(d.x-M)/(R/C.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(H=(L-d.x)/(R/C.globals.gridWidth));var G=d.label.text;"category"!==C.config.xaxis.type&&!C.config.xaxis.convertedCatToNumeric||this.invertAxis||C.globals.dataFormatXNumeric||(H=this.annoCtx.helpers.getStringX(d.x));var J=d.strokeDashArray;if(Qe.isNumber(H)){if(null==d.x2){var te=this.annoCtx.graphics.drawLine(H+d.offsetX,0+d.offsetY,H+d.offsetX,C.globals.gridHeight+d.offsetY,d.borderColor,J,d.borderWidth);p.appendChild(te.node),d.id&&te.node.classList.add(d.id)}else{var K=(d.x2-M)/(R/C.globals.gridWidth);if(this.annoCtx.inversedReversedAxis&&(K=(L-d.x2)/(R/C.globals.gridWidth)),"category"!==C.config.xaxis.type&&!C.config.xaxis.convertedCatToNumeric||this.invertAxis||C.globals.dataFormatXNumeric||(K=this.annoCtx.helpers.getStringX(d.x2)),K<H){var ae=H;H=K,K=ae}var pe=this.annoCtx.graphics.drawRect(H+d.offsetX,0+d.offsetY,K-H,C.globals.gridHeight+d.offsetY,0,d.fillColor,d.opacity,1,d.borderColor,J);pe.node.classList.add("apexcharts-annotation-rect"),pe.attr("clip-path","url(#gridRectMask".concat(C.globals.cuid,")")),p.appendChild(pe.node),d.id&&pe.node.classList.add(d.id)}var ge="top"===d.label.position?4:C.globals.gridHeight,xe=this.annoCtx.graphics.getTextRects(G,parseFloat(d.label.style.fontSize)),Me=this.annoCtx.graphics.drawText({x:H+d.label.offsetX,y:ge+d.label.offsetY-("vertical"===d.label.orientation?"top"===d.label.position?xe.width/2-12:-xe.width/2:0),text:G,textAnchor:d.label.textAnchor,fontSize:d.label.style.fontSize,fontFamily:d.label.style.fontFamily,fontWeight:d.label.style.fontWeight,foreColor:d.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(d.label.style.cssClass," ").concat(d.id?d.id:"")});Me.attr({rel:y}),p.appendChild(Me.node),this.annoCtx.helpers.setOrientations(d,y)}}},{key:"drawXAxisAnnotations",value:function(){var d=this,p=this.w,y=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return p.config.annotations.xaxis.map(function(C,M){d.addXaxisAnnotation(C,y.node,M)}),y}}]),ve}(),Vn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"getStackedSeriesTotals",value:function(){var d=this.w,p=[];if(0===d.globals.series.length)return p;for(var y=0;y<d.globals.series[d.globals.maxValsInArrayIndex].length;y++){for(var C=0,M=0;M<d.globals.series.length;M++)void 0!==d.globals.series[M][y]&&(C+=d.globals.series[M][y]);p.push(C)}return d.globals.stackedSeriesTotals=p,p}},{key:"getSeriesTotalByIndex",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===d?this.w.config.series.reduce(function(p,y){return p+y},0):this.w.globals.series[d].reduce(function(p,y){return p+y},0)}},{key:"isSeriesNull",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===d?this.w.config.series.filter(function(p){return null!==p}):this.w.config.series[d].data.filter(function(p){return null!==p})).length}},{key:"seriesHaveSameValues",value:function(d){return this.w.globals.series[d].every(function(p,y,C){return p===C[0]})}},{key:"getCategoryLabels",value:function(d){var p=this.w,y=d.slice();return p.config.xaxis.convertedCatToNumeric&&(y=d.map(function(C,M){return p.config.xaxis.labels.formatter(C-p.globals.minX+1)})),y}},{key:"getLargestSeries",value:function(){var d=this.w;d.globals.maxValsInArrayIndex=d.globals.series.map(function(p){return p.length}).indexOf(Math.max.apply(Math,d.globals.series.map(function(p){return p.length})))}},{key:"getLargestMarkerSize",value:function(){var d=this.w,p=0;return d.globals.markers.size.forEach(function(y){p=Math.max(p,y)}),d.globals.markers.largestSize=p,p}},{key:"getSeriesTotals",value:function(){var d=this.w;d.globals.seriesTotals=d.globals.series.map(function(p,y){var C=0;if(Array.isArray(p))for(var M=0;M<p.length;M++)C+=p[M];else C+=p;return C})}},{key:"getSeriesTotalsXRange",value:function(d,p){var y=this.w;return y.globals.series.map(function(C,M){for(var L=0,R=0;R<C.length;R++)y.globals.seriesX[M][R]>d&&y.globals.seriesX[M][R]<p&&(L+=C[R]);return L})}},{key:"getPercentSeries",value:function(){var d=this.w;d.globals.seriesPercent=d.globals.series.map(function(p,y){var C=[];if(Array.isArray(p))for(var M=0;M<p.length;M++){var L=d.globals.stackedSeriesTotals[M],R=0;L&&(R=100*p[M]/L),C.push(R)}else{var H=100*p/d.globals.seriesTotals.reduce(function(G,J){return G+J},0);C.push(H)}return C})}},{key:"getCalculatedRatios",value:function(){var d,p,y,C,M=this.w.globals,L=[],R=0,H=[],G=.1,J=0;if(M.yRange=[],M.isMultipleYAxis)for(var te=0;te<M.minYArr.length;te++)M.yRange.push(Math.abs(M.minYArr[te]-M.maxYArr[te])),H.push(0);else M.yRange.push(Math.abs(M.minY-M.maxY));M.xRange=Math.abs(M.maxX-M.minX),M.zRange=Math.abs(M.maxZ-M.minZ);for(var K=0;K<M.yRange.length;K++)L.push(M.yRange[K]/M.gridHeight);if(p=M.xRange/M.gridWidth,y=Math.abs(M.initialMaxX-M.initialMinX)/M.gridWidth,d=M.yRange/M.gridWidth,C=M.xRange/M.gridHeight,(R=M.zRange/M.gridHeight*16)||(R=1),M.minY!==Number.MIN_VALUE&&0!==Math.abs(M.minY)&&(M.hasNegs=!0),M.isMultipleYAxis){H=[];for(var ae=0;ae<L.length;ae++)H.push(-M.minYArr[ae]/L[ae])}else H.push(-M.minY/L[0]),M.minY!==Number.MIN_VALUE&&0!==Math.abs(M.minY)&&(G=-M.minY/d,J=M.minX/p);return{yRatio:L,invertedYRatio:d,zRatio:R,xRatio:p,initialXRatio:y,invertedXRatio:C,baseLineInvertedY:G,baseLineY:H,baseLineX:J}}},{key:"getLogSeries",value:function(d){var p=this,y=this.w;return y.globals.seriesLog=d.map(function(C,M){return y.config.yaxis[M]&&y.config.yaxis[M].logarithmic?C.map(function(L){return null===L?null:p.getLogVal(L,M)}):C}),y.globals.invalidLogScale?d:y.globals.seriesLog}},{key:"getLogVal",value:function(d,p){var y=this.w;return(Math.log(d)-Math.log(y.globals.minYArr[p]))/(Math.log(y.globals.maxYArr[p])-Math.log(y.globals.minYArr[p]))}},{key:"getLogYRatios",value:function(d){var p=this,y=this.w,C=this.w.globals;return C.yLogRatio=d.slice(),C.logYRange=C.yRange.map(function(M,L){if(y.config.yaxis[L]&&p.w.config.yaxis[L].logarithmic){var R,H=-Number.MAX_VALUE,G=Number.MIN_VALUE;return C.seriesLog.forEach(function(J,te){J.forEach(function(K){y.config.yaxis[te]&&y.config.yaxis[te].logarithmic&&(H=Math.max(K,H),G=Math.min(K,G))})}),R=Math.pow(C.yRange[L],Math.abs(G-H)/C.yRange[L]),C.yLogRatio[L]=R/C.gridHeight,R}}),C.invalidLogScale?d.slice():C.yLogRatio}}],[{key:"checkComboSeries",value:function(d){var p=!1,y=0,C=0;return d.length&&void 0!==d[0].type&&d.forEach(function(M){"bar"!==M.type&&"column"!==M.type&&"candlestick"!==M.type&&"boxPlot"!==M.type||y++,void 0!==M.type&&C++}),C>1&&(p=!0),{comboBarCount:y,comboCharts:p}}},{key:"extendArrayProps",value:function(d,p,y){return p.yaxis&&(p=d.extendYAxis(p,y)),p.annotations&&(p.annotations.yaxis&&(p=d.extendYAxisAnnotations(p)),p.annotations.xaxis&&(p=d.extendXAxisAnnotations(p)),p.annotations.points&&(p=d.extendPointAnnotations(p))),p}}]),ve}(),Di=function(){function ve(d){Ee(this,ve),this.w=d.w,this.annoCtx=d}return gt(ve,[{key:"addYaxisAnnotation",value:function(d,p,y){var C,M=this.w,L=d.strokeDashArray,R=this._getY1Y2("y1",d),H=d.label.text;if(null==d.y2){var G=this.annoCtx.graphics.drawLine(0+d.offsetX,R+d.offsetY,this._getYAxisAnnotationWidth(d),R+d.offsetY,d.borderColor,L,d.borderWidth);p.appendChild(G.node),d.id&&G.node.classList.add(d.id)}else{if((C=this._getY1Y2("y2",d))>R){var J=R;R=C,C=J}var te=this.annoCtx.graphics.drawRect(0+d.offsetX,C+d.offsetY,this._getYAxisAnnotationWidth(d),R-C,0,d.fillColor,d.opacity,1,d.borderColor,L);te.node.classList.add("apexcharts-annotation-rect"),te.attr("clip-path","url(#gridRectMask".concat(M.globals.cuid,")")),p.appendChild(te.node),d.id&&te.node.classList.add(d.id)}var ae=this.annoCtx.graphics.drawText({x:("right"===d.label.position?M.globals.gridWidth:0)+d.label.offsetX,y:(C||R)+d.label.offsetY-3,text:H,textAnchor:d.label.textAnchor,fontSize:d.label.style.fontSize,fontFamily:d.label.style.fontFamily,fontWeight:d.label.style.fontWeight,foreColor:d.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(d.label.style.cssClass," ").concat(d.id?d.id:"")});ae.attr({rel:y}),p.appendChild(ae.node)}},{key:"_getY1Y2",value:function(d,p){var y,C="y1"===d?p.y:p.y2,M=this.w;if(this.annoCtx.invertAxis){var L=M.globals.labels.indexOf(C);M.config.xaxis.convertedCatToNumeric&&(L=M.globals.categoryLabels.indexOf(C));var R=M.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(L+1)+")");R&&(y=parseFloat(R.getAttribute("y")))}else{var H;H=M.config.yaxis[p.yAxisIndex].logarithmic?(C=new Vn(this.annoCtx.ctx).getLogVal(C,p.yAxisIndex))/M.globals.yLogRatio[p.yAxisIndex]:(C-M.globals.minYArr[p.yAxisIndex])/(M.globals.yRange[p.yAxisIndex]/M.globals.gridHeight),y=M.globals.gridHeight-H,M.config.yaxis[p.yAxisIndex]&&M.config.yaxis[p.yAxisIndex].reversed&&(y=H)}return y}},{key:"_getYAxisAnnotationWidth",value:function(d){var p=this.w;return(d.width.indexOf("%")>-1?p.globals.gridWidth*parseInt(d.width,10)/100:parseInt(d.width,10))+d.offsetX}},{key:"drawYAxisAnnotations",value:function(){var d=this,p=this.w,y=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return p.config.annotations.yaxis.map(function(C,M){d.addYaxisAnnotation(C,y.node,M)}),y}}]),ve}(),zr=function(){function ve(d){Ee(this,ve),this.w=d.w,this.annoCtx=d}return gt(ve,[{key:"addPointAnnotation",value:function(d,p,y){var C=this.w,M=0,L=0,R=0;this.annoCtx.invertAxis&&console.warn("Point annotation is not supported in horizontal bar charts.");var H=parseFloat(d.y);if("string"==typeof d.x){var G=C.globals.labels.indexOf(d.x);C.config.xaxis.convertedCatToNumeric&&(G=C.globals.categoryLabels.indexOf(d.x)),M=this.annoCtx.helpers.getStringX(d.x),null===d.y&&(H=C.globals.series[d.seriesIndex][G])}else M=(d.x-C.globals.minX)/(C.globals.xRange/C.globals.gridWidth);for(var J,te=[],K=0,ae=0;ae<=d.seriesIndex;ae++){var pe=C.config.yaxis[ae].seriesName;if(pe)for(var ge=ae+1;ge<=d.seriesIndex;ge++)C.config.yaxis[ge].seriesName===pe&&-1===te.indexOf(pe)&&(K++,te.push(pe))}if(C.config.yaxis[d.yAxisIndex].logarithmic)J=(H=new Vn(this.annoCtx.ctx).getLogVal(H,d.yAxisIndex))/C.globals.yLogRatio[d.yAxisIndex];else{var xe=d.yAxisIndex+K;J=(H-C.globals.minYArr[xe])/(C.globals.yRange[xe]/C.globals.gridHeight)}if(L=C.globals.gridHeight-J-parseFloat(d.label.style.fontSize)-d.marker.size,R=C.globals.gridHeight-J,C.config.yaxis[d.yAxisIndex]&&C.config.yaxis[d.yAxisIndex].reversed&&(L=J+parseFloat(d.label.style.fontSize)+d.marker.size,R=J),Qe.isNumber(M)){var Me={pSize:d.marker.size,pointStrokeWidth:d.marker.strokeWidth,pointFillColor:d.marker.fillColor,pointStrokeColor:d.marker.strokeColor,shape:d.marker.shape,pRadius:d.marker.radius,class:"apexcharts-point-annotation-marker ".concat(d.marker.cssClass," ").concat(d.id?d.id:"")},ze=this.annoCtx.graphics.drawMarker(M+d.marker.offsetX,R+d.marker.offsetY,Me);p.appendChild(ze.node);var Y=this.annoCtx.graphics.drawText({x:M+d.label.offsetX,y:L+d.label.offsetY,text:d.label.text?d.label.text:"",textAnchor:d.label.textAnchor,fontSize:d.label.style.fontSize,fontFamily:d.label.style.fontFamily,fontWeight:d.label.style.fontWeight,foreColor:d.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(d.label.style.cssClass," ").concat(d.id?d.id:"")});if(Y.attr({rel:y}),p.appendChild(Y.node),d.customSVG.SVG){var ne=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+d.customSVG.cssClass});ne.attr({transform:"translate(".concat(M+d.customSVG.offsetX,", ").concat(L+d.customSVG.offsetY,")")}),ne.node.innerHTML=d.customSVG.SVG,p.appendChild(ne.node)}if(d.image.path){var be=d.image.width?d.image.width:20,Ie=d.image.height?d.image.height:20;this.annoCtx.addImage({x:M+d.image.offsetX-be/2,y:L+d.image.offsetY-Ie/2,width:be,height:Ie,path:d.image.path,appendTo:".apexcharts-point-annotations"})}}}},{key:"drawPointAnnotations",value:function(){var d=this,p=this.w,y=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return p.config.annotations.points.map(function(C,M){d.addPointAnnotation(C,y.node,M)}),y}}]),ve}(),Ji={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Ki=function(){function ve(){Ee(this,ve),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={x:0,y:null,yAxisIndex:0,seriesIndex:0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return gt(ve,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Ji],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(d){return new Date(d).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(d){return d}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(d){return d+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(d){return d.globals.seriesTotals.reduce(function(p,y){return p+y},0)/d.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(d){return d}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(d){return d}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(d){return d.globals.seriesTotals.reduce(function(p,y){return p+y},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(d){return null!==d?d:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(d){return d?d+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),ve}(),Zt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.graphics=new Mt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Vi(this),this.xAxisAnnotations=new $r(this),this.yAxisAnnotations=new Di(this),this.pointsAnnotations=new zr(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return gt(ve,[{key:"drawAxesAnnotations",value:function(){var d=this.w;if(d.globals.axisCharts){for(var p=this.yAxisAnnotations.drawYAxisAnnotations(),y=this.xAxisAnnotations.drawXAxisAnnotations(),C=this.pointsAnnotations.drawPointAnnotations(),M=d.config.chart.animations.enabled,L=[p,y,C],R=[y.node,p.node,C.node],H=0;H<3;H++)d.globals.dom.elGraphical.add(L[H]),!M||d.globals.resized||d.globals.dataChanged||"scatter"!==d.config.chart.type&&"bubble"!==d.config.chart.type&&d.globals.dataPoints>1&&R[H].classList.add("apexcharts-element-hidden"),d.globals.delayedElements.push({el:R[H],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var d=this;this.w.config.annotations.images.map(function(p,y){d.addImage(p,y)})}},{key:"drawTextAnnos",value:function(){var d=this;this.w.config.annotations.texts.map(function(p,y){d.addText(p,y)})}},{key:"addXaxisAnnotation",value:function(d,p,y){this.xAxisAnnotations.addXaxisAnnotation(d,p,y)}},{key:"addYaxisAnnotation",value:function(d,p,y){this.yAxisAnnotations.addYaxisAnnotation(d,p,y)}},{key:"addPointAnnotation",value:function(d,p,y){this.pointsAnnotations.addPointAnnotation(d,p,y)}},{key:"addText",value:function(d,p){var M=d.text,K=d.backgroundColor,ae=d.borderWidth,pe=d.strokeDashArray,ge=d.borderRadius,xe=d.borderColor,Me=d.appendTo,ze=void 0===Me?".apexcharts-annotations":Me,Ke=d.paddingLeft,Y=void 0===Ke?4:Ke,ne=d.paddingRight,be=void 0===ne?4:ne,Ie=d.paddingBottom,Je=void 0===Ie?2:Ie,Nt=d.paddingTop,St=void 0===Nt?2:Nt,Xt=this.w,gn=this.graphics.drawText({x:d.x,y:d.y,text:M,textAnchor:d.textAnchor||"start",fontSize:d.fontSize||"12px",fontWeight:d.fontWeight||"regular",fontFamily:d.fontFamily||Xt.config.chart.fontFamily,foreColor:d.foreColor||Xt.config.chart.foreColor,cssClass:d.cssClass}),hn=Xt.globals.dom.baseEl.querySelector(ze);hn&&hn.appendChild(gn.node);var Kn=gn.bbox();if(M){var Ni=this.graphics.drawRect(Kn.x-Y,Kn.y-St,Kn.width+Y+be,Kn.height+Je+St,ge,K||"transparent",1,ae,xe,pe);hn.insertBefore(Ni.node,gn.node)}}},{key:"addImage",value:function(d,p){var y=this.w,M=d.x,L=void 0===M?0:M,R=d.y,H=void 0===R?0:R,G=d.width,J=void 0===G?20:G,te=d.height,K=void 0===te?20:te,ae=d.appendTo,pe=void 0===ae?".apexcharts-annotations":ae,ge=y.globals.dom.Paper.image(d.path);ge.size(J,K).move(L,H);var xe=y.globals.dom.baseEl.querySelector(pe);xe&&xe.appendChild(ge.node)}},{key:"addXaxisAnnotationExternal",value:function(d,p,y){return this.addAnnotationExternal({params:d,pushToMemory:p,context:y,type:"xaxis",contextMethod:y.addXaxisAnnotation}),y}},{key:"addYaxisAnnotationExternal",value:function(d,p,y){return this.addAnnotationExternal({params:d,pushToMemory:p,context:y,type:"yaxis",contextMethod:y.addYaxisAnnotation}),y}},{key:"addPointAnnotationExternal",value:function(d,p,y){return void 0===this.invertAxis&&(this.invertAxis=y.w.globals.isBarHorizontal),this.addAnnotationExternal({params:d,pushToMemory:p,context:y,type:"point",contextMethod:y.addPointAnnotation}),y}},{key:"addAnnotationExternal",value:function(d){var p=d.params,y=d.pushToMemory,C=d.context,M=d.type,L=d.contextMethod,R=C,H=R.w,G=H.globals.dom.baseEl.querySelector(".apexcharts-".concat(M,"-annotations")),J=G.childNodes.length+1,te=new Ki,K=Object.assign({},"xaxis"===M?te.xAxisAnnotation:"yaxis"===M?te.yAxisAnnotation:te.pointAnnotation),ae=Qe.extend(K,p);switch(M){case"xaxis":this.addXaxisAnnotation(ae,G,J);break;case"yaxis":this.addYaxisAnnotation(ae,G,J);break;case"point":this.addPointAnnotation(ae,G,J)}var pe=H.globals.dom.baseEl.querySelector(".apexcharts-".concat(M,"-annotations .apexcharts-").concat(M,"-annotation-label[rel='").concat(J,"']")),ge=this.helpers.addBackgroundToAnno(pe,ae);return ge&&G.insertBefore(ge.node,pe),y&&H.globals.memory.methodsToExec.push({context:R,id:ae.id?ae.id:Qe.randomId(),method:L,label:"addAnnotation",params:p}),C}},{key:"clearAnnotations",value:function(d){var p=d.w,y=p.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");p.globals.memory.methodsToExec.map(function(C,M){"addText"!==C.label&&"addAnnotation"!==C.label||p.globals.memory.methodsToExec.splice(M,1)}),y=Qe.listToArray(y),Array.prototype.forEach.call(y,function(C){for(;C.firstChild;)C.removeChild(C.firstChild)})}},{key:"removeAnnotation",value:function(d,p){var y=d.w,C=y.globals.dom.baseEl.querySelectorAll(".".concat(p));C&&(y.globals.memory.methodsToExec.map(function(M,L){M.id===p&&y.globals.memory.methodsToExec.splice(L,1)}),Array.prototype.forEach.call(C,function(M){M.parentElement.removeChild(M)}))}}]),ve}(),Gt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.opts=null,this.seriesIndex=0}return gt(ve,[{key:"clippedImgArea",value:function(d){var p=this.w,y=p.config,C=parseInt(p.globals.gridWidth,10),M=parseInt(p.globals.gridHeight,10),L=C>M?C:M,R=d.image,H=0,G=0;void 0===d.width&&void 0===d.height?void 0!==y.fill.image.width&&void 0!==y.fill.image.height?(H=y.fill.image.width+1,G=y.fill.image.height):(H=L+1,G=L):(H=d.width,G=d.height);var J=document.createElementNS(p.globals.SVGNS,"pattern");Mt.setAttrs(J,{id:d.patternID,patternUnits:d.patternUnits?d.patternUnits:"userSpaceOnUse",width:H+"px",height:G+"px"});var te=document.createElementNS(p.globals.SVGNS,"image");J.appendChild(te),te.setAttributeNS(window.SVG.xlink,"href",R),Mt.setAttrs(te,{x:0,y:0,preserveAspectRatio:"none",width:H+"px",height:G+"px"}),te.style.opacity=d.opacity,p.globals.dom.elDefs.node.appendChild(J)}},{key:"getSeriesIndex",value:function(d){var p=this.w;return this.seriesIndex=("bar"===p.config.chart.type||"rangeBar"===p.config.chart.type)&&p.config.plotOptions.bar.distributed||"heatmap"===p.config.chart.type||"treemap"===p.config.chart.type?d.seriesNumber:d.seriesNumber%p.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(d){var p=this.w;this.opts=d;var y,C,M,L=this.w.config;this.seriesIndex=this.getSeriesIndex(d);var R=this.getFillColors()[this.seriesIndex];void 0!==p.globals.seriesColors[this.seriesIndex]&&(R=p.globals.seriesColors[this.seriesIndex]),"function"==typeof R&&(R=R({seriesIndex:this.seriesIndex,dataPointIndex:d.dataPointIndex,value:d.value,w:p}));var H=this.getFillType(this.seriesIndex),G=Array.isArray(L.fill.opacity)?L.fill.opacity[this.seriesIndex]:L.fill.opacity;d.color&&(R=d.color);var J=R;if(-1===R.indexOf("rgb")?R.length<9&&(J=Qe.hexToRgba(R,G)):R.indexOf("rgba")>-1&&(G=Qe.getOpacityFromRGBA(R)),d.opacity&&(G=d.opacity),"pattern"===H&&(C=this.handlePatternFill(C,R,G,J)),"gradient"===H&&(M=this.handleGradientFill(R,G,this.seriesIndex)),"image"===H){var te=L.fill.image.src,K=d.patternID?d.patternID:"";this.clippedImgArea({opacity:G,image:Array.isArray(te)?d.seriesNumber<te.length?te[d.seriesNumber]:te[0]:te,width:d.width?d.width:void 0,height:d.height?d.height:void 0,patternUnits:d.patternUnits,patternID:"pattern".concat(p.globals.cuid).concat(d.seriesNumber+1).concat(K)}),y="url(#pattern".concat(p.globals.cuid).concat(d.seriesNumber+1).concat(K,")")}else y="gradient"===H?M:"pattern"===H?C:J;return d.solid&&(y=J),y}},{key:"getFillType",value:function(d){var p=this.w;return Array.isArray(p.config.fill.type)?p.config.fill.type[d]:p.config.fill.type}},{key:"getFillColors",value:function(){var d=this.w,p=d.config,y=this.opts,C=[];return d.globals.comboCharts?"line"===d.config.series[this.seriesIndex].type?Array.isArray(d.globals.stroke.colors)?C=d.globals.stroke.colors:C.push(d.globals.stroke.colors):Array.isArray(d.globals.fill.colors)?C=d.globals.fill.colors:C.push(d.globals.fill.colors):"line"===p.chart.type?Array.isArray(d.globals.stroke.colors)?C=d.globals.stroke.colors:C.push(d.globals.stroke.colors):Array.isArray(d.globals.fill.colors)?C=d.globals.fill.colors:C.push(d.globals.fill.colors),void 0!==y.fillColors&&(C=[],Array.isArray(y.fillColors)?C=y.fillColors.slice():C.push(y.fillColors)),C}},{key:"handlePatternFill",value:function(d,p,y,C){var M=this.w.config,L=this.opts,R=new Mt(this.ctx),H=void 0===M.fill.pattern.strokeWidth?Array.isArray(M.stroke.width)?M.stroke.width[this.seriesIndex]:M.stroke.width:Array.isArray(M.fill.pattern.strokeWidth)?M.fill.pattern.strokeWidth[this.seriesIndex]:M.fill.pattern.strokeWidth,G=p;return Array.isArray(M.fill.pattern.style)?void 0!==M.fill.pattern.style[L.seriesNumber]?R.drawPattern(M.fill.pattern.style[L.seriesNumber],M.fill.pattern.width,M.fill.pattern.height,G,H,y):C:R.drawPattern(M.fill.pattern.style,M.fill.pattern.width,M.fill.pattern.height,G,H,y)}},{key:"handleGradientFill",value:function(d,p,y){var C,M=this.w.config,L=this.opts,R=new Mt(this.ctx),H=new Qe,G=M.fill.gradient.type,J=d,te=void 0===M.fill.gradient.opacityFrom?p:Array.isArray(M.fill.gradient.opacityFrom)?M.fill.gradient.opacityFrom[y]:M.fill.gradient.opacityFrom;J.indexOf("rgba")>-1&&(te=Qe.getOpacityFromRGBA(J));var K=void 0===M.fill.gradient.opacityTo?p:Array.isArray(M.fill.gradient.opacityTo)?M.fill.gradient.opacityTo[y]:M.fill.gradient.opacityTo;if(void 0===M.fill.gradient.gradientToColors||0===M.fill.gradient.gradientToColors.length)C=H.shadeColor("dark"===M.fill.gradient.shade?-1*parseFloat(M.fill.gradient.shadeIntensity):parseFloat(M.fill.gradient.shadeIntensity),d.indexOf("rgb")>-1?Qe.rgb2hex(d):d);else if(M.fill.gradient.gradientToColors[L.seriesNumber]){var ae=M.fill.gradient.gradientToColors[L.seriesNumber];C=ae,ae.indexOf("rgba")>-1&&(K=Qe.getOpacityFromRGBA(ae))}else C=d;if(M.fill.gradient.inverseColors){var pe=J;J=C,C=pe}return J.indexOf("rgb")>-1&&(J=Qe.rgb2hex(J)),C.indexOf("rgb")>-1&&(C=Qe.rgb2hex(C)),R.drawGradient(G,J,C,te,K,L.size,M.fill.gradient.stops,M.fill.gradient.colorStops,y)}}]),ve}(),$t=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"setGlobalMarkerSize",value:function(){var d=this.w;if(d.globals.markers.size=Array.isArray(d.config.markers.size)?d.config.markers.size:[d.config.markers.size],d.globals.markers.size.length>0){if(d.globals.markers.size.length<d.globals.series.length+1)for(var p=0;p<=d.globals.series.length;p++)void 0===d.globals.markers.size[p]&&d.globals.markers.size.push(d.globals.markers.size[0])}else d.globals.markers.size=d.config.series.map(function(y){return d.config.markers.size})}},{key:"plotChartMarkers",value:function(d,p,y,C){var M,L=arguments.length>4&&void 0!==arguments[4]&&arguments[4],R=this.w,H=p,G=d,J=null,te=new Mt(this.ctx);if((R.globals.markers.size[p]>0||L)&&(J=te.group({class:L?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(R.globals.cuid,")")),Array.isArray(G.x))for(var K=0;K<G.x.length;K++){var ae=y;1===y&&0===K&&(ae=0),1===y&&1===K&&(ae=1);var pe="apexcharts-marker";"line"!==R.config.chart.type&&"area"!==R.config.chart.type||R.globals.comboCharts||R.config.tooltip.intersect||(pe+=" no-pointer-events");var ge=Array.isArray(R.config.markers.size)?R.globals.markers.size[p]>0:R.config.markers.size>0;if(ge||L){Qe.isNumber(G.y[K])?pe+=" w".concat(Qe.randomId()):pe="apexcharts-nullpoint";var xe=this.getMarkerConfig(pe,p,ae);R.config.series[H].data[ae]&&(R.config.series[H].data[ae].fillColor&&(xe.pointFillColor=R.config.series[H].data[ae].fillColor),R.config.series[H].data[ae].strokeColor&&(xe.pointStrokeColor=R.config.series[H].data[ae].strokeColor)),C&&(xe.pSize=C),(M=te.drawMarker(G.x[K],G.y[K],xe)).attr("rel",ae),M.attr("j",ae),M.attr("index",p),M.node.setAttribute("default-marker-size",xe.pSize);var Me=new dn(this.ctx);Me.setSelectionFilter(M,p,ae),this.addEvents(M),J&&J.add(M)}else void 0===R.globals.pointsArray[p]&&(R.globals.pointsArray[p]=[]),R.globals.pointsArray[p].push([G.x[K],G.y[K]])}return J}},{key:"getMarkerConfig",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=this.w,M=this.getMarkerStyle(p),L=C.globals.markers.size[p],R=C.config.markers;return null!==y&&R.discrete.length&&R.discrete.map(function(H){H.seriesIndex===p&&H.dataPointIndex===y&&(M.pointStrokeColor=H.strokeColor,M.pointFillColor=H.fillColor,L=H.size,M.pointShape=H.shape)}),{pSize:L,pRadius:R.radius,width:Array.isArray(R.width)?R.width[p]:R.width,height:Array.isArray(R.height)?R.height[p]:R.height,pointStrokeWidth:Array.isArray(R.strokeWidth)?R.strokeWidth[p]:R.strokeWidth,pointStrokeColor:M.pointStrokeColor,pointFillColor:M.pointFillColor,shape:M.pointShape||(Array.isArray(R.shape)?R.shape[p]:R.shape),class:d,pointStrokeOpacity:Array.isArray(R.strokeOpacity)?R.strokeOpacity[p]:R.strokeOpacity,pointStrokeDashArray:Array.isArray(R.strokeDashArray)?R.strokeDashArray[p]:R.strokeDashArray,pointFillOpacity:Array.isArray(R.fillOpacity)?R.fillOpacity[p]:R.fillOpacity,seriesIndex:p}}},{key:"addEvents",value:function(d){var p=this.w,y=new Mt(this.ctx);d.node.addEventListener("mouseenter",y.pathMouseEnter.bind(this.ctx,d)),d.node.addEventListener("mouseleave",y.pathMouseLeave.bind(this.ctx,d)),d.node.addEventListener("mousedown",y.pathMouseDown.bind(this.ctx,d)),d.node.addEventListener("click",p.config.markers.onClick),d.node.addEventListener("dblclick",p.config.markers.onDblClick),d.node.addEventListener("touchstart",y.pathMouseDown.bind(this.ctx,d),{passive:!0})}},{key:"getMarkerStyle",value:function(d){var p=this.w,y=p.globals.markers.colors,C=p.config.markers.strokeColor||p.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(C)?C[d]:C,pointFillColor:Array.isArray(y)?y[d]:y}}}]),ve}(),Ht=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return gt(ve,[{key:"draw",value:function(d,p,y){var C=this.w,M=new Mt(this.ctx),L=y.realIndex,R=y.pointsPos,H=y.zRatio,G=y.elParent,J=M.group({class:"apexcharts-series-markers apexcharts-series-".concat(C.config.chart.type)});if(J.attr("clip-path","url(#gridRectMarkerMask".concat(C.globals.cuid,")")),Array.isArray(R.x))for(var te=0;te<R.x.length;te++){var K=p+1,ae=!0;0===p&&0===te&&(K=0),0===p&&1===te&&(K=1);var pe=0,ge=C.globals.markers.size[L];if(H!==1/0){ge=C.globals.seriesZ[L][K]/H;var xe=C.config.plotOptions.bubble;xe.minBubbleRadius&&ge<xe.minBubbleRadius&&(ge=xe.minBubbleRadius),xe.maxBubbleRadius&&ge>xe.maxBubbleRadius&&(ge=xe.maxBubbleRadius)}C.config.chart.animations.enabled||(pe=ge);var ze=R.y[te];if(pe=pe||0,null!==ze&&void 0!==C.globals.series[L][K]||(ae=!1),ae){var Ke=this.drawPoint(R.x[te],ze,pe,ge,L,K,p);J.add(Ke)}G.add(J)}}},{key:"drawPoint",value:function(d,p,y,C,M,L,R){var H,G=this.w,J=M,te=new Rn(this.ctx),K=new dn(this.ctx),ae=new Gt(this.ctx),pe=new $t(this.ctx),ge=new Mt(this.ctx),xe=pe.getMarkerConfig("apexcharts-marker",J),Me=ae.fillPath({seriesNumber:M,dataPointIndex:L,patternUnits:"objectBoundingBox",value:G.globals.series[M][R]});if("circle"===xe.shape?H=ge.drawCircle(y):"square"!==xe.shape&&"rect"!==xe.shape||(H=ge.drawRect(0,0,xe.width-xe.pointStrokeWidth/2,xe.height-xe.pointStrokeWidth/2,xe.pRadius)),G.config.series[J].data[L]&&G.config.series[J].data[L].fillColor&&(Me=G.config.series[J].data[L].fillColor),H.attr({x:d-xe.width/2-xe.pointStrokeWidth/2,y:p-xe.height/2-xe.pointStrokeWidth/2,cx:d,cy:p,fill:Me,"fill-opacity":xe.pointFillOpacity,stroke:xe.pointStrokeColor,r:C,"stroke-width":xe.pointStrokeWidth,"stroke-dasharray":xe.pointStrokeDashArray,"stroke-opacity":xe.pointStrokeOpacity}),G.config.chart.dropShadow.enabled&&K.dropShadow(H,G.config.chart.dropShadow,M),!this.initialAnim||G.globals.dataChanged||G.globals.resized?G.globals.animationEnded=!0:te.animateMarker(H,0,"circle"===xe.shape?C:{width:xe.width,height:xe.height},G.config.chart.animations.speed,G.globals.easing,function(){window.setTimeout(function(){te.animationCompleted(H)},100)}),G.globals.dataChanged&&"circle"===xe.shape)if(this.dynamicAnim){var Y,ne,be,Ie,Je=G.config.chart.animations.dynamicAnimation.speed;null!=(Ie=G.globals.previousPaths[M]&&G.globals.previousPaths[M][R])&&(Y=Ie.x,ne=Ie.y,be=void 0!==Ie.r?Ie.r:C);for(var Nt=0;Nt<G.globals.collapsedSeries.length;Nt++)G.globals.collapsedSeries[Nt].index===M&&(Je=1,C=0);0===d&&0===p&&(C=0),te.animateCircle(H,{cx:Y,cy:ne,r:be},{cx:d,cy:p,r:C},Je,G.globals.easing)}else H.attr({r:C});return H.attr({rel:L,j:L,index:M,"default-marker-size":C}),K.setSelectionFilter(H,M,L),pe.addEvents(H),H.node.classList.add("apexcharts-marker"),H}},{key:"centerTextInBubble",value:function(d){return{y:d+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),ve}(),fn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"dataLabelsCorrection",value:function(d,p,y,C,M,L,R){var H=this.w,G=!1,J=new Mt(this.ctx).getTextRects(y,R),te=J.width,K=J.height;if(p<0&&(p=0),p>H.globals.gridHeight+K&&(p=H.globals.gridHeight+K/2),void 0===H.globals.dataLabelsRects[C]&&(H.globals.dataLabelsRects[C]=[]),H.globals.dataLabelsRects[C].push({x:d,y:p,width:te,height:K}),void 0!==H.globals.dataLabelsRects[C][H.globals.dataLabelsRects[C].length-2]){var ge=H.globals.dataLabelsRects[C][void 0!==H.globals.lastDrawnDataLabelsIndexes[C]?H.globals.lastDrawnDataLabelsIndexes[C][H.globals.lastDrawnDataLabelsIndexes[C].length-1]:0];(d>ge.x+ge.width+2||p>ge.y+ge.height+2||d+te<ge.x)&&(G=!0)}return(0===M||L)&&(G=!0),{x:d,y:p,textRects:J,drawnextLabel:G}}},{key:"drawDataLabel",value:function(d,p,y){var C=this,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,L=this.w,R=new Mt(this.ctx),H=L.config.dataLabels,G=0,J=0,te=y,K=null;if(!H.enabled||!Array.isArray(d.x))return K;K=R.group({class:"apexcharts-data-labels"});for(var ae=0;ae<d.x.length;ae++)if(G=d.x[ae]+H.offsetX,J=d.y[ae]+H.offsetY+M,!isNaN(G)){1===y&&0===ae&&(te=0),1===y&&1===ae&&(te=1);var pe=L.globals.series[p][te],ge="",xe=function(Ke){return L.config.dataLabels.formatter(Ke,{ctx:C.ctx,seriesIndex:p,dataPointIndex:te,w:L})};if("bubble"===L.config.chart.type){ge=xe(pe=L.globals.seriesZ[p][te]),J=d.y[ae];var Me=new Ht(this.ctx),ze=Me.centerTextInBubble(J,p,te);J=ze.y}else void 0!==pe&&(ge=xe(pe));this.plotDataLabelsText({x:G,y:J,text:ge,i:p,j:te,parent:K,offsetCorrection:!0,dataLabelsConfig:L.config.dataLabels})}return K}},{key:"plotDataLabelsText",value:function(d){var p=this.w,y=new Mt(this.ctx),C=d.x,M=d.y,L=d.i,R=d.j,H=d.text,G=d.textAnchor,J=d.fontSize,te=d.parent,K=d.dataLabelsConfig,ae=d.color,pe=d.alwaysDrawDataLabel,ge=d.offsetCorrection;if(!(Array.isArray(p.config.dataLabels.enabledOnSeries)&&p.config.dataLabels.enabledOnSeries.indexOf(L)<0)){var xe={x:C,y:M,drawnextLabel:!0};ge&&(xe=this.dataLabelsCorrection(C,M,H,L,R,pe,parseInt(K.style.fontSize,10))),p.globals.zoomed||(C=xe.x,M=xe.y),xe.textRects&&(C<-10-xe.textRects.width||C>p.globals.gridWidth+xe.textRects.width+10)&&(H="");var Me=p.globals.dataLabels.style.colors[L];(("bar"===p.config.chart.type||"rangeBar"===p.config.chart.type)&&p.config.plotOptions.bar.distributed||p.config.dataLabels.distributed)&&(Me=p.globals.dataLabels.style.colors[R]),"function"==typeof Me&&(Me=Me({series:p.globals.series,seriesIndex:L,dataPointIndex:R,w:p})),ae&&(Me=ae);var ze=K.offsetX,Ke=K.offsetY;if("bar"!==p.config.chart.type&&"rangeBar"!==p.config.chart.type||(ze=0,Ke=0),xe.drawnextLabel){var Y=y.drawText({width:100,height:parseInt(K.style.fontSize,10),x:C+ze,y:M+Ke,foreColor:Me,textAnchor:G||K.textAnchor,text:H,fontSize:J||K.style.fontSize,fontFamily:K.style.fontFamily,fontWeight:K.style.fontWeight||"normal"});if(Y.attr({class:"apexcharts-datalabel",cx:C,cy:M}),K.dropShadow.enabled){var ne=K.dropShadow;new dn(this.ctx).dropShadow(Y,ne)}te.add(Y),void 0===p.globals.lastDrawnDataLabelsIndexes[L]&&(p.globals.lastDrawnDataLabelsIndexes[L]=[]),p.globals.lastDrawnDataLabelsIndexes[L].push(R)}}}},{key:"addBackgroundToDataLabel",value:function(d,p){var y=this.w,C=y.config.dataLabels.background,M=C.padding,L=C.padding/2,R=p.width,H=p.height,G=new Mt(this.ctx).drawRect(p.x-M,p.y-L/2,R+2*M,H+L,C.borderRadius,"transparent"===y.config.chart.background?"#fff":y.config.chart.background,C.opacity,C.borderWidth,C.borderColor);return C.dropShadow.enabled&&new dn(this.ctx).dropShadow(G,C.dropShadow),G}},{key:"dataLabelsBackground",value:function(){var d=this.w;if("bubble"!==d.config.chart.type)for(var p=d.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),y=0;y<p.length;y++){var C=p[y],M=C.getBBox(),L=null;if(M.width&&M.height&&(L=this.addBackgroundToDataLabel(C,M)),L){C.parentNode.insertBefore(L.node,C);var R=C.getAttribute("fill");!d.config.chart.animations.enabled||d.globals.resized||d.globals.dataChanged?L.attr({fill:R}):L.animate().attr({fill:R}),C.setAttribute("fill",d.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var d=this.w,p=d.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),y=d.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),C=0;C<p.length;C++)y&&y.insertBefore(p[C],y.nextSibling)}}]),ve}(),Yt=function(){function ve(d){Ee(this,ve),this.w=d.w,this.barCtx=d}return gt(ve,[{key:"handleBarDataLabels",value:function(d){var p=d.x,y=d.y,C=d.y1,M=d.y2,L=d.i,R=d.j,H=d.realIndex,G=d.series,J=d.barHeight,te=d.barWidth,K=d.barYPosition,ae=d.visibleSeries,pe=d.renderedPath,ge=this.w,xe=new Mt(this.barCtx.ctx),Me=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[H]:this.barCtx.strokeWidth,ze=p+parseFloat(te*ae),Ke=y+parseFloat(J*ae);ge.globals.isXNumeric&&!ge.globals.isBarHorizontal&&(ze=p+parseFloat(te*(ae+1)),Ke=y+parseFloat(J*(ae+1))-Me);var be,Y=p,ne=y,Ie=ge.config.dataLabels,Je=this.barCtx.barOptions.dataLabels;void 0!==K&&this.barCtx.isTimelineBar&&(Ke=K,ne=K);var Nt=Ie.offsetX,St=Ie.offsetY,Xt={width:0,height:0};ge.config.dataLabels.enabled&&(Xt=xe.getTextRects(ge.globals.yLabelFormatters[0](this.barCtx.series[L][R]),parseFloat(Ie.style.fontSize)));var hn={x:p,y,i:L,j:R,renderedPath:pe,bcx:ze,bcy:Ke,barHeight:J,barWidth:te,textRects:Xt,strokeWidth:Me,dataLabelsX:Y,dataLabelsY:ne,barDataLabelsConfig:Je,offX:Nt,offY:St};return be=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(hn):this.calculateColumnsDataLabelsPosition(hn),pe.attr({cy:be.bcy,cx:be.bcx,j:R,val:G[L][R],barHeight:J,barWidth:te}),this.drawCalculatedDataLabels({x:be.dataLabelsX,y:be.dataLabelsY,val:this.barCtx.isTimelineBar?[C,M]:G[L][R],i:H,j:R,barWidth:te,barHeight:J,textRects:Xt,dataLabelsConfig:Ie})}},{key:"calculateColumnsDataLabelsPosition",value:function(d){var p,y=this.w,C=d.i,M=d.j,L=d.y,R=d.bcx,H=d.barWidth,G=d.barHeight,J=d.textRects,te=d.dataLabelsY,K=d.barDataLabelsConfig,ae=d.strokeWidth,pe=d.offX,ge=d.offY;G=Math.abs(G);var xe="vertical"===y.config.plotOptions.bar.dataLabels.orientation;R-=ae/2,p=y.globals.isXNumeric?R-H/2+pe:R-y.globals.gridWidth/y.globals.dataPoints+H/2+pe,xe&&(p=p+J.height/2-ae/2-2);var ze=this.barCtx.series[C][M]<0,Ke=L;switch(this.barCtx.isReversed&&(Ke=L-G+(ze?2*G:0),L-=G),K.position){case"center":te=xe?ze?Ke+G/2+ge:Ke+G/2-ge:ze?Ke-G/2+J.height/2+ge:Ke+G/2+J.height/2-ge;break;case"bottom":te=xe?ze?Ke+G+ge:Ke+G-ge:ze?Ke-G+J.height+ae+ge:Ke+G-J.height/2+ae-ge;break;case"top":te=xe?ze?Ke+ge:Ke-ge:ze?Ke-J.height/2-ge:Ke+J.height+ge}return y.config.chart.stacked||(te<0?te=0+ae:te+J.height/3>y.globals.gridHeight&&(te=y.globals.gridHeight-ae)),{bcx:R,bcy:L,dataLabelsX:p,dataLabelsY:te}}},{key:"calculateBarsDataLabelsPosition",value:function(d){var p=this.w,y=d.x,C=d.i,M=d.j,L=d.bcy,R=d.barHeight,H=d.barWidth,G=d.textRects,J=d.dataLabelsX,te=d.strokeWidth,K=d.barDataLabelsConfig,ae=d.offX,pe=d.offY,ge=p.globals.gridHeight/p.globals.dataPoints;H=Math.abs(H);var xe=L-(this.barCtx.isTimelineBar?0:ge)+R/2+G.height/2+pe-3,Me=this.barCtx.series[C][M]<0,ze=y;switch(this.barCtx.isReversed&&(ze=y+H-(Me?2*H:0),y=p.globals.gridWidth-H),K.position){case"center":J=Me?ze+H/2-ae:Math.max(G.width/2,ze-H/2)+ae;break;case"bottom":J=Me?ze+H-te-Math.round(G.width/2)-ae:ze-H+te+Math.round(G.width/2)+ae;break;case"top":J=Me?ze-te+Math.round(G.width/2)-ae:ze-te-Math.round(G.width/2)+ae}return p.config.chart.stacked||(J<0?J=J+G.width+te:J+G.width/2>p.globals.gridWidth&&(J=p.globals.gridWidth-G.width-te)),{bcx:y,bcy:L,dataLabelsX:J,dataLabelsY:xe}}},{key:"drawCalculatedDataLabels",value:function(d){var p=d.x,y=d.y,C=d.val,M=d.i,L=d.j,R=d.textRects,H=d.barHeight,G=d.barWidth,J=d.dataLabelsConfig,te=this.w,K="rotate(0)";"vertical"===te.config.plotOptions.bar.dataLabels.orientation&&(K="rotate(-90, ".concat(p,", ").concat(y,")"));var ae=new fn(this.barCtx.ctx),pe=new Mt(this.barCtx.ctx),ge=J.formatter,xe=null,Me=te.globals.collapsedSeriesIndices.indexOf(M)>-1;if(J.enabled&&!Me){xe=pe.group({class:"apexcharts-data-labels",transform:K});var ze="";void 0!==C&&(ze=ge(C,{seriesIndex:M,dataPointIndex:L,w:te}));var Ke=te.globals.series[M][L]<0,Y=te.config.plotOptions.bar.dataLabels.position;"vertical"===te.config.plotOptions.bar.dataLabels.orientation&&("top"===Y&&(J.textAnchor=Ke?"end":"start"),"center"===Y&&(J.textAnchor="middle"),"bottom"===Y&&(J.textAnchor=Ke?"end":"start")),this.barCtx.isTimelineBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&G<pe.getTextRects(ze,parseFloat(J.style.fontSize)).width&&(ze=""),te.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?(G>0&&R.width/1.6>G||G<0&&R.width/1.6<G)&&(ze=""):R.height/1.6>H&&(ze=""));var ne=Be({},J);this.barCtx.isHorizontal&&C<0&&("start"===J.textAnchor?ne.textAnchor="end":"end"===J.textAnchor&&(ne.textAnchor="start")),ae.plotDataLabelsText({x:p,y,text:ze,i:M,j:L,parent:xe,dataLabelsConfig:ne,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return xe}}]),ve}(),On=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.legendInactiveClass="legend-mouseover-inactive"}return gt(ve,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(d){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(Qe.escapeString(d),"']"))}},{key:"isSeriesHidden",value:function(d){var p=this.getSeriesByName(d),y=parseInt(p.getAttribute("data:realIndex"),10);return{isHidden:p.classList.contains("apexcharts-series-collapsed"),realIndex:y}}},{key:"addCollapsedClassToSeries",value:function(d,p){var y=this.w;function C(M){for(var L=0;L<M.length;L++)M[L].index===p&&d.node.classList.add("apexcharts-series-collapsed")}C(y.globals.collapsedSeries),C(y.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(d){var p=this.isSeriesHidden(d);return this.ctx.legend.legendHelpers.toggleDataSeries(p.realIndex,p.isHidden),p.isHidden}},{key:"showSeries",value:function(d){var p=this.isSeriesHidden(d);p.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(p.realIndex,!0)}},{key:"hideSeries",value:function(d){var p=this.isSeriesHidden(d);p.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(p.realIndex,!1)}},{key:"resetSeries",value:function(){var d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=this.w,M=Qe.clone(C.globals.initialSeries);C.globals.previousPaths=[],y?(C.globals.collapsedSeries=[],C.globals.ancillaryCollapsedSeries=[],C.globals.collapsedSeriesIndices=[],C.globals.ancillaryCollapsedSeriesIndices=[]):M=this.emptyCollapsedSeries(M),C.config.series=M,d&&(p&&(C.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(M,C.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(d){for(var p=this.w,y=0;y<d.length;y++)p.globals.collapsedSeriesIndices.indexOf(y)>-1&&(d[y].data=[]);return d}},{key:"toggleSeriesOnHover",value:function(d,p){var y=this.w,C=y.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===d.type){var M=parseInt(p.getAttribute("rel"),10)-1,L=null,R=null;y.globals.axisCharts||"radialBar"===y.config.chart.type?y.globals.axisCharts?(L=y.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(M,"']")),R=y.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(M,"']"))):L=y.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(M+1,"']")):L=y.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(M+1,"'] path"));for(var H=0;H<C.length;H++)C[H].classList.add(this.legendInactiveClass);null!==L&&(y.globals.axisCharts||L.parentNode.classList.remove(this.legendInactiveClass),L.classList.remove(this.legendInactiveClass),null!==R&&R.classList.remove(this.legendInactiveClass))}else if("mouseout"===d.type)for(var G=0;G<C.length;G++)C[G].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(d,p){var y=this,C=this.w,M=C.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),L=function(H){for(var G=0;G<M.length;G++)M[G].classList[H](y.legendInactiveClass)};if("mousemove"===d.type){var R=parseInt(p.getAttribute("rel"),10)-1;L("add"),function(H){for(var G=0;G<M.length;G++){var J=parseInt(M[G].getAttribute("val"),10);J>=H.from&&J<=H.to&&M[G].classList.remove(y.legendInactiveClass)}}(C.config.plotOptions.heatmap.colorScale.ranges[R])}else"mouseout"===d.type&&L("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var d=arguments.length>0&&void 0!==arguments[0]&&arguments[0],p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",y=this.w,C=0;if(y.config.series.length>1)for(var M=y.config.series.map(function(R,H){var G=!1;return d&&(G="bar"===y.config.series[H].type||"column"===y.config.series[H].type),R.data&&R.data.length>0&&!G?H:-1}),L="asc"===p?0:M.length-1;"asc"===p?L<M.length:L>=0;"asc"===p?L++:L--)if(-1!==M[L]){C=M[L];break}return C}},{key:"getPreviousPaths",value:function(){var d=this.w;function p(L,R,H){for(var G=L[R].childNodes,J={type:H,paths:[],realIndex:L[R].getAttribute("data:realIndex")},te=0;te<G.length;te++)if(G[te].hasAttribute("pathTo")){var K=G[te].getAttribute("pathTo");J.paths.push({d:K})}d.globals.previousPaths.push(J)}d.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach(function(L){for(var H=d.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(L,"-series .apexcharts-series")),G=0;G<H.length;G++)p(H,G,L)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var y=d.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d.config.chart.type," .apexcharts-series"));if(y.length>0)for(var C=function(L){for(var R=d.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(L,"'] rect")),H=[],G=function(te){var K=function(pe){return R[te].getAttribute(pe)},ae={x:parseFloat(K("x")),y:parseFloat(K("y")),width:parseFloat(K("width")),height:parseFloat(K("height"))};H.push({rect:ae,color:R[te].getAttribute("color")})},J=0;J<R.length;J++)G(J);d.globals.previousPaths.push(H)},M=0;M<y.length;M++)C(M);d.globals.axisCharts||(d.globals.previousPaths=d.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(d){var p=this.w,y=p.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d,"-series .apexcharts-series"));if(y.length>0)for(var C=0;C<y.length;C++){for(var M=p.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d,"-series .apexcharts-series[data\\:realIndex='").concat(C,"'] circle")),L=[],R=0;R<M.length;R++)L.push({x:M[R].getAttribute("cx"),y:M[R].getAttribute("cy"),r:M[R].getAttribute("r")});p.globals.previousPaths.push(L)}}},{key:"clearPreviousPaths",value:function(){var d=this.w;d.globals.previousPaths=[],d.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var d=this.w,p=d.config.noData,y=new Mt(this.ctx),C=d.globals.svgWidth/2,M=d.globals.svgHeight/2,L="middle";if(d.globals.noData=!0,d.globals.animationEnded=!0,"left"===p.align?(C=10,L="start"):"right"===p.align&&(C=d.globals.svgWidth-10,L="end"),"top"===p.verticalAlign?M=50:"bottom"===p.verticalAlign&&(M=d.globals.svgHeight-50),C+=p.offsetX,M=M+parseInt(p.style.fontSize,10)+2+p.offsetY,void 0!==p.text&&""!==p.text){var R=y.drawText({x:C,y:M,text:p.text,textAnchor:L,fontSize:p.style.fontSize,fontFamily:p.style.fontFamily,foreColor:p.style.color,opacity:1,class:"apexcharts-text-nodata"});d.globals.dom.Paper.add(R)}}},{key:"setNullSeriesToZeroValues",value:function(d){for(var p=this.w,y=0;y<d.length;y++)if(0===d[y].length)for(var C=0;C<d[p.globals.maxValsInArrayIndex].length;C++)d[y].push(0);return d}},{key:"hasAllSeriesEqualX",value:function(){for(var d=!0,p=this.w,y=this.filteredSeriesX(),C=0;C<y.length-1;C++)if(y[C][0]!==y[C+1][0]){d=!1;break}return p.globals.allSeriesHasEqualX=d,d}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(p){return p.length>0?p:[]})}}]),ve}(),hi=function(){function ve(d){Ee(this,ve),this.w=d.w,this.barCtx=d}return gt(ve,[{key:"initVariables",value:function(d){var p=this.w;this.barCtx.series=d,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var y=0;y<d.length;y++)if(d[y].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=d[y].length),p.globals.isXNumeric)for(var C=0;C<d[y].length;C++)p.globals.seriesX[y][C]>p.globals.minX&&p.globals.seriesX[y][C]<p.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=p.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=d.length-1,p.globals.comboCharts||this.checkZeroSeries({series:d})}},{key:"initialPositions",value:function(){var d,p,y,C,M,L,R,H,G=this.w,J=G.globals.dataPoints;this.barCtx.isTimelineBar&&(J=G.globals.labels.length);var te=this.barCtx.seriesLen;if(G.config.plotOptions.bar.rangeBarGroupRows&&(te=1),this.barCtx.isHorizontal)M=(y=G.globals.gridHeight/J)/te,G.globals.isXNumeric&&(M=(y=G.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),M=M*parseInt(this.barCtx.barOptions.barHeight,10)/100,H=this.barCtx.baseLineInvertedY+G.globals.padHorizontal+(this.barCtx.isReversed?G.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),p=(y-M*this.barCtx.seriesLen)/2;else{if(C=G.globals.gridWidth/this.barCtx.visibleItems,G.config.xaxis.convertedCatToNumeric&&(C=G.globals.gridWidth/G.globals.dataPoints),L=C/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,G.globals.isXNumeric){var K=this.barCtx.xRatio;G.config.xaxis.convertedCatToNumeric&&(K=this.barCtx.initialXRatio),G.globals.minXDiff&&.5!==G.globals.minXDiff&&G.globals.minXDiff/K>0&&(C=G.globals.minXDiff/K),(L=C/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(L=1)}R=G.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?G.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),d=G.globals.padHorizontal+(C-L*this.barCtx.seriesLen)/2}return{x:d,y:p,yDivision:y,xDivision:C,barHeight:M,barWidth:L,zeroH:R,zeroW:H}}},{key:"getPathFillColor",value:function(d,p,y,C){var M=this.w,L=new Gt(this.barCtx.ctx),R=null,H=this.barCtx.barOptions.distributed?y:p;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(G){d[p][y]>=G.from&&d[p][y]<=G.to&&(R=G.color)}),M.config.series[p].data[y]&&M.config.series[p].data[y].fillColor&&(R=M.config.series[p].data[y].fillColor),L.fillPath({seriesNumber:this.barCtx.barOptions.distributed?H:C,dataPointIndex:y,color:R,value:d[p][y]})}},{key:"getStrokeWidth",value:function(d,p,y){var C=0,M=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[d][p],M.config.stroke.show&&(this.barCtx.isNullValue||(C=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[y]:this.barCtx.strokeWidth)),C}},{key:"barBackground",value:function(d){var p=d.j,y=d.i,C=d.x1,M=d.x2,L=d.y1,R=d.y2,H=d.elSeries,G=this.w,J=new Mt(this.barCtx.ctx),te=new On(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&te===y){p>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(p-=this.barCtx.barOptions.colors.backgroundBarColors.length);var ae=J.drawRect(void 0!==C?C:0,void 0!==L?L:0,void 0!==M?M:G.globals.gridWidth,void 0!==R?R:G.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[p],this.barCtx.barOptions.colors.backgroundBarOpacity);H.add(ae),ae.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(d){var p=d.barWidth,y=d.barXPosition,C=d.yRatio,M=d.y1,L=d.y2,R=d.strokeWidth,H=d.series,G=d.realIndex,J=d.i,te=d.j,K=d.w,ae=new Mt(this.barCtx.ctx);(R=Array.isArray(R)?R[G]:R)||(R=0);var ge=this.getRoundedBars(K,{barWidth:p,strokeWidth:R,yRatio:C,barXPosition:y,y1:M,y2:L},H,J,te),xe=y,Me=y+p,ze=ae.move(xe,M),Ke=ae.move(xe,M),Y=ae.line(Me-R,M);return K.globals.previousPaths.length>0&&(Ke=this.barCtx.getPreviousPath(G,te,!1)),ze=ze+ae.line(xe,ge.y2)+ge.pathWithRadius+ae.line(Me-R,ge.y2)+Y+Y+"z",Ke=Ke+ae.line(xe,M)+Y+Y+Y+Y+Y+ae.line(xe,M),K.config.chart.stacked&&(this.barCtx.yArrj.push(ge.y2),this.barCtx.yArrjF.push(Math.abs(M-ge.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[J][te])),{pathTo:ze,pathFrom:Ke}}},{key:"getBarpaths",value:function(d){var p=d.barYPosition,y=d.barHeight,C=d.x1,M=d.x2,L=d.strokeWidth,R=d.series,H=d.realIndex,G=d.i,J=d.j,te=d.w,K=new Mt(this.barCtx.ctx);(L=Array.isArray(L)?L[H]:L)||(L=0);var pe=this.getRoundedBars(te,{barHeight:y,strokeWidth:L,barYPosition:p,x2:M,x1:C},R,G,J),ge=K.move(C,p),xe=K.move(C,p);te.globals.previousPaths.length>0&&(xe=this.barCtx.getPreviousPath(H,J,!1));var Me=p,ze=p+y,Ke=K.line(C,ze-L);return ge=ge+K.line(pe.x2,Me)+pe.pathWithRadius+K.line(pe.x2,ze-L)+Ke+Ke+"z",xe=xe+K.line(C,Me)+Ke+Ke+Ke+Ke+Ke+K.line(C,Me),te.config.chart.stacked&&(this.barCtx.xArrj.push(pe.x2),this.barCtx.xArrjF.push(Math.abs(C-pe.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[G][J])),{pathTo:ge,pathFrom:xe}}},{key:"getRoundedBars",value:function(d,p,y,C,M){var L=new Mt(this.barCtx.ctx),R=d.config.plotOptions.bar.borderRadius;if(d.config.chart.stacked&&y.length>1&&C!==this.barCtx.radiusOnSeriesNumber&&(R=0),this.barCtx.isHorizontal){var H="",G=p.x2;if(Math.abs(p.x1-p.x2)<R&&(R=Math.abs(p.x1-p.x2)),void 0!==y[C][M]||null!==y[C][M]){var J=this.barCtx.isReversed?y[C][M]>0:y[C][M]<0;J&&(R*=-1),H=L.quadraticCurve((G-=R)+R,p.barYPosition,G+R,p.barYPosition+(J?-1*R:R))+L.line(G+R,p.barYPosition+p.barHeight-p.strokeWidth-(J?-1*R:R))+L.quadraticCurve(G+R,p.barYPosition+p.barHeight-p.strokeWidth,G,p.barYPosition+p.barHeight-p.strokeWidth)}return{pathWithRadius:H,x2:G}}var te="",K=p.y2;if(Math.abs(p.y1-p.y2)<R&&(R=Math.abs(p.y1-p.y2)),void 0!==y[C][M]||null!==y[C][M]){var ae=y[C][M]<0;ae&&(R*=-1),te=L.quadraticCurve(p.barXPosition,(K+=R)-R,p.barXPosition+(ae?-1*R:R),K-R)+L.line(p.barXPosition+p.barWidth-p.strokeWidth-(ae?-1*R:R),K-R)+L.quadraticCurve(p.barXPosition+p.barWidth-p.strokeWidth,K-R,p.barXPosition+p.barWidth-p.strokeWidth,K)}return{pathWithRadius:te,y2:K}}},{key:"checkZeroSeries",value:function(d){for(var p=d.series,y=this.w,C=0;C<p.length;C++){for(var M=0,L=0;L<p[y.globals.maxValsInArrayIndex].length;L++)M+=p[C][L];0===M&&this.barCtx.zeroSerieses.push(C)}for(var R=p.length-1;R>=0;R--)this.barCtx.zeroSerieses.indexOf(R)>-1&&R===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var H=p.length-1;H>=0;H--)y.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(d,p){var y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=y?p:null;return null!=d&&(C=p+d/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?d/this.barCtx.invertedYRatio:0)),C}},{key:"getYForValue",value:function(d,p){var y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=y?p:null;return null!=d&&(C=p-d/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?d/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),C}},{key:"getGoalValues",value:function(d,p,y,C,M){var L=this,R=this.w,H=[];return R.globals.seriesGoals[C]&&R.globals.seriesGoals[C][M]&&Array.isArray(R.globals.seriesGoals[C][M])&&R.globals.seriesGoals[C][M].forEach(function(G){var J;H.push((Dt(J={},d,"x"===d?L.getXForValue(G.value,p,!1):L.getYForValue(G.value,y,!1)),Dt(J,"attrs",G),J))}),H}},{key:"drawGoalLine",value:function(d){var p=d.barXPosition,y=d.barYPosition,C=d.goalX,M=d.goalY,L=d.barWidth,R=d.barHeight,H=new Mt(this.barCtx.ctx),G=H.group({className:"apexcharts-bar-goals-groups"}),J=null;return this.barCtx.isHorizontal?Array.isArray(C)&&C.forEach(function(te){J=H.drawLine(te.x,y,te.x,y+R,te.attrs.strokeColor?te.attrs.strokeColor:void 0,0,te.attrs.strokeWidth?te.attrs.strokeWidth:2),G.add(J)}):Array.isArray(M)&&M.forEach(function(te){J=H.drawLine(p,te.y,p+L,te.y,te.attrs.strokeColor?te.attrs.strokeColor:void 0,0,te.attrs.strokeWidth?te.attrs.strokeWidth:2),G.add(J)}),G}}]),ve}(),mi=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w;var y=this.w;this.barOptions=y.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=y.config.stroke.width,this.isNullValue=!1,this.isTimelineBar="datetime"===y.config.xaxis.type&&y.globals.seriesRangeBarTimeline.length,this.xyRatios=p,null!==this.xyRatios&&(this.xRatio=p.xRatio,this.initialXRatio=p.initialXRatio,this.yRatio=p.yRatio,this.invertedXRatio=p.invertedXRatio,this.invertedYRatio=p.invertedYRatio,this.baseLineY=p.baseLineY,this.baseLineInvertedY=p.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new hi(this)}return gt(ve,[{key:"draw",value:function(d,p){var y=this.w,C=new Mt(this.ctx),M=new Vn(this.ctx,y);d=M.getLogSeries(d),this.series=d,this.yRatio=M.getLogYRatios(this.yRatio),this.barHelpers.initVariables(d);var L=C.group({class:"apexcharts-bar-series apexcharts-plot-series"});y.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var R=0,H=0;R<d.length;R++,H++){var G,J,te,K,ae=void 0,pe=void 0,ge=[],xe=[],Me=y.globals.comboCharts?p[R]:R,ze=C.group({class:"apexcharts-series",rel:R+1,seriesName:Qe.escapeString(y.globals.seriesNames[Me]),"data:realIndex":Me});this.ctx.series.addCollapsedClassToSeries(ze,Me),d[R].length>0&&(this.visibleI=this.visibleI+1);var Ke=0,Y=0;this.yRatio.length>1&&(this.yaxisIndex=Me),this.isReversed=y.config.yaxis[this.yaxisIndex]&&y.config.yaxis[this.yaxisIndex].reversed;var ne=this.barHelpers.initialPositions();pe=ne.y,Ke=ne.barHeight,J=ne.yDivision,K=ne.zeroW,ae=ne.x,Y=ne.barWidth,G=ne.xDivision,te=ne.zeroH,this.horizontal||xe.push(ae+Y/2);for(var be=C.group({class:"apexcharts-datalabels","data:realIndex":Me}),Ie=C.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),Je=0;Je<y.globals.dataPoints;Je++){var Nt=this.barHelpers.getStrokeWidth(R,Je,Me),St=null,Xt={indexes:{i:R,j:Je,realIndex:Me,bc:H},x:ae,y:pe,strokeWidth:Nt,elSeries:ze};this.isHorizontal?(St=this.drawBarPaths(Be(Be({},Xt),{},{barHeight:Ke,zeroW:K,yDivision:J})),Y=this.series[R][Je]/this.invertedYRatio):(St=this.drawColumnPaths(Be(Be({},Xt),{},{xDivision:G,barWidth:Y,zeroH:te})),Ke=this.series[R][Je]/this.yRatio[this.yaxisIndex]);var gn=this.barHelpers.drawGoalLine({barXPosition:St.barXPosition,barYPosition:St.barYPosition,goalX:St.goalX,goalY:St.goalY,barHeight:Ke,barWidth:Y});gn&&Ie.add(gn),pe=St.y,ae=St.x,Je>0&&xe.push(ae+Y/2),ge.push(pe);var hn=this.barHelpers.getPathFillColor(d,R,Je,Me);this.renderSeries({realIndex:Me,pathFill:hn,j:Je,i:R,pathFrom:St.pathFrom,pathTo:St.pathTo,strokeWidth:Nt,elSeries:ze,x:ae,y:pe,series:d,barHeight:Ke,barWidth:Y,elDataLabelsWrap:be,elGoalsMarkers:Ie,visibleSeries:this.visibleI,type:"bar"})}y.globals.seriesXvalues[Me]=xe,y.globals.seriesYvalues[Me]=ge,L.add(ze)}return L}},{key:"renderSeries",value:function(d){var p=d.realIndex,y=d.pathFill,C=d.lineFill,M=d.j,L=d.i,R=d.pathFrom,H=d.pathTo,G=d.strokeWidth,J=d.elSeries,te=d.x,K=d.y,ae=d.y1,pe=d.y2,ge=d.series,xe=d.barHeight,Me=d.barWidth,ze=d.barYPosition,Ke=d.elDataLabelsWrap,Y=d.elGoalsMarkers,ne=d.visibleSeries,be=d.type,Ie=this.w,Je=new Mt(this.ctx);C||(C=this.barOptions.distributed?Ie.globals.stroke.colors[M]:Ie.globals.stroke.colors[p]),Ie.config.series[L].data[M]&&Ie.config.series[L].data[M].strokeColor&&(C=Ie.config.series[L].data[M].strokeColor),this.isNullValue&&(y="none");var St=Je.renderPaths({i:L,j:M,realIndex:p,pathFrom:R,pathTo:H,stroke:C,strokeWidth:G,strokeLineCap:Ie.config.stroke.lineCap,fill:y,animationDelay:M/Ie.config.chart.animations.animateGradually.delay*(Ie.config.chart.animations.speed/Ie.globals.dataPoints)/2.4,initialSpeed:Ie.config.chart.animations.speed,dataChangeSpeed:Ie.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(be,"-area")});St.attr("clip-path","url(#gridRectMask".concat(Ie.globals.cuid,")"));var Xt=Ie.config.forecastDataPoints;Xt.count>0&&M>=Ie.globals.dataPoints-Xt.count&&(St.node.setAttribute("stroke-dasharray",Xt.dashArray),St.node.setAttribute("stroke-width",Xt.strokeWidth),St.node.setAttribute("fill-opacity",Xt.fillOpacity)),void 0!==ae&&void 0!==pe&&(St.attr("data-range-y1",ae),St.attr("data-range-y2",pe)),new dn(this.ctx).setSelectionFilter(St,p,M),J.add(St);var gn=new Yt(this).handleBarDataLabels({x:te,y:K,y1:ae,y2:pe,i:L,j:M,series:ge,realIndex:p,barHeight:xe,barWidth:Me,barYPosition:ze,renderedPath:St,visibleSeries:ne});return null!==gn&&Ke.add(gn),J.add(Ke),Y&&J.add(Y),J}},{key:"drawBarPaths",value:function(d){var L,p=d.indexes,y=d.barHeight,C=d.strokeWidth,M=d.zeroW,R=d.y,H=d.yDivision,G=d.elSeries,J=this.w,te=p.i,K=p.j;J.globals.isXNumeric&&(R=(J.globals.seriesX[te][K]-J.globals.minX)/this.invertedXRatio-y);var ae=R+y*this.visibleI;L=this.barHelpers.getXForValue(this.series[te][K],M);var pe=this.barHelpers.getBarpaths({barYPosition:ae,barHeight:y,x1:M,x2:L,strokeWidth:C,series:this.series,realIndex:p.realIndex,i:te,j:K,w:J});return J.globals.isXNumeric||(R+=H),this.barHelpers.barBackground({j:K,i:te,y1:ae-y*this.visibleI,y2:y*this.seriesLen,elSeries:G}),{pathTo:pe.pathTo,pathFrom:pe.pathFrom,x:L,y:R,goalX:this.barHelpers.getGoalValues("x",M,null,te,K),barYPosition:ae}}},{key:"drawColumnPaths",value:function(d){var C,p=d.indexes,y=d.x,M=d.xDivision,L=d.barWidth,R=d.zeroH,H=d.strokeWidth,G=d.elSeries,J=this.w,te=p.realIndex,K=p.i,ae=p.j,pe=p.bc;if(J.globals.isXNumeric){var ge=te;J.globals.seriesX[te].length||(ge=J.globals.maxValsInArrayIndex),y=(J.globals.seriesX[ge][ae]-J.globals.minX)/this.xRatio-L*this.seriesLen/2}var xe=y+L*this.visibleI;C=this.barHelpers.getYForValue(this.series[K][ae],R);var Me=this.barHelpers.getColumnPaths({barXPosition:xe,barWidth:L,y1:R,y2:C,strokeWidth:H,series:this.series,realIndex:p.realIndex,i:K,j:ae,w:J});return J.globals.isXNumeric||(y+=M),this.barHelpers.barBackground({bc:pe,j:ae,i:K,x1:xe-H/2-L*this.visibleI,x2:L*this.seriesLen+H/2,elSeries:G}),{pathTo:Me.pathTo,pathFrom:Me.pathFrom,x:y,y:C,goalY:this.barHelpers.getGoalValues("y",null,R,K,ae),barXPosition:xe}}},{key:"getPreviousPath",value:function(d,p){for(var y,C=this.w,M=0;M<C.globals.previousPaths.length;M++){var L=C.globals.previousPaths[M];L.paths&&L.paths.length>0&&parseInt(L.realIndex,10)===parseInt(d,10)&&void 0!==C.globals.previousPaths[M].paths[p]&&(y=C.globals.previousPaths[M].paths[p].d)}return y}}]),ve}(),Un=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return gt(ve,[{key:"isValidDate",value:function(d){return!isNaN(this.parseDate(d))}},{key:"getTimeStamp",value:function(d){return Date.parse(d)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(d).toISOString().substr(0,25)).getTime():new Date(d).getTime():d}},{key:"getDate",value:function(d){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(d).toUTCString()):new Date(d)}},{key:"parseDate",value:function(d){var p=Date.parse(d);if(!isNaN(p))return this.getTimeStamp(d);var y=Date.parse(d.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(y)}},{key:"parseDateWithTimezone",value:function(d){return Date.parse(d.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(d,p){var y=this.w.globals.locale,C=this.w.config.xaxis.labels.datetimeUTC,M=["\0"].concat(zt(y.months)),L=["\x01"].concat(zt(y.shortMonths)),R=["\x02"].concat(zt(y.days)),H=["\x03"].concat(zt(y.shortDays));function G(Je,Nt){var St=Je+"";for(Nt=Nt||2;St.length<Nt;)St="0"+St;return St}var J=C?d.getUTCFullYear():d.getFullYear();p=(p=(p=p.replace(/(^|[^\\])yyyy+/g,"$1"+J)).replace(/(^|[^\\])yy/g,"$1"+J.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+J);var te=(C?d.getUTCMonth():d.getMonth())+1;p=(p=(p=(p=p.replace(/(^|[^\\])MMMM+/g,"$1"+M[0])).replace(/(^|[^\\])MMM/g,"$1"+L[0])).replace(/(^|[^\\])MM/g,"$1"+G(te))).replace(/(^|[^\\])M/g,"$1"+te);var K=C?d.getUTCDate():d.getDate();p=(p=(p=(p=p.replace(/(^|[^\\])dddd+/g,"$1"+R[0])).replace(/(^|[^\\])ddd/g,"$1"+H[0])).replace(/(^|[^\\])dd/g,"$1"+G(K))).replace(/(^|[^\\])d/g,"$1"+K);var ae=C?d.getUTCHours():d.getHours(),pe=ae>12?ae-12:0===ae?12:ae;p=(p=(p=(p=p.replace(/(^|[^\\])HH+/g,"$1"+G(ae))).replace(/(^|[^\\])H/g,"$1"+ae)).replace(/(^|[^\\])hh+/g,"$1"+G(pe))).replace(/(^|[^\\])h/g,"$1"+pe);var ge=C?d.getUTCMinutes():d.getMinutes();p=(p=p.replace(/(^|[^\\])mm+/g,"$1"+G(ge))).replace(/(^|[^\\])m/g,"$1"+ge);var xe=C?d.getUTCSeconds():d.getSeconds();p=(p=p.replace(/(^|[^\\])ss+/g,"$1"+G(xe))).replace(/(^|[^\\])s/g,"$1"+xe);var Me=C?d.getUTCMilliseconds():d.getMilliseconds();p=p.replace(/(^|[^\\])fff+/g,"$1"+G(Me,3)),Me=Math.round(Me/10),p=p.replace(/(^|[^\\])ff/g,"$1"+G(Me)),Me=Math.round(Me/10);var ze=ae<12?"AM":"PM";p=(p=(p=p.replace(/(^|[^\\])f/g,"$1"+Me)).replace(/(^|[^\\])TT+/g,"$1"+ze)).replace(/(^|[^\\])T/g,"$1"+ze.charAt(0));var Ke=ze.toLowerCase();p=(p=p.replace(/(^|[^\\])tt+/g,"$1"+Ke)).replace(/(^|[^\\])t/g,"$1"+Ke.charAt(0));var Y=-d.getTimezoneOffset(),ne=C||!Y?"Z":Y>0?"+":"-";if(!C){var be=(Y=Math.abs(Y))%60;ne+=G(Math.floor(Y/60))+":"+G(be)}p=p.replace(/(^|[^\\])K/g,"$1"+ne);var Ie=(C?d.getUTCDay():d.getDay())+1;return(p=(p=(p=(p=p.replace(new RegExp(R[0],"g"),R[Ie])).replace(new RegExp(H[0],"g"),H[Ie])).replace(new RegExp(M[0],"g"),M[te])).replace(new RegExp(L[0],"g"),L[te])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(d,p,y){var C=this.w;void 0!==C.config.xaxis.min&&(d=C.config.xaxis.min),void 0!==C.config.xaxis.max&&(p=C.config.xaxis.max);var M=this.getDate(d),L=this.getDate(p),R=this.formatDate(M,"yyyy MM dd HH mm ss fff").split(" "),H=this.formatDate(L,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(R[6],10),maxMillisecond:parseInt(H[6],10),minSecond:parseInt(R[5],10),maxSecond:parseInt(H[5],10),minMinute:parseInt(R[4],10),maxMinute:parseInt(H[4],10),minHour:parseInt(R[3],10),maxHour:parseInt(H[3],10),minDate:parseInt(R[2],10),maxDate:parseInt(H[2],10),minMonth:parseInt(R[1],10)-1,maxMonth:parseInt(H[1],10)-1,minYear:parseInt(R[0],10),maxYear:parseInt(H[0],10)}}},{key:"isLeapYear",value:function(d){return d%4==0&&d%100!=0||d%400==0}},{key:"calculcateLastDaysOfMonth",value:function(d,p,y){return this.determineDaysOfMonths(d,p)-y}},{key:"determineDaysOfYear",value:function(d){var p=365;return this.isLeapYear(d)&&(p=366),p}},{key:"determineRemainingDaysOfYear",value:function(d,p,y){var C=this.daysCntOfYear[p]+y;return p>1&&this.isLeapYear()&&C++,C}},{key:"determineDaysOfMonths",value:function(d,p){var y=30;switch(d=Qe.monthMod(d),!0){case this.months30.indexOf(d)>-1:2===d&&(y=this.isLeapYear(p)?29:28);break;case this.months31.indexOf(d)>-1:default:y=31}return y}}]),ve}(),ii=function(ve){Ge(p,mi);var d=Ct(p);function p(){return Ee(this,p),d.apply(this,arguments)}return gt(p,[{key:"draw",value:function(y,C){var M=this.w,L=new Mt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=y,this.seriesRangeStart=M.globals.seriesRangeStart,this.seriesRangeEnd=M.globals.seriesRangeEnd,this.barHelpers.initVariables(y);for(var R=L.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),H=0;H<y.length;H++){var G,J,te,K=void 0,ae=void 0,pe=void 0,ge=M.globals.comboCharts?C[H]:H,xe=L.group({class:"apexcharts-series",seriesName:Qe.escapeString(M.globals.seriesNames[ge]),rel:H+1,"data:realIndex":ge});y[H].length>0&&(this.visibleI=this.visibleI+1);var Me=0,ze=0;this.yRatio.length>1&&(this.yaxisIndex=ge);var Ke=this.barHelpers.initialPositions();ae=Ke.y,te=Ke.zeroW,K=Ke.x,ze=Ke.barWidth,G=Ke.xDivision,J=Ke.zeroH;for(var Y=L.group({class:"apexcharts-datalabels","data:realIndex":ge}),ne=L.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),be=0;be<M.globals.dataPoints;be++){var Ie=this.barHelpers.getStrokeWidth(H,be,ge),Je=this.seriesRangeStart[H][be],Nt=this.seriesRangeEnd[H][be],St=null,Xt=null,gn={x:K,y:ae,strokeWidth:Ie,elSeries:xe};if(pe=Ke.yDivision,Me=Ke.barHeight,this.isHorizontal){Xt=ae+Me*this.visibleI;var hn=this.seriesLen;M.config.plotOptions.bar.rangeBarGroupRows&&(hn=1);var Kn=(pe-Me*hn)/2;if(void 0===M.config.series[H].data[be])break;if(this.isTimelineBar&&M.config.series[H].data[be].x){var Ni=this.detectOverlappingBars({i:H,j:be,barYPosition:Xt,srty:Kn,barHeight:Me,yDivision:pe,initPositions:Ke});Me=Ni.barHeight,Xt=Ni.barYPosition}ze=(St=this.drawRangeBarPaths(Be({indexes:{i:H,j:be,realIndex:ge},barHeight:Me,barYPosition:Xt,zeroW:te,yDivision:pe,y1:Je,y2:Nt},gn))).barWidth}else Me=(St=this.drawRangeColumnPaths(Be({indexes:{i:H,j:be,realIndex:ge},zeroH:J,barWidth:ze,xDivision:G},gn))).barHeight;var Nn=this.barHelpers.drawGoalLine({barXPosition:St.barXPosition,barYPosition:Xt,goalX:St.goalX,goalY:St.goalY,barHeight:Me,barWidth:ze});Nn&&ne.add(Nn),ae=St.y,K=St.x;var ei=this.barHelpers.getPathFillColor(y,H,be,ge);this.renderSeries({realIndex:ge,pathFill:ei,lineFill:M.globals.stroke.colors[ge],j:be,i:H,x:K,y:ae,y1:Je,y2:Nt,pathFrom:St.pathFrom,pathTo:St.pathTo,strokeWidth:Ie,elSeries:xe,series:y,barHeight:Me,barYPosition:Xt,barWidth:ze,elDataLabelsWrap:Y,elGoalsMarkers:ne,visibleSeries:this.visibleI,type:"rangebar"})}R.add(xe)}return R}},{key:"detectOverlappingBars",value:function(y){var C=y.i,M=y.j,L=y.barYPosition,R=y.srty,H=y.barHeight,G=y.yDivision,J=y.initPositions,te=this.w,K=[],ae=te.config.series[C].data[M].rangeName,pe=te.config.series[C].data[M].x,ge=te.globals.labels.indexOf(pe),xe=te.globals.seriesRangeBarTimeline[C].findIndex(function(Me){return Me.x===pe&&Me.overlaps.length>0});return L=te.config.plotOptions.bar.rangeBarGroupRows?R+G*ge:R+H*this.visibleI+G*ge,xe>-1&&!te.config.plotOptions.bar.rangeBarOverlap&&(K=te.globals.seriesRangeBarTimeline[C][xe].overlaps).indexOf(ae)>-1&&(L=(H=J.barHeight/K.length)*this.visibleI+G*(100-parseInt(this.barOptions.barHeight,10))/100/2+H*(this.visibleI+K.indexOf(ae))+G*ge),{barYPosition:L,barHeight:H}}},{key:"drawRangeColumnPaths",value:function(y){var C=y.indexes,M=y.x,L=y.xDivision,R=y.barWidth,H=y.zeroH,G=this.w,J=C.i,te=C.j,K=this.yRatio[this.yaxisIndex],ae=C.realIndex,pe=this.getRangeValue(ae,te),ge=Math.min(pe.start,pe.end),xe=Math.max(pe.start,pe.end);G.globals.isXNumeric&&(M=(G.globals.seriesX[J][te]-G.globals.minX)/this.xRatio-R/2);var Me=M+R*this.visibleI;null==this.series[J][te]?ge=H:(ge=H-ge/K,xe=H-xe/K);var ze=Math.abs(xe-ge),Ke=this.barHelpers.getColumnPaths({barXPosition:Me,barWidth:R,y1:ge,y2:xe,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:C.realIndex,i:ae,j:te,w:G});return G.globals.isXNumeric||(M+=L),{pathTo:Ke.pathTo,pathFrom:Ke.pathFrom,barHeight:ze,x:M,y:xe,goalY:this.barHelpers.getGoalValues("y",null,H,J,te),barXPosition:Me}}},{key:"drawRangeBarPaths",value:function(y){var C=y.indexes,M=y.y,H=y.yDivision,G=y.barHeight,J=y.barYPosition,te=y.zeroW,K=this.w,ae=te+y.y1/this.invertedYRatio,pe=te+y.y2/this.invertedYRatio,ge=Math.abs(pe-ae),xe=this.barHelpers.getBarpaths({barYPosition:J,barHeight:G,x1:ae,x2:pe,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:C.realIndex,realIndex:C.realIndex,j:C.j,w:K});return K.globals.isXNumeric||(M+=H),{pathTo:xe.pathTo,pathFrom:xe.pathFrom,barWidth:ge,x:pe,goalX:this.barHelpers.getGoalValues("x",te,null,C.realIndex,C.j),y:M}}},{key:"getRangeValue",value:function(y,C){var M=this.w;return{start:M.globals.seriesRangeStart[y][C],end:M.globals.seriesRangeEnd[y][C]}}},{key:"getTooltipValues",value:function(y){var C=y.ctx,M=y.seriesIndex,L=y.dataPointIndex,R=y.y1,H=y.y2,G=y.w,J=G.globals.seriesRangeStart[M][L],te=G.globals.seriesRangeEnd[M][L],K=G.globals.labels[L],ae=G.config.series[M].name?G.config.series[M].name:"",pe=G.config.tooltip.y.formatter,ge=G.config.tooltip.y.title.formatter,xe={w:G,seriesIndex:M,dataPointIndex:L,start:J,end:te};"function"==typeof ge&&(ae=ge(ae,xe)),Number.isFinite(R)&&Number.isFinite(H)&&(J=R,te=H,G.config.series[M].data[L].x&&(K=G.config.series[M].data[L].x+":"),"function"==typeof pe&&(K=pe(K,xe)));var Me="",ze="",Ke=G.globals.colors[M];if(void 0===G.config.tooltip.x.formatter)if("datetime"===G.config.xaxis.type){var Y=new Un(C);Me=Y.formatDate(Y.getDate(J),G.config.tooltip.x.format),ze=Y.formatDate(Y.getDate(te),G.config.tooltip.x.format)}else Me=J,ze=te;else Me=G.config.tooltip.x.formatter(J),ze=G.config.tooltip.x.formatter(te);return{start:J,end:te,startVal:Me,endVal:ze,ylabel:K,color:Ke,seriesName:ae}}},{key:"buildCustomTooltipHTML",value:function(y){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+y.color+'">'+(y.seriesName||"")+'</span></div><div> <span class="category">'+y.ylabel+' </span> <span class="value start-value">'+y.start+'</span> <span class="separator">-</span> <span class="value end-value">'+y.end+"</span></div></div>"}}]),p}(),Hn=function(){function ve(d){Ee(this,ve),this.opts=d}return gt(ve,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(d){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,Qe.extend(d,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var d=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(p){return d._getBoxTooltip(p.w,p.seriesIndex,p.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var d=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(p){return d._getBoxTooltip(p.w,p.seriesIndex,p.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(d,p){var y=p.seriesIndex,C=p.dataPointIndex,M=p.w;return M.globals.seriesRangeEnd[y][C]-M.globals.seriesRangeStart[y][C]},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(d){return d.w.config.plotOptions&&d.w.config.plotOptions.bar&&d.w.config.plotOptions.bar.horizontal?(C=(y=new ii((p=d).ctx,null)).getTooltipValues(p),y.buildCustomTooltipHTML({color:C.color,seriesName:C.seriesName,ylabel:C.ylabel,start:C.startVal,end:C.endVal})):function(p){var y=new ii(p.ctx,null),C=y.getTooltipValues(p);return y.buildCustomTooltipHTML({color:C.color,seriesName:C.seriesName,ylabel:C.ylabel,start:C.start,end:C.end})}(d);var p,y,C}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(d){return Qe.extend(d,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(d){d.dataLabels=d.dataLabels||{},d.dataLabels.formatter=d.dataLabels.formatter||void 0;var p=d.dataLabels.formatter;return d.yaxis.forEach(function(y,C){d.yaxis[C].min=0,d.yaxis[C].max=100}),"bar"===d.chart.type&&(d.dataLabels.formatter=p||function(y){return"number"==typeof y&&y?y.toFixed(0)+"%":y}),d}},{key:"convertCatToNumeric",value:function(d){return d.xaxis.convertedCatToNumeric=!0,d}},{key:"convertCatToNumericXaxis",value:function(d,p,y){d.xaxis.type="numeric",d.xaxis.labels=d.xaxis.labels||{},d.xaxis.labels.formatter=d.xaxis.labels.formatter||function(L){return Qe.isNumber(L)?Math.floor(L):L};var C=d.xaxis.labels.formatter,M=d.xaxis.categories&&d.xaxis.categories.length?d.xaxis.categories:d.labels;return y&&y.length&&(M=y.map(function(L){return Array.isArray(L)?L:String(L)})),M&&M.length&&(d.xaxis.labels.formatter=function(L){return Qe.isNumber(L)?C(M[Math.floor(L)-1]):C(L)}),d.xaxis.categories=[],d.labels=[],d.xaxis.tickAmount=d.xaxis.tickAmount||"dataPoints",d}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(d){return d.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(d){return d.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(d){return d.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(d){return d},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(d,p,y,C,M){var L=d.globals.seriesCandleO[p][y],R=d.globals.seriesCandleH[p][y],H=d.globals.seriesCandleM[p][y],G=d.globals.seriesCandleL[p][y],J=d.globals.seriesCandleC[p][y];return d.config.series[p].type&&d.config.series[p].type!==M?'<div class="apexcharts-custom-tooltip">\n          '.concat(d.config.series[p].name?d.config.series[p].name:"series-"+(p+1),": <strong>").concat(d.globals.series[p][y],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(d.config.chart.type,'">')+"<div>".concat(C[0],': <span class="value">')+L+"</span></div>"+"<div>".concat(C[1],': <span class="value">')+R+"</span></div>"+(H?"<div>".concat(C[2],': <span class="value">')+H+"</span></div>":"")+"<div>".concat(C[3],': <span class="value">')+G+"</span></div>"+"<div>".concat(C[4],': <span class="value">')+J+"</span></div></div>"}}]),ve}(),jn=function(){function ve(d){Ee(this,ve),this.opts=d}return gt(ve,[{key:"init",value:function(d){var p=d.responsiveOverride,y=this.opts,C=new Ki,M=new Hn(y);this.chartType=y.chart.type,"histogram"===this.chartType&&(y.chart.type="bar",y=Qe.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},y)),y=this.extendYAxis(y),y=this.extendAnnotations(y);var L=C.init(),R={};if(y&&"object"===Vt(y)){var H={};H=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(y.chart.type)?M[y.chart.type]():M.line(),y.chart.brush&&y.chart.brush.enabled&&(H=M.brush(H)),y.chart.stacked&&"100%"===y.chart.stackType&&(y=M.stacked100(y)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(y),y.xaxis=y.xaxis||window.Apex.xaxis||{},p||(y.xaxis.convertedCatToNumeric=!1),((y=this.checkForCatToNumericXAxis(this.chartType,H,y)).chart.sparkline&&y.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(H=M.sparkline(H)),R=Qe.extend(L,H)}var G=Qe.extend(R,window.Apex);return L=Qe.extend(G,y),this.handleUserInputErrors(L)}},{key:"checkForCatToNumericXAxis",value:function(d,p,y){var C=new Hn(y);return"bar"===d&&y.plotOptions&&y.plotOptions.bar&&y.plotOptions.bar.horizontal||"pie"===d||"polarArea"===d||"donut"===d||"radar"===d||"radialBar"===d||"heatmap"===d||!("datetime"!==y.xaxis.type&&"numeric"!==y.xaxis.type)||"between"===(y.xaxis.tickPlacement?y.xaxis.tickPlacement:p.xaxis&&p.xaxis.tickPlacement)||(y=C.convertCatToNumeric(y)),y}},{key:"extendYAxis",value:function(d,p){var y=new Ki;(void 0===d.yaxis||!d.yaxis||Array.isArray(d.yaxis)&&0===d.yaxis.length)&&(d.yaxis={}),d.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(d.yaxis=Qe.extend(d.yaxis,window.Apex.yaxis)),d.yaxis=d.yaxis.constructor!==Array?[Qe.extend(y.yAxis,d.yaxis)]:Qe.extendArray(d.yaxis,y.yAxis);var C=!1;d.yaxis.forEach(function(L){L.logarithmic&&(C=!0)});var M=d.series;return p&&!M&&(M=p.config.series),C&&M.length!==d.yaxis.length&&M.length&&(d.yaxis=M.map(function(L,R){if(L.name||(M[R].name="series-".concat(R+1)),d.yaxis[R])return d.yaxis[R].seriesName=M[R].name,d.yaxis[R];var H=Qe.extend(y.yAxis,d.yaxis[0]);return H.show=!1,H})),C&&M.length>1&&M.length!==d.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),d}},{key:"extendAnnotations",value:function(d){return void 0===d.annotations&&(d.annotations={},d.annotations.yaxis=[],d.annotations.xaxis=[],d.annotations.points=[]),d=this.extendYAxisAnnotations(d),d=this.extendXAxisAnnotations(d),this.extendPointAnnotations(d)}},{key:"extendYAxisAnnotations",value:function(d){var p=new Ki;return d.annotations.yaxis=Qe.extendArray(void 0!==d.annotations.yaxis?d.annotations.yaxis:[],p.yAxisAnnotation),d}},{key:"extendXAxisAnnotations",value:function(d){var p=new Ki;return d.annotations.xaxis=Qe.extendArray(void 0!==d.annotations.xaxis?d.annotations.xaxis:[],p.xAxisAnnotation),d}},{key:"extendPointAnnotations",value:function(d){var p=new Ki;return d.annotations.points=Qe.extendArray(void 0!==d.annotations.points?d.annotations.points:[],p.pointAnnotation),d}},{key:"checkForDarkTheme",value:function(d){d.theme&&"dark"===d.theme.mode&&(d.tooltip||(d.tooltip={}),"light"!==d.tooltip.theme&&(d.tooltip.theme="dark"),d.chart.foreColor||(d.chart.foreColor="#f6f7f8"),d.chart.background||(d.chart.background="#424242"),d.theme.palette||(d.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(d){var p=d;if(p.tooltip.shared&&p.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===p.chart.type&&p.plotOptions.bar.horizontal){if(p.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");p.yaxis[0].reversed&&(p.yaxis[0].opposite=!0),p.xaxis.tooltip.enabled=!1,p.yaxis[0].tooltip.enabled=!1,p.chart.zoom.enabled=!1}return"bar"!==p.chart.type&&"rangeBar"!==p.chart.type||p.tooltip.shared&&"barWidth"===p.xaxis.crosshairs.width&&p.series.length>1&&(p.xaxis.crosshairs.width="tickWidth"),"candlestick"!==p.chart.type&&"boxPlot"!==p.chart.type||p.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(p.chart.type," chart is not supported.")),p.yaxis[0].reversed=!1),p.chart.group&&0===p.yaxis[0].labels.minWidth&&console.warn("It looks like you have multiple charts in synchronization. You must provide yaxis.labels.minWidth which must be EQUAL for all grouped charts to prevent incorrect behaviour."),Array.isArray(p.stroke.width)&&"line"!==p.chart.type&&"area"!==p.chart.type&&(console.warn("stroke.width option accepts array only for line and area charts. Reverted back to Number"),p.stroke.width=p.stroke.width[0]),p}}]),ve}(),xi=function(){function ve(){Ee(this,ve)}return gt(ve,[{key:"initGlobalVars",value:function(d){d.series=[],d.seriesCandleO=[],d.seriesCandleH=[],d.seriesCandleM=[],d.seriesCandleL=[],d.seriesCandleC=[],d.seriesRangeStart=[],d.seriesRangeEnd=[],d.seriesRangeBarTimeline=[],d.seriesPercent=[],d.seriesGoals=[],d.seriesX=[],d.seriesZ=[],d.seriesNames=[],d.seriesTotals=[],d.seriesLog=[],d.seriesColors=[],d.stackedSeriesTotals=[],d.seriesXvalues=[],d.seriesYvalues=[],d.labels=[],d.categoryLabels=[],d.timescaleLabels=[],d.noLabelsProvided=!1,d.resizeTimer=null,d.selectionResizeTimer=null,d.delayedElements=[],d.pointsArray=[],d.dataLabelsRects=[],d.isXNumeric=!1,d.xaxisLabelsCount=0,d.skipLastTimelinelabel=!1,d.skipFirstTimelinelabel=!1,d.isDataXYZ=!1,d.isMultiLineX=!1,d.isMultipleYAxis=!1,d.maxY=-Number.MAX_VALUE,d.minY=Number.MIN_VALUE,d.minYArr=[],d.maxYArr=[],d.maxX=-Number.MAX_VALUE,d.minX=Number.MAX_VALUE,d.initialMaxX=-Number.MAX_VALUE,d.initialMinX=Number.MAX_VALUE,d.maxDate=0,d.minDate=Number.MAX_VALUE,d.minZ=Number.MAX_VALUE,d.maxZ=-Number.MAX_VALUE,d.minXDiff=Number.MAX_VALUE,d.yAxisScale=[],d.xAxisScale=null,d.xAxisTicksPositions=[],d.yLabelsCoords=[],d.yTitleCoords=[],d.barPadForNumericAxis=0,d.padHorizontal=0,d.xRange=0,d.yRange=[],d.zRange=0,d.dataPoints=0,d.xTickAmount=0}},{key:"globalVars",value:function(d){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:d.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===d.chart.toolbar.autoSelected&&d.chart.toolbar.tools.zoom&&d.chart.zoom.enabled,panEnabled:"pan"===d.chart.toolbar.autoSelected&&d.chart.toolbar.tools.pan,selectionEnabled:"selection"===d.chart.toolbar.autoSelected&&d.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(d){var p=this.globalVars(d);return this.initGlobalVars(p),p.initialConfig=Qe.extend({},d),p.initialSeries=Qe.clone(d.series),p.lastXAxis=Qe.clone(p.initialConfig.xaxis),p.lastYAxis=Qe.clone(p.initialConfig.yaxis),p}}]),ve}(),li=function(){function ve(d){Ee(this,ve),this.opts=d}return gt(ve,[{key:"init",value:function(){var d=new jn(this.opts).init({responsiveOverride:!1});return{config:d,globals:(new xi).init(d)}}}]),ve}(),Yi=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Vn(this.ctx)}return gt(ve,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var d=this.w.config.series.slice(),p=new On(this.ctx);if(this.activeSeriesIndex=p.getActiveConfigSeriesIndex(),void 0!==d[this.activeSeriesIndex].data&&d[this.activeSeriesIndex].data.length>0&&null!==d[this.activeSeriesIndex].data[0]&&void 0!==d[this.activeSeriesIndex].data[0].x&&null!==d[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var d=this.w.config.series.slice(),p=new On(this.ctx);if(this.activeSeriesIndex=p.getActiveConfigSeriesIndex(),void 0!==d[this.activeSeriesIndex].data&&d[this.activeSeriesIndex].data.length>0&&null!=d[this.activeSeriesIndex].data[0]&&d[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(d,p){for(var y=this.w.config,C=this.w.globals,M="boxPlot"===y.chart.type||"boxPlot"===y.series[p].type,L=0;L<d[p].data.length;L++)if(void 0!==d[p].data[L][1]&&(Array.isArray(d[p].data[L][1])&&4===d[p].data[L][1].length&&!M?this.twoDSeries.push(Qe.parseNumber(d[p].data[L][1][3])):this.twoDSeries.push(Qe.parseNumber(d[p].data[L].length>=5?d[p].data[L][4]:d[p].data[L][1])),C.dataFormatXNumeric=!0),"datetime"===y.xaxis.type){var R=new Date(d[p].data[L][0]);R=new Date(R).getTime(),this.twoDSeriesX.push(R)}else this.twoDSeriesX.push(d[p].data[L][0]);for(var H=0;H<d[p].data.length;H++)void 0!==d[p].data[H][2]&&(this.threeDSeries.push(d[p].data[H][2]),C.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(d,p){var y=this.w.config,C=this.w.globals,M=new Un(this.ctx),L=p;C.collapsedSeriesIndices.indexOf(p)>-1&&(L=this.activeSeriesIndex);for(var R=0;R<d[p].data.length;R++)void 0!==d[p].data[R].y&&(Array.isArray(d[p].data[R].y)?this.twoDSeries.push(Qe.parseNumber(d[p].data[R].y[d[p].data[R].y.length-1])):this.twoDSeries.push(Qe.parseNumber(d[p].data[R].y))),void 0!==d[p].data[R].goals&&Array.isArray(d[p].data[R].goals)?(void 0===this.seriesGoals[p]&&(this.seriesGoals[p]=[]),this.seriesGoals[p].push(d[p].data[R].goals)):(void 0===this.seriesGoals[p]&&(this.seriesGoals[p]=[]),this.seriesGoals[p].push(null));for(var H=0;H<d[L].data.length;H++){var G="string"==typeof d[L].data[H].x,J=Array.isArray(d[L].data[H].x),te=!J&&!!M.isValidDate(d[L].data[H].x.toString());G||te?G||y.xaxis.convertedCatToNumeric?"datetime"!==y.xaxis.type||C.isBarHorizontal&&C.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(d[L].data[H].x)):this.twoDSeriesX.push(M.parseDate(d[L].data[H].x)):"datetime"===y.xaxis.type?this.twoDSeriesX.push(M.parseDate(d[L].data[H].x.toString())):(C.dataFormatXNumeric=!0,C.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(d[L].data[H].x))):J?(this.fallbackToCategory=!0,this.twoDSeriesX.push(d[L].data[H].x)):(C.isXNumeric=!0,C.dataFormatXNumeric=!0,this.twoDSeriesX.push(d[L].data[H].x))}if(d[p].data[0]&&void 0!==d[p].data[0].z){for(var ae=0;ae<d[p].data.length;ae++)this.threeDSeries.push(d[p].data[ae].z);C.isDataXYZ=!0}}},{key:"handleRangeData",value:function(d,p){var y=this.w.config,C=this.w.globals,M={};return this.isFormat2DArray()?M=this.handleRangeDataFormat("array",d,p):this.isFormatXY()&&(M=this.handleRangeDataFormat("xy",d,p)),C.seriesRangeStart.push(M.start),C.seriesRangeEnd.push(M.end),"datetime"===y.xaxis.type&&C.seriesRangeBarTimeline.push(M.rangeUniques),C.seriesRangeBarTimeline.forEach(function(L,R){L&&L.forEach(function(H,G){H.y.forEach(function(J,te){for(var K=0;K<H.y.length;K++)te!==K&&J.y1<=H.y[K].y2&&H.y[K].y1<=J.y2&&(H.overlaps.indexOf(J.rangeName)<0&&H.overlaps.push(J.rangeName),H.overlaps.indexOf(H.y[K].rangeName)<0&&H.overlaps.push(H.y[K].rangeName))})})}),M}},{key:"handleCandleStickBoxData",value:function(d,p){var y=this.w.globals,C={};return this.isFormat2DArray()?C=this.handleCandleStickBoxDataFormat("array",d,p):this.isFormatXY()&&(C=this.handleCandleStickBoxDataFormat("xy",d,p)),y.seriesCandleO[p]=C.o,y.seriesCandleH[p]=C.h,y.seriesCandleM[p]=C.m,y.seriesCandleL[p]=C.l,y.seriesCandleC[p]=C.c,C}},{key:"handleRangeDataFormat",value:function(d,p,y){var C=[],M=[],L=p[y].data.filter(function(K,ae,pe){return ae===pe.findIndex(function(ge){return ge.x===K.x})}).map(function(K,ae){return{x:K.x,overlaps:[],y:[]}}),R="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",H=new On(this.ctx).getActiveConfigSeriesIndex();if("array"===d){if(2!==p[H].data[0][1].length)throw new Error(R);for(var G=0;G<p[y].data.length;G++)C.push(p[y].data[G][1][0]),M.push(p[y].data[G][1][1])}else if("xy"===d){if(2!==p[H].data[0].y.length)throw new Error(R);for(var J=function(K){var ae=Qe.randomId(),pe=p[y].data[K].x,ge={y1:p[y].data[K].y[0],y2:p[y].data[K].y[1],rangeName:ae};p[y].data[K].rangeName=ae;var xe=L.findIndex(function(Me){return Me.x===pe});L[xe].y.push(ge),C.push(ge.y1),M.push(ge.y2)},te=0;te<p[y].data.length;te++)J(te)}return{start:C,end:M,rangeUniques:L}}},{key:"handleCandleStickBoxDataFormat",value:function(d,p,y){var C=this.w,M="boxPlot"===C.config.chart.type||"boxPlot"===C.config.series[y].type,L=[],R=[],H=[],G=[],J=[];if("array"===d)if(M&&6===p[y].data[0].length||!M&&5===p[y].data[0].length)for(var te=0;te<p[y].data.length;te++)L.push(p[y].data[te][1]),R.push(p[y].data[te][2]),M?(H.push(p[y].data[te][3]),G.push(p[y].data[te][4]),J.push(p[y].data[te][5])):(G.push(p[y].data[te][3]),J.push(p[y].data[te][4]));else for(var K=0;K<p[y].data.length;K++)Array.isArray(p[y].data[K][1])&&(L.push(p[y].data[K][1][0]),R.push(p[y].data[K][1][1]),M?(H.push(p[y].data[K][1][2]),G.push(p[y].data[K][1][3]),J.push(p[y].data[K][1][4])):(G.push(p[y].data[K][1][2]),J.push(p[y].data[K][1][3])));else if("xy"===d)for(var ae=0;ae<p[y].data.length;ae++)Array.isArray(p[y].data[ae].y)&&(L.push(p[y].data[ae].y[0]),R.push(p[y].data[ae].y[1]),M?(H.push(p[y].data[ae].y[2]),G.push(p[y].data[ae].y[3]),J.push(p[y].data[ae].y[4])):(G.push(p[y].data[ae].y[2]),J.push(p[y].data[ae].y[3])));return{o:L,h:R,m:H,l:G,c:J}}},{key:"parseDataAxisCharts",value:function(d){var p=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,C=this.w.config,M=this.w.globals,L=new Un(y),R=C.labels.length>0?C.labels.slice():C.xaxis.categories.slice();M.isTimelineBar="rangeBar"===C.chart.type&&"datetime"===C.xaxis.type;for(var H=function(){for(var te=0;te<R.length;te++)if("string"==typeof R[te]){if(!L.isValidDate(R[te]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");p.twoDSeriesX.push(L.parseDate(R[te]))}else p.twoDSeriesX.push(R[te])},G=0;G<d.length;G++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===d[G].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==C.chart.type&&"rangeArea"!==C.chart.type&&"rangeBar"!==d[G].type&&"rangeArea"!==d[G].type||(M.isRangeData=!0,this.handleRangeData(d,G)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(d,G):this.isFormatXY()&&this.handleFormatXY(d,G),"candlestick"!==C.chart.type&&"candlestick"!==d[G].type&&"boxPlot"!==C.chart.type&&"boxPlot"!==d[G].type||this.handleCandleStickBoxData(d,G),M.series.push(this.twoDSeries),M.labels.push(this.twoDSeriesX),M.seriesX.push(this.twoDSeriesX),M.seriesGoals=this.seriesGoals,G!==this.activeSeriesIndex||this.fallbackToCategory||(M.isXNumeric=!0);else{"datetime"===C.xaxis.type?(M.isXNumeric=!0,H(),M.seriesX.push(this.twoDSeriesX)):"numeric"===C.xaxis.type&&(M.isXNumeric=!0,R.length>0&&(this.twoDSeriesX=R,M.seriesX.push(this.twoDSeriesX))),M.labels.push(this.twoDSeriesX);var J=d[G].data.map(function(te){return Qe.parseNumber(te)});M.series.push(J)}M.seriesZ.push(this.threeDSeries),M.seriesNames.push(void 0!==d[G].name?d[G].name:"series-"+parseInt(G+1,10)),M.seriesColors.push(void 0!==d[G].color?d[G].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(d){var p=this.w.globals,y=this.w.config;p.series=d.slice(),p.seriesNames=y.labels.slice();for(var C=0;C<p.series.length;C++)void 0===p.seriesNames[C]&&p.seriesNames.push("series-"+(C+1));return this.w}},{key:"handleExternalLabelsData",value:function(d){var p=this.w.config,y=this.w.globals;p.xaxis.categories.length>0?y.labels=p.xaxis.categories:p.labels.length>0?y.labels=p.labels.slice():this.fallbackToCategory?(y.labels=y.labels[0],y.seriesRangeBarTimeline.length&&(y.seriesRangeBarTimeline.map(function(C){C.forEach(function(M){y.labels.indexOf(M.x)<0&&M.x&&y.labels.push(M.x)})}),y.labels=y.labels.filter(function(C,M,L){return L.indexOf(C)===M})),p.xaxis.convertedCatToNumeric&&(new Hn(p).convertCatToNumericXaxis(p,this.ctx,y.seriesX[0]),this._generateExternalLabels(d))):this._generateExternalLabels(d)}},{key:"_generateExternalLabels",value:function(d){var p=this.w.globals,y=this.w.config,C=[];if(p.axisCharts){if(p.series.length>0)for(var M=0;M<p.series[p.maxValsInArrayIndex].length;M++)C.push(M+1);p.seriesX=[];for(var L=0;L<d.length;L++)p.seriesX.push(C);p.isXNumeric=!0}if(0===C.length){C=p.axisCharts?[]:p.series.map(function(H,G){return G+1});for(var R=0;R<d.length;R++)p.seriesX.push(C)}p.labels=C,y.xaxis.convertedCatToNumeric&&(p.categoryLabels=C.map(function(H){return y.xaxis.labels.formatter(H)})),p.noLabelsProvided=!0}},{key:"parseData",value:function(d){var p=this.w,y=p.config,C=p.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),C.axisCharts?this.parseDataAxisCharts(d):this.parseDataNonAxisCharts(d),this.coreUtils.getLargestSeries(),"bar"===y.chart.type&&y.chart.stacked){var M=new On(this.ctx);C.series=M.setNullSeriesToZeroValues(C.series)}this.coreUtils.getSeriesTotals(),C.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),C.dataFormatXNumeric||C.isXNumeric&&("numeric"!==y.xaxis.type||0!==y.labels.length||0!==y.xaxis.categories.length)||this.handleExternalLabelsData(d);for(var L=this.coreUtils.getCategoryLabels(C.labels),R=0;R<L.length;R++)if(Array.isArray(L[R])){C.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var d=this,p=this.w;p.globals.ignoreYAxisIndexes=p.globals.collapsedSeries.map(function(y,C){if(d.w.globals.isMultipleYAxis&&!p.config.chart.stacked)return y.index})}}]),ve}(),Do=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.tooltipKeyFormat="dd MMM"}return gt(ve,[{key:"xLabelFormat",value:function(d,p,y,C){var M=this.w;if("datetime"===M.config.xaxis.type&&void 0===M.config.xaxis.labels.formatter&&void 0===M.config.tooltip.x.formatter){var L=new Un(this.ctx);return L.formatDate(L.getDate(p),M.config.tooltip.x.format)}return d(p,y,C)}},{key:"defaultGeneralFormatter",value:function(d){return Array.isArray(d)?d.map(function(p){return p}):d}},{key:"defaultYFormatter",value:function(d,p,y){var C=this.w;return Qe.isNumber(d)&&(d=d.toFixed(0!==C.globals.yValueDecimal?void 0!==p.decimalsInFloat?p.decimalsInFloat:C.globals.yValueDecimal:C.globals.maxYArr[y]-C.globals.minYArr[y]<5?1:0)),d}},{key:"setLabelFormatters",value:function(){var d=this,p=this.w;return p.globals.xaxisTooltipFormatter=function(y){return d.defaultGeneralFormatter(y)},p.globals.ttKeyFormatter=function(y){return d.defaultGeneralFormatter(y)},p.globals.ttZFormatter=function(y){return y},p.globals.legendFormatter=function(y){return d.defaultGeneralFormatter(y)},p.globals.xLabelFormatter=void 0!==p.config.xaxis.labels.formatter?p.config.xaxis.labels.formatter:function(y){if(Qe.isNumber(y)){if(!p.config.xaxis.convertedCatToNumeric&&"numeric"===p.config.xaxis.type){if(Qe.isNumber(p.config.xaxis.decimalsInFloat))return y.toFixed(p.config.xaxis.decimalsInFloat);var C=p.globals.maxX-p.globals.minX;return y.toFixed(C>0&&C<100?1:0)}return y.toFixed(p.globals.isBarHorizontal&&p.globals.maxY-p.globals.minYArr<4?1:0)}return y},p.globals.ttKeyFormatter="function"==typeof p.config.tooltip.x.formatter?p.config.tooltip.x.formatter:p.globals.xLabelFormatter,"function"==typeof p.config.xaxis.tooltip.formatter&&(p.globals.xaxisTooltipFormatter=p.config.xaxis.tooltip.formatter),(Array.isArray(p.config.tooltip.y)||void 0!==p.config.tooltip.y.formatter)&&(p.globals.ttVal=p.config.tooltip.y),void 0!==p.config.tooltip.z.formatter&&(p.globals.ttZFormatter=p.config.tooltip.z.formatter),void 0!==p.config.legend.formatter&&(p.globals.legendFormatter=p.config.legend.formatter),p.config.yaxis.forEach(function(y,C){p.globals.yLabelFormatters[C]=void 0!==y.labels.formatter?y.labels.formatter:function(M){return p.globals.xyCharts?Array.isArray(M)?M.map(function(L){return d.defaultYFormatter(L,y,C)}):d.defaultYFormatter(M,y,C):M}}),p.globals}},{key:"heatmapLabelFormatters",value:function(){var d=this.w;if("heatmap"===d.config.chart.type){d.globals.yAxisScale[0].result=d.globals.seriesNames.slice();var p=d.globals.seriesNames.reduce(function(y,C){return y.length>C.length?y:C},0);d.globals.yAxisScale[0].niceMax=p,d.globals.yAxisScale[0].niceMin=p}}}]),ve}(),fr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"getLabel",value:function(d,p,y,C){var M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",R=this.w,H=void 0===d[C]?"":d[C],G=H,J=R.globals.xLabelFormatter,te=R.config.xaxis.labels.formatter,K=!1,ae=new Do(this.ctx),pe=H;G=ae.xLabelFormat(J,H,pe,{i:C,dateFormatter:new Un(this.ctx).formatDate,w:R}),void 0!==te&&(G=te(H,d[C],{i:C,dateFormatter:new Un(this.ctx).formatDate,w:R}));var ge=function(Ke){var Y=null;return p.forEach(function(ne){"month"===ne.unit?Y="year":"day"===ne.unit?Y="month":"hour"===ne.unit?Y="day":"minute"===ne.unit&&(Y="hour")}),Y===Ke};p.length>0?(K=ge(p[C].unit),y=p[C].position,G=p[C].value):"datetime"===R.config.xaxis.type&&void 0===te&&(G=""),void 0===G&&(G=""),G=Array.isArray(G)?G:G.toString();var xe=new Mt(this.ctx),Me={};Me=R.globals.rotateXLabels?xe.getTextRects(G,parseInt(L,10),null,"rotate(".concat(R.config.xaxis.labels.rotate," 0 0)"),!1):xe.getTextRects(G,parseInt(L,10));var ze=!R.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(G)&&(0===G.indexOf("NaN")||0===G.toLowerCase().indexOf("invalid")||G.toLowerCase().indexOf("infinity")>=0||M.indexOf(G)>=0&&ze)&&(G=""),{x:y,text:G,textRect:Me,isBold:K}}},{key:"checkLabelBasedOnTickamount",value:function(d,p,y){var C=this.w,M=C.config.xaxis.tickAmount;return"dataPoints"===M&&(M=Math.round(C.globals.gridWidth/120)),M>y||d%Math.round(y/(M+1))==0||(p.text=""),p}},{key:"checkForOverflowingLabels",value:function(d,p,y,C,M){var L=this.w;if(0===d&&L.globals.skipFirstTimelinelabel&&(p.text=""),d===y-1&&L.globals.skipLastTimelinelabel&&(p.text=""),L.config.xaxis.labels.hideOverlappingLabels&&C.length>0){var R=M[M.length-1];p.x<R.textRect.width/(L.globals.rotateXLabels?Math.abs(L.config.xaxis.labels.rotate)/12:1.01)+R.x&&(p.text="")}return p}},{key:"checkForReversedLabels",value:function(d,p){var y=this.w;return y.config.yaxis[d]&&y.config.yaxis[d].reversed&&p.reverse(),p}},{key:"isYAxisHidden",value:function(d){var p=this.w,y=new Vn(this.ctx);return!p.config.yaxis[d].show||!p.config.yaxis[d].showForNullSeries&&y.isSeriesNull(d)&&-1===p.globals.collapsedSeriesIndices.indexOf(d)}},{key:"getYAxisForeColor",value:function(d,p){var y=this.w;return Array.isArray(d)&&y.globals.yAxisScale[p]&&this.ctx.theme.pushExtraColors(d,y.globals.yAxisScale[p].result.length,!1),d}},{key:"drawYAxisTicks",value:function(d,p,y,C,M,L,R){var H=this.w,G=new Mt(this.ctx),J=H.globals.translateY;if(C.show&&p>0){!0===H.config.yaxis[M].opposite&&(d+=C.width);for(var te=p;te>=0;te--){var K=J+p/10+H.config.yaxis[M].labels.offsetY-1;H.globals.isBarHorizontal&&(K=L*te),"heatmap"===H.config.chart.type&&(K+=L/2);var ae=G.drawLine(d+y.offsetX-C.width+C.offsetX,K+C.offsetY,d+y.offsetX+C.offsetX,K+C.offsetY,C.color);R.add(ae),J+=L}}}}]),ve}(),io=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"scaleSvgNode",value:function(d,p){var y=parseFloat(d.getAttributeNS(null,"width")),C=parseFloat(d.getAttributeNS(null,"height"));d.setAttributeNS(null,"width",y*p),d.setAttributeNS(null,"height",C*p),d.setAttributeNS(null,"viewBox","0 0 "+y+" "+C)}},{key:"fixSvgStringForIe11",value:function(d){if(!Qe.isIE11())return d;var p=0,y=d.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(C){return 2==++p?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"':C});return(y=y.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(d){var p=this.w.globals.dom.Paper.svg();if(1!==d){var y=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(y,d),p=(new XMLSerializer).serializeToString(y)}return this.fixSvgStringForIe11(p)}},{key:"cleanup",value:function(){var d=this.w,p=d.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),y=d.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),C=d.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(C,function(M){M.setAttribute("width",0)}),p&&p[0]&&(p[0].setAttribute("x",-500),p[0].setAttribute("x1",-500),p[0].setAttribute("x2",-500)),y&&y[0]&&(y[0].setAttribute("y",-100),y[0].setAttribute("y1",-100),y[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var d=this.getSvgString(),p=new Blob([d],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(p)}},{key:"dataURI",value:function(d){var p=this;return new Promise(function(y){var C=p.w,M=d?d.scale||d.width/C.globals.svgWidth:1;p.cleanup();var L=document.createElement("canvas");L.width=C.globals.svgWidth*M,L.height=parseInt(C.globals.dom.elWrap.style.height,10)*M;var R="transparent"===C.config.chart.background?"#fff":C.config.chart.background,H=L.getContext("2d");H.fillStyle=R,H.fillRect(0,0,L.width*M,L.height*M);var G=p.getSvgString(M);if(window.canvg&&Qe.isIE11()){var J=window.canvg.Canvg.fromString(H,G,{ignoreClear:!0,ignoreDimensions:!0});J.start();var te=L.msToBlob();J.stop(),y({blob:te})}else{var K="data:image/svg+xml,"+encodeURIComponent(G),ae=new Image;ae.crossOrigin="anonymous",ae.onload=function(){if(H.drawImage(ae,0,0),L.msToBlob){var pe=L.msToBlob();y({blob:pe})}else{var ge=L.toDataURL("image/png");y({imgURI:ge})}},ae.src=K}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var d=this;this.dataURI().then(function(p){var y=p.imgURI,C=p.blob;C?navigator.msSaveOrOpenBlob(C,d.w.globals.chartID+".png"):d.triggerDownload(y,d.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(d){var p=this,y=d.series,C=d.columnDelimiter,M=d.lineDelimiter,L=void 0===M?"\n":M,R=this.w,H=[],G=[],J="data:text/csv;charset=utf-8,\ufeff",te=new Yi(this.ctx),K=new fr(this.ctx),ae=function(pe){var ge="";if(R.globals.axisCharts){if("category"===R.config.xaxis.type||R.config.xaxis.convertedCatToNumeric)if(R.globals.isBarHorizontal){var xe=R.globals.yLabelFormatters[0],Me=new On(p.ctx).getActiveConfigSeriesIndex();ge=xe(R.globals.labels[pe],{seriesIndex:Me,dataPointIndex:pe,w:R})}else ge=K.getLabel(R.globals.labels,R.globals.timescaleLabels,0,pe).text;"datetime"===R.config.xaxis.type&&(R.config.xaxis.categories.length?ge=R.config.xaxis.categories[pe]:R.config.labels.length&&(ge=R.config.labels[pe]))}else ge=R.config.labels[pe];return Array.isArray(ge)&&(ge=ge.join(" ")),Qe.isNumber(ge)?ge:ge.split(C).join("")};H.push(R.config.chart.toolbar.export.csv.headerCategory),y.map(function(pe,ge){var xe=pe.name?pe.name:"series-".concat(ge);R.globals.axisCharts&&H.push(xe.split(C).join("")?xe.split(C).join(""):"series-".concat(ge))}),R.globals.axisCharts||(H.push(R.config.chart.toolbar.export.csv.headerValue),G.push(H.join(C))),y.map(function(pe,ge){R.globals.axisCharts?function(xe,Me){if(H.length&&0===Me&&G.push(H.join(C)),xe.data&&xe.data.length)for(var ze=0;ze<xe.data.length;ze++){H=[];var Ke=ae(ze);if(Ke||(te.isFormatXY()?Ke=y[Me].data[ze].x:te.isFormat2DArray()&&(Ke=y[Me].data[ze]?y[Me].data[ze][0]:"")),0===Me){H.push("datetime"===R.config.xaxis.type&&String(Ke).length>=10?R.config.chart.toolbar.export.csv.dateFormatter(Ke):Qe.isNumber(Ke)?Ke:Ke.split(C).join(""));for(var Y=0;Y<R.globals.series.length;Y++)H.push(R.globals.series[Y][ze])}("candlestick"===R.config.chart.type||xe.type&&"candlestick"===xe.type)&&(H.pop(),H.push(R.globals.seriesCandleO[Me][ze]),H.push(R.globals.seriesCandleH[Me][ze]),H.push(R.globals.seriesCandleL[Me][ze]),H.push(R.globals.seriesCandleC[Me][ze])),("boxPlot"===R.config.chart.type||xe.type&&"boxPlot"===xe.type)&&(H.pop(),H.push(R.globals.seriesCandleO[Me][ze]),H.push(R.globals.seriesCandleH[Me][ze]),H.push(R.globals.seriesCandleM[Me][ze]),H.push(R.globals.seriesCandleL[Me][ze]),H.push(R.globals.seriesCandleC[Me][ze])),"rangeBar"===R.config.chart.type&&(H.pop(),H.push(R.globals.seriesRangeStart[Me][ze]),H.push(R.globals.seriesRangeEnd[Me][ze])),H.length&&G.push(H.join(C))}}(pe,ge):((H=[]).push(R.globals.labels[ge].split(C).join("")),H.push(R.globals.series[ge]),G.push(H.join(C)))}),J+=G.join(L),this.triggerDownload(encodeURI(J),R.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(d,p,y){var C=document.createElement("a");C.href=d,C.download=(p||this.w.globals.chartID)+y,document.body.appendChild(C),C.click(),document.body.removeChild(C)}}]),ve}(),Or=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.axesUtils=new fr(d),this.xaxisLabels=p.globals.labels.slice(),p.globals.timescaleLabels.length>0&&!p.globals.isBarHorizontal&&(this.xaxisLabels=p.globals.timescaleLabels.slice()),p.config.xaxis.overwriteCategories&&(this.xaxisLabels=p.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===p.config.xaxis.position?0:p.globals.gridHeight+1,this.offY=this.offY+p.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===p.config.chart.type&&p.config.plotOptions.bar.horizontal,this.xaxisFontSize=p.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=p.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=p.config.xaxis.labels.style.colors,this.xaxisBorderWidth=p.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=p.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?p.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=p.config.xaxis.axisBorder.height,this.yaxis=p.config.yaxis[0]}return gt(ve,[{key:"drawXaxis",value:function(){var d,p=this,y=this.w,C=new Mt(this.ctx),M=C.group({class:"apexcharts-xaxis",transform:"translate(".concat(y.config.xaxis.offsetX,", ").concat(y.config.xaxis.offsetY,")")}),L=C.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(y.globals.translateXAxisX,", ").concat(y.globals.translateXAxisY,")")});M.add(L);for(var R=y.globals.padHorizontal,H=[],G=0;G<this.xaxisLabels.length;G++)H.push(this.xaxisLabels[G]);var J=H.length;R=y.globals.isXNumeric?R+(d=y.globals.gridWidth/(J>1?J-1:J))/2+y.config.xaxis.labels.offsetX:R+(d=y.globals.gridWidth/H.length)+y.config.xaxis.labels.offsetX;for(var K=function(ze){var Ke=R-d/2+y.config.xaxis.labels.offsetX;0===ze&&1===J&&d/2===R&&1===y.globals.dataPoints&&(Ke=y.globals.gridWidth/2);var Y=p.axesUtils.getLabel(H,y.globals.timescaleLabels,Ke,ze,p.drawnLabels,p.xaxisFontSize),ne=28;if(y.globals.rotateXLabels&&(ne=22),(Y=void 0!==y.config.xaxis.tickAmount&&"dataPoints"!==y.config.xaxis.tickAmount&&"datetime"!==y.config.xaxis.type?p.axesUtils.checkLabelBasedOnTickamount(ze,Y,J):p.axesUtils.checkForOverflowingLabels(ze,Y,J,p.drawnLabels,p.drawnLabelsRects)).text&&y.globals.xaxisLabelsCount++,y.config.xaxis.labels.show){var be=C.drawText({x:Y.x,y:p.offY+y.config.xaxis.labels.offsetY+ne-("top"===y.config.xaxis.position?y.globals.xAxisHeight+y.config.xaxis.axisTicks.height-2:0),text:Y.text,textAnchor:"middle",fontWeight:Y.isBold?600:y.config.xaxis.labels.style.fontWeight,fontSize:p.xaxisFontSize,fontFamily:p.xaxisFontFamily,foreColor:Array.isArray(p.xaxisForeColors)?y.config.xaxis.convertedCatToNumeric?p.xaxisForeColors[y.globals.minX+ze-1]:p.xaxisForeColors[ze]:p.xaxisForeColors,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+y.config.xaxis.labels.style.cssClass});L.add(be);var Ie=document.createElementNS(y.globals.SVGNS,"title");Ie.textContent=Array.isArray(Y.text)?Y.text.join(" "):Y.text,be.node.appendChild(Ie),""!==Y.text&&(p.drawnLabels.push(Y.text),p.drawnLabelsRects.push(Y))}R+=d},ae=0;ae<=J-1;ae++)K(ae);if(void 0!==y.config.xaxis.title.text){var pe=C.group({class:"apexcharts-xaxis-title"}),ge=C.drawText({x:y.globals.gridWidth/2+y.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+y.globals.xAxisLabelsHeight+y.config.xaxis.title.offsetY,text:y.config.xaxis.title.text,textAnchor:"middle",fontSize:y.config.xaxis.title.style.fontSize,fontFamily:y.config.xaxis.title.style.fontFamily,fontWeight:y.config.xaxis.title.style.fontWeight,foreColor:y.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+y.config.xaxis.title.style.cssClass});pe.add(ge),M.add(pe)}if(y.config.xaxis.axisBorder.show){var xe=y.globals.barPadForNumericAxis,Me=C.drawLine(y.globals.padHorizontal+y.config.xaxis.axisBorder.offsetX-xe,this.offY,this.xaxisBorderWidth+xe,this.offY,y.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);M.add(Me)}return M}},{key:"drawXaxisInversed",value:function(d){var p,y,C=this,M=this.w,L=new Mt(this.ctx),R=M.config.yaxis[0].opposite?M.globals.translateYAxisX[d]:0,H=L.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:d}),G=L.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+R+", 0)"});H.add(G);var J=[];if(M.config.yaxis[d].show)for(var te=0;te<this.xaxisLabels.length;te++)J.push(this.xaxisLabels[te]);y=-(p=M.globals.gridHeight/J.length)/2.2;var K=M.globals.yLabelFormatters[0],ae=M.config.yaxis[0].labels;if(ae.show)for(var pe=function(ne){var be=void 0===J[ne]?"":J[ne];be=K(be,{seriesIndex:d,dataPointIndex:ne,w:M});var Ie=C.axesUtils.getYAxisForeColor(ae.style.colors,d),Je=0;Array.isArray(be)&&(Je=be.length/2*parseInt(ae.style.fontSize,10));var Nt=L.drawText({x:ae.offsetX-15,y:y+p+ae.offsetY-Je,text:be,textAnchor:C.yaxis.opposite?"start":"end",foreColor:Array.isArray(Ie)?Ie[ne]:Ie,fontSize:ae.style.fontSize,fontFamily:ae.style.fontFamily,fontWeight:ae.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+ae.style.cssClass});G.add(Nt);var St=document.createElementNS(M.globals.SVGNS,"title");if(St.textContent=Array.isArray(be)?be.join(" "):be,Nt.node.appendChild(St),0!==M.config.yaxis[d].labels.rotate){var Xt=L.rotateAroundCenter(Nt.node);Nt.node.setAttribute("transform","rotate(".concat(M.config.yaxis[d].labels.rotate," 0 ").concat(Xt.y,")"))}y+=p},ge=0;ge<=J.length-1;ge++)pe(ge);if(void 0!==M.config.yaxis[0].title.text){var xe=L.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+R+", 0)"}),Me=L.drawText({x:0,y:M.globals.gridHeight/2,text:M.config.yaxis[0].title.text,textAnchor:"middle",foreColor:M.config.yaxis[0].title.style.color,fontSize:M.config.yaxis[0].title.style.fontSize,fontWeight:M.config.yaxis[0].title.style.fontWeight,fontFamily:M.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+M.config.yaxis[0].title.style.cssClass});xe.add(Me),H.add(xe)}var ze=0;this.isCategoryBarHorizontal&&M.config.yaxis[0].opposite&&(ze=M.globals.gridWidth);var Ke=M.config.xaxis.axisBorder;if(Ke.show){var Y=L.drawLine(M.globals.padHorizontal+Ke.offsetX+ze,1+Ke.offsetY,M.globals.padHorizontal+Ke.offsetX+ze,M.globals.gridHeight+Ke.offsetY,Ke.color,0);H.add(Y)}return M.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(ze,J.length,M.config.yaxis[0].axisBorder,M.config.yaxis[0].axisTicks,0,p,H),H}},{key:"drawXaxisTicks",value:function(d,p){var y=this.w,C=d;if(!(d<0||d-2>y.globals.gridWidth)){var M=this.offY+y.config.xaxis.axisTicks.offsetY,L=M+y.config.xaxis.axisTicks.height;if("top"===y.config.xaxis.position&&(L=M-y.config.xaxis.axisTicks.height),y.config.xaxis.axisTicks.show){var R=new Mt(this.ctx).drawLine(d+y.config.xaxis.axisTicks.offsetX,M+y.config.xaxis.offsetY,C+y.config.xaxis.axisTicks.offsetX,L+y.config.xaxis.offsetY,y.config.xaxis.axisTicks.color);p.add(R),R.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var d=this.w,p=[],y=this.xaxisLabels.length,C=d.globals.padHorizontal;if(d.globals.timescaleLabels.length>0)for(var M=0;M<y;M++)p.push(C=this.xaxisLabels[M].position);else for(var L=y,R=0;R<L;R++){var H=L;d.globals.isXNumeric&&"bar"!==d.config.chart.type&&(H-=1),p.push(C+=d.globals.gridWidth/H)}return p}},{key:"xAxisLabelCorrections",value:function(){var d=this.w,p=new Mt(this.ctx),y=d.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),C=d.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text"),M=d.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),L=d.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(d.globals.rotateXLabels||d.config.xaxis.labels.rotateAlways)for(var R=0;R<C.length;R++){var H=p.rotateAroundCenter(C[R]);H.y=H.y-1,H.x=H.x+1,C[R].setAttribute("transform","rotate(".concat(d.config.xaxis.labels.rotate," ").concat(H.x," ").concat(H.y,")")),C[R].setAttribute("text-anchor","end"),y.setAttribute("transform","translate(0, ".concat(-10,")")),d.config.xaxis.labels.trim&&Array.prototype.forEach.call(C[R].childNodes,function(ae){p.placeTextWithEllipsis(ae,ae.textContent,d.globals.xAxisLabelsHeight-("bottom"===d.config.legend.position?20:10))})}else!function(){for(var ae=d.globals.gridWidth/(d.globals.labels.length+1),pe=0;pe<C.length;pe++)d.config.xaxis.labels.trim&&"datetime"!==d.config.xaxis.type&&Array.prototype.forEach.call(C[pe].childNodes,function(xe){p.placeTextWithEllipsis(xe,xe.textContent,ae)})}();if(M.length>0){var J=M[M.length-1].getBBox(),te=M[0].getBBox();J.x<-20&&M[M.length-1].parentNode.removeChild(M[M.length-1]),te.x+te.width>d.globals.gridWidth&&!d.globals.isBarHorizontal&&M[0].parentNode.removeChild(M[0]);for(var K=0;K<L.length;K++)p.placeTextWithEllipsis(L[K],L[K].textContent,d.config.yaxis[0].labels.maxWidth-2*parseFloat(d.config.yaxis[0].title.style.fontSize)-20)}}}]),ve}(),ks=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.xaxisLabels=p.globals.labels.slice(),this.axesUtils=new fr(d),this.isTimelineBar="datetime"===p.config.xaxis.type&&p.globals.seriesRangeBarTimeline.length,p.globals.timescaleLabels.length>0&&(this.xaxisLabels=p.globals.timescaleLabels.slice())}return gt(ve,[{key:"drawGridArea",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,p=this.w,y=new Mt(this.ctx);null===d&&(d=y.group({class:"apexcharts-grid"}));var C=y.drawLine(p.globals.padHorizontal,1,p.globals.padHorizontal,p.globals.gridHeight,"transparent"),M=y.drawLine(p.globals.padHorizontal,p.globals.gridHeight,p.globals.gridWidth,p.globals.gridHeight,"transparent");return d.add(M),d.add(C),d}},{key:"drawGrid",value:function(){var d=null;return this.w.globals.axisCharts&&(d=this.renderGrid(),this.drawGridArea(d.el)),d}},{key:"createGridMask",value:function(){var d=this.w,p=d.globals,y=new Mt(this.ctx),C=Array.isArray(d.config.stroke.width)?0:d.config.stroke.width;if(Array.isArray(d.config.stroke.width)){var M=0;d.config.stroke.width.forEach(function(te){M=Math.max(M,te)}),C=M}p.dom.elGridRectMask=document.createElementNS(p.SVGNS,"clipPath"),p.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(p.cuid)),p.dom.elGridRectMarkerMask=document.createElementNS(p.SVGNS,"clipPath"),p.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(p.cuid)),p.dom.elForecastMask=document.createElementNS(p.SVGNS,"clipPath"),p.dom.elForecastMask.setAttribute("id","forecastMask".concat(p.cuid)),p.dom.elNonForecastMask=document.createElementNS(p.SVGNS,"clipPath"),p.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(p.cuid));var L=d.config.chart.type,R=0,H=0;("bar"===L||"rangeBar"===L||"candlestick"===L||"boxPlot"===L||d.globals.comboBarCount>0)&&d.globals.isXNumeric&&!d.globals.isBarHorizontal&&(H=d.config.grid.padding.right,p.barPadForNumericAxis>(R=d.config.grid.padding.left)&&(R=p.barPadForNumericAxis,H=p.barPadForNumericAxis)),p.dom.elGridRect=y.drawRect(-C/2-R-2,-C/2,p.gridWidth+C+H+R+4,p.gridHeight+C,0,"#fff"),new Vn(this).getLargestMarkerSize();var G=d.globals.markers.largestSize+1;p.dom.elGridRectMarker=y.drawRect(2*-G,2*-G,p.gridWidth+4*G,p.gridHeight+4*G,0,"#fff"),p.dom.elGridRectMask.appendChild(p.dom.elGridRect.node),p.dom.elGridRectMarkerMask.appendChild(p.dom.elGridRectMarker.node);var J=p.dom.baseEl.querySelector("defs");J.appendChild(p.dom.elGridRectMask),J.appendChild(p.dom.elForecastMask),J.appendChild(p.dom.elNonForecastMask),J.appendChild(p.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(d){var p=d.i,y=d.x1,G=this.w;0===p&&G.globals.skipFirstTimelinelabel||p===d.xCount-1&&G.globals.skipLastTimelinelabel&&!G.config.xaxis.labels.formatter||"radar"===G.config.chart.type||(G.config.grid.xaxis.lines.show&&this._drawGridLine({x1:y,y1:d.y1,x2:d.x2,y2:d.y2,parent:d.parent}),new Or(this.ctx).drawXaxisTicks(y,this.elg))}},{key:"_drawGridLine",value:function(d){var p=d.x1,y=d.y1,C=d.x2,M=d.y2,L=d.parent,R=this.w,H=L.node.classList.contains("apexcharts-gridlines-horizontal"),G=R.config.grid.strokeDashArray,J=R.globals.barPadForNumericAxis,te=new Mt(this).drawLine(p-(H?J:0),y,C+(H?J:0),M,R.config.grid.borderColor,G);te.node.classList.add("apexcharts-gridline"),L.add(te)}},{key:"_drawGridBandRect",value:function(d){var p=d.c,y=d.x1,C=d.y1,M=d.x2,L=d.y2,R=d.type,H=this.w,G=new Mt(this.ctx),J=H.globals.barPadForNumericAxis;if("column"!==R||"datetime"!==H.config.xaxis.type){var K=G.drawRect(y-("row"===R?J:0),C,M+("row"===R?2*J:0),L,0,H.config.grid[R].colors[p],H.config.grid[R].opacity);this.elg.add(K),K.attr("clip-path","url(#gridRectMask".concat(H.globals.cuid,")")),K.node.classList.add("apexcharts-grid-".concat(R))}}},{key:"_drawXYLines",value:function(d){var p=this,y=d.xCount,C=d.tickAmount,M=this.w;if(M.config.grid.xaxis.lines.show||M.config.xaxis.axisTicks.show){var L,R=M.globals.padHorizontal,H=M.globals.gridHeight;M.globals.timescaleLabels.length?function(pe){for(var ge=pe.xC,Me=pe.y1,Ke=pe.y2,Y=0;Y<ge;Y++)p._drawGridLines({i:Y,x1:p.xaxisLabels[Y].position,y1:Me,x2:p.xaxisLabels[Y].position,y2:Ke,xCount:y,parent:p.elgridLinesV})}({xC:y,x1:R,y1:0,x2:L,y2:H}):(M.globals.isXNumeric&&(y=M.globals.xAxisScale.result.length),M.config.xaxis.convertedCatToNumeric&&(y=M.globals.xaxisLabelsCount),function(pe){var ge=pe.xC,xe=pe.x1,Me=pe.y1,ze=pe.x2,Ke=pe.y2;if(void 0!==M.config.xaxis.tickAmount&&"dataPoints"!==M.config.xaxis.tickAmount)M.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach(function(ne,be){var Ie=ne.getBBox();p._drawGridLines({i:be,x1:Ie.x+Ie.width/2,y1:Me,x2:Ie.x+Ie.width/2,y2:Ke,xCount:y,parent:p.elgridLinesV})});else for(var Y=0;Y<ge+(M.globals.isXNumeric?0:1);Y++)0===Y&&1===ge&&1===M.globals.dataPoints&&(ze=xe=M.globals.gridWidth/2),p._drawGridLines({i:Y,x1:xe,y1:Me,x2:ze,y2:Ke,xCount:y,parent:p.elgridLinesV}),ze=xe+=M.globals.gridWidth/(M.globals.isXNumeric?ge-1:ge)}({xC:y,x1:R,y1:0,x2:L,y2:H}))}if(M.config.grid.yaxis.lines.show){var G=0,J=0,te=M.globals.gridWidth,K=C+1;this.isTimelineBar&&(K=M.globals.labels.length);for(var ae=0;ae<K+(this.isTimelineBar?1:0);ae++)this._drawGridLine({x1:0,y1:G,x2:te,y2:J,parent:this.elgridLinesH}),J=G+=M.globals.gridHeight/(this.isTimelineBar?K:C)}}},{key:"_drawInvertedXYLines",value:function(d){var p=d.xCount,y=this.w;if(y.config.grid.xaxis.lines.show||y.config.xaxis.axisTicks.show)for(var C,M=y.globals.padHorizontal,L=y.globals.gridHeight,R=0;R<p+1;R++)y.config.grid.xaxis.lines.show&&this._drawGridLine({x1:M,y1:0,x2:C,y2:L,parent:this.elgridLinesV}),new Or(this.ctx).drawXaxisTicks(M,this.elg),C=M=M+y.globals.gridWidth/p+.3;if(y.config.grid.yaxis.lines.show)for(var H=0,G=0,J=y.globals.gridWidth,te=0;te<y.globals.dataPoints+1;te++)this._drawGridLine({x1:0,y1:H,x2:J,y2:G,parent:this.elgridLinesH}),G=H+=y.globals.gridHeight/y.globals.dataPoints}},{key:"renderGrid",value:function(){var d=this.w,p=new Mt(this.ctx);this.elg=p.group({class:"apexcharts-grid"}),this.elgridLinesH=p.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=p.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),d.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var y,C=d.globals.yAxisScale.length?d.globals.yAxisScale[0].result.length-1:5,M=0;M<d.globals.series.length&&(void 0!==d.globals.yAxisScale[M]&&(C=d.globals.yAxisScale[M].result.length-1),!(C>2));M++);return!d.globals.isBarHorizontal||this.isTimelineBar?(y=this.xaxisLabels.length,this.isTimelineBar&&(C=d.globals.labels.length,d.config.xaxis.tickAmount&&d.config.xaxis.labels.formatter&&(y=d.config.xaxis.tickAmount)),this._drawXYLines({xCount:y,tickAmount:C})):this._drawInvertedXYLines({xCount:y=C,tickAmount:C=d.globals.xTickAmount}),this.drawGridBands(y,C),{el:this.elg,xAxisTickWidth:d.globals.gridWidth/y}}},{key:"drawGridBands",value:function(d,p){var y=this.w;if(void 0!==y.config.grid.row.colors&&y.config.grid.row.colors.length>0)for(var C=0,M=y.globals.gridHeight/p,L=y.globals.gridWidth,R=0,H=0;R<p;R++,H++)H>=y.config.grid.row.colors.length&&(H=0),this._drawGridBandRect({c:H,x1:0,y1:C,x2:L,y2:M,type:"row"}),C+=y.globals.gridHeight/p;if(void 0!==y.config.grid.column.colors&&y.config.grid.column.colors.length>0)for(var G=y.globals.isBarHorizontal||"category"!==y.config.xaxis.type&&!y.config.xaxis.convertedCatToNumeric?d:d-1,J=y.globals.padHorizontal,te=y.globals.padHorizontal+y.globals.gridWidth/G,K=y.globals.gridHeight,ae=0,pe=0;ae<d;ae++,pe++)pe>=y.config.grid.column.colors.length&&(pe=0),this._drawGridBandRect({c:pe,x1:J,y1:0,x2:te,y2:K,type:"column"}),J+=y.globals.gridWidth/G}}]),ve}(),Ri=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"niceScale",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,M=arguments.length>4?arguments[4]:void 0,L=this.w,R=Math.abs(p-d);if("dataPoints"===(y=this._adjustTicksForSmallRange(y,C,R))&&(y=L.globals.dataPoints-1),d===Number.MIN_VALUE&&0===p||!Qe.isNumber(d)&&!Qe.isNumber(p)||d===Number.MIN_VALUE&&p===-Number.MAX_VALUE){var H=this.linearScale(d=0,p=y,y);return H}d>p?(console.warn("axis.min cannot be greater than axis.max"),p=d+.1):d===p&&(d=0===d?0:d-.5,p=0===p?2:p+.5);var G=[];R<1&&M&&("candlestick"===L.config.chart.type||"candlestick"===L.config.series[C].type||"boxPlot"===L.config.chart.type||"boxPlot"===L.config.series[C].type||L.globals.isRangeData)&&(p*=1.01);var J=y+1;J<2?J=2:J>2&&(J-=2);var te=R/J,K=Math.floor(Qe.log10(te)),ae=Math.pow(10,K),pe=Math.round(te/ae);pe<1&&(pe=1);var ge=pe*ae,xe=ge*Math.floor(d/ge),Me=ge*Math.ceil(p/ge),ze=xe;if(M&&R>2){for(;G.push(ze),!((ze+=ge)>Me););return{result:G,niceMin:G[0],niceMax:G[G.length-1]}}var Ke=d;(G=[]).push(Ke);for(var Y=Math.abs(p-d)/y,ne=0;ne<=y;ne++)G.push(Ke+=Y);return G[G.length-2]>=p&&G.pop(),{result:G,niceMin:G[0],niceMax:G[G.length-1]}}},{key:"linearScale",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,C=arguments.length>3?arguments[3]:void 0,M=Math.abs(p-d);"dataPoints"===(y=this._adjustTicksForSmallRange(y,C,M))&&(y=this.w.globals.dataPoints-1);var L=M/y;y===Number.MAX_VALUE&&(y=10,L=1);for(var R=[],H=d;y>=0;)R.push(H),H+=L,y-=1;return{result:R,niceMin:R[0],niceMax:R[R.length-1]}}},{key:"logarithmicScale",value:function(d){for(var p=[],y=Math.ceil(Math.log10(d))+1,C=0;C<y;C++)p.push(Math.pow(10,C));return{result:p,niceMin:p[0],niceMax:p[p.length-1]}}},{key:"_adjustTicksForSmallRange",value:function(d,p,y){var C=d;if(void 0!==p&&this.w.config.yaxis[p].labels.formatter&&void 0===this.w.config.yaxis[p].tickAmount){var M=this.w.config.yaxis[p].labels.formatter(1);Qe.isNumber(Number(M))&&!Qe.isFloat(M)&&(C=Math.ceil(y))}return C<d?C:d}},{key:"setYScaleForIndex",value:function(d,p,y){var C=this.w.globals,M=this.w.config,L=C.isBarHorizontal?M.xaxis:M.yaxis[d];void 0===C.yAxisScale[d]&&(C.yAxisScale[d]=[]);var R=Math.abs(y-p);L.logarithmic&&R<=5&&(C.invalidLogScale=!0),L.logarithmic&&R>5?(C.allSeriesCollapsed=!1,C.yAxisScale[d]=this.logarithmicScale(y)):y!==-Number.MAX_VALUE&&Qe.isNumber(y)?(C.allSeriesCollapsed=!1,C.yAxisScale[d]=void 0===L.min&&void 0===L.max||L.forceNiceScale?this.niceScale(p,y,L.tickAmount?L.tickAmount:R<5&&R>1?R+1:5,d,void 0===M.yaxis[d].max&&void 0===M.yaxis[d].min||M.yaxis[d].forceNiceScale):this.linearScale(p,y,L.tickAmount,d)):C.yAxisScale[d]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(d,p){var y=this.w,C=y.globals,M=y.config.xaxis,L=Math.abs(p-d);return C.xAxisScale=p!==-Number.MAX_VALUE&&Qe.isNumber(p)?this.linearScale(d,p,M.tickAmount?M.tickAmount:L<5&&L>1?L+1:5,0):this.linearScale(0,5,5),C.xAxisScale}},{key:"setMultipleYScales",value:function(){var d=this,p=this.w.globals,y=this.w.config,C=p.minYArr.concat([]),M=p.maxYArr.concat([]),L=[];y.yaxis.forEach(function(R,H){var G=H;y.series.forEach(function(K,ae){K.name===R.seriesName&&(G=ae,L.push(H!==ae?{index:ae,similarIndex:H,alreadyExists:!0}:{index:ae}))}),d.setYScaleForIndex(H,C[G],M[G])}),this.sameScaleInMultipleAxes(C,M,L)}},{key:"sameScaleInMultipleAxes",value:function(d,p,y){var C=this,M=this.w.config,L=this.w.globals,R=[];y.forEach(function(ge){ge.alreadyExists&&(void 0===R[ge.index]&&(R[ge.index]=[]),R[ge.index].push(ge.index),R[ge.index].push(ge.similarIndex))}),L.yAxisSameScaleIndices=R,R.forEach(function(ge,xe){R.forEach(function(Me,ze){var Ke,Y;xe!==ze&&(Ke=ge,Y=Me,Ke.filter(function(ne){return-1!==Y.indexOf(ne)})).length>0&&(R[xe]=R[xe].concat(R[ze]))})});var H=R.map(function(ge){return ge.filter(function(xe,Me){return ge.indexOf(xe)===Me})}).map(function(ge){return ge.sort()});R=R.filter(function(ge){return!!ge});var G=H.slice(),J=G.map(function(ge){return JSON.stringify(ge)});G=G.filter(function(ge,xe){return J.indexOf(JSON.stringify(ge))===xe});var te=[],K=[];d.forEach(function(ge,xe){G.forEach(function(Me,ze){Me.indexOf(xe)>-1&&(void 0===te[ze]&&(te[ze]=[],K[ze]=[]),te[ze].push({key:xe,value:ge}),K[ze].push({key:xe,value:p[xe]}))})});var ae=Array.apply(null,Array(G.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),pe=Array.apply(null,Array(G.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);te.forEach(function(ge,xe){ge.forEach(function(Me,ze){ae[xe]=Math.min(Me.value,ae[xe])})}),K.forEach(function(ge,xe){ge.forEach(function(Me,ze){pe[xe]=Math.max(Me.value,pe[xe])})}),d.forEach(function(ge,xe){K.forEach(function(Me,ze){var Ke=ae[ze],Y=pe[ze];M.chart.stacked&&(Y=0,Me.forEach(function(ne,be){ne.value!==-Number.MAX_VALUE&&(Y+=ne.value),Ke!==Number.MIN_VALUE&&(Ke+=te[ze][be].value)})),Me.forEach(function(ne,be){Me[be].key===xe&&(void 0!==M.yaxis[xe].min&&(Ke="function"==typeof M.yaxis[xe].min?M.yaxis[xe].min(L.minY):M.yaxis[xe].min),void 0!==M.yaxis[xe].max&&(Y="function"==typeof M.yaxis[xe].max?M.yaxis[xe].max(L.maxY):M.yaxis[xe].max),C.setYScaleForIndex(xe,Ke,Y))})})})}},{key:"autoScaleY",value:function(d,p,y){d||(d=this);var C=d.w;if(C.globals.isMultipleYAxis||C.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),p;var M=C.globals.seriesX[0],L=C.config.chart.stacked;return p.forEach(function(R,H){for(var G=0,J=0;J<M.length;J++)if(M[J]>=y.xaxis.min){G=J;break}var te,K,ae=C.globals.minYArr[H],pe=C.globals.maxYArr[H],ge=C.globals.stackedSeriesTotals;C.globals.series.forEach(function(xe,Me){var ze=xe[G];L?(te=K=ze=ge[G],ge.forEach(function(Ke,Y){M[Y]<=y.xaxis.max&&M[Y]>=y.xaxis.min&&(Ke>K&&null!==Ke&&(K=Ke),xe[Y]<te&&null!==xe[Y]&&(te=xe[Y]))})):(te=K=ze,xe.forEach(function(Ke,Y){if(M[Y]<=y.xaxis.max&&M[Y]>=y.xaxis.min){var ne=Ke,be=Ke;C.globals.series.forEach(function(Ie,Je){null!==Ke&&(ne=Math.min(Ie[Y],ne),be=Math.max(Ie[Y],be))}),be>K&&null!==be&&(K=be),ne<te&&null!==ne&&(te=ne)}})),void 0===te&&void 0===K&&(te=ae,K=pe),(K*=K<0?.9:1.1)<0&&K<pe&&(K=pe),(te*=te<0?1.1:.9)<0&&te>ae&&(te=ae),p.length>1?(p[Me].min=void 0===R.min?te:R.min,p[Me].max=void 0===R.max?K:R.max):(p[0].min=void 0===R.min?te:R.min,p[0].max=void 0===R.max?K:R.max)})}),p}}]),ve}(),hs=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.scales=new Ri(d)}return gt(ve,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,M=this.w.config,L=this.w.globals,R=-Number.MAX_VALUE,H=Number.MIN_VALUE;null===C&&(C=d+1);var G=L.series,J=G,te=G;"candlestick"===M.chart.type?(J=L.seriesCandleL,te=L.seriesCandleH):"boxPlot"===M.chart.type?(J=L.seriesCandleO,te=L.seriesCandleC):L.isRangeData&&(J=L.seriesRangeStart,te=L.seriesRangeEnd);for(var K=d;K<C;K++){L.dataPoints=Math.max(L.dataPoints,G[K].length);for(var ae=0;ae<L.series[K].length;ae++){var pe=G[K][ae];null!==pe&&Qe.isNumber(pe)?(void 0!==te[K][ae]&&(R=Math.max(R,te[K][ae])),void 0!==J[K][ae]&&(p=Math.min(p,J[K][ae]),y=Math.max(y,J[K][ae])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==L.seriesCandleC[K][ae]&&(R=Math.max(R,L.seriesCandleO[K][ae]),R=Math.max(R,L.seriesCandleH[K][ae]),R=Math.max(R,L.seriesCandleL[K][ae]),R=Math.max(R,L.seriesCandleC[K][ae]),"boxPlot"===this.w.config.chart.type&&(R=Math.max(R,L.seriesCandleM[K][ae]))),!M.series[K].type||"candlestick"===M.series[K].type&&"boxPlot"===M.series[K].type||(R=Math.max(R,L.series[K][ae]),p=Math.min(p,L.series[K][ae])),y=R),L.seriesGoals[K]&&L.seriesGoals[K][ae]&&Array.isArray(L.seriesGoals[K][ae])&&L.seriesGoals[K][ae].forEach(function(ge){H!==Number.MIN_VALUE&&(H=Math.min(H,ge.value),p=H),R=Math.max(R,ge.value),y=R}),Qe.isFloat(pe)&&(pe=Qe.noExponents(pe),L.yValueDecimal=Math.max(L.yValueDecimal,pe.toString().split(".")[1].length)),H>J[K][ae]&&J[K][ae]<0&&(H=J[K][ae])):L.hasNullValues=!0}}return"rangeBar"===M.chart.type&&L.seriesRangeStart.length&&L.isBarHorizontal&&"datetime"===M.xaxis.type&&(H=p),"bar"===M.chart.type&&(H<0&&R<0&&(R=0),H===Number.MIN_VALUE&&(H=0)),{minY:H,maxY:R,lowestY:p,highestY:y}}},{key:"setYRange",value:function(){var d=this.w.globals,p=this.w.config;d.maxY=-Number.MAX_VALUE,d.minY=Number.MIN_VALUE;var y=Number.MAX_VALUE;if(d.isMultipleYAxis)for(var C=0;C<d.series.length;C++){var M=this.getMinYMaxY(C,y,null,C+1);d.minYArr.push(M.minY),d.maxYArr.push(M.maxY),y=M.lowestY}var L=this.getMinYMaxY(0,y,null,d.series.length);if(d.minY=L.minY,d.maxY=L.maxY,y=L.lowestY,p.chart.stacked&&this._setStackedMinMax(),("line"===p.chart.type||"area"===p.chart.type||"candlestick"===p.chart.type||"boxPlot"===p.chart.type||"rangeBar"===p.chart.type&&!d.isBarHorizontal)&&d.minY===Number.MIN_VALUE&&y!==-Number.MAX_VALUE&&y!==d.maxY){var R=d.maxY-y;(y>=0&&y<=10||void 0!==p.yaxis[0].min||void 0!==p.yaxis[0].max)&&(R=0),d.minY=y-5*R/100,y>0&&d.minY<0&&(d.minY=0),d.maxY=d.maxY+5*R/100}return p.yaxis.forEach(function(H,G){void 0!==H.max&&("number"==typeof H.max?d.maxYArr[G]=H.max:"function"==typeof H.max&&(d.maxYArr[G]=H.max(d.isMultipleYAxis?d.maxYArr[G]:d.maxY)),d.maxY=d.maxYArr[G]),void 0!==H.min&&("number"==typeof H.min?d.minYArr[G]=H.min:"function"==typeof H.min&&(d.minYArr[G]=H.min(d.isMultipleYAxis?d.minYArr[G]===Number.MIN_VALUE?0:d.minYArr[G]:d.minY)),d.minY=d.minYArr[G])}),d.isBarHorizontal&&["min","max"].forEach(function(H){void 0!==p.xaxis[H]&&"number"==typeof p.xaxis[H]&&("min"===H?d.minY=p.xaxis[H]:d.maxY=p.xaxis[H])}),d.isMultipleYAxis?(this.scales.setMultipleYScales(),d.minY=y,d.yAxisScale.forEach(function(H,G){d.minYArr[G]=H.niceMin,d.maxYArr[G]=H.niceMax})):(this.scales.setYScaleForIndex(0,d.minY,d.maxY),d.minY=d.yAxisScale[0].niceMin,d.maxY=d.yAxisScale[0].niceMax,d.minYArr[0]=d.yAxisScale[0].niceMin,d.maxYArr[0]=d.yAxisScale[0].niceMax),{minY:d.minY,maxY:d.maxY,minYArr:d.minYArr,maxYArr:d.maxYArr,yAxisScale:d.yAxisScale}}},{key:"setXRange",value:function(){var d=this.w.globals,p=this.w.config,y="numeric"===p.xaxis.type||"datetime"===p.xaxis.type||"category"===p.xaxis.type&&!d.noLabelsProvided||d.noLabelsProvided||d.isXNumeric;if(d.isXNumeric&&function(){for(var R=0;R<d.series.length;R++)if(d.labels[R])for(var H=0;H<d.labels[R].length;H++)null!==d.labels[R][H]&&Qe.isNumber(d.labels[R][H])&&(d.maxX=Math.max(d.maxX,d.labels[R][H]),d.initialMaxX=Math.max(d.maxX,d.labels[R][H]),d.minX=Math.min(d.minX,d.labels[R][H]),d.initialMinX=Math.min(d.minX,d.labels[R][H]))}(),d.noLabelsProvided&&0===p.xaxis.categories.length&&(d.maxX=d.labels[d.labels.length-1],d.initialMaxX=d.labels[d.labels.length-1],d.minX=1,d.initialMinX=1),d.isXNumeric||d.noLabelsProvided||d.dataFormatXNumeric){var C;if(void 0===p.xaxis.tickAmount?(C=Math.round(d.svgWidth/150),"numeric"===p.xaxis.type&&d.dataPoints<30&&(C=d.dataPoints-1),C>d.dataPoints&&0!==d.dataPoints&&(C=d.dataPoints-1)):"dataPoints"===p.xaxis.tickAmount?(d.series.length>1&&(C=d.series[d.maxValsInArrayIndex].length-1),d.isXNumeric&&(C=d.maxX-d.minX-1)):C=p.xaxis.tickAmount,d.xTickAmount=C,void 0!==p.xaxis.max&&"number"==typeof p.xaxis.max&&(d.maxX=p.xaxis.max),void 0!==p.xaxis.min&&"number"==typeof p.xaxis.min&&(d.minX=p.xaxis.min),void 0!==p.xaxis.range&&(d.minX=d.maxX-p.xaxis.range),d.minX!==Number.MAX_VALUE&&d.maxX!==-Number.MAX_VALUE)if(p.xaxis.convertedCatToNumeric&&!d.dataFormatXNumeric){for(var M=[],L=d.minX-1;L<d.maxX;L++)M.push(L+1);d.xAxisScale={result:M,niceMin:M[0],niceMax:M[M.length-1]}}else d.xAxisScale=this.scales.setXScale(d.minX,d.maxX);else d.xAxisScale=this.scales.linearScale(1,C,C),d.noLabelsProvided&&d.labels.length>0&&(d.xAxisScale=this.scales.linearScale(1,d.labels.length,C-1),d.seriesX=d.labels.slice());y&&(d.labels=d.xAxisScale.result.slice())}return d.isBarHorizontal&&d.labels.length&&(d.xTickAmount=d.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:d.minX,maxX:d.maxX}}},{key:"setZRange",value:function(){var d=this.w.globals;if(d.isDataXYZ)for(var p=0;p<d.series.length;p++)if(void 0!==d.seriesZ[p])for(var y=0;y<d.seriesZ[p].length;y++)null!==d.seriesZ[p][y]&&Qe.isNumber(d.seriesZ[p][y])&&(d.maxZ=Math.max(d.maxZ,d.seriesZ[p][y]),d.minZ=Math.min(d.minZ,d.seriesZ[p][y]))}},{key:"_handleSingleDataPoint",value:function(){var d=this.w.globals,p=this.w.config;if(d.minX===d.maxX){var y=new Un(this.ctx);if("datetime"===p.xaxis.type){var C=y.getDate(d.minX);C.setUTCDate(C.getDate()-2),d.minX=new Date(C).getTime();var M=y.getDate(d.maxX);M.setUTCDate(M.getDate()+2),d.maxX=new Date(M).getTime()}else("numeric"===p.xaxis.type||"category"===p.xaxis.type&&!d.noLabelsProvided)&&(d.minX=d.minX-2,d.initialMinX=d.minX,d.maxX=d.maxX+2,d.initialMaxX=d.maxX)}}},{key:"_getMinXDiff",value:function(){var d=this.w.globals;d.isXNumeric&&d.seriesX.forEach(function(p,y){1===p.length&&p.push(d.seriesX[d.maxValsInArrayIndex][d.seriesX[d.maxValsInArrayIndex].length-1]);var C=p.slice();C.sort(function(M,L){return M-L}),C.forEach(function(M,L){if(L>0){var R=M-C[L-1];R>0&&(d.minXDiff=Math.min(R,d.minXDiff))}}),1===d.dataPoints&&d.minXDiff===Number.MAX_VALUE&&(d.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var d=this.w.globals,p=[],y=[];if(d.series.length)for(var C=0;C<d.series[d.maxValsInArrayIndex].length;C++)for(var M=0,L=0,R=0;R<d.series.length;R++)null!==d.series[R][C]&&Qe.isNumber(d.series[R][C])&&(d.series[R][C]>0?M=M+parseFloat(d.series[R][C])+1e-4:L+=parseFloat(d.series[R][C])),R===d.series.length-1&&(p.push(M),y.push(L));for(var H=0;H<p.length;H++)d.maxY=Math.max(d.maxY,p[H]),d.minY=Math.min(d.minY,y[H])}}]),ve}(),Li=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.xaxisFontSize=p.config.xaxis.labels.style.fontSize,this.axisFontFamily=p.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=p.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===p.config.chart.type&&p.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===p.config.xaxis.position&&(this.xAxisoffX=p.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new fr(d)}return gt(ve,[{key:"drawYaxis",value:function(d){var p=this,y=this.w,C=new Mt(this.ctx),M=y.config.yaxis[d].labels.style,L=M.fontSize,R=M.fontFamily,H=M.fontWeight,G=C.group({class:"apexcharts-yaxis",rel:d,transform:"translate("+y.globals.translateYAxisX[d]+", 0)"});if(this.axesUtils.isYAxisHidden(d))return G;var J=C.group({class:"apexcharts-yaxis-texts-g"});G.add(J);var te=y.globals.yAxisScale[d].result.length-1,K=y.globals.gridHeight/te,ae=y.globals.translateY,pe=y.globals.yLabelFormatters[d],ge=y.globals.yAxisScale[d].result.slice();ge=this.axesUtils.checkForReversedLabels(d,ge);var xe="";if(y.config.yaxis[d].labels.show)for(var Me=function(Nt){var St=ge[Nt];St=pe(St,Nt,y);var Xt=y.config.yaxis[d].labels.padding;y.config.yaxis[d].opposite&&0!==y.config.yaxis.length&&(Xt*=-1);var gn=p.axesUtils.getYAxisForeColor(M.colors,d),hn=C.drawText({x:Xt,y:ae+te/10+y.config.yaxis[d].labels.offsetY+1,text:St,textAnchor:y.config.yaxis[d].opposite?"start":"end",fontSize:L,fontFamily:R,fontWeight:H,foreColor:Array.isArray(gn)?gn[Nt]:gn,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+M.cssClass});Nt===te&&(xe=hn),J.add(hn);var Kn=document.createElementNS(y.globals.SVGNS,"title");if(Kn.textContent=Array.isArray(St)?St.join(" "):St,hn.node.appendChild(Kn),0!==y.config.yaxis[d].labels.rotate){var Ni=C.rotateAroundCenter(xe.node),Nn=C.rotateAroundCenter(hn.node);hn.node.setAttribute("transform","rotate(".concat(y.config.yaxis[d].labels.rotate," ").concat(Ni.x," ").concat(Nn.y,")"))}ae+=K},ze=te;ze>=0;ze--)Me(ze);if(void 0!==y.config.yaxis[d].title.text){var Ke=C.group({class:"apexcharts-yaxis-title"}),Y=0;y.config.yaxis[d].opposite&&(Y=y.globals.translateYAxisX[d]);var ne=C.drawText({x:Y,y:y.globals.gridHeight/2+y.globals.translateY+y.config.yaxis[d].title.offsetY,text:y.config.yaxis[d].title.text,textAnchor:"end",foreColor:y.config.yaxis[d].title.style.color,fontSize:y.config.yaxis[d].title.style.fontSize,fontWeight:y.config.yaxis[d].title.style.fontWeight,fontFamily:y.config.yaxis[d].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+y.config.yaxis[d].title.style.cssClass});Ke.add(ne),G.add(Ke)}var be=y.config.yaxis[d].axisBorder,Ie=31+be.offsetX;if(y.config.yaxis[d].opposite&&(Ie=-31-be.offsetX),be.show){var Je=C.drawLine(Ie,y.globals.translateY+be.offsetY-2,Ie,y.globals.gridHeight+y.globals.translateY+be.offsetY+2,be.color,0,be.width);G.add(Je)}return y.config.yaxis[d].axisTicks.show&&this.axesUtils.drawYAxisTicks(Ie,te,be,y.config.yaxis[d].axisTicks,d,K,G),G}},{key:"drawYaxisInversed",value:function(d){var p=this.w,y=new Mt(this.ctx),C=y.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),M=y.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(p.globals.translateXAxisX,", ").concat(p.globals.translateXAxisY,")")});C.add(M);var L=p.globals.yAxisScale[d].result.length-1,R=p.globals.gridWidth/L+.1,H=R+p.config.xaxis.labels.offsetX,G=p.globals.xLabelFormatter,J=p.globals.yAxisScale[d].result.slice(),te=p.globals.timescaleLabels;te.length>0&&(this.xaxisLabels=te.slice(),L=(J=te.slice()).length),J=this.axesUtils.checkForReversedLabels(d,J);var K=te.length;if(p.config.xaxis.labels.show)for(var ae=K?0:L;K?ae<K:ae>=0;K?ae++:ae--){var pe=J[ae];pe=G(pe,ae,p);var ge=p.globals.gridWidth+p.globals.padHorizontal-(H-R+p.config.xaxis.labels.offsetX);if(te.length){var xe=this.axesUtils.getLabel(J,te,ge,ae,this.drawnLabels,this.xaxisFontSize);ge=xe.x,pe=xe.text,this.drawnLabels.push(xe.text),0===ae&&p.globals.skipFirstTimelinelabel&&(pe=""),ae===J.length-1&&p.globals.skipLastTimelinelabel&&(pe="")}var Me=y.drawText({x:ge,y:this.xAxisoffX+p.config.xaxis.labels.offsetY+30-("top"===p.config.xaxis.position?p.globals.xAxisHeight+p.config.xaxis.axisTicks.height-2:0),text:pe,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[d]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:p.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+p.config.xaxis.labels.style.cssClass});M.add(Me),Me.tspan(pe);var ze=document.createElementNS(p.globals.SVGNS,"title");ze.textContent=pe,Me.node.appendChild(ze),H+=R}return this.inversedYAxisTitleText(C),this.inversedYAxisBorder(C),C}},{key:"inversedYAxisBorder",value:function(d){var p=this.w,y=new Mt(this.ctx),C=p.config.xaxis.axisBorder;if(C.show){var M=0;"bar"===p.config.chart.type&&p.globals.isXNumeric&&(M-=15);var L=y.drawLine(p.globals.padHorizontal+M+C.offsetX,this.xAxisoffX,p.globals.gridWidth,this.xAxisoffX,C.color,0,C.height);d.add(L)}}},{key:"inversedYAxisTitleText",value:function(d){var p=this.w,y=new Mt(this.ctx);if(void 0!==p.config.xaxis.title.text){var C=y.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),M=y.drawText({x:p.globals.gridWidth/2+p.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(p.config.xaxis.title.style.fontSize)+p.config.xaxis.title.offsetY+20,text:p.config.xaxis.title.text,textAnchor:"middle",fontSize:p.config.xaxis.title.style.fontSize,fontFamily:p.config.xaxis.title.style.fontFamily,fontWeight:p.config.xaxis.title.style.fontWeight,foreColor:p.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+p.config.xaxis.title.style.cssClass});C.add(M),d.add(C)}}},{key:"yAxisTitleRotate",value:function(d,p){var y=this.w,C=new Mt(this.ctx),M={width:0,height:0},L={width:0,height:0},R=y.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-texts-g"));null!==R&&(M=R.getBoundingClientRect());var H=y.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-title text"));if(null!==H&&(L=H.getBoundingClientRect()),null!==H){var G=this.xPaddingForYAxisTitle(d,M,L,p);H.setAttribute("x",G.xPos-(p?10:0))}if(null!==H){var J=C.rotateAroundCenter(H);H.setAttribute("transform","rotate(".concat(p?-1*y.config.yaxis[d].title.rotate:y.config.yaxis[d].title.rotate," ").concat(J.x," ").concat(J.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(d,p,y,C){var M=this.w,L=0,R=0,H=10;return void 0===M.config.yaxis[d].title.text||d<0?{xPos:R,padd:0}:(C?(R=p.width+M.config.yaxis[d].title.offsetX+y.width/2+H/2,0===(L+=1)&&(R-=H/2)):(R=-1*p.width+M.config.yaxis[d].title.offsetX+H/2+y.width/2,M.globals.isBarHorizontal&&(R=-1*p.width-M.config.yaxis[d].title.offsetX-(H=25))),{xPos:R,padd:H})}},{key:"setYAxisXPosition",value:function(d,p){var y=this.w,C=0,M=0,L=18,R=1;y.config.yaxis.length>1&&(this.multipleYs=!0),y.config.yaxis.map(function(H,G){var J=y.globals.ignoreYAxisIndexes.indexOf(G)>-1||!H.show||H.floating||0===d[G].width,te=d[G].width+p[G].width;H.opposite?y.globals.isBarHorizontal?y.globals.translateYAxisX[G]=(M=y.globals.gridWidth+y.globals.translateX-1)-H.labels.offsetX:(M=y.globals.gridWidth+y.globals.translateX+R,J||(R=R+te+20),y.globals.translateYAxisX[G]=M-H.labels.offsetX+20):(C=y.globals.translateX-L,J||(L=L+te+20),y.globals.translateYAxisX[G]=C+H.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var d=this.w,p=d.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(p=Qe.listToArray(p)).forEach(function(y,C){var M=d.config.yaxis[C];if(M&&void 0!==M.labels.align){var L=d.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(C,"'] .apexcharts-yaxis-texts-g")),R=d.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(C,"'] .apexcharts-yaxis-label"));R=Qe.listToArray(R);var H=L.getBoundingClientRect();"left"===M.labels.align?(R.forEach(function(G,J){G.setAttribute("text-anchor","start")}),M.opposite||L.setAttribute("transform","translate(-".concat(H.width,", 0)"))):"center"===M.labels.align?(R.forEach(function(G,J){G.setAttribute("text-anchor","middle")}),L.setAttribute("transform","translate(".concat(H.width/2*(M.opposite?1:-1),", 0)"))):"right"===M.labels.align&&(R.forEach(function(G,J){G.setAttribute("text-anchor","end")}),M.opposite&&L.setAttribute("transform","translate(".concat(H.width,", 0)")))}})}}]),ve}(),Si=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.documentEvent=Qe.bind(this.documentEvent,this)}return gt(ve,[{key:"addEventListener",value:function(d,p){var y=this.w;y.globals.events.hasOwnProperty(d)?y.globals.events[d].push(p):y.globals.events[d]=[p]}},{key:"removeEventListener",value:function(d,p){var y=this.w;if(y.globals.events.hasOwnProperty(d)){var C=y.globals.events[d].indexOf(p);-1!==C&&y.globals.events[d].splice(C,1)}}},{key:"fireEvent",value:function(d,p){var y=this.w;if(y.globals.events.hasOwnProperty(d)){p&&p.length||(p=[]);for(var C=y.globals.events[d],M=C.length,L=0;L<M;L++)C[L].apply(null,p)}}},{key:"setupEventHandlers",value:function(){var d=this,p=this.w,y=this.ctx,C=p.globals.dom.baseEl.querySelector(p.globals.chartClass);this.ctx.eventList.forEach(function(M){C.addEventListener(M,function(L){var R=Object.assign({},p,{seriesIndex:p.globals.capturedSeriesIndex,dataPointIndex:p.globals.capturedDataPointIndex});"mousemove"===L.type||"touchmove"===L.type?"function"==typeof p.config.chart.events.mouseMove&&p.config.chart.events.mouseMove(L,y,R):"mouseleave"===L.type||"touchleave"===L.type?"function"==typeof p.config.chart.events.mouseLeave&&p.config.chart.events.mouseLeave(L,y,R):("mouseup"===L.type&&1===L.which||"touchend"===L.type)&&("function"==typeof p.config.chart.events.click&&p.config.chart.events.click(L,y,R),y.ctx.events.fireEvent("click",[L,y,R]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(M){p.globals.dom.baseEl.addEventListener(M,d.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(d){var p=this.w,y=d.target.className;if("click"===d.type){var C=p.globals.dom.baseEl.querySelector(".apexcharts-menu");C&&C.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==y&&C.classList.remove("apexcharts-menu-open")}p.globals.clientX="touchmove"===d.type?d.touches[0].clientX:d.clientX,p.globals.clientY="touchmove"===d.type?d.touches[0].clientY:d.clientY}}]),ve}(),co=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"setCurrentLocaleValues",value:function(d){var p=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(p=this.w.config.chart.locales.concat(window.Apex.chart.locales));var y=p.filter(function(M){return M.name===d})[0];if(!y)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var C=Qe.extend(Ji,y);this.w.globals.locale=C.options}}]),ve}(),Io=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"drawAxis",value:function(d,p){var y,C,M=this.w.globals,L=this.w.config,R=new Or(this.ctx),H=new Li(this.ctx);M.axisCharts&&"radar"!==d&&(M.isBarHorizontal?(C=H.drawYaxisInversed(0),y=R.drawXaxisInversed(0),M.dom.elGraphical.add(y),M.dom.elGraphical.add(C)):(y=R.drawXaxis(),M.dom.elGraphical.add(y),L.yaxis.map(function(G,J){-1===M.ignoreYAxisIndexes.indexOf(J)&&(C=H.drawYaxis(J),M.dom.Paper.add(C))})))}}]),ve}(),Yn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"drawXCrosshairs",value:function(){var d=this.w,p=new Mt(this.ctx),y=new dn(this.ctx),C=d.config.xaxis.crosshairs.fill.gradient,M=d.config.xaxis.crosshairs.dropShadow,K=M.enabled,ae=M.left,pe=M.top,ge=M.blur,xe=M.color,Me=M.opacity,ze=d.config.xaxis.crosshairs.fill.color;if(d.config.xaxis.crosshairs.show){"gradient"===d.config.xaxis.crosshairs.fill.type&&(ze=p.drawGradient("vertical",C.colorFrom,C.colorTo,C.opacityFrom,C.opacityTo,null,C.stops,null));var Ke=p.drawRect();1===d.config.xaxis.crosshairs.width&&(Ke=p.drawLine());var Y=d.globals.gridHeight;(!Qe.isNumber(Y)||Y<0)&&(Y=0);var ne=d.config.xaxis.crosshairs.width;(!Qe.isNumber(ne)||ne<0)&&(ne=0),Ke.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:Y,width:ne,height:Y,fill:ze,filter:"none","fill-opacity":d.config.xaxis.crosshairs.opacity,stroke:d.config.xaxis.crosshairs.stroke.color,"stroke-width":d.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":d.config.xaxis.crosshairs.stroke.dashArray}),K&&(Ke=y.dropShadow(Ke,{left:ae,top:pe,blur:ge,color:xe,opacity:Me})),d.globals.dom.elGraphical.add(Ke)}}},{key:"drawYCrosshairs",value:function(){var d=this.w,p=new Mt(this.ctx),y=d.config.yaxis[0].crosshairs,C=d.globals.barPadForNumericAxis;if(d.config.yaxis[0].crosshairs.show){var M=p.drawLine(-C,0,d.globals.gridWidth+C,0,y.stroke.color,y.stroke.dashArray,y.stroke.width);M.attr({class:"apexcharts-ycrosshairs"}),d.globals.dom.elGraphical.add(M)}var L=p.drawLine(-C,0,d.globals.gridWidth+C,0,y.stroke.color,0,0);L.attr({class:"apexcharts-ycrosshairs-hidden"}),d.globals.dom.elGraphical.add(L)}}]),ve}(),yr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"checkResponsiveConfig",value:function(d){var p=this,y=this.w,C=y.config;if(0!==C.responsive.length){var M=C.responsive.slice();M.sort(function(G,J){return G.breakpoint>J.breakpoint?1:J.breakpoint>G.breakpoint?-1:0}).reverse();var L=new jn({}),R=function(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},J=M[0].breakpoint,te=window.innerWidth>0?window.innerWidth:screen.width;if(te>J){var K=Vn.extendArrayProps(L,y.globals.initialConfig,y);G=Qe.extend(K,G),G=Qe.extend(y.config,G),p.overrideResponsiveOptions(G)}else for(var ae=0;ae<M.length;ae++)te<M[ae].breakpoint&&(G=Vn.extendArrayProps(L,M[ae].options,y),G=Qe.extend(y.config,G),p.overrideResponsiveOptions(G))};if(d){var H=Vn.extendArrayProps(L,d,y);H=Qe.extend(y.config,H),R(H=Qe.extend(H,d))}else R({})}}},{key:"overrideResponsiveOptions",value:function(d){var p=new jn(d).init({responsiveOverride:!0});this.w.config=p}}]),ve}(),Vr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.colors=[],this.w=d.w;var p=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===p.config.chart.type&&p.config.plotOptions.treemap.distributed||"heatmap"===p.config.chart.type&&p.config.plotOptions.heatmap.distributed,this.isBarDistributed=p.config.plotOptions.bar.distributed&&("bar"===p.config.chart.type||"rangeBar"===p.config.chart.type)}return gt(ve,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var d=this,p=this.w,y=new Qe;if(p.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(p.config.theme.mode)),void 0===p.config.colors?p.globals.colors=this.predefined():(p.globals.colors=p.config.colors,Array.isArray(p.config.colors)&&p.config.colors.length>0&&"function"==typeof p.config.colors[0]&&(p.globals.colors=p.config.series.map(function(ae,pe){var ge=p.config.colors[pe];return ge||(ge=p.config.colors[0]),"function"==typeof ge?(d.isColorFn=!0,ge({value:p.globals.axisCharts?p.globals.series[pe][0]?p.globals.series[pe][0]:0:p.globals.series[pe],seriesIndex:pe,dataPointIndex:pe,w:p})):ge}))),p.globals.seriesColors.map(function(ae,pe){ae&&(p.globals.colors[pe]=ae)}),p.config.theme.monochrome.enabled){var C=[],M=p.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(M=p.globals.series[0].length*p.globals.series.length);for(var L=p.config.theme.monochrome.color,R=1/(M/p.config.theme.monochrome.shadeIntensity),H=p.config.theme.monochrome.shadeTo,G=0,J=0;J<M;J++){var te=void 0;"dark"===H?(te=y.shadeColor(-1*G,L),G+=R):(te=y.shadeColor(G,L),G+=R),C.push(te)}p.globals.colors=C.slice()}var K=p.globals.colors.slice();this.pushExtraColors(p.globals.colors),["fill","stroke"].forEach(function(ae){p.globals[ae].colors=void 0===p.config[ae].colors?d.isColorFn?p.config.colors:K:p.config[ae].colors.slice(),d.pushExtraColors(p.globals[ae].colors)}),p.globals.dataLabels.style.colors=void 0===p.config.dataLabels.style.colors?K:p.config.dataLabels.style.colors.slice(),this.pushExtraColors(p.globals.dataLabels.style.colors,50),p.globals.radarPolygons.fill.colors=void 0===p.config.plotOptions.radar.polygons.fill.colors?["dark"===p.config.theme.mode?"#424242":"none"]:p.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(p.globals.radarPolygons.fill.colors,20),p.globals.markers.colors=void 0===p.config.markers.colors?K:p.config.markers.colors.slice(),this.pushExtraColors(p.globals.markers.colors)}},{key:"pushExtraColors",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=this.w,M=p||C.globals.series.length;if(null===y&&(y=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===C.config.chart.type&&C.config.plotOptions.heatmap.colorScale.inverse),y&&C.globals.series.length&&(M=C.globals.series[C.globals.maxValsInArrayIndex].length*C.globals.series.length),d.length<M)for(var L=M-d.length,R=0;R<L;R++)d.push(d[R])}},{key:"updateThemeOptions",value:function(d){d.chart=d.chart||{},d.tooltip=d.tooltip||{};var p=d.theme.mode||"light",y=d.theme.palette?d.theme.palette:"dark"===p?"palette4":"palette1",C=d.chart.foreColor?d.chart.foreColor:"dark"===p?"#f6f7f8":"#373d3f";return d.tooltip.theme=p,d.chart.foreColor=C,d.theme.palette=y,d}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"];break;default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]}return this.colors}}]),ve}(),vr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(d){var p=this.w,y="title"===d?p.config.title:p.config.subtitle,C=p.globals.svgWidth/2,M=y.offsetY,L="middle";if("left"===y.align?(C=10,L="start"):"right"===y.align&&(C=p.globals.svgWidth-10,L="end"),C+=y.offsetX,M=M+parseInt(y.style.fontSize,10)+y.margin/2,void 0!==y.text){var R=new Mt(this.ctx).drawText({x:C,y:M,text:y.text,textAnchor:L,fontSize:y.style.fontSize,fontFamily:y.style.fontFamily,fontWeight:y.style.fontWeight,foreColor:y.style.color,opacity:1});R.node.setAttribute("class","apexcharts-".concat(d,"-text")),p.globals.dom.Paper.add(R)}}}]),ve}(),ns=function(){function ve(d){Ee(this,ve),this.w=d.w,this.dCtx=d}return gt(ve,[{key:"getTitleSubtitleCoords",value:function(d){var p=this.w,y=0,C=0,M="title"===d?p.config.title.floating:p.config.subtitle.floating,L=p.globals.dom.baseEl.querySelector(".apexcharts-".concat(d,"-text"));if(null!==L&&!M){var R=L.getBoundingClientRect();y=R.width,C=p.globals.axisCharts?R.height+5:R.height}return{width:y,height:C}}},{key:"getLegendsRect",value:function(){var d=this.w,p=d.globals.dom.baseEl.querySelector(".apexcharts-legend");d.config.legend.height||"top"!==d.config.legend.position&&"bottom"!==d.config.legend.position||(p.style.maxHeight=d.globals.svgHeight/2+"px");var y=Object.assign({},Qe.getBoundingClientRect(p));return this.dCtx.lgRect=null!==p&&!d.config.legend.floating&&d.config.legend.show?{x:y.x,y:y.y,height:y.height,width:0===y.height?0:y.width}:{x:0,y:0,height:0,width:0},"left"!==d.config.legend.position&&"right"!==d.config.legend.position||1.5*this.dCtx.lgRect.width>d.globals.svgWidth&&(this.dCtx.lgRect.width=d.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(d,p){var y=d;if(this.w.globals.isMultiLineX){var C=p.map(function(L,R){return Array.isArray(L)?L.length:1}),M=Math.max.apply(Math,zt(C));y=p[C.indexOf(M)]}return y}}]),ve}(),_u=function(){function ve(d){Ee(this,ve),this.w=d.w,this.dCtx=d}return gt(ve,[{key:"getxAxisLabelsCoords",value:function(){var d,p=this.w,y=p.globals.labels.slice();if(p.config.xaxis.convertedCatToNumeric&&0===y.length&&(y=p.globals.categoryLabels),p.globals.timescaleLabels.length>0){var C=this.getxAxisTimeScaleLabelsCoords();d={width:C.width,height:C.height},p.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==p.config.legend.position&&"right"!==p.config.legend.position||p.config.legend.floating?0:this.dCtx.lgRect.width;var M=p.globals.xLabelFormatter,L=Qe.getLargestStringFromArr(y),R=this.dCtx.dimHelpers.getLargestStringFromMultiArr(L,y);p.globals.isBarHorizontal&&(R=L=p.globals.yAxisScale[0].result.reduce(function(pe,ge){return pe.length>ge.length?pe:ge},0));var H=new Do(this.dCtx.ctx),G=L;L=H.xLabelFormat(M,L,G,{i:void 0,dateFormatter:new Un(this.dCtx.ctx).formatDate,w:p}),R=H.xLabelFormat(M,R,G,{i:void 0,dateFormatter:new Un(this.dCtx.ctx).formatDate,w:p}),(p.config.xaxis.convertedCatToNumeric&&void 0===L||""===String(L).trim())&&(R=L="1");var J=new Mt(this.dCtx.ctx),te=J.getTextRects(L,p.config.xaxis.labels.style.fontSize),K=te;if(L!==R&&(K=J.getTextRects(R,p.config.xaxis.labels.style.fontSize)),(d={width:te.width>=K.width?te.width:K.width,height:te.height>=K.height?te.height:K.height}).width*y.length>p.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==p.config.xaxis.labels.rotate||p.config.xaxis.labels.rotateAlways){if(!p.globals.isBarHorizontal){p.globals.rotateXLabels=!0;var ae=function(pe){return J.getTextRects(pe,p.config.xaxis.labels.style.fontSize,p.config.xaxis.labels.style.fontFamily,"rotate(".concat(p.config.xaxis.labels.rotate," 0 0)"),!1)};te=ae(L),L!==R&&(K=ae(R)),d.height=(te.height>K.height?te.height:K.height)/1.5,d.width=te.width>K.width?te.width:K.width}}else p.globals.rotateXLabels=!1}return p.config.xaxis.labels.show||(d={width:0,height:0}),{width:d.width,height:d.height}}},{key:"getxAxisTitleCoords",value:function(){var d=this.w,p=0,y=0;if(void 0!==d.config.xaxis.title.text){var C=new Mt(this.dCtx.ctx).getTextRects(d.config.xaxis.title.text,d.config.xaxis.title.style.fontSize);p=C.width,y=C.height}return{width:p,height:y}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var d,p=this.w;this.dCtx.timescaleLabels=p.globals.timescaleLabels.slice();var y=this.dCtx.timescaleLabels.map(function(M){return M.value}),C=y.reduce(function(M,L){return void 0===M?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):M.length>L.length?M:L},0);return 1.05*(d=new Mt(this.dCtx.ctx).getTextRects(C,p.config.xaxis.labels.style.fontSize)).width*y.length>p.globals.gridWidth&&0!==p.config.xaxis.labels.rotate&&(p.globals.overlappingXLabels=!0),d}},{key:"additionalPaddingXLabels",value:function(d){var p=this,y=this.w,C=y.globals,M=y.config,L=M.xaxis.type,R=d.width;C.skipLastTimelinelabel=!1,C.skipFirstTimelinelabel=!1;var H=y.config.yaxis[0].opposite&&y.globals.isBarHorizontal;M.yaxis.forEach(function(J,te){H?(p.dCtx.gridPad.left<R&&(p.dCtx.xPadLeft=R/2+1),p.dCtx.xPadRight=R/2+1):function(J,te){-1!==C.collapsedSeriesIndices.indexOf(te)||function(K){if(p.dCtx.timescaleLabels&&p.dCtx.timescaleLabels.length){var ge=p.dCtx.timescaleLabels[0].position-R/1.75+p.dCtx.yAxisWidthLeft;p.dCtx.timescaleLabels[p.dCtx.timescaleLabels.length-1].position+R/1.75-p.dCtx.yAxisWidthRight>C.svgWidth-C.translateX-("right"===y.config.legend.position&&p.dCtx.lgRect.width>0?p.dCtx.lgRect.width:0)&&(C.skipLastTimelinelabel=!0),ge<-(K.show&&!K.floating||"bar"!==M.chart.type&&"candlestick"!==M.chart.type&&"rangeBar"!==M.chart.type&&"boxPlot"!==M.chart.type?10:R/1.75)&&(C.skipFirstTimelinelabel=!0)}else"datetime"===L?p.dCtx.gridPad.right<R&&!C.rotateXLabels&&(C.skipLastTimelinelabel=!0):"datetime"!==L&&p.dCtx.gridPad.right<R/2-p.dCtx.yAxisWidthRight&&!C.rotateXLabels&&!y.config.xaxis.labels.trim&&("between"!==y.config.xaxis.tickPlacement||y.globals.isBarHorizontal)&&(p.dCtx.xPadRight=R/2+1)}(J)}(J,te)})}}]),ve}(),uo=function(){function ve(d){Ee(this,ve),this.w=d.w,this.dCtx=d}return gt(ve,[{key:"getyAxisLabelsCoords",value:function(){var d=this,p=this.w,y=[],C=10,M=new fr(this.dCtx.ctx);return p.config.yaxis.map(function(L,R){var H=p.globals.yAxisScale[R],G=0;if(!M.isYAxisHidden(R)&&L.labels.show&&void 0!==L.labels.minWidth&&(G=L.labels.minWidth),!M.isYAxisHidden(R)&&L.labels.show&&H.result.length){var J=p.globals.yLabelFormatters[R],te=H.niceMin===Number.MIN_VALUE?0:H.niceMin,K=String(te).length>String(H.niceMax).length?te:H.niceMax,ae=J(K,{seriesIndex:R,dataPointIndex:-1,w:p}),pe=ae;if(void 0!==ae&&0!==ae.length||(ae=K),p.globals.isBarHorizontal){C=0;var ge=p.globals.labels.slice();ae=J(ae=Qe.getLargestStringFromArr(ge),{seriesIndex:R,dataPointIndex:-1,w:p}),pe=d.dCtx.dimHelpers.getLargestStringFromMultiArr(ae,ge)}var xe=new Mt(d.dCtx.ctx),Me="rotate(".concat(L.labels.rotate," 0 0)"),ze=xe.getTextRects(ae,L.labels.style.fontSize,L.labels.style.fontFamily,Me,!1),Ke=ze;ae!==pe&&(Ke=xe.getTextRects(pe,L.labels.style.fontSize,L.labels.style.fontFamily,Me,!1)),y.push({width:(G>Ke.width||G>ze.width?G:Ke.width>ze.width?Ke.width:ze.width)+C,height:Ke.height>ze.height?Ke.height:ze.height})}else y.push({width:0,height:0})}),y}},{key:"getyAxisTitleCoords",value:function(){var d=this,y=[];return this.w.config.yaxis.map(function(C,M){if(C.show&&void 0!==C.title.text){var L=new Mt(d.dCtx.ctx),R="rotate(".concat(C.title.rotate," 0 0)"),H=L.getTextRects(C.title.text,C.title.style.fontSize,C.title.style.fontFamily,R,!1);y.push({width:H.width,height:H.height})}else y.push({width:0,height:0})}),y}},{key:"getTotalYAxisWidth",value:function(){var d=this.w,p=0,y=0,C=0,M=d.globals.yAxisScale.length>1?10:0,L=new fr(this.dCtx.ctx),R=function(H,G){var J=d.config.yaxis[G].floating,te=0;H.width>0&&!J?(te=H.width+M,d.globals.ignoreYAxisIndexes.indexOf(G)>-1&&(te=te-H.width-M)):te=J||L.isYAxisHidden(G)?0:5,d.config.yaxis[G].opposite?C+=te:y+=te,p+=te};return d.globals.yLabelsCoords.map(function(H,G){R(H,G)}),d.globals.yTitleCoords.map(function(H,G){R(H,G)}),d.globals.isBarHorizontal&&!d.config.yaxis[0].floating&&(p=d.globals.yLabelsCoords[0].width+d.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=y,this.dCtx.yAxisWidthRight=C,p}}]),ve}(),Ur=function(){function ve(d){Ee(this,ve),this.w=d.w,this.dCtx=d}return gt(ve,[{key:"gridPadForColumnsInNumericAxis",value:function(d){var p=this.w;if(p.globals.noData||p.globals.allSeriesCollapsed)return 0;var y=function(J){return"bar"===J||"rangeBar"===J||"candlestick"===J||"boxPlot"===J},C=p.config.chart.type,M=0,L=y(C)?p.config.series.length:1;if(p.globals.comboBarCount>0&&(L=p.globals.comboBarCount),p.globals.collapsedSeries.forEach(function(J){y(J.type)&&(L-=1)}),p.config.chart.stacked&&(L=1),(y(C)||p.globals.comboBarCount>0)&&p.globals.isXNumeric&&!p.globals.isBarHorizontal&&L>0){var R,H,G=Math.abs(p.globals.initialMaxX-p.globals.initialMinX);G<=3&&(G=p.globals.dataPoints),R=G/d,p.globals.minXDiff&&p.globals.minXDiff/R>0&&(H=p.globals.minXDiff/R),H>d/2&&(H/=2),(M=H/L*parseInt(p.config.plotOptions.bar.columnWidth,10)/100)<1&&(M=1),p.globals.barPadForNumericAxis=M=M/(L>1?1:1.5)+5}return M}},{key:"gridPadFortitleSubtitle",value:function(){var d=this,p=this.w,y=p.globals,C=this.dCtx.isSparkline||!p.globals.axisCharts?0:10;["title","subtitle"].forEach(function(R){C+=void 0!==p.config[R].text?p.config[R].margin:d.dCtx.isSparkline||!p.globals.axisCharts?0:5}),!p.config.legend.show||"bottom"!==p.config.legend.position||p.config.legend.floating||p.globals.axisCharts||(C+=10);var M=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),L=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");y.gridHeight=y.gridHeight-M.height-L.height-C,y.translateY=y.translateY+M.height+L.height+C}},{key:"setGridXPosForDualYAxis",value:function(d,p){var y=this.w,C=new fr(this.dCtx.ctx);y.config.yaxis.map(function(M,L){-1!==y.globals.ignoreYAxisIndexes.indexOf(L)||M.floating||C.isYAxisHidden(L)||(M.opposite&&(y.globals.translateX=y.globals.translateX-(p[L].width+d[L].width)-parseInt(y.config.yaxis[L].labels.style.fontSize,10)/1.2-12),y.globals.translateX<2&&(y.globals.translateX=2))})}}]),ve}(),is=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ns(this),this.dimYAxis=new uo(this),this.dimXAxis=new _u(this),this.dimGrid=new Ur(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return gt(ve,[{key:"plotCoords",value:function(){var d=this.w.globals;this.lgRect=this.dimHelpers.getLegendsRect(),d.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),d.gridHeight=d.gridHeight-this.gridPad.top-this.gridPad.bottom,d.gridWidth=d.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var p=this.dimGrid.gridPadForColumnsInNumericAxis(d.gridWidth);d.gridWidth=d.gridWidth-2*p,d.translateX=d.translateX+this.gridPad.left+this.xPadLeft+(p>0?p+4:0),d.translateY=d.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var d=this,p=this.w,y=p.globals,C=this.dimYAxis.getyAxisLabelsCoords(),M=this.dimYAxis.getyAxisTitleCoords();p.globals.yLabelsCoords=[],p.globals.yTitleCoords=[],p.config.yaxis.map(function(K,ae){p.globals.yLabelsCoords.push({width:C[ae].width,index:ae}),p.globals.yTitleCoords.push({width:M[ae].width,index:ae})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var L=this.dimXAxis.getxAxisLabelsCoords(),R=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(L,R),y.translateXAxisY=p.globals.rotateXLabels?this.xAxisHeight/8:-4,y.translateXAxisX=p.globals.rotateXLabels&&p.globals.isXNumeric&&p.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,p.globals.isBarHorizontal&&(y.rotateXLabels=!1,y.translateXAxisY=parseInt(p.config.xaxis.labels.style.fontSize,10)/1.5*-1),y.translateXAxisY=y.translateXAxisY+p.config.xaxis.labels.offsetY,y.translateXAxisX=y.translateXAxisX+p.config.xaxis.labels.offsetX;var H=this.yAxisWidth,G=this.xAxisHeight;y.xAxisLabelsHeight=this.xAxisHeight-R.height,y.xAxisLabelsWidth=this.xAxisWidth,y.xAxisHeight=this.xAxisHeight;var J=10;("radar"===p.config.chart.type||this.isSparkline)&&(H=0,G=y.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===p.config.chart.type)&&(H=0,G=0,J=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(L);var te=function(){y.translateX=H,y.gridHeight=y.svgHeight-d.lgRect.height-G-(d.isSparkline||"treemap"===p.config.chart.type?0:p.globals.rotateXLabels?10:15),y.gridWidth=y.svgWidth-H};switch("top"===p.config.xaxis.position&&(J=y.xAxisHeight-p.config.xaxis.axisTicks.height-5),p.config.legend.position){case"bottom":y.translateY=J,te();break;case"top":y.translateY=this.lgRect.height+J,te();break;case"left":y.translateY=J,y.translateX=this.lgRect.width+H,y.gridHeight=y.svgHeight-G-12,y.gridWidth=y.svgWidth-this.lgRect.width-H;break;case"right":y.translateY=J,y.translateX=H,y.gridHeight=y.svgHeight-G-12,y.gridWidth=y.svgWidth-this.lgRect.width-H-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(M,C),new Li(this.ctx).setYAxisXPosition(C,M)}},{key:"setDimensionsForNonAxisCharts",value:function(){var d=this.w,p=d.globals,y=d.config,C=0;d.config.legend.show&&!d.config.legend.floating&&(C=20);var M="pie"===y.chart.type||"polarArea"===y.chart.type||"donut"===y.chart.type?"pie":"radialBar",L=y.plotOptions[M].offsetY,R=y.plotOptions[M].offsetX;if(!y.legend.show||y.legend.floating)return p.gridHeight=p.svgHeight-y.grid.padding.left+y.grid.padding.right,p.gridWidth=p.gridHeight,p.translateY=L,void(p.translateX=R+(p.svgWidth-p.gridWidth)/2);switch(y.legend.position){case"bottom":p.gridHeight=p.svgHeight-this.lgRect.height-p.goldenPadding,p.gridWidth=p.svgWidth,p.translateY=L-10,p.translateX=R+(p.svgWidth-p.gridWidth)/2;break;case"top":p.gridHeight=p.svgHeight-this.lgRect.height-p.goldenPadding,p.gridWidth=p.svgWidth,p.translateY=this.lgRect.height+L+10,p.translateX=R+(p.svgWidth-p.gridWidth)/2;break;case"left":p.gridWidth=p.svgWidth-this.lgRect.width-C,p.gridHeight="auto"!==y.chart.height?p.svgHeight:p.gridWidth,p.translateY=L,p.translateX=R+this.lgRect.width+C;break;case"right":p.gridWidth=p.svgWidth-this.lgRect.width-C-5,p.gridHeight="auto"!==y.chart.height?p.svgHeight:p.gridWidth,p.translateY=L,p.translateX=R+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(d,p){var y=this.w;this.xAxisHeight=(d.height+p.height)*(y.globals.isMultiLineX?1.2:y.globals.LINE_HEIGHT_RATIO)+(y.globals.rotateXLabels?22:10),this.xAxisWidth=d.width,this.xAxisHeight-p.height>y.config.xaxis.labels.maxHeight&&(this.xAxisHeight=y.config.xaxis.labels.maxHeight),y.config.xaxis.labels.minHeight&&this.xAxisHeight<y.config.xaxis.labels.minHeight&&(this.xAxisHeight=y.config.xaxis.labels.minHeight),y.config.xaxis.floating&&(this.xAxisHeight=0);var C=0,M=0;y.config.yaxis.forEach(function(L){C+=L.labels.minWidth,M+=L.labels.maxWidth}),this.yAxisWidth<C&&(this.yAxisWidth=C),this.yAxisWidth>M&&(this.yAxisWidth=M)}}]),ve}(),Hr=function(){function ve(d){Ee(this,ve),this.w=d.w,this.lgCtx=d}return gt(ve,[{key:"getLegendStyles",value:function(){var d=document.createElement("style");d.setAttribute("type","text/css");var p=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.position-bottom, .apexcharts-legend.position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-left, .apexcharts-legend.position-top.apexcharts-align-left, .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-center, .apexcharts-legend.position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-right, .apexcharts-legend.position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.position-bottom .apexcharts-legend-series, .apexcharts-legend.position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return d.appendChild(p),d}},{key:"getLegendBBox",value:function(){var d=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:d.height,clww:d.width}}},{key:"appendToForeignObject",value:function(){var d=this.w.globals;d.dom.elLegendForeign=document.createElementNS(d.SVGNS,"foreignObject");var p=d.dom.elLegendForeign;p.setAttribute("x",0),p.setAttribute("y",0),p.setAttribute("width",d.svgWidth),p.setAttribute("height",d.svgHeight),d.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),p.appendChild(d.dom.elLegendWrap),p.appendChild(this.getLegendStyles()),d.dom.Paper.node.insertBefore(p,d.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(d,p){var y=this,C=this.w;if(C.globals.axisCharts||"radialBar"===C.config.chart.type){C.globals.resized=!0;var M=null,L=null;C.globals.risingSeries=[],C.globals.axisCharts?(M=C.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(d,"']")),L=parseInt(M.getAttribute("data:realIndex"),10)):(M=C.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(d+1,"']")),L=parseInt(M.getAttribute("rel"),10)-1),p?[{cs:C.globals.collapsedSeries,csi:C.globals.collapsedSeriesIndices},{cs:C.globals.ancillaryCollapsedSeries,csi:C.globals.ancillaryCollapsedSeriesIndices}].forEach(function(J){y.riseCollapsedSeries(J.cs,J.csi,L)}):this.hideSeries({seriesEl:M,realIndex:L})}else{var R=C.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(d+1,"'] path")),H=C.config.chart.type;if("pie"===H||"polarArea"===H||"donut"===H){var G=C.config.plotOptions.pie.donut.labels;new Mt(this.lgCtx.ctx).pathMouseDown(R.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(R.members[0].node,G)}R.fire("click")}}},{key:"hideSeries",value:function(d){var p=d.seriesEl,y=d.realIndex,C=this.w,M=Qe.clone(C.config.series);if(C.globals.axisCharts){var L=!1;if(C.config.yaxis[y]&&C.config.yaxis[y].show&&C.config.yaxis[y].showAlways&&(L=!0,C.globals.ancillaryCollapsedSeriesIndices.indexOf(y)<0&&(C.globals.ancillaryCollapsedSeries.push({index:y,data:M[y].data.slice(),type:p.parentNode.className.baseVal.split("-")[1]}),C.globals.ancillaryCollapsedSeriesIndices.push(y))),!L){C.globals.collapsedSeries.push({index:y,data:M[y].data.slice(),type:p.parentNode.className.baseVal.split("-")[1]}),C.globals.collapsedSeriesIndices.push(y);var R=C.globals.risingSeries.indexOf(y);C.globals.risingSeries.splice(R,1)}}else C.globals.collapsedSeries.push({index:y,data:M[y]}),C.globals.collapsedSeriesIndices.push(y);for(var H=p.childNodes,G=0;G<H.length;G++)H[G].classList.contains("apexcharts-series-markers-wrap")&&(H[G].classList.contains("apexcharts-hide")?H[G].classList.remove("apexcharts-hide"):H[G].classList.add("apexcharts-hide"));C.globals.allSeriesCollapsed=C.globals.collapsedSeries.length===C.config.series.length,M=this._getSeriesBasedOnCollapsedState(M),this.lgCtx.ctx.updateHelpers._updateSeries(M,C.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(d,p,y){var C=this.w,M=Qe.clone(C.config.series);if(d.length>0){for(var L=0;L<d.length;L++)d[L].index===y&&(C.globals.axisCharts?(M[y].data=d[L].data.slice(),d.splice(L,1),p.splice(L,1),C.globals.risingSeries.push(y)):(M[y]=d[L].data,d.splice(L,1),p.splice(L,1),C.globals.risingSeries.push(y)));M=this._getSeriesBasedOnCollapsedState(M),this.lgCtx.ctx.updateHelpers._updateSeries(M,C.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(d){var p=this.w;return d.forEach(p.globals.axisCharts?function(y,C){p.globals.collapsedSeriesIndices.indexOf(C)>-1&&(d[C].data=[])}:function(y,C){p.globals.collapsedSeriesIndices.indexOf(C)>-1&&(d[C]=0)}),d}}]),ve}(),$n=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new Hr(this)}return gt(ve,[{key:"init",value:function(){var d=this.w,p=d.globals,y=d.config;if((y.legend.showForSingleSeries&&1===p.series.length||this.isBarsDistributed||p.series.length>1||!p.axisCharts)&&y.legend.show){for(;p.dom.elLegendWrap.firstChild;)p.dom.elLegendWrap.removeChild(p.dom.elLegendWrap.firstChild);this.drawLegends(),Qe.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===y.legend.position||"top"===y.legend.position?this.legendAlignHorizontal():"right"!==y.legend.position&&"left"!==y.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var d=this,p=this.w,y=p.config.legend.fontFamily,C=p.globals.seriesNames,M=p.globals.colors.slice();if("heatmap"===p.config.chart.type){var L=p.config.plotOptions.heatmap.colorScale.ranges;C=L.map(function(gn){return gn.name?gn.name:gn.from+" - "+gn.to}),M=L.map(function(gn){return gn.color})}else this.isBarsDistributed&&(C=p.globals.labels.slice());p.config.legend.customLegendItems.length&&(C=p.config.legend.customLegendItems);for(var R=p.globals.legendFormatter,H=p.config.legend.inverseOrder,G=H?C.length-1:0;H?G>=0:G<=C.length-1;H?G--:G++){var J=R(C[G],{seriesIndex:G,w:p}),te=!1,K=!1;if(p.globals.collapsedSeries.length>0)for(var ae=0;ae<p.globals.collapsedSeries.length;ae++)p.globals.collapsedSeries[ae].index===G&&(te=!0);if(p.globals.ancillaryCollapsedSeriesIndices.length>0)for(var pe=0;pe<p.globals.ancillaryCollapsedSeriesIndices.length;pe++)p.globals.ancillaryCollapsedSeriesIndices[pe]===G&&(K=!0);var ge=document.createElement("span");ge.classList.add("apexcharts-legend-marker");var xe=p.config.legend.markers.offsetX,Me=p.config.legend.markers.offsetY,ze=p.config.legend.markers.height,Ke=p.config.legend.markers.width,Y=p.config.legend.markers.strokeWidth,ne=p.config.legend.markers.strokeColor,be=p.config.legend.markers.radius,Ie=ge.style;Ie.background=M[G],Ie.color=M[G],Ie.setProperty("background",M[G],"important"),p.config.legend.markers.fillColors&&p.config.legend.markers.fillColors[G]&&(Ie.background=p.config.legend.markers.fillColors[G]),void 0!==p.globals.seriesColors[G]&&(Ie.background=p.globals.seriesColors[G],Ie.color=p.globals.seriesColors[G]),Ie.height=Array.isArray(ze)?parseFloat(ze[G])+"px":parseFloat(ze)+"px",Ie.width=Array.isArray(Ke)?parseFloat(Ke[G])+"px":parseFloat(Ke)+"px",Ie.left=(Array.isArray(xe)?parseFloat(xe[G]):parseFloat(xe))+"px",Ie.top=(Array.isArray(Me)?parseFloat(Me[G]):parseFloat(Me))+"px",Ie.borderWidth=Array.isArray(Y)?Y[G]:Y,Ie.borderColor=Array.isArray(ne)?ne[G]:ne,Ie.borderRadius=Array.isArray(be)?parseFloat(be[G])+"px":parseFloat(be)+"px",p.config.legend.markers.customHTML&&(Array.isArray(p.config.legend.markers.customHTML)?p.config.legend.markers.customHTML[G]&&(ge.innerHTML=p.config.legend.markers.customHTML[G]()):ge.innerHTML=p.config.legend.markers.customHTML()),Mt.setAttrs(ge,{rel:G+1,"data:collapsed":te||K}),(te||K)&&ge.classList.add("apexcharts-inactive-legend");var Je=document.createElement("div"),Nt=document.createElement("span");Nt.classList.add("apexcharts-legend-text"),Nt.innerHTML=Array.isArray(J)?Qe.sanitizeDom(J.join(" ")):Qe.sanitizeDom(J);var St=p.config.legend.labels.useSeriesColors?p.globals.colors[G]:p.config.legend.labels.colors;St||(St=p.config.chart.foreColor),Nt.style.color=St,Nt.style.fontSize=parseFloat(p.config.legend.fontSize)+"px",Nt.style.fontWeight=p.config.legend.fontWeight,Nt.style.fontFamily=y||p.config.chart.fontFamily,Mt.setAttrs(Nt,{rel:G+1,i:G,"data:default-text":encodeURIComponent(J),"data:collapsed":te||K}),Je.appendChild(ge),Je.appendChild(Nt);var Xt=new Vn(this.ctx);p.config.legend.showForZeroSeries||0===Xt.getSeriesTotalByIndex(G)&&Xt.seriesHaveSameValues(G)&&!Xt.isSeriesNull(G)&&-1===p.globals.collapsedSeriesIndices.indexOf(G)&&-1===p.globals.ancillaryCollapsedSeriesIndices.indexOf(G)&&Je.classList.add("apexcharts-hidden-zero-series"),p.config.legend.showForNullSeries||Xt.isSeriesNull(G)&&-1===p.globals.collapsedSeriesIndices.indexOf(G)&&-1===p.globals.ancillaryCollapsedSeriesIndices.indexOf(G)&&Je.classList.add("apexcharts-hidden-null-series"),p.globals.dom.elLegendWrap.appendChild(Je),p.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(p.config.legend.horizontalAlign)),p.globals.dom.elLegendWrap.classList.add("position-"+p.config.legend.position),Je.classList.add("apexcharts-legend-series"),Je.style.margin="".concat(p.config.legend.itemMargin.vertical,"px ").concat(p.config.legend.itemMargin.horizontal,"px"),p.globals.dom.elLegendWrap.style.width=p.config.legend.width?p.config.legend.width+"px":"",p.globals.dom.elLegendWrap.style.height=p.config.legend.height?p.config.legend.height+"px":"",Mt.setAttrs(Je,{rel:G+1,seriesName:Qe.escapeString(C[G]),"data:collapsed":te||K}),(te||K)&&Je.classList.add("apexcharts-inactive-legend"),p.config.legend.onItemClick.toggleDataSeries||Je.classList.add("apexcharts-no-click")}p.globals.dom.elWrap.addEventListener("click",d.onLegendClick,!0),p.config.legend.onItemHover.highlightDataSeries&&0===p.config.legend.customLegendItems.length&&(p.globals.dom.elWrap.addEventListener("mousemove",d.onLegendHovered,!0),p.globals.dom.elWrap.addEventListener("mouseout",d.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(d,p){var y=this.w,C=y.globals.dom.baseEl.querySelector(".apexcharts-legend"),M=C.getBoundingClientRect(),L=0,R=0;if("bottom"===y.config.legend.position)R+=y.globals.svgHeight-M.height/2;else if("top"===y.config.legend.position){var H=new is(this.ctx),G=H.dimHelpers.getTitleSubtitleCoords("title").height,J=H.dimHelpers.getTitleSubtitleCoords("subtitle").height;R=R+(G>0?G-10:0)+(J>0?J-10:0)}C.style.position="absolute",R=R+p+y.config.legend.offsetY,C.style.left=(L=L+d+y.config.legend.offsetX)+"px",C.style.top=R+"px","bottom"===y.config.legend.position?(C.style.top="auto",C.style.bottom=5-y.config.legend.offsetY+"px"):"right"===y.config.legend.position&&(C.style.left="auto",C.style.right=25+y.config.legend.offsetX+"px"),["width","height"].forEach(function(te){C.style[te]&&(C.style[te]=parseInt(y.config.legend[te],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var d=this.w;d.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var p=this.legendHelpers.getLegendBBox(),y=new is(this.ctx),C=y.dimHelpers.getTitleSubtitleCoords("title"),M=y.dimHelpers.getTitleSubtitleCoords("subtitle"),L=0;"bottom"===d.config.legend.position?L=-p.clwh/1.8:"top"===d.config.legend.position&&(L=C.height+M.height+d.config.title.margin+d.config.subtitle.margin-10),this.setLegendWrapXY(20,L)}},{key:"legendAlignVertical",value:function(){var d=this.w,p=this.legendHelpers.getLegendBBox(),y=0;"left"===d.config.legend.position&&(y=20),"right"===d.config.legend.position&&(y=d.globals.svgWidth-p.clww-10),this.setLegendWrapXY(y,20)}},{key:"onLegendHovered",value:function(d){var p=this.w,y=d.target.classList.contains("apexcharts-legend-text")||d.target.classList.contains("apexcharts-legend-marker");if("heatmap"===p.config.chart.type||this.isBarsDistributed){if(y){var C=parseInt(d.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,C,this.w]),new On(this.ctx).highlightRangeInSeries(d,d.target)}}else!d.target.classList.contains("apexcharts-inactive-legend")&&y&&new On(this.ctx).toggleSeriesOnHover(d,d.target)}},{key:"onLegendClick",value:function(d){var p=this.w;if(!p.config.legend.customLegendItems.length&&(d.target.classList.contains("apexcharts-legend-text")||d.target.classList.contains("apexcharts-legend-marker"))){var y=parseInt(d.target.getAttribute("rel"),10)-1,C="true"===d.target.getAttribute("data:collapsed"),M=this.w.config.chart.events.legendClick;"function"==typeof M&&M(this.ctx,y,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,y,this.w]);var L=this.w.config.legend.markers.onClick;"function"==typeof L&&d.target.classList.contains("apexcharts-legend-marker")&&(L(this.ctx,y,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,y,this.w])),"treemap"!==p.config.chart.type&&"heatmap"!==p.config.chart.type&&!this.isBarsDistributed&&p.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(y,C)}}}]),ve}(),Ei=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=p.globals.minX,this.maxX=p.globals.maxX}return gt(ve,[{key:"createToolbar",value:function(){var d=this,p=this.w,y=function(){return document.createElement("div")},C=y();if(C.setAttribute("class","apexcharts-toolbar"),C.style.top=p.config.chart.toolbar.offsetY+"px",C.style.right=3-p.config.chart.toolbar.offsetX+"px",p.globals.dom.elWrap.appendChild(C),this.elZoom=y(),this.elZoomIn=y(),this.elZoomOut=y(),this.elPan=y(),this.elSelection=y(),this.elZoomReset=y(),this.elMenuIcon=y(),this.elMenu=y(),this.elCustomIcons=[],this.t=p.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var M=0;M<this.t.customIcons.length;M++)this.elCustomIcons.push(y());var L=[],R=function(te,K,ae){var pe=te.toLowerCase();d.t[pe]&&p.config.chart.zoom.enabled&&L.push({el:K,icon:"string"==typeof d.t[pe]?d.t[pe]:ae,title:d.localeValues[te],class:"apexcharts-".concat(pe,"-icon")})};R("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),R("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var H=function(te){d.t[te]&&p.config.chart[te].enabled&&L.push({el:"zoom"===te?d.elZoom:d.elSelection,icon:"string"==typeof d.t[te]?d.t[te]:"zoom"===te?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:d.localeValues["zoom"===te?"selectionZoom":"selection"],class:p.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(te,"-icon")})};H("zoom"),H("selection"),this.t.pan&&p.config.chart.zoom.enabled&&L.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:p.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),R("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&L.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var G=0;G<this.elCustomIcons.length;G++)L.push({el:this.elCustomIcons[G],icon:this.t.customIcons[G].icon,title:this.t.customIcons[G].title,index:this.t.customIcons[G].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[G].class});L.forEach(function(te,K){te.index&&Qe.moveIndexInArray(L,K,te.index)});for(var J=0;J<L.length;J++)Mt.setAttrs(L[J].el,{class:L[J].class,title:L[J].title}),L[J].el.innerHTML=L[J].icon,C.appendChild(L[J].el);this._createHamburgerMenu(C),p.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):p.globals.panEnabled?this.elPan.classList.add(this.selectedClass):p.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(d){this.elMenuItems=[],d.appendChild(this.elMenu),Mt.setAttrs(this.elMenu,{class:"apexcharts-menu"});var p=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||p.splice(2,1);for(var y=0;y<p.length;y++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[y].innerHTML=p[y].title,Mt.setAttrs(this.elMenuItems[y],{class:"apexcharts-menu-item ".concat(p[y].name),title:p[y].title}),this.elMenu.appendChild(this.elMenuItems[y])}},{key:"addToolbarEventListeners",value:function(){var d=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(y){y.classList.contains("exportSVG")?y.addEventListener("click",d.handleDownload.bind(d,"svg")):y.classList.contains("exportPNG")?y.addEventListener("click",d.handleDownload.bind(d,"png")):y.classList.contains("exportCSV")&&y.addEventListener("click",d.handleDownload.bind(d,"csv"))});for(var p=0;p<this.t.customIcons.length;p++)this.elCustomIcons[p].addEventListener("click",this.t.customIcons[p].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(d){this.ctx.getSyncedCharts().forEach(function(p){p.ctx.toolbar.toggleOtherControls();var y="selection"===d?p.ctx.toolbar.elSelection:p.ctx.toolbar.elZoom,C="selection"===d?"selectionEnabled":"zoomEnabled";p.w.globals[C]=!p.w.globals[C],y.classList.contains(p.ctx.toolbar.selectedClass)?y.classList.remove(p.ctx.toolbar.selectedClass):y.classList.add(p.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var d=this.w;this.elZoom||(this.elZoom=d.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=d.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=d.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(d){this.toggleOtherControls(),"pan"===d?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var p="pan"===d?this.elPan:this.elZoom,y="pan"===d?this.elZoom:this.elPan;p&&p.classList.add(this.selectedClass),y&&y.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(d){d.ctx.toolbar.toggleOtherControls(),d.w.globals.panEnabled=!d.w.globals.panEnabled,d.ctx.toolbar.elPan.classList.contains(d.ctx.toolbar.selectedClass)?d.ctx.toolbar.elPan.classList.remove(d.ctx.toolbar.selectedClass):d.ctx.toolbar.elPan.classList.add(d.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var d=this,p=this.w;p.globals.panEnabled=!1,p.globals.zoomEnabled=!1,p.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(y){y&&y.classList.remove(d.selectedClass)})}},{key:"handleZoomIn",value:function(){var d=this.w;d.globals.isTimelineBar&&(this.minX=d.globals.minY,this.maxX=d.globals.maxY);var p=(this.minX+this.maxX)/2,M=this._getNewMinXMaxX((this.minX+p)/2,(this.maxX+p)/2);d.globals.disableZoomIn||this.zoomUpdateOptions(M.minX,M.maxX)}},{key:"handleZoomOut",value:function(){var d=this.w;if(d.globals.isTimelineBar&&(this.minX=d.globals.minY,this.maxX=d.globals.maxY),!("datetime"===d.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var p=(this.minX+this.maxX)/2,M=this._getNewMinXMaxX(this.minX-(p-this.minX),this.maxX-(p-this.maxX));d.globals.disableZoomOut||this.zoomUpdateOptions(M.minX,M.maxX)}}},{key:"_getNewMinXMaxX",value:function(d,p){var y=this.w.config.xaxis.convertedCatToNumeric;return{minX:y?Math.floor(d):d,maxX:y?Math.floor(p):p}}},{key:"zoomUpdateOptions",value:function(d,p){var y=this.w;if(void 0!==d||void 0!==p){if(!(y.config.xaxis.convertedCatToNumeric&&(d<1&&(d=1,p=y.globals.dataPoints),p-d<2))){var C={min:d,max:p},M=this.getBeforeZoomRange(C);M&&(C=M.xaxis);var L={xaxis:C},R=Qe.clone(y.globals.initialConfig.yaxis);y.config.chart.zoom.autoScaleYaxis&&(R=new Ri(this.ctx).autoScaleY(this.ctx,R,{xaxis:C})),y.config.chart.group||(L.yaxis=R),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(L,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(C,R)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(d,p){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:d,yaxis:p})}},{key:"getBeforeZoomRange",value:function(d,p){var y=null;return"function"==typeof this.ev.beforeZoom&&(y=this.ev.beforeZoom(this,{xaxis:d,yaxis:p})),y}},{key:"toggleMenu",value:function(){var d=this;window.setTimeout(function(){d.elMenu.classList.contains("apexcharts-menu-open")?d.elMenu.classList.remove("apexcharts-menu-open"):d.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(d){var p=this.w,y=new io(this.ctx);switch(d){case"svg":y.exportToSVG(this.ctx);break;case"png":y.exportToPng(this.ctx);break;case"csv":y.exportToCSV({series:p.config.series,columnDelimiter:p.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(d){this.ctx.getSyncedCharts().forEach(function(p){var y=p.w;if(y.globals.lastXAxis.min=void 0,y.globals.lastXAxis.max=void 0,p.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof y.config.chart.events.beforeResetZoom){var C=y.config.chart.events.beforeResetZoom(p,y);C&&p.updateHelpers.revertDefaultAxisMinMax(C)}"function"==typeof y.config.chart.events.zoomed&&p.ctx.toolbar.zoomCallback({min:y.config.xaxis.min,max:y.config.xaxis.max}),y.globals.zoomed=!1;var M=p.ctx.series.emptyCollapsedSeries(Qe.clone(y.globals.initialSeries));p.updateHelpers._updateSeries(M,y.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),ve}(),Nl=function(ve){Ge(p,Ei);var d=Ct(p);function p(y){var C;return Ee(this,p),(C=d.call(this,y)).ctx=y,C.w=y.w,C.dragged=!1,C.graphics=new Mt(C.ctx),C.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],C.clientX=0,C.clientY=0,C.startX=0,C.endX=0,C.dragX=0,C.startY=0,C.endY=0,C.dragY=0,C.moveDirection="none",C}return gt(p,[{key:"init",value:function(y){var C=this,M=y.xyRatios,L=this.w,R=this;this.xyRatios=M,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=L.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),L.globals.dom.elGraphical.add(this.zoomRect),L.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===L.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:L.globals.gridWidth,maxY:L.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===L.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:L.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=L.globals.dom.baseEl.querySelector("".concat(L.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(H){C.hoverArea.addEventListener(H,R.svgMouseEvents.bind(R,M),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(y,C){var M=this.w,L=this,R=this.ctx.toolbar,H=M.globals.zoomEnabled?M.config.chart.zoom.type:M.config.chart.selection.type,G=M.config.chart.toolbar.autoSelected;C.shiftKey?(this.shiftWasPressed=!0,R.enableZoomPanFromToolbar("pan"===G?"zoom":"pan")):this.shiftWasPressed&&(R.enableZoomPanFromToolbar(G),this.shiftWasPressed=!1);var J=C.target.classList;if(!(J.contains("apexcharts-selection-rect")||J.contains("apexcharts-legend-marker")||J.contains("apexcharts-legend-text")||C.target.parentNode.classList.contains("apexcharts-toolbar"))){if(L.clientX="touchmove"===C.type||"touchstart"===C.type?C.touches[0].clientX:"touchend"===C.type?C.changedTouches[0].clientX:C.clientX,L.clientY="touchmove"===C.type||"touchstart"===C.type?C.touches[0].clientY:"touchend"===C.type?C.changedTouches[0].clientY:C.clientY,"mousedown"===C.type&&1===C.which){var te=L.gridRect.getBoundingClientRect();L.startX=L.clientX-te.left,L.startY=L.clientY-te.top,L.dragged=!1,L.w.globals.mousedown=!0}if(("mousemove"===C.type&&1===C.which||"touchmove"===C.type)&&(L.dragged=!0,M.globals.panEnabled?(M.globals.selection=null,L.w.globals.mousedown&&L.panDragging({context:L,zoomtype:H,xyRatios:y})):(L.w.globals.mousedown&&M.globals.zoomEnabled||L.w.globals.mousedown&&M.globals.selectionEnabled)&&(L.selection=L.selectionDrawing({context:L,zoomtype:H}))),"mouseup"===C.type||"touchend"===C.type||"mouseleave"===C.type){var K=L.gridRect.getBoundingClientRect();L.w.globals.mousedown&&(L.endX=L.clientX-K.left,L.endY=L.clientY-K.top,L.dragX=Math.abs(L.endX-L.startX),L.dragY=Math.abs(L.endY-L.startY),(M.globals.zoomEnabled||M.globals.selectionEnabled)&&L.selectionDrawn({context:L,zoomtype:H}),M.globals.panEnabled&&M.config.xaxis.convertedCatToNumeric&&L.delayedPanScrolled()),M.globals.zoomEnabled&&L.hideSelectionRect(this.selectionRect),L.dragged=!1,L.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}},{key:"makeSelectionRectDraggable",value:function(){var y=this.w;if(this.selectionRect){var C=this.selectionRect.node.getBoundingClientRect();C.width>0&&C.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:y.globals.gridWidth,maxY:y.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var y=this.w,C=this.xyRatios;if(!y.globals.zoomEnabled)if(null!=y.globals.selection)this.drawSelectionRect(y.globals.selection);else if(void 0!==y.config.chart.selection.xaxis.min&&void 0!==y.config.chart.selection.xaxis.max){var M=(y.config.chart.selection.xaxis.min-y.globals.minX)/C.xRatio;this.drawSelectionRect({x:M,y:0,width:y.globals.gridWidth-(y.globals.maxX-y.config.chart.selection.xaxis.max)/C.xRatio-M,height:y.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof y.config.chart.events.selection&&y.config.chart.events.selection(this.ctx,{xaxis:{min:y.config.chart.selection.xaxis.min,max:y.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(y){var C=y.x,M=y.y,L=y.width,R=y.height,H=y.translateX,J=y.translateY,K=this.w,ae=this.zoomRect,pe=this.selectionRect;if(this.dragged||null!==K.globals.selection){var ge={transform:"translate("+(void 0===H?0:H)+", "+(void 0===J?0:J)+")"};K.globals.zoomEnabled&&this.dragged&&(L<0&&(L=1),ae.attr({x:C,y:M,width:L,height:R,fill:K.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":K.config.chart.zoom.zoomedArea.fill.opacity,stroke:K.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":K.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":K.config.chart.zoom.zoomedArea.stroke.opacity}),Mt.setAttrs(ae.node,ge)),K.globals.selectionEnabled&&(pe.attr({x:C,y:M,width:L>0?L:0,height:R>0?R:0,fill:K.config.chart.selection.fill.color,"fill-opacity":K.config.chart.selection.fill.opacity,stroke:K.config.chart.selection.stroke.color,"stroke-width":K.config.chart.selection.stroke.width,"stroke-dasharray":K.config.chart.selection.stroke.dashArray,"stroke-opacity":K.config.chart.selection.stroke.opacity}),Mt.setAttrs(pe.node,ge))}}},{key:"hideSelectionRect",value:function(y){y&&y.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(y){var ge,M=y.zoomtype,L=this.w,R=y.context,H=this.gridRect.getBoundingClientRect(),G=R.startX-1,J=R.startY,te=!1,K=!1,ae=R.clientX-H.left-G,pe=R.clientY-H.top-J;return Math.abs(ae+G)>L.globals.gridWidth?ae=L.globals.gridWidth-G:R.clientX-H.left<0&&(ae=G),G>R.clientX-H.left&&(te=!0,ae=Math.abs(ae)),J>R.clientY-H.top&&(K=!0,pe=Math.abs(pe)),R.drawSelectionRect(ge="x"===M?{x:te?G-ae:G,y:0,width:ae,height:L.globals.gridHeight}:"y"===M?{x:0,y:K?J-pe:J,width:L.globals.gridWidth,height:pe}:{x:te?G-ae:G,y:K?J-pe:J,width:ae,height:pe}),R.selectionDragging("resizing"),ge}},{key:"selectionDragging",value:function(y,C){var M=this,L=this.w,R=this.xyRatios,H=this.selectionRect,G=0;"resizing"===y&&(G=30);var J=function(K){return parseFloat(H.node.getAttribute(K))},te={x:J("x"),y:J("y"),width:J("width"),height:J("height")};L.globals.selection=te,"function"==typeof L.config.chart.events.selection&&L.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var K=M.gridRect.getBoundingClientRect(),ae=H.node.getBoundingClientRect(),pe={xaxis:{min:L.globals.xAxisScale.niceMin+(ae.left-K.left)*R.xRatio,max:L.globals.xAxisScale.niceMin+(ae.right-K.left)*R.xRatio},yaxis:{min:L.globals.yAxisScale[0].niceMin+(K.bottom-ae.bottom)*R.yRatio[0],max:L.globals.yAxisScale[0].niceMax-(ae.top-K.top)*R.yRatio[0]}};L.config.chart.events.selection(M.ctx,pe),L.config.chart.brush.enabled&&void 0!==L.config.chart.events.brushScrolled&&L.config.chart.events.brushScrolled(M.ctx,pe)},G))}},{key:"selectionDrawn",value:function(y){var M=y.zoomtype,L=this.w,R=y.context,H=this.xyRatios,G=this.ctx.toolbar;if(R.startX>R.endX){var J=R.startX;R.startX=R.endX,R.endX=J}if(R.startY>R.endY){var te=R.startY;R.startY=R.endY,R.endY=te}var K=void 0,ae=void 0;L.globals.isTimelineBar?(K=L.globals.yAxisScale[0].niceMin+R.startX*H.invertedYRatio,ae=L.globals.yAxisScale[0].niceMin+R.endX*H.invertedYRatio):(K=L.globals.xAxisScale.niceMin+R.startX*H.xRatio,ae=L.globals.xAxisScale.niceMin+R.endX*H.xRatio);var pe=[],ge=[];if(L.config.yaxis.forEach(function(Ie,Je){pe.push(L.globals.yAxisScale[Je].niceMax-H.yRatio[Je]*R.startY),ge.push(L.globals.yAxisScale[Je].niceMax-H.yRatio[Je]*R.endY)}),R.dragged&&(R.dragX>10||R.dragY>10)&&K!==ae)if(L.globals.zoomEnabled){var xe=Qe.clone(L.globals.initialConfig.yaxis),Me=Qe.clone(L.globals.initialConfig.xaxis);if(L.globals.zoomed=!0,L.config.xaxis.convertedCatToNumeric&&(K=Math.floor(K),ae=Math.floor(ae),K<1&&(K=1,ae=L.globals.dataPoints),ae-K<2&&(ae=K+1)),"xy"!==M&&"x"!==M||(Me={min:K,max:ae}),"xy"!==M&&"y"!==M||xe.forEach(function(Ie,Je){xe[Je].min=ge[Je],xe[Je].max=pe[Je]}),L.config.chart.zoom.autoScaleYaxis){var ze=new Ri(R.ctx);xe=ze.autoScaleY(R.ctx,xe,{xaxis:Me})}if(G){var Ke=G.getBeforeZoomRange(Me,xe);Ke&&(Me=Ke.xaxis?Ke.xaxis:Me,xe=Ke.yaxis?Ke.yaxis:xe)}var Y={xaxis:Me};L.config.chart.group||(Y.yaxis=xe),R.ctx.updateHelpers._updateOptions(Y,!1,R.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof L.config.chart.events.zoomed&&G.zoomCallback(Me,xe)}else if(L.globals.selectionEnabled){var ne,be=null;ne={min:K,max:ae},"xy"!==M&&"y"!==M||(be=Qe.clone(L.config.yaxis)).forEach(function(Ie,Je){be[Je].min=ge[Je],be[Je].max=pe[Je]}),L.globals.selection=R.selection,"function"==typeof L.config.chart.events.selection&&L.config.chart.events.selection(R.ctx,{xaxis:ne,yaxis:be})}}},{key:"panDragging",value:function(y){var M=this.w,L=y.context;if(void 0!==M.globals.lastClientPosition.x){var R=M.globals.lastClientPosition.x-L.clientX,H=M.globals.lastClientPosition.y-L.clientY;Math.abs(R)>Math.abs(H)&&R>0?this.moveDirection="left":Math.abs(R)>Math.abs(H)&&R<0?this.moveDirection="right":Math.abs(H)>Math.abs(R)&&H>0?this.moveDirection="up":Math.abs(H)>Math.abs(R)&&H<0&&(this.moveDirection="down")}M.globals.lastClientPosition={x:L.clientX,y:L.clientY},M.config.xaxis.convertedCatToNumeric||L.panScrolled(M.globals.isTimelineBar?M.globals.minY:M.globals.minX,M.globals.isTimelineBar?M.globals.maxY:M.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var y=this.w,C=y.globals.minX,M=y.globals.maxX,L=(y.globals.maxX-y.globals.minX)/2;"left"===this.moveDirection?(C=y.globals.minX+L,M=y.globals.maxX+L):"right"===this.moveDirection&&(C=y.globals.minX-L,M=y.globals.maxX-L),C=Math.floor(C),M=Math.floor(M),this.updateScrolledChart({xaxis:{min:C,max:M}},C,M)}},{key:"panScrolled",value:function(y,C){var M=this.w,L=this.xyRatios,R=Qe.clone(M.globals.initialConfig.yaxis),H=L.xRatio,G=M.globals.minX,J=M.globals.maxX;M.globals.isTimelineBar&&(H=L.invertedYRatio,G=M.globals.minY,J=M.globals.maxY),"left"===this.moveDirection?(y=G+M.globals.gridWidth/15*H,C=J+M.globals.gridWidth/15*H):"right"===this.moveDirection&&(y=G-M.globals.gridWidth/15*H,C=J-M.globals.gridWidth/15*H),M.globals.isTimelineBar||(y<M.globals.initialMinX||C>M.globals.initialMaxX)&&(y=G,C=J);var te={min:y,max:C};M.config.chart.zoom.autoScaleYaxis&&(R=new Ri(this.ctx).autoScaleY(this.ctx,R,{xaxis:te}));var K={xaxis:{min:y,max:C}};M.config.chart.group||(K.yaxis=R),this.updateScrolledChart(K,y,C)}},{key:"updateScrolledChart",value:function(y,C,M){var L=this.w;this.ctx.updateHelpers._updateOptions(y,!1,!1),"function"==typeof L.config.chart.events.scrolled&&L.config.chart.events.scrolled(this.ctx,{xaxis:{min:C,max:M}})}}]),p}(),Vs=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ttCtx=d,this.ctx=d.ctx}return gt(ve,[{key:"getNearestValues",value:function(d){var p=d.hoverArea,C=d.clientX,M=d.clientY,L=this.w,R=L.globals.gridWidth,G=R/(L.globals.dataPoints-1),J=L.globals.gridHeight/L.globals.dataPoints,te=d.elGrid.getBoundingClientRect(),K=this.hasBars();!L.globals.comboCharts&&!K||L.config.xaxis.convertedCatToNumeric||(G=R/L.globals.dataPoints);var ae=C-te.left-L.globals.barPadForNumericAxis,pe=M-te.top;ae<0||pe<0||ae>L.globals.gridWidth||pe>L.globals.gridHeight?(p.classList.remove("hovering-zoom"),p.classList.remove("hovering-pan")):L.globals.zoomEnabled?(p.classList.remove("hovering-pan"),p.classList.add("hovering-zoom")):L.globals.panEnabled&&(p.classList.remove("hovering-zoom"),p.classList.add("hovering-pan"));var ge=Math.round(ae/G),xe=Math.floor(pe/J);K&&!L.config.xaxis.convertedCatToNumeric&&(ge=Math.ceil(ae/G),ge-=1);for(var Me,ze=null,Ke=null,Y=[],ne=0;ne<L.globals.seriesXvalues.length;ne++)Y.push([L.globals.seriesXvalues[ne][0]-1e-6].concat(L.globals.seriesXvalues[ne]));return Y=Y.map(function(be){return be.filter(function(Ie){return Ie})}),Me=L.globals.seriesYvalues.map(function(be){return be.filter(function(Ie){return Qe.isNumber(Ie)})}),L.globals.isXNumeric&&(ze=(Ke=this.closestInMultiArray(ae,pe,Y,Me)).index,ge=Ke.j,null!==ze&&(ge=(Ke=this.closestInArray(ae,Y=L.globals.seriesXvalues[ze])).index)),L.globals.capturedSeriesIndex=null===ze?-1:ze,(!ge||ge<1)&&(ge=0),L.globals.capturedDataPointIndex=ge,{capturedSeries:ze,j:L.globals.isBarHorizontal?xe:ge,hoverX:ae,hoverY:pe}}},{key:"closestInMultiArray",value:function(d,p,y,C){var L=0,R=null,H=-1;this.w.globals.series.length>1?L=this.getFirstActiveXArray(y):R=0;var G=C[L][0],te=Math.abs(d-y[L][0]),K=Math.abs(p-G),ae=K+te;return C.map(function(pe,ge){pe.map(function(xe,Me){var ze=Math.abs(p-C[ge][Me]),Ke=Math.abs(d-y[ge][Me]),Y=Ke+ze;Y<ae&&(ae=Y,te=Ke,K=ze,R=ge,H=Me)})}),{index:R,j:H}}},{key:"getFirstActiveXArray",value:function(d){for(var p=0,y=d.map(function(M,L){return M.length>0?L:-1}),C=0;C<y.length;C++)if(-1!==y[C]){p=y[C];break}return p}},{key:"closestInArray",value:function(d,p){for(var C=null,M=Math.abs(d-p[0]),L=0;L<p.length;L++){var R=Math.abs(d-p[L]);R<M&&(M=R,C=L)}return{index:C}}},{key:"isXoverlap",value:function(d){var p=[],y=this.w.globals.seriesX.filter(function(M){return void 0!==M[0]});if(y.length>0)for(var C=0;C<y.length-1;C++)void 0!==y[C][d]&&void 0!==y[C+1][d]&&y[C][d]!==y[C+1][d]&&p.push("unEqual");return 0===p.length}},{key:"isInitialSeriesSameLen",value:function(){for(var d=!0,p=this.w.globals.initialSeries,y=0;y<p.length-1;y++)if(p[y].data.length!==p[y+1].data.length){d=!1;break}return d}},{key:"getBarsHeight",value:function(d){return zt(d).reduce(function(p,y){return p+y.getBBox().height},0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var d=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(d=zt(d)).sort(function(y,C){return Number(C.getAttribute("data:realIndex"))<Number(y.getAttribute("data:realIndex"))?0:-1});var p=[];return d.forEach(function(y){p.push(y.querySelector(".apexcharts-marker"))}),p}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(d){var p=this.w,y=p.config.markers.hover.size;return void 0===y&&(y=p.globals.markers.size[d]+p.config.markers.hover.sizeOffset),y}},{key:"toggleAllTooltipSeriesGroups",value:function(d){var p=this.w,y=this.ttCtx;0===y.allTooltipSeriesGroups.length&&(y.allTooltipSeriesGroups=p.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var C=y.allTooltipSeriesGroups,M=0;M<C.length;M++)"enable"===d?(C[M].classList.add("apexcharts-active"),C[M].style.display=p.config.tooltip.items.display):(C[M].classList.remove("apexcharts-active"),C[M].style.display="none")}}]),ve}(),_s=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ctx=d.ctx,this.ttCtx=d,this.tooltipUtil=new Vs(d)}return gt(ve,[{key:"drawSeriesTexts",value:function(d){var p=d.shared,y=void 0===p||p,C=d.ttItems,M=d.i,L=void 0===M?0:M,R=d.j,H=void 0===R?null:R,te=d.e,K=this.w;void 0!==K.config.tooltip.custom?this.handleCustomTooltip({i:L,j:H,y1:d.y1,y2:d.y2,w:K}):this.toggleActiveInactiveSeries(y);var ae=this.getValuesToPrint({i:L,j:H});this.printLabels({i:L,j:H,values:ae,ttItems:C,shared:y,e:te});var pe=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=pe.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=pe.getBoundingClientRect().height}},{key:"printLabels",value:function(d){var p,y=this,C=d.i,M=d.j,L=d.values,R=d.ttItems,H=d.shared,G=d.e,J=this.w,te=[],K=function(ne){return J.globals.seriesGoals[ne]&&J.globals.seriesGoals[ne][M]&&Array.isArray(J.globals.seriesGoals[ne][M])},ae=L.xVal,pe=L.zVal,ge=L.xAxisTTVal,xe="",Me=J.globals.colors[C];null!==M&&J.config.plotOptions.bar.distributed&&(Me=J.globals.colors[M]);for(var ze=function(ne,be){var Ie=y.getFormatters(C);xe=y.getSeriesName({fn:Ie.yLbTitleFormatter,index:C,seriesIndex:C,j:M}),"treemap"===J.config.chart.type&&(xe=Ie.yLbTitleFormatter(String(J.config.series[C].data[M].x),{series:J.globals.series,seriesIndex:C,dataPointIndex:M,w:J}));var Je=J.config.tooltip.inverseOrder?be:ne;if(J.globals.axisCharts){var Nt=function(St){return Ie.yLbFormatter(J.globals.series[St][M],{series:J.globals.series,seriesIndex:St,dataPointIndex:M,w:J})};H?(Ie=y.getFormatters(Je),xe=y.getSeriesName({fn:Ie.yLbTitleFormatter,index:Je,seriesIndex:C,j:M}),Me=J.globals.colors[Je],p=Nt(Je),K(Je)&&(te=J.globals.seriesGoals[Je][M].map(function(St){return{attrs:St,val:Ie.yLbFormatter(St.value,{seriesIndex:Je,dataPointIndex:M,w:J})}}))):(G&&G.target&&G.target.getAttribute("fill")&&(Me=G.target.getAttribute("fill")),p=Nt(C),K(C)&&Array.isArray(J.globals.seriesGoals[C][M])&&(te=J.globals.seriesGoals[C][M].map(function(St){return{attrs:St,val:Ie.yLbFormatter(St.value,{seriesIndex:C,dataPointIndex:M,w:J})}})))}null===M&&(p=Ie.yLbFormatter(J.globals.series[C],Be(Be({},J),{},{seriesIndex:C,dataPointIndex:C}))),y.DOMHandling({i:C,t:Je,j:M,ttItems:R,values:{val:p,goalVals:te,xVal:ae,xAxisTTVal:ge,zVal:pe},seriesName:xe,shared:H,pColor:Me})},Ke=0,Y=J.globals.series.length-1;Ke<J.globals.series.length;Ke++,Y--)ze(Ke,Y)}},{key:"getFormatters",value:function(d){var p,y=this.w,C=y.globals.yLabelFormatters[d];return void 0!==y.globals.ttVal?Array.isArray(y.globals.ttVal)?(C=y.globals.ttVal[d]&&y.globals.ttVal[d].formatter,p=y.globals.ttVal[d]&&y.globals.ttVal[d].title&&y.globals.ttVal[d].title.formatter):(C=y.globals.ttVal.formatter,"function"==typeof y.globals.ttVal.title.formatter&&(p=y.globals.ttVal.title.formatter)):p=y.config.tooltip.y.title.formatter,"function"!=typeof C&&(C=y.globals.yLabelFormatters[0]?y.globals.yLabelFormatters[0]:function(M){return M}),"function"!=typeof p&&(p=function(M){return M}),{yLbFormatter:C,yLbTitleFormatter:p}}},{key:"getSeriesName",value:function(d){var C=d.seriesIndex,M=d.j,L=this.w;return(0,d.fn)(String(L.globals.seriesNames[d.index]),{series:L.globals.series,seriesIndex:C,dataPointIndex:M,w:L})}},{key:"DOMHandling",value:function(d){var p=d.t,y=d.j,C=d.ttItems,M=d.values,L=d.seriesName,R=d.shared,H=d.pColor,G=this.w,J=this.ttCtx;Object.keys(M).forEach(function(be){"string"==typeof M[be]&&(M[be]=Qe.sanitizeDom(M[be]))});var te=M.val,K=M.goalVals,ae=M.xVal,pe=M.xAxisTTVal,ge=M.zVal,xe=null;xe=C[p].children,G.config.tooltip.fillSeriesColor&&(C[p].style.backgroundColor=H,xe[0].style.display="none"),J.showTooltipTitle&&(null===J.tooltipTitle&&(J.tooltipTitle=G.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),J.tooltipTitle.innerHTML=ae),J.blxaxisTooltip&&(J.xaxisTooltipText.innerHTML=""!==pe?pe:ae);var Me=C[p].querySelector(".apexcharts-tooltip-text-y-label");Me&&(Me.innerHTML=L?Qe.sanitizeDom(L):"");var ze=C[p].querySelector(".apexcharts-tooltip-text-y-value");ze&&(ze.innerHTML=void 0!==te?te:""),xe[0]&&xe[0].classList.contains("apexcharts-tooltip-marker")&&(G.config.tooltip.marker.fillColors&&Array.isArray(G.config.tooltip.marker.fillColors)&&(H=G.config.tooltip.marker.fillColors[p]),xe[0].style.backgroundColor=H),G.config.tooltip.marker.show||(xe[0].style.display="none");var Ke=C[p].querySelector(".apexcharts-tooltip-text-goals-label"),Y=C[p].querySelector(".apexcharts-tooltip-text-goals-value");if(K.length&&G.globals.seriesGoals[p]){var ne=function(){var be="<div >",Ie="<div>";K.forEach(function(Je,Nt){be+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(Je.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(Je.attrs.name,"</div>"),Ie+="<div>".concat(Je.val,"</div>")}),Ke.innerHTML=be+"</div>",Y.innerHTML=Ie+"</div>"};R?G.globals.seriesGoals[p][y]&&Array.isArray(G.globals.seriesGoals[p][y])?ne():(Ke.innerHTML="",Y.innerHTML=""):ne()}else Ke.innerHTML="",Y.innerHTML="";null!==ge&&(C[p].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=G.config.tooltip.z.title,C[p].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==ge?ge:""),R&&xe[0]&&(xe[0].parentNode.style.display=null==te||G.globals.collapsedSeriesIndices.indexOf(p)>-1?"none":G.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(d){var p=this.w;if(d)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var y=p.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");y&&(y.classList.add("apexcharts-active"),y.style.display=p.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(d){var p=d.i,y=d.j,C=this.w,M=this.ctx.series.filteredSeriesX(),L="",R="",H=null,G=null,J={series:C.globals.series,seriesIndex:p,dataPointIndex:y,w:C},te=C.globals.ttZFormatter;null===y?G=C.globals.series[p]:C.globals.isXNumeric&&"treemap"!==C.config.chart.type?(L=M[p][y],0===M[p].length&&(L=M[this.tooltipUtil.getFirstActiveXArray(M)][y])):L=void 0!==C.globals.labels[y]?C.globals.labels[y]:"";var K=L;return L=C.globals.isXNumeric&&"datetime"===C.config.xaxis.type?new Do(this.ctx).xLabelFormat(C.globals.ttKeyFormatter,K,K,{i:void 0,dateFormatter:new Un(this.ctx).formatDate,w:this.w}):C.globals.isBarHorizontal?C.globals.yLabelFormatters[0](K,J):C.globals.xLabelFormatter(K,J),void 0!==C.config.tooltip.x.formatter&&(L=C.globals.ttKeyFormatter(K,J)),C.globals.seriesZ.length>0&&C.globals.seriesZ[p].length>0&&(H=te(C.globals.seriesZ[p][y],C)),R="function"==typeof C.config.xaxis.tooltip.formatter?C.globals.xaxisTooltipFormatter(K,J):L,{val:Array.isArray(G)?G.join(" "):G,xVal:Array.isArray(L)?L.join(" "):L,xAxisTTVal:Array.isArray(R)?R.join(" "):R,zVal:H}}},{key:"handleCustomTooltip",value:function(d){var p=d.i,y=d.j,C=d.y1,M=d.y2,L=d.w,R=this.ttCtx.getElTooltip(),H=L.config.tooltip.custom;Array.isArray(H)&&H[p]&&(H=H[p]),R.innerHTML=H({ctx:this.ctx,series:L.globals.series,seriesIndex:p,dataPointIndex:y,y1:C,y2:M,w:L})}}]),ve}(),br=function(){function ve(d){Ee(this,ve),this.ttCtx=d,this.ctx=d.ctx,this.w=d.w}return gt(ve,[{key:"moveXCrosshairs",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=this.ttCtx,C=this.w,M=y.getElXCrosshairs(),L=d-y.xcrosshairsWidth/2,R=C.globals.labels.slice().length;if(null!==p&&(L=C.globals.gridWidth/R*p),null!==M&&(M.setAttribute("x",L),M.setAttribute("x1",L),M.setAttribute("x2",L),M.setAttribute("y2",C.globals.gridHeight),M.classList.add("apexcharts-active")),L<0&&(L=0),L>C.globals.gridWidth&&(L=C.globals.gridWidth),y.blxaxisTooltip){var H=L;"tickWidth"!==C.config.xaxis.crosshairs.width&&"barWidth"!==C.config.xaxis.crosshairs.width||(H=L+y.xcrosshairsWidth/2),this.moveXAxisTooltip(H)}}},{key:"moveYCrosshairs",value:function(d){var p=this.ttCtx;null!==p.ycrosshairs&&Mt.setAttrs(p.ycrosshairs,{y1:d,y2:d}),null!==p.ycrosshairsHidden&&Mt.setAttrs(p.ycrosshairsHidden,{y1:d,y2:d})}},{key:"moveXAxisTooltip",value:function(d){var p=this.w,y=this.ttCtx;if(null!==y.xaxisTooltip){y.xaxisTooltip.classList.add("apexcharts-active");var M,C=y.xaxisOffY+p.config.xaxis.tooltip.offsetY+p.globals.translateY+1+p.config.xaxis.offsetY;d-=y.xaxisTooltip.getBoundingClientRect().width/2,isNaN(d)||(d+=p.globals.translateX,M=new Mt(this.ctx).getTextRects(y.xaxisTooltipText.innerHTML),y.xaxisTooltipText.style.minWidth=M.width+"px",y.xaxisTooltip.style.left=d+"px",y.xaxisTooltip.style.top=C+"px")}}},{key:"moveYAxisTooltip",value:function(d){var p=this.w,y=this.ttCtx;null===y.yaxisTTEls&&(y.yaxisTTEls=p.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var C=parseInt(y.ycrosshairsHidden.getAttribute("y1"),10),M=p.globals.translateY+C,L=y.yaxisTTEls[d].getBoundingClientRect().height,R=p.globals.translateYAxisX[d]-2;p.config.yaxis[d].opposite&&(R-=26),M-=L/2,-1===p.globals.ignoreYAxisIndexes.indexOf(d)?(y.yaxisTTEls[d].classList.add("apexcharts-active"),y.yaxisTTEls[d].style.top=M+"px",y.yaxisTTEls[d].style.left=R+p.config.yaxis[d].tooltip.offsetX+"px"):y.yaxisTTEls[d].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=this.w,M=this.ttCtx,L=M.getElTooltip(),R=M.tooltipRect,H=null!==y?parseFloat(y):1,G=parseFloat(d)+H+5,J=parseFloat(p)+H/2;if(G>C.globals.gridWidth/2&&(G=G-R.ttWidth-H-15),G>C.globals.gridWidth-R.ttWidth-10&&(G=C.globals.gridWidth-R.ttWidth),G<-20&&(G=-20),C.config.tooltip.followCursor){var te=M.getElGrid(),K=te.getBoundingClientRect();J=M.e.clientY+C.globals.translateY-K.top-R.ttHeight/2}else C.globals.isBarHorizontal?J-=R.ttHeight:(R.ttHeight/2+J>C.globals.gridHeight&&(J=C.globals.gridHeight-R.ttHeight+C.globals.translateY),J<0&&(J=0));isNaN(G)||(L.style.left=(G+=C.globals.translateX)+"px",L.style.top=J+"px")}},{key:"moveMarkers",value:function(d,p){var y=this.w,C=this.ttCtx;if(y.globals.markers.size[d]>0)for(var M=y.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(d,"'] .apexcharts-marker")),L=0;L<M.length;L++)parseInt(M[L].getAttribute("rel"),10)===p&&(C.marker.resetPointsSize(),C.marker.enlargeCurrentPoint(p,M[L]));else C.marker.resetPointsSize(),this.moveDynamicPointOnHover(p,d)}},{key:"moveDynamicPointOnHover",value:function(d,p){var y,C,M=this.w,L=this.ttCtx,R=M.globals.pointsArray,H=L.tooltipUtil.getHoverMarkerSize(p),G=M.config.series[p].type;if(!G||"column"!==G&&"candlestick"!==G&&"boxPlot"!==G){y=R[p][d][0],C=R[p][d][1]?R[p][d][1]:0;var J=M.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(p,"'] .apexcharts-series-markers circle"));J&&C<M.globals.gridHeight&&C>0&&(J.setAttribute("r",H),J.setAttribute("cx",y),J.setAttribute("cy",C)),this.moveXCrosshairs(y),L.fixedTooltip||this.moveTooltip(y,C,H)}}},{key:"moveDynamicPointsOnHover",value:function(d){var p,y=this.ttCtx,C=y.w,M=0,L=0,R=C.globals.pointsArray;p=new On(this.ctx).getActiveConfigSeriesIndex(!0);var H=y.tooltipUtil.getHoverMarkerSize(p);R[p]&&(M=R[p][d][0],L=R[p][d][1]);var G=y.tooltipUtil.getAllMarkers();if(null!==G)for(var J=0;J<C.globals.series.length;J++){var te=R[J];if(C.globals.comboCharts&&void 0===te&&G.splice(J,0,null),te&&te.length){var K=R[J][d][1];G[J].setAttribute("cx",M),null!==K&&!isNaN(K)&&K<C.globals.gridHeight&&K>0?(G[J]&&G[J].setAttribute("r",H),G[J]&&G[J].setAttribute("cy",K)):G[J]&&G[J].setAttribute("r",0)}}this.moveXCrosshairs(M),y.fixedTooltip||this.moveTooltip(M,L||C.globals.gridHeight,H)}},{key:"moveStickyTooltipOverBars",value:function(d){var p=this.w,y=this.ttCtx,C=p.globals.columnSeries?p.globals.columnSeries.length:p.globals.series.length,M=C>=2&&C%2==0?Math.floor(C/2):Math.floor(C/2)+1;p.globals.isBarHorizontal&&(M=new On(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var L=p.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(M,"'] path[j='").concat(d,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(M,"'] path[j='").concat(d,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(M,"'] path[j='").concat(d,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(M,"'] path[j='").concat(d,"']")),R=L?parseFloat(L.getAttribute("cx")):0,H=L?parseFloat(L.getAttribute("cy")):0,G=L?parseFloat(L.getAttribute("barWidth")):0,J=L?parseFloat(L.getAttribute("barHeight")):0,te=y.getElGrid().getBoundingClientRect();p.globals.isXNumeric?(R-=C%2!=0?G/2:0,L&&(L.classList.contains("apexcharts-candlestick-area")||L.classList.contains("apexcharts-boxPlot-area"))&&p.globals.comboCharts&&(R-=G/2)):p.globals.isBarHorizontal||(R=y.xAxisTicksPositions[d-1]+y.dataPointsDividedWidth/2,isNaN(R)&&(R=y.xAxisTicksPositions[d]-y.dataPointsDividedWidth/2)),p.globals.isBarHorizontal?H+=J/3:H=y.e.clientY-te.top-y.tooltipRect.ttHeight/2,p.globals.isBarHorizontal||this.moveXCrosshairs(R),y.fixedTooltip||this.moveTooltip(R,H||p.globals.gridHeight)}}]),ve}(),Zo=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ttCtx=d,this.ctx=d.ctx,this.tooltipPosition=new br(d)}return gt(ve,[{key:"drawDynamicPoints",value:function(){var d=this.w,p=new Mt(this.ctx),y=new $t(this.ctx),C=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series");C=zt(C),d.config.chart.stacked&&C.sort(function(te,K){return parseFloat(te.getAttribute("data:realIndex"))-parseFloat(K.getAttribute("data:realIndex"))});for(var M=0;M<C.length;M++){var L=C[M].querySelector(".apexcharts-series-markers-wrap");if(null!==L){var R=void 0,H="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==d.config.chart.type&&"area"!==d.config.chart.type||d.globals.comboCharts||d.config.tooltip.intersect||(H+=" no-pointer-events");var G=y.getMarkerConfig(H,M);(R=p.drawMarker(0,0,G)).node.setAttribute("default-marker-size",0);var J=document.createElementNS(d.globals.SVGNS,"g");J.classList.add("apexcharts-series-markers"),J.appendChild(R.node),L.appendChild(J)}}}},{key:"enlargeCurrentPoint",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,M=this.w;"bubble"!==M.config.chart.type&&this.newPointSize(d,p);var L=p.getAttribute("cx"),R=p.getAttribute("cy");if(null!==y&&null!==C&&(L=y,R=C),this.tooltipPosition.moveXCrosshairs(L),!this.fixedTooltip){if("radar"===M.config.chart.type){var H=this.ttCtx.getElGrid(),G=H.getBoundingClientRect();L=this.ttCtx.e.clientX-G.left}this.tooltipPosition.moveTooltip(L,R,M.config.markers.hover.size)}}},{key:"enlargePoints",value:function(d){for(var p=this.w,y=this,C=this.ttCtx,M=d,L=p.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),R=p.config.markers.hover.size,H=0;H<L.length;H++){var G=L[H].getAttribute("rel"),J=L[H].getAttribute("index");if(void 0===R&&(R=p.globals.markers.size[J]+p.config.markers.hover.sizeOffset),M===parseInt(G,10)){y.newPointSize(M,L[H]);var te=L[H].getAttribute("cx"),K=L[H].getAttribute("cy");y.tooltipPosition.moveXCrosshairs(te),C.fixedTooltip||y.tooltipPosition.moveTooltip(te,K,R)}else y.oldPointSize(L[H])}}},{key:"newPointSize",value:function(d,p){var y=this.w,C=y.config.markers.hover.size,M=0===d?p.parentNode.firstChild:p.parentNode.lastChild;if("0"!==M.getAttribute("default-marker-size")){var L=parseInt(M.getAttribute("index"),10);void 0===C&&(C=y.globals.markers.size[L]+y.config.markers.hover.sizeOffset),C<0&&(C=0),M.setAttribute("r",C)}}},{key:"oldPointSize",value:function(d){var p=parseFloat(d.getAttribute("default-marker-size"));d.setAttribute("r",p)}},{key:"resetPointsSize",value:function(){for(var d=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),p=0;p<d.length;p++){var y=parseFloat(d[p].getAttribute("default-marker-size"));Qe.isNumber(y)&&y>=0?d[p].setAttribute("r",y):d[p].setAttribute("r",0)}}}]),ve}(),cc=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ttCtx=d}return gt(ve,[{key:"getAttr",value:function(d,p){return parseFloat(d.target.getAttribute(p))}},{key:"handleHeatTreeTooltip",value:function(d){var p=d.e,y=d.opt,C=d.x,M=d.y,R=this.ttCtx,H=this.w;if(p.target.classList.contains("apexcharts-".concat(d.type,"-rect"))){var G=this.getAttr(p,"i"),J=this.getAttr(p,"j"),te=this.getAttr(p,"cx"),K=this.getAttr(p,"cy"),ae=this.getAttr(p,"width"),pe=this.getAttr(p,"height");if(R.tooltipLabels.drawSeriesTexts({ttItems:y.ttItems,i:G,j:J,shared:!1,e:p}),H.globals.capturedSeriesIndex=G,H.globals.capturedDataPointIndex=J,C=te+R.tooltipRect.ttWidth/2+ae,M=K+R.tooltipRect.ttHeight/2-pe/2,R.tooltipPosition.moveXCrosshairs(te+ae/2),C>H.globals.gridWidth/2&&(C=te-R.tooltipRect.ttWidth/2+ae),R.w.config.tooltip.followCursor){var ge=H.globals.dom.elWrap.getBoundingClientRect();C=H.globals.clientX-ge.left-R.tooltipRect.ttWidth/2,M=H.globals.clientY-ge.top-R.tooltipRect.ttHeight-5}}return{x:C,y:M}}},{key:"handleMarkerTooltip",value:function(d){var p,y,C=d.e,M=d.opt,L=d.x,R=d.y,H=this.w,G=this.ttCtx;if(C.target.classList.contains("apexcharts-marker")){var J=parseInt(M.paths.getAttribute("cx"),10),te=parseInt(M.paths.getAttribute("cy"),10),K=parseFloat(M.paths.getAttribute("val"));if(y=parseInt(M.paths.getAttribute("rel"),10),p=parseInt(M.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,G.intersect){var ae=Qe.findAncestor(M.paths,"apexcharts-series");ae&&(p=parseInt(ae.getAttribute("data:realIndex"),10))}if(G.tooltipLabels.drawSeriesTexts({ttItems:M.ttItems,i:p,j:y,shared:!G.showOnIntersect&&H.config.tooltip.shared,e:C}),"mouseup"===C.type&&G.markerClick(C,p,y),H.globals.capturedSeriesIndex=p,H.globals.capturedDataPointIndex=y,L=J,R=te+H.globals.translateY-1.4*G.tooltipRect.ttHeight,G.w.config.tooltip.followCursor){var pe=G.getElGrid().getBoundingClientRect();R=G.e.clientY+H.globals.translateY-pe.top}K<0&&(R=te),G.marker.enlargeCurrentPoint(y,M.paths,L,R)}return{x:L,y:R}}},{key:"handleBarTooltip",value:function(d){var p,y,C=d.e,M=d.opt,L=this.w,R=this.ttCtx,H=R.getElTooltip(),G=0,J=0,te=0,K=this.getBarTooltipXY({e:C,opt:M}),ae=K.barHeight,pe=K.j;L.globals.capturedSeriesIndex=p=K.i,L.globals.capturedDataPointIndex=pe,L.globals.isBarHorizontal&&R.tooltipUtil.hasBars()||!L.config.tooltip.shared?(J=K.x,te=K.y,y=Array.isArray(L.config.stroke.width)?L.config.stroke.width[p]:L.config.stroke.width,G=J):L.globals.comboCharts||L.config.tooltip.shared||(G/=2),isNaN(te)?te=L.globals.svgHeight-R.tooltipRect.ttHeight:te<0&&(te=0);var ge=parseInt(M.paths.parentNode.getAttribute("data:realIndex"),10),xe=L.globals.isMultipleYAxis?L.config.yaxis[ge]&&L.config.yaxis[ge].reversed:L.config.yaxis[0].reversed;if(J+R.tooltipRect.ttWidth>L.globals.gridWidth&&!xe?J-=R.tooltipRect.ttWidth:J<0&&(J=0),R.w.config.tooltip.followCursor){var Me=R.getElGrid().getBoundingClientRect();te=R.e.clientY-Me.top}null===R.tooltip&&(R.tooltip=L.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),L.config.tooltip.shared||R.tooltipPosition.moveXCrosshairs(L.globals.comboBarCount>0?G+y/2:G),!R.fixedTooltip&&(!L.config.tooltip.shared||L.globals.isBarHorizontal&&R.tooltipUtil.hasBars())&&(xe&&(J-=R.tooltipRect.ttWidth)<0&&(J=0),H.style.left=J+L.globals.translateX+"px",!xe||L.globals.isBarHorizontal&&R.tooltipUtil.hasBars()||(te=te+ae-2*(L.globals.series[p][pe]<0?ae:0)),H.style.top=R.tooltipRect.ttHeight+te>L.globals.gridHeight?(te=L.globals.gridHeight-R.tooltipRect.ttHeight+L.globals.translateY)+"px":te+L.globals.translateY-R.tooltipRect.ttHeight/2+"px")}},{key:"getBarTooltipXY",value:function(d){var p=d.e,y=d.opt,C=this.w,M=null,L=this.ttCtx,R=0,H=0,G=0,J=0,te=0,K=p.target.classList;if(K.contains("apexcharts-bar-area")||K.contains("apexcharts-candlestick-area")||K.contains("apexcharts-boxPlot-area")||K.contains("apexcharts-rangebar-area")){var ae=p.target,pe=ae.getBoundingClientRect(),ge=y.elGrid.getBoundingClientRect(),xe=pe.height;te=pe.height;var Me=pe.width,ze=parseInt(ae.getAttribute("cx"),10),Ke=parseInt(ae.getAttribute("cy"),10);J=parseFloat(ae.getAttribute("barWidth"));var Y="touchmove"===p.type?p.touches[0].clientX:p.clientX;M=parseInt(ae.getAttribute("j"),10),R=parseInt(ae.parentNode.getAttribute("rel"),10)-1;var ne=ae.getAttribute("data-range-y1"),be=ae.getAttribute("data-range-y2");C.globals.comboCharts&&(R=parseInt(ae.parentNode.getAttribute("data:realIndex"),10)),L.tooltipLabels.drawSeriesTexts({ttItems:y.ttItems,i:R,j:M,y1:ne?parseInt(ne,10):null,y2:be?parseInt(be,10):null,shared:!L.showOnIntersect&&C.config.tooltip.shared,e:p}),C.config.tooltip.followCursor?C.globals.isBarHorizontal?(H=Y-ge.left+15,G=Ke-L.dataPointsDividedHeight+xe/2-L.tooltipRect.ttHeight/2):(H=C.globals.isXNumeric?ze-Me/2:ze-L.dataPointsDividedWidth+Me/2,G=p.clientY-ge.top-L.tooltipRect.ttHeight/2-15):C.globals.isBarHorizontal?((H=ze)<L.xyRatios.baseLineInvertedY&&(H=ze-L.tooltipRect.ttWidth),G=Ke-L.dataPointsDividedHeight+xe/2-L.tooltipRect.ttHeight/2):(H=C.globals.isXNumeric?ze-Me/2:ze-L.dataPointsDividedWidth+Me/2,G=Ke)}return{x:H,y:G,barHeight:te,barWidth:J,i:R,j:M}}}]),ve}(),ft=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ttCtx=d}return gt(ve,[{key:"drawXaxisTooltip",value:function(){var d=this.w,p=this.ttCtx,y="bottom"===d.config.xaxis.position;p.xaxisOffY=y?d.globals.gridHeight+1:-d.globals.xAxisHeight-d.config.xaxis.axisTicks.height+3;var C=y?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",M=d.globals.dom.elWrap;p.blxaxisTooltip&&null===d.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(p.xaxisTooltip=document.createElement("div"),p.xaxisTooltip.setAttribute("class",C+" apexcharts-theme-"+d.config.tooltip.theme),M.appendChild(p.xaxisTooltip),p.xaxisTooltipText=document.createElement("div"),p.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),p.xaxisTooltipText.style.fontFamily=d.config.xaxis.tooltip.style.fontFamily||d.config.chart.fontFamily,p.xaxisTooltipText.style.fontSize=d.config.xaxis.tooltip.style.fontSize,p.xaxisTooltip.appendChild(p.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var d=this.w,p=this.ttCtx,y=function(M){var L=d.config.yaxis[M].opposite||d.config.yaxis[M].crosshairs.opposite;p.yaxisOffX=L?d.globals.gridWidth+1:1;var R="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(M,L?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");d.globals.yAxisSameScaleIndices.map(function(G,J){G.map(function(te,K){K===M&&(R+=d.config.yaxis[K].show?" ":" apexcharts-yaxistooltip-hidden")})});var H=d.globals.dom.elWrap;null===d.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(M))&&(p.yaxisTooltip=document.createElement("div"),p.yaxisTooltip.setAttribute("class",R+" apexcharts-theme-"+d.config.tooltip.theme),H.appendChild(p.yaxisTooltip),0===M&&(p.yaxisTooltipText=[]),p.yaxisTooltipText[M]=document.createElement("div"),p.yaxisTooltipText[M].classList.add("apexcharts-yaxistooltip-text"),p.yaxisTooltip.appendChild(p.yaxisTooltipText[M]))},C=0;C<d.config.yaxis.length;C++)y(C)}},{key:"setXCrosshairWidth",value:function(){var d=this.w,p=this.ttCtx,y=p.getElXCrosshairs();if(p.xcrosshairsWidth=parseInt(d.config.xaxis.crosshairs.width,10),d.globals.comboCharts){var C=d.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==C&&"barWidth"===d.config.xaxis.crosshairs.width){var M=parseFloat(C.getAttribute("barWidth"));p.xcrosshairsWidth=M}else"tickWidth"===d.config.xaxis.crosshairs.width&&(p.xcrosshairsWidth=d.globals.gridWidth/d.globals.labels.length)}else if("tickWidth"===d.config.xaxis.crosshairs.width)p.xcrosshairsWidth=d.globals.gridWidth/d.globals.labels.length;else if("barWidth"===d.config.xaxis.crosshairs.width){var H=d.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==H){var G=parseFloat(H.getAttribute("barWidth"));p.xcrosshairsWidth=G}else p.xcrosshairsWidth=1}d.globals.isBarHorizontal&&(p.xcrosshairsWidth=0),null!==y&&p.xcrosshairsWidth>0&&y.setAttribute("width",p.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var d=this.w,p=this.ttCtx;p.ycrosshairs=d.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),p.ycrosshairsHidden=d.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(d,p,y){var C=this.ttCtx,M=this.w,L=M.globals.yLabelFormatters[d];if(C.yaxisTooltips[d]){var R=C.getElGrid().getBoundingClientRect(),J=M.globals.minYArr[d]+(M.globals.maxYArr[d]-M.globals.minYArr[d]-(p-R.top)*y.yRatio[d]);C.tooltipPosition.moveYCrosshairs(p-R.top),C.yaxisTooltipText[d].innerHTML=L(J),C.tooltipPosition.moveYAxisTooltip(d)}}}]),ve}(),dt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.tConfig=p.config.tooltip,this.tooltipUtil=new Vs(this),this.tooltipLabels=new _s(this),this.tooltipPosition=new br(this),this.marker=new Zo(this),this.intersect=new cc(this),this.axesTooltip=new ft(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!p.globals.isBarHorizontal&&this.tConfig.shared}return gt(ve,[{key:"getElTooltip",value:function(d){return d||(d=this),d.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip")}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(d){var p=this.w;this.xyRatios=d,this.blxaxisTooltip=p.config.xaxis.tooltip.enabled&&p.globals.axisCharts,this.yaxisTooltips=p.config.yaxis.map(function(L,R){return!!(L.show&&L.tooltip.enabled&&p.globals.axisCharts)}),this.allTooltipSeriesGroups=[],p.globals.axisCharts||(this.showTooltipTitle=!1);var y=document.createElement("div");if(y.classList.add("apexcharts-tooltip"),y.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),p.globals.dom.elWrap.appendChild(y),p.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var C=new Or(this.ctx);this.xAxisTicksPositions=C.getXAxisTicksPositions()}if(!p.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==p.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==p.config.markers.size&&0!==p.globals.markers.largestSize||this.marker.drawDynamicPoints(this),p.globals.collapsedSeries.length!==p.globals.series.length){this.dataPointsDividedHeight=p.globals.gridHeight/p.globals.dataPoints,this.dataPointsDividedWidth=p.globals.gridWidth/p.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||p.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,y.appendChild(this.tooltipTitle));var M=p.globals.series.length;(p.globals.xyCharts||p.globals.comboCharts)&&this.tConfig.shared&&(M=this.showOnIntersect?1:p.globals.series.length),this.legendLabels=p.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(M),this.addSVGEvents()}}},{key:"createTTElements",value:function(d){for(var p=this,y=this.w,C=[],M=this.getElTooltip(),L=function(H){var G=document.createElement("div");G.classList.add("apexcharts-tooltip-series-group"),G.style.order=y.config.tooltip.inverseOrder?d-H:H+1,p.tConfig.shared&&p.tConfig.enabledOnSeries&&Array.isArray(p.tConfig.enabledOnSeries)&&p.tConfig.enabledOnSeries.indexOf(H)<0&&G.classList.add("apexcharts-tooltip-series-group-hidden");var J=document.createElement("span");J.classList.add("apexcharts-tooltip-marker"),J.style.backgroundColor=y.globals.colors[H],G.appendChild(J);var te=document.createElement("div");te.classList.add("apexcharts-tooltip-text"),te.style.fontFamily=p.tConfig.style.fontFamily||y.config.chart.fontFamily,te.style.fontSize=p.tConfig.style.fontSize,["y","goals","z"].forEach(function(K){var ae=document.createElement("div");ae.classList.add("apexcharts-tooltip-".concat(K,"-group"));var pe=document.createElement("span");pe.classList.add("apexcharts-tooltip-text-".concat(K,"-label")),ae.appendChild(pe);var ge=document.createElement("span");ge.classList.add("apexcharts-tooltip-text-".concat(K,"-value")),ae.appendChild(ge),te.appendChild(ae)}),G.appendChild(te),M.appendChild(G),C.push(G)},R=0;R<d;R++)L(R);return C}},{key:"addSVGEvents",value:function(){var d=this.w,p=d.config.chart.type,y=this.getElTooltip(),C=!("bar"!==p&&"candlestick"!==p&&"boxPlot"!==p&&"rangeBar"!==p),M="area"===p||"line"===p||"scatter"===p||"bubble"===p||"radar"===p,L=d.globals.dom.Paper.node,R=this.getElGrid();R&&(this.seriesBound=R.getBoundingClientRect());var H,G=[],J=[],te={hoverArea:L,elGrid:R,tooltipEl:y,tooltipY:G,tooltipX:J,ttItems:this.ttItems};if(d.globals.axisCharts&&(M?H=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):C?H=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==p&&"treemap"!==p||(H=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),H&&H.length))for(var K=0;K<H.length;K++)G.push(H[K].getAttribute("cy")),J.push(H[K].getAttribute("cx"));if(d.globals.xyCharts&&!this.showOnIntersect||d.globals.comboCharts&&!this.showOnIntersect||C&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([L],te);else if(C&&!d.globals.comboCharts||M&&this.showOnIntersect)this.addDatapointEventsListeners(te);else if(!d.globals.axisCharts||"heatmap"===p||"treemap"===p){var ae=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(ae,te)}if(this.showOnIntersect){var pe=d.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");pe.length>0&&this.addPathsEventListeners(pe,te),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(te)}}},{key:"drawFixedTooltipRect",value:function(){var d=this.w,p=this.getElTooltip(),y=p.getBoundingClientRect(),C=y.width+10,M=y.height+10,L=this.tConfig.fixed.offsetX,R=this.tConfig.fixed.offsetY,H=this.tConfig.fixed.position.toLowerCase();return H.indexOf("right")>-1&&(L=L+d.globals.svgWidth-C+10),H.indexOf("bottom")>-1&&(R=R+d.globals.svgHeight-M-10),p.style.left=L+"px",p.style.top=R+"px",{x:L,y:R,ttWidth:C,ttHeight:M}}},{key:"addDatapointEventsListeners",value:function(d){var p=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(p,d)}},{key:"addPathsEventListeners",value:function(d,p){for(var y=this,C=function(L){var R={paths:d[L],tooltipEl:p.tooltipEl,tooltipY:p.tooltipY,tooltipX:p.tooltipX,elGrid:p.elGrid,hoverArea:p.hoverArea,ttItems:p.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(H){return d[L].addEventListener(H,y.seriesHover.bind(y,R),{capture:!1,passive:!0})})},M=0;M<d.length;M++)C(M)}},{key:"seriesHover",value:function(d,p){var y=this,C=[],M=this.w;M.config.chart.group&&(C=this.ctx.getGroupedCharts()),M.globals.axisCharts&&(M.globals.minX===-1/0&&M.globals.maxX===1/0||0===M.globals.dataPoints)||(C.length?C.forEach(function(L){var R=y.getElTooltip(L);L.w.globals.minX===y.w.globals.minX&&L.w.globals.maxX===y.w.globals.maxX&&L.w.globals.tooltip.seriesHoverByContext({chartCtx:L,ttCtx:L.w.globals.tooltip,opt:{paths:d.paths,tooltipEl:R,tooltipY:d.tooltipY,tooltipX:d.tooltipX,elGrid:d.elGrid,hoverArea:d.hoverArea,ttItems:L.w.globals.tooltip.ttItems},e:p})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:d,e:p}))}},{key:"seriesHoverByContext",value:function(d){var p=d.chartCtx,y=d.ttCtx,C=d.opt,M=d.e,L=p.w,R=this.getElTooltip();y.tooltipRect={x:0,y:0,ttWidth:R.getBoundingClientRect().width,ttHeight:R.getBoundingClientRect().height},y.e=M,!y.tooltipUtil.hasBars()||L.globals.comboCharts||y.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new On(p).toggleSeriesOnHover(M,M.target.parentNode),y.fixedTooltip&&y.drawFixedTooltipRect(),L.globals.axisCharts?y.axisChartsTooltips({e:M,opt:C,tooltipRect:y.tooltipRect}):y.nonAxisChartsTooltips({e:M,opt:C,tooltipRect:y.tooltipRect})}},{key:"axisChartsTooltips",value:function(d){var p,y,C=d.e,M=d.opt,L=this.w,R=M.elGrid.getBoundingClientRect(),H="touchmove"===C.type?C.touches[0].clientX:C.clientX,G="touchmove"===C.type?C.touches[0].clientY:C.clientY;if(this.clientY=G,this.clientX=H,L.globals.capturedSeriesIndex=-1,L.globals.capturedDataPointIndex=-1,G<R.top||G>R.top+R.height)this.handleMouseOut(M);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!L.config.tooltip.shared){var J=parseInt(M.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(J)<0)return void this.handleMouseOut(M)}var te=this.getElTooltip(),K=this.getElXCrosshairs(),ae=L.globals.xyCharts||"bar"===L.config.chart.type&&!L.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||L.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===C.type||"touchmove"===C.type||"mouseup"===C.type){null!==K&&K.classList.add("apexcharts-active");var pe=this.yaxisTooltips.filter(function(Me){return!0===Me});if(null!==this.ycrosshairs&&pe.length&&this.ycrosshairs.classList.add("apexcharts-active"),ae&&!this.showOnIntersect)this.handleStickyTooltip(C,H,G,M);else if("heatmap"===L.config.chart.type||"treemap"===L.config.chart.type){var ge=this.intersect.handleHeatTreeTooltip({e:C,opt:M,x:p,y,type:L.config.chart.type});y=ge.y,te.style.left=(p=ge.x)+"px",te.style.top=y+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:C,opt:M}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:C,opt:M,x:p,y});if(this.yaxisTooltips.length)for(var xe=0;xe<L.config.yaxis.length;xe++)this.axesTooltip.drawYaxisTooltipText(xe,G,this.xyRatios);M.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==C.type&&"touchend"!==C.type||this.handleMouseOut(M)}}},{key:"nonAxisChartsTooltips",value:function(d){var p=d.e,y=d.opt,C=d.tooltipRect,M=this.w,L=y.paths.getAttribute("rel"),R=this.getElTooltip(),H=M.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===p.type||"touchmove"===p.type){R.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:y.ttItems,i:parseInt(L,10)-1,shared:!1});var J=M.globals.clientY-H.top-C.ttHeight-10;if(R.style.left=M.globals.clientX-H.left-C.ttWidth/2+"px",R.style.top=J+"px",M.config.legend.tooltipHoverFormatter){var te=L-1,K=(0,M.config.legend.tooltipHoverFormatter)(this.legendLabels[te].getAttribute("data:default-text"),{seriesIndex:te,dataPointIndex:te,w:M});this.legendLabels[te].innerHTML=K}}else"mouseout"!==p.type&&"touchend"!==p.type||(R.classList.remove("apexcharts-active"),M.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(ae){var pe=ae.getAttribute("data:default-text");ae.innerHTML=decodeURIComponent(pe)}))}},{key:"handleStickyTooltip",value:function(d,p,y,C){var M=this.w,L=this.tooltipUtil.getNearestValues({context:this,hoverArea:C.hoverArea,elGrid:C.elGrid,clientX:p,clientY:y}),R=L.j,H=L.capturedSeries;L.hoverX<0||L.hoverX>M.globals.gridWidth?this.handleMouseOut(C):null!==H?this.handleStickyCapturedSeries(d,H,C,R):(this.tooltipUtil.isXoverlap(R)||M.globals.isBarHorizontal)&&this.create(d,this,0,R,C.ttItems)}},{key:"handleStickyCapturedSeries",value:function(d,p,y,C){var M=this.w;null===M.globals.series[p][C]?this.handleMouseOut(y):void 0!==M.globals.series[p][C]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(C)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(d,this,p,C,y.ttItems):this.create(d,this,p,C,y.ttItems,!1):this.tooltipUtil.isXoverlap(C)&&this.create(d,this,0,C,y.ttItems)}},{key:"deactivateHoverFilter",value:function(){for(var d=this.w,p=new Mt(this.ctx),y=d.globals.dom.Paper.select(".apexcharts-bar-area"),C=0;C<y.length;C++)p.pathMouseLeave(y[C])}},{key:"handleMouseOut",value:function(d){var p=this.w,y=this.getElXCrosshairs();if(d.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==p.config.chart.type&&this.marker.resetPointsSize(),null!==y&&y.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.blxaxisTooltip&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=p.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var C=0;C<this.yaxisTTEls.length;C++)this.yaxisTTEls[C].classList.remove("apexcharts-active")}p.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(M){var L=M.getAttribute("data:default-text");M.innerHTML=decodeURIComponent(L)})}},{key:"markerClick",value:function(d,p,y){var C=this.w;"function"==typeof C.config.chart.events.markerClick&&C.config.chart.events.markerClick(d,this.ctx,{seriesIndex:p,dataPointIndex:y,w:C}),this.ctx.events.fireEvent("markerClick",[d,this.ctx,{seriesIndex:p,dataPointIndex:y,w:C}])}},{key:"create",value:function(d,p,y,C,M){var L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,R=this.w,H=p;"mouseup"===d.type&&this.markerClick(d,y,C),null===L&&(L=this.tConfig.shared);var G=this.tooltipUtil.hasMarkers(),J=this.tooltipUtil.getElBars();if(R.config.legend.tooltipHoverFormatter){var te=R.config.legend.tooltipHoverFormatter,K=Array.from(this.legendLabels);K.forEach(function(ne){var be=ne.getAttribute("data:default-text");ne.innerHTML=decodeURIComponent(be)});for(var ae=0;ae<K.length;ae++){var pe=K[ae],ge=parseInt(pe.getAttribute("i"),10),xe=decodeURIComponent(pe.getAttribute("data:default-text")),Me=te(xe,{seriesIndex:L?ge:y,dataPointIndex:C,w:R});if(L)pe.innerHTML=R.globals.collapsedSeriesIndices.indexOf(ge)<0?Me:xe;else if(pe.innerHTML=ge===y?Me:xe,y===ge)break}}if(L){if(H.tooltipLabels.drawSeriesTexts({ttItems:M,i:y,j:C,shared:!this.showOnIntersect&&this.tConfig.shared}),G&&(R.globals.markers.largestSize>0?H.marker.enlargePoints(C):H.tooltipPosition.moveDynamicPointsOnHover(C)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(J),this.barSeriesHeight>0)){var ze=new Mt(this.ctx),Ke=R.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(C,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(C);for(var Y=0;Y<Ke.length;Y++)ze.pathMouseEnter(Ke[Y])}}else H.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:M,i:y,j:C}),this.tooltipUtil.hasBars()&&H.tooltipPosition.moveStickyTooltipOverBars(C),G&&H.tooltipPosition.moveMarkers(y,C)}}]),ve}(),Tt=function(ve){Ge(p,mi);var d=Ct(p);function p(){return Ee(this,p),d.apply(this,arguments)}return gt(p,[{key:"draw",value:function(y,C){var M=this,L=this.w;this.graphics=new Mt(this.ctx),this.bar=new mi(this.ctx,this.xyRatios);var R=new Vn(this.ctx,L);y=R.getLogSeries(y),this.yRatio=R.getLogYRatios(this.yRatio),this.barHelpers.initVariables(y),"100%"===L.config.chart.stackType&&(y=L.globals.seriesPercent.slice()),this.series=y,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var H=0;H<y.length;H++)y[H].length>0&&(this.totalItems+=y[H].length);for(var G=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),J=0,te=0,K=function(ge,xe){var Me=void 0,ze=void 0,Ke=void 0,Y=void 0,ne=[],be=[],Ie=L.globals.comboCharts?C[ge]:ge;M.yRatio.length>1&&(M.yaxisIndex=Ie),M.isReversed=L.config.yaxis[M.yaxisIndex]&&L.config.yaxis[M.yaxisIndex].reversed;var Je=M.graphics.group({class:"apexcharts-series",seriesName:Qe.escapeString(L.globals.seriesNames[Ie]),rel:ge+1,"data:realIndex":Ie});M.ctx.series.addCollapsedClassToSeries(Je,Ie);var Nt=M.graphics.group({class:"apexcharts-datalabels","data:realIndex":Ie}),St=0,Xt=0,gn=M.initialPositions(J,te,Me,ze,Ke,Y);te=gn.y,St=gn.barHeight,ze=gn.yDivision,Y=gn.zeroW,J=gn.x,Xt=gn.barWidth,Me=gn.xDivision,Ke=gn.zeroH,M.yArrj=[],M.yArrjF=[],M.yArrjVal=[],M.xArrj=[],M.xArrjF=[],M.xArrjVal=[],1===M.prevY.length&&M.prevY[0].every(function(rr){return isNaN(rr)})&&(M.prevY[0]=M.prevY[0].map(function(rr){return Ke}),M.prevYF[0]=M.prevYF[0].map(function(rr){return 0}));for(var hn=0;hn<L.globals.dataPoints;hn++){var Kn=M.barHelpers.getStrokeWidth(ge,hn,Ie),Ni={indexes:{i:ge,j:hn,realIndex:Ie,bc:xe},strokeWidth:Kn,x:J,y:te,elSeries:Je},Nn=null;M.isHorizontal?(Nn=M.drawStackedBarPaths(Be(Be({},Ni),{},{zeroW:Y,barHeight:St,yDivision:ze})),Xt=M.series[ge][hn]/M.invertedYRatio):(Nn=M.drawStackedColumnPaths(Be(Be({},Ni),{},{xDivision:Me,barWidth:Xt,zeroH:Ke})),St=M.series[ge][hn]/M.yRatio[M.yaxisIndex]),te=Nn.y,ne.push(J=Nn.x),be.push(te);var ei=M.barHelpers.getPathFillColor(y,ge,hn,Ie);Je=M.renderSeries({realIndex:Ie,pathFill:ei,j:hn,i:ge,pathFrom:Nn.pathFrom,pathTo:Nn.pathTo,strokeWidth:Kn,elSeries:Je,x:J,y:te,series:y,barHeight:St,barWidth:Xt,elDataLabelsWrap:Nt,type:"bar",visibleSeries:0})}L.globals.seriesXvalues[Ie]=ne,L.globals.seriesYvalues[Ie]=be,M.prevY.push(M.yArrj),M.prevYF.push(M.yArrjF),M.prevYVal.push(M.yArrjVal),M.prevX.push(M.xArrj),M.prevXF.push(M.xArrjF),M.prevXVal.push(M.xArrjVal),G.add(Je)},ae=0,pe=0;ae<y.length;ae++,pe++)K(ae,pe);return G}},{key:"initialPositions",value:function(y,C,M,L,R,H){var G,J,te=this.w;return this.isHorizontal?(G=(G=L=te.globals.gridHeight/te.globals.dataPoints)*parseInt(te.config.plotOptions.bar.barHeight,10)/100,H=this.baseLineInvertedY+te.globals.padHorizontal+(this.isReversed?te.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),C=(L-G)/2):(J=M=te.globals.gridWidth/te.globals.dataPoints,J=te.globals.isXNumeric&&te.globals.dataPoints>1?(M=te.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:J*parseInt(te.config.plotOptions.bar.columnWidth,10)/100,R=this.baseLineY[this.yaxisIndex]+(this.isReversed?te.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),y=te.globals.padHorizontal+(M-J)/2),{x:y,y:C,yDivision:L,xDivision:M,barHeight:G,barWidth:J,zeroH:R,zeroW:H}}},{key:"drawStackedBarPaths",value:function(y){for(var C,G,M=y.indexes,L=y.barHeight,R=y.strokeWidth,H=y.zeroW,J=y.y,te=y.yDivision,K=y.elSeries,ae=this.w,pe=J,ge=M.i,xe=M.j,Me=0,ze=0;ze<this.prevXF.length;ze++)Me+=this.prevXF[ze][xe];if(ge>0){var Ke=H;this.prevXVal[ge-1][xe]<0?Ke=this.series[ge][xe]>=0?this.prevX[ge-1][xe]+Me-2*(this.isReversed?Me:0):this.prevX[ge-1][xe]:this.prevXVal[ge-1][xe]>=0&&(Ke=this.series[ge][xe]>=0?this.prevX[ge-1][xe]:this.prevX[ge-1][xe]-Me+2*(this.isReversed?Me:0)),C=Ke}else C=H;var Y=this.barHelpers.getBarpaths({barYPosition:pe,barHeight:L,x1:C,x2:G=null===this.series[ge][xe]?C:C+this.series[ge][xe]/this.invertedYRatio-2*(this.isReversed?this.series[ge][xe]/this.invertedYRatio:0),strokeWidth:R,series:this.series,realIndex:M.realIndex,i:ge,j:xe,w:ae});return this.barHelpers.barBackground({j:xe,i:ge,y1:pe,y2:L,elSeries:K}),{pathTo:Y.pathTo,pathFrom:Y.pathFrom,x:G,y:J+=te}}},{key:"drawStackedColumnPaths",value:function(y){var L,C=y.indexes,M=y.x,R=y.xDivision,H=y.barWidth,G=y.zeroH,J=y.elSeries,te=this.w,K=C.i,ae=C.j,pe=C.bc;if(te.globals.isXNumeric){var ge=te.globals.seriesX[K][ae];ge||(ge=0),M=(ge-te.globals.minX)/this.xRatio-H/2}for(var xe,Me=M,ze=0,Ke=0;Ke<this.prevYF.length;Ke++)ze+=isNaN(this.prevYF[Ke][ae])?0:this.prevYF[Ke][ae];if(K>0&&!te.globals.isXNumeric||K>0&&te.globals.isXNumeric&&te.globals.seriesX[K-1][ae]===te.globals.seriesX[K][ae]){var Y,ne,be=Math.min(this.yRatio.length+1,K+1);if(void 0!==this.prevY[K-1])for(var Ie=1;Ie<be;Ie++)if(!isNaN(this.prevY[K-Ie][ae])){ne=this.prevY[K-Ie][ae];break}for(var Je=1;Je<be;Je++){if(this.prevYVal[K-Je][ae]<0){Y=this.series[K][ae]>=0?ne-ze+2*(this.isReversed?ze:0):ne;break}if(this.prevYVal[K-Je][ae]>=0){Y=this.series[K][ae]>=0?ne:ne+ze-2*(this.isReversed?ze:0);break}}void 0===Y&&(Y=te.globals.gridHeight),xe=this.prevYF[0].every(function(St){return 0===St})&&this.prevYF.slice(1,K).every(function(St){return St.every(function(Xt){return isNaN(Xt)})})?te.globals.gridHeight-G:Y}else xe=te.globals.gridHeight-G;var Nt=this.barHelpers.getColumnPaths({barXPosition:Me,barWidth:H,y1:xe,y2:L=xe-this.series[K][ae]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[K][ae]/this.yRatio[this.yaxisIndex]:0),yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:C.realIndex,i:K,j:ae,w:te});return this.barHelpers.barBackground({bc:pe,j:ae,i:K,x1:Me,x2:H,elSeries:J}),M+=R,{pathTo:Nt.pathTo,pathFrom:Nt.pathFrom,x:te.globals.isXNumeric?M-R:M,y:L}}}]),p}(),Jt=function(ve){Ge(p,mi);var d=Ct(p);function p(){return Ee(this,p),d.apply(this,arguments)}return gt(p,[{key:"draw",value:function(y,C){var M=this,L=this.w,R=new Mt(this.ctx),H=new Gt(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot;var G=new Vn(this.ctx,L);y=G.getLogSeries(y),this.series=y,this.yRatio=G.getLogYRatios(this.yRatio),this.barHelpers.initVariables(y);for(var J=R.group({class:"apexcharts-".concat(L.config.chart.type,"-series apexcharts-plot-series")}),te=function(ae){M.isBoxPlot="boxPlot"===L.config.chart.type||"boxPlot"===L.config.series[ae].type;var pe,ge,be,Ie,xe=void 0,Me=void 0,ze=[],Ke=[],Y=L.globals.comboCharts?C[ae]:ae,ne=R.group({class:"apexcharts-series",seriesName:Qe.escapeString(L.globals.seriesNames[Y]),rel:ae+1,"data:realIndex":Y});y[ae].length>0&&(M.visibleI=M.visibleI+1),M.yRatio.length>1&&(M.yaxisIndex=Y);var Je=M.barHelpers.initialPositions();Me=Je.y,be=Je.barHeight,pe=Je.xDivision,ge=Je.zeroH,Ke.push((xe=Je.x)+(Ie=Je.barWidth)/2);for(var Nt=R.group({class:"apexcharts-datalabels","data:realIndex":Y}),St=function(gn){var hn=M.barHelpers.getStrokeWidth(ae,gn,Y),Kn=M.drawBoxPaths({indexes:{i:ae,j:gn,realIndex:Y},x:xe,y:Me,xDivision:pe,barWidth:Ie,zeroH:ge,strokeWidth:hn,elSeries:ne});Me=Kn.y,xe=Kn.x,gn>0&&Ke.push(xe+Ie/2),ze.push(Me),Kn.pathTo.forEach(function(Ni,Nn){var ei=!M.isBoxPlot&&M.candlestickOptions.wick.useFillColor?Kn.color[Nn]:L.globals.stroke.colors[ae],rr=H.fillPath({seriesNumber:Y,dataPointIndex:gn,color:Kn.color[Nn],value:y[ae][gn]});M.renderSeries({realIndex:Y,pathFill:rr,lineFill:ei,j:gn,i:ae,pathFrom:Kn.pathFrom,pathTo:Ni,strokeWidth:hn,elSeries:ne,x:xe,y:Me,series:y,barHeight:be,barWidth:Ie,elDataLabelsWrap:Nt,visibleSeries:M.visibleI,type:L.config.chart.type})})},Xt=0;Xt<L.globals.dataPoints;Xt++)St(Xt);L.globals.seriesXvalues[Y]=Ke,L.globals.seriesYvalues[Y]=ze,J.add(ne)},K=0;K<y.length;K++)te(K);return J}},{key:"drawBoxPaths",value:function(y){var C=y.indexes,M=y.x,L=y.xDivision,R=y.barWidth,H=y.zeroH,G=y.strokeWidth,J=this.w,te=new Mt(this.ctx),K=C.i,ae=C.j,pe=!0,ge=J.config.plotOptions.candlestick.colors.upward,xe=J.config.plotOptions.candlestick.colors.downward,Me="";this.isBoxPlot&&(Me=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var ze=this.yRatio[this.yaxisIndex],Ke=C.realIndex,Y=this.getOHLCValue(Ke,ae),ne=H,be=H;Y.o>Y.c&&(pe=!1);var Ie=Math.min(Y.o,Y.c),Je=Math.max(Y.o,Y.c),Nt=Y.m;J.globals.isXNumeric&&(M=(J.globals.seriesX[Ke][ae]-J.globals.minX)/this.xRatio-R/2);var St=M+R*this.visibleI;null==this.series[K][ae]?(Ie=H,Je=H):(Ie=H-Ie/ze,Je=H-Je/ze,ne=H-Y.h/ze,be=H-Y.l/ze,Nt=H-Y.m/ze);var Xt=te.move(St,H),gn=te.move(St+R/2,Ie);return J.globals.previousPaths.length>0&&(gn=this.getPreviousPath(Ke,ae,!0)),Xt=this.isBoxPlot?[te.move(St,Ie)+te.line(St+R/2,Ie)+te.line(St+R/2,ne)+te.line(St+R/4,ne)+te.line(St+R-R/4,ne)+te.line(St+R/2,ne)+te.line(St+R/2,Ie)+te.line(St+R,Ie)+te.line(St+R,Nt)+te.line(St,Nt)+te.line(St,Ie+G/2),te.move(St,Nt)+te.line(St+R,Nt)+te.line(St+R,Je)+te.line(St+R/2,Je)+te.line(St+R/2,be)+te.line(St+R-R/4,be)+te.line(St+R/4,be)+te.line(St+R/2,be)+te.line(St+R/2,Je)+te.line(St,Je)+te.line(St,Nt)+"z"]:[te.move(St,Je)+te.line(St+R/2,Je)+te.line(St+R/2,ne)+te.line(St+R/2,Je)+te.line(St+R,Je)+te.line(St+R,Ie)+te.line(St+R/2,Ie)+te.line(St+R/2,be)+te.line(St+R/2,Ie)+te.line(St,Ie)+te.line(St,Je-G/2)],gn+=te.move(St,Ie),J.globals.isXNumeric||(M+=L),{pathTo:Xt,pathFrom:gn,x:M,y:Je,barXPosition:St,color:this.isBoxPlot?Me:pe?[ge]:[xe]}}},{key:"getOHLCValue",value:function(y,C){var M=this.w;return{o:this.isBoxPlot?M.globals.seriesCandleH[y][C]:M.globals.seriesCandleO[y][C],h:this.isBoxPlot?M.globals.seriesCandleO[y][C]:M.globals.seriesCandleH[y][C],m:M.globals.seriesCandleM[y][C],l:this.isBoxPlot?M.globals.seriesCandleC[y][C]:M.globals.seriesCandleL[y][C],c:this.isBoxPlot?M.globals.seriesCandleL[y][C]:M.globals.seriesCandleC[y][C]}}}]),p}(),Lt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"checkColorRange",value:function(){var d=this.w,p=!1,y=d.config.plotOptions[d.config.chart.type];return y.colorScale.ranges.length>0&&y.colorScale.ranges.map(function(C,M){C.from<=0&&(p=!0)}),p}},{key:"getShadeColor",value:function(d,p,y,C){var M=this.w,L=1,R=M.config.plotOptions[d].shadeIntensity,H=this.determineColor(d,p,y);M.globals.hasNegs||C?L=M.config.plotOptions[d].reverseNegativeShade?H.percent<0?H.percent/100*(1.25*R):1.25*R*(1-H.percent/100):H.percent<=0?1-(1+H.percent/100)*R:(1-H.percent/100)*R:(L=1-H.percent/100,"treemap"===d&&(L=1.25*R*(1-H.percent/100)));var G=H.color,J=new Qe;return M.config.plotOptions[d].enableShades&&(G=Qe.hexToRgba(J.shadeColor("dark"===this.w.config.theme.mode?-1*L:L,H.color),M.config.fill.opacity)),{color:G,colorProps:H}}},{key:"determineColor",value:function(d,p,y){var C=this.w,M=C.globals.series[p][y],L=C.config.plotOptions[d],R=L.colorScale.inverse?y:p;C.config.plotOptions[d].distributed&&(R=y);var H=C.globals.colors[R],G=null,J=Math.min.apply(Math,zt(C.globals.series[p])),te=Math.max.apply(Math,zt(C.globals.series[p]));L.distributed||"heatmap"!==d||(J=C.globals.minY,te=C.globals.maxY),void 0!==L.colorScale.min&&(J=L.colorScale.min<C.globals.minY?L.colorScale.min:C.globals.minY,te=L.colorScale.max>C.globals.maxY?L.colorScale.max:C.globals.maxY);var K=Math.abs(te)+Math.abs(J),ae=100*M/(0===K?K-1e-6:K);return L.colorScale.ranges.length>0&&L.colorScale.ranges.map(function(pe,ge){if(M>=pe.from&&M<=pe.to){H=pe.color,G=pe.foreColor?pe.foreColor:null,J=pe.from,te=pe.to;var xe=Math.abs(te)+Math.abs(J);ae=100*M/(0===xe?xe-1e-6:xe)}}),{color:H,foreColor:G,percent:ae}}},{key:"calculateDataLabels",value:function(d){var p=d.text,y=d.x,C=d.y,M=d.i,L=d.j,R=d.colorProps,H=d.fontSize,G=this.w.config.dataLabels,J=new Mt(this.ctx),te=new fn(this.ctx),K=null;if(G.enabled){K=J.group({class:"apexcharts-data-labels"});var pe=G.offsetY,ge=y+G.offsetX,xe=C+parseFloat(G.style.fontSize)/3+pe;te.plotDataLabelsText({x:ge,y:xe,text:p,i:M,j:L,color:R.foreColor,parent:K,fontSize:H,dataLabelsConfig:G})}return K}},{key:"addListeners",value:function(d){var p=new Mt(this.ctx);d.node.addEventListener("mouseenter",p.pathMouseEnter.bind(this,d)),d.node.addEventListener("mouseleave",p.pathMouseLeave.bind(this,d)),d.node.addEventListener("mousedown",p.pathMouseDown.bind(this,d))}}]),ve}(),Ln=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w,this.xRatio=p.xRatio,this.yRatio=p.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Lt(d),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return gt(ve,[{key:"draw",value:function(d){var p=this.w,y=new Mt(this.ctx),C=y.group({class:"apexcharts-heatmap"});C.attr("clip-path","url(#gridRectMask".concat(p.globals.cuid,")"));var M=p.globals.gridWidth/p.globals.dataPoints,L=p.globals.gridHeight/p.globals.series.length,R=0,H=!1;this.negRange=this.helpers.checkColorRange();var G=d.slice();p.config.yaxis[0].reversed&&(H=!0,G.reverse());for(var J=H?0:G.length-1;H?J<G.length:J>=0;H?J++:J--){var te=y.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:Qe.escapeString(p.globals.seriesNames[J]),rel:J+1,"data:realIndex":J});if(this.ctx.series.addCollapsedClassToSeries(te,J),p.config.chart.dropShadow.enabled){var K=p.config.chart.dropShadow;new dn(this.ctx).dropShadow(te,K,J)}for(var ae=0,pe=p.config.plotOptions.heatmap.shadeIntensity,ge=0;ge<G[J].length;ge++){var xe=this.helpers.getShadeColor(p.config.chart.type,J,ge,this.negRange),Me=xe.color,ze=xe.colorProps;"image"===p.config.fill.type&&(Me=new Gt(this.ctx).fillPath({seriesNumber:J,dataPointIndex:ge,opacity:p.globals.hasNegs?ze.percent<0?1-(1+ze.percent/100):pe+ze.percent/100:ze.percent/100,patternID:Qe.randomId(),width:p.config.fill.image.width?p.config.fill.image.width:M,height:p.config.fill.image.height?p.config.fill.image.height:L}));var Y=y.drawRect(ae,R,M,L,this.rectRadius);if(Y.attr({cx:ae,cy:R}),Y.node.classList.add("apexcharts-heatmap-rect"),te.add(Y),Y.attr({fill:Me,i:J,index:J,j:ge,val:G[J][ge],"stroke-width":this.strokeWidth,stroke:p.config.plotOptions.heatmap.useFillColorAsStroke?Me:p.globals.stroke.colors[0],color:Me}),this.helpers.addListeners(Y),p.config.chart.animations.enabled&&!p.globals.dataChanged){var ne=1;p.globals.resized||(ne=p.config.chart.animations.speed),this.animateHeatMap(Y,ae,R,M,L,ne)}if(p.globals.dataChanged){var be=1;if(this.dynamicAnim.enabled&&p.globals.shouldAnimate){be=this.dynamicAnim.speed;var Ie=p.globals.previousPaths[J]&&p.globals.previousPaths[J][ge]&&p.globals.previousPaths[J][ge].color;Ie||(Ie="rgba(255, 255, 255, 0)"),this.animateHeatColor(Y,Qe.isColorHex(Ie)?Ie:Qe.rgb2hex(Ie),Qe.isColorHex(Me)?Me:Qe.rgb2hex(Me),be)}}var Je=(0,p.config.dataLabels.formatter)(p.globals.series[J][ge],{value:p.globals.series[J][ge],seriesIndex:J,dataPointIndex:ge,w:p}),Nt=this.helpers.calculateDataLabels({text:Je,x:ae+M/2,y:R+L/2,i:J,j:ge,colorProps:ze,series:G});null!==Nt&&te.add(Nt),ae+=M}R+=L,C.add(te)}var St=p.globals.yAxisScale[0].result.slice();return p.config.yaxis[0].reversed?St.unshift(""):St.push(""),p.globals.yAxisScale[0].result=St,p.config.yaxis[0].labels.offsetY=-p.globals.gridHeight/p.globals.series.length/2,C}},{key:"animateHeatMap",value:function(d,p,y,C,M,L){var R=new Rn(this.ctx);R.animateRect(d,{x:p+C/2,y:y+M/2,width:0,height:0},{x:p,y,width:C,height:M},L,function(){R.animationCompleted(d)})}},{key:"animateHeatColor",value:function(d,p,y,C){d.attr({fill:p}).animate(C).attr({fill:y})}}]),ve}(),di=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"drawYAxisTexts",value:function(d,p,y,C){var M=this.w,L=M.config.yaxis[0],R=M.globals.yLabelFormatters[0];return new Mt(this.ctx).drawText({x:d+L.labels.offsetX,y:p+L.labels.offsetY,text:R(C,y),textAnchor:"middle",fontSize:L.labels.style.fontSize,fontFamily:L.labels.style.fontFamily,foreColor:Array.isArray(L.labels.style.colors)?L.labels.style.colors[y]:L.labels.style.colors})}}]),ve}(),Oi=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==p.globals.stroke.colors?p.globals.stroke.colors:p.globals.colors,this.defaultSize=Math.min(p.globals.gridWidth,p.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=p.globals.gridWidth/2,this.fullAngle="radialBar"===p.config.chart.type?360:Math.abs(p.config.plotOptions.pie.endAngle-p.config.plotOptions.pie.startAngle),this.initialAngle=p.config.plotOptions.pie.startAngle%this.fullAngle,p.globals.radialSize=this.defaultSize/2.05-p.config.stroke.width-(p.config.chart.sparkline.enabled?0:p.config.chart.dropShadow.blur),this.donutSize=p.globals.radialSize*parseInt(p.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return gt(ve,[{key:"draw",value:function(d){var p=this,y=this.w,C=new Mt(this.ctx);if(this.ret=C.group({class:"apexcharts-pie"}),y.globals.noData)return this.ret;for(var M=0,L=0;L<d.length;L++)M+=Qe.negToZero(d[L]);var R=[],H=C.group();0===M&&(M=1e-5),d.forEach(function(Ie){p.maxY=Math.max(p.maxY,Ie)}),y.config.yaxis[0].max&&(this.maxY=y.config.yaxis[0].max),"back"===y.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var G=0;G<d.length;G++){var J=this.fullAngle*Qe.negToZero(d[G])/M;R.push(J),"polarArea"===this.chartType?(R[G]=this.fullAngle/d.length,this.sliceSizes.push(y.globals.radialSize*d[G]/this.maxY)):this.sliceSizes.push(y.globals.radialSize)}if(y.globals.dataChanged){for(var te,K=0,ae=0;ae<y.globals.previousPaths.length;ae++)K+=Qe.negToZero(y.globals.previousPaths[ae]);for(var pe=0;pe<y.globals.previousPaths.length;pe++)te=this.fullAngle*Qe.negToZero(y.globals.previousPaths[pe])/K,this.prevSectorAngleArr.push(te)}this.donutSize<0&&(this.donutSize=0);var ge=y.config.plotOptions.pie.customScale,ze=y.globals.gridWidth/2-y.globals.gridWidth/2*ge,Ke=y.globals.gridHeight/2-y.globals.gridHeight/2*ge;if("donut"===this.chartType){var Y=C.drawCircle(this.donutSize);Y.attr({cx:this.centerX,cy:this.centerY,fill:y.config.plotOptions.pie.donut.background?y.config.plotOptions.pie.donut.background:"transparent"}),H.add(Y)}var ne=this.drawArcs(R,d);if(this.sliceLabels.forEach(function(Ie){ne.add(Ie)}),H.attr({transform:"translate(".concat(ze,", ").concat(Ke,") scale(").concat(ge,")")}),H.add(ne),this.ret.add(H),this.donutDataLabels.show){var be=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:ze,translateY:Ke});this.ret.add(be)}return"front"===y.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(d,p){var y=this.w,C=new dn(this.ctx),M=new Mt(this.ctx),L=new Gt(this.ctx),R=M.group({class:"apexcharts-slices"}),H=this.initialAngle,G=this.initialAngle,J=this.initialAngle,te=this.initialAngle;this.strokeWidth=y.config.stroke.show?y.config.stroke.width:0;for(var K=0;K<d.length;K++){var ae=M.group({class:"apexcharts-series apexcharts-pie-series",seriesName:Qe.escapeString(y.globals.seriesNames[K]),rel:K+1,"data:realIndex":K});R.add(ae),J=(H=J)+d[K],te=(G=te)+this.prevSectorAngleArr[K];var pe=J<H?this.fullAngle+J-H:J-H,ge=L.fillPath({seriesNumber:K,size:this.sliceSizes[K],value:p[K]}),xe=this.getChangedPath(G,te),Me=M.drawPath({d:xe,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[K]:this.lineColorArr,strokeWidth:0,fill:ge,fillOpacity:y.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(K)});Me.attr({index:0,j:K}),C.setSelectionFilter(Me,0,K),y.config.chart.dropShadow.enabled&&C.dropShadow(Me,y.config.chart.dropShadow,K),this.addListeners(Me,this.donutDataLabels),Mt.setAttrs(Me.node,{"data:angle":pe,"data:startAngle":H,"data:strokeWidth":this.strokeWidth,"data:value":p[K]});var Ke={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?Ke=Qe.polarToCartesian(this.centerX,this.centerY,y.globals.radialSize/1.25+y.config.plotOptions.pie.dataLabels.offset,(H+pe/2)%this.fullAngle):"donut"===this.chartType&&(Ke=Qe.polarToCartesian(this.centerX,this.centerY,(y.globals.radialSize+this.donutSize)/2+y.config.plotOptions.pie.dataLabels.offset,(H+pe/2)%this.fullAngle)),ae.add(Me);var Y=0;if(!this.initialAnim||y.globals.resized||y.globals.dataChanged?this.animBeginArr.push(0):(0==(Y=pe/this.fullAngle*y.config.chart.animations.speed)&&(Y=1),this.animDur=Y+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(Me,this.dynamicAnim&&y.globals.dataChanged?{size:this.sliceSizes[K],endAngle:J,startAngle:H,prevStartAngle:G,prevEndAngle:te,animateStartingPos:!0,i:K,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:y.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[K],endAngle:J,startAngle:H,i:K,totalItems:d.length-1,animBeginArr:this.animBeginArr,dur:Y}),y.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&Me.click(this.pieClicked.bind(this,K)),void 0!==y.globals.selectedDataPoints[0]&&y.globals.selectedDataPoints[0].indexOf(K)>-1&&this.pieClicked(K),y.config.dataLabels.enabled){var ne=Ke.x,be=Ke.y,Ie=100*pe/this.fullAngle+"%";if(0!==pe&&y.config.plotOptions.pie.dataLabels.minAngleToShowLabel<d[K]){var Je=y.config.dataLabels.formatter;void 0!==Je&&(Ie=Je(y.globals.seriesPercent[K][0],{seriesIndex:K,w:y}));var Nt=y.globals.dataLabels.style.colors[K],St=M.group({class:"apexcharts-datalabels"}),Xt=M.drawText({x:ne,y:be,text:Ie,textAnchor:"middle",fontSize:y.config.dataLabels.style.fontSize,fontFamily:y.config.dataLabels.style.fontFamily,fontWeight:y.config.dataLabels.style.fontWeight,foreColor:Nt});St.add(Xt),y.config.dataLabels.dropShadow.enabled&&C.dropShadow(Xt,y.config.dataLabels.dropShadow),Xt.node.classList.add("apexcharts-pie-label"),y.config.chart.animations.animate&&!1===y.globals.resized&&(Xt.node.classList.add("apexcharts-pie-label-delay"),Xt.node.style.animationDelay=y.config.chart.animations.speed/940+"s"),this.sliceLabels.push(St)}}}return R}},{key:"addListeners",value:function(d,p){var y=new Mt(this.ctx);d.node.addEventListener("mouseenter",y.pathMouseEnter.bind(this,d)),d.node.addEventListener("mouseleave",y.pathMouseLeave.bind(this,d)),d.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,d.node,p)),d.node.addEventListener("mousedown",y.pathMouseDown.bind(this,d)),this.donutDataLabels.total.showAlways||(d.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,d.node,p)),d.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,d.node,p)))}},{key:"animatePaths",value:function(d,p){var C=p.endAngle<p.startAngle?this.fullAngle+p.endAngle-p.startAngle:p.endAngle-p.startAngle,M=C,L=p.startAngle,R=p.startAngle;void 0!==p.prevStartAngle&&void 0!==p.prevEndAngle&&(L=p.prevEndAngle,M=p.prevEndAngle<p.prevStartAngle?this.fullAngle+p.prevEndAngle-p.prevStartAngle:p.prevEndAngle-p.prevStartAngle),p.i===this.w.config.series.length-1&&(C+R>this.fullAngle?p.endAngle=p.endAngle-(C+R):C+R<this.fullAngle&&(p.endAngle=p.endAngle+(this.fullAngle-(C+R)))),C===this.fullAngle&&(C=this.fullAngle-.01),this.animateArc(d,L,R,C,M,p)}},{key:"animateArc",value:function(d,p,y,C,M,L){var R,H=this,G=this.w,J=new Rn(this.ctx),te=L.size;(isNaN(p)||isNaN(M))&&(p=y,M=C,L.dur=0);var K=C,ae=y,pe=p<y?this.fullAngle+p-y:p-y;G.globals.dataChanged&&L.shouldSetPrevPaths&&L.prevEndAngle&&(R=H.getPiePath({me:H,startAngle:L.prevStartAngle,angle:L.prevEndAngle<L.prevStartAngle?this.fullAngle+L.prevEndAngle-L.prevStartAngle:L.prevEndAngle-L.prevStartAngle,size:te}),d.attr({d:R})),0!==L.dur?d.animate(L.dur,G.globals.easing,L.animBeginArr[L.i]).afterAll(function(){"pie"!==H.chartType&&"donut"!==H.chartType&&"polarArea"!==H.chartType||this.animate(G.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":H.strokeWidth}),L.i===G.config.series.length-1&&J.animationCompleted(d)}).during(function(ge){K=pe+(C-pe)*ge,L.animateStartingPos&&(K=M+(C-M)*ge,ae=p-M+(y-(p-M))*ge),R=H.getPiePath({me:H,startAngle:ae,angle:K,size:te}),d.node.setAttribute("data:pathOrig",R),d.attr({d:R})}):(R=H.getPiePath({me:H,startAngle:ae,angle:C,size:te}),L.isTrack||(G.globals.animationEnded=!0),d.node.setAttribute("data:pathOrig",R),d.attr({d:R,"stroke-width":H.strokeWidth}))}},{key:"pieClicked",value:function(d){var p,y=this.w,C=this,M=C.sliceSizes[d]+(y.config.plotOptions.pie.expandOnClick?4:0),L=y.globals.dom.Paper.select(".apexcharts-".concat(C.chartType.toLowerCase(),"-slice-").concat(d)).members[0];if("true"!==L.attr("data:pieClicked")){var R=y.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(R,function(te){te.setAttribute("data:pieClicked","false");var K=te.getAttribute("data:pathOrig");te.setAttribute("d",K)}),L.attr("data:pieClicked","true");var H=parseInt(L.attr("data:startAngle"),10),G=parseInt(L.attr("data:angle"),10);p=C.getPiePath({me:C,startAngle:H,angle:G,size:M}),360!==G&&L.plot(p)}else{L.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(L.node,this.donutDataLabels);var J=L.attr("data:pathOrig");L.attr({d:J})}}},{key:"getChangedPath",value:function(d,p){var y="";return this.dynamicAnim&&this.w.globals.dataChanged&&(y=this.getPiePath({me:this,startAngle:d,angle:p-d,size:this.size})),y}},{key:"getPiePath",value:function(d){var p=d.me,y=d.startAngle,C=d.angle,M=d.size,L=y,R=Math.PI*(L-90)/180,H=C+y;Math.ceil(H)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(H=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(H)>this.fullAngle&&(H-=this.fullAngle);var G=Math.PI*(H-90)/180,J=p.centerX+M*Math.cos(R),te=p.centerY+M*Math.sin(R),K=p.centerX+M*Math.cos(G),ae=p.centerY+M*Math.sin(G),pe=Qe.polarToCartesian(p.centerX,p.centerY,p.donutSize,H),ge=Qe.polarToCartesian(p.centerX,p.centerY,p.donutSize,L),xe=C>180?1:0,Me=["M",J,te,"A",M,M,0,xe,1,K,ae];return"donut"===p.chartType?[].concat(Me,["L",pe.x,pe.y,"A",p.donutSize,p.donutSize,0,xe,0,ge.x,ge.y,"L",J,te,"z"]).join(" "):"pie"===p.chartType||"polarArea"===p.chartType?[].concat(Me,["L",p.centerX,p.centerY,"L",J,te]).join(" "):[].concat(Me).join(" ")}},{key:"drawPolarElements",value:function(d){var p=this.w,y=new Ri(this.ctx),C=new Mt(this.ctx),M=new di(this.ctx),L=C.group(),R=C.group(),H=y.niceScale(0,Math.ceil(this.maxY),p.config.yaxis[0].tickAmount,0,!0),G=H.result.reverse(),J=H.result.length;this.maxY=H.niceMax;for(var te=p.globals.radialSize,K=te/(J-1),ae=0;ae<J-1;ae++){var pe=C.drawCircle(te);if(pe.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":p.config.plotOptions.polarArea.rings.strokeWidth,stroke:p.config.plotOptions.polarArea.rings.strokeColor}),p.config.yaxis[0].show){var ge=M.drawYAxisTexts(this.centerX,this.centerY-te+parseInt(p.config.yaxis[0].labels.style.fontSize,10)/2,ae,G[ae]);R.add(ge)}L.add(pe),te-=K}this.drawSpokes(d),d.add(L),d.add(R)}},{key:"renderInnerDataLabels",value:function(d,p){var y=this.w,C=new Mt(this.ctx),M=C.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(p.translateX?p.translateX:0,", ").concat(p.translateY?p.translateY:0,") scale(").concat(y.config.plotOptions.pie.customScale,")")}),L=d.total.show;M.node.style.opacity=p.opacity;var R,H,G=p.centerX,J=p.centerY;R=void 0===d.name.color?y.globals.colors[0]:d.name.color;var te=d.name.fontSize,K=d.name.fontFamily,ae=d.value.fontWeight;H=void 0===d.value.color?y.config.chart.foreColor:d.value.color;var pe=d.value.formatter,ge="",xe="";if(L?(R=d.total.color,te=d.total.fontSize,K=d.total.fontFamily,ae=d.total.fontWeight,xe=d.total.label,ge=d.total.formatter(y)):1===y.globals.series.length&&(ge=pe(y.globals.series[0],y),xe=y.globals.seriesNames[0]),xe&&(xe=d.name.formatter(xe,d.total.show,y)),d.name.show){var Me=C.drawText({x:G,y:J+parseFloat(d.name.offsetY),text:xe,textAnchor:"middle",foreColor:R,fontSize:te,fontWeight:ae,fontFamily:K});Me.node.classList.add("apexcharts-datalabel-label"),M.add(Me)}if(d.value.show){var ze=d.name.show?parseFloat(d.value.offsetY)+16:d.value.offsetY,Ke=C.drawText({x:G,y:J+ze,text:ge,textAnchor:"middle",foreColor:H,fontWeight:d.value.fontWeight,fontSize:d.value.fontSize,fontFamily:d.value.fontFamily});Ke.node.classList.add("apexcharts-datalabel-value"),M.add(Ke)}return M}},{key:"printInnerLabels",value:function(d,p,y,C){var M,L=this.w;C?M=void 0===d.name.color?L.globals.colors[parseInt(C.parentNode.getAttribute("rel"),10)-1]:d.name.color:L.globals.series.length>1&&d.total.show&&(M=d.total.color);var R=L.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),H=L.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");y=(0,d.value.formatter)(y,L),C||"function"!=typeof d.total.formatter||(y=d.total.formatter(L)),p=d.name.formatter(p,p===d.total.label,L),null!==R&&(R.textContent=p),null!==H&&(H.textContent=y),null!==R&&(R.style.fill=M)}},{key:"printDataLabelsInner",value:function(d,p){var y=this.w,C=d.getAttribute("data:value"),M=y.globals.seriesNames[parseInt(d.parentNode.getAttribute("rel"),10)-1];y.globals.series.length>1&&this.printInnerLabels(p,M,C,d);var L=y.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==L&&(L.style.opacity=1)}},{key:"drawSpokes",value:function(d){var p=this,y=this.w,C=new Mt(this.ctx),M=y.config.plotOptions.polarArea.spokes;if(0!==M.strokeWidth){for(var L=[],R=360/y.globals.series.length,H=0;H<y.globals.series.length;H++)L.push(Qe.polarToCartesian(this.centerX,this.centerY,y.globals.radialSize,y.config.plotOptions.pie.startAngle+R*H));L.forEach(function(G,J){var te=C.drawLine(G.x,G.y,p.centerX,p.centerY,Array.isArray(M.connectorColors)?M.connectorColors[J]:M.connectorColors);d.add(te)})}}},{key:"revertDataLabelsInner",value:function(d,p,y){var C=this,M=this.w,L=M.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),R=!1,H=M.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),G=function(K){var ae=K.makeSliceOut,pe=K.printLabel;Array.prototype.forEach.call(H,function(ge){"true"===ge.getAttribute("data:pieClicked")&&(ae&&(R=!0),pe&&C.printDataLabelsInner(ge,p))})};if(G({makeSliceOut:!0,printLabel:!1}),p.total.show&&M.globals.series.length>1)R&&!p.total.showAlways?G({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(p,p.total.label,p.total.formatter(M));else if(G({makeSliceOut:!1,printLabel:!0}),!R)if(M.globals.selectedDataPoints.length&&M.globals.series.length>1)if(M.globals.selectedDataPoints[0].length>0){var J=M.globals.selectedDataPoints[0],te=M.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(J));this.printDataLabelsInner(te,p)}else L&&M.globals.selectedDataPoints.length&&0===M.globals.selectedDataPoints[0].length&&(L.style.opacity=0);else L&&M.globals.series.length>1&&(L.style.opacity=0)}}]),ve}(),ir=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var p=this.w;this.graphics=new Mt(this.ctx),this.lineColorArr=void 0!==p.globals.stroke.colors?p.globals.stroke.colors:p.globals.colors,this.defaultSize=p.globals.svgHeight<p.globals.svgWidth?p.globals.gridHeight+1.5*p.globals.goldenPadding:p.globals.gridWidth,this.isLog=p.config.yaxis[0].logarithmic,this.coreUtils=new Vn(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(p.globals.maxY,0):p.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):p.globals.minY,this.polygons=p.config.plotOptions.radar.polygons,this.strokeWidth=p.config.stroke.show?p.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-p.config.chart.dropShadow.blur,p.config.xaxis.labels.show&&(this.size=this.size-p.globals.xAxisLabelsWidth/1.75),void 0!==p.config.plotOptions.radar.size&&(this.size=p.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return gt(ve,[{key:"draw",value:function(d){var p=this,y=this.w,C=new Gt(this.ctx),M=[],L=new fn(this.ctx);d.length&&(this.dataPointsLen=d[y.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var J=y.globals.gridHeight/2+y.config.plotOptions.radar.offsetY,te=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(y.globals.gridWidth/2+y.config.plotOptions.radar.offsetX||0,", ").concat(J||0,")")}),K=[],ae=null,pe=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),d.forEach(function(xe,Me){var ze=xe.length===y.globals.dataPoints,Ke=p.graphics.group().attr({class:"apexcharts-series","data:longestSeries":ze,seriesName:Qe.escapeString(y.globals.seriesNames[Me]),rel:Me+1,"data:realIndex":Me});p.dataRadiusOfPercent[Me]=[],p.dataRadius[Me]=[],p.angleArr[Me]=[],xe.forEach(function(hn,Kn){var Ni=Math.abs(p.maxValue-p.minValue);hn+=Math.abs(p.minValue),p.isLog&&(hn=p.coreUtils.getLogVal(hn,0)),p.dataRadiusOfPercent[Me][Kn]=hn/Ni,p.dataRadius[Me][Kn]=p.dataRadiusOfPercent[Me][Kn]*p.size,p.angleArr[Me][Kn]=Kn*p.disAngle}),K=p.getDataPointsPos(p.dataRadius[Me],p.angleArr[Me]);var Y=p.createPaths(K,{x:0,y:0});ae=p.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),pe=p.graphics.group({class:"apexcharts-datalabels","data:realIndex":Me}),y.globals.delayedElements.push({el:ae.node,index:Me});var ne={i:Me,realIndex:Me,animationDelay:Me,initialSpeed:y.config.chart.animations.speed,dataChangeSpeed:y.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:y.globals.stroke.colors[Me],strokeLineCap:y.config.stroke.lineCap},be=null;y.globals.previousPaths.length>0&&(be=p.getPreviousPath(Me));for(var Ie=0;Ie<Y.linePathsTo.length;Ie++){var Je=p.graphics.renderPaths(Be(Be({},ne),{},{pathFrom:null===be?Y.linePathsFrom[Ie]:be,pathTo:Y.linePathsTo[Ie],strokeWidth:Array.isArray(p.strokeWidth)?p.strokeWidth[Me]:p.strokeWidth,fill:"none",drawShadow:!1}));Ke.add(Je);var Nt=C.fillPath({seriesNumber:Me}),St=p.graphics.renderPaths(Be(Be({},ne),{},{pathFrom:null===be?Y.areaPathsFrom[Ie]:be,pathTo:Y.areaPathsTo[Ie],strokeWidth:0,fill:Nt,drawShadow:!1}));y.config.chart.dropShadow.enabled&&new dn(p.ctx).dropShadow(St,Object.assign({},y.config.chart.dropShadow,{noUserSpaceOnUse:!0}),Me),Ke.add(St)}xe.forEach(function(hn,Kn){var Ni=new $t(p.ctx).getMarkerConfig("apexcharts-marker",Me,Kn),Nn=p.graphics.drawMarker(K[Kn].x,K[Kn].y,Ni);Nn.attr("rel",Kn),Nn.attr("j",Kn),Nn.attr("index",Me),Nn.node.setAttribute("default-marker-size",Ni.pSize);var ei=p.graphics.group({class:"apexcharts-series-markers"});ei&&ei.add(Nn),ae.add(ei),Ke.add(ae);var rr=y.config.dataLabels;if(rr.enabled){var yo=rr.formatter(y.globals.series[Me][Kn],{seriesIndex:Me,dataPointIndex:Kn,w:y});L.plotDataLabelsText({x:K[Kn].x,y:K[Kn].y,text:yo,textAnchor:"middle",i:Me,j:Me,parent:pe,offsetCorrection:!1,dataLabelsConfig:Be({},rr)})}Ke.add(pe)}),M.push(Ke)}),this.drawPolygons({parent:te}),y.config.xaxis.labels.show){var ge=this.drawXAxisTexts();te.add(ge)}return M.forEach(function(xe){te.add(xe)}),te.add(this.yaxisLabels),te}},{key:"drawPolygons",value:function(d){for(var p=this,y=this.w,C=d.parent,M=new di(this.ctx),L=y.globals.yAxisScale[0].result.reverse(),R=L.length,H=[],G=this.size/(R-1),J=0;J<R;J++)H[J]=G*J;H.reverse();var te=[],K=[];H.forEach(function(ae,pe){var ge=Qe.getPolygonPos(ae,p.dataPointsLen),xe="";ge.forEach(function(Me,ze){if(0===pe){var Ke=p.graphics.drawLine(Me.x,Me.y,0,0,Array.isArray(p.polygons.connectorColors)?p.polygons.connectorColors[ze]:p.polygons.connectorColors);K.push(Ke)}0===ze&&p.yaxisLabelsTextsPos.push({x:Me.x,y:Me.y}),xe+=Me.x+","+Me.y+" "}),te.push(xe)}),te.forEach(function(ae,pe){var ge=p.polygons.strokeColors,xe=p.polygons.strokeWidth,Me=p.graphics.drawPolygon(ae,Array.isArray(ge)?ge[pe]:ge,Array.isArray(xe)?xe[pe]:xe,y.globals.radarPolygons.fill.colors[pe]);C.add(Me)}),K.forEach(function(ae){C.add(ae)}),y.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(ae,pe){var ge=M.drawYAxisTexts(ae.x,ae.y,pe,L[pe]);p.yaxisLabels.add(ge)})}},{key:"drawXAxisTexts",value:function(){var d=this,p=this.w,y=p.config.xaxis.labels,C=this.graphics.group({class:"apexcharts-xaxis"}),M=Qe.getPolygonPos(this.size,this.dataPointsLen);return p.globals.labels.forEach(function(L,R){var H=p.config.xaxis.labels.formatter,G=new fn(d.ctx);if(M[R]){var J=d.getTextPos(M[R],d.size),te=H(L,{seriesIndex:-1,dataPointIndex:R,w:p});G.plotDataLabelsText({x:J.newX,y:J.newY,text:te,textAnchor:J.textAnchor,i:R,j:R,parent:C,color:Array.isArray(y.style.colors)&&y.style.colors[R]?y.style.colors[R]:"#a8a8a8",dataLabelsConfig:Be({textAnchor:J.textAnchor,dropShadow:{enabled:!1}},y),offsetCorrection:!1})}}),C}},{key:"createPaths",value:function(d,p){var y=this,C=[],M=[],L=[],R=[];if(d.length){M=[this.graphics.move(p.x,p.y)],R=[this.graphics.move(p.x,p.y)];var H=this.graphics.move(d[0].x,d[0].y),G=this.graphics.move(d[0].x,d[0].y);d.forEach(function(J,te){H+=y.graphics.line(J.x,J.y),G+=y.graphics.line(J.x,J.y),te===d.length-1&&(H+="Z",G+="Z")}),C.push(H),L.push(G)}return{linePathsFrom:M,linePathsTo:C,areaPathsFrom:R,areaPathsTo:L}}},{key:"getTextPos",value:function(d,p){var y="middle",C=d.x,M=d.y;return Math.abs(d.x)>=10?d.x>0?(y="start",C+=10):d.x<0&&(y="end",C-=10):y="middle",Math.abs(d.y)>=p-10&&(d.y<0?M-=10:d.y>0&&(M+=10)),{textAnchor:y,newX:C,newY:M}}},{key:"getPreviousPath",value:function(d){for(var p=this.w,y=null,C=0;C<p.globals.previousPaths.length;C++){var M=p.globals.previousPaths[C];M.paths.length>0&&parseInt(M.realIndex,10)===parseInt(d,10)&&void 0!==p.globals.previousPaths[C].paths[0]&&(y=p.globals.previousPaths[C].paths[0].d)}return y}},{key:"getDataPointsPos",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;d=d||[],p=p||[];for(var C=[],M=0;M<y;M++){var L={};L.x=d[M]*Math.sin(p[M]),L.y=-d[M]*Math.cos(p[M]),C.push(L)}return C}}]),ve}(),er=function(ve){Ge(p,Oi);var d=Ct(p);function p(y){var C;Ee(this,p),(C=d.call(this,y)).ctx=y,C.w=y.w,C.animBeginArr=[0],C.animDur=0;var M=C.w;return C.startAngle=M.config.plotOptions.radialBar.startAngle,C.endAngle=M.config.plotOptions.radialBar.endAngle,C.totalAngle=Math.abs(M.config.plotOptions.radialBar.endAngle-M.config.plotOptions.radialBar.startAngle),C.trackStartAngle=M.config.plotOptions.radialBar.track.startAngle,C.trackEndAngle=M.config.plotOptions.radialBar.track.endAngle,C.radialDataLabels=M.config.plotOptions.radialBar.dataLabels,C.trackStartAngle||(C.trackStartAngle=C.startAngle),C.trackEndAngle||(C.trackEndAngle=C.endAngle),360===C.endAngle&&(C.endAngle=359.99),C.margin=parseInt(M.config.plotOptions.radialBar.track.margin,10),C}return gt(p,[{key:"draw",value:function(y){var C=this.w,M=new Mt(this.ctx),L=M.group({class:"apexcharts-radialbar"});if(C.globals.noData)return L;var R=M.group(),H=this.defaultSize/2,G=C.globals.gridWidth/2,J=this.defaultSize/2.05;C.config.chart.sparkline.enabled||(J=J-C.config.stroke.width-C.config.chart.dropShadow.blur);var te=C.globals.fill.colors;if(C.config.plotOptions.radialBar.track.show){var K=this.drawTracks({size:J,centerX:G,centerY:H,colorArr:te,series:y});R.add(K)}var ae=this.drawArcs({size:J,centerX:G,centerY:H,colorArr:te,series:y}),pe=360;C.config.plotOptions.radialBar.startAngle<0&&(pe=this.totalAngle);var ge=(360-pe)/360;if(C.globals.radialSize=J-J*ge,this.radialDataLabels.value.show){var xe=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);C.globals.radialSize+=xe*ge}return R.add(ae.g),"front"===C.config.plotOptions.radialBar.hollow.position&&(ae.g.add(ae.elHollow),ae.dataLabels&&ae.g.add(ae.dataLabels)),L.add(R),L}},{key:"drawTracks",value:function(y){var C=this.w,M=new Mt(this.ctx),L=M.group({class:"apexcharts-tracks"}),R=new dn(this.ctx),H=new Gt(this.ctx),G=this.getStrokeWidth(y);y.size=y.size-G/2;for(var J=0;J<y.series.length;J++){var te=M.group({class:"apexcharts-radialbar-track apexcharts-track"});L.add(te),te.attr({rel:J+1}),y.size=y.size-G-this.margin;var K=C.config.plotOptions.radialBar.track,ae=H.fillPath({seriesNumber:0,size:y.size,fillColors:Array.isArray(K.background)?K.background[J]:K.background,solid:!0}),pe=this.trackStartAngle,ge=this.trackEndAngle;Math.abs(ge)+Math.abs(pe)>=360&&(ge=360-Math.abs(this.startAngle)-.1);var xe=M.drawPath({d:"",stroke:ae,strokeWidth:G*parseInt(K.strokeWidth,10)/100,fill:"none",strokeOpacity:K.opacity,classes:"apexcharts-radialbar-area"});K.dropShadow.enabled&&R.dropShadow(xe,K.dropShadow),te.add(xe),xe.attr("id","apexcharts-radialbarTrack-"+J),this.animatePaths(xe,{centerX:y.centerX,centerY:y.centerY,endAngle:ge,startAngle:pe,size:y.size,i:J,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:C.globals.easing})}return L}},{key:"drawArcs",value:function(y){var C=this.w,M=new Mt(this.ctx),L=new Gt(this.ctx),R=new dn(this.ctx),H=M.group(),G=this.getStrokeWidth(y);y.size=y.size-G/2;var J=C.config.plotOptions.radialBar.hollow.background,te=y.size-G*y.series.length-this.margin*y.series.length-G*parseInt(C.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,K=te-C.config.plotOptions.radialBar.hollow.margin;void 0!==C.config.plotOptions.radialBar.hollow.image&&(J=this.drawHollowImage(y,H,te,J));var ae=this.drawHollow({size:K,centerX:y.centerX,centerY:y.centerY,fill:J||"transparent"});C.config.plotOptions.radialBar.hollow.dropShadow.enabled&&R.dropShadow(ae,C.config.plotOptions.radialBar.hollow.dropShadow);var ge=1;!this.radialDataLabels.total.show&&C.globals.series.length>1&&(ge=0);var xe=null;this.radialDataLabels.show&&(xe=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:te,centerX:y.centerX,centerY:y.centerY,opacity:ge})),"back"===C.config.plotOptions.radialBar.hollow.position&&(H.add(ae),xe&&H.add(xe));var Me=!1;C.config.plotOptions.radialBar.inverseOrder&&(Me=!0);for(var ze=Me?y.series.length-1:0;Me?ze>=0:ze<y.series.length;Me?ze--:ze++){var Ke=M.group({class:"apexcharts-series apexcharts-radial-series",seriesName:Qe.escapeString(C.globals.seriesNames[ze])});H.add(Ke),Ke.attr({rel:ze+1,"data:realIndex":ze}),this.ctx.series.addCollapsedClassToSeries(Ke,ze),y.size=y.size-G-this.margin;var Y=L.fillPath({seriesNumber:ze,size:y.size,value:y.series[ze]}),ne=this.startAngle,be=void 0,Ie=Qe.negToZero(y.series[ze]>100?100:y.series[ze])/100,Je=Math.round(this.totalAngle*Ie)+this.startAngle,Nt=void 0;C.globals.dataChanged&&(be=this.startAngle,Nt=Math.round(this.totalAngle*Qe.negToZero(C.globals.previousPaths[ze])/100)+be),Math.abs(Je)+Math.abs(ne)>=360&&(Je-=.01),Math.abs(Nt)+Math.abs(be)>=360&&(Nt-=.01);var St=Je-ne,Xt=Array.isArray(C.config.stroke.dashArray)?C.config.stroke.dashArray[ze]:C.config.stroke.dashArray,gn=M.drawPath({d:"",stroke:Y,strokeWidth:G,fill:"none",fillOpacity:C.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+ze,strokeDashArray:Xt});Mt.setAttrs(gn.node,{"data:angle":St,"data:value":y.series[ze]}),C.config.chart.dropShadow.enabled&&R.dropShadow(gn,C.config.chart.dropShadow,ze),R.setSelectionFilter(gn,0,ze),this.addListeners(gn,this.radialDataLabels),Ke.add(gn),gn.attr({index:0,j:ze});var Kn=0;!this.initialAnim||C.globals.resized||C.globals.dataChanged||(this.animDur=(Kn=(Je-ne)/360*C.config.chart.animations.speed)/(1.2*y.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),C.globals.dataChanged&&(this.animDur=(Kn=(Je-ne)/360*C.config.chart.animations.dynamicAnimation.speed)/(1.2*y.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(gn,{centerX:y.centerX,centerY:y.centerY,endAngle:Je,startAngle:ne,prevEndAngle:Nt,prevStartAngle:be,size:y.size,i:ze,totalItems:2,animBeginArr:this.animBeginArr,dur:Kn,shouldSetPrevPaths:!0,easing:C.globals.easing})}return{g:H,elHollow:ae,dataLabels:xe}}},{key:"drawHollow",value:function(y){var C=new Mt(this.ctx).drawCircle(2*y.size);return C.attr({class:"apexcharts-radialbar-hollow",cx:y.centerX,cy:y.centerY,r:y.size,fill:y.fill}),C}},{key:"drawHollowImage",value:function(y,C,M,L){var R=this.w,H=new Gt(this.ctx),G=Qe.randomId(),J=R.config.plotOptions.radialBar.hollow.image;if(R.config.plotOptions.radialBar.hollow.imageClipped)H.clippedImgArea({width:M,height:M,image:J,patternID:"pattern".concat(R.globals.cuid).concat(G)}),L="url(#pattern".concat(R.globals.cuid).concat(G,")");else{var te=R.config.plotOptions.radialBar.hollow.imageWidth,K=R.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===te&&void 0===K){var ae=R.globals.dom.Paper.image(J).loaded(function(ge){this.move(y.centerX-ge.width/2+R.config.plotOptions.radialBar.hollow.imageOffsetX,y.centerY-ge.height/2+R.config.plotOptions.radialBar.hollow.imageOffsetY)});C.add(ae)}else{var pe=R.globals.dom.Paper.image(J).loaded(function(ge){this.move(y.centerX-te/2+R.config.plotOptions.radialBar.hollow.imageOffsetX,y.centerY-K/2+R.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(te,K)});C.add(pe)}}return L}},{key:"getStrokeWidth",value:function(y){return y.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(y.series.length+1)-this.margin}}]),p}(),He=function(){function ve(d){Ee(this,ve),this.w=d.w,this.lineCtx=d}return gt(ve,[{key:"sameValueSeriesFix",value:function(d,p){var y=this.w;if("line"===y.config.chart.type&&("gradient"===y.config.fill.type||"gradient"===y.config.fill.type[d])&&new Vn(this.lineCtx.ctx,y).seriesHaveSameValues(d)){var C=p[d].slice();C[C.length-1]=C[C.length-1]+1e-6,p[d]=C}return p}},{key:"calculatePoints",value:function(d){var p=d.series,C=d.x,M=d.y,L=d.i,R=d.j,H=d.prevY,G=this.w,J=[],te=[];if(0===R){var K=this.lineCtx.categoryAxisCorrection+G.config.markers.offsetX;G.globals.isXNumeric&&(K=(G.globals.seriesX[d.realIndex][0]-G.globals.minX)/this.lineCtx.xRatio+G.config.markers.offsetX),J.push(K),te.push(Qe.isNumber(p[L][0])?H+G.config.markers.offsetY:null),J.push(C+G.config.markers.offsetX),te.push(Qe.isNumber(p[L][R+1])?M+G.config.markers.offsetY:null)}else J.push(C+G.config.markers.offsetX),te.push(Qe.isNumber(p[L][R+1])?M+G.config.markers.offsetY:null);return{x:J,y:te}}},{key:"checkPreviousPaths",value:function(d){for(var p=d.pathFromLine,y=d.pathFromArea,C=d.realIndex,M=this.w,L=0;L<M.globals.previousPaths.length;L++){var R=M.globals.previousPaths[L];("line"===R.type||"area"===R.type)&&R.paths.length>0&&parseInt(R.realIndex,10)===parseInt(C,10)&&("line"===R.type?(this.lineCtx.appendPathFrom=!1,p=M.globals.previousPaths[L].paths[0].d):"area"===R.type&&(this.lineCtx.appendPathFrom=!1,y=M.globals.previousPaths[L].paths[0].d,M.config.stroke.show&&M.globals.previousPaths[L].paths[1]&&(p=M.globals.previousPaths[L].paths[1].d)))}return{pathFromLine:p,pathFromArea:y}}},{key:"determineFirstPrevY",value:function(d){var p=d.i,y=d.series,C=d.prevY,M=d.lineYPosition,L=this.w;if(void 0!==y[p][0])C=(M=L.config.chart.stacked&&p>0?this.lineCtx.prevSeriesY[p-1][0]:this.lineCtx.zeroY)-y[p][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?y[p][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(L.config.chart.stacked&&p>0&&void 0===y[p][0])for(var R=p-1;R>=0;R--)if(null!=y[R][0]){C=M=this.lineCtx.prevSeriesY[R][0];break}return{prevY:C,lineYPosition:M}}}]),ve}(),we=function(){function ve(d,p,y){Ee(this,ve),this.ctx=d,this.w=d.w,this.xyRatios=p,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||y,this.scatter=new Ht(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new He(this),this.markers=new $t(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return gt(ve,[{key:"draw",value:function(d,p,y){var C=this.w,M=new Mt(this.ctx),L=C.globals.comboCharts?p:C.config.chart.type,R=M.group({class:"apexcharts-".concat(L,"-series apexcharts-plot-series")}),H=new Vn(this.ctx,C);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,d=H.getLogSeries(d),this.yRatio=H.getLogYRatios(this.yRatio);for(var G=[],J=0;J<d.length;J++){d=this.lineHelpers.sameValueSeriesFix(J,d);var te=C.globals.comboCharts?y[J]:J;this._initSerieVariables(d,J,te);var K=[],ae=[],pe=C.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,te),C.globals.isXNumeric&&C.globals.seriesX.length>0&&(pe=(C.globals.seriesX[te][0]-C.globals.minX)/this.xRatio),ae.push(pe);var ge,xe=pe,Me=xe,ze=this.zeroY;ze=this.lineHelpers.determineFirstPrevY({i:J,series:d,prevY:ze,lineYPosition:0}).prevY,K.push(ze),ge=ze;var Ke=this._calculatePathsFrom({series:d,i:J,realIndex:te,prevX:Me,prevY:ze}),Y=this._iterateOverDataPoints({series:d,realIndex:te,i:J,x:pe,y:1,pX:xe,pY:ge,pathsFrom:Ke,linePaths:[],areaPaths:[],seriesIndex:y,lineYPosition:0,xArrj:ae,yArrj:K});this._handlePaths({type:L,realIndex:te,i:J,paths:Y}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),G.push(this.elSeries)}if(C.config.chart.stacked)for(var ne=G.length;ne>0;ne--)R.add(G[ne-1]);else for(var be=0;be<G.length;be++)R.add(G[be]);return R}},{key:"_initSerieVariables",value:function(d,p,y){var C=this.w,M=new Mt(this.ctx);this.xDivision=C.globals.gridWidth/(C.globals.dataPoints-("on"===C.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(C.config.stroke.width)?C.config.stroke.width[y]:C.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=y),this.isReversed=C.config.yaxis[this.yaxisIndex]&&C.config.yaxis[this.yaxisIndex].reversed,this.zeroY=C.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?C.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>C.globals.gridHeight||"end"===C.config.plotOptions.area.fillTo)&&(this.areaBottomY=C.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=M.group({class:"apexcharts-series",seriesName:Qe.escapeString(C.globals.seriesNames[y])}),this.elPointsMain=M.group({class:"apexcharts-series-markers-wrap","data:realIndex":y}),this.elDataLabelsWrap=M.group({class:"apexcharts-datalabels","data:realIndex":y}),this.elSeries.attr({"data:longestSeries":d[p].length===C.globals.dataPoints,rel:p+1,"data:realIndex":y}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(d){var p,y,C,M,L=d.series,R=d.i,H=d.realIndex,G=d.prevX,J=d.prevY,te=this.w,K=new Mt(this.ctx);if(null===L[R][0]){for(var ae=0;ae<L[R].length;ae++)if(null!==L[R][ae]){p=K.move(G=this.xDivision*ae,J=this.zeroY-L[R][ae]/this.yRatio[this.yaxisIndex]),y=K.move(G,this.areaBottomY);break}}else p=K.move(G,J),y=K.move(G,this.areaBottomY)+K.line(G,J);if(C=K.move(-1,this.zeroY)+K.line(-1,this.zeroY),M=K.move(-1,this.zeroY)+K.line(-1,this.zeroY),te.globals.previousPaths.length>0){var pe=this.lineHelpers.checkPreviousPaths({pathFromLine:C,pathFromArea:M,realIndex:H});C=pe.pathFromLine,M=pe.pathFromArea}return{prevX:G,prevY:J,linePath:p,areaPath:y,pathFromLine:C,pathFromArea:M}}},{key:"_handlePaths",value:function(d){var p=d.type,y=d.realIndex,C=d.i,M=d.paths,L=this.w,R=new Mt(this.ctx),H=new Gt(this.ctx);this.prevSeriesY.push(M.yArrj),L.globals.seriesXvalues[y]=M.xArrj,L.globals.seriesYvalues[y]=M.yArrj;var G=L.config.forecastDataPoints;if(G.count>0){var J=L.globals.seriesXvalues[y][L.globals.seriesXvalues[y].length-G.count-1],te=R.drawRect(J,0,L.globals.gridWidth,L.globals.gridHeight,0);L.globals.dom.elForecastMask.appendChild(te.node);var K=R.drawRect(0,0,J,L.globals.gridHeight,0);L.globals.dom.elNonForecastMask.appendChild(K.node)}this.pointsChart||L.globals.delayedElements.push({el:this.elPointsMain.node,index:y});var ae={i:C,realIndex:y,animationDelay:C,initialSpeed:L.config.chart.animations.speed,dataChangeSpeed:L.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(p)};if("area"===p)for(var pe=H.fillPath({seriesNumber:y}),ge=0;ge<M.areaPaths.length;ge++){var xe=R.renderPaths(Be(Be({},ae),{},{pathFrom:M.pathFromArea,pathTo:M.areaPaths[ge],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:pe}));this.elSeries.add(xe)}if(L.config.stroke.show&&!this.pointsChart){var Me;Me="line"===p?H.fillPath({seriesNumber:y,i:C}):L.globals.stroke.colors[y];for(var ze=0;ze<M.linePaths.length;ze++){var Ke=Be(Be({},ae),{},{pathFrom:M.pathFromLine,pathTo:M.linePaths[ze],stroke:Me,strokeWidth:this.strokeWidth,strokeLineCap:L.config.stroke.lineCap,fill:"none"}),Y=R.renderPaths(Ke);if(this.elSeries.add(Y),G.count>0){var ne=R.renderPaths(Ke);ne.node.setAttribute("stroke-dasharray",G.dashArray),G.strokeWidth&&ne.node.setAttribute("stroke-width",G.strokeWidth),this.elSeries.add(ne),ne.attr("clip-path","url(#forecastMask".concat(L.globals.cuid,")")),Y.attr("clip-path","url(#nonForecastMask".concat(L.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(d){for(var p=d.series,y=d.realIndex,C=d.i,M=d.x,L=d.y,R=d.pX,H=d.pY,G=d.pathsFrom,J=d.linePaths,te=d.areaPaths,K=d.seriesIndex,ae=d.lineYPosition,pe=d.xArrj,ge=d.yArrj,xe=this.w,Me=new Mt(this.ctx),ze=this.yRatio,Ke=G.prevY,Y=G.linePath,ne=G.areaPath,be=G.pathFromLine,Ie=G.pathFromArea,Je=Qe.isNumber(xe.globals.minYArr[y])?xe.globals.minYArr[y]:xe.globals.minY,Nt=xe.globals.dataPoints>1?xe.globals.dataPoints-1:xe.globals.dataPoints,St=0;St<Nt;St++){var Xt=null==p[C][St+1];if(xe.globals.isXNumeric){var gn=xe.globals.seriesX[y][St+1];void 0===xe.globals.seriesX[y][St+1]&&(gn=xe.globals.seriesX[y][Nt-1]),M=(gn-xe.globals.minX)/this.xRatio}else M+=this.xDivision;ae=xe.config.chart.stacked&&C>0&&xe.globals.collapsedSeries.length<xe.config.series.length-1?this.prevSeriesY[function(Ni){for(var Nn=Ni,ei=0;ei<xe.globals.series.length;ei++)if(xe.globals.collapsedSeriesIndices.indexOf(Ni)>-1){Nn--;break}return Nn>=0?Nn:0}(C-1)][St+1]:this.zeroY,L=Xt?ae-Je/ze[this.yaxisIndex]+2*(this.isReversed?Je/ze[this.yaxisIndex]:0):ae-p[C][St+1]/ze[this.yaxisIndex]+2*(this.isReversed?p[C][St+1]/ze[this.yaxisIndex]:0),pe.push(M),ge.push(L);var hn=this.lineHelpers.calculatePoints({series:p,x:M,y:L,realIndex:y,i:C,j:St,prevY:Ke}),Kn=this._createPaths({series:p,i:C,realIndex:y,j:St,x:M,y:L,pX:R,pY:H,linePath:Y,areaPath:ne,linePaths:J,areaPaths:te,seriesIndex:K});te=Kn.areaPaths,J=Kn.linePaths,R=Kn.pX,H=Kn.pY,ne=Kn.areaPath,Y=Kn.linePath,this.appendPathFrom&&(be+=Me.line(M,this.zeroY),Ie+=Me.line(M,this.zeroY)),this.handleNullDataPoints(p,hn,C,St,y),this._handleMarkersAndLabels({pointsPos:hn,series:p,x:M,y:L,prevY:Ke,i:C,j:St,realIndex:y})}return{yArrj:ge,xArrj:pe,pathFromArea:Ie,areaPaths:te,pathFromLine:be,linePaths:J}}},{key:"_handleMarkersAndLabels",value:function(d){var p=d.pointsPos,y=d.i,C=d.j,M=d.realIndex,L=this.w,R=new fn(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,C,{realIndex:M,pointsPos:p,zRatio:this.zRatio,elParent:this.elPointsMain});else{L.globals.series[y].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var H=this.markers.plotChartMarkers(p,M,C+1);null!==H&&this.elPointsMain.add(H)}var G=R.drawDataLabel(p,M,C+1,null);null!==G&&this.elDataLabelsWrap.add(G)}},{key:"_createPaths",value:function(d){var p=d.series,y=d.i,C=d.realIndex,M=d.j,L=d.x,R=d.y,H=d.pX,G=d.pY,J=d.linePath,te=d.areaPath,K=d.linePaths,ae=d.areaPaths,pe=d.seriesIndex,ge=this.w,xe=new Mt(this.ctx),Me=ge.config.stroke.curve,ze=this.areaBottomY;if(Array.isArray(ge.config.stroke.curve)&&(Me=Array.isArray(pe)?ge.config.stroke.curve[pe[y]]:ge.config.stroke.curve[y]),"smooth"===Me){var Ke=.35*(L-H);ge.globals.hasNullValues?(null!==p[y][M]&&(null!==p[y][M+1]?(J=xe.move(H,G)+xe.curve(H+Ke,G,L-Ke,R,L+1,R),te=xe.move(H+1,G)+xe.curve(H+Ke,G,L-Ke,R,L+1,R)+xe.line(L,ze)+xe.line(H,ze)+"z"):(J=xe.move(H,G),te=xe.move(H,G)+"z")),K.push(J),ae.push(te)):(J+=xe.curve(H+Ke,G,L-Ke,R,L,R),te+=xe.curve(H+Ke,G,L-Ke,R,L,R)),H=L,G=R,M===p[y].length-2&&(te=te+xe.curve(H,G,L,R,L,ze)+xe.move(L,R)+"z",ge.globals.hasNullValues||(K.push(J),ae.push(te)))}else null===p[y][M+1]&&(J+=xe.move(L,R),te=te+xe.line(ge.globals.isXNumeric?(ge.globals.seriesX[C][M]-ge.globals.minX)/this.xRatio:L-this.xDivision,ze)+xe.move(L,R)+"z"),null===p[y][M]&&(J+=xe.move(L,R),te+=xe.move(L,ze)),"stepline"===Me?(J=J+xe.line(L,null,"H")+xe.line(null,R,"V"),te=te+xe.line(L,null,"H")+xe.line(null,R,"V")):"straight"===Me&&(J+=xe.line(L,R),te+=xe.line(L,R)),M===p[y].length-2&&(te=te+xe.line(L,ze)+xe.move(L,R)+"z",K.push(J),ae.push(te));return{linePaths:K,areaPaths:ae,pX:H,pY:G,linePath:J,areaPath:te}}},{key:"handleNullDataPoints",value:function(d,p,y,C,M){var L=this.w;if(null===d[y][C]&&L.config.markers.showNullDataPoints||1===d[y].length){var R=this.markers.plotChartMarkers(p,M,C+1,this.strokeWidth-L.config.markers.strokeWidth/2,!0);null!==R&&this.elPointsMain.add(R)}}}]),ve}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function ve(R,H,G,J){this.xoffset=R,this.yoffset=H,this.height=J,this.width=G,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(te){var K,ae=[],pe=this.xoffset,ge=this.yoffset,xe=M(te)/this.height,Me=M(te)/this.width;if(this.width>=this.height)for(K=0;K<te.length;K++)ae.push([pe,ge,pe+xe,ge+te[K]/xe]),ge+=te[K]/xe;else for(K=0;K<te.length;K++)ae.push([pe,ge,pe+te[K]/Me,ge+Me]),pe+=te[K]/Me;return ae},this.cutArea=function(te){var K;if(this.width>=this.height){var ae=te/this.height;K=new ve(this.xoffset+ae,this.yoffset,this.width-ae,this.height)}else{var ge=te/this.width;K=new ve(this.xoffset,this.yoffset+ge,this.width,this.height-ge)}return K}}function d(R,H,G,J,te){return J=void 0===J?0:J,te=void 0===te?0:te,function(K){var ae,pe,ge=[];for(ae=0;ae<K.length;ae++)for(pe=0;pe<K[ae].length;pe++)ge.push(K[ae][pe]);return ge}(p(function(K,ae){var pe,ge=[],xe=ae/M(K);for(pe=0;pe<K.length;pe++)ge[pe]=K[pe]*xe;return ge}(R,H*G),[],new ve(J,te,H,G),[]))}function p(R,H,G,J){var te,K,ae,pe,ge,xe,Me;if(0!==R.length)return te=G.shortestEdge(),ge=K=R[0],xe=te,0===(pe=H).length||((Me=pe.slice()).push(ge),y(pe,xe)>=y(Me,xe))?(H.push(K),p(R.slice(1),H,G,J)):(ae=G.cutArea(M(H),J),J.push(G.getCoordinates(H)),p(R,[],ae,J)),J;J.push(G.getCoordinates(H))}function y(R,H){var G=Math.min.apply(Math,R),J=Math.max.apply(Math,R),te=M(R);return Math.max(Math.pow(H,2)*J/Math.pow(te,2),Math.pow(te,2)/(Math.pow(H,2)*G))}function C(R){return R&&R.constructor===Array}function M(R){var H,G=0;for(H=0;H<R.length;H++)G+=R[H];return G}function L(R){var H,G=0;if(C(R[0]))for(H=0;H<R.length;H++)G+=L(R[H]);else G=M(R);return G}return function R(H,G,J,te,K){te=void 0===te?0:te,K=void 0===K?0:K;var ae,pe,ge=[],xe=[];if(C(H[0])){for(pe=0;pe<H.length;pe++)ge[pe]=L(H[pe]);for(ae=d(ge,G,J,te,K),pe=0;pe<H.length;pe++)xe.push(R(H[pe],ae[pe][2]-ae[pe][0],ae[pe][3]-ae[pe][1],ae[pe][0],ae[pe][1]))}else xe=d(H,G,J,te,K);return xe}}();var De,qe,it=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Lt(d),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return gt(ve,[{key:"draw",value:function(d){var p=this,y=this.w,C=new Mt(this.ctx),M=new Gt(this.ctx),L=C.group({class:"apexcharts-treemap"});if(y.globals.noData)return L;var R=[];return d.forEach(function(H){var G=H.map(function(J){return Math.abs(J)});R.push(G)}),this.negRange=this.helpers.checkColorRange(),y.config.series.forEach(function(H,G){H.data.forEach(function(J){Array.isArray(p.labels[G])||(p.labels[G]=[]),p.labels[G].push(J.x)})}),window.TreemapSquared.generate(R,y.globals.gridWidth,y.globals.gridHeight).forEach(function(H,G){var J=C.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:Qe.escapeString(y.globals.seriesNames[G]),rel:G+1,"data:realIndex":G});if(y.config.chart.dropShadow.enabled){var te=y.config.chart.dropShadow;new dn(p.ctx).dropShadow(L,te,G)}var K=C.group({class:"apexcharts-data-labels"});H.forEach(function(ae,pe){var ge=ae[0],xe=ae[1],Me=ae[2],ze=ae[3],Ke=C.drawRect(ge,xe,Me-ge,ze-xe,0,"#fff",1,p.strokeWidth,y.config.plotOptions.treemap.useFillColorAsStroke?ne:y.globals.stroke.colors[G]);Ke.attr({cx:ge,cy:xe,index:G,i:G,j:pe,width:Me-ge,height:ze-xe});var Y=p.helpers.getShadeColor(y.config.chart.type,G,pe,p.negRange),ne=Y.color;void 0!==y.config.series[G].data[pe]&&y.config.series[G].data[pe].fillColor&&(ne=y.config.series[G].data[pe].fillColor);var be=M.fillPath({color:ne,seriesNumber:G,dataPointIndex:pe});Ke.node.classList.add("apexcharts-treemap-rect"),Ke.attr({fill:be}),p.helpers.addListeners(Ke);var Ie={x:ge+(Me-ge)/2,y:xe+(ze-xe)/2,width:0,height:0},Je={x:ge,y:xe,width:Me-ge,height:ze-xe};if(y.config.chart.animations.enabled&&!y.globals.dataChanged){var Nt=1;y.globals.resized||(Nt=y.config.chart.animations.speed),p.animateTreemap(Ke,Ie,Je,Nt)}y.globals.dataChanged&&p.dynamicAnim.enabled&&y.globals.shouldAnimate&&(y.globals.previousPaths[G]&&y.globals.previousPaths[G][pe]&&y.globals.previousPaths[G][pe].rect&&(Ie=y.globals.previousPaths[G][pe].rect),p.animateTreemap(Ke,Ie,Je,p.dynamicAnim.speed));var Xt=p.getFontSize(ae),gn=y.config.dataLabels.formatter(p.labels[G][pe],{value:y.globals.series[G][pe],seriesIndex:G,dataPointIndex:pe,w:y}),hn=p.helpers.calculateDataLabels({text:gn,x:(ge+Me)/2,y:(xe+ze)/2+p.strokeWidth/2+Xt/3,i:G,j:pe,colorProps:Y,fontSize:Xt,series:d});y.config.dataLabels.enabled&&hn&&p.rotateToFitLabel(hn,gn,ge,xe,Me,ze),J.add(Ke),null!==hn&&J.add(hn)}),J.add(K),L.add(J)}),L}},{key:"getFontSize",value:function(d){var L,p=this.w,R=function H(G){var J,te=0;if(Array.isArray(G[0]))for(J=0;J<G.length;J++)te+=H(G[J]);else for(J=0;J<G.length;J++)te+=G[J].length;return te}(this.labels)/function H(G){var J,te=0;if(Array.isArray(G[0]))for(J=0;J<G.length;J++)te+=H(G[J]);else for(J=0;J<G.length;J++)te+=1;return te}(this.labels);return L=Math.pow((d[2]-d[0])*(d[3]-d[1]),.5),Math.min(L/R,parseInt(p.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(d,p,y,C,M,L){var R=new Mt(this.ctx),H=R.getTextRects(p);if(H.width+5>M-y&&H.width<=L-C){var G=R.rotateAroundCenter(d.node);d.node.setAttribute("transform","rotate(-90 ".concat(G.x," ").concat(G.y,")"))}}},{key:"animateTreemap",value:function(d,p,y,C){var M=new Rn(this.ctx);M.animateRect(d,{x:p.x,y:p.y,width:p.width,height:p.height},{x:y.x,y:y.y,width:y.width,height:y.height},C,function(){M.animationCompleted(d)})}}]),ve}(),yt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return gt(ve,[{key:"calculateTimeScaleTicks",value:function(d,p){var y=this,C=this.w;if(C.globals.allSeriesCollapsed)return C.globals.labels=[],C.globals.timescaleLabels=[],[];var M=new Un(this.ctx),L=(p-d)/864e5;this.determineInterval(L),C.globals.disableZoomIn=!1,C.globals.disableZoomOut=!1,L<.00011574074074074075?C.globals.disableZoomIn=!0:L>5e4&&(C.globals.disableZoomOut=!0);var R=M.getTimeUnitsfromTimestamp(d,p,this.utc),H=C.globals.gridWidth/L,G=H/24,J=G/60,te=J/60,K=Math.floor(24*L),ae=Math.floor(1440*L),pe=Math.floor(86400*L),ge=Math.floor(L),xe=Math.floor(L/30),Me=Math.floor(L/365),ze={minMillisecond:R.minMillisecond,minSecond:R.minSecond,minMinute:R.minMinute,minHour:R.minHour,minDate:R.minDate,minMonth:R.minMonth,minYear:R.minYear},Ke={firstVal:ze,currentMillisecond:ze.minMillisecond,currentSecond:ze.minSecond,currentMinute:ze.minMinute,currentHour:ze.minHour,currentMonthDate:ze.minDate,currentDate:ze.minDate,currentMonth:ze.minMonth,currentYear:ze.minYear,daysWidthOnXAxis:H,hoursWidthOnXAxis:G,minutesWidthOnXAxis:J,secondsWidthOnXAxis:te,numberOfSeconds:pe,numberOfMinutes:ae,numberOfHours:K,numberOfDays:ge,numberOfMonths:xe,numberOfYears:Me};switch(this.tickInterval){case"years":this.generateYearScale(Ke);break;case"months":case"half_year":this.generateMonthScale(Ke);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(Ke);break;case"hours":this.generateHourScale(Ke);break;case"minutes_fives":case"minutes":this.generateMinuteScale(Ke);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(Ke)}var Y=this.timeScaleArray.map(function(ne){var be={position:ne.position,unit:ne.unit,year:ne.year,day:ne.day?ne.day:1,hour:ne.hour?ne.hour:0,month:ne.month+1};return"month"===ne.unit?Be(Be({},be),{},{day:1,value:ne.value+1}):"day"===ne.unit||"hour"===ne.unit?Be(Be({},be),{},{value:ne.value}):"minute"===ne.unit?Be(Be({},be),{},{value:ne.value,minute:ne.value}):"second"===ne.unit?Be(Be({},be),{},{value:ne.value,minute:ne.minute,second:ne.second}):ne});return Y.filter(function(ne){var be=1,Ie=Math.ceil(C.globals.gridWidth/120),Je=ne.value;void 0!==C.config.xaxis.tickAmount&&(Ie=C.config.xaxis.tickAmount),Y.length>Ie&&(be=Math.floor(Y.length/Ie));var Nt=!1,St=!1;switch(y.tickInterval){case"years":"year"===ne.unit&&(Nt=!0);break;case"half_year":be=7,"year"===ne.unit&&(Nt=!0);break;case"months":be=1,"year"===ne.unit&&(Nt=!0);break;case"months_fortnight":be=15,"year"!==ne.unit&&"month"!==ne.unit||(Nt=!0),30===Je&&(St=!0);break;case"months_days":be=10,"month"===ne.unit&&(Nt=!0),30===Je&&(St=!0);break;case"week_days":be=8,"month"===ne.unit&&(Nt=!0);break;case"days":be=1,"month"===ne.unit&&(Nt=!0);break;case"hours":"day"===ne.unit&&(Nt=!0);break;case"minutes_fives":Je%5!=0&&(St=!0);break;case"seconds_tens":Je%10!=0&&(St=!0);break;case"seconds_fives":Je%5!=0&&(St=!0)}if("hours"===y.tickInterval||"minutes_fives"===y.tickInterval||"seconds_tens"===y.tickInterval||"seconds_fives"===y.tickInterval){if(!St)return!0}else if((Je%be==0||Nt)&&!St)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(d,p){var y=this.w,C=this.formatDates(d),M=this.removeOverlappingTS(C);y.globals.timescaleLabels=M.slice(),new is(this.ctx).plotCoords()}},{key:"determineInterval",value:function(d){var p=24*d,y=60*p;switch(!0){case d/365>5:this.tickInterval="years";break;case d>800:this.tickInterval="half_year";break;case d>180:this.tickInterval="months";break;case d>90:this.tickInterval="months_fortnight";break;case d>60:this.tickInterval="months_days";break;case d>30:this.tickInterval="week_days";break;case d>2:this.tickInterval="days";break;case p>2.4:this.tickInterval="hours";break;case y>15:this.tickInterval="minutes_fives";break;case y>5:this.tickInterval="minutes";break;case y>1:this.tickInterval="seconds_tens";break;case 60*y>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(d){var p=d.firstVal,y=d.currentMonth,C=d.currentYear,M=d.daysWidthOnXAxis,L=d.numberOfYears,R=p.minYear,H=0,G=new Un(this.ctx),J="year";if(p.minDate>1||p.minMonth>0){var te=G.determineRemainingDaysOfYear(p.minYear,p.minMonth,p.minDate);H=(G.determineDaysOfYear(p.minYear)-te+1)*M,this.timeScaleArray.push({position:H,value:R=p.minYear+1,unit:J,year:R,month:Qe.monthMod(y+1)})}else 1===p.minDate&&0===p.minMonth&&this.timeScaleArray.push({position:H,value:R,unit:J,year:C,month:Qe.monthMod(y+1)});for(var K=R,ae=H,pe=0;pe<L;pe++)K++,ae=G.determineDaysOfYear(K-1)*M+ae,this.timeScaleArray.push({position:ae,value:K,unit:J,year:K,month:1})}},{key:"generateMonthScale",value:function(d){var p=d.firstVal,y=d.currentMonthDate,C=d.currentMonth,M=d.currentYear,L=d.daysWidthOnXAxis,R=d.numberOfMonths,H=C,G=0,J=new Un(this.ctx),te="month",K=0;if(p.minDate>1){G=(J.determineDaysOfMonths(C+1,p.minYear)-y+1)*L,H=Qe.monthMod(C+1);var ae=M+K,pe=Qe.monthMod(H),ge=H;0===H&&(te="year",ge=ae,pe=1,ae+=K+=1),this.timeScaleArray.push({position:G,value:ge,unit:te,year:ae,month:pe})}else this.timeScaleArray.push({position:G,value:H,unit:te,year:M,month:Qe.monthMod(C)});for(var xe=H+1,Me=G,ze=0,Ke=1;ze<R;ze++,Ke++){0===(xe=Qe.monthMod(xe))?(te="year",K+=1):te="month";var Y=this._getYear(M,xe,K);Me=J.determineDaysOfMonths(xe,Y)*L+Me,this.timeScaleArray.push({position:Me,value:0===xe?Y:xe,unit:te,year:Y,month:0===xe?1:xe}),xe++}}},{key:"generateDayScale",value:function(d){var p=d.firstVal,y=d.currentMonth,C=d.currentYear,M=d.hoursWidthOnXAxis,L=d.numberOfDays,R=new Un(this.ctx),H="day",G=p.minDate+1,J=G,te=function(Ke,Y,ne){return Ke>R.determineDaysOfMonths(Y+1,ne)&&(J=1,H="month",ae=Y+=1),Y},K=(24-p.minHour)*M,ae=G,pe=te(J,y,C);0===p.minHour&&1===p.minDate?(K=0,ae=Qe.monthMod(p.minMonth),H="month",J=p.minDate,L++):1!==p.minDate&&0===p.minHour&&0===p.minMinute&&(K=0,ae=G=p.minDate,pe=te(J=G,y,C)),this.timeScaleArray.push({position:K,value:ae,unit:H,year:this._getYear(C,pe,0),month:Qe.monthMod(pe),day:J});for(var ge=K,xe=0;xe<L;xe++){H="day",pe=te(J+=1,pe,this._getYear(C,pe,0));var Me=this._getYear(C,pe,0);ge=24*M+ge;var ze=1===J?Qe.monthMod(pe):J;this.timeScaleArray.push({position:ge,value:ze,unit:H,year:Me,month:Qe.monthMod(pe),day:ze})}}},{key:"generateHourScale",value:function(d){var p=d.firstVal,y=d.currentDate,C=d.currentMonth,M=d.currentYear,L=d.minutesWidthOnXAxis,R=d.numberOfHours,H=new Un(this.ctx),G="hour",te=function(be,Ie){return be>H.determineDaysOfMonths(Ie+1,M)?Ie+=1:Ie},K=60-(p.minMinute+p.minSecond/60),ae=K*L,pe=p.minHour+1,ge=pe+1;60===K&&(ae=0,ge=(pe=p.minHour)+1);var be,Ie,xe=y,Me=te(xe,C);this.timeScaleArray.push({position:ae,value:pe,unit:G,day:xe,hour:ge,year:M,month:Qe.monthMod(Me)});for(var ze=ae,Ke=0;Ke<R;Ke++){G="hour",ge>=24&&(ge=0,G="day",Me=(be=xe+=1,Ie=Me,be>H.determineDaysOfMonths(Ie+1,M)&&(xe=1,Ie+=1),{month:Ie,date:xe}).month,Me=te(xe,Me));var Y=this._getYear(M,Me,0);this.timeScaleArray.push({position:ze=0===ge&&0===Ke?K*L:60*L+ze,value:0===ge?xe:ge,unit:G,hour:ge,day:xe,year:Y,month:Qe.monthMod(Me)}),ge++}}},{key:"generateMinuteScale",value:function(d){for(var G=d.minutesWidthOnXAxis,te=d.numberOfMinutes,K=d.currentMinute+1,ae=d.currentDate,pe=d.currentMonth,ge=d.currentYear,xe=d.currentHour,Me=(60-d.currentSecond-d.currentMillisecond/1e3)*d.secondsWidthOnXAxis,ze=0;ze<te;ze++)K>=60&&(K=0,24===(xe+=1)&&(xe=0)),this.timeScaleArray.push({position:Me,value:K,unit:"minute",hour:xe,minute:K,day:ae,year:this._getYear(ge,pe,0),month:Qe.monthMod(pe)}),Me+=G,K++}},{key:"generateSecondScale",value:function(d){for(var G=d.secondsWidthOnXAxis,J=d.numberOfSeconds,te=d.currentSecond+1,K=d.currentMinute,ae=d.currentDate,pe=d.currentMonth,ge=d.currentYear,xe=d.currentHour,Me=(1e3-d.currentMillisecond)/1e3*G,ze=0;ze<J;ze++)te>=60&&(te=0,++K>=60&&(K=0,24==++xe&&(xe=0))),this.timeScaleArray.push({position:Me,value:te,unit:"second",hour:xe,minute:K,second:te,day:ae,year:this._getYear(ge,pe,0),month:Qe.monthMod(pe)}),Me+=G,te++}},{key:"createRawDateString",value:function(d,p){var y=d.year;return 0===d.month&&(d.month=1),y+="-"+("0"+d.month.toString()).slice(-2),y+="day"===d.unit?"day"===d.unit?"-"+("0"+p).slice(-2):"-01":"-"+("0"+(d.day?d.day:"1")).slice(-2),y+="hour"===d.unit?"hour"===d.unit?"T"+("0"+p).slice(-2):"T00":"T"+("0"+(d.hour?d.hour:"0")).slice(-2),y+="minute"===d.unit?":"+("0"+p).slice(-2):":"+(d.minute?("0"+d.minute).slice(-2):"00"),y+="second"===d.unit?":"+("0"+p).slice(-2):":00",this.utc&&(y+=".000Z"),y}},{key:"formatDates",value:function(d){var p=this,y=this.w;return d.map(function(C){var M=C.value.toString(),L=new Un(p.ctx),R=p.createRawDateString(C,M),H=L.getDate(L.parseDate(R));if(p.utc||(H=L.getDate(L.parseDateWithTimezone(R))),void 0===y.config.xaxis.labels.format){var G="dd MMM",J=y.config.xaxis.labels.datetimeFormatter;"year"===C.unit&&(G=J.year),"month"===C.unit&&(G=J.month),"day"===C.unit&&(G=J.day),"hour"===C.unit&&(G=J.hour),"minute"===C.unit&&(G=J.minute),"second"===C.unit&&(G=J.second),M=L.formatDate(H,G)}else M=L.formatDate(H,y.config.xaxis.labels.format);return{dateString:R,position:C.position,value:M,unit:C.unit,year:C.year,month:C.month}})}},{key:"removeOverlappingTS",value:function(d){var p,y=this,C=new Mt(this.ctx),M=!1;d.length>0&&d[0].value&&d.every(function(H){return H.value.length===d[0].value.length})&&(M=!0,p=C.getTextRects(d[0].value).width);var L=0;return d.map(function(H,G){if(G>0&&y.w.config.xaxis.labels.hideOverlappingLabels){var J=M?p:C.getTextRects(d[L].value).width;return H.position>d[L].position+J+10?(L=G,H):null}return H}).filter(function(H){return null!==H})}},{key:"_getYear",value:function(d,p,y){return d+Math.floor(p/12)+y}}]),ve}(),Ot=function(){function ve(d,p){Ee(this,ve),this.ctx=p,this.w=p.w,this.el=d}return gt(ve,[{key:"setupElements",value:function(){var d=this.w.globals,p=this.w.config,y=p.chart.type;d.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(y)>-1,d.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(y)>-1,d.isBarHorizontal=("bar"===p.chart.type||"rangeBar"===p.chart.type)&&p.plotOptions.bar.horizontal,d.chartClass=".apexcharts"+d.chartID,d.dom.baseEl=this.el,d.dom.elWrap=document.createElement("div"),Mt.setAttrs(d.dom.elWrap,{id:d.chartClass.substring(1),class:"apexcharts-canvas "+d.chartClass.substring(1)}),this.el.appendChild(d.dom.elWrap),d.dom.Paper=new window.SVG.Doc(d.dom.elWrap),d.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(p.chart.offsetX,", ").concat(p.chart.offsetY,")")}),d.dom.Paper.node.style.background=p.chart.background,this.setSVGDimensions(),d.dom.elGraphical=d.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),d.dom.elAnnotations=d.dom.Paper.group().attr({class:"apexcharts-annotations"}),d.dom.elDefs=d.dom.Paper.defs(),d.dom.elLegendWrap=document.createElement("div"),d.dom.elLegendWrap.classList.add("apexcharts-legend"),d.dom.elWrap.appendChild(d.dom.elLegendWrap),d.dom.Paper.add(d.dom.elGraphical),d.dom.elGraphical.add(d.dom.elDefs)}},{key:"plotChartType",value:function(d,p){var y=this.w,C=y.config,M=y.globals,L={series:[],i:[]},R={series:[],i:[]},H={series:[],i:[]},G={series:[],i:[]},J={series:[],i:[]},te={series:[],i:[]},K={series:[],i:[]};M.series.map(function(ne,be){var Ie=0;void 0!==d[be].type?("column"===d[be].type||"bar"===d[be].type?(M.series.length>1&&C.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),J.series.push(ne),J.i.push(be),Ie++,y.globals.columnSeries=J.series):"area"===d[be].type?(R.series.push(ne),R.i.push(be),Ie++):"line"===d[be].type?(L.series.push(ne),L.i.push(be),Ie++):"scatter"===d[be].type?(H.series.push(ne),H.i.push(be)):"bubble"===d[be].type?(G.series.push(ne),G.i.push(be),Ie++):"candlestick"===d[be].type?(te.series.push(ne),te.i.push(be),Ie++):"boxPlot"===d[be].type?(K.series.push(ne),K.i.push(be),Ie++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),Ie>1&&(M.comboCharts=!0)):(L.series.push(ne),L.i.push(be))});var ae=new we(this.ctx,p),pe=new Jt(this.ctx,p);this.ctx.pie=new Oi(this.ctx);var ge=new er(this.ctx);this.ctx.rangeBar=new ii(this.ctx,p);var xe=new ir(this.ctx),Me=[];if(M.comboCharts){if(R.series.length>0&&Me.push(ae.draw(R.series,"area",R.i)),J.series.length>0)if(y.config.chart.stacked){var ze=new Tt(this.ctx,p);Me.push(ze.draw(J.series,J.i))}else this.ctx.bar=new mi(this.ctx,p),Me.push(this.ctx.bar.draw(J.series,J.i));if(L.series.length>0&&Me.push(ae.draw(L.series,"line",L.i)),te.series.length>0&&Me.push(pe.draw(te.series,te.i)),K.series.length>0&&Me.push(pe.draw(K.series,K.i)),H.series.length>0){var Ke=new we(this.ctx,p,!0);Me.push(Ke.draw(H.series,"scatter",H.i))}if(G.series.length>0){var Y=new we(this.ctx,p,!0);Me.push(Y.draw(G.series,"bubble",G.i))}}else switch(C.chart.type){case"line":Me=ae.draw(M.series,"line");break;case"area":Me=ae.draw(M.series,"area");break;case"bar":C.chart.stacked?Me=new Tt(this.ctx,p).draw(M.series):(this.ctx.bar=new mi(this.ctx,p),Me=this.ctx.bar.draw(M.series));break;case"candlestick":case"boxPlot":Me=new Jt(this.ctx,p).draw(M.series);break;case"rangeBar":Me=this.ctx.rangeBar.draw(M.series);break;case"heatmap":Me=new Ln(this.ctx,p).draw(M.series);break;case"treemap":Me=new it(this.ctx,p).draw(M.series);break;case"pie":case"donut":case"polarArea":Me=this.ctx.pie.draw(M.series);break;case"radialBar":Me=ge.draw(M.series);break;case"radar":Me=xe.draw(M.series);break;default:Me=ae.draw(M.series)}return Me}},{key:"setSVGDimensions",value:function(){var d=this.w.globals,p=this.w.config;d.svgWidth=p.chart.width,d.svgHeight=p.chart.height;var y=Qe.getDimensions(this.el),C=p.chart.width.toString().split(/[0-9]+/g).pop();"%"===C?Qe.isNumber(y[0])&&(0===y[0].width&&(y=Qe.getDimensions(this.el.parentNode)),d.svgWidth=y[0]*parseInt(p.chart.width,10)/100):"px"!==C&&""!==C||(d.svgWidth=parseInt(p.chart.width,10));var M=p.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==d.svgHeight&&""!==d.svgHeight)if("%"===M){var L=Qe.getDimensions(this.el.parentNode);d.svgHeight=L[1]*parseInt(p.chart.height,10)/100}else d.svgHeight=parseInt(p.chart.height,10);else d.svgHeight=d.axisCharts?d.svgWidth/1.61:d.svgWidth/1.2;d.svgWidth<0&&(d.svgWidth=0),d.svgHeight<0&&(d.svgHeight=0),Mt.setAttrs(d.dom.Paper.node,{width:d.svgWidth,height:d.svgHeight}),"%"!==M&&(d.dom.Paper.node.parentNode.parentNode.style.minHeight=d.svgHeight+(p.chart.sparkline.enabled?0:d.axisCharts?p.chart.parentHeightOffset:0)+"px"),d.dom.elWrap.style.width=d.svgWidth+"px",d.dom.elWrap.style.height=d.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var d=this.w.globals;Mt.setAttrs(d.dom.elGraphical.node,{transform:"translate("+d.translateX+", "+d.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var d=this.w,p=d.globals,y=0,C=d.config.chart.sparkline.enabled?1:15;C+=d.config.grid.padding.bottom,"top"!==d.config.legend.position&&"bottom"!==d.config.legend.position||!d.config.legend.show||d.config.legend.floating||(y=new $n(this.ctx).legendHelpers.getLegendBBox().clwh+10);var M=d.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),L=2.05*d.globals.radialSize;if(M&&!d.config.chart.sparkline.enabled){var R=Qe.getBoundingClientRect(M);L=R.bottom,L=Math.max(2.05*d.globals.radialSize,R.bottom-R.top)}var G=L+p.translateY+y+C;p.dom.elLegendForeign&&p.dom.elLegendForeign.setAttribute("height",G),p.dom.elWrap.style.height=G+"px",Mt.setAttrs(p.dom.Paper.node,{height:G}),p.dom.Paper.node.parentNode.parentNode.style.minHeight=G+"px"}},{key:"coreCalculations",value:function(){new hs(this.ctx).init()}},{key:"resetGlobals",value:function(){var d=this,p=function(){return d.w.config.series.map(function(M){return[]})},y=new xi,C=this.w.globals;y.initGlobalVars(C),C.seriesXvalues=p(),C.seriesYvalues=p()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var d=null,p=this.w;if(p.globals.axisCharts){if("back"===p.config.xaxis.crosshairs.position&&new Yn(this.ctx).drawXCrosshairs(),"back"===p.config.yaxis[0].crosshairs.position&&new Yn(this.ctx).drawYCrosshairs(),"datetime"===p.config.xaxis.type&&void 0===p.config.xaxis.labels.formatter){this.ctx.timeScale=new yt(this.ctx);var y=[];isFinite(p.globals.minX)&&isFinite(p.globals.maxX)&&!p.globals.isBarHorizontal?y=this.ctx.timeScale.calculateTimeScaleTicks(p.globals.minX,p.globals.maxX):p.globals.isBarHorizontal&&(y=this.ctx.timeScale.calculateTimeScaleTicks(p.globals.minY,p.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(y)}d=new Vn(this.ctx).getCalculatedRatios()}return d}},{key:"updateSourceChart",value:function(d){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:d.w.globals.minX,max:d.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var d=this,p=this.w;if(p.config.chart.brush.enabled&&"function"!=typeof p.config.chart.events.selection){var y=p.config.chart.brush.targets||[p.config.chart.brush.target];y.forEach(function(C){var M=ApexCharts.getChartByID(C);M.w.globals.brushSource=d.ctx,"function"!=typeof M.w.config.chart.events.zoomed&&(M.w.config.chart.events.zoomed=function(){d.updateSourceChart(M)}),"function"!=typeof M.w.config.chart.events.scrolled&&(M.w.config.chart.events.scrolled=function(){d.updateSourceChart(M)})}),p.config.chart.events.selection=function(C,M){y.forEach(function(L){var R=ApexCharts.getChartByID(L),H=Qe.clone(p.config.yaxis);if(p.config.chart.brush.autoScaleYaxis&&1===R.w.globals.series.length){var G=new Ri(R);H=G.autoScaleY(R,H,M)}var J=R.w.config.yaxis.reduce(function(te,K,ae){return[].concat(zt(te),[Be(Be({},R.w.config.yaxis[ae]),{},{min:H[0].min,max:H[0].max})])},[]);R.ctx.updateHelpers._updateOptions({xaxis:{min:M.xaxis.min,max:M.xaxis.max},yaxis:J},!1,!1,!1,!1)})}}}}]),ve}(),Pt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"_updateOptions",value:function(d){var p=this,y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],M=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],L=arguments.length>4&&void 0!==arguments[4]&&arguments[4],R=[this.ctx];M&&(R=this.ctx.getSyncedCharts()),this.ctx.w.globals.isExecCalled&&(R=[this.ctx],this.ctx.w.globals.isExecCalled=!1),R.forEach(function(H){var G=H.w;return G.globals.shouldAnimate=C,y||(G.globals.resized=!0,G.globals.dataChanged=!0,C&&H.series.getPreviousPaths()),d&&"object"===Vt(d)&&(H.config=new jn(d),d=Vn.extendArrayProps(H.config,d,G),H.w.globals.chartID!==p.ctx.w.globals.chartID&&delete d.series,G.config=Qe.extend(G.config,d),L&&(G.globals.lastXAxis=d.xaxis?Qe.clone(d.xaxis):[],G.globals.lastYAxis=d.yaxis?Qe.clone(d.yaxis):[],G.globals.initialConfig=Qe.extend({},G.config),G.globals.initialSeries=Qe.clone(G.config.series))),H.update(d)})}},{key:"_updateSeries",value:function(d,p){var y,C=this,M=arguments.length>2&&void 0!==arguments[2]&&arguments[2],L=this.w;return L.globals.shouldAnimate=p,L.globals.dataChanged=!0,p&&this.ctx.series.getPreviousPaths(),L.globals.axisCharts?(0===(y=d.map(function(R,H){return C._extendSeries(R,H)})).length&&(y=[{data:[]}]),L.config.series=y):L.config.series=d.slice(),M&&(L.globals.initialSeries=Qe.clone(L.config.series)),this.ctx.update()}},{key:"_extendSeries",value:function(d,p){var y=this.w,C=y.config.series[p];return Be(Be({},y.config.series[p]),{},{name:d.name?d.name:C&&C.name,color:d.color?d.color:C&&C.color,type:d.type?d.type:C&&C.type,data:d.data?d.data:C&&C.data})}},{key:"toggleDataPointSelection",value:function(d,p){var y=this.w,C=null,M=".apexcharts-series[data\\:realIndex='".concat(d,"']");return y.globals.axisCharts?C=y.globals.dom.Paper.select("".concat(M," path[j='").concat(p,"'], ").concat(M," circle[j='").concat(p,"'], ").concat(M," rect[j='").concat(p,"']")).members[0]:void 0===p&&(C=y.globals.dom.Paper.select("".concat(M," path[j='").concat(d,"']")).members[0],"pie"!==y.config.chart.type&&"polarArea"!==y.config.chart.type&&"donut"!==y.config.chart.type||this.ctx.pie.pieClicked(d)),C?(new Mt(this.ctx).pathMouseDown(C,null),C.node?C.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(d){var p=this.w;if(["min","max"].forEach(function(C){void 0!==d.xaxis[C]&&(p.config.xaxis[C]=d.xaxis[C],p.globals.lastXAxis[C]=d.xaxis[C])}),d.xaxis.categories&&d.xaxis.categories.length&&(p.config.xaxis.categories=d.xaxis.categories),p.config.xaxis.convertedCatToNumeric){var y=new Hn(d);d=y.convertCatToNumericXaxis(d,this.ctx)}return d}},{key:"forceYAxisUpdate",value:function(d){var p=this.w;return p.config.chart.stacked&&"100%"===p.config.chart.stackType&&(Array.isArray(d.yaxis)?d.yaxis.forEach(function(y,C){d.yaxis[C].min=0,d.yaxis[C].max=100}):(d.yaxis.min=0,d.yaxis.max=100)),d}},{key:"revertDefaultAxisMinMax",value:function(d){var p=this,y=this.w,C=y.globals.lastXAxis,M=y.globals.lastYAxis;d&&d.xaxis&&(C=d.xaxis),d&&d.yaxis&&(M=d.yaxis),y.config.xaxis.min=C.min,y.config.xaxis.max=C.max,y.config.yaxis.map(function(R,H){y.globals.zoomed||void 0!==M[H]?function(R){void 0!==M[R]&&(y.config.yaxis[R].min=M[R].min,y.config.yaxis[R].max=M[R].max)}(H):void 0!==p.ctx.opts.yaxis[H]&&(R.min=p.ctx.opts.yaxis[H].min,R.max=p.ctx.opts.yaxis[H].max)})}}]),ve}();De="undefined"!=typeof window?window:void 0,qe=function(ve,d){var p=(void 0!==this?this:ve).SVG=function(Y){if(p.supported)return Y=new p.Doc(Y),p.parser.draw||p.prepare(),Y};if(p.ns="http://www.w3.org/2000/svg",p.xmlns="http://www.w3.org/2000/xmlns/",p.xlink="http://www.w3.org/1999/xlink",p.svgjs="http://svgjs.com/svgjs",p.supported=!0,!p.supported)return!1;p.did=1e3,p.eid=function(Y){return"Svgjs"+J(Y)+p.did++},p.create=function(Y){var ne=d.createElementNS(this.ns,Y);return ne.setAttribute("id",this.eid(Y)),ne},p.extend=function(){var Y,ne;ne=(Y=[].slice.call(arguments)).pop();for(var be=Y.length-1;be>=0;be--)if(Y[be])for(var Ie in ne)Y[be].prototype[Ie]=ne[Ie];p.Set&&p.Set.inherit&&p.Set.inherit()},p.invent=function(Y){var ne="function"==typeof Y.create?Y.create:function(){this.constructor.call(this,p.create(Y.create))};return Y.inherit&&(ne.prototype=new Y.inherit),Y.extend&&p.extend(ne,Y.extend),Y.construct&&p.extend(Y.parent||p.Container,Y.construct),ne},p.adopt=function(Y){return Y?Y.instance?Y.instance:((ne="svg"==Y.nodeName?Y.parentNode instanceof ve.SVGElement?new p.Nested:new p.Doc:"linearGradient"==Y.nodeName?new p.Gradient("linear"):"radialGradient"==Y.nodeName?new p.Gradient("radial"):p[J(Y.nodeName)]?new(p[J(Y.nodeName)]):new p.Element(Y)).type=Y.nodeName,ne.node=Y,Y.instance=ne,ne instanceof p.Doc&&ne.namespace().defs(),ne.setData(JSON.parse(Y.getAttribute("svgjs:data"))||{}),ne):null;var ne},p.prepare=function(){var Y=d.getElementsByTagName("body")[0],ne=(Y?new p.Doc(Y):p.adopt(d.documentElement).nested()).size(2,0);p.parser={body:Y||d.documentElement,draw:ne.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:ne.polyline().node,path:ne.path().node,native:p.create("svg")}},p.parser={native:p.create("svg")},d.addEventListener("DOMContentLoaded",function(){p.parser.draw||p.prepare()},!1),p.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},p.utils={map:function(Y,ne){for(var be=Y.length,Ie=[],Je=0;Je<be;Je++)Ie.push(ne(Y[Je]));return Ie},filter:function(Y,ne){for(var be=Y.length,Ie=[],Je=0;Je<be;Je++)ne(Y[Je])&&Ie.push(Y[Je]);return Ie},filterSVGElements:function(Y){return this.filter(Y,function(ne){return ne instanceof ve.SVGElement})}},p.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},p.Color=function(Y){var ne,be;this.r=0,this.g=0,this.b=0,Y&&("string"==typeof Y?p.regex.isRgb.test(Y)?(ne=p.regex.rgb.exec(Y.replace(p.regex.whitespace,"")),this.r=parseInt(ne[1]),this.g=parseInt(ne[2]),this.b=parseInt(ne[3])):p.regex.isHex.test(Y)&&(ne=p.regex.hex.exec(4==(be=Y).length?["#",be.substring(1,2),be.substring(1,2),be.substring(2,3),be.substring(2,3),be.substring(3,4),be.substring(3,4)].join(""):be),this.r=parseInt(ne[1],16),this.g=parseInt(ne[2],16),this.b=parseInt(ne[3],16)):"object"===Vt(Y)&&(this.r=Y.r,this.g=Y.g,this.b=Y.b))},p.extend(p.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+te(this.r)+te(this.g)+te(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(Y){return this.destination=new p.Color(Y),this},at:function(Y){return this.destination?new p.Color({r:~~(this.r+(this.destination.r-this.r)*(Y=Y<0?0:Y>1?1:Y)),g:~~(this.g+(this.destination.g-this.g)*Y),b:~~(this.b+(this.destination.b-this.b)*Y)}):this}}),p.Color.test=function(Y){return p.regex.isHex.test(Y+="")||p.regex.isRgb.test(Y)},p.Color.isRgb=function(Y){return Y&&"number"==typeof Y.r&&"number"==typeof Y.g&&"number"==typeof Y.b},p.Color.isColor=function(Y){return p.Color.isRgb(Y)||p.Color.test(Y)},p.Array=function(Y,ne){0==(Y=(Y||[]).valueOf()).length&&ne&&(Y=ne.valueOf()),this.value=this.parse(Y)},p.extend(p.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(Y){return Y=Y.valueOf(),Array.isArray(Y)?Y:this.split(Y)}}),p.PointArray=function(Y,ne){p.Array.call(this,Y,ne||[[0,0]])},p.PointArray.prototype=new p.Array,p.PointArray.prototype.constructor=p.PointArray;for(var y={M:function(Y,ne,be){return ne.x=be.x=Y[0],ne.y=be.y=Y[1],["M",ne.x,ne.y]},L:function(Y,ne){return ne.x=Y[0],ne.y=Y[1],["L",Y[0],Y[1]]},H:function(Y,ne){return ne.x=Y[0],["H",Y[0]]},V:function(Y,ne){return ne.y=Y[0],["V",Y[0]]},C:function(Y,ne){return ne.x=Y[4],ne.y=Y[5],["C",Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]]},Q:function(Y,ne){return ne.x=Y[2],ne.y=Y[3],["Q",Y[0],Y[1],Y[2],Y[3]]},Z:function(Y,ne,be){return ne.x=be.x,ne.y=be.y,["Z"]}},C="mlhvqtcsaz".split(""),M=0,L=C.length;M<L;++M)y[C[M]]=function(Y){return function(ne,be,Ie){if("H"==Y)ne[0]=ne[0]+be.x;else if("V"==Y)ne[0]=ne[0]+be.y;else if("A"==Y)ne[5]=ne[5]+be.x,ne[6]=ne[6]+be.y;else for(var Je=0,Nt=ne.length;Je<Nt;++Je)ne[Je]=ne[Je]+(Je%2?be.y:be.x);return y[Y](ne,be,Ie)}}(C[M].toUpperCase());p.PathArray=function(Y,ne){p.Array.call(this,Y,ne||[["M",0,0]])},p.PathArray.prototype=new p.Array,p.PathArray.prototype.constructor=p.PathArray,p.extend(p.PathArray,{toString:function(){return function(Y){for(var ne=0,be=Y.length,Ie="";ne<be;ne++)Ie+=Y[ne][0],null!=Y[ne][1]&&(Ie+=Y[ne][1],null!=Y[ne][2]&&(Ie+=" ",Ie+=Y[ne][2],null!=Y[ne][3]&&(Ie+=" ",Ie+=Y[ne][3],Ie+=" ",Ie+=Y[ne][4],null!=Y[ne][5]&&(Ie+=" ",Ie+=Y[ne][5],Ie+=" ",Ie+=Y[ne][6],null!=Y[ne][7]&&(Ie+=" ",Ie+=Y[ne][7])))));return Ie+" "}(this.value)},move:function(Y,ne){return this.bbox(),this},at:function(Y){if(!this.destination)return this;for(var ne=this.value,be=this.destination.value,Ie=[],Je=new p.PathArray,Nt=0,St=ne.length;Nt<St;Nt++){Ie[Nt]=[ne[Nt][0]];for(var Xt=1,gn=ne[Nt].length;Xt<gn;Xt++)Ie[Nt][Xt]=ne[Nt][Xt]+(be[Nt][Xt]-ne[Nt][Xt])*Y;"A"===Ie[Nt][0]&&(Ie[Nt][4]=+(0!=Ie[Nt][4]),Ie[Nt][5]=+(0!=Ie[Nt][5]))}return Je.value=Ie,Je},parse:function(Y){if(Y instanceof p.PathArray)return Y.valueOf();var ne,be={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};Y="string"==typeof Y?Y.replace(p.regex.numbersWithDots,H).replace(p.regex.pathLetters," $& ").replace(p.regex.hyphen,"$1 -").trim().split(p.regex.delimiter):Y.reduce(function(gn,hn){return[].concat.call(gn,hn)},[]);var Ie=[],Je=new p.Point,Nt=new p.Point,St=0,Xt=Y.length;do{p.regex.isPathLetter.test(Y[St])?(ne=Y[St],++St):"M"==ne?ne="L":"m"==ne&&(ne="l"),Ie.push(y[ne].call(null,Y.slice(St,St+=be[ne.toUpperCase()]).map(parseFloat),Je,Nt))}while(Xt>St);return Ie},bbox:function(){return p.parser.draw||p.prepare(),p.parser.path.setAttribute("d",this.toString()),p.parser.path.getBBox()}}),p.Number=p.invent({create:function(Y,ne){this.value=0,this.unit=ne||"","number"==typeof Y?this.value=isNaN(Y)?0:isFinite(Y)?Y:Y<0?-34e37:34e37:"string"==typeof Y?(ne=Y.match(p.regex.numberAndUnit))&&(this.value=parseFloat(ne[1]),"%"==ne[5]?this.value/=100:"s"==ne[5]&&(this.value*=1e3),this.unit=ne[5]):Y instanceof p.Number&&(this.value=Y.valueOf(),this.unit=Y.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(Y){return Y=new p.Number(Y),new p.Number(this+Y,this.unit||Y.unit)},minus:function(Y){return Y=new p.Number(Y),new p.Number(this-Y,this.unit||Y.unit)},times:function(Y){return Y=new p.Number(Y),new p.Number(this*Y,this.unit||Y.unit)},divide:function(Y){return Y=new p.Number(Y),new p.Number(this/Y,this.unit||Y.unit)},to:function(Y){var ne=new p.Number(this);return"string"==typeof Y&&(ne.unit=Y),ne},morph:function(Y){return this.destination=new p.Number(Y),Y.relative&&(this.destination.value+=this.value),this},at:function(Y){return this.destination?new p.Number(this.destination).minus(this).times(Y).plus(this):this}}}),p.Element=p.invent({create:function(Y){this._stroke=p.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=Y)&&(this.type=Y.nodeName,this.node.instance=this,this._stroke=Y.getAttribute("stroke")||this._stroke)},extend:{x:function(Y){return this.attr("x",Y)},y:function(Y){return this.attr("y",Y)},cx:function(Y){return null==Y?this.x()+this.width()/2:this.x(Y-this.width()/2)},cy:function(Y){return null==Y?this.y()+this.height()/2:this.y(Y-this.height()/2)},move:function(Y,ne){return this.x(Y).y(ne)},center:function(Y,ne){return this.cx(Y).cy(ne)},width:function(Y){return this.attr("width",Y)},height:function(Y){return this.attr("height",Y)},size:function(Y,ne){var be=K(this,Y,ne);return this.width(new p.Number(be.width)).height(new p.Number(be.height))},clone:function(Y){this.writeDataToDom();var ne=ge(this.node.cloneNode(!0));return Y?Y.add(ne):this.after(ne),ne},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(Y){return this.after(Y).remove(),Y},addTo:function(Y){return Y.put(this)},putIn:function(Y){return Y.add(this)},id:function(Y){return this.attr("id",Y)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var Y=this.attr("class");return null==Y?[]:Y.trim().split(p.regex.delimiter)},hasClass:function(Y){return-1!=this.classes().indexOf(Y)},addClass:function(Y){if(!this.hasClass(Y)){var ne=this.classes();ne.push(Y),this.attr("class",ne.join(" "))}return this},removeClass:function(Y){return this.hasClass(Y)&&this.attr("class",this.classes().filter(function(ne){return ne!=Y}).join(" ")),this},toggleClass:function(Y){return this.hasClass(Y)?this.removeClass(Y):this.addClass(Y)},reference:function(Y){return p.get(this.attr(Y))},parent:function(Y){var ne=this;if(!ne.node.parentNode)return null;if(ne=p.adopt(ne.node.parentNode),!Y)return ne;for(;ne&&ne.node instanceof ve.SVGElement;){if("string"==typeof Y?ne.matches(Y):ne instanceof Y)return ne;if(!ne.node.parentNode||"#document"==ne.node.parentNode.nodeName)return null;ne=p.adopt(ne.node.parentNode)}},doc:function(){return this instanceof p.Doc?this:this.parent(p.Doc)},parents:function(Y){var ne=[],be=this;do{if(!(be=be.parent(Y))||!be.node)break;ne.push(be)}while(be.parent);return ne},matches:function(Y){return((ne=this.node).matches||ne.matchesSelector||ne.msMatchesSelector||ne.mozMatchesSelector||ne.webkitMatchesSelector||ne.oMatchesSelector).call(ne,Y);var ne},native:function(){return this.node},svg:function(Y){var ne=d.createElement("svg");if(!(Y&&this instanceof p.Parent))return ne.appendChild(Y=d.createElement("svg")),this.writeDataToDom(),Y.appendChild(this.node.cloneNode(!0)),ne.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");ne.innerHTML="<svg>"+Y.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var be=0,Ie=ne.firstChild.childNodes.length;be<Ie;be++)this.node.appendChild(ne.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(Y){return this.dom=Y,this},is:function(Y){return this instanceof Y}}}),p.easing={"-":function(Y){return Y},"<>":function(Y){return-Math.cos(Y*Math.PI)/2+.5},">":function(Y){return Math.sin(Y*Math.PI/2)},"<":function(Y){return 1-Math.cos(Y*Math.PI/2)}},p.morph=function(Y){return function(ne,be){return new p.MorphObj(ne,be).at(Y)}},p.Situation=p.invent({create:function(Y){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new p.Number(Y.duration).valueOf(),this.delay=new p.Number(Y.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=Y.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),p.FX=p.invent({create:function(Y){this._target=Y,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(Y,ne,be){"object"===Vt(Y)&&(ne=Y.ease,be=Y.delay,Y=Y.duration);var Ie=new p.Situation({duration:Y||1e3,delay:be||0,ease:p.easing[ne||"-"]||ne});return this.queue(Ie),this},target:function(Y){return Y&&Y instanceof p.Element?(this._target=Y,this):this._target},timeToAbsPos:function(Y){return(Y-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(Y){return this.situation.duration/this._speed*Y+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=ve.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){ve.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(Y){return("function"==typeof Y||Y instanceof p.Situation)&&this.situations.push(Y),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof p.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var Y,ne=this.situation;if(ne.init)return this;for(var be in ne.animations){Y=this.target()[be](),Array.isArray(Y)||(Y=[Y]),Array.isArray(ne.animations[be])||(ne.animations[be]=[ne.animations[be]]);for(var Ie=Y.length;Ie--;)ne.animations[be][Ie]instanceof p.Number&&(Y[Ie]=new p.Number(Y[Ie])),ne.animations[be][Ie]=Y[Ie].morph(ne.animations[be][Ie])}for(var be in ne.attrs)ne.attrs[be]=new p.MorphObj(this.target().attr(be),ne.attrs[be]);for(var be in ne.styles)ne.styles[be]=new p.MorphObj(this.target().style(be),ne.styles[be]);return ne.initialTransformation=this.target().matrixify(),ne.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(Y,ne){var be=this.active;return this.active=!1,ne&&this.clearQueue(),Y&&this.situation&&(!be&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(Y){var ne=this.last();return this.target().on("finished.fx",function be(Ie){Ie.detail.situation==ne&&(Y.call(this,ne),this.off("finished.fx",be))}),this._callStart()},during:function(Y){var ne=this.last(),be=function(Ie){Ie.detail.situation==ne&&Y.call(this,Ie.detail.pos,p.morph(Ie.detail.pos),Ie.detail.eased,ne)};return this.target().off("during.fx",be).on("during.fx",be),this.after(function(){this.off("during.fx",be)}),this._callStart()},afterAll:function(Y){var ne=function be(Ie){Y.call(this),this.off("allfinished.fx",be)};return this.target().off("allfinished.fx",ne).on("allfinished.fx",ne),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(Y,ne,be){return this.last()[be||"animations"][Y]=ne,this._callStart()},step:function(Y){var ne,be,Ie;Y||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(ne=Math.max(this.absPos,0),be=Math.floor(ne),!0===this.situation.loops||be<this.situation.loops?(this.pos=ne-be,Ie=this.situation.loop,this.situation.loop=be):(this.absPos=this.situation.loops,this.pos=1,Ie=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-Ie)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Je=this.situation.ease(this.pos);for(var Nt in this.situation.once)Nt>this.lastPos&&Nt<=Je&&(this.situation.once[Nt].call(this.target(),this.pos,Je),delete this.situation.once[Nt]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Je,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Je,this):this},eachAt:function(){var Y,ne=this,be=this.target(),Ie=this.situation;for(var Je in Ie.animations)Y=[].concat(Ie.animations[Je]).map(function(Xt){return"string"!=typeof Xt&&Xt.at?Xt.at(Ie.ease(ne.pos),ne.pos):Xt}),be[Je].apply(be,Y);for(var Je in Ie.attrs)Y=[Je].concat(Ie.attrs[Je]).map(function(gn){return"string"!=typeof gn&&gn.at?gn.at(Ie.ease(ne.pos),ne.pos):gn}),be.attr.apply(be,Y);for(var Je in Ie.styles)Y=[Je].concat(Ie.styles[Je]).map(function(gn){return"string"!=typeof gn&&gn.at?gn.at(Ie.ease(ne.pos),ne.pos):gn}),be.style.apply(be,Y);if(Ie.transforms.length){Y=Ie.initialTransformation,Je=0;for(var Nt=Ie.transforms.length;Je<Nt;Je++){var St=Ie.transforms[Je];St instanceof p.Matrix?Y=St.relative?Y.multiply((new p.Matrix).morph(St).at(Ie.ease(this.pos))):Y.morph(St).at(Ie.ease(this.pos)):(St.relative||St.undo(Y.extract()),Y=Y.multiply(St.at(Ie.ease(this.pos))))}be.matrix(Y)}return this},once:function(Y,ne,be){var Ie=this.last();return be||(Y=Ie.ease(Y)),Ie.once[Y]=ne,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:p.Element,construct:{animate:function(Y,ne,be){return(this.fx||(this.fx=new p.FX(this))).animate(Y,ne,be)},delay:function(Y){return(this.fx||(this.fx=new p.FX(this))).delay(Y)},stop:function(Y,ne){return this.fx&&this.fx.stop(Y,ne),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),p.MorphObj=p.invent({create:function(Y,ne){return p.Color.isColor(ne)?new p.Color(Y).morph(ne):p.regex.delimiter.test(Y)?p.regex.pathLetters.test(Y)?new p.PathArray(Y).morph(ne):new p.Array(Y).morph(ne):p.regex.numberAndUnit.test(ne)?new p.Number(Y).morph(ne):(this.value=Y,void(this.destination=ne))},extend:{at:function(Y,ne){return ne<1?this.value:this.destination},valueOf:function(){return this.value}}}),p.extend(p.FX,{attr:function(Y,ne,be){if("object"===Vt(Y))for(var Ie in Y)this.attr(Ie,Y[Ie]);else this.add(Y,ne,"attrs");return this},plot:function(Y,ne,be,Ie){return 4==arguments.length?this.plot([Y,ne,be,Ie]):this.add("plot",new(this.target().morphArray)(Y))}}),p.Box=p.invent({create:function(Y,ne,be,Ie){if(!("object"!==Vt(Y)||Y instanceof p.Element))return p.Box.call(this,null!=Y.left?Y.left:Y.x,null!=Y.top?Y.top:Y.y,Y.width,Y.height);4==arguments.length&&(this.x=Y,this.y=ne,this.width=be,this.height=Ie),xe(this)}}),p.BBox=p.invent({create:function(Y){if(p.Box.apply(this,[].slice.call(arguments)),Y instanceof p.Element){var ne;try{if(!d.documentElement.contains){for(var be=Y.node;be.parentNode;)be=be.parentNode;if(be!=d)throw new Error("Element not in the dom")}ne=Y.node.getBBox()}catch(Je){if(Y instanceof p.Shape){p.parser.draw||p.prepare();var Ie=Y.clone(p.parser.draw.instance).show();ne=Ie.node.getBBox(),Ie.remove()}else ne={x:Y.node.clientLeft,y:Y.node.clientTop,width:Y.node.clientWidth,height:Y.node.clientHeight}}p.Box.call(this,ne)}},inherit:p.Box,parent:p.Element,construct:{bbox:function(){return new p.BBox(this)}}}),p.BBox.prototype.constructor=p.BBox,p.Matrix=p.invent({create:function(Y){var ne=pe([1,0,0,1,0,0]);Y=null===Y?ne:Y instanceof p.Element?Y.matrixify():"string"==typeof Y?pe(Y.split(p.regex.delimiter).map(parseFloat)):6==arguments.length?pe([].slice.call(arguments)):Array.isArray(Y)?pe(Y):Y&&"object"===Vt(Y)?Y:ne;for(var be=ze.length-1;be>=0;--be)this[ze[be]]=null!=Y[ze[be]]?Y[ze[be]]:ne[ze[be]]},extend:{extract:function(){var Y=ae(this,0,1);ae(this,1,0);var ne=180/Math.PI*Math.atan2(Y.y,Y.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(ne*Math.PI/180)+this.f*Math.sin(ne*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(ne*Math.PI/180)+this.e*Math.sin(-ne*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:ne,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new p.Matrix(this)}},clone:function(){return new p.Matrix(this)},morph:function(Y){return this.destination=new p.Matrix(Y),this},multiply:function(Y){return new p.Matrix(this.native().multiply((ne=Y,ne instanceof p.Matrix||(ne=new p.Matrix(ne)),ne).native()));var ne},inverse:function(){return new p.Matrix(this.native().inverse())},translate:function(Y,ne){return new p.Matrix(this.native().translate(Y||0,ne||0))},native:function(){for(var Y=p.parser.native.createSVGMatrix(),ne=ze.length-1;ne>=0;ne--)Y[ze[ne]]=this[ze[ne]];return Y},toString:function(){return"matrix("+Me(this.a)+","+Me(this.b)+","+Me(this.c)+","+Me(this.d)+","+Me(this.e)+","+Me(this.f)+")"}},parent:p.Element,construct:{ctm:function(){return new p.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof p.Nested){var Y=this.rect(1,1),ne=Y.node.getScreenCTM();return Y.remove(),new p.Matrix(ne)}return new p.Matrix(this.node.getScreenCTM())}}}),p.Point=p.invent({create:function(Y,ne){var be;be=Array.isArray(Y)?{x:Y[0],y:Y[1]}:"object"===Vt(Y)?{x:Y.x,y:Y.y}:null!=Y?{x:Y,y:null!=ne?ne:Y}:{x:0,y:0},this.x=be.x,this.y=be.y},extend:{clone:function(){return new p.Point(this)},morph:function(Y,ne){return this.destination=new p.Point(Y,ne),this}}}),p.extend(p.Element,{point:function(Y,ne){return new p.Point(Y,ne).transform(this.screenCTM().inverse())}}),p.extend(p.Element,{attr:function(Y,ne,be){if(null==Y){for(Y={},be=(ne=this.node.attributes).length-1;be>=0;be--)Y[ne[be].nodeName]=p.regex.isNumber.test(ne[be].nodeValue)?parseFloat(ne[be].nodeValue):ne[be].nodeValue;return Y}if("object"===Vt(Y))for(var Ie in Y)this.attr(Ie,Y[Ie]);else if(null===ne)this.node.removeAttribute(Y);else{if(null==ne)return null==(ne=this.node.getAttribute(Y))?p.defaults.attrs[Y]:p.regex.isNumber.test(ne)?parseFloat(ne):ne;"stroke-width"==Y?this.attr("stroke",parseFloat(ne)>0?this._stroke:null):"stroke"==Y&&(this._stroke=ne),"fill"!=Y&&"stroke"!=Y||(p.regex.isImage.test(ne)&&(ne=this.doc().defs().image(ne,0,0)),ne instanceof p.Image&&(ne=this.doc().defs().pattern(0,0,function(){this.add(ne)}))),"number"==typeof ne?ne=new p.Number(ne):p.Color.isColor(ne)?ne=new p.Color(ne):Array.isArray(ne)&&(ne=new p.Array(ne)),"leading"==Y?this.leading&&this.leading(ne):"string"==typeof be?this.node.setAttributeNS(be,Y,ne.toString()):this.node.setAttribute(Y,ne.toString()),!this.rebuild||"font-size"!=Y&&"x"!=Y||this.rebuild(Y,ne)}return this}}),p.extend(p.Element,{transform:function(Y,ne){var be;return"object"!==Vt(Y)?(be=new p.Matrix(this).extract(),"string"==typeof Y?be[Y]:be):(be=new p.Matrix(this),ne=!!ne||!!Y.relative,null!=Y.a&&(be=ne?be.multiply(new p.Matrix(Y)):new p.Matrix(Y)),this.attr("transform",be))}}),p.extend(p.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(p.regex.transforms).slice(0,-1).map(function(Y){var ne=Y.trim().split("(");return[ne[0],ne[1].split(p.regex.delimiter).map(function(be){return parseFloat(be)})]}).reduce(function(Y,ne){return"matrix"==ne[0]?Y.multiply(pe(ne[1])):Y[ne[0]].apply(Y,ne[1])},new p.Matrix)},toParent:function(Y){if(this==Y)return this;var ne=this.screenCTM(),be=Y.screenCTM().inverse();return this.addTo(Y).untransform().transform(be.multiply(ne)),this},toDoc:function(){return this.toParent(this.doc())}}),p.Transformation=p.invent({create:function(Y,ne){if(arguments.length>1&&"boolean"!=typeof ne)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(Y))for(var be=0,Ie=this.arguments.length;be<Ie;++be)this[this.arguments[be]]=Y[be];else if(Y&&"object"===Vt(Y))for(be=0,Ie=this.arguments.length;be<Ie;++be)this[this.arguments[be]]=Y[this.arguments[be]];this.inversed=!1,!0===ne&&(this.inversed=!0)}}),p.Translate=p.invent({parent:p.Matrix,inherit:p.Transformation,create:function(Y,ne){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),p.extend(p.Element,{style:function(Y,ne){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===Vt(Y))for(var be in Y)this.style(be,Y[be]);else{if(!p.regex.isCss.test(Y))return this.node.style[G(Y)];for(Y=Y.split(/\s*;\s*/).filter(function(Ie){return!!Ie}).map(function(Ie){return Ie.split(/\s*:\s*/)});ne=Y.pop();)this.style(ne[0],ne[1])}else this.node.style[G(Y)]=null===ne||p.regex.isBlank.test(ne)?"":ne;return this}}),p.Parent=p.invent({create:function(Y){this.constructor.call(this,Y)},inherit:p.Element,extend:{children:function(){return p.utils.map(p.utils.filterSVGElements(this.node.childNodes),function(Y){return p.adopt(Y)})},add:function(Y,ne){return null==ne?this.node.appendChild(Y.node):Y.node!=this.node.childNodes[ne]&&this.node.insertBefore(Y.node,this.node.childNodes[ne]),this},put:function(Y,ne){return this.add(Y,ne),Y},has:function(Y){return this.index(Y)>=0},index:function(Y){return[].slice.call(this.node.childNodes).indexOf(Y.node)},get:function(Y){return p.adopt(this.node.childNodes[Y])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(Y,ne){for(var be=this.children(),Ie=0,Je=be.length;Ie<Je;Ie++)be[Ie]instanceof p.Element&&Y.apply(be[Ie],[Ie,be]),ne&&be[Ie]instanceof p.Container&&be[Ie].each(Y,ne);return this},removeElement:function(Y){return this.node.removeChild(Y.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),p.extend(p.Parent,{ungroup:function(Y,ne){return 0===ne||this instanceof p.Defs||this.node==p.parser.draw||(Y=Y||(this instanceof p.Doc?this:this.parent(p.Parent)),ne=ne||1/0,this.each(function(){return this instanceof p.Defs?this:this instanceof p.Parent?this.ungroup(Y,ne-1):this.toParent(Y)}),this.node.firstChild||this.remove()),this},flatten:function(Y,ne){return this.ungroup(Y,ne)}}),p.Container=p.invent({create:function(Y){this.constructor.call(this,Y)},inherit:p.Parent}),p.ViewBox=p.invent({parent:p.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(Y){p.Element.prototype[Y]=function(ne){return p.on(this.node,Y,ne),this}}),p.listeners=[],p.handlerMap=[],p.listenerId=0,p.on=function(Y,ne,be,Ie,Je){var Nt=be.bind(Ie||Y.instance||Y),St=(p.handlerMap.indexOf(Y)+1||p.handlerMap.push(Y))-1,Xt=ne.split(".")[0],gn=ne.split(".")[1]||"*";p.listeners[St]=p.listeners[St]||{},p.listeners[St][Xt]=p.listeners[St][Xt]||{},p.listeners[St][Xt][gn]=p.listeners[St][Xt][gn]||{},be._svgjsListenerId||(be._svgjsListenerId=++p.listenerId),p.listeners[St][Xt][gn][be._svgjsListenerId]=Nt,Y.addEventListener(Xt,Nt,Je||{passive:!0})},p.off=function(Y,ne,be){var Ie=p.handlerMap.indexOf(Y),Je=ne&&ne.split(".")[0],Nt=ne&&ne.split(".")[1],St="";if(-1!=Ie)if(be){if("function"==typeof be&&(be=be._svgjsListenerId),!be)return;p.listeners[Ie][Je]&&p.listeners[Ie][Je][Nt||"*"]&&(Y.removeEventListener(Je,p.listeners[Ie][Je][Nt||"*"][be],!1),delete p.listeners[Ie][Je][Nt||"*"][be])}else if(Nt&&Je){if(p.listeners[Ie][Je]&&p.listeners[Ie][Je][Nt]){for(var Xt in p.listeners[Ie][Je][Nt])p.off(Y,[Je,Nt].join("."),Xt);delete p.listeners[Ie][Je][Nt]}}else if(Nt)for(var gn in p.listeners[Ie])for(var St in p.listeners[Ie][gn])Nt===St&&p.off(Y,[gn,Nt].join("."));else if(Je){if(p.listeners[Ie][Je]){for(var St in p.listeners[Ie][Je])p.off(Y,[Je,St].join("."));delete p.listeners[Ie][Je]}}else{for(var gn in p.listeners[Ie])p.off(Y,gn);delete p.listeners[Ie],delete p.handlerMap[Ie]}},p.extend(p.Element,{on:function(Y,ne,be,Ie){return p.on(this.node,Y,ne,be,Ie),this},off:function(Y,ne){return p.off(this.node,Y,ne),this},fire:function(Y,ne){return this.node.dispatchEvent(Y instanceof ve.Event?Y:Y=new p.CustomEvent(Y,{detail:ne,cancelable:!0})),this._event=Y,this},event:function(){return this._event}}),p.Defs=p.invent({create:"defs",inherit:p.Container}),p.G=p.invent({create:"g",inherit:p.Container,extend:{x:function(Y){return null==Y?this.transform("x"):this.transform({x:Y-this.x()},!0)}},construct:{group:function(){return this.put(new p.G)}}}),p.Doc=p.invent({create:function(Y){Y&&("svg"==(Y="string"==typeof Y?d.getElementById(Y):Y).nodeName?this.constructor.call(this,Y):(this.constructor.call(this,p.create("svg")),Y.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:p.Container,extend:{namespace:function(){return this.attr({xmlns:p.ns,version:"1.1"}).attr("xmlns:xlink",p.xlink,p.xmlns).attr("xmlns:svgjs",p.svgjs,p.xmlns)},defs:function(){var Y;return this._defs||(this._defs=(Y=this.node.getElementsByTagName("defs")[0])?p.adopt(Y):new p.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,p.parser.draw&&!p.parser.draw.parentNode&&this.node.appendChild(p.parser.draw),this},clone:function(Y){this.writeDataToDom();var ne=this.node,be=ge(ne.cloneNode(!0));return Y?(Y.node||Y).appendChild(be.node):ne.parentNode.insertBefore(be.node,ne.nextSibling),be}}}),p.extend(p.Element,{}),p.Gradient=p.invent({create:function(Y){this.constructor.call(this,p.create(Y+"Gradient")),this.type=Y},inherit:p.Container,extend:{at:function(Y,ne,be){return this.put(new p.Stop).update(Y,ne,be)},update:function(Y){return this.clear(),"function"==typeof Y&&Y.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(Y,ne,be){return"transform"==Y&&(Y="gradientTransform"),p.Container.prototype.attr.call(this,Y,ne,be)}},construct:{gradient:function(Y,ne){return this.defs().gradient(Y,ne)}}}),p.extend(p.Gradient,p.FX,{from:function(Y,ne){return this.attr("radial"==(this._target||this).type?{fx:new p.Number(Y),fy:new p.Number(ne)}:{x1:new p.Number(Y),y1:new p.Number(ne)})},to:function(Y,ne){return this.attr("radial"==(this._target||this).type?{cx:new p.Number(Y),cy:new p.Number(ne)}:{x2:new p.Number(Y),y2:new p.Number(ne)})}}),p.extend(p.Defs,{gradient:function(Y,ne){return this.put(new p.Gradient(Y)).update(ne)}}),p.Stop=p.invent({create:"stop",inherit:p.Element,extend:{update:function(Y){return("number"==typeof Y||Y instanceof p.Number)&&(Y={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=Y.opacity&&this.attr("stop-opacity",Y.opacity),null!=Y.color&&this.attr("stop-color",Y.color),null!=Y.offset&&this.attr("offset",new p.Number(Y.offset)),this}}}),p.Pattern=p.invent({create:"pattern",inherit:p.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(Y){return this.clear(),"function"==typeof Y&&Y.call(this,this),this},toString:function(){return this.fill()},attr:function(Y,ne,be){return"transform"==Y&&(Y="patternTransform"),p.Container.prototype.attr.call(this,Y,ne,be)}},construct:{pattern:function(Y,ne,be){return this.defs().pattern(Y,ne,be)}}}),p.extend(p.Defs,{pattern:function(Y,ne,be){return this.put(new p.Pattern).update(be).attr({x:0,y:0,width:Y,height:ne,patternUnits:"userSpaceOnUse"})}}),p.Shape=p.invent({create:function(Y){this.constructor.call(this,Y)},inherit:p.Element}),p.Symbol=p.invent({create:"symbol",inherit:p.Container,construct:{symbol:function(){return this.put(new p.Symbol)}}}),p.Use=p.invent({create:"use",inherit:p.Shape,extend:{element:function(Y,ne){return this.attr("href",(ne||"")+"#"+Y,p.xlink)}},construct:{use:function(Y,ne){return this.put(new p.Use).element(Y,ne)}}}),p.Rect=p.invent({create:"rect",inherit:p.Shape,construct:{rect:function(Y,ne){return this.put(new p.Rect).size(Y,ne)}}}),p.Circle=p.invent({create:"circle",inherit:p.Shape,construct:{circle:function(Y){return this.put(new p.Circle).rx(new p.Number(Y).divide(2)).move(0,0)}}}),p.extend(p.Circle,p.FX,{rx:function(Y){return this.attr("r",Y)},ry:function(Y){return this.rx(Y)}}),p.Ellipse=p.invent({create:"ellipse",inherit:p.Shape,construct:{ellipse:function(Y,ne){return this.put(new p.Ellipse).size(Y,ne).move(0,0)}}}),p.extend(p.Ellipse,p.Rect,p.FX,{rx:function(Y){return this.attr("rx",Y)},ry:function(Y){return this.attr("ry",Y)}}),p.extend(p.Circle,p.Ellipse,{x:function(Y){return null==Y?this.cx()-this.rx():this.cx(Y+this.rx())},y:function(Y){return null==Y?this.cy()-this.ry():this.cy(Y+this.ry())},cx:function(Y){return null==Y?this.attr("cx"):this.attr("cx",Y)},cy:function(Y){return null==Y?this.attr("cy"):this.attr("cy",Y)},width:function(Y){return null==Y?2*this.rx():this.rx(new p.Number(Y).divide(2))},height:function(Y){return null==Y?2*this.ry():this.ry(new p.Number(Y).divide(2))},size:function(Y,ne){var be=K(this,Y,ne);return this.rx(new p.Number(be.width).divide(2)).ry(new p.Number(be.height).divide(2))}}),p.Line=p.invent({create:"line",inherit:p.Shape,extend:{array:function(){return new p.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(Y,ne,be,Ie){return null==Y?this.array():(Y=void 0!==ne?{x1:Y,y1:ne,x2:be,y2:Ie}:new p.PointArray(Y).toLine(),this.attr(Y))},move:function(Y,ne){return this.attr(this.array().move(Y,ne).toLine())},size:function(Y,ne){var be=K(this,Y,ne);return this.attr(this.array().size(be.width,be.height).toLine())}},construct:{line:function(Y,ne,be,Ie){return p.Line.prototype.plot.apply(this.put(new p.Line),null!=Y?[Y,ne,be,Ie]:[0,0,0,0])}}}),p.Polyline=p.invent({create:"polyline",inherit:p.Shape,construct:{polyline:function(Y){return this.put(new p.Polyline).plot(Y||new p.PointArray)}}}),p.Polygon=p.invent({create:"polygon",inherit:p.Shape,construct:{polygon:function(Y){return this.put(new p.Polygon).plot(Y||new p.PointArray)}}}),p.extend(p.Polyline,p.Polygon,{array:function(){return this._array||(this._array=new p.PointArray(this.attr("points")))},plot:function(Y){return null==Y?this.array():this.clear().attr("points","string"==typeof Y?Y:this._array=new p.PointArray(Y))},clear:function(){return delete this._array,this},move:function(Y,ne){return this.attr("points",this.array().move(Y,ne))},size:function(Y,ne){var be=K(this,Y,ne);return this.attr("points",this.array().size(be.width,be.height))}}),p.extend(p.Line,p.Polyline,p.Polygon,{morphArray:p.PointArray,x:function(Y){return null==Y?this.bbox().x:this.move(Y,this.bbox().y)},y:function(Y){return null==Y?this.bbox().y:this.move(this.bbox().x,Y)},width:function(Y){var ne=this.bbox();return null==Y?ne.width:this.size(Y,ne.height)},height:function(Y){var ne=this.bbox();return null==Y?ne.height:this.size(ne.width,Y)}}),p.Path=p.invent({create:"path",inherit:p.Shape,extend:{morphArray:p.PathArray,array:function(){return this._array||(this._array=new p.PathArray(this.attr("d")))},plot:function(Y){return null==Y?this.array():this.clear().attr("d","string"==typeof Y?Y:this._array=new p.PathArray(Y))},clear:function(){return delete this._array,this}},construct:{path:function(Y){return this.put(new p.Path).plot(Y||new p.PathArray)}}}),p.Image=p.invent({create:"image",inherit:p.Shape,extend:{load:function(Y){if(!Y)return this;var ne=this,be=new ve.Image;return p.on(be,"load",function(){p.off(be);var Ie=ne.parent(p.Pattern);null!==Ie&&(0==ne.width()&&0==ne.height()&&ne.size(be.width,be.height),Ie&&0==Ie.width()&&0==Ie.height()&&Ie.size(ne.width(),ne.height()),"function"==typeof ne._loaded&&ne._loaded.call(ne,{width:be.width,height:be.height,ratio:be.width/be.height,url:Y}))}),p.on(be,"error",function(Ie){p.off(be),"function"==typeof ne._error&&ne._error.call(ne,Ie)}),this.attr("href",be.src=this.src=Y,p.xlink)},loaded:function(Y){return this._loaded=Y,this},error:function(Y){return this._error=Y,this}},construct:{image:function(Y,ne,be){return this.put(new p.Image).load(Y).size(ne||0,be||ne||0)}}}),p.Text=p.invent({create:function(){this.constructor.call(this,p.create("text")),this.dom.leading=new p.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",p.defaults.attrs["font-family"])},inherit:p.Shape,extend:{x:function(Y){return null==Y?this.attr("x"):this.attr("x",Y)},text:function(Y){if(void 0===Y){Y="";for(var ne=this.node.childNodes,be=0,Ie=ne.length;be<Ie;++be)0!=be&&3!=ne[be].nodeType&&1==p.adopt(ne[be]).dom.newLined&&(Y+="\n"),Y+=ne[be].textContent;return Y}if(this.clear().build(!0),"function"==typeof Y)Y.call(this,this);else{be=0;for(var Je=(Y=Y.split("\n")).length;be<Je;be++)this.tspan(Y[be]).newLine()}return this.build(!1).rebuild()},size:function(Y){return this.attr("font-size",Y).rebuild()},leading:function(Y){return null==Y?this.dom.leading:(this.dom.leading=new p.Number(Y),this.rebuild())},lines:function(){var Y=(this.textPath&&this.textPath()||this).node,ne=p.utils.map(p.utils.filterSVGElements(Y.childNodes),function(be){return p.adopt(be)});return new p.Set(ne)},rebuild:function(Y){if("boolean"==typeof Y&&(this._rebuild=Y),this._rebuild){var ne=this,be=0,Ie=this.dom.leading*new p.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(ne.textPath()||this.attr("x",ne.attr("x")),"\n"==this.text()?be+=Ie:(this.attr("dy",Ie+be),be=0))}),this.fire("rebuild")}return this},build:function(Y){return this._build=!!Y,this},setData:function(Y){return this.dom=Y,this.dom.leading=new p.Number(Y.leading||1.3),this}},construct:{text:function(Y){return this.put(new p.Text).text(Y)},plain:function(Y){return this.put(new p.Text).plain(Y)}}}),p.Tspan=p.invent({create:"tspan",inherit:p.Shape,extend:{text:function(Y){return null==Y?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof Y?Y.call(this,this):this.plain(Y),this)},dx:function(Y){return this.attr("dx",Y)},dy:function(Y){return this.attr("dy",Y)},newLine:function(){var Y=this.parent(p.Text);return this.dom.newLined=!0,this.dy(Y.dom.leading*Y.attr("font-size")).attr("x",Y.x())}}}),p.extend(p.Text,p.Tspan,{plain:function(Y){return!1===this._build&&this.clear(),this.node.appendChild(d.createTextNode(Y)),this},tspan:function(Y){var ne=(this.textPath&&this.textPath()||this).node,be=new p.Tspan;return!1===this._build&&this.clear(),ne.appendChild(be.node),be.text(Y)},clear:function(){for(var Y=(this.textPath&&this.textPath()||this).node;Y.hasChildNodes();)Y.removeChild(Y.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),p.TextPath=p.invent({create:"textPath",inherit:p.Parent,parent:p.Text,construct:{morphArray:p.PathArray,array:function(){var Y=this.track();return Y?Y.array():null},plot:function(Y){var ne=this.track(),be=null;return ne&&(be=ne.plot(Y)),null==Y?be:this},track:function(){var Y=this.textPath();if(Y)return Y.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return p.adopt(this.node.firstChild)}}}),p.Nested=p.invent({create:function(){this.constructor.call(this,p.create("svg")),this.style("overflow","visible")},inherit:p.Container,construct:{nested:function(){return this.put(new p.Nested)}}});var R={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(Y,ne){return"color"==ne?Y:Y+"-"+ne}};function H(Y,ne,be,Ie){return be+Ie.replace(p.regex.dots," .")}function G(Y){return Y.toLowerCase().replace(/-(.)/g,function(ne,be){return be.toUpperCase()})}function J(Y){return Y.charAt(0).toUpperCase()+Y.slice(1)}function te(Y){var ne=Y.toString(16);return 1==ne.length?"0"+ne:ne}function K(Y,ne,be){if(null==ne||null==be){var Ie=Y.bbox();null==ne?ne=Ie.width/Ie.height*be:null==be&&(be=Ie.height/Ie.width*ne)}return{width:ne,height:be}}function ae(Y,ne,be){return{x:ne*Y.a+be*Y.c+0,y:ne*Y.b+be*Y.d+0}}function pe(Y){return{a:Y[0],b:Y[1],c:Y[2],d:Y[3],e:Y[4],f:Y[5]}}function ge(Y){for(var ne=Y.childNodes.length-1;ne>=0;ne--)Y.childNodes[ne]instanceof ve.SVGElement&&ge(Y.childNodes[ne]);return p.adopt(Y).id(p.eid(Y.nodeName))}function xe(Y){return null==Y.x&&(Y.x=0,Y.y=0,Y.width=0,Y.height=0),Y.w=Y.width,Y.h=Y.height,Y.x2=Y.x+Y.width,Y.y2=Y.y+Y.height,Y.cx=Y.x+Y.width/2,Y.cy=Y.y+Y.height/2,Y}function Me(Y){return Math.abs(Y)>1e-37?Y:0}["fill","stroke"].forEach(function(Y){var ne={};ne[Y]=function(be){if(void 0===be)return this;if("string"==typeof be||p.Color.isRgb(be)||be&&"function"==typeof be.fill)this.attr(Y,be);else for(var Ie=R[Y].length-1;Ie>=0;Ie--)null!=be[R[Y][Ie]]&&this.attr(R.prefix(Y,R[Y][Ie]),be[R[Y][Ie]]);return this},p.extend(p.Element,p.FX,ne)}),p.extend(p.Element,p.FX,{translate:function(Y,ne){return this.transform({x:Y,y:ne})},matrix:function(Y){return this.attr("transform",new p.Matrix(6==arguments.length?[].slice.call(arguments):Y))},opacity:function(Y){return this.attr("opacity",Y)},dx:function(Y){return this.x(new p.Number(Y).plus(this instanceof p.FX?0:this.x()),!0)},dy:function(Y){return this.y(new p.Number(Y).plus(this instanceof p.FX?0:this.y()),!0)}}),p.extend(p.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(Y){return this.node.getPointAtLength(Y)}}),p.Set=p.invent({create:function(Y){Array.isArray(Y)?this.members=Y:this.clear()},extend:{add:function(){for(var Y=[].slice.call(arguments),ne=0,be=Y.length;ne<be;ne++)this.members.push(Y[ne]);return this},remove:function(Y){var ne=this.index(Y);return ne>-1&&this.members.splice(ne,1),this},each:function(Y){for(var ne=0,be=this.members.length;ne<be;ne++)Y.apply(this.members[ne],[ne,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(Y){return this.index(Y)>=0},index:function(Y){return this.members.indexOf(Y)},get:function(Y){return this.members[Y]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(Y){return new p.Set(Y)}}}),p.FX.Set=p.invent({create:function(Y){this.set=Y}}),p.Set.inherit=function(){var Y=[];for(var ne in p.Shape.prototype)"function"==typeof p.Shape.prototype[ne]&&"function"!=typeof p.Set.prototype[ne]&&Y.push(ne);for(var ne in Y.forEach(function(Ie){p.Set.prototype[Ie]=function(){for(var Je=0,Nt=this.members.length;Je<Nt;Je++)this.members[Je]&&"function"==typeof this.members[Je][Ie]&&this.members[Je][Ie].apply(this.members[Je],arguments);return"animate"==Ie?this.fx||(this.fx=new p.FX.Set(this)):this}}),Y=[],p.FX.prototype)"function"==typeof p.FX.prototype[ne]&&"function"!=typeof p.FX.Set.prototype[ne]&&Y.push(ne);Y.forEach(function(be){p.FX.Set.prototype[be]=function(){for(var Ie=0,Je=this.set.members.length;Ie<Je;Ie++)this.set.members[Ie].fx[be].apply(this.set.members[Ie].fx,arguments);return this}})},p.extend(p.Element,{}),p.extend(p.Element,{remember:function(Y,ne){if("object"===Vt(arguments[0]))for(var be in Y)this.remember(be,Y[be]);else{if(1==arguments.length)return this.memory()[Y];this.memory()[Y]=ne}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var Y=arguments.length-1;Y>=0;Y--)delete this.memory()[arguments[Y]];return this},memory:function(){return this._memory||(this._memory={})}}),p.get=function(Y){var ne=d.getElementById(function(be){var Ie=(be||"").toString().match(p.regex.reference);if(Ie)return Ie[1]}(Y)||Y);return p.adopt(ne)},p.select=function(Y,ne){return new p.Set(p.utils.map((ne||d).querySelectorAll(Y),function(be){return p.adopt(be)}))},p.extend(p.Parent,{select:function(Y){return p.select(Y,this.node)}});var ze="abcdef".split("");if("function"!=typeof ve.CustomEvent){var Ke=function(Y,ne){ne=ne||{bubbles:!1,cancelable:!1,detail:void 0};var be=d.createEvent("CustomEvent");return be.initCustomEvent(Y,ne.bubbles,ne.cancelable,ne.detail),be};Ke.prototype=ve.Event.prototype,p.CustomEvent=Ke}else p.CustomEvent=ve.CustomEvent;return p},void 0!==(s=function(){return qe(De,De.document)}.call(_n,nt,_n,ai))&&(ai.exports=s),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(R,H){return this.add(R,H),!R.attr("in")&&this.autoSetIn&&R.attr("in",this.source),R.attr("result")||R.attr("result",R),R},blend:function(R,H,G){return this.put(new SVG.BlendEffect(R,H,G))},colorMatrix:function(R,H){return this.put(new SVG.ColorMatrixEffect(R,H))},convolveMatrix:function(R){return this.put(new SVG.ConvolveMatrixEffect(R))},componentTransfer:function(R){return this.put(new SVG.ComponentTransferEffect(R))},composite:function(R,H,G){return this.put(new SVG.CompositeEffect(R,H,G))},flood:function(R,H){return this.put(new SVG.FloodEffect(R,H))},offset:function(R,H){return this.put(new SVG.OffsetEffect(R,H))},image:function(R){return this.put(new SVG.ImageEffect(R))},merge:function(){var R=[void 0];for(var H in arguments)R.push(arguments[H]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,R)))},gaussianBlur:function(R,H){return this.put(new SVG.GaussianBlurEffect(R,H))},morphology:function(R,H){return this.put(new SVG.MorphologyEffect(R,H))},diffuseLighting:function(R,H,G){return this.put(new SVG.DiffuseLightingEffect(R,H,G))},displacementMap:function(R,H,G,J,te){return this.put(new SVG.DisplacementMapEffect(R,H,G,J,te))},specularLighting:function(R,H,G,J){return this.put(new SVG.SpecularLightingEffect(R,H,G,J))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(R,H,G,J,te){return this.put(new SVG.TurbulenceEffect(R,H,G,J,te))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(R){var H=this.put(new SVG.Filter);return"function"==typeof R&&R.call(H,H),H}}),SVG.extend(SVG.Container,{filter:function(R){return this.defs().filter(R)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(R){return this.filterer=R instanceof SVG.Element?R:this.doc().filter(R),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(R){return this.filterer&&!0===R&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(R){return null==R?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",R)},result:function(R){return null==R?this.attr("result"):this.attr("result",R)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(R){return null==R?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",R)},result:function(R){return null==R?this.attr("result"):this.attr("result",R)},toString:function(){return this.result()}}});var ve={blend:function(R,H){return this.parent()&&this.parent().blend(this,R,H)},colorMatrix:function(R,H){return this.parent()&&this.parent().colorMatrix(R,H).in(this)},convolveMatrix:function(R){return this.parent()&&this.parent().convolveMatrix(R).in(this)},componentTransfer:function(R){return this.parent()&&this.parent().componentTransfer(R).in(this)},composite:function(R,H){return this.parent()&&this.parent().composite(this,R,H)},flood:function(R,H){return this.parent()&&this.parent().flood(R,H)},offset:function(R,H){return this.parent()&&this.parent().offset(R,H).in(this)},image:function(R){return this.parent()&&this.parent().image(R)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(R,H){return this.parent()&&this.parent().gaussianBlur(R,H).in(this)},morphology:function(R,H){return this.parent()&&this.parent().morphology(R,H).in(this)},diffuseLighting:function(R,H,G){return this.parent()&&this.parent().diffuseLighting(R,H,G).in(this)},displacementMap:function(R,H,G,J){return this.parent()&&this.parent().displacementMap(this,R,H,G,J)},specularLighting:function(R,H,G,J){return this.parent()&&this.parent().specularLighting(R,H,G,J).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(R,H,G,J,te){return this.parent()&&this.parent().turbulence(R,H,G,J,te).in(this)}};SVG.extend(SVG.Effect,ve),SVG.extend(SVG.ParentEffect,ve),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(R){this.attr("in",R)}}});var d={blend:function(R,H,G){this.attr({in:R,in2:H,mode:G||"normal"})},colorMatrix:function(R,H){"matrix"==R&&(H=C(H)),this.attr({type:R,values:void 0===H?null:H})},convolveMatrix:function(R){R=C(R),this.attr({order:Math.sqrt(R.split(" ").length),kernelMatrix:R})},composite:function(R,H,G){this.attr({in:R,in2:H,operator:G})},flood:function(R,H){this.attr("flood-color",R),null!=H&&this.attr("flood-opacity",H)},offset:function(R,H){this.attr({dx:R,dy:H})},image:function(R){this.attr("href",R,SVG.xlink)},displacementMap:function(R,H,G,J,te){this.attr({in:R,in2:H,scale:G,xChannelSelector:J,yChannelSelector:te})},gaussianBlur:function(R,H){this.attr("stdDeviation",null!=R||null!=H?M(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(R,H){this.attr({operator:R,radius:H})},tile:function(){},turbulence:function(R,H,G,J,te){this.attr({numOctaves:H,seed:G,stitchTiles:J,baseFrequency:R,type:te})}},p={merge:function(){var R;if(arguments[0]instanceof SVG.Set){var H=this;arguments[0].each(function(J){this instanceof SVG.MergeNode?H.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&H.put(new SVG.MergeNode(this))})}else{R=Array.isArray(arguments[0])?arguments[0]:arguments;for(var G=0;G<R.length;G++)R[G]instanceof SVG.MergeNode?this.put(R[G]):this.put(new SVG.MergeNode(R[G]))}},componentTransfer:function(R){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(G){this[G]=new(SVG["Func"+G.toUpperCase()])("identity"),this.rgb.add(this[G]),this.node.appendChild(this[G].node)}.bind(this)),R)for(var H in R.rgb&&(["r","g","b"].forEach(function(G){this[G].attr(R.rgb)}.bind(this)),delete R.rgb),R)this[H].attr(R[H])},diffuseLighting:function(R,H,G){this.attr({surfaceScale:R,diffuseConstant:H,kernelUnitLength:G})},specularLighting:function(R,H,G,J){this.attr({surfaceScale:R,diffuseConstant:H,specularExponent:G,kernelUnitLength:J})}},y={distantLight:function(R,H){this.attr({azimuth:R,elevation:H})},pointLight:function(R,H,G){this.attr({x:R,y:H,z:G})},spotLight:function(R,H,G,J,te,K){this.attr({x:R,y:H,z:G,pointsAtX:J,pointsAtY:te,pointsAtZ:K})},mergeNode:function(R){this.attr("in",R)}};function C(R){return Array.isArray(R)&&(R=new SVG.Array(R)),R.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function M(R){if(!Array.isArray(R))return R;for(var H=0,G=R.length,J=[];H<G;H++)J.push(R[H]);return J.join(" ")}function L(){var R=function(){};for(var H in"function"==typeof arguments[arguments.length-1]&&(R=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var G in arguments[H])R(arguments[H][G],G,arguments[H])}["r","g","b","a"].forEach(function(R){y["Func"+R.toUpperCase()]=function(H){switch(this.attr("type",H),H){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),L(d,function(R,H){var G=H.charAt(0).toUpperCase()+H.slice(1);SVG[G+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+G)),R.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),L(p,function(R,H){var G=H.charAt(0).toUpperCase()+H.slice(1);SVG[G+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+G)),R.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),L(y,function(R,H){var G=H.charAt(0).toUpperCase()+H.slice(1);SVG[G]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+G)),R.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(R){return R instanceof SVG.MergeNode?this.add(R,0):this.add(new SVG.MergeNode(R),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(R){return null==R?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",R)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function ve(M,L,R,H,G,J,te){for(var K=M.slice(L,R||te),ae=H.slice(G,J||te),pe=0,ge={pos:[0,0],start:[0,0]},xe={pos:[0,0],start:[0,0]};K[pe]=d.call(ge,K[pe]),ae[pe]=d.call(xe,ae[pe]),K[pe][0]!=ae[pe][0]||"M"==K[pe][0]||"A"==K[pe][0]&&(K[pe][4]!=ae[pe][4]||K[pe][5]!=ae[pe][5])?(Array.prototype.splice.apply(K,[pe,1].concat(y.call(ge,K[pe]))),Array.prototype.splice.apply(ae,[pe,1].concat(y.call(xe,ae[pe])))):(K[pe]=p.call(ge,K[pe]),ae[pe]=p.call(xe,ae[pe])),++pe!=K.length||pe!=ae.length;)pe==K.length&&K.push(["C",ge.pos[0],ge.pos[1],ge.pos[0],ge.pos[1],ge.pos[0],ge.pos[1]]),pe==ae.length&&ae.push(["C",xe.pos[0],xe.pos[1],xe.pos[0],xe.pos[1],xe.pos[0],xe.pos[1]]);return{start:K,dest:ae}}function d(M){switch(M[0]){case"z":case"Z":M[0]="L",M[1]=this.start[0],M[2]=this.start[1];break;case"H":M[0]="L",M[2]=this.pos[1];break;case"V":M[0]="L",M[2]=M[1],M[1]=this.pos[0];break;case"T":M[0]="Q",M[3]=M[1],M[4]=M[2],M[1]=this.reflection[1],M[2]=this.reflection[0];break;case"S":M[0]="C",M[6]=M[4],M[5]=M[3],M[4]=M[2],M[3]=M[1],M[2]=this.reflection[1],M[1]=this.reflection[0]}return M}function p(M){var L=M.length;return this.pos=[M[L-2],M[L-1]],-1!="SCQT".indexOf(M[0])&&(this.reflection=[2*this.pos[0]-M[L-4],2*this.pos[1]-M[L-3]]),M}function y(M){var L=[M];switch(M[0]){case"M":return this.pos=this.start=[M[1],M[2]],L;case"L":M[5]=M[3]=M[1],M[6]=M[4]=M[2],M[1]=this.pos[0],M[2]=this.pos[1];break;case"Q":M[6]=M[4],M[5]=M[3],M[4]=1*M[4]/3+2*M[2]/3,M[3]=1*M[3]/3+2*M[1]/3,M[2]=1*this.pos[1]/3+2*M[2]/3,M[1]=1*this.pos[0]/3+2*M[1]/3;break;case"A":M=(L=function(R,H){var G,J,te,K,ae,pe,ge,xe,Me,ze,Ke,Y,ne,be,Ie,Je,Nt,St,Xt,gn,hn,Kn,Ni,Nn,ei,rr,yo=Math.abs(H[1]),Tr=Math.abs(H[2]),or=H[3]%360,No=H[4],xr=H[5],ys=H[6],Us=H[7],ro=new SVG.Point(R),Bo=new SVG.Point(ys,Us),yu=[];if(0===yo||0===Tr||ro.x===Bo.x&&ro.y===Bo.y)return[["C",ro.x,ro.y,Bo.x,Bo.y,Bo.x,Bo.y]];for((J=(G=new SVG.Point((ro.x-Bo.x)/2,(ro.y-Bo.y)/2).transform((new SVG.Matrix).rotate(or))).x*G.x/(yo*yo)+G.y*G.y/(Tr*Tr))>1&&(yo*=J=Math.sqrt(J),Tr*=J),te=(new SVG.Matrix).rotate(or).scale(1/yo,1/Tr).rotate(-or),ro=ro.transform(te),pe=(K=[(Bo=Bo.transform(te)).x-ro.x,Bo.y-ro.y])[0]*K[0]+K[1]*K[1],ae=Math.sqrt(pe),K[0]/=ae,K[1]/=ae,ge=pe<4?Math.sqrt(1-pe/4):0,No===xr&&(ge*=-1),xe=new SVG.Point((Bo.x+ro.x)/2+ge*-K[1],(Bo.y+ro.y)/2+ge*K[0]),Me=new SVG.Point(ro.x-xe.x,ro.y-xe.y),ze=new SVG.Point(Bo.x-xe.x,Bo.y-xe.y),Ke=Math.acos(Me.x/Math.sqrt(Me.x*Me.x+Me.y*Me.y)),Me.y<0&&(Ke*=-1),Y=Math.acos(ze.x/Math.sqrt(ze.x*ze.x+ze.y*ze.y)),ze.y<0&&(Y*=-1),xr&&Ke>Y&&(Y+=2*Math.PI),!xr&&Ke<Y&&(Y-=2*Math.PI),Je=[],Nt=Ke,ne=(Y-Ke)/(be=Math.ceil(2*Math.abs(Ke-Y)/Math.PI)),Ie=4*Math.tan(ne/4)/3,hn=0;hn<=be;hn++)Xt=Math.cos(Nt),St=Math.sin(Nt),gn=new SVG.Point(xe.x+Xt,xe.y+St),Je[hn]=[new SVG.Point(gn.x+Ie*St,gn.y-Ie*Xt),gn,new SVG.Point(gn.x-Ie*St,gn.y+Ie*Xt)],Nt+=ne;for(Je[0][0]=Je[0][1].clone(),Je[Je.length-1][2]=Je[Je.length-1][1].clone(),te=(new SVG.Matrix).rotate(or).scale(yo,Tr).rotate(-or),hn=0,Kn=Je.length;hn<Kn;hn++)Je[hn][0]=Je[hn][0].transform(te),Je[hn][1]=Je[hn][1].transform(te),Je[hn][2]=Je[hn][2].transform(te);for(hn=1,Kn=Je.length;hn<Kn;hn++)Ni=(gn=Je[hn-1][2]).x,Nn=gn.y,ei=(gn=Je[hn][0]).x,rr=gn.y,ys=(gn=Je[hn][1]).x,yu.push(["C",Ni,Nn,ei,rr,ys,Us=gn.y]);return yu}(this.pos,M))[0]}return M[0]="C",this.pos=[M[5],M[6]],this.reflection=[2*M[5]-M[3],2*M[6]-M[4]],L}function C(M,L){if(!1===L)return!1;for(var R=L,H=M.length;R<H;++R)if("M"==M[R][0])return R;return!1}SVG.extend(SVG.PathArray,{morph:function(M){for(var L=this.value,R=this.parse(M),H=0,G=0,J=!1,te=!1;!1!==H||!1!==G;){var K;J=C(L,!1!==H&&H+1),te=C(R,!1!==G&&G+1),!1===H&&(H=0==(K=new SVG.PathArray(ae.start).bbox()).height||0==K.width?L.push(L[0])-1:L.push(["M",K.x+K.width/2,K.y+K.height/2])-1),!1===G&&(G=0==(K=new SVG.PathArray(ae.dest).bbox()).height||0==K.width?R.push(R[0])-1:R.push(["M",K.x+K.width/2,K.y+K.height/2])-1);var ae=ve(L,H,J,R,G,te);L=L.slice(0,H).concat(ae.start,!1===J?[]:L.slice(J)),R=R.slice(0,G).concat(ae.dest,!1===te?[]:R.slice(te)),H=!1!==J&&H+ae.start.length,G=!1!==te&&G+ae.dest.length}return this.value=L,this.destination=new SVG.PathArray,this.destination.value=R,this}})}(),function(){function ve(d){d.remember("_draggable",this),this.el=d}ve.prototype.init=function(d,p){var y=this;this.constraint=d,this.value=p,this.el.on("mousedown.drag",function(C){y.start(C)}),this.el.on("touchstart.drag",function(C){y.start(C)})},ve.prototype.transformPoint=function(d,p){var y=(d=d||window.event).changedTouches&&d.changedTouches[0]||d;return this.p.x=y.clientX-(p||0),this.p.y=y.clientY,this.p.matrixTransform(this.m)},ve.prototype.getBBox=function(){var d=this.el.bbox();return this.el instanceof SVG.Nested&&(d=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(d.x=this.el.x(),d.y=this.el.y()),d},ve.prototype.start=function(d){if("click"!=d.type&&"mousedown"!=d.type&&"mousemove"!=d.type||1==(d.which||d.buttons)){var p=this;if(this.el.fire("beforedrag",{event:d,handler:this}),!this.el.event().defaultPrevented){d.preventDefault(),d.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var y,C=this.getBBox();if(this.el instanceof SVG.Text)switch(y=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":y/=2;break;case"start":y=0}this.startPoints={point:this.transformPoint(d,y),box:C,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(M){p.drag(M)}),SVG.on(window,"touchmove.drag",function(M){p.drag(M)}),SVG.on(window,"mouseup.drag",function(M){p.end(M)}),SVG.on(window,"touchend.drag",function(M){p.end(M)}),this.el.fire("dragstart",{event:d,p:this.startPoints.point,m:this.m,handler:this})}}},ve.prototype.drag=function(d){var p=this.getBBox(),y=this.transformPoint(d),C=this.startPoints.box.x+y.x-this.startPoints.point.x,M=this.startPoints.box.y+y.y-this.startPoints.point.y,L=this.constraint,R=y.x-this.startPoints.point.x,H=y.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:d,p:y,m:this.m,handler:this}),this.el.event().defaultPrevented)return y;if("function"==typeof L){var G=L.call(this.el,C,M,this.m);"boolean"==typeof G&&(G={x:G,y:G}),!0===G.x?this.el.x(C):!1!==G.x&&this.el.x(G.x),!0===G.y?this.el.y(M):!1!==G.y&&this.el.y(G.y)}else"object"==typeof L&&(null!=L.minX&&C<L.minX?R=(C=L.minX)-this.startPoints.box.x:null!=L.maxX&&C>L.maxX-p.width&&(R=(C=L.maxX-p.width)-this.startPoints.box.x),null!=L.minY&&M<L.minY?H=(M=L.minY)-this.startPoints.box.y:null!=L.maxY&&M>L.maxY-p.height&&(H=(M=L.maxY-p.height)-this.startPoints.box.y),null!=L.snapToGrid&&(C-=C%L.snapToGrid,M-=M%L.snapToGrid,R-=R%L.snapToGrid,H-=H%L.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:R,y:H},!0):this.el.move(C,M));return y},ve.prototype.end=function(d){var p=this.drag(d);this.el.fire("dragend",{event:d,p,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(d,p){"function"!=typeof d&&"object"!=typeof d||(p=d,d=!0);var y=this.remember("_draggable")||new ve(this);return(d=void 0===d||d)?y.init(p||{},d):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function ve(d){this.el=d,d.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(p,y,C){var M="string"!=typeof p?p:y[p];return C?M/2:M},this.pointCoords=function(p,y){var C=this.pointsList[p];return{x:this.pointCoord(C[0],y,"t"===p||"b"===p),y:this.pointCoord(C[1],y,"r"===p||"l"===p)}}}ve.prototype.init=function(d,p){var y=this.el.bbox();this.options={};var C=this.el.selectize.defaults.points;for(var M in this.el.selectize.defaults)this.options[M]=this.el.selectize.defaults[M],void 0!==p[M]&&(this.options[M]=p[M]);var L=["points","pointsExclude"];for(var M in L){var R=this.options[L[M]];"string"==typeof R?R=R.length>0?R.split(/\s*,\s*/i):[]:"boolean"==typeof R&&"points"===L[M]&&(R=R?C:[]),this.options[L[M]]=R}this.options.points=[C,this.options.points].reduce(function(H,G){return H.filter(function(J){return G.indexOf(J)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(H,G){return H.filter(function(J){return G.indexOf(J)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(y.x,y.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(d):this.selectRect(d),this.observe(),this.cleanup()},ve.prototype.selectPoints=function(d){return this.pointSelection.isSelected=d,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},ve.prototype.getPointArray=function(){var d=this.el.bbox();return this.el.array().valueOf().map(function(p){return[p[0]-d.x,p[1]-d.y]})},ve.prototype.drawPoints=function(){for(var d=this,p=this.getPointArray(),y=0,C=p.length;y<C;++y){var M=function(R){return function(H){(H=H||window.event).preventDefault?H.preventDefault():H.returnValue=!1,H.stopPropagation(),d.el.fire("point",{x:H.pageX||H.touches[0].pageX,y:H.pageY||H.touches[0].pageY,i:R,event:H})}}(y),L=this.drawPoint(p[y][0],p[y][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",M).on("mousedown",M);this.pointSelection.set.add(L)}},ve.prototype.drawPoint=function(d,p){var y=this.options.pointType;switch(y){case"circle":return this.drawCircle(d,p);case"rect":return this.drawRect(d,p);default:if("function"==typeof y)return y.call(this,d,p);throw new Error("Unknown "+y+" point type!")}},ve.prototype.drawCircle=function(d,p){return this.nested.circle(this.options.pointSize).center(d,p)},ve.prototype.drawRect=function(d,p){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(d,p)},ve.prototype.updatePointSelection=function(){var d=this.getPointArray();this.pointSelection.set.each(function(p){this.cx()===d[p][0]&&this.cy()===d[p][1]||this.center(d[p][0],d[p][1])})},ve.prototype.updateRectSelection=function(){var d=this,p=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:p.width,height:p.height}),this.options.points.length&&this.options.points.map(function(C,M){var L=d.pointCoords(C,p);d.rectSelection.set.get(M+1).center(L.x,L.y)}),this.options.rotationPoint){var y=this.rectSelection.set.length();this.rectSelection.set.get(y-1).center(p.width/2,20)}},ve.prototype.selectRect=function(d){var p=this,y=this.el.bbox();function C(R){return function(H){(H=H||window.event).preventDefault?H.preventDefault():H.returnValue=!1,H.stopPropagation(),p.el.fire(R,{x:H.pageX||H.touches[0].pageX,y:H.pageY||H.touches[0].pageY,event:H})}}if(this.rectSelection.isSelected=d,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(y.width,y.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(R,H){var G=p.pointCoords(R,y),J=p.drawPoint(G.x,G.y).attr("class",p.options.classPoints+"_"+R).on("mousedown",C(R)).on("touchstart",C(R));p.rectSelection.set.add(J)}),this.rectSelection.set.each(function(){this.addClass(p.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var M=function(R){(R=R||window.event).preventDefault?R.preventDefault():R.returnValue=!1,R.stopPropagation(),p.el.fire("rot",{x:R.pageX||R.touches[0].pageX,y:R.pageY||R.touches[0].pageY,event:R})},L=this.drawPoint(y.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",M).on("mousedown",M);this.rectSelection.set.add(L)}},ve.prototype.handler=function(){var d=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(d.x,d.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},ve.prototype.observe=function(){var d=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){d.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(p){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){d.handler()})},ve.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(d,p){return"object"==typeof d&&(p=d,d=!0),(this.remember("_selectHandler")||new ve(this)).init(void 0===d||d,p||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function ve(d){d.remember("_resizeHandler",this),this.el=d,this.parameters={},this.lastUpdateCall=null,this.p=d.doc().node.createSVGPoint()}ve.prototype.transformPoint=function(d,p,y){return this.p.x=d-(this.offset.x-window.pageXOffset),this.p.y=p-(this.offset.y-window.pageYOffset),this.p.matrixTransform(y||this.m)},ve.prototype._extractPosition=function(d){return{x:null!=d.clientX?d.clientX:d.touches[0].clientX,y:null!=d.clientY?d.clientY:d.touches[0].clientY}},ve.prototype.init=function(d){var p=this;if(this.stop(),"stop"!==d){for(var y in this.options={},this.el.resize.defaults)this.options[y]=this.el.resize.defaults[y],void 0!==d[y]&&(this.options[y]=d[y]);this.el.on("lt.resize",function(C){p.resize(C||window.event)}),this.el.on("rt.resize",function(C){p.resize(C||window.event)}),this.el.on("rb.resize",function(C){p.resize(C||window.event)}),this.el.on("lb.resize",function(C){p.resize(C||window.event)}),this.el.on("t.resize",function(C){p.resize(C||window.event)}),this.el.on("r.resize",function(C){p.resize(C||window.event)}),this.el.on("b.resize",function(C){p.resize(C||window.event)}),this.el.on("l.resize",function(C){p.resize(C||window.event)}),this.el.on("rot.resize",function(C){p.resize(C||window.event)}),this.el.on("point.resize",function(C){p.resize(C||window.event)}),this.update()}},ve.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},ve.prototype.resize=function(d){var p=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var y=this._extractPosition(d.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(y.x,y.y),x:d.detail.x,y:d.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==d.detail.i){var C=this.el.array().valueOf();this.parameters.i=d.detail.i,this.parameters.pointCoords=[C[d.detail.i][0],C[d.detail.i][1]]}switch(d.type){case"lt":this.calc=function(M,L){var R=this.snapToGrid(M,L);if(this.parameters.box.width-R[0]>0&&this.parameters.box.height-R[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+R[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-R[0]);R=this.checkAspectRatio(R),this.el.move(this.parameters.box.x+R[0],this.parameters.box.y+R[1]).size(this.parameters.box.width-R[0],this.parameters.box.height-R[1])}};break;case"rt":this.calc=function(M,L){var R=this.snapToGrid(M,L,2);if(this.parameters.box.width+R[0]>0&&this.parameters.box.height-R[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-R[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+R[0]);R=this.checkAspectRatio(R,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+R[1]).size(this.parameters.box.width+R[0],this.parameters.box.height-R[1])}};break;case"rb":this.calc=function(M,L){var R=this.snapToGrid(M,L,0);if(this.parameters.box.width+R[0]>0&&this.parameters.box.height+R[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-R[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+R[0]);R=this.checkAspectRatio(R),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+R[0],this.parameters.box.height+R[1])}};break;case"lb":this.calc=function(M,L){var R=this.snapToGrid(M,L,1);if(this.parameters.box.width-R[0]>0&&this.parameters.box.height+R[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+R[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-R[0]);R=this.checkAspectRatio(R,!0),this.el.move(this.parameters.box.x+R[0],this.parameters.box.y).size(this.parameters.box.width-R[0],this.parameters.box.height+R[1])}};break;case"t":this.calc=function(M,L){var R=this.snapToGrid(M,L,2);if(this.parameters.box.height-R[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+R[1]).height(this.parameters.box.height-R[1])}};break;case"r":this.calc=function(M,L){var R=this.snapToGrid(M,L,0);if(this.parameters.box.width+R[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+R[0])}};break;case"b":this.calc=function(M,L){var R=this.snapToGrid(M,L,0);if(this.parameters.box.height+R[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+R[1])}};break;case"l":this.calc=function(M,L){var R=this.snapToGrid(M,L,1);if(this.parameters.box.width-R[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+R[0],this.parameters.box.y).width(this.parameters.box.width-R[0])}};break;case"rot":this.calc=function(M,L){var R=M+this.parameters.p.x,H=L+this.parameters.p.y,G=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),J=Math.atan2(H-this.parameters.box.y-this.parameters.box.height/2,R-this.parameters.box.x-this.parameters.box.width/2),te=this.parameters.rotation+180*(J-G)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(te-te%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(M,L){var R=this.snapToGrid(M,L,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),H=this.el.array().valueOf();H[this.parameters.i][0]=this.parameters.pointCoords[0]+R[0],H[this.parameters.i][1]=this.parameters.pointCoords[1]+R[1],this.el.plot(H)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:d}),SVG.on(window,"touchmove.resize",function(M){p.update(M||window.event)}),SVG.on(window,"touchend.resize",function(){p.done()}),SVG.on(window,"mousemove.resize",function(M){p.update(M||window.event)}),SVG.on(window,"mouseup.resize",function(){p.done()})},ve.prototype.update=function(d){if(d){var p=this._extractPosition(d),y=this.transformPoint(p.x,p.y),C=y.x-this.parameters.p.x,M=y.y-this.parameters.p.y;this.lastUpdateCall=[C,M],this.calc(C,M),this.el.fire("resizing",{dx:C,dy:M,event:d})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},ve.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},ve.prototype.snapToGrid=function(d,p,y,C){var M;return M=void 0!==C?[(y+d)%this.options.snapToGrid,(C+p)%this.options.snapToGrid]:[(this.parameters.box.x+d+(1&(y=null==y?3:y)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+p+(2&y?0:this.parameters.box.height))%this.options.snapToGrid],d<0&&(M[0]-=this.options.snapToGrid),p<0&&(M[1]-=this.options.snapToGrid),d-=Math.abs(M[0])<this.options.snapToGrid/2?M[0]:M[0]-(d<0?-this.options.snapToGrid:this.options.snapToGrid),p-=Math.abs(M[1])<this.options.snapToGrid/2?M[1]:M[1]-(p<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(d,p,y,C)},ve.prototype.constraintToBox=function(d,p,y,C){var M,L,R=this.options.constraint||{};return void 0!==C?(M=y,L=C):(M=this.parameters.box.x+(1&y?0:this.parameters.box.width),L=this.parameters.box.y+(2&y?0:this.parameters.box.height)),void 0!==R.minX&&M+d<R.minX&&(d=R.minX-M),void 0!==R.maxX&&M+d>R.maxX&&(d=R.maxX-M),void 0!==R.minY&&L+p<R.minY&&(p=R.minY-L),void 0!==R.maxY&&L+p>R.maxY&&(p=R.maxY-L),[d,p]},ve.prototype.checkAspectRatio=function(d,p){if(!this.options.saveAspectRatio)return d;var y=d.slice(),C=this.parameters.box.width/this.parameters.box.height,M=this.parameters.box.width+d[0],L=this.parameters.box.height-d[1],R=M/L;return R<C?(y[1]=M/C-this.parameters.box.height,p&&(y[1]=-y[1])):R>C&&(y[0]=this.parameters.box.width-L*C,p&&(y[0]=-y[0])),y},SVG.extend(SVG.Element,{resize:function(d){return(this.remember("_resizeHandler")||new ve(this)).init(d||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),function(ve,d){void 0===d&&(d={});var p=d.insertAt;if("undefined"!=typeof document){var y=document.head||document.getElementsByTagName("head")[0],C=document.createElement("style");C.type="text/css","top"===p&&y.firstChild?y.insertBefore(C,y.firstChild):y.appendChild(C),C.styleSheet?C.styleSheet.cssText=ve:C.appendChild(document.createTextNode(ve))}}('.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}'),function(){function ve(K){var ae=K.__resizeTriggers__,pe=ae.firstElementChild,ge=ae.lastElementChild,xe=pe?pe.firstElementChild:null;ge&&(ge.scrollLeft=ge.scrollWidth,ge.scrollTop=ge.scrollHeight),xe&&(xe.style.width=pe.offsetWidth+1+"px",xe.style.height=pe.offsetHeight+1+"px"),pe&&(pe.scrollLeft=pe.scrollWidth,pe.scrollTop=pe.scrollHeight)}function d(K){var ae=this;ve(this),this.__resizeRAF__&&M(this.__resizeRAF__),this.__resizeRAF__=C(function(){var pe;((pe=ae).offsetWidth!=pe.__resizeLast__.width||pe.offsetHeight!=pe.__resizeLast__.height)&&(ae.__resizeLast__.width=ae.offsetWidth,ae.__resizeLast__.height=ae.offsetHeight,ae.__resizeListeners__.forEach(function(pe){pe.call(K)}))})}var p,y,C=(p=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(K){return window.setTimeout(K,20)},function(K){return p(K)}),M=(y=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(K){return y(K)}),L=!1,R="animationstart",H="Webkit Moz O ms".split(" "),G="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),J=document.createElement("fakeelement");if(void 0!==J.style.animationName&&(L=!0),!1===L)for(var te=0;te<H.length;te++)if(void 0!==J.style[H[te]+"AnimationName"]){R=G[te];break}window.addResizeListener=function(K,ae){K.__resizeTriggers__||("static"==getComputedStyle(K).position&&(K.style.position="relative"),K.__resizeLast__={},K.__resizeListeners__=[],(K.__resizeTriggers__=document.createElement("div")).className="resize-triggers",K.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',K.appendChild(K.__resizeTriggers__),ve(K),K.addEventListener("scroll",d,!0),R&&K.__resizeTriggers__.addEventListener(R,function(pe){"resizeanim"==pe.animationName&&ve(K)})),K.__resizeListeners__.push(ae)},window.removeResizeListener=function(K,ae){K&&(K.__resizeListeners__.splice(K.__resizeListeners__.indexOf(ae),1),K.__resizeListeners__.length||(K.removeEventListener("scroll",d),K.__resizeTriggers__.parentNode&&(K.__resizeTriggers__=!K.removeChild(K.__resizeTriggers__))))}}(),void 0===window.Apex&&(window.Apex={});var xt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Rn(this.ctx),this.ctx.axes=new Io(this.ctx),this.ctx.core=new Ot(this.ctx.el,this.ctx),this.ctx.config=new jn({}),this.ctx.data=new Yi(this.ctx),this.ctx.grid=new ks(this.ctx),this.ctx.graphics=new Mt(this.ctx),this.ctx.coreUtils=new Vn(this.ctx),this.ctx.crosshairs=new Yn(this.ctx),this.ctx.events=new Si(this.ctx),this.ctx.exports=new io(this.ctx),this.ctx.localization=new co(this.ctx),this.ctx.options=new Ki,this.ctx.responsive=new yr(this.ctx),this.ctx.series=new On(this.ctx),this.ctx.theme=new Vr(this.ctx),this.ctx.formatters=new Do(this.ctx),this.ctx.titleSubtitle=new vr(this.ctx),this.ctx.legend=new $n(this.ctx),this.ctx.toolbar=new Ei(this.ctx),this.ctx.dimensions=new is(this.ctx),this.ctx.updateHelpers=new Pt(this.ctx),this.ctx.zoomPanSelection=new Nl(this.ctx),this.ctx.w.globals.tooltip=new dt(this.ctx)}}]),ve}(),Ft=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"clear",value:function(d){var p=d.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:p})}},{key:"killSVG",value:function(d){d.each(function(p,y){this.removeClass("*"),this.off(),this.stop()},!0),d.ungroup(),d.clear()}},{key:"clearDomElements",value:function(d){var p=this,C=this.w.globals.dom.Paper.node;C.parentNode&&C.parentNode.parentNode&&!d.isUpdating&&(C.parentNode.parentNode.style.minHeight="unset");var M=this.w.globals.dom.baseEl;M&&this.ctx.eventList.forEach(function(R){M.removeEventListener(R,p.ctx.events.documentEvent)});var L=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(L.Paper),L.Paper.remove(),L.elWrap=null,L.elGraphical=null,L.elAnnotations=null,L.elLegendWrap=null,L.baseEl=null,L.elGridRect=null,L.elGridRectMask=null,L.elGridRectMarkerMask=null,L.elForecastMask=null,L.elNonForecastMask=null,L.elDefs=null}}]),ve}(),en=function(){function ve(d,p){Ee(this,ve),this.opts=p,this.ctx=this,this.w=new li(p).init(),this.el=d,this.w.globals.cuid=Qe.randomId(),this.w.globals.chartID=this.w.config.chart.id?Qe.escapeString(this.w.config.chart.id):this.w.globals.cuid,new xt(this).initModules(),this.create=Qe.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return gt(ve,[{key:"render",value:function(){var d=this;return new Promise(function(p,y){if(null!==d.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),d.w.config.chart.id&&Apex._chartInstances.push({id:d.w.globals.chartID,group:d.w.config.chart.group,chart:d}),d.setLocale(d.w.config.chart.defaultLocale);var C=d.w.config.chart.events.beforeMount;"function"==typeof C&&C(d,d.w),d.events.fireEvent("beforeMount",[d,d.w]),window.addEventListener("resize",d.windowResizeHandler),window.addResizeListener(d.el.parentNode,d.parentResizeHandler);var M=d.create(d.w.config.series,{});if(!M)return p(d);d.mount(M).then(function(){"function"==typeof d.w.config.chart.events.mounted&&d.w.config.chart.events.mounted(d,d.w),d.events.fireEvent("mounted",[d,d.w]),p(M)}).catch(function(L){y(L)})}else y(new Error("Element not found"))})}},{key:"create",value:function(d,p){var y=this.w;new xt(this).initModules();var C=this.w.globals;if(C.noData=!1,C.animationEnded=!1,this.responsive.checkResponsiveConfig(p),y.config.xaxis.convertedCatToNumeric&&new Hn(y.config).convertCatToNumericXaxis(y.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===y.config.chart.type&&(y.config.grid.show=!1,y.config.yaxis[0].show=!1),0===C.svgWidth))return C.animationEnded=!0,null;var M=Vn.checkComboSeries(d);C.comboCharts=M.comboCharts,C.comboBarCount=M.comboBarCount;var L=d.every(function(te){return te.data&&0===te.data.length});(0===d.length||L)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(d),this.theme.init(),new $t(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),C.noData&&C.collapsedSeries.length!==C.series.length&&!y.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),C.axisCharts&&(this.core.coreCalculations(),"category"!==y.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=y.globals.minX,this.ctx.toolbar.maxX=y.globals.maxX),this.formatters.heatmapLabelFormatters(),this.dimensions.plotCoords();var R=this.core.xySettings();this.grid.createGridMask();var H=this.core.plotChartType(d,R),G=new fn(this);return G.bringForward(),y.config.dataLabels.background.enabled&&G.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:H,xyRatios:R,elInner:y.globals.dom.elGraphical,dimensions:{plot:{left:y.globals.translateX,top:y.globals.translateY,width:y.globals.gridWidth,height:y.globals.gridHeight}}}}},{key:"mount",value:function(){var d=this,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,y=this,C=y.w;return new Promise(function(M,L){if(null===y.el)return L(new Error("Not enough data to display or target element not found"));(null===p||C.globals.allSeriesCollapsed)&&y.series.handleNoData(),"treemap"!==C.config.chart.type&&y.axes.drawAxis(C.config.chart.type,p.xyRatios),y.grid=new ks(y);var R=y.grid.drawGrid();y.annotations=new Zt(y),y.annotations.drawImageAnnos(),y.annotations.drawTextAnnos(),"back"===C.config.grid.position&&R&&C.globals.dom.elGraphical.add(R.el);var H=new Or(d.ctx),G=new Li(d.ctx);if(null!==R&&(H.xAxisLabelCorrections(R.xAxisTickWidth),G.setYAxisTextAlignments(),C.config.yaxis.map(function(K,ae){-1===C.globals.ignoreYAxisIndexes.indexOf(ae)&&G.yAxisTitleRotate(ae,K.opposite)})),"back"===C.config.annotations.position&&(C.globals.dom.Paper.add(C.globals.dom.elAnnotations),y.annotations.drawAxesAnnotations()),Array.isArray(p.elGraph))for(var J=0;J<p.elGraph.length;J++)C.globals.dom.elGraphical.add(p.elGraph[J]);else C.globals.dom.elGraphical.add(p.elGraph);if("front"===C.config.grid.position&&R&&C.globals.dom.elGraphical.add(R.el),"front"===C.config.xaxis.crosshairs.position&&y.crosshairs.drawXCrosshairs(),"front"===C.config.yaxis[0].crosshairs.position&&y.crosshairs.drawYCrosshairs(),"front"===C.config.annotations.position&&(C.globals.dom.Paper.add(C.globals.dom.elAnnotations),y.annotations.drawAxesAnnotations()),!C.globals.noData){if(C.config.tooltip.enabled&&!C.globals.noData&&y.w.globals.tooltip.drawTooltip(p.xyRatios),C.globals.axisCharts&&(C.globals.isXNumeric||C.config.xaxis.convertedCatToNumeric||C.globals.isTimelineBar))(C.config.chart.zoom.enabled||C.config.chart.selection&&C.config.chart.selection.enabled||C.config.chart.pan&&C.config.chart.pan.enabled)&&y.zoomPanSelection.init({xyRatios:p.xyRatios});else{var te=C.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(K){te[K]=!1})}C.config.chart.toolbar.show&&!C.globals.allSeriesCollapsed&&y.toolbar.createToolbar()}C.globals.memory.methodsToExec.length>0&&C.globals.memory.methodsToExec.forEach(function(K){K.method(K.params,!1,K.context)}),C.globals.axisCharts||C.globals.noData||y.core.resizeNonAxisCharts(),M(y)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),window.removeResizeListener(this.el.parentNode,this.parentResizeHandler);var d=this.w.config.chart.id;d&&Apex._chartInstances.forEach(function(p,y){p.id===Qe.escapeString(d)&&Apex._chartInstances.splice(y,1)}),new Ft(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(d){var p=this,y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],M=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],L=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],R=this.w;return R.globals.selection=void 0,d.series&&(this.series.resetSeries(!1,!0,!1),d.series.length&&d.series[0].data&&(d.series=d.series.map(function(H,G){return p.updateHelpers._extendSeries(H,G)})),this.updateHelpers.revertDefaultAxisMinMax()),d.xaxis&&(d=this.updateHelpers.forceXAxisUpdate(d)),d.yaxis&&(d=this.updateHelpers.forceYAxisUpdate(d)),R.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),d.theme&&(d=this.theme.updateThemeOptions(d)),this.updateHelpers._updateOptions(d,y,C,M,L)}},{key:"updateSeries",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(d,p,y)}},{key:"appendSeries",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=this.w.config.series.slice();return C.push(d),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(C,p,y)}},{key:"appendData",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=this;y.w.globals.dataChanged=!0,y.series.getPreviousPaths();for(var C=y.w.config.series.slice(),M=0;M<C.length;M++)if(null!=d[M])for(var L=0;L<d[M].data.length;L++)C[M].data.push(d[M].data[L]);return y.w.config.series=C,p&&(y.w.globals.initialSeries=Qe.clone(y.w.config.series)),this.update()}},{key:"update",value:function(d){var p=this;return new Promise(function(y,C){new Ft(p.ctx).clear({isUpdating:!0});var M=p.create(p.w.config.series,d);if(!M)return y(p);p.mount(M).then(function(){"function"==typeof p.w.config.chart.events.updated&&p.w.config.chart.events.updated(p,p.w),p.events.fireEvent("updated",[p,p.w]),p.w.globals.isDirty=!0,y(p)}).catch(function(L){C(L)})})}},{key:"getSyncedCharts",value:function(){var d=this.getGroupedCharts(),p=[this];return d.length&&(p=[],d.forEach(function(y){p.push(y)})),p}},{key:"getGroupedCharts",value:function(){var d=this;return Apex._chartInstances.filter(function(p){if(p.group)return!0}).map(function(p){return d.w.config.chart.group===p.group?p.chart:d})}},{key:"toggleSeries",value:function(d){return this.series.toggleSeries(d)}},{key:"showSeries",value:function(d){this.series.showSeries(d)}},{key:"hideSeries",value:function(d){this.series.hideSeries(d)}},{key:"resetSeries",value:function(){var d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(d,p)}},{key:"addEventListener",value:function(d,p){this.events.addEventListener(d,p)}},{key:"removeEventListener",value:function(d,p){this.events.removeEventListener(d,p)}},{key:"addXaxisAnnotation",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,C=this;y&&(C=y),C.annotations.addXaxisAnnotationExternal(d,p,C)}},{key:"addYaxisAnnotation",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,C=this;y&&(C=y),C.annotations.addYaxisAnnotationExternal(d,p,C)}},{key:"addPointAnnotation",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,C=this;y&&(C=y),C.annotations.addPointAnnotationExternal(d,p,C)}},{key:"clearAnnotations",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,p=this;d&&(p=d),p.annotations.clearAnnotations(p)}},{key:"removeAnnotation",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,y=this;p&&(y=p),y.annotations.removeAnnotation(y,d)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(d,p){return this.coreUtils.getSeriesTotalsXRange(d,p)}},{key:"getHighestValueInSeries",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=new hs(this.ctx);return p.getMinYMaxY(d).highestY}},{key:"getLowestValueInSeries",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=new hs(this.ctx);return p.getMinYMaxY(d).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(d,p){return this.updateHelpers.toggleDataPointSelection(d,p)}},{key:"zoomX",value:function(d,p){this.ctx.toolbar.zoomUpdateOptions(d,p)}},{key:"setLocale",value:function(d){this.localization.setCurrentLocaleValues(d)}},{key:"dataURI",value:function(d){return new io(this.ctx).dataURI(d)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var d=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){d.w.globals.resized=!0,d.w.globals.dataChanged=!1,d.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var d=this.w.config.chart.redrawOnWindowResize;"function"==typeof d&&(d=d()),d&&this._windowResize()}}],[{key:"getChartByID",value:function(d){var p=Qe.escapeString(d),y=Apex._chartInstances.filter(function(C){return C.id===p})[0];return y&&y.chart}},{key:"initOnLoad",value:function(){for(var d=document.querySelectorAll("[data-apexcharts]"),p=0;p<d.length;p++)new ve(d[p],JSON.parse(d[p].getAttribute("data-options"))).render()}},{key:"exec",value:function(d,p){var y=this.getChartByID(d);if(y){y.w.globals.isExecCalled=!0;var C=null;if(-1!==y.publicMethods.indexOf(p)){for(var M=arguments.length,L=new Array(M>2?M-2:0),R=2;R<M;R++)L[R-2]=arguments[R];C=y[p].apply(y,L)}return C}}},{key:"merge",value:function(d,p){return Qe.extend(d,p)}}]),ve}();ai.exports=en},2329:(ai,_n,nt)=>{"use strict";nt.d(_n,{Z:()=>s.Z});var s=nt(9759);s.Z.registerVersion("firebase","8.9.1","app"),s.Z.SDK_VERSION="8.9.1"},2958:function(ai){ai.exports=function(){"use strict";var _n,nt,s;function Vt(A,gt){if(_n)if(nt){var Dt="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+_n+")(sharedChunk); ("+nt+")(sharedChunk); self.onerror = null;",wt={};_n(wt),s=gt(wt),"undefined"!=typeof window&&(s.workerUrl=window.URL.createObjectURL(new Blob([Dt],{type:"text/javascript"})))}else nt=gt;else _n=gt}return Vt(0,function(A){var Dt=wt;function wt(g,l,_,x){this.cx=3*g,this.bx=3*(_-g)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(x-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=g,this.p1y=x,this.p2x=_,this.p2y=x}wt.prototype.sampleCurveX=function(g){return((this.ax*g+this.bx)*g+this.cx)*g},wt.prototype.sampleCurveY=function(g){return((this.ay*g+this.by)*g+this.cy)*g},wt.prototype.sampleCurveDerivativeX=function(g){return(3*this.ax*g+2*this.bx)*g+this.cx},wt.prototype.solveCurveX=function(g,l){var _,x,D,F,B;for(void 0===l&&(l=1e-6),D=g,B=0;B<8;B++){if(F=this.sampleCurveX(D)-g,Math.abs(F)<l)return D;var Z=this.sampleCurveDerivativeX(D);if(Math.abs(Z)<1e-6)break;D-=F/Z}if((D=g)<(_=0))return _;if(D>(x=1))return x;for(;_<x;){if(F=this.sampleCurveX(D),Math.abs(F-g)<l)return D;g>F?_=D:x=D,D=.5*(x-_)+_}return D},wt.prototype.solve=function(g,l){return this.sampleCurveY(this.solveCurveX(g,l))};var Be=Ge;function Ge(g,l){this.x=g,this.y=l}Ge.prototype={clone:function(){return new Ge(this.x,this.y)},add:function(g){return this.clone()._add(g)},sub:function(g){return this.clone()._sub(g)},multByPoint:function(g){return this.clone()._multByPoint(g)},divByPoint:function(g){return this.clone()._divByPoint(g)},mult:function(g){return this.clone()._mult(g)},div:function(g){return this.clone()._div(g)},rotate:function(g){return this.clone()._rotate(g)},rotateAround:function(g,l){return this.clone()._rotateAround(g,l)},matMult:function(g){return this.clone()._matMult(g)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(g){return this.x===g.x&&this.y===g.y},dist:function(g){return Math.sqrt(this.distSqr(g))},distSqr:function(g){var l=g.x-this.x,_=g.y-this.y;return l*l+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(g){return Math.atan2(this.y-g.y,this.x-g.x)},angleWith:function(g){return this.angleWithSep(g.x,g.y)},angleWithSep:function(g,l){return Math.atan2(this.x*l-this.y*g,this.x*g+this.y*l)},_matMult:function(g){var l=g[2]*this.x+g[3]*this.y;return this.x=g[0]*this.x+g[1]*this.y,this.y=l,this},_add:function(g){return this.x+=g.x,this.y+=g.y,this},_sub:function(g){return this.x-=g.x,this.y-=g.y,this},_mult:function(g){return this.x*=g,this.y*=g,this},_div:function(g){return this.x/=g,this.y/=g,this},_multByPoint:function(g){return this.x*=g.x,this.y*=g.y,this},_divByPoint:function(g){return this.x/=g.x,this.y/=g.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var g=this.y;return this.y=this.x,this.x=-g,this},_rotate:function(g){var l=Math.cos(g),_=Math.sin(g),x=_*this.x+l*this.y;return this.x=l*this.x-_*this.y,this.y=x,this},_rotateAround:function(g,l){var _=Math.cos(g),x=Math.sin(g),D=l.y+x*(this.x-l.x)+_*(this.y-l.y);return this.x=l.x+_*(this.x-l.x)-x*(this.y-l.y),this.y=D,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ge.convert=function(g){return g instanceof Ge?g:Array.isArray(g)?new Ge(g[0],g[1]):g};var Ve="undefined"!=typeof self?self:{};const Et=Math.pow(2,53)-1,lt=Math.PI/180,Ct=180/Math.PI;function zt(g){return g*lt}const an=[[0,0],[1,0],[1,1],[0,1]];function Qe(g){if(g<=0)return 0;if(g>=1)return 1;const l=g*g,_=l*g;return 4*(g<.5?_:3*(g-l)+_-.75)}function Rn(g,l,_,x){const D=new Dt(g,l,_,x);return function(F){return D.solve(F)}}const dn=Rn(.25,.1,.25,1);function Mt(g,l,_){return Math.min(_,Math.max(l,g))}function Vi(g,l,_){const x=_-l,D=((g-l)%x+x)%x+l;return D===l?_:D}function $r(g,l,_){if(!g.length)return _(null,[]);let x=g.length;const D=new Array(g.length);let F=null;g.forEach((B,Z)=>{l(B,(X,re)=>{X&&(F=X),D[Z]=re,0==--x&&_(F,D)})})}function Vn(g){const l=[];for(const _ in g)l.push(g[_]);return l}function Di(g,...l){for(const _ of l)for(const x in _)g[x]=_[x];return g}let zr=1;function Ji(){return zr++}function Ki(){return function g(l){return l?(l^16*Math.random()>>l/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,g)}()}function Zt(g){return g<=1?1:Math.pow(2,Math.ceil(Math.log(g)/Math.LN2))}function Gt(g){return!!g&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(g)}function $t(g,l){g.forEach(_=>{l[_]&&(l[_]=l[_].bind(l))})}function Ht(g,l){return-1!==g.indexOf(l,g.length-l.length)}function fn(g,l,_){const x={};for(const D in g)x[D]=l.call(_||this,g[D],D,g);return x}function Yt(g,l,_){const x={};for(const D in g)l.call(_||this,g[D],D,g)&&(x[D]=g[D]);return x}function On(g){return Array.isArray(g)?g.map(On):"object"==typeof g&&g?fn(g,On):g}const hi={};function mi(g){hi[g]||("undefined"!=typeof console&&console.warn(g),hi[g]=!0)}function Un(g,l,_){return(_.y-g.y)*(l.x-g.x)>(l.y-g.y)*(_.x-g.x)}function ii(g){let l=0;for(let _,x,D=0,F=g.length,B=F-1;D<F;B=D++)_=g[D],x=g[B],l+=(x.x-_.x)*(_.y+x.y);return l}function Hn(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function jn(g){const l={};if(g.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(_,x,D,F)=>{const B=D||F;return l[x]=!B||B.toLowerCase(),""}),l["max-age"]){const _=parseInt(l["max-age"],10);isNaN(_)?delete l["max-age"]:l["max-age"]=_}return l}let xi,li,Yi,Do=null;function fr(g){if(null==Do){const l=g.navigator?g.navigator.userAgent:null;Do=!!g.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Do}function io(g){try{const l=Ve[g];return l.setItem("_mapbox_test_",1),l.removeItem("_mapbox_test_"),!0}catch(l){return!1}}const Or={now:()=>void 0!==Yi?Yi:Ve.performance.now(),setNow(g){Yi=g},restoreNow(){Yi=void 0},frame(g){const l=Ve.requestAnimationFrame(g);return{cancel:()=>Ve.cancelAnimationFrame(l)}},getImageData(g,l=0){const _=Ve.document.createElement("canvas"),x=_.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return _.width=g.width,_.height=g.height,x.drawImage(g,0,0,g.width,g.height),x.getImageData(-l,-l,g.width+2*l,g.height+2*l)},resolveURL:g=>(xi||(xi=Ve.document.createElement("a")),xi.href=g,xi.href),get devicePixelRatio(){return Ve.devicePixelRatio},get prefersReducedMotion(){return!!Ve.matchMedia&&(null==li&&(li=Ve.matchMedia("(prefers-reduced-motion: reduce)")),li.matches)}};let ks;const Ri={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==ks){const g=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ks=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):g}catch(l){ks=g}}return ks},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},hs={supported:!1,testSupport:function(g){!co&&Si&&(Io?Yn(g):Li=g)}};let Li,Si,co=!1,Io=!1;function Yn(g){const l=g.createTexture();g.bindTexture(g.TEXTURE_2D,l);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,Si),g.isContextLost())return;hs.supported=!0}catch(_){}g.deleteTexture(l),co=!0}Ve.document&&(Si=Ve.document.createElement("img"),Si.onload=function(){Li&&Yn(Li),Li=null,Io=!0},Si.onerror=function(){co=!0,Li=null},Si.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const yr="01",Vr="NO_ACCESS_TOKEN";function vr(g){return 0===g.indexOf("mapbox:")}function ns(g){return Ri.API_URL_REGEX.test(g)}const _u=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function uo(g){const l=g.match(_u);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function Ur(g){const l=g.params.length?`?${g.params.join("&")}`:"";return`${g.protocol}://${g.authority}${g.path}${l}`}function is(g){if(!g)return null;const l=g.split(".");if(!l||3!==l.length)return null;try{return JSON.parse(decodeURIComponent(Ve.atob(l[1]).split("").map(_=>"%"+("00"+_.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(_){return null}}class Hr{constructor(l){this.type=l,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(l){const _=is(Ri.ACCESS_TOKEN);let x="";return x=_&&_.u?Ve.btoa(encodeURIComponent(_.u).replace(/%([0-9A-F]{2})/g,(D,F)=>String.fromCharCode(Number("0x"+F)))):Ri.ACCESS_TOKEN||"",l?`mapbox.eventData.${l}:${x}`:`mapbox.eventData:${x}`}fetchEventData(){const l=io("localStorage"),_=this.getStorageKey(),x=this.getStorageKey("uuid");if(l)try{const D=Ve.localStorage.getItem(_);D&&(this.eventData=JSON.parse(D));const F=Ve.localStorage.getItem(x);F&&(this.anonId=F)}catch(D){mi("Unable to read from LocalStorage")}}saveEventData(){const l=io("localStorage"),_=this.getStorageKey(),x=this.getStorageKey("uuid");if(l)try{Ve.localStorage.setItem(x,this.anonId),Object.keys(this.eventData).length>=1&&Ve.localStorage.setItem(_,JSON.stringify(this.eventData))}catch(D){mi("Unable to write to LocalStorage")}}processRequests(l){}postEvent(l,_,x,D){if(!Ri.EVENTS_URL)return;const F=uo(Ri.EVENTS_URL);F.params.push(`access_token=${D||Ri.ACCESS_TOKEN||""}`);const B={event:this.type,created:new Date(l).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.4.1",skuId:yr,userId:this.anonId},Z=_?Di(B,_):B,X={url:Ur(F),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Z])};this.pendingRequest=De(X,re=>{this.pendingRequest=null,x(re),this.saveEventData(),this.processRequests(D)})}queueRequest(l,_){this.queue.push(l),this.processRequests(_)}}const $n=new class extends Hr{constructor(g){super("appUserTurnstile"),this._customAccessToken=g}postTurnstileEvent(g,l){Ri.EVENTS_URL&&Ri.ACCESS_TOKEN&&Array.isArray(g)&&g.some(_=>vr(_)||ns(_))&&this.queueRequest(Date.now(),l)}processRequests(g){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const l=is(Ri.ACCESS_TOKEN),_=l?l.u:Ri.ACCESS_TOKEN;let x=_!==this.eventData.tokenU;Gt(this.anonId)||(this.anonId=Ki(),x=!0);const D=this.queue.shift();if(this.eventData.lastSuccess){const F=new Date(this.eventData.lastSuccess),B=new Date(D),Z=(D-this.eventData.lastSuccess)/864e5;x=x||Z>=1||Z<-1||F.getDate()!==B.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(D,{"enabled.telemetry":!1},F=>{F||(this.eventData.lastSuccess=D,this.eventData.tokenU=_)},g)}},Ei=$n.postTurnstileEvent.bind($n),Nl=new class extends Hr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(g,l,_,x){this.skuToken=l,this.errorCb=x,Ri.EVENTS_URL&&(_||Ri.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},_):this.errorCb(new Error(Vr)))}processRequests(g){if(this.pendingRequest||0===this.queue.length)return;const{id:l,timestamp:_}=this.queue.shift();l&&this.success[l]||(this.anonId||this.fetchEventData(),Gt(this.anonId)||(this.anonId=Ki()),this.postEvent(_,{skuToken:this.skuToken},x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},g))}},Vs=Nl.postMapLoadEvent.bind(Nl),_s=new class extends Hr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(g,l,_,x){if(!Ri.API_URL||!Ri.SESSION_PATH)return;const D=uo(Ri.API_URL+Ri.SESSION_PATH);D.params.push(`sku=${l||""}`),D.params.push(`access_token=${x||Ri.ACCESS_TOKEN||""}`);const F={url:Ur(D),headers:{"Content-Type":"text/plain"}};this.pendingRequest=qe(F,B=>{this.pendingRequest=null,_(B),this.saveEventData(),this.processRequests(x)})}getSessionAPI(g,l,_,x){this.skuToken=l,this.errorCb=x,Ri.SESSION_PATH&&Ri.API_URL&&(_||Ri.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},_):this.errorCb(new Error(Vr)))}processRequests(g){if(this.pendingRequest||0===this.queue.length)return;const{id:l,timestamp:_}=this.queue.shift();l&&this.success[l]||this.getSession(_,this.skuToken,x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},g)}},br=_s.getSessionAPI.bind(_s),Zo=new Set,cc="mapbox-tiles";let ft,dt,Tt=500,Jt=50;function Lt(){Ve.caches&&!ft&&(ft=Ve.caches.open(cc))}function Ln(g){const l=g.indexOf("?");return l<0?g:g.slice(0,l)}let di=1/0;const Oi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Oi);class ir extends Error{constructor(l,_,x){401===_&&ns(x)&&(l+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(l),this.status=_,this.url=x}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const er=Hn()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Ve.location.protocol?Ve.parent:Ve).location.href,He=function(g,l){if(!(/^file:/.test(_=g.url)||/^file:/.test(er())&&!/^\w+:/.test(_))){if(Ve.fetch&&Ve.Request&&Ve.AbortController&&Ve.Request.prototype.hasOwnProperty("signal"))return function(x,D){const F=new Ve.AbortController,B=new Ve.Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,referrer:er(),signal:F.signal});let Z=!1,X=!1;const re=(ce=B.url).indexOf("sku=")>0&&ns(ce);var ce;"json"===x.type&&B.headers.set("Accept","application/json");const de=(Se,Re,Xe)=>{if(X)return;if(Se&&"SecurityError"!==Se.message&&mi(Se),Re&&Xe)return _e(Re);const at=Date.now();Ve.fetch(B).then(bt=>{if(bt.ok){const It=re?bt.clone():null;return _e(bt,It,at)}return D(new ir(bt.statusText,bt.status,x.url))}).catch(bt=>{20!==bt.code&&D(new Error(bt.message))})},_e=(Se,Re,Xe)=>{("arrayBuffer"===x.type?Se.arrayBuffer():"json"===x.type?Se.json():Se.text()).then(at=>{X||(Re&&Xe&&function(bt,It,Rt){if(Lt(),!ft)return;const Bt={status:It.status,statusText:It.statusText,headers:new Ve.Headers};It.headers.forEach((Ut,mn)=>Bt.headers.set(mn,Ut));const jt=jn(It.headers.get("Cache-Control")||"");jt["no-store"]||(jt["max-age"]&&Bt.headers.set("Expires",new Date(Rt+1e3*jt["max-age"]).toUTCString()),new Date(Bt.headers.get("Expires")).getTime()-Rt<42e4||function(Ut,mn){if(void 0===dt)try{new Response(new ReadableStream),dt=!0}catch(Cn){dt=!1}dt?mn(Ut.body):Ut.blob().then(mn)}(It,Ut=>{const mn=new Ve.Response(Ut,Bt);Lt(),ft&&ft.then(Cn=>Cn.put(Ln(bt.url),mn)).catch(Cn=>mi(Cn.message))}))}(B,Re,Xe),Z=!0,D(null,at,Se.headers.get("Cache-Control"),Se.headers.get("Expires")))}).catch(at=>{X||D(new Error(at.message))})};return re?function(Se,Re){if(Lt(),!ft)return Re(null);const Xe=Ln(Se.url);ft.then(at=>{at.match(Xe).then(bt=>{const It=function(Rt){if(!Rt)return!1;const Bt=new Date(Rt.headers.get("Expires")||0),jt=jn(Rt.headers.get("Cache-Control")||"");return Bt>Date.now()&&!jt["no-cache"]}(bt);at.delete(Xe),It&&at.put(Xe,bt.clone()),Re(null,bt,It)}).catch(Re)}).catch(Re)}(B,de):de(null,null),{cancel:()=>{X=!0,Z||F.abort()}}}(g,l);if(Hn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",g,l,void 0,!0)}var _;return function(x,D){const F=new Ve.XMLHttpRequest;F.open(x.method||"GET",x.url,!0),"arrayBuffer"===x.type&&(F.responseType="arraybuffer");for(const B in x.headers)F.setRequestHeader(B,x.headers[B]);return"json"===x.type&&(F.responseType="text",F.setRequestHeader("Accept","application/json")),F.withCredentials="include"===x.credentials,F.onerror=()=>{D(new Error(F.statusText))},F.onload=()=>{if((F.status>=200&&F.status<300||0===F.status)&&null!==F.response){let B=F.response;if("json"===x.type)try{B=JSON.parse(F.response)}catch(Z){return D(Z)}D(null,B,F.getResponseHeader("Cache-Control"),F.getResponseHeader("Expires"))}else D(new ir(F.statusText,F.status,x.url))},F.send(x.body),{cancel:()=>F.abort()}}(g,l)},we=function(g,l){return He(Di(g,{type:"arrayBuffer"}),l)},De=function(g,l){return He(Di(g,{method:"POST"}),l)},qe=function(g,l){return He(Di(g,{method:"GET"}),l)};function it(g){const l=Ve.document.createElement("a");return l.href=g,l.protocol===Ve.document.location.protocol&&l.host===Ve.document.location.host}const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ot,Pt;Ot=[],Pt=0;const xt=function(g,l){if(hs.supported&&(g.headers||(g.headers={}),g.headers.accept="image/webp,*/*"),Pt>=Ri.MAX_PARALLEL_IMAGE_REQUESTS){const F={requestParameters:g,callback:l,cancelled:!1,cancel(){this.cancelled=!0}};return Ot.push(F),F}Pt++;let _=!1;const x=()=>{if(!_)for(_=!0,Pt--;Ot.length&&Pt<Ri.MAX_PARALLEL_IMAGE_REQUESTS;){const F=Ot.shift(),{requestParameters:B,callback:Z,cancelled:X}=F;X||(F.cancel=xt(B,Z).cancel)}},D=we(g,(F,B,Z,X)=>{x(),F?l(F):B&&(Ve.createImageBitmap?function(re,ce){const de=new Ve.Blob([new Uint8Array(re)],{type:"image/png"});Ve.createImageBitmap(de).then(_e=>{ce(null,_e)}).catch(_e=>{ce(new Error(`Could not load image because of ${_e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(B,(re,ce)=>l(re,ce,Z,X)):function(re,ce){const de=new Ve.Image,_e=Ve.URL;de.onload=()=>{ce(null,de),_e.revokeObjectURL(de.src),de.onload=null,Ve.requestAnimationFrame(()=>{de.src=yt})},de.onerror=()=>ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Se=new Ve.Blob([new Uint8Array(re)],{type:"image/png"});de.src=re.byteLength?_e.createObjectURL(Se):yt}(B,(re,ce)=>l(re,ce,Z,X)))});return{cancel:()=>{D.cancel(),x()}}};function Ft(g,l,_){_[g]&&-1!==_[g].indexOf(l)||(_[g]=_[g]||[],_[g].push(l))}function en(g,l,_){if(_&&_[g]){const x=_[g].indexOf(l);-1!==x&&_[g].splice(x,1)}}class ve{constructor(l,_={}){Di(this,_),this.type=l}}class d extends ve{constructor(l,_={}){super("error",Di({error:l},_))}}class p{on(l,_){return this._listeners=this._listeners||{},Ft(l,_,this._listeners),this}off(l,_){return en(l,_,this._listeners),en(l,_,this._oneTimeListeners),this}once(l,_){return _?(this._oneTimeListeners=this._oneTimeListeners||{},Ft(l,_,this._oneTimeListeners),this):new Promise(x=>this.once(l,x))}fire(l,_){"string"==typeof l&&(l=new ve(l,_||{}));const x=l.type;if(this.listens(x)){l.target=this;const D=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const Z of D)Z.call(this,l);const F=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const Z of F)en(x,Z,this._oneTimeListeners),Z.call(this,l);const B=this._eventedParent;B&&(Di(l,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),B.fire(l))}else l instanceof d&&console.error(l.error);return this}listens(l){return!!(this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l))}setEventedParent(l,_){return this._eventedParent=l,this._eventedParentData=_,this}}var y={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class C{constructor(l,_,x,D){this.message=(l?`${l}: `:"")+x,D&&(this.identifier=D),null!=_&&_.__line__&&(this.line=_.__line__)}}function M(g){const l=g.value;return l?[new C(g.key,l,"constants have been deprecated as of v8")]:[]}function L(g,...l){for(const _ of l)for(const x in _)g[x]=_[x];return g}function R(g){return g instanceof Number||g instanceof String||g instanceof Boolean?g.valueOf():g}function H(g){if(Array.isArray(g))return g.map(H);if(g instanceof Object&&!(g instanceof Number||g instanceof String||g instanceof Boolean)){const l={};for(const _ in g)l[_]=H(g[_]);return l}return R(g)}class G extends Error{constructor(l,_){super(_),this.message=_,this.key=l}}class J{constructor(l,_=[]){this.parent=l,this.bindings={};for(const[x,D]of _)this.bindings[x]=D}concat(l){return new J(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const te={kind:"null"},K={kind:"number"},ae={kind:"string"},pe={kind:"boolean"},ge={kind:"color"},xe={kind:"object"},Me={kind:"value"},ze={kind:"collator"},Ke={kind:"formatted"},Y={kind:"resolvedImage"};function ne(g,l){return{kind:"array",itemType:g,N:l}}function be(g){if("array"===g.kind){const l=be(g.itemType);return"number"==typeof g.N?`array<${l}, ${g.N}>`:"value"===g.itemType.kind?"array":`array<${l}>`}return g.kind}const Ie=[te,K,ae,pe,ge,Ke,xe,ne(Me),Y];function Je(g,l){if("error"===l.kind)return null;if("array"===g.kind){if("array"===l.kind&&(0===l.N&&"value"===l.itemType.kind||!Je(g.itemType,l.itemType))&&("number"!=typeof g.N||g.N===l.N))return null}else{if(g.kind===l.kind)return null;if("value"===g.kind)for(const _ of Ie)if(!Je(_,l))return null}return`Expected ${be(g)} but found ${be(l)} instead.`}function Nt(g,l){return l.some(_=>_.kind===g.kind)}function St(g,l){return l.some(_=>"null"===_?null===g:"array"===_?Array.isArray(g):"object"===_?g&&!Array.isArray(g)&&"object"==typeof g:_===typeof g)}function Xt(g){var l={exports:{}};return g(l,l.exports),l.exports}var gn=Xt(function(g,l){var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function x(Z){return(Z=Math.round(Z))<0?0:Z>255?255:Z}function D(Z){return x("%"===Z[Z.length-1]?parseFloat(Z)/100*255:parseInt(Z))}function F(Z){return(X="%"===Z[Z.length-1]?parseFloat(Z)/100:parseFloat(Z))<0?0:X>1?1:X;var X}function B(Z,X,re){return re<0?re+=1:re>1&&(re-=1),6*re<1?Z+(X-Z)*re*6:2*re<1?X:3*re<2?Z+(X-Z)*(2/3-re)*6:Z}try{l.parseCSSColor=function(Z){var X,re=Z.replace(/ /g,"").toLowerCase();if(re in _)return _[re].slice();if("#"===re[0])return 4===re.length?(X=parseInt(re.substr(1),16))>=0&&X<=4095?[(3840&X)>>4|(3840&X)>>8,240&X|(240&X)>>4,15&X|(15&X)<<4,1]:null:7===re.length&&(X=parseInt(re.substr(1),16))>=0&&X<=16777215?[(16711680&X)>>16,(65280&X)>>8,255&X,1]:null;var ce=re.indexOf("("),de=re.indexOf(")");if(-1!==ce&&de+1===re.length){var _e=re.substr(0,ce),Se=re.substr(ce+1,de-(ce+1)).split(","),Re=1;switch(_e){case"rgba":if(4!==Se.length)return null;Re=F(Se.pop());case"rgb":return 3!==Se.length?null:[D(Se[0]),D(Se[1]),D(Se[2]),Re];case"hsla":if(4!==Se.length)return null;Re=F(Se.pop());case"hsl":if(3!==Se.length)return null;var Xe=(parseFloat(Se[0])%360+360)%360/360,at=F(Se[1]),bt=F(Se[2]),It=bt<=.5?bt*(at+1):bt+at-bt*at,Rt=2*bt-It;return[x(255*B(Rt,It,Xe+1/3)),x(255*B(Rt,It,Xe)),x(255*B(Rt,It,Xe-1/3)),Re];default:return null}}return null}}catch(Z){}});class hn{constructor(l,_,x,D=1){this.r=l,this.g=_,this.b=x,this.a=D}static parse(l){if(!l)return;if(l instanceof hn)return l;if("string"!=typeof l)return;const _=gn.parseCSSColor(l);return _?new hn(_[0]/255*_[3],_[1]/255*_[3],_[2]/255*_[3],_[3]):void 0}toString(){const[l,_,x,D]=this.toArray();return`rgba(${Math.round(l)},${Math.round(_)},${Math.round(x)},${D})`}toArray(){const{r:l,g:_,b:x,a:D}=this;return 0===D?[0,0,0,0]:[255*l/D,255*_/D,255*x/D,D]}}hn.black=new hn(0,0,0,1),hn.white=new hn(1,1,1,1),hn.transparent=new hn(0,0,0,0),hn.red=new hn(1,0,0,1),hn.blue=new hn(0,0,1,1);class Kn{constructor(l,_,x){this.sensitivity=l?_?"variant":"case":_?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,_){return this.collator.compare(l,_)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ni{constructor(l,_,x,D,F){this.text=l,this.image=_,this.scale=x,this.fontStack=D,this.textColor=F}}class Nn{constructor(l){this.sections=l}static fromString(l){return new Nn([new Ni(l,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(l=>0!==l.text.length||l.image&&0!==l.image.name.length)}static factory(l){return l instanceof Nn?l:Nn.fromString(l)}toString(){return 0===this.sections.length?"":this.sections.map(l=>l.text).join("")}serialize(){const l=["format"];for(const _ of this.sections){if(_.image){l.push(["image",_.image.name]);continue}l.push(_.text);const x={};_.fontStack&&(x["text-font"]=["literal",_.fontStack.split(",")]),_.scale&&(x["font-scale"]=_.scale),_.textColor&&(x["text-color"]=["rgba"].concat(_.textColor.toArray())),l.push(x)}return l}}class ei{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new ei({name:l,available:!1}):null}serialize(){return["image",this.name]}}function rr(g,l,_,x){return"number"==typeof g&&g>=0&&g<=255&&"number"==typeof l&&l>=0&&l<=255&&"number"==typeof _&&_>=0&&_<=255?void 0===x||"number"==typeof x&&x>=0&&x<=1?null:`Invalid rgba value [${[g,l,_,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof x?[g,l,_,x]:[g,l,_]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function yo(g){if(null===g||"string"==typeof g||"boolean"==typeof g||"number"==typeof g||g instanceof hn||g instanceof Kn||g instanceof Nn||g instanceof ei)return!0;if(Array.isArray(g)){for(const l of g)if(!yo(l))return!1;return!0}if("object"==typeof g){for(const l in g)if(!yo(g[l]))return!1;return!0}return!1}function Tr(g){if(null===g)return te;if("string"==typeof g)return ae;if("boolean"==typeof g)return pe;if("number"==typeof g)return K;if(g instanceof hn)return ge;if(g instanceof Kn)return ze;if(g instanceof Nn)return Ke;if(g instanceof ei)return Y;if(Array.isArray(g)){const l=g.length;let _;for(const x of g){const D=Tr(x);if(_){if(_===D)continue;_=Me;break}_=D}return ne(_||Me,l)}return xe}function or(g){const l=typeof g;return null===g?"":"string"===l||"number"===l||"boolean"===l?String(g):g instanceof hn||g instanceof Nn||g instanceof ei?g.toString():JSON.stringify(g)}class No{constructor(l,_){this.type=l,this.value=_}static parse(l,_){if(2!==l.length)return _.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!yo(l[1]))return _.error("invalid value");const x=l[1];let D=Tr(x);const F=_.expectedType;return"array"!==D.kind||0!==D.N||!F||"array"!==F.kind||"number"==typeof F.N&&0!==F.N||(D=F),new No(D,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof hn?["rgba"].concat(this.value.toArray()):this.value instanceof Nn?this.value.serialize():this.value}}class xr{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}const ys={string:ae,number:K,boolean:pe,object:xe};class Us{constructor(l,_){this.type=l,this.args=_}static parse(l,_){if(l.length<2)return _.error("Expected at least one argument.");let x,D=1;const F=l[0];if("array"===F){let Z,X;if(l.length>2){const re=l[1];if("string"!=typeof re||!(re in ys)||"object"===re)return _.error('The item type argument of "array" must be one of string, number, boolean',1);Z=ys[re],D++}else Z=Me;if(l.length>3){if(null!==l[2]&&("number"!=typeof l[2]||l[2]<0||l[2]!==Math.floor(l[2])))return _.error('The length argument to "array" must be a positive integer literal',2);X=l[2],D++}x=ne(Z,X)}else x=ys[F];const B=[];for(;D<l.length;D++){const Z=_.parse(l[D],D,Me);if(!Z)return null;B.push(Z)}return new Us(x,B)}evaluate(l){for(let _=0;_<this.args.length;_++){const x=this.args[_].evaluate(l);if(!Je(this.type,Tr(x)))return x;if(_===this.args.length-1)throw new xr(`Expected value to be of type ${be(this.type)}, but found ${be(Tr(x))} instead.`)}return null}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}serialize(){const l=this.type,_=[l.kind];if("array"===l.kind){const x=l.itemType;if("string"===x.kind||"number"===x.kind||"boolean"===x.kind){_.push(x.kind);const D=l.N;("number"==typeof D||this.args.length>1)&&_.push(D)}}return _.concat(this.args.map(x=>x.serialize()))}}class ro{constructor(l){this.type=Ke,this.sections=l}static parse(l,_){if(l.length<2)return _.error("Expected at least one argument.");const x=l[1];if(!Array.isArray(x)&&"object"==typeof x)return _.error("First argument must be an image or text section.");const D=[];let F=!1;for(let B=1;B<=l.length-1;++B){const Z=l[B];if(F&&"object"==typeof Z&&!Array.isArray(Z)){F=!1;let X=null;if(Z["font-scale"]&&(X=_.parse(Z["font-scale"],1,K),!X))return null;let re=null;if(Z["text-font"]&&(re=_.parse(Z["text-font"],1,ne(ae)),!re))return null;let ce=null;if(Z["text-color"]&&(ce=_.parse(Z["text-color"],1,ge),!ce))return null;const de=D[D.length-1];de.scale=X,de.font=re,de.textColor=ce}else{const X=_.parse(l[B],1,Me);if(!X)return null;const re=X.type.kind;if("string"!==re&&"value"!==re&&"null"!==re&&"resolvedImage"!==re)return _.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,D.push({content:X,scale:null,font:null,textColor:null})}}return new ro(D)}evaluate(l){return new Nn(this.sections.map(_=>{const x=_.content.evaluate(l);return Tr(x)===Y?new Ni("",x,null,null,null):new Ni(or(x),null,_.scale?_.scale.evaluate(l):null,_.font?_.font.evaluate(l).join(","):null,_.textColor?_.textColor.evaluate(l):null)}))}eachChild(l){for(const _ of this.sections)l(_.content),_.scale&&l(_.scale),_.font&&l(_.font),_.textColor&&l(_.textColor)}outputDefined(){return!1}serialize(){const l=["format"];for(const _ of this.sections){l.push(_.content.serialize());const x={};_.scale&&(x["font-scale"]=_.scale.serialize()),_.font&&(x["text-font"]=_.font.serialize()),_.textColor&&(x["text-color"]=_.textColor.serialize()),l.push(x)}return l}}class Bo{constructor(l){this.type=Y,this.input=l}static parse(l,_){if(2!==l.length)return _.error("Expected two arguments.");const x=_.parse(l[1],1,ae);return x?new Bo(x):_.error("No image name provided.")}evaluate(l){const _=this.input.evaluate(l),x=ei.fromString(_);return x&&l.availableImages&&(x.available=l.availableImages.indexOf(_)>-1),x}eachChild(l){l(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const yu={"to-boolean":pe,"to-color":ge,"to-number":K,"to-string":ae};class cl{constructor(l,_){this.type=l,this.args=_}static parse(l,_){if(l.length<2)return _.error("Expected at least one argument.");const x=l[0];if(("to-boolean"===x||"to-string"===x)&&2!==l.length)return _.error("Expected one argument.");const D=yu[x],F=[];for(let B=1;B<l.length;B++){const Z=_.parse(l[B],B,Me);if(!Z)return null;F.push(Z)}return new cl(D,F)}evaluate(l){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(l));if("color"===this.type.kind){let _,x;for(const D of this.args){if(_=D.evaluate(l),x=null,_ instanceof hn)return _;if("string"==typeof _){const F=l.parseColor(_);if(F)return F}else if(Array.isArray(_)&&(x=_.length<3||_.length>4?`Invalid rbga value ${JSON.stringify(_)}: expected an array containing either three or four numeric values.`:rr(_[0],_[1],_[2],_[3]),!x))return new hn(_[0]/255,_[1]/255,_[2]/255,_[3])}throw new xr(x||`Could not parse color from value '${"string"==typeof _?_:String(JSON.stringify(_))}'`)}if("number"===this.type.kind){let _=null;for(const x of this.args){if(_=x.evaluate(l),null===_)return 0;const D=Number(_);if(!isNaN(D))return D}throw new xr(`Could not convert ${JSON.stringify(_)} to number.`)}return"formatted"===this.type.kind?Nn.fromString(or(this.args[0].evaluate(l))):"resolvedImage"===this.type.kind?ei.fromString(or(this.args[0].evaluate(l))):or(this.args[0].evaluate(l))}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}serialize(){if("formatted"===this.type.kind)return new ro([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Bo(this.args[0]).serialize();const l=[`to-${this.type.kind}`];return this.eachChild(_=>{l.push(_.serialize())}),l}}const C_=["Unknown","Point","LineString","Polygon"];class Rp{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?C_[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let _=this._parseColorCache[l];return _||(_=this._parseColorCache[l]=hn.parse(l)),_}}class na{constructor(l,_,x,D){this.name=l,this.type=_,this._evaluate=x,this.args=D}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(l=>l.serialize()))}static parse(l,_){const x=l[0],D=na.definitions[x];if(!D)return _.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const F=Array.isArray(D)?D[0]:D.type,B=Array.isArray(D)?[[D[1],D[2]]]:D.overloads,Z=B.filter(([re])=>!Array.isArray(re)||re.length===l.length-1);let X=null;for(const[re,ce]of Z){X=new ah(_.registry,_.path,null,_.scope);const de=[];let _e=!1;for(let Se=1;Se<l.length;Se++){const Re=l[Se],Xe=Array.isArray(re)?re[Se-1]:re.type,at=X.parse(Re,1+de.length,Xe);if(!at){_e=!0;break}de.push(at)}if(!_e)if(Array.isArray(re)&&re.length!==de.length)X.error(`Expected ${re.length} arguments, but found ${de.length} instead.`);else{for(let Se=0;Se<de.length;Se++){const Re=Array.isArray(re)?re[Se]:re.type,Xe=de[Se];X.concat(Se+1).checkSubtype(Re,Xe.type)}if(0===X.errors.length)return new na(x,F,ce,de)}}if(1===Z.length)_.errors.push(...X.errors);else{const re=(Z.length?Z:B).map(([de])=>{return _e=de,Array.isArray(_e)?`(${_e.map(be).join(", ")})`:`(${be(_e.type)}...)`;var _e}).join(" | "),ce=[];for(let de=1;de<l.length;de++){const _e=_.parse(l[de],1+ce.length);if(!_e)return null;ce.push(be(_e.type))}_.error(`Expected arguments of type ${re}, but found (${ce.join(", ")}) instead.`)}return null}static register(l,_){na.definitions=_;for(const x in _)l[x]=na}}class Op{constructor(l,_,x){this.type=ze,this.locale=x,this.caseSensitive=l,this.diacriticSensitive=_}static parse(l,_){if(2!==l.length)return _.error("Expected one argument.");const x=l[1];if("object"!=typeof x||Array.isArray(x))return _.error("Collator options argument must be an object.");const D=_.parse(void 0!==x["case-sensitive"]&&x["case-sensitive"],1,pe);if(!D)return null;const F=_.parse(void 0!==x["diacritic-sensitive"]&&x["diacritic-sensitive"],1,pe);if(!F)return null;let B=null;return x.locale&&(B=_.parse(x.locale,1,ae),!B)?null:new Op(D,F,B)}evaluate(l){return new Kn(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}serialize(){const l={};return l["case-sensitive"]=this.caseSensitive.serialize(),l["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(l.locale=this.locale.serialize()),["collator",l]}}const vu=8192;function Fp(g,l){g[0]=Math.min(g[0],l[0]),g[1]=Math.min(g[1],l[1]),g[2]=Math.max(g[2],l[0]),g[3]=Math.max(g[3],l[1])}function uc(g,l){return!(g[0]<=l[0]||g[2]>=l[2]||g[1]<=l[1]||g[3]>=l[3])}function dr(g,l){const _=(180+g[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g[1]*Math.PI/360)))/360,D=Math.pow(2,l.z);return[Math.round(_*D*vu),Math.round(x*D*vu)]}function Lp(g,l,_){const x=g[0]-l[0],D=g[1]-l[1],F=g[0]-_[0],B=g[1]-_[1];return x*B-F*D==0&&x*F<=0&&D*B<=0}function ih(g,l){let _=!1;for(let B=0,Z=l.length;B<Z;B++){const X=l[B];for(let re=0,ce=X.length;re<ce-1;re++){if(Lp(g,X[re],X[re+1]))return!1;(D=X[re])[1]>(x=g)[1]!=(F=X[re+1])[1]>x[1]&&x[0]<(F[0]-D[0])*(x[1]-D[1])/(F[1]-D[1])+D[0]&&(_=!_)}}var x,D,F;return _}function Ud(g,l){for(let _=0;_<l.length;_++)if(ih(g,l[_]))return!0;return!1}function ul(g,l,_,x){const D=x[0]-_[0],F=x[1]-_[1],B=(g[0]-_[0])*F-D*(g[1]-_[1]),Z=(l[0]-_[0])*F-D*(l[1]-_[1]);return B>0&&Z<0||B<0&&Z>0}function Jh(g,l,_){for(const re of _)for(let ce=0;ce<re.length-1;++ce)if((Z=[(B=re[ce+1])[0]-(F=re[ce])[0],B[1]-F[1]])[0]*(X=[(D=l)[0]-(x=g)[0],D[1]-x[1]])[1]-Z[1]*X[0]!=0&&ul(x,D,F,B)&&ul(F,B,x,D))return!0;var x,D,F,B,Z,X;return!1}function ia(g,l){for(let _=0;_<g.length;++_)if(!ih(g[_],l))return!1;for(let _=0;_<g.length-1;++_)if(Jh(g[_],g[_+1],l))return!1;return!0}function S_(g,l){for(let _=0;_<l.length;_++)if(ia(g,l[_]))return!0;return!1}function zo(g,l,_){const x=[];for(let D=0;D<g.length;D++){const F=[];for(let B=0;B<g[D].length;B++){const Z=dr(g[D][B],_);Fp(l,Z),F.push(Z)}x.push(F)}return x}function Hd(g,l,_){const x=[];for(let D=0;D<g.length;D++){const F=zo(g[D],l,_);x.push(F)}return x}function hl(g,l,_,x){if(g[0]<_[0]||g[0]>_[2]){const D=.5*x;let F=g[0]-_[0]>D?-x:_[0]-g[0]>D?x:0;0===F&&(F=g[0]-_[2]>D?-x:_[2]-g[0]>D?x:0),g[0]+=F}Fp(l,g)}function bu(g,l,_,x){const D=Math.pow(2,x.z)*vu,F=[x.x*vu,x.y*vu],B=[];for(const Z of g)for(const X of Z){const re=[X.x+F[0],X.y+F[1]];hl(re,l,_,D),B.push(re)}return B}function sr(g,l,_,x){const D=Math.pow(2,x.z)*vu,F=[x.x*vu,x.y*vu],B=[];for(const X of g){const re=[];for(const ce of X){const de=[ce.x+F[0],ce.y+F[1]];Fp(l,de),re.push(de)}B.push(re)}if(l[2]-l[0]<=D/2){(Z=l)[0]=Z[1]=1/0,Z[2]=Z[3]=-1/0;for(const X of B)for(const re of X)hl(re,l,_,D)}var Z;return B}class dl{constructor(l,_){this.type=pe,this.geojson=l,this.geometries=_}static parse(l,_){if(2!==l.length)return _.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(yo(l[1])){const x=l[1];if("FeatureCollection"===x.type)for(let D=0;D<x.features.length;++D){const F=x.features[D].geometry.type;if("Polygon"===F||"MultiPolygon"===F)return new dl(x,x.features[D].geometry)}else if("Feature"===x.type){const D=x.geometry.type;if("Polygon"===D||"MultiPolygon"===D)return new dl(x,x.geometry)}else if("Polygon"===x.type||"MultiPolygon"===x.type)return new dl(x,x)}return _.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(null!=l.geometry()&&null!=l.canonicalID()){if("Point"===l.geometryType())return function(_,x){const D=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],B=_.canonicalID();if("Polygon"===x.type){const Z=zo(x.coordinates,F,B),X=bu(_.geometry(),D,F,B);if(!uc(D,F))return!1;for(const re of X)if(!ih(re,Z))return!1}if("MultiPolygon"===x.type){const Z=Hd(x.coordinates,F,B),X=bu(_.geometry(),D,F,B);if(!uc(D,F))return!1;for(const re of X)if(!Ud(re,Z))return!1}return!0}(l,this.geometries);if("LineString"===l.geometryType())return function(_,x){const D=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],B=_.canonicalID();if("Polygon"===x.type){const Z=zo(x.coordinates,F,B),X=sr(_.geometry(),D,F,B);if(!uc(D,F))return!1;for(const re of X)if(!ia(re,Z))return!1}if("MultiPolygon"===x.type){const Z=Hd(x.coordinates,F,B),X=sr(_.geometry(),D,F,B);if(!uc(D,F))return!1;for(const re of X)if(!S_(re,Z))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function rh(g){if(g instanceof na&&("get"===g.name&&1===g.args.length||"feature-state"===g.name||"has"===g.name&&1===g.args.length||"properties"===g.name||"geometry-type"===g.name||"id"===g.name||/^filter-/.test(g.name))||g instanceof dl)return!1;let l=!0;return g.eachChild(_=>{l&&!rh(_)&&(l=!1)}),l}function oh(g){if(g instanceof na&&"feature-state"===g.name)return!1;let l=!0;return g.eachChild(_=>{l&&!oh(_)&&(l=!1)}),l}function Zi(g,l){if(g instanceof na&&l.indexOf(g.name)>=0)return!1;let _=!0;return g.eachChild(x=>{_&&!Zi(x,l)&&(_=!1)}),_}class sh{constructor(l,_){this.type=_.type,this.name=l,this.boundExpression=_}static parse(l,_){if(2!==l.length||"string"!=typeof l[1])return _.error("'var' expression requires exactly one string literal argument.");const x=l[1];return _.scope.has(x)?new sh(x,_.scope.get(x)):_.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ah{constructor(l,_=[],x,D=new J,F=[]){this.registry=l,this.path=_,this.key=_.map(B=>`[${B}]`).join(""),this.scope=D,this.errors=F,this.expectedType=x}parse(l,_,x,D,F={}){return _?this.concat(_,x,D)._parse(l,F):this._parse(l,F)}_parse(l,_){function x(D,F,B){return"assert"===B?new Us(F,[D]):"coerce"===B?new cl(F,[D]):D}if(null!==l&&"string"!=typeof l&&"boolean"!=typeof l&&"number"!=typeof l||(l=["literal",l]),Array.isArray(l)){if(0===l.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const D=l[0];if("string"!=typeof D)return this.error(`Expression name must be a string, but found ${typeof D} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const F=this.registry[D];if(F){let B=F.parse(l,this);if(!B)return null;if(this.expectedType){const Z=this.expectedType,X=B.type;if("string"!==Z.kind&&"number"!==Z.kind&&"boolean"!==Z.kind&&"object"!==Z.kind&&"array"!==Z.kind||"value"!==X.kind)if("color"!==Z.kind&&"formatted"!==Z.kind&&"resolvedImage"!==Z.kind||"value"!==X.kind&&"string"!==X.kind){if(this.checkSubtype(Z,X))return null}else B=x(B,Z,_.typeAnnotation||"coerce");else B=x(B,Z,_.typeAnnotation||"assert")}if(!(B instanceof No)&&"resolvedImage"!==B.type.kind&&Gd(B)){const Z=new Rp;try{B=new No(B.type,B.evaluate(Z))}catch(X){return this.error(X.message),null}}return B}return this.error(`Unknown expression "${D}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===l?"'undefined' value invalid. Use null instead.":"object"==typeof l?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,_,x){const D="number"==typeof l?this.path.concat(l):this.path,F=x?this.scope.concat(x):this.scope;return new ah(this.registry,D,_||null,F,this.errors)}error(l,..._){const x=`${this.key}${_.map(D=>`[${D}]`).join("")}`;this.errors.push(new G(x,l))}checkSubtype(l,_){const x=Je(l,_);return x&&this.error(x),x}}function Gd(g){if(g instanceof sh)return Gd(g.boundExpression);if(g instanceof na&&"error"===g.name||g instanceof Op||g instanceof dl)return!1;const l=g instanceof cl||g instanceof Us;let _=!0;return g.eachChild(x=>{_=l?_&&Gd(x):_&&x instanceof No}),!!_&&rh(g)&&Zi(g,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function jd(g,l){const _=g.length-1;let x,D,F=0,B=_,Z=0;for(;F<=B;)if(Z=Math.floor((F+B)/2),x=g[Z],D=g[Z+1],x<=l){if(Z===_||l<D)return Z;F=Z+1}else{if(!(x>l))throw new xr("Input is not a number.");B=Z-1}return 0}class Hs{constructor(l,_,x){this.type=l,this.input=_,this.labels=[],this.outputs=[];for(const[D,F]of x)this.labels.push(D),this.outputs.push(F)}static parse(l,_){if(l.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return _.error("Expected an even number of arguments.");const x=_.parse(l[1],1,K);if(!x)return null;const D=[];let F=null;_.expectedType&&"value"!==_.expectedType.kind&&(F=_.expectedType);for(let B=1;B<l.length;B+=2){const Z=1===B?-1/0:l[B],X=l[B+1],re=B,ce=B+1;if("number"!=typeof Z)return _.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(D.length&&D[D.length-1][0]>=Z)return _.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);const de=_.parse(X,ce,F);if(!de)return null;F=F||de.type,D.push([Z,de])}return new Hs(F,x,D)}evaluate(l){const _=this.labels,x=this.outputs;if(1===_.length)return x[0].evaluate(l);const D=this.input.evaluate(l);if(D<=_[0])return x[0].evaluate(l);const F=_.length;return D>=_[F-1]?x[F-1].evaluate(l):x[jd(_,D)].evaluate(l)}eachChild(l){l(this.input);for(const _ of this.outputs)l(_)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}serialize(){const l=["step",this.input.serialize()];for(let _=0;_<this.labels.length;_++)_>0&&l.push(this.labels[_]),l.push(this.outputs[_].serialize());return l}}function ui(g,l,_){return g*(1-_)+l*_}var lh=Object.freeze({__proto__:null,number:ui,color:function(g,l,_){return new hn(ui(g.r,l.r,_),ui(g.g,l.g,_),ui(g.b,l.b,_),ui(g.a,l.a,_))},array:function(g,l,_){return g.map((x,D)=>ui(x,l[D],_))}});const Kh=4/29,Bl=6/29,Xr=3*Bl*Bl,uh=Math.PI/180,Ii=180/Math.PI;function Np(g){return g>.008856451679035631?Math.pow(g,1/3):g/Xr+Kh}function Pr(g){return g>Bl?g*g*g:Xr*(g-Kh)}function Yd(g){return 255*(g<=.0031308?12.92*g:1.055*Math.pow(g,1/2.4)-.055)}function oo(g){return(g/=255)<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function Fc(g){const l=oo(g.r),_=oo(g.g),x=oo(g.b),D=Np((.4124564*l+.3575761*_+.1804375*x)/.95047),F=Np((.2126729*l+.7151522*_+.072175*x)/1);return{l:116*F-16,a:500*(D-F),b:200*(F-Np((.0193339*l+.119192*_+.9503041*x)/1.08883)),alpha:g.a}}function Ma(g){let l=(g.l+16)/116,_=isNaN(g.a)?l:l+g.a/500,x=isNaN(g.b)?l:l-g.b/200;return l=1*Pr(l),_=.95047*Pr(_),x=1.08883*Pr(x),new hn(Yd(3.2404542*_-1.5371385*l-.4985314*x),Yd(-.969266*_+1.8760108*l+.041556*x),Yd(.0556434*_-.2040259*l+1.0572252*x),g.alpha)}function hh(g,l,_){const x=l-g;return g+_*(x>180||x<-180?x-360*Math.round(x/360):x)}const Aa={forward:Fc,reverse:Ma,interpolate:function(g,l,_){return{l:ui(g.l,l.l,_),a:ui(g.a,l.a,_),b:ui(g.b,l.b,_),alpha:ui(g.alpha,l.alpha,_)}}},Ba={forward:function(g){const{l,a:_,b:x}=Fc(g),D=Math.atan2(x,_)*Ii;return{h:D<0?D+360:D,c:Math.sqrt(_*_+x*x),l,alpha:g.a}},reverse:function(g){const l=g.h*uh,_=g.c;return Ma({l:g.l,a:Math.cos(l)*_,b:Math.sin(l)*_,alpha:g.alpha})},interpolate:function(g,l,_){return{h:hh(g.h,l.h,_),c:ui(g.c,l.c,_),l:ui(g.l,l.l,_),alpha:ui(g.alpha,l.alpha,_)}}};var Gs=Object.freeze({__proto__:null,lab:Aa,hcl:Ba});class ra{constructor(l,_,x,D,F){this.type=l,this.operator=_,this.interpolation=x,this.input=D,this.labels=[],this.outputs=[];for(const[B,Z]of F)this.labels.push(B),this.outputs.push(Z)}static interpolationFactor(l,_,x,D){let F=0;if("exponential"===l.name)F=qd(_,l.base,x,D);else if("linear"===l.name)F=qd(_,1,x,D);else if("cubic-bezier"===l.name){const B=l.controlPoints;F=new Dt(B[0],B[1],B[2],B[3]).solve(qd(_,1,x,D))}return F}static parse(l,_){let[x,D,F,...B]=l;if(!Array.isArray(D)||0===D.length)return _.error("Expected an interpolation type expression.",1);if("linear"===D[0])D={name:"linear"};else if("exponential"===D[0]){const re=D[1];if("number"!=typeof re)return _.error("Exponential interpolation requires a numeric base.",1,1);D={name:"exponential",base:re}}else{if("cubic-bezier"!==D[0])return _.error(`Unknown interpolation type ${String(D[0])}`,1,0);{const re=D.slice(1);if(4!==re.length||re.some(ce=>"number"!=typeof ce||ce<0||ce>1))return _.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);D={name:"cubic-bezier",controlPoints:re}}}if(l.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return _.error("Expected an even number of arguments.");if(F=_.parse(F,2,K),!F)return null;const Z=[];let X=null;"interpolate-hcl"===x||"interpolate-lab"===x?X=ge:_.expectedType&&"value"!==_.expectedType.kind&&(X=_.expectedType);for(let re=0;re<B.length;re+=2){const ce=B[re],de=B[re+1],_e=re+3,Se=re+4;if("number"!=typeof ce)return _.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(Z.length&&Z[Z.length-1][0]>=ce)return _.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);const Re=_.parse(de,Se,X);if(!Re)return null;X=X||Re.type,Z.push([ce,Re])}return"number"===X.kind||"color"===X.kind||"array"===X.kind&&"number"===X.itemType.kind&&"number"==typeof X.N?new ra(X,x,D,F,Z):_.error(`Type ${be(X)} is not interpolatable.`)}evaluate(l){const _=this.labels,x=this.outputs;if(1===_.length)return x[0].evaluate(l);const D=this.input.evaluate(l);if(D<=_[0])return x[0].evaluate(l);const F=_.length;if(D>=_[F-1])return x[F-1].evaluate(l);const B=jd(_,D),Z=ra.interpolationFactor(this.interpolation,D,_[B],_[B+1]),X=x[B].evaluate(l),re=x[B+1].evaluate(l);return"interpolate"===this.operator?lh[this.type.kind.toLowerCase()](X,re,Z):"interpolate-hcl"===this.operator?Ba.reverse(Ba.interpolate(Ba.forward(X),Ba.forward(re),Z)):Aa.reverse(Aa.interpolate(Aa.forward(X),Aa.forward(re),Z))}eachChild(l){l(this.input);for(const _ of this.outputs)l(_)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}serialize(){let l;l="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const _=[this.operator,l,this.input.serialize()];for(let x=0;x<this.labels.length;x++)_.push(this.labels[x],this.outputs[x].serialize());return _}}function qd(g,l,_,x){const D=x-_,F=g-_;return 0===D?0:1===l?F/D:(Math.pow(l,F)-1)/(Math.pow(l,D)-1)}class Lc{constructor(l,_){this.type=l,this.args=_}static parse(l,_){if(l.length<2)return _.error("Expectected at least one argument.");let x=null;const D=_.expectedType;D&&"value"!==D.kind&&(x=D);const F=[];for(const Z of l.slice(1)){const X=_.parse(Z,1+F.length,x,void 0,{typeAnnotation:"omit"});if(!X)return null;x=x||X.type,F.push(X)}const B=D&&F.some(Z=>Je(D,Z.type));return new Lc(B?Me:x,F)}evaluate(l){let _,x=null,D=0;for(const F of this.args)if(D++,x=F.evaluate(l),x&&x instanceof ei&&!x.available&&(_||(_=x.name),x=null,D===this.args.length&&(x=_)),null!==x)break;return x}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}serialize(){const l=["coalesce"];return this.eachChild(_=>{l.push(_.serialize())}),l}}class za{constructor(l,_){this.type=_.type,this.bindings=[].concat(l),this.result=_}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const _ of this.bindings)l(_[1]);l(this.result)}static parse(l,_){if(l.length<4)return _.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const x=[];for(let F=1;F<l.length-1;F+=2){const B=l[F];if("string"!=typeof B)return _.error(`Expected string, but found ${typeof B} instead.`,F);if(/[^a-zA-Z0-9_]/.test(B))return _.error("Variable names must contain only alphanumeric characters or '_'.",F);const Z=_.parse(l[F+1],F+1);if(!Z)return null;x.push([B,Z])}const D=_.parse(l[l.length-1],l.length-1,_.expectedType,x);return D?new za(x,D):null}outputDefined(){return this.result.outputDefined()}serialize(){const l=["let"];for(const[_,x]of this.bindings)l.push(_,x.serialize());return l.push(this.result.serialize()),l}}class ed{constructor(l,_,x){this.type=l,this.index=_,this.input=x}static parse(l,_){if(3!==l.length)return _.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const x=_.parse(l[1],1,K),D=_.parse(l[2],2,ne(_.expectedType||Me));return x&&D?new ed(D.type.itemType,x,D):null}evaluate(l){const _=this.index.evaluate(l),x=this.input.evaluate(l);if(_<0)throw new xr(`Array index out of bounds: ${_} < 0.`);if(_>=x.length)throw new xr(`Array index out of bounds: ${_} > ${x.length-1}.`);if(_!==Math.floor(_))throw new xr(`Array index must be an integer, but found ${_} instead.`);return x[_]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Va{constructor(l,_){this.type=pe,this.needle=l,this.haystack=_}static parse(l,_){if(3!==l.length)return _.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const x=_.parse(l[1],1,Me),D=_.parse(l[2],2,Me);return x&&D?Nt(x.type,[pe,ae,K,te,Me])?new Va(x,D):_.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(x.type)} instead`):null}evaluate(l){const _=this.needle.evaluate(l),x=this.haystack.evaluate(l);if(!x)return!1;if(!St(_,["boolean","string","number","null"]))throw new xr(`Expected first argument to be of type boolean, string, number or null, but found ${be(Tr(_))} instead.`);if(!St(x,["string","array"]))throw new xr(`Expected second argument to be of type array or string, but found ${be(Tr(x))} instead.`);return x.indexOf(_)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class bi{constructor(l,_,x){this.type=K,this.needle=l,this.haystack=_,this.fromIndex=x}static parse(l,_){if(l.length<=2||l.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const x=_.parse(l[1],1,Me),D=_.parse(l[2],2,Me);if(!x||!D)return null;if(!Nt(x.type,[pe,ae,K,te,Me]))return _.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(x.type)} instead`);if(4===l.length){const F=_.parse(l[3],3,K);return F?new bi(x,D,F):null}return new bi(x,D)}evaluate(l){const _=this.needle.evaluate(l),x=this.haystack.evaluate(l);if(!St(_,["boolean","string","number","null"]))throw new xr(`Expected first argument to be of type boolean, string, number or null, but found ${be(Tr(_))} instead.`);if(!St(x,["string","array"]))throw new xr(`Expected second argument to be of type array or string, but found ${be(Tr(x))} instead.`);if(this.fromIndex){const D=this.fromIndex.evaluate(l);return x.indexOf(_,D)}return x.indexOf(_)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const l=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),l]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class wu{constructor(l,_,x,D,F,B){this.inputType=l,this.type=_,this.input=x,this.cases=D,this.outputs=F,this.otherwise=B}static parse(l,_){if(l.length<5)return _.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return _.error("Expected an even number of arguments.");let x,D;_.expectedType&&"value"!==_.expectedType.kind&&(D=_.expectedType);const F={},B=[];for(let re=2;re<l.length-1;re+=2){let ce=l[re];const de=l[re+1];Array.isArray(ce)||(ce=[ce]);const _e=_.concat(re);if(0===ce.length)return _e.error("Expected at least one branch label.");for(const Re of ce){if("number"!=typeof Re&&"string"!=typeof Re)return _e.error("Branch labels must be numbers or strings.");if("number"==typeof Re&&Math.abs(Re)>Number.MAX_SAFE_INTEGER)return _e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Re&&Math.floor(Re)!==Re)return _e.error("Numeric branch labels must be integer values.");if(x){if(_e.checkSubtype(x,Tr(Re)))return null}else x=Tr(Re);if(void 0!==F[String(Re)])return _e.error("Branch labels must be unique.");F[String(Re)]=B.length}const Se=_.parse(de,re,D);if(!Se)return null;D=D||Se.type,B.push(Se)}const Z=_.parse(l[1],1,Me);if(!Z)return null;const X=_.parse(l[l.length-1],l.length-1,D);return X?"value"!==Z.type.kind&&_.concat(1).checkSubtype(x,Z.type)?null:new wu(x,D,Z,F,B,X):null}evaluate(l){const _=this.input.evaluate(l);return(Tr(_)===this.inputType&&this.outputs[this.cases[_]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const l=["match",this.input.serialize()],_=Object.keys(this.cases).sort(),x=[],D={};for(const B of _){const Z=D[this.cases[B]];void 0===Z?(D[this.cases[B]]=x.length,x.push([this.cases[B],[B]])):x[Z][1].push(B)}const F=B=>"number"===this.inputType.kind?Number(B):B;for(const[B,Z]of x)l.push(1===Z.length?F(Z[0]):Z.map(F)),l.push(this.outputs[B].serialize());return l.push(this.otherwise.serialize()),l}}class Bp{constructor(l,_,x){this.type=l,this.branches=_,this.otherwise=x}static parse(l,_){if(l.length<4)return _.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return _.error("Expected an odd number of arguments.");let x;_.expectedType&&"value"!==_.expectedType.kind&&(x=_.expectedType);const D=[];for(let B=1;B<l.length-1;B+=2){const Z=_.parse(l[B],B,pe);if(!Z)return null;const X=_.parse(l[B+1],B+1,x);if(!X)return null;D.push([Z,X]),x=x||X.type}const F=_.parse(l[l.length-1],l.length-1,x);return F?new Bp(x,D,F):null}evaluate(l){for(const[_,x]of this.branches)if(_.evaluate(l))return x.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[_,x]of this.branches)l(_),l(x);l(this.otherwise)}outputDefined(){return this.branches.every(([l,_])=>_.outputDefined())&&this.otherwise.outputDefined()}serialize(){const l=["case"];return this.eachChild(_=>{l.push(_.serialize())}),l}}class Cu{constructor(l,_,x,D){this.type=l,this.input=_,this.beginIndex=x,this.endIndex=D}static parse(l,_){if(l.length<=2||l.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const x=_.parse(l[1],1,Me),D=_.parse(l[2],2,K);if(!x||!D)return null;if(!Nt(x.type,[ne(Me),ae,Me]))return _.error(`Expected first argument to be of type array or string, but found ${be(x.type)} instead`);if(4===l.length){const F=_.parse(l[3],3,K);return F?new Cu(x.type,x,D,F):null}return new Cu(x.type,x,D)}evaluate(l){const _=this.input.evaluate(l),x=this.beginIndex.evaluate(l);if(!St(_,["string","array"]))throw new xr(`Expected first argument to be of type array or string, but found ${be(Tr(_))} instead.`);if(this.endIndex){const D=this.endIndex.evaluate(l);return _.slice(x,D)}return _.slice(x)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const l=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),l]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Zd(g,l){return"=="===g||"!="===g?"boolean"===l.kind||"string"===l.kind||"number"===l.kind||"null"===l.kind||"value"===l.kind:"string"===l.kind||"number"===l.kind||"value"===l.kind}function Df(g,l,_,x){return 0===x.compare(l,_)}function Su(g,l,_){const x="=="!==g&&"!="!==g;return class CB{constructor(F,B,Z){this.type=pe,this.lhs=F,this.rhs=B,this.collator=Z,this.hasUntypedArgument="value"===F.type.kind||"value"===B.type.kind}static parse(F,B){if(3!==F.length&&4!==F.length)return B.error("Expected two or three arguments.");const Z=F[0];let X=B.parse(F[1],1,Me);if(!X)return null;if(!Zd(Z,X.type))return B.concat(1).error(`"${Z}" comparisons are not supported for type '${be(X.type)}'.`);let re=B.parse(F[2],2,Me);if(!re)return null;if(!Zd(Z,re.type))return B.concat(2).error(`"${Z}" comparisons are not supported for type '${be(re.type)}'.`);if(X.type.kind!==re.type.kind&&"value"!==X.type.kind&&"value"!==re.type.kind)return B.error(`Cannot compare types '${be(X.type)}' and '${be(re.type)}'.`);x&&("value"===X.type.kind&&"value"!==re.type.kind?X=new Us(re.type,[X]):"value"!==X.type.kind&&"value"===re.type.kind&&(re=new Us(X.type,[re])));let ce=null;if(4===F.length){if("string"!==X.type.kind&&"string"!==re.type.kind&&"value"!==X.type.kind&&"value"!==re.type.kind)return B.error("Cannot use collator to compare non-string types.");if(ce=B.parse(F[3],3,ze),!ce)return null}return new CB(X,re,ce)}evaluate(F){const B=this.lhs.evaluate(F),Z=this.rhs.evaluate(F);if(x&&this.hasUntypedArgument){const X=Tr(B),re=Tr(Z);if(X.kind!==re.kind||"string"!==X.kind&&"number"!==X.kind)throw new xr(`Expected arguments for "${g}" to be (string, string) or (number, number), but found (${X.kind}, ${re.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const X=Tr(B),re=Tr(Z);if("string"!==X.kind||"string"!==re.kind)return l(F,B,Z)}return this.collator?_(F,B,Z,this.collator.evaluate(F)):l(F,B,Z)}eachChild(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)}outputDefined(){return!0}serialize(){const F=[g];return this.eachChild(B=>{F.push(B.serialize())}),F}}}const dh=Su("==",function(g,l,_){return l===_},Df),wn=Su("!=",function(g,l,_){return l!==_},function(g,l,_,x){return!Df(0,l,_,x)}),hr=Su("<",function(g,l,_){return l<_},function(g,l,_,x){return x.compare(l,_)<0}),td=Su(">",function(g,l,_){return l>_},function(g,l,_,x){return x.compare(l,_)>0}),wo=Su("<=",function(g,l,_){return l<=_},function(g,l,_,x){return x.compare(l,_)<=0}),nd=Su(">=",function(g,l,_){return l>=_},function(g,l,_,x){return x.compare(l,_)>=0});class Ua{constructor(l,_,x,D,F){this.type=ae,this.number=l,this.locale=_,this.currency=x,this.minFractionDigits=D,this.maxFractionDigits=F}static parse(l,_){if(3!==l.length)return _.error("Expected two arguments.");const x=_.parse(l[1],1,K);if(!x)return null;const D=l[2];if("object"!=typeof D||Array.isArray(D))return _.error("NumberFormat options argument must be an object.");let F=null;if(D.locale&&(F=_.parse(D.locale,1,ae),!F))return null;let B=null;if(D.currency&&(B=_.parse(D.currency,1,ae),!B))return null;let Z=null;if(D["min-fraction-digits"]&&(Z=_.parse(D["min-fraction-digits"],1,K),!Z))return null;let X=null;return D["max-fraction-digits"]&&(X=_.parse(D["max-fraction-digits"],1,K),!X)?null:new Ua(x,F,B,Z,X)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const l={};return this.locale&&(l.locale=this.locale.serialize()),this.currency&&(l.currency=this.currency.serialize()),this.minFractionDigits&&(l["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(l["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),l]}}class ds{constructor(l){this.type=K,this.input=l}static parse(l,_){if(2!==l.length)return _.error(`Expected 1 argument, but found ${l.length-1} instead.`);const x=_.parse(l[1],1);return x?"array"!==x.type.kind&&"string"!==x.type.kind&&"value"!==x.type.kind?_.error(`Expected argument of type string or array, but found ${be(x.type)} instead.`):new ds(x):null}evaluate(l){const _=this.input.evaluate(l);if("string"==typeof _||Array.isArray(_))return _.length;throw new xr(`Expected value to be of type string or array, but found ${be(Tr(_))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}serialize(){const l=["length"];return this.eachChild(_=>{l.push(_.serialize())}),l}}const pl={"==":dh,"!=":wn,">":td,"<":hr,">=":nd,"<=":wo,array:Us,at:ed,boolean:Us,case:Bp,coalesce:Lc,collator:Op,format:ro,image:Bo,in:Va,"index-of":bi,interpolate:ra,"interpolate-hcl":ra,"interpolate-lab":ra,length:ds,let:za,literal:No,match:wu,number:Us,"number-format":Ua,object:Us,slice:Cu,step:Hs,string:Us,"to-boolean":cl,"to-color":cl,"to-number":cl,"to-string":cl,var:sh,within:dl};function ph(g,[l,_,x,D]){l=l.evaluate(g),_=_.evaluate(g),x=x.evaluate(g);const F=D?D.evaluate(g):1,B=rr(l,_,x,F);if(B)throw new xr(B);return new hn(l/255*F,_/255*F,x/255*F,F)}function Qm(g,l){return g in l}function zp(g,l){const _=l[g];return void 0===_?null:_}function oa(g){return{type:g}}function fl(g){return{result:"success",value:g}}function so(g){return{result:"error",value:g}}function Wo(g){return"data-driven"===g["property-type"]||"cross-faded-data-driven"===g["property-type"]}function If(g){return!!g.expression&&g.expression.parameters.indexOf("zoom")>-1}function Ha(g){return!!g.expression&&g.expression.interpolated}function Ui(g){return g instanceof Number?"number":g instanceof String?"string":g instanceof Boolean?"boolean":Array.isArray(g)?"array":null===g?"null":typeof g}function Vp(g){return"object"==typeof g&&null!==g&&!Array.isArray(g)}function Pf(g){return g}function Up(g,l){const _="color"===l.type,x=g.stops&&"object"==typeof g.stops[0][0],D=x||!(x||void 0!==g.property),F=g.type||(Ha(l)?"exponential":"interval");if(_&&((g=L({},g)).stops&&(g.stops=g.stops.map(re=>[re[0],hn.parse(re[1])])),g.default=hn.parse(g.default?g.default:l.default)),g.colorSpace&&"rgb"!==g.colorSpace&&!Gs[g.colorSpace])throw new Error(`Unknown color space: ${g.colorSpace}`);let B,Z,X;if("exponential"===F)B=id;else if("interval"===F)B=Nc;else if("categorical"===F){B=js,Z=Object.create(null);for(const re of g.stops)Z[re[0]]=re[1];X=typeof g.stops[0][0]}else{if("identity"!==F)throw new Error(`Unknown function type "${F}"`);B=Eu}if(x){const re={},ce=[];for(let Se=0;Se<g.stops.length;Se++){const Re=g.stops[Se],Xe=Re[0].zoom;void 0===re[Xe]&&(re[Xe]={zoom:Xe,type:g.type,property:g.property,default:g.default,stops:[]},ce.push(Xe)),re[Xe].stops.push([Re[0].value,Re[1]])}const de=[];for(const Se of ce)de.push([re[Se].zoom,Up(re[Se],l)]);const _e={name:"linear"};return{kind:"composite",interpolationType:_e,interpolationFactor:ra.interpolationFactor.bind(void 0,_e),zoomStops:de.map(Se=>Se[0]),evaluate:({zoom:Se},Re)=>id({stops:de,base:g.base},l,Se).evaluate(Se,Re)}}if(D){const re="exponential"===F?{name:"exponential",base:void 0!==g.base?g.base:1}:null;return{kind:"camera",interpolationType:re,interpolationFactor:ra.interpolationFactor.bind(void 0,re),zoomStops:g.stops.map(ce=>ce[0]),evaluate:({zoom:ce})=>B(g,l,ce,Z,X)}}return{kind:"source",evaluate(re,ce){const de=ce&&ce.properties?ce.properties[g.property]:void 0;return void 0===de?fh(g.default,l.default):B(g,l,de,Z,X)}}}function fh(g,l,_){return void 0!==g?g:void 0!==l?l:void 0!==_?_:void 0}function js(g,l,_,x,D){return fh(typeof _===D?x[_]:void 0,g.default,l.default)}function Nc(g,l,_){if("number"!==Ui(_))return fh(g.default,l.default);const x=g.stops.length;if(1===x||_<=g.stops[0][0])return g.stops[0][1];if(_>=g.stops[x-1][0])return g.stops[x-1][1];const D=jd(g.stops.map(F=>F[0]),_);return g.stops[D][1]}function id(g,l,_){const x=void 0!==g.base?g.base:1;if("number"!==Ui(_))return fh(g.default,l.default);const D=g.stops.length;if(1===D||_<=g.stops[0][0])return g.stops[0][1];if(_>=g.stops[D-1][0])return g.stops[D-1][1];const F=jd(g.stops.map(ce=>ce[0]),_),B=function(ce,de,_e,Se){const Re=Se-_e,Xe=ce-_e;return 0===Re?0:1===de?Xe/Re:(Math.pow(de,Xe)-1)/(Math.pow(de,Re)-1)}(_,x,g.stops[F][0],g.stops[F+1][0]),Z=g.stops[F][1],X=g.stops[F+1][1];let re=lh[l.type]||Pf;if(g.colorSpace&&"rgb"!==g.colorSpace){const ce=Gs[g.colorSpace];re=(de,_e)=>ce.reverse(ce.interpolate(ce.forward(de),ce.forward(_e),B))}return"function"==typeof Z.evaluate?{evaluate(...ce){const de=Z.evaluate.apply(void 0,ce),_e=X.evaluate.apply(void 0,ce);if(void 0!==de&&void 0!==_e)return re(de,_e,B)}}:re(Z,X,B)}function Eu(g,l,_){return"color"===l.type?_=hn.parse(_):"formatted"===l.type?_=Nn.fromString(_.toString()):"resolvedImage"===l.type?_=ei.fromString(_.toString()):Ui(_)===l.type||"enum"===l.type&&l.values[_]||(_=void 0),fh(_,g.default,l.default)}na.register(pl,{error:[{kind:"error"},[ae],(g,[l])=>{throw new xr(l.evaluate(g))}],typeof:[ae,[Me],(g,[l])=>be(Tr(l.evaluate(g)))],"to-rgba":[ne(K,4),[ge],(g,[l])=>l.evaluate(g).toArray()],rgb:[ge,[K,K,K],ph],rgba:[ge,[K,K,K,K],ph],has:{type:pe,overloads:[[[ae],(g,[l])=>Qm(l.evaluate(g),g.properties())],[[ae,xe],(g,[l,_])=>Qm(l.evaluate(g),_.evaluate(g))]]},get:{type:Me,overloads:[[[ae],(g,[l])=>zp(l.evaluate(g),g.properties())],[[ae,xe],(g,[l,_])=>zp(l.evaluate(g),_.evaluate(g))]]},"feature-state":[Me,[ae],(g,[l])=>zp(l.evaluate(g),g.featureState||{})],properties:[xe,[],g=>g.properties()],"geometry-type":[ae,[],g=>g.geometryType()],id:[Me,[],g=>g.id()],zoom:[K,[],g=>g.globals.zoom],"heatmap-density":[K,[],g=>g.globals.heatmapDensity||0],"line-progress":[K,[],g=>g.globals.lineProgress||0],"sky-radial-progress":[K,[],g=>g.globals.skyRadialProgress||0],accumulated:[Me,[],g=>void 0===g.globals.accumulated?null:g.globals.accumulated],"+":[K,oa(K),(g,l)=>{let _=0;for(const x of l)_+=x.evaluate(g);return _}],"*":[K,oa(K),(g,l)=>{let _=1;for(const x of l)_*=x.evaluate(g);return _}],"-":{type:K,overloads:[[[K,K],(g,[l,_])=>l.evaluate(g)-_.evaluate(g)],[[K],(g,[l])=>-l.evaluate(g)]]},"/":[K,[K,K],(g,[l,_])=>l.evaluate(g)/_.evaluate(g)],"%":[K,[K,K],(g,[l,_])=>l.evaluate(g)%_.evaluate(g)],ln2:[K,[],()=>Math.LN2],pi:[K,[],()=>Math.PI],e:[K,[],()=>Math.E],"^":[K,[K,K],(g,[l,_])=>Math.pow(l.evaluate(g),_.evaluate(g))],sqrt:[K,[K],(g,[l])=>Math.sqrt(l.evaluate(g))],log10:[K,[K],(g,[l])=>Math.log(l.evaluate(g))/Math.LN10],ln:[K,[K],(g,[l])=>Math.log(l.evaluate(g))],log2:[K,[K],(g,[l])=>Math.log(l.evaluate(g))/Math.LN2],sin:[K,[K],(g,[l])=>Math.sin(l.evaluate(g))],cos:[K,[K],(g,[l])=>Math.cos(l.evaluate(g))],tan:[K,[K],(g,[l])=>Math.tan(l.evaluate(g))],asin:[K,[K],(g,[l])=>Math.asin(l.evaluate(g))],acos:[K,[K],(g,[l])=>Math.acos(l.evaluate(g))],atan:[K,[K],(g,[l])=>Math.atan(l.evaluate(g))],min:[K,oa(K),(g,l)=>Math.min(...l.map(_=>_.evaluate(g)))],max:[K,oa(K),(g,l)=>Math.max(...l.map(_=>_.evaluate(g)))],abs:[K,[K],(g,[l])=>Math.abs(l.evaluate(g))],round:[K,[K],(g,[l])=>{const _=l.evaluate(g);return _<0?-Math.round(-_):Math.round(_)}],floor:[K,[K],(g,[l])=>Math.floor(l.evaluate(g))],ceil:[K,[K],(g,[l])=>Math.ceil(l.evaluate(g))],"filter-==":[pe,[ae,Me],(g,[l,_])=>g.properties()[l.value]===_.value],"filter-id-==":[pe,[Me],(g,[l])=>g.id()===l.value],"filter-type-==":[pe,[ae],(g,[l])=>g.geometryType()===l.value],"filter-<":[pe,[ae,Me],(g,[l,_])=>{const x=g.properties()[l.value],D=_.value;return typeof x==typeof D&&x<D}],"filter-id-<":[pe,[Me],(g,[l])=>{const _=g.id(),x=l.value;return typeof _==typeof x&&_<x}],"filter->":[pe,[ae,Me],(g,[l,_])=>{const x=g.properties()[l.value],D=_.value;return typeof x==typeof D&&x>D}],"filter-id->":[pe,[Me],(g,[l])=>{const _=g.id(),x=l.value;return typeof _==typeof x&&_>x}],"filter-<=":[pe,[ae,Me],(g,[l,_])=>{const x=g.properties()[l.value],D=_.value;return typeof x==typeof D&&x<=D}],"filter-id-<=":[pe,[Me],(g,[l])=>{const _=g.id(),x=l.value;return typeof _==typeof x&&_<=x}],"filter->=":[pe,[ae,Me],(g,[l,_])=>{const x=g.properties()[l.value],D=_.value;return typeof x==typeof D&&x>=D}],"filter-id->=":[pe,[Me],(g,[l])=>{const _=g.id(),x=l.value;return typeof _==typeof x&&_>=x}],"filter-has":[pe,[Me],(g,[l])=>l.value in g.properties()],"filter-has-id":[pe,[],g=>null!==g.id()&&void 0!==g.id()],"filter-type-in":[pe,[ne(ae)],(g,[l])=>l.value.indexOf(g.geometryType())>=0],"filter-id-in":[pe,[ne(Me)],(g,[l])=>l.value.indexOf(g.id())>=0],"filter-in-small":[pe,[ae,ne(Me)],(g,[l,_])=>_.value.indexOf(g.properties()[l.value])>=0],"filter-in-large":[pe,[ae,ne(Me)],(g,[l,_])=>function(x,D,F,B){for(;F<=B;){const Z=F+B>>1;if(D[Z]===x)return!0;D[Z]>x?B=Z-1:F=Z+1}return!1}(g.properties()[l.value],_.value,0,_.value.length-1)],all:{type:pe,overloads:[[[pe,pe],(g,[l,_])=>l.evaluate(g)&&_.evaluate(g)],[oa(pe),(g,l)=>{for(const _ of l)if(!_.evaluate(g))return!1;return!0}]]},any:{type:pe,overloads:[[[pe,pe],(g,[l,_])=>l.evaluate(g)||_.evaluate(g)],[oa(pe),(g,l)=>{for(const _ of l)if(_.evaluate(g))return!0;return!1}]]},"!":[pe,[pe],(g,[l])=>!l.evaluate(g)],"is-supported-script":[pe,[ae],(g,[l])=>{const _=g.globals&&g.globals.isSupportedScript;return!_||_(l.evaluate(g))}],upcase:[ae,[ae],(g,[l])=>l.evaluate(g).toUpperCase()],downcase:[ae,[ae],(g,[l])=>l.evaluate(g).toLowerCase()],concat:[ae,oa(Me),(g,l)=>l.map(_=>or(_.evaluate(g))).join("")],"resolved-locale":[ae,[ze],(g,[l])=>l.evaluate(g).resolvedLocale()]});class Wd{constructor(l,_){var x;this.expression=l,this._warningHistory={},this._evaluator=new Rp,this._defaultValue=_?"color"===(x=_).type&&Vp(x.default)?new hn(0,0,0,0):"color"===x.type?hn.parse(x.default)||null:void 0===x.default?null:x.default:null,this._enumValues=_&&"enum"===_.type?_.values:null}evaluateWithoutErrorHandling(l,_,x,D,F,B){return this._evaluator.globals=l,this._evaluator.feature=_,this._evaluator.featureState=x,this._evaluator.canonical=D,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)}evaluate(l,_,x,D,F,B){this._evaluator.globals=l,this._evaluator.feature=_||null,this._evaluator.featureState=x||null,this._evaluator.canonical=D,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=B||null;try{const Z=this.expression.evaluate(this._evaluator);if(null==Z||"number"==typeof Z&&Z!=Z)return this._defaultValue;if(this._enumValues&&!(Z in this._enumValues))throw new xr(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(Z)} instead.`);return Z}catch(Z){return this._warningHistory[Z.message]||(this._warningHistory[Z.message]=!0,"undefined"!=typeof console&&console.warn(Z.message)),this._defaultValue}}}function ka(g){return Array.isArray(g)&&g.length>0&&"string"==typeof g[0]&&g[0]in pl}function ml(g,l){const _=new ah(pl,[],l?function(D){const F={color:ge,string:ae,number:K,enum:ae,boolean:pe,formatted:Ke,resolvedImage:Y};return"array"===D.type?ne(F[D.value]||Me,D.length):F[D.type]}(l):void 0),x=_.parse(g,void 0,void 0,void 0,l&&"string"===l.type?{typeAnnotation:"coerce"}:void 0);return x?fl(new Wd(x,l)):so(_.errors)}class gl{constructor(l,_){this.kind=l,this._styleExpression=_,this.isStateDependent="constant"!==l&&!oh(_.expression)}evaluateWithoutErrorHandling(l,_,x,D,F,B){return this._styleExpression.evaluateWithoutErrorHandling(l,_,x,D,F,B)}evaluate(l,_,x,D,F,B){return this._styleExpression.evaluate(l,_,x,D,F,B)}}class _l{constructor(l,_,x,D){this.kind=l,this.zoomStops=x,this._styleExpression=_,this.isStateDependent="camera"!==l&&!oh(_.expression),this.interpolationType=D}evaluateWithoutErrorHandling(l,_,x,D,F,B){return this._styleExpression.evaluateWithoutErrorHandling(l,_,x,D,F,B)}evaluate(l,_,x,D,F,B){return this._styleExpression.evaluate(l,_,x,D,F,B)}interpolationFactor(l,_,x){return this.interpolationType?ra.interpolationFactor(this.interpolationType,l,_,x):0}}function Hp(g,l){if("error"===(g=ml(g,l)).result)return g;const _=g.value.expression,x=rh(_);if(!x&&!Wo(l))return so([new G("","data expressions not supported")]);const D=Zi(_,["zoom"]);if(!D&&!If(l))return so([new G("","zoom expressions not supported")]);const F=Ds(_);return F||D?F instanceof G?so([F]):F instanceof ra&&!Ha(l)?so([new G("",'"interpolate" expressions cannot be used with this property')]):fl(F?new _l(x?"camera":"composite",g.value,F.labels,F instanceof ra?F.interpolation:void 0):new gl(x?"constant":"source",g.value)):so([new G("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class mh{constructor(l,_){this._parameters=l,this._specification=_,L(this,Up(this._parameters,this._specification))}static deserialize(l){return new mh(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Ds(g){let l=null;if(g instanceof za)l=Ds(g.result);else if(g instanceof Lc){for(const _ of g.args)if(l=Ds(_),l)break}else(g instanceof Hs||g instanceof ra)&&g.input instanceof na&&"zoom"===g.input.name&&(l=g);return l instanceof G||g.eachChild(_=>{const x=Ds(_);x instanceof G?l=x:!l&&x?l=new G("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&x&&l!==x&&(l=new G("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function Ga(g){const l=g.key,_=g.value,x=g.valueSpec||{},D=g.objectElementValidators||{},F=g.style,B=g.styleSpec;let Z=[];const X=Ui(_);if("object"!==X)return[new C(l,_,`object expected, ${X} found`)];for(const re in _){const ce=re.split(".")[0],de=x[ce]||x["*"];let _e;if(D[ce])_e=D[ce];else if(x[ce])_e=Qr;else if(D["*"])_e=D["*"];else{if(!x["*"]){Z.push(new C(l,_[re],`unknown property "${re}"`));continue}_e=Qr}Z=Z.concat(_e({key:(l&&`${l}.`)+re,value:_[re],valueSpec:de,style:F,styleSpec:B,object:_,objectKey:re},_))}for(const re in x)D[re]||x[re].required&&void 0===x[re].default&&void 0===_[re]&&Z.push(new C(l,_,`missing required property "${re}"`));return Z}function $d(g){const l=g.value,_=g.valueSpec,x=g.style,D=g.styleSpec,F=g.key,B=g.arrayElementValidator||Qr;if("array"!==Ui(l))return[new C(F,l,`array expected, ${Ui(l)} found`)];if(_.length&&l.length!==_.length)return[new C(F,l,`array length ${_.length} expected, length ${l.length} found`)];if(_["min-length"]&&l.length<_["min-length"])return[new C(F,l,`array length at least ${_["min-length"]} expected, length ${l.length} found`)];let Z={type:_.value,values:_.values,minimum:_.minimum,maximum:_.maximum};D.$version<7&&(Z.function=_.function),"object"===Ui(_.value)&&(Z=_.value);let X=[];for(let re=0;re<l.length;re++)X=X.concat(B({array:l,arrayIndex:re,value:l[re],valueSpec:Z,style:x,styleSpec:D,key:`${F}[${re}]`}));return X}function Vo(g){const l=g.key,_=g.value,x=g.valueSpec;let D=Ui(_);if("number"===D&&_!=_&&(D="NaN"),"number"!==D)return[new C(l,_,`number expected, ${D} found`)];if("minimum"in x){let F=x.minimum;if("array"===Ui(x.minimum)&&(F=x.minimum[g.arrayIndex]),_<F)return[new C(l,_,`${_} is less than the minimum value ${F}`)]}if("maximum"in x){let F=x.maximum;if("array"===Ui(x.maximum)&&(F=x.maximum[g.arrayIndex]),_>F)return[new C(l,_,`${_} is greater than the maximum value ${F}`)]}return[]}function sa(g){const l=g.valueSpec,_=R(g.value.type);let x,D,F,B={};const Z="categorical"!==_&&void 0===g.value.property,X=!Z,re="array"===Ui(g.value.stops)&&"array"===Ui(g.value.stops[0])&&"object"===Ui(g.value.stops[0][0]),ce=Ga({key:g.key,value:g.value,valueSpec:g.styleSpec.function,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(Se){if("identity"===_)return[new C(Se.key,Se.value,'identity function may not have a "stops" property')];let Re=[];const Xe=Se.value;return Re=Re.concat($d({key:Se.key,value:Xe,valueSpec:Se.valueSpec,style:Se.style,styleSpec:Se.styleSpec,arrayElementValidator:de})),"array"===Ui(Xe)&&0===Xe.length&&Re.push(new C(Se.key,Xe,"array must have at least one stop")),Re},default:function(Se){return Qr({key:Se.key,value:Se.value,valueSpec:l,style:Se.style,styleSpec:Se.styleSpec})}}});return"identity"===_&&Z&&ce.push(new C(g.key,g.value,'missing required property "property"')),"identity"===_||g.value.stops||ce.push(new C(g.key,g.value,'missing required property "stops"')),"exponential"===_&&g.valueSpec.expression&&!Ha(g.valueSpec)&&ce.push(new C(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(X&&!Wo(g.valueSpec)?ce.push(new C(g.key,g.value,"property functions not supported")):Z&&!If(g.valueSpec)&&ce.push(new C(g.key,g.value,"zoom functions not supported"))),"categorical"!==_&&!re||void 0!==g.value.property||ce.push(new C(g.key,g.value,'"property" property is required')),ce;function de(Se){let Re=[];const Xe=Se.value,at=Se.key;if("array"!==Ui(Xe))return[new C(at,Xe,`array expected, ${Ui(Xe)} found`)];if(2!==Xe.length)return[new C(at,Xe,`array length 2 expected, length ${Xe.length} found`)];if(re){if("object"!==Ui(Xe[0]))return[new C(at,Xe,`object expected, ${Ui(Xe[0])} found`)];if(void 0===Xe[0].zoom)return[new C(at,Xe,"object stop key must have zoom")];if(void 0===Xe[0].value)return[new C(at,Xe,"object stop key must have value")];if(F&&F>R(Xe[0].zoom))return[new C(at,Xe[0].zoom,"stop zoom values must appear in ascending order")];R(Xe[0].zoom)!==F&&(F=R(Xe[0].zoom),D=void 0,B={}),Re=Re.concat(Ga({key:`${at}[0]`,value:Xe[0],valueSpec:{zoom:{}},style:Se.style,styleSpec:Se.styleSpec,objectElementValidators:{zoom:Vo,value:_e}}))}else Re=Re.concat(_e({key:`${at}[0]`,value:Xe[0],valueSpec:{},style:Se.style,styleSpec:Se.styleSpec},Xe));return ka(H(Xe[1]))?Re.concat([new C(`${at}[1]`,Xe[1],"expressions are not allowed in function stops.")]):Re.concat(Qr({key:`${at}[1]`,value:Xe[1],valueSpec:l,style:Se.style,styleSpec:Se.styleSpec}))}function _e(Se,Re){const Xe=Ui(Se.value),at=R(Se.value),bt=null!==Se.value?Se.value:Re;if(x){if(Xe!==x)return[new C(Se.key,bt,`${Xe} stop domain type must match previous stop domain type ${x}`)]}else x=Xe;if("number"!==Xe&&"string"!==Xe&&"boolean"!==Xe)return[new C(Se.key,bt,"stop domain value must be a number, string, or boolean")];if("number"!==Xe&&"categorical"!==_){let It=`number expected, ${Xe} found`;return Wo(l)&&void 0===_&&(It+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new C(Se.key,bt,It)]}return"categorical"!==_||"number"!==Xe||isFinite(at)&&Math.floor(at)===at?"categorical"!==_&&"number"===Xe&&void 0!==D&&at<D?[new C(Se.key,bt,"stop domain values must appear in ascending order")]:(D=at,"categorical"===_&&at in B?[new C(Se.key,bt,"stop domain values must be unique")]:(B[at]=!0,[])):[new C(Se.key,bt,`integer expected, found ${at}`)]}}function Fr(g){const l=("property"===g.expressionContext?Hp:ml)(H(g.value),g.valueSpec);if("error"===l.result)return l.value.map(x=>new C(`${g.key}${x.key}`,g.value,x.message));const _=l.value.expression||l.value._styleExpression.expression;if("property"===g.expressionContext&&"text-font"===g.propertyKey&&!_.outputDefined())return[new C(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===g.expressionContext&&"layout"===g.propertyType&&!oh(_))return[new C(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===g.expressionContext&&!oh(_))return[new C(g.key,g.value,'"feature-state" data expressions are not supported with filters.')];if(g.expressionContext&&0===g.expressionContext.indexOf("cluster")){if(!Zi(_,["zoom","feature-state"]))return[new C(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===g.expressionContext&&!rh(_))return[new C(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bc(g){const l=g.key,_=g.value,x=g.valueSpec,D=[];return Array.isArray(x.values)?-1===x.values.indexOf(R(_))&&D.push(new C(l,_,`expected one of [${x.values.join(", ")}], ${JSON.stringify(_)} found`)):-1===Object.keys(x.values).indexOf(R(_))&&D.push(new C(l,_,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(_)} found`)),D}function zl(g){if(!0===g||!1===g)return!0;if(!Array.isArray(g)||0===g.length)return!1;switch(g[0]){case"has":return g.length>=2&&"$id"!==g[1]&&"$type"!==g[1];case"in":return g.length>=3&&("string"!=typeof g[1]||Array.isArray(g[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==g.length||Array.isArray(g[1])||Array.isArray(g[2]);case"any":case"all":for(const l of g.slice(1))if(!zl(l)&&"boolean"!=typeof l)return!1;return!0;default:return!0}}const gh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rd(g){if(null==g)return{filter:()=>!0,needGeometry:!1};zl(g)||(g=yl(g));const l=ml(g,gh);if("error"===l.result)throw new Error(l.value.map(_=>`${_.key}: ${_.message}`).join(", "));return{filter:(_,x,D)=>l.value.evaluate(_,x,{},D),needGeometry:ps(g)}}function Da(g,l){return g<l?-1:g>l?1:0}function ps(g){if(!Array.isArray(g))return!1;if("within"===g[0])return!0;for(let l=1;l<g.length;l++)if(ps(g[l]))return!0;return!1}function yl(g){if(!g)return!0;const l=g[0];return g.length<=1?"any"!==l:"=="===l?Vl(g[1],g[2],"=="):"!="===l?vl(Vl(g[1],g[2],"==")):"<"===l||">"===l||"<="===l||">="===l?Vl(g[1],g[2],l):"any"===l?(_=g.slice(1),["any"].concat(_.map(yl))):"all"===l?["all"].concat(g.slice(1).map(yl)):"none"===l?["all"].concat(g.slice(1).map(yl).map(vl)):"in"===l?_h(g[1],g.slice(2)):"!in"===l?vl(_h(g[1],g.slice(2))):"has"===l?yh(g[1]):"!has"===l?vl(yh(g[1])):"within"!==l||g;var _}function Vl(g,l,_){switch(g){case"$type":return[`filter-type-${_}`,l];case"$id":return[`filter-id-${_}`,l];default:return[`filter-${_}`,g,l]}}function _h(g,l){if(0===l.length)return!1;switch(g){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(_=>typeof _!=typeof l[0])?["filter-in-large",g,["literal",l.sort(Da)]]:["filter-in-small",g,["literal",l]]}}function yh(g){switch(g){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",g]}}function vl(g){return["!",g]}function Tu(g){return zl(H(g.value))?Fr(L({},g,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rs(g)}function rs(g){const l=g.value,_=g.key;if("array"!==Ui(l))return[new C(_,l,`array expected, ${Ui(l)} found`)];const x=g.styleSpec;let D,F=[];if(l.length<1)return[new C(_,l,"filter array must have at least 1 element")];switch(F=F.concat(Bc({key:`${_}[0]`,value:l[0],valueSpec:x.filter_operator,style:g.style,styleSpec:g.styleSpec})),R(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&"$type"===R(l[1])&&F.push(new C(_,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":3!==l.length&&F.push(new C(_,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(D=Ui(l[1]),"string"!==D&&F.push(new C(`${_}[1]`,l[1],`string expected, ${D} found`)));for(let B=2;B<l.length;B++)D=Ui(l[B]),"$type"===R(l[1])?F=F.concat(Bc({key:`${_}[${B}]`,value:l[B],valueSpec:x.geometry_type,style:g.style,styleSpec:g.styleSpec})):"string"!==D&&"number"!==D&&"boolean"!==D&&F.push(new C(`${_}[${B}]`,l[B],`string, number, or boolean expected, ${D} found`));break;case"any":case"all":case"none":for(let B=1;B<l.length;B++)F=F.concat(rs({key:`${_}[${B}]`,value:l[B],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":D=Ui(l[1]),2!==l.length?F.push(new C(_,l,`filter array for "${l[0]}" operator must have 2 elements`)):"string"!==D&&F.push(new C(`${_}[1]`,l[1],`string expected, ${D} found`));break;case"within":D=Ui(l[1]),2!==l.length?F.push(new C(_,l,`filter array for "${l[0]}" operator must have 2 elements`)):"object"!==D&&F.push(new C(`${_}[1]`,l[1],`object expected, ${D} found`))}return F}function fs(g,l){const _=g.key,x=g.style,D=g.styleSpec,F=g.value,B=g.objectKey,Z=D[`${l}_${g.layerType}`];if(!Z)return[];const X=B.match(/^(.*)-transition$/);if("paint"===l&&X&&Z[X[1]]&&Z[X[1]].transition)return Qr({key:_,value:F,valueSpec:D.transition,style:x,styleSpec:D});const re=g.valueSpec||Z[B];if(!re)return[new C(_,F,`unknown property "${B}"`)];let ce;if("string"===Ui(F)&&Wo(re)&&!re.tokens&&(ce=/^{([^}]+)}$/.exec(F)))return[new C(_,F,`"${B}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ce[1])} }\`.`)];const de=[];return"symbol"===g.layerType&&("text-field"===B&&x&&!x.glyphs&&de.push(new C(_,F,'use of "text-field" requires a style "glyphs" property')),"text-font"===B&&Vp(H(F))&&"identity"===R(F.type)&&de.push(new C(_,F,'"text-font" does not support identity functions'))),de.concat(Qr({key:g.key,value:F,valueSpec:re,style:x,styleSpec:D,expressionContext:"property",propertyType:l,propertyKey:B}))}function hc(g){return fs(g,"paint")}function Gp(g){return fs(g,"layout")}function dc(g){let l=[];const _=g.value,x=g.key,D=g.style,F=g.styleSpec;_.type||_.ref||l.push(new C(x,_,'either "type" or "ref" is required'));let B=R(_.type);const Z=R(_.ref);if(_.id){const X=R(_.id);for(let re=0;re<g.arrayIndex;re++){const ce=D.layers[re];R(ce.id)===X&&l.push(new C(x,_.id,`duplicate layer id "${_.id}", previously used at line ${ce.id.__line__}`))}}if("ref"in _){let X;["type","source","source-layer","filter","layout"].forEach(re=>{re in _&&l.push(new C(x,_[re],`"${re}" is prohibited for ref layers`))}),D.layers.forEach(re=>{R(re.id)===Z&&(X=re)}),X?X.ref?l.push(new C(x,_.ref,"ref cannot reference another ref layer")):B=R(X.type):l.push(new C(x,_.ref,`ref layer "${Z}" not found`))}else if("background"!==B&&"sky"!==B)if(_.source){const X=D.sources&&D.sources[_.source],re=X&&R(X.type);X?"vector"===re&&"raster"===B?l.push(new C(x,_.source,`layer "${_.id}" requires a raster source`)):"raster"===re&&"raster"!==B?l.push(new C(x,_.source,`layer "${_.id}" requires a vector source`)):"vector"!==re||_["source-layer"]?"raster-dem"===re&&"hillshade"!==B?l.push(new C(x,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==B||!_.paint||!_.paint["line-gradient"]||"geojson"===re&&X.lineMetrics||l.push(new C(x,_,`layer "${_.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new C(x,_,`layer "${_.id}" must specify a "source-layer"`)):l.push(new C(x,_.source,`source "${_.source}" not found`))}else l.push(new C(x,_,'missing required property "source"'));return l=l.concat(Ga({key:x,value:_,valueSpec:F.layer,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Qr({key:`${x}.type`,value:_.type,valueSpec:F.layer.type,style:g.style,styleSpec:g.styleSpec,object:_,objectKey:"type"}),filter:Tu,layout:X=>Ga({layer:_,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":re=>Gp(L({layerType:B},re))}}),paint:X=>Ga({layer:_,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":re=>hc(L({layerType:B},re))}})}})),l}function zc(g){const l=g.value,_=g.key,x=Ui(l);return"string"!==x?[new C(_,l,`string expected, ${x} found`)]:[]}const Xd={promoteId:function({key:g,value:l}){if("string"===Ui(l))return zc({key:g,value:l});{const _=[];for(const x in l)_.push(...zc({key:`${g}.${x}`,value:l[x]}));return _}}};function jp(g){const l=g.value,_=g.key,x=g.styleSpec,D=g.style;if(!l.type)return[new C(_,l,'"type" is required')];const F=R(l.type);let B;switch(F){case"vector":case"raster":case"raster-dem":return B=Ga({key:_,value:l,valueSpec:x[`source_${F.replace("-","_")}`],style:g.style,styleSpec:x,objectElementValidators:Xd}),B;case"geojson":if(B=Ga({key:_,value:l,valueSpec:x.source_geojson,style:D,styleSpec:x,objectElementValidators:Xd}),l.cluster)for(const Z in l.clusterProperties){const[X,re]=l.clusterProperties[Z],ce="string"==typeof X?[X,["accumulated"],["get",Z]]:X;B.push(...Fr({key:`${_}.${Z}.map`,value:re,expressionContext:"cluster-map"})),B.push(...Fr({key:`${_}.${Z}.reduce`,value:ce,expressionContext:"cluster-reduce"}))}return B;case"video":return Ga({key:_,value:l,valueSpec:x.source_video,style:D,styleSpec:x});case"image":return Ga({key:_,value:l,valueSpec:x.source_image,style:D,styleSpec:x});case"canvas":return[new C(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bc({key:`${_}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:D,styleSpec:x})}}function Jm(g){const l=g.value,_=g.styleSpec,x=_.light,D=g.style;let F=[];const B=Ui(l);if(void 0===l)return F;if("object"!==B)return F=F.concat([new C("light",l,`object expected, ${B} found`)]),F;for(const Z in l){const X=Z.match(/^(.*)-transition$/);F=F.concat(X&&x[X[1]]&&x[X[1]].transition?Qr({key:Z,value:l[Z],valueSpec:_.transition,style:D,styleSpec:_}):x[Z]?Qr({key:Z,value:l[Z],valueSpec:x[Z],style:D,styleSpec:_}):[new C(Z,l[Z],`unknown property "${Z}"`)])}return F}function Rf(g){const l=g.value,_=g.key,x=g.style,D=g.styleSpec,F=D.terrain;let B=[];const Z=Ui(l);if(void 0===l)return B;if("object"!==Z)return B=B.concat([new C("terrain",l,`object expected, ${Z} found`)]),B;for(const X in l){const re=X.match(/^(.*)-transition$/);B=B.concat(re&&F[re[1]]&&F[re[1]].transition?Qr({key:X,value:l[X],valueSpec:D.transition,style:x,styleSpec:D}):F[X]?Qr({key:X,value:l[X],valueSpec:F[X],style:x,styleSpec:D}):[new C(X,l[X],`unknown property "${X}"`)])}if(l.source){const X=x.sources&&x.sources[l.source],re=X&&R(X.type);X?"raster-dem"!==re&&B.push(new C(_,l.source,`terrain cannot be used with a source of type ${re}, it only be used with a "raster-dem" source type`)):B.push(new C(_,l.source,`source "${l.source}" not found`))}else B.push(new C(_,l,'terrain is missing required property "source"'));return B}function Qd(g){const l=g.value,_=g.style,x=g.styleSpec,D=x.fog;let F=[];const B=Ui(l);if(void 0===l)return F;if("object"!==B)return F=F.concat([new C("fog",l,`object expected, ${B} found`)]),F;for(const Z in l){const X=Z.match(/^(.*)-transition$/);F=F.concat(X&&D[X[1]]&&D[X[1]].transition?Qr({key:Z,value:l[Z],valueSpec:x.transition,style:_,styleSpec:x}):D[Z]?Qr({key:Z,value:l[Z],valueSpec:D[Z],style:_,styleSpec:x}):[new C(Z,l[Z],`unknown property "${Z}"`)])}return F}const Yp={"*":()=>[],array:$d,boolean:function(g){const l=g.value,_=g.key,x=Ui(l);return"boolean"!==x?[new C(_,l,`boolean expected, ${x} found`)]:[]},number:Vo,color:function(g){const l=g.key,_=g.value,x=Ui(_);return"string"!==x?[new C(l,_,`color expected, ${x} found`)]:null===gn.parseCSSColor(_)?[new C(l,_,`color expected, "${_}" found`)]:[]},constants:M,enum:Bc,filter:Tu,function:sa,layer:dc,object:Ga,source:jp,light:Jm,terrain:Rf,fog:Qd,string:zc,formatted:function(g){return 0===zc(g).length?[]:Fr(g)},resolvedImage:function(g){return 0===zc(g).length?[]:Fr(g)}};function Qr(g){const l=g.value,_=g.valueSpec,x=g.styleSpec;return _.expression&&Vp(R(l))?sa(g):_.expression&&ka(H(l))?Fr(g):_.type&&Yp[_.type]?Yp[_.type](g):Ga(L({},g,{valueSpec:_.type?x[_.type]:_}))}function od(g){const l=g.value,_=g.key,x=zc(g);return x.length||(-1===l.indexOf("{fontstack}")&&x.push(new C(_,l,'"glyphs" url must include a "{fontstack}" token')),-1===l.indexOf("{range}")&&x.push(new C(_,l,'"glyphs" url must include a "{range}" token'))),x}function bl(g,l=y){let _=[];return _=_.concat(Qr({key:"",value:g,valueSpec:l.$root,styleSpec:l,style:g,objectElementValidators:{glyphs:od,"*":()=>[]}})),g.constants&&(_=_.concat(M({key:"constants",value:g.constants,style:g,styleSpec:l}))),vh(_)}function vh(g){return[].concat(g).sort((l,_)=>l.line-_.line)}function aa(g){return function(...l){return vh(g.apply(this,l))}}bl.source=aa(jp),bl.light=aa(Jm),bl.terrain=aa(Rf),bl.fog=aa(Qd),bl.layer=aa(dc),bl.filter=aa(Tu),bl.paintProperty=aa(hc),bl.layoutProperty=aa(Gp);const Mu=bl,Vc=Mu.light,qp=Mu.fog,Au=Mu.paintProperty,Of=Mu.layoutProperty;function Jd(g,l){let _=!1;if(l&&l.length)for(const x of l)g.fire(new d(new Error(x.message))),_=!0;return _}var Ul=pc;function pc(g,l,_){var x=this.cells=[];if(g instanceof ArrayBuffer){this.arrayBuffer=g;var D=new Int32Array(this.arrayBuffer);g=D[0],this.d=(l=D[1])+2*(_=D[2]);for(var F=0;F<this.d*this.d;F++){var B=D[3+F],Z=D[3+F+1];x.push(B===Z?null:D.subarray(B,Z))}var X=D[3+x.length+1];this.keys=D.subarray(D[3+x.length],X),this.bboxes=D.subarray(X),this.insert=this._insertReadonly}else{this.d=l+2*_;for(var re=0;re<this.d*this.d;re++)x.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=g,this.padding=_,this.scale=l/g,this.uid=0;var ce=_/l*g;this.min=-ce,this.max=g+ce}pc.prototype.insert=function(g,l,_,x,D){this._forEachCell(l,_,x,D,this._insertCell,this.uid++),this.keys.push(g),this.bboxes.push(l),this.bboxes.push(_),this.bboxes.push(x),this.bboxes.push(D)},pc.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},pc.prototype._insertCell=function(g,l,_,x,D,F){this.cells[D].push(F)},pc.prototype.query=function(g,l,_,x,D){var F=this.min,B=this.max;if(g<=F&&l<=F&&B<=_&&B<=x&&!D)return Array.prototype.slice.call(this.keys);var Z=[];return this._forEachCell(g,l,_,x,this._queryCell,Z,{},D),Z},pc.prototype._queryCell=function(g,l,_,x,D,F,B,Z){var X=this.cells[D];if(null!==X)for(var re=this.keys,ce=this.bboxes,de=0;de<X.length;de++){var _e=X[de];if(void 0===B[_e]){var Se=4*_e;(Z?Z(ce[Se+0],ce[Se+1],ce[Se+2],ce[Se+3]):g<=ce[Se+2]&&l<=ce[Se+3]&&_>=ce[Se+0]&&x>=ce[Se+1])?(B[_e]=!0,F.push(re[_e])):B[_e]=!1}}},pc.prototype._forEachCell=function(g,l,_,x,D,F,B,Z){for(var X=this._convertToCellCoord(g),re=this._convertToCellCoord(l),ce=this._convertToCellCoord(_),de=this._convertToCellCoord(x),_e=X;_e<=ce;_e++)for(var Se=re;Se<=de;Se++){var Re=this.d*Se+_e;if((!Z||Z(this._convertFromCellCoord(_e),this._convertFromCellCoord(Se),this._convertFromCellCoord(_e+1),this._convertFromCellCoord(Se+1)))&&D.call(this,g,l,_,x,Re,F,B,Z))return}},pc.prototype._convertFromCellCoord=function(g){return(g-this.padding)/this.scale},pc.prototype._convertToCellCoord=function(g){return Math.max(0,Math.min(this.d-1,Math.floor(g*this.scale)+this.padding))},pc.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var g=this.cells,l=3+this.cells.length+1+1,_=0,x=0;x<this.cells.length;x++)_+=this.cells[x].length;var D=new Int32Array(l+_+this.keys.length+this.bboxes.length);D[0]=this.extent,D[1]=this.n,D[2]=this.padding;for(var F=l,B=0;B<g.length;B++){var Z=g[B];D[3+B]=F,D.set(Z,F),F+=Z.length}return D[3+g.length]=F,D.set(this.keys,F),D[3+g.length+1]=F+=this.keys.length,D.set(this.bboxes,F),F+=this.bboxes.length,D.buffer};const{ImageData:Zp,ImageBitmap:ku}=Ve,Du={};function qn(g,l,_={}){Object.defineProperty(l,"_classRegistryKey",{value:g,writeable:!1}),Du[g]={klass:l,omit:_.omit||[],shallow:_.shallow||[]}}qn("Object",Object),Ul.serialize=function(g,l){const _=g.toArrayBuffer();return l&&l.push(_),{buffer:_}},Ul.deserialize=function(g){return new Ul(g.buffer)},qn("Grid",Ul),qn("Color",hn),qn("Error",Error),qn("ResolvedImage",ei),qn("StylePropertyFunction",mh),qn("StyleExpression",Wd,{omit:["_evaluator"]}),qn("ZoomDependentExpression",_l),qn("ZoomConstantExpression",gl),qn("CompoundExpression",na,{omit:["_evaluate"]});for(const g in pl)pl[g]._classRegistryKey||qn(`Expression_${g}`,pl[g]);function wr(g){return g&&"undefined"!=typeof ArrayBuffer&&(g instanceof ArrayBuffer||g.constructor&&"ArrayBuffer"===g.constructor.name)}function xl(g){return ku&&g instanceof ku}function Gr(g,l){if(null==g||"boolean"==typeof g||"number"==typeof g||"string"==typeof g||g instanceof Boolean||g instanceof Number||g instanceof String||g instanceof Date||g instanceof RegExp)return g;if(wr(g)||xl(g))return l&&l.push(g),g;if(ArrayBuffer.isView(g)){const _=g;return l&&l.push(_.buffer),_}if(g instanceof Zp)return l&&l.push(g.data.buffer),g;if(Array.isArray(g)){const _=[];for(const x of g)_.push(Gr(x,l));return _}if("object"==typeof g){const _=g.constructor,x=_._classRegistryKey;if(!x)throw new Error("can't serialize object of unregistered class");const D=_.serialize?_.serialize(g,l):{};if(!_.serialize){for(const F in g){if(!g.hasOwnProperty(F)||Du[x].omit.indexOf(F)>=0)continue;const B=g[F];D[F]=Du[x].shallow.indexOf(F)>=0?B:Gr(B,l)}g instanceof Error&&(D.message=g.message)}if(D.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==x&&(D.$name=x),D}throw new Error("can't serialize object of type "+typeof g)}function Qn(g){if(null==g||"boolean"==typeof g||"number"==typeof g||"string"==typeof g||g instanceof Boolean||g instanceof Number||g instanceof String||g instanceof Date||g instanceof RegExp||wr(g)||xl(g)||ArrayBuffer.isView(g)||g instanceof Zp)return g;if(Array.isArray(g))return g.map(Qn);if("object"==typeof g){const l=g.$name||"Object",{klass:_}=Du[l];if(!_)throw new Error(`can't deserialize unregistered class ${l}`);if(_.deserialize)return _.deserialize(g);const x=Object.create(_.prototype);for(const D of Object.keys(g)){if("$name"===D)continue;const F=g[D];x[D]=Du[l].shallow.indexOf(D)>=0?F:Qn(F)}return x}throw new Error("can't deserialize object of type "+typeof g)}class vs{constructor(){this.first=!0}update(l,_){const x=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=_):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=_),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=x,!0))}}const ri=g=>g>=1536&&g<=1791,Kd=g=>g>=1872&&g<=1919,jr=g=>g>=2208&&g<=2303,Is=g=>g>=11904&&g<=12031,Yr=g=>g>=12032&&g<=12255,Hl=g=>g>=12272&&g<=12287,ep=g=>g>=12288&&g<=12351,$o=g=>g>=12352&&g<=12447,la=g=>g>=12448&&g<=12543,Uc=g=>g>=12544&&g<=12591,tp=g=>g>=12704&&g<=12735,fc=g=>g>=12736&&g<=12783,bh=g=>g>=12784&&g<=12799,Hc=g=>g>=12800&&g<=13055,Gl=g=>g>=13056&&g<=13311,Iu=g=>g>=13312&&g<=19903,Gc=g=>g>=19968&&g<=40959,jc=g=>g>=40960&&g<=42127,mc=g=>g>=42128&&g<=42191,Pu=g=>g>=44032&&g<=55215,Km=g=>g>=63744&&g<=64255,xh=g=>g>=64336&&g<=65023,np=g=>g>=65040&&g<=65055,ip=g=>g>=65072&&g<=65103,Po=g=>g>=65104&&g<=65135,Bn=g=>g>=65136&&g<=65279,ca=g=>g>=65280&&g<=65519;function Yc(g){for(const l of g)if(wh(l.charCodeAt(0)))return!0;return!1}function ms(g){for(const l of g)if(!Ff(l.charCodeAt(0)))return!1;return!0}function Ff(g){return!(ri(g)||Kd(g)||jr(g)||xh(g)||Bn(g))}function wh(g){return!(746!==g&&747!==g&&(g<4352||!(tp(g)||Uc(g)||ip(g)&&!(g>=65097&&g<=65103)||Km(g)||Gl(g)||Is(g)||fc(g)||!(!ep(g)||g>=12296&&g<=12305||g>=12308&&g<=12319||12336===g)||Iu(g)||Gc(g)||Hc(g)||(l=g,l>=12592&&l<=12687)||(l=>l>=43360&&l<=43391)(g)||(l=>l>=55216&&l<=55295)(g)||(l=>l>=4352&&l<=4607)(g)||Pu(g)||$o(g)||Hl(g)||(l=>l>=12688&&l<=12703)(g)||Yr(g)||bh(g)||la(g)&&12540!==g||!(!ca(g)||65288===g||65289===g||65293===g||g>=65306&&g<=65310||65339===g||65341===g||65343===g||g>=65371&&g<=65503||65507===g||g>=65512&&g<=65519)||!(!Po(g)||g>=65112&&g<=65118||g>=65123&&g<=65126)||(l=>l>=5120&&l<=5759)(g)||(l=>l>=6320&&l<=6399)(g)||np(g)||(l=>l>=19904&&l<=19967)(g)||jc(g)||mc(g))));var l}function Lf(g){return!(wh(g)||(l=g,(_=l)>=128&&_<=255&&(167===l||169===l||174===l||177===l||188===l||189===l||190===l||215===l||247===l)||(_=>_>=8192&&_<=8303)(l)&&(8214===l||8224===l||8225===l||8240===l||8241===l||8251===l||8252===l||8258===l||8263===l||8264===l||8265===l||8273===l)||(_=>_>=8448&&_<=8527)(l)||(_=>_>=8528&&_<=8591)(l)||(_=>_>=8960&&_<=9215)(l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||9003===l||l>=9085&&l<=9114||l>=9150&&l<=9165||9167===l||l>=9169&&l<=9179||l>=9186&&l<=9215)||(_=>_>=9216&&_<=9279)(l)&&9251!==l||(_=>_>=9280&&_<=9311)(l)||(_=>_>=9312&&_<=9471)(l)||(_=>_>=9632&&_<=9727)(l)||(_=>_>=9728&&_<=9983)(l)&&!(l>=9754&&l<=9759)||(_=>_>=11008&&_<=11263)(l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||ep(l)||la(l)||(_=>_>=57344&&_<=63743)(l)||ip(l)||Po(l)||ca(l)||8734===l||8756===l||8757===l||l>=9984&&l<=10087||l>=10102&&l<=10131||65532===l||65533===l));var l,_}function qc(g){return g>=1424&&g<=2303||xh(g)||Bn(g)}function rp(g,l){return!(!l&&qc(g)||g>=2304&&g<=3583||g>=3840&&g<=4255||(_=g,_>=6016&&_<=6143));var _}function op(g){for(const l of g)if(qc(l.charCodeAt(0)))return!0;return!1}const P="deferred",f="loading",w="loaded";let O=null,U="unavailable",q=null;const ee=function(g){g&&"string"==typeof g&&g.indexOf("NetworkError")>-1&&(U="error"),O&&O(g)};function se(){ue.fire(new ve("pluginStateChange",{pluginStatus:U,pluginURL:q}))}const ue=new p,fe=function(){return U},Ce=function(){if(U!==P||!q)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");U=f,se(),q&&we({url:q},g=>{g?ee(g):(U=w,se())})},Ae={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>U===w||null!=Ae.applyArabicShaping,isLoading:()=>U===f,setState(g){U=g.pluginStatus,q=g.pluginURL},isParsed:()=>null!=Ae.applyArabicShaping&&null!=Ae.processBidirectionalText&&null!=Ae.processStyledBidirectionalText,getPluginURL:()=>q};class Pe{constructor(l,_){this.zoom=l,_?(this.now=_.now,this.fadeDuration=_.fadeDuration,this.zoomHistory=_.zoomHistory,this.transition=_.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new vs,this.transition={})}isSupportedScript(l){return function(_,x){for(const D of _)if(!rp(D.charCodeAt(0),x))return!1;return!0}(l,Ae.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,_=l-Math.floor(l),x=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:_+(1-_)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*_}}}class Ne{constructor(l,_){this.property=l,this.value=_,this.expression=function(x,D){if(Vp(x))return new mh(x,D);if(ka(x)){const F=Hp(x,D);if("error"===F.result)throw new Error(F.value.map(B=>`${B.key}: ${B.message}`).join(", "));return F.value}{let F=x;return"string"==typeof x&&"color"===D.type&&(F=hn.parse(x)),{kind:"constant",evaluate:()=>F}}}(void 0===_?l.specification.default:_,l.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(l,_,x){return this.property.possiblyEvaluate(this,l,_,x)}}class $e{constructor(l){this.property=l,this.value=new Ne(l,void 0)}transitioned(l,_){return new mt(this.property,this.value,_,Di({},l.transition,this.transition),l.now)}untransitioned(){return new mt(this.property,this.value,null,{},0)}}class et{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return On(this._values[l].value.value)}setValue(l,_){this._values.hasOwnProperty(l)||(this._values[l]=new $e(this._values[l].property)),this._values[l].value=new Ne(this._values[l].property,null===_?void 0:On(_))}getTransition(l){return On(this._values[l].transition)}setTransition(l,_){this._values.hasOwnProperty(l)||(this._values[l]=new $e(this._values[l].property)),this._values[l].transition=On(_)||void 0}serialize(){const l={};for(const _ of Object.keys(this._values)){const x=this.getValue(_);void 0!==x&&(l[_]=x);const D=this.getTransition(_);void 0!==D&&(l[`${_}-transition`]=D)}return l}transitioned(l,_){const x=new Ue(this._properties);for(const D of Object.keys(this._values))x._values[D]=this._values[D].transitioned(l,_._values[D]);return x}untransitioned(){const l=new Ue(this._properties);for(const _ of Object.keys(this._values))l._values[_]=this._values[_].untransitioned();return l}}class mt{constructor(l,_,x,D,F){const B=D.delay||0,Z=D.duration||0;F=F||0,this.property=l,this.value=_,this.begin=F+B,this.end=this.begin+Z,l.specification.transition&&(D.delay||D.duration)&&(this.prior=x)}possiblyEvaluate(l,_,x){const D=l.now||0,F=this.value.possiblyEvaluate(l,_,x),B=this.prior;if(B){if(D>this.end)return this.prior=null,F;if(this.value.isDataDriven())return this.prior=null,F;if(D<this.begin)return B.possiblyEvaluate(l,_,x);{const Z=(D-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(l,_,x),F,Qe(Z))}}return F}}class Ue{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,_,x){const D=new vt(this._properties);for(const F of Object.keys(this._values))D._values[F]=this._values[F].possiblyEvaluate(l,_,x);return D}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class tt{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}getValue(l){return On(this._values[l].value)}setValue(l,_){this._values[l]=new Ne(this._values[l].property,null===_?void 0:On(_))}serialize(){const l={};for(const _ of Object.keys(this._values)){const x=this.getValue(_);void 0!==x&&(l[_]=x)}return l}possiblyEvaluate(l,_,x){const D=new vt(this._properties);for(const F of Object.keys(this._values))D._values[F]=this._values[F].possiblyEvaluate(l,_,x);return D}}class ot{constructor(l,_,x){this.property=l,this.value=_,this.parameters=x}isConstant(){return"constant"===this.value.kind}constantOr(l){return"constant"===this.value.kind?this.value.value:l}evaluate(l,_,x,D){return this.property.evaluate(this.value,this.parameters,l,_,x,D)}}class vt{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class rt{constructor(l){this.specification=l}possiblyEvaluate(l,_){return l.expression.evaluate(_)}interpolate(l,_,x){const D=lh[this.specification.type];return D?D(l,_,x):l}}class ht{constructor(l,_){this.specification=l,this.overrides=_}possiblyEvaluate(l,_,x,D){return new ot(this,"constant"===l.expression.kind||"camera"===l.expression.kind?{kind:"constant",value:l.expression.evaluate(_,null,{},x,D)}:l.expression,_)}interpolate(l,_,x){if("constant"!==l.value.kind||"constant"!==_.value.kind)return l;if(void 0===l.value.value||void 0===_.value.value)return new ot(this,{kind:"constant",value:void 0},l.parameters);const D=lh[this.specification.type];return D?new ot(this,{kind:"constant",value:D(l.value.value,_.value.value,x)},l.parameters):l}evaluate(l,_,x,D,F,B){return"constant"===l.kind?l.value:l.evaluate(_,x,D,F,B)}}class Kt extends ht{possiblyEvaluate(l,_,x,D){if(void 0===l.value)return new ot(this,{kind:"constant",value:void 0},_);if("constant"===l.expression.kind){const F=l.expression.evaluate(_,null,{},x,D),B="resolvedImage"===l.property.specification.type&&"string"!=typeof F?F.name:F,Z=this._calculate(B,B,B,_);return new ot(this,{kind:"constant",value:Z},_)}if("camera"===l.expression.kind){const F=this._calculate(l.expression.evaluate({zoom:_.zoom-1}),l.expression.evaluate({zoom:_.zoom}),l.expression.evaluate({zoom:_.zoom+1}),_);return new ot(this,{kind:"constant",value:F},_)}return new ot(this,l.expression,_)}evaluate(l,_,x,D,F,B){if("source"===l.kind){const Z=l.evaluate(_,x,D,F,B);return this._calculate(Z,Z,Z,_)}return"composite"===l.kind?this._calculate(l.evaluate({zoom:Math.floor(_.zoom)-1},x,D),l.evaluate({zoom:Math.floor(_.zoom)},x,D),l.evaluate({zoom:Math.floor(_.zoom)+1},x,D),_):l.value}_calculate(l,_,x,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:l,to:_,other:x}:{from:x,to:_,other:l}}interpolate(l){return l}}class sn{constructor(l){this.specification=l}possiblyEvaluate(l,_,x,D){if(void 0!==l.value){if("constant"===l.expression.kind){const F=l.expression.evaluate(_,null,{},x,D);return this._calculate(F,F,F,_)}return this._calculate(l.expression.evaluate(new Pe(Math.floor(_.zoom-1),_)),l.expression.evaluate(new Pe(Math.floor(_.zoom),_)),l.expression.evaluate(new Pe(Math.floor(_.zoom+1),_)),_)}}_calculate(l,_,x,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:l,to:_}:{from:x,to:_}}interpolate(l){return l}}class un{constructor(l){this.specification=l}possiblyEvaluate(l,_,x,D){return!!l.expression.evaluate(_,null,{},x,D)}interpolate(){return!1}}class ut{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const _ in l){const x=l[_];x.specification.overridable&&this.overridableProperties.push(_);const D=this.defaultPropertyValues[_]=new Ne(x,void 0),F=this.defaultTransitionablePropertyValues[_]=new $e(x);this.defaultTransitioningPropertyValues[_]=F.untransitioned(),this.defaultPossiblyEvaluatedValues[_]=D.possiblyEvaluate({})}}}function En(g,l){return 256*(g=Mt(Math.floor(g),0,255))+Mt(Math.floor(l),0,255)}qn("DataDrivenProperty",ht),qn("DataConstantProperty",rt),qn("CrossFadedDataDrivenProperty",Kt),qn("CrossFadedProperty",sn),qn("ColorRampProperty",un);const bn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zn{constructor(l,_){this._structArray=l,this._pos1=_*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class An{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,_){return l._trim(),_&&(l.isTransferred=!0,_.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const _=Object.create(this.prototype);return _.arrayBuffer=l.arrayBuffer,_.length=l.length,_.capacity=l.arrayBuffer.byteLength/_.bytesPerElement,_._refreshViews(),_}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const _=this.uint8;this._refreshViews(),_&&this.uint8.set(_)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function kn(g,l=1){let _=0,x=0;return{members:g.map(D=>{const F=bn[D.type].BYTES_PER_ELEMENT,B=_=Ti(_,Math.max(l,F)),Z=D.components||1;return x=Math.max(x,F),_+=F*Z,{name:D.name,type:D.type,components:Z,offset:B}}),size:Ti(_,Math.max(x,l)),alignment:l}}function Ti(g,l){return Math.ceil(g/l)*l}class ci extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_){const x=this.length;return this.resize(x+1),this.emplace(x,l,_)}emplace(l,_,x){const D=2*l;return this.int16[D+0]=_,this.int16[D+1]=x,l}}ci.prototype.bytesPerElement=4,qn("StructArrayLayout2i4",ci);class ar extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x,D){const F=this.length;return this.resize(F+1),this.emplace(F,l,_,x,D)}emplace(l,_,x,D,F){const B=4*l;return this.int16[B+0]=_,this.int16[B+1]=x,this.int16[B+2]=D,this.int16[B+3]=F,l}}ar.prototype.bytesPerElement=8,qn("StructArrayLayout4i8",ar);class mr extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z){const X=this.length;return this.resize(X+1),this.emplace(X,l,_,x,D,F,B,Z)}emplace(l,_,x,D,F,B,Z,X){const re=6*l,ce=12*l,de=3*l;return this.int16[re+0]=_,this.int16[re+1]=x,this.uint8[ce+4]=D,this.uint8[ce+5]=F,this.uint8[ce+6]=B,this.uint8[ce+7]=Z,this.float32[de+2]=X,l}}mr.prototype.bytesPerElement=12,qn("StructArrayLayout2i4ub1f12",mr);class Lr extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_){const x=this.length;return this.resize(x+1),this.emplace(x,l,_)}emplace(l,_,x){const D=2*l;return this.float32[D+0]=_,this.float32[D+1]=x,l}}Lr.prototype.bytesPerElement=8,qn("StructArrayLayout2f8",Lr);class Bi extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce){const de=this.length;return this.resize(de+1),this.emplace(de,l,_,x,D,F,B,Z,X,re,ce)}emplace(l,_,x,D,F,B,Z,X,re,ce,de){const _e=10*l;return this.uint16[_e+0]=_,this.uint16[_e+1]=x,this.uint16[_e+2]=D,this.uint16[_e+3]=F,this.uint16[_e+4]=B,this.uint16[_e+5]=Z,this.uint16[_e+6]=X,this.uint16[_e+7]=re,this.uint16[_e+8]=ce,this.uint16[_e+9]=de,l}}Bi.prototype.bytesPerElement=20,qn("StructArrayLayout10ui20",Bi);class pr extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X){const re=this.length;return this.resize(re+1),this.emplace(re,l,_,x,D,F,B,Z,X)}emplace(l,_,x,D,F,B,Z,X,re){const ce=8*l;return this.uint16[ce+0]=_,this.uint16[ce+1]=x,this.uint16[ce+2]=D,this.uint16[ce+3]=F,this.uint16[ce+4]=B,this.uint16[ce+5]=Z,this.uint16[ce+6]=X,this.uint16[ce+7]=re,l}}pr.prototype.bytesPerElement=16,qn("StructArrayLayout8ui16",pr);class ho extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce,de,_e){const Se=this.length;return this.resize(Se+1),this.emplace(Se,l,_,x,D,F,B,Z,X,re,ce,de,_e)}emplace(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se){const Re=12*l;return this.int16[Re+0]=_,this.int16[Re+1]=x,this.int16[Re+2]=D,this.int16[Re+3]=F,this.uint16[Re+4]=B,this.uint16[Re+5]=Z,this.uint16[Re+6]=X,this.uint16[Re+7]=re,this.int16[Re+8]=ce,this.int16[Re+9]=de,this.int16[Re+10]=_e,this.int16[Re+11]=Se,l}}ho.prototype.bytesPerElement=24,qn("StructArrayLayout4i4ui4i24",ho);class ua extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_,x){const D=this.length;return this.resize(D+1),this.emplace(D,l,_,x)}emplace(l,_,x,D){const F=3*l;return this.float32[F+0]=_,this.float32[F+1]=x,this.float32[F+2]=D,l}}ua.prototype.bytesPerElement=12,qn("StructArrayLayout3f12",ua);class bs extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const _=this.length;return this.resize(_+1),this.emplace(_,l)}emplace(l,_){return this.uint32[1*l+0]=_,l}}bs.prototype.bytesPerElement=4,qn("StructArrayLayout1ul4",bs);class Uo extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce){const de=this.length;return this.resize(de+1),this.emplace(de,l,_,x,D,F,B,Z,X,re,ce)}emplace(l,_,x,D,F,B,Z,X,re,ce,de){const _e=16*l,Se=8*l;return this.int16[_e+0]=_,this.int16[_e+1]=x,this.float32[Se+1]=D,this.float32[Se+2]=F,this.float32[Se+3]=B,this.float32[Se+4]=Z,this.int16[_e+10]=X,this.uint32[Se+6]=re,this.uint16[_e+14]=ce,this.uint16[_e+15]=de,l}}Uo.prototype.bytesPerElement=32,qn("StructArrayLayout2i4f1i1ul2ui32",Uo);class Xo extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B){const Z=this.length;return this.resize(Z+1),this.emplace(Z,l,_,x,D,F,B)}emplace(l,_,x,D,F,B,Z){const X=6*l;return this.int16[X+0]=_,this.int16[X+1]=x,this.int16[X+2]=D,this.int16[X+3]=F,this.int16[X+4]=B,this.int16[X+5]=Z,l}}Xo.prototype.bytesPerElement=12,qn("StructArrayLayout2i2i2i12",Xo);class ha extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F){const B=this.length;return this.resize(B+1),this.emplace(B,l,_,x,D,F)}emplace(l,_,x,D,F,B){const Z=4*l,X=8*l;return this.float32[Z+0]=_,this.float32[Z+1]=x,this.float32[Z+2]=D,this.int16[X+6]=F,this.int16[X+7]=B,l}}ha.prototype.bytesPerElement=16,qn("StructArrayLayout2f1f2i16",ha);class wi extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_,x,D){const F=this.length;return this.resize(F+1),this.emplace(F,l,_,x,D)}emplace(l,_,x,D,F){const B=12*l,Z=3*l;return this.uint8[B+0]=_,this.uint8[B+1]=x,this.float32[Z+1]=D,this.float32[Z+2]=F,l}}wi.prototype.bytesPerElement=12,qn("StructArrayLayout2ub2f12",wi);class Nr extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x){const D=this.length;return this.resize(D+1),this.emplace(D,l,_,x)}emplace(l,_,x,D){const F=3*l;return this.uint16[F+0]=_,this.uint16[F+1]=x,this.uint16[F+2]=D,l}}Nr.prototype.bytesPerElement=6,qn("StructArrayLayout3ui6",Nr);class cr extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It){const Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It)}emplace(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It,Rt){const Bt=13*l,jt=26*l,Ut=52*l;return this.float32[Bt+0]=_,this.float32[Bt+1]=x,this.uint16[jt+4]=D,this.uint16[jt+5]=F,this.uint32[Bt+3]=B,this.uint32[Bt+4]=Z,this.uint32[Bt+5]=X,this.uint16[jt+12]=re,this.uint16[jt+13]=ce,this.uint16[jt+14]=de,this.float32[Bt+8]=_e,this.float32[Bt+9]=Se,this.uint8[Ut+40]=Re,this.uint8[Ut+41]=Xe,this.uint8[Ut+42]=at,this.uint32[Bt+11]=bt,this.int16[jt+24]=It,this.uint8[Ut+50]=Rt,l}}cr.prototype.bytesPerElement=52,qn("StructArrayLayout2f2ui3ul3ui2f3ub1ul1i1ub52",cr);class qr extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It,Rt,Bt,jt,Ut,mn,Cn,vn,Tn,ln){const pn=this.length;return this.resize(pn+1),this.emplace(pn,l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It,Rt,Bt,jt,Ut,mn,Cn,vn,Tn,ln)}emplace(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It,Rt,Bt,jt,Ut,mn,Cn,vn,Tn,ln,pn){const In=17*l,on=34*l;return this.float32[In+0]=_,this.float32[In+1]=x,this.int16[on+4]=D,this.int16[on+5]=F,this.int16[on+6]=B,this.int16[on+7]=Z,this.int16[on+8]=X,this.int16[on+9]=re,this.uint16[on+10]=ce,this.uint16[on+11]=de,this.uint16[on+12]=_e,this.uint16[on+13]=Se,this.uint16[on+14]=Re,this.uint16[on+15]=Xe,this.uint16[on+16]=at,this.uint16[on+17]=bt,this.uint16[on+18]=It,this.uint16[on+19]=Rt,this.uint16[on+20]=Bt,this.uint16[on+21]=jt,this.uint16[on+22]=Ut,this.uint16[on+23]=mn,this.uint16[on+24]=Cn,this.uint32[In+13]=vn,this.float32[In+14]=Tn,this.float32[In+15]=ln,this.float32[In+16]=pn,l}}qr.prototype.bytesPerElement=68,qn("StructArrayLayout2f6i15ui1ul3f68",qr);class po extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const _=this.length;return this.resize(_+1),this.emplace(_,l)}emplace(l,_){return this.float32[1*l+0]=_,l}}po.prototype.bytesPerElement=4,qn("StructArrayLayout1f4",po);class Jr extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x){const D=this.length;return this.resize(D+1),this.emplace(D,l,_,x)}emplace(l,_,x,D){const F=3*l;return this.int16[F+0]=_,this.int16[F+1]=x,this.int16[F+2]=D,l}}Jr.prototype.bytesPerElement=6,qn("StructArrayLayout3i6",Jr);class da extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D){const F=this.length;return this.resize(F+1),this.emplace(F,l,_,x,D)}emplace(l,_,x,D,F){const B=6*l;return this.uint32[3*l+0]=_,this.uint16[B+2]=x,this.uint16[B+3]=D,this.uint16[B+4]=F,l}}da.prototype.bytesPerElement=12,qn("StructArrayLayout1ul3ui12",da);class Ps extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_){const x=this.length;return this.resize(x+1),this.emplace(x,l,_)}emplace(l,_,x){const D=2*l;return this.uint16[D+0]=_,this.uint16[D+1]=x,l}}Ps.prototype.bytesPerElement=4,qn("StructArrayLayout2ui4",Ps);class Ys extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const _=this.length;return this.resize(_+1),this.emplace(_,l)}emplace(l,_){return this.uint16[1*l+0]=_,l}}Ys.prototype.bytesPerElement=2,qn("StructArrayLayout1ui2",Ys);class qs extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_,x,D){const F=this.length;return this.resize(F+1),this.emplace(F,l,_,x,D)}emplace(l,_,x,D,F){const B=4*l;return this.float32[B+0]=_,this.float32[B+1]=x,this.float32[B+2]=D,this.float32[B+3]=F,l}}qs.prototype.bytesPerElement=16,qn("StructArrayLayout4f16",qs);class wl extends Zn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new Be(this.anchorPointX,this.anchorPointY)}}wl.prototype.size=32;class Zc extends Uo{get(l){return new wl(this,l)}}qn("CollisionBoxArray",Zc);class Zs extends Zn{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+4]}get numGlyphs(){return this._structArray.uint16[this._pos2+5]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineStartIndex(){return this._structArray.uint32[this._pos4+4]}get lineLength(){return this._structArray.uint32[this._pos4+5]}get segment(){return this._structArray.uint16[this._pos2+12]}get lowerSize(){return this._structArray.uint16[this._pos2+13]}get upperSize(){return this._structArray.uint16[this._pos2+14]}get lineOffsetX(){return this._structArray.float32[this._pos4+8]}get lineOffsetY(){return this._structArray.float32[this._pos4+9]}get writingMode(){return this._structArray.uint8[this._pos1+40]}get placedOrientation(){return this._structArray.uint8[this._pos1+41]}set placedOrientation(l){this._structArray.uint8[this._pos1+41]=l}get hidden(){return this._structArray.uint8[this._pos1+42]}set hidden(l){this._structArray.uint8[this._pos1+42]=l}get crossTileID(){return this._structArray.uint32[this._pos4+11]}set crossTileID(l){this._structArray.uint32[this._pos4+11]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+24]}get flipState(){return this._structArray.uint8[this._pos1+50]}set flipState(l){this._structArray.uint8[this._pos1+50]=l}}Zs.prototype.size=52;class sd extends cr{get(l){return new Zs(this,l)}}qn("PlacedSymbolArray",sd);class Wc extends Zn{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+8]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+9]}get key(){return this._structArray.uint16[this._pos2+10]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get featureIndex(){return this._structArray.uint16[this._pos2+19]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+21]}get numIconVertices(){return this._structArray.uint16[this._pos2+22]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+23]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+24]}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(l){this._structArray.uint32[this._pos4+13]=l}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Wc.prototype.size=68;class Ho extends qr{get(l){return new Wc(this,l)}}qn("SymbolInstanceArray",Ho);class fo extends po{getoffsetX(l){return this.float32[1*l+0]}}qn("GlyphOffsetArray",fo);class Ia extends Jr{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}qn("SymbolLineVertexArray",Ia);class Ru extends Zn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ru.prototype.size=12;class E_ extends da{get(l){return new Ru(this,l)}}qn("FeatureIndexArray",E_);class Ou extends Zn{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Ou.prototype.size=4;class jl extends Ps{get(l){return new Ou(this,l)}}qn("FillExtrusionCentroidArray",jl);const bv=kn([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Nf=kn([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var $c=Xt(function(g){g.exports=function(l,_){var x,D,F,B,Z,X,re,ce;for(D=l.length-(x=3&l.length),F=_,Z=3432918353,X=461845907,ce=0;ce<D;)re=255&l.charCodeAt(ce)|(255&l.charCodeAt(++ce))<<8|(255&l.charCodeAt(++ce))<<16|(255&l.charCodeAt(++ce))<<24,++ce,F=27492+(65535&(B=5*(65535&(F=(F^=re=(65535&(re=(re=(65535&re)*Z+(((re>>>16)*Z&65535)<<16)&4294967295)<<15|re>>>17))*X+(((re>>>16)*X&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(re=0,x){case 3:re^=(255&l.charCodeAt(ce+2))<<16;case 2:re^=(255&l.charCodeAt(ce+1))<<8;case 1:F^=re=(65535&(re=(re=(65535&(re^=255&l.charCodeAt(ce)))*Z+(((re>>>16)*Z&65535)<<16)&4294967295)<<15|re>>>17))*X+(((re>>>16)*X&65535)<<16)&4294967295}return F^=l.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}}),xv=Xt(function(g){g.exports=function(l,_){for(var x,D=l.length,F=_^D,B=0;D>=4;)x=1540483477*(65535&(x=255&l.charCodeAt(B)|(255&l.charCodeAt(++B))<<8|(255&l.charCodeAt(++B))<<16|(255&l.charCodeAt(++B))<<24))+((1540483477*(x>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(x=1540483477*(65535&(x^=x>>>24))+((1540483477*(x>>>16)&65535)<<16)),D-=4,++B;switch(D){case 3:F^=(255&l.charCodeAt(B+2))<<16;case 2:F^=(255&l.charCodeAt(B+1))<<8;case 1:F=1540483477*(65535&(F^=255&l.charCodeAt(B)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}}),Rs=$c,Wp=xv;Rs.murmur3=$c,Rs.murmur2=Wp;class Bf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,_,x,D){this.ids.push(xs(l)),this.positions.push(_,x,D)}getPositions(l){const _=xs(l);let x=0,D=this.ids.length-1;for(;x<D;){const B=x+D>>1;this.ids[B]>=_?D=B:x=B+1}const F=[];for(;this.ids[x]===_;)F.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return F}static serialize(l,_){const x=new Float64Array(l.ids),D=new Uint32Array(l.positions);return pa(x,D,0,x.length-1),_&&_.push(x.buffer,D.buffer),{ids:x,positions:D}}static deserialize(l){const _=new Bf;return _.ids=l.ids,_.positions=l.positions,_.indexed=!0,_}}function xs(g){const l=+g;return!isNaN(l)&&l<=Et?l:Rs(String(g))}function pa(g,l,_,x){for(;_<x;){const D=g[_+x>>1];let F=_-1,B=x+1;for(;;){do{F++}while(g[F]<D);do{B--}while(g[B]>D);if(F>=B)break;Ch(g,F,B),Ch(l,3*F,3*B),Ch(l,3*F+1,3*B+1),Ch(l,3*F+2,3*B+2)}B-_<x-B?(pa(g,l,_,B),_=B+1):(pa(g,l,B+1,x),x=B)}}function Ch(g,l,_){const x=g[l];g[l]=g[_],g[_]=x}qn("FeaturePositionMap",Bf);class Ro{constructor(l,_){this.gl=l.gl,this.location=_}}class ws extends Ro{constructor(l,_){super(l,_),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class ad extends Ro{constructor(l,_){super(l,_),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class zf extends Ro{constructor(l,_){super(l,_),this.current=hn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Vf=new Float32Array(16),eg=new Float32Array(9);function Uf(g){return[En(255*g.r,255*g.g),En(255*g.b,255*g.a)]}class Go{constructor(l,_,x){this.value=l,this.uniformNames=_.map(D=>`u_${D}`),this.type=x}setUniform(l,_,x){l.set(x.constantOr(this.value))}getBinding(l,_,x){return"color"===this.type?new zf(l,_):new ws(l,_)}}class gc{constructor(l,_){this.uniformNames=_.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,_){this.pixelRatioFrom=_.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=_.tl.concat(_.br),this.patternTo=l.tl.concat(l.br)}setUniform(l,_,x,D){const F="u_pattern_to"===D||"u_dash_to"===D?this.patternTo:"u_pattern_from"===D||"u_dash_from"===D?this.patternFrom:"u_pixel_ratio_to"===D?this.pixelRatioTo:"u_pixel_ratio_from"===D?this.pixelRatioFrom:null;F&&l.set(F)}getBinding(l,_,x){return"u_pattern_from"===x||"u_pattern_to"===x||"u_dash_from"===x||"u_dash_to"===x?new ad(l,_):new ws(l,_)}}class Os{constructor(l,_,x,D){this.expression=l,this.type=x,this.maxValue=0,this.paintVertexAttributes=_.map(F=>({name:`a_${F}`,type:"Float32",components:"color"===x?2:1,offset:0})),this.paintVertexArray=new D}populatePaintArray(l,_,x,D,F){const B=this.paintVertexArray.length,Z=this.expression.evaluate(new Pe(0),_,{},D,[],F);this.paintVertexArray.resize(l),this._setPaintValue(B,l,Z)}updatePaintArray(l,_,x,D){const F=this.expression.evaluate({zoom:0},x,D);this._setPaintValue(l,_,F)}_setPaintValue(l,_,x){if("color"===this.type){const D=Uf(x);for(let F=l;F<_;F++)this.paintVertexArray.emplace(F,D[0],D[1])}else{for(let D=l;D<_;D++)this.paintVertexArray.emplace(D,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _c{constructor(l,_,x,D,F,B){this.expression=l,this.uniformNames=_.map(Z=>`u_${Z}_t`),this.type=x,this.useIntegerZoom=D,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=_.map(Z=>({name:`a_${Z}`,type:"Float32",components:"color"===x?4:2,offset:0})),this.paintVertexArray=new B}populatePaintArray(l,_,x,D,F){const B=this.expression.evaluate(new Pe(this.zoom),_,{},D,[],F),Z=this.expression.evaluate(new Pe(this.zoom+1),_,{},D,[],F),X=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(X,l,B,Z)}updatePaintArray(l,_,x,D){const F=this.expression.evaluate({zoom:this.zoom},x,D),B=this.expression.evaluate({zoom:this.zoom+1},x,D);this._setPaintValue(l,_,F,B)}_setPaintValue(l,_,x,D){if("color"===this.type){const F=Uf(x),B=Uf(D);for(let Z=l;Z<_;Z++)this.paintVertexArray.emplace(Z,F[0],F[1],B[0],B[1])}else{for(let F=l;F<_;F++)this.paintVertexArray.emplace(F,x,D);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(D))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,_){const x=this.useIntegerZoom?Math.floor(_.zoom):_.zoom,D=Mt(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(D)}getBinding(l,_,x){return new ws(l,_)}}class Fu{constructor(l,_,x,D,F,B,Z){this.expression=l,this.type=x,this.useIntegerZoom=D,this.zoom=F,this.layerId=Z,this.paintVertexAttributes=("array"===x?Nf:bv).members;for(let X=0;X<_.length;++X);this.zoomInPaintVertexArray=new B,this.zoomOutPaintVertexArray=new B}populatePaintArray(l,_,x){const D=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(D,l,_.patterns&&_.patterns[this.layerId],x)}updatePaintArray(l,_,x,D,F){this._setPaintValues(l,_,x.patterns&&x.patterns[this.layerId],F)}_setPaintValues(l,_,x,D){if(!D||!x)return;const{min:F,mid:B,max:Z}=x,X=D[F],re=D[B],ce=D[Z];if(X&&re&&ce)for(let de=l;de<_;de++)this._setPaintValue(this.zoomInPaintVertexArray,de,re,X),this._setPaintValue(this.zoomOutPaintVertexArray,de,re,ce)}_setPaintValue(l,_,x,D){l.emplace(_,x.tl[0],x.tl[1],x.br[0],x.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],x.pixelRatio,D.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ws{constructor(l,_,x=(()=>!0)){this.binders={},this._buffers=[];const D=[];for(const F in l.paint._values){if(!x(F))continue;const B=l.paint.get(F);if(!(B instanceof ot&&Wo(B.property.specification)))continue;const Z=Xc(F,l.type),X=B.value,re=B.property.specification.type,ce=B.property.useIntegerZoom,de=B.property.specification["property-type"],_e="cross-faded"===de||"cross-faded-data-driven"===de,Se="line-dasharray"===String(F)&&"constant"!==l.layout.get("line-cap").value.kind;if("constant"!==X.kind||Se)if("source"===X.kind||Se||_e){const Re=M_(F,re,"source");this.binders[F]=_e?new Fu(X,Z,re,ce,_,Re,l.id):new Os(X,Z,re,Re),D.push(`/a_${F}`)}else{const Re=M_(F,re,"composite");this.binders[F]=new _c(X,Z,re,ce,_,Re),D.push(`/z_${F}`)}else this.binders[F]=_e?new gc(X.value,Z):new Go(X.value,Z,re),D.push(`/u_${F}`)}this.cacheKey=D.sort().join("")}getMaxValue(l){const _=this.binders[l];return _ instanceof Os||_ instanceof _c?_.maxValue:0}populatePaintArrays(l,_,x,D,F){for(const B in this.binders){const Z=this.binders[B];(Z instanceof Os||Z instanceof _c||Z instanceof Fu)&&Z.populatePaintArray(l,_,x,D,F)}}setConstantPatternPositions(l,_){for(const x in this.binders){const D=this.binders[x];D instanceof gc&&D.setConstantPatternPositions(l,_)}}updatePaintArrays(l,_,x,D,F){let B=!1;for(const Z in l){const X=_.getPositions(Z);for(const re of X){const ce=x.feature(re.index);for(const de in this.binders){const _e=this.binders[de];if((_e instanceof Os||_e instanceof _c||_e instanceof Fu)&&!0===_e.expression.isStateDependent){const Se=D.paint.get(de);_e.expression=Se.value,_e.updatePaintArray(re.start,re.end,ce,l[Z],F),B=!0}}}}return B}defines(){const l=[];for(const _ in this.binders){const x=this.binders[_];(x instanceof Go||x instanceof gc)&&l.push(...x.uniformNames.map(D=>`#define HAS_UNIFORM_${D}`))}return l}getBinderAttributes(){const l=[];for(const _ in this.binders){const x=this.binders[_];if(x instanceof Os||x instanceof _c||x instanceof Fu)for(let D=0;D<x.paintVertexAttributes.length;D++)l.push(x.paintVertexAttributes[D].name)}return l}getBinderUniforms(){const l=[];for(const _ in this.binders){const x=this.binders[_];if(x instanceof Go||x instanceof gc||x instanceof _c)for(const D of x.uniformNames)l.push(D)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,_){const x=[];for(const D in this.binders){const F=this.binders[D];if(F instanceof Go||F instanceof gc||F instanceof _c)for(const B of F.uniformNames)if(_[B]){const Z=F.getBinding(l,_[B],B);x.push({name:B,property:D,binding:Z})}}return x}setUniforms(l,_,x,D){for(const{name:F,property:B,binding:Z}of _)this.binders[B].setUniform(Z,D,x.get(B),F)}updatePaintBuffers(l){this._buffers=[];for(const _ in this.binders){const x=this.binders[_];if(l&&x instanceof Fu){const D=2===l.fromScale?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;D&&this._buffers.push(D)}else(x instanceof Os||x instanceof _c)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(l){for(const _ in this.binders){const x=this.binders[_];(x instanceof Os||x instanceof _c||x instanceof Fu)&&x.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const _=this.binders[l];(_ instanceof Os||_ instanceof _c||_ instanceof Fu)&&_.destroy()}}}class yc{constructor(l,_,x=(()=>!0)){this.programConfigurations={};for(const D of l)this.programConfigurations[D.id]=new Ws(D,_,x);this.needsUpload=!1,this._featureMap=new Bf,this._bufferOffset=0}populatePaintArrays(l,_,x,D,F,B){for(const Z in this.programConfigurations)this.programConfigurations[Z].populatePaintArrays(l,_,D,F,B);void 0!==_.id&&this._featureMap.add(_.id,x,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,_,x,D){for(const F of x)this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(l,this._featureMap,_,F,D)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const _ in this.programConfigurations)this.programConfigurations[_].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}const Sh={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Xc(g,l){return Sh[g]||[g.replace(`${l}-`,"").replace(/-/g,"_")]}const Eh={"line-pattern":{source:Bi,composite:Bi},"fill-pattern":{source:Bi,composite:Bi},"fill-extrusion-pattern":{source:Bi,composite:Bi},"line-dasharray":{source:pr,composite:pr}},T_={color:{source:Lr,composite:qs},number:{source:po,composite:Lr}};function M_(g,l,_){const x=Eh[g];return x&&x[_]||T_[l][_]}qn("ConstantBinder",Go),qn("CrossFadedConstantBinder",gc),qn("SourceExpressionBinder",Os),qn("CrossFadedCompositeBinder",Fu),qn("CompositeExpressionBinder",_c),qn("ProgramConfiguration",Ws,{omit:["_buffers"]}),qn("ProgramConfigurationSet",yc);const Hf="-transition";class Yl extends p{constructor(l,_){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==l.type&&(this.metadata=(l=l).metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,"background"!==l.type&&"sky"!==l.type&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),_.layout&&(this._unevaluatedLayout=new tt(_.layout)),_.paint)){this._transitionablePaint=new et(_.paint);for(const x in l.paint)this.setPaintProperty(x,l.paint[x],{validate:!1});for(const x in l.layout)this.setLayoutProperty(x,l.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vt(_.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return"visibility"===l?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,_,x={}){null!=_&&this._validate(Of,`layers.${this.id}.layout.${l}`,l,_,x)||("visibility"!==l?this._unevaluatedLayout.setValue(l,_):this.visibility=_)}getPaintProperty(l){return Ht(l,Hf)?this._transitionablePaint.getTransition(l.slice(0,-Hf.length)):this._transitionablePaint.getValue(l)}setPaintProperty(l,_,x={}){if(null!=_&&this._validate(Au,`layers.${this.id}.paint.${l}`,l,_,x))return!1;if(Ht(l,Hf))return this._transitionablePaint.setTransition(l.slice(0,-Hf.length),_||void 0),!1;{const D=this._transitionablePaint._values[l],F="cross-faded-data-driven"===D.property.specification["property-type"],B=D.value.isDataDriven(),Z=D.value;this._transitionablePaint.setValue(l,_),this._handleSpecialPaintPropertyUpdate(l);const X=this._transitionablePaint._values[l].value;return X.isDataDriven()||B||F||this._handleOverridablePaintPropertyUpdate(l,Z,X)}}_handleSpecialPaintPropertyUpdate(l){}getProgramIds(){return null}getProgramConfiguration(l){return null}_handleOverridablePaintPropertyUpdate(l,_,x){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||"none"===this.visibility}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,_){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,_)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Yt(l,(_,x)=>!(void 0===_||"layout"===x&&!Object.keys(_).length||"paint"===x&&!Object.keys(_).length))}_validate(l,_,x,D,F={}){return(!F||!1!==F.validate)&&Jd(this,l.call(Mu,{key:_,layerType:this.type,objectKey:x,value:D,styleSpec:y,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const _=this.paint.get(l);if(_ instanceof ot&&Wo(_.property.specification)&&("source"===_.value.kind||"composite"===_.value.kind)&&_.value.isStateDependent)return!0}return!1}}const wv=kn([{name:"a_pos",components:2,type:"Int16"}],4),{members:A_}=wv;class Cs{constructor(l=[]){this.segments=l}prepareSegment(l,_,x,D){let F=this.segments[this.segments.length-1];return l>Cs.MAX_VERTEX_ARRAY_LENGTH&&mi(`Max vertices per segment is ${Cs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!F||F.vertexLength+l>Cs.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==D)&&(F={vertexOffset:_.length,primitiveOffset:x.length,vertexLength:0,primitiveLength:0},void 0!==D&&(F.sortKey=D),this.segments.push(F)),F}get(){return this.segments}destroy(){for(const l of this.segments)for(const _ in l.vaos)l.vaos[_].destroy()}static simpleSegment(l,_,x,D){return new Cs([{vertexOffset:l,primitiveOffset:_,vertexLength:x,primitiveLength:D,vaos:{},sortKey:0}])}}Cs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qn("SegmentVector",Cs);var Cr=8192;const Gf=Math.pow(2,14)-1,k_=-Gf-1;function ld(g){const l=Cr/g.extent,_=g.loadGeometry();for(let x=0;x<_.length;x++){const D=_[x];for(let F=0;F<D.length;F++){const B=D[F],Z=Math.round(B.x*l),X=Math.round(B.y*l);B.x=Mt(Z,k_,Gf),B.y=Mt(X,k_,Gf),(Z<B.x||Z>B.x+1||X<B.y||X>B.y+1)&&mi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return _}function cd(g,l){return{type:g.type,id:g.id,properties:g.properties,geometry:l?ld(g):[]}}function Hi(g,l,_,x,D){g.emplaceBack(2*l+(x+1)/2,2*_+(D+1)/2)}class ja{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(_=>_.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new ci,this.indexArray=new Nr,this.segments=new Cs,this.programConfigurations=new yc(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(l,_,x){const D=this.layers[0],F=[];let B=null;"circle"===D.type&&(B=D.layout.get("circle-sort-key"));for(const{feature:Z,id:X,index:re,sourceLayerIndex:ce}of l){const de=this.layers[0]._featureFilter.needGeometry,_e=cd(Z,de);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),_e,x))continue;const Se=B?B.evaluate(_e,{},x):void 0,Re={id:X,properties:Z.properties,type:Z.type,sourceLayerIndex:ce,index:re,geometry:de?_e.geometry:ld(Z),patterns:{},sortKey:Se};F.push(Re)}B&&F.sort((Z,X)=>Z.sortKey-X.sortKey);for(const Z of F){const{geometry:X,index:re,sourceLayerIndex:ce}=Z,de=l[re].feature;this.addFeature(Z,X,re,x),_.featureIndex.insert(de,X,re,ce,this.index)}}update(l,_,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,_,this.stateDependentLayers,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,A_),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,_,x,D){for(const F of _)for(const B of F){const Z=B.x,X=B.y;if(Z<0||Z>=Cr||X<0||X>=Cr)continue;const re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),ce=re.vertexLength;Hi(this.layoutVertexArray,Z,X,-1,-1),Hi(this.layoutVertexArray,Z,X,1,-1),Hi(this.layoutVertexArray,Z,X,1,1),Hi(this.layoutVertexArray,Z,X,-1,1),this.indexArray.emplaceBack(ce,ce+1,ce+2),this.indexArray.emplaceBack(ce,ce+3,ce+2),re.vertexLength+=4,re.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{},D)}}function Th(g,l){for(let _=0;_<g.length;_++)if(Zl(l,g[_]))return!0;for(let _=0;_<l.length;_++)if(Zl(g,l[_]))return!0;return!!Lu(g,l)}function Cl(g,l,_){return!!Zl(g,l)||!!ql(l,g,_)}function vc(g,l){if(1===g.length)return ng(l,g[0]);for(let _=0;_<l.length;_++){const x=l[_];for(let D=0;D<x.length;D++)if(Zl(g,x[D]))return!0}for(let _=0;_<g.length;_++)if(ng(l,g[_]))return!0;for(let _=0;_<l.length;_++)if(Lu(g,l[_]))return!0;return!1}function D_(g,l,_){if(g.length>1){if(Lu(g,l))return!0;for(let x=0;x<l.length;x++)if(ql(l[x],g,_))return!0}for(let x=0;x<g.length;x++)if(ql(g[x],l,_))return!0;return!1}function Lu(g,l){if(0===g.length||0===l.length)return!1;for(let _=0;_<g.length-1;_++){const x=g[_],D=g[_+1];for(let F=0;F<l.length-1;F++)if(I_(x,D,l[F],l[F+1]))return!0}return!1}function I_(g,l,_,x){return Un(g,_,x)!==Un(l,_,x)&&Un(g,l,_)!==Un(g,l,x)}function ql(g,l,_){const x=_*_;if(1===l.length)return g.distSqr(l[0])<x;for(let D=1;D<l.length;D++)if(tg(g,l[D-1],l[D])<x)return!0;return!1}function tg(g,l,_){const x=l.distSqr(_);if(0===x)return g.distSqr(l);const D=((g.x-l.x)*(_.x-l.x)+(g.y-l.y)*(_.y-l.y))/x;return g.distSqr(D<0?l:D>1?_:_.sub(l)._mult(D)._add(l))}function ng(g,l){let _,x,D,F=!1;for(let B=0;B<g.length;B++){_=g[B];for(let Z=0,X=_.length-1;Z<_.length;X=Z++)x=_[Z],D=_[X],x.y>l.y!=D.y>l.y&&l.x<(D.x-x.x)*(l.y-x.y)/(D.y-x.y)+x.x&&(F=!F)}return F}function Zl(g,l){let _=!1;for(let x=0,D=g.length-1;x<g.length;D=x++){const F=g[x],B=g[D];F.y>l.y!=B.y>l.y&&l.x<(B.x-F.x)*(l.y-F.y)/(B.y-F.y)+F.x&&(_=!_)}return _}function $p(g,l,_,x,D){for(const B of g)if(l<=B.x&&_<=B.y&&x>=B.x&&D>=B.y)return!0;const F=[new Be(l,_),new Be(l,D),new Be(x,D),new Be(x,_)];if(g.length>2)for(const B of F)if(Zl(g,B))return!0;for(let B=0;B<g.length-1;B++)if(os(g[B],g[B+1],F))return!0;return!1}function os(g,l,_){const x=_[0],D=_[2];if(g.x<x.x&&l.x<x.x||g.x>D.x&&l.x>D.x||g.y<x.y&&l.y<x.y||g.y>D.y&&l.y>D.y)return!1;const F=Un(g,l,_[0]);return F!==Un(g,l,_[1])||F!==Un(g,l,_[2])||F!==Un(g,l,_[3])}function Sl(g,l,_){const x=l.paint.get(g).value;return"constant"===x.kind?x.value:_.programConfigurations.get(l.id).getMaxValue(g)}function ig(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1])}function Xp(g,l,_,x,D){if(!l[0]&&!l[1])return g;const F=Be.convert(l)._mult(D);"viewport"===_&&F._rotate(-x);const B=[];for(let Z=0;Z<g.length;Z++)B.push(g[Z].sub(F));return B}function rg(g,l,_,x){const D=Be.convert(g)._mult(x);return"viewport"===l&&D._rotate(-_),D}qn("CircleBucket",ja,{omit:["layers"]});const og=new ut({"circle-sort-key":new ht(y.layout_circle["circle-sort-key"])});var P_={paint:new ut({"circle-radius":new ht(y.paint_circle["circle-radius"]),"circle-color":new ht(y.paint_circle["circle-color"]),"circle-blur":new ht(y.paint_circle["circle-blur"]),"circle-opacity":new ht(y.paint_circle["circle-opacity"]),"circle-translate":new rt(y.paint_circle["circle-translate"]),"circle-translate-anchor":new rt(y.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new rt(y.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new rt(y.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ht(y.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ht(y.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ht(y.paint_circle["circle-stroke-opacity"])}),layout:og},fa="undefined"!=typeof Float32Array?Float32Array:Array;function sg(){var g=new fa(9);return fa!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[5]=0,g[6]=0,g[7]=0),g[0]=1,g[4]=1,g[8]=1,g}function Fs(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}function ud(g,l,_){var x=l[0],D=l[1],F=l[2],B=l[3],Z=l[4],X=l[5],re=l[6],ce=l[7],de=l[8],_e=l[9],Se=l[10],Re=l[11],Xe=l[12],at=l[13],bt=l[14],It=l[15],Rt=_[0],Bt=_[1],jt=_[2],Ut=_[3];return g[0]=Rt*x+Bt*Z+jt*de+Ut*Xe,g[1]=Rt*D+Bt*X+jt*_e+Ut*at,g[2]=Rt*F+Bt*re+jt*Se+Ut*bt,g[3]=Rt*B+Bt*ce+jt*Re+Ut*It,g[4]=(Rt=_[4])*x+(Bt=_[5])*Z+(jt=_[6])*de+(Ut=_[7])*Xe,g[5]=Rt*D+Bt*X+jt*_e+Ut*at,g[6]=Rt*F+Bt*re+jt*Se+Ut*bt,g[7]=Rt*B+Bt*ce+jt*Re+Ut*It,g[8]=(Rt=_[8])*x+(Bt=_[9])*Z+(jt=_[10])*de+(Ut=_[11])*Xe,g[9]=Rt*D+Bt*X+jt*_e+Ut*at,g[10]=Rt*F+Bt*re+jt*Se+Ut*bt,g[11]=Rt*B+Bt*ce+jt*Re+Ut*It,g[12]=(Rt=_[12])*x+(Bt=_[13])*Z+(jt=_[14])*de+(Ut=_[15])*Xe,g[13]=Rt*D+Bt*X+jt*_e+Ut*at,g[14]=Rt*F+Bt*re+jt*Se+Ut*bt,g[15]=Rt*B+Bt*ce+jt*Re+Ut*It,g}Math.hypot||(Math.hypot=function(){for(var g=0,l=arguments.length;l--;)g+=arguments[l]*arguments[l];return Math.sqrt(g)});var El=ud;function Tl(){var g=new fa(3);return fa!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function oi(g){return Math.hypot(g[0],g[1],g[2])}function Ya(g,l,_){var x=new fa(3);return x[0]=g,x[1]=l,x[2]=_,x}function ag(g,l,_){return g[0]=l[0]-_[0],g[1]=l[1]-_[1],g[2]=l[2]-_[2],g}function bc(g,l,_){return g[0]=l[0]*_[0],g[1]=l[1]*_[1],g[2]=l[2]*_[2],g}function Nu(g,l,_,x){return g[0]=l[0]+_[0]*x,g[1]=l[1]+_[1]*x,g[2]=l[2]+_[2]*x,g}function jf(g,l){var _=l[0],x=l[1],D=l[2],F=_*_+x*x+D*D;return F>0&&(F=1/Math.sqrt(F)),g[0]=l[0]*F,g[1]=l[1]*F,g[2]=l[2]*F,g}function lg(g,l,_){var x=_[0],D=_[1],F=_[2],B=l[0],Z=l[1],X=l[2],re=D*X-F*Z,ce=F*B-x*X,de=x*Z-D*B,_e=D*de-F*ce,Se=F*re-x*de,Re=x*ce-D*re,Xe=2*_[3];return ce*=Xe,de*=Xe,Se*=2,Re*=2,g[0]=B+(re*=Xe)+(_e*=2),g[1]=Z+ce+Se,g[2]=X+de+Re,g}var hd,Yf=ag,Qp=bc,Cv=oi;function dd(g,l,_){var x=l[0],D=l[1],F=l[2],B=l[3];return g[0]=_[0]*x+_[4]*D+_[8]*F+_[12]*B,g[1]=_[1]*x+_[5]*D+_[9]*F+_[13]*B,g[2]=_[2]*x+_[6]*D+_[10]*F+_[14]*B,g[3]=_[3]*x+_[7]*D+_[11]*F+_[15]*B,g}function Mh(){var g=new fa(4);return fa!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g[3]=1,g}function Ss(g){return g[0]=0,g[1]=0,g[2]=0,g[3]=1,g}function xc(g,l,_){_*=.5;var x=l[0],D=l[1],F=l[2],B=l[3],Z=Math.sin(_),X=Math.cos(_);return g[0]=x*X+B*Z,g[1]=D*X+F*Z,g[2]=F*X-D*Z,g[3]=B*X-x*Z,g}function Jp(g,l,_){const x=dd([],[g.x,g.y,l,1],_);return new Be(x[0]/x[3],x[1]/x[3])}Tl(),hd=new fa(4),fa!=Float32Array&&(hd[0]=0,hd[1]=0,hd[2]=0,hd[3]=0),Tl(),Ya(1,0,0),Ya(0,1,0),Mh(),Mh(),sg();const Kp=Ya(0,0,0),$s=Ya(0,0,1);function sp(g,l){const _=Tl();return Kp[2]=l,g.intersectsPlane(Kp,$s,_),new Be(_[0],_[1])}class ef extends ja{}function pd(g,{width:l,height:_},x,D){if(D){if(D instanceof Uint8ClampedArray)D=new Uint8Array(D.buffer);else if(D.length!==l*_*x)throw new RangeError("mismatched image size")}else D=new Uint8Array(l*_*x);return g.width=l,g.height=_,g.data=D,g}function Wl(g,{width:l,height:_},x){if(l===g.width&&_===g.height)return;const D=pd({},{width:l,height:_},x);tf(g,D,{x:0,y:0},{x:0,y:0},{width:Math.min(g.width,l),height:Math.min(g.height,_)},x),g.width=l,g.height=_,g.data=D.data}function tf(g,l,_,x,D,F){if(0===D.width||0===D.height)return l;if(D.width>g.width||D.height>g.height||_.x>g.width-D.width||_.y>g.height-D.height)throw new RangeError("out of range source coordinates for image copy");if(D.width>l.width||D.height>l.height||x.x>l.width-D.width||x.y>l.height-D.height)throw new RangeError("out of range destination coordinates for image copy");const B=g.data,Z=l.data;for(let X=0;X<D.height;X++){const re=((_.y+X)*g.width+_.x)*F,ce=((x.y+X)*l.width+x.x)*F;for(let de=0;de<D.width*F;de++)Z[ce+de]=B[re+de]}return l}qn("HeatmapBucket",ef,{omit:["layers"]});class Ah{constructor(l,_){pd(this,l,1,_)}resize(l){Wl(this,l,1)}clone(){return new Ah({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,_,x,D,F){tf(l,_,x,D,F,1)}}class qa{constructor(l,_){pd(this,l,4,_)}resize(l){Wl(this,l,4)}replace(l,_){_?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new qa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,_,x,D,F){tf(l,_,x,D,F,4)}}qn("AlphaImage",Ah),qn("RGBAImage",qa);var Sv={paint:new ut({"heatmap-radius":new ht(y.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ht(y.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new rt(y.paint_heatmap["heatmap-intensity"]),"heatmap-color":new un(y.paint_heatmap["heatmap-color"]),"heatmap-opacity":new rt(y.paint_heatmap["heatmap-opacity"])})};function ap(g){const l={},_=g.resolution||256,x=g.clips?g.clips.length:1,D=g.image||new qa({width:_,height:x}),F=(B,Z,X)=>{l[g.evaluationKey]=X;const re=g.expression.evaluate(l);D.data[B+Z+0]=Math.floor(255*re.r/re.a),D.data[B+Z+1]=Math.floor(255*re.g/re.a),D.data[B+Z+2]=Math.floor(255*re.b/re.a),D.data[B+Z+3]=Math.floor(255*re.a)};if(g.clips)for(let B=0,Z=0;B<x;++B,Z+=4*_)for(let X=0,re=0;X<_;X++,re+=4){const ce=X/(_-1),{start:de,end:_e}=g.clips[B];F(Z,re,de*(1-ce)+_e*ce)}else for(let B=0,Z=0;B<_;B++,Z+=4)F(0,Z,B/(_-1));return D}var cg={paint:new ut({"hillshade-illumination-direction":new rt(y.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new rt(y.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new rt(y.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new rt(y.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new rt(y.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new rt(y.paint_hillshade["hillshade-accent-color"])})};const ug=kn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bu}=ug;var kh=lp,qf=lp;function lp(g,l,_){_=_||2;var x,D,F,B,Z,X,re,ce=l&&l.length,de=ce?l[0]*_:g.length,_e=R_(g,0,de,_,!0),Se=[];if(!_e||_e.next===_e.prev)return Se;if(ce&&(_e=function(Xe,at,bt,It){var Rt,Bt,jt,Ut=[];for(Rt=0,Bt=at.length;Rt<Bt;Rt++)(jt=R_(Xe,at[Rt]*It,Rt<Bt-1?at[Rt+1]*It:Xe.length,It,!1))===jt.next&&(jt.steiner=!0),Ut.push(Wa(jt));for(Ut.sort(F_),Rt=0;Rt<Ut.length;Rt++)hg(Ut[Rt],bt),bt=Za(bt,bt.next);return bt}(g,l,_e,_)),g.length>80*_){x=F=g[0],D=B=g[1];for(var Re=_;Re<de;Re+=_)(Z=g[Re])<x&&(x=Z),(X=g[Re+1])<D&&(D=X),Z>F&&(F=Z),X>B&&(B=X);re=0!==(re=Math.max(F-x,B-D))?1/re:0}return fd(_e,Se,_,x,D,re),Se}function R_(g,l,_,x,D){var F,B;if(D===$l(g,l,_,x)>0)for(F=l;F<_;F+=x)B=L_(F,g[F],g[F+1],B);else for(F=_-x;F>=l;F-=x)B=L_(F,g[F],g[F+1],B);return B&&$f(B,B.next)&&(Ih(B),B=B.next),B}function Za(g,l){if(!g)return g;l||(l=g);var _,x=g;do{if(_=!1,x.steiner||!$f(x,x.next)&&0!==Co(x.prev,x,x.next))x=x.next;else{if(Ih(x),(x=l=x.prev)===x.next)break;_=!0}}while(_||x!==l);return l}function fd(g,l,_,x,D,F,B){if(g){!B&&F&&function(ce,de,_e,Se){var Re=ce;do{null===Re.z&&(Re.z=pg(Re.x,Re.y,de,_e,Se)),Re.prevZ=Re.prev,Re.nextZ=Re.next,Re=Re.next}while(Re!==ce);Re.prevZ.nextZ=null,Re.prevZ=null,function(Xe){var at,bt,It,Rt,Bt,jt,Ut,mn,Cn=1;do{for(bt=Xe,Xe=null,Bt=null,jt=0;bt;){for(jt++,It=bt,Ut=0,at=0;at<Cn&&(Ut++,It=It.nextZ);at++);for(mn=Cn;Ut>0||mn>0&&It;)0!==Ut&&(0===mn||!It||bt.z<=It.z)?(Rt=bt,bt=bt.nextZ,Ut--):(Rt=It,It=It.nextZ,mn--),Bt?Bt.nextZ=Rt:Xe=Rt,Rt.prevZ=Bt,Bt=Rt;bt=It}Bt.nextZ=null,Cn*=2}while(jt>1)}(Re)}(g,x,D,F);for(var Z,X,re=g;g.prev!==g.next;)if(Z=g.prev,X=g.next,F?Wf(g,x,D,F):Zf(g))l.push(Z.i/_),l.push(g.i/_),l.push(X.i/_),Ih(g),g=X.next,re=X.next;else if((g=X)===re){B?1===B?fd(g=O_(Za(g),l,_),l,_,x,D,F,2):2===B&&Dh(g,l,_,x,D,F):fd(Za(g),l,_,x,D,F,1);break}}}function Zf(g){var l=g.prev,_=g,x=g.next;if(Co(l,_,x)>=0)return!1;for(var D=g.next.next;D!==g.prev;){if(Qc(l.x,l.y,_.x,_.y,x.x,x.y,D.x,D.y)&&Co(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function Wf(g,l,_,x){var D=g.prev,F=g,B=g.next;if(Co(D,F,B)>=0)return!1;for(var Z=D.x>F.x?D.x>B.x?D.x:B.x:F.x>B.x?F.x:B.x,X=D.y>F.y?D.y>B.y?D.y:B.y:F.y>B.y?F.y:B.y,re=pg(D.x<F.x?D.x<B.x?D.x:B.x:F.x<B.x?F.x:B.x,D.y<F.y?D.y<B.y?D.y:B.y:F.y<B.y?F.y:B.y,l,_,x),ce=pg(Z,X,l,_,x),de=g.prevZ,_e=g.nextZ;de&&de.z>=re&&_e&&_e.z<=ce;){if(de!==g.prev&&de!==g.next&&Qc(D.x,D.y,F.x,F.y,B.x,B.y,de.x,de.y)&&Co(de.prev,de,de.next)>=0||(de=de.prevZ,_e!==g.prev&&_e!==g.next&&Qc(D.x,D.y,F.x,F.y,B.x,B.y,_e.x,_e.y)&&Co(_e.prev,_e,_e.next)>=0))return!1;_e=_e.nextZ}for(;de&&de.z>=re;){if(de!==g.prev&&de!==g.next&&Qc(D.x,D.y,F.x,F.y,B.x,B.y,de.x,de.y)&&Co(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;_e&&_e.z<=ce;){if(_e!==g.prev&&_e!==g.next&&Qc(D.x,D.y,F.x,F.y,B.x,B.y,_e.x,_e.y)&&Co(_e.prev,_e,_e.next)>=0)return!1;_e=_e.nextZ}return!0}function O_(g,l,_){var x=g;do{var D=x.prev,F=x.next.next;!$f(D,F)&&cp(D,x,x.next,F)&&md(D,F)&&md(F,D)&&(l.push(D.i/_),l.push(x.i/_),l.push(F.i/_),Ih(x),Ih(x.next),x=g=F),x=x.next}while(x!==g);return Za(x)}function Dh(g,l,_,x,D,F){var B=g;do{for(var Z=B.next.next;Z!==B.prev;){if(B.i!==Z.i&&$a(B,Z)){var X=fg(B,Z);return B=Za(B,B.next),X=Za(X,X.next),fd(B,l,_,x,D,F),void fd(X,l,_,x,D,F)}Z=Z.next}B=B.next}while(B!==g)}function F_(g,l){return g.x-l.x}function hg(g,l){if(l=function(x,D){var F,B=D,Z=x.x,X=x.y,re=-1/0;do{if(X<=B.y&&X>=B.next.y&&B.next.y!==B.y){var ce=B.x+(X-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(ce<=Z&&ce>re){if(re=ce,ce===Z){if(X===B.y)return B;if(X===B.next.y)return B.next}F=B.x<B.next.x?B:B.next}}B=B.next}while(B!==D);if(!F)return null;if(Z===re)return F;var de,_e=F,Se=F.x,Re=F.y,Xe=1/0;B=F;do{Z>=B.x&&B.x>=Se&&Z!==B.x&&Qc(X<Re?Z:re,X,Se,Re,X<Re?re:Z,X,B.x,B.y)&&(de=Math.abs(X-B.y)/(Z-B.x),md(B,x)&&(de<Xe||de===Xe&&(B.x>F.x||B.x===F.x&&dg(F,B)))&&(F=B,Xe=de)),B=B.next}while(B!==_e);return F}(g,l)){var _=fg(l,g);Za(l,l.next),Za(_,_.next)}}function dg(g,l){return Co(g.prev,g,l.prev)<0&&Co(l.next,g,g.next)<0}function pg(g,l,_,x,D){return(g=1431655765&((g=858993459&((g=252645135&((g=16711935&((g=32767*(g-_)*D)|g<<8))|g<<4))|g<<2))|g<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-x)*D)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Wa(g){var l=g,_=g;do{(l.x<_.x||l.x===_.x&&l.y<_.y)&&(_=l),l=l.next}while(l!==g);return _}function Qc(g,l,_,x,D,F,B,Z){return(D-B)*(l-Z)-(g-B)*(F-Z)>=0&&(g-B)*(x-Z)-(_-B)*(l-Z)>=0&&(_-B)*(F-Z)-(D-B)*(x-Z)>=0}function $a(g,l){return g.next.i!==l.i&&g.prev.i!==l.i&&!function(_,x){var D=_;do{if(D.i!==_.i&&D.next.i!==_.i&&D.i!==x.i&&D.next.i!==x.i&&cp(D,D.next,_,x))return!0;D=D.next}while(D!==_);return!1}(g,l)&&(md(g,l)&&md(l,g)&&function(_,x){var D=_,F=!1,B=(_.x+x.x)/2,Z=(_.y+x.y)/2;do{D.y>Z!=D.next.y>Z&&D.next.y!==D.y&&B<(D.next.x-D.x)*(Z-D.y)/(D.next.y-D.y)+D.x&&(F=!F),D=D.next}while(D!==_);return F}(g,l)&&(Co(g.prev,g,l.prev)||Co(g,l.prev,l))||$f(g,l)&&Co(g.prev,g,g.next)>0&&Co(l.prev,l,l.next)>0)}function Co(g,l,_){return(l.y-g.y)*(_.x-l.x)-(l.x-g.x)*(_.y-l.y)}function $f(g,l){return g.x===l.x&&g.y===l.y}function cp(g,l,_,x){var D=nf(Co(g,l,_)),F=nf(Co(g,l,x)),B=nf(Co(_,x,g)),Z=nf(Co(_,x,l));return D!==F&&B!==Z||!(0!==D||!zu(g,_,l))||!(0!==F||!zu(g,x,l))||!(0!==B||!zu(_,g,x))||!(0!==Z||!zu(_,l,x))}function zu(g,l,_){return l.x<=Math.max(g.x,_.x)&&l.x>=Math.min(g.x,_.x)&&l.y<=Math.max(g.y,_.y)&&l.y>=Math.min(g.y,_.y)}function nf(g){return g>0?1:g<0?-1:0}function md(g,l){return Co(g.prev,g,g.next)<0?Co(g,l,g.next)>=0&&Co(g,g.prev,l)>=0:Co(g,l,g.prev)<0||Co(g,g.next,l)<0}function fg(g,l){var _=new Ph(g.i,g.x,g.y),x=new Ph(l.i,l.x,l.y),D=g.next,F=l.prev;return g.next=l,l.prev=g,_.next=D,D.prev=_,x.next=_,_.prev=x,F.next=x,x.prev=F,x}function L_(g,l,_,x){var D=new Ph(g,l,_);return x?(D.next=x.next,D.prev=x,x.next.prev=D,x.next=D):(D.prev=D,D.next=D),D}function Ih(g){g.next.prev=g.prev,g.prev.next=g.next,g.prevZ&&(g.prevZ.nextZ=g.nextZ),g.nextZ&&(g.nextZ.prevZ=g.prevZ)}function Ph(g,l,_){this.i=g,this.x=l,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $l(g,l,_,x){for(var D=0,F=l,B=_-x;F<_;F+=x)D+=(g[B]-g[F])*(g[F+1]+g[B+1]),B=F;return D}function Cx(g,l,_,x,D){N_(g,l,_||0,x||g.length-1,D||Sx)}function N_(g,l,_,x,D){for(;x>_;){if(x-_>600){var F=x-_+1,B=l-_+1,Z=Math.log(F),X=.5*Math.exp(2*Z/3),re=.5*Math.sqrt(Z*X*(F-X)/F)*(B-F/2<0?-1:1);N_(g,l,Math.max(_,Math.floor(l-B*X/F+re)),Math.min(x,Math.floor(l+(F-B)*X/F+re)),D)}var ce=g[l],de=_,_e=x;for(Vu(g,_,l),D(g[x],ce)>0&&Vu(g,_,x);de<_e;){for(Vu(g,de,_e),de++,_e--;D(g[de],ce)<0;)de++;for(;D(g[_e],ce)>0;)_e--}0===D(g[_],ce)?Vu(g,_,_e):Vu(g,++_e,x),_e<=l&&(_=_e+1),l<=_e&&(x=_e-1)}}function Vu(g,l,_){var x=g[l];g[l]=g[_],g[_]=x}function Sx(g,l){return g<l?-1:g>l?1:0}function Xa(g,l){const _=g.length;if(_<=1)return[g];const x=[];let D,F;for(let B=0;B<_;B++){const Z=ii(g[B]);0!==Z&&(g[B].area=Math.abs(Z),void 0===F&&(F=Z<0),F===Z<0?(D&&x.push(D),D=[g[B]]):D.push(g[B]))}if(D&&x.push(D),l>1)for(let B=0;B<x.length;B++)x[B].length<=l||(Cx(x[B],l,1,x[B].length-1,mg),x[B]=x[B].slice(0,l));return x}function mg(g,l){return l.area-g.area}function Jc(g,l,_){const x=_.patternDependencies;let D=!1;for(const F of l){const B=F.paint.get(`${g}-pattern`);B.isConstant()||(D=!0);const Z=B.constantOr(null);Z&&(D=!0,x[Z.to]=!0,x[Z.from]=!0)}return D}function rf(g,l,_,x,D){const F=D.patternDependencies;for(const B of l){const Z=B.paint.get(`${g}-pattern`).value;if("constant"!==Z.kind){let X=Z.evaluate({zoom:x-1},_,{},D.availableImages),re=Z.evaluate({zoom:x},_,{},D.availableImages),ce=Z.evaluate({zoom:x+1},_,{},D.availableImages);X=X&&X.name?X.name:X,re=re&&re.name?re.name:re,ce=ce&&ce.name?ce.name:ce,F[X]=!0,F[re]=!0,F[ce]=!0,_.patterns[B.id]={min:X,mid:re,max:ce}}}return _}lp.deviation=function(g,l,_,x){var D=l&&l.length,F=Math.abs($l(g,0,D?l[0]*_:g.length,_));if(D)for(var B=0,Z=l.length;B<Z;B++)F-=Math.abs($l(g,l[B]*_,B<Z-1?l[B+1]*_:g.length,_));var X=0;for(B=0;B<x.length;B+=3){var re=x[B]*_,ce=x[B+1]*_,de=x[B+2]*_;X+=Math.abs((g[re]-g[de])*(g[ce+1]-g[re+1])-(g[re]-g[ce])*(g[de+1]-g[re+1]))}return 0===F&&0===X?0:Math.abs((X-F)/F)},lp.flatten=function(g){for(var l=g[0][0].length,_={vertices:[],holes:[],dimensions:l},x=0,D=0;D<g.length;D++){for(var F=0;F<g[D].length;F++)for(var B=0;B<l;B++)_.vertices.push(g[D][F][B]);D>0&&_.holes.push(x+=g[D-1].length)}return _},kh.default=qf;class Kc{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(_=>_.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ci,this.indexArray=new Nr,this.indexArray2=new Ps,this.programConfigurations=new yc(l.layers,l.zoom),this.segments=new Cs,this.segments2=new Cs,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(l,_,x){this.hasPattern=Jc("fill",this.layers,_);const D=this.layers[0].layout.get("fill-sort-key"),F=[];for(const{feature:B,id:Z,index:X,sourceLayerIndex:re}of l){const ce=this.layers[0]._featureFilter.needGeometry,de=cd(B,ce);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),de,x))continue;const _e=D?D.evaluate(de,{},x,_.availableImages):void 0,Se={id:Z,properties:B.properties,type:B.type,sourceLayerIndex:re,index:X,geometry:ce?de.geometry:ld(B),patterns:{},sortKey:_e};F.push(Se)}D&&F.sort((B,Z)=>B.sortKey-Z.sortKey);for(const B of F){const{geometry:Z,index:X,sourceLayerIndex:re}=B;if(this.hasPattern){const ce=rf("fill",this.layers,B,this.zoom,_);this.patternFeatures.push(ce)}else this.addFeature(B,Z,X,x,{});_.featureIndex.insert(l[X].feature,Z,X,re,this.index)}}update(l,_,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,_,this.stateDependentLayers,x)}addFeatures(l,_,x){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,_,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Bu),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,_,x,D,F){for(const B of Xa(_,500)){let Z=0;for(const Se of B)Z+=Se.length;const X=this.segments.prepareSegment(Z,this.layoutVertexArray,this.indexArray),re=X.vertexLength,ce=[],de=[];for(const Se of B){if(0===Se.length)continue;Se!==B[0]&&de.push(ce.length/2);const Re=this.segments2.prepareSegment(Se.length,this.layoutVertexArray,this.indexArray2),Xe=Re.vertexLength;this.layoutVertexArray.emplaceBack(Se[0].x,Se[0].y),this.indexArray2.emplaceBack(Xe+Se.length-1,Xe),ce.push(Se[0].x),ce.push(Se[0].y);for(let at=1;at<Se.length;at++)this.layoutVertexArray.emplaceBack(Se[at].x,Se[at].y),this.indexArray2.emplaceBack(Xe+at-1,Xe+at),ce.push(Se[at].x),ce.push(Se[at].y);Re.vertexLength+=Se.length,Re.primitiveLength+=Se.length}const _e=kh(ce,de);for(let Se=0;Se<_e.length;Se+=3)this.indexArray.emplaceBack(re+_e[Se],re+_e[Se+1],re+_e[Se+2]);X.vertexLength+=Z,X.primitiveLength+=_e.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,F,D)}}qn("FillBucket",Kc,{omit:["layers","patternFeatures"]});const Rh=new ut({"fill-sort-key":new ht(y.layout_fill["fill-sort-key"])});var gg={paint:new ut({"fill-antialias":new rt(y.paint_fill["fill-antialias"]),"fill-opacity":new ht(y.paint_fill["fill-opacity"]),"fill-color":new ht(y.paint_fill["fill-color"]),"fill-outline-color":new ht(y.paint_fill["fill-outline-color"]),"fill-translate":new rt(y.paint_fill["fill-translate"]),"fill-translate-anchor":new rt(y.paint_fill["fill-translate-anchor"]),"fill-pattern":new Kt(y.paint_fill["fill-pattern"])}),layout:Rh};const B_=kn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),of=kn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:eu}=B_;var _g=wc;function wc(g,l,_,x,D){this.properties={},this.extent=_,this.type=0,this._pbf=g,this._geometry=-1,this._keys=x,this._values=D,g.readFields(up,this,l)}function up(g,l,_){1==g?l.id=_.readVarint():2==g?function(x,D){for(var F=x.readVarint()+x.pos;x.pos<F;){var B=D._keys[x.readVarint()],Z=D._values[x.readVarint()];D.properties[B]=Z}}(_,l):3==g?l.type=_.readVarint():4==g&&(l._geometry=_.pos)}function yg(g){for(var l,_,x=0,D=0,F=g.length,B=F-1;D<F;B=D++)x+=((_=g[B]).x-(l=g[D]).x)*(l.y+_.y);return x}wc.types=["Unknown","Point","LineString","Polygon"],wc.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var l,_=g.readVarint()+g.pos,x=1,D=0,F=0,B=0,Z=[];g.pos<_;){if(D<=0){var X=g.readVarint();x=7&X,D=X>>3}if(D--,1===x||2===x)F+=g.readSVarint(),B+=g.readSVarint(),1===x&&(l&&Z.push(l),l=[]),l.push(new Be(F,B));else{if(7!==x)throw new Error("unknown command "+x);l&&l.push(l[0].clone())}}return l&&Z.push(l),Z},wc.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var l=g.readVarint()+g.pos,_=1,x=0,D=0,F=0,B=1/0,Z=-1/0,X=1/0,re=-1/0;g.pos<l;){if(x<=0){var ce=g.readVarint();_=7&ce,x=ce>>3}if(x--,1===_||2===_)(D+=g.readSVarint())<B&&(B=D),D>Z&&(Z=D),(F+=g.readSVarint())<X&&(X=F),F>re&&(re=F);else if(7!==_)throw new Error("unknown command "+_)}return[B,X,Z,re]},wc.prototype.toGeoJSON=function(g,l,_){var x,D,F=this.extent*Math.pow(2,_),B=this.extent*g,Z=this.extent*l,X=this.loadGeometry(),re=wc.types[this.type];function ce(Se){for(var Re=0;Re<Se.length;Re++){var Xe=Se[Re];Se[Re]=[360*(Xe.x+B)/F-180,360/Math.PI*Math.atan(Math.exp((180-360*(Xe.y+Z)/F)*Math.PI/180))-90]}}switch(this.type){case 1:var de=[];for(x=0;x<X.length;x++)de[x]=X[x][0];ce(X=de);break;case 2:for(x=0;x<X.length;x++)ce(X[x]);break;case 3:for(X=function(Se){var Re=Se.length;if(Re<=1)return[Se];for(var Xe,at,bt=[],It=0;It<Re;It++){var Rt=yg(Se[It]);0!==Rt&&(void 0===at&&(at=Rt<0),at===Rt<0?(Xe&&bt.push(Xe),Xe=[Se[It]]):Xe.push(Se[It]))}return Xe&&bt.push(Xe),bt}(X),x=0;x<X.length;x++)for(D=0;D<X[x].length;D++)ce(X[x][D])}1===X.length?X=X[0]:re="Multi"+re;var _e={type:"Feature",geometry:{type:re,coordinates:X},properties:this.properties};return"id"in this&&(_e.id=this.id),_e};var vg=z_;function z_(g,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=g,this._keys=[],this._values=[],this._features=[],g.readFields(gd,this,l),this.length=this._features.length}function gd(g,l,_){15===g?l.version=_.readVarint():1===g?l.name=_.readString():5===g?l.extent=_.readVarint():2===g?l._features.push(_.pos):3===g?l._keys.push(_.readString()):4===g&&l._values.push(function(x){for(var D=null,F=x.readVarint()+x.pos;x.pos<F;){var B=x.readVarint()>>3;D=1===B?x.readString():2===B?x.readFloat():3===B?x.readDouble():4===B?x.readVarint64():5===B?x.readVarint():6===B?x.readSVarint():7===B?x.readBoolean():null}return D}(_))}function sf(g,l,_){if(3===g){var x=new vg(_,_.readVarint()+_.pos);x.length&&(l[x.name]=x)}}z_.prototype.feature=function(g){if(g<0||g>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[g];var l=this._pbf.readVarint()+this._pbf.pos;return new _g(this._pbf,l,this.extent,this._keys,this._values)};var Oh={VectorTile:function(g,l){this.layers=g.readFields(sf,{},l)},VectorTileFeature:_g,VectorTileLayer:vg};const V_=Oh.VectorTileFeature.types,Ev=Math.pow(2,13);function af(g,l,_,x,D,F,B,Z){g.emplaceBack((l<<1)+B,(_<<1)+F,(Math.floor(x*Ev)<<1)+D,Math.round(Z))}class Xf{constructor(){this.acc=new Be(0,0),this.polyCount=[]}startRing(l){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Be(l.x,l.y),this.max=new Be(l.x,l.y))}append(l,_){this.currentPolyCount.edges++,this.acc._add(l);let x=!!this.borders;const D=this.min,F=this.max;l.x<D.x?(D.x=l.x,x=!0):l.x>F.x&&(F.x=l.x,x=!0),l.y<D.y?(D.y=l.y,x=!0):l.y>F.y&&(F.y=l.y,x=!0),((0===l.x||l.x===Cr)&&l.x===_.x)!=((0===l.y||l.y===Cr)&&l.y===_.y)&&this.processBorderOverlap(l,_),x&&this.checkBorderIntersection(l,_)}checkBorderIntersection(l,_){_.x<0!=l.x<0&&this.addBorderIntersection(0,ui(_.y,l.y,(0-_.x)/(l.x-_.x))),_.x>Cr!=l.x>Cr&&this.addBorderIntersection(1,ui(_.y,l.y,(Cr-_.x)/(l.x-_.x))),_.y<0!=l.y<0&&this.addBorderIntersection(2,ui(_.x,l.x,(0-_.y)/(l.y-_.y))),_.y>Cr!=l.y>Cr&&this.addBorderIntersection(3,ui(_.x,l.x,(Cr-_.y)/(l.y-_.y)))}addBorderIntersection(l,_){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const x=this.borders[l];_<x[0]&&(x[0]=_),_>x[1]&&(x[1]=_)}processBorderOverlap(l,_){if(l.x===_.x){if(l.y===_.y)return;const x=0===l.x?0:1;this.addBorderIntersection(x,_.y),this.addBorderIntersection(x,l.y)}else{const x=0===l.y?2:3;this.addBorderIntersection(x,_.x),this.addBorderIntersection(x,l.x)}}centroid(){const l=this.polyCount.reduce((_,x)=>_+x.edges,0);return 0!==l?this.acc.div(l)._round():new Be(0,0)}span(){return new Be(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((l,_)=>l+ +(_[0]!==Number.MAX_VALUE),0)}}class Pa{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(_=>_.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new ar,this.centroidVertexArray=new jl,this.indexArray=new Nr,this.programConfigurations=new yc(l.layers,l.zoom),this.segments=new Cs,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.enableTerrain=l.enableTerrain}populate(l,_,x){this.features=[],this.hasPattern=Jc("fill-extrusion",this.layers,_),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(D){const F=Math.exp(Math.PI*(1-D.y/(1<<D.z)*2));return 80150034*F/(F*F+1)/Cr/(1<<D.z)}(x);for(const{feature:D,id:F,index:B,sourceLayerIndex:Z}of l){const X=this.layers[0]._featureFilter.needGeometry,re=cd(D,X);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),re,x))continue;const ce={id:F,sourceLayerIndex:Z,index:B,geometry:X?re.geometry:ld(D),properties:D.properties,type:D.type,patterns:{}},de=this.layoutVertexArray.length;this.hasPattern?this.features.push(rf("fill-extrusion",this.layers,ce,this.zoom,_)):this.addFeature(ce,ce.geometry,B,x,{}),_.featureIndex.insert(D,ce.geometry,B,Z,this.index,de)}this.sortBorders()}addFeatures(l,_,x){for(const D of this.features){const{geometry:F}=D;this.addFeature(D,F,D.index,_,x)}this.sortBorders()}update(l,_,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,_,this.stateDependentLayers,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,eu),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}uploadCentroid(l){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,of.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,_,x,D,F){const B=this.enableTerrain?new Xf:null;for(const X of Xa(_,500)){let re=0,ce=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===X.length||(Z=X[0]).every(Xe=>Xe.x<=0)||Z.every(Xe=>Xe.x>=Cr)||Z.every(Xe=>Xe.y<=0)||Z.every(Xe=>Xe.y>=Cr))continue;for(let Xe=0;Xe<X.length;Xe++){const at=X[Xe];if(0===at.length)continue;re+=at.length;let bt=0;B&&B.startRing(at[0]);for(let It=0;It<at.length;It++){const Rt=at[It];if(It>=1){const Bt=at[It-1];if(!Qf(Rt,Bt)){B&&B.append(Rt,Bt),ce.vertexLength+4>Cs.MAX_VERTEX_ARRAY_LENGTH&&(ce=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const jt=Rt.sub(Bt)._perp(),Ut=jt.x/(Math.abs(jt.x)+Math.abs(jt.y)),mn=jt.y>0?1:0,Cn=Bt.dist(Rt);bt+Cn>32768&&(bt=0),af(this.layoutVertexArray,Rt.x,Rt.y,Ut,mn,0,0,bt),af(this.layoutVertexArray,Rt.x,Rt.y,Ut,mn,0,1,bt),bt+=Cn,af(this.layoutVertexArray,Bt.x,Bt.y,Ut,mn,0,0,bt),af(this.layoutVertexArray,Bt.x,Bt.y,Ut,mn,0,1,bt);const vn=ce.vertexLength;this.indexArray.emplaceBack(vn,vn+2,vn+1),this.indexArray.emplaceBack(vn+1,vn+2,vn+3),ce.vertexLength+=4,ce.primitiveLength+=2}}}}if(ce.vertexLength+re>Cs.MAX_VERTEX_ARRAY_LENGTH&&(ce=this.segments.prepareSegment(re,this.layoutVertexArray,this.indexArray)),"Polygon"!==V_[l.type])continue;const de=[],_e=[],Se=ce.vertexLength;for(let Xe=0;Xe<X.length;Xe++){const at=X[Xe];if(0!==at.length){at!==X[0]&&_e.push(de.length/2);for(let bt=0;bt<at.length;bt++){const It=at[bt];af(this.layoutVertexArray,It.x,It.y,0,0,1,1,0),de.push(It.x),de.push(It.y),B&&B.currentPolyCount.top++}}}const Re=kh(de,_e);for(let Xe=0;Xe<Re.length;Xe+=3)this.indexArray.emplaceBack(Se+Re[Xe],Se+Re[Xe+2],Se+Re[Xe+1]);ce.primitiveLength+=Re.length/3,ce.vertexLength+=re}var Z;if(B&&B.polyCount.length>0){if(B.borders){B.vertexArrayOffset=this.centroidVertexArray.length;const X=B.borders,re=this.featuresOnBorder.push(B)-1;for(let ce=0;ce<4;ce++)X[ce][0]!==Number.MAX_VALUE&&this.borders[ce].push(re)}this.encodeCentroid(B.borders?void 0:B.centroid(),B)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,F,D)}sortBorders(){for(let l=0;l<4;l++)this.borders[l].sort((_,x)=>this.featuresOnBorder[_].borders[l][0]-this.featuresOnBorder[x].borders[l][0])}encodeCentroid(l,_,x=!0){let D,F;if(l)if(0!==l.y){const Z=_.span()._mult(this.tileToMeter);D=(Math.max(l.x,1)<<3)+Math.min(7,Math.round(Z.x/10)),F=(Math.max(l.y,1)<<3)+Math.min(7,Math.round(Z.y/10))}else D=Math.ceil(7*(l.x+450)),F=0;else D=0,F=+x;let B=x?this.centroidVertexArray.length:_.vertexArrayOffset;for(const Z of _.polyCount){x&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*Z.edges+Z.top);for(let X=0;X<2*Z.edges;X++)this.centroidVertexArray.emplace(B++,0,F),this.centroidVertexArray.emplace(B++,D,F);for(let X=0;X<Z.top;X++)this.centroidVertexArray.emplace(B++,D,F)}}}function Qf(g,l){return g.x===l.x&&(g.x<0||g.x>Cr)||g.y===l.y&&(g.y<0||g.y>Cr)}qn("FillExtrusionBucket",Pa,{omit:["layers","features"]}),qn("PartMetadata",Xf);var E={paint:new ut({"fill-extrusion-opacity":new rt(y["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ht(y["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new rt(y["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new rt(y["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Kt(y["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ht(y["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ht(y["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new rt(y["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function S(g,l){return g.x*l.x+g.y*l.y}function I(g,l){if(1===g.length){let _=0;const x=l[_++];let D;for(;!D||x.equals(D);)if(D=l[_++],!D)return 1/0;for(;_<l.length;_++){const F=l[_],B=g[0],Z=D.sub(x),X=F.sub(x),re=B.sub(x),ce=S(Z,Z),de=S(Z,X),_e=S(X,X),Se=S(re,Z),Re=S(re,X),Xe=ce*_e-de*de,at=(_e*Se-de*Re)/Xe,bt=(ce*Re-de*Se)/Xe,It=x.z*(1-at-bt)+D.z*at+F.z*bt;if(isFinite(It))return It}return 1/0}{let _=1/0;for(const x of l)_=Math.min(_,x.z);return _}}function V(g){const l=new Be(g[0],g[1]);return l.z=g[2],l}function Q(g,l,_,x,D,F,B,Z){const X=B*D.getElevationAt(g,l,!0,!0),re=0!==F[0],ce=re?0===F[1]?B*(F[0]/7-450):B*function(de,_e,Se){const Re=Math.floor(_e[0]/8),Xe=Math.floor(_e[1]/8),at=10*(_e[0]-8*Re),bt=10*(_e[1]-8*Xe),It=de.getElevationAt(Re,Xe,!0,!0),Rt=de.getMeterToDEM(Se),Bt=Math.floor(.5*(at*Rt-1)),jt=Math.floor(.5*(bt*Rt-1)),Ut=de.tileCoordToPixel(Re,Xe),mn=2*Bt+1,Cn=2*jt+1,vn=(Fi=mn,ti=Cn,[(Mi=de).getElevationAtPixel(gi=Ut.x-Bt,Xi=Ut.y-jt,!0),Mi.getElevationAtPixel(gi+ti,Xi,!0),Mi.getElevationAtPixel(gi,Xi+ti,!0),Mi.getElevationAtPixel(gi+Fi,Xi+ti,!0)]),Tn=Math.abs(vn[0]-vn[1]),ln=Math.abs(vn[2]-vn[3]),pn=Math.abs(vn[0]-vn[2])+Math.abs(vn[1]-vn[3]),In=Math.min(.25,.5*Rt*(Tn+ln)/mn),on=Math.min(.25,.5*Rt*pn/Cn);var Mi,gi,Xi,Fi,ti;return It+Math.max(In*at,on*bt)}(D,F,Z):X;return{base:X+(0===_)?-1:_,top:re?Math.max(ce+x,X+_+2):X+x}}const le=kn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:ye}=le,Oe=kn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ye}=Oe,st=Oh.VectorTileFeature.types,pt=Math.cos(Math.PI/180*37.5);class Wt{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(_=>_.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(_=>{this.gradients[_.id]={}}),this.layoutVertexArray=new mr,this.layoutVertexArray2=new Lr,this.indexArray=new Nr,this.programConfigurations=new yc(l.layers,l.zoom),this.segments=new Cs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(l,_,x){this.hasPattern=Jc("line",this.layers,_);const D=this.layers[0].layout.get("line-sort-key"),F=[];for(const{feature:re,id:ce,index:de,sourceLayerIndex:_e}of l){const Se=this.layers[0]._featureFilter.needGeometry,Re=cd(re,Se);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),Re,x))continue;const Xe=D?D.evaluate(Re,{},x):void 0,at={id:ce,properties:re.properties,type:re.type,sourceLayerIndex:_e,index:de,geometry:Se?Re.geometry:ld(re),patterns:{},sortKey:Xe};F.push(at)}D&&F.sort((re,ce)=>re.sortKey-ce.sortKey);const{lineAtlas:B,featureIndex:Z}=_,X=this.addConstantDashes(B);for(const re of F){const{geometry:ce,index:de,sourceLayerIndex:_e}=re;if(X&&this.addFeatureDashes(re,B),this.hasPattern){const Se=rf("line",this.layers,re,this.zoom,_);this.patternFeatures.push(Se)}else this.addFeature(re,ce,de,x,B.positions);Z.insert(l[de].feature,ce,de,_e,this.index)}}addConstantDashes(l){let _=!1;for(const x of this.layers){const D=x.paint.get("line-dasharray").value,F=x.layout.get("line-cap").value;if("constant"!==D.kind||"constant"!==F.kind)_=!0;else{const B=F.value,Z=D.value;if(!Z)continue;l.addDash(Z.from,B),l.addDash(Z.to,B),Z.other&&l.addDash(Z.other,B)}}return _}addFeatureDashes(l,_){const x=this.zoom;for(const D of this.layers){const F=D.paint.get("line-dasharray").value,B=D.layout.get("line-cap").value;if("constant"===F.kind&&"constant"===B.kind)continue;let Z,X,re,ce,de,_e;if("constant"===F.kind){const at=F.value;if(!at)continue;Z=at.other||at.to,X=at.to,re=at.from}else Z=F.evaluate({zoom:x-1},l),X=F.evaluate({zoom:x},l),re=F.evaluate({zoom:x+1},l);"constant"===B.kind?ce=de=_e=B.value:(ce=B.evaluate({zoom:x-1},l),de=B.evaluate({zoom:x},l),_e=B.evaluate({zoom:x+1},l)),_.addDash(Z,ce),_.addDash(X,de),_.addDash(re,_e);const Se=_.getKey(Z,ce),Re=_.getKey(X,de),Xe=_.getKey(re,_e);l.patterns[D.id]={min:Se,mid:Re,max:Xe}}}update(l,_,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,_,this.stateDependentLayers,x)}addFeatures(l,_,x){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,_,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Ye)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ye),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&l.properties.hasOwnProperty("mapbox_clip_start")&&l.properties.hasOwnProperty("mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,_,x,D,F){const B=this.layers[0].layout,Z=B.get("line-join").evaluate(l,{}),X=B.get("line-cap").evaluate(l,{}),re=B.get("line-miter-limit"),ce=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const de of _)this.addLine(de,l,Z,X,re,ce);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,F,D)}addLine(l,_,x,D,F,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let bt=0;bt<l.length-1;bt++)this.totalDistance+=l[bt].dist(l[bt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Z="Polygon"===st[_.type];let X=l.length;for(;X>=2&&l[X-1].equals(l[X-2]);)X--;let re=0;for(;re<X-1&&l[re].equals(l[re+1]);)re++;if(X<(Z?3:2))return;"bevel"===x&&(F=1.05);const ce=this.overscaling<=16?122880/(512*this.overscaling):0,de=this.segments.prepareSegment(10*X,this.layoutVertexArray,this.indexArray);let _e,Se,Re,Xe,at;this.e1=this.e2=-1,Z&&(_e=l[X-2],at=l[re].sub(_e)._unit()._perp());for(let bt=re;bt<X;bt++){if(Re=bt===X-1?Z?l[re+1]:void 0:l[bt+1],Re&&l[bt].equals(Re))continue;at&&(Xe=at),_e&&(Se=_e),_e=l[bt],at=Re?Re.sub(_e)._unit()._perp():Xe,Xe=Xe||at;let It=Xe.add(at);0===It.x&&0===It.y||It._unit();const Rt=Xe.x*at.x+Xe.y*at.y,Bt=It.x*at.x+It.y*at.y,jt=0!==Bt?1/Bt:1/0,Ut=2*Math.sqrt(2-2*Bt),mn=Bt<pt&&Se&&Re,Cn=Xe.x*at.y-Xe.y*at.x>0;if(mn&&bt>re){const ln=_e.dist(Se);if(ln>2*ce){const pn=_e.sub(_e.sub(Se)._mult(ce/ln)._round());this.updateDistance(Se,pn),this.addCurrentVertex(pn,Xe,0,0,de),Se=pn}}const vn=Se&&Re;let Tn=vn?x:Z?"butt":D;if(vn&&"round"===Tn&&(jt<B?Tn="miter":jt<=2&&(Tn="fakeround")),"miter"===Tn&&jt>F&&(Tn="bevel"),"bevel"===Tn&&(jt>2&&(Tn="flipbevel"),jt<F&&(Tn="miter")),Se&&this.updateDistance(Se,_e),"miter"===Tn)It._mult(jt),this.addCurrentVertex(_e,It,0,0,de);else if("flipbevel"===Tn){if(jt>100)It=at.mult(-1);else{const ln=jt*Xe.add(at).mag()/Xe.sub(at).mag();It._perp()._mult(ln*(Cn?-1:1))}this.addCurrentVertex(_e,It,0,0,de),this.addCurrentVertex(_e,It.mult(-1),0,0,de)}else if("bevel"===Tn||"fakeround"===Tn){const ln=-Math.sqrt(jt*jt-1),pn=Cn?ln:0,In=Cn?0:ln;if(Se&&this.addCurrentVertex(_e,Xe,pn,In,de),"fakeround"===Tn){const on=Math.round(180*Ut/Math.PI/20);for(let Mi=1;Mi<on;Mi++){let gi=Mi/on;if(.5!==gi){const Fi=gi-.5;gi+=gi*Fi*(gi-1)*((1.0904+Rt*(Rt*(3.55645-1.43519*Rt)-3.2452))*Fi*Fi+(.848013+Rt*(.215638*Rt-1.06021)))}const Xi=at.sub(Xe)._mult(gi)._add(Xe)._unit()._mult(Cn?-1:1);this.addHalfVertex(_e,Xi.x,Xi.y,!1,Cn,0,de)}}Re&&this.addCurrentVertex(_e,at,-pn,-In,de)}else if("butt"===Tn)this.addCurrentVertex(_e,It,0,0,de);else if("square"===Tn){const ln=Se?1:-1;Se||this.addCurrentVertex(_e,It,ln,ln,de),this.addCurrentVertex(_e,It,0,0,de),Se&&this.addCurrentVertex(_e,It,ln,ln,de)}else"round"===Tn&&(Se&&(this.addCurrentVertex(_e,Xe,0,0,de),this.addCurrentVertex(_e,Xe,1,1,de,!0)),Re&&(this.addCurrentVertex(_e,at,-1,-1,de,!0),this.addCurrentVertex(_e,at,0,0,de)));if(mn&&bt<X-1){const ln=_e.dist(Re);if(ln>2*ce){const pn=_e.add(Re.sub(_e)._mult(ce/ln)._round());this.updateDistance(_e,pn),this.addCurrentVertex(pn,at,0,0,de),_e=pn}}}}addCurrentVertex(l,_,x,D,F,B=!1){const Z=_.y*D-_.x,X=-_.y-_.x*D;this.addHalfVertex(l,_.x+_.y*x,_.y-_.x*x,B,!1,x,F),this.addHalfVertex(l,Z,X,B,!0,-D,F)}addHalfVertex({x:l,y:_},x,D,F,B,Z,X){this.layoutVertexArray.emplaceBack((l<<1)+(F?1:0),(_<<1)+(B?1:0),Math.round(63*x)+128,Math.round(63*D)+128,1+(0===Z?0:Z<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const re=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,re),X.primitiveLength++),B?this.e2=re:this.e1=re}updateScaledDistance(){if(this.lineClips){const l=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=l*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(l,_){this.distance+=l.dist(_),this.updateScaledDistance()}}qn("LineBucket",Wt,{omit:["layers","patternFeatures"]});const cn=new ut({"line-cap":new ht(y.layout_line["line-cap"]),"line-join":new ht(y.layout_line["line-join"]),"line-miter-limit":new rt(y.layout_line["line-miter-limit"]),"line-round-limit":new rt(y.layout_line["line-round-limit"]),"line-sort-key":new ht(y.layout_line["line-sort-key"])});var Mn={paint:new ut({"line-opacity":new ht(y.paint_line["line-opacity"]),"line-color":new ht(y.paint_line["line-color"]),"line-translate":new rt(y.paint_line["line-translate"]),"line-translate-anchor":new rt(y.paint_line["line-translate-anchor"]),"line-width":new ht(y.paint_line["line-width"]),"line-gap-width":new ht(y.paint_line["line-gap-width"]),"line-offset":new ht(y.paint_line["line-offset"]),"line-blur":new ht(y.paint_line["line-blur"]),"line-dasharray":new Kt(y.paint_line["line-dasharray"]),"line-pattern":new Kt(y.paint_line["line-pattern"]),"line-gradient":new un(y.paint_line["line-gradient"])}),layout:cn};const Wn=new class extends ht{possiblyEvaluate(g,l){return l=new Pe(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(g,l)}evaluate(g,l,_,x){return l=Di({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(g,l,_,x)}}(Mn.paint.properties["line-width"].specification);function Pi(g,l){return l>0?l+2*g:g}Wn.useIntegerZoom=!0;const yi=kn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Wi=kn([{name:"a_projected_pos",components:3,type:"Float32"}],4);kn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Qo=kn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ml=kn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);kn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const _d=kn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lf=kn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);kn([{name:"triangle",components:3,type:"Uint16"}]),kn([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),kn([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),kn([{type:"Float32",name:"offsetX"}]),kn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Qa=128;function Tv(g,l){const{expression:_}=l;if("constant"===_.kind)return{kind:"constant",layoutSize:_.evaluate(new Pe(g+1))};if("source"===_.kind)return{kind:"source"};{const{zoomStops:x,interpolationType:D}=_;let F=0;for(;F<x.length&&x[F]<=g;)F++;F=Math.max(0,F-1);let B=F;for(;B<x.length&&x[B]<g+1;)B++;B=Math.min(x.length-1,B);const Z=x[F],X=x[B];return"composite"===_.kind?{kind:"composite",minZoom:Z,maxZoom:X,interpolationType:D}:{kind:"camera",minZoom:Z,maxZoom:X,minSize:_.evaluate(new Pe(Z)),maxSize:_.evaluate(new Pe(X)),interpolationType:D}}}function hp(g,{uSize:l,uSizeT:_},{lowerSize:x,upperSize:D}){return"source"===g.kind?x/Qa:"composite"===g.kind?ui(x/Qa,D/Qa,_):l}function Jf(g,l){let _=0,x=0;if("constant"===g.kind)x=g.layoutSize;else if("source"!==g.kind){const{interpolationType:D,minZoom:F,maxZoom:B}=g,Z=D?Mt(ra.interpolationFactor(D,l,F,B),0,1):0;"camera"===g.kind?x=ui(g.minSize,g.maxSize,Z):_=Z}return{uSizeT:_,uSize:x}}var bg=Object.freeze({__proto__:null,getSizeData:Tv,evaluateSizeForFeature:hp,evaluateSizeForZoom:Jf,SIZE_PACK_FACTOR:Qa});function Ex(g,l,_){return g.sections.forEach(x=>{x.text=function(D,F,B){const Z=F.layout.get("text-transform").evaluate(B,{});return"uppercase"===Z?D=D.toLocaleUpperCase():"lowercase"===Z&&(D=D.toLocaleLowerCase()),Ae.applyArabicShaping&&(D=Ae.applyArabicShaping(D)),D}(x.text,l,_)}),g}const cf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Kf(g){return"\ufe36"===g||"\ufe48"===g||"\ufe38"===g||"\ufe44"===g||"\ufe42"===g||"\ufe3e"===g||"\ufe3c"===g||"\ufe3a"===g||"\ufe18"===g||"\ufe40"===g||"\ufe10"===g||"\ufe13"===g||"\ufe14"===g||"\uff40"===g||"\uffe3"===g||"\ufe11"===g||"\ufe12"===g}function eE(g){return"\ufe35"===g||"\ufe47"===g||"\ufe37"===g||"\ufe43"===g||"\ufe41"===g||"\ufe3d"===g||"\ufe3b"===g||"\ufe39"===g||"\ufe17"===g||"\ufe3f"===g}var Mv=function(g,l,_,x,D){var F,B,Z=8*D-x-1,X=(1<<Z)-1,re=X>>1,ce=-7,de=_?D-1:0,_e=_?-1:1,Se=g[l+de];for(de+=_e,F=Se&(1<<-ce)-1,Se>>=-ce,ce+=Z;ce>0;F=256*F+g[l+de],de+=_e,ce-=8);for(B=F&(1<<-ce)-1,F>>=-ce,ce+=x;ce>0;B=256*B+g[l+de],de+=_e,ce-=8);if(0===F)F=1-re;else{if(F===X)return B?NaN:1/0*(Se?-1:1);B+=Math.pow(2,x),F-=re}return(Se?-1:1)*B*Math.pow(2,F-x)},Tx=function(g,l,_,x,D,F){var B,Z,X,re=8*F-D-1,ce=(1<<re)-1,de=ce>>1,_e=23===D?Math.pow(2,-24)-Math.pow(2,-77):0,Se=x?0:F-1,Re=x?1:-1,Xe=l<0||0===l&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(Z=isNaN(l)?1:0,B=ce):(B=Math.floor(Math.log(l)/Math.LN2),l*(X=Math.pow(2,-B))<1&&(B--,X*=2),(l+=B+de>=1?_e/X:_e*Math.pow(2,1-de))*X>=2&&(B++,X/=2),B+de>=ce?(Z=0,B=ce):B+de>=1?(Z=(l*X-1)*Math.pow(2,D),B+=de):(Z=l*Math.pow(2,de-1)*Math.pow(2,D),B=0));D>=8;g[_+Se]=255&Z,Se+=Re,Z/=256,D-=8);for(B=B<<D|Z,re+=D;re>0;g[_+Se]=255&B,Se+=Re,B/=256,re-=8);g[_+Se-Re]|=128*Xe},em=Kr;function Kr(g){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(g)?g:new Uint8Array(g||0),this.pos=0,this.type=0,this.length=this.buf.length}Kr.Varint=0,Kr.Fixed64=1,Kr.Bytes=2,Kr.Fixed32=5;var Av=4294967296,tu=1/Av,Mx="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Fh(g){return g.type===Kr.Bytes?g.readVarint()+g.pos:g.pos+1}function Ax(g,l,_){var x=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));_.realloc(x);for(var D=_.pos-1;D>=g;D--)_.buf[D+x]=_.buf[D]}function Nw(g,l){for(var _=0;_<g.length;_++)l.writeVarint(g[_])}function Bw(g,l){for(var _=0;_<g.length;_++)l.writeSVarint(g[_])}function kx(g,l){for(var _=0;_<g.length;_++)l.writeFloat(g[_])}function zw(g,l){for(var _=0;_<g.length;_++)l.writeDouble(g[_])}function Dx(g,l){for(var _=0;_<g.length;_++)l.writeBoolean(g[_])}function tE(g,l){for(var _=0;_<g.length;_++)l.writeFixed32(g[_])}function $i(g,l){for(var _=0;_<g.length;_++)l.writeSFixed32(g[_])}function kv(g,l){for(var _=0;_<g.length;_++)l.writeFixed64(g[_])}function Dv(g,l){for(var _=0;_<g.length;_++)l.writeSFixed64(g[_])}function dp(g,l){return(g[l]|g[l+1]<<8|g[l+2]<<16)+16777216*g[l+3]}function Ja(g,l,_){g[_]=l,g[_+1]=l>>>8,g[_+2]=l>>>16,g[_+3]=l>>>24}function Iv(g,l){return(g[l]|g[l+1]<<8|g[l+2]<<16)+(g[l+3]<<24)}function Vw(g,l,_){l.glyphs=[],1===g&&_.readMessage(Pv,l)}function Pv(g,l,_){if(3===g){const{id:x,bitmap:D,width:F,height:B,left:Z,top:X,advance:re}=_.readMessage(yd,{});l.glyphs.push({id:x,bitmap:new Ah({width:F+6,height:B+6},D),metrics:{width:F,height:B,left:Z,top:X,advance:re}})}else 4===g?l.ascender=_.readSVarint():5===g&&(l.descender=_.readSVarint())}function yd(g,l,_){1===g?l.id=_.readVarint():2===g?l.bitmap=_.readBytes():3===g?l.width=_.readVarint():4===g?l.height=_.readVarint():5===g?l.left=_.readSVarint():6===g?l.top=_.readSVarint():7===g&&(l.advance=_.readVarint())}function hf(g){let l=0,_=0;for(const B of g)l+=B.w*B.h,_=Math.max(_,B.w);g.sort((B,Z)=>Z.h-B.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),_),h:1/0}];let D=0,F=0;for(const B of g)for(let Z=x.length-1;Z>=0;Z--){const X=x[Z];if(!(B.w>X.w||B.h>X.h)){if(B.x=X.x,B.y=X.y,F=Math.max(F,B.y+B.h),D=Math.max(D,B.x+B.w),B.w===X.w&&B.h===X.h){const re=x.pop();Z<x.length&&(x[Z]=re)}else B.h===X.h?(X.x+=B.w,X.w-=B.w):B.w===X.w?(X.y+=B.h,X.h-=B.h):(x.push({x:X.x+B.w,y:X.y,w:X.w-B.w,h:B.h}),X.y+=B.h,X.h-=B.h);break}}return{w:D,h:F,fill:l/(D*F)||0}}Kr.prototype={destroy:function(){this.buf=null},readFields:function(g,l,_){for(_=_||this.length;this.pos<_;){var x=this.readVarint(),D=x>>3,F=this.pos;this.type=7&x,g(D,l,this),this.pos===F&&this.skip(x)}return l},readMessage:function(g,l){return this.readFields(g,l,this.readVarint()+this.pos)},readFixed32:function(){var g=dp(this.buf,this.pos);return this.pos+=4,g},readSFixed32:function(){var g=Iv(this.buf,this.pos);return this.pos+=4,g},readFixed64:function(){var g=dp(this.buf,this.pos)+dp(this.buf,this.pos+4)*Av;return this.pos+=8,g},readSFixed64:function(){var g=dp(this.buf,this.pos)+Iv(this.buf,this.pos+4)*Av;return this.pos+=8,g},readFloat:function(){var g=Mv(this.buf,this.pos,!0,23,4);return this.pos+=4,g},readDouble:function(){var g=Mv(this.buf,this.pos,!0,52,8);return this.pos+=8,g},readVarint:function(g){var l,_,x=this.buf;return l=127&(_=x[this.pos++]),_<128?l:(l|=(127&(_=x[this.pos++]))<<7,_<128?l:(l|=(127&(_=x[this.pos++]))<<14,_<128?l:(l|=(127&(_=x[this.pos++]))<<21,_<128?l:function(D,F,B){var Z,X,re=B.buf;if(Z=(112&(X=re[B.pos++]))>>4,X<128||(Z|=(127&(X=re[B.pos++]))<<3,X<128)||(Z|=(127&(X=re[B.pos++]))<<10,X<128)||(Z|=(127&(X=re[B.pos++]))<<17,X<128)||(Z|=(127&(X=re[B.pos++]))<<24,X<128)||(Z|=(1&(X=re[B.pos++]))<<31,X<128))return function(g,l,_){return _?4294967296*l+(g>>>0):4294967296*(l>>>0)+(g>>>0)}(D,Z,F);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(_=x[this.pos]))<<28,g,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var g=this.readVarint();return g%2==1?(g+1)/-2:g/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var g=this.readVarint()+this.pos,l=this.pos;return this.pos=g,g-l>=12&&Mx?Mx.decode(this.buf.subarray(l,g)):function(_,x,D){for(var F="",B=x;B<D;){var Z,X,re,ce=_[B],de=null,_e=ce>239?4:ce>223?3:ce>191?2:1;if(B+_e>D)break;1===_e?ce<128&&(de=ce):2===_e?128==(192&(Z=_[B+1]))&&(de=(31&ce)<<6|63&Z)<=127&&(de=null):3===_e?(X=_[B+2],128==(192&(Z=_[B+1]))&&128==(192&X)&&((de=(15&ce)<<12|(63&Z)<<6|63&X)<=2047||de>=55296&&de<=57343)&&(de=null)):4===_e&&(X=_[B+2],re=_[B+3],128==(192&(Z=_[B+1]))&&128==(192&X)&&128==(192&re)&&((de=(15&ce)<<18|(63&Z)<<12|(63&X)<<6|63&re)<=65535||de>=1114112)&&(de=null)),null===de?(de=65533,_e=1):de>65535&&(de-=65536,F+=String.fromCharCode(de>>>10&1023|55296),de=56320|1023&de),F+=String.fromCharCode(de),B+=_e}return F}(this.buf,l,g)},readBytes:function(){var g=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,g);return this.pos=g,l},readPackedVarint:function(g,l){if(this.type!==Kr.Bytes)return g.push(this.readVarint(l));var _=Fh(this);for(g=g||[];this.pos<_;)g.push(this.readVarint(l));return g},readPackedSVarint:function(g){if(this.type!==Kr.Bytes)return g.push(this.readSVarint());var l=Fh(this);for(g=g||[];this.pos<l;)g.push(this.readSVarint());return g},readPackedBoolean:function(g){if(this.type!==Kr.Bytes)return g.push(this.readBoolean());var l=Fh(this);for(g=g||[];this.pos<l;)g.push(this.readBoolean());return g},readPackedFloat:function(g){if(this.type!==Kr.Bytes)return g.push(this.readFloat());var l=Fh(this);for(g=g||[];this.pos<l;)g.push(this.readFloat());return g},readPackedDouble:function(g){if(this.type!==Kr.Bytes)return g.push(this.readDouble());var l=Fh(this);for(g=g||[];this.pos<l;)g.push(this.readDouble());return g},readPackedFixed32:function(g){if(this.type!==Kr.Bytes)return g.push(this.readFixed32());var l=Fh(this);for(g=g||[];this.pos<l;)g.push(this.readFixed32());return g},readPackedSFixed32:function(g){if(this.type!==Kr.Bytes)return g.push(this.readSFixed32());var l=Fh(this);for(g=g||[];this.pos<l;)g.push(this.readSFixed32());return g},readPackedFixed64:function(g){if(this.type!==Kr.Bytes)return g.push(this.readFixed64());var l=Fh(this);for(g=g||[];this.pos<l;)g.push(this.readFixed64());return g},readPackedSFixed64:function(g){if(this.type!==Kr.Bytes)return g.push(this.readSFixed64());var l=Fh(this);for(g=g||[];this.pos<l;)g.push(this.readSFixed64());return g},skip:function(g){var l=7&g;if(l===Kr.Varint)for(;this.buf[this.pos++]>127;);else if(l===Kr.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Kr.Fixed32)this.pos+=4;else{if(l!==Kr.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(g,l){this.writeVarint(g<<3|l)},realloc:function(g){for(var l=this.length||16;l<this.pos+g;)l*=2;if(l!==this.length){var _=new Uint8Array(l);_.set(this.buf),this.buf=_,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(g){this.realloc(4),Ja(this.buf,g,this.pos),this.pos+=4},writeSFixed32:function(g){this.realloc(4),Ja(this.buf,g,this.pos),this.pos+=4},writeFixed64:function(g){this.realloc(8),Ja(this.buf,-1&g,this.pos),Ja(this.buf,Math.floor(g*tu),this.pos+4),this.pos+=8},writeSFixed64:function(g){this.realloc(8),Ja(this.buf,-1&g,this.pos),Ja(this.buf,Math.floor(g*tu),this.pos+4),this.pos+=8},writeVarint:function(g){(g=+g||0)>268435455||g<0?function(l,_){var x,D,F,Z;if(l>=0?(x=l%4294967296|0,D=l/4294967296|0):(D=~(-l/4294967296),4294967295^(x=~(-l%4294967296))?x=x+1|0:(x=0,D=D+1|0)),l>=0x10000000000000000||l<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),F=x,(Z=_).buf[Z.pos++]=127&F|128,F>>>=7,Z.buf[Z.pos++]=127&F|128,F>>>=7,Z.buf[Z.pos++]=127&F|128,F>>>=7,Z.buf[Z.pos++]=127&F|128,Z.buf[Z.pos]=127&(F>>>=7),function(F,B){var Z=(7&F)<<4;B.buf[B.pos++]|=Z|((F>>>=3)?128:0),F&&(B.buf[B.pos++]=127&F|((F>>>=7)?128:0),F&&(B.buf[B.pos++]=127&F|((F>>>=7)?128:0),F&&(B.buf[B.pos++]=127&F|((F>>>=7)?128:0),F&&(B.buf[B.pos++]=127&F|((F>>>=7)?128:0),F&&(B.buf[B.pos++]=127&F)))))}(D,_)}(g,this):(this.realloc(4),this.buf[this.pos++]=127&g|(g>127?128:0),g<=127||(this.buf[this.pos++]=127&(g>>>=7)|(g>127?128:0),g<=127||(this.buf[this.pos++]=127&(g>>>=7)|(g>127?128:0),g<=127||(this.buf[this.pos++]=g>>>7&127))))},writeSVarint:function(g){this.writeVarint(g<0?2*-g-1:2*g)},writeBoolean:function(g){this.writeVarint(Boolean(g))},writeString:function(g){g=String(g),this.realloc(4*g.length),this.pos++;var l=this.pos;this.pos=function(x,D,F){for(var B,Z,X=0;X<D.length;X++){if((B=D.charCodeAt(X))>55295&&B<57344){if(!Z){B>56319||X+1===D.length?(x[F++]=239,x[F++]=191,x[F++]=189):Z=B;continue}if(B<56320){x[F++]=239,x[F++]=191,x[F++]=189,Z=B;continue}B=Z-55296<<10|B-56320|65536,Z=null}else Z&&(x[F++]=239,x[F++]=191,x[F++]=189,Z=null);B<128?x[F++]=B:(B<2048?x[F++]=B>>6|192:(B<65536?x[F++]=B>>12|224:(x[F++]=B>>18|240,x[F++]=B>>12&63|128),x[F++]=B>>6&63|128),x[F++]=63&B|128)}return F}(this.buf,g,this.pos);var _=this.pos-l;_>=128&&Ax(l,_,this),this.pos=l-1,this.writeVarint(_),this.pos+=_},writeFloat:function(g){this.realloc(4),Tx(this.buf,g,this.pos,!0,23,4),this.pos+=4},writeDouble:function(g){this.realloc(8),Tx(this.buf,g,this.pos,!0,52,8),this.pos+=8},writeBytes:function(g){var l=g.length;this.writeVarint(l),this.realloc(l);for(var _=0;_<l;_++)this.buf[this.pos++]=g[_]},writeRawMessage:function(g,l){this.pos++;var _=this.pos;g(l,this);var x=this.pos-_;x>=128&&Ax(_,x,this),this.pos=_-1,this.writeVarint(x),this.pos+=x},writeMessage:function(g,l,_){this.writeTag(g,Kr.Bytes),this.writeRawMessage(l,_)},writePackedVarint:function(g,l){l.length&&this.writeMessage(g,Nw,l)},writePackedSVarint:function(g,l){l.length&&this.writeMessage(g,Bw,l)},writePackedBoolean:function(g,l){l.length&&this.writeMessage(g,Dx,l)},writePackedFloat:function(g,l){l.length&&this.writeMessage(g,kx,l)},writePackedDouble:function(g,l){l.length&&this.writeMessage(g,zw,l)},writePackedFixed32:function(g,l){l.length&&this.writeMessage(g,tE,l)},writePackedSFixed32:function(g,l){l.length&&this.writeMessage(g,$i,l)},writePackedFixed64:function(g,l){l.length&&this.writeMessage(g,kv,l)},writePackedSFixed64:function(g,l){l.length&&this.writeMessage(g,Dv,l)},writeBytesField:function(g,l){this.writeTag(g,Kr.Bytes),this.writeBytes(l)},writeFixed32Field:function(g,l){this.writeTag(g,Kr.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(g,l){this.writeTag(g,Kr.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(g,l){this.writeTag(g,Kr.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(g,l){this.writeTag(g,Kr.Fixed64),this.writeSFixed64(l)},writeVarintField:function(g,l){this.writeTag(g,Kr.Varint),this.writeVarint(l)},writeSVarintField:function(g,l){this.writeTag(g,Kr.Varint),this.writeSVarint(l)},writeStringField:function(g,l){this.writeTag(g,Kr.Bytes),this.writeString(l)},writeFloatField:function(g,l){this.writeTag(g,Kr.Fixed32),this.writeFloat(l)},writeDoubleField:function(g,l){this.writeTag(g,Kr.Fixed64),this.writeDouble(l)},writeBooleanField:function(g,l){this.writeVarintField(g,Boolean(l))}};class U_{constructor(l,{pixelRatio:_,version:x,stretchX:D,stretchY:F,content:B}){this.paddedRect=l,this.pixelRatio=_,this.stretchX=D,this.stretchY=F,this.content=B,this.version=x}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class H_{constructor(l,_){const x={},D={};this.haveRenderCallbacks=[];const F=[];this.addImages(l,x,F),this.addImages(_,D,F);const{w:B,h:Z}=hf(F),X=new qa({width:B||1,height:Z||1});for(const re in l){const ce=l[re],de=x[re].paddedRect;qa.copy(ce.data,X,{x:0,y:0},{x:de.x+1,y:de.y+1},ce.data)}for(const re in _){const ce=_[re],de=D[re].paddedRect,_e=de.x+1,Se=de.y+1,Re=ce.data.width,Xe=ce.data.height;qa.copy(ce.data,X,{x:0,y:0},{x:_e,y:Se},ce.data),qa.copy(ce.data,X,{x:0,y:Xe-1},{x:_e,y:Se-1},{width:Re,height:1}),qa.copy(ce.data,X,{x:0,y:0},{x:_e,y:Se+Xe},{width:Re,height:1}),qa.copy(ce.data,X,{x:Re-1,y:0},{x:_e-1,y:Se},{width:1,height:Xe}),qa.copy(ce.data,X,{x:0,y:0},{x:_e+Re,y:Se},{width:1,height:Xe})}this.image=X,this.iconPositions=x,this.patternPositions=D}addImages(l,_,x){for(const D in l){const F=l[D],B={x:0,y:0,w:F.data.width+2,h:F.data.height+2};x.push(B),_[D]=new U_(B,F),F.hasRenderCallback&&this.haveRenderCallbacks.push(D)}}patchUpdatedImages(l,_){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in l.updatedImages)this.patchUpdatedImage(this.iconPositions[x],l.getImage(x),_),this.patchUpdatedImage(this.patternPositions[x],l.getImage(x),_)}patchUpdatedImage(l,_,x){if(!l||!_||l.version===_.version)return;l.version=_.version;const[D,F]=l.tl;x.update(_.data,void 0,{x:D,y:F})}}qn("ImagePosition",U_),qn("ImageAtlas",H_);const nu={horizontal:1,vertical:2,horizontalOnly:3};class pp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,_){const x=new pp;return x.scale=l||1,x.fontStack=_,x}static forImage(l){const _=new pp;return _.imageName=l,_}}class tm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,_){const x=new tm;for(let D=0;D<l.sections.length;D++){const F=l.sections[D];F.image?x.addImageSection(F):x.addTextSection(F,_)}return x}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSections(){return this.sections}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(l){this.text=function(_,x){let D="";for(let F=0;F<_.length;F++){const B=_.charCodeAt(F+1)||null,Z=_.charCodeAt(F-1)||null;D+=!x&&(B&&Lf(B)&&!cf[_[F+1]]||Z&&Lf(Z)&&!cf[_[F-1]])||!cf[_[F]]?_[F]:cf[_[F]]}return D}(this.text,l)}trim(){let l=0;for(let x=0;x<this.text.length&&iu[this.text.charCodeAt(x)];x++)l++;let _=this.text.length;for(let x=this.text.length-1;x>=0&&x>=l&&iu[this.text.charCodeAt(x)];x--)_--;this.text=this.text.substring(l,_),this.sectionIndex=this.sectionIndex.slice(l,_)}substring(l,_){const x=new tm;return x.text=this.text.substring(l,_),x.sectionIndex=this.sectionIndex.slice(l,_),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,_)=>Math.max(l,this.sections[_].scale),0)}addTextSection(l,_){this.text+=l.text,this.sections.push(pp.forText(l.scale,l.fontStack||_));const x=this.sections.length-1;for(let D=0;D<l.text.length;++D)this.sectionIndex.push(x)}addImageSection(l){const _=l.image?l.image.name:"";if(0===_.length)return void mi("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(pp.forImage(_)),this.sectionIndex.push(this.sections.length-1)):mi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Uu(g,l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe){const at=tm.fromFeature(g,D);let bt;de===nu.vertical&&at.verticalizePunctuation(_e);const{processBidirectionalText:It,processStyledBidirectionalText:Rt}=Ae;if(It&&1===at.sections.length){bt=[];const Ut=It(at.toString(),Rv(at,re,F,l,x,Se,Re));for(const mn of Ut){const Cn=new tm;Cn.text=mn,Cn.sections=at.sections;for(let vn=0;vn<mn.length;vn++)Cn.sectionIndex.push(0);bt.push(Cn)}}else if(Rt){bt=[];const Ut=Rt(at.text,at.sectionIndex,Rv(at,re,F,l,x,Se,Re));for(const mn of Ut){const Cn=new tm;Cn.text=mn[0],Cn.sectionIndex=mn[1],Cn.sections=at.sections,bt.push(Cn)}}else bt=function(Ut,mn){const Cn=[],vn=Ut.text;let Tn=0;for(const ln of mn)Cn.push(Ut.substring(Tn,ln)),Tn=ln;return Tn<vn.length&&Cn.push(Ut.substring(Tn,vn.length)),Cn}(at,Rv(at,re,F,l,x,Se,Re));const Bt=[],jt={positionedLines:Bt,text:at.toString(),top:ce[1],bottom:ce[1],left:ce[0],right:ce[0],writingMode:de,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ut,mn,Cn,vn,Tn,ln,pn,In,on,Mi,gi,Xi){let Fi=0,ti=0,Wr=0;const pi="right"===In?1:"left"===In?0:.5;let Eo=!1;for(const Br of Tn){const go=Br.getSections();for(const Mo of go){if(Mo.imageName)continue;const Ns=mn[Mo.fontStack];if(Ns&&(Eo=void 0!==Ns.ascender&&void 0!==Ns.descender,!Eo))break}if(!Eo)break}let ss=0;for(const Br of Tn){Br.trim();const go=Br.getMaxScale(),Mo=24*(go-1),Ns={positionedGlyphs:[],lineOffset:0};Ut.positionedLines[ss]=Ns;const eo=Ns.positionedGlyphs;let Ar=0;if(!Br.length()){ti+=ln,++ss;continue}let as=0,Fo=0;for(let Qs=0;Qs<Br.length();Qs++){const Yo=Br.getSection(Qs),Oa=Br.getSectionIndex(Qs),Js=Br.getCharCode(Qs);let lr=Yo.scale,ao=null,Es=null,_a=null,Bh=24,Sc=0;const Ec=!(on===nu.horizontal||!gi&&!wh(Js)||gi&&(iu[Js]||(To=Js,ri(To)||Kd(To)||jr(To)||xh(To)||Bn(To))));if(Yo.imageName){const au=vn[Yo.imageName];if(!au)continue;_a=Yo.imageName,Ut.iconsInText=Ut.iconsInText||!0,Es=au.paddedRect;const ls=au.displaySize;lr=24*lr/Xi,ao={width:ls[0],height:ls[1],left:1,top:-3,advance:Ec?ls[1]:ls[0],localGlyph:!1},Sc=Eo?-ao.height*lr:24*go-17-ls[1]*lr,Bh=ao.advance;const Yu=(Ec?ls[0]:ls[1])*lr-24*go;Yu>0&&Yu>Ar&&(Ar=Yu)}else{const au=Cn[Yo.fontStack];if(!au)continue;au[Js]&&(Es=au[Js]);const ls=mn[Yo.fontStack];if(!ls)continue;const Yu=ls.glyphs[Js];if(!Yu)continue;if(ao=Yu.metrics,Bh=8203!==Js?24:0,Eo){const zh=void 0!==ls.ascender?Math.abs(ls.ascender):0,Ko=void 0!==ls.descender?Math.abs(ls.descender):0,Ql=(zh+Ko)*lr;as<Ql&&(as=Ql,Fo=(zh-Ko)/2*lr),Sc=-zh*lr}else Sc=24*(go-lr)-17}Ec?(Ut.verticalizable=!0,eo.push({glyph:Js,imageName:_a,x:Fi,y:ti+Sc,vertical:Ec,scale:lr,localGlyph:ao.localGlyph,fontStack:Yo.fontStack,sectionIndex:Oa,metrics:ao,rect:Es}),Fi+=Bh*lr+Mi):(eo.push({glyph:Js,imageName:_a,x:Fi,y:ti+Sc,vertical:Ec,scale:lr,localGlyph:ao.localGlyph,fontStack:Yo.fontStack,sectionIndex:Oa,metrics:ao,rect:Es}),Fi+=ao.advance*lr+Mi)}0!==eo.length&&(Wr=Math.max(Fi-Mi,Wr),Eo?Ov(eo,pi,Ar,Fo,ln*go/2):Ov(eo,pi,Ar,0,ln/2)),Fi=0;const jo=ln*go+Ar;Ns.lineOffset=Math.max(Ar,Mo),ti+=jo,++ss}var To;const Ls=ti,{horizontalAlign:Oo,verticalAlign:mo}=Jo(pn);(function(Br,go,Mo,Ns,eo,Ar){const as=(go-Mo)*eo,Fo=-Ar*Ns;for(const jo of Br)for(const Qs of jo.positionedGlyphs)Qs.x+=as,Qs.y+=Fo})(Ut.positionedLines,pi,Oo,mo,Wr,Ls),Ut.top+=-mo*Ls,Ut.bottom=Ut.top+Ls,Ut.left+=-Oo*Wr,Ut.right=Ut.left+Wr,Ut.hasBaseline=Eo}(jt,l,_,x,bt,B,Z,X,de,re,_e,Xe),!function(Ut){for(const mn of Ut)if(0!==mn.positionedGlyphs.length)return!1;return!0}(Bt)&&jt}const iu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},G_={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function j_(g,l,_,x,D,F){if(l.imageName){const B=x[l.imageName];return B?B.displaySize[0]*l.scale*24/F+D:0}{const B=_[l.fontStack],Z=B&&B.glyphs[g];return Z?Z.metrics.advance*l.scale+D:0}}function Uw(g,l,_,x){const D=Math.pow(g-l,2);return x?g<l?D/2:2*D:D+Math.abs(_)*_}function Hw(g,l,_){let x=0;return 10===g&&(x-=1e4),_&&(x+=150),40!==g&&65288!==g||(x+=50),41!==l&&65289!==l||(x+=50),x}function Y_(g,l,_,x,D,F){let B=null,Z=Uw(l,_,D,F);for(const X of x){const re=Uw(l-X.x,_,D,F)+X.badness;re<=Z&&(B=X,Z=re)}return{index:g,x:l,priorBreak:B,badness:Z}}function Gw(g){return g?Gw(g.priorBreak).concat(g.index):[]}function Rv(g,l,_,x,D,F,B){if("point"!==F)return[];if(!g)return[];const Z=[],X=function(_e,Se,Re,Xe,at,bt){let It=0;for(let Rt=0;Rt<_e.length();Rt++){const Bt=_e.getSection(Rt);It+=j_(_e.getCharCode(Rt),Bt,Xe,at,Se,bt)}return It/Math.max(1,Math.ceil(It/Re))}(g,l,_,x,D,B),re=g.text.indexOf("\u200b")>=0;let ce=0;for(let _e=0;_e<g.length();_e++){const Se=g.getSection(_e),Re=g.getCharCode(_e);if(iu[Re]||(ce+=j_(Re,Se,x,D,l,B)),_e<g.length()-1){const Xe=!((de=Re)<11904||!(tp(de)||Uc(de)||ip(de)||Km(de)||Gl(de)||Is(de)||fc(de)||ep(de)||Iu(de)||Gc(de)||Hc(de)||ca(de)||$o(de)||Hl(de)||Yr(de)||bh(de)||la(de)||np(de)||mc(de)||jc(de)));(G_[Re]||Xe||Se.imageName)&&Z.push(Y_(_e+1,ce,X,Z,Hw(Re,g.getCharCode(_e+1),Xe&&re),!1))}}var de;return Gw(Y_(g.length(),ce,X,Z,0,!0))}function Jo(g){let l=.5,_=.5;switch(g){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(g){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:l,verticalAlign:_}}function Ov(g,l,_,x,D){if(!(l||_||x||D))return;const F=g.length-1,B=g[F],Z=(B.x+B.metrics.advance*B.scale)*l;for(let X=0;X<=F;X++)g[X].x-=Z,g[X].y+=_+x+D}function df(g,l,_){const{horizontalAlign:x,verticalAlign:D}=Jo(_),F=l[0]-g.displaySize[0]*x,B=l[1]-g.displaySize[1]*D;return{image:g,top:B,bottom:B+g.displaySize[1],left:F,right:F+g.displaySize[0]}}function fp(g,l,_,x,D,F){const B=g.image;let Z;if(B.content){const at=B.content,bt=B.pixelRatio||1;Z=[at[0]/bt,at[1]/bt,B.displaySize[0]-at[2]/bt,B.displaySize[1]-at[3]/bt]}const X=l.left*F,re=l.right*F;let ce,de,_e,Se;"width"===_||"both"===_?(Se=D[0]+X-x[3],de=D[0]+re+x[1]):(Se=D[0]+(X+re-B.displaySize[0])/2,de=Se+B.displaySize[0]);const Re=l.top*F,Xe=l.bottom*F;return"height"===_||"both"===_?(ce=D[1]+Re-x[0],_e=D[1]+Xe+x[2]):(ce=D[1]+(Re+Xe-B.displaySize[1])/2,_e=ce+B.displaySize[1]),{image:B,top:ce,right:de,bottom:_e,left:Se,collisionPadding:Z}}class Al extends Be{constructor(l,_,x,D){super(l,_),this.angle=x,void 0!==D&&(this.segment=D)}clone(){return new Al(this.x,this.y,this.angle,this.segment)}}function Ix(g,l,_,x,D){if(void 0===l.segment)return!0;let F=l,B=l.segment+1,Z=0;for(;Z>-_/2;){if(B--,B<0)return!1;Z-=g[B].dist(F),F=g[B]}Z+=g[B].dist(g[B+1]),B++;const X=[];let re=0;for(;Z<_/2;){const ce=g[B],de=g[B+1];if(!de)return!1;let _e=g[B-1].angleTo(ce)-ce.angleTo(de);for(_e=Math.abs((_e+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:Z,angleDelta:_e}),re+=_e;Z-X[0].distance>x;)re-=X.shift().angleDelta;if(re>D)return!1;B++,Z+=ce.dist(de)}return!0}function jw(g){let l=0;for(let _=0;_<g.length-1;_++)l+=g[_].dist(g[_+1]);return l}function Fv(g,l,_){return g?.6*l*_:0}function Yw(g,l){return Math.max(g?g.right-g.left:0,l?l.right-l.left:0)}function qw(g,l,_,x,D,F){const B=Fv(_,D,F),Z=Yw(_,x)*F;let X=0;const re=jw(g)/2;for(let ce=0;ce<g.length-1;ce++){const de=g[ce],_e=g[ce+1],Se=de.dist(_e);if(X+Se>re){const Re=(re-X)/Se,Xe=ui(de.x,_e.x,Re),at=ui(de.y,_e.y,Re),bt=new Al(Xe,at,_e.angleTo(de),ce);return!B||Ix(g,bt,Z,B,l)?bt:void 0}X+=Se}}function nE(g,l,_,x,D,F,B,Z,X){const re=Fv(x,F,B),ce=Yw(x,D),de=ce*B,_e=0===g[0].x||g[0].x===X||0===g[0].y||g[0].y===X;return l-de<l/4&&(l=de+l/4),Px(g,_e?l/2*Z%l:(ce/2+2*F)*B*Z%l,l,re,_,de,_e,!1,X)}function Px(g,l,_,x,D,F,B,Z,X){const re=F/2,ce=jw(g);let de=0,_e=l-_,Se=[];for(let Re=0;Re<g.length-1;Re++){const Xe=g[Re],at=g[Re+1],bt=Xe.dist(at),It=at.angleTo(Xe);for(;_e+_<de+bt;){_e+=_;const Rt=(_e-de)/bt,Bt=ui(Xe.x,at.x,Rt),jt=ui(Xe.y,at.y,Rt);if(Bt>=0&&Bt<X&&jt>=0&&jt<X&&_e-re>=0&&_e+re<=ce){const Ut=new Al(Bt,jt,It,Re);Ut._round(),x&&!Ix(g,Ut,F,x,D)||Se.push(Ut)}}de+=bt}return Z||Se.length||B||(Se=Px(g,de/2,_,x,D,F,B,!0,X)),Se}function Rx(g,l,_,x,D){const F=[];for(let B=0;B<g.length;B++){const Z=g[B];let X;for(let re=0;re<Z.length-1;re++){let ce=Z[re],de=Z[re+1];ce.x<l&&de.x<l||(ce.x<l?ce=new Be(l,ce.y+(l-ce.x)/(de.x-ce.x)*(de.y-ce.y))._round():de.x<l&&(de=new Be(l,ce.y+(l-ce.x)/(de.x-ce.x)*(de.y-ce.y))._round()),ce.y<_&&de.y<_||(ce.y<_?ce=new Be(ce.x+(_-ce.y)/(de.y-ce.y)*(de.x-ce.x),_)._round():de.y<_&&(de=new Be(ce.x+(_-ce.y)/(de.y-ce.y)*(de.x-ce.x),_)._round()),ce.x>=x&&de.x>=x||(ce.x>=x?ce=new Be(x,ce.y+(x-ce.x)/(de.x-ce.x)*(de.y-ce.y))._round():de.x>=x&&(de=new Be(x,ce.y+(x-ce.x)/(de.x-ce.x)*(de.y-ce.y))._round()),ce.y>=D&&de.y>=D||(ce.y>=D?ce=new Be(ce.x+(D-ce.y)/(de.y-ce.y)*(de.x-ce.x),D)._round():de.y>=D&&(de=new Be(ce.x+(D-ce.y)/(de.y-ce.y)*(de.x-ce.x),D)._round()),X&&ce.equals(X[X.length-1])||(X=[ce],F.push(X)),X.push(de)))))}}return F}qn("Anchor",Al);var Lv=Cc,xk=Cc,Hu=1e20;function Cc(g,l,_,x,D,F){this.fontSize=g||24,this.buffer=void 0===l?3:l,this.cutoff=x||.25,this.fontFamily=D||"sans-serif",this.fontWeight=F||"normal",this.radius=_||8;var B=this.size=this.fontSize+2*this.buffer,Z=B+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=B,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Z*Z),this.gridInner=new Float64Array(Z*Z),this.f=new Float64Array(Z),this.z=new Float64Array(Z+1),this.v=new Uint16Array(Z),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(B/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function q_(g,l,_,x,D,F){for(var B=0;B<l;B++)Ox(g,B,l,_,x,D,F);for(var Z=0;Z<_;Z++)Ox(g,Z*l,1,l,x,D,F)}function Ox(g,l,_,x,D,F,B){var Z,X,re,ce;for(F[0]=0,B[0]=-Hu,B[1]=Hu,Z=0;Z<x;Z++)D[Z]=g[l+Z*_];for(Z=1,X=0,re=0;Z<x;Z++){do{re=(D[Z]-D[ce=F[X]]+Z*Z-ce*ce)/(Z-ce)/2}while(re<=B[X]&&--X>-1);F[++X]=Z,B[X]=re,B[X+1]=Hu}for(Z=0,X=0;Z<x;Z++){for(;B[X+1]<Z;)X++;g[l+Z*_]=D[ce=F[X]]+(Z-ce)*(Z-ce)}}Cc.prototype._draw=function(g,l){var _,x,D,F,B,Z,X,re,ce,de=this.ctx.measureText(g),_e=de.width,Se=2*this.buffer;l&&this.useMetrics?(B=Math.floor(de.actualBoundingBoxAscent),re=this.buffer+Math.ceil(de.actualBoundingBoxAscent),Z=this.buffer,X=this.buffer,_=(x=Math.min(this.size,Math.ceil(de.actualBoundingBoxRight-de.actualBoundingBoxLeft)))+Se,D=(F=Math.min(this.size-Z,Math.ceil(de.actualBoundingBoxAscent+de.actualBoundingBoxDescent)))+Se,this.ctx.textBaseline="alphabetic"):(_=x=this.size,D=F=this.size,B=19*this.fontSize/24,Z=X=0,re=this.middle,this.ctx.textBaseline="middle"),x&&F&&(this.ctx.clearRect(X,Z,x,F),this.ctx.fillText(g,this.buffer,re),ce=this.ctx.getImageData(X,Z,x,F));var Re=new Uint8ClampedArray(_*D);return function(Xe,at,bt,It,Rt,Bt,jt){Bt.fill(Hu,0,at*bt),jt.fill(0,0,at*bt);for(var Ut=(at-It)/2,mn=0;mn<Rt;mn++)for(var Cn=0;Cn<It;Cn++){var vn=(mn+Ut)*at+Cn+Ut,Tn=Xe.data[4*(mn*It+Cn)+3]/255;if(1===Tn)Bt[vn]=0,jt[vn]=Hu;else if(0===Tn)Bt[vn]=Hu,jt[vn]=0;else{var ln=Math.max(0,.5-Tn),pn=Math.max(0,Tn-.5);Bt[vn]=ln*ln,jt[vn]=pn*pn}}}(ce,_,D,x,F,this.gridOuter,this.gridInner),q_(this.gridOuter,_,D,this.f,this.v,this.z),q_(this.gridInner,_,D,this.f,this.v,this.z),function(Xe,at,bt,It,Rt,Bt,jt){for(var Ut=0;Ut<at*bt;Ut++){var mn=Math.sqrt(It[Ut])-Math.sqrt(Rt[Ut]);Xe[Ut]=Math.round(255-255*(mn/Bt+jt))}}(Re,_,D,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Re,metrics:{width:x,height:F,sdfWidth:_,sdfHeight:D,top:B,left:0,advance:_e}}},Cc.prototype.draw=function(g){return this._draw(g,!1).data},Cc.prototype.drawWithMetrics=function(g){return this._draw(g,!0)},Lv.default=xk;const Z_={none:0,ideographs:1,all:2};class vd{constructor(l,_,x){this.requestManager=l,this.localGlyphMode=_,this.localFontFamily=x,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(l){this.url=l}getGlyphs(l,_){const x=[];for(const D in l)for(const F of l[D])x.push({stack:D,id:F});$r(x,({stack:D,id:F},B)=>{let Z=this.entries[D];Z||(Z=this.entries[D]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let X=Z.glyphs[F];if(void 0!==X)return void B(null,{stack:D,id:F,glyph:X});if(X=this._tinySDF(Z,D,F),X)return Z.glyphs[F]=X,void B(null,{stack:D,id:F,glyph:X});const re=Math.floor(F/256);if(256*re>65535)return void B(new Error("glyphs > 65535 not supported"));if(Z.ranges[re])return void B(null,{stack:D,id:F,glyph:X});let ce=Z.requests[re];ce||(ce=Z.requests[re]=[],vd.loadGlyphRange(D,re,this.url,this.requestManager,(de,_e)=>{if(_e){Z.ascender=_e.ascender,Z.descender=_e.descender;for(const Se in _e.glyphs)this._doesCharSupportLocalGlyph(+Se)||(Z.glyphs[+Se]=_e.glyphs[+Se]);Z.ranges[re]=!0}for(const Se of ce)Se(de,_e);delete Z.requests[re]})),ce.push((de,_e)=>{de?B(de):_e&&B(null,{stack:D,id:F,glyph:_e.glyphs[F]||null})})},(D,F)=>{if(D)_(D);else if(F){const B={};for(const{stack:Z,id:X,glyph:re}of F)void 0===B[Z]&&(B[Z]={}),void 0===B[Z].glyphs&&(B[Z].glyphs={}),B[Z].glyphs[X]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics},B[Z].ascender=this.entries[Z].ascender,B[Z].descender=this.entries[Z].descender;_(null,B)}})}_doesCharSupportLocalGlyph(l){return this.localGlyphMode!==Z_.none&&(this.localGlyphMode===Z_.all?!!this.localFontFamily:!!this.localFontFamily&&(Gc(l)||Pu(l)||$o(l)||la(l))||ep(l))}_tinySDF(l,_,x){const D=this.localFontFamily;if(!D||!this._doesCharSupportLocalGlyph(x))return;let F=l.tinySDF;if(!F){let Xe="400";/bold/i.test(_)?Xe="900":/medium/i.test(_)?Xe="500":/light/i.test(_)&&(Xe="200"),F=l.tinySDF=new vd.TinySDF(48,6,16,.25,D,Xe)}if(this.localGlyphs[F.fontWeight][x])return this.localGlyphs[F.fontWeight][x];const{data:B,metrics:Z}=F.drawWithMetrics(String.fromCharCode(x)),{sdfWidth:X,sdfHeight:re,width:ce,height:de,left:_e,top:Se,advance:Re}=Z;return this.localGlyphs[F.fontWeight][x]={id:x,bitmap:new Ah({width:X,height:re},B),metrics:{width:ce/2,height:de/2,left:_e/2,top:Se/2-27,advance:Re/2,localGlyph:!0}}}}function Nv(g,l,_,x){const D=[],F=g.image,B=F.pixelRatio,Z=F.paddedRect.w-2,X=F.paddedRect.h-2,re=g.right-g.left,ce=g.bottom-g.top,de=F.stretchX||[[0,Z]],_e=F.stretchY||[[0,X]],Se=(ln,pn)=>ln+pn[1]-pn[0],Re=de.reduce(Se,0),Xe=_e.reduce(Se,0),at=Z-Re,bt=X-Xe;let It=0,Rt=Re,Bt=0,jt=Xe,Ut=0,mn=at,Cn=0,vn=bt;if(F.content&&x){const ln=F.content;It=nm(de,0,ln[0]),Bt=nm(_e,0,ln[1]),Rt=nm(de,ln[0],ln[2]),jt=nm(_e,ln[1],ln[3]),Ut=ln[0]-It,Cn=ln[1]-Bt,mn=ln[2]-ln[0]-Rt,vn=ln[3]-ln[1]-jt}const Tn=(ln,pn,In,on)=>{const Mi=ru(ln.stretch-It,Rt,re,g.left),gi=xg(ln.fixed-Ut,mn,ln.stretch,Re),Xi=ru(pn.stretch-Bt,jt,ce,g.top),Fi=xg(pn.fixed-Cn,vn,pn.stretch,Xe),ti=ru(In.stretch-It,Rt,re,g.left),Wr=xg(In.fixed-Ut,mn,In.stretch,Re),pi=ru(on.stretch-Bt,jt,ce,g.top),Eo=xg(on.fixed-Cn,vn,on.stretch,Xe),ss=new Be(Mi,Xi),To=new Be(ti,Xi),Ls=new Be(ti,pi),Oo=new Be(Mi,pi),mo=new Be(gi/B,Fi/B),Br=new Be(Wr/B,Eo/B),go=l*Math.PI/180;if(go){const eo=Math.sin(go),Ar=Math.cos(go),as=[Ar,-eo,eo,Ar];ss._matMult(as),To._matMult(as),Oo._matMult(as),Ls._matMult(as)}const Mo=ln.stretch+ln.fixed,Ns=pn.stretch+pn.fixed;return{tl:ss,tr:To,bl:Oo,br:Ls,tex:{x:F.paddedRect.x+1+Mo,y:F.paddedRect.y+1+Ns,w:In.stretch+In.fixed-Mo,h:on.stretch+on.fixed-Ns},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:mo,pixelOffsetBR:Br,minFontScaleX:mn/B/re,minFontScaleY:vn/B/ce,isSDF:_}};if(x&&(F.stretchX||F.stretchY)){const ln=Fx(de,at,Re),pn=Fx(_e,bt,Xe);for(let In=0;In<ln.length-1;In++){const on=ln[In],Mi=ln[In+1];for(let gi=0;gi<pn.length-1;gi++)D.push(Tn(on,pn[gi],Mi,pn[gi+1]))}}else D.push(Tn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Z+1},{fixed:0,stretch:X+1}));return D}function nm(g,l,_){let x=0;for(const D of g)x+=Math.max(l,Math.min(_,D[1]))-Math.max(l,Math.min(_,D[0]));return x}function Fx(g,l,_){const x=[{fixed:-1,stretch:0}];for(const[D,F]of g){const B=x[x.length-1];x.push({fixed:D-B.stretch,stretch:B.stretch}),x.push({fixed:D-B.stretch,stretch:B.stretch+(F-D)})}return x.push({fixed:l+1,stretch:_}),x}function ru(g,l,_,x){return g/l*_+x}function xg(g,l,_,x){return g-l*_/x}function Zw(g,l,_,x){const D=l+g.positionedLines[x].lineOffset;return 0===x?_+D/2:_+(D+(l+g.positionedLines[x-1].lineOffset))/2}vd.loadGlyphRange=function(g,l,_,x,D){const F=256*l,B=F+255,Z=x.transformRequest(x.normalizeGlyphsURL(_).replace("{fontstack}",g).replace("{range}",`${F}-${B}`),Oi.Glyphs);we(Z,(X,re)=>{if(X)D(X);else if(re){const ce={},de=new em(re).readFields(Vw,{});for(const _e of de.glyphs)ce[_e.id]=_e;D(null,{glyphs:ce,ascender:de.ascender,descender:de.descender})}})},vd.TinySDF=Lv;class iE{constructor(l=[],_=wg){if(this.data=l,this.length=this.data.length,this.compare=_,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const l=this.data[0],_=this.data.pop();return this.length--,this.length>0&&(this.data[0]=_,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:_,compare:x}=this,D=_[l];for(;l>0;){const F=l-1>>1,B=_[F];if(x(D,B)>=0)break;_[l]=B,l=F}_[l]=D}_down(l){const{data:_,compare:x}=this,D=this.length>>1,F=_[l];for(;l<D;){let B=1+(l<<1),Z=_[B];const X=B+1;if(X<this.length&&x(_[X],Z)<0&&(B=X,Z=_[X]),x(Z,F)>=0)break;_[l]=Z,l=B}_[l]=F}}function wg(g,l){return g<l?-1:g>l?1:0}function Ww(g,l=1,_=!1){let x=1/0,D=1/0,F=-1/0,B=-1/0;const Z=g[0];for(let Se=0;Se<Z.length;Se++){const Re=Z[Se];(!Se||Re.x<x)&&(x=Re.x),(!Se||Re.y<D)&&(D=Re.y),(!Se||Re.x>F)&&(F=Re.x),(!Se||Re.y>B)&&(B=Re.y)}const X=Math.min(F-x,B-D);let re=X/2;const ce=new iE([],Lx);if(0===X)return new Be(x,D);for(let Se=x;Se<F;Se+=X)for(let Re=D;Re<B;Re+=X)ce.push(new pf(Se+re,Re+re,re,g));let de=function(Se){let Re=0,Xe=0,at=0;const bt=Se[0];for(let It=0,Rt=bt.length,Bt=Rt-1;It<Rt;Bt=It++){const jt=bt[It],Ut=bt[Bt],mn=jt.x*Ut.y-Ut.x*jt.y;Xe+=(jt.x+Ut.x)*mn,at+=(jt.y+Ut.y)*mn,Re+=3*mn}return new pf(Xe/Re,at/Re,0,Se)}(g),_e=ce.length;for(;ce.length;){const Se=ce.pop();(Se.d>de.d||!de.d)&&(de=Se,_&&console.log("found best %d after %d probes",Math.round(1e4*Se.d)/1e4,_e)),Se.max-de.d<=l||(re=Se.h/2,ce.push(new pf(Se.p.x-re,Se.p.y-re,re,g)),ce.push(new pf(Se.p.x+re,Se.p.y-re,re,g)),ce.push(new pf(Se.p.x-re,Se.p.y+re,re,g)),ce.push(new pf(Se.p.x+re,Se.p.y+re,re,g)),_e+=4)}return _&&(console.log(`num probes: ${_e}`),console.log(`best distance: ${de.d}`)),de.p}function Lx(g,l){return l.max-g.max}function pf(g,l,_,x){this.p=new Be(g,l),this.h=_,this.d=function(D,F){let B=!1,Z=1/0;for(let X=0;X<F.length;X++){const re=F[X];for(let ce=0,de=re.length,_e=de-1;ce<de;_e=ce++){const Se=re[ce],Re=re[_e];Se.y>D.y!=Re.y>D.y&&D.x<(Re.x-Se.x)*(D.y-Se.y)/(Re.y-Se.y)+Se.x&&(B=!B),Z=Math.min(Z,tg(D,Se,Re))}}return(B?1:-1)*Math.sqrt(Z)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}const Bv=Number.POSITIVE_INFINITY,W_=Math.sqrt(2);function Lh(g,l){return l[1]!==Bv?function(_,x,D){let F=0,B=0;switch(x=Math.abs(x),D=Math.abs(D),_){case"top-right":case"top-left":case"top":B=D-7;break;case"bottom-right":case"bottom-left":case"bottom":B=7-D}switch(_){case"top-right":case"bottom-right":case"right":F=-x;break;case"top-left":case"bottom-left":case"left":F=x}return[F,B]}(g,l[0],l[1]):function(_,x){let D=0,F=0;x<0&&(x=0);const B=x/W_;switch(_){case"top-right":case"top-left":F=B-7;break;case"bottom-right":case"bottom-left":F=7-B;break;case"bottom":F=7-x;break;case"top":F=x-7}switch(_){case"top-right":case"bottom-right":D=-B;break;case"top-left":case"bottom-left":D=B;break;case"left":D=x;break;case"right":D=-x}return[D,F]}(g,l[0])}function zv(g,l,_,x,D,F,B,Z){g.createArrays(),g.tilePixelRatio=Cr/(512*g.overscaling),g.compareText={},g.iconsNeedLinear=!1;const X=g.layers[0].layout,re=g.layers[0]._unevaluatedLayout._values,ce={};if("composite"===g.textSizeData.kind){const{minZoom:Se,maxZoom:Re}=g.textSizeData;ce.compositeTextSizes=[re["text-size"].possiblyEvaluate(new Pe(Se),B),re["text-size"].possiblyEvaluate(new Pe(Re),B)]}if("composite"===g.iconSizeData.kind){const{minZoom:Se,maxZoom:Re}=g.iconSizeData;ce.compositeIconSizes=[re["icon-size"].possiblyEvaluate(new Pe(Se),B),re["icon-size"].possiblyEvaluate(new Pe(Re),B)]}ce.layoutTextSize=re["text-size"].possiblyEvaluate(new Pe(Z+1),B),ce.layoutIconSize=re["icon-size"].possiblyEvaluate(new Pe(Z+1),B),ce.textMaxSize=re["text-size"].possiblyEvaluate(new Pe(18),B);const de="map"===X.get("text-rotation-alignment")&&"point"!==X.get("symbol-placement"),_e=X.get("text-size");for(const Se of g.features){const Re=X.get("text-font").evaluate(Se,{},B).join(","),Xe=_e.evaluate(Se,{},B),at=ce.layoutTextSize.evaluate(Se,{},B),bt=(ce.layoutIconSize.evaluate(Se,{},B),{horizontal:{},vertical:void 0}),It=Se.text;let Rt,Bt=[0,0];if(It){const mn=It.toString(),Cn=24*X.get("text-letter-spacing").evaluate(Se,{},B),vn=24*X.get("text-line-height").evaluate(Se,{},B),Tn=ms(mn)?Cn:0,ln=X.get("text-anchor").evaluate(Se,{},B),pn=X.get("text-variable-anchor");if(!pn){const Fi=X.get("text-radial-offset").evaluate(Se,{},B);Bt=Fi?Lh(ln,[24*Fi,Bv]):X.get("text-offset").evaluate(Se,{},B).map(ti=>24*ti)}let In=de?"center":X.get("text-justify").evaluate(Se,{},B);const on=X.get("symbol-placement"),Mi="point"===on,gi="point"===on?24*X.get("text-max-width").evaluate(Se,{},B):0,Xi=Fi=>{g.allowVerticalPlacement&&Yc(mn)&&(bt.vertical=Uu(It,l,_,D,Re,gi,vn,ln,Fi,Tn,Bt,nu.vertical,!0,on,at,Xe))};if(!de&&pn){const Fi="auto"===In?pn.map(Wr=>mp(Wr)):[In];let ti=!1;for(let Wr=0;Wr<Fi.length;Wr++){const pi=Fi[Wr];if(!bt.horizontal[pi])if(ti)bt.horizontal[pi]=bt.horizontal[0];else{const Eo=Uu(It,l,_,D,Re,gi,vn,"center",pi,Tn,Bt,nu.horizontal,!1,on,at,Xe);Eo&&(bt.horizontal[pi]=Eo,ti=1===Eo.positionedLines.length)}}Xi("left")}else{if("auto"===In&&(In=mp(ln)),Mi||X.get("text-writing-mode").indexOf("horizontal")>=0||!Yc(mn)){const Fi=Uu(It,l,_,D,Re,gi,vn,ln,In,Tn,Bt,nu.horizontal,!1,on,at,Xe);Fi&&(bt.horizontal[In]=Fi)}Xi("point"===on?"left":In)}}let jt=!1;if(Se.icon&&Se.icon.name){const mn=x[Se.icon.name];mn&&(Rt=df(D[Se.icon.name],X.get("icon-offset").evaluate(Se,{},B),X.get("icon-anchor").evaluate(Se,{},B)),jt=mn.sdf,void 0===g.sdfIcons?g.sdfIcons=mn.sdf:g.sdfIcons!==mn.sdf&&mi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(mn.pixelRatio!==g.pixelRatio||0!==X.get("icon-rotate").constantOr(1))&&(g.iconsNeedLinear=!0))}const Ut=bd(bt.horizontal)||bt.vertical;g.iconsInText||(g.iconsInText=!!Ut&&Ut.iconsInText),(Ut||Rt)&&Cg(g,Se,bt,Rt,x,ce,at,0,Bt,jt,B)}F&&g.generateCollisionDebugBuffers(Z,g.collisionBoxArray)}function mp(g){switch(g){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Cg(g,l,_,x,D,F,B,Z,X,re,ce){let de=F.textMaxSize.evaluate(l,{},ce);void 0===de&&(de=B);const _e=g.layers[0].layout,Se=_e.get("icon-offset").evaluate(l,{},ce),Re=bd(_.horizontal)||_.vertical,Xe=B/24,at=g.tilePixelRatio*de/24,bt=g.tilePixelRatio*_e.get("symbol-spacing"),It=_e.get("text-padding")*g.tilePixelRatio,Rt=_e.get("icon-padding")*g.tilePixelRatio,Bt=zt(_e.get("text-max-angle")),jt="map"===_e.get("text-rotation-alignment")&&"point"!==_e.get("symbol-placement"),Ut="map"===_e.get("icon-rotation-alignment")&&"point"!==_e.get("symbol-placement"),mn=_e.get("symbol-placement"),Cn=bt/2,vn=_e.get("icon-text-fit");let Tn;x&&"none"!==vn&&(g.allowVerticalPlacement&&_.vertical&&(Tn=fp(x,_.vertical,vn,_e.get("icon-text-fit-padding"),Se,Xe)),Re&&(x=fp(x,Re,vn,_e.get("icon-text-fit-padding"),Se,Xe)));const ln=(pn,In)=>{In.x<0||In.x>=Cr||In.y<0||In.y>=Cr||function(on,Mi,gi,Xi,Fi,ti,Wr,pi,Eo,ss,To,Ls,Oo,mo,Br,go,Mo,Ns,eo,Ar,as,Fo,jo,Qs){const Yo=on.addToLineVertexArray(Mi,gi);let Oa,Js,lr,ao,Es,_a,Bh,Sc=0,Ec=0,au=0,ls=0,Yu=-1,zh=-1;const Ko={};let Ql=Rs(""),rl=0,Vh=0;if(void 0===pi._unevaluatedLayout.getValue("text-radial-offset")?[rl,Vh]=pi.layout.get("text-offset").evaluate(Ar,{},jo).map(Lo=>24*Lo):(rl=24*pi.layout.get("text-radial-offset").evaluate(Ar,{},jo),Vh=Bv),on.allowVerticalPlacement&&Xi.vertical){const Lo=Xi.vertical;if(mo)_a=Sg(Lo),Wr&&(Bh=Sg(Wr));else{const ya=pi.layout.get("text-rotate").evaluate(Ar,{},jo)+90;lr=ff(Eo,Mi,ss,To,Ls,Lo,Oo,ya,Br),Wr&&(ao=ff(Eo,Mi,ss,To,Ls,Wr,Mo,ya))}}if(Fi){const Lo=pi.layout.get("icon-rotate").evaluate(Ar,{},jo),ya="none"!==pi.layout.get("icon-text-fit"),Bs=Nv(Fi,Lo,Fo,ya),Tc=Wr?Nv(Wr,Lo,Fo,ya):void 0;Js=ff(Eo,Mi,ss,To,Ls,Fi,Mo,Lo),Sc=4*Bs.length;const Ed=on.iconSizeData;let va=null;"source"===Ed.kind?(va=[Qa*pi.layout.get("icon-size").evaluate(Ar,{},jo)],va[0]>We&&mi(`${on.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Ed.kind&&(va=[Qa*as.compositeIconSizes[0].evaluate(Ar,{},jo),Qa*as.compositeIconSizes[1].evaluate(Ar,{},jo)],(va[0]>We||va[1]>We)&&mi(`${on.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),on.addSymbols(on.icon,Bs,va,eo,Ns,Ar,!1,Mi,Yo.lineStartIndex,Yo.lineLength,-1,jo),Yu=on.icon.placedSymbolArray.length-1,Tc&&(Ec=4*Tc.length,on.addSymbols(on.icon,Tc,va,eo,Ns,Ar,nu.vertical,Mi,Yo.lineStartIndex,Yo.lineLength,-1,jo),zh=on.icon.placedSymbolArray.length-1)}for(const Lo in Xi.horizontal){const ya=Xi.horizontal[Lo];Oa||(Ql=Rs(ya.text),mo?Es=Sg(ya):Oa=ff(Eo,Mi,ss,To,Ls,ya,Oo,pi.layout.get("text-rotate").evaluate(Ar,{},jo),Br));const Bs=1===ya.positionedLines.length;if(au+=Zr(on,Mi,ya,ti,pi,mo,Ar,Br,Yo,Xi.vertical?nu.horizontal:nu.horizontalOnly,Bs?Object.keys(Xi.horizontal):[Lo],Ko,Yu,as,jo),Bs)break}Xi.vertical&&(ls+=Zr(on,Mi,Xi.vertical,ti,pi,mo,Ar,Br,Yo,nu.vertical,["vertical"],Ko,zh,as,jo));let lu=-1;const oy=(Lo,ya)=>Lo?Math.max(Lo,ya):ya;lu=oy(Es,lu),lu=oy(_a,lu),lu=oy(Bh,lu);const Ao=lu>-1?1:0;Ao&&(lu*=Qs/24),on.glyphOffsetArray.length>=_p.MAX_GLYPHS&&mi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ar.sortKey&&on.addToSortKeyRanges(on.symbolInstances.length,Ar.sortKey),on.symbolInstances.emplaceBack(Mi.x,Mi.y,Ko.right>=0?Ko.right:-1,Ko.center>=0?Ko.center:-1,Ko.left>=0?Ko.left:-1,Ko.vertical>=0?Ko.vertical:-1,Yu,zh,Ql,void 0!==Oa?Oa:on.collisionBoxArray.length,void 0!==Oa?Oa+1:on.collisionBoxArray.length,void 0!==lr?lr:on.collisionBoxArray.length,void 0!==lr?lr+1:on.collisionBoxArray.length,void 0!==Js?Js:on.collisionBoxArray.length,void 0!==Js?Js+1:on.collisionBoxArray.length,ao||on.collisionBoxArray.length,ao?ao+1:on.collisionBoxArray.length,ss,au,ls,Sc,Ec,Ao,0,rl,Vh,lu)}(g,In,pn,_,x,D,Tn,g.layers[0],g.collisionBoxArray,l.index,l.sourceLayerIndex,g.index,It,jt,X,0,Rt,Ut,Se,l,F,re,ce,B)};if("line"===mn)for(const pn of Rx(l.geometry,0,0,Cr,Cr)){const In=nE(pn,bt,Bt,_.vertical||Re,x,24,at,g.overscaling,Cr);for(const on of In){const Mi=Re;Mi&&$_(g,Mi.text,Cn,on)||ln(pn,on)}}else if("line-center"===mn){for(const pn of l.geometry)if(pn.length>1){const In=qw(pn,Bt,_.vertical||Re,x,24,at);In&&ln(pn,In)}}else if("Polygon"===l.type)for(const pn of Xa(l.geometry,0)){const In=Ww(pn,16);ln(pn[0],new Al(In.x,In.y,0))}else if("LineString"===l.type)for(const pn of l.geometry)ln(pn,new Al(pn[0].x,pn[0].y,0));else if("Point"===l.type)for(const pn of l.geometry)for(const In of pn)ln([In],new Al(In.x,In.y,0))}const We=32640;function Zr(g,l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re){const Xe=function(It,Rt,Bt,jt,Ut,mn,Cn,vn){const Tn=[];if(0===Rt.positionedLines.length)return Tn;const ln=jt.layout.get("text-rotate").evaluate(mn,{})*Math.PI/180,pn=function(Xi){const Fi=Xi[0],ti=Xi[1],Wr=Fi*ti;return Wr>0?[Fi,-ti]:Wr<0?[-Fi,ti]:0===Fi?[ti,Fi]:[ti,-Fi]}(Bt);let In=Math.abs(Rt.top-Rt.bottom);for(const Xi of Rt.positionedLines)In-=Xi.lineOffset;const on=Rt.positionedLines.length,Mi=In/on;let gi=Rt.top-Bt[1];for(let Xi=0;Xi<on;++Xi){const Fi=Rt.positionedLines[Xi];gi=Zw(Rt,Mi,gi,Xi);for(const ti of Fi.positionedGlyphs){if(!ti.rect)continue;const Wr=ti.rect||{};let pi=4,Eo=!0,ss=1,To=0;const Ls=(Ut||vn)&&ti.vertical,Oo=ti.metrics.advance*ti.scale/2,mo=ti.metrics,Br=ti.rect;if(null===Br)continue;if(vn&&Rt.verticalizable&&(To=ti.imageName?Oo-ti.metrics.width*ti.scale/2:0),ti.imageName){const lr=Cn[ti.imageName];if(!lr)continue;Eo=lr.sdf,ss=lr.pixelRatio,pi=1/ss}const go=Ut?[ti.x+Oo,ti.y]:[0,0];let Mo=[0,0],Ns=[0,0],eo=!1;Ut||(Ls?(Ns=[ti.x+Oo+pn[0],ti.y+pn[1]-To],eo=!0):Mo=[ti.x+Oo+Bt[0],ti.y+Bt[1]-To]);const Ar=Br.w*ti.scale/(ss*(ti.localGlyph?2:1)),as=Br.h*ti.scale/(ss*(ti.localGlyph?2:1));let Fo,jo,Qs,Yo;if(Ls){const lr=ti.y-gi,ao=new Be(-Oo,Oo-lr),Es=-Math.PI/2,_a=new Be(...Ns);Fo=new Be(-Oo+Mo[0],Mo[1]),Fo._rotateAround(Es,ao)._add(_a),Fo.x+=-lr+Oo,Fo.y-=(mo.left-pi)*ti.scale;const Bh=ti.imageName?mo.advance*ti.scale:24*ti.scale,Sc=String.fromCharCode(ti.glyph);Kf(Sc)?Fo.x+=(1-pi)*ti.scale:eE(Sc)?Fo.x+=Bh-mo.height*ti.scale+(-pi-1)*ti.scale:Fo.x+=ti.imageName||mo.width+2*pi===Br.w&&mo.height+2*pi===Br.h?(Bh-as)/2:(Bh-(mo.height+2*pi)*ti.scale)/2,jo=new Be(Fo.x,Fo.y-Ar),Qs=new Be(Fo.x+as,Fo.y),Yo=new Be(Fo.x+as,Fo.y-Ar)}else{const lr=(mo.left-pi)*ti.scale-Oo+Mo[0],ao=(-mo.top-pi)*ti.scale+Mo[1],Es=lr+Ar,_a=ao+as;Fo=new Be(lr,ao),jo=new Be(Es,ao),Qs=new Be(lr,_a),Yo=new Be(Es,_a)}if(ln){let lr;lr=Ut?new Be(0,0):eo?new Be(pn[0],pn[1]):new Be(Bt[0],Bt[1]),Fo._rotateAround(ln,lr),jo._rotateAround(ln,lr),Qs._rotateAround(ln,lr),Yo._rotateAround(ln,lr)}const Oa=new Be(0,0),Js=new Be(0,0);Tn.push({tl:Fo,tr:jo,bl:Qs,br:Yo,tex:Wr,writingMode:Rt.writingMode,glyphOffset:go,sectionIndex:ti.sectionIndex,isSDF:Eo,pixelOffsetTL:Oa,pixelOffsetBR:Js,minFontScaleX:0,minFontScaleY:0})}}return Tn}(0,_,Z,D,F,B,x,g.allowVerticalPlacement),at=g.textSizeData;let bt=null;"source"===at.kind?(bt=[Qa*D.layout.get("text-size").evaluate(B,{},Re)],bt[0]>We&&mi(`${g.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===at.kind&&(bt=[Qa*Se.compositeTextSizes[0].evaluate(B,{},Re),Qa*Se.compositeTextSizes[1].evaluate(B,{},Re)],(bt[0]>We||bt[1]>We)&&mi(`${g.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),g.addSymbols(g.text,Xe,bt,Z,F,B,re,l,X.lineStartIndex,X.lineLength,_e,Re);for(const It of ce)de[It]=g.text.placedSymbolArray.length-1;return 4*Xe.length}function bd(g){for(const l in g)return g[l];return null}function ff(g,l,_,x,D,F,B,Z,X){let re=F.top,ce=F.bottom,de=F.left,_e=F.right;const Se=F.collisionPadding;if(Se&&(de-=Se[0],re-=Se[1],_e+=Se[2],ce+=Se[3]),Z){const Re=new Be(de,re),Xe=new Be(_e,re),at=new Be(de,ce),bt=new Be(_e,ce),It=zt(Z);let Rt=new Be(0,0);X&&(Rt=new Be(X[0],X[1])),Re._rotateAround(It,Rt),Xe._rotateAround(It,Rt),at._rotateAround(It,Rt),bt._rotateAround(It,Rt),de=Math.min(Re.x,Xe.x,at.x,bt.x),_e=Math.max(Re.x,Xe.x,at.x,bt.x),re=Math.min(Re.y,Xe.y,at.y,bt.y),ce=Math.max(Re.y,Xe.y,at.y,bt.y)}return g.emplaceBack(l.x,l.y,de,re,_e,ce,B,_,x,D),g.length-1}function Sg(g){g.collisionPadding&&(g.top-=g.collisionPadding[1],g.bottom+=g.collisionPadding[3]);const l=g.bottom-g.top;return l>0?Math.max(10,l):null}function $_(g,l,_,x){const D=g.compareText;if(l in D){const F=D[l];for(let B=F.length-1;B>=0;B--)if(x.dist(F[B])<_)return!0}else D[l]=[];return D[l].push(x),!1}const Nx=Oh.VectorTileFeature.types,si=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function im(g,l,_,x,D,F,B,Z,X,re,ce,de,_e){const Se=Z?Math.min(We,Math.round(Z[0])):0,Re=Z?Math.min(We,Math.round(Z[1])):0;g.emplaceBack(l,_,Math.round(32*x),Math.round(32*D),F,B,(Se<<1)+(X?1:0),Re,16*re,16*ce,256*de,256*_e)}function Gi(g,l,_){g.emplaceBack(l.x,l.y,_),g.emplaceBack(l.x,l.y,_),g.emplaceBack(l.x,l.y,_),g.emplaceBack(l.x,l.y,_)}function Vv(g){for(const l of g.sections)if(op(l.text))return!0;return!1}class rm{constructor(l){this.layoutVertexArray=new ho,this.indexArray=new Nr,this.programConfigurations=l,this.segments=new Cs,this.dynamicLayoutVertexArray=new ua,this.opacityVertexArray=new bs,this.placedSymbolArray=new sd}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(l,_,x,D){this.isEmpty()||(x&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,yi.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,_),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,Wi.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,si,!0),this.opacityVertexBuffer.itemSize=1),(x||D)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qn("SymbolBuffers",rm);class gp{constructor(l,_,x){this.layoutVertexArray=new l,this.layoutAttributes=_,this.indexArray=new x,this.segments=new Cs,this.collisionVertexArray=new wi,this.collisionVertexArrayExt=new ua}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,Qo.members,!0),this.collisionVertexBufferExt=l.createVertexBuffer(this.collisionVertexArrayExt,Ml.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}qn("CollisionBuffers",gp);class _p{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(B=>B.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Fs([]),this.placementViewportMatrix=Fs([]);const _=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tv(this.zoom,_["text-size"]),this.iconSizeData=Tv(this.zoom,_["icon-size"]);const x=this.layers[0].layout,D=x.get("symbol-sort-key"),F=x.get("symbol-z-order");this.canOverlap=x.get("text-allow-overlap")||x.get("icon-allow-overlap")||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==F&&void 0!==D.constantOr(1),this.sortFeaturesByY=("viewport-y"===F||"auto"===F&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=x.get("text-writing-mode").map(B=>nu[B]),this.stateDependentLayerIds=this.layers.filter(B=>B.isStateDependent()).map(B=>B.id),this.sourceID=l.sourceID}createArrays(){this.text=new rm(new yc(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new rm(new yc(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new fo,this.lineVertexArray=new Ia,this.symbolInstances=new Ho}calculateGlyphDependencies(l,_,x,D,F){for(let B=0;B<l.length;B++)if(_[l.charCodeAt(B)]=!0,D&&F){const Z=cf[l.charAt(B)];Z&&(_[Z.charCodeAt(0)]=!0)}}populate(l,_,x){const D=this.layers[0],F=D.layout,B=F.get("text-font"),Z=F.get("text-field"),X=F.get("icon-image"),re=("constant"!==Z.value.kind||Z.value.value instanceof Nn&&!Z.value.value.isEmpty()||Z.value.value.toString().length>0)&&("constant"!==B.value.kind||B.value.value.length>0),ce="constant"!==X.value.kind||!!X.value.value||Object.keys(X.parameters).length>0,de=F.get("symbol-sort-key");if(this.features=[],!re&&!ce)return;const _e=_.iconDependencies,Se=_.glyphDependencies,Re=_.availableImages,Xe=new Pe(this.zoom);for(const{feature:at,id:bt,index:It,sourceLayerIndex:Rt}of l){const Bt=D._featureFilter.needGeometry,jt=cd(at,Bt);if(!D._featureFilter.filter(Xe,jt,x))continue;let Ut,mn;if(Bt||(jt.geometry=ld(at)),re){const vn=D.getValueAndResolveTokens("text-field",jt,x,Re),Tn=Nn.factory(vn);Vv(Tn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===fe()||this.hasRTLText&&Ae.isParsed())&&(Ut=Ex(Tn,D,jt))}if(ce){const vn=D.getValueAndResolveTokens("icon-image",jt,x,Re);mn=vn instanceof ei?vn:ei.fromString(vn)}if(!Ut&&!mn)continue;const Cn=this.sortFeaturesByKey?de.evaluate(jt,{},x):void 0;if(this.features.push({id:bt,text:Ut,icon:mn,index:It,sourceLayerIndex:Rt,geometry:jt.geometry,properties:at.properties,type:Nx[at.type],sortKey:Cn}),mn&&(_e[mn.name]=!0),Ut){const vn=B.evaluate(jt,{},x).join(","),Tn="map"===F.get("text-rotation-alignment")&&"point"!==F.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(nu.vertical)>=0;for(const ln of Ut.sections)if(ln.image)_e[ln.image.name]=!0;else{const pn=Yc(Ut.toString()),In=ln.fontStack||vn,on=Se[In]=Se[In]||{};this.calculateGlyphDependencies(ln.text,on,Tn,this.allowVerticalPlacement,pn)}}}"line"===F.get("symbol-placement")&&(this.features=function(at){const bt={},It={},Rt=[];let Bt=0;function jt(vn){Rt.push(at[vn]),Bt++}function Ut(vn,Tn,ln){const pn=It[vn];return delete It[vn],It[Tn]=pn,Rt[pn].geometry[0].pop(),Rt[pn].geometry[0]=Rt[pn].geometry[0].concat(ln[0]),pn}function mn(vn,Tn,ln){const pn=bt[Tn];return delete bt[Tn],bt[vn]=pn,Rt[pn].geometry[0].shift(),Rt[pn].geometry[0]=ln[0].concat(Rt[pn].geometry[0]),pn}function Cn(vn,Tn,ln){const pn=ln?Tn[0][Tn[0].length-1]:Tn[0][0];return`${vn}:${pn.x}:${pn.y}`}for(let vn=0;vn<at.length;vn++){const Tn=at[vn],ln=Tn.geometry,pn=Tn.text?Tn.text.toString():null;if(!pn){jt(vn);continue}const In=Cn(pn,ln),on=Cn(pn,ln,!0);if(In in It&&on in bt&&It[In]!==bt[on]){const Mi=mn(In,on,ln),gi=Ut(In,on,Rt[Mi].geometry);delete bt[In],delete It[on],It[Cn(pn,Rt[gi].geometry,!0)]=gi,Rt[Mi].geometry=null}else In in It?Ut(In,on,ln):on in bt?mn(In,on,ln):(jt(vn),bt[In]=Bt-1,It[on]=Bt-1)}return Rt.filter(vn=>vn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((at,bt)=>at.sortKey-bt.sortKey)}update(l,_,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,_,this.layers,x),this.icon.programConfigurations.updatePaintArrays(l,_,this.layers,x))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,_){const x=this.lineVertexArray.length;if(void 0!==l.segment){let D=l.dist(_[l.segment+1]),F=l.dist(_[l.segment]);const B={};for(let Z=l.segment+1;Z<_.length;Z++)B[Z]={x:_[Z].x,y:_[Z].y,tileUnitDistanceFromAnchor:D},Z<_.length-1&&(D+=_[Z+1].dist(_[Z]));for(let Z=l.segment||0;Z>=0;Z--)B[Z]={x:_[Z].x,y:_[Z].y,tileUnitDistanceFromAnchor:F},Z>0&&(F+=_[Z-1].dist(_[Z]));for(let Z=0;Z<_.length;Z++){const X=B[Z];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(l,_,x,D,F,B,Z,X,re,ce,de,_e){const Se=l.indexArray,Re=l.layoutVertexArray,Xe=l.segments.prepareSegment(4*_.length,Re,Se,this.canOverlap?B.sortKey:void 0),at=this.glyphOffsetArray.length,bt=Xe.vertexLength,It=this.allowVerticalPlacement&&Z===nu.vertical?Math.PI/2:0,Rt=B.text&&B.text.sections;for(let Bt=0;Bt<_.length;Bt++){const{tl:jt,tr:Ut,bl:mn,br:Cn,tex:vn,pixelOffsetTL:Tn,pixelOffsetBR:ln,minFontScaleX:pn,minFontScaleY:In,glyphOffset:on,isSDF:Mi,sectionIndex:gi}=_[Bt],Xi=Xe.vertexLength,Fi=on[1];im(Re,X.x,X.y,jt.x,Fi+jt.y,vn.x,vn.y,x,Mi,Tn.x,Tn.y,pn,In),im(Re,X.x,X.y,Ut.x,Fi+Ut.y,vn.x+vn.w,vn.y,x,Mi,ln.x,Tn.y,pn,In),im(Re,X.x,X.y,mn.x,Fi+mn.y,vn.x,vn.y+vn.h,x,Mi,Tn.x,ln.y,pn,In),im(Re,X.x,X.y,Cn.x,Fi+Cn.y,vn.x+vn.w,vn.y+vn.h,x,Mi,ln.x,ln.y,pn,In),Gi(l.dynamicLayoutVertexArray,X,It),Se.emplaceBack(Xi,Xi+1,Xi+2),Se.emplaceBack(Xi+1,Xi+2,Xi+3),Xe.vertexLength+=4,Xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(on[0]),Bt!==_.length-1&&gi===_[Bt+1].sectionIndex||l.programConfigurations.populatePaintArrays(Re.length,B,B.index,{},_e,Rt&&Rt[gi])}l.placedSymbolArray.emplaceBack(X.x,X.y,at,this.glyphOffsetArray.length-at,bt,re,ce,X.segment,x?x[0]:0,x?x[1]:0,D[0],D[1],Z,0,!1,0,de,0)}_commitLayoutVertex(l,_,x,D,F){l.emplaceBack(_.x,_.y,x,D,Math.round(F.x),Math.round(F.y))}_addCollisionDebugVertices(l,_,x,D,F){const B=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),Z=B.vertexLength,X=F.anchorX,re=F.anchorY;for(let de=0;de<4;de++)x.collisionVertexArray.emplaceBack(0,0,0,0);x.collisionVertexArrayExt.emplaceBack(_,-l.padding,-l.padding),x.collisionVertexArrayExt.emplaceBack(_,l.padding,-l.padding),x.collisionVertexArrayExt.emplaceBack(_,l.padding,l.padding),x.collisionVertexArrayExt.emplaceBack(_,-l.padding,l.padding),this._commitLayoutVertex(x.layoutVertexArray,D,X,re,new Be(l.x1,l.y1)),this._commitLayoutVertex(x.layoutVertexArray,D,X,re,new Be(l.x2,l.y1)),this._commitLayoutVertex(x.layoutVertexArray,D,X,re,new Be(l.x2,l.y2)),this._commitLayoutVertex(x.layoutVertexArray,D,X,re,new Be(l.x1,l.y2)),B.vertexLength+=4;const ce=x.indexArray;ce.emplaceBack(Z,Z+1),ce.emplaceBack(Z+1,Z+2),ce.emplaceBack(Z+2,Z+3),ce.emplaceBack(Z+3,Z),B.primitiveLength+=4}_addTextDebugCollisionBoxes(l,_,x,D,F,B){for(let Z=D;Z<F;Z++){const X=x.get(Z),re=this.getSymbolInstanceTextSize(l,B,_,Z);this._addCollisionDebugVertices(X,re,this.textCollisionBox,X.anchorPoint,B)}}_addIconDebugCollisionBoxes(l,_,x,D,F,B){for(let Z=D;Z<F;Z++){const X=x.get(Z),re=this.getSymbolInstanceIconSize(l,_,Z);this._addCollisionDebugVertices(X,re,this.iconCollisionBox,X.anchorPoint,B)}}generateCollisionDebugBuffers(l,_){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gp(Xo,_d.members,Ps),this.iconCollisionBox=new gp(Xo,_d.members,Ps);const x=Jf(this.iconSizeData,l),D=Jf(this.textSizeData,l);for(let F=0;F<this.symbolInstances.length;F++){const B=this.symbolInstances.get(F);this._addTextDebugCollisionBoxes(D,l,_,B.textBoxStartIndex,B.textBoxEndIndex,B),this._addTextDebugCollisionBoxes(D,l,_,B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B),this._addIconDebugCollisionBoxes(x,l,_,B.iconBoxStartIndex,B.iconBoxEndIndex,B),this._addIconDebugCollisionBoxes(x,l,_,B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex,B)}}getSymbolInstanceTextSize(l,_,x,D){const F=this.text.placedSymbolArray.get(_.rightJustifiedTextSymbolIndex>=0?_.rightJustifiedTextSymbolIndex:_.centerJustifiedTextSymbolIndex>=0?_.centerJustifiedTextSymbolIndex:_.leftJustifiedTextSymbolIndex>=0?_.leftJustifiedTextSymbolIndex:_.verticalPlacedTextSymbolIndex>=0?_.verticalPlacedTextSymbolIndex:D),B=hp(this.textSizeData,l,F)/24;return this.tilePixelRatio*B}getSymbolInstanceIconSize(l,_,x){const D=this.icon.placedSymbolArray.get(x),F=hp(this.iconSizeData,l,D);return this.tilePixelRatio*F}_commitDebugCollisionVertexUpdate(l,_,x){l.emplaceBack(_,-x,-x),l.emplaceBack(_,x,-x),l.emplaceBack(_,x,x),l.emplaceBack(_,-x,x)}_updateTextDebugCollisionBoxes(l,_,x,D,F,B){for(let Z=D;Z<F;Z++){const X=x.get(Z),re=this.getSymbolInstanceTextSize(l,B,_,Z);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,re,X.padding)}}_updateIconDebugCollisionBoxes(l,_,x,D,F){for(let B=D;B<F;B++){const Z=x.get(B),X=this.getSymbolInstanceIconSize(l,_,B);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,X,Z.padding)}}updateCollisionDebugBuffers(l,_){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const x=Jf(this.iconSizeData,l),D=Jf(this.textSizeData,l);for(let F=0;F<this.symbolInstances.length;F++){const B=this.symbolInstances.get(F);this._updateTextDebugCollisionBoxes(D,l,_,B.textBoxStartIndex,B.textBoxEndIndex,B),this._updateTextDebugCollisionBoxes(D,l,_,B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B),this._updateIconDebugCollisionBoxes(x,l,_,B.iconBoxStartIndex,B.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(x,l,_,B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(l,_,x,D,F,B,Z,X,re){const ce={};for(let de=_;de<x;de++){const _e=l.get(de);ce.textBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,padding:_e.padding,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ce.textFeatureIndex=_e.featureIndex;break}for(let de=D;de<F;de++){const _e=l.get(de);ce.verticalTextBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,padding:_e.padding,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ce.verticalTextFeatureIndex=_e.featureIndex;break}for(let de=B;de<Z;de++){const _e=l.get(de);ce.iconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,padding:_e.padding,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ce.iconFeatureIndex=_e.featureIndex;break}for(let de=X;de<re;de++){const _e=l.get(de);ce.verticalIconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,padding:_e.padding,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ce.verticalIconFeatureIndex=_e.featureIndex;break}return ce}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let _=0;_<this.symbolInstances.length;_++){const x=this.symbolInstances.get(_);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,_){const x=l.placedSymbolArray.get(_),D=x.vertexStartIndex+4*x.numGlyphs;for(let F=x.vertexStartIndex;F<D;F+=4)l.indexArray.emplaceBack(F,F+1,F+2),l.indexArray.emplaceBack(F+1,F+2,F+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const _=Math.sin(l),x=Math.cos(l),D=[],F=[],B=[];for(let Z=0;Z<this.symbolInstances.length;++Z){B.push(Z);const X=this.symbolInstances.get(Z);D.push(0|Math.round(_*X.anchorX+x*X.anchorY)),F.push(X.featureIndex)}return B.sort((Z,X)=>D[Z]-D[X]||F[X]-F[Z]),B}addToSortKeyRanges(l,_){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===_?x.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:_,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const _ of this.symbolInstanceIndexes){const x=this.symbolInstances.get(_);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((D,F,B)=>{D>=0&&B.indexOf(D)===F&&this.addIndicesForPlacedSymbol(this.text,D)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}qn("SymbolBucket",_p,{omit:["layers","collisionBoxArray","features","compareText"]}),_p.MAX_GLYPHS=65535,_p.addDynamicAttributes=Gi;const X_=new ut({"symbol-placement":new rt(y.layout_symbol["symbol-placement"]),"symbol-spacing":new rt(y.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new rt(y.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ht(y.layout_symbol["symbol-sort-key"]),"symbol-z-order":new rt(y.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new rt(y.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new rt(y.layout_symbol["icon-ignore-placement"]),"icon-optional":new rt(y.layout_symbol["icon-optional"]),"icon-rotation-alignment":new rt(y.layout_symbol["icon-rotation-alignment"]),"icon-size":new ht(y.layout_symbol["icon-size"]),"icon-text-fit":new rt(y.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new rt(y.layout_symbol["icon-text-fit-padding"]),"icon-image":new ht(y.layout_symbol["icon-image"]),"icon-rotate":new ht(y.layout_symbol["icon-rotate"]),"icon-padding":new rt(y.layout_symbol["icon-padding"]),"icon-keep-upright":new rt(y.layout_symbol["icon-keep-upright"]),"icon-offset":new ht(y.layout_symbol["icon-offset"]),"icon-anchor":new ht(y.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new rt(y.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new rt(y.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new rt(y.layout_symbol["text-rotation-alignment"]),"text-field":new ht(y.layout_symbol["text-field"]),"text-font":new ht(y.layout_symbol["text-font"]),"text-size":new ht(y.layout_symbol["text-size"]),"text-max-width":new ht(y.layout_symbol["text-max-width"]),"text-line-height":new ht(y.layout_symbol["text-line-height"]),"text-letter-spacing":new ht(y.layout_symbol["text-letter-spacing"]),"text-justify":new ht(y.layout_symbol["text-justify"]),"text-radial-offset":new ht(y.layout_symbol["text-radial-offset"]),"text-variable-anchor":new rt(y.layout_symbol["text-variable-anchor"]),"text-anchor":new ht(y.layout_symbol["text-anchor"]),"text-max-angle":new rt(y.layout_symbol["text-max-angle"]),"text-writing-mode":new rt(y.layout_symbol["text-writing-mode"]),"text-rotate":new ht(y.layout_symbol["text-rotate"]),"text-padding":new rt(y.layout_symbol["text-padding"]),"text-keep-upright":new rt(y.layout_symbol["text-keep-upright"]),"text-transform":new ht(y.layout_symbol["text-transform"]),"text-offset":new ht(y.layout_symbol["text-offset"]),"text-allow-overlap":new rt(y.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new rt(y.layout_symbol["text-ignore-placement"]),"text-optional":new rt(y.layout_symbol["text-optional"])});var Uv={paint:new ut({"icon-opacity":new ht(y.paint_symbol["icon-opacity"]),"icon-color":new ht(y.paint_symbol["icon-color"]),"icon-halo-color":new ht(y.paint_symbol["icon-halo-color"]),"icon-halo-width":new ht(y.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ht(y.paint_symbol["icon-halo-blur"]),"icon-translate":new rt(y.paint_symbol["icon-translate"]),"icon-translate-anchor":new rt(y.paint_symbol["icon-translate-anchor"]),"text-opacity":new ht(y.paint_symbol["text-opacity"]),"text-color":new ht(y.paint_symbol["text-color"],{runtimeType:ge,getOverride:g=>g.textColor,hasOverride:g=>!!g.textColor}),"text-halo-color":new ht(y.paint_symbol["text-halo-color"]),"text-halo-width":new ht(y.paint_symbol["text-halo-width"]),"text-halo-blur":new ht(y.paint_symbol["text-halo-blur"]),"text-translate":new rt(y.paint_symbol["text-translate"]),"text-translate-anchor":new rt(y.paint_symbol["text-translate-anchor"])}),layout:X_};class Bx{constructor(l){this.type=l.property.overrides?l.property.overrides.runtimeType:te,this.defaultValue=l}evaluate(l){if(l.formattedSection){const _=this.defaultValue.property.overrides;if(_&&_.hasOverride(l.formattedSection))return _.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qn("FormatSectionOverride",Bx,{omit:["defaultValue"]});class Ka extends Yl{constructor(l){super(l,Uv)}recalculate(l,_){super.recalculate(l,_),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const x=this.layout.get("text-writing-mode");if(x){const D=[];for(const F of x)D.indexOf(F)<0&&D.push(F);this.layout._values["text-writing-mode"]=D}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(l,_,x,D){const F=this.layout.get(l).evaluate(_,{},x,D),B=this._unevaluatedLayout._values[l];return B.isDataDriven()||ka(B.value)||!F?F:(Z=_.properties,F.replace(/{([^{}]+)}/g,(re,ce)=>ce in Z?String(Z[ce]):""));var Z}createBucket(l){return new _p(l)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const l of Uv.paint.overridableProperties){if(!Ka.hasPaintOverride(this.layout,l))continue;const _=this.paint.get(l),x=new Bx(_),D=new Wd(x,_.property.specification);let F=null;F="constant"===_.value.kind||"source"===_.value.kind?new gl("source",D):new _l("composite",D,_.value.zoomStops,_.value._interpolationType),this.paint._values[l]=new ot(_.property,F,_.parameters)}}_handleOverridablePaintPropertyUpdate(l,_,x){return!(!this.layout||_.isDataDriven()||x.isDataDriven())&&Ka.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,_){const x=l.get("text-field"),D=Uv.paint.properties[_];let F=!1;const B=Z=>{for(const X of Z)if(D.overrides&&D.overrides.hasOverride(X))return void(F=!0)};if("constant"===x.value.kind&&x.value.value instanceof Nn)B(x.value.value.sections);else if("source"===x.value.kind){const Z=re=>{F||(re instanceof No&&Tr(re.value)===Ke?B(re.value.sections):re instanceof ro?B(re.sections):re.eachChild(Z))},X=x.value;X._styleExpression&&Z(X._styleExpression.expression)}return F}getProgramConfiguration(l){return new Ws(this,l)}}var Ra={paint:new ut({"background-color":new rt(y.paint_background["background-color"]),"background-pattern":new sn(y.paint_background["background-pattern"]),"background-opacity":new rt(y.paint_background["background-opacity"])})},Q_={paint:new ut({"raster-opacity":new rt(y.paint_raster["raster-opacity"]),"raster-hue-rotate":new rt(y.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new rt(y.paint_raster["raster-brightness-min"]),"raster-brightness-max":new rt(y.paint_raster["raster-brightness-max"]),"raster-saturation":new rt(y.paint_raster["raster-saturation"]),"raster-contrast":new rt(y.paint_raster["raster-contrast"]),"raster-resampling":new rt(y.paint_raster["raster-resampling"]),"raster-fade-duration":new rt(y.paint_raster["raster-fade-duration"])})};class el extends Yl{constructor(l){super(l,{}),this.implementation=l}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(l){this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)}onRemove(l){this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)}}var mf={paint:new ut({"sky-type":new rt(y.paint_sky["sky-type"]),"sky-atmosphere-sun":new rt(y.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new rt(y.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new rt(y.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new rt(y.paint_sky["sky-gradient-radius"]),"sky-gradient":new un(y.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new rt(y.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new rt(y.paint_sky["sky-atmosphere-color"]),"sky-opacity":new rt(y.paint_sky["sky-opacity"])})};function J_(g,l,_){const x=Ya(0,0,1),D=Ss(Mh());return function(F,B,Z){Z*=.5;var X=B[0],re=B[1],ce=B[2],de=B[3],_e=Math.sin(Z),Se=Math.cos(Z);F[0]=X*Se-ce*_e,F[1]=re*Se+de*_e,F[2]=ce*Se+X*_e,F[3]=de*Se-re*_e}(D,D,_?-zt(g)+Math.PI:zt(g)),xc(D,D,-zt(l)),lg(x,x,D),jf(x,x)}const rE={circle:class extends Yl{constructor(g){super(g,P_)}createBucket(g){return new ja(g)}queryRadius(g){const l=g;return Sl("circle-radius",this,l)+Sl("circle-stroke-width",this,l)+ig(this.paint.get("circle-translate"))}queryIntersectsFeature(g,l,_,x,D,F,B,Z){const X="map"===this.paint.get("circle-pitch-alignment");if(X&&g.queryGeometry.isAboveHorizon)return!1;const re=rg(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),F.angle,g.pixelToTileUnitsFactor),ce=this.paint.get("circle-radius").evaluate(l,_)+this.paint.get("circle-stroke-width").evaluate(l,_),de=X?ce*g.pixelToTileUnitsFactor:ce;for(const _e of x)for(const Se of _e){const Re=Se.add(re),Xe=Z&&F.elevation?F.elevation.exaggeration()*Z.getElevationAt(Re.x,Re.y,!0):0,at=X?Re:Jp(Re,Xe,B),bt=X?g.tilespaceRays.map(Bt=>sp(Bt,Xe)):g.queryGeometry.screenGeometry;let It=de;const Rt=dd([],[Se.x,Se.y,Xe,1],B);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?It*=Rt[3]/F.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(It*=F.cameraToCenterDistance/Rt[3]),Cl(bt,at,It))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(g){return new Ws(this,g)}},heatmap:class extends Yl{createBucket(g){return new ef(g)}constructor(g){super(g,Sv),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(g){"heatmap-color"===g&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ap({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(g){return new Ws(this,g)}},hillshade:class extends Yl{constructor(g){super(g,cg)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(g){return new Ws(this,g)}},fill:class extends Yl{constructor(g){super(g,gg)}getProgramIds(){const g=this.paint.get("fill-pattern"),l=g&&g.constantOr(1),_=[l?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&_.push(l&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),_}getProgramConfiguration(g){return new Ws(this,g)}recalculate(g,l){super.recalculate(g,l);const _=this.paint._values["fill-outline-color"];"constant"===_.value.kind&&void 0===_.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(g){return new Kc(g)}queryRadius(){return ig(this.paint.get("fill-translate"))}queryIntersectsFeature(g,l,_,x,D,F){return!g.queryGeometry.isAboveHorizon&&vc(Xp(g.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),F.angle,g.pixelToTileUnitsFactor),x)}isTileClipped(){return!0}},"fill-extrusion":class extends Yl{constructor(g){super(g,E)}createBucket(g){return new Pa(g)}queryRadius(){return ig(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(g){return new Ws(this,g)}queryIntersectsFeature(g,l,_,x,D,F,B,Z,X){const re=rg(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),F.angle,g.pixelToTileUnitsFactor),ce=this.paint.get("fill-extrusion-height").evaluate(l,_),de=this.paint.get("fill-extrusion-base").evaluate(l,_),_e=[0,0],Se=Z&&F.elevation,Re=F.elevation?F.elevation.exaggeration():1;if(Se){const bt=g.tile.getBucket(this).centroidVertexArray,It=X+1;if(It<bt.length){const Rt=bt.get(It);_e[0]=Rt.a_centroid_pos0,_e[1]=Rt.a_centroid_pos1}}if(0===_e[0]&&1===_e[1])return!1;const Xe=(bt=x,It=de,Rt=ce,Bt=re,jt=B,(Ut=Se?Z:null)?function(Tn,ln,pn,In,on,Mi,gi,Xi,Fi){const ti=[],Wr=[],pi=[0,0,0,1];for(const Eo of Tn){const ss=[],To=[];for(const Ls of Eo){const Oo=Ls.x+In.x,mo=Ls.y+In.y,Br=Q(Oo,mo,ln,pn,Mi,gi,Xi,Fi);pi[0]=Oo,pi[1]=mo,pi[2]=Br.base,pi[3]=1,dd(pi,pi,on),pi[3]=Math.max(pi[3],1e-5);const go=V([pi[0]/pi[3],pi[1]/pi[3],pi[2]/pi[3]]);pi[0]=Oo,pi[1]=mo,pi[2]=Br.top,pi[3]=1,dd(pi,pi,on),pi[3]=Math.max(pi[3],1e-5);const Mo=V([pi[0]/pi[3],pi[1]/pi[3],pi[2]/pi[3]]);ss.push(go),To.push(Mo)}ti.push(ss),Wr.push(To)}return[ti,Wr]}(bt,It,Rt,Bt,jt,Ut,_e,Re,F.center.lat):function(Tn,ln,pn,In,on){const Mi=[],gi=[],Xi=on[8]*ln,Fi=on[9]*ln,ti=on[10]*ln,Wr=on[11]*ln,pi=on[8]*pn,Eo=on[9]*pn,ss=on[10]*pn,To=on[11]*pn;for(const Ls of Tn){const Oo=[],mo=[];for(const Br of Ls){const go=Br.x+In.x,Mo=Br.y+In.y,Ns=on[0]*go+on[4]*Mo+on[12],eo=on[1]*go+on[5]*Mo+on[13],Ar=on[2]*go+on[6]*Mo+on[14],as=on[3]*go+on[7]*Mo+on[15],Fo=Ns+Xi,jo=eo+Fi,Qs=Ar+ti,Yo=Math.max(as+Wr,1e-5),Oa=Ns+pi,Js=eo+Eo,lr=Ar+ss,ao=Math.max(as+To,1e-5),Es=new Be(Fo/Yo,jo/Yo);Es.z=Qs/Yo,Oo.push(Es);const _a=new Be(Oa/ao,Js/ao);_a.z=lr/ao,mo.push(_a)}Mi.push(Oo),gi.push(mo)}return[Mi,gi]}(bt,It,Rt,Bt,jt)),at=g.queryGeometry;var bt,It,Rt,Bt,jt,Ut;return function(bt,It,Rt){let Bt=1/0;vc(Rt,It)&&(Bt=I(Rt,It[0]));for(let jt=0;jt<It.length;jt++){const Ut=It[jt],mn=bt[jt];for(let Cn=0;Cn<Ut.length-1;Cn++){const vn=Ut[Cn],Tn=[vn,Ut[Cn+1],mn[Cn+1],mn[Cn],vn];Th(Rt,Tn)&&(Bt=Math.min(Bt,I(Rt,Tn)))}}return Bt!==1/0&&Bt}(Xe[0],Xe[1],at.isPointQuery()?at.screenBounds:at.screenGeometry)}},line:class extends Yl{constructor(g){super(g,Mn),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(g){if("line-gradient"===g){const l=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=l._styleExpression&&l._styleExpression.expression instanceof Hs,this.gradientVersion=(this.gradientVersion+1)%Et}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(g,l){super.recalculate(g,l),this.paint._values["line-floorwidth"]=Wn.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,g)}createBucket(g){return new Wt(g)}getProgramIds(){const g=this.paint.get("line-dasharray"),l=this.paint.get("line-pattern").constantOr(1),_=this.paint.get("line-gradient");return[l?"linePattern":g?"lineSDF":_?"lineGradient":"line"]}getProgramConfiguration(g){return new Ws(this,g)}queryRadius(g){const l=g,_=Pi(Sl("line-width",this,l),Sl("line-gap-width",this,l)),x=Sl("line-offset",this,l);return _/2+Math.abs(x)+ig(this.paint.get("line-translate"))}queryIntersectsFeature(g,l,_,x,D,F){if(g.queryGeometry.isAboveHorizon)return!1;const B=Xp(g.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),F.angle,g.pixelToTileUnitsFactor),Z=g.pixelToTileUnitsFactor/2*Pi(this.paint.get("line-width").evaluate(l,_),this.paint.get("line-gap-width").evaluate(l,_)),X=this.paint.get("line-offset").evaluate(l,_);return X&&(x=function(re,ce){const de=[],_e=new Be(0,0);for(let Se=0;Se<re.length;Se++){const Re=re[Se],Xe=[];for(let at=0;at<Re.length;at++){const bt=Re[at-1],It=Re[at],Rt=Re[at+1],Bt=0===at?_e:It.sub(bt)._unit()._perp(),jt=at===Re.length-1?_e:Rt.sub(It)._unit()._perp(),Ut=Bt._add(jt)._unit();Ut._mult(1/(Ut.x*jt.x+Ut.y*jt.y)),Xe.push(Ut._mult(ce)._add(It))}de.push(Xe)}return de}(x,X*g.pixelToTileUnitsFactor)),function(re,ce,de){for(let _e=0;_e<ce.length;_e++){const Se=ce[_e];if(re.length>=3)for(let Re=0;Re<Se.length;Re++)if(Zl(re,Se[Re]))return!0;if(D_(re,Se,de))return!0}return!1}(B,x,Z)}isTileClipped(){return!0}},symbol:Ka,background:class extends Yl{constructor(g){super(g,Ra)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Yl{constructor(g){super(g,Q_)}getProgramIds(){return["raster"]}},sky:class extends Yl{constructor(g){super(g,mf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(g){"sky-gradient"===g?this._updateColorRamp():"sky-atmosphere-sun"!==g&&"sky-atmosphere-halo-color"!==g&&"sky-atmosphere-color"!==g&&"sky-atmosphere-sun-intensity"!==g||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=ap({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(g){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const l=g.style.light.properties.get("position");return this._lightPosition.azimuthal!==l.azimuthal||this._lightPosition.polar!==l.polar}}getCenter(g,l){const _=this.paint.get("sky-type");if("atmosphere"===_){const x=this.paint.get("sky-atmosphere-sun"),D=!x,F=g.style.light,B=F.properties.get("position");return D&&"viewport"===F.properties.get("anchor")&&mi("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),D?J_(B.azimuthal,90-B.polar,l):J_(x[0],90-x[1],l)}if("gradient"===_){const x=this.paint.get("sky-gradient-center");return J_(x[0],90-x[1],l)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(g){this._skyboxInvalidated=!1,this._lightPosition=g.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const g=this.paint.get("sky-type");return"atmosphere"===g?["skyboxCapture","skybox"]:"gradient"===g?["skyboxGradient"]:null}}},{HTMLImageElement:Hv,HTMLCanvasElement:Eg,HTMLVideoElement:Gv,ImageData:jv,ImageBitmap:om}=Ve;class gf{constructor(l,_,x,D){this.context=l,this.format=x,this.texture=l.gl.createTexture(),this.update(_,D)}update(l,_,x){const{width:D,height:F}=l,B=!(this.size&&this.size[0]===D&&this.size[1]===F||x),{context:Z}=this,{gl:X}=Z;if(this.useMipmap=Boolean(_&&_.useMipmap),X.bindTexture(X.TEXTURE_2D,this.texture),Z.pixelStoreUnpackFlipY.set(!1),Z.pixelStoreUnpack.set(1),Z.pixelStoreUnpackPremultiplyAlpha.set(this.format===X.RGBA&&(!_||!1!==_.premultiply)),B)this.size=[D,F],l instanceof Hv||l instanceof Eg||l instanceof Gv||l instanceof jv||om&&l instanceof om?X.texImage2D(X.TEXTURE_2D,0,this.format,this.format,X.UNSIGNED_BYTE,l):X.texImage2D(X.TEXTURE_2D,0,this.format,D,F,0,this.format,X.UNSIGNED_BYTE,l.data);else{const{x:re,y:ce}=x||{x:0,y:0};l instanceof Hv||l instanceof Eg||l instanceof Gv||l instanceof jv||om&&l instanceof om?X.texSubImage2D(X.TEXTURE_2D,0,re,ce,X.RGBA,X.UNSIGNED_BYTE,l):X.texSubImage2D(X.TEXTURE_2D,0,re,ce,D,F,X.RGBA,X.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&X.generateMipmap(X.TEXTURE_2D)}bind(l,_,x){const{context:D}=this,{gl:F}=D;F.bindTexture(F.TEXTURE_2D,this.texture),x!==F.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(x=F.LINEAR),l!==this.filter&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,l),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,x||l),this.filter=l),_!==this.wrap&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,_),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,_),this.wrap=_)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class xd{constructor(l,_){l&&(_?this.setSouthWest(l).setNorthEast(_):4===l.length?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1]))}setNorthEast(l){return this._ne=l instanceof So?new So(l.lng,l.lat):So.convert(l),this}setSouthWest(l){return this._sw=l instanceof So?new So(l.lng,l.lat):So.convert(l),this}extend(l){const _=this._sw,x=this._ne;let D,F;if(l instanceof So)D=l,F=l;else{if(!(l instanceof xd))return Array.isArray(l)?4===l.length||l.every(Array.isArray)?this.extend(xd.convert(l)):this.extend(So.convert(l)):this;if(D=l._sw,F=l._ne,!D||!F)return this}return _||x?(_.lng=Math.min(D.lng,_.lng),_.lat=Math.min(D.lat,_.lat),x.lng=Math.max(F.lng,x.lng),x.lat=Math.max(F.lat,x.lat)):(this._sw=new So(D.lng,D.lat),this._ne=new So(F.lng,F.lat)),this}getCenter(){return new So((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new So(this.getWest(),this.getNorth())}getSouthEast(){return new So(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:_,lat:x}=So.convert(l);let D=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(D=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&D}static convert(l){return!l||l instanceof xd?l:new xd(l)}}const tl=6371008.8;class So{constructor(l,_){if(isNaN(l)||isNaN(_))throw new Error(`Invalid LngLat object: (${l}, ${_})`);if(this.lng=+l,this.lat=+_,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new So(Vi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const _=Math.PI/180,x=this.lat*_,D=l.lat*_,F=Math.sin(x)*Math.sin(D)+Math.cos(x)*Math.cos(D)*Math.cos((l.lng-this.lng)*_);return tl*Math.acos(Math.min(F,1))}toBounds(l=0){const _=360*l/40075017,x=_/Math.cos(Math.PI/180*this.lat);return new xd(new So(this.lng-x,this.lat-_),new So(this.lng+x,this.lat+_))}static convert(l){if(l instanceof So)return l;if(Array.isArray(l)&&(2===l.length||3===l.length))return new So(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&"object"==typeof l&&null!==l)return new So(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const nl=2*Math.PI*tl;function Yv(g){return nl*Math.cos(g*Math.PI/180)}function K_(g){return(180+g)/360}function Tg(g){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g*Math.PI/360)))/360}function ey(g,l){return g/Yv(l)}function Xl(g){return 360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90}function sm(g,l){return g*Yv(Xl(l))}class yp{constructor(l,_,x=0){this.x=+l,this.y=+_,this.z=+x}static fromLngLat(l,_=0){const x=So.convert(l);return new yp(K_(x.lng),Tg(x.lat),ey(_,x.lat))}toLngLat(){return new So(360*this.x-180,Xl(this.y))}toAltitude(){return sm(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/nl*(l=Xl(this.y),1/Math.cos(l*Math.PI/180));var l}}class qv{constructor(l,_){this.width=l,this.height=_,this.nextRow=0,this.image=new Ah({width:l,height:_}),this.positions={},this.uploaded=!1}getDash(l,_){const x=this.getKey(l,_);return this.positions[x]}trim(){const l=this.width,_=this.height=Zt(this.nextRow);this.image.resize({width:l,height:_})}getKey(l,_){return l.join(",")+_}getDashRanges(l,_,x){const D=[];let F=l.length%2==1?-l[l.length-1]*x:0,B=l[0]*x,Z=!0;D.push({left:F,right:B,isDash:Z,zeroLength:0===l[0]});let X=l[0];for(let re=1;re<l.length;re++){Z=!Z;const ce=l[re];F=X*x,X+=ce,B=X*x,D.push({left:F,right:B,isDash:Z,zeroLength:0===ce})}return D}addRoundDash(l,_,x){const D=_/2;for(let F=-x;F<=x;F++){const B=this.width*(this.nextRow+x+F);let Z=0,X=l[Z];for(let re=0;re<this.width;re++){re/X.right>1&&(X=l[++Z]);const ce=Math.abs(re-X.left),de=Math.abs(re-X.right),_e=Math.min(ce,de);let Se;const Re=F/x*(D+1);if(X.isDash){const Xe=D-Math.abs(Re);Se=Math.sqrt(_e*_e+Xe*Xe)}else Se=D-Math.sqrt(_e*_e+Re*Re);this.image.data[B+re]=Math.max(0,Math.min(255,Se+128))}}}addRegularDash(l,_){for(let X=l.length-1;X>=0;--X){const re=l[X],ce=l[X+1];re.zeroLength?l.splice(X,1):ce&&ce.isDash===re.isDash&&(ce.left=re.left,l.splice(X,1))}const x=l[0],D=l[l.length-1];x.isDash===D.isDash&&(x.left=D.left-this.width,D.right=x.right+this.width);const F=this.width*this.nextRow;let B=0,Z=l[B];for(let X=0;X<this.width;X++){X/Z.right>1&&(Z=l[++B]);const re=Math.abs(X-Z.left),ce=Math.abs(X-Z.right),de=Math.min(re,ce);this.image.data[F+X]=Math.max(0,Math.min(255,(Z.isDash?de:-de)+_+128))}}addDash(l,_){const x=this.getKey(l,_);if(this.positions[x])return this.positions[x];const D="round"===_,F=D?7:0,B=2*F+1;if(this.nextRow+B>this.height)return mi("LineAtlas out of space"),null;0===l.length&&l.push(1);let Z=0;for(let ce=0;ce<l.length;ce++)l[ce]<0&&(mi("Negative value is found in line dasharray, replacing values with 0"),l[ce]=0),Z+=l[ce];if(0!==Z){const ce=this.width/Z,de=this.getDashRanges(l,this.width,ce);D?this.addRoundDash(de,ce,F):this.addRegularDash(de,"square"===_?.5*ce:0)}const X=this.nextRow+F;this.nextRow+=B;const re={tl:[X,F],br:[Z,0]};return this.positions[x]=re,re}}qn("LineAtlas",qv);class oE{constructor(l){this._callback=l,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const _f=Ve.performance;function Zv(g){const l=g?g.url.toString():void 0;return _f.getEntriesByName(l)}class Wv{constructor(){this.tasks={},this.taskQueue=[],$t(["process"],this),this.invoker=new oE(this.process),this.nextId=0}add(l,_){const x=this.nextId++,D=function({type:F,isSymbolTile:B,zoom:Z}){return Z=Z||0,"message"===F?0:"maybePrepare"!==F||B?"parseTile"!==F||B?"parseTile"===F&&B?300-Z:"maybePrepare"===F&&B?400-Z:500:200-Z:100-Z}(_);if(0===D){Hn();try{l()}finally{}return{cancel:()=>{}}}return this.tasks[x]={fn:l,metadata:_,priority:D,id:x},this.taskQueue.push(x),this.invoker.trigger(),{cancel:()=>{delete this.tasks[x]}}}process(){Hn();try{if(this.taskQueue=this.taskQueue.filter(x=>!!this.tasks[x]),!this.taskQueue.length)return;const l=this.pick();if(null===l)return;const _=this.tasks[l];if(delete this.tasks[l],this.taskQueue.length&&this.invoker.trigger(),!_)return;_.fn()}finally{}}pick(){let l=null,_=1/0;for(let D=0;D<this.taskQueue.length;D++){const F=this.tasks[this.taskQueue[D]];F.priority<_&&(_=F.priority,l=D)}if(null===l)return null;const x=this.taskQueue[l];return this.taskQueue.splice(l,1),x}remove(){this.invoker.remove()}}function $v(g,l,_){var x=2*Math.PI*6378137/256/Math.pow(2,_);return[g*x-2*Math.PI*6378137/2,l*x-2*Math.PI*6378137/2]}class Mg{constructor(l,_,x){this.z=l,this.x=_,this.y=x,this.key=Nh(0,l,l,_,x)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,_){const x=(F=this.y,B=this.z,Z=$v(256*(D=this.x),256*(F=Math.pow(2,B)-F-1),B),X=$v(256*(D+1),256*(F+1),B),Z[0]+","+Z[1]+","+X[0]+","+X[1]);var D,F,B,Z,X;const re=function(ce,de,_e){let Se,Re="";for(let Xe=ce;Xe>0;Xe--)Se=1<<Xe-1,Re+=(de&Se?1:0)+(_e&Se?2:0);return Re}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===_?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",re).replace("{bbox-epsg-3857}",x)}getTilePoint(l){const _=Math.pow(2,this.z);return new Be((l.x*_-this.x)*Cr,(l.y*_-this.y)*Cr)}getTileVec3(l){const _=Math.pow(2,this.z);return Ya((l.x*_-this.x)*Cr,(l.y*_-this.y)*Cr,sm(l.z,l.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class Xv{constructor(l,_){this.wrap=l,this.canonical=_,this.key=Nh(l,_.z,_.z,_.x,_.y)}}class ma{constructor(l,_,x,D,F){this.overscaledZ=l,this.wrap=_,this.canonical=new Mg(x,+D,+F),this.key=0===_&&l===x?this.canonical.key:Nh(_,l,x,D,F)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){const _=this.canonical.z-l;return l>this.canonical.z?new ma(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ma(l,this.wrap,l,this.canonical.x>>_,this.canonical.y>>_)}calculateScaledKey(l,_=!0){if(this.overscaledZ===l&&_)return this.key;if(l>this.canonical.z)return Nh(this.wrap*+_,l,this.canonical.z,this.canonical.x,this.canonical.y);{const x=this.canonical.z-l;return Nh(this.wrap*+_,l,l,this.canonical.x>>x,this.canonical.y>>x)}}isChildOf(l){if(l.wrap!==this.wrap)return!1;const _=this.canonical.z-l.canonical.z;return 0===l.overscaledZ||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>_&&l.canonical.y===this.canonical.y>>_}children(l){if(this.overscaledZ>=l)return[new ma(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const _=this.canonical.z+1,x=2*this.canonical.x,D=2*this.canonical.y;return[new ma(_,this.wrap,_,x,D),new ma(_,this.wrap,_,x+1,D),new ma(_,this.wrap,_,x,D+1),new ma(_,this.wrap,_,x+1,D+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new ma(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new ma(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Xv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new yp(l.x-this.wrap,l.y))}getTileVec3(l){return this.canonical.getTileVec3(new yp(l.x-this.wrap,l.y,l.z))}}function Nh(g,l,_,x,D){const F=1<<Math.min(_,22);let B=F*(D%F)+x%F;return g&&_<22&&(B+=F*F*((g<0?-2*g-1:2*g)%(1<<2*(22-_)))),16*(32*B+_)+(l-_)}qn("CanonicalTileID",Mg),qn("OverscaledTileID",ma,{omit:["projMatrix"]});class am{constructor(l){this._stringToNumber={},this._numberToString=[];for(let _=0;_<l.length;_++){const x=l[_];this._stringToNumber[x]=_,this._numberToString[_]=x}}encode(l){return this._stringToNumber[l]}decode(l){return this._numberToString[l]}}class ty{constructor(l,_,x,D,F){this.type="Feature",this._vectorTileFeature=l,l._z=_,l._x=x,l._y=D,this.properties=l.properties,this.id=F}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const _ in this)"_geometry"!==_&&"_vectorTileFeature"!==_&&(l[_]=this[_]);return l}}var Qv=kn([{name:"a_pos",type:"Int16",components:2}]);class ny{constructor(l,_,x){this.tileID=l,this.uid=Ji(),this.uses=0,this.tileSize=_,this.tileZoom=x,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const _=l+this.timeAdded;_<Or.now()||this.fadeEndTime&&_<this.fadeEndTime||(this.fadeEndTime=_)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(l,_,x){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(D,F){const B={};if(!F)return B;for(const Z of D){const X=Z.layerIds.map(re=>F.getLayer(re)).filter(Boolean);if(0!==X.length){Z.layers=X,Z.stateDependentLayerIds&&(Z.stateDependentLayers=Z.stateDependentLayerIds.map(re=>X.filter(ce=>ce.id===re)[0]));for(const re of X)B[re.id]=Z}}return B}(l.buckets,_.style),this.hasSymbolBuckets=!1;for(const D in this.buckets){const F=this.buckets[D];if(F instanceof _p){if(this.hasSymbolBuckets=!0,!x)break;F.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const D in this.buckets){const F=this.buckets[D];if(F instanceof _p&&F.hasRTLText){this.hasRTLText=!0,Ae.isLoading()||Ae.isLoaded()||"deferred"!==fe()||Ce();break}}this.queryPadding=0;for(const D in this.buckets){const F=this.buckets[D];this.queryPadding=Math.max(this.queryPadding,_.style.getLayer(D).queryRadius(F))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas)}else this.collisionBoxArray=new Zc}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const x in this.buckets){const D=this.buckets[x];D.uploadPending()&&D.upload(l)}const _=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new gf(l,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new gf(l,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new gf(l,this.lineAtlas.image,_.ALPHA),this.lineAtlas.uploaded=!0)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,_,x,D,F,B,Z,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:D,pixelPosMatrix:Z,transform:B,params:F},l,_,x):{}}querySourceFeatures(l,_){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const D=x.loadVTLayers(),F=_?_.sourceLayer:"",B=D._geojsonTileLayer||D[F];if(!B)return;const Z=rd(_&&_.filter),{z:X,x:re,y:ce}=this.tileID.canonical,de={z:X,x:re,y:ce};for(let _e=0;_e<B.length;_e++){const Se=B.feature(_e);if(Z.needGeometry){const at=cd(Se,!0);if(!Z.filter(new Pe(this.tileID.overscaledZ),at,this.tileID.canonical))continue}else if(!Z.filter(new Pe(this.tileID.overscaledZ),Se))continue;const Re=x.getId(Se,F),Xe=new ty(Se,X,re,ce,Re);Xe.tile=de,l.push(Xe)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const _=this.expirationTime;if(l.cacheControl){const x=jn(l.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const x=Date.now();let D=!1;if(this.expirationTime>x)D=!1;else if(_)if(this.expirationTime<_)D=!0;else{const F=this.expirationTime-_;F?this.expirationTime=x+Math.max(F,3e4):D=!0}else D=!0;D?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(l,_){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(l).length)return;const x=this.latestFeatureIndex.loadVTLayers();for(const D in this.buckets){if(!_.style.hasLayer(D))continue;const F=this.buckets[D],B=F.layers[0].sourceLayer||"_geojsonTileLayer",Z=x[B],X=l[B];if(!Z||!X||0===Object.keys(X).length)continue;F.update(X,Z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const re=_&&_.style&&_.style.getLayer(D);re&&(this.queryPadding=Math.max(this.queryPadding,re.queryRadius(F)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Or.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=Or.now()+l}setDependencies(l,_){const x={};for(const D of _)x[D]=!0;this.dependencies[l]=x}hasDependency(l,_){for(const x of l){const D=this.dependencies[x];if(D)for(const F of _)if(D[F])return!0}return!1}clearQueryDebugViz(){}}class iy{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,_,x){const D=String(_);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][D]=this.stateChanges[l][D]||{},Di(this.stateChanges[l][D],x),null===this.deletedStates[l]){this.deletedStates[l]={};for(const F in this.state[l])F!==D&&(this.deletedStates[l][F]=null)}else if(this.deletedStates[l]&&null===this.deletedStates[l][D]){this.deletedStates[l][D]={};for(const F in this.state[l][D])x[F]||(this.deletedStates[l][D][F]=null)}else for(const F in x)this.deletedStates[l]&&this.deletedStates[l][D]&&null===this.deletedStates[l][D][F]&&delete this.deletedStates[l][D][F]}removeFeatureState(l,_,x){if(null===this.deletedStates[l])return;const D=String(_);if(this.deletedStates[l]=this.deletedStates[l]||{},x&&void 0!==_)null!==this.deletedStates[l][D]&&(this.deletedStates[l][D]=this.deletedStates[l][D]||{},this.deletedStates[l][D][x]=null);else if(void 0!==_)if(this.stateChanges[l]&&this.stateChanges[l][D])for(x in this.deletedStates[l][D]={},this.stateChanges[l][D])this.deletedStates[l][D][x]=null;else this.deletedStates[l][D]=null;else this.deletedStates[l]=null}getState(l,_){const x=String(_),D=Di({},(this.state[l]||{})[x],(this.stateChanges[l]||{})[x]);if(null===this.deletedStates[l])return{};if(this.deletedStates[l]){const F=this.deletedStates[l][_];if(null===F)return{};for(const B in F)delete D[B]}return D}initializeTileState(l,_){l.setFeatureState(this.state,_)}coalesceChanges(l,_){const x={};for(const D in this.stateChanges){this.state[D]=this.state[D]||{};const F={};for(const B in this.stateChanges[D])this.state[D][B]||(this.state[D][B]={}),Di(this.state[D][B],this.stateChanges[D][B]),F[B]=this.state[D][B];x[D]=F}for(const D in this.deletedStates){this.state[D]=this.state[D]||{};const F={};if(null===this.deletedStates[D])for(const B in this.state[D])F[B]={},this.state[D][B]={};else for(const B in this.deletedStates[D]){if(null===this.deletedStates[D][B])this.state[D][B]={};else for(const Z of Object.keys(this.deletedStates[D][B]))delete this.state[D][B][Z];F[B]=this.state[D][B]}x[D]=x[D]||{},Di(x[D],F)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(x).length)for(const D in l)l[D].setFeatureState(x,_)}}class Jv{constructor(l){this.size=l,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(l,_){const x=this.toIdx(l,_);return{min:this.minimums[x],max:this.maximums[x]}}isLeaf(l,_){return this.leaves[this.toIdx(l,_)]}toIdx(l,_){return _*this.size+l}}function zx(g,l,_,x){let D=0,F=Number.MAX_VALUE;for(let B=0;B<3;B++)if(Math.abs(x[B])<1e-15){if(_[B]<g[B]||_[B]>l[B])return null}else{const Z=1/x[B];let X=(g[B]-_[B])*Z,re=(l[B]-_[B])*Z;if(X>re){const ce=X;X=re,re=ce}if(X>D&&(D=X),re<F&&(F=re),D>F)return null}return D}function ry(g,l,_,x,D,F,B,Z,X,re,ce){const de=x-g,_e=D-l,Se=F-_,Re=B-g,Xe=Z-l,at=X-_,bt=ce[1]*at-ce[2]*Xe,It=ce[2]*Re-ce[0]*at,Rt=ce[0]*Xe-ce[1]*Re,Bt=de*bt+_e*It+Se*Rt;if(Math.abs(Bt)<1e-15)return null;const jt=1/Bt,Ut=re[0]-g,mn=re[1]-l,Cn=re[2]-_,vn=(Ut*bt+mn*It+Cn*Rt)*jt;if(vn<0||vn>1)return null;const Tn=mn*Se-Cn*_e,ln=Cn*de-Ut*Se,pn=Ut*_e-mn*de,In=(ce[0]*Tn+ce[1]*ln+ce[2]*pn)*jt;return In<0||vn+In>1?null:(Re*Tn+Xe*ln+at*pn)*jt}function il(g,l,_){return(g-l)/(_-l)}function lm(g,l,_,x,D,F,B,Z,X){const re=1<<_,ce=F-x,de=B-D,_e=(g+1)/re*ce+x,Se=(l+0)/re*de+D,Re=(l+1)/re*de+D;Z[0]=(g+0)/re*ce+x,Z[1]=Se,X[0]=_e,X[1]=Re}class Kv{constructor(l){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=l,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const _=function(F){const B=Math.ceil(Math.log2(F.dim/8)),Z=[];let X=Math.ceil(Math.pow(2,B));const re=1/X,ce=(Se,Re,Xe,at,bt)=>{const It=at?1:0,Rt=(Se+1)*Xe-It,Bt=Re*Xe,jt=(Re+1)*Xe-It;bt[0]=Se*Xe,bt[1]=Bt,bt[2]=Rt,bt[3]=jt};let de=new Jv(X);const _e=[];for(let Se=0;Se<X*X;Se++){ce(Se%X,Math.floor(Se/X),re,!1,_e);const Re=wd(_e[0],_e[1],F),Xe=wd(_e[2],_e[1],F),at=wd(_e[2],_e[3],F),bt=wd(_e[0],_e[3],F);de.minimums.push(Math.min(Re,Xe,at,bt)),de.maximums.push(Math.max(Re,Xe,at,bt)),de.leaves.push(1)}for(Z.push(de),X/=2;X>=1;X/=2){const Se=Z[Z.length-1];de=new Jv(X);for(let Re=0;Re<X*X;Re++){ce(Re%X,Math.floor(Re/X),2,!0,_e);const Xe=Se.getElevation(_e[0],_e[1]),at=Se.getElevation(_e[2],_e[1]),bt=Se.getElevation(_e[2],_e[3]),It=Se.getElevation(_e[0],_e[3]),Rt=Se.isLeaf(_e[0],_e[1]),Bt=Se.isLeaf(_e[2],_e[1]),jt=Se.isLeaf(_e[2],_e[3]),Ut=Se.isLeaf(_e[0],_e[3]),mn=Math.min(Xe.min,at.min,bt.min,It.min),Cn=Math.max(Xe.max,at.max,bt.max,It.max),vn=Rt&&Bt&&jt&&Ut;de.maximums.push(Cn),de.minimums.push(mn),de.leaves.push(Cn-mn<=5&&vn?1:0)}Z.push(de)}return Z}(this.dem),x=_.length-1,D=_[x];this._addNode(D.minimums[0],D.maximums[0],D.leaves[0]),this._construct(_,0,0,x,0)}raycastRoot(l,_,x,D,F,B,Z=1){return zx([l,_,-100],[x,D,this.maximums[0]*Z],F,B)}raycast(l,_,x,D,F,B,Z=1){if(!this.nodeCount)return null;const X=this.raycastRoot(l,_,x,D,F,B,Z);if(null==X)return null;const re=[],ce=[],de=[],_e=[],Se=[{idx:0,t:X,nodex:0,nodey:0,depth:0}];for(;Se.length>0;){const{idx:Re,t:Xe,nodex:at,nodey:bt,depth:It}=Se.pop();if(this.leaves[Re]){lm(at,bt,It,l,_,x,D,de,_e);const Bt=1<<It,jt=(at+0)/Bt,Ut=(at+1)/Bt,mn=(bt+0)/Bt,Cn=(bt+1)/Bt,vn=wd(jt,mn,this.dem)*Z,Tn=wd(Ut,mn,this.dem)*Z,ln=wd(Ut,Cn,this.dem)*Z,pn=wd(jt,Cn,this.dem)*Z,In=ry(de[0],de[1],vn,_e[0],de[1],Tn,_e[0],_e[1],ln,F,B),on=ry(_e[0],_e[1],ln,de[0],_e[1],pn,de[0],de[1],vn,F,B),Mi=Math.min(null!==In?In:Number.MAX_VALUE,null!==on?on:Number.MAX_VALUE);if(Mi!==Number.MAX_VALUE)return Mi;{const gi=Nu([],F,B,Xe);if(yf(vn,Tn,pn,ln,il(gi[0],de[0],_e[0]),il(gi[1],de[1],_e[1]))>=gi[2])return Xe}continue}let Rt=0;for(let Bt=0;Bt<this._siblingOffset.length;Bt++){lm((at<<1)+this._siblingOffset[Bt][0],(bt<<1)+this._siblingOffset[Bt][1],It+1,l,_,x,D,de,_e),de[2]=-100,_e[2]=this.maximums[this.childOffsets[Re]+Bt]*Z;const jt=zx(de,_e,F,B);if(null!=jt){const Ut=jt;re[Bt]=Ut;let mn=!1;for(let Cn=0;Cn<Rt&&!mn;Cn++)Ut>=re[ce[Cn]]&&(ce.splice(Cn,0,Bt),mn=!0);mn||(ce[Rt]=Bt),Rt++}}for(let Bt=0;Bt<Rt;Bt++){const jt=ce[Bt];Se.push({idx:this.childOffsets[Re]+jt,t:re[jt],nodex:(at<<1)+this._siblingOffset[jt][0],nodey:(bt<<1)+this._siblingOffset[jt][1],depth:It+1})}}return null}_addNode(l,_,x){return this.minimums.push(l),this.maximums.push(_),this.leaves.push(x),this.childOffsets.push(0),this.nodeCount++}_construct(l,_,x,D,F){if(1===l[D].isLeaf(_,x))return;this.childOffsets[F]||(this.childOffsets[F]=this.nodeCount);const B=D-1,Z=l[B];let X,re=0;for(let ce=0;ce<this._siblingOffset.length;ce++){const de=2*_+this._siblingOffset[ce][0],_e=2*x+this._siblingOffset[ce][1],Se=Z.getElevation(de,_e),Re=Z.isLeaf(de,_e),Xe=this._addNode(Se.min,Se.max,Re);Re&&(re|=1<<ce),X||(X=Xe)}for(let ce=0;ce<this._siblingOffset.length;ce++)re&1<<ce||this._construct(l,2*_+this._siblingOffset[ce][0],2*x+this._siblingOffset[ce][1],B,X+ce)}}function yf(g,l,_,x,D,F){return ui(ui(g,_,F),ui(l,x,F),D)}function wd(g,l,_){const x=_.dim,D=Mt(g*x-.5,0,x-1),F=Mt(l*x-.5,0,x-1),B=Math.floor(D),Z=Math.floor(F),X=Math.min(B+1,x-1),re=Math.min(Z+1,x-1);return yf(_.get(B,Z),_.get(X,Z),_.get(B,re),_.get(X,re),D-B,F-Z)}const eb={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class vp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(l,_,x,D=!1,F=!1){if(this.uid=l,_.height!==_.width)throw new RangeError("DEM tiles must be square");if(x&&"mapbox"!==x&&"terrarium"!==x)return mi(`"${x}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=_.height;const B=this.dim=_.height-2;if(this.data=new Uint32Array(_.data.buffer),this.encoding=x||"mapbox",this.borderReady=D,!D){for(let Z=0;Z<B;Z++)this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z)],this.data[this._idx(B,Z)]=this.data[this._idx(B-1,Z)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z,0)],this.data[this._idx(Z,B)]=this.data[this._idx(Z,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],F&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Kv(this)}get(l,_,x=!1){const D=new Uint8Array(this.data.buffer);x&&(l=Mt(l,-1,this.dim),_=Mt(_,-1,this.dim));const F=4*this._idx(l,_);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(D[F],D[F+1],D[F+2])}static getUnpackVector(l){return eb[l]}get unpackVector(){return eb[this.encoding]}_idx(l,_){if(l<-1||l>=this.dim+1||_<-1||_>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(_+1)*this.stride+(l+1)}_unpackMapbox(l,_,x){return(256*l*256+256*_+x)/10-1e4}_unpackTerrarium(l,_,x){return 256*l+_+x/256-32768}static pack(l,_){const x=[0,0,0,0],D=vp.getUnpackVector(_);let F=Math.floor((l+D[3])/D[2]);return x[2]=F%256,F=Math.floor(F/256),x[1]=F%256,F=Math.floor(F/256),x[0]=F,x}getPixels(){return new qa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,_,x){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let D=_*this.dim,F=_*this.dim+this.dim,B=x*this.dim,Z=x*this.dim+this.dim;switch(_){case-1:D=F-1;break;case 1:F=D+1}switch(x){case-1:B=Z-1;break;case 1:Z=B+1}const X=-_*this.dim,re=-x*this.dim;for(let ce=B;ce<Z;ce++)for(let de=D;de<F;de++)this.data[this._idx(de,ce)]=l.data[this._idx(de+X,ce+re)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}qn("DEMData",vp),qn("DemMinMaxQuadTree",Kv,{omit:["dem"]});class ou{constructor(l,_){this.max=l,this.onRemove=_,this.reset()}reset(){for(const l in this.data)for(const _ of this.data[l])_.timeout&&clearTimeout(_.timeout),this.onRemove(_.value);return this.data={},this.order=[],this}add(l,_,x){const D=l.wrapped().key;void 0===this.data[D]&&(this.data[D]=[]);const F={value:_,timeout:void 0};if(void 0!==x&&(F.timeout=setTimeout(()=>{this.remove(l,F)},x)),this.data[D].push(F),this.order.push(D),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const _=this.data[l].shift();return _.timeout&&clearTimeout(_.timeout),0===this.data[l].length&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),_.value}getByKey(l){const _=this.data[l];return _?_[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,_){if(!this.has(l))return this;const x=l.wrapped().key,D=void 0===_?0:this.data[x].indexOf(_),F=this.data[x][D];return this.data[x].splice(D,1),F.timeout&&clearTimeout(F.timeout),0===this.data[x].length&&delete this.data[x],this.onRemove(F.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}filter(l){const _=[];for(const x in this.data)for(const D of this.data[x])l(D.value)||_.push(D);for(const x of _)this.remove(x.value.tileID,x)}}class Gu{constructor(l,_,x){this.func=l,this.mask=_,this.range=x}}Gu.ReadOnly=!1,Gu.ReadWrite=!0,Gu.disabled=new Gu(519,Gu.ReadOnly,[0,1]);class kg{constructor(l,_,x,D,F,B){this.test=l,this.ref=_,this.mask=x,this.fail=D,this.depthFail=F,this.pass=B}}kg.disabled=new kg({func:519,mask:0},0,0,7680,7680,7680);class ju{constructor(l,_,x){this.blendFunction=l,this.blendColor=_,this.mask=x}}ju.Replace=[1,0],ju.disabled=new ju(ju.Replace,hn.transparent,[!1,!1,!1,!1]),ju.unblended=new ju(ju.Replace,hn.transparent,[!0,!0,!0,!0]),ju.alphaBlended=new ju([1,771],hn.transparent,[!0,!0,!0,!0]);class kl{constructor(l,_,x){this.enable=l,this.mode=_,this.frontFace=x}}kl.disabled=new kl(!1,1029,2305),kl.backCCW=new kl(!0,1029,2305),kl.backCW=new kl(!0,1029,2304),kl.frontCW=new kl(!0,1028,2304),kl.frontCCW=new kl(!0,1028,2305);class su extends p{constructor(l,_,x){super(),this.id=l,this._onlySymbols=x,_.on("data",D=>{"source"===D.dataType&&"metadata"===D.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===D.dataType&&"content"===D.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),_.on("error",()=>{this._sourceErrored=!0}),this._source=_,this._tiles={},this._cache=new ou(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new iy}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const _=this._tiles[l];if("loaded"!==_.state&&"errored"!==_.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,_){return l.isSymbolTile=this._onlySymbols,this._source.loadTile(l,_)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l,()=>{})}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const _ in this._tiles){const x=this._tiles[_];x.upload(l),x.prepare(this.map.style.imageManager)}}getIds(){return Vn(this._tiles).map(l=>l.tileID).sort(tb).map(l=>l.key)}getRenderableIds(l){const _=[];for(const x in this._tiles)this._isIdRenderable(+x,l)&&_.push(this._tiles[x]);return l?_.sort((x,D)=>{const F=x.tileID,B=D.tileID,Z=new Be(F.canonical.x,F.canonical.y)._rotate(this.transform.angle),X=new Be(B.canonical.x,B.canonical.y)._rotate(this.transform.angle);return F.overscaledZ-B.overscaledZ||X.y-Z.y||X.x-Z.x}).map(x=>x.tileID.key):_.map(x=>x.tileID).sort(tb).map(x=>x.key)}hasRenderableParent(l){const _=this.findLoadedParent(l,0);return!!_&&this._isIdRenderable(_.tileID.key)}_isIdRenderable(l,_){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(_||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)"errored"!==this._tiles[l].state&&this._reloadTile(+l,"reloading")}}_reloadTile(l,_){const x=this._tiles[l];x&&("loading"!==x.state&&(x.state=_),this._loadTile(x,this._tileLoaded.bind(this,x,l,_)))}_tileLoaded(l,_,x,D){if(D)return l.state="errored",void(404!==D.status?this._source.fire(new d(D,{tile:l})):this.update(this.transform));l.timeAdded=Or.now(),"expired"===x&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(_,l),"raster-dem"===this.getSource().type&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),this._source.fire(new ve("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id}))}_backfillDEM(l){const _=this.getRenderableIds();for(let D=0;D<_.length;D++){const F=_[D];if(l.neighboringTiles&&l.neighboringTiles[F]){const B=this.getTileByID(F);x(l,B),x(B,l)}}function x(D,F){if(!D.dem||D.dem.borderReady)return;D.needsHillshadePrepare=!0,D.needsDEMTextureUpload=!0;let B=F.tileID.canonical.x-D.tileID.canonical.x;const Z=F.tileID.canonical.y-D.tileID.canonical.y,X=Math.pow(2,D.tileID.canonical.z),re=F.tileID.key;0===B&&0===Z||Math.abs(Z)>1||(Math.abs(B)>1&&(1===Math.abs(B+X)?B+=X:1===Math.abs(B-X)&&(B-=X)),F.dem&&D.dem&&(D.dem.backfillBorder(F.dem,B,Z),D.neighboringTiles&&D.neighboringTiles[re]&&(D.neighboringTiles[re].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,_,x,D){for(const F in this._tiles){let B=this._tiles[F];if(D[F]||!B.hasData()||B.tileID.overscaledZ<=_||B.tileID.overscaledZ>x)continue;let Z=B.tileID;for(;B&&B.tileID.overscaledZ>_+1;){const re=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[re.key],B&&B.hasData()&&(Z=re)}let X=Z;for(;X.overscaledZ>_;)if(X=X.scaledTo(X.overscaledZ-1),l[X.key]){D[Z.key]=Z;break}}}findLoadedParent(l,_){if(l.key in this._loadedParentTiles){const x=this._loadedParentTiles[l.key];return x&&x.tileID.overscaledZ>=_?x:null}for(let x=l.overscaledZ-1;x>=_;x--){const D=l.scaledTo(x),F=this._getLoadedTile(D);if(F)return F}}_getLoadedTile(l){const _=this._tiles[l.key];return _&&_.hasData()?_:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,_){_=_||this._source.tileSize;const x=Math.ceil(l.width/_)+1,D=Math.ceil(l.height/_)+1,F=Math.floor(x*D*5),B="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,F):F;this._cache.setMaxSize(B)}handleWrapJump(l){const _=Math.round((l-(void 0===this._prevLng?l:this._prevLng))/360);if(this._prevLng=l,_){const x={};for(const D in this._tiles){const F=this._tiles[D];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+_),x[F.tileID.key]=F}this._tiles=x;for(const D in this._timers)clearTimeout(this._timers[D]),delete this._timers[D];for(const D in this._tiles)this._setTileReloadTimer(+D,this._tiles[D])}}update(l,_,x){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!x)return;let D;this.updateCacheSize(l,_),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?D=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(Z=>new ma(Z.canonical.z,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y)):(D=l.coveringTiles({tileSize:_||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!x,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(D=D.filter(Z=>this._source.hasTile(Z)))):D=[];const F=this._updateRetainedTiles(D);if(cm(this._source.type)&&0!==D.length){const Z={},X={},re=Object.keys(F);for(const de of re){const _e=F[de],Se=this._tiles[de];if(!Se||Se.fadeEndTime&&Se.fadeEndTime<=Or.now())continue;const Re=this.findLoadedParent(_e,Math.max(_e.overscaledZ-su.maxOverzooming,this._source.minzoom));Re&&(this._addTile(Re.tileID),Z[Re.tileID.key]=Re.tileID),X[de]=_e}const ce=D[D.length-1].overscaledZ;for(const de in this._tiles){const _e=this._tiles[de];if(F[de]||!_e.hasData())continue;let Se=_e.tileID;for(;Se.overscaledZ>ce;){Se=Se.scaledTo(Se.overscaledZ-1);const Re=this._tiles[Se.key];if(Re&&Re.hasData()&&X[Se.key]){F[de]=_e.tileID;break}}}for(const de in Z)F[de]||(this._coveredTiles[de]=!0,F[de]=Z[de])}for(const Z in F)this._tiles[Z].clearFadeHold();const B=function(Z,X){const re=[];for(const ce in Z)ce in X||re.push(ce);return re}(this._tiles,F);for(const Z of B){const X=this._tiles[Z];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(+Z)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const _={};if(0===l.length)return _;const x={},D=l[l.length-1].overscaledZ,F=l[0].overscaledZ,B=Math.max(F-su.maxOverzooming,this._source.minzoom),Z=Math.max(F+su.maxUnderzooming,this._source.minzoom),X={};for(const re of l){const ce=this._addTile(re);_[re.key]=re,ce.hasData()||D<this._source.maxzoom&&(X[re.key]=re)}this._retainLoadedChildren(X,D,Z,_);for(const re of l){let ce=this._tiles[re.key];if(ce.hasData())continue;if(re.canonical.z>=this._source.maxzoom){const _e=re.children(this._source.maxzoom)[0],Se=this.getTile(_e);if(Se&&Se.hasData()){_[_e.key]=_e;continue}}else{const _e=re.children(this._source.maxzoom);if(_[_e[0].key]&&_[_e[1].key]&&_[_e[2].key]&&_[_e[3].key])continue}let de=ce.wasRequested();for(let _e=re.overscaledZ-1;_e>=B;--_e){const Se=re.scaledTo(_e);if(x[Se.key]||(x[Se.key]=!0,ce=this.getTile(Se),!ce&&de&&(ce=this._addTile(Se)),ce&&(_[Se.key]=Se,de=ce.wasRequested(),ce.hasData())))break}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const _=[];let x,D=this._tiles[l].tileID;for(;D.overscaledZ>0;){if(D.key in this._loadedParentTiles){x=this._loadedParentTiles[D.key];break}_.push(D.key);const F=D.scaledTo(D.overscaledZ-1);if(x=this._getLoadedTile(F),x)break;D=F}for(const F of _)this._loadedParentTiles[F]=x}}_addTile(l){let _=this._tiles[l.key];if(_)return _;_=this._cache.getAndRemove(l),_&&(this._setTileReloadTimer(l.key,_),_.tileID=l,this._state.initializeTileState(_,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,_)));const x=Boolean(_);return x||(_=new ny(l,this._source.tileSize*l.overscaleFactor(),this.transform.tileZoom),this._loadTile(_,this._tileLoaded.bind(this,_,l.key,_.state))),_?(_.uses++,this._tiles[l.key]=_,x||this._source.fire(new ve("dataloading",{tile:_,coord:_.tileID,dataType:"source"})),_):null}_setTileReloadTimer(l,_){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const x=_.getExpiryTimeout();x&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},x))}_removeTile(l){const _=this._tiles[l];_&&(_.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),_.uses>0||(_.hasData()&&"reloading"!==_.state?this._cache.add(_.tileID,_,_.getExpiryTimeout()):(_.aborted=!0,this._abortTile(_),this._unloadTile(_))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._cache.reset()}tilesIn(l,_,x){const D=[],F=this.transform;if(!F)return D;for(const B in this._tiles){const Z=this._tiles[B];if(x&&Z.clearQueryDebugViz(),Z.holdingForFade())continue;const X=l.containsTile(Z,F,_);X&&D.push(X)}return D}getVisibleCoordinates(l){const _=this.getRenderableIds(l).map(x=>this._tiles[x].tileID);for(const x of _)x.projMatrix=this.transform.calculateProjMatrix(x.toUnwrapped());return _}hasTransition(){if(this._source.hasTransition())return!0;if(cm(this._source.type))for(const l in this._tiles){const _=this._tiles[l];if(void 0!==_.fadeEndTime&&_.fadeEndTime>=Or.now())return!0}return!1}setFeatureState(l,_,x){this._state.updateState(l=l||"_geojsonTileLayer",_,x)}removeFeatureState(l,_,x){this._state.removeFeatureState(l=l||"_geojsonTileLayer",_,x)}getFeatureState(l,_){return this._state.getState(l=l||"_geojsonTileLayer",_)}setDependencies(l,_,x){const D=this._tiles[l];D&&D.setDependencies(_,x)}reloadTilesForDependencies(l,_){for(const x in this._tiles)this._tiles[x].hasDependency(l,_)&&this._reloadTile(+x,"reloading");this._cache.filter(x=>!x.hasDependency(l,_))}}function tb(g,l){const _=Math.abs(2*g.wrap)-+(g.wrap<0),x=Math.abs(2*l.wrap)-+(l.wrap<0);return g.overscaledZ-l.overscaledZ||x-_||l.canonical.y-g.canonical.y||l.canonical.x-g.canonical.x}function cm(g){return"raster"===g||"image"===g||"video"===g}su.maxOverzooming=10,su.maxUnderzooming=3;class um{constructor(l,_,x){this._demTile=l,this._dem=this._demTile.dem,this._scale=_,this._offset=x}static create(l,_,x){const D=x||l.findDEMTileFor(_);if(!D||!D.dem)return;const F=D.dem,B=D.tileID,Z=1<<_.canonical.z-B.canonical.z;return new um(D,D.tileSize/Cr/Z,[(_.canonical.x/Z-B.canonical.x)*F.dim,(_.canonical.y/Z-B.canonical.y)*F.dim])}tileCoordToPixel(l,_){const x=_*this._scale+this._offset[1],D=Math.floor(l*this._scale+this._offset[0]),F=Math.floor(x);return new Be(D,F)}getElevationAt(l,_,x,D){const F=l*this._scale+this._offset[0],B=_*this._scale+this._offset[1],Z=Math.floor(F),X=Math.floor(B),re=this._dem;return D=!!D,x?ui(ui(re.get(Z,X,D),re.get(Z,X+1,D),B-X),ui(re.get(Z+1,X,D),re.get(Z+1,X+1,D),B-X),F-Z):re.get(Z,X,D)}getElevationAtPixel(l,_,x){return this._dem.get(l,_,!!x)}getMeterToDEM(l){return(1<<this._demTile.tileID.canonical.z)*ey(1,l)*this._dem.stride}}class Vx{constructor(l,_){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Ul(Cr,16,0),this.featureIndexArray=new E_,this.promoteId=_}insert(l,_,x,D,F,B=0){const Z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,D,F,B);const X=this.grid;for(let re=0;re<_.length;re++){const ce=_[re],de=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<ce.length;_e++){const Se=ce[_e];de[0]=Math.min(de[0],Se.x),de[1]=Math.min(de[1],Se.y),de[2]=Math.max(de[2],Se.x),de[3]=Math.max(de[3],Se.y)}de[0]<Cr&&de[1]<Cr&&de[2]>=0&&de[3]>=0&&X.insert(Z,de[0],de[1],de[2],de[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Oh.VectorTile(new em(this.rawTileData)).layers,this.sourceLayerCoder=new am(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,_,x,D){this.loadVTLayers();const F=l.params||{},B=rd(F.filter),Z=l.tileResult,X=l.transform,re=Z.bufferedTilespaceBounds,ce=this.grid.query(re.min.x,re.min.y,re.max.x,re.max.y,(Re,Xe,at,bt)=>$p(Z.bufferedTilespaceGeometry,Re,Xe,at,bt));ce.sort(nb);let de=null;X.elevation&&ce.length>0&&(de=um.create(X.elevation,this.tileID));const _e={};let Se;for(let Re=0;Re<ce.length;Re++){const Xe=ce[Re];if(Xe===Se)continue;Se=Xe;const at=this.featureIndexArray.get(Xe);let bt=null;this.loadMatchingFeature(_e,at,B,F.layers,F.availableImages,_,x,D,(It,Rt,Bt,jt=0)=>(bt||(bt=ld(It)),Rt.queryIntersectsFeature(Z,It,Bt,bt,this.z,l.transform,l.pixelPosMatrix,de,jt)))}return _e}loadMatchingFeature(l,_,x,D,F,B,Z,X,re){const{featureIndex:ce,bucketIndex:de,sourceLayerIndex:_e,layoutVertexArrayOffset:Se}=_,Re=this.bucketLayerIDs[de];if(D&&!function(It,Rt){for(let Bt=0;Bt<It.length;Bt++)if(Rt.indexOf(It[Bt])>=0)return!0;return!1}(D,Re))return;const Xe=this.sourceLayerCoder.decode(_e),at=this.vtLayers[Xe].feature(ce);if(x.needGeometry){const It=cd(at,!0);if(!x.filter(new Pe(this.tileID.overscaledZ),It,this.tileID.canonical))return}else if(!x.filter(new Pe(this.tileID.overscaledZ),at))return;const bt=this.getId(at,Xe);for(let It=0;It<Re.length;It++){const Rt=Re[It];if(D&&D.indexOf(Rt)<0)continue;const Bt=B[Rt];if(!Bt)continue;let jt={};void 0!==bt&&X&&(jt=X.getState(Bt.sourceLayer||"_geojsonTileLayer",bt));const Ut=Di({},Z[Rt]);Ut.paint=Ig(Ut.paint,Bt.paint,at,jt,F),Ut.layout=Ig(Ut.layout,Bt.layout,at,jt,F);const mn=!re||re(at,Bt,jt,Se);if(!mn)continue;const Cn=new ty(at,this.z,this.x,this.y,bt);Cn.layer=Ut;let vn=l[Rt];void 0===vn&&(vn=l[Rt]=[]),vn.push({featureIndex:ce,feature:Cn,intersectionZ:mn})}}lookupSymbolFeatures(l,_,x,D,F,B,Z,X){const re={};this.loadVTLayers();const ce=rd(F);for(const de of l)this.loadMatchingFeature(re,{bucketIndex:x,sourceLayerIndex:D,featureIndex:de,layoutVertexArrayOffset:0},ce,B,Z,X,_);return re}hasLayer(l){for(const _ of this.bucketLayerIDs)for(const x of _)if(l===x)return!0;return!1}getId(l,_){let x=l.id;return this.promoteId&&(x=l.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[_]],"boolean"==typeof x&&(x=Number(x))),x}}function Ig(g,l,_,x,D){return fn(g,(F,B)=>{const Z=l instanceof vt?l.get(B):null;return Z&&Z.evaluate?Z.evaluate(_,x,D):Z})}function nb(g,l){return l-g}qn("FeatureIndex",Vx,{omit:["rawTileData","sourceLayerCoder"]});class hm{constructor(l){const _={},x=[];for(const Z in l){const X=l[Z],re=_[Z]={};for(const ce in X.glyphs){const de=X.glyphs[+ce];if(!de||0===de.bitmap.width||0===de.bitmap.height)continue;const _e=de.metrics.localGlyph?2:1,Se={x:0,y:0,w:de.bitmap.width+2*_e,h:de.bitmap.height+2*_e};x.push(Se),re[ce]=Se}}const{w:D,h:F}=hf(x),B=new Ah({width:D||1,height:F||1});for(const Z in l){const X=l[Z];for(const re in X.glyphs){const ce=X.glyphs[+re];if(!ce||0===ce.bitmap.width||0===ce.bitmap.height)continue;const de=_[Z][re],_e=ce.metrics.localGlyph?2:1;Ah.copy(ce.bitmap,B,{x:0,y:0},{x:de.x+_e,y:de.y+_e},ce.bitmap)}}this.image=B,this.positions=_}}qn("GlyphAtlas",hm);class ga{constructor(l){this.tileID=new ma(l.tileID.overscaledZ,l.tileID.wrap,l.tileID.canonical.z,l.tileID.canonical.x,l.tileID.canonical.y),this.tileZoom=l.tileZoom,this.uid=l.uid,this.zoom=l.zoom,this.pixelRatio=l.pixelRatio,this.tileSize=l.tileSize,this.source=l.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=l.showCollisionBoxes,this.collectResourceTiming=!!l.collectResourceTiming,this.returnDependencies=!!l.returnDependencies,this.promoteId=l.promoteId,this.enableTerrain=!!l.enableTerrain,this.isSymbolTile=l.isSymbolTile}parse(l,_,x,D,F){this.status="parsing",this.data=l,this.collisionBoxArray=new Zc;const B=new am(Object.keys(l.layers).sort()),Z=new Vx(this.tileID,this.promoteId);Z.bucketLayerIDs=[];const X={},re=new qv(256,256),ce={featureIndex:Z,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:re,availableImages:x},de=_.familiesBySource[this.source];for(const jt in de){const Ut=l.layers[jt];if(!Ut)continue;let mn=!1,Cn=!1;for(const ln of de[jt])"symbol"===ln[0].type?mn=!0:Cn=!0;if(!0===this.isSymbolTile&&!mn||!1===this.isSymbolTile&&!Cn)continue;1===Ut.version&&mi(`Vector tile source "${this.source}" layer "${jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const vn=B.encode(jt),Tn=[];for(let ln=0;ln<Ut.length;ln++){const pn=Ut.feature(ln),In=Z.getId(pn,jt);Tn.push({feature:pn,id:In,index:ln,sourceLayerIndex:vn})}for(const ln of de[jt]){const pn=ln[0];void 0!==this.isSymbolTile&&"symbol"===pn.type!==this.isSymbolTile||pn.minzoom&&this.zoom<Math.floor(pn.minzoom)||pn.maxzoom&&this.zoom>=pn.maxzoom||"none"!==pn.visibility&&(Xs(ln,this.zoom,x),(X[pn.id]=pn.createBucket({index:Z.bucketLayerIDs.length,layers:ln,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vn,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(Tn,ce,this.tileID.canonical),Z.bucketLayerIDs.push(ln.map(In=>In.id)))}}let _e,Se,Re,Xe;re.trim();const at={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},bt=fn(ce.glyphDependencies,jt=>Object.keys(jt).map(Number));Object.keys(bt).length?D.send("getGlyphs",{uid:this.uid,stacks:bt},(jt,Ut)=>{_e||(_e=jt,Se=Ut,Bt.call(this))},void 0,!1,at):Se={};const It=Object.keys(ce.iconDependencies);It.length?D.send("getImages",{icons:It,source:this.source,tileID:this.tileID,type:"icons"},(jt,Ut)=>{_e||(_e=jt,Re=Ut,Bt.call(this))},void 0,!1,at):Re={};const Rt=Object.keys(ce.patternDependencies);function Bt(){if(_e)return F(_e);if(Se&&Re&&Xe){const jt=new hm(Se),Ut=new H_(Re,Xe);for(const mn in X){const Cn=X[mn];Cn instanceof _p?(Xs(Cn.layers,this.zoom,x),zv(Cn,Se,jt.positions,Re,Ut.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):Cn.hasPattern&&(Cn instanceof Wt||Cn instanceof Kc||Cn instanceof Pa)&&(Xs(Cn.layers,this.zoom,x),Cn.addFeatures(ce,this.tileID.canonical,Ut.patternPositions))}this.status="done",F(null,{buckets:Vn(X).filter(mn=>!mn.isEmpty()),featureIndex:Z,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jt.image,lineAtlas:re,imageAtlas:Ut,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?Re:null,glyphPositions:this.returnDependencies?jt.positions:null})}}Rt.length?D.send("getImages",{icons:Rt,source:this.source,tileID:this.tileID,type:"patterns"},(jt,Ut)=>{_e||(_e=jt,Xe=Ut,Bt.call(this))},void 0,!1,at):Xe={},Bt.call(this)}}function Xs(g,l,_){const x=new Pe(l);for(const D of g)D.recalculate(x,_)}class dm{constructor(l){this.entries={},this.scheduler=l}request(l,_,x,D){const F=this.entries[l]=this.entries[l]||{callbacks:[]};if(F.result){const[B,Z]=F.result;return this.scheduler?this.scheduler.add(()=>{D(B,Z)},_):D(B,Z),()=>{}}return F.callbacks.push(D),F.cancel||(F.cancel=x((B,Z)=>{F.result=[B,Z];for(const X of F.callbacks)this.scheduler?this.scheduler.add(()=>{X(B,Z)},_):X(B,Z);setTimeout(()=>delete this.entries[l],3e3)})),()=>{F.result||(F.callbacks=F.callbacks.filter(B=>B!==D),F.callbacks.length||(F.cancel(),delete this.entries[l]))}}}function Sd(g,l,_){const x=JSON.stringify(g.request);return g.data&&(this.deduped.entries[x]={result:[null,g.data]}),this.deduped.request(x,{type:"parseTile",isSymbolTile:g.isSymbolTile,zoom:g.tileZoom},D=>{const F=we(g.request,(B,Z,X,re)=>{B?D(B):Z&&D(null,{vectorTile:_?void 0:new Oh.VectorTile(new em(Z)),rawData:Z,cacheControl:X,expires:re})});return()=>{F.cancel(),D()}},l)}A.ARRAY_TYPE=fa,A.AUTH_ERR_MSG=Vr,A.Actor=class{constructor(g,l,_){this.target=g,this.parent=l,this.mapId=_,this.callbacks={},this.cancelCallbacks={},$t(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Hn()?g:Ve,this.scheduler=new Wv}send(g,l,_,x,D=!1,F){const B=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(_.metadata=F,this.callbacks[B]=_);const Z=fr(this.globalScope)?void 0:[];return this.target.postMessage({id:B,type:g,hasCallback:!!_,targetMapId:x,mustQueue:D,sourceMapId:this.mapId,data:Gr(l,Z)},Z),{cancel:()=>{_&&delete this.callbacks[B],this.target.postMessage({id:B,type:"<cancel>",targetMapId:x,sourceMapId:this.mapId})}}}receive(g){const l=g.data,_=l.id;if(_&&(!l.targetMapId||this.mapId===l.targetMapId))if("<cancel>"===l.type){const x=this.cancelCallbacks[_];delete this.cancelCallbacks[_],x&&x.cancel()}else if(l.mustQueue||Hn()){const x=this.callbacks[_];this.cancelCallbacks[_]=this.scheduler.add(()=>this.processTask(_,l),x&&x.metadata||{type:"message"})}else this.processTask(_,l)}processTask(g,l){if("<response>"===l.type){const _=this.callbacks[g];delete this.callbacks[g],_&&(l.error?_(Qn(l.error)):_(null,Qn(l.data)))}else{const _=fr(this.globalScope)?void 0:[],x=l.hasCallback?(F,B)=>{delete this.cancelCallbacks[g],this.target.postMessage({id:g,type:"<response>",sourceMapId:this.mapId,error:F?Gr(F):null,data:Gr(B,_)},_)}:F=>{},D=Qn(l.data);if(this.parent[l.type])this.parent[l.type](l.sourceMapId,D,x);else if(this.parent.getWorkerSource){const F=l.type.split(".");this.parent.getWorkerSource(l.sourceMapId,F[0],D.source)[F[1]](D,x)}else x(new Error(`Could not find function ${l.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},A.CanonicalTileID=Mg,A.Color=hn,A.ColorMode=ju,A.CullFaceMode=kl,A.DEMData=vp,A.DataConstantProperty=rt,A.DedupedRequest=dm,A.DepthMode=Gu,A.EXTENT=Cr,A.Elevation=class{getAtPointOrZero(g,l=0){return this.getAtPoint(g,l)||0}getAtPoint(g,l,_=!0){null==l&&(l=null);const x=this._source();if(!x||g.y<0||g.y>1)return l;const D=x.getSource().maxzoom,F=1<<D,B=Math.floor(g.x),Z=g.x-B,X=new ma(D,B,D,Math.floor(Z*F),Math.floor(g.y*F)),re=this.findDEMTileFor(X);if(!re||!re.dem)return l;const ce=re.dem,de=1<<re.tileID.canonical.z,_e=(Z*de-re.tileID.canonical.x)*ce.dim,Se=(g.y*de-re.tileID.canonical.y)*ce.dim,Re=Math.floor(_e),Xe=Math.floor(Se);return(_?this.exaggeration():1)*ui(ui(ce.get(Re,Xe),ce.get(Re,Xe+1),Se-Xe),ui(ce.get(Re+1,Xe),ce.get(Re+1,Xe+1),Se-Xe),_e-Re)}getAtTileOffset(g,l,_){const x=1<<g.canonical.z;return this.getAtPointOrZero(new yp(g.wrap+(g.canonical.x+l/Cr)/x,(g.canonical.y+_/Cr)/x))}getForTilePoints(g,l,_,x){const D=um.create(this,g,x);return!!D&&(l.forEach(F=>{F[2]=this.exaggeration()*D.getElevationAt(F[0],F[1],_)}),!0)}getMinMaxForTile(g){const l=this.findDEMTileFor(g);if(!l||!l.dem)return null;const _=l.dem.tree,x=l.tileID,D=1<<g.canonical.z-x.canonical.z;let F=g.canonical.x/D-x.canonical.x,B=g.canonical.y/D-x.canonical.y,Z=0;for(let X=0;X<g.canonical.z-x.canonical.z&&!_.leaves[Z];X++){F*=2,B*=2;const re=2*Math.floor(B)+Math.floor(F);Z=_.childOffsets[Z]+re,F%=1,B%=1}return{min:this.exaggeration()*_.minimums[Z],max:this.exaggeration()*_.maximums[Z]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(g,l,_){throw new Error("Pure virtual method called.")}pointCoordinate(g){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(g){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},A.ErrorEvent=d,A.EvaluationParameters=Pe,A.Event=ve,A.Evented=p,A.GlyphManager=vd,A.ImagePosition=U_,A.LineAtlas=qv,A.LngLat=So,A.LngLatBounds=xd,A.LocalGlyphMode=Z_,A.MAX_SAFE_INTEGER=Et,A.MercatorCoordinate=yp,A.ONE_EM=24,A.OverscaledTileID=ma,A.Properties=ut,A.RGBAImage=qa,A.RequestManager=class{constructor(g,l,_){this._transformRequestFn=g,this._customAccessToken=l,this._silenceAuthErrors=!!_,this._createSkuToken()}_createSkuToken(){const g=function(){let l="";for(let _=0;_<10;_++)l+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",yr,l].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=g.token,this._skuTokenExpiresAt=g.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(g,l){return this._transformRequestFn&&this._transformRequestFn(g,l)||{url:g}}normalizeStyleURL(g,l){if(!vr(g))return g;const _=uo(g);return _.path=`/styles/v1${_.path}`,this._makeAPIURL(_,this._customAccessToken||l)}normalizeGlyphsURL(g,l){if(!vr(g))return g;const _=uo(g);return _.path=`/fonts/v1${_.path}`,this._makeAPIURL(_,this._customAccessToken||l)}normalizeSourceURL(g,l){if(!vr(g))return g;const _=uo(g);return _.path=`/v4/${_.authority}.json`,_.params.push("secure"),this._makeAPIURL(_,this._customAccessToken||l)}normalizeSpriteURL(g,l,_,x){const D=uo(g);return vr(g)?(D.path=`/styles/v1${D.path}/sprite${l}${_}`,this._makeAPIURL(D,this._customAccessToken||x)):(D.path+=`${l}${_}`,Ur(D))}normalizeTileURL(g,l,_){if(this._isSkuTokenExpired()&&this._createSkuToken(),g&&!vr(g))return g;const x=uo(g);x.path=x.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${l||_&&"raster"!==x.authority&&512===_?"@2x":""}${hs.supported?".webp":"$1"}`),"raster"===x.authority?x.path=`/${Ri.RASTER_URL_PREFIX}${x.path}`:(x.path=x.path.replace(/^.+\/v4\//,"/"),x.path=`/${Ri.TILE_URL_VERSION}${x.path}`);const D=this._customAccessToken||function(F){for(const B of F){const Z=B.match(/^access_token=(.*)$/);if(Z)return Z[1]}return null}(x.params)||Ri.ACCESS_TOKEN;return Ri.REQUIRE_ACCESS_TOKEN&&D&&this._skuToken&&x.params.push(`sku=${this._skuToken}`),this._makeAPIURL(x,D)}canonicalizeTileURL(g,l){const _=uo(g);if(!_.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!_.path.match(/\.[\w]+$/))return g;let x="mapbox://";_.path.match(/^\/raster\/v1\//)?x+=`raster/${_.path.replace(`/${Ri.RASTER_URL_PREFIX}/`,"")}`:x+=`tiles/${_.path.replace(`/${Ri.TILE_URL_VERSION}/`,"")}`;let D=_.params;return l&&(D=D.filter(F=>!F.match(/^access_token=/))),D.length&&(x+=`?${D.join("&")}`),x}canonicalizeTileset(g,l){const _=!!l&&vr(l),x=[];for(const D of g.tiles||[])ns(D)?x.push(this.canonicalizeTileURL(D,_)):x.push(D);return x}_makeAPIURL(g,l){const _="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",x=uo(Ri.API_URL);if(g.protocol=x.protocol,g.authority=x.authority,"http"===g.protocol){const D=g.params.indexOf("secure");D>=0&&g.params.splice(D,1)}if("/"!==x.path&&(g.path=`${x.path}${g.path}`),!Ri.REQUIRE_ACCESS_TOKEN)return Ur(g);if(l=l||Ri.ACCESS_TOKEN,!this._silenceAuthErrors){if(!l)throw new Error(`An API access token is required to use Mapbox GL. ${_}`);if("s"===l[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${_}`)}return g.params=g.params.filter(D=>-1===D.indexOf("access_token")),g.params.push(`access_token=${l||""}`),Ur(g)}},A.ResourceType=Oi,A.SegmentVector=Cs,A.SourceCache=su,A.StencilMode=kg,A.StructArrayLayout1ui2=Ys,A.StructArrayLayout2f1f2i16=ha,A.StructArrayLayout2i4=ci,A.StructArrayLayout2ui4=Ps,A.StructArrayLayout3f12=ua,A.StructArrayLayout3ui6=Nr,A.StructArrayLayout4i8=ar,A.Texture=gf,A.Tile=ny,A.Transitionable=et,A.Uniform1f=ws,A.Uniform1i=class extends Ro{constructor(g,l){super(g,l),this.current=0}set(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))}},A.Uniform2f=class extends Ro{constructor(g,l){super(g,l),this.current=[0,0]}set(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))}},A.Uniform3f=class extends Ro{constructor(g,l){super(g,l),this.current=[0,0,0]}set(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))}},A.Uniform4f=ad,A.UniformColor=zf,A.UniformMatrix3f=class extends Ro{constructor(g,l){super(g,l),this.current=eg}set(g){for(let l=0;l<9;l++)if(g[l]!==this.current[l]){this.current=g,this.gl.uniformMatrix3fv(this.location,!1,g);break}}},A.UniformMatrix4f=class extends Ro{constructor(g,l){super(g,l),this.current=Vf}set(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(let l=1;l<16;l++)if(g[l]!==this.current[l]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}}},A.UnwrappedTileID=Xv,A.ValidationError=C,A.VectorTileWorkerSource=class extends p{constructor(g,l,_,x,D){super(),this.actor=g,this.layerIndex=l,this.availableImages=_,this.loadVectorData=D||Sd,this.loading={},this.loaded={},this.deduped=new dm(g.scheduler),this.isSpriteLoaded=x,this.scheduler=g.scheduler}loadTile(g,l){const _=g.uid,x=g&&g.request,D=x&&x.collectResourceTiming,F=this.loading[_]=new ga(g);F.abort=this.loadVectorData(g,(B,Z)=>{const X=!this.loading[_];if(delete this.loading[_],X||B||!Z)return F.status="done",X||(this.loaded[_]=F),l(B);const re=Z.rawData,ce={};Z.expires&&(ce.expires=Z.expires),Z.cacheControl&&(ce.cacheControl=Z.cacheControl),F.vectorTile=Z.vectorTile||new Oh.VectorTile(new em(re));const de=()=>{F.parse(F.vectorTile,this.layerIndex,this.availableImages,this.actor,(_e,Se)=>{if(_e||!Se)return l(_e);const Re={};if(D){const Xe=Zv(x);Xe.length>0&&(Re.resourceTiming=JSON.parse(JSON.stringify(Xe)))}l(null,Di({rawTileData:re.slice(0)},Se,ce,Re))})};this.isSpriteLoaded?de():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(de,{type:"parseTile",isSymbolTile:g.isSymbolTile,zoom:g.tileZoom}):de()}),this.loaded=this.loaded||{},this.loaded[_]=F})}reloadTile(g,l){const _=this.loaded,x=g.uid,D=this;if(_&&_[x]){const F=_[x];F.showCollisionBoxes=g.showCollisionBoxes,F.enableTerrain=!!g.enableTerrain;const B=(Z,X)=>{const re=F.reloadCallback;re&&(delete F.reloadCallback,F.parse(F.vectorTile,D.layerIndex,this.availableImages,D.actor,re)),l(Z,X)};"parsing"===F.status?F.reloadCallback=B:"done"===F.status&&(F.vectorTile?F.parse(F.vectorTile,this.layerIndex,this.availableImages,this.actor,B):B())}}abortTile(g,l){const _=g.uid,x=this.loading[_];x&&(x.abort&&x.abort(),delete this.loading[_]),l()}removeTile(g,l){const _=this.loaded,x=g.uid;_&&_[x]&&delete _[x],l()}},A.WritingMode=nu,A.ZoomHistory=vs,A.add=function(g,l,_){return g[0]=l[0]+_[0],g[1]=l[1]+_[1],g[2]=l[2]+_[2],g},A.addDynamicAttributes=Gi,A.altitudeFromMercatorZ=sm,A.asyncAll=$r,A.bezier=Rn,A.bindAll=$t,A.bufferConvexPolygon=function(g,l){const _=[];for(let x=0;x<g.length;x++){const D=Vi(x-1,-1,g.length-1),F=Vi(x+1,-1,g.length-1),B=g[x],Z=g[F],X=g[D].sub(B).unit(),re=Z.sub(B).unit(),ce=re.angleWithSep(X.x,X.y),de=X.add(re).unit().mult(-1*l/Math.sin(ce/2));_.push(B.add(de))}return _},A.cacheEntryPossiblyAdded=function(g){di++,di>Jt&&(g.getActor().send("enforceCacheSizeLimit",Tt),di=0)},A.clamp=Mt,A.clearTileCache=function(g){const l=Ve.caches.delete(cc);g&&l.catch(g).then(()=>g())},A.clipLine=Rx,A.clone=function(g){var l=new fa(3);return l[0]=g[0],l[1]=g[1],l[2]=g[2],l},A.clone$1=function(g){var l=new fa(16);return l[0]=g[0],l[1]=g[1],l[2]=g[2],l[3]=g[3],l[4]=g[4],l[5]=g[5],l[6]=g[6],l[7]=g[7],l[8]=g[8],l[9]=g[9],l[10]=g[10],l[11]=g[11],l[12]=g[12],l[13]=g[13],l[14]=g[14],l[15]=g[15],l},A.clone$2=On,A.collisionCircleLayout=lf,A.config=Ri,A.conjugate=function(g,l){return g[0]=-l[0],g[1]=-l[1],g[2]=-l[2],g[3]=l[3],g},A.copy=function(g,l){return g[0]=l[0],g[1]=l[1],g[2]=l[2],g},A.create=Tl,A.create$1=function(){var g=new fa(16);return fa!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=0,g[12]=0,g[13]=0,g[14]=0),g[0]=1,g[5]=1,g[10]=1,g[15]=1,g},A.create$2=sg,A.createExpression=ml,A.createFilter=rd,A.createLayout=kn,A.createStyleLayer=function(g){return"custom"===g.type?new el(g):new rE[g.type](g)},A.cross=function(g,l,_){var x=l[0],D=l[1],F=l[2],B=_[0],Z=_[1],X=_[2];return g[0]=D*X-F*Z,g[1]=F*B-x*X,g[2]=x*Z-D*B,g},A.degToRad=zt,A.div=function(g,l,_){return g[0]=l[0]/_[0],g[1]=l[1]/_[1],g[2]=l[2]/_[2],g},A.dot=function(g,l){return g[0]*l[0]+g[1]*l[1]+g[2]*l[2]},A.dot$1=function(g,l){return g[0]*l[0]+g[1]*l[1]+g[2]*l[2]+g[3]*l[3]},A.ease=dn,A.easeCubicInOut=Qe,A.emitValidationErrors=Jd,A.endsWith=Ht,A.enforceCacheSizeLimit=function(g){Lt(),ft&&ft.then(l=>{l.keys().then(_=>{for(let x=0;x<_.length-g;x++)l.delete(_[x])})})},A.evaluateSizeForFeature=hp,A.evaluateSizeForZoom=Jf,A.evaluateVariableOffset=Lh,A.evented=ue,A.exactEquals=function(g,l){return g[0]===l[0]&&g[1]===l[1]&&g[2]===l[2]&&g[3]===l[3]},A.exactEquals$1=function(g,l){return g[0]===l[0]&&g[1]===l[1]&&g[2]===l[2]},A.exported=Or,A.exported$1=hs,A.extend=Di,A.filterObject=Yt,A.fromMat4=function(g,l){return g[0]=l[0],g[1]=l[1],g[2]=l[2],g[3]=l[4],g[4]=l[5],g[5]=l[6],g[6]=l[8],g[7]=l[9],g[8]=l[10],g},A.fromQuat=function(g,l){var _=l[0],x=l[1],D=l[2],F=l[3],B=_+_,Z=x+x,X=D+D,re=_*B,ce=x*B,de=x*Z,_e=D*B,Se=D*Z,Re=D*X,Xe=F*B,at=F*Z,bt=F*X;return g[0]=1-de-Re,g[1]=ce+bt,g[2]=_e-at,g[3]=0,g[4]=ce-bt,g[5]=1-re-Re,g[6]=Se+Xe,g[7]=0,g[8]=_e+at,g[9]=Se-Xe,g[10]=1-re-de,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},A.fromRotation=function(g,l){var _=Math.sin(l),x=Math.cos(l);return g[0]=x,g[1]=_,g[2]=0,g[3]=-_,g[4]=x,g[5]=0,g[6]=0,g[7]=0,g[8]=1,g},A.fromScaling=function(g,l){return g[0]=l[0],g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=l[1],g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=l[2],g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},A.furthestTileCorner=function(g){const l=Math.round((g+45+360)%360/90)%4;return an[l]},A.getAABBPointSquareDist=function(g,l,_){let x=0;for(let D=0;D<2;++D){const F=_?_[D]:0;g[D]>F&&(x+=(g[D]-F)*(g[D]-F)),l[D]<F&&(x+=(F-l[D])*(F-l[D]))}return x},A.getAnchorAlignment=Jo,A.getAnchorJustification=mp,A.getBounds=function(g){let l=1/0,_=1/0,x=-1/0,D=-1/0;for(const F of g)l=Math.min(l,F.x),_=Math.min(_,F.y),x=Math.max(x,F.x),D=Math.max(D,F.y);return{min:new Be(l,_),max:new Be(x,D)}},A.getImage=xt,A.getJSON=function(g,l){return He(Di(g,{type:"json"}),l)},A.getMapSessionAPI=br,A.getPerformanceMeasurement=Zv,A.getRTLTextPluginStatus=fe,A.getReferrer=er,A.getVideo=function(g,l){const _=Ve.document.createElement("video");_.muted=!0,_.onloadstart=function(){l(null,_)};for(let x=0;x<g.length;x++){const D=Ve.document.createElement("source");it(g[x])||(_.crossOrigin="Anonymous"),D.src=g[x],_.appendChild(D)}return{cancel:()=>{}}},A.identity=Fs,A.identity$1=Ss,A.invert=function(g,l){var _=l[0],x=l[1],D=l[2],F=l[3],B=l[4],Z=l[5],X=l[6],re=l[7],ce=l[8],de=l[9],_e=l[10],Se=l[11],Re=l[12],Xe=l[13],at=l[14],bt=l[15],It=_*Z-x*B,Rt=_*X-D*B,Bt=_*re-F*B,jt=x*X-D*Z,Ut=x*re-F*Z,mn=D*re-F*X,Cn=ce*Xe-de*Re,vn=ce*at-_e*Re,Tn=ce*bt-Se*Re,ln=de*at-_e*Xe,pn=de*bt-Se*Xe,In=_e*bt-Se*at,on=It*In-Rt*pn+Bt*ln+jt*Tn-Ut*vn+mn*Cn;return on?(g[0]=(Z*In-X*pn+re*ln)*(on=1/on),g[1]=(D*pn-x*In-F*ln)*on,g[2]=(Xe*mn-at*Ut+bt*jt)*on,g[3]=(_e*Ut-de*mn-Se*jt)*on,g[4]=(X*Tn-B*In-re*vn)*on,g[5]=(_*In-D*Tn+F*vn)*on,g[6]=(at*Bt-Re*mn-bt*Rt)*on,g[7]=(ce*mn-_e*Bt+Se*Rt)*on,g[8]=(B*pn-Z*Tn+re*Cn)*on,g[9]=(x*Tn-_*pn-F*Cn)*on,g[10]=(Re*Ut-Xe*Bt+bt*It)*on,g[11]=(de*Bt-ce*Ut-Se*It)*on,g[12]=(Z*vn-B*ln-X*Cn)*on,g[13]=(_*ln-x*vn+D*Cn)*on,g[14]=(Xe*Rt-Re*jt-at*It)*on,g[15]=(ce*jt-de*Rt+_e*It)*on,g):null},A.isMapAuthenticated=function(g){return Zo.has(g)},A.isMapboxURL=vr,A.latFromMercatorY=Xl,A.len=Cv,A.length=oi,A.length$1=function(g){return Math.hypot(g[0],g[1],g[2],g[3])},A.loadVectorTile=Sd,A.makeRequest=He,A.mercatorXfromLng=K_,A.mercatorYfromLat=Tg,A.mercatorZfromAltitude=ey,A.mul=function(g,l,_){return g[0]=l[0]*_[0],g[1]=l[1]*_[1],g[2]=l[2]*_[2],g[3]=l[3]*_[3],g},A.mul$1=El,A.mul$2=Qp,A.multiply=ud,A.multiply$1=bc,A.nextPowerOfTwo=Zt,A.normalize=jf,A.normalize$1=function(g,l){var _=l[0],x=l[1],D=l[2],F=l[3],B=_*_+x*x+D*D+F*F;return B>0&&(B=1/Math.sqrt(B)),g[0]=_*B,g[1]=x*B,g[2]=D*B,g[3]=F*B,g},A.number=ui,A.ortho=function(g,l,_,x,D,F,B){var Z=1/(l-_),X=1/(x-D),re=1/(F-B);return g[0]=-2*Z,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*X,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*re,g[11]=0,g[12]=(l+_)*Z,g[13]=(D+x)*X,g[14]=(B+F)*re,g[15]=1,g},A.pbf=em,A.perspective=function(g,l,_,x,D){var F,B=1/Math.tan(l/2);return g[0]=B/_,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=B,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=-1,g[12]=0,g[13]=0,g[15]=0,null!=D&&D!==1/0?(g[10]=(D+x)*(F=1/(x-D)),g[14]=2*D*x*F):(g[10]=-1,g[14]=-2*x),g},A.pick=function(g,l){const _={};for(let x=0;x<l.length;x++){const D=l[x];D in g&&(_[D]=g[D])}return _},A.plugin=Ae,A.pointGeometry=Be,A.polygonIntersectsBox=$p,A.polygonIntersectsPolygon=Th,A.polygonizeBounds=function(g,l,_=0,x=!0){const D=new Be(_,_),F=g.sub(D),B=l.add(D),Z=[F,new Be(B.x,F.y),B,new Be(F.x,B.y)];return x&&Z.push(F),Z},A.posAttributes=Qv,A.postMapLoadEvent=Vs,A.postTurnstileEvent=Ei,A.potpack=hf,A.prevPowerOfTwo=function(g){return g<=1?1:Math.pow(2,Math.floor(Math.log(g)/Math.LN2))},A.radToDeg=function(g){return g*Ct},A.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],A.registerForPluginStateChange=function(g){return g({pluginStatus:U,pluginURL:q}),ue.on("pluginStateChange",g),g},A.removeAuthState=function(g){Zo.delete(g)},A.renderColorRamp=ap,A.rotateX=function(g,l,_){var x=Math.sin(_),D=Math.cos(_),F=l[4],B=l[5],Z=l[6],X=l[7],re=l[8],ce=l[9],de=l[10],_e=l[11];return l!==g&&(g[0]=l[0],g[1]=l[1],g[2]=l[2],g[3]=l[3],g[12]=l[12],g[13]=l[13],g[14]=l[14],g[15]=l[15]),g[4]=F*D+re*x,g[5]=B*D+ce*x,g[6]=Z*D+de*x,g[7]=X*D+_e*x,g[8]=re*D-F*x,g[9]=ce*D-B*x,g[10]=de*D-Z*x,g[11]=_e*D-X*x,g},A.rotateX$1=xc,A.rotateY=function(g,l,_){var x=Math.sin(_),D=Math.cos(_),F=l[0],B=l[1],Z=l[2],X=l[3],re=l[8],ce=l[9],de=l[10],_e=l[11];return l!==g&&(g[4]=l[4],g[5]=l[5],g[6]=l[6],g[7]=l[7],g[12]=l[12],g[13]=l[13],g[14]=l[14],g[15]=l[15]),g[0]=F*D-re*x,g[1]=B*D-ce*x,g[2]=Z*D-de*x,g[3]=X*D-_e*x,g[8]=F*x+re*D,g[9]=B*x+ce*D,g[10]=Z*x+de*D,g[11]=X*x+_e*D,g},A.rotateZ=function(g,l,_){var x=Math.sin(_),D=Math.cos(_),F=l[0],B=l[1],Z=l[2],X=l[3],re=l[4],ce=l[5],de=l[6],_e=l[7];return l!==g&&(g[8]=l[8],g[9]=l[9],g[10]=l[10],g[11]=l[11],g[12]=l[12],g[13]=l[13],g[14]=l[14],g[15]=l[15]),g[0]=F*D+re*x,g[1]=B*D+ce*x,g[2]=Z*D+de*x,g[3]=X*D+_e*x,g[4]=re*D-F*x,g[5]=ce*D-B*x,g[6]=de*D-Z*x,g[7]=_e*D-X*x,g},A.rotateZ$1=function(g,l,_){_*=.5;var x=l[0],D=l[1],F=l[2],B=l[3],Z=Math.sin(_),X=Math.cos(_);return g[0]=x*X+D*Z,g[1]=D*X-x*Z,g[2]=F*X+B*Z,g[3]=B*X-F*Z,g},A.scale=function(g,l,_){return g[0]=l[0]*_,g[1]=l[1]*_,g[2]=l[2]*_,g},A.scale$1=function(g,l,_){var x=_[0],D=_[1],F=_[2];return g[0]=l[0]*x,g[1]=l[1]*x,g[2]=l[2]*x,g[3]=l[3]*x,g[4]=l[4]*D,g[5]=l[5]*D,g[6]=l[6]*D,g[7]=l[7]*D,g[8]=l[8]*F,g[9]=l[9]*F,g[10]=l[10]*F,g[11]=l[11]*F,g[12]=l[12],g[13]=l[13],g[14]=l[14],g[15]=l[15],g},A.scale$2=function(g,l,_){return g[0]=l[0]*_,g[1]=l[1]*_,g[2]=l[2]*_,g[3]=l[3]*_,g},A.scaleAndAdd=Nu,A.setCacheLimits=function(g,l){Tt=g,Jt=l},A.setRTLTextPlugin=function(g,l,_=!1){if(U===P||U===f||U===w)throw new Error("setRTLTextPlugin cannot be called multiple times.");q=Or.resolveURL(g),U=P,O=l,se(),_||Ce()},A.smoothstep=function(g,l,_){return(_=Mt((_-g)/(l-g),0,1))*_*(3-2*_)},A.spec=y,A.storeAuthState=function(g,l){l?Zo.add(g):Zo.delete(g)},A.sub=Yf,A.subtract=ag,A.symbolSize=bg,A.transformMat3=function(g,l,_){var x=l[0],D=l[1],F=l[2];return g[0]=x*_[0]+D*_[3]+F*_[6],g[1]=x*_[1]+D*_[4]+F*_[7],g[2]=x*_[2]+D*_[5]+F*_[8],g},A.transformMat4=dd,A.transformMat4$1=function(g,l,_){var x=l[0],D=l[1],F=l[2],B=_[3]*x+_[7]*D+_[11]*F+_[15];return g[0]=(_[0]*x+_[4]*D+_[8]*F+_[12])/(B=B||1),g[1]=(_[1]*x+_[5]*D+_[9]*F+_[13])/B,g[2]=(_[2]*x+_[6]*D+_[10]*F+_[14])/B,g},A.transformQuat=lg,A.translate=function(g,l,_){var x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe=_[0],at=_[1],bt=_[2];return l===g?(g[12]=l[0]*Xe+l[4]*at+l[8]*bt+l[12],g[13]=l[1]*Xe+l[5]*at+l[9]*bt+l[13],g[14]=l[2]*Xe+l[6]*at+l[10]*bt+l[14],g[15]=l[3]*Xe+l[7]*at+l[11]*bt+l[15]):(D=l[1],F=l[2],B=l[3],Z=l[4],X=l[5],re=l[6],ce=l[7],de=l[8],_e=l[9],Se=l[10],Re=l[11],g[0]=x=l[0],g[1]=D,g[2]=F,g[3]=B,g[4]=Z,g[5]=X,g[6]=re,g[7]=ce,g[8]=de,g[9]=_e,g[10]=Se,g[11]=Re,g[12]=x*Xe+Z*at+de*bt+l[12],g[13]=D*Xe+X*at+_e*bt+l[13],g[14]=F*Xe+re*at+Se*bt+l[14],g[15]=B*Xe+ce*at+Re*bt+l[15]),g},A.triggerPluginCompletionEvent=ee,A.uniqueId=Ji,A.validateCustomStyleLayer=function(g){const l=[],_=g.id;return void 0===_&&l.push({message:`layers.${_}: missing required property "id"`}),void 0===g.render&&l.push({message:`layers.${_}: missing required method "render"`}),g.renderingMode&&"2d"!==g.renderingMode&&"3d"!==g.renderingMode&&l.push({message:`layers.${_}: property "renderingMode" must be either "2d" or "3d"`}),l},A.validateFog=qp,A.validateLight=Vc,A.validateStyle=Mu,A.values=Vn,A.vectorTile=Oh,A.version="2.4.1",A.warnOnce=mi,A.window=Ve,A.wrap=Vi}),Vt(0,function(A){function gt(He){const we=typeof He;if("number"===we||"boolean"===we||"string"===we||null==He)return JSON.stringify(He);if(Array.isArray(He)){let it="[";for(const yt of He)it+=`${gt(yt)},`;return`${it}]`}const De=Object.keys(He).sort();let qe="{";for(let it=0;it<De.length;it++)qe+=`${JSON.stringify(De[it])}:${gt(He[De[it]])},`;return`${qe}}`}function Dt(He){let we="";for(const De of A.refProperties)we+=`/${gt(He[De])}`;return we}class wt{constructor(we){this.keyCache={},we&&this.replace(we)}replace(we){this._layerConfigs={},this._layers={},this.update(we,[])}update(we,De){for(const it of we){this._layerConfigs[it.id]=it;const yt=this._layers[it.id]=A.createStyleLayer(it);yt._featureFilter=A.createFilter(yt.filter),this.keyCache[it.id]&&delete this.keyCache[it.id]}for(const it of De)delete this.keyCache[it],delete this._layerConfigs[it],delete this._layers[it];this.familiesBySource={};const qe=function(it,yt){const Ot={};for(let xt=0;xt<it.length;xt++){const Ft=yt&&yt[it[xt].id]||Dt(it[xt]);yt&&(yt[it[xt].id]=Ft);let en=Ot[Ft];en||(en=Ot[Ft]=[]),en.push(it[xt])}const Pt=[];for(const xt in Ot)Pt.push(Ot[xt]);return Pt}(A.values(this._layerConfigs),this.keyCache);for(const it of qe){const yt=it.map(ve=>this._layers[ve.id]),Ot=yt[0];if("none"===Ot.visibility)continue;const Pt=Ot.source||"";let xt=this.familiesBySource[Pt];xt||(xt=this.familiesBySource[Pt]={});const Ft=Ot.sourceLayer||"_geojsonTileLayer";let en=xt[Ft];en||(en=xt[Ft]=[]),en.push(yt)}}}const{ImageBitmap:Be}=A.window;class Ge{loadTile(we,De){const{uid:qe,encoding:it,rawImageData:yt,padding:Ot,buildQuadTree:Pt}=we,xt=Be&&yt instanceof Be?this.getImageData(yt,Ot):yt;De(null,new A.DEMData(qe,xt,it,Ot<1,Pt))}getImageData(we,De){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(we.width,we.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=we.width,this.offscreenCanvas.height=we.height,this.offscreenCanvasContext.drawImage(we,0,0,we.width,we.height);const qe=this.offscreenCanvasContext.getImageData(-De,-De,we.width+2*De,we.height+2*De);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new A.RGBAImage({width:qe.width,height:qe.height},qe.data)}}var Ve=function He(we,De){var qe,it=we&&we.type;if("FeatureCollection"===it)for(qe=0;qe<we.features.length;qe++)He(we.features[qe],De);else if("GeometryCollection"===it)for(qe=0;qe<we.geometries.length;qe++)He(we.geometries[qe],De);else if("Feature"===it)He(we.geometry,De);else if("Polygon"===it)Et(we.coordinates,De);else if("MultiPolygon"===it)for(qe=0;qe<we.coordinates.length;qe++)Et(we.coordinates[qe],De);return we};function Et(He,we){if(0!==He.length){lt(He[0],we);for(var De=1;De<He.length;De++)lt(He[De],!we)}}function lt(He,we){for(var De=0,qe=0,it=He.length,yt=it-1;qe<it;yt=qe++)De+=(He[qe][0]-He[yt][0])*(He[yt][1]+He[qe][1]);De>=0!=!!we&&He.reverse()}const Ct=A.vectorTile.VectorTileFeature.prototype.toGeoJSON;class zt{constructor(we){this._feature=we,this.extent=A.EXTENT,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))}loadGeometry(){if(1===this._feature.type){const we=[];for(const De of this._feature.geometry)we.push([new A.pointGeometry(De[0],De[1])]);return we}{const we=[];for(const De of this._feature.geometry){const qe=[];for(const it of De)qe.push(new A.pointGeometry(it[0],it[1]));we.push(qe)}return we}}toGeoJSON(we,De,qe){return Ct.call(this,we,De,qe)}}class an{constructor(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=A.EXTENT,this.length=we.length,this._features=we}feature(we){return new zt(this._features[we])}}var Qe=A.vectorTile.VectorTileFeature,Rn=dn;function dn(He,we){this.options=we||{},this.features=He,this.length=He.length}function Mt(He,we){this.id="number"==typeof He.id?He.id:void 0,this.type=He.type,this.rawGeometry=1===He.type?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=we||4096}dn.prototype.feature=function(He){return new Mt(this.features[He],this.options.extent)},Mt.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var we=0;we<He.length;we++){for(var De=He[we],qe=[],it=0;it<De.length;it++)qe.push(new A.pointGeometry(De[it][0],De[it][1]));this.geometry.push(qe)}return this.geometry},Mt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,we=1/0,De=-1/0,qe=1/0,it=-1/0,yt=0;yt<He.length;yt++)for(var Ot=He[yt],Pt=0;Pt<Ot.length;Pt++){var xt=Ot[Pt];we=Math.min(we,xt.x),De=Math.max(De,xt.x),qe=Math.min(qe,xt.y),it=Math.max(it,xt.y)}return[we,qe,De,it]},Mt.prototype.toGeoJSON=Qe.prototype.toGeoJSON;var Vi=Vn,$r=Rn;function Vn(He){var we=new A.pbf;return function(De,qe){for(var it in De.layers)qe.writeMessage(3,Di,De.layers[it])}(He,we),we.finish()}function Di(He,we){var De;we.writeVarintField(15,He.version||1),we.writeStringField(1,He.name||""),we.writeVarintField(5,He.extent||4096);var qe={keys:[],values:[],keycache:{},valuecache:{}};for(De=0;De<He.length;De++)qe.feature=He.feature(De),we.writeMessage(2,zr,qe);var it=qe.keys;for(De=0;De<it.length;De++)we.writeStringField(3,it[De]);var yt=qe.values;for(De=0;De<yt.length;De++)we.writeMessage(4,$t,yt[De])}function zr(He,we){var De=He.feature;void 0!==De.id&&we.writeVarintField(1,De.id),we.writeMessage(2,Ji,He),we.writeVarintField(3,De.type),we.writeMessage(4,Gt,De)}function Ji(He,we){var De=He.feature,qe=He.keys,it=He.values,yt=He.keycache,Ot=He.valuecache;for(var Pt in De.properties){var xt=yt[Pt];void 0===xt&&(qe.push(Pt),yt[Pt]=xt=qe.length-1),we.writeVarint(xt);var Ft=De.properties[Pt],en=typeof Ft;"string"!==en&&"boolean"!==en&&"number"!==en&&(Ft=JSON.stringify(Ft));var ve=en+":"+Ft,d=Ot[ve];void 0===d&&(it.push(Ft),Ot[ve]=d=it.length-1),we.writeVarint(d)}}function Ki(He,we){return(we<<3)+(7&He)}function Zt(He){return He<<1^He>>31}function Gt(He,we){for(var De=He.loadGeometry(),qe=He.type,it=0,yt=0,Ot=De.length,Pt=0;Pt<Ot;Pt++){var xt=De[Pt],Ft=1;1===qe&&(Ft=xt.length),we.writeVarint(Ki(1,Ft));for(var en=3===qe?xt.length-1:xt.length,ve=0;ve<en;ve++){1===ve&&1!==qe&&we.writeVarint(Ki(2,en-1));var d=xt[ve].x-it,p=xt[ve].y-yt;we.writeVarint(Zt(d)),we.writeVarint(Zt(p)),it+=d,yt+=p}3===qe&&we.writeVarint(Ki(7,1))}}function $t(He,we){var De=typeof He;"string"===De?we.writeStringField(1,He):"boolean"===De?we.writeBooleanField(7,He):"number"===De&&(He%1!=0?we.writeDoubleField(3,He):He<0?we.writeSVarintField(6,He):we.writeVarintField(5,He))}function Ht(He,we,De,qe,it,yt){if(it-qe<=De)return;const Ot=qe+it>>1;fn(He,we,Ot,qe,it,yt%2),Ht(He,we,De,qe,Ot-1,yt+1),Ht(He,we,De,Ot+1,it,yt+1)}function fn(He,we,De,qe,it,yt){for(;it>qe;){if(it-qe>600){const Ft=it-qe+1,en=De-qe+1,ve=Math.log(Ft),d=.5*Math.exp(2*ve/3),p=.5*Math.sqrt(ve*d*(Ft-d)/Ft)*(en-Ft/2<0?-1:1);fn(He,we,De,Math.max(qe,Math.floor(De-en*d/Ft+p)),Math.min(it,Math.floor(De+(Ft-en)*d/Ft+p)),yt)}const Ot=we[2*De+yt];let Pt=qe,xt=it;for(Yt(He,we,qe,De),we[2*it+yt]>Ot&&Yt(He,we,qe,it);Pt<xt;){for(Yt(He,we,Pt,xt),Pt++,xt--;we[2*Pt+yt]<Ot;)Pt++;for(;we[2*xt+yt]>Ot;)xt--}we[2*qe+yt]===Ot?Yt(He,we,qe,xt):(xt++,Yt(He,we,xt,it)),xt<=De&&(qe=xt+1),De<=xt&&(it=xt-1)}}function Yt(He,we,De,qe){On(He,De,qe),On(we,2*De,2*qe),On(we,2*De+1,2*qe+1)}function On(He,we,De){const qe=He[we];He[we]=He[De],He[De]=qe}function hi(He,we,De,qe){const it=He-De,yt=we-qe;return it*it+yt*yt}Vi.fromVectorTileJs=Vn,Vi.fromGeojsonVt=function(He,we){we=we||{};var De={};for(var qe in He)De[qe]=new Rn(He[qe].features,we),De[qe].name=qe,De[qe].version=we.version,De[qe].extent=we.extent;return Vn({layers:De})},Vi.GeoJSONWrapper=$r;const mi=He=>He[0],Un=He=>He[1];class ii{constructor(we,De=mi,qe=Un,it=64,yt=Float64Array){this.nodeSize=it,this.points=we;const Ot=we.length<65536?Uint16Array:Uint32Array,Pt=this.ids=new Ot(we.length),xt=this.coords=new yt(2*we.length);for(let Ft=0;Ft<we.length;Ft++)Pt[Ft]=Ft,xt[2*Ft]=De(we[Ft]),xt[2*Ft+1]=qe(we[Ft]);Ht(Pt,xt,it,0,Pt.length-1,0)}range(we,De,qe,it){return function(yt,Ot,Pt,xt,Ft,en,ve){const d=[0,yt.length-1,0],p=[];let y,C;for(;d.length;){const M=d.pop(),L=d.pop(),R=d.pop();if(L-R<=ve){for(let J=R;J<=L;J++)y=Ot[2*J],C=Ot[2*J+1],y>=Pt&&y<=Ft&&C>=xt&&C<=en&&p.push(yt[J]);continue}const H=Math.floor((R+L)/2);y=Ot[2*H],C=Ot[2*H+1],y>=Pt&&y<=Ft&&C>=xt&&C<=en&&p.push(yt[H]);const G=(M+1)%2;(0===M?Pt<=y:xt<=C)&&(d.push(R),d.push(H-1),d.push(G)),(0===M?Ft>=y:en>=C)&&(d.push(H+1),d.push(L),d.push(G))}return p}(this.ids,this.coords,we,De,qe,it,this.nodeSize)}within(we,De,qe){return function(it,yt,Ot,Pt,xt,Ft){const en=[0,it.length-1,0],ve=[],d=xt*xt;for(;en.length;){const p=en.pop(),y=en.pop(),C=en.pop();if(y-C<=Ft){for(let G=C;G<=y;G++)hi(yt[2*G],yt[2*G+1],Ot,Pt)<=d&&ve.push(it[G]);continue}const M=Math.floor((C+y)/2),L=yt[2*M],R=yt[2*M+1];hi(L,R,Ot,Pt)<=d&&ve.push(it[M]);const H=(p+1)%2;(0===p?Ot-xt<=L:Pt-xt<=R)&&(en.push(C),en.push(M-1),en.push(H)),(0===p?Ot+xt>=L:Pt+xt>=R)&&(en.push(M+1),en.push(y),en.push(H))}return ve}(this.ids,this.coords,we,De,qe,this.nodeSize)}}const Hn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:He=>He},jn=Math.fround||(xi=new Float32Array(1),He=>(xi[0]=+He,xi[0]));var xi;class li{constructor(we){this.options=hs(Object.create(Hn),we),this.trees=new Array(this.options.maxZoom+1)}load(we){const{log:De,minZoom:qe,maxZoom:it,nodeSize:yt}=this.options;De&&console.time("total time");const Ot=`prepare ${we.length} points`;De&&console.time(Ot),this.points=we;let Pt=[];for(let xt=0;xt<we.length;xt++)we[xt].geometry&&Pt.push(Do(we[xt],xt));this.trees[it+1]=new ii(Pt,Li,Si,yt,Float32Array),De&&console.timeEnd(Ot);for(let xt=it;xt>=qe;xt--){const Ft=+Date.now();Pt=this._cluster(Pt,xt),this.trees[xt]=new ii(Pt,Li,Si,yt,Float32Array),De&&console.log("z%d: %d clusters in %dms",xt,Pt.length,+Date.now()-Ft)}return De&&console.timeEnd("total time"),this}getClusters(we,De){let qe=((we[0]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,we[1]));let yt=180===we[2]?180:((we[2]+180)%360+360)%360-180;const Ot=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)qe=-180,yt=180;else if(qe>yt){const en=this.getClusters([qe,it,180,Ot],De),ve=this.getClusters([-180,it,yt,Ot],De);return en.concat(ve)}const Pt=this.trees[this._limitZoom(De)],xt=Pt.range(Or(qe),ks(Ot),Or(yt),ks(it)),Ft=[];for(const en of xt){const ve=Pt.points[en];Ft.push(ve.numPoints?fr(ve):this.points[ve.index])}return Ft}getChildren(we){const De=this._getOriginId(we),qe=this._getOriginZoom(we),it="No cluster with the specified id.",yt=this.trees[qe];if(!yt)throw new Error(it);const Ot=yt.points[De];if(!Ot)throw new Error(it);const Pt=this.options.radius/(this.options.extent*Math.pow(2,qe-1)),xt=yt.within(Ot.x,Ot.y,Pt),Ft=[];for(const en of xt){const ve=yt.points[en];ve.parentId===we&&Ft.push(ve.numPoints?fr(ve):this.points[ve.index])}if(0===Ft.length)throw new Error(it);return Ft}getLeaves(we,De,qe){const it=[];return this._appendLeaves(it,we,De=De||10,qe=qe||0,0),it}getTile(we,De,qe){const it=this.trees[this._limitZoom(we)],yt=Math.pow(2,we),{extent:Ot,radius:Pt}=this.options,xt=Pt/Ot,Ft=(qe-xt)/yt,en=(qe+1+xt)/yt,ve={features:[]};return this._addTileFeatures(it.range((De-xt)/yt,Ft,(De+1+xt)/yt,en),it.points,De,qe,yt,ve),0===De&&this._addTileFeatures(it.range(1-xt/yt,Ft,1,en),it.points,yt,qe,yt,ve),De===yt-1&&this._addTileFeatures(it.range(0,Ft,xt/yt,en),it.points,-1,qe,yt,ve),ve.features.length?ve:null}getClusterExpansionZoom(we){let De=this._getOriginZoom(we)-1;for(;De<=this.options.maxZoom;){const qe=this.getChildren(we);if(De++,1!==qe.length)break;we=qe[0].properties.cluster_id}return De}_appendLeaves(we,De,qe,it,yt){const Ot=this.getChildren(De);for(const Pt of Ot){const xt=Pt.properties;if(xt&&xt.cluster?yt+xt.point_count<=it?yt+=xt.point_count:yt=this._appendLeaves(we,xt.cluster_id,qe,it,yt):yt<it?yt++:we.push(Pt),we.length===qe)break}return yt}_addTileFeatures(we,De,qe,it,yt,Ot){for(const Pt of we){const xt=De[Pt],Ft=xt.numPoints;let en,ve,d;if(Ft)en=io(xt),ve=xt.x,d=xt.y;else{const C=this.points[xt.index];en=C.properties,ve=Or(C.geometry.coordinates[0]),d=ks(C.geometry.coordinates[1])}const p={type:1,geometry:[[Math.round(this.options.extent*(ve*yt-qe)),Math.round(this.options.extent*(d*yt-it))]],tags:en};let y;Ft?y=xt.id:this.options.generateId?y=xt.index:this.points[xt.index].id&&(y=this.points[xt.index].id),void 0!==y&&(p.id=y),Ot.features.push(p)}}_limitZoom(we){return Math.max(this.options.minZoom,Math.min(+we,this.options.maxZoom+1))}_cluster(we,De){const qe=[],{radius:it,extent:yt,reduce:Ot,minPoints:Pt}=this.options,xt=it/(yt*Math.pow(2,De));for(let Ft=0;Ft<we.length;Ft++){const en=we[Ft];if(en.zoom<=De)continue;en.zoom=De;const ve=this.trees[De+1],d=ve.within(en.x,en.y,xt),p=en.numPoints||1;let y=p;for(const C of d){const M=ve.points[C];M.zoom>De&&(y+=M.numPoints||1)}if(y>=Pt){let C=en.x*p,M=en.y*p,L=Ot&&p>1?this._map(en,!0):null;const R=(Ft<<5)+(De+1)+this.points.length;for(const H of d){const G=ve.points[H];if(G.zoom<=De)continue;G.zoom=De;const J=G.numPoints||1;C+=G.x*J,M+=G.y*J,G.parentId=R,Ot&&(L||(L=this._map(en,!0)),Ot(L,this._map(G)))}en.parentId=R,qe.push(Yi(C/y,M/y,R,y,L))}else if(qe.push(en),y>1)for(const C of d){const M=ve.points[C];M.zoom<=De||(M.zoom=De,qe.push(M))}}return qe}_getOriginId(we){return we-this.points.length>>5}_getOriginZoom(we){return(we-this.points.length)%32}_map(we,De){if(we.numPoints)return De?hs({},we.properties):we.properties;const qe=this.points[we.index].properties,it=this.options.map(qe);return De&&it===qe?hs({},it):it}}function Yi(He,we,De,qe,it){return{x:jn(He),y:jn(we),zoom:1/0,id:De,parentId:-1,numPoints:qe,properties:it}}function Do(He,we){const[De,qe]=He.geometry.coordinates;return{x:jn(Or(De)),y:jn(ks(qe)),zoom:1/0,index:we,parentId:-1}}function fr(He){return{type:"Feature",id:He.id,properties:io(He),geometry:{type:"Point",coordinates:[(we=He.x,360*(we-.5)),Ri(He.y)]}};var we}function io(He){const we=He.numPoints,De=we>=1e4?`${Math.round(we/1e3)}k`:we>=1e3?Math.round(we/100)/10+"k":we;return hs(hs({},He.properties),{cluster:!0,cluster_id:He.id,point_count:we,point_count_abbreviated:De})}function Or(He){return He/360+.5}function ks(He){const we=Math.sin(He*Math.PI/180),De=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return De<0?0:De>1?1:De}function Ri(He){const we=(180-360*He)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function hs(He,we){for(const De in we)He[De]=we[De];return He}function Li(He){return He.x}function Si(He){return He.y}function co(He,we,De,qe){for(var it,yt=qe,Ot=De-we>>1,Pt=De-we,xt=He[we],Ft=He[we+1],en=He[De],ve=He[De+1],d=we+3;d<De;d+=3){var p=Io(He[d],He[d+1],xt,Ft,en,ve);if(p>yt)it=d,yt=p;else if(p===yt){var y=Math.abs(d-Ot);y<Pt&&(it=d,Pt=y)}}yt>qe&&(it-we>3&&co(He,we,it,qe),He[it+2]=yt,De-it>3&&co(He,it,De,qe))}function Io(He,we,De,qe,it,yt){var Ot=it-De,Pt=yt-qe;if(0!==Ot||0!==Pt){var xt=((He-De)*Ot+(we-qe)*Pt)/(Ot*Ot+Pt*Pt);xt>1?(De=it,qe=yt):xt>0&&(De+=Ot*xt,qe+=Pt*xt)}return(Ot=He-De)*Ot+(Pt=we-qe)*Pt}function Yn(He,we,De,qe){var it={id:void 0===He?null:He,type:we,geometry:De,tags:qe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(yt){var Ot=yt.geometry,Pt=yt.type;if("Point"===Pt||"MultiPoint"===Pt||"LineString"===Pt)yr(yt,Ot);else if("Polygon"===Pt||"MultiLineString"===Pt)for(var xt=0;xt<Ot.length;xt++)yr(yt,Ot[xt]);else if("MultiPolygon"===Pt)for(xt=0;xt<Ot.length;xt++)for(var Ft=0;Ft<Ot[xt].length;Ft++)yr(yt,Ot[xt][Ft])}(it),it}function yr(He,we){for(var De=0;De<we.length;De+=3)He.minX=Math.min(He.minX,we[De]),He.minY=Math.min(He.minY,we[De+1]),He.maxX=Math.max(He.maxX,we[De]),He.maxY=Math.max(He.maxY,we[De+1])}function Vr(He,we,De,qe){if(we.geometry){var it=we.geometry.coordinates,yt=we.geometry.type,Ot=Math.pow(De.tolerance/((1<<De.maxZoom)*De.extent),2),Pt=[],xt=we.id;if(De.promoteId?xt=we.properties[De.promoteId]:De.generateId&&(xt=qe||0),"Point"===yt)vr(it,Pt);else if("MultiPoint"===yt)for(var Ft=0;Ft<it.length;Ft++)vr(it[Ft],Pt);else if("LineString"===yt)ns(it,Pt,Ot,!1);else if("MultiLineString"===yt){if(De.lineMetrics){for(Ft=0;Ft<it.length;Ft++)ns(it[Ft],Pt=[],Ot,!1),He.push(Yn(xt,"LineString",Pt,we.properties));return}_u(it,Pt,Ot,!1)}else if("Polygon"===yt)_u(it,Pt,Ot,!0);else{if("MultiPolygon"!==yt){if("GeometryCollection"===yt){for(Ft=0;Ft<we.geometry.geometries.length;Ft++)Vr(He,{id:xt,geometry:we.geometry.geometries[Ft],properties:we.properties},De,qe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ft=0;Ft<it.length;Ft++){var en=[];_u(it[Ft],en,Ot,!0),Pt.push(en)}}He.push(Yn(xt,yt,Pt,we.properties))}}function vr(He,we){we.push(uo(He[0])),we.push(Ur(He[1])),we.push(0)}function ns(He,we,De,qe){for(var it,yt,Ot=0,Pt=0;Pt<He.length;Pt++){var xt=uo(He[Pt][0]),Ft=Ur(He[Pt][1]);we.push(xt),we.push(Ft),we.push(0),Pt>0&&(Ot+=qe?(it*Ft-xt*yt)/2:Math.sqrt(Math.pow(xt-it,2)+Math.pow(Ft-yt,2))),it=xt,yt=Ft}var en=we.length-3;we[2]=1,co(we,0,en,De),we[en+2]=1,we.size=Math.abs(Ot),we.start=0,we.end=we.size}function _u(He,we,De,qe){for(var it=0;it<He.length;it++){var yt=[];ns(He[it],yt,De,qe),we.push(yt)}}function uo(He){return He/360+.5}function Ur(He){var we=Math.sin(He*Math.PI/180),De=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return De<0?0:De>1?1:De}function is(He,we,De,qe,it,yt,Ot,Pt){if(qe/=we,yt>=(De/=we)&&Ot<qe)return He;if(Ot<De||yt>=qe)return null;for(var xt=[],Ft=0;Ft<He.length;Ft++){var en=He[Ft],ve=en.geometry,d=en.type,p=0===it?en.minX:en.minY,y=0===it?en.maxX:en.maxY;if(p>=De&&y<qe)xt.push(en);else if(!(y<De||p>=qe)){var C=[];if("Point"===d||"MultiPoint"===d)Hr(ve,C,De,qe,it);else if("LineString"===d)$n(ve,C,De,qe,it,!1,Pt.lineMetrics);else if("MultiLineString"===d)Nl(ve,C,De,qe,it,!1);else if("Polygon"===d)Nl(ve,C,De,qe,it,!0);else if("MultiPolygon"===d)for(var M=0;M<ve.length;M++){var L=[];Nl(ve[M],L,De,qe,it,!0),L.length&&C.push(L)}if(C.length){if(Pt.lineMetrics&&"LineString"===d){for(M=0;M<C.length;M++)xt.push(Yn(en.id,d,C[M],en.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===C.length?(d="LineString",C=C[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===C.length?"Point":"MultiPoint"),xt.push(Yn(en.id,d,C,en.tags))}}}return xt.length?xt:null}function Hr(He,we,De,qe,it){for(var yt=0;yt<He.length;yt+=3){var Ot=He[yt+it];Ot>=De&&Ot<=qe&&(we.push(He[yt]),we.push(He[yt+1]),we.push(He[yt+2]))}}function $n(He,we,De,qe,it,yt,Ot){for(var Pt,xt,Ft=Ei(He),en=0===it?_s:br,ve=He.start,d=0;d<He.length-3;d+=3){var p=He[d],y=He[d+1],C=He[d+2],M=He[d+3],L=He[d+4],R=0===it?p:y,H=0===it?M:L,G=!1;Ot&&(Pt=Math.sqrt(Math.pow(p-M,2)+Math.pow(y-L,2))),R<De?H>De&&(xt=en(Ft,p,y,M,L,De),Ot&&(Ft.start=ve+Pt*xt)):R>qe?H<qe&&(xt=en(Ft,p,y,M,L,qe),Ot&&(Ft.start=ve+Pt*xt)):Vs(Ft,p,y,C),H<De&&R>=De&&(xt=en(Ft,p,y,M,L,De),G=!0),H>qe&&R<=qe&&(xt=en(Ft,p,y,M,L,qe),G=!0),!yt&&G&&(Ot&&(Ft.end=ve+Pt*xt),we.push(Ft),Ft=Ei(He)),Ot&&(ve+=Pt)}var J=He.length-3;p=He[J],y=He[J+1],C=He[J+2],(R=0===it?p:y)>=De&&R<=qe&&Vs(Ft,p,y,C),J=Ft.length-3,yt&&J>=3&&(Ft[J]!==Ft[0]||Ft[J+1]!==Ft[1])&&Vs(Ft,Ft[0],Ft[1],Ft[2]),Ft.length&&we.push(Ft)}function Ei(He){var we=[];return we.size=He.size,we.start=He.start,we.end=He.end,we}function Nl(He,we,De,qe,it,yt){for(var Ot=0;Ot<He.length;Ot++)$n(He[Ot],we,De,qe,it,yt,!1)}function Vs(He,we,De,qe){He.push(we),He.push(De),He.push(qe)}function _s(He,we,De,qe,it,yt){var Ot=(yt-we)/(qe-we);return He.push(yt),He.push(De+(it-De)*Ot),He.push(1),Ot}function br(He,we,De,qe,it,yt){var Ot=(yt-De)/(it-De);return He.push(we+(qe-we)*Ot),He.push(yt),He.push(1),Ot}function Zo(He,we){for(var De=[],qe=0;qe<He.length;qe++){var it,yt=He[qe],Ot=yt.type;if("Point"===Ot||"MultiPoint"===Ot||"LineString"===Ot)it=cc(yt.geometry,we);else if("MultiLineString"===Ot||"Polygon"===Ot){it=[];for(var Pt=0;Pt<yt.geometry.length;Pt++)it.push(cc(yt.geometry[Pt],we))}else if("MultiPolygon"===Ot)for(it=[],Pt=0;Pt<yt.geometry.length;Pt++){for(var xt=[],Ft=0;Ft<yt.geometry[Pt].length;Ft++)xt.push(cc(yt.geometry[Pt][Ft],we));it.push(xt)}De.push(Yn(yt.id,Ot,it,yt.tags))}return De}function cc(He,we){var De=[];De.size=He.size,void 0!==He.start&&(De.start=He.start,De.end=He.end);for(var qe=0;qe<He.length;qe+=3)De.push(He[qe]+we,He[qe+1],He[qe+2]);return De}function ft(He,we){if(He.transformed)return He;var De,qe,it,yt=1<<He.z,Ot=He.x,Pt=He.y;for(De=0;De<He.features.length;De++){var xt=He.features[De],Ft=xt.geometry,en=xt.type;if(xt.geometry=[],1===en)for(qe=0;qe<Ft.length;qe+=2)xt.geometry.push(dt(Ft[qe],Ft[qe+1],we,yt,Ot,Pt));else for(qe=0;qe<Ft.length;qe++){var ve=[];for(it=0;it<Ft[qe].length;it+=2)ve.push(dt(Ft[qe][it],Ft[qe][it+1],we,yt,Ot,Pt));xt.geometry.push(ve)}}return He.transformed=!0,He}function dt(He,we,De,qe,it,yt){return[Math.round(De*(He*qe-it)),Math.round(De*(we*qe-yt))]}function Tt(He,we,De,qe,it){for(var yt=we===it.maxZoom?0:it.tolerance/((1<<we)*it.extent),Ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:De,y:qe,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Pt=0;Pt<He.length;Pt++){Ot.numFeatures++,Jt(Ot,He[Pt],yt,it);var xt=He[Pt].minX,Ft=He[Pt].minY,en=He[Pt].maxX,ve=He[Pt].maxY;xt<Ot.minX&&(Ot.minX=xt),Ft<Ot.minY&&(Ot.minY=Ft),en>Ot.maxX&&(Ot.maxX=en),ve>Ot.maxY&&(Ot.maxY=ve)}return Ot}function Jt(He,we,De,qe){var it=we.geometry,yt=we.type,Ot=[];if("Point"===yt||"MultiPoint"===yt)for(var Pt=0;Pt<it.length;Pt+=3)Ot.push(it[Pt]),Ot.push(it[Pt+1]),He.numPoints++,He.numSimplified++;else if("LineString"===yt)Lt(Ot,it,He,De,!1,!1);else if("MultiLineString"===yt||"Polygon"===yt)for(Pt=0;Pt<it.length;Pt++)Lt(Ot,it[Pt],He,De,"Polygon"===yt,0===Pt);else if("MultiPolygon"===yt)for(var xt=0;xt<it.length;xt++){var Ft=it[xt];for(Pt=0;Pt<Ft.length;Pt++)Lt(Ot,Ft[Pt],He,De,!0,0===Pt)}if(Ot.length){var en=we.tags||null;if("LineString"===yt&&qe.lineMetrics){for(var ve in en={},we.tags)en[ve]=we.tags[ve];en.mapbox_clip_start=it.start/it.size,en.mapbox_clip_end=it.end/it.size}var d={geometry:Ot,type:"Polygon"===yt||"MultiPolygon"===yt?3:"LineString"===yt||"MultiLineString"===yt?2:1,tags:en};null!==we.id&&(d.id=we.id),He.features.push(d)}}function Lt(He,we,De,qe,it,yt){var Ot=qe*qe;if(qe>0&&we.size<(it?Ot:qe))De.numPoints+=we.length/3;else{for(var Pt=[],xt=0;xt<we.length;xt+=3)(0===qe||we[xt+2]>Ot)&&(De.numSimplified++,Pt.push(we[xt]),Pt.push(we[xt+1])),De.numPoints++;it&&function(Ft,en){for(var ve=0,d=0,p=Ft.length,y=p-2;d<p;y=d,d+=2)ve+=(Ft[d]-Ft[y])*(Ft[d+1]+Ft[y+1]);if(ve>0===en)for(d=0,p=Ft.length;d<p/2;d+=2){var C=Ft[d],M=Ft[d+1];Ft[d]=Ft[p-2-d],Ft[d+1]=Ft[p-1-d],Ft[p-2-d]=C,Ft[p-1-d]=M}}(Pt,yt),He.push(Pt)}}function Ln(He,we){var De=(we=this.options=function(it,yt){for(var Ot in yt)it[Ot]=yt[Ot];return it}(Object.create(this.options),we)).debug;if(De&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");var it,yt,Ot,Pt,xt,Ft,qe=function(it,yt){var Ot=[];if("FeatureCollection"===it.type)for(var Pt=0;Pt<it.features.length;Pt++)Vr(Ot,it.features[Pt],yt,Pt);else Vr(Ot,"Feature"===it.type?it:{geometry:it},yt);return Ot}(He,we);this.tiles={},this.tileCoords=[],De&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(it=qe,yt=we,Ot=yt.buffer/yt.extent,Pt=it,xt=is(it,1,-1-Ot,Ot,0,-1,2,yt),Ft=is(it,1,1-Ot,2+Ot,0,-1,2,yt),(xt||Ft)&&(Pt=is(it,1,-Ot,1+Ot,0,-1,2,yt)||[],xt&&(Pt=Zo(xt,1).concat(Pt)),Ft&&(Pt=Pt.concat(Zo(Ft,-1)))),qe=Pt).length&&this.splitTile(qe,0,0,0),De&&(qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function di(He,we,De){return 32*((1<<He)*De+we)+He}function Oi(He,we){const De=He.tileID.canonical;if(!this._geoJSONIndex)return we(null,null);const qe=this._geoJSONIndex.getTile(De.z,De.x,De.y);if(!qe)return we(null,null);const it=new an(qe.features);let yt=Vi(it);0===yt.byteOffset&&yt.byteLength===yt.buffer.byteLength||(yt=new Uint8Array(yt)),we(null,{vectorTile:it,rawData:yt.buffer})}Ln.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ln.prototype.splitTile=function(He,we,De,qe,it,yt,Ot){for(var Pt=[He,we,De,qe],xt=this.options,Ft=xt.debug;Pt.length;){qe=Pt.pop(),De=Pt.pop(),we=Pt.pop(),He=Pt.pop();var en=1<<we,ve=di(we,De,qe),d=this.tiles[ve];if(!d&&(Ft>1&&console.time("creation"),d=this.tiles[ve]=Tt(He,we,De,qe,xt),this.tileCoords.push({z:we,x:De,y:qe}),Ft)){Ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,De,qe,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+we;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=He,it){if(we===xt.maxZoom||we===it)continue;var y=1<<it-we;if(De!==Math.floor(yt/y)||qe!==Math.floor(Ot/y))continue}else if(we===xt.indexMaxZoom||d.numPoints<=xt.indexMaxPoints)continue;if(d.source=null,0!==He.length){Ft>1&&console.time("clipping");var C,M,L,R,H,G,J=.5*xt.buffer/xt.extent,te=.5-J,K=.5+J,ae=1+J;C=M=L=R=null,H=is(He,en,De-J,De+K,0,d.minX,d.maxX,xt),G=is(He,en,De+te,De+ae,0,d.minX,d.maxX,xt),He=null,H&&(C=is(H,en,qe-J,qe+K,1,d.minY,d.maxY,xt),M=is(H,en,qe+te,qe+ae,1,d.minY,d.maxY,xt),H=null),G&&(L=is(G,en,qe-J,qe+K,1,d.minY,d.maxY,xt),R=is(G,en,qe+te,qe+ae,1,d.minY,d.maxY,xt),G=null),Ft>1&&console.timeEnd("clipping"),Pt.push(C||[],we+1,2*De,2*qe),Pt.push(M||[],we+1,2*De,2*qe+1),Pt.push(L||[],we+1,2*De+1,2*qe),Pt.push(R||[],we+1,2*De+1,2*qe+1)}}},Ln.prototype.getTile=function(He,we,De){var qe=this.options,it=qe.extent,yt=qe.debug;if(He<0||He>24)return null;var Ot=1<<He,Pt=di(He,we=(we%Ot+Ot)%Ot,De);if(this.tiles[Pt])return ft(this.tiles[Pt],it);yt>1&&console.log("drilling down to z%d-%d-%d",He,we,De);for(var xt,Ft=He,en=we,ve=De;!xt&&Ft>0;)Ft--,en=Math.floor(en/2),ve=Math.floor(ve/2),xt=this.tiles[di(Ft,en,ve)];return xt&&xt.source?(yt>1&&console.log("found parent tile z%d-%d-%d",Ft,en,ve),yt>1&&console.time("drilling down"),this.splitTile(xt.source,Ft,en,ve,He,we,De),yt>1&&console.timeEnd("drilling down"),this.tiles[Pt]?ft(this.tiles[Pt],it):null):null};class ir extends A.VectorTileWorkerSource{constructor(we,De,qe,it,yt){super(we,De,qe,it,Oi),yt&&(this.loadGeoJSON=yt)}loadData(we,De){const qe=we&&we.request,it=qe&&qe.collectResourceTiming;this.loadGeoJSON(we,(yt,Ot)=>{if(yt||!Ot)return De(yt);if("object"!=typeof Ot)return De(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`));{Ve(Ot,!0);try{if(we.filter){const xt=A.createExpression(we.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===xt.result)throw new Error(xt.value.map(en=>`${en.key}: ${en.message}`).join(", "));const Ft=Ot.features.filter(en=>xt.value.evaluate({zoom:0},en));Ot={type:"FeatureCollection",features:Ft}}this._geoJSONIndex=we.cluster?new li(function({superclusterOptions:xt,clusterProperties:Ft}){if(!Ft||!xt)return xt;const en={},ve={},d={accumulated:null,zoom:0},p={properties:null},y=Object.keys(Ft);for(const C of y){const[M,L]=Ft[C],R=A.createExpression(L),H=A.createExpression("string"==typeof M?[M,["accumulated"],["get",C]]:M);en[C]=R.value,ve[C]=H.value}return xt.map=C=>{p.properties=C;const M={};for(const L of y)M[L]=en[L].evaluate(d,p);return M},xt.reduce=(C,M)=>{p.properties=M;for(const L of y)d.accumulated=C[L],C[L]=ve[L].evaluate(d,p)},xt}(we)).load(Ot.features):new Ln(xt=Ot,we.geojsonVtOptions)}catch(xt){return De(xt)}this.loaded={};const Pt={};if(it){const xt=A.getPerformanceMeasurement(qe);xt&&(Pt.resourceTiming={},Pt.resourceTiming[we.source]=JSON.parse(JSON.stringify(xt)))}De(null,Pt)}var xt})}reloadTile(we,De){const qe=this.loaded;return qe&&qe[we.uid]?super.reloadTile(we,De):this.loadTile(we,De)}loadGeoJSON(we,De){if(we.request)A.getJSON(we.request,De);else{if("string"!=typeof we.data)return De(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`));try{return De(null,JSON.parse(we.data))}catch(qe){return De(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(we,De){try{De(null,this._geoJSONIndex.getClusterExpansionZoom(we.clusterId))}catch(qe){De(qe)}}getClusterChildren(we,De){try{De(null,this._geoJSONIndex.getChildren(we.clusterId))}catch(qe){De(qe)}}getClusterLeaves(we,De){try{De(null,this._geoJSONIndex.getLeaves(we.clusterId,we.limit,we.offset))}catch(qe){De(qe)}}}class er{constructor(we){this.self=we,this.actor=new A.Actor(we,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:A.VectorTileWorkerSource,geojson:ir},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(De,qe)=>{if(this.workerSourceTypes[De])throw new Error(`Worker source with name "${De}" already registered.`);this.workerSourceTypes[De]=qe},this.self.registerRTLTextPlugin=De=>{if(A.plugin.isParsed())throw new Error("RTL text plugin already registered.");A.plugin.applyArabicShaping=De.applyArabicShaping,A.plugin.processBidirectionalText=De.processBidirectionalText,A.plugin.processStyledBidirectionalText=De.processStyledBidirectionalText}}checkIfReady(we,De,qe){qe()}setReferrer(we,De){this.referrer=De}spriteLoaded(we,De){this.isSpriteLoaded=De;for(const qe in this.workerSources[we]){const it=this.workerSources[we][qe];for(const yt in it)it[yt]instanceof A.VectorTileWorkerSource&&(it[yt].isSpriteLoaded=De,it[yt].fire(new A.Event("isSpriteLoaded")))}}setImages(we,De,qe){this.availableImages[we]=De;for(const it in this.workerSources[we]){const yt=this.workerSources[we][it];for(const Ot in yt)yt[Ot].availableImages=De}qe()}enableTerrain(we,De,qe){this.terrain=De,qe()}setLayers(we,De,qe){this.getLayerIndex(we).replace(De),qe()}updateLayers(we,De,qe){this.getLayerIndex(we).update(De.layers,De.removedIds),qe()}loadTile(we,De,qe){const it=this.enableTerrain?A.extend({enableTerrain:this.terrain},De):De;this.getWorkerSource(we,De.type,De.source).loadTile(it,qe)}loadDEMTile(we,De,qe){const it=this.enableTerrain?A.extend({buildQuadTree:this.terrain},De):De;this.getDEMWorkerSource(we,De.source).loadTile(it,qe)}reloadTile(we,De,qe){const it=this.enableTerrain?A.extend({enableTerrain:this.terrain},De):De;this.getWorkerSource(we,De.type,De.source).reloadTile(it,qe)}abortTile(we,De,qe){this.getWorkerSource(we,De.type,De.source).abortTile(De,qe)}removeTile(we,De,qe){this.getWorkerSource(we,De.type,De.source).removeTile(De,qe)}removeSource(we,De,qe){if(!this.workerSources[we]||!this.workerSources[we][De.type]||!this.workerSources[we][De.type][De.source])return;const it=this.workerSources[we][De.type][De.source];delete this.workerSources[we][De.type][De.source],void 0!==it.removeSource?it.removeSource(De,qe):qe()}loadWorkerSource(we,De,qe){try{this.self.importScripts(De.url),qe()}catch(it){qe(it.toString())}}syncRTLPluginState(we,De,qe){try{A.plugin.setState(De);const it=A.plugin.getPluginURL();if(A.plugin.isLoaded()&&!A.plugin.isParsed()&&null!=it){this.self.importScripts(it);const yt=A.plugin.isParsed();qe(yt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${it}`),yt)}}catch(it){qe(it.toString())}}getAvailableImages(we){let De=this.availableImages[we];return De||(De=[]),De}getLayerIndex(we){let De=this.layerIndexes[we];return De||(De=this.layerIndexes[we]=new wt),De}getWorkerSource(we,De,qe){return this.workerSources[we]||(this.workerSources[we]={}),this.workerSources[we][De]||(this.workerSources[we][De]={}),this.workerSources[we][De][qe]||(this.workerSources[we][De][qe]=new this.workerSourceTypes[De]({send:(it,yt,Ot,Pt,xt,Ft)=>{this.actor.send(it,yt,Ot,we,xt,Ft)},scheduler:this.actor.scheduler},this.getLayerIndex(we),this.getAvailableImages(we),this.isSpriteLoaded)),this.workerSources[we][De][qe]}getDEMWorkerSource(we,De){return this.demWorkerSources[we]||(this.demWorkerSources[we]={}),this.demWorkerSources[we][De]||(this.demWorkerSources[we][De]=new Ge),this.demWorkerSources[we][De]}enforceCacheSizeLimit(we,De){A.enforceCacheSizeLimit(De)}getWorkerPerformanceMetrics(we,De,qe){qe(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new er(self)),er}),Vt(0,function(A){var gt=Dt;function Dt(P){return f=P,!("undefined"==typeof window||"undefined"==typeof document||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var O,U,q=new Blob([""],{type:"text/javascript"}),ee=URL.createObjectURL(q);try{U=new Worker(ee),O=!0}catch(se){O=!1}return U&&U.terminate(),URL.revokeObjectURL(ee),O}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var O=document.createElement("canvas");O.width=O.height=1;var U=O.getContext("2d");if(!U)return!1;var q=U.getImageData(0,0,1,1);return q&&q.width===O.width}()||(void 0===wt[w=f&&f.failIfMajorPerformanceCaveat]&&(wt[w]=function(O){var U,ee,se,ue,q=(ee=O,se=document.createElement("canvas"),(ue=Object.create(Dt.webGLContextAttributes)).failIfMajorPerformanceCaveat=ee,se.getContext("webgl",ue)||se.getContext("experimental-webgl",ue));if(!q)return!1;try{U=q.createShader(q.VERTEX_SHADER)}catch(ee){return!1}return!(!U||q.isContextLost())&&(q.shaderSource(U,"void main() {}"),q.compileShader(U),!0===q.getShaderParameter(U,q.COMPILE_STATUS))}(w)),!wt[w]||document.documentMode));var f,w}var wt={};function Be(P,f){if(Array.isArray(P)){if(!Array.isArray(f)||P.length!==f.length)return!1;for(let w=0;w<P.length;w++)if(!Be(P[w],f[w]))return!1;return!0}if("object"==typeof P&&null!==P&&null!==f){if("object"!=typeof f||Object.keys(P).length!==Object.keys(f).length)return!1;for(const w in P)if(!Be(P[w],f[w]))return!1;return!0}return P===f}Dt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Ge={create:function(P,f,w){const O=A.window.document.createElement(P);return void 0!==f&&(O.className=f),w&&w.appendChild(O),O},createNS:function(P,f){return A.window.document.createElementNS(P,f)}},Ve=A.window.document&&A.window.document.documentElement.style,Et=Ve&&void 0!==Ve.userSelect?"userSelect":"WebkitUserSelect";let lt;Ge.disableDrag=function(){Ve&&Et&&(lt=Ve[Et],Ve[Et]="none")},Ge.enableDrag=function(){Ve&&Et&&(Ve[Et]=lt)},Ge.setTransform=function(P,f){P.style.transform=f};let Ct=!1;try{const P=Object.defineProperty({},"passive",{get(){Ct=!0}});A.window.addEventListener("test",P,P),A.window.removeEventListener("test",P,P)}catch(P){Ct=!1}Ge.addEventListener=function(P,f,w,O={}){P.addEventListener(f,w,"passive"in O&&Ct?O:O.capture)},Ge.removeEventListener=function(P,f,w,O={}){P.removeEventListener(f,w,"passive"in O&&Ct?O:O.capture)};const zt=function(P){P.preventDefault(),P.stopPropagation(),A.window.removeEventListener("click",zt,!0)};function an(P,f,w){const O=P.offsetWidth===f.width?1:P.offsetWidth/f.width;return new A.pointGeometry((w.clientX-f.left)*O,(w.clientY-f.top)*O)}Ge.suppressClick=function(){A.window.addEventListener("click",zt,!0),A.window.setTimeout(()=>{A.window.removeEventListener("click",zt,!0)},0)},Ge.mousePos=function(P,f){const w=P.getBoundingClientRect();return an(P,w,f)},Ge.touchPos=function(P,f){const w=P.getBoundingClientRect(),O=[];for(let U=0;U<f.length;U++)O.push(an(P,w,f[U]));return O},Ge.mouseButton=function(P){return void 0!==A.window.InstallTrigger&&2===P.button&&P.ctrlKey&&A.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:P.button},Ge.remove=function(P){P.parentNode&&P.parentNode.removeChild(P)};class Qe{constructor(f,w){this.pos=f,this.dir=w}intersectsPlane(f,w,O){const U=A.dot(w,this.dir);if(Math.abs(U)<1e-6)return!1;const q=A.dot(A.sub(A.create(),f,this.pos),w)/U,ee=A.scaleAndAdd(A.create(),this.pos,this.dir,q);return A.copy(O,ee),!0}}class Rn{constructor(f,w){this.points=f,this.planes=w}static fromInvProjectionMatrix(f,w,O){const U=Math.pow(2,O),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(se=>{const ue=A.transformMat4([],se,f),fe=1/ue[3]/w*U;return A.mul(ue,ue,[fe,fe,1/ue[3],fe])}),ee=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(se=>{const ue=A.sub([],q[se[0]],q[se[1]]),fe=A.sub([],q[se[2]],q[se[1]]),Ce=A.normalize([],A.cross([],ue,fe)),Ae=-A.dot(Ce,q[se[1]]);return Ce.concat(Ae)});return new Rn(q,ee)}}class dn{constructor(f,w){this.min=f,this.max=w,this.center=A.scale([],A.add([],this.min,this.max),.5)}quadrant(f){const w=[f%2==0,f<2],O=A.clone(this.min),U=A.clone(this.max);for(let q=0;q<w.length;q++)O[q]=w[q]?this.min[q]:this.center[q],U[q]=w[q]?this.center[q]:this.max[q];return U[2]=this.max[2],new dn(O,U)}distanceX(f){return Math.max(Math.min(this.max[0],f[0]),this.min[0])-f[0]}distanceY(f){return Math.max(Math.min(this.max[1],f[1]),this.min[1])-f[1]}distanceZ(f){return Math.max(Math.min(this.max[2],f[2]),this.min[2])-f[2]}intersects(f){const w=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let O=!0;for(let U=0;U<f.planes.length;U++){const q=f.planes[U];let ee=0;for(let se=0;se<w.length;se++)ee+=A.dot$1(q,w[se])>=0;if(0===ee)return 0;ee!==w.length&&(O=!1)}if(O)return 2;for(let U=0;U<3;U++){let q=Number.MAX_VALUE,ee=-Number.MAX_VALUE;for(let se=0;se<f.points.length;se++){const ue=f.points[se][U]-this.min[U];q=Math.min(q,ue),ee=Math.max(ee,ue)}if(ee<0||q>this.max[U]-this.min[U])return 0}return 1}}function Mt(P){const{userImage:f}=P;return!!(f&&f.render&&f.render())&&(P.data.replace(new Uint8Array(f.data.buffer)),!0)}class Vi extends A.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new A.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(f){if(this.loaded!==f&&(this.loaded=f,f)){for(const{ids:w,callback:O}of this.requestors)this._notify(w,O);this.requestors=[]}}getImage(f){return this.images[f]}addImage(f,w){this._validate(f,w)&&(this.images[f]=w)}_validate(f,w){let O=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new A.ErrorEvent(new Error(`Image "${f}" has invalid "stretchX" value`))),O=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new A.ErrorEvent(new Error(`Image "${f}" has invalid "stretchY" value`))),O=!1),this._validateContent(w.content,w)||(this.fire(new A.ErrorEvent(new Error(`Image "${f}" has invalid "content" value`))),O=!1),O}_validateStretch(f,w){if(!f)return!0;let O=0;for(const U of f){if(U[0]<O||U[1]<U[0]||w<U[1])return!1;O=U[1]}return!0}_validateContent(f,w){return!(f&&(4!==f.length||f[0]<0||w.data.width<f[0]||f[1]<0||w.data.height<f[1]||f[2]<0||w.data.width<f[2]||f[3]<0||w.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))}updateImage(f,w){w.version=this.images[f].version+1,this.images[f]=w,this.updatedImages[f]=!0}removeImage(f){const w=this.images[f];delete this.images[f],delete this.patterns[f],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(f,w){let O=!0;if(!this.isLoaded())for(const U of f)this.images[U]||(O=!1);this.isLoaded()||O?this._notify(f,w):this.requestors.push({ids:f,callback:w})}_notify(f,w){const O={};for(const U of f){this.images[U]||this.fire(new A.Event("styleimagemissing",{id:U}));const q=this.images[U];q?O[U]={data:q.data.clone(),pixelRatio:q.pixelRatio,sdf:q.sdf,version:q.version,stretchX:q.stretchX,stretchY:q.stretchY,content:q.content,hasRenderCallback:Boolean(q.userImage&&q.userImage.render)}:A.warnOnce(`Image "${U}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}w(null,O)}getPixelSize(){const{width:f,height:w}=this.atlasImage;return{width:f,height:w}}getPattern(f){const w=this.patterns[f],O=this.getImage(f);if(!O)return null;if(w&&w.position.version===O.version)return w.position;if(w)w.position.version=O.version;else{const U={w:O.data.width+2,h:O.data.height+2,x:0,y:0},q=new A.ImagePosition(U,O);this.patterns[f]={bin:U,position:q}}return this._updatePatternAtlas(),this.patterns[f].position}bind(f){const w=f.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new A.Texture(f,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)}_updatePatternAtlas(){const f=[];for(const q in this.patterns)f.push(this.patterns[q].bin);const{w,h:O}=A.potpack(f),U=this.atlasImage;U.resize({width:w||1,height:O||1});for(const q in this.patterns){const{bin:ee}=this.patterns[q],se=ee.x+1,ue=ee.y+1,fe=this.images[q].data,Ce=fe.width,Ae=fe.height;A.RGBAImage.copy(fe,U,{x:0,y:0},{x:se,y:ue},{width:Ce,height:Ae}),A.RGBAImage.copy(fe,U,{x:0,y:Ae-1},{x:se,y:ue-1},{width:Ce,height:1}),A.RGBAImage.copy(fe,U,{x:0,y:0},{x:se,y:ue+Ae},{width:Ce,height:1}),A.RGBAImage.copy(fe,U,{x:Ce-1,y:0},{x:se-1,y:ue},{width:1,height:Ae}),A.RGBAImage.copy(fe,U,{x:0,y:0},{x:se+Ce,y:ue},{width:1,height:Ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(f){for(const w of f){if(this.callbackDispatchedThisFrame[w])continue;this.callbackDispatchedThisFrame[w]=!0;const O=this.images[w];Mt(O)&&this.updateImage(w,O)}}}const $r=new A.Properties({anchor:new A.DataConstantProperty(A.spec.light.anchor),position:new class{constructor(){this.specification=A.spec.light.position}possiblyEvaluate(P,f){return function([w,O,U]){const q=A.degToRad(O+90),ee=A.degToRad(U);return{x:w*Math.cos(q)*Math.sin(ee),y:w*Math.sin(q)*Math.sin(ee),z:w*Math.cos(ee),azimuthal:O,polar:U}}(P.expression.evaluate(f))}interpolate(P,f,w){return{x:A.number(P.x,f.x,w),y:A.number(P.y,f.y,w),z:A.number(P.z,f.z,w),azimuthal:A.number(P.azimuthal,f.azimuthal,w),polar:A.number(P.polar,f.polar,w)}}},color:new A.DataConstantProperty(A.spec.light.color),intensity:new A.DataConstantProperty(A.spec.light.intensity)}),Vn="-transition";class Di extends A.Evented{constructor(f){super(),this._transitionable=new A.Transitionable($r),this.setLight(f),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(f,w={}){if(!this._validate(A.validateLight,f,w))for(const O in f){const U=f[O];A.endsWith(O,Vn)?this._transitionable.setTransition(O.slice(0,-Vn.length),U):this._transitionable.setValue(O,U)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,w,O){return(!O||!1!==O.validate)&&A.emitValidationErrors(this,f.call(A.validateStyle,A.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:A.spec})))}}const zr=new A.Properties({source:new A.DataConstantProperty(A.spec.terrain.source),exaggeration:new A.DataConstantProperty(A.spec.terrain.exaggeration)}),Ji="-transition";class Ki extends A.Evented{constructor(f){super(),this._transitionable=new A.Transitionable(zr),this.set(f),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(f){for(const w in f){const O=f[w];A.endsWith(w,Ji)?this._transitionable.setTransition(w.slice(0,-Ji.length),O):this._transitionable.setValue(w,O)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}}function Zt(P,f,w,O){const U=A.smoothstep(45,65,w),[q,ee]=Gt(P,O),se=A.length(f);let ue=1-Math.min(1,Math.exp((se-q)/(ee-q)*-6));return ue*=ue*ue,ue=Math.min(1,1.00747*ue),ue*U*P.alpha}function Gt(P,f){const w=.5/Math.tan(.5*f);return[P.range[0]+w,P.range[1]+w]}const $t=new A.Properties({range:new A.DataConstantProperty(A.spec.fog.range),color:new A.DataConstantProperty(A.spec.fog.color),"horizon-blend":new A.DataConstantProperty(A.spec.fog["horizon-blend"])}),Ht="-transition";class fn extends A.Evented{constructor(f){super(),this._transitionable=new A.Transitionable($t),this.set(f),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(f,w={}){if(!this._validate(A.validateFog,f,w))for(const O in f){const U=f[O];A.endsWith(O,Ht)?this._transitionable.setTransition(O.slice(0,-Ht.length),U):this._transitionable.setValue(O,U)}}getOpacity(f){const w=this.properties&&this.properties.get("color")||1;return A.smoothstep(45,65,f)*w.a}getOpacityAtLatLng(f,w){return function(O,U,q){const ee=A.MercatorCoordinate.fromLngLat(U),se=q.elevation?q.elevation.getAtPointOrZero(ee):0,ue=[ee.x,ee.y,se];return A.transformMat4$1(ue,ue,q.mercatorFogMatrix),Zt(O,ue,q.pitch,q._fov)}(this.state,f,w)}getFovAdjustedRange(f){return Gt(this.state,f)}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,w,O){return(!O||!1!==O.validate)&&A.emitValidationErrors(this,f.call(A.validateStyle,A.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:A.spec})))}}class Yt{constructor(f,w){this.workerPool=f,this.actors=[],this.currentActor=0,this.id=A.uniqueId();const O=this.workerPool.acquire(this.id);for(let U=0;U<O.length;U++){const q=new Yt.Actor(O[U],w,this.id);q.name=`Worker ${U}`,this.actors.push(q)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(f,w,O){A.asyncAll(this.actors,(U,q)=>{U.send(f,w,q)},O=O||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(f=>{f.remove()}),this.actors=[],this.workerPool.release(this.id)}}function On(P,f,w){return f*(A.EXTENT/(P.tileSize*Math.pow(2,w-P.tileID.overscaledZ)))}Yt.Actor=A.Actor;class hi{constructor(f,w,O,U){this.screenBounds=f,this.cameraPoint=w,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=O,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(q=>U.pointCoordinate3D(q)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(f,w){let O,U;if(f instanceof A.pointGeometry||"number"==typeof f[0]){const q=A.pointGeometry.convert(f);O=[A.pointGeometry.convert(f)],U=w.isPointAboveHorizon(q)}else{const q=A.pointGeometry.convert(f[0]),ee=A.pointGeometry.convert(f[1]);O=[q,ee],U=A.polygonizeBounds(q,ee).every(se=>w.isPointAboveHorizon(se))}return new hi(O,w.getCameraPoint(),U,w)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(f){return A.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],f)}bufferedCameraGeometry(f){const w=this.screenBounds[0],O=1===this.screenBounds.length?this.screenBounds[0].add(new A.pointGeometry(1,1)):this.screenBounds[1],U=A.polygonizeBounds(w,O,0,!1);return this.cameraPoint.y>O.y&&(this.cameraPoint.x>w.x&&this.cameraPoint.x<O.x?U.splice(3,0,this.cameraPoint):this.cameraPoint.x>=O.x?U[2]=this.cameraPoint:this.cameraPoint.x<=w.x&&(U[3]=this.cameraPoint)),A.bufferConvexPolygon(U,f)}containsTile(f,w,O){const U=f.queryPadding+1,q=O?this._bufferedCameraMercator(U,w).map(Ne=>f.tileID.getTilePoint(Ne)):this._bufferedScreenMercator(U,w).map(Ne=>f.tileID.getTilePoint(Ne)),ee=this.screenGeometryMercator.map(Ne=>f.tileID.getTileVec3(Ne)),se=ee.map(Ne=>new A.pointGeometry(Ne[0],Ne[1])),ue=w.getFreeCameraOptions().position||new A.MercatorCoordinate(0,0,0),fe=f.tileID.getTileVec3(ue),Ce=ee.map(Ne=>{const $e=A.sub(Ne,Ne,fe);return A.normalize($e,$e),new Qe(fe,$e)}),Ae=On(f,1,w.zoom);if(A.polygonIntersectsBox(q,0,0,A.EXTENT,A.EXTENT))return{queryGeometry:this,tilespaceGeometry:se,tilespaceRays:Ce,bufferedTilespaceGeometry:q,bufferedTilespaceBounds:(Pe=A.getBounds(q),Pe.min.x=A.clamp(Pe.min.x,0,A.EXTENT),Pe.min.y=A.clamp(Pe.min.y,0,A.EXTENT),Pe.max.x=A.clamp(Pe.max.x,0,A.EXTENT),Pe.max.y=A.clamp(Pe.max.y,0,A.EXTENT),Pe),tile:f,tileID:f.tileID,pixelToTileUnitsFactor:Ae};var Pe}_bufferedScreenMercator(f,w){const O=mi(f);if(this._screenRaycastCache[O])return this._screenRaycastCache[O];{const U=this.bufferedScreenGeometry(f).map(q=>w.pointCoordinate3D(q));return this._screenRaycastCache[O]=U,U}}_bufferedCameraMercator(f,w){const O=mi(f);if(this._cameraRaycastCache[O])return this._cameraRaycastCache[O];{const U=this.bufferedCameraGeometry(f).map(q=>w.pointCoordinate3D(q));return this._cameraRaycastCache[O]=U,U}}}function mi(P){return 100*P|0}function Un(P,f,w){const O=function(U,q){if(U)return w(U);if(q){const ee=A.pick(A.extend(q,P),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);q.vector_layers&&(ee.vectorLayers=q.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(se=>se.id)),ee.tiles=f.canonicalizeTileset(ee,P.url),w(null,ee)}};return P.url?A.getJSON(f.transformRequest(f.normalizeSourceURL(P.url),A.ResourceType.Source),O):A.exported.frame(()=>O(null,P))}class ii{constructor(f,w,O){this.bounds=A.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=w||0,this.maxzoom=O||24}validateBounds(f){return Array.isArray(f)&&4===f.length?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]}contains(f){const w=Math.pow(2,f.z),O=Math.floor(A.mercatorXfromLng(this.bounds.getWest())*w),U=Math.floor(A.mercatorYfromLat(this.bounds.getNorth())*w),q=Math.ceil(A.mercatorXfromLng(this.bounds.getEast())*w),ee=Math.ceil(A.mercatorYfromLat(this.bounds.getSouth())*w);return f.x>=O&&f.x<q&&f.y>=U&&f.y<ee}}class Hn{constructor(f,w,O){this.context=f;const U=f.gl;this.buffer=U.createBuffer(),this.dynamicDraw=Boolean(O),this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),U.bufferData(U.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?U.DYNAMIC_DRAW:U.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(f){const w=this.context.gl;this.context.unbindVAO(),this.bind(),w.bufferSubData(w.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const jn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xi{constructor(f,w,O,U){this.length=w.length,this.attributes=O,this.itemSize=w.bytesPerElement,this.dynamicDraw=U,this.context=f;const q=f.gl;this.buffer=q.createBuffer(),f.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(f){const w=this.context.gl;this.bind(),w.bufferSubData(w.ARRAY_BUFFER,0,f.arrayBuffer)}enableAttributes(f,w){for(let O=0;O<this.attributes.length;O++){const U=w.attributes[this.attributes[O].name];void 0!==U&&f.enableVertexAttribArray(U)}}setVertexAttribPointers(f,w,O){for(let U=0;U<this.attributes.length;U++){const q=this.attributes[U],ee=w.attributes[q.name];void 0!==ee&&f.vertexAttribPointer(ee,q.components,f[jn[q.type]],!1,this.itemSize,q.offset+this.itemSize*(O||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class li{constructor(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(f){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Yi extends li{getDefault(){return A.Color.transparent}set(f){const w=this.current;(f.r!==w.r||f.g!==w.g||f.b!==w.b||f.a!==w.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class Do extends li{getDefault(){return 1}set(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)}}class fr extends li{getDefault(){return 0}set(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)}}class io extends li{getDefault(){return[!0,!0,!0,!0]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||f[3]!==w[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Or extends li{getDefault(){return!0}set(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)}}class ks extends li{getDefault(){return 255}set(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)}}class Ri extends li{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(f){const w=this.current;(f.func!==w.func||f.ref!==w.ref||f.mask!==w.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)}}class hs extends li{getDefault(){const f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)}}class Li extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=f,this.dirty=!1}}class Si extends li{getDefault(){return[0,1]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)}}class co extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=f,this.dirty=!1}}class Io extends li{getDefault(){return this.gl.LESS}set(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)}}class Yn extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.BLEND):w.disable(w.BLEND),this.current=f,this.dirty=!1}}class yr extends li{getDefault(){const f=this.gl;return[f.ONE,f.ZERO]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||this.dirty)&&(this.gl.blendFunc(f[0],f[1]),this.current=f,this.dirty=!1)}}class Vr extends li{getDefault(){return A.Color.transparent}set(f){const w=this.current;(f.r!==w.r||f.g!==w.g||f.b!==w.b||f.a!==w.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class vr extends li{getDefault(){return this.gl.FUNC_ADD}set(f){(f!==this.current||this.dirty)&&(this.gl.blendEquation(f),this.current=f,this.dirty=!1)}}class ns extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=f,this.dirty=!1}}class _u extends li{getDefault(){return this.gl.BACK}set(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)}}class uo extends li{getDefault(){return this.gl.CCW}set(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)}}class Ur extends li{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}}class is extends li{getDefault(){return this.gl.TEXTURE0}set(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)}}class Hr extends li{getDefault(){const f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||f[3]!==w[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class $n extends li{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,f),this.current=f,this.dirty=!1}}class Ei extends li{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class Nl extends li{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindTexture(w.TEXTURE_2D,f),this.current=f,this.dirty=!1}}class Vs extends li{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class _s extends li{getDefault(){return null}set(f){const w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class br extends li{constructor(f){super(f),this.vao=f.extVertexArrayObject}getDefault(){return null}set(f){this.vao&&(f!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(f),this.current=f,this.dirty=!1)}}class Zo extends li{getDefault(){return 4}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}}class cc extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}}class ft extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}}class dt extends li{constructor(f,w){super(f),this.context=f,this.parent=w}getDefault(){return null}}class Tt extends dt{setDirty(){this.dirty=!0}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}}class Jt extends dt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,this.attachment(),w.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class Lt extends Jt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ln{constructor(f,w,O,U){this.context=f,this.width=w,this.height=O;const q=this.framebuffer=f.gl.createFramebuffer();this.colorAttachment=new Tt(f,q),U&&(this.depthAttachment=new Jt(f,q))}destroy(){const f=this.context.gl,w=this.colorAttachment.get();if(w&&f.deleteTexture(w),this.depthAttachment){const O=this.depthAttachment.get();O&&f.deleteRenderbuffer(O)}f.deleteFramebuffer(this.framebuffer)}}class di{constructor(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Yi(this),this.clearDepth=new Do(this),this.clearStencil=new fr(this),this.colorMask=new io(this),this.depthMask=new Or(this),this.stencilMask=new ks(this),this.stencilFunc=new Ri(this),this.stencilOp=new hs(this),this.stencilTest=new Li(this),this.depthRange=new Si(this),this.depthTest=new co(this),this.depthFunc=new Io(this),this.blend=new Yn(this),this.blendFunc=new yr(this),this.blendColor=new Vr(this),this.blendEquation=new vr(this),this.cullFace=new ns(this),this.cullFaceSide=new _u(this),this.frontFace=new uo(this),this.program=new Ur(this),this.activeTexture=new is(this),this.viewport=new Hr(this),this.bindFramebuffer=new $n(this),this.bindRenderbuffer=new Ei(this),this.bindTexture=new Nl(this),this.bindVertexBuffer=new Vs(this),this.bindElementBuffer=new _s(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new br(this),this.pixelStoreUnpack=new Zo(this),this.pixelStoreUnpackPremultiplyAlpha=new cc(this),this.pixelStoreUnpackFlipY=new ft(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(f.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(f,w){return new Hn(this,f,w)}createVertexBuffer(f,w,O){return new xi(this,f,w,O)}createRenderbuffer(f,w,O){const U=this.gl,q=U.createRenderbuffer();return this.bindRenderbuffer.set(q),U.renderbufferStorage(U.RENDERBUFFER,f,w,O),this.bindRenderbuffer.set(null),q}createFramebuffer(f,w,O){return new Ln(this,f,w,O)}clear({color:f,depth:w,stencil:O}){const U=this.gl;let q=0;f&&(q|=U.COLOR_BUFFER_BIT,this.clearColor.set(f),this.colorMask.set([!0,!0,!0,!0])),void 0!==w&&(q|=U.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),void 0!==O&&(q|=U.STENCIL_BUFFER_BIT,this.clearStencil.set(O),this.stencilMask.set(255)),U.clear(q)}setCullFace(f){!1===f.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))}setDepthMode(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)}setStencilMode(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)}setColorMode(f){Be(f.blendFunction,A.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Oi extends A.Evented{constructor(f,w,O,U){super(),this.id=f,this.dispatcher=O,this.setEventedParent(U),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=A.extend({type:"raster"},w),A.extend(this,A.pick(w,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new A.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Un(this._options,this.map._requestManager,(f,w)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new A.ErrorEvent(f)):w&&(A.extend(this,w),w.bounds&&(this.tileBounds=new ii(w.bounds,this.minzoom,this.maxzoom)),A.postTurnstileEvent(w.tiles),this.fire(new A.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(f){this.map=f,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return A.extend({},this._options)}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,w){const O=A.exported.devicePixelRatio>=2,U=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),O,this.tileSize);f.request=A.getImage(this.map._requestManager.transformRequest(U,A.ResourceType.Tile),(q,ee,se,ue)=>{if(delete f.request,f.aborted)f.state="unloaded",w(null);else if(q)f.state="errored",w(q);else if(ee){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:se,expires:ue});const fe=this.map.painter.context,Ce=fe.gl;f.texture=this.map.painter.getTileTexture(ee.width),f.texture?f.texture.update(ee,{useMipmap:!0}):(f.texture=new A.Texture(fe,ee,Ce.RGBA,{useMipmap:!0}),f.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),fe.extTextureFilterAnisotropic&&Ce.texParameterf(Ce.TEXTURE_2D,fe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,fe.extTextureFilterAnisotropicMax)),f.state="loaded",A.cacheEntryPossiblyAdded(this.dispatcher),w(null)}})}abortTile(f,w){f.request&&(f.request.cancel(),delete f.request),w()}unloadTile(f,w){f.texture&&this.map.painter.saveTileTexture(f.texture),w()}hasTransition(){return!1}}let ir;var er=A.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class He extends A.Evented{constructor(f,w,O,U){super(),this.id=f,this.dispatcher=O,this.coordinates=w.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(U),this.options=w}load(f,w){this._loaded=!1,this.fire(new A.Event("dataloading",{dataType:"source"})),this.url=this.options.url,A.getImage(this.map._requestManager.transformRequest(this.url,A.ResourceType.Image),(O,U)=>{this._loaded=!0,O?this.fire(new A.ErrorEvent(O)):U&&(this.image=A.exported.getImageData(U),f&&(this.coordinates=f),w&&w(),this._finishLoading())})}loaded(){return this._loaded}updateImage(f){return this.image&&f.url?(this.options.url=f.url,this.load(f.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new A.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(f){this.map=f,this.load()}setCoordinates(f){this.coordinates=f;const w=f.map(A.MercatorCoordinate.fromLngLat);this.tileID=function(U){let q=1/0,ee=1/0,se=-1/0,ue=-1/0;for(const Pe of U)q=Math.min(q,Pe.x),ee=Math.min(ee,Pe.y),se=Math.max(se,Pe.x),ue=Math.max(ue,Pe.y);const fe=Math.max(se-q,ue-ee),Ce=Math.max(0,Math.floor(-Math.log(fe)/Math.LN2)),Ae=Math.pow(2,Ce);return new A.CanonicalTileID(Ce,Math.floor((q+se)/2*Ae),Math.floor((ee+ue)/2*Ae))}(w),this.minzoom=this.maxzoom=this.tileID.z;const O=w.map(U=>this.tileID.getTilePoint(U)._round());return this._boundsArray=new A.StructArrayLayout4i8,this._boundsArray.emplaceBack(O[0].x,O[0].y,0,0),this._boundsArray.emplaceBack(O[1].x,O[1].y,A.EXTENT,0),this._boundsArray.emplaceBack(O[3].x,O[3].y,0,A.EXTENT),this._boundsArray.emplaceBack(O[2].x,O[2].y,A.EXTENT,A.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new A.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const f=this.map.painter.context,w=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,er.members)),this.boundsSegments||(this.boundsSegments=A.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new A.Texture(f,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(const O in this.tiles){const U=this.tiles[O];"loaded"!==U.state&&(U.state="loaded",U.texture=this.texture)}}loadTile(f,w){this.tileID&&this.tileID.equals(f.tileID.canonical)?(this.tiles[String(f.tileID.wrap)]=f,f.buckets={},w(null)):(f.state="errored",w(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const we={vector:class extends A.Evented{constructor(P,f,w,O){if(super(),this.id=P,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,A.extend(this,A.pick(f,["url","scheme","tileSize","promoteId"])),this._options=A.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(O),this._tileWorkers={},this._deduped=new A.DedupedRequest}load(){this._loaded=!1,this.fire(new A.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Un(this._options,this.map._requestManager,(P,f)=>{this._tileJSONRequest=null,this._loaded=!0,P?this.fire(new A.ErrorEvent(P)):f&&(A.extend(this,f),f.bounds&&(this.tileBounds=new ii(f.bounds,this.minzoom,this.maxzoom)),A.postTurnstileEvent(f.tiles,this.map._requestManager._customAccessToken),this.fire(new A.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(P){return!this.tileBounds||this.tileBounds.contains(P.canonical)}onAdd(P){this.map=P,this.load()}setSourceProperty(P){this._tileJSONRequest&&this._tileJSONRequest.cancel(),P();const f=this.map.style._getSourceCaches(this.id);for(const w of f)w.clearTiles();this.load()}setTiles(P){return this.setSourceProperty(()=>{this._options.tiles=P}),this}setUrl(P){return this.setSourceProperty(()=>{this.url=P,this._options.url=P}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return A.extend({},this._options)}loadTile(P,f){const w=this.map._requestManager.normalizeTileURL(P.tileID.canonical.url(this.tiles,this.scheme)),O={request:this.map._requestManager.transformRequest(w,A.ResourceType.Tile),data:void 0,uid:P.uid,tileID:P.tileID,tileZoom:P.tileZoom,zoom:P.tileID.overscaledZ,tileSize:this.tileSize*P.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:A.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:P.isSymbolTile};if(O.request.collectResourceTiming=this._collectResourceTiming,P.actor&&"expired"!==P.state)"loading"===P.state?P.reloadCallback=f:P.request=P.actor.send("reloadTile",O,U.bind(this));else if(P.actor=this._tileWorkers[w]=this._tileWorkers[w]||this.dispatcher.getActor(),this.dispatcher.ready)P.request=P.actor.send("loadTile",O,U.bind(this),void 0,!0);else{const q=A.loadVectorTile.call({deduped:this._deduped},O,(ee,se)=>{ee||!se?U.call(this,ee):(O.data={cacheControl:se.cacheControl,expires:se.expires,rawData:se.rawData.slice(0)},P.actor&&P.actor.send("loadTile",O,U.bind(this),void 0,!0))},!0);P.request={cancel:q}}function U(q,ee){return delete P.request,P.aborted?f(null):q&&404!==q.status?f(q):(ee&&ee.resourceTiming&&(P.resourceTiming=ee.resourceTiming),this.map._refreshExpiredTiles&&ee&&P.setExpiryData(ee),P.loadVectorData(ee,this.map.painter),A.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(P.reloadCallback&&(this.loadTile(P,P.reloadCallback),P.reloadCallback=null)))}}abortTile(P){P.request&&(P.request.cancel(),delete P.request),P.actor&&P.actor.send("abortTile",{uid:P.uid,type:this.type,source:this.id})}unloadTile(P){P.unloadVectorData(),P.actor&&P.actor.send("removeTile",{uid:P.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Oi,"raster-dem":class extends Oi{constructor(P,f,w,O){super(P,f,w,O),this.type="raster-dem",this.maxzoom=22,this._options=A.extend({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}loadTile(P,f){const w=this.map._requestManager.normalizeTileURL(P.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function O(U,q){U&&(P.state="errored",f(U)),q&&(P.dem=q,P.dem.onDeserialize(),P.needsHillshadePrepare=!0,P.needsDEMTextureUpload=!0,P.state="loaded",f(null))}P.request=A.getImage(this.map._requestManager.transformRequest(w,A.ResourceType.Tile),function(U,q,ee,se){if(delete P.request,P.aborted)P.state="unloaded",f(null);else if(U)P.state="errored",f(U);else if(q){this.map._refreshExpiredTiles&&P.setExpiryData({cacheControl:ee,expires:se});const ue=A.window.ImageBitmap&&q instanceof A.window.ImageBitmap&&(null==ir&&(ir=A.window.OffscreenCanvas&&new A.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof A.window.createImageBitmap),ir),fe=1-(q.width-A.prevPowerOfTwo(q.width))/2;fe<1||P.neighboringTiles||(P.neighboringTiles=this._getNeighboringTiles(P.tileID));const Ce=ue?q:A.exported.getImageData(q,fe),Ae={uid:P.uid,coord:P.tileID,source:this.id,rawImageData:Ce,encoding:this.encoding,padding:fe};P.actor&&"expired"!==P.state||(P.actor=this.dispatcher.getActor(),P.actor.send("loadDEMTile",Ae,O.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(P){const f=P.canonical,w=Math.pow(2,f.z),O=(f.x-1+w)%w,U=0===f.x?P.wrap-1:P.wrap,q=(f.x+1+w)%w,ee=f.x+1===w?P.wrap+1:P.wrap,se={};return se[new A.OverscaledTileID(P.overscaledZ,U,f.z,O,f.y).key]={backfilled:!1},se[new A.OverscaledTileID(P.overscaledZ,ee,f.z,q,f.y).key]={backfilled:!1},f.y>0&&(se[new A.OverscaledTileID(P.overscaledZ,U,f.z,O,f.y-1).key]={backfilled:!1},se[new A.OverscaledTileID(P.overscaledZ,P.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},se[new A.OverscaledTileID(P.overscaledZ,ee,f.z,q,f.y-1).key]={backfilled:!1}),f.y+1<w&&(se[new A.OverscaledTileID(P.overscaledZ,U,f.z,O,f.y+1).key]={backfilled:!1},se[new A.OverscaledTileID(P.overscaledZ,P.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},se[new A.OverscaledTileID(P.overscaledZ,ee,f.z,q,f.y+1).key]={backfilled:!1}),se}unloadTile(P){P.demTexture&&this.map.painter.saveTileTexture(P.demTexture),P.fbo&&(P.fbo.destroy(),delete P.fbo),P.dem&&delete P.dem,delete P.neighboringTiles,P.state="unloaded"}},geojson:class extends A.Evented{constructor(P,f,w,O){super(),this.id=P,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=w.getActor(),this.setEventedParent(O),this._data=f.data,this._options=A.extend({},f),this._collectResourceTiming=f.collectResourceTiming,void 0!==f.maxzoom&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const U=A.EXTENT/this.tileSize;this.workerOptions=A.extend({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(void 0!==f.buffer?f.buffer:128)*U,tolerance:(void 0!==f.tolerance?f.tolerance:.375)*U,extent:A.EXTENT,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:void 0!==f.clusterMaxZoom?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:A.EXTENT,radius:(void 0!==f.clusterRadius?f.clusterRadius:50)*U,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions)}onAdd(P){this.map=P,this.setData(this._data)}setData(P){return this._data=P,this._updateWorkerData(),this}getClusterExpansionZoom(P,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:P,source:this.id},f),this}getClusterChildren(P,f){return this.actor.send("geojson.getClusterChildren",{clusterId:P,source:this.id},f),this}getClusterLeaves(P,f,w,O){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:P,limit:f,offset:w},O),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new A.Event("dataloading",{dataType:"source"})),this._loaded=!1;const P=A.extend({},this.workerOptions),f=this._data;"string"==typeof f?(P.request=this.map._requestManager.transformRequest(A.exported.resolveURL(f),A.ResourceType.Source),P.request.collectResourceTiming=this._collectResourceTiming):P.data=JSON.stringify(f),this._pendingLoad=this.actor.send(`${this.type}.loadData`,P,(w,O)=>{if(this._loaded=!0,this._pendingLoad=null,w)this.fire(new A.ErrorEvent(w));else{const U={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&O&&O.resourceTiming&&O.resourceTiming[this.id]&&(U.resourceTiming=O.resourceTiming[this.id]),this.fire(new A.Event("data",U)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(P,f){const w=P.actor?"reloadTile":"loadTile";P.actor=this.actor,P.request=this.actor.send(w,{type:this.type,uid:P.uid,tileID:P.tileID,tileZoom:P.tileZoom,zoom:P.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:A.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(O,U)=>(delete P.request,P.unloadVectorData(),P.aborted?f(null):O?f(O):(P.loadVectorData(U,this.map.painter,"reloadTile"===w),f(null))),void 0,"loadTile"===w)}abortTile(P){P.request&&(P.request.cancel(),delete P.request),P.aborted=!0}unloadTile(P){P.unloadVectorData(),this.actor.send("removeTile",{uid:P.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return A.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends He{constructor(P,f,w,O){super(P,f,w,O),this.roundZoom=!0,this.type="video",this.options=f}load(){this._loaded=!1;const P=this.options;this.urls=[];for(const f of P.urls)this.urls.push(this.map._requestManager.transformRequest(f,A.ResourceType.Source).url);A.getVideo(this.urls,(f,w)=>{this._loaded=!0,f?this.fire(new A.ErrorEvent(f)):w&&(this.video=w,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(P){if(this.video){const f=this.video.seekable;P<f.start(0)||P>f.end(0)?this.fire(new A.ErrorEvent(new A.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=P}}getVideo(){return this.video}onAdd(P){this.map||(this.map=P,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const P=this.map.painter.context,f=P.gl;this.boundsBuffer||(this.boundsBuffer=P.createVertexBuffer(this._boundsArray,er.members)),this.boundsSegments||(this.boundsSegments=A.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new A.Texture(P,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));for(const w in this.tiles){const O=this.tiles[w];"loaded"!==O.state&&(O.state="loaded",O.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:He,canvas:class extends He{constructor(P,f,w,O){super(P,f,w,O),f.coordinates?Array.isArray(f.coordinates)&&4===f.coordinates.length&&!f.coordinates.some(U=>!Array.isArray(U)||2!==U.length||U.some(q=>"number"!=typeof q))||this.fire(new A.ErrorEvent(new A.ValidationError(`sources.${P}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new A.ErrorEvent(new A.ValidationError(`sources.${P}`,null,'missing required property "coordinates"'))),f.animate&&"boolean"!=typeof f.animate&&this.fire(new A.ErrorEvent(new A.ValidationError(`sources.${P}`,null,'optional "animate" property must be a boolean value'))),f.canvas?"string"==typeof f.canvas||f.canvas instanceof A.window.HTMLCanvasElement||this.fire(new A.ErrorEvent(new A.ValidationError(`sources.${P}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new A.ErrorEvent(new A.ValidationError(`sources.${P}`,null,'missing required property "canvas"'))),this.options=f,this.animate=void 0===f.animate||f.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof A.window.HTMLCanvasElement?this.options.canvas:A.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new A.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(P){this.map=P,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let P=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,P=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,P=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const f=this.map.painter.context,w=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,er.members)),this.boundsSegments||(this.boundsSegments=A.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(P||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new A.Texture(f,this.canvas,w.RGBA,{premultiply:!0});for(const O in this.tiles){const U=this.tiles[O];"loaded"!==U.state&&(U.state="loaded",U.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const P of[this.canvas.width,this.canvas.height])if(isNaN(P)||P<=0)return!0;return!1}}},De=function(P,f,w,O){const U=new we[f.type](P,f,w,O);if(U.id!==P)throw new Error(`Expected Source id to be ${P} instead of ${U.id}`);return A.bindAll(["load","abort","unload","serialize","prepare"],U),U};function qe(P,f){const w=A.identity([]);return A.scale$1(w,w,[.5*P.width,.5*-P.height,1]),A.translate(w,w,[1,-1,0]),A.multiply(w,w,P.calculateProjMatrix(f.toUnwrapped()))}function it(P,f,w,O,U,q,ee,se=!1){const ue=P.tilesIn(O,ee,se);ue.sort(Ot);const fe=[];for(const Ae of ue)fe.push({wrappedTileID:Ae.tile.tileID.wrapped().key,queryResults:Ae.tile.queryRenderedFeatures(f,w,P._state,Ae,U,q,qe(P.transform,Ae.tile.tileID),se)});const Ce=function(Ae){const Pe={},Ne={};for(const $e of Ae){const et=$e.queryResults,mt=$e.wrappedTileID,Ue=Ne[mt]=Ne[mt]||{};for(const tt in et){const ot=et[tt],vt=Ue[tt]=Ue[tt]||{},rt=Pe[tt]=Pe[tt]||[];for(const ht of ot)vt[ht.featureIndex]||(vt[ht.featureIndex]=!0,rt.push(ht))}}return Pe}(fe);for(const Ae in Ce)Ce[Ae].forEach(Pe=>{const Ne=Pe.feature,$e=P.getFeatureState(Ne.layer["source-layer"],Ne.id);Ne.source=Ne.layer.source,Ne.layer["source-layer"]&&(Ne.sourceLayer=Ne.layer["source-layer"]),Ne.state=$e});return Ce}function yt(P,f){const w=P.getRenderableIds().map(q=>P.getTileByID(q)),O=[],U={};for(let q=0;q<w.length;q++){const ee=w[q],se=ee.tileID.canonical.key;U[se]||(U[se]=!0,ee.querySourceFeatures(O,f))}return O}function Ot(P,f){const w=P.tileID,O=f.tileID;return w.overscaledZ-O.overscaledZ||w.canonical.y-O.canonical.y||w.wrap-O.wrap||w.canonical.x-O.canonical.x}function Pt(){return null!=op.workerClass?new op.workerClass:new A.window.Worker(op.workerUrl)}const xt="mapboxgl_preloaded_worker_pool";class Ft{constructor(){this.active={}}acquire(f){if(!this.workers)for(this.workers=[];this.workers.length<Ft.workerCount;)this.workers.push(new Pt);return this.active[f]=!0,this.workers.slice()}release(f){delete this.active[f],0===this.numActive()&&(this.workers.forEach(w=>{w.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xt]}numActive(){return Object.keys(this.active).length}}let en;function ve(){return en||(en=new Ft),en}function d(P,f){const w={};for(const O in P)"ref"!==O&&(w[O]=P[O]);return A.refProperties.forEach(O=>{O in f&&(w[O]=f[O])}),w}function p(P){P=P.slice();const f=Object.create(null);for(let w=0;w<P.length;w++)f[P[w].id]=P[w];for(let w=0;w<P.length;w++)"ref"in P[w]&&(P[w]=d(P[w],f[P[w].ref]));return P}Ft.workerCount=2;const y={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function C(P,f,w){w.push({command:y.addSource,args:[P,f[P]]})}function M(P,f,w){f.push({command:y.removeSource,args:[P]}),w[P]=!0}function L(P,f,w,O){M(P,w,O),C(P,f,w)}function R(P,f,w){let O;for(O in P[w])if(P[w].hasOwnProperty(O)&&"data"!==O&&!Be(P[w][O],f[w][O]))return!1;for(O in f[w])if(f[w].hasOwnProperty(O)&&"data"!==O&&!Be(P[w][O],f[w][O]))return!1;return!0}function H(P,f,w,O,U,q){let ee;for(ee in f=f||{},P=P||{})P.hasOwnProperty(ee)&&(Be(P[ee],f[ee])||w.push({command:q,args:[O,ee,f[ee],U]}));for(ee in f)f.hasOwnProperty(ee)&&!P.hasOwnProperty(ee)&&(Be(P[ee],f[ee])||w.push({command:q,args:[O,ee,f[ee],U]}))}function G(P){return P.id}function J(P,f){return P[f.id]=f,P}class te{constructor(f,w){this.reset(f,w)}reset(f,w){this.points=f||[],this._distances=[0];for(let O=1;O<this.points.length;O++)this._distances[O]=this._distances[O-1]+this.points[O].dist(this.points[O-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(w||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(f){if(1===this.points.length)return this.points[0];f=A.clamp(f,0,1);let w=1,O=this._distances[w];const U=f*this.paddedLength+this.padding;for(;O<U&&w<this._distances.length;)O=this._distances[++w];const q=w-1,ee=this._distances[q],se=O-ee,ue=se>0?(U-ee)/se:0;return this.points[q].mult(1-ue).add(this.points[w].mult(ue))}}class K{constructor(f,w,O){const U=this.boxCells=[],q=this.circleCells=[];this.xCellCount=Math.ceil(f/O),this.yCellCount=Math.ceil(w/O);for(let ee=0;ee<this.xCellCount*this.yCellCount;ee++)U.push([]),q.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=w,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(f,w,O,U,q){this._forEachCell(w,O,U,q,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(w),this.bboxes.push(O),this.bboxes.push(U),this.bboxes.push(q)}insertCircle(f,w,O,U){this._forEachCell(w-U,O-U,w+U,O+U,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(w),this.circles.push(O),this.circles.push(U)}_insertBoxCell(f,w,O,U,q,ee){this.boxCells[q].push(ee)}_insertCircleCell(f,w,O,U,q,ee){this.circleCells[q].push(ee)}_query(f,w,O,U,q,ee){if(O<0||f>this.width||U<0||w>this.height)return!q&&[];const se=[];if(f<=0&&w<=0&&this.width<=O&&this.height<=U){if(q)return!0;for(let ue=0;ue<this.boxKeys.length;ue++)se.push({key:this.boxKeys[ue],x1:this.bboxes[4*ue],y1:this.bboxes[4*ue+1],x2:this.bboxes[4*ue+2],y2:this.bboxes[4*ue+3]});for(let ue=0;ue<this.circleKeys.length;ue++){const fe=this.circles[3*ue],Ce=this.circles[3*ue+1],Ae=this.circles[3*ue+2];se.push({key:this.circleKeys[ue],x1:fe-Ae,y1:Ce-Ae,x2:fe+Ae,y2:Ce+Ae})}return ee?se.filter(ee):se}return this._forEachCell(f,w,O,U,this._queryCell,se,{hitTest:q,seenUids:{box:{},circle:{}}},ee),q?se.length>0:se}_queryCircle(f,w,O,U,q){const ee=f-O,se=f+O,ue=w-O,fe=w+O;if(se<0||ee>this.width||fe<0||ue>this.height)return!U&&[];const Ce=[];return this._forEachCell(ee,ue,se,fe,this._queryCellCircle,Ce,{hitTest:U,circle:{x:f,y:w,radius:O},seenUids:{box:{},circle:{}}},q),U?Ce.length>0:Ce}query(f,w,O,U,q){return this._query(f,w,O,U,!1,q)}hitTest(f,w,O,U,q){return this._query(f,w,O,U,!0,q)}hitTestCircle(f,w,O,U){return this._queryCircle(f,w,O,!0,U)}_queryCell(f,w,O,U,q,ee,se,ue){const fe=se.seenUids,Ce=this.boxCells[q];if(null!==Ce){const Pe=this.bboxes;for(const Ne of Ce)if(!fe.box[Ne]){fe.box[Ne]=!0;const $e=4*Ne;if(f<=Pe[$e+2]&&w<=Pe[$e+3]&&O>=Pe[$e+0]&&U>=Pe[$e+1]&&(!ue||ue(this.boxKeys[Ne]))){if(se.hitTest)return ee.push(!0),!0;ee.push({key:this.boxKeys[Ne],x1:Pe[$e],y1:Pe[$e+1],x2:Pe[$e+2],y2:Pe[$e+3]})}}}const Ae=this.circleCells[q];if(null!==Ae){const Pe=this.circles;for(const Ne of Ae)if(!fe.circle[Ne]){fe.circle[Ne]=!0;const $e=3*Ne;if(this._circleAndRectCollide(Pe[$e],Pe[$e+1],Pe[$e+2],f,w,O,U)&&(!ue||ue(this.circleKeys[Ne]))){if(se.hitTest)return ee.push(!0),!0;{const et=Pe[$e],mt=Pe[$e+1],Ue=Pe[$e+2];ee.push({key:this.circleKeys[Ne],x1:et-Ue,y1:mt-Ue,x2:et+Ue,y2:mt+Ue})}}}}}_queryCellCircle(f,w,O,U,q,ee,se,ue){const fe=se.circle,Ce=se.seenUids,Ae=this.boxCells[q];if(null!==Ae){const Ne=this.bboxes;for(const $e of Ae)if(!Ce.box[$e]){Ce.box[$e]=!0;const et=4*$e;if(this._circleAndRectCollide(fe.x,fe.y,fe.radius,Ne[et+0],Ne[et+1],Ne[et+2],Ne[et+3])&&(!ue||ue(this.boxKeys[$e])))return ee.push(!0),!0}}const Pe=this.circleCells[q];if(null!==Pe){const Ne=this.circles;for(const $e of Pe)if(!Ce.circle[$e]){Ce.circle[$e]=!0;const et=3*$e;if(this._circlesCollide(Ne[et],Ne[et+1],Ne[et+2],fe.x,fe.y,fe.radius)&&(!ue||ue(this.circleKeys[$e])))return ee.push(!0),!0}}}_forEachCell(f,w,O,U,q,ee,se,ue){const fe=this._convertToXCellCoord(f),Ce=this._convertToYCellCoord(w),Ae=this._convertToXCellCoord(O),Pe=this._convertToYCellCoord(U);for(let Ne=fe;Ne<=Ae;Ne++)for(let $e=Ce;$e<=Pe;$e++)if(q.call(this,f,w,O,U,this.xCellCount*$e+Ne,ee,se,ue))return}_convertToXCellCoord(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))}_convertToYCellCoord(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))}_circlesCollide(f,w,O,U,q,ee){const se=U-f,ue=q-w,fe=O+ee;return fe*fe>se*se+ue*ue}_circleAndRectCollide(f,w,O,U,q,ee,se){const ue=(ee-U)/2,fe=Math.abs(f-(U+ue));if(fe>ue+O)return!1;const Ce=(se-q)/2,Ae=Math.abs(w-(q+Ce));if(Ae>Ce+O)return!1;if(fe<=ue||Ae<=Ce)return!0;const Pe=fe-ue,Ne=Ae-Ce;return Pe*Pe+Ne*Ne<=O*O}}const ae=Math.tan(85*Math.PI/180);function pe(P,f,w,O,U){const q=A.create$1();return f?(A.scale$1(q,q,[1/U,1/U,1]),w||A.rotateZ(q,q,O.angle)):A.multiply(q,O.labelPlaneMatrix,P),q}function ge(P,f,w,O,U){if(f){const q=A.clone$1(P);return A.scale$1(q,q,[U,U,1]),w||A.rotateZ(q,q,-O.angle),q}return O.glCoordMatrix}function xe(P,f,w=0){const O=[P.x,P.y,w,1];w?A.transformMat4(O,O,f):Xt(O,O,f);const U=O[3];return{point:new A.pointGeometry(O[0]/U,O[1]/U),signedDistanceFromCamera:U}}function Me(P,f){return Math.min(.5+P/f*.5,1.5)}function ze(P,f){const w=P[0]/P[3],O=P[1]/P[3];return w>=-f[0]&&w<=f[0]&&O>=-f[1]&&O<=f[1]}function Ke(P,f,w,O,U,q,ee,se,ue){const fe=O?P.textSizeData:P.iconSizeData,Ce=A.evaluateSizeForZoom(fe,w.transform.zoom),Ae=[256/w.width*2+1,256/w.height*2+1],Pe=O?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;Pe.clear();const Ne=P.lineVertexArray,$e=O?P.text.placedSymbolArray:P.icon.placedSymbolArray,et=w.transform.width/w.transform.height;let mt=!1;for(let Ue=0;Ue<$e.length;Ue++){const tt=$e.get(Ue);if(tt.writingMode!==A.WritingMode.vertical||mt||0!==Ue&&$e.get(Ue-1).writingMode===A.WritingMode.horizontal||(mt=!0),tt.hidden||tt.writingMode===A.WritingMode.vertical&&!mt){St(tt.numGlyphs,Pe);continue}mt=!1;const ot=ue?ue({x:tt.anchorX,y:tt.anchorY}):0,vt=[tt.anchorX,tt.anchorY,ot,1];if(A.transformMat4(vt,vt,f),!ze(vt,Ae)){St(tt.numGlyphs,Pe);continue}const rt=Me(w.transform.cameraToCenterDistance,vt[3]),ht=A.evaluateSizeForFeature(fe,Ce,tt),Kt=ee?ht/rt:ht*rt,sn=new A.pointGeometry(tt.anchorX,tt.anchorY),un=xe(sn,U,ot);if(un.signedDistanceFromCamera<=0){St(tt.numGlyphs,Pe);continue}const ut=un.point;let En={};const bn=ee?null:ue,Zn=be(tt,Kt,!1,se,f,U,q,P.glyphOffsetArray,Ne,Pe,ut,sn,En,et,bn);mt=Zn.useVertical,bn&&Zn.needsFlipping&&(En={}),(Zn.notEnoughRoom||mt||Zn.needsFlipping&&be(tt,Kt,!0,se,f,U,q,P.glyphOffsetArray,Ne,Pe,ut,sn,En,et,bn).notEnoughRoom)&&St(tt.numGlyphs,Pe)}O?P.text.dynamicLayoutVertexBuffer.updateData(Pe):P.icon.dynamicLayoutVertexBuffer.updateData(Pe)}function Y(P,f,w,O,U,q,ee,se,ue,fe,Ce,Ae,Pe){const Ne=se.glyphStartIndex+se.numGlyphs,$e=se.lineStartIndex,et=se.lineStartIndex+se.lineLength,mt=f.getoffsetX(se.glyphStartIndex),Ue=f.getoffsetX(Ne-1),tt=Je(P*mt,w,O,U,q,ee,se.segment,$e,et,ue,fe,Ce,Ae,Pe,!0);if(!tt)return null;const ot=Je(P*Ue,w,O,U,q,ee,se.segment,$e,et,ue,fe,Ce,Ae,Pe,!0);return ot?{first:tt,last:ot}:null}function ne(P,f,w,O){return P.writingMode===A.WritingMode.horizontal&&Math.abs(w.y-f.y)>Math.abs(w.x-f.x)*O?{useVertical:!0}:P.writingMode===A.WritingMode.vertical?f.y<w.y?{needsFlipping:!0}:null:0!==P.flipState&&function(U,q,ee){const se=(q.x-U.x)*ee;return 0===se||Math.abs((q.y-U.y)/se)>ae}(f,w,O)?1===P.flipState?{needsFlipping:!0}:null:f.x>w.x?{needsFlipping:!0}:null}function be(P,f,w,O,U,q,ee,se,ue,fe,Ce,Ae,Pe,Ne,$e){const et=f/24,mt=P.lineOffsetX*et,Ue=P.lineOffsetY*et;let tt;if(P.numGlyphs>1){const ot=P.glyphStartIndex+P.numGlyphs,vt=P.lineStartIndex,rt=P.lineStartIndex+P.lineLength,ht=Y(et,se,mt,Ue,w,Ce,Ae,P,ue,q,Pe,$e);if(!ht)return{notEnoughRoom:!0};const Kt=xe(ht.first.point,ee).point,sn=xe(ht.last.point,ee).point;if(O&&!w){const un=ne(P,Kt,sn,Ne);if(P.flipState=un&&un.needsFlipping?1:2,un)return un}tt=[ht.first];for(let un=P.glyphStartIndex+1;un<ot-1;un++)tt.push(Je(et*se.getoffsetX(un),mt,Ue,w,Ce,Ae,P.segment,vt,rt,ue,q,Pe,$e));tt.push(ht.last)}else{if(O&&!w){const vt=xe(Ae,U).point,rt=P.lineStartIndex+P.segment+1,ht=new A.pointGeometry(ue.getx(rt),ue.gety(rt)),Kt=xe(ht,U),sn=ne(P,vt,Kt.signedDistanceFromCamera>0?Kt.point:Ie(Ae,ht,vt,1,U),Ne);if(P.flipState=sn&&sn.needsFlipping?1:2,sn)return sn}const ot=Je(et*se.getoffsetX(P.glyphStartIndex),mt,Ue,w,Ce,Ae,P.segment,P.lineStartIndex,P.lineStartIndex+P.lineLength,ue,q,Pe,$e);if(!ot)return{notEnoughRoom:!0};tt=[ot]}for(const ot of tt)A.addDynamicAttributes(fe,ot.point,ot.angle);return{}}function Ie(P,f,w,O,U,q){const ee=P.add(P.sub(f)._unit()),se=xe(ee,U,q?q(ee):0).point,ue=w.sub(se);return w.add(ue._mult(O/ue.mag()))}function Je(P,f,w,O,U,q,ee,se,ue,fe,Ce,Ae,Pe,Ne,$e){const et=O?P-f:P+f;let mt=et>0?1:-1,Ue=0;O&&(mt*=-1,Ue=Math.PI),mt<0&&(Ue+=Math.PI);let tt=mt>0?se+ee:se+ee+1,ot=U,vt=U,rt=0,ht=0;const Kt=Math.abs(et),sn=[],un=[];let ut=q;const En=()=>{const ci=tt-mt;return 0===rt?q:new A.pointGeometry(fe.getx(ci),fe.gety(ci))},bn=()=>Ie(En(),ut,vt,Kt-rt+1,Ce,Pe);for(;rt+ht<=Kt;){if(tt+=mt,tt<se||tt>=ue)return null;if(vt=ot,sn.push(ot),Ne&&un.push(ut||En()),ot=Ae[tt],void 0===ot){ut=new A.pointGeometry(fe.getx(tt),fe.gety(tt));const ci=xe(ut,Ce,Pe?Pe(ut):0);ot=ci.signedDistanceFromCamera>0?Ae[tt]=ci.point:bn()}else ut=null;rt+=ht,ht=vt.dist(ot)}$e&&Pe&&(ut=ut||new A.pointGeometry(fe.getx(tt),fe.gety(tt)),Ae[tt]=ot=void 0===Ae[tt]?ot:bn(),ht=vt.dist(ot));const Zn=(Kt-rt)/ht,An=ot.sub(vt),kn=An.mult(Zn)._add(vt);w&&kn._add(An._unit()._perp()._mult(w*mt));const Ti=Ue+Math.atan2(ot.y-vt.y,ot.x-vt.x);return sn.push(kn),Ne&&(ut=ut||new A.pointGeometry(fe.getx(tt),fe.gety(tt)),un.push(function(ci,ar,mr){const Lr=1-mr;return new A.pointGeometry(ci.x*Lr+ar.x*mr,ci.y*Lr+ar.y*mr)}(un.length>0?un[un.length-1]:ut,ut,Zn))),{point:kn,angle:Ti,path:sn,tilePath:un}}const Nt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function St(P,f){for(let w=0;w<P;w++){const O=f.length;f.resize(O+4),f.float32.set(Nt,3*O)}}function Xt(P,f,w){const O=f[0],U=f[1];return P[0]=w[0]*O+w[4]*U+w[12],P[1]=w[1]*O+w[5]*U+w[13],P[3]=w[3]*O+w[7]*U+w[15],P}const gn=100;class hn{constructor(f,w,O=new K(f.width+200,f.height+200,25),U=new K(f.width+200,f.height+200,25)){this.transform=f,this.grid=O,this.ignoredGrid=U,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+gn,this.screenBottomBoundary=f.height+gn,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200,this.fogState=w}placeCollisionBox(f,w,O,U,q,ee,se){const ue=this.projectAndGetPerspectiveRatio(ee,w.anchorPointX,w.anchorPointY,w.elevation,w.tileID),fe=q*ue.perspectiveRatio,Ce=(w.x1*f+O.x-w.padding)*fe+ue.point.x,Ae=(w.y1*f+O.y-w.padding)*fe+ue.point.y,Pe=(w.x2*f+O.x+w.padding)*fe+ue.point.x,Ne=(w.y2*f+O.y+w.padding)*fe+ue.point.y,$e=ue.perspectiveRatio<=.55||ue.aboveHorizon;return!this.isInsideGrid(Ce,Ae,Pe,Ne)||!U&&this.grid.hitTest(Ce,Ae,Pe,Ne,se)||$e?{box:[],offscreen:!1}:{box:[Ce,Ae,Pe,Ne],offscreen:this.isOffscreen(Ce,Ae,Pe,Ne)}}placeCollisionCircles(f,w,O,U,q,ee,se,ue,fe,Ce,Ae,Pe,Ne,$e){const et=[],mt=this.transform.elevation,Ue=mt?bn=>mt.getAtTileOffset($e,bn.x,bn.y):bn=>0,tt=new A.pointGeometry(w.anchorX,w.anchorY),ot=Ue(tt),vt=this.projectAndGetPerspectiveRatio(ee,tt.x,tt.y,ot,$e),{perspectiveRatio:rt}=vt,ht=(Ce?q/rt:q*rt)/A.ONE_EM,Kt=xe(tt,se,ot).point,sn=vt.signedDistanceFromCamera>0?Y(ht,U,w.lineOffsetX*ht,w.lineOffsetY*ht,!1,Kt,tt,w,O,se,{},mt&&!Ce?Ue:null,Ce&&!!mt):null;let un=!1,ut=!1,En=!0;if(sn&&!vt.aboveHorizon){const bn=.5*Pe*rt+Ne,Zn=new A.pointGeometry(-100,-100),An=new A.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),kn=new te,Ti=sn.first,ci=sn.last;let ar=[];for(let Bi=Ti.path.length-1;Bi>=1;Bi--)ar.push(Ti.path[Bi]);for(let Bi=1;Bi<ci.path.length;Bi++)ar.push(ci.path[Bi]);const mr=2.5*bn;if(ue){const Bi=ar.map(mt?(pr,ho)=>{const ua=Ue(ho<Ti.path.length-1?Ti.tilePath[Ti.path.length-1-ho]:ci.tilePath[ho-Ti.path.length+2]);return xe(pr,ue,ua)}:pr=>xe(pr,ue));ar=Bi.some(pr=>pr.signedDistanceFromCamera<=0)?[]:Bi.map(pr=>pr.point)}let Lr=[];if(ar.length>0){const Bi=ar[0].clone(),pr=ar[0].clone();for(let ho=1;ho<ar.length;ho++)Bi.x=Math.min(Bi.x,ar[ho].x),Bi.y=Math.min(Bi.y,ar[ho].y),pr.x=Math.max(pr.x,ar[ho].x),pr.y=Math.max(pr.y,ar[ho].y);Lr=Bi.x>=Zn.x&&pr.x<=An.x&&Bi.y>=Zn.y&&pr.y<=An.y?[ar]:pr.x<Zn.x||Bi.x>An.x||pr.y<Zn.y||Bi.y>An.y?[]:A.clipLine([ar],Zn.x,Zn.y,An.x,An.y)}for(const Bi of Lr){kn.reset(Bi,.25*bn);let pr=0;pr=kn.length<=.5*bn?1:Math.ceil(kn.paddedLength/mr)+1;for(let ho=0;ho<pr;ho++){const ua=ho/Math.max(pr-1,1),bs=kn.lerp(ua),Uo=bs.x+gn,Xo=bs.y+gn;et.push(Uo,Xo,bn,0);const ha=Uo-bn,wi=Xo-bn,Nr=Uo+bn,cr=Xo+bn;if(En=En&&this.isOffscreen(ha,wi,Nr,cr),ut=ut||this.isInsideGrid(ha,wi,Nr,cr),!f&&this.grid.hitTestCircle(Uo,Xo,bn,Ae)&&(un=!0,!fe))return{circles:[],offscreen:!1,collisionDetected:un}}}}return{circles:!fe&&un||!ut?[]:et,offscreen:En,collisionDetected:un}}queryRenderedSymbols(f){if(0===f.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const w=[];let O=1/0,U=1/0,q=-1/0,ee=-1/0;for(const Ce of f){const Ae=new A.pointGeometry(Ce.x+gn,Ce.y+gn);O=Math.min(O,Ae.x),U=Math.min(U,Ae.y),q=Math.max(q,Ae.x),ee=Math.max(ee,Ae.y),w.push(Ae)}const se=this.grid.query(O,U,q,ee).concat(this.ignoredGrid.query(O,U,q,ee)),ue={},fe={};for(const Ce of se){const Ae=Ce.key;if(void 0===ue[Ae.bucketInstanceId]&&(ue[Ae.bucketInstanceId]={}),ue[Ae.bucketInstanceId][Ae.featureIndex])continue;const Pe=[new A.pointGeometry(Ce.x1,Ce.y1),new A.pointGeometry(Ce.x2,Ce.y1),new A.pointGeometry(Ce.x2,Ce.y2),new A.pointGeometry(Ce.x1,Ce.y2)];A.polygonIntersectsPolygon(w,Pe)&&(ue[Ae.bucketInstanceId][Ae.featureIndex]=!0,void 0===fe[Ae.bucketInstanceId]&&(fe[Ae.bucketInstanceId]=[]),fe[Ae.bucketInstanceId].push(Ae.featureIndex))}return fe}insertCollisionBox(f,w,O,U,q){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:O,featureIndex:U,collisionGroupID:q},f[0],f[1],f[2],f[3])}insertCollisionCircles(f,w,O,U,q){const ee=w?this.ignoredGrid:this.grid,se={bucketInstanceId:O,featureIndex:U,collisionGroupID:q};for(let ue=0;ue<f.length;ue+=4)ee.insertCircle(se,f[ue],f[ue+1],f[ue+2])}projectAndGetPerspectiveRatio(f,w,O,U,q){const ee=[w,O,U||0,1];let se=!1;if(U||this.transform.pitch>0){A.transformMat4(ee,ee,f);let ue=!1;this.fogState&&q&&(ue=function(fe,Ce,Ae,Pe,Ne,$e){const et=$e.calculateFogTileMatrix(Ne),mt=[Ce,Ae,Pe];return A.transformMat4$1(mt,mt,et),Zt(fe,mt,$e.pitch,$e._fov)}(this.fogState,w,O,U||0,q.toUnwrapped(),this.transform)>.9),se=ee[2]>ee[3]||ue}else Xt(ee,ee,f);return{point:new A.pointGeometry((ee[0]/ee[3]+1)/2*this.transform.width+gn,(-ee[1]/ee[3]+1)/2*this.transform.height+gn),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/ee[3]*.5,1.5),signedDistanceFromCamera:ee[3],aboveHorizon:se}}isOffscreen(f,w,O,U){return O<gn||f>=this.screenRightBoundary||U<gn||w>this.screenBottomBoundary}isInsideGrid(f,w,O,U){return O>=0&&f<this.gridRightBoundary&&U>=0&&w<this.gridBottomBoundary}getViewportMatrix(){const f=A.identity([]);return A.translate(f,f,[-100,-100,0]),f}}class Kn{constructor(f,w,O,U){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?w:-w))):U&&O?1:0,this.placed=O}isHidden(){return 0===this.opacity&&!this.placed}}class Ni{constructor(f,w,O,U,q){this.text=new Kn(f?f.text:null,w,O,q),this.icon=new Kn(f?f.icon:null,w,U,q)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Nn{constructor(f,w,O){this.text=f,this.icon=w,this.skipFade=O}}class ei{constructor(){this.invProjMatrix=A.create$1(),this.viewportMatrix=A.create$1(),this.circles=[]}}class rr{constructor(f,w,O,U,q){this.bucketInstanceId=f,this.featureIndex=w,this.sourceLayerIndex=O,this.bucketIndex=U,this.tileID=q}}class yo{constructor(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}}get(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){const w=++this.maxGroupID;this.collisionGroups[f]={ID:w,predicate:O=>O.collisionGroupID===w}}return this.collisionGroups[f]}}function Tr(P,f,w,O,U){const{horizontalAlign:q,verticalAlign:ee}=A.getAnchorAlignment(P),se=-(q-.5)*f,ue=-(ee-.5)*w,fe=A.evaluateVariableOffset(P,O);return new A.pointGeometry(se+fe[0]*U,ue+fe[1]*U)}function or(P,f,w,O,U){const q=new A.pointGeometry(P,f);return w&&q._rotate(O?U:-U),q}class No{constructor(f,w,O,U,q){this.transform=f.clone(),this.collisionIndex=new hn(this.transform,q),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new yo(O),this.collisionCircleArrays={},this.prevPlacement=U,U&&(U.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(f,w,O,U){const q=O.getBucket(w),ee=O.latestFeatureIndex;if(!q||!ee||w.id!==q.layerIds[0])return;const se=O.collisionBoxArray,ue=q.layers[0].layout,fe=Math.pow(2,this.transform.zoom-O.tileID.overscaledZ),Ce=O.tileSize/A.EXTENT,Ae=this.transform.calculateProjMatrix(O.tileID.toUnwrapped()),Pe="map"===ue.get("text-pitch-alignment"),Ne="map"===ue.get("text-rotation-alignment"),$e=On(O,1,this.transform.zoom),et=pe(Ae,Pe,Ne,this.transform,$e);let mt=null;if(Pe){const tt=ge(Ae,Pe,Ne,this.transform,$e);mt=A.multiply([],this.transform.labelPlaneMatrix,tt)}this.retainedQueryData[q.bucketInstanceId]=new rr(q.bucketInstanceId,ee,q.sourceLayerIndex,q.index,O.tileID);const Ue={bucket:q,layout:ue,posMatrix:Ae,textLabelPlaneMatrix:et,labelToScreenMatrix:mt,scale:fe,textPixelRatio:Ce,holdingForFade:O.holdingForFade(),collisionBoxArray:se,partiallyEvaluatedTextSize:A.evaluateSizeForZoom(q.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:A.evaluateSizeForZoom(q.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(q.sourceID)};if(U)for(const tt of q.sortKeyRanges){const{sortKey:ot,symbolInstanceStart:vt,symbolInstanceEnd:rt}=tt;f.push({sortKey:ot,symbolInstanceStart:vt,symbolInstanceEnd:rt,parameters:Ue})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:q.symbolInstances.length,parameters:Ue})}attemptAnchorPlacement(f,w,O,U,q,ee,se,ue,fe,Ce,Ae,Pe,Ne,$e,et,mt,Ue,tt){const ot=[Pe.textOffset0,Pe.textOffset1],vt=Tr(f,O,U,ot,q),rt=this.collisionIndex.placeCollisionBox(q,w,or(vt.x,vt.y,ee,se,this.transform.angle),Ae,ue,fe,Ce.predicate);if((!mt||0!==this.collisionIndex.placeCollisionBox($e.getSymbolInstanceIconSize(tt,this.transform.zoom,Ne),mt,or(vt.x,vt.y,ee,se,this.transform.angle),Ae,ue,fe,Ce.predicate).box.length)&&rt.box.length>0){let ht;return this.prevPlacement&&this.prevPlacement.variableOffsets[Pe.crossTileID]&&this.prevPlacement.placements[Pe.crossTileID]&&this.prevPlacement.placements[Pe.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[Pe.crossTileID].anchor),this.variableOffsets[Pe.crossTileID]={textOffset:ot,width:O,height:U,anchor:f,textScale:q,prevAnchor:ht},this.markUsedJustification($e,f,Pe,et),$e.allowVerticalPlacement&&(this.markUsedOrientation($e,et,Pe),this.placedOrientations[Pe.crossTileID]=et),{shift:vt,placedGlyphBoxes:rt}}}placeLayerBucketPart(f,w,O){const{bucket:U,layout:q,posMatrix:ee,textLabelPlaneMatrix:se,labelToScreenMatrix:ue,textPixelRatio:fe,holdingForFade:Ce,collisionBoxArray:Ae,partiallyEvaluatedTextSize:Pe,partiallyEvaluatedIconSize:Ne,collisionGroup:$e}=f.parameters,et=q.get("text-optional"),mt=q.get("icon-optional"),Ue=q.get("text-allow-overlap"),tt=q.get("icon-allow-overlap"),ot="map"===q.get("text-rotation-alignment"),vt="map"===q.get("text-pitch-alignment"),rt="none"!==q.get("icon-text-fit"),ht="viewport-y"===q.get("symbol-z-order"),Kt=Ue&&(tt||!U.hasIconData()||mt),sn=tt&&(Ue||!U.hasTextData()||et);!U.collisionArrays&&Ae&&U.deserializeCollisionBoxes(Ae),O&&U.updateCollisionDebugBuffers(this.transform.zoom,Ae);const un=(ut,En,bn)=>{if(w[ut.crossTileID])return;if(Ce)return void(this.placements[ut.crossTileID]=new Nn(!1,!1,!1));let Zn=!1,An=!1,kn=!0,Ti=null,ci={box:null,offscreen:null},ar={box:null,offscreen:null},mr=null,Lr=null,Bi=null,pr=0,ho=0,ua=0;bn.textFeatureIndex?pr=bn.textFeatureIndex:ut.useRuntimeCollisionCircles&&(pr=ut.featureIndex),bn.verticalTextFeatureIndex&&(ho=bn.verticalTextFeatureIndex);const bs=wi=>{wi.tileID=this.retainedQueryData[U.bucketInstanceId].tileID,(this.transform.elevation||wi.elevation)&&(wi.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[U.bucketInstanceId].tileID,wi.anchorPointX,wi.anchorPointY):0)},Uo=bn.textBox;if(Uo){bs(Uo);const wi=cr=>{let qr=A.WritingMode.horizontal;if(U.allowVerticalPlacement&&!cr&&this.prevPlacement){const po=this.prevPlacement.placedOrientations[ut.crossTileID];po&&(this.placedOrientations[ut.crossTileID]=po,qr=po,this.markUsedOrientation(U,qr,ut))}return qr},Nr=(cr,qr)=>{if(U.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&bn.verticalTextBox){for(const po of U.writingModes)if(po===A.WritingMode.vertical?(ci=qr(),ar=ci):ci=cr(),ci&&ci.box&&ci.box.length)break}else ci=cr()};if(q.get("text-variable-anchor")){let cr=q.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ut.crossTileID]){const Jr=this.prevPlacement.variableOffsets[ut.crossTileID];cr.indexOf(Jr.anchor)>0&&(cr=cr.filter(da=>da!==Jr.anchor),cr.unshift(Jr.anchor))}const qr=(Jr,da,Ps)=>{const Ys=U.getSymbolInstanceTextSize(Pe,ut,this.transform.zoom,En),qs=(Jr.x2-Jr.x1)*Ys+2*Jr.padding,wl=(Jr.y2-Jr.y1)*Ys+2*Jr.padding,Zc=rt&&!tt?da:null;Zc&&bs(Zc);let Zs={box:[],offscreen:!1};const sd=Ue?2*cr.length:cr.length;for(let Wc=0;Wc<sd;++Wc){const Ho=this.attemptAnchorPlacement(cr[Wc%cr.length],Jr,qs,wl,Ys,ot,vt,fe,ee,$e,Wc>=cr.length,ut,En,U,Ps,Zc,Pe,Ne);if(Ho&&(Zs=Ho.placedGlyphBoxes,Zs&&Zs.box&&Zs.box.length)){Zn=!0,Ti=Ho.shift;break}}return Zs};Nr(()=>qr(Uo,bn.iconBox,A.WritingMode.horizontal),()=>{const Jr=bn.verticalTextBox;return Jr&&bs(Jr),U.allowVerticalPlacement&&!(ci&&ci.box&&ci.box.length)&&ut.numVerticalGlyphVertices>0&&Jr?qr(Jr,bn.verticalIconBox,A.WritingMode.vertical):{box:null,offscreen:null}}),ci&&(Zn=ci.box,kn=ci.offscreen);const po=wi(ci&&ci.box);if(!Zn&&this.prevPlacement){const Jr=this.prevPlacement.variableOffsets[ut.crossTileID];Jr&&(this.variableOffsets[ut.crossTileID]=Jr,this.markUsedJustification(U,Jr.anchor,ut,po))}}else{const cr=(qr,po)=>{const Jr=U.getSymbolInstanceTextSize(Pe,ut,this.transform.zoom,En),da=this.collisionIndex.placeCollisionBox(Jr,qr,new A.pointGeometry(0,0),Ue,fe,ee,$e.predicate);return da&&da.box&&da.box.length&&(this.markUsedOrientation(U,po,ut),this.placedOrientations[ut.crossTileID]=po),da};Nr(()=>cr(Uo,A.WritingMode.horizontal),()=>{const qr=bn.verticalTextBox;return U.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&qr?(bs(qr),cr(qr,A.WritingMode.vertical)):{box:null,offscreen:null}}),wi(ci&&ci.box&&ci.box.length)}}if(mr=ci,Zn=mr&&mr.box&&mr.box.length>0,kn=mr&&mr.offscreen,ut.useRuntimeCollisionCircles){const wi=U.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex>=0?ut.centerJustifiedTextSymbolIndex:ut.verticalPlacedTextSymbolIndex),Nr=A.evaluateSizeForFeature(U.textSizeData,Pe,wi),cr=q.get("text-padding");Lr=this.collisionIndex.placeCollisionCircles(Ue,wi,U.lineVertexArray,U.glyphOffsetArray,Nr,ee,se,ue,O,vt,$e.predicate,ut.collisionCircleDiameter,cr,this.retainedQueryData[U.bucketInstanceId].tileID),Zn=Ue||Lr.circles.length>0&&!Lr.collisionDetected,kn=kn&&Lr.offscreen}if(bn.iconFeatureIndex&&(ua=bn.iconFeatureIndex),bn.iconBox){const wi=Nr=>{bs(Nr);const cr=rt&&Ti?or(Ti.x,Ti.y,ot,vt,this.transform.angle):new A.pointGeometry(0,0),qr=U.getSymbolInstanceIconSize(Ne,this.transform.zoom,En);return this.collisionIndex.placeCollisionBox(qr,Nr,cr,tt,fe,ee,$e.predicate)};ar&&ar.box&&ar.box.length&&bn.verticalIconBox?(Bi=wi(bn.verticalIconBox),An=Bi.box.length>0):(Bi=wi(bn.iconBox),An=Bi.box.length>0),kn=kn&&Bi.offscreen}const Xo=et||0===ut.numHorizontalGlyphVertices&&0===ut.numVerticalGlyphVertices,ha=mt||0===ut.numIconVertices;if(Xo||ha?ha?Xo||(An=An&&Zn):Zn=An&&Zn:An=Zn=An&&Zn,Zn&&mr&&mr.box&&this.collisionIndex.insertCollisionBox(mr.box,q.get("text-ignore-placement"),U.bucketInstanceId,ar&&ar.box&&ho?ho:pr,$e.ID),An&&Bi&&this.collisionIndex.insertCollisionBox(Bi.box,q.get("icon-ignore-placement"),U.bucketInstanceId,ua,$e.ID),Lr&&(Zn&&this.collisionIndex.insertCollisionCircles(Lr.circles,q.get("text-ignore-placement"),U.bucketInstanceId,pr,$e.ID),O)){const wi=U.bucketInstanceId;let Nr=this.collisionCircleArrays[wi];void 0===Nr&&(Nr=this.collisionCircleArrays[wi]=new ei);for(let cr=0;cr<Lr.circles.length;cr+=4)Nr.circles.push(Lr.circles[cr+0]),Nr.circles.push(Lr.circles[cr+1]),Nr.circles.push(Lr.circles[cr+2]),Nr.circles.push(Lr.collisionDetected?1:0)}this.placements[ut.crossTileID]=new Nn(Zn||Kt,An||sn,kn||U.justReloaded),w[ut.crossTileID]=!0};if(ht){const ut=U.getSortedSymbolIndexes(this.transform.angle);for(let En=ut.length-1;En>=0;--En){const bn=ut[En];un(U.symbolInstances.get(bn),bn,U.collisionArrays[bn])}}else for(let ut=f.symbolInstanceStart;ut<f.symbolInstanceEnd;ut++)un(U.symbolInstances.get(ut),ut,U.collisionArrays[ut]);if(O&&U.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[U.bucketInstanceId];A.invert(ut.invProjMatrix,ee),ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}U.justReloaded=!1}markUsedJustification(f,w,O,U){let q;q=U===A.WritingMode.vertical?O.verticalPlacedTextSymbolIndex:{left:O.leftJustifiedTextSymbolIndex,center:O.centerJustifiedTextSymbolIndex,right:O.rightJustifiedTextSymbolIndex}[A.getAnchorJustification(w)];const ee=[O.leftJustifiedTextSymbolIndex,O.centerJustifiedTextSymbolIndex,O.rightJustifiedTextSymbolIndex,O.verticalPlacedTextSymbolIndex];for(const se of ee)se>=0&&(f.text.placedSymbolArray.get(se).crossTileID=q>=0&&se!==q?0:O.crossTileID)}markUsedOrientation(f,w,O){const U=w===A.WritingMode.horizontal||w===A.WritingMode.horizontalOnly?w:0,q=w===A.WritingMode.vertical?w:0,ee=[O.leftJustifiedTextSymbolIndex,O.centerJustifiedTextSymbolIndex,O.rightJustifiedTextSymbolIndex];for(const se of ee)f.text.placedSymbolArray.get(se).placedOrientation=U;O.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(O.verticalPlacedTextSymbolIndex).placedOrientation=q)}commit(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;const w=this.prevPlacement;let O=!1;this.prevZoomAdjustment=w?w.zoomAdjustment(this.transform.zoom):0;const U=w?w.symbolFadeChange(f):1,q=w?w.opacities:{},ee=w?w.variableOffsets:{},se=w?w.placedOrientations:{};for(const ue in this.placements){const fe=this.placements[ue],Ce=q[ue];Ce?(this.opacities[ue]=new Ni(Ce,U,fe.text,fe.icon),O=O||fe.text!==Ce.text.placed||fe.icon!==Ce.icon.placed):(this.opacities[ue]=new Ni(null,U,fe.text,fe.icon,fe.skipFade),O=O||fe.text||fe.icon)}for(const ue in q){const fe=q[ue];if(!this.opacities[ue]){const Ce=new Ni(fe,U,!1,!1);Ce.isHidden()||(this.opacities[ue]=Ce,O=O||fe.text.placed||fe.icon.placed)}}for(const ue in ee)this.variableOffsets[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.variableOffsets[ue]=ee[ue]);for(const ue in se)this.placedOrientations[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.placedOrientations[ue]=se[ue]);O?this.lastPlacementChangeTime=f:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=w?w.lastPlacementChangeTime:f)}updateLayerOpacities(f,w){const O={};for(const U of w){const q=U.getBucket(f);q&&U.latestFeatureIndex&&f.id===q.layerIds[0]&&this.updateBucketOpacities(q,O,U.collisionBoxArray)}}updateBucketOpacities(f,w,O){f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();const U=f.layers[0].layout,q=new Ni(null,0,!1,!1,!0),ee=U.get("text-allow-overlap"),se=U.get("icon-allow-overlap"),ue=U.get("text-variable-anchor"),fe="map"===U.get("text-rotation-alignment"),Ce="map"===U.get("text-pitch-alignment"),Ae="none"!==U.get("icon-text-fit"),Pe=new Ni(null,0,ee&&(se||!f.hasIconData()||U.get("icon-optional")),se&&(ee||!f.hasTextData()||U.get("text-optional")),!0);!f.collisionArrays&&O&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(O);const Ne=($e,et,mt)=>{for(let Ue=0;Ue<et/4;Ue++)$e.opacityVertexArray.emplaceBack(mt)};for(let $e=0;$e<f.symbolInstances.length;$e++){const et=f.symbolInstances.get($e),{numHorizontalGlyphVertices:mt,numVerticalGlyphVertices:Ue,crossTileID:tt}=et;let ot=this.opacities[tt];w[tt]?ot=q:ot||(ot=Pe,this.opacities[tt]=ot),w[tt]=!0;const vt=et.numIconVertices>0,rt=this.placedOrientations[et.crossTileID],ht=rt===A.WritingMode.vertical,Kt=rt===A.WritingMode.horizontal||rt===A.WritingMode.horizontalOnly;if(mt>0||Ue>0){const sn=Rp(ot.text);Ne(f.text,mt,ht?na:sn),Ne(f.text,Ue,Kt?na:sn);const un=ot.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(bn=>{bn>=0&&(f.text.placedSymbolArray.get(bn).hidden=un||ht?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=un||Kt?1:0);const ut=this.variableOffsets[et.crossTileID];ut&&this.markUsedJustification(f,ut.anchor,et,rt);const En=this.placedOrientations[et.crossTileID];En&&(this.markUsedJustification(f,"left",et,En),this.markUsedOrientation(f,En,et))}if(vt){const sn=Rp(ot.icon);et.placedIconSymbolIndex>=0&&(Ne(f.icon,et.numIconVertices,ht?na:sn),f.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=ot.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(Ne(f.icon,et.numVerticalIconVertices,Kt?na:sn),f.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=ot.icon.isHidden())}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){const sn=f.collisionArrays[$e];if(sn){let un=new A.pointGeometry(0,0);if(sn.textBox||sn.verticalTextBox){let En=!0;if(ue){const bn=this.variableOffsets[tt];bn?(un=Tr(bn.anchor,bn.width,bn.height,bn.textOffset,bn.textScale),fe&&un._rotate(Ce?this.transform.angle:-this.transform.angle)):En=!1}sn.textBox&&xr(f.textCollisionBox.collisionVertexArray,ot.text.placed,!En||ht,un.x,un.y),sn.verticalTextBox&&xr(f.textCollisionBox.collisionVertexArray,ot.text.placed,!En||Kt,un.x,un.y)}const ut=Boolean(!Kt&&sn.verticalIconBox);sn.iconBox&&xr(f.iconCollisionBox.collisionVertexArray,ot.icon.placed,ut,Ae?un.x:0,Ae?un.y:0),sn.verticalIconBox&&xr(f.iconCollisionBox.collisionVertexArray,ot.icon.placed,!ut,Ae?un.x:0,Ae?un.y:0)}}}if(f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){const $e=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=$e.invProjMatrix,f.placementViewportMatrix=$e.viewportMatrix,f.collisionCircleArray=$e.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}}symbolFadeChange(f){return 0===this.fadeDuration?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(f){return Math.max(0,(this.transform.zoom-f)/1.5)}hasTransitions(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(f,w){const O=this.zoomAtLastRecencyCheck===w?1-this.zoomAdjustment(w):1;return this.zoomAtLastRecencyCheck=w,this.commitTime+this.fadeDuration*O>f}setStale(){this.stale=!0}}function xr(P,f,w,O,U){P.emplaceBack(f?1:0,w?1:0,O||0,U||0),P.emplaceBack(f?1:0,w?1:0,O||0,U||0),P.emplaceBack(f?1:0,w?1:0,O||0,U||0),P.emplaceBack(f?1:0,w?1:0,O||0,U||0)}const ys=Math.pow(2,25),Us=Math.pow(2,24),ro=Math.pow(2,17),Bo=Math.pow(2,16),yu=Math.pow(2,9),cl=Math.pow(2,8),C_=Math.pow(2,1);function Rp(P){if(0===P.opacity&&!P.placed)return 0;if(1===P.opacity&&P.placed)return 4294967295;const f=P.placed?1:0,w=Math.floor(127*P.opacity);return w*ys+f*Us+w*ro+f*Bo+w*yu+f*cl+w*C_+f}const na=0;class Op{constructor(f){this._sortAcrossTiles="viewport-y"!==f.layout.get("symbol-z-order")&&void 0!==f.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(f,w,O,U,q){const ee=this._bucketParts;for(;this._currentTileIndex<f.length;)if(w.getBucketParts(ee,U,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,q())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort((se,ue)=>se.sortKey-ue.sortKey));this._currentPartIndex<ee.length;)if(w.placeLayerBucketPart(ee[this._currentPartIndex],this._seenCrossTileIDs,O),this._currentPartIndex++,q())return!0;return!1}}class vu{constructor(f,w,O,U,q,ee,se,ue){this.placement=new No(f,q,ee,se,ue),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=O,this._showCollisionBoxes=U,this._done=!1}isDone(){return this._done}continuePlacement(f,w,O){const U=A.exported.now(),q=()=>{const ee=A.exported.now()-U;return!this._forceFullPlacement&&ee>2};for(;this._currentPlacementIndex>=0;){const ee=w[f[this._currentPlacementIndex]],se=this.placement.collisionIndex.transform.zoom;if("symbol"===ee.type&&(!ee.minzoom||ee.minzoom<=se)&&(!ee.maxzoom||ee.maxzoom>se)){if(this._inProgressLayer||(this._inProgressLayer=new Op(ee)),this._inProgressLayer.continuePlacement(O[ee.source],this.placement,this._showCollisionBoxes,ee,q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(f){return this.placement.commit(f),this.placement}}const Fp=512/A.EXTENT/2;class uc{constructor(f,w,O){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=O;for(let U=0;U<w.length;U++){const q=w.get(U),ee=q.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:q.crossTileID,coord:this.getScaledCoordinates(q,f)})}}getScaledCoordinates(f,w){const O=Fp/Math.pow(2,w.canonical.z-this.tileID.canonical.z);return{x:Math.floor((w.canonical.x*A.EXTENT+f.anchorX)*O),y:Math.floor((w.canonical.y*A.EXTENT+f.anchorY)*O)}}findMatches(f,w,O){const U=this.tileID.canonical.z<w.canonical.z?1:Math.pow(2,this.tileID.canonical.z-w.canonical.z);for(let q=0;q<f.length;q++){const ee=f.get(q);if(ee.crossTileID)continue;const se=this.indexedSymbolInstances[ee.key];if(!se)continue;const ue=this.getScaledCoordinates(ee,w);for(const fe of se)if(Math.abs(fe.coord.x-ue.x)<=U&&Math.abs(fe.coord.y-ue.y)<=U&&!O[fe.crossTileID]){O[fe.crossTileID]=!0,ee.crossTileID=fe.crossTileID;break}}}}class dr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Lp{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(f){const w=Math.round((f-this.lng)/360);if(0!==w)for(const O in this.indexes){const U=this.indexes[O],q={};for(const ee in U){const se=U[ee];se.tileID=se.tileID.unwrapTo(se.tileID.wrap+w),q[se.tileID.key]=se}this.indexes[O]=q}this.lng=f}addBucket(f,w,O){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===w.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(let q=0;q<w.symbolInstances.length;q++)w.symbolInstances.get(q).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});const U=this.usedCrossTileIDs[f.overscaledZ];for(const q in this.indexes){const ee=this.indexes[q];if(Number(q)>f.overscaledZ)for(const se in ee){const ue=ee[se];ue.tileID.isChildOf(f)&&ue.findMatches(w.symbolInstances,f,U)}else{const se=ee[f.scaledTo(Number(q)).key];se&&se.findMatches(w.symbolInstances,f,U)}}for(let q=0;q<w.symbolInstances.length;q++){const ee=w.symbolInstances.get(q);ee.crossTileID||(ee.crossTileID=O.generate(),U[ee.crossTileID]=!0)}return void 0===this.indexes[f.overscaledZ]&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new uc(f,w.symbolInstances,w.bucketInstanceId),!0}removeBucketCrossTileIDs(f,w){for(const O in w.indexedSymbolInstances)for(const U of w.indexedSymbolInstances[O])delete this.usedCrossTileIDs[f][U.crossTileID]}removeStaleBuckets(f){let w=!1;for(const O in this.indexes){const U=this.indexes[O];for(const q in U)f[U[q].bucketInstanceId]||(this.removeBucketCrossTileIDs(O,U[q]),delete U[q],w=!0)}return w}}class ih{constructor(){this.layerIndexes={},this.crossTileIDs=new dr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(f,w,O){let U=this.layerIndexes[f.id];void 0===U&&(U=this.layerIndexes[f.id]=new Lp);let q=!1;const ee={};U.handleWrapJump(O);for(const se of w){const ue=se.getBucket(f);ue&&f.id===ue.layerIds[0]&&(ue.bucketInstanceId||(ue.bucketInstanceId=++this.maxBucketInstanceId),U.addBucket(se.tileID,ue,this.crossTileIDs)&&(q=!0),ee[ue.bucketInstanceId]=!0)}return U.removeStaleBuckets(ee)&&(q=!0),q}pruneUnusedLayers(f){const w={};f.forEach(O=>{w[O]=!0});for(const O in this.layerIndexes)w[O]||delete this.layerIndexes[O]}}const Ud=(P,f)=>A.emitValidationErrors(P,f&&f.filter(w=>"source.canvas"!==w.identifier)),ul=A.pick(y,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),Jh=A.pick(y,["setCenter","setZoom","setBearing","setPitch"]),ia=function(){const P={},f=A.spec.$version;for(const w in A.spec.$root){const O=A.spec.$root[w];if(O.required){let U=null;U="version"===w?f:"array"===O.type?[]:{},null!=U&&(P[w]=U)}}return P}(),S_={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class zo extends A.Evented{constructor(f,w={}){super(),this.map=f,this.dispatcher=new Yt(ve(),this),this.imageManager=new Vi,this.imageManager.setEventedParent(this),this.glyphManager=new A.GlyphManager(f._requestManager,w.localFontFamily?A.LocalGlyphMode.all:w.localIdeographFontFamily?A.LocalGlyphMode.ideographs:A.LocalGlyphMode.none,w.localFontFamily||w.localIdeographFontFamily),this.lineAtlas=new A.LineAtlas(256,512),this.crossTileSymbolIndex=new ih,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new A.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",A.getReferrer());const O=this;this._rtlTextPluginCallback=zo.registerForPluginStateChange(U=>{O.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:U.pluginStatus,pluginURL:U.pluginURL},(q,ee)=>{if(A.triggerPluginCompletionEvent(q),ee&&ee.every(se=>se))for(const se in O._sourceCaches){const ue=O._sourceCaches[se],fe=ue.getSource().type;"vector"!==fe&&"geojson"!==fe||ue.reload()}})}),this.on("data",U=>{if("source"!==U.dataType||"metadata"!==U.sourceDataType)return;const q=this.getSource(U.sourceId);if(q&&q.vectorLayerIds)for(const ee in this._layers){const se=this._layers[ee];se.source===q.id&&this._validateLayer(se)}})}loadURL(f,w={}){this.fire(new A.Event("dataloading",{dataType:"style"}));const O="boolean"==typeof w.validate?w.validate:!A.isMapboxURL(f);f=this.map._requestManager.normalizeStyleURL(f,w.accessToken);const U=this.map._requestManager.transformRequest(f,A.ResourceType.Style);this._request=A.getJSON(U,(q,ee)=>{this._request=null,q?this.fire(new A.ErrorEvent(q)):ee&&this._load(ee,O)})}loadJSON(f,w={}){this.fire(new A.Event("dataloading",{dataType:"style"})),this._request=A.exported.frame(()=>{this._request=null,this._load(f,!1!==w.validate)})}loadEmpty(){this.fire(new A.Event("dataloading",{dataType:"style"})),this._load(ia,!1)}_updateLayerCount(f,w){const O=w?1:-1;f.is3D()&&(this._num3DLayers+=O),"circle"===f.type&&(this._numCircleLayers+=O),"symbol"===f.type&&(this._numSymbolLayers+=O)}_load(f,w){if(w&&Ud(this,A.validateStyle(f)))return;this._loaded=!0,this.stylesheet=f;for(const U in f.sources)this.addSource(U,f.sources[U],{validate:!1});this._changed=!1,f.sprite?this._loadSprite(f.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(f.glyphs);const O=p(this.stylesheet.layers);this._order=O.map(U=>U.id),this._layers={},this._serializedLayers={};for(let U of O)U=A.createStyleLayer(U),U.setEventedParent(this,{layer:{id:U.id}}),this._layers[U.id]=U,this._serializedLayers[U.id]=U.serialize(),this._updateLayerCount(U,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Di(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new A.Event("data",{dataType:"style"})),this.fire(new A.Event("style.load"))}_loadSprite(f){this._spriteRequest=function(w,O,U){let q,ee,se;const ue=A.exported.devicePixelRatio>1?"@2x":"";let fe=A.getJSON(O.transformRequest(O.normalizeSpriteURL(w,ue,".json"),A.ResourceType.SpriteJSON),(Pe,Ne)=>{fe=null,se||(se=Pe,q=Ne,Ae())}),Ce=A.getImage(O.transformRequest(O.normalizeSpriteURL(w,ue,".png"),A.ResourceType.SpriteImage),(Pe,Ne)=>{Ce=null,se||(se=Pe,ee=Ne,Ae())});function Ae(){if(se)U(se);else if(q&&ee){const Pe=A.exported.getImageData(ee),Ne={};for(const $e in q){const{width:et,height:mt,x:Ue,y:tt,sdf:ot,pixelRatio:vt,stretchX:rt,stretchY:ht,content:Kt}=q[$e],sn=new A.RGBAImage({width:et,height:mt});A.RGBAImage.copy(Pe,sn,{x:Ue,y:tt},{x:0,y:0},{width:et,height:mt}),Ne[$e]={data:sn,pixelRatio:vt,sdf:ot,stretchX:rt,stretchY:ht,content:Kt}}U(null,Ne)}}return{cancel(){fe&&(fe.cancel(),fe=null),Ce&&(Ce.cancel(),Ce=null)}}}(f,this.map._requestManager,(w,O)=>{if(this._spriteRequest=null,w)this.fire(new A.ErrorEvent(w));else if(O)for(const U in O)this.imageManager.addImage(U,O[U]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new A.Event("data",{dataType:"style"}))})}_validateLayer(f){const w=this.getSource(f.source);if(!w)return;const O=f.sourceLayer;O&&("geojson"===w.type||w.vectorLayerIds&&-1===w.vectorLayerIds.indexOf(O))&&this.fire(new A.ErrorEvent(new Error(`Source layer "${O}" does not exist on source "${w.id}" as specified by style layer "${f.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const f in this._sourceCaches)if(!this._sourceCaches[f].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(f){const w=[];for(const O of f){const U=this._layers[O];"custom"!==U.type&&w.push(U.serialize())}return w}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const f in this._sourceCaches)if(this._sourceCaches[f].hasTransition())return!0;for(const f in this._layers)if(this._layers[f].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(f){return!!this.terrain&&S_[f.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(f){if(!this._loaded)return;const w=this._changed;if(this._changed){const U=Object.keys(this._updatedLayers),q=Object.keys(this._removedLayers);(U.length||q.length)&&this._updateWorkerLayers(U,q);for(const ee in this._updatedSources){const se=this._updatedSources[ee];"reload"===se?this._reloadSource(ee):"clear"===se&&this._clearSource(ee)}this._updateTilesForChangedImages();for(const ee in this._updatedPaintProps)this._layers[ee].updateTransitions(f);this.light.updateTransitions(f),this.fog&&this.fog.updateTransitions(f),this._resetUpdates()}const O={};for(const U in this._sourceCaches){const q=this._sourceCaches[U];O[U]=q.used,q.used=!1}for(const U of this._order){const q=this._layers[U];if(q.recalculate(f,this._availableImages),!q.isHidden(f.zoom)){const se=this._getLayerSourceCache(q);se&&(se.used=!0)}const ee=this.map.painter;if(ee){const se=q.getProgramIds();if(!se)continue;const ue=q.getProgramConfiguration(f.zoom);for(const fe of se)ee.useProgram(fe,ue)}}for(const U in O){const q=this._sourceCaches[U];O[U]!==q.used&&q.getSource().fire(new A.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:q.getSource().id}))}this.light.recalculate(f),this.terrain&&this.terrain.recalculate(f),this.fog&&this.fog.recalculate(f),this.z=f.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),w&&this.fire(new A.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const f=Object.keys(this._changedImages);if(f.length){for(const w in this._sourceCaches)this._sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],f);this._changedImages={}}}_updateWorkerLayers(f,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(f),removedIds:w})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(f){if(this._checkLoaded(),Ud(this,A.validateStyle(f)))return!1;(f=A.clone$2(f)).layers=p(f.layers);const w=function(U,q){if(!U)return[{command:y.setStyle,args:[q]}];let ee=[];try{if(!Be(U.version,q.version))return[{command:y.setStyle,args:[q]}];Be(U.center,q.center)||ee.push({command:y.setCenter,args:[q.center]}),Be(U.zoom,q.zoom)||ee.push({command:y.setZoom,args:[q.zoom]}),Be(U.bearing,q.bearing)||ee.push({command:y.setBearing,args:[q.bearing]}),Be(U.pitch,q.pitch)||ee.push({command:y.setPitch,args:[q.pitch]}),Be(U.sprite,q.sprite)||ee.push({command:y.setSprite,args:[q.sprite]}),Be(U.glyphs,q.glyphs)||ee.push({command:y.setGlyphs,args:[q.glyphs]}),Be(U.transition,q.transition)||ee.push({command:y.setTransition,args:[q.transition]}),Be(U.light,q.light)||ee.push({command:y.setLight,args:[q.light]}),Be(U.fog,q.fog)||ee.push({command:y.setFog,args:[q.fog]});const se={},ue=[];!function(Ae,Pe,Ne,$e){let et;for(et in Pe=Pe||{},Ae=Ae||{})Ae.hasOwnProperty(et)&&(Pe.hasOwnProperty(et)||M(et,Ne,$e));for(et in Pe)Pe.hasOwnProperty(et)&&(Ae.hasOwnProperty(et)?Be(Ae[et],Pe[et])||("geojson"===Ae[et].type&&"geojson"===Pe[et].type&&R(Ae,Pe,et)?Ne.push({command:y.setGeoJSONSourceData,args:[et,Pe[et].data]}):L(et,Pe,Ne,$e)):C(et,Pe,Ne))}(U.sources,q.sources,ue,se);const fe=[];U.layers&&U.layers.forEach(Ae=>{se[Ae.source]?ee.push({command:y.removeLayer,args:[Ae.id]}):fe.push(Ae)});let Ce=U.terrain;Ce&&se[Ce.source]&&(ee.push({command:y.setTerrain,args:[void 0]}),Ce=void 0),ee=ee.concat(ue),Be(Ce,q.terrain)||ee.push({command:y.setTerrain,args:[q.terrain]}),function(Ae,Pe,Ne){Pe=Pe||[];const $e=(Ae=Ae||[]).map(G),et=Pe.map(G),mt=Ae.reduce(J,{}),Ue=Pe.reduce(J,{}),tt=$e.slice(),ot=Object.create(null);let vt,rt,ht,Kt,sn,un,ut;for(vt=0,rt=0;vt<$e.length;vt++)ht=$e[vt],Ue.hasOwnProperty(ht)?rt++:(Ne.push({command:y.removeLayer,args:[ht]}),tt.splice(tt.indexOf(ht,rt),1));for(vt=0,rt=0;vt<et.length;vt++)ht=et[et.length-1-vt],tt[tt.length-1-vt]!==ht&&(mt.hasOwnProperty(ht)?(Ne.push({command:y.removeLayer,args:[ht]}),tt.splice(tt.lastIndexOf(ht,tt.length-rt),1)):rt++,un=tt[tt.length-vt],Ne.push({command:y.addLayer,args:[Ue[ht],un]}),tt.splice(tt.length-vt,0,ht),ot[ht]=!0);for(vt=0;vt<et.length;vt++)if(ht=et[vt],Kt=mt[ht],sn=Ue[ht],!ot[ht]&&!Be(Kt,sn))if(Be(Kt.source,sn.source)&&Be(Kt["source-layer"],sn["source-layer"])&&Be(Kt.type,sn.type)){for(ut in H(Kt.layout,sn.layout,Ne,ht,null,y.setLayoutProperty),H(Kt.paint,sn.paint,Ne,ht,null,y.setPaintProperty),Be(Kt.filter,sn.filter)||Ne.push({command:y.setFilter,args:[ht,sn.filter]}),Be(Kt.minzoom,sn.minzoom)&&Be(Kt.maxzoom,sn.maxzoom)||Ne.push({command:y.setLayerZoomRange,args:[ht,sn.minzoom,sn.maxzoom]}),Kt)Kt.hasOwnProperty(ut)&&"layout"!==ut&&"paint"!==ut&&"filter"!==ut&&"metadata"!==ut&&"minzoom"!==ut&&"maxzoom"!==ut&&(0===ut.indexOf("paint.")?H(Kt[ut],sn[ut],Ne,ht,ut.slice(6),y.setPaintProperty):Be(Kt[ut],sn[ut])||Ne.push({command:y.setLayerProperty,args:[ht,ut,sn[ut]]}));for(ut in sn)sn.hasOwnProperty(ut)&&!Kt.hasOwnProperty(ut)&&"layout"!==ut&&"paint"!==ut&&"filter"!==ut&&"metadata"!==ut&&"minzoom"!==ut&&"maxzoom"!==ut&&(0===ut.indexOf("paint.")?H(Kt[ut],sn[ut],Ne,ht,ut.slice(6),y.setPaintProperty):Be(Kt[ut],sn[ut])||Ne.push({command:y.setLayerProperty,args:[ht,ut,sn[ut]]}))}else Ne.push({command:y.removeLayer,args:[ht]}),un=tt[tt.lastIndexOf(ht)+1],Ne.push({command:y.addLayer,args:[sn,un]})}(fe,q.layers,ee)}catch(se){console.warn("Unable to compute style diff:",se),ee=[{command:y.setStyle,args:[q]}]}return ee}(this.serialize(),f).filter(U=>!(U.command in Jh));if(0===w.length)return!1;const O=w.filter(U=>!(U.command in ul));if(O.length>0)throw new Error(`Unimplemented: ${O.map(U=>U.command).join(", ")}.`);return w.forEach(U=>{"setTransition"!==U.command&&this[U.command].apply(this,U.args)}),this.stylesheet=f,!0}addImage(f,w){if(this.getImage(f))return this.fire(new A.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(f,w),this._afterImageUpdated(f)}updateImage(f,w){this.imageManager.updateImage(f,w)}getImage(f){return this.imageManager.getImage(f)}removeImage(f){if(!this.getImage(f))return this.fire(new A.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(f),this._afterImageUpdated(f)}_afterImageUpdated(f){this._availableImages=this.imageManager.listImages(),this._changedImages[f]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new A.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(f,w,O={}){if(this._checkLoaded(),void 0!==this.getSource(f))throw new Error("There is already a source with this ID");if(!w.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(w).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(w.type)>=0&&this._validate(A.validateStyle.source,`sources.${f}`,w,null,O))return;this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);const U=De(f,w,this.dispatcher,this);U.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:U.serialize(),sourceId:f}));const q=ee=>{const se=(ee?"symbol:":"other:")+f,ue=this._sourceCaches[se]=new A.SourceCache(se,U,ee);(ee?this._symbolSourceCaches:this._otherSourceCaches)[f]=ue,ue.style=this,ue.onAdd(this.map)};q(!1),"vector"!==w.type&&"geojson"!==w.type||q(!0),U.onAdd&&U.onAdd(this.map),this._changed=!0}removeSource(f){this._checkLoaded();const w=this.getSource(f);if(void 0===w)throw new Error("There is no source with this ID");for(const U in this._layers)if(this._layers[U].source===f)return this.fire(new A.ErrorEvent(new Error(`Source "${f}" cannot be removed while layer "${U}" is using it.`)));if(this.terrain&&this.terrain.get().source===f)return this.fire(new A.ErrorEvent(new Error(`Source "${f}" cannot be removed while terrain is using it.`)));const O=this._getSourceCaches(f);for(const U of O)delete this._sourceCaches[U.id],delete this._updatedSources[U.id],U.fire(new A.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:U.getSource().id})),U.setEventedParent(null),U.clearTiles();delete this._otherSourceCaches[f],delete this._symbolSourceCaches[f],w.setEventedParent(null),w.onRemove&&w.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(f,w){this._checkLoaded(),this.getSource(f).setData(w),this._changed=!0}getSource(f){const w=this._getSourceCache(f);return w&&w.getSource()}addLayer(f,w,O={}){this._checkLoaded();const U=f.id;if(this.getLayer(U))return void this.fire(new A.ErrorEvent(new Error(`Layer with id "${U}" already exists on this map`)));let q;if("custom"===f.type){if(Ud(this,A.validateCustomStyleLayer(f)))return;q=A.createStyleLayer(f)}else{if("object"==typeof f.source&&(this.addSource(U,f.source),f=A.clone$2(f),f=A.extend(f,{source:U})),this._validate(A.validateStyle.layer,`layers.${U}`,f,{arrayIndex:-1},O))return;q=A.createStyleLayer(f),this._validateLayer(q),q.setEventedParent(this,{layer:{id:U}}),this._serializedLayers[q.id]=q.serialize(),this._updateLayerCount(q,!0)}const ee=w?this._order.indexOf(w):this._order.length;if(w&&-1===ee)return void this.fire(new A.ErrorEvent(new Error(`Layer with id "${w}" does not exist on this map.`)));this._order.splice(ee,0,U),this._layerOrderChanged=!0,this._layers[U]=q;const se=this._getLayerSourceCache(q);if(this._removedLayers[U]&&q.source&&se&&"custom"!==q.type){const ue=this._removedLayers[U];delete this._removedLayers[U],ue.type!==q.type?this._updatedSources[q.source]="clear":(this._updatedSources[q.source]="reload",se.pause())}this._updateLayer(q),q.onAdd&&q.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(f,w){if(this._checkLoaded(),this._changed=!0,!this._layers[f])return void this.fire(new A.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be moved.`)));if(f===w)return;const O=this._order.indexOf(f);this._order.splice(O,1);const U=w?this._order.indexOf(w):this._order.length;w&&-1===U?this.fire(new A.ErrorEvent(new Error(`Layer with id "${w}" does not exist on this map.`))):(this._order.splice(U,0,f),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(f){this._checkLoaded();const w=this._layers[f];if(!w)return void this.fire(new A.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be removed.`)));w.setEventedParent(null),this._updateLayerCount(w,!1);const O=this._order.indexOf(f);this._order.splice(O,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[f]=w,delete this._layers[f],delete this._serializedLayers[f],delete this._updatedLayers[f],delete this._updatedPaintProps[f],w.onRemove&&w.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(f){return this._layers[f]}hasLayer(f){return f in this._layers}hasLayerType(f){for(const w in this._layers)if(this._layers[w].type===f)return!0;return!1}setLayerZoomRange(f,w,O){this._checkLoaded();const U=this.getLayer(f);U?U.minzoom===w&&U.maxzoom===O||(null!=w&&(U.minzoom=w),null!=O&&(U.maxzoom=O),this._updateLayer(U)):this.fire(new A.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(f,w,O={}){this._checkLoaded();const U=this.getLayer(f);if(U){if(!Be(U.filter,w))return null==w?(U.filter=void 0,void this._updateLayer(U)):void(this._validate(A.validateStyle.filter,`layers.${U.id}.filter`,w,null,O)||(U.filter=A.clone$2(w),this._updateLayer(U)))}else this.fire(new A.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be filtered.`)))}getFilter(f){return A.clone$2(this.getLayer(f).filter)}setLayoutProperty(f,w,O,U={}){this._checkLoaded();const q=this.getLayer(f);q?Be(q.getLayoutProperty(w),O)||(q.setLayoutProperty(w,O,U),this._updateLayer(q)):this.fire(new A.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(f,w){const O=this.getLayer(f);if(O)return O.getLayoutProperty(w);this.fire(new A.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style.`)))}setPaintProperty(f,w,O,U={}){this._checkLoaded();const q=this.getLayer(f);q?Be(q.getPaintProperty(w),O)||(q.setPaintProperty(w,O,U)&&this._updateLayer(q),this._changed=!0,this._updatedPaintProps[f]=!0):this.fire(new A.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(f,w){return this.getLayer(f).getPaintProperty(w)}setFeatureState(f,w){this._checkLoaded();const O=f.source,U=f.sourceLayer,q=this.getSource(O);if(void 0===q)return void this.fire(new A.ErrorEvent(new Error(`The source '${O}' does not exist in the map's style.`)));const ee=q.type;if("geojson"===ee&&U)return void this.fire(new A.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===ee&&!U)return void this.fire(new A.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===f.id&&this.fire(new A.ErrorEvent(new Error("The feature id parameter must be provided.")));const se=this._getSourceCaches(O);for(const ue of se)ue.setFeatureState(U,f.id,w)}removeFeatureState(f,w){this._checkLoaded();const O=f.source,U=this.getSource(O);if(void 0===U)return void this.fire(new A.ErrorEvent(new Error(`The source '${O}' does not exist in the map's style.`)));const q=U.type,ee="vector"===q?f.sourceLayer:void 0;if("vector"===q&&!ee)return void this.fire(new A.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(w&&"string"!=typeof f.id&&"number"!=typeof f.id)return void this.fire(new A.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const se=this._getSourceCaches(O);for(const ue of se)ue.removeFeatureState(ee,f.id,w)}getFeatureState(f){this._checkLoaded();const w=f.source,O=f.sourceLayer,U=this.getSource(w);if(void 0!==U){if("vector"!==U.type||O)return void 0===f.id&&this.fire(new A.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(w)[0].getFeatureState(O,f.id);this.fire(new A.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new A.ErrorEvent(new Error(`The source '${w}' does not exist in the map's style.`)))}getTransition(){return A.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const f={};for(const w in this._sourceCaches){const O=this._sourceCaches[w].getSource();f[O.id]||(f[O.id]=O.serialize())}return A.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:f,layers:this._serializeLayers(this._order)},w=>void 0!==w)}_updateLayer(f){this._updatedLayers[f.id]=!0;const w=this._getLayerSourceCache(f);f.source&&!this._updatedSources[f.source]&&w&&"raster"!==w.getSource().type&&(this._updatedSources[f.source]="reload",w.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(f){const w=ee=>"fill-extrusion"===this._layers[ee].type,O={},U=[];for(let ee=this._order.length-1;ee>=0;ee--){const se=this._order[ee];if(w(se)){O[se]=ee;for(const ue of f){const fe=ue[se];if(fe)for(const Ce of fe)U.push(Ce)}}}U.sort((ee,se)=>se.intersectionZ-ee.intersectionZ);const q=[];for(let ee=this._order.length-1;ee>=0;ee--){const se=this._order[ee];if(w(se))for(let ue=U.length-1;ue>=0;ue--){const fe=U[ue].feature;if(O[fe.layer.id]<ee)break;q.push(fe),U.pop()}else for(const ue of f){const fe=ue[se];if(fe)for(const Ce of fe)q.push(Ce.feature)}}return q}queryRenderedFeatures(f,w,O){w&&w.filter&&this._validate(A.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);const U={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new A.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ue of w.layers){const fe=this._layers[ue];if(!fe)return this.fire(new A.ErrorEvent(new Error(`The layer '${ue}' does not exist in the map's style and cannot be queried for features.`))),[];U[fe.source]=!0}}const q=[];w.availableImages=this._availableImages;const ee=w&&w.layers?w.layers.some(ue=>{const fe=this.getLayer(ue);return fe&&fe.is3D()}):this.has3DLayers(),se=hi.createFromScreenPoints(f,O);for(const ue in this._sourceCaches){const fe=this._sourceCaches[ue].getSource().id;w.layers&&!U[fe]||q.push(it(this._sourceCaches[ue],this._layers,this._serializedLayers,se,w,O,ee,!!this.map._showQueryGeometry))}return this.placement&&q.push(function(ue,fe,Ce,Ae,Pe,Ne,$e){const et={},mt=Ne.queryRenderedSymbols(Ae),Ue=[];for(const tt of Object.keys(mt).map(Number))Ue.push($e[tt]);Ue.sort(Ot);for(const tt of Ue){const ot=tt.featureIndex.lookupSymbolFeatures(mt[tt.bucketInstanceId],fe,tt.bucketIndex,tt.sourceLayerIndex,Pe.filter,Pe.layers,Pe.availableImages,ue);for(const vt in ot){const rt=et[vt]=et[vt]||[],ht=ot[vt];ht.sort((Kt,sn)=>{const un=tt.featureSortOrder;if(un){const ut=un.indexOf(Kt.featureIndex);return un.indexOf(sn.featureIndex)-ut}return sn.featureIndex-Kt.featureIndex});for(const Kt of ht)rt.push(Kt)}}for(const tt in et)et[tt].forEach(ot=>{const vt=ot.feature,rt=Ce(ue[tt]).getFeatureState(vt.layer["source-layer"],vt.id);vt.source=vt.layer.source,vt.layer["source-layer"]&&(vt.sourceLayer=vt.layer["source-layer"]),vt.state=rt});return et}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),se.screenGeometry,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(q)}querySourceFeatures(f,w){w&&w.filter&&this._validate(A.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);const O=this._getSourceCaches(f);let U=[];for(const q of O)U=U.concat(yt(q,w));return U}addSourceType(f,w,O){return zo.getSourceType(f)?O(new Error(`A source type called "${f}" already exists.`)):(zo.setSourceType(f,w),w.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:w.workerSourceURL},O):O(null,null))}getLight(){return this.light.getLight()}setLight(f,w={}){this._checkLoaded();const O=this.light.getLight();let U=!1;for(const ee in f)if(!Be(f[ee],O[ee])){U=!0;break}if(!U)return;const q={now:A.exported.now(),transition:A.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(f,w),this.light.updateTransitions(q)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(f){if(this._checkLoaded(),!f)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof f.source){const w="terrain-dem-src";this.addSource(w,f.source),f=A.clone$2(f),f=A.extend(f,{source:w})}if(!this._validate(A.validateStyle.terrain,"terrain",f)){if(this.terrain){const w=this.terrain,O=w.get();for(const U in f)if(!Be(f[U],O[U])){w.set(f),this.stylesheet.terrain=f;const q={now:A.exported.now(),transition:A.extend({duration:0},this.stylesheet.transition)};w.updateTransitions(q);break}}else this._createTerrain(f);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(f){const w=this.fog=new fn(f);this.stylesheet.fog=f;const O={now:A.exported.now(),transition:A.extend({duration:0},this.stylesheet.transition)};w.updateTransitions(O)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const f of this.map._markers)f._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(f){if(this._checkLoaded(),!f)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const w=this.fog,O=w.get();for(const U in f)if(!Be(f[U],O[U])){w.set(f),this.stylesheet.fog=f;const q={now:A.exported.now(),transition:A.extend({duration:0},this.stylesheet.transition)};w.updateTransitions(q);break}}else this._createFog(f);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const f=this._order.filter(O=>this.isLayerDraped(this._layers[O])),w=this._order.filter(O=>!this.isLayerDraped(this._layers[O]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...f),this._drapedFirstOrder.push(...w)}_createTerrain(f){const w=this.terrain=new Ki(f);this.stylesheet.terrain=f,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const O={now:A.exported.now(),transition:A.extend({duration:0},this.stylesheet.transition)};w.updateTransitions(O)}_force3DLayerUpdate(){for(const f in this._layers){const w=this._layers[f];"fill-extrusion"===w.type&&this._updateLayer(w)}}_validate(f,w,O,U,q={}){return(!q||!1!==q.validate)&&Ud(this,f.call(A.validateStyle,A.extend({key:w,style:this.serialize(),value:O,styleSpec:A.spec},U)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),A.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this._sourceCaches)this._sourceCaches[f].clearTiles(),this._sourceCaches[f].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(f){const w=this._getSourceCaches(f);for(const O of w)O.clearTiles()}_reloadSource(f){const w=this._getSourceCaches(f);for(const O of w)O.resume(),O.reload()}_updateSources(f){for(const w in this._sourceCaches)this._sourceCaches[w].update(f)}_generateCollisionBoxes(){for(const f in this._sourceCaches){const w=this._sourceCaches[f];w.resume(),w.reload()}}_updatePlacement(f,w,O,U,q=!1){let ee=!1,se=!1;const ue={};for(const fe of this._order){const Ce=this._layers[fe];if("symbol"!==Ce.type)continue;if(!ue[Ce.source]){const Pe=this._getLayerSourceCache(Ce);if(!Pe)continue;ue[Ce.source]=Pe.getRenderableIds(!0).map(Ne=>Pe.getTileByID(Ne)).sort((Ne,$e)=>$e.tileID.overscaledZ-Ne.tileID.overscaledZ||(Ne.tileID.isLessThan($e.tileID)?-1:1))}const Ae=this.crossTileSymbolIndex.addLayer(Ce,ue[Ce.source],f.center.lng);ee=ee||Ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),q=q||this._layerOrderChanged||0===O,this._layerOrderChanged&&this.fire(new A.Event("neworder")),(q||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.exported.now(),f.zoom))&&(this.pauseablePlacement=new vu(f,this._order,q,w,O,U,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ue),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.exported.now()),se=!0),ee&&this.pauseablePlacement.placement.setStale()),se||ee)for(const fe of this._order){const Ce=this._layers[fe];"symbol"===Ce.type&&this.placement.updateLayerOpacities(Ce,ue[Ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.exported.now())}_releaseSymbolFadeTiles(){for(const f in this._sourceCaches)this._sourceCaches[f].releaseSymbolFadeTiles()}getImages(f,w,O){this.imageManager.getImages(w.icons,O),this._updateTilesForChangedImages();const U=q=>{q&&q.setDependencies(w.tileID.key,w.type,w.icons)};U(this._otherSourceCaches[w.source]),U(this._symbolSourceCaches[w.source])}getGlyphs(f,w,O){this.glyphManager.getGlyphs(w.stacks,O)}getResource(f,w,O){return A.makeRequest(w,O)}_getSourceCache(f){return this._otherSourceCaches[f]}_getLayerSourceCache(f){return"symbol"===f.type?this._symbolSourceCaches[f.source]:this._otherSourceCaches[f.source]}_getSourceCaches(f){const w=[];return this._otherSourceCaches[f]&&w.push(this._otherSourceCaches[f]),this._symbolSourceCaches[f]&&w.push(this._symbolSourceCaches[f]),w}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}zo.getSourceType=function(P){return we[P]},zo.setSourceType=function(P,f){we[P]=f},zo.registerForPluginStateChange=A.registerForPluginStateChange;var Hd="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",hl="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let bu={},sr={};bu=Zi("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),sr=Zi("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const dl=Zi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),rh=Hd;var oh={background:Zi("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Zi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Zi("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Zi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec3 pos=vec3(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)));gl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Zi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Zi("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:Zi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Zi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Zi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Zi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Zi("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);gl_Position=u_matrix*vec4(pos,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Zi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);\n#else\nvec3 p=vec3(pos_nx.xy,z);gl_Position=u_matrix*vec4(p,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Zi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Zi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineGradient:Zi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Zi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineSDF:Zi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);v_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Zi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Zi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:Zi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Zi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:Zi("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:Zi("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Zi("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",hl),skyboxGradient:Zi("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",hl),skyboxCapture:Zi("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}")};function Zi(P,f,w){const O=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,U=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,q=f.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),ee=P.match(U),se=f.match(U),ue=Hd.match(U);let fe=se?se.concat(ee):ee;w||(bu.staticUniforms&&(fe=bu.staticUniforms.concat(fe)),sr.staticUniforms&&(fe=sr.staticUniforms.concat(fe))),fe&&(fe=fe.concat(ue));const Ce={};return{fragmentSource:P=P.replace(O,(Ae,Pe,Ne,$e,et)=>(Ce[et]=!0,"define"===Pe?`\n#ifndef HAS_UNIFORM_u_${et}\nvarying ${Ne} ${$e} ${et};\n#else\nuniform ${Ne} ${$e} u_${et};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${et}\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`)),vertexSource:f=f.replace(O,(Ae,Pe,Ne,$e,et)=>{const mt="float"===$e?"vec2":"vec4",Ue=et.match(/color/)?"color":mt;return Ce[et]?"define"===Pe?`\n#ifndef HAS_UNIFORM_u_${et}\nuniform lowp float u_${et}_t;\nattribute ${Ne} ${mt} a_${et};\nvarying ${Ne} ${$e} ${et};\n#else\nuniform ${Ne} ${$e} u_${et};\n#endif\n`:"vec4"===Ue?`\n#ifndef HAS_UNIFORM_u_${et}\n    ${et} = a_${et};\n#else\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${et}\n    ${et} = unpack_mix_${Ue}(a_${et}, u_${et}_t);\n#else\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`:"define"===Pe?`\n#ifndef HAS_UNIFORM_u_${et}\nuniform lowp float u_${et}_t;\nattribute ${Ne} ${mt} a_${et};\n#else\nuniform ${Ne} ${$e} u_${et};\n#endif\n`:"vec4"===Ue?`\n#ifndef HAS_UNIFORM_u_${et}\n    ${Ne} ${$e} ${et} = a_${et};\n#else\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${et}\n    ${Ne} ${$e} ${et} = unpack_mix_${Ue}(a_${et}, u_${et}_t);\n#else\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`}),staticAttributes:q,staticUniforms:fe}}class sh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(f,w,O,U,q,ee,se,ue){this.context=f;let fe=this.boundPaintVertexBuffers.length!==U.length;for(let Ce=0;!fe&&Ce<U.length;Ce++)this.boundPaintVertexBuffers[Ce]!==U[Ce]&&(fe=!0);f.extVertexArrayObject&&this.vao&&this.boundProgram===w&&this.boundLayoutVertexBuffer===O&&!fe&&this.boundIndexBuffer===q&&this.boundVertexOffset===ee&&this.boundDynamicVertexBuffer===se&&this.boundDynamicVertexBuffer2===ue?(f.bindVertexArrayOES.set(this.vao),se&&se.bind(),q&&q.dynamicDraw&&q.bind(),ue&&ue.bind()):this.freshBind(w,O,U,q,ee,se,ue)}freshBind(f,w,O,U,q,ee,se){let ue;const fe=f.numAttributes,Ce=this.context,Ae=Ce.gl;if(Ce.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ce.extVertexArrayObject.createVertexArrayOES(),Ce.bindVertexArrayOES.set(this.vao),ue=0,this.boundProgram=f,this.boundLayoutVertexBuffer=w,this.boundPaintVertexBuffers=O,this.boundIndexBuffer=U,this.boundVertexOffset=q,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=se;else{ue=Ce.currentNumAttributes||0;for(let Pe=fe;Pe<ue;Pe++)Ae.disableVertexAttribArray(Pe)}w.enableAttributes(Ae,f);for(const Pe of O)Pe.enableAttributes(Ae,f);ee&&ee.enableAttributes(Ae,f),se&&se.enableAttributes(Ae,f),w.bind(),w.setVertexAttribPointers(Ae,f,q);for(const Pe of O)Pe.bind(),Pe.setVertexAttribPointers(Ae,f,q);ee&&(ee.bind(),ee.setVertexAttribPointers(Ae,f,q)),U&&U.bind(),se&&(se.bind(),se.setVertexAttribPointers(Ae,f,q)),Ce.currentNumAttributes=fe}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ah(P,f){const w=Math.pow(2,f.canonical.z),O=f.canonical.y;return[new A.MercatorCoordinate(0,O/w).toLngLat().lat,new A.MercatorCoordinate(0,(O+1)/w).toLngLat().lat]}function Gd(P,f,w,O,U,q,ee){const se=P.context,ue=se.gl,fe=w.fbo;if(!fe)return;P.prepareDrawTile(f);const Ce=P.useProgram("hillshade");se.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,fe.colorAttachment.get());const Ae=((Pe,Ne,$e,et)=>{const mt=$e.paint.get("hillshade-shadow-color"),Ue=$e.paint.get("hillshade-highlight-color"),tt=$e.paint.get("hillshade-accent-color");let ot=$e.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===$e.paint.get("hillshade-illumination-anchor")&&(ot-=Pe.transform.angle);const vt=!Pe.options.moving;return{u_matrix:et||Pe.transform.calculateProjMatrix(Ne.tileID.toUnwrapped(),vt),u_image:0,u_latrange:ah(0,Ne.tileID),u_light:[$e.paint.get("hillshade-exaggeration"),ot],u_shadow:mt,u_highlight:Ue,u_accent:tt}})(P,w,O,P.terrain?f.projMatrix:null);P.prepareDrawProgram(se,Ce,f.toUnwrapped()),Ce.draw(se,ue.TRIANGLES,U,q,ee,A.CullFaceMode.disabled,Ae,O.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}function jd(P,f,w){if(!f.needsDEMTextureUpload)return;const O=P.context,U=O.gl;O.pixelStoreUnpackPremultiplyAlpha.set(!1),f.demTexture=f.demTexture||P.getTileTexture(w.stride);const q=w.getPixels();f.demTexture?f.demTexture.update(q,{premultiply:!1}):f.demTexture=new A.Texture(O,q,U.RGBA,{premultiply:!1}),f.needsDEMTextureUpload=!1}function Hs(P,f,w,O,U,q){const ee=P.context,se=ee.gl;if(!f.dem)return;const ue=f.dem;if(ee.activeTexture.set(se.TEXTURE1),jd(P,f,ue),!f.demTexture)return;f.demTexture.bind(se.NEAREST,se.CLAMP_TO_EDGE);const fe=ue.dim;ee.activeTexture.set(se.TEXTURE0);let Ce=f.fbo;if(!Ce){const Ae=new A.Texture(ee,{width:fe,height:fe,data:null},se.RGBA);Ae.bind(se.LINEAR,se.CLAMP_TO_EDGE),Ce=f.fbo=ee.createFramebuffer(fe,fe,!0),Ce.colorAttachment.set(Ae.texture)}ee.bindFramebuffer.set(Ce.framebuffer),ee.viewport.set([0,0,fe,fe]),P.useProgram("hillshadePrepare").draw(ee,se.TRIANGLES,O,U,q,A.CullFaceMode.disabled,((Ae,Pe)=>{const Ne=Pe.stride,$e=A.create$1();return A.ortho($e,0,A.EXTENT,-A.EXTENT,0,0,1),A.translate($e,$e,[0,-A.EXTENT,0]),{u_matrix:$e,u_image:1,u_dimension:[Ne,Ne],u_zoom:Ae.overscaledZ,u_unpack:Pe.unpackVector}})(f.tileID,ue),w.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments),f.needsHillshadePrepare=!1}const ui=(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_image0:new A.Uniform1i(P,f.u_image0),u_skirt_height:new A.Uniform1f(P,f.u_skirt_height)}),lh=(P,f)=>({u_matrix:P,u_image0:0,u_skirt_height:f}),xu=new class{constructor(){this.operations={}}newMorphing(P,f,w,O,U){if(P in this.operations){const q=this.operations[P];q.to.tileID.key!==w.tileID.key&&(q.queued=w)}else this.operations[P]={startTime:O,phase:0,duration:U,from:f,to:w,queued:null}}getMorphValuesForProxy(P){if(!(P in this.operations))return null;const f=this.operations[P];return{from:f.from,to:f.to,phase:f.phase}}update(P){for(const f in this.operations){const w=this.operations[f];for(w.phase=(P-w.startTime)/w.duration;w.phase>=1||!this._validOp(w);)if(!this._nextOp(w,P)){delete this.operations[f];break}}}_nextOp(P,f){return!!P.queued&&(P.from=P.to,P.to=P.queued,P.queued=null,P.phase=0,P.startTime=f,!0)}_validOp(P){return P.from.hasData()&&P.to.hasData()}},ch={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Kh(P,f){const w=1<<P.z;return!f&&(0===P.x||P.x===w-1)||0===P.y||P.y===w-1}const Bl=P=>({u_matrix:P});function Xr(P,f,w,O,U){if(U>0){const q=A.exported.now(),ee=(q-P.timeAdded)/U,se=f?(q-f.timeAdded)/U:-1,ue=w.getSource(),fe=O.coveringZoomLevel({tileSize:ue.tileSize,roundZoom:ue.roundZoom}),Ce=!f||Math.abs(f.tileID.overscaledZ-fe)>Math.abs(P.tileID.overscaledZ-fe),Ae=Ce&&P.refreshedUponExpiration?1:A.clamp(Ce?ee:1-se,0,1);return P.refreshedUponExpiration&&ee>=1&&(P.refreshedUponExpiration=!1),f?{opacity:1,mix:1-Ae}:{opacity:Ae,mix:0}}return{opacity:1,mix:0}}class uh extends A.SourceCache{constructor(f){const w=De("proxy",{type:"geojson",maxzoom:f.transform.maxZoom},new Yt(ve(),null),f.style);super("proxy",w,!1),w.setEventedParent(this),this.map=this.getSource().map=f,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(f,w,O){if(f.freezeTileCoverage)return;this.transform=f;const U=f.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((q,ee)=>{if(q[ee.key]="",!this._tiles[ee.key]){const se=new A.Tile(ee,this._source.tileSize*ee.overscaleFactor(),f.tileZoom);se.state="loaded",this._tiles[ee.key]=se}return q},{});for(const q in this._tiles)q in U||(this.freeFBO(q),this._tiles[q].state="unloaded",delete this._tiles[q])}freeFBO(f){const w=this.proxyCachedFBO[f];if(void 0!==w){const O=Object.values(w);this.renderCachePool.push(...O),delete this.proxyCachedFBO[f]}}deallocRenderCache(){this.renderCache.forEach(f=>f.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ii extends A.OverscaledTileID{constructor(f,w,O){super(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y),this.proxyTileKey=w,this.projMatrix=O}}class Np extends A.Elevation{constructor(f,w){super(),this.painter=f,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[O,U,q]=function(ue){const fe=new A.StructArrayLayout4i8,Ce=new A.StructArrayLayout3ui6;fe.reserve(17161),Ce.reserve(33800);const Pe=A.EXTENT/128,Ne=A.EXTENT+Pe/2,$e=Ne+Pe;for(let mt=-Pe;mt<$e;mt+=Pe)for(let Ue=-Pe;Ue<$e;Ue+=Pe){const tt=Ue<0||Ue>Ne||mt<0||mt>Ne?24575:0,ot=A.clamp(Math.round(Ue),0,A.EXTENT),vt=A.clamp(Math.round(mt),0,A.EXTENT);fe.emplaceBack(ot+tt,vt,ot,vt)}const et=(mt,Ue)=>{const tt=131*Ue+mt;Ce.emplaceBack(tt+1,tt,tt+131),Ce.emplaceBack(tt+131,tt+131+1,tt+1)};for(let mt=1;mt<129;mt++)for(let Ue=1;Ue<129;Ue++)et(Ue,mt);return[0,129].forEach(mt=>{for(let Ue=0;Ue<130;Ue++)et(Ue,mt),et(mt,Ue)}),[fe,Ce,32768]}(),ee=f.context;this.gridBuffer=ee.createVertexBuffer(O,er.members),this.gridIndexBuffer=ee.createIndexBuffer(U),this.gridSegments=A.SegmentVector.simpleSegment(0,0,O.length,U.length),this.gridNoSkirtSegments=A.SegmentVector.simpleSegment(0,0,O.length,q),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new uh(w.map),this.orthoMatrix=A.create$1(),A.ortho(this.orthoMatrix,0,A.EXTENT,0,A.EXTENT,0,1);const se=ee.gl;this._overlapStencilMode=new A.StencilMode({func:se.GEQUAL,mask:255},0,255,se.KEEP,se.KEEP,se.REPLACE),this._previousZoom=f.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=w,this._useVertexMorphing=!0,this._exaggeration=1}set style(f){f.on("data",this._onStyleDataEvent.bind(this)),f.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=f,this._checkRenderCacheEfficiency()}update(f,w,O){if(f&&f.terrain){this._style!==f&&(this.style=f),this.enabled=!0;const U=f.terrain.properties;this.sourceCache=f._getSourceCache(U.get("source")),this._exaggeration=U.get("exaggeration");const q=()=>{this.sourceCache.used&&A.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const ee=this.sourceCache.getSource().tileSize/128,se=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(w,ee*se,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,q(),this._initializing=!0),q(),w.updateElevation(!O),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(w),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const f=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==f.efficiency&&A.warnOnce(`Terrain render cache efficiency is not optimal (${f.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${f.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(f){f.coord&&"source"===f.dataType?this._clearRenderCacheForTile(f.sourceCacheId,f.coord):"style"===f.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const f in this._style._sourceCaches)this._style._sourceCaches[f].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(f=>f.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const f=2*this.proxySourceCache.getSource().tileSize;return[f,f]}set useVertexMorphing(f){this._useVertexMorphing=f}updateTileBinding(f){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const w=this.proxySourceCache,O=this.painter.transform;this._initializing&&(this._initializing=0===O._centerAltitude&&-1===this.getAtPointOrZero(A.MercatorCoordinate.fromLngLat(O.center),-1),this._emptyDEMTextureDirty=!this._initializing);const U=this.proxyCoords=w.getIds().map(ue=>{const fe=w.getTileByID(ue).tileID;return fe.projMatrix=O.calculateProjMatrix(fe.toUnwrapped()),fe});(function(ue,fe){const Ce=fe.transform.pointCoordinate(fe.transform.getCameraPoint()),Ae=new A.pointGeometry(Ce.x,Ce.y);ue.sort((Pe,Ne)=>{if(Ne.overscaledZ-Pe.overscaledZ)return Ne.overscaledZ-Pe.overscaledZ;const $e=new A.pointGeometry(Pe.canonical.x+(1<<Pe.canonical.z)*Pe.wrap,Pe.canonical.y),et=new A.pointGeometry(Ne.canonical.x+(1<<Ne.canonical.z)*Ne.wrap,Ne.canonical.y),mt=Ae.mult(1<<Pe.canonical.z);return mt.x-=.5,mt.y-=.5,mt.distSqr($e)-mt.distSqr(et)})})(U,this.painter),this._previousZoom=O.zoom;const q=this.proxyToSource||{};this.proxyToSource={},U.forEach(ue=>{this.proxyToSource[ue.key]={}}),this.terrainTileForTile={};const ee=this._style._sourceCaches;for(const ue in ee){const fe=ee[ue];if(!fe.used||(fe!==this.sourceCache&&(this._findCoveringTileCache[fe.id]={}),this._setupProxiedCoordsForOrtho(fe,f[ue],q),fe.usedForTerrain))continue;const Ce=f[ue];fe.getSource().reparseOverscaled&&this._assignTerrainTiles(Ce)}this.proxiedCoords[w.id]=U.map(ue=>new Ii(ue,ue.key,this.orthoMatrix)),this._assignTerrainTiles(U),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(q),this.renderingToTexture=!1,this._updateTimestamp=A.exported.now();const se={};this._visibleDemTiles=[];for(const ue of this.proxyCoords){const fe=this.terrainTileForTile[ue.key];if(!fe)continue;const Ce=fe.tileID.key;Ce in se||(this._visibleDemTiles.push(fe),se[Ce]=Ce)}}_assignTerrainTiles(f){this._initializing||f.forEach(w=>{if(this.terrainTileForTile[w.key])return;const O=this._findTileCoveringTileID(w,this.sourceCache);O&&(this.terrainTileForTile[w.key]=O)})}_prepareDEMTextures(){const f=this.painter.context,w=f.gl;for(const O in this.terrainTileForTile){const U=this.terrainTileForTile[O],q=U.dem;!q||U.demTexture&&!U.needsDEMTextureUpload||(f.activeTexture.set(w.TEXTURE1),jd(this.painter,U,q))}}_prepareDemTileUniforms(f,w,O,U){if(!w||null==w.demTexture)return!1;const q=f.tileID.canonical,ee=Math.pow(2,w.tileID.canonical.z-q.z),se=U||"";return O[`u_dem_tl${se}`]=[q.x*ee%1,q.y*ee%1],O[`u_dem_scale${se}`]=ee,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let f=0;const w=this._visibleDemTiles.reduce((O,U)=>{if(!U.dem)return O;const q=U.dem.tree.minimums[0];return q>0&&f++,O+q},0);return f?w/f:0}_updateEmptyDEMTexture(){const f=this.painter.context,w=f.gl;f.activeTexture.set(w.TEXTURE2);const O=this._getLoadedAreaMinimum(),U={width:1,height:1,data:new Uint8Array(A.DEMData.pack(O,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let q=this._emptyDEMTexture;return q?q.update(U,{premultiply:!1}):q=this._emptyDEMTexture=new A.Texture(f,U,w.RGBA,{premultiply:!1}),q}setupElevationDraw(f,w,O){const U=this.painter.context,q=U.gl,ee=(se=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:A.DEMData.getUnpackVector(se),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var se;ee.u_dem_size=this.sourceCache.getSource().tileSize,ee.u_exaggeration=this.exaggeration();let ue=null,fe=null,Ce=1;if(O&&O.morphing&&this._useVertexMorphing){const Ae=O.morphing.srcDemTile,Pe=O.morphing.dstDemTile;Ce=O.morphing.phase,Ae&&Pe&&(this._prepareDemTileUniforms(f,Ae,ee,"_prev")&&(fe=Ae),this._prepareDemTileUniforms(f,Pe,ee)&&(ue=Pe))}if(fe&&ue?(U.activeTexture.set(q.TEXTURE2),ue.demTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE,q.NEAREST),U.activeTexture.set(q.TEXTURE4),fe.demTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE,q.NEAREST),ee.u_dem_lerp=Ce):(ue=this.terrainTileForTile[f.tileID.key],U.activeTexture.set(q.TEXTURE2),(this._prepareDemTileUniforms(f,ue,ee)?ue.demTexture:this.emptyDEMTexture).bind(q.NEAREST,q.CLAMP_TO_EDGE,q.NEAREST)),O&&O.useDepthForOcclusion&&(U.activeTexture.set(q.TEXTURE3),this._depthTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE,q.NEAREST),ee.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),O&&O.useMeterToDem&&ue){const Ae=(1<<ue.tileID.canonical.z)*A.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;ee.u_meter_to_dem=Ae}O&&O.labelPlaneMatrixInv&&(ee.u_label_plane_matrix_inv=O.labelPlaneMatrixInv),w.setTerrainUniformValues(U,ee)}renderToBackBuffer(f){const w=this.painter,O=this.painter.context;0!==f.length&&(O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height]),this.renderingToTexture=!1,function(U,q,ee,se,ue){const fe=U.context,Ce=fe.gl;let Ae,Pe;const Ne=U.options.showTerrainWireframe?2:0,$e=(ot,vt)=>{if(Pe===ot)return;const rt=[ch[ot]];vt&&rt.push(ch[Ne]),Ae=U.useProgram("terrainRaster",null,rt),Pe=ot},et=U.colorModeForRenderPass(),mt=new A.DepthMode(Ce.LEQUAL,A.DepthMode.ReadWrite,U.depthRangeFor3D);xu.update(ue);const Ue=U.transform,tt=6*Math.pow(1.5,22-Ue.zoom)*q.exaggeration();(Ne?[!1,!0]:[!1]).forEach(ot=>{Pe=-1;const vt=ot?Ce.LINES:Ce.TRIANGLES,[rt,ht]=ot?q.getWirefameBuffer():[q.gridIndexBuffer,q.gridSegments];for(const un of se){const ut=ee.getTile(un),En=A.StencilMode.disabled,bn=q.prevTerrainTileForTile[un.key],Zn=q.terrainTileForTile[un.key];sn=Zn,null!=(Kt=bn)&&null!=sn&&Kt.hasData()&&sn.hasData()&&null!=Kt.demTexture&&null!=sn.demTexture&&Kt.tileID.key!==sn.tileID.key&&xu.newMorphing(un.key,bn,Zn,ue,250),fe.activeTexture.set(Ce.TEXTURE0),ut.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);const An=xu.getMorphValuesForProxy(un.key),kn=An?1:0;let Ti;An&&(Ti={morphing:{srcDemTile:An.from,dstDemTile:An.to,phase:A.easeCubicInOut(An.phase)}});const ci=lh(un.projMatrix,Kh(un.canonical,Ue.renderWorldCopies)?tt/10:tt);$e(kn,ot),q.setupElevationDraw(ut,Ae,Ti),U.prepareDrawProgram(fe,Ae,un.toUnwrapped()),Ae.draw(fe,vt,mt,En,et,A.CullFaceMode.backCCW,ci,"terrain_raster",q.gridBuffer,rt,ht)}var Kt,sn})}(w,this,this.proxySourceCache,f,this._updateTimestamp),this.renderingToTexture=!0,f.splice(0,f.length))}renderBatch(f){if(0===this._drapedRenderBatches.length)return f+1;this.renderingToTexture=!0;const w=this.painter,O=this.painter.context,U=this.proxySourceCache,q=this.proxiedCoords[U.id],ee=this._drapedRenderBatches.shift(),se=[],ue=w.style.order;let fe=0;for(const Ce of q){const Ae=U.getTileByID(Ce.proxyTileKey),Pe=U.proxyCachedFBO[Ce.key]?U.proxyCachedFBO[Ce.key][f]:void 0,Ne=void 0!==Pe?U.renderCache[Pe]:this.pool[fe++],$e=void 0!==Pe;if(Ae.texture=Ne.tex,$e&&!Ne.dirty){se.push(Ae.tileID);continue}let et;O.bindFramebuffer.set(Ne.fb.framebuffer),this.renderedToTile=!1,Ne.dirty&&(O.clear({color:A.Color.transparent}),Ne.dirty=!1);for(let mt=ee.start;mt<=ee.end;++mt){const Ue=w.style._layers[ue[mt]];if(Ue.isHidden(w.transform.zoom))continue;const tt=w.style._getLayerSourceCache(Ue),ot=tt?this.proxyToSource[Ce.key][tt.id]:[Ce];if(!ot)continue;const vt=ot;O.viewport.set([0,0,Ne.fb.width,Ne.fb.height]),et!==(tt?tt.id:null)&&(this._setupStencil(Ne,ot,Ue,tt),et=tt?tt.id:null),w.renderLayer(w,tt,Ue,vt)}this.renderedToTile?(Ne.dirty=!0,se.push(Ae.tileID)):$e||--fe,5===fe&&(fe=0,this.renderToBackBuffer(se))}return this.renderToBackBuffer(se),this.renderingToTexture=!1,O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height]),ee.end+1}postRender(){}renderCacheEfficiency(f){const w=f.order.length;if(0===w)return{efficiency:100};let O,U=0,q=0,ee=!1;for(let se=0;se<w;++se){const ue=f._layers[f.order[se]];this._style.isLayerDraped(ue)?(ee&&++U,++q):ee||(ee=!0,O=ue.id)}return 0===q?{efficiency:100}:{efficiency:100*(1-U/q),firstUndrapedLayer:O}}getMinElevationBelowMSL(){let f=0;return this._visibleDemTiles.filter(w=>w.dem).forEach(w=>{f=Math.min(f,w.dem.tree.minimums[0])}),0===f?f:(f-30)*this._exaggeration}raycast(f,w,O){if(!this._visibleDemTiles)return null;const U=this._visibleDemTiles.filter(q=>q.dem).map(q=>{const ee=q.tileID,se=Math.pow(2,ee.overscaledZ),{x:ue,y:fe}=ee.canonical,Ce=ue/se,Ae=(ue+1)/se,Pe=fe/se,Ne=(fe+1)/se;return{minx:Ce,miny:Pe,maxx:Ae,maxy:Ne,t:q.dem.tree.raycastRoot(Ce,Pe,Ae,Ne,f,w,O),tile:q}});U.sort((q,ee)=>(null!==q.t?q.t:Number.MAX_VALUE)-(null!==ee.t?ee.t:Number.MAX_VALUE));for(const q of U){if(null==q.t)return null;const ee=q.tile.dem.tree.raycast(q.minx,q.miny,q.maxx,q.maxy,f,w,O);if(null!=ee)return ee}return null}_createFBO(){const f=this.painter.context,w=f.gl,O=this.drapeBufferSize;f.activeTexture.set(w.TEXTURE0);const U=new A.Texture(f,{width:O[0],height:O[1],data:null},w.RGBA);U.bind(w.LINEAR,w.CLAMP_TO_EDGE);const q=f.createFramebuffer(O[0],O[1],!1);return q.colorAttachment.set(U.texture),q.depthAttachment=new Lt(f,q.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=f.createRenderbuffer(f.gl.DEPTH_STENCIL,O[0],O[1]),this._stencilRef=0,q.depthAttachment.set(this._sharedDepthStencil),f.clear({stencil:0})):q.depthAttachment.set(this._sharedDepthStencil),f.extTextureFilterAnisotropic&&!f.extTextureFilterAnisotropicForceOff&&w.texParameterf(w.TEXTURE_2D,f.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f.extTextureFilterAnisotropicMax),{fb:q,tex:U,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f].hasTransition())return!0;return this._style.order.some(f=>{const w=this._style._layers[f],O=w.isHidden(this.painter.transform.zoom),U=w.getCrossfadeParameters(),q=!!U&&1!==U.t,ee=w.hasTransition();return"custom"!==w.type&&!O&&(q||ee)})}_clearRasterFadeFromRenderCache(){let f=!1;for(const w in this._style._sourceCaches)if(this._style._sourceCaches[w]._source instanceof Oi){f=!0;break}if(f)for(let w=0;w<this._style.order.length;++w){const O=this._style._layers[this._style.order[w]],U=O.isHidden(this.painter.transform.zoom),q=this._style._getLayerSourceCache(O);if("raster"!==O.type||U||!q)continue;const ee=O.paint.get("raster-fade-duration");for(const se of this.proxyCoords){const ue=this.proxyToSource[se.key][q.id];if(ue)for(const fe of ue){const Ce=Xr(q.getTile(fe),q.findLoadedParent(fe,0),q,this.painter.transform,ee);(1!==Ce.opacity||0!==Ce.mix)&&this._clearRenderCacheForTile(q.id,fe)}}}}_setupDrapedRenderBatches(){const f=this._style.order,w=f.length;if(0===w)return;const O=[];let U,q=0,ee=this._style._layers[f[q]];for(;!this._style.isLayerDraped(ee)&&ee.isHidden(this.painter.transform.zoom)&&++q<w;)ee=this._style._layers[f[q]];for(;q<w;++q){const se=this._style._layers[f[q]];se.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(se)?void 0===U&&(U=q):void 0!==U&&(O.push({start:U,end:q-1}),U=void 0))}void 0!==U&&O.push({start:U,end:q-1}),this._drapedRenderBatches=O}_setupRenderCache(f){const w=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,w.renderCache.length>w.renderCachePool.length){const ee=Object.values(w.proxyCachedFBO);w.proxyCachedFBO={};for(let se=0;se<ee.length;++se){const ue=Object.values(ee[se]);w.renderCachePool.push(...ue)}}return}this._clearRasterFadeFromRenderCache();const O=this.proxyCoords,U=this._tilesDirty;for(let ee=O.length-1;ee>=0;ee--){const se=O[ee];if(w.getTileByID(se.key),void 0!==w.proxyCachedFBO[se.key]){const ue=f[se.key],fe=this.proxyToSource[se.key];let Ce=0;for(const Ae in fe){const Pe=fe[Ae],Ne=ue[Ae];if(!Ne||Ne.length!==Pe.length||Pe.some(($e,et)=>$e!==Ne[et]||U[Ae]&&U[Ae].hasOwnProperty($e.key))){Ce=-1;break}++Ce}for(const Ae in w.proxyCachedFBO[se.key])w.renderCache[w.proxyCachedFBO[se.key][Ae]].dirty=Ce<0||Ce!==Object.values(ue).length}}const q=[...this._drapedRenderBatches];q.sort((ee,se)=>se.end-se.start-(ee.end-ee.start));for(const ee of q)for(const se of O){if(w.proxyCachedFBO[se.key])continue;let ue=w.renderCachePool.pop();void 0===ue&&w.renderCache.length<50&&(ue=w.renderCache.length,w.renderCache.push(this._createFBO())),void 0!==ue&&(w.proxyCachedFBO[se.key]={},w.proxyCachedFBO[se.key][ee.start]=ue,w.renderCache[ue].dirty=!0)}this._tilesDirty={}}_setupStencil(f,w,O,U){if(!U||!this._sourceTilesOverlap[U.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const q=this.painter.context,ee=q.gl;if(w.length<=1)return void(this._overlapStencilType=!1);let se;if(O.isTileClipped())se=w.length,this._overlapStencilMode.test={func:ee.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(w[0].overscaledZ>w[w.length-1].overscaledZ))return void(this._overlapStencilType=!1);se=1,this._overlapStencilMode.test={func:ee.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+se>255&&(q.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=se,this._overlapStencilMode.ref=this._stencilRef,O.isTileClipped()&&this._renderTileClippingMasks(w,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(f){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[f.key]),this._overlapStencilMode):A.StencilMode.disabled}_renderTileClippingMasks(f,w){const O=this.painter,U=this.painter.context,q=U.gl;O._tileClippingMaskIDs={},U.setColorMode(A.ColorMode.disabled),U.setDepthMode(A.DepthMode.disabled);const ee=O.useProgram("clippingMask");for(const se of f){const ue=O._tileClippingMaskIDs[se.key]=--w;ee.draw(U,q.TRIANGLES,A.DepthMode.disabled,new A.StencilMode({func:q.ALWAYS,mask:0},ue,255,q.KEEP,q.KEEP,q.REPLACE),A.ColorMode.disabled,A.CullFaceMode.disabled,Bl(se.projMatrix),"$clipping",O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}}pointCoordinate(f){const w=this.painter.transform;if(f.x<0||f.x>w.width||f.y<0||f.y>w.height)return null;const O=[f.x,f.y,1,1];A.transformMat4(O,O,w.pixelMatrixInverse),A.scale$2(O,O,1/O[3]),O[0]/=w.worldSize,O[1]/=w.worldSize;const U=w._camera.position,q=A.mercatorZfromAltitude(1,w.center.lat),ee=[U[0],U[1],U[2]/q,0],se=A.subtract([],O.slice(0,3),ee);A.normalize(se,se);const ue=this.raycast(ee,se,this._exaggeration);return null!==ue&&ue?(A.scaleAndAdd(ee,ee,se,ue),ee[3]=ee[2],ee[2]*=q,ee):null}drawDepth(){const f=this.painter,w=f.context,O=this.proxySourceCache,U=Math.ceil(f.width),q=Math.ceil(f.height);if(!this._depthFBO||this._depthFBO.width===U&&this._depthFBO.height===q||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const ee=w.gl,se=w.createFramebuffer(U,q,!0);w.activeTexture.set(ee.TEXTURE0);const ue=new A.Texture(w,{width:U,height:q,data:null},ee.RGBA);ue.bind(ee.NEAREST,ee.CLAMP_TO_EDGE),se.colorAttachment.set(ue.texture);const fe=w.createRenderbuffer(w.gl.DEPTH_COMPONENT16,U,q);se.depthAttachment.set(fe),this._depthFBO=se,this._depthTexture=ue}w.bindFramebuffer.set(this._depthFBO.framebuffer),w.viewport.set([0,0,U,q]),function(ee,se,ue,fe){const Ce=ee.context,Ae=Ce.gl;Ce.clear({depth:1});const Pe=ee.useProgram("terrainDepth"),Ne=new A.DepthMode(Ae.LESS,A.DepthMode.ReadWrite,ee.depthRangeFor3D);for(const $e of fe){const et=ue.getTile($e),mt=lh($e.projMatrix,0);se.setupElevationDraw(et,Pe),Pe.draw(Ce,Ae.TRIANGLES,Ne,A.StencilMode.disabled,A.ColorMode.unblended,A.CullFaceMode.backCCW,mt,"terrain_depth",se.gridBuffer,se.gridIndexBuffer,se.gridNoSkirtSegments)}}(f,this,O,this.proxyCoords)}_setupProxiedCoordsForOrtho(f,w,O){if(f.getSource()instanceof He)return this._setupProxiedCoordsForImageSource(f,w,O);this._findCoveringTileCache[f.id]=this._findCoveringTileCache[f.id]||{};const U=this.proxiedCoords[f.id]=[],q=this.proxyCoords;for(let se=0;se<q.length;se++){const ue=q[se],fe=this._findTileCoveringTileID(ue,f);if(fe){const Ce=this._createProxiedId(ue,fe,O[ue.key]&&O[ue.key][f.id]);U.push(Ce),this.proxyToSource[ue.key][f.id]=[Ce]}}let ee=!1;for(let se=0;se<w.length;se++){const ue=f.getTile(w[se]);if(!ue||!ue.hasData())continue;const fe=this._findTileCoveringTileID(ue.tileID,this.proxySourceCache);if(fe&&fe.tileID.canonical.z!==ue.tileID.canonical.z){const Ce=this.proxyToSource[fe.tileID.key][f.id],Ae=this._createProxiedId(fe.tileID,ue,O[fe.tileID.key]&&O[fe.tileID.key][f.id]);Ce?Ce.splice(Ce.length-1,0,Ae):this.proxyToSource[fe.tileID.key][f.id]=[Ae],U.push(Ae),ee=!0}}this._sourceTilesOverlap[f.id]=ee}_setupProxiedCoordsForImageSource(f,w,O){if(!f.getSource().loaded())return;const U=this.proxiedCoords[f.id]=[],q=this.proxyCoords,ee=f.getSource(),se=new A.pointGeometry(ee.tileID.x,ee.tileID.y)._div(1<<ee.tileID.z),ue=ee.coordinates.map(A.MercatorCoordinate.fromLngLat).reduce((Ce,Ae)=>(Ce.min.x=Math.min(Ce.min.x,Ae.x-se.x),Ce.min.y=Math.min(Ce.min.y,Ae.y-se.y),Ce.max.x=Math.max(Ce.max.x,Ae.x-se.x),Ce.max.y=Math.max(Ce.max.y,Ae.y-se.y),Ce),{min:new A.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new A.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),fe=(Ce,Ae)=>{const Pe=Ce.wrap+Ce.canonical.x/(1<<Ce.canonical.z),Ne=Ce.canonical.y/(1<<Ce.canonical.z),$e=A.EXTENT/(1<<Ce.canonical.z),et=Ae.wrap+Ae.canonical.x/(1<<Ae.canonical.z),mt=Ae.canonical.y/(1<<Ae.canonical.z);return Pe+$e<et+ue.min.x||Pe>et+ue.max.x||Ne+$e<mt+ue.min.y||Ne>mt+ue.max.y};for(let Ce=0;Ce<q.length;Ce++){const Ae=q[Ce];for(let Pe=0;Pe<w.length;Pe++){const Ne=f.getTile(w[Pe]);if(!Ne||!Ne.hasData()||fe(Ae,Ne.tileID))continue;const $e=this._createProxiedId(Ae,Ne,O[Ae.key]&&O[Ae.key][f.id]),et=this.proxyToSource[Ae.key][f.id];et?et.push($e):this.proxyToSource[Ae.key][f.id]=[$e],U.push($e)}}}_createProxiedId(f,w,O){let U=this.orthoMatrix;if(O){const q=O.find(ee=>ee.key===w.tileID.key);if(q)return q}if(w.tileID.key!==f.key){const q=f.canonical.z-w.tileID.canonical.z;let ee,se,ue;U=A.create$1();const fe=w.tileID.wrap-f.wrap<<f.overscaledZ;q>0?(ee=A.EXTENT>>q,se=ee*((w.tileID.canonical.x<<q)-f.canonical.x+fe),ue=ee*((w.tileID.canonical.y<<q)-f.canonical.y)):(ee=A.EXTENT<<-q,se=A.EXTENT*(w.tileID.canonical.x-(f.canonical.x+fe<<-q)),ue=A.EXTENT*(w.tileID.canonical.y-(f.canonical.y<<-q))),A.ortho(U,0,ee,0,ee,0,1),A.translate(U,U,[se,ue,0])}return new Ii(w.tileID,f.key,U)}_findTileCoveringTileID(f,w){let O=w.getTile(f);if(O&&O.hasData())return O;const U=this._findCoveringTileCache[w.id],q=U[f.key];if(O=q?w.getTileByID(q):null,O&&O.hasData()||null===q)return O;let ee=O?O.tileID:f,se=ee.overscaledZ;const ue=w.getSource().minzoom,fe=[];if(!q){const Ae=w.getSource().maxzoom;if(f.canonical.z>=Ae){const Pe=f.canonical.z-Ae;w.getSource().reparseOverscaled?(se=Math.max(f.canonical.z+2,w.transform.tileZoom),ee=new A.OverscaledTileID(se,f.wrap,Ae,f.canonical.x>>Pe,f.canonical.y>>Pe)):0!==Pe&&(se=Ae,ee=new A.OverscaledTileID(se,f.wrap,Ae,f.canonical.x>>Pe,f.canonical.y>>Pe))}ee.key!==f.key&&(fe.push(ee.key),O=w.getTile(ee))}const Ce=Ae=>{fe.forEach(Pe=>{U[Pe]=Ae}),fe.length=0};for(se-=1;se>=ue&&(!O||!O.hasData());se--){O&&Ce(O.tileID.key);const Ae=ee.calculateScaledKey(se);if(O=w.getTileByID(Ae),O&&O.hasData())break;const Pe=U[Ae];if(null===Pe)break;void 0===Pe?fe.push(Ae):O=w.getTileByID(Pe)}return Ce(O?O.tileID.key:null),O&&O.hasData()?O:null}findDEMTileFor(f){return this.enabled?this._findTileCoveringTileID(f,this.sourceCache):null}prepareDrawTile(f){this.renderedToTile=!0}_clearRenderCacheForTile(f,w){let O=this._tilesDirty[f];O||(O=this._tilesDirty[f]={}),O[w.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const f=function(w){let O,U,q;const ee=new A.StructArrayLayout2ui4;for(U=1;U<129;U++){for(O=1;O<129;O++)q=131*U+O,ee.emplaceBack(q,q+1),ee.emplaceBack(q,q+131),ee.emplaceBack(q+1,q+131),128===U&&ee.emplaceBack(q+131,q+131+1);ee.emplaceBack(q+1,q+1+131)}return ee}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(f),this.wireframeSegments=A.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,f.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function Pr(P){const f=[];for(let w=0;w<P.length;w++){if(null===P[w])continue;const O=P[w].split(" ");f.push(O.pop())}return f}class Yd{static cacheKey(f,w,O){let U=`${f}${O?O.cacheKey:""}`;for(const q of w)U+=`/${q}`;return U}constructor(f,w,O,U,q,ee){const se=f.gl;this.program=se.createProgram();const ue=Pr(O.staticAttributes),fe=U?U.getBinderAttributes():[],Ce=ue.concat(fe),Ae=O.staticUniforms?Pr(O.staticUniforms):[],Pe=U?U.getBinderUniforms():[],Ne=Ae.concat(Pe),$e=[];for(const rt of Ne)$e.indexOf(rt)<0&&$e.push(rt);let et=U?U.defines():[];et=et.concat(ee.map(rt=>`#define ${rt}`));const mt=et.concat(dl.fragmentSource,rh,sr.fragmentSource,O.fragmentSource).join("\n"),Ue=et.concat(dl.vertexSource,rh,sr.vertexSource,bu.vertexSource,O.vertexSource).join("\n"),tt=se.createShader(se.FRAGMENT_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);se.shaderSource(tt,mt),se.compileShader(tt),se.attachShader(this.program,tt);const ot=se.createShader(se.VERTEX_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);se.shaderSource(ot,Ue),se.compileShader(ot),se.attachShader(this.program,ot),this.attributes={};const vt={};this.numAttributes=Ce.length;for(let rt=0;rt<this.numAttributes;rt++)Ce[rt]&&(se.bindAttribLocation(this.program,rt,Ce[rt]),this.attributes[Ce[rt]]=rt);se.linkProgram(this.program),se.deleteShader(ot),se.deleteShader(tt);for(let rt=0;rt<$e.length;rt++){const ht=$e[rt];if(ht&&!vt[ht]){const Kt=se.getUniformLocation(this.program,ht);Kt&&(vt[ht]=Kt)}}var rt,ht;this.fixedUniforms=q(f,vt),this.binderUniforms=U?U.getUniforms(f,vt):[],-1!==ee.indexOf("TERRAIN")&&(this.terrainUniforms={u_dem:new A.Uniform1i(rt=f,(ht=vt).u_dem),u_dem_prev:new A.Uniform1i(rt,ht.u_dem_prev),u_dem_unpack:new A.Uniform4f(rt,ht.u_dem_unpack),u_dem_tl:new A.Uniform2f(rt,ht.u_dem_tl),u_dem_scale:new A.Uniform1f(rt,ht.u_dem_scale),u_dem_tl_prev:new A.Uniform2f(rt,ht.u_dem_tl_prev),u_dem_scale_prev:new A.Uniform1f(rt,ht.u_dem_scale_prev),u_dem_size:new A.Uniform1f(rt,ht.u_dem_size),u_dem_lerp:new A.Uniform1f(rt,ht.u_dem_lerp),u_exaggeration:new A.Uniform1f(rt,ht.u_exaggeration),u_depth:new A.Uniform1i(rt,ht.u_depth),u_depth_size_inv:new A.Uniform2f(rt,ht.u_depth_size_inv),u_meter_to_dem:new A.Uniform1f(rt,ht.u_meter_to_dem),u_label_plane_matrix_inv:new A.UniformMatrix4f(rt,ht.u_label_plane_matrix_inv)}),-1!==ee.indexOf("FOG")&&(this.fogUniforms=((rt,ht)=>({u_fog_matrix:new A.UniformMatrix4f(rt,ht.u_fog_matrix),u_fog_range:new A.Uniform2f(rt,ht.u_fog_range),u_fog_color:new A.Uniform4f(rt,ht.u_fog_color),u_fog_horizon_blend:new A.Uniform1f(rt,ht.u_fog_horizon_blend),u_fog_temporal_offset:new A.Uniform1f(rt,ht.u_fog_temporal_offset)}))(f,vt))}setTerrainUniformValues(f,w){if(!this.terrainUniforms)return;const O=this.terrainUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const U in w)O[U].set(w[U])}}setFogUniformValues(f,w){if(!this.fogUniforms)return;const O=this.fogUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const U in w)O[U].location&&O[U].set(w[U])}}draw(f,w,O,U,q,ee,se,ue,fe,Ce,Ae,Pe,Ne,$e,et,mt){const Ue=f.gl;if(this.failedToCreate)return;f.program.set(this.program),f.setDepthMode(O),f.setStencilMode(U),f.setColorMode(q),f.setCullFace(ee);for(const ot in this.fixedUniforms)this.fixedUniforms[ot].set(se[ot]);$e&&$e.setUniforms(f,this.binderUniforms,Pe,{zoom:Ne});const tt={[Ue.LINES]:2,[Ue.TRIANGLES]:3,[Ue.LINE_STRIP]:1}[w];for(const ot of Ae.get()){const vt=ot.vaos||(ot.vaos={});(vt[ue]||(vt[ue]=new sh)).bind(f,this,fe,$e?$e.getPaintVertexBuffers():[],Ce,ot.vertexOffset,et,mt),Ue.drawElements(w,ot.primitiveLength*tt,Ue.UNSIGNED_SHORT,ot.primitiveOffset*tt*2)}}}function oo(P,f,w){const O=1/On(w,1,f.transform.tileZoom),U=Math.pow(2,w.tileID.overscaledZ),q=w.tileSize*Math.pow(2,f.transform.tileZoom)/U,ee=q*(w.tileID.canonical.x+w.tileID.wrap*U),se=q*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[O,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[ee>>16,se>>16],u_pixel_coord_lower:[65535&ee,65535&se]}}const Fc=(P,f,w,O)=>{const U=f.style.light,q=U.properties.get("position"),ee=[q.x,q.y,q.z],se=A.create$2();"viewport"===U.properties.get("anchor")&&(A.fromRotation(se,-f.transform.angle),A.transformMat3(ee,ee,se));const ue=U.properties.get("color");return{u_matrix:P,u_lightpos:ee,u_lightintensity:U.properties.get("intensity"),u_lightcolor:[ue.r,ue.g,ue.b],u_vertical_gradient:+w,u_opacity:O}},Ma=(P,f,w,O,U,q,ee)=>A.extend(Fc(P,f,w,O),oo(q,f,ee),{u_height_factor:-Math.pow(2,U.overscaledZ)/ee.tileSize/8}),hh=P=>({u_matrix:P}),Aa=(P,f,w,O)=>A.extend(hh(P),oo(w,f,O)),Ba=(P,f)=>({u_matrix:P,u_world:f}),Gs=(P,f,w,O,U)=>A.extend(Aa(P,f,w,O),{u_world:U}),ra=(P,f,w,O)=>{const U=P.transform;let q;if("map"===O.paint.get("circle-pitch-alignment")){const ee=On(w,1,U.zoom);q=[ee,ee]}else q=U.pixelsToGLUnits;return{u_camera_to_center_distance:U.cameraToCenterDistance,u_matrix:P.translatePosMatrix(f.projMatrix,w,O.paint.get("circle-translate"),O.paint.get("circle-translate-anchor")),u_device_pixel_ratio:A.exported.devicePixelRatio,u_extrude_scale:q}},qd=P=>{const f=[];return"map"===P.paint.get("circle-pitch-alignment")&&f.push("PITCH_WITH_MAP"),"map"===P.paint.get("circle-pitch-scale")&&f.push("SCALE_WITH_MAP"),f},Lc=(P,f,w)=>{const O=A.EXTENT/w.tileSize;return{u_matrix:P,u_camera_to_center_distance:f.cameraToCenterDistance,u_extrude_scale:[f.pixelsToGLUnits[0]/O,f.pixelsToGLUnits[1]/O]}},za=(P,f,w=1)=>({u_matrix:P,u_color:f,u_overlay:0,u_overlay_scale:w}),ed=(P,f,w,O)=>({u_matrix:P,u_extrude_scale:On(f,1,w),u_intensity:O}),Va=(P,f,w,O)=>{const U=P.transform;return{u_matrix:Zd(P,f,w,O),u_ratio:1/On(f,1,U.zoom),u_device_pixel_ratio:A.exported.devicePixelRatio,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]]}},bi=(P,f,w,O,U)=>A.extend(Va(P,f,w,O),{u_image:0,u_image_height:U}),wu=(P,f,w,O,U)=>{const q=P.transform,ee=Cu(f,q);return{u_matrix:Zd(P,f,w,U),u_texsize:f.imageAtlasTexture.size,u_ratio:1/On(f,1,q.zoom),u_device_pixel_ratio:A.exported.devicePixelRatio,u_image:0,u_scale:[ee,O.fromScale,O.toScale],u_fade:O.t,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},Bp=(P,f,w,O,U)=>{const q=Cu(f,P.transform);return A.extend(Va(P,f,w,U),{u_texsize:f.lineAtlasTexture.size,u_scale:[q,O.fromScale,O.toScale],u_image:0,u_mix:O.t})};function Cu(P,f){return 1/On(P,1,f.tileZoom)}function Zd(P,f,w,O){return P.translatePosMatrix(O||f.tileID.projMatrix,f,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}const Df=(P,f,w,O,U)=>{return{u_matrix:P,u_tl_parent:f,u_scale_parent:w,u_buffer_scale:1,u_fade_t:O.mix,u_opacity:O.opacity*U.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:U.paint.get("raster-brightness-min"),u_brightness_high:U.paint.get("raster-brightness-max"),u_saturation_factor:(ee=U.paint.get("raster-saturation"),ee>0?1-1/(1.001-ee):-ee),u_contrast_factor:(q=U.paint.get("raster-contrast"),q>0?1/(1-q):1+q),u_spin_weights:Su(U.paint.get("raster-hue-rotate"))};var q,ee};function Su(P){P*=Math.PI/180;const f=Math.sin(P),w=Math.cos(P);return[(2*w+1)/3,(-Math.sqrt(3)*f-w+1)/3,(Math.sqrt(3)*f-w+1)/3]}const dh=(P,f,w,O,U,q,ee,se,ue,fe)=>{const Ce=U.transform;return{u_is_size_zoom_constant:+("constant"===P||"source"===P),u_is_size_feature_constant:+("constant"===P||"camera"===P),u_size_t:f?f.uSizeT:0,u_size:f?f.uSize:0,u_camera_to_center_distance:Ce.cameraToCenterDistance,u_pitch:Ce.pitch/360*2*Math.PI,u_rotate_symbol:+w,u_aspect_ratio:Ce.width/Ce.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:ee,u_coord_matrix:se,u_is_text:+ue,u_pitch_with_map:+O,u_texsize:fe,u_texture:0}},wn=(P,f,w,O,U,q,ee,se,ue,fe,Ce)=>{const{cameraToCenterDistance:Ae,_pitch:Pe}=U.transform;return A.extend(dh(P,f,w,O,U,q,ee,se,ue,fe),{u_gamma_scale:O?Ae*Math.cos(U.terrain?0:Pe):1,u_device_pixel_ratio:A.exported.devicePixelRatio,u_is_halo:+Ce})},hr=(P,f,w,O,U,q,ee,se,ue,fe)=>A.extend(wn(P,f,w,O,U,q,ee,se,!0,ue,!0),{u_texsize_icon:fe,u_texture_icon:1}),td=(P,f,w)=>({u_matrix:P,u_opacity:f,u_color:w}),wo=(P,f,w,O,U,q)=>A.extend(function(ee,se,ue,fe){const Ce=ue.imageManager.getPattern(ee.from.toString()),Ae=ue.imageManager.getPattern(ee.to.toString()),{width:Pe,height:Ne}=ue.imageManager.getPixelSize(),$e=Math.pow(2,fe.tileID.overscaledZ),et=fe.tileSize*Math.pow(2,ue.transform.tileZoom)/$e,mt=et*(fe.tileID.canonical.x+fe.tileID.wrap*$e),Ue=et*fe.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ce.tl,u_pattern_br_a:Ce.br,u_pattern_tl_b:Ae.tl,u_pattern_br_b:Ae.br,u_texsize:[Pe,Ne],u_mix:se.t,u_pattern_size_a:Ce.displaySize,u_pattern_size_b:Ae.displaySize,u_scale_a:se.fromScale,u_scale_b:se.toScale,u_tile_units_to_pixels:1/On(fe,1,ue.transform.tileZoom),u_pixel_coord_upper:[mt>>16,Ue>>16],u_pixel_coord_lower:[65535&mt,65535&Ue]}}(O,q,w,U),{u_matrix:P,u_opacity:f}),nd={fillExtrusion:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_lightpos:new A.Uniform3f(P,f.u_lightpos),u_lightintensity:new A.Uniform1f(P,f.u_lightintensity),u_lightcolor:new A.Uniform3f(P,f.u_lightcolor),u_vertical_gradient:new A.Uniform1f(P,f.u_vertical_gradient),u_opacity:new A.Uniform1f(P,f.u_opacity)}),fillExtrusionPattern:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_lightpos:new A.Uniform3f(P,f.u_lightpos),u_lightintensity:new A.Uniform1f(P,f.u_lightintensity),u_lightcolor:new A.Uniform3f(P,f.u_lightcolor),u_vertical_gradient:new A.Uniform1f(P,f.u_vertical_gradient),u_height_factor:new A.Uniform1f(P,f.u_height_factor),u_image:new A.Uniform1i(P,f.u_image),u_texsize:new A.Uniform2f(P,f.u_texsize),u_pixel_coord_upper:new A.Uniform2f(P,f.u_pixel_coord_upper),u_pixel_coord_lower:new A.Uniform2f(P,f.u_pixel_coord_lower),u_scale:new A.Uniform3f(P,f.u_scale),u_fade:new A.Uniform1f(P,f.u_fade),u_opacity:new A.Uniform1f(P,f.u_opacity)}),fill:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix)}),fillPattern:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_image:new A.Uniform1i(P,f.u_image),u_texsize:new A.Uniform2f(P,f.u_texsize),u_pixel_coord_upper:new A.Uniform2f(P,f.u_pixel_coord_upper),u_pixel_coord_lower:new A.Uniform2f(P,f.u_pixel_coord_lower),u_scale:new A.Uniform3f(P,f.u_scale),u_fade:new A.Uniform1f(P,f.u_fade)}),fillOutline:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_world:new A.Uniform2f(P,f.u_world)}),fillOutlinePattern:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_world:new A.Uniform2f(P,f.u_world),u_image:new A.Uniform1i(P,f.u_image),u_texsize:new A.Uniform2f(P,f.u_texsize),u_pixel_coord_upper:new A.Uniform2f(P,f.u_pixel_coord_upper),u_pixel_coord_lower:new A.Uniform2f(P,f.u_pixel_coord_lower),u_scale:new A.Uniform3f(P,f.u_scale),u_fade:new A.Uniform1f(P,f.u_fade)}),circle:(P,f)=>({u_camera_to_center_distance:new A.Uniform1f(P,f.u_camera_to_center_distance),u_extrude_scale:new A.Uniform2f(P,f.u_extrude_scale),u_device_pixel_ratio:new A.Uniform1f(P,f.u_device_pixel_ratio),u_matrix:new A.UniformMatrix4f(P,f.u_matrix)}),collisionBox:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_camera_to_center_distance:new A.Uniform1f(P,f.u_camera_to_center_distance),u_extrude_scale:new A.Uniform2f(P,f.u_extrude_scale)}),collisionCircle:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_inv_matrix:new A.UniformMatrix4f(P,f.u_inv_matrix),u_camera_to_center_distance:new A.Uniform1f(P,f.u_camera_to_center_distance),u_viewport_size:new A.Uniform2f(P,f.u_viewport_size)}),debug:(P,f)=>({u_color:new A.UniformColor(P,f.u_color),u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_overlay:new A.Uniform1i(P,f.u_overlay),u_overlay_scale:new A.Uniform1f(P,f.u_overlay_scale)}),clippingMask:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix)}),heatmap:(P,f)=>({u_extrude_scale:new A.Uniform1f(P,f.u_extrude_scale),u_intensity:new A.Uniform1f(P,f.u_intensity),u_matrix:new A.UniformMatrix4f(P,f.u_matrix)}),heatmapTexture:(P,f)=>({u_image:new A.Uniform1i(P,f.u_image),u_color_ramp:new A.Uniform1i(P,f.u_color_ramp),u_opacity:new A.Uniform1f(P,f.u_opacity)}),hillshade:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_image:new A.Uniform1i(P,f.u_image),u_latrange:new A.Uniform2f(P,f.u_latrange),u_light:new A.Uniform2f(P,f.u_light),u_shadow:new A.UniformColor(P,f.u_shadow),u_highlight:new A.UniformColor(P,f.u_highlight),u_accent:new A.UniformColor(P,f.u_accent)}),hillshadePrepare:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_image:new A.Uniform1i(P,f.u_image),u_dimension:new A.Uniform2f(P,f.u_dimension),u_zoom:new A.Uniform1f(P,f.u_zoom),u_unpack:new A.Uniform4f(P,f.u_unpack)}),line:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_ratio:new A.Uniform1f(P,f.u_ratio),u_device_pixel_ratio:new A.Uniform1f(P,f.u_device_pixel_ratio),u_units_to_pixels:new A.Uniform2f(P,f.u_units_to_pixels)}),lineGradient:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_ratio:new A.Uniform1f(P,f.u_ratio),u_device_pixel_ratio:new A.Uniform1f(P,f.u_device_pixel_ratio),u_units_to_pixels:new A.Uniform2f(P,f.u_units_to_pixels),u_image:new A.Uniform1i(P,f.u_image),u_image_height:new A.Uniform1f(P,f.u_image_height)}),linePattern:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_texsize:new A.Uniform2f(P,f.u_texsize),u_ratio:new A.Uniform1f(P,f.u_ratio),u_device_pixel_ratio:new A.Uniform1f(P,f.u_device_pixel_ratio),u_image:new A.Uniform1i(P,f.u_image),u_units_to_pixels:new A.Uniform2f(P,f.u_units_to_pixels),u_scale:new A.Uniform3f(P,f.u_scale),u_fade:new A.Uniform1f(P,f.u_fade)}),lineSDF:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_texsize:new A.Uniform2f(P,f.u_texsize),u_ratio:new A.Uniform1f(P,f.u_ratio),u_device_pixel_ratio:new A.Uniform1f(P,f.u_device_pixel_ratio),u_units_to_pixels:new A.Uniform2f(P,f.u_units_to_pixels),u_image:new A.Uniform1i(P,f.u_image),u_scale:new A.Uniform3f(P,f.u_scale),u_mix:new A.Uniform1f(P,f.u_mix)}),raster:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_tl_parent:new A.Uniform2f(P,f.u_tl_parent),u_scale_parent:new A.Uniform1f(P,f.u_scale_parent),u_buffer_scale:new A.Uniform1f(P,f.u_buffer_scale),u_fade_t:new A.Uniform1f(P,f.u_fade_t),u_opacity:new A.Uniform1f(P,f.u_opacity),u_image0:new A.Uniform1i(P,f.u_image0),u_image1:new A.Uniform1i(P,f.u_image1),u_brightness_low:new A.Uniform1f(P,f.u_brightness_low),u_brightness_high:new A.Uniform1f(P,f.u_brightness_high),u_saturation_factor:new A.Uniform1f(P,f.u_saturation_factor),u_contrast_factor:new A.Uniform1f(P,f.u_contrast_factor),u_spin_weights:new A.Uniform3f(P,f.u_spin_weights)}),symbolIcon:(P,f)=>({u_is_size_zoom_constant:new A.Uniform1i(P,f.u_is_size_zoom_constant),u_is_size_feature_constant:new A.Uniform1i(P,f.u_is_size_feature_constant),u_size_t:new A.Uniform1f(P,f.u_size_t),u_size:new A.Uniform1f(P,f.u_size),u_camera_to_center_distance:new A.Uniform1f(P,f.u_camera_to_center_distance),u_pitch:new A.Uniform1f(P,f.u_pitch),u_rotate_symbol:new A.Uniform1i(P,f.u_rotate_symbol),u_aspect_ratio:new A.Uniform1f(P,f.u_aspect_ratio),u_fade_change:new A.Uniform1f(P,f.u_fade_change),u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_label_plane_matrix:new A.UniformMatrix4f(P,f.u_label_plane_matrix),u_coord_matrix:new A.UniformMatrix4f(P,f.u_coord_matrix),u_is_text:new A.Uniform1i(P,f.u_is_text),u_pitch_with_map:new A.Uniform1i(P,f.u_pitch_with_map),u_texsize:new A.Uniform2f(P,f.u_texsize),u_texture:new A.Uniform1i(P,f.u_texture)}),symbolSDF:(P,f)=>({u_is_size_zoom_constant:new A.Uniform1i(P,f.u_is_size_zoom_constant),u_is_size_feature_constant:new A.Uniform1i(P,f.u_is_size_feature_constant),u_size_t:new A.Uniform1f(P,f.u_size_t),u_size:new A.Uniform1f(P,f.u_size),u_camera_to_center_distance:new A.Uniform1f(P,f.u_camera_to_center_distance),u_pitch:new A.Uniform1f(P,f.u_pitch),u_rotate_symbol:new A.Uniform1i(P,f.u_rotate_symbol),u_aspect_ratio:new A.Uniform1f(P,f.u_aspect_ratio),u_fade_change:new A.Uniform1f(P,f.u_fade_change),u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_label_plane_matrix:new A.UniformMatrix4f(P,f.u_label_plane_matrix),u_coord_matrix:new A.UniformMatrix4f(P,f.u_coord_matrix),u_is_text:new A.Uniform1i(P,f.u_is_text),u_pitch_with_map:new A.Uniform1i(P,f.u_pitch_with_map),u_texsize:new A.Uniform2f(P,f.u_texsize),u_texture:new A.Uniform1i(P,f.u_texture),u_gamma_scale:new A.Uniform1f(P,f.u_gamma_scale),u_device_pixel_ratio:new A.Uniform1f(P,f.u_device_pixel_ratio),u_is_halo:new A.Uniform1i(P,f.u_is_halo)}),symbolTextAndIcon:(P,f)=>({u_is_size_zoom_constant:new A.Uniform1i(P,f.u_is_size_zoom_constant),u_is_size_feature_constant:new A.Uniform1i(P,f.u_is_size_feature_constant),u_size_t:new A.Uniform1f(P,f.u_size_t),u_size:new A.Uniform1f(P,f.u_size),u_camera_to_center_distance:new A.Uniform1f(P,f.u_camera_to_center_distance),u_pitch:new A.Uniform1f(P,f.u_pitch),u_rotate_symbol:new A.Uniform1i(P,f.u_rotate_symbol),u_aspect_ratio:new A.Uniform1f(P,f.u_aspect_ratio),u_fade_change:new A.Uniform1f(P,f.u_fade_change),u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_label_plane_matrix:new A.UniformMatrix4f(P,f.u_label_plane_matrix),u_coord_matrix:new A.UniformMatrix4f(P,f.u_coord_matrix),u_is_text:new A.Uniform1i(P,f.u_is_text),u_pitch_with_map:new A.Uniform1i(P,f.u_pitch_with_map),u_texsize:new A.Uniform2f(P,f.u_texsize),u_texsize_icon:new A.Uniform2f(P,f.u_texsize_icon),u_texture:new A.Uniform1i(P,f.u_texture),u_texture_icon:new A.Uniform1i(P,f.u_texture_icon),u_gamma_scale:new A.Uniform1f(P,f.u_gamma_scale),u_device_pixel_ratio:new A.Uniform1f(P,f.u_device_pixel_ratio),u_is_halo:new A.Uniform1i(P,f.u_is_halo)}),background:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_opacity:new A.Uniform1f(P,f.u_opacity),u_color:new A.UniformColor(P,f.u_color)}),backgroundPattern:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_opacity:new A.Uniform1f(P,f.u_opacity),u_image:new A.Uniform1i(P,f.u_image),u_pattern_tl_a:new A.Uniform2f(P,f.u_pattern_tl_a),u_pattern_br_a:new A.Uniform2f(P,f.u_pattern_br_a),u_pattern_tl_b:new A.Uniform2f(P,f.u_pattern_tl_b),u_pattern_br_b:new A.Uniform2f(P,f.u_pattern_br_b),u_texsize:new A.Uniform2f(P,f.u_texsize),u_mix:new A.Uniform1f(P,f.u_mix),u_pattern_size_a:new A.Uniform2f(P,f.u_pattern_size_a),u_pattern_size_b:new A.Uniform2f(P,f.u_pattern_size_b),u_scale_a:new A.Uniform1f(P,f.u_scale_a),u_scale_b:new A.Uniform1f(P,f.u_scale_b),u_pixel_coord_upper:new A.Uniform2f(P,f.u_pixel_coord_upper),u_pixel_coord_lower:new A.Uniform2f(P,f.u_pixel_coord_lower),u_tile_units_to_pixels:new A.Uniform1f(P,f.u_tile_units_to_pixels)}),terrainRaster:ui,terrainDepth:ui,skybox:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_sun_direction:new A.Uniform3f(P,f.u_sun_direction),u_cubemap:new A.Uniform1i(P,f.u_cubemap),u_opacity:new A.Uniform1f(P,f.u_opacity),u_temporal_offset:new A.Uniform1f(P,f.u_temporal_offset)}),skyboxGradient:(P,f)=>({u_matrix:new A.UniformMatrix4f(P,f.u_matrix),u_color_ramp:new A.Uniform1i(P,f.u_color_ramp),u_center_direction:new A.Uniform3f(P,f.u_center_direction),u_radius:new A.Uniform1f(P,f.u_radius),u_opacity:new A.Uniform1f(P,f.u_opacity),u_temporal_offset:new A.Uniform1f(P,f.u_temporal_offset)}),skyboxCapture:(P,f)=>({u_matrix_3f:new A.UniformMatrix3f(P,f.u_matrix_3f),u_sun_direction:new A.Uniform3f(P,f.u_sun_direction),u_sun_intensity:new A.Uniform1f(P,f.u_sun_intensity),u_color_tint_r:new A.Uniform4f(P,f.u_color_tint_r),u_color_tint_m:new A.Uniform4f(P,f.u_color_tint_m),u_luminance:new A.Uniform1f(P,f.u_luminance)})};let Ua;function ds(P,f,w,O,U,q,ee){const se=P.context,ue=se.gl,fe=P.useProgram("collisionBox"),Ce=[];let Ae=0,Pe=0;for(let ot=0;ot<O.length;ot++){const vt=O[ot],rt=f.getTile(vt),ht=rt.getBucket(w);if(!ht)continue;let Kt=vt.projMatrix;0===U[0]&&0===U[1]||(Kt=P.translatePosMatrix(vt.projMatrix,rt,U,q));const sn=ee?ht.textCollisionBox:ht.iconCollisionBox,un=ht.collisionCircleArray;if(un.length>0){const ut=A.create$1(),En=Kt;A.mul$1(ut,ht.placementInvProjMatrix,P.transform.glCoordMatrix),A.mul$1(ut,ut,ht.placementViewportMatrix),Ce.push({circleArray:un,circleOffset:Pe,transform:En,invTransform:ut}),Ae+=un.length/4,Pe=Ae}sn&&(P.terrain&&P.terrain.setupElevationDraw(rt,fe),fe.draw(se,ue.LINES,A.DepthMode.disabled,A.StencilMode.disabled,P.colorModeForRenderPass(),A.CullFaceMode.disabled,Lc(Kt,P.transform,rt),w.id,sn.layoutVertexBuffer,sn.indexBuffer,sn.segments,null,P.transform.zoom,null,sn.collisionVertexBuffer,sn.collisionVertexBufferExt))}if(!ee||!Ce.length)return;const Ne=P.useProgram("collisionCircle"),$e=new A.StructArrayLayout2f1f2i16;$e.resize(4*Ae),$e._trim();let et=0;for(const ot of Ce)for(let vt=0;vt<ot.circleArray.length/4;vt++){const rt=4*vt,ht=ot.circleArray[rt+0],Kt=ot.circleArray[rt+1],sn=ot.circleArray[rt+2],un=ot.circleArray[rt+3];$e.emplace(et++,ht,Kt,sn,un,0),$e.emplace(et++,ht,Kt,sn,un,1),$e.emplace(et++,ht,Kt,sn,un,2),$e.emplace(et++,ht,Kt,sn,un,3)}(!Ua||Ua.length<2*Ae)&&(Ua=function(ot){const vt=2*ot,rt=new A.StructArrayLayout3ui6;rt.resize(vt),rt._trim();for(let ht=0;ht<vt;ht++){const Kt=6*ht;rt.uint16[Kt+0]=4*ht+0,rt.uint16[Kt+1]=4*ht+1,rt.uint16[Kt+2]=4*ht+2,rt.uint16[Kt+3]=4*ht+2,rt.uint16[Kt+4]=4*ht+3,rt.uint16[Kt+5]=4*ht+0}return rt}(Ae));const mt=se.createIndexBuffer(Ua,!0),Ue=se.createVertexBuffer($e,A.collisionCircleLayout.members,!0);for(const ot of Ce){const vt={u_matrix:ot.transform,u_inv_matrix:ot.invTransform,u_camera_to_center_distance:(tt=P.transform).cameraToCenterDistance,u_viewport_size:[tt.width,tt.height]};Ne.draw(se,ue.TRIANGLES,A.DepthMode.disabled,A.StencilMode.disabled,P.colorModeForRenderPass(),A.CullFaceMode.disabled,vt,w.id,Ue,mt,A.SegmentVector.simpleSegment(0,2*ot.circleOffset,ot.circleArray.length,ot.circleArray.length/2),null,P.transform.zoom,null,null,null)}var tt;Ue.destroy(),mt.destroy()}const pl=A.identity(new Float32Array(16));function ph(P,f,w,O,U,q){const{horizontalAlign:ee,verticalAlign:se}=A.getAnchorAlignment(P),ue=-(ee-.5)*f,fe=-(se-.5)*w,Ce=A.evaluateVariableOffset(P,O);return new A.pointGeometry((ue/U+Ce[0])*q,(fe/U+Ce[1])*q)}function Qm(P,f,w,O,U,q,ee,se,ue,fe,Ce,Ae){const Pe=P.text.placedSymbolArray,Ne=P.text.dynamicLayoutVertexArray,$e=P.icon.dynamicLayoutVertexArray,et={};Ne.clear();for(let mt=0;mt<Pe.length;mt++){const Ue=Pe.get(mt),tt=P.allowVerticalPlacement&&!Ue.placedOrientation,ot=Ue.hidden||!Ue.crossTileID||tt?null:O[Ue.crossTileID];if(ot){const vt=new A.pointGeometry(Ue.anchorX,Ue.anchorY),rt=Ae(vt),ht=xe(vt,w?se:ee,rt),Kt=Me(q.cameraToCenterDistance,ht.signedDistanceFromCamera);let sn=U.evaluateSizeForFeature(P.textSizeData,fe,Ue)*Kt/A.ONE_EM;w&&(sn*=P.tilePixelRatio/ue);const{width:un,height:ut,anchor:En,textOffset:bn,textScale:Zn}=ot,An=ph(En,un,ut,bn,Zn,sn),kn=w?xe(vt.add(An),ee,rt).point:ht.point.add(f?An.rotate(-q.angle):An),Ti=P.allowVerticalPlacement&&Ue.placedOrientation===A.WritingMode.vertical?Math.PI/2:0;for(let ci=0;ci<Ue.numGlyphs;ci++)A.addDynamicAttributes(Ne,kn,Ti);Ce&&Ue.associatedIconIndex>=0&&(et[Ue.associatedIconIndex]={shiftedAnchor:kn,angle:Ti})}else St(Ue.numGlyphs,Ne)}if(Ce){$e.clear();const mt=P.icon.placedSymbolArray;for(let Ue=0;Ue<mt.length;Ue++){const tt=mt.get(Ue);if(tt.hidden)St(tt.numGlyphs,$e);else{const ot=et[Ue];if(ot)for(let vt=0;vt<tt.numGlyphs;vt++)A.addDynamicAttributes($e,ot.shiftedAnchor,ot.angle);else St(tt.numGlyphs,$e)}}P.icon.dynamicLayoutVertexBuffer.updateData($e)}P.text.dynamicLayoutVertexBuffer.updateData(Ne)}function zp(P,f,w){return w.iconsInText&&f?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function oa(P,f,w,O,U,q,ee,se,ue,fe,Ce,Ae){const Pe=P.context,Ne=Pe.gl,$e=P.transform,et="map"===se,mt="map"===ue,Ue=et&&"point"!==w.layout.get("symbol-placement"),tt=et&&!mt&&!Ue,ot=void 0!==w.layout.get("symbol-sort-key").constantOr(1);let vt=!1;const rt=P.depthModeForSublayer(0,A.DepthMode.ReadOnly),ht=w.layout.get("text-variable-anchor"),Kt=[],sn=P.terrain&&mt?["PITCH_WITH_MAP_TERRAIN"]:null;for(const un of O){const ut=f.getTile(un),En=ut.getBucket(w);if(!En)continue;const bn=U?En.text:En.icon;if(!bn||!bn.segments.get().length)continue;const Zn=bn.programConfigurations.get(w.id),An=U||En.sdfIcons,kn=U?En.textSizeData:En.iconSizeData,Ti=mt||0!==$e.pitch,ci=P.useProgram(zp(An,U,En),Zn,sn),ar=A.evaluateSizeForZoom(kn,$e.zoom);let mr,Lr,Bi,pr,ho=[0,0],ua=null;if(U){if(Lr=ut.glyphAtlasTexture,Bi=Ne.LINEAR,mr=ut.glyphAtlasTexture.size,En.iconsInText){ho=ut.imageAtlasTexture.size,ua=ut.imageAtlasTexture;const Ys="composite"===kn.kind||"camera"===kn.kind;pr=Ti||P.options.rotating||P.options.zooming||Ys?Ne.LINEAR:Ne.NEAREST}}else{const Ys=1!==w.layout.get("icon-size").constantOr(0)||En.iconsNeedLinear;Lr=ut.imageAtlasTexture,Bi=An||P.options.rotating||P.options.zooming||Ys||Ti?Ne.LINEAR:Ne.NEAREST,mr=ut.imageAtlasTexture.size}const bs=On(ut,1,P.transform.zoom),Uo=pe(un.projMatrix,mt,et,P.transform,bs),Xo=P.terrain&&mt&&Ue?A.invert(new Float32Array(16),Uo):pl,ha=ge(un.projMatrix,mt,et,P.transform,bs),wi=ht&&En.hasTextData(),Nr="none"!==w.layout.get("icon-text-fit")&&wi&&En.hasIconData();if(Ue){const Ys=$e.elevation;Ke(En,un.projMatrix,P,U,Uo,ha,mt,fe,Ys?qs=>Ys.getAtTileOffset(un,qs.x,qs.y):null)}const cr=P.translatePosMatrix(un.projMatrix,ut,q,ee),qr=Ue||U&&ht||Nr?pl:Uo,po=P.translatePosMatrix(ha,ut,q,ee,!0),Jr=An&&0!==w.paint.get(U?"text-halo-width":"icon-halo-width").constantOr(1);let da;da=An?En.iconsInText?hr(kn.kind,ar,tt,mt,P,cr,qr,po,mr,ho):wn(kn.kind,ar,tt,mt,P,cr,qr,po,U,mr,!0):dh(kn.kind,ar,tt,mt,P,cr,qr,po,U,mr);const Ps={program:ci,buffers:bn,uniformValues:da,atlasTexture:Lr,atlasTextureIcon:ua,atlasInterpolation:Bi,atlasInterpolationIcon:pr,isSDF:An,hasHalo:Jr,tile:ut,labelPlaneMatrixInv:Xo};if(ot&&En.canOverlap){vt=!0;const Ys=bn.segments.get();for(const qs of Ys)Kt.push({segments:new A.SegmentVector([qs]),sortKey:qs.sortKey,state:Ps})}else Kt.push({segments:bn.segments,sortKey:0,state:Ps})}vt&&Kt.sort((un,ut)=>un.sortKey-ut.sortKey);for(const un of Kt){const ut=un.state;if(P.terrain&&P.terrain.setupElevationDraw(ut.tile,ut.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:ut.labelPlaneMatrixInv}),Pe.activeTexture.set(Ne.TEXTURE0),ut.atlasTexture.bind(ut.atlasInterpolation,Ne.CLAMP_TO_EDGE),ut.atlasTextureIcon&&(Pe.activeTexture.set(Ne.TEXTURE1),ut.atlasTextureIcon&&ut.atlasTextureIcon.bind(ut.atlasInterpolationIcon,Ne.CLAMP_TO_EDGE)),ut.isSDF){const En=ut.uniformValues;ut.hasHalo&&(En.u_is_halo=1,fl(ut.buffers,un.segments,w,P,ut.program,rt,Ce,Ae,En)),En.u_is_halo=0}fl(ut.buffers,un.segments,w,P,ut.program,rt,Ce,Ae,ut.uniformValues)}}function fl(P,f,w,O,U,q,ee,se,ue){const fe=O.context;U.draw(fe,fe.gl.TRIANGLES,q,ee,se,A.CullFaceMode.disabled,ue,w.id,P.layoutVertexBuffer,P.indexBuffer,f,w.paint,O.transform.zoom,P.programConfigurations.get(w.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function so(P,f,w,O,U,q,ee){const se=P.context.gl,ue=w.paint.get("fill-pattern"),fe=ue&&ue.constantOr(1),Ce=w.getCrossfadeParameters();let Ae,Pe,Ne,$e,et;ee?(Pe=fe&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=se.LINES):(Pe=fe?"fillPattern":"fill",Ae=se.TRIANGLES);for(const mt of O){const Ue=f.getTile(mt);if(fe&&!Ue.patternsLoaded())continue;const tt=Ue.getBucket(w);if(!tt)continue;P.prepareDrawTile(mt);const ot=tt.programConfigurations.get(w.id),vt=P.useProgram(Pe,ot);fe&&(P.context.activeTexture.set(se.TEXTURE0),Ue.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),ot.updatePaintBuffers(Ce));const rt=ue.constantOr(null);if(rt&&Ue.imageAtlas){const Kt=Ue.imageAtlas,sn=Kt.patternPositions[rt.to.toString()],un=Kt.patternPositions[rt.from.toString()];sn&&un&&ot.setConstantPatternPositions(sn,un)}const ht=P.translatePosMatrix(mt.projMatrix,Ue,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(ee){$e=tt.indexBuffer2,et=tt.segments2;const Kt=P.terrain&&P.terrain.renderingToTexture?P.terrain.drapeBufferSize:[se.drawingBufferWidth,se.drawingBufferHeight];Ne="fillOutlinePattern"===Pe&&fe?Gs(ht,P,Ce,Ue,Kt):Ba(ht,Kt)}else $e=tt.indexBuffer,et=tt.segments,Ne=fe?Aa(ht,P,Ce,Ue):hh(ht);P.prepareDrawProgram(P.context,vt,mt.toUnwrapped()),vt.draw(P.context,Ae,U,P.stencilModeForClipping(mt),q,A.CullFaceMode.disabled,Ne,w.id,tt.layoutVertexBuffer,$e,et,w.paint,P.transform.zoom,ot)}}function Wo(P,f,w,O,U,q,ee){const se=P.context,ue=se.gl,fe=w.paint.get("fill-extrusion-pattern"),Ce=fe.constantOr(1),Ae=w.getCrossfadeParameters(),Pe=w.paint.get("fill-extrusion-opacity");for(const Ne of O){const $e=f.getTile(Ne),et=$e.getBucket(w);if(!et)continue;const mt=et.programConfigurations.get(w.id),Ue=P.useProgram(Ce?"fillExtrusionPattern":"fillExtrusion",mt);if(P.terrain){const ht=P.terrain;if(!et.enableTerrain)continue;if(ht.setupElevationDraw($e,Ue,{useMeterToDem:!0}),If(se,f,Ne,et,w,ht),!et.centroidVertexBuffer){const Kt=Ue.attributes.a_centroid_pos;void 0!==Kt&&ue.vertexAttrib2f(Kt,0,0)}}Ce&&(P.context.activeTexture.set(ue.TEXTURE0),$e.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),mt.updatePaintBuffers(Ae));const tt=fe.constantOr(null);if(tt&&$e.imageAtlas){const ht=$e.imageAtlas,Kt=ht.patternPositions[tt.to.toString()],sn=ht.patternPositions[tt.from.toString()];Kt&&sn&&mt.setConstantPatternPositions(Kt,sn)}const ot=P.translatePosMatrix(Ne.projMatrix,$e,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),vt=w.paint.get("fill-extrusion-vertical-gradient"),rt=Ce?Ma(ot,P,vt,Pe,Ne,Ae,$e):Fc(ot,P,vt,Pe);P.prepareDrawProgram(se,Ue,Ne.toUnwrapped()),Ue.draw(se,se.gl.TRIANGLES,U,q,ee,A.CullFaceMode.backCCW,rt,w.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,w.paint,P.transform.zoom,mt,P.terrain?et.centroidVertexBuffer:null)}}function If(P,f,w,O,U,q){const ee=[Ue=>{let tt=Ue.canonical.x-1,ot=Ue.wrap;return tt<0&&(tt=(1<<Ue.canonical.z)-1,ot--),new A.OverscaledTileID(Ue.overscaledZ,ot,Ue.canonical.z,tt,Ue.canonical.y)},Ue=>{let tt=Ue.canonical.x+1,ot=Ue.wrap;return tt===1<<Ue.canonical.z&&(tt=0,ot++),new A.OverscaledTileID(Ue.overscaledZ,ot,Ue.canonical.z,tt,Ue.canonical.y)},Ue=>new A.OverscaledTileID(Ue.overscaledZ,Ue.wrap,Ue.canonical.z,Ue.canonical.x,(0===Ue.canonical.y?1<<Ue.canonical.z:Ue.canonical.y)-1),Ue=>new A.OverscaledTileID(Ue.overscaledZ,Ue.wrap,Ue.canonical.z,Ue.canonical.x,Ue.canonical.y===(1<<Ue.canonical.z)-1?0:Ue.canonical.y+1)],se=Ue=>{const tt=f.getSource().maxzoom,ot=Kt=>{const sn=f.getTileByID(Kt);if(sn&&sn.hasData())return sn.getBucket(U)};let vt,rt,ht;return(Ue.overscaledZ===Ue.canonical.z||Ue.overscaledZ>=tt)&&(vt=ot(Ue.key)),Ue.overscaledZ>=tt&&(rt=ot(Ue.calculateScaledKey(Ue.overscaledZ+1))),Ue.overscaledZ>tt&&(ht=ot(Ue.calculateScaledKey(Ue.overscaledZ-1))),vt||rt||ht},ue=[0,0,0],fe=(Ue,tt)=>(ue[0]=Math.min(Ue.min.y,tt.min.y),ue[1]=Math.max(Ue.max.y,tt.max.y),ue[2]=A.EXTENT-tt.min.x>Ue.max.x?tt.min.x-A.EXTENT:Ue.max.x,ue),Ce=(Ue,tt)=>(ue[0]=Math.min(Ue.min.x,tt.min.x),ue[1]=Math.max(Ue.max.x,tt.max.x),ue[2]=A.EXTENT-tt.min.y>Ue.max.y?tt.min.y-A.EXTENT:Ue.max.y,ue),Ae=[(Ue,tt)=>fe(Ue,tt),(Ue,tt)=>fe(tt,Ue),(Ue,tt)=>Ce(Ue,tt),(Ue,tt)=>Ce(tt,Ue)],Pe=new A.pointGeometry(0,0);let Ne,$e,et;const mt=(Ue,tt,ot,vt,rt)=>{const ht=[[vt?ot:Ue,vt?Ue:ot,0],[vt?ot:tt,vt?tt:ot,0]],Kt=rt<0?A.EXTENT+rt:rt,sn=[vt?Kt:(Ue+tt)/2,vt?(Ue+tt)/2:Kt,0];return 0===ot&&rt<0||0!==ot&&rt>0?q.getForTilePoints(et,[sn],!0,$e):ht.push(sn),q.getForTilePoints(w,ht,!0,Ne),Math.max(ht[0][2],ht[1][2],sn[2])/q.exaggeration()};for(let Ue=0;Ue<4;Ue++){const tt=O.borders[Ue];if(0===tt.length&&(O.borderDone[Ue]=!0),O.borderDone[Ue])continue;const ot=et=ee[Ue](w),vt=se(ot);if(!(vt&&vt.enableTerrain&&($e=q.findDEMTileFor(ot),$e&&$e.dem)))continue;if(!Ne){const sn=q.findDEMTileFor(w);if(!sn||!sn.dem)return;Ne=sn}const rt=(Ue<2?1:5)-Ue,ht=vt.borders[rt];let Kt=0;for(let sn=0;sn<tt.length;sn++){const un=O.featuresOnBorder[tt[sn]],ut=un.borders[Ue];let En;for(;Kt<ht.length&&(En=vt.featuresOnBorder[ht[Kt]],!(En.borders[rt][1]>ut[0]+3));)vt.borderDone[rt]||vt.encodeCentroid(void 0,En,!1),Kt++;if(En&&Kt<ht.length){const bn=Kt;let Zn=0;for(;!(En.borders[rt][0]>ut[1]-3)&&(Zn++,++Kt!==ht.length);)En=vt.featuresOnBorder[ht[Kt]];if(En=vt.featuresOnBorder[ht[bn]],un.intersectsCount()>1||En.intersectsCount()>1||1!==Zn){1!==Zn&&(Kt=bn),O.encodeCentroid(void 0,un,!1),vt.borderDone[rt]||vt.encodeCentroid(void 0,En,!1);continue}const An=Ae[Ue](un,En),kn=Ue%2?A.EXTENT-1:0;Pe.x=mt(An[0],Math.min(A.EXTENT-1,An[1]),kn,Ue<2,An[2]),Pe.y=0,O.encodeCentroid(Pe,un,!1),vt.borderDone[rt]||vt.encodeCentroid(Pe,En,!1)}else O.encodeCentroid(void 0,un,!1)}O.borderDone[Ue]=O.needsCentroidUpdate=!0,vt.borderDone[rt]||(vt.borderDone[rt]=vt.needsCentroidUpdate=!0)}(O.needsCentroidUpdate||!O.centroidVertexBuffer&&0!==O.centroidVertexArray.length)&&O.uploadCentroid(P)}const Ha=new A.Color(1,0,0,1),Ui=new A.Color(0,1,0,1),Vp=new A.Color(0,0,1,1),Pf=new A.Color(1,0,1,1),Up=new A.Color(0,1,1,1);function fh(P,f,w,O){Nc(P,0,f+w/2,P.transform.width,w,O)}function js(P,f,w,O){Nc(P,f-w/2,0,w,P.transform.height,O)}function Nc(P,f,w,O,U,q){const ee=P.context,se=ee.gl;se.enable(se.SCISSOR_TEST),se.scissor(f*A.exported.devicePixelRatio,w*A.exported.devicePixelRatio,O*A.exported.devicePixelRatio,U*A.exported.devicePixelRatio),ee.clear({color:q}),se.disable(se.SCISSOR_TEST)}function id(P,f,w){const O=P.context,U=O.gl,q=w.projMatrix,ee=P.useProgram("debug"),se=f.getTileByID(w.key);P.terrain&&P.terrain.setupElevationDraw(se,ee);const ue=A.DepthMode.disabled,fe=A.StencilMode.disabled,Ce=P.colorModeForRenderPass();O.activeTexture.set(U.TEXTURE0),P.emptyTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),ee.draw(O,U.LINE_STRIP,ue,fe,Ce,A.CullFaceMode.disabled,za(q,A.Color.red),"$debug",P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments);const Pe=se.latestRawTileData,Ne=Math.floor((Pe&&Pe.byteLength||0)/1024),$e=f.getTile(w).tileSize,et=512/Math.min($e,512)*(w.overscaledZ/P.transform.zoom)*.5;let mt=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(mt+=` => ${w.overscaledZ}`),function(Ue,tt){Ue.initDebugOverlayCanvas();const ot=Ue.debugOverlayCanvas,vt=Ue.context.gl,rt=Ue.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,ot.width,ot.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(tt,5,5),rt.strokeText(tt,5,5),Ue.debugOverlayTexture.update(ot),Ue.debugOverlayTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)}(P,`${mt} ${Ne}kb`),ee.draw(O,U.TRIANGLES,ue,fe,A.ColorMode.alphaBlended,A.CullFaceMode.disabled,za(q,A.Color.transparent,et),"$debug",P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments)}const Eu=A.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Wd}=Eu;function ka(P,f,w,O){P.emplaceBack(f,w,O)}class ml{constructor(f){this.vertexArray=new A.StructArrayLayout3f12,this.indices=new A.StructArrayLayout3ui6,ka(this.vertexArray,-1,-1,1),ka(this.vertexArray,1,-1,1),ka(this.vertexArray,-1,1,1),ka(this.vertexArray,1,1,1),ka(this.vertexArray,-1,-1,-1),ka(this.vertexArray,1,-1,-1),ka(this.vertexArray,-1,1,-1),ka(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=f.createVertexBuffer(this.vertexArray,Wd),this.indexBuffer=f.createIndexBuffer(this.indices),this.segment=A.SegmentVector.simpleSegment(0,0,36,12)}}function gl(P,f,w,O,U,q){const ee=P.gl,se=f.paint.get("sky-atmosphere-color"),ue=f.paint.get("sky-atmosphere-halo-color"),fe=f.paint.get("sky-atmosphere-sun-intensity"),Ce={u_matrix_3f:A.fromMat4([],O),u_sun_direction:U,u_sun_intensity:fe,u_color_tint_r:[($e=se).r,$e.g,$e.b,$e.a],u_color_tint_m:[(et=ue).r,et.g,et.b,et.a],u_luminance:5e-5};var $e,et;ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+q,f.skyboxTexture,0),w.draw(P,ee.TRIANGLES,A.DepthMode.disabled,A.StencilMode.disabled,A.ColorMode.unblended,A.CullFaceMode.frontCW,Ce,"skyboxCapture",f.skyboxGeometry.vertexBuffer,f.skyboxGeometry.indexBuffer,f.skyboxGeometry.segment)}const _l={symbol:function(P,f,w,O,U){if("translucent"!==P.renderPass)return;const q=A.StencilMode.disabled,ee=P.colorModeForRenderPass();w.layout.get("text-variable-anchor")&&function(se,ue,fe,Ce,Ae,Pe,Ne){const $e=ue.transform,et="map"===Ae,mt="map"===Pe;for(const Ue of se){const tt=Ce.getTile(Ue),ot=tt.getBucket(fe);if(!ot||!ot.text||!ot.text.segments.get().length)continue;const vt=A.evaluateSizeForZoom(ot.textSizeData,$e.zoom),rt=On(tt,1,ue.transform.zoom),ht=pe(Ue.projMatrix,mt,et,ue.transform,rt),Kt="none"!==fe.layout.get("icon-text-fit")&&ot.hasIconData();if(vt){const sn=Math.pow(2,$e.zoom-tt.tileID.overscaledZ),un=$e.elevation;Qm(ot,et,mt,Ne,A.symbolSize,$e,ht,Ue.projMatrix,sn,vt,Kt,un?ut=>un.getAtTileOffset(Ue,ut.x,ut.y):ut=>0)}}}(O,P,w,f,w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),U),0!==w.paint.get("icon-opacity").constantOr(1)&&oa(P,f,w,O,!1,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),w.layout.get("icon-rotation-alignment"),w.layout.get("icon-pitch-alignment"),w.layout.get("icon-keep-upright"),q,ee),0!==w.paint.get("text-opacity").constantOr(1)&&oa(P,f,w,O,!0,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),w.layout.get("text-keep-upright"),q,ee),f.map.showCollisionBoxes&&(ds(P,f,w,O,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),!0),ds(P,f,w,O,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),!1))},circle:function(P,f,w,O){if("translucent"!==P.renderPass)return;const U=w.paint.get("circle-opacity"),q=w.paint.get("circle-stroke-width"),ee=w.paint.get("circle-stroke-opacity"),se=void 0!==w.layout.get("circle-sort-key").constantOr(1);if(0===U.constantOr(1)&&(0===q.constantOr(1)||0===ee.constantOr(1)))return;const ue=P.context,fe=ue.gl,Ce=P.depthModeForSublayer(0,A.DepthMode.ReadOnly),Ae=A.StencilMode.disabled,Pe=P.colorModeForRenderPass(),Ne=[];for(let $e=0;$e<O.length;$e++){const et=O[$e],mt=f.getTile(et),Ue=mt.getBucket(w);if(!Ue)continue;const tt=Ue.programConfigurations.get(w.id),ot=qd(w),vt={programConfiguration:tt,program:P.useProgram("circle",tt,ot),layoutVertexBuffer:Ue.layoutVertexBuffer,indexBuffer:Ue.indexBuffer,uniformValues:ra(P,et,mt,w),tile:mt};if(se){const rt=Ue.segments.get();for(const ht of rt)Ne.push({segments:new A.SegmentVector([ht]),sortKey:ht.sortKey,state:vt})}else Ne.push({segments:Ue.segments,sortKey:0,state:vt})}se&&Ne.sort(($e,et)=>$e.sortKey-et.sortKey);for(const $e of Ne){const{programConfiguration:et,program:mt,layoutVertexBuffer:Ue,indexBuffer:tt,uniformValues:ot,tile:vt}=$e.state,rt=$e.segments;P.terrain&&P.terrain.setupElevationDraw(vt,mt,{useDepthForOcclusion:!0}),P.prepareDrawProgram(ue,mt,vt.tileID.toUnwrapped()),mt.draw(ue,fe.TRIANGLES,Ce,Ae,Pe,A.CullFaceMode.disabled,ot,w.id,Ue,tt,rt,w.paint,P.transform.zoom,et)}},heatmap:function(P,f,w,O){if(0!==w.paint.get("heatmap-opacity"))if("offscreen"===P.renderPass){const U=P.context,q=U.gl,ee=A.StencilMode.disabled,se=new A.ColorMode([q.ONE,q.ONE],A.Color.transparent,[!0,!0,!0,!0]);(function(ue,fe,Ce){const Ae=ue.gl;ue.activeTexture.set(Ae.TEXTURE1),ue.viewport.set([0,0,fe.width/4,fe.height/4]);let Pe=Ce.heatmapFbo;if(Pe)Ae.bindTexture(Ae.TEXTURE_2D,Pe.colorAttachment.get()),ue.bindFramebuffer.set(Pe.framebuffer);else{const Ne=Ae.createTexture();Ae.bindTexture(Ae.TEXTURE_2D,Ne),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_S,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_T,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.LINEAR),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.LINEAR),Pe=Ce.heatmapFbo=ue.createFramebuffer(fe.width/4,fe.height/4,!1),function($e,et,mt,Ue){const tt=$e.gl;tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,et.width/4,et.height/4,0,tt.RGBA,$e.extRenderToTextureHalfFloat?$e.extTextureHalfFloat.HALF_FLOAT_OES:tt.UNSIGNED_BYTE,null),Ue.colorAttachment.set(mt)}(ue,fe,Ne,Pe)}})(U,P,w),U.clear({color:A.Color.transparent});for(let ue=0;ue<O.length;ue++){const fe=O[ue];if(f.hasRenderableParent(fe))continue;const Ce=f.getTile(fe),Ae=Ce.getBucket(w);if(!Ae)continue;const Pe=Ae.programConfigurations.get(w.id),Ne=P.useProgram("heatmap",Pe),{zoom:$e}=P.transform;P.terrain&&P.terrain.setupElevationDraw(Ce,Ne),P.prepareDrawProgram(U,Ne,fe.toUnwrapped()),Ne.draw(U,q.TRIANGLES,A.DepthMode.disabled,ee,se,A.CullFaceMode.disabled,ed(fe.projMatrix,Ce,$e,w.paint.get("heatmap-intensity")),w.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,w.paint,P.transform.zoom,Pe)}U.viewport.set([0,0,P.width,P.height])}else"translucent"===P.renderPass&&(P.context.setColorMode(P.colorModeForRenderPass()),function(U,q){const ee=U.context,se=ee.gl,ue=q.heatmapFbo;if(!ue)return;ee.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,ue.colorAttachment.get()),ee.activeTexture.set(se.TEXTURE1);let fe=q.colorRampTexture;fe||(fe=q.colorRampTexture=new A.Texture(ee,q.colorRamp,se.RGBA)),fe.bind(se.LINEAR,se.CLAMP_TO_EDGE),U.useProgram("heatmapTexture").draw(ee,se.TRIANGLES,A.DepthMode.disabled,A.StencilMode.disabled,U.colorModeForRenderPass(),A.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")},q.id,U.viewportBuffer,U.quadTriangleIndexBuffer,U.viewportSegments,q.paint,U.transform.zoom)}(P,w))},line:function(P,f,w,O){if("translucent"!==P.renderPass)return;const U=w.paint.get("line-opacity"),q=w.paint.get("line-width");if(0===U.constantOr(1)||0===q.constantOr(1))return;const ee=P.depthModeForSublayer(0,A.DepthMode.ReadOnly),se=P.colorModeForRenderPass(),ue=w.paint.get("line-dasharray"),fe=ue.constantOr(1),Ce=w.layout.get("line-cap"),Ae=w.paint.get("line-pattern"),Pe=Ae.constantOr(1),Ne=w.paint.get("line-gradient"),$e=w.getCrossfadeParameters(),et=Pe?"linePattern":fe?"lineSDF":Ne?"lineGradient":"line",mt=P.context,Ue=mt.gl;for(const tt of O){const ot=f.getTile(tt);if(Pe&&!ot.patternsLoaded())continue;const vt=ot.getBucket(w);if(!vt)continue;P.prepareDrawTile(tt);const rt=vt.programConfigurations.get(w.id),ht=P.useProgram(et,rt),Kt=Ae.constantOr(null);if(Kt&&ot.imageAtlas){const bn=ot.imageAtlas,Zn=bn.patternPositions[Kt.to.toString()],An=bn.patternPositions[Kt.from.toString()];Zn&&An&&rt.setConstantPatternPositions(Zn,An)}const sn=ue.constantOr(null),un=Ce.constantOr(null);if(!Pe&&sn&&un&&ot.lineAtlas){const bn=ot.lineAtlas,Zn=bn.getDash(sn.to,un),An=bn.getDash(sn.from,un);Zn&&An&&rt.setConstantPatternPositions(Zn,An)}const ut=P.terrain?tt.projMatrix:null,En=Pe?wu(P,ot,w,$e,ut):fe?Bp(P,ot,w,$e,ut):Ne?bi(P,ot,w,ut,vt.lineClipsArray.length):Va(P,ot,w,ut);if(Pe)mt.activeTexture.set(Ue.TEXTURE0),ot.imageAtlasTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),rt.updatePaintBuffers($e);else if(fe)mt.activeTexture.set(Ue.TEXTURE0),ot.lineAtlasTexture.bind(Ue.LINEAR,Ue.REPEAT),rt.updatePaintBuffers($e);else if(Ne){const bn=vt.gradients[w.id];let Zn=bn.texture;if(w.gradientVersion!==bn.version){let An=256;if(w.stepInterpolant){const kn=f.getSource().maxzoom,Ti=tt.canonical.z===kn?Math.ceil(1<<P.transform.maxZoom-tt.canonical.z):1;An=A.clamp(A.nextPowerOfTwo(vt.maxLineLength/A.EXTENT*1024*Ti),256,mt.maxTextureSize)}bn.gradient=A.renderColorRamp({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:An,image:bn.gradient||void 0,clips:vt.lineClipsArray}),bn.texture?bn.texture.update(bn.gradient):bn.texture=new A.Texture(mt,bn.gradient,Ue.RGBA),bn.version=w.gradientVersion,Zn=bn.texture}mt.activeTexture.set(Ue.TEXTURE0),Zn.bind(w.stepInterpolant?Ue.NEAREST:Ue.LINEAR,Ue.CLAMP_TO_EDGE)}P.prepareDrawProgram(mt,ht,tt.toUnwrapped()),ht.draw(mt,Ue.TRIANGLES,ee,P.stencilModeForClipping(tt),se,A.CullFaceMode.disabled,En,w.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,w.paint,P.transform.zoom,rt,vt.layoutVertexBuffer2)}},fill:function(P,f,w,O){const U=w.paint.get("fill-color"),q=w.paint.get("fill-opacity");if(0===q.constantOr(1))return;const ee=P.colorModeForRenderPass(),se=w.paint.get("fill-pattern"),ue=P.opaquePassEnabledForLayer()&&!se.constantOr(1)&&1===U.constantOr(A.Color.transparent).a&&1===q.constantOr(0)?"opaque":"translucent";if(P.renderPass===ue){const fe=P.depthModeForSublayer(1,"opaque"===P.renderPass?A.DepthMode.ReadWrite:A.DepthMode.ReadOnly);so(P,f,w,O,fe,ee,!1)}if("translucent"===P.renderPass&&w.paint.get("fill-antialias")){const fe=P.depthModeForSublayer(w.getPaintProperty("fill-outline-color")?2:0,A.DepthMode.ReadOnly);so(P,f,w,O,fe,ee,!0)}},"fill-extrusion":function(P,f,w,O){const U=w.paint.get("fill-extrusion-opacity");if(0!==U&&"translucent"===P.renderPass){const q=new A.DepthMode(P.context.gl.LEQUAL,A.DepthMode.ReadWrite,P.depthRangeFor3D);if(1!==U||w.paint.get("fill-extrusion-pattern").constantOr(1))Wo(P,f,w,O,q,A.StencilMode.disabled,A.ColorMode.disabled),Wo(P,f,w,O,q,P.stencilModeFor3D(),P.colorModeForRenderPass());else{const ee=P.colorModeForRenderPass();Wo(P,f,w,O,q,A.StencilMode.disabled,ee)}}},hillshade:function(P,f,w,O){if("offscreen"!==P.renderPass&&"translucent"!==P.renderPass)return;const U=P.context,q=P.depthModeForSublayer(0,A.DepthMode.ReadOnly),ee=P.colorModeForRenderPass(),se=P.terrain&&P.terrain.renderingToTexture,[ue,fe]="translucent"!==P.renderPass||se?[{},O]:P.stencilConfigForOverlap(O);for(const Ce of fe){const Ae=f.getTile(Ce);if(Ae.needsHillshadePrepare&&"offscreen"===P.renderPass)Hs(P,Ae,w,q,A.StencilMode.disabled,ee);else if("translucent"===P.renderPass){const Pe=se&&P.terrain?P.terrain.stencilModeForRTTOverlap(Ce):ue[Ce.overscaledZ];Gd(P,Ce,Ae,w,q,Pe,ee)}}U.viewport.set([0,0,P.width,P.height])},raster:function(P,f,w,O,U,q){if("translucent"!==P.renderPass||0===w.paint.get("raster-opacity")||!O.length)return;const ee=P.context,se=ee.gl,ue=f.getSource(),fe=P.useProgram("raster"),Ce=P.colorModeForRenderPass(),Ae=P.terrain&&P.terrain.renderingToTexture,[Pe,Ne]=ue instanceof He||Ae?[{},O]:P.stencilConfigForOverlap(O),$e=Ne[Ne.length-1].overscaledZ,et=!P.options.moving;for(const mt of Ne){const Ue=Ae?A.DepthMode.disabled:P.depthModeForSublayer(mt.overscaledZ-$e,1===w.paint.get("raster-opacity")?A.DepthMode.ReadWrite:A.DepthMode.ReadOnly,se.LESS),tt=mt.toUnwrapped(),ot=f.getTile(mt);if(Ae&&(!ot||!ot.hasData()))continue;const vt=Ae?mt.projMatrix:P.transform.calculateProjMatrix(tt,et),rt=P.terrain&&Ae?P.terrain.stencilModeForRTTOverlap(mt):Pe[mt.overscaledZ],ht=q?0:w.paint.get("raster-fade-duration");ot.registerFadeDuration(ht);const Kt=f.findLoadedParent(mt,0),sn=Xr(ot,Kt,f,P.transform,ht);let un,ut;P.terrain&&P.terrain.prepareDrawTile(mt);const En="nearest"===w.paint.get("raster-resampling")?se.NEAREST:se.LINEAR;ee.activeTexture.set(se.TEXTURE0),ot.texture.bind(En,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),ee.activeTexture.set(se.TEXTURE1),Kt?(Kt.texture.bind(En,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),un=Math.pow(2,Kt.tileID.overscaledZ-ot.tileID.overscaledZ),ut=[ot.tileID.canonical.x*un%1,ot.tileID.canonical.y*un%1]):ot.texture.bind(En,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST);const bn=Df(vt,ut||[0,0],un||1,sn,w);P.prepareDrawProgram(ee,fe,tt),ue instanceof He?fe.draw(ee,se.TRIANGLES,Ue,A.StencilMode.disabled,Ce,A.CullFaceMode.disabled,bn,w.id,ue.boundsBuffer,P.quadTriangleIndexBuffer,ue.boundsSegments):fe.draw(ee,se.TRIANGLES,Ue,rt,Ce,A.CullFaceMode.disabled,bn,w.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}},background:function(P,f,w,O){const U=w.paint.get("background-color"),q=w.paint.get("background-opacity");if(0===q)return;const ee=P.context,se=ee.gl,ue=P.transform,fe=ue.tileSize,Ce=w.paint.get("background-pattern");if(P.isPatternMissing(Ce))return;const Ae=!Ce&&1===U.a&&1===q&&P.opaquePassEnabledForLayer()?"opaque":"translucent";if(P.renderPass!==Ae)return;const Pe=A.StencilMode.disabled,Ne=P.depthModeForSublayer(0,"opaque"===Ae?A.DepthMode.ReadWrite:A.DepthMode.ReadOnly),$e=P.colorModeForRenderPass(),et=P.useProgram(Ce?"backgroundPattern":"background"),mt=O||ue.coveringTiles({tileSize:fe});Ce&&(ee.activeTexture.set(se.TEXTURE0),P.imageManager.bind(P.context));const Ue=w.getCrossfadeParameters();for(const tt of mt){const ot=tt.toUnwrapped(),vt=O?tt.projMatrix:P.transform.calculateProjMatrix(ot);P.prepareDrawTile(tt);const rt=Ce?wo(vt,q,P,Ce,{tileID:tt,tileSize:fe},Ue):td(vt,q,U);P.prepareDrawProgram(ee,et,ot),et.draw(ee,se.TRIANGLES,Ne,Pe,$e,A.CullFaceMode.disabled,rt,w.id,P.tileExtentBuffer,P.quadTriangleIndexBuffer,P.tileExtentSegments)}},sky:function(P,f,w){const O=w.paint.get("sky-opacity");if(0===O)return;const U=P.context,q=w.paint.get("sky-type"),ee=new A.DepthMode(U.gl.LEQUAL,A.DepthMode.ReadOnly,[0,1]),se=P.frameCounter/1e3%1;"atmosphere"===q?"offscreen"===P.renderPass?w.needsSkyboxCapture(P)&&(function(ue,fe,Ce,Ae){const Pe=ue.context,Ne=Pe.gl;let $e=fe.skyboxFbo;if(!$e){$e=fe.skyboxFbo=Pe.createFramebuffer(32,32,!1),fe.skyboxGeometry=new ml(Pe),fe.skyboxTexture=Pe.gl.createTexture(),Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,fe.skyboxTexture),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_WRAP_S,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_WRAP_T,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_MIN_FILTER,Ne.LINEAR),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_MAG_FILTER,Ne.LINEAR);for(let tt=0;tt<6;++tt)Ne.texImage2D(Ne.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Ne.RGBA,32,32,0,Ne.RGBA,Ne.UNSIGNED_BYTE,null)}Pe.bindFramebuffer.set($e.framebuffer),Pe.viewport.set([0,0,32,32]);const et=fe.getCenter(ue,!0),mt=ue.useProgram("skyboxCapture"),Ue=new Float64Array(16);A.identity(Ue),A.rotateY(Ue,Ue,.5*-Math.PI),gl(Pe,fe,mt,Ue,et,0),A.identity(Ue),A.rotateY(Ue,Ue,.5*Math.PI),gl(Pe,fe,mt,Ue,et,1),A.identity(Ue),A.rotateX(Ue,Ue,.5*-Math.PI),gl(Pe,fe,mt,Ue,et,2),A.identity(Ue),A.rotateX(Ue,Ue,.5*Math.PI),gl(Pe,fe,mt,Ue,et,3),A.identity(Ue),gl(Pe,fe,mt,Ue,et,4),A.identity(Ue),A.rotateY(Ue,Ue,Math.PI),gl(Pe,fe,mt,Ue,et,5),Pe.viewport.set([0,0,ue.width,ue.height])}(P,w),w.markSkyboxValid(P)):"sky"===P.renderPass&&function(ue,fe,Ce,Ae,Pe){const Ne=ue.context,$e=Ne.gl,et=ue.transform,mt=ue.useProgram("skybox");Ne.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_CUBE_MAP,fe.skyboxTexture);const Ue={u_matrix:et.skyboxMatrix,u_sun_direction:fe.getCenter(ue,!1),u_cubemap:0,u_opacity:Ae,u_temporal_offset:Pe};ue.prepareDrawProgram(Ne,mt),mt.draw(Ne,$e.TRIANGLES,Ce,A.StencilMode.disabled,ue.colorModeForRenderPass(),A.CullFaceMode.backCW,Ue,"skybox",fe.skyboxGeometry.vertexBuffer,fe.skyboxGeometry.indexBuffer,fe.skyboxGeometry.segment)}(P,w,ee,O,se):"gradient"===q&&"sky"===P.renderPass&&function(ue,fe,Ce,Ae,Pe){const Ne=ue.context,$e=Ne.gl,et=ue.transform,mt=ue.useProgram("skyboxGradient");fe.skyboxGeometry||(fe.skyboxGeometry=new ml(Ne)),Ne.activeTexture.set($e.TEXTURE0);let Ue=fe.colorRampTexture;Ue||(Ue=fe.colorRampTexture=new A.Texture(Ne,fe.colorRamp,$e.RGBA)),Ue.bind($e.LINEAR,$e.CLAMP_TO_EDGE);const tt=(ot=et.skyboxMatrix,vt=fe.getCenter(ue,!1),rt=fe.paint.get("sky-gradient-radius"),ht=Ae,Kt=Pe,{u_matrix:ot,u_color_ramp:0,u_center_direction:vt,u_radius:A.degToRad(rt),u_opacity:ht,u_temporal_offset:Kt});var ot,vt,rt,ht,Kt;ue.prepareDrawProgram(Ne,mt),mt.draw(Ne,$e.TRIANGLES,Ce,A.StencilMode.disabled,ue.colorModeForRenderPass(),A.CullFaceMode.backCW,tt,"skyboxGradient",fe.skyboxGeometry.vertexBuffer,fe.skyboxGeometry.indexBuffer,fe.skyboxGeometry.segment)}(P,w,ee,O,se)},debug:function(P,f,w){for(let O=0;O<w.length;O++)id(P,f,w[O])},custom:function(P,f,w){const O=P.context,U=w.implementation;if("offscreen"===P.renderPass){const q=U.prerender;q&&(P.setCustomLayerDefaults(),O.setColorMode(P.colorModeForRenderPass()),q.call(U,O.gl,P.transform.customLayerMatrix()),O.setDirty(),P.setBaseState())}else if("translucent"===P.renderPass){P.setCustomLayerDefaults(),O.setColorMode(P.colorModeForRenderPass()),O.setStencilMode(A.StencilMode.disabled);const q="3d"===U.renderingMode?new A.DepthMode(P.context.gl.LEQUAL,A.DepthMode.ReadWrite,P.depthRangeFor3D):P.depthModeForSublayer(0,A.DepthMode.ReadOnly);O.setDepthMode(q),U.render(O.gl,P.transform.customLayerMatrix()),O.setDirty(),P.setBaseState(),O.bindFramebuffer.set(null)}}};class Hp{constructor(f,w){this.context=new di(f),this.transform=w,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=A.SourceCache.maxUnderzooming+A.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ih,this.gpuTimers={},this.frameCounter=0}updateTerrain(f,w){const O=!!f&&!!f.terrain;if(!(O||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Np(this,f));const U=this._terrain;this.transform.elevation=O?U:null,U.update(f,this.transform,w)}_updateFog(f){const w=f.fog;if(!w||w.getOpacity(this.transform.pitch)<1||w.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[O,U]=w.getFovAdjustedRange(this.transform._fov);if(O>U)return void(this.transform.fogCullDistSq=null);const q=O+.78*(U-O);this.transform.fogCullDistSq=q*q}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(f,w){if(this.width=f*A.exported.devicePixelRatio,this.height=w*A.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const O of this.style.order)this.style._layers[O].resize()}setup(){const f=this.context,w=new A.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(A.EXTENT,0),w.emplaceBack(0,A.EXTENT),w.emplaceBack(A.EXTENT,A.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(w,A.posAttributes.members),this.tileExtentSegments=A.SegmentVector.simpleSegment(0,0,4,2);const O=new A.StructArrayLayout2i4;O.emplaceBack(0,0),O.emplaceBack(A.EXTENT,0),O.emplaceBack(0,A.EXTENT),O.emplaceBack(A.EXTENT,A.EXTENT),this.debugBuffer=f.createVertexBuffer(O,A.posAttributes.members),this.debugSegments=A.SegmentVector.simpleSegment(0,0,4,5);const U=new A.StructArrayLayout4i8;U.emplaceBack(0,0,0,0),U.emplaceBack(A.EXTENT,0,A.EXTENT,0),U.emplaceBack(0,A.EXTENT,0,A.EXTENT),U.emplaceBack(A.EXTENT,A.EXTENT,A.EXTENT,A.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(U,er.members),this.rasterBoundsSegments=A.SegmentVector.simpleSegment(0,0,4,2);const q=new A.StructArrayLayout2i4;q.emplaceBack(-1,-1),q.emplaceBack(1,-1),q.emplaceBack(-1,1),q.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(q,A.posAttributes.members),this.viewportSegments=A.SegmentVector.simpleSegment(0,0,4,2);const ee=new A.StructArrayLayout1ui2;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(ee);const se=new A.StructArrayLayout3ui6;se.emplaceBack(0,1,2),se.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(se),this.emptyTexture=new A.Texture(f,{width:1,height:1,data:new Uint8Array([0,0,0,0])},f.gl.RGBA),this.identityMat=A.create$1();const ue=this.context.gl;this.stencilClearMode=new A.StencilMode({func:ue.ALWAYS,mask:0},0,255,ue.ZERO,ue.ZERO,ue.ZERO),this.loadTimeStamps.push(A.window.performance.now())}clearStencil(){const f=this.context,w=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this.useProgram("clippingMask").draw(f,w.TRIANGLES,A.DepthMode.disabled,this.stencilClearMode,A.ColorMode.disabled,A.CullFaceMode.disabled,Bl(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(f,w,O){if(!(w&&this.currentStencilSource!==w.id&&f.isTileClipped()&&O&&O.length))return;this.currentStencilSource=w.id;const U=this.context,q=U.gl;this.nextStencilID+O.length>256&&this.clearStencil(),U.setColorMode(A.ColorMode.disabled),U.setDepthMode(A.DepthMode.disabled);const ee=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const se of O){const ue=this._tileClippingMaskIDs[se.key]=this.nextStencilID++;ee.draw(U,q.TRIANGLES,A.DepthMode.disabled,new A.StencilMode({func:q.ALWAYS,mask:0},ue,255,q.KEEP,q.KEEP,q.REPLACE),A.ColorMode.disabled,A.CullFaceMode.disabled,Bl(se.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const f=this.nextStencilID++,w=this.context.gl;return new A.StencilMode({func:w.NOTEQUAL,mask:255},f,255,w.KEEP,w.KEEP,w.REPLACE)}stencilModeForClipping(f){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(f);const w=this.context.gl;return new A.StencilMode({func:w.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,w.KEEP,w.KEEP,w.REPLACE)}stencilConfigForOverlap(f){const w=this.context.gl,O=f.sort((ee,se)=>se.overscaledZ-ee.overscaledZ),U=O[O.length-1].overscaledZ,q=O[0].overscaledZ-U+1;if(q>1){this.currentStencilSource=void 0,this.nextStencilID+q>256&&this.clearStencil();const ee={};for(let se=0;se<q;se++)ee[se+U]=new A.StencilMode({func:w.GEQUAL,mask:255},se+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=q,[ee,O]}return[{[U]:A.StencilMode.disabled},O]}colorModeForRenderPass(){const f=this.context.gl;if(this._showOverdrawInspector){const w=1/8;return new A.ColorMode([f.CONSTANT_COLOR,f.ONE],new A.Color(w,w,w,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?A.ColorMode.unblended:A.ColorMode.alphaBlended}depthModeForSublayer(f,w,O){if(!this.opaquePassEnabledForLayer())return A.DepthMode.disabled;const U=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new A.DepthMode(O||this.context.gl.LEQUAL,w,[U,U])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(f,w){this.style=f,this.options=w,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(A.exported.now()),this.imageManager.beginFrame();const O=this.style.order,U=this.style._sourceCaches;for(const fe in U){const Ce=U[fe];Ce.used&&Ce.prepare(this.context)}const q={},ee={},se={};for(const fe in U){const Ce=U[fe];q[fe]=Ce.getVisibleCoordinates(),ee[fe]=q[fe].slice().reverse(),se[fe]=Ce.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let fe=0;fe<O.length;fe++)if(this.style._layers[O[fe]].is3D()){this.opaquePassCutoff=fe;break}if(this.terrain&&(this.terrain.updateTileBinding(se),this.opaquePassCutoff=0),!A.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const fe of O){const Ce=this.style._layers[fe],Ae=f._getLayerSourceCache(Ce);if(!Ce.hasOffscreenPass()||Ce.isHidden(this.transform.zoom))continue;const Pe=Ae?ee[Ae.id]:void 0;("custom"===Ce.type||Ce.isSky()||Pe&&Pe.length)&&this.renderLayer(this,Ae,Ce,Pe)}this.depthRangeFor3D=[0,1-(f.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let ue=A.Color.transparent;if(this.style.fog&&(ue=this.style.fog.properties.get("color")),this.context.clear({color:w.showOverdrawInspector?A.Color.black:ue,depth:1}),this.clearStencil(),this._showOverdrawInspector=w.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){const fe=this.style._layers[O[this.currentLayer]],Ce=f._getLayerSourceCache(fe);if(fe.isSky())continue;const Ae=Ce?ee[Ce.id]:void 0;this._renderTileClippingMasks(fe,Ce,Ae),this.renderLayer(this,Ce,fe,Ae)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const fe=this.style._layers[O[this.currentLayer]],Ce=f._getLayerSourceCache(fe);fe.isSky()&&this.renderLayer(this,Ce,fe,Ce?ee[Ce.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<O.length;){const fe=this.style._layers[O[this.currentLayer]],Ce=f._getLayerSourceCache(fe);if(fe.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(fe)){if(fe.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Ae=Ce?("symbol"===fe.type?se:ee)[Ce.id]:void 0;this._renderTileClippingMasks(fe,Ce,Ce?q[Ce.id]:void 0),this.renderLayer(this,Ce,fe,Ae),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let fe=null;A.values(this.style._layers).forEach(Ce=>{const Ae=f._getLayerSourceCache(Ce);Ae&&!Ce.isHidden(this.transform.zoom)&&(!fe||fe.getSource().maxzoom<Ae.getSource().maxzoom)&&(fe=Ae)}),fe&&this.options.showTileBoundaries&&_l.debug(this,fe,fe.getVisibleCoordinates())}this.options.showPadding&&function(fe){const Ce=fe.transform.padding;fh(fe,fe.transform.height-(Ce.top||0),3,Ha),fh(fe,Ce.bottom||0,3,Ui),js(fe,Ce.left||0,3,Vp),js(fe,fe.transform.width-(Ce.right||0),3,Pf);const Ae=fe.transform.centerPoint;var Pe,Ne,$e,et;Nc(Pe=fe,(Ne=Ae.x)-1,($e=fe.transform.height-Ae.y)-10,2,20,et=Up),Nc(Pe,Ne-10,$e-1,20,2,et)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%A.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(A.window.performance.now()),this.saveCanvasCopy())}renderLayer(f,w,O,U){O.isHidden(this.transform.zoom)||("background"===O.type||"sky"===O.type||"custom"===O.type||U&&U.length)&&(this.id=O.id,this.gpuTimingStart(O),_l[O.type](f,w,O,U,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(f){if(!this.options.gpuTiming)return;const w=this.context.extTimerQuery;let O=this.gpuTimers[f.id];O||(O=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:w.createQueryEXT()}),O.calls++,w.beginQueryEXT(w.TIME_ELAPSED_EXT,O.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}collectGpuTimers(){const f=this.gpuTimers;return this.gpuTimers={},f}queryGpuTimers(f){const w={};for(const O in f){const U=f[O],q=this.context.extTimerQuery,ee=q.getQueryObjectEXT(U.query,q.QUERY_RESULT_EXT)/1e6;q.deleteQueryEXT(U.query),w[O]=ee}return w}translatePosMatrix(f,w,O,U,q){if(!O[0]&&!O[1])return f;const ee=q?"map"===U?this.transform.angle:0:"viewport"===U?-this.transform.angle:0;if(ee){const fe=Math.sin(ee),Ce=Math.cos(ee);O=[O[0]*Ce-O[1]*fe,O[0]*fe+O[1]*Ce]}const se=[q?O[0]:On(w,O[0],this.transform.zoom),q?O[1]:On(w,O[1],this.transform.zoom),0],ue=new Float32Array(16);return A.translate(ue,f,se),ue}saveTileTexture(f){const w=this._tileTextures[f.size[0]];w?w.push(f):this._tileTextures[f.size[0]]=[f]}getTileTexture(f){const w=this._tileTextures[f];return w&&w.length>0?w.pop():null}isPatternMissing(f){if(!f)return!1;if(!f.from||!f.to)return!0;const w=this.imageManager.getPattern(f.from.toString()),O=this.imageManager.getPattern(f.to.toString());return!w||!O}currentGlobalDefines(){const f=this.terrain&&this.terrain.renderingToTexture,w=this.style&&this.style.fog,O=[];return this.terrain&&!this.terrain.renderingToTexture&&O.push("TERRAIN"),w&&!f&&0!==w.getOpacity(this.transform.pitch)&&O.push("FOG"),f&&O.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&O.push("OVERDRAW_INSPECTOR"),O}useProgram(f,w,O){this.cache=this.cache||{};const U=O||[],q=this.currentGlobalDefines().concat(U),ee=Yd.cacheKey(f,q,w);return this.cache[ee]||(this.cache[ee]=new Yd(this.context,f,oh[f],w,nd[f],q)),this.cache[ee]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=A.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new A.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(f){this.terrain&&this.terrain.prepareDrawTile(f)}prepareDrawProgram(f,w,O){if(this.terrain&&this.terrain.renderingToTexture)return;const U=this.style.fog;if(U){const q=U.getOpacity(this.transform.pitch);0!==q&&w.setFogUniformValues(f,((ee,se,ue,fe)=>{const Ce=se.properties.get("color"),Ae=ee.frameCounter/1e3%1,Pe=[Ce.r/Ce.a,Ce.g/Ce.a,Ce.b/Ce.a,fe];return{u_fog_matrix:ue?ee.transform.calculateFogTileMatrix(ue):ee.identityMat,u_fog_range:se.getFovAdjustedRange(ee.transform._fov),u_fog_color:Pe,u_fog_horizon_blend:se.properties.get("horizon-blend"),u_fog_temporal_offset:Ae}})(this,U,O,q))}}setTileLoadedFlag(f){this.tileLoaded=f}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const f=this.context.gl,w=f.createTexture();return f.bindTexture(f.TEXTURE_2D,w),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,0,0,f.drawingBufferWidth,f.drawingBufferHeight,0),w}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const f=this.style&&this.style.fog;return!!f&&0!==f.getOpacity(this.transform.pitch)}}class mh{constructor(f=0,w=0,O=0,U=0){if(isNaN(f)||f<0||isNaN(w)||w<0||isNaN(O)||O<0||isNaN(U)||U<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=w,this.left=O,this.right=U}interpolate(f,w,O){return null!=w.top&&null!=f.top&&(this.top=A.number(f.top,w.top,O)),null!=w.bottom&&null!=f.bottom&&(this.bottom=A.number(f.bottom,w.bottom,O)),null!=w.left&&null!=f.left&&(this.left=A.number(f.left,w.left,O)),null!=w.right&&null!=f.right&&(this.right=A.number(f.right,w.right,O)),this}getCenter(f,w){const O=A.clamp((this.left+f-this.right)/2,0,f),U=A.clamp((this.top+w-this.bottom)/2,0,w);return new A.pointGeometry(O,U)}equals(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right}clone(){return new mh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ds(P,f){return[P[4*f],P[4*f+1],P[4*f+2],P[4*f+3]]}function Ga(P,f,w){P[4*f+0]=w[0],P[4*f+1]=w[1],P[4*f+2]=w[2],P[4*f+3]=w[3]}function $d(P,f){const w=Ds(P,3);A.fromQuat(P,f),Ga(P,3,w)}function Vo(P,f){Ga(P,3,[f[0],f[1],f[2],1])}function sa(P,f){const w=A.identity$1([]);return A.rotateZ$1(w,w,-f),A.rotateX$1(w,w,-P),w}function Fr(P,f){const w=[P[0],P[1],0],O=[f[0],f[1],0];if(A.length(w)>=1e-15){const ee=A.normalize([],w);A.scale(O,ee,A.dot(O,ee)),f[0]=O[0],f[1]=O[1]}const U=A.cross([],f,P);if(A.len(U)<1e-15)return null;const q=Math.atan2(-U[1],U[0]);return sa(Math.atan2(Math.sqrt(P[0]*P[0]+P[1]*P[1]),-P[2]),q)}class Bc{constructor(f,w){this.position=f,this.orientation=w}get position(){return this._position}set position(f){this._position=this._renderWorldCopies?function(w){if(!w)return;const O=Array.isArray(w)?new A.MercatorCoordinate(w[0],w[1],w[2]):w;return O.x=A.wrap(O.x,0,1),O}(f):f}lookAtPoint(f,w){if(this.orientation=null,!this.position)return;const O=this._elevation?this._elevation.getAtPointOrZero(A.MercatorCoordinate.fromLngLat(f)):0,U=this.position,q=A.MercatorCoordinate.fromLngLat(f,O),ee=[q.x-U.x,q.y-U.y,q.z-U.z];w||(w=[0,0,1]),w[2]=Math.abs(w[2]),this.orientation=Fr(ee,w)}setPitchBearing(f,w){this.orientation=sa(A.degToRad(f),A.degToRad(-w))}}class zl{constructor(f,w){this._transform=A.identity([]),this._orientation=A.identity$1([]),w&&(this._orientation=w,$d(this._transform,this._orientation)),f&&Vo(this._transform,f)}get mercatorPosition(){const f=this.position;return new A.MercatorCoordinate(f[0],f[1],f[2])}get position(){const f=Ds(this._transform,3);return[f[0],f[1],f[2]]}set position(f){Vo(this._transform,f)}get orientation(){return this._orientation}set orientation(f){this._orientation=f,$d(this._transform,this._orientation)}getPitchBearing(){const f=this.forward(),w=this.right();return{bearing:Math.atan2(-w[1],w[0]),pitch:Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2])}}setPitchBearing(f,w){this._orientation=sa(f,w),$d(this._transform,this._orientation)}forward(){const f=Ds(this._transform,2);return[-f[0],-f[1],-f[2]]}up(){const f=Ds(this._transform,1);return[-f[0],-f[1],-f[2]]}right(){const f=Ds(this._transform,0);return[f[0],f[1],f[2]]}getCameraToWorld(f,w){const O=new Float64Array(16);return A.invert(O,this.getWorldToCamera(f,w)),O}getWorldToCameraPosition(f,w,O){const U=this.position;A.scale(U,U,-f);const q=new Float64Array(16);return A.fromScaling(q,[O,O,O]),A.translate(q,q,U),q[10]*=w,q}getWorldToCamera(f,w){const O=new Float64Array(16),U=new Float64Array(4),q=this.position;return A.conjugate(U,this._orientation),A.scale(q,q,-f),A.fromQuat(O,U),A.translate(O,O,q),O[1]*=-1,O[5]*=-1,O[9]*=-1,O[13]*=-1,O[8]*=w,O[9]*=w,O[10]*=w,O[11]*=w,O}getCameraToClipPerspective(f,w,O,U){const q=new Float64Array(16);return A.perspective(q,f,w,O,U),q}getDistanceToElevation(f){const w=0===f?0:A.mercatorZfromAltitude(f,this.position[1]),O=this.forward();return(w-this.position[2])/O[2]}clone(){return new zl([...this.position],[...this.orientation])}}class gh{constructor(f,w,O,U,q){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===q||q,this._minZoom=f||0,this._maxZoom=w||22,this._minPitch=null==O?0:O,this._maxPitch=null==U?60:U,this.setMaxBounds(),this.width=0,this.height=0,this._center=new A.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new zl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const f=new gh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f._elevation=this._elevation,f._centerAltitude=this._centerAltitude,f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f.cameraElevationReference=this.cameraElevationReference,f._center=this._center,f._setZoom(this.zoom),f._cameraZoom=this._cameraZoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._averageElevation=this._averageElevation,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._camera=this._camera.clone(),f._calcMatrices(),f.freezeTileCoverage=this.freezeTileCoverage,f}get elevation(){return this._elevation}set elevation(f){this._elevation!==f&&(this._elevation=f,f?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(f){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),f&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))}get maxZoom(){return this._maxZoom}set maxZoom(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))}get minPitch(){return this._minPitch}set minPitch(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))}get maxPitch(){return this._maxPitch}set maxPitch(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(f){void 0===f?f=!0:null===f&&(f=!1),this._renderWorldCopies=f}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const f=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(f))}get pixelsPerMeter(){return A.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return A.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new A.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(f){const w=-A.wrap(f,-180,180)*Math.PI/180;var O,U,q,ee,se,ue,fe,Ce,Ae,Pe;this.angle!==w&&(this._unmodified=!1,this.angle=w,this._calcMatrices(),this.rotationMatrix=(O=new A.ARRAY_TYPE(4),A.ARRAY_TYPE!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O),U=this.rotationMatrix,ee=this.angle,se=(q=this.rotationMatrix)[0],ue=q[1],fe=q[2],Ce=q[3],Ae=Math.sin(ee),Pe=Math.cos(ee),U[0]=se*Pe+fe*Ae,U[1]=ue*Pe+Ce*Ae,U[2]=se*-Ae+fe*Pe,U[3]=ue*-Ae+Ce*Pe)}get pitch(){return this._pitch/Math.PI*180}set pitch(f){const w=A.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==w&&(this._unmodified=!1,this._pitch=w,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(f){this._averageElevation=f,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(f){const w=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==w&&(this._unmodified=!1,this._setZoom(w),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(f){this._zoom=f,this.scale=this.zoomScale(f),this.tileZoom=Math.floor(f),this.zoomFraction=f-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const f=this._elevation.getAtPointOrZero(A.MercatorCoordinate.fromLngLat(this.center),-1);return-1===f?(this._cameraZoom=null,!1):(this._centerAltitude=f,!0)}_updateCameraOnTerrain(){const f=this.cameraToCenterDistance/this.worldSize,w=A.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(w+f)}sampleAverageElevation(){if(!this._elevation)return 0;const f=this._elevation,w=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],O=this.horizonLineFromTop();let U=0,q=0;for(let ee=0;ee<w.length;ee++){const se=new A.pointGeometry(w[ee][0]*this.width,O+w[ee][1]*(this.height-O)),ue=f.pointCoordinate(se);if(!ue)continue;const fe=1/Math.hypot(ue[0]-this._camera.position[0],ue[1]-this._camera.position[1]);U+=ue[3]*fe,q+=fe}return 0===q?NaN:U/q}get center(){return this._center}set center(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const f=this._cameraZoom,w=this._elevation.getAtPointOrZero(A.MercatorCoordinate.fromLngLat(this.center)),O=A.mercatorZfromAltitude(w,this.center.lat),U=this._mercatorZfromZoom(f),q=this._mercatorZfromZoom(this._maxZoom),ee=Math.max(U-O,q);this._setZoom(this._zoomFromMercatorZ(ee))}get padding(){return this._edgeInsets.toJSON()}set padding(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())}computeZoomRelativeTo(f){const w=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,f.toAltitude()));let O;O=f.z<this._camera.position[2]?[w.x,w.y,w.z]:[f.x,f.y,f.z];const U=A.length(A.sub([],this._camera.position,O));return A.clamp(this._zoomFromMercatorZ(U),this._minZoom,this._maxZoom)}setFreeCameraOptions(f){if(!this.height||!f.position&&!f.orientation)return;this._updateCameraState();let w=!1;if(f.orientation&&!A.exactEquals(f.orientation,this._camera.orientation)&&(w=this._setCameraOrientation(f.orientation)),f.position){const O=[f.position.x,f.position.y,f.position.z];A.exactEquals$1(O,this._camera.position)||(this._setCameraPosition(O),w=!0)}w&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const f=this._camera.position,w=new Bc;return w.position=new A.MercatorCoordinate(f[0],f[1],f[2]),w.orientation=this._camera.orientation,w._elevation=this.elevation,w._renderWorldCopies=this._renderWorldCopies,w}_setCameraOrientation(f){if(!A.length$1(f))return!1;A.normalize$1(f,f);const w=A.transformQuat([],[0,0,-1],f),O=A.transformQuat([],[0,-1,0],f);if(O[2]<0)return!1;const U=Fr(w,O);return!!U&&(this._camera.orientation=U,!0)}_setCameraPosition(f){const w=this.zoomScale(this.minZoom)*this.tileSize,O=this.zoomScale(this.maxZoom)*this.tileSize,U=this.cameraToCenterDistance;f[2]=A.clamp(f[2],U/O,U/w),this._camera.position=f}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(f){return this._edgeInsets.equals(f)}interpolatePadding(f,w,O){this._unmodified=!1,this._edgeInsets.interpolate(f,w,O),this._constrain(),this._calcMatrices()}coveringZoomLevel(f){const w=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,w)}getVisibleUnwrappedCoordinates(f){const w=[new A.UnwrappedTileID(0,f)];if(this._renderWorldCopies){const O=this.pointCoordinate(new A.pointGeometry(0,0)),U=this.pointCoordinate(new A.pointGeometry(this.width,0)),q=this.pointCoordinate(new A.pointGeometry(this.width,this.height)),ee=this.pointCoordinate(new A.pointGeometry(0,this.height)),se=Math.floor(Math.min(O.x,U.x,q.x,ee.x)),ue=Math.floor(Math.max(O.x,U.x,q.x,ee.x)),fe=1;for(let Ce=se-fe;Ce<=ue+fe;Ce++)0!==Ce&&w.push(new A.UnwrappedTileID(Ce,f))}return w}coveringTiles(f){let w=this.coveringZoomLevel(f);const O=w,U=this.elevation&&!f.isTerrainDEM;if(void 0!==f.minzoom&&w<f.minzoom)return[];void 0!==f.maxzoom&&w>f.maxzoom&&(w=f.maxzoom);const q=A.MercatorCoordinate.fromLngLat(this.center),ee=1<<w,se=[ee*q.x,ee*q.y,0],ue=Rn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w),fe=this.pointCoordinate(this.getCameraPoint()),Ce=ee*A.mercatorZfromAltitude(1,this.center.lat),Ae=this._camera.position[2]/A.mercatorZfromAltitude(1,this.center.lat),Pe=[ee*fe.x,ee*fe.y,Ae],Ne=this.cameraToCenterDistance/f.tileSize*(f.roundZoom?1:.502),$e=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?w:0,et=f.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,mt=f.isTerrainDEM?-et:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ue=ut=>({aabb:new dn([ut*ee,0,mt],[(ut+1)*ee,ee,et]),zoom:0,x:0,y:0,wrap:ut,fullyVisible:!1}),tt=[],ot=[],vt=w,rt=f.reparseOverscaled?O:w,ht=ut=>{if(!this._elevation||!ut.tileID)return;const En=this._elevation.getMinMaxForTile(ut.tileID),bn=ut.aabb;En?(bn.min[2]=En.min,bn.max[2]=En.max,bn.center[2]=(bn.min[2]+bn.max[2])/2):(ut.shouldSplit=un(ut),ut.shouldSplit||(bn.min[2]=bn.max[2]=bn.center[2]=this._centerAltitude))},Kt=ut=>ut*ut,sn=Kt((Ae-this._centerAltitude)*Ce),un=ut=>{if(ut.zoom<$e)return!0;if(ut.zoom===vt)return!1;if(null!=ut.shouldSplit)return ut.shouldSplit;const En=ut.aabb.distanceX(Pe),bn=ut.aabb.distanceY(Pe);let Zn=sn;U&&(Zn=Kt(ut.aabb.distanceZ(Pe)*Ce));const An=En*En+bn*bn+Zn;return An<Kt((1<<vt-ut.zoom)*Ne*((kn,Ti)=>{if(Ti*Kt(.707)<kn)return 1;const ci=Math.sqrt(Ti/kn);return ci/(1.4144271570014144+(Math.pow(1.1,ci-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Zn,sn),An))};if(this._renderWorldCopies)for(let ut=1;ut<=3;ut++)tt.push(Ue(-ut)),tt.push(Ue(ut));for(tt.push(Ue(0));tt.length>0;){const ut=tt.pop(),En=ut.x,bn=ut.y;let Zn=ut.fullyVisible;if(!Zn){const An=ut.aabb.intersects(ue);if(0===An)continue;Zn=2===An}if(ut.zoom!==vt&&un(ut))for(let An=0;An<4;An++){const kn=(En<<1)+An%2,Ti=(bn<<1)+(An>>1),ci={aabb:ut.aabb.quadrant(An),zoom:ut.zoom+1,x:kn,y:Ti,wrap:ut.wrap,fullyVisible:Zn,tileID:void 0,shouldSplit:void 0};U&&(ci.tileID=new A.OverscaledTileID(ut.zoom+1===vt?rt:ut.zoom+1,ut.wrap,ut.zoom+1,kn,Ti),ht(ci)),tt.push(ci)}else{const An=ut.zoom===vt?rt:ut.zoom;if(f.minzoom&&f.minzoom>An)continue;const kn=se[0]-(.5+En+(ut.wrap<<ut.zoom))*(1<<w-ut.zoom),Ti=se[1]-.5-bn,ci=ut.tileID?ut.tileID:new A.OverscaledTileID(An,ut.wrap,ut.zoom,En,bn);ot.push({tileID:ci,distanceSq:kn*kn+Ti*Ti})}}if(this.fogCullDistSq){const ut=this.fogCullDistSq;ot.splice(0,ot.length,...ot.filter(En=>{const bn=[0,0,0,1],Zn=[A.EXTENT,A.EXTENT,0,1],An=this.calculateFogTileMatrix(En.tileID.toUnwrapped());A.transformMat4(bn,bn,An),A.transformMat4(Zn,Zn,An);const kn=A.getAABBPointSquareDist(bn,Zn);if(0===kn)return!0;let Ti=!1;const ci=this.horizonLineFromTop();if(kn>ut&&0!==ci){const ar=this.calculateProjMatrix(En.tileID.toUnwrapped());let mr;U&&this._elevation&&(mr=this._elevation.getMinMaxForTile(En.tileID)),mr||(mr={min:mt,max:et});const Lr=A.furthestTileCorner(this.bearing),Bi=[Lr[0]*A.EXTENT,Lr[1]*A.EXTENT,mr.max];A.transformMat4$1(Bi,Bi,ar),Ti=(1-Bi[1])*this.height*.5<ci}return kn<ut||Ti}))}return ot.sort((ut,En)=>ut.distanceSq-En.distanceSq).map(ut=>ut.tileID)}resize(f,w){this.width=f,this.height=w,this.pixelsToGLUnits=[2/f,-2/w],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(f){return Math.pow(2,f)}scaleZoom(f){return Math.log(f)/Math.LN2}project(f){const w=A.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new A.pointGeometry(A.mercatorXfromLng(f.lng)*this.worldSize,A.mercatorYfromLat(w)*this.worldSize)}unproject(f){return new A.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(f,w){const O=this.pointCoordinate(w),U=this.pointCoordinate(this.centerPoint),q=this.locationCoordinate(f),ee=new A.MercatorCoordinate(q.x-(O.x-U.x),q.y-(O.y-U.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(f){this.center=this.coordinateLocation(f),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(f){return this._coordinatePoint(this.locationCoordinate(f),!1)}locationPoint3D(f){return this._coordinatePoint(this.locationCoordinate(f),!0)}pointLocation(f){return this.coordinateLocation(this.pointCoordinate(f))}pointLocation3D(f){return this.coordinateLocation(this.pointCoordinate3D(f))}locationCoordinate(f){return A.MercatorCoordinate.fromLngLat(f)}coordinateLocation(f){return f.toLngLat()}pointRayIntersection(f,w){const O=null!=w?w:this._centerAltitude,U=[f.x,f.y,0,1],q=[f.x,f.y,1,1];A.transformMat4(U,U,this.pixelMatrixInverse),A.transformMat4(q,q,this.pixelMatrixInverse);const ee=q[3];A.scale$2(U,U,1/U[3]),A.scale$2(q,q,1/ee);const se=U[2],ue=q[2];return{p0:U,p1:q,t:se===ue?0:(O-se)/(ue-se)}}screenPointToMercatorRay(f){const w=[f.x,f.y,0,1],O=[f.x,f.y,1,1];return A.transformMat4(w,w,this.pixelMatrixInverse),A.transformMat4(O,O,this.pixelMatrixInverse),A.scale$2(w,w,1/w[3]),A.scale$2(O,O,1/O[3]),w[2]=A.mercatorZfromAltitude(w[2],this._center.lat)*this.worldSize,O[2]=A.mercatorZfromAltitude(O[2],this._center.lat)*this.worldSize,A.scale$2(w,w,1/this.worldSize),A.scale$2(O,O,1/this.worldSize),new Qe([w[0],w[1],w[2]],A.normalize([],A.sub([],O,w)))}rayIntersectionCoordinate(f){const{p0:w,p1:O,t:U}=f,q=A.mercatorZfromAltitude(w[2],this._center.lat),ee=A.mercatorZfromAltitude(O[2],this._center.lat);return new A.MercatorCoordinate(A.number(w[0],O[0],U)/this.worldSize,A.number(w[1],O[1],U)/this.worldSize,A.number(q,ee,U))}pointCoordinate(f){const w=this.horizonLineFromTop(!1),O=new A.pointGeometry(f.x,Math.max(w,f.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(O))}pointCoordinate3D(f){if(!this.elevation)return this.pointCoordinate(f);const w=this.elevation;let O=this.elevation.pointCoordinate(f);if(O)return new A.MercatorCoordinate(O[0],O[1],O[2]);let U=0,q=this.horizonLineFromTop();if(f.y>q)return this.pointCoordinate(f);const ee=.02*q,se=f.clone();for(let ue=0;ue<10&&q-U>ee;ue++){se.y=A.number(U,q,.66);const fe=w.pointCoordinate(se);fe?(q=se.y,O=fe):U=se.y}return O?new A.MercatorCoordinate(O[0],O[1],O[2]):this.pointCoordinate(f)}isPointAboveHorizon(f){if(this.elevation)return!this.elevation.pointCoordinate(f);{const w=this.horizonLineFromTop();return f.y<w}}_coordinatePoint(f,w){const O=w&&this.elevation?this.elevation.getAtPointOrZero(f,this._centerAltitude):this._centerAltitude,U=[f.x*this.worldSize,f.y*this.worldSize,O+f.toAltitude(),1];return A.transformMat4(U,U,this.pixelMatrix),U[3]>0?new A.pointGeometry(U[0]/U[3],U[1]/U[3]):new A.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new A.LngLatBounds).extend(this.pointLocation(new A.pointGeometry(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new A.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new A.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new A.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}_getBounds3D(){const f=this.elevation,w=f.visibleDemTiles.reduce((U,q)=>{if(q.dem){const ee=q.dem.tree;U.min=Math.min(U.min,ee.minimums[0]),U.max=Math.max(U.max,ee.maximums[0])}return U},{min:Number.MAX_VALUE,max:0});w.min*=f.exaggeration(),w.max*=f.exaggeration();const O=this.horizonLineFromTop();return[new A.pointGeometry(0,O),new A.pointGeometry(this.width,O),new A.pointGeometry(this.width,this.height),new A.pointGeometry(0,this.height)].reduce((U,q)=>U.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(q,w.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(q,w.max)))),new A.LngLatBounds)}horizonLineFromTop(f=!0){const w=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,O=this.height/2-.97*w;return f?Math.max(0,O):O}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new A.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(f,w){const O=f.canonical,U=w/this.zoomScale(O.z),q=O.x+Math.pow(2,O.z)*f.wrap,ee=A.identity(new Float64Array(16));return A.translate(ee,ee,[q*U,O.y*U,0]),A.scale$1(ee,ee,[U/A.EXTENT,U/A.EXTENT,1]),ee}calculateFogTileMatrix(f){const w=f.key,O=this._fogTileMatrixCache;if(O[w])return O[w];const U=this.calculatePosMatrix(f,this.cameraWorldSize);return A.multiply(U,this.worldToFogMatrix,U),O[w]=new Float32Array(U),O[w]}calculateProjMatrix(f,w=!1){const O=f.key,U=w?this._alignedProjMatrixCache:this._projMatrixCache;if(U[O])return U[O];const q=this.calculatePosMatrix(f,this.worldSize);return A.multiply(q,w?this.alignedProjMatrix:this.projMatrix,q),U[O]=new Float32Array(q),U[O]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const f=this._elevation;this._updateCameraState();const w=this._camera.position,O=this._camera.forward();if(w[2]<=0||O[2]>=0)return;const U=A.mercatorZfromAltitude(1,this._center.lat);w[2]/=U,O[2]/=U,A.normalize(O,O);const q=f.raycast(w,O,f.exaggeration());if(q){const ee=A.scaleAndAdd([],w,O,q),se=new A.MercatorCoordinate(ee[0],ee[1],A.mercatorZfromAltitude(ee[2],A.latFromMercatorY(ee[1]))),ue=this._camera.position,fe=se.z+A.length([se.x-ue[0],se.y-ue[1],se.z-ue[2]]);this._cameraZoom=this._zoomFromMercatorZ(fe),this._centerAltitude=se.toAltitude(),this._center=se.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const f=this._elevation;this._updateCameraState();const w=f.getAtPointOrZero(this._camera.mercatorPosition),O=this._minimumHeightOverTerrain()*Math.cos(A.degToRad(this._maxPitch)),U=A.mercatorZfromAltitude(w,this._center.lat),q=this._camera.position[2]-U;if(q<O){const ee=A.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),se=this._camera.mercatorPosition,ue=[ee.x-se.x,ee.y-se.y,ee.z-se.z],fe=A.length(ue);ue[2]-=O-q;const Ce=A.length(ue);if(0===Ce)return;A.scale(ue,ue,fe/Ce),this._camera.position=[ee.x-ue[0],ee.y-ue[1],ee.z-ue[2]],this._camera.orientation=Fr(ue,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let f,w,O,U,q=-90,ee=90,se=-180,ue=180;const fe=this.size,Ce=this._unmodified;if(this.latRange){const Ne=this.latRange;q=A.mercatorYfromLat(Ne[1])*this.worldSize,ee=A.mercatorYfromLat(Ne[0])*this.worldSize,f=ee-q<fe.y?fe.y/(ee-q):0}if(this.lngRange){const Ne=this.lngRange;se=A.mercatorXfromLng(Ne[0])*this.worldSize,ue=A.mercatorXfromLng(Ne[1])*this.worldSize,w=ue-se<fe.x?fe.x/(ue-se):0}const Ae=this.point,Pe=Math.max(w||0,f||0);if(Pe)return this.center=this.unproject(new A.pointGeometry(w?(ue+se)/2:Ae.x,f?(ee+q)/2:Ae.y)),this.zoom+=this.scaleZoom(Pe),this._unmodified=Ce,void(this._constraining=!1);if(this.latRange){const Ne=Ae.y,$e=fe.y/2;Ne-$e<q&&(U=q+$e),Ne+$e>ee&&(U=ee-$e)}if(this.lngRange){const Ne=Ae.x,$e=fe.x/2;Ne-$e<se&&(O=se+$e),Ne+$e>ue&&(O=ue-$e)}void 0===O&&void 0===U||(this.center=this.unproject(new A.pointGeometry(void 0!==O?O:Ae.x,void 0!==U?U:Ae.y))),this._constrainCameraAltitude(),this._unmodified=Ce,this._constraining=!1}_minZoomForBounds(){const f=(U,q)=>Math.log2(U/(this.tileSize*Math.abs(q[1]-q[0])));let w=0;if(this.latRange){const U=this.latRange;w=f(this.height,[A.mercatorYfromLat(U[0]),A.mercatorYfromLat(U[1])])}let O=0;if(this.lngRange){const U=this.lngRange;O=f(this.width,[A.mercatorXfromLng(U[0]),A.mercatorXfromLng(U[1])])}return Math.max(w,O)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const f=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const w=this.pixelsPerMeter;this._updateCameraState();const O=Math.PI/2+this._pitch,U=this.fovAboveCenter,q=this.elevation?this.elevation.getMinElevationBelowMSL()*w:0,ee=(this._camera.position[2]*this.worldSize-q)/Math.cos(this._pitch),se=Math.sin(U)*ee/Math.sin(A.clamp(Math.PI-O-U,.01,Math.PI-.01)),ue=this.point,fe=ue.x,Ce=ue.y,Ae=Math.cos(Math.PI/2-this._pitch)*se+ee,Pe=Math.min(1.01*Ae,ee*(1/this._horizonShift)),Ne=this.height/50,$e=this._camera.getWorldToCamera(this.worldSize,w),et=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,Ne,Pe);et[8]=2*-f.x/this.width,et[9]=2*f.y/this.height;let mt=A.mul$1([],et,$e);this.mercatorMatrix=A.scale$1([],mt,[this.worldSize,this.worldSize,this.worldSize/w]),this.projMatrix=mt,this.invProjMatrix=A.invert(new Float64Array(16),this.projMatrix);const Ue=new Float32Array(16);A.identity(Ue),A.scale$1(Ue,Ue,[1,-1,1]),A.rotateX(Ue,Ue,this._pitch),A.rotateZ(Ue,Ue,this.angle);const tt=A.perspective(new Float32Array(16),this._fov,this.width/this.height,Ne,Pe),ot=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;tt[8]=2*-f.x/this.width,tt[9]=2*(f.y+ot)/this.height,this.skyboxMatrix=A.multiply(Ue,tt,Ue);const vt=this.width%2/2,rt=this.height%2/2,ht=Math.cos(this.angle),Kt=Math.sin(this.angle),sn=fe-Math.round(fe)+ht*vt+Kt*rt,un=Ce-Math.round(Ce)+ht*rt+Kt*vt,ut=new Float64Array(mt);if(A.translate(ut,ut,[sn>.5?sn-1:sn,un>.5?un-1:un,0]),this.alignedProjMatrix=ut,mt=A.create$1(),A.scale$1(mt,mt,[this.width/2,-this.height/2,1]),A.translate(mt,mt,[1,-1,0]),this.labelPlaneMatrix=mt,mt=A.create$1(),A.scale$1(mt,mt,[1,-1,1]),A.translate(mt,mt,[-1,-1,0]),A.scale$1(mt,mt,[2/this.width,2/this.height,1]),this.glCoordMatrix=mt,this.pixelMatrix=A.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),mt=A.invert(new Float64Array(16),this.pixelMatrix),!mt)throw new Error("failed to invert matrix");this.pixelMatrixInverse=mt,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const f=this.cameraWorldSize,w=this.cameraPixelsPerMeter,O=this._camera.position,U=1/this.height,q=[f,f,w];A.scale(q,q,U),A.scale(O,O,-1),A.multiply$1(O,O,q);const ee=A.create$1();A.translate(ee,ee,O),A.scale$1(ee,ee,q),this.mercatorFogMatrix=ee,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(f,w,U)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const f=this._camera.forward(),w=this.cameraToCenterDistance,O=this.point,U=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-A.mercatorZfromAltitude(this._centerAltitude,this.center.lat),q=this.cameraToCenterDistance/U;this._camera.position=[O.x/this.worldSize-f[0]*w/q,O.y/this.worldSize-f[1]*w/q,A.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-f[2]*w/q]}_translateCameraConstrained(f){const w=this._maxCameraBoundsDistance()*Math.cos(this._pitch),O=f[2];let U=1;O>0&&(U=Math.min((w-this._camera.position[2])/O,1)),this._camera.position=A.scaleAndAdd([],this._camera.position,f,U),this._updateStateFromCamera()}_updateStateFromCamera(){const f=this._camera.position,w=this._camera.forward(),{pitch:O,bearing:U}=this._camera.getPitchBearing(),q=A.mercatorZfromAltitude(this._centerAltitude,this.center.lat),ee=this._mercatorZfromZoom(this._maxZoom)*Math.cos(A.degToRad(this._maxPitch)),se=Math.max((f[2]-q)/Math.cos(O),ee),ue=this._zoomFromMercatorZ(se);A.scaleAndAdd(f,f,w,se),this._pitch=A.clamp(O,A.degToRad(this.minPitch),A.degToRad(this.maxPitch)),this.angle=A.wrap(U,-Math.PI,Math.PI),this._setZoom(A.clamp(ue,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new A.MercatorCoordinate(f[0],f[1],f[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(f){return Math.pow(2,f)*this.tileSize}_mercatorZfromZoom(f){return this.cameraToCenterDistance/this._worldSizeFromZoom(f)}_minimumHeightOverTerrain(){const f=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(f)}_zoomFromMercatorZ(f){return this.scaleZoom(this.cameraToCenterDistance/(f*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(f,w){const O=Math.min(f.x,w.x),U=Math.max(f.x,w.x),q=Math.min(f.y,w.y),ee=Math.max(f.y,w.y),se=[new A.pointGeometry(O,q),new A.pointGeometry(U,ee),new A.pointGeometry(O,ee),new A.pointGeometry(U,q)],ue=this._renderWorldCopies?-3:0,fe=this._renderWorldCopies?4:1;for(const Ce of se){const Ae=this.pointRayIntersection(Ce);if(Ae.t<0)return!0;const Pe=this.rayIntersectionCoordinate(Ae);if(Pe.x<ue||Pe.y<0||Pe.x>fe||Pe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+A.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new A.pointGeometry(0,0),new A.pointGeometry(this.width,this.height))}zoomDeltaToMovement(f,w){const O=A.length(A.sub([],this._camera.position,f)),U=this._zoomFromMercatorZ(O)+w;return O-this._mercatorZfromZoom(U)}getCameraPoint(){const f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new A.pointGeometry(0,f))}}function rd(P,f){let w=!1,O=null;const U=()=>{O=null,w&&(P(),O=setTimeout(U,f),w=!1)};return()=>(w=!0,O||U(),O)}class Da{constructor(f){this._hashName=f&&encodeURIComponent(f),A.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=rd(this._updateHashUnthrottled.bind(this),300)}addTo(f){return this._map=f,A.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return A.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(f){const w=this._map.getCenter(),O=Math.round(100*this._map.getZoom())/100,U=Math.ceil((O*Math.LN2+Math.log(512/360/.5))/Math.LN10),q=Math.pow(10,U),ee=Math.round(w.lng*q)/q,se=Math.round(w.lat*q)/q,ue=this._map.getBearing(),fe=this._map.getPitch();let Ce="";if(Ce+=f?`/${ee}/${se}/${O}`:`${O}/${se}/${ee}`,(ue||fe)&&(Ce+="/"+Math.round(10*ue)/10),fe&&(Ce+=`/${Math.round(fe)}`),this._hashName){const Ae=this._hashName;let Pe=!1;const Ne=A.window.location.hash.slice(1).split("&").map($e=>{const et=$e.split("=")[0];return et===Ae?(Pe=!0,`${et}=${Ce}`):$e}).filter($e=>$e);return Pe||Ne.push(`${Ae}=${Ce}`),`#${Ne.join("&")}`}return`#${Ce}`}_getCurrentHash(){const f=A.window.location.hash.replace("#","");if(this._hashName){let w;return f.split("&").map(O=>O.split("=")).forEach(O=>{O[0]===this._hashName&&(w=O)}),(w&&w[1]||"").split("/")}return f.split("/")}_onHashChange(){const f=this._getCurrentHash();if(f.length>=3&&!f.some(w=>isNaN(w))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:w,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const f=A.window.location.href.replace(/(#.+)?$/,this.getHashString());A.window.history.replaceState(A.window.history.state,null,f)}}const ps={linearity:.3,easing:A.bezier(0,0,.3,1)},yl=A.extend({deceleration:2500,maxSpeed:1400},ps),Vl=A.extend({deceleration:20,maxSpeed:1400},ps),_h=A.extend({deceleration:1e3,maxSpeed:360},ps),yh=A.extend({deceleration:1e3,maxSpeed:90},ps);class vl{constructor(f){this._map=f,this.clear()}clear(){this._inertiaBuffer=[]}record(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.exported.now(),settings:f})}_drainInertiaBuffer(){const f=this._inertiaBuffer,w=A.exported.now();for(;f.length>0&&w-f[0].time>160;)f.shift()}_onMoveEnd(f){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const w={zoom:0,bearing:0,pitch:0,pan:new A.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:q}of this._inertiaBuffer)w.zoom+=q.zoomDelta||0,w.bearing+=q.bearingDelta||0,w.pitch+=q.pitchDelta||0,q.panDelta&&w.pan._add(q.panDelta),q.around&&(w.around=q.around),q.pinchAround&&(w.pinchAround=q.pinchAround);const O=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,U={};if(w.pan.mag()){const q=rs(w.pan.mag(),O,A.extend({},yl,f||{}));U.offset=w.pan.mult(q.amount/w.pan.mag()),U.center=this._map.transform.center,Tu(U,q)}if(w.zoom){const q=rs(w.zoom,O,Vl);U.zoom=this._map.transform.zoom+q.amount,Tu(U,q)}if(w.bearing){const q=rs(w.bearing,O,_h);U.bearing=this._map.transform.bearing+A.clamp(q.amount,-179,179),Tu(U,q)}if(w.pitch){const q=rs(w.pitch,O,yh);U.pitch=this._map.transform.pitch+q.amount,Tu(U,q)}if(U.zoom||U.bearing){const q=void 0===w.pinchAround?w.around:w.pinchAround;U.around=q?this._map.unproject(q):this._map.getCenter()}return this.clear(),A.extend(U,{noMoveStart:!0})}}function Tu(P,f){(!P.duration||P.duration<f.duration)&&(P.duration=f.duration,P.easing=f.easing)}function rs(P,f,w){const{maxSpeed:O,linearity:U,deceleration:q}=w,ee=A.clamp(P*U/(f/1e3),-O,O),se=Math.abs(ee)/(q*U);return{easing:w.easing,duration:1e3*se,amount:ee*(se/2)}}class fs extends A.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,w,O,U={}){const q=Ge.mousePos(w.getCanvasContainer(),O),ee=w.unproject(q);super(f,A.extend({point:q,lngLat:ee,originalEvent:O},U)),this._defaultPrevented=!1,this.target=w}}class hc extends A.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,w,O){const U="touchend"===f?O.changedTouches:O.touches,q=Ge.touchPos(w.getCanvasContainer(),U),ee=q.map(ue=>w.unproject(ue)),se=q.reduce((ue,fe,Ce,Ae)=>ue.add(fe.div(Ae.length)),new A.pointGeometry(0,0));super(f,{points:q,point:se,lngLats:ee,lngLat:w.unproject(se),originalEvent:O}),this._defaultPrevented=!1}}class Gp extends A.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,w,O){super(f,{originalEvent:O}),this._defaultPrevented=!1}}class dc{constructor(f,w){this._map=f,this._clickTolerance=w.clickTolerance}reset(){delete this._mousedownPos}wheel(f){return this._firePreventable(new Gp(f.type,this._map,f))}mousedown(f,w){return this._mousedownPos=w,this._firePreventable(new fs(f.type,this._map,f))}mouseup(f){this._map.fire(new fs(f.type,this._map,f))}click(f,w){this._mousedownPos&&this._mousedownPos.dist(w)>=this._clickTolerance||this._map.fire(new fs(f.type,this._map,f))}dblclick(f){return this._firePreventable(new fs(f.type,this._map,f))}mouseover(f){this._map.fire(new fs(f.type,this._map,f))}mouseout(f){this._map.fire(new fs(f.type,this._map,f))}touchstart(f){return this._firePreventable(new hc(f.type,this._map,f))}touchmove(f){this._map.fire(new hc(f.type,this._map,f))}touchend(f){this._map.fire(new hc(f.type,this._map,f))}touchcancel(f){this._map.fire(new hc(f.type,this._map,f))}_firePreventable(f){if(this._map.fire(f),f.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zc{constructor(f){this._map=f}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(f){this._map.fire(new fs(f.type,this._map,f))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new fs(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xd{constructor(f,w){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=w.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(f,w){this.isEnabled()&&f.shiftKey&&0===f.button&&(Ge.disableDrag(),this._startPos=this._lastPos=w,this._active=!0)}mousemoveWindow(f,w){if(!this._active)return;const O=w;if(this._lastPos.equals(O)||!this._box&&O.dist(this._startPos)<this._clickTolerance)return;const U=this._startPos;this._lastPos=O,this._box||(this._box=Ge.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));const q=Math.min(U.x,O.x),ee=Math.max(U.x,O.x),se=Math.min(U.y,O.y),ue=Math.max(U.y,O.y);this._map._requestDomTask(()=>{this._box&&(Ge.setTransform(this._box,`translate(${q}px,${se}px)`),this._box.style.width=ee-q+"px",this._box.style.height=ue-se+"px")})}mouseupWindow(f,w){if(!this._active||0!==f.button)return;const O=this._startPos,U=w;if(this.reset(),Ge.suppressClick(),O.x!==U.x||O.y!==U.y)return this._map.fire(new A.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:q=>q.fitScreenCoordinates(O,U,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",f)}keydown(f){this._active&&27===f.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",f))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Ge.remove(this._box),this._box=null),Ge.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(f,w){return this._map.fire(new A.Event(f,{originalEvent:w}))}}function jp(P,f){const w={};for(let O=0;O<P.length;O++)w[P[O].identifier]=f[O];return w}class Jm{constructor(f){this.reset(),this.numTouches=f.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(f,w,O){(this.centroid||O.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=f.timeStamp),O.length===this.numTouches&&(this.centroid=function(U){const q=new A.pointGeometry(0,0);for(const ee of U)q._add(ee);return q.div(U.length)}(w),this.touches=jp(O,w)))}touchmove(f,w,O){if(this.aborted||!this.centroid)return;const U=jp(O,w);for(const q in this.touches){const ee=this.touches[q],se=U[q];(!se||se.dist(ee)>30)&&(this.aborted=!0)}}touchend(f,w,O){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),0===O.length){const U=!this.aborted&&this.centroid;if(this.reset(),U)return U}}}class Rf{constructor(f){this.singleTap=new Jm(f),this.numTaps=f.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(f,w,O){this.singleTap.touchstart(f,w,O)}touchmove(f,w,O){this.singleTap.touchmove(f,w,O)}touchend(f,w,O){const U=this.singleTap.touchend(f,w,O);if(U){const q=f.timeStamp-this.lastTime<500,ee=!this.lastTap||this.lastTap.dist(U)<30;if(q&&ee||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=U,this.count===this.numTaps)return this.reset(),U}}}class Qd{constructor(){this._zoomIn=new Rf({numTouches:1,numTaps:2}),this._zoomOut=new Rf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(f,w,O){this._zoomIn.touchstart(f,w,O),this._zoomOut.touchstart(f,w,O)}touchmove(f,w,O){this._zoomIn.touchmove(f,w,O),this._zoomOut.touchmove(f,w,O)}touchend(f,w,O){const U=this._zoomIn.touchend(f,w,O),q=this._zoomOut.touchend(f,w,O);return U?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()+1,around:ee.unproject(U)},{originalEvent:f})}):q?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()-1,around:ee.unproject(q)},{originalEvent:f})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Yp={0:1,2:2};class Qr{constructor(f){this.reset(),this._clickTolerance=f.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(f,w){return!1}_move(f,w){return{}}mousedown(f,w){if(this._lastPoint)return;const O=Ge.mouseButton(f);this._correctButton(f,O)&&(this._lastPoint=w,this._eventButton=O)}mousemoveWindow(f,w){const O=this._lastPoint;if(O)if(f.preventDefault(),function(U,q){const ee=Yp[q];return void 0===U.buttons||(U.buttons&ee)!==ee}(f,this._eventButton))this.reset();else if(this._moved||!(w.dist(O)<this._clickTolerance))return this._moved=!0,this._lastPoint=w,this._move(O,w)}mouseupWindow(f){this._lastPoint&&Ge.mouseButton(f)===this._eventButton&&(this._moved&&Ge.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class od extends Qr{mousedown(f,w){super.mousedown(f,w),this._lastPoint&&(this._active=!0)}_correctButton(f,w){return 0===w&&!f.ctrlKey}_move(f,w){return{around:w,panDelta:w.sub(f)}}}class bl extends Qr{_correctButton(f,w){return 0===w&&f.ctrlKey||2===w}_move(f,w){const O=.8*(w.x-f.x);if(O)return this._active=!0,{bearingDelta:O}}contextmenu(f){f.preventDefault()}}class vh extends Qr{_correctButton(f,w){return 0===w&&f.ctrlKey||2===w}_move(f,w){const O=-.5*(w.y-f.y);if(O)return this._active=!0,{pitchDelta:O}}contextmenu(f){f.preventDefault()}}class aa{constructor(f){this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new A.pointGeometry(0,0)}touchstart(f,w,O){return this._calculateTransform(f,w,O)}touchmove(f,w,O){if(this._active&&!(O.length<this._minTouches))return f.preventDefault(),this._calculateTransform(f,w,O)}touchend(f,w,O){this._calculateTransform(f,w,O),this._active&&O.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(f,w,O){O.length>0&&(this._active=!0);const U=jp(O,w),q=new A.pointGeometry(0,0),ee=new A.pointGeometry(0,0);let se=0;for(const fe in U){const Ce=U[fe],Ae=this._touches[fe];Ae&&(q._add(Ce),ee._add(Ce.sub(Ae)),se++,U[fe]=Ce)}if(this._touches=U,se<this._minTouches||!ee.mag())return;const ue=ee.div(se);return this._sum._add(ue),this._sum.mag()<this._clickTolerance?void 0:{around:q.div(se),panDelta:ue}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(f){}_move(f,w,O){return{}}touchstart(f,w,O){this._firstTwoTouches||O.length<2||(this._firstTwoTouches=[O[0].identifier,O[1].identifier],this._start([w[0],w[1]]))}touchmove(f,w,O){if(!this._firstTwoTouches)return;f.preventDefault();const[U,q]=this._firstTwoTouches,ee=Vc(O,w,U),se=Vc(O,w,q);if(!ee||!se)return;const ue=this._aroundCenter?null:ee.add(se).div(2);return this._move([ee,se],ue,f)}touchend(f,w,O){if(!this._firstTwoTouches)return;const[U,q]=this._firstTwoTouches,ee=Vc(O,w,U),se=Vc(O,w,q);ee&&se||(this._active&&Ge.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(f){this._enabled=!0,this._aroundCenter=!!f&&"center"===f.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Vc(P,f,w){for(let O=0;O<P.length;O++)if(P[O].identifier===w)return f[O]}function qp(P,f){return Math.log(P/f)/Math.LN2}class Au extends Mu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(f){this._startDistance=this._distance=f[0].dist(f[1])}_move(f,w){const O=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(qp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qp(this._distance,O),pinchAround:w}}}function Of(P,f){return 180*P.angleWith(f)/Math.PI}class Jd extends Mu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])}_move(f,w){const O=this._vector;if(this._vector=f[0].sub(f[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Of(this._vector,O),pinchAround:w}}_isBelowThreshold(f){this._minDiameter=Math.min(this._minDiameter,f.mag());const w=25/(Math.PI*this._minDiameter)*360,O=Of(f,this._startVector);return Math.abs(O)<w}}function Ul(P){return Math.abs(P.y)>Math.abs(P.x)}class pc extends Mu{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(f){this._lastPoints=f,Ul(f[0].sub(f[1]))&&(this._valid=!1)}_move(f,w,O){const U=f[0].sub(this._lastPoints[0]),q=f[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(U,q,O.timeStamp),this._valid)return this._lastPoints=f,this._active=!0,{pitchDelta:(U.y+q.y)/2*-.5}}gestureBeginsVertically(f,w,O){if(void 0!==this._valid)return this._valid;const U=f.mag()>=2,q=w.mag()>=2;if(!U&&!q)return;if(!U||!q)return void 0===this._firstMove&&(this._firstMove=O),O-this._firstMove<100&&void 0;const ee=f.y>0==w.y>0;return Ul(f)&&Ul(w)&&ee}}const Zp={panStep:100,bearingStep:15,pitchStep:10};class ku{constructor(){const f=Zp;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(f){if(f.altKey||f.ctrlKey||f.metaKey)return;let w=0,O=0,U=0,q=0,ee=0;switch(f.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:f.shiftKey?O=-1:(f.preventDefault(),q=-1);break;case 39:f.shiftKey?O=1:(f.preventDefault(),q=1);break;case 38:f.shiftKey?U=1:(f.preventDefault(),ee=-1);break;case 40:f.shiftKey?U=-1:(f.preventDefault(),ee=1);break;default:return}return this._rotationDisabled&&(O=0,U=0),{cameraAnimation:se=>{const ue=se.getZoom();se.easeTo({duration:300,easeId:"keyboardHandler",easing:Du,zoom:w?Math.round(ue)+w*(f.shiftKey?2:1):ue,bearing:se.getBearing()+O*this._bearingStep,pitch:se.getPitch()+U*this._pitchStep,offset:[-q*this._panStep,-ee*this._panStep],center:se.getCenter()},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Du(P){return P*(2-P)}const qn=4.000244140625;class wr{constructor(f,w){this._map=f,this._el=f.getCanvasContainer(),this._handler=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,A.bindAll(["_onTimeout"],this)}setZoomRate(f){this._defaultZoomRate=f}setWheelZoomRate(f){this._wheelZoomRate=f}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&"center"===f.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(f){if(!this.isEnabled())return;let w=f.deltaMode===A.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY;const O=A.exported.now(),U=O-(this._lastWheelEventTime||0);this._lastWheelEventTime=O,0!==w&&w%qn==0?this._type="wheel":0!==w&&Math.abs(w)<4?this._type="trackpad":U>400?(this._type=null,this._lastValue=w,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(U*w)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,w+=this._lastValue)),f.shiftKey&&w&&(w/=4),this._type&&(this._lastWheelEvent=f,this._delta-=w,this._active||this._start(f)),f.preventDefault()}_onTimeout(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)}_start(f){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const w=Ge.mousePos(this._el,f);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:w,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const f=this._map.transform,w=()=>f._terrainEnabled()?f.computeZoomRelativeTo(this._aroundCoord):f.zoom;if(0!==this._delta){const ue="wheel"===this._type&&Math.abs(this._delta)>qn?this._wheelZoomRate:this._defaultZoomRate;let fe=2/(1+Math.exp(-Math.abs(this._delta*ue)));this._delta<0&&0!==fe&&(fe=1/fe);const Ce=w(),Ae=Math.pow(2,Ce),Pe="number"==typeof this._targetZoom?f.zoomScale(this._targetZoom):Ae;this._targetZoom=Math.min(f.maxZoom,Math.max(f.minZoom,f.scaleZoom(Pe*fe))),"wheel"===this._type&&(this._startZoom=w(),this._easing=this._smoothOutEasing(200)),this._delta=0}const O="number"==typeof this._targetZoom?this._targetZoom:w(),U=this._startZoom,q=this._easing;let ee,se=!1;if("wheel"===this._type&&U&&q){const ue=Math.min((A.exported.now()-this._lastWheelEventTime)/200,1),fe=q(ue);ee=A.number(U,O,fe),ue<1?this._frameId||(this._frameId=!0):se=!0}else ee=O,se=!0;return this._active=!0,se&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!se,zoomDelta:ee-w(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(f){let w=A.ease;if(this._prevEase){const O=this._prevEase,U=(A.exported.now()-O.start)/O.duration,q=O.easing(U+.01)-O.easing(U),ee=.27/Math.sqrt(q*q+1e-4)*.01,se=Math.sqrt(.0729-ee*ee);w=A.bezier(ee,se,.25,1)}return this._prevEase={start:A.exported.now(),duration:f,easing:w},w}reset(){this._active=!1}}class xl{constructor(f,w){this._clickZoom=f,this._tapZoom=w}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Gr{constructor(){this.reset()}reset(){this._active=!1}dblclick(f,w){return f.preventDefault(),{cameraAnimation:O=>{O.easeTo({duration:300,zoom:O.getZoom()+(f.shiftKey?-1:1),around:O.unproject(w)},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qn{constructor(){this._tap=new Rf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(f,w,O){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?O.length>0&&(this._swipePoint=w[0],this._swipeTouch=O[0].identifier):this._tap.touchstart(f,w,O))}touchmove(f,w,O){if(this._tapTime){if(this._swipePoint){if(O[0].identifier!==this._swipeTouch)return;const U=w[0],q=U.y-this._swipePoint.y;return this._swipePoint=U,f.preventDefault(),this._active=!0,{zoomDelta:q/128}}}else this._tap.touchmove(f,w,O)}touchend(f,w,O){this._tapTime?this._swipePoint&&0===O.length&&this.reset():this._tap.touchend(f,w,O)&&(this._tapTime=f.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vs{constructor(f,w,O){this._el=f,this._mousePan=w,this._touchPan=O}enable(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ri{constructor(f,w,O){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=w,this._mousePitch=O}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Kd{constructor(f,w,O,U){this._el=f,this._touchZoom=w,this._touchRotate=O,this._tapDragZoom=U,this._rotationDisabled=!1,this._enabled=!0}enable(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const jr=P=>P.zoom||P.drag||P.pitch||P.rotate;class Is extends A.Event{}class Yr{constructor(){this.constants=[1,1,.01],this.radius=0}setup(f,w){const O=A.sub([],w,f);this.radius=A.length(O[2]<0?A.div([],O,this.constants):[O[0],O[1],0])}projectRay(f){A.div(f,f,this.constants),A.normalize(f,f),A.mul$2(f,f,this.constants);const w=A.scale([],f,this.radius);if(w[2]>0){const O=A.scale([],[0,0,1],A.dot(w,[0,0,1])),U=A.scale([],A.normalize([],[w[0],w[1],0]),this.radius),q=A.add([],w,A.scale([],A.sub([],A.add([],U,O),w),2));w[0]=q[0],w[1]=q[1]}return w}}function Hl(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta}class ep{constructor(f,w){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vl(f),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Yr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(w),A.bindAll(["handleEvent","handleWindowEvent"],this);const O=this._el;this._listeners=[[O,"touchstart",{passive:!0}],[O,"touchmove",{passive:!1}],[O,"touchend",void 0],[O,"touchcancel",void 0],[O,"mousedown",void 0],[O,"mousemove",void 0],[O,"mouseup",void 0],[A.window.document,"mousemove",{capture:!0}],[A.window.document,"mouseup",void 0],[O,"mouseover",void 0],[O,"mouseout",void 0],[O,"dblclick",void 0],[O,"click",void 0],[O,"keydown",{capture:!1}],[O,"keyup",void 0],[O,"wheel",{passive:!1}],[O,"contextmenu",void 0],[A.window,"blur",void 0]];for(const[U,q,ee]of this._listeners)Ge.addEventListener(U,q,U===A.window.document?this.handleWindowEvent:this.handleEvent,ee)}destroy(){for(const[f,w,O]of this._listeners)Ge.removeEventListener(f,w,f===A.window.document?this.handleWindowEvent:this.handleEvent,O)}_addDefaultHandlers(f){const w=this._map,O=w.getCanvasContainer();this._add("mapEvent",new dc(w,f));const U=w.boxZoom=new Xd(w,f);this._add("boxZoom",U);const q=new Qd,ee=new Gr;w.doubleClickZoom=new xl(ee,q),this._add("tapZoom",q),this._add("clickZoom",ee);const se=new Qn;this._add("tapDragZoom",se);const ue=w.touchPitch=new pc;this._add("touchPitch",ue);const fe=new bl(f),Ce=new vh(f);w.dragRotate=new ri(f,fe,Ce),this._add("mouseRotate",fe,["mousePitch"]),this._add("mousePitch",Ce,["mouseRotate"]);const Ae=new od(f),Pe=new aa(f);w.dragPan=new vs(O,Ae,Pe),this._add("mousePan",Ae),this._add("touchPan",Pe,["touchZoom","touchRotate"]);const Ne=new Jd,$e=new Au;w.touchZoomRotate=new Kd(O,$e,Ne,se),this._add("touchRotate",Ne,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]),this._add("blockableMapEvent",new zc(w));const et=w.scrollZoom=new wr(w,this);this._add("scrollZoom",et,["mousePan"]);const mt=w.keyboard=new ku;this._add("keyboard",mt);for(const Ue of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])f.interactive&&f[Ue]&&w[Ue].enable(f[Ue])}_add(f,w,O){this._handlers.push({handlerName:f,handler:w,allowed:O}),this._handlersById[f]=w}stop(f){if(!this._updatingCamera){for(const{handler:w}of this._handlers)w.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}}isActive(){for(const{handler:f}of this._handlers)if(f.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(jr(this._eventsInProgress))||this.isZooming()}_blockedByActive(f,w,O){for(const U in f)if(U!==O&&(!w||w.indexOf(U)<0))return!0;return!1}handleWindowEvent(f){this.handleEvent(f,`${f.type}Window`)}_getMapTouches(f){const w=[];for(const O of f)this._el.contains(O.target)&&w.push(O);return w}handleEvent(f,w){if("blur"===f.type)return void this.stop(!0);this._updatingCamera=!0;const O="renderFrame"===f.type,U=O?void 0:f,q={needsRenderFrame:!1},ee={},se={},ue=f.touches?this._getMapTouches(f.touches):void 0,fe=ue?Ge.touchPos(this._el,ue):O?void 0:Ge.mousePos(this._el,f);for(const{handlerName:Pe,handler:Ne,allowed:$e}of this._handlers){if(!Ne.isEnabled())continue;let et;this._blockedByActive(se,$e,Pe)?Ne.reset():Ne[w||f.type]&&(et=Ne[w||f.type](f,fe,ue),this.mergeHandlerResult(q,ee,et,Pe,U),et&&et.needsRenderFrame&&this._triggerRenderFrame()),(et||Ne.isActive())&&(se[Pe]=Ne)}const Ce={};for(const Pe in this._previousActiveHandlers)se[Pe]||(Ce[Pe]=U);this._previousActiveHandlers=se,(Object.keys(Ce).length||Hl(q))&&(this._changes.push([q,ee,Ce]),this._triggerRenderFrame()),(Object.keys(se).length||Hl(q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=q;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))}mergeHandlerResult(f,w,O,U,q){if(!O)return;A.extend(f,O);const ee={handlerName:U,originalEvent:O.originalEvent||q};void 0!==O.zoomDelta&&(w.zoom=ee),void 0!==O.panDelta&&(w.drag=ee),void 0!==O.pitchDelta&&(w.pitch=ee),void 0!==O.bearingDelta&&(w.rotate=ee)}_applyChanges(){const f={},w={},O={};for(const[U,q,ee]of this._changes)U.panDelta&&(f.panDelta=(f.panDelta||new A.pointGeometry(0,0))._add(U.panDelta)),U.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+U.zoomDelta),U.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+U.bearingDelta),U.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+U.pitchDelta),void 0!==U.around&&(f.around=U.around),void 0!==U.aroundCoord&&(f.aroundCoord=U.aroundCoord),void 0!==U.pinchAround&&(f.pinchAround=U.pinchAround),U.noInertia&&(f.noInertia=U.noInertia),A.extend(w,q),A.extend(O,ee);this._updateMapTransform(f,w,O),this._changes=[]}_updateMapTransform(f,w,O){const U=this._map,q=U.transform,ee=tt=>[tt.x,tt.y,tt.z];if((tt=>{const ot=this._eventsInProgress.drag;return ot&&!this._handlersById[ot.handlerName].isActive()})()&&!Hl(f)){const tt=q.zoom;q.cameraElevationReference="sea",q.recenterOnTerrain(),q.cameraElevationReference="ground",tt!==q.zoom&&this._map._update(!0)}if(!Hl(f))return this._fireEvents(w,O,!0);let{panDelta:se,zoomDelta:ue,bearingDelta:fe,pitchDelta:Ce,around:Ae,aroundCoord:Pe,pinchAround:Ne}=f;void 0!==Ne&&(Ae=Ne),(tt=>w.drag&&!this._eventsInProgress.drag)()&&Ae&&(this._dragOrigin=ee(q.pointCoordinate3D(Ae)),this._trackingEllipsoid.setup(q._camera.position,this._dragOrigin)),q.cameraElevationReference="sea",U._stop(!0),Ae=Ae||U.transform.centerPoint,fe&&(q.bearing+=fe),Ce&&(q.pitch+=Ce),q._updateCameraState();const $e=[0,0,0];if(se){const tt=q.screenPointToMercatorRay(Ae),ot=q.screenPointToMercatorRay(Ae.sub(se)),vt=this._trackingEllipsoid.projectRay(tt.dir),rt=this._trackingEllipsoid.projectRay(ot.dir);$e[0]=rt[0]-vt[0],$e[1]=rt[1]-vt[1]}const et=q.zoom,mt=[0,0,0];if(ue){const tt=ee(Pe||q.pointCoordinate3D(Ae)),ot={dir:A.normalize([],A.sub([],tt,q._camera.position))},vt=q.screenPointToMercatorRay(q.centerPoint);if(ot.dir[2]<0){const rt=A.altitudeFromMercatorZ(tt[2],tt[1]),ht=q.rayIntersectionCoordinate(q.pointRayIntersection(q.centerPoint,rt)),Kt=q.zoomDeltaToMovement(ee(ht),ue)*(vt.dir[2]/ot.dir[2]);A.scale(mt,ot.dir,Kt)}else if(q._terrainEnabled()){const rt=q.zoomDeltaToMovement(tt,ue);A.scale(mt,ot.dir,rt)}}const Ue=A.add($e,$e,mt);q._translateCameraConstrained(Ue),ue&&Math.abs(q.zoom-et)>1e-4&&q.recenterOnTerrain(),q.cameraElevationReference="ground",this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(w,O,!0)}_fireEvents(f,w,O){const U=jr(this._eventsInProgress),q=jr(f),ee={};for(const Ce in f){const{originalEvent:Ae}=f[Ce];this._eventsInProgress[Ce]||(ee[`${Ce}start`]=Ae),this._eventsInProgress[Ce]=f[Ce]}!U&&q&&this._fireEvent("movestart",q.originalEvent);for(const Ce in ee)this._fireEvent(Ce,ee[Ce]);q&&this._fireEvent("move",q.originalEvent);for(const Ce in f){const{originalEvent:Ae}=f[Ce];this._fireEvent(Ce,Ae)}const se={};let ue;for(const Ce in this._eventsInProgress){const{handlerName:Ae,originalEvent:Pe}=this._eventsInProgress[Ce];this._handlersById[Ae].isActive()||(delete this._eventsInProgress[Ce],ue=w[Ae]||Pe,se[`${Ce}end`]=ue)}for(const Ce in se)this._fireEvent(Ce,se[Ce]);const fe=jr(this._eventsInProgress);if(O&&(U||q)&&!fe){this._updatingCamera=!0;const Ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ae=Pe=>0!==Pe&&-this._bearingSnap<Pe&&Pe<this._bearingSnap;Ce?(Ae(Ce.bearing||this._map.getBearing())&&(Ce.bearing=0),this._map.easeTo(Ce,{originalEvent:ue})):(this._map.fire(new A.Event("moveend",{originalEvent:ue})),Ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(f,w){this._map.fire(new A.Event(f,w?{originalEvent:w}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(f=>{delete this._frameId,this.handleEvent(new Is("renderFrame",{timeStamp:f})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class $o extends A.Evented{constructor(f,w){super(),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=w.bearingSnap,A.bindAll(["_renderFrameCallback"],this)}getCenter(){return new A.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(f,w){return this.jumpTo({center:f},w)}panBy(f,w,O){return f=A.pointGeometry.convert(f).mult(-1),this.panTo(this.transform.center,A.extend({offset:f},w),O)}panTo(f,w,O){return this.easeTo(A.extend({center:f},w),O)}getZoom(){return this.transform.zoom}setZoom(f,w){return this.jumpTo({zoom:f},w),this}zoomTo(f,w,O){return this.easeTo(A.extend({zoom:f},w),O)}zoomIn(f,w){return this.zoomTo(this.getZoom()+1,f,w),this}zoomOut(f,w){return this.zoomTo(this.getZoom()-1,f,w),this}getBearing(){return this.transform.bearing}setBearing(f,w){return this.jumpTo({bearing:f},w),this}getPadding(){return this.transform.padding}setPadding(f,w){return this.jumpTo({padding:f},w),this}rotateTo(f,w,O){return this.easeTo(A.extend({bearing:f},w),O)}resetNorth(f,w){return this.rotateTo(0,A.extend({duration:1e3},f),w),this}resetNorthPitch(f,w){return this.easeTo(A.extend({bearing:0,pitch:0,duration:1e3},f),w),this}snapToNorth(f,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,w):this}getPitch(){return this.transform.pitch}setPitch(f,w){return this.jumpTo({pitch:f},w),this}cameraForBounds(f,w){f=A.LngLatBounds.convert(f);const O=w&&w.bearing||0;return this._cameraForBoxAndBearing(f.getNorthWest(),f.getSouthEast(),O,w)}_extendCameraOptions(f){const w={top:0,bottom:0,right:0,left:0};if("number"==typeof(f=A.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding){const O=f.padding;f.padding={top:O,bottom:O,right:O,left:O}}return f.padding=A.extend(w,f.padding),f}_cameraForBoxAndBearing(f,w,O,U){const q=this._extendCameraOptions(U),ee=this.transform,se=ee.padding,ue=ee.project(A.LngLat.convert(f)),fe=ee.project(A.LngLat.convert(w)),Ce=ue.rotate(-A.degToRad(O)),Ae=fe.rotate(-A.degToRad(O)),Pe=new A.pointGeometry(Math.max(Ce.x,Ae.x),Math.max(Ce.y,Ae.y)),Ne=new A.pointGeometry(Math.min(Ce.x,Ae.x),Math.min(Ce.y,Ae.y)),$e=Pe.sub(Ne),et=(ee.width-(se.left+se.right+q.padding.left+q.padding.right))/$e.x,mt=(ee.height-(se.top+se.bottom+q.padding.top+q.padding.bottom))/$e.y;if(mt<0||et<0)return void A.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ue=Math.min(ee.scaleZoom(ee.scale*Math.min(et,mt)),q.maxZoom),tt="number"==typeof q.offset.x?new A.pointGeometry(q.offset.x,q.offset.y):A.pointGeometry.convert(q.offset),ot=new A.pointGeometry((q.padding.left-q.padding.right)/2,(q.padding.top-q.padding.bottom)/2).rotate(O*Math.PI/180),vt=tt.add(ot).mult(ee.scale/ee.zoomScale(Ue));return{center:ee.unproject(ue.add(fe).div(2).sub(vt)),zoom:Ue,bearing:O}}_cameraForBox(f,w,O,U,q){const ee=this._extendCameraOptions(q);O=O||0,U=U||0,f=A.LngLat.convert(f),w=A.LngLat.convert(w);const se=this.transform.clone();se.padding=ee.padding;const ue=this.getFreeCameraOptions(),fe=new A.LngLat(.5*(f.lng+w.lng),.5*(f.lat+w.lat)),Ce=.5*(O+U);if(se._camera.position[2]<A.mercatorZfromAltitude(Ce,fe.lat))return void A.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ue.lookAtPoint(fe),se.setFreeCameraOptions(ue);const Ae=A.MercatorCoordinate.fromLngLat(f),Pe=A.MercatorCoordinate.fromLngLat(w),Ne=se.pointRayIntersection(se.centerPoint,Ce),$e=[(et=se.rayIntersectionCoordinate(Ne)).x,et.y,et.z];var et;const mt=se.screenPointToMercatorRay(se.centerPoint);let Ue,tt=0;do{const ot=Math.floor(se.zoom),vt=1<<ot,rt=Math.min(vt*Ae.x,vt*Pe.x),ht=Math.min(vt*Ae.y,vt*Pe.y),Kt=Math.max(vt*Ae.x,vt*Pe.x),sn=Math.max(vt*Ae.y,vt*Pe.y),un=new dn([rt,ht,O],[Kt,sn,U]),ut=Rn.fromInvProjectionMatrix(se.invProjMatrix,se.worldSize,ot);if(2!==un.intersects(ut)){Ue&&(se._camera.position=A.scaleAndAdd([],se._camera.position,mt.dir,-Ue),se._updateStateFromCamera());break}const En=A.sub([],se._camera.position,$e);Ue=.5*A.length(En),se._camera.position=A.scaleAndAdd([],se._camera.position,mt.dir,Ue);try{se._updateStateFromCamera()}catch(bn){return void A.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++tt<10);return{center:se.center,zoom:se.zoom,bearing:se.bearing,pitch:se.pitch}}fitBounds(f,w,O){return this._fitInternal(this.cameraForBounds(f,w),w,O)}_raycastElevationBox(f,w){const O=this.transform.elevation;if(!O)return;const U=new A.pointGeometry(f.x,w.y),q=new A.pointGeometry(w.x,f.y),ee=O.pointCoordinate(f);if(!ee)return;const se=O.pointCoordinate(w);if(!se)return;const ue=O.pointCoordinate(U);if(!ue)return;const fe=O.pointCoordinate(q);if(!fe)return;const Ce=new A.MercatorCoordinate(ee[0],ee[1]).toLngLat(),Ae=new A.MercatorCoordinate(se[0],se[1]).toLngLat(),Pe=new A.MercatorCoordinate(ue[0],ue[1]).toLngLat(),Ne=new A.MercatorCoordinate(fe[0],fe[1]).toLngLat(),$e=Math.min(Ce.lng,Math.min(Ae.lng,Math.min(Pe.lng,Ne.lng))),et=Math.min(Ce.lat,Math.min(Ae.lat,Math.min(Pe.lat,Ne.lat))),mt=Math.max(Ce.lng,Math.max(Ae.lng,Math.max(Pe.lng,Ne.lng))),Ue=Math.max(Ce.lat,Math.max(Ae.lat,Math.max(Pe.lat,Ne.lat))),tt=Math.min(ee[3],Math.min(se[3],Math.min(ue[3],fe[3]))),ot=Math.max(ee[3],Math.max(se[3],Math.max(ue[3],fe[3])));return{minLngLat:new A.LngLat($e,et),maxLngLat:new A.LngLat(mt,Ue),minAltitude:tt,maxAltitude:ot}}fitScreenCoordinates(f,w,O,U,q){let ee,se,ue,fe;const Ce=A.pointGeometry.convert(f),Ae=A.pointGeometry.convert(w),Pe=this._raycastElevationBox(Ce,Ae);if(Pe)ee=Pe.minLngLat,se=Pe.maxLngLat,ue=Pe.minAltitude,fe=Pe.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(Ce,Ae))return this;ee=this.transform.pointLocation(Ce),se=this.transform.pointLocation(Ae)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(A.pointGeometry.convert(f)),this.transform.pointLocation(A.pointGeometry.convert(w)),O,U):this._cameraForBox(ee,se,ue,fe,U),U,q)}_fitInternal(f,w,O){return f?(delete(w=A.extend(f,w)).padding,w.linear?this.easeTo(w,O):this.flyTo(w,O)):this}jumpTo(f,w){this.stop();const O=this.transform;let U=!1,q=!1,ee=!1;return"zoom"in f&&O.zoom!==+f.zoom&&(U=!0,O.zoom=+f.zoom),void 0!==f.center&&(O.center=A.LngLat.convert(f.center)),"bearing"in f&&O.bearing!==+f.bearing&&(q=!0,O.bearing=+f.bearing),"pitch"in f&&O.pitch!==+f.pitch&&(ee=!0,O.pitch=+f.pitch),null==f.padding||O.isPaddingEqual(f.padding)||(O.padding=f.padding),this.fire(new A.Event("movestart",w)).fire(new A.Event("move",w)),U&&this.fire(new A.Event("zoomstart",w)).fire(new A.Event("zoom",w)).fire(new A.Event("zoomend",w)),q&&this.fire(new A.Event("rotatestart",w)).fire(new A.Event("rotate",w)).fire(new A.Event("rotateend",w)),ee&&this.fire(new A.Event("pitchstart",w)).fire(new A.Event("pitch",w)).fire(new A.Event("pitchend",w)),this.fire(new A.Event("moveend",w))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(f,w){this.stop();const O=this.transform,U=O.zoom,q=O.pitch,ee=O.bearing;O.setFreeCameraOptions(f);const se=U!==O.zoom,ue=q!==O.pitch,fe=ee!==O.bearing;return this.fire(new A.Event("movestart",w)).fire(new A.Event("move",w)),se&&this.fire(new A.Event("zoomstart",w)).fire(new A.Event("zoom",w)).fire(new A.Event("zoomend",w)),fe&&this.fire(new A.Event("rotatestart",w)).fire(new A.Event("rotate",w)).fire(new A.Event("rotateend",w)),ue&&this.fire(new A.Event("pitchstart",w)).fire(new A.Event("pitch",w)).fire(new A.Event("pitchend",w)),this.fire(new A.Event("moveend",w)),this}easeTo(f,w){this._stop(!1,f.easeId),(!1===(f=A.extend({offset:[0,0],duration:500,easing:A.ease},f)).animate||!f.essential&&A.exported.prefersReducedMotion)&&(f.duration=0);const O=this.transform,U=this.getZoom(),q=this.getBearing(),ee=this.getPitch(),se=this.getPadding(),ue="zoom"in f?+f.zoom:U,fe="bearing"in f?this._normalizeBearing(f.bearing,q):q,Ce="pitch"in f?+f.pitch:ee,Ae="padding"in f?f.padding:O.padding,Pe=A.pointGeometry.convert(f.offset);let Ne=O.centerPoint.add(Pe);const $e=O.pointLocation(Ne),et=A.LngLat.convert(f.center||$e);this._normalizeCenter(et);const mt=O.project($e),Ue=O.project(et).sub(mt),tt=O.zoomScale(ue-U);let ot,vt;f.around&&(ot=A.LngLat.convert(f.around),vt=O.locationPoint(ot));const rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ue!==U,this._rotating=this._rotating||q!==fe,this._pitching=this._pitching||Ce!==ee,this._padding=!O.isPaddingEqual(Ae),this._easeId=f.easeId,this._prepareEase(w,f.noMoveStart,rt),this._ease(ht=>{if(this._zooming&&(O.zoom=A.number(U,ue,ht)),this._rotating&&(O.bearing=A.number(q,fe,ht)),this._pitching&&(O.pitch=A.number(ee,Ce,ht)),this._padding&&(O.interpolatePadding(se,Ae,ht),Ne=O.centerPoint.add(Pe)),ot)O.setLocationAtPoint(ot,vt);else{const Kt=O.zoomScale(O.zoom-U),sn=ue>U?Math.min(2,tt):Math.max(.5,tt),un=Math.pow(sn,1-ht),ut=O.unproject(mt.add(Ue.mult(ht*un)).mult(Kt));O.setLocationAtPoint(O.renderWorldCopies?ut.wrap():ut,Ne)}this._fireMoveEvents(w)},ht=>{O.recenterOnTerrain(),this._afterEase(w,ht)},f),this}_prepareEase(f,w,O={}){this._moving=!0,this.transform.cameraElevationReference="sea",w||O.moving||this.fire(new A.Event("movestart",f)),this._zooming&&!O.zooming&&this.fire(new A.Event("zoomstart",f)),this._rotating&&!O.rotating&&this.fire(new A.Event("rotatestart",f)),this._pitching&&!O.pitching&&this.fire(new A.Event("pitchstart",f))}_fireMoveEvents(f){this.fire(new A.Event("move",f)),this._zooming&&this.fire(new A.Event("zoom",f)),this._rotating&&this.fire(new A.Event("rotate",f)),this._pitching&&this.fire(new A.Event("pitch",f))}_afterEase(f,w){if(this._easeId&&w&&this._easeId===w)return;delete this._easeId,this.transform.cameraElevationReference="ground";const O=this._zooming,U=this._rotating,q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,O&&this.fire(new A.Event("zoomend",f)),U&&this.fire(new A.Event("rotateend",f)),q&&this.fire(new A.Event("pitchend",f)),this.fire(new A.Event("moveend",f))}flyTo(f,w){if(!f.essential&&A.exported.prefersReducedMotion){const kn=A.pick(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(kn,w)}this.stop(),f=A.extend({offset:[0,0],speed:1.2,curve:1.42,easing:A.ease},f);const O=this.transform,U=this.getZoom(),q=this.getBearing(),ee=this.getPitch(),se=this.getPadding(),ue="zoom"in f?A.clamp(+f.zoom,O.minZoom,O.maxZoom):U,fe="bearing"in f?this._normalizeBearing(f.bearing,q):q,Ce="pitch"in f?+f.pitch:ee,Ae="padding"in f?f.padding:O.padding,Pe=O.zoomScale(ue-U),Ne=A.pointGeometry.convert(f.offset);let $e=O.centerPoint.add(Ne);const et=O.pointLocation($e),mt=A.LngLat.convert(f.center||et);this._normalizeCenter(mt);const Ue=O.project(et),tt=O.project(mt).sub(Ue);let ot=f.curve;const vt=Math.max(O.width,O.height),rt=vt/Pe,ht=tt.mag();if("minZoom"in f){const kn=A.clamp(Math.min(f.minZoom,U,ue),O.minZoom,O.maxZoom),Ti=vt/O.zoomScale(kn-U);ot=Math.sqrt(Ti/ht*2)}const Kt=ot*ot;function sn(kn){const Ti=(rt*rt-vt*vt+(kn?-1:1)*Kt*Kt*ht*ht)/(2*(kn?rt:vt)*Kt*ht);return Math.log(Math.sqrt(Ti*Ti+1)-Ti)}function un(kn){return(Math.exp(kn)-Math.exp(-kn))/2}function ut(kn){return(Math.exp(kn)+Math.exp(-kn))/2}const En=sn(0);let bn=function(kn){return ut(En)/ut(En+ot*kn)},Zn=function(kn){return vt*((ut(En)*(un(Ti=En+ot*kn)/ut(Ti))-un(En))/Kt)/ht;var Ti},An=(sn(1)-En)/ot;if(Math.abs(ht)<1e-6||!isFinite(An)){if(Math.abs(vt-rt)<1e-6)return this.easeTo(f,w);const kn=rt<vt?-1:1;An=Math.abs(Math.log(rt/vt))/ot,Zn=function(){return 0},bn=function(Ti){return Math.exp(kn*ot*Ti)}}return f.duration="duration"in f?+f.duration:1e3*An/("screenSpeed"in f?+f.screenSpeed/ot:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0),this._zooming=!0,this._rotating=q!==fe,this._pitching=Ce!==ee,this._padding=!O.isPaddingEqual(Ae),this._prepareEase(w,!1),this._ease(kn=>{const Ti=kn*An,ci=1/bn(Ti);O.zoom=1===kn?ue:U+O.scaleZoom(ci),this._rotating&&(O.bearing=A.number(q,fe,kn)),this._pitching&&(O.pitch=A.number(ee,Ce,kn)),this._padding&&(O.interpolatePadding(se,Ae,kn),$e=O.centerPoint.add(Ne));const ar=1===kn?mt:O.unproject(Ue.add(tt.mult(Zn(Ti))).mult(ci));O.setLocationAtPoint(O.renderWorldCopies?ar.wrap():ar,$e),O._updateCenterElevation(),this._fireMoveEvents(w)},()=>this._afterEase(w),f),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(f,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const O=this._onEaseEnd;delete this._onEaseEnd,O.call(this,w)}if(!f){const O=this.handlers;O&&O.stop(!1)}return this}_ease(f,w,O){!1===O.animate||0===O.duration?(f(1),w()):(this._easeStart=A.exported.now(),this._easeOptions=O,this._onEaseFrame=f,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const f=Math.min((A.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(f,w){f=A.wrap(f,-180,180);const O=Math.abs(f-w);return Math.abs(f-360-w)<O&&(f-=360),Math.abs(f+360-w)<O&&(f+=360),f}_normalizeCenter(f){const w=this.transform;if(!w.renderWorldCopies||w.lngRange)return;const O=f.lng-w.center.lng;f.lng+=O>180?-360:O<-180?360:0}}class la{constructor(f={}){this.options=f,A.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(f){const w=this.options&&this.options.compact;return this._map=f,this._container=Ge.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ge.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ge.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),w&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===w&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){Ge.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(f,w){const O=this._map._getUIString(`AttributionControl.${w}`);f.title=O,f.setAttribute("aria-label",O)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));const w=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||A.config.ACCESS_TOKEN}];if(f){const O=w.reduce((U,q,ee)=>(q.value&&(U+=`${q.key}=${q.value}${ee<w.length-1?"&":""}`),U),"?");f.href=`${A.config.FEEDBACK_URL}/${O}${this._map._hash?this._map._hash.getHashString(!0):""}`,f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}}_updateData(f){!f||"metadata"!==f.sourceDataType&&"visibility"!==f.sourceDataType&&"style"!==f.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map(U=>"string"!=typeof U?"":U)):"string"==typeof this.options.customAttribution&&f.push(this.options.customAttribution)),this._map.style.stylesheet){const U=this._map.style.stylesheet;this.styleOwner=U.owner,this.styleId=U.id}const w=this._map.style._sourceCaches;for(const U in w){const q=w[U];if(q.used){const ee=q.getSource();ee.attribution&&f.indexOf(ee.attribution)<0&&f.push(ee.attribution)}}f.sort((U,q)=>U.length-q.length),f=f.filter((U,q)=>{for(let ee=q+1;ee<f.length;ee++)if(f[ee].indexOf(U)>=0)return!1;return!0});const O=f.join(" | ");O!==this._attribHTML&&(this._attribHTML=O,f.length?(this._innerContainer.innerHTML=O,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Uc{constructor(){A.bindAll(["_updateLogo"],this),A.bindAll(["_updateCompact"],this)}onAdd(f){this._map=f,this._container=Ge.create("div","mapboxgl-ctrl");const w=Ge.create("a","mapboxgl-ctrl-logo");return w.target="_blank",w.rel="noopener nofollow",w.href="https://www.mapbox.com/",w.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),w.setAttribute("rel","noopener nofollow"),this._container.appendChild(w),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Ge.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(f){f&&"metadata"!==f.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const f=this._map.style._sourceCaches;if(0===Object.entries(f).length)return!0;for(const w in f){const O=f[w].getSource();if(O.hasOwnProperty("mapbox_logo")&&!O.mapbox_logo)return!1}return!0}_updateCompact(){const f=this._container.children;if(f.length){const w=f[0];this._map.getCanvasContainer().offsetWidth<250?w.classList.add("mapboxgl-compact"):w.classList.remove("mapboxgl-compact")}}}class tp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(f){const w=++this._id;return this._queue.push({callback:f,id:w,cancelled:!1}),w}remove(f){const w=this._currentlyRunning,O=w?this._queue.concat(w):this._queue;for(const U of O)if(U.id===f)return void(U.cancelled=!0)}run(f=0){const w=this._currentlyRunning=this._queue;this._queue=[];for(const O of w)if(!O.cancelled&&(O.callback(f),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function fc(P,f,w){if(P=new A.LngLat(P.lng,P.lat),f){const O=new A.LngLat(P.lng-360,P.lat),U=new A.LngLat(P.lng+360,P.lat),q=360*Math.ceil(Math.abs(P.lng-w.center.lng)/360),ee=w.locationPoint(P).distSqr(f),se=f.x<0||f.y<0||f.x>w.width||f.y>w.height;w.locationPoint(O).distSqr(f)<ee&&(se||Math.abs(O.lng-w.center.lng)<q)?P=O:w.locationPoint(U).distSqr(f)<ee&&(se||Math.abs(U.lng-w.center.lng)<q)&&(P=U)}for(;Math.abs(P.lng-w.center.lng)>180;){const O=w.locationPoint(P);if(O.x>=0&&O.y>=0&&O.x<=w.width&&O.y<=w.height)break;P.lng>w.center.lng?P.lng-=360:P.lng+=360}return P}const bh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hc(P,f,w){const O=P.classList;for(const U in bh)O.remove(`mapboxgl-${w}-anchor-${U}`);O.add(`mapboxgl-${w}-anchor-${f}`)}class Gl extends A.Evented{constructor(f,w){if(super(),(f instanceof A.window.HTMLElement||w)&&(f=A.extend({element:f},w)),A.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&"auto"!==f.pitchAlignment?f.pitchAlignment:this._rotationAlignment,f&&f.element)this._element=f.element,this._offset=A.pointGeometry.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ge.create("div"),this._element.setAttribute("aria-label","Map marker");const O=Ge.createNS("http://www.w3.org/2000/svg","svg"),U=41,q=27;O.setAttributeNS(null,"display","block"),O.setAttributeNS(null,"height",`${U}px`),O.setAttributeNS(null,"width",`${q}px`),O.setAttributeNS(null,"viewBox",`0 0 ${q} ${U}`);const ee=Ge.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"stroke","none"),ee.setAttributeNS(null,"stroke-width","1"),ee.setAttributeNS(null,"fill","none"),ee.setAttributeNS(null,"fill-rule","evenodd");const se=Ge.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill-rule","nonzero");const ue=Ge.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ue.setAttributeNS(null,"fill","#000000");const fe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of fe){const ot=Ge.createNS("http://www.w3.org/2000/svg","ellipse");ot.setAttributeNS(null,"opacity","0.04"),ot.setAttributeNS(null,"cx","10.5"),ot.setAttributeNS(null,"cy","5.80029008"),ot.setAttributeNS(null,"rx",tt.rx),ot.setAttributeNS(null,"ry",tt.ry),ue.appendChild(ot)}const Ce=Ge.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"fill",this._color);const Ae=Ge.createNS("http://www.w3.org/2000/svg","path");Ae.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ce.appendChild(Ae);const Pe=Ge.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"opacity","0.25"),Pe.setAttributeNS(null,"fill","#000000");const Ne=Ge.createNS("http://www.w3.org/2000/svg","path");Ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Pe.appendChild(Ne);const $e=Ge.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$e.setAttributeNS(null,"fill","#FFFFFF");const et=Ge.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(8.0, 8.0)");const mt=Ge.createNS("http://www.w3.org/2000/svg","circle");mt.setAttributeNS(null,"fill","#000000"),mt.setAttributeNS(null,"opacity","0.25"),mt.setAttributeNS(null,"cx","5.5"),mt.setAttributeNS(null,"cy","5.5"),mt.setAttributeNS(null,"r","5.4999962");const Ue=Ge.createNS("http://www.w3.org/2000/svg","circle");Ue.setAttributeNS(null,"fill","#FFFFFF"),Ue.setAttributeNS(null,"cx","5.5"),Ue.setAttributeNS(null,"cy","5.5"),Ue.setAttributeNS(null,"r","5.4999962"),et.appendChild(mt),et.appendChild(Ue),se.appendChild(ue),se.appendChild(Ce),se.appendChild(Pe),se.appendChild($e),se.appendChild(et),O.appendChild(se),O.setAttributeNS(null,"height",U*this._scale+"px"),O.setAttributeNS(null,"width",q*this._scale+"px"),this._element.appendChild(O),this._offset=A.pointGeometry.convert(f&&f.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",O=>{O.preventDefault()}),this._element.addEventListener("mousedown",O=>{O.preventDefault()}),Hc(this._element,this._anchor,"marker"),this._popup=null}addTo(f){return this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._update),f.on("moveend",this._update),f.on("remove",this._clearFadeTimer),f._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),Ge.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=A.LngLat.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){const w=38.1,O=13.5,U=Math.sqrt(Math.pow(O,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-w],"bottom-left":[U,-1*(w-O+U)],"bottom-right":[-U,-1*(w-O+U)],left:[O,-1*(w-O)],right:[-O,-1*(w-O)]}:this._offset}this._popup=f,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(f){const w=f.code,O=f.charCode||f.keyCode;"Space"!==w&&"Enter"!==w&&32!==O&&13!==O||this.togglePopup()}_onMapClick(f){const w=f.originalEvent.target,O=this._element;this._popup&&(w===O||O.contains(w))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const f=this._popup;return f?(f.isOpen()?f.remove():f.addTo(this._map),this):this}_evaluateOpacity(){const f=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(f))return void this._clearFadeTimer();const w=this._map.unproject(f);let O=!1;if(this._map.getTerrain()){const q=this._map.getFreeCameraOptions();if(q.position){const ee=q.position.toLngLat();O=ee.distanceTo(w)<.9*ee.distanceTo(this._lngLat)}}const U=(1-this._map._queryFogOpacity(w))*(O?.2:1);this._element.style.opacity=`${U}`,this._popup&&this._popup._setOpacity(`${U}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(f){const w=this._map.transform;return!!f&&f.x>=0&&f.x<w.width&&f.y>=0&&f.y<w.height}_update(f){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=fc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let w="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?w=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let O="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?O="rotateX(0deg)":"map"===this._pitchAlignment&&(O=`rotateX(${this._map.getPitch()}deg)`),f&&"moveend"!==f.type||(this._pos=this._pos.round()),this._map._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&Ge.setTransform(this._element,`${bh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${O} ${w}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})}_transformedOffset(){if(!this._defaultMarker)return this._offset;const f=this._map.transform,w=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&w._rotate(f.angle),"map"===this._pitchAlignment&&(w.y*=Math.cos(f._pitch)),w}getOffset(){return this._offset}setOffset(f){return this._offset=A.pointGeometry.convert(f),this._update(),this}_onMove(f){if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new A.Event("dragstart"))),this.fire(new A.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new A.Event("dragend")),this._state="inactive"}_addDragHandler(f){this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(f){return this._draggable=!!f,this._map&&(f?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(f){return this._rotation=f||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(f){return this._rotationAlignment=f||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(f){return this._pitchAlignment=f&&"auto"!==f?f:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Iu{constructor(f){this.jumpTo(f)}getValue(f){if(f<=this._startTime)return this._start;if(f>=this._endTime)return this._end;const w=A.easeCubicInOut((f-this._startTime)/(this._endTime-this._startTime));return this._start*(1-w)+this._end*w}isEasing(f){return f>=this._startTime&&f<=this._endTime}jumpTo(f){this._startTime=-1/0,this._endTime=-1/0,this._start=f,this._end=f}easeTo(f,w,O){this._start=this.getValue(w),this._end=f,this._startTime=w,this._endTime=w+O}}const Gc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:jc,HTMLElement:mc,ImageBitmap:Pu}=A.window,Km={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function xh(P){P.parentNode&&P.parentNode.removeChild(P)}const np={showCompass:!0,showZoom:!0,visualizePitch:!1};class ip{constructor(f,w,O=!1){this._clickTolerance=10,this.element=w,this.mouseRotate=new bl({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,O&&(this.mousePitch=new vh({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),A.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Ge.addEventListener(w,"mousedown",this.mousedown),Ge.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),Ge.addEventListener(w,"touchmove",this.touchmove),Ge.addEventListener(w,"touchend",this.touchend),Ge.addEventListener(w,"touchcancel",this.reset)}down(f,w){this.mouseRotate.mousedown(f,w),this.mousePitch&&this.mousePitch.mousedown(f,w),Ge.disableDrag()}move(f,w){const O=this.map,U=this.mouseRotate.mousemoveWindow(f,w);if(U&&U.bearingDelta&&O.setBearing(O.getBearing()+U.bearingDelta),this.mousePitch){const q=this.mousePitch.mousemoveWindow(f,w);q&&q.pitchDelta&&O.setPitch(O.getPitch()+q.pitchDelta)}}off(){const f=this.element;Ge.removeEventListener(f,"mousedown",this.mousedown),Ge.removeEventListener(f,"touchstart",this.touchstart,{passive:!1}),Ge.removeEventListener(f,"touchmove",this.touchmove),Ge.removeEventListener(f,"touchend",this.touchend),Ge.removeEventListener(f,"touchcancel",this.reset),this.offTemp()}offTemp(){Ge.enableDrag(),Ge.removeEventListener(A.window,"mousemove",this.mousemove),Ge.removeEventListener(A.window,"mouseup",this.mouseup)}mousedown(f){this.down(A.extend({},f,{ctrlKey:!0,preventDefault:()=>f.preventDefault()}),Ge.mousePos(this.element,f)),Ge.addEventListener(A.window,"mousemove",this.mousemove),Ge.addEventListener(A.window,"mouseup",this.mouseup)}mousemove(f){this.move(f,Ge.mousePos(this.element,f))}mouseup(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()}touchstart(f){1!==f.targetTouches.length?this.reset():(this._startPos=this._lastPos=Ge.touchPos(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>f.preventDefault()},this._startPos))}touchmove(f){1!==f.targetTouches.length?this.reset():(this._lastPos=Ge.touchPos(this.element,f.targetTouches)[0],this.move({preventDefault:()=>f.preventDefault()},this._lastPos))}touchend(f){0===f.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Po={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Bn,ca=0,Yc=!1;const ms={maxWidth:100,unit:"metric"};function Ff(P,f,w){const O=w&&w.maxWidth||100,U=P._container.clientHeight/2,q=P.unproject([0,U]),ee=P.unproject([O,U]),se=q.distanceTo(ee);if(w&&"imperial"===w.unit){const ue=3.2808*se;ue>5280?wh(f,O,ue/5280,P._getUIString("ScaleControl.Miles"),P):wh(f,O,ue,P._getUIString("ScaleControl.Feet"),P)}else w&&"nautical"===w.unit?wh(f,O,se/1852,P._getUIString("ScaleControl.NauticalMiles"),P):se>=1e3?wh(f,O,se/1e3,P._getUIString("ScaleControl.Kilometers"),P):wh(f,O,se,P._getUIString("ScaleControl.Meters"),P)}function wh(P,f,w,O,U){const q=function(se){const ue=Math.pow(10,`${Math.floor(se)}`.length-1);let fe=se/ue;return fe=fe>=10?10:fe>=5?5:fe>=3?3:fe>=2?2:fe>=1?1:function(Ce){const Ae=Math.pow(10,Math.ceil(-Math.log(Ce)/Math.LN10));return Math.round(Ce*Ae)/Ae}(fe),ue*fe}(w),ee=q/w;U._requestDomTask(()=>{P.style.width=f*ee+"px",P.innerHTML=`${q}&nbsp;${O}`})}const Lf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},qc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rp(P){if(P){if("number"==typeof P){const f=Math.round(Math.sqrt(.5*Math.pow(P,2)));return{center:new A.pointGeometry(0,0),top:new A.pointGeometry(0,P),"top-left":new A.pointGeometry(f,f),"top-right":new A.pointGeometry(-f,f),bottom:new A.pointGeometry(0,-P),"bottom-left":new A.pointGeometry(f,-f),"bottom-right":new A.pointGeometry(-f,-f),left:new A.pointGeometry(P,0),right:new A.pointGeometry(-P,0)}}if(P instanceof A.pointGeometry||Array.isArray(P)){const f=A.pointGeometry.convert(P);return{center:f,top:f,"top-left":f,"top-right":f,bottom:f,"bottom-left":f,"bottom-right":f,left:f,right:f}}return{center:A.pointGeometry.convert(P.center||[0,0]),top:A.pointGeometry.convert(P.top||[0,0]),"top-left":A.pointGeometry.convert(P["top-left"]||[0,0]),"top-right":A.pointGeometry.convert(P["top-right"]||[0,0]),bottom:A.pointGeometry.convert(P.bottom||[0,0]),"bottom-left":A.pointGeometry.convert(P["bottom-left"]||[0,0]),"bottom-right":A.pointGeometry.convert(P["bottom-right"]||[0,0]),left:A.pointGeometry.convert(P.left||[0,0]),right:A.pointGeometry.convert(P.right||[0,0])}}return rp(new A.pointGeometry(0,0))}const op={version:A.version,supported:gt,setRTLTextPlugin:A.setRTLTextPlugin,getRTLTextPluginStatus:A.getRTLTextPluginStatus,Map:class extends $o{constructor(P){if(null!=(P=A.extend({},Km,P)).minZoom&&null!=P.maxZoom&&P.minZoom>P.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=P.minPitch&&null!=P.maxPitch&&P.minPitch>P.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=P.minPitch&&P.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=P.maxPitch&&P.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new gh(P.minZoom,P.maxZoom,P.minPitch,P.maxPitch,P.renderWorldCopies),P),this._interactive=P.interactive,this._maxTileCacheSize=P.maxTileCacheSize,this._failIfMajorPerformanceCaveat=P.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=P.preserveDrawingBuffer,this._antialias=P.antialias,this._trackResize=P.trackResize,this._bearingSnap=P.bearingSnap,this._refreshExpiredTiles=P.refreshExpiredTiles,this._fadeDuration=P.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=P.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=P.collectResourceTiming,this._optimizeForTerrain=P.optimizeForTerrain,this._renderTaskQueue=new tp,this._domRenderTaskQueue=new tp,this._controls=[],this._markers=[],this._mapId=A.uniqueId(),this._locale=A.extend({},Gc,P.locale),this._clickTolerance=P.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Iu(0),this._requestManager=new A.RequestManager(P.transformRequest,P.accessToken,P.testMode),this._silenceAuthErrors=!!P.testMode,"string"==typeof P.container){if(this._container=A.window.document.getElementById(P.container),!this._container)throw new Error(`Container '${P.container}' not found.`)}else{if(!(P.container instanceof mc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=P.container}if(P.maxBounds&&this.setMaxBounds(P.maxBounds),A.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==A.window&&(A.window.addEventListener("online",this._onWindowOnline,!1),A.window.addEventListener("resize",this._onWindowResize,!1),A.window.addEventListener("orientationchange",this._onWindowResize,!1),A.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new ep(this,P),this._hash=P.hash&&new Da("string"==typeof P.hash&&P.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:P.center,zoom:P.zoom,bearing:P.bearing,pitch:P.pitch}),P.bounds&&(this.resize(),this.fitBounds(P.bounds,A.extend({},P.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=P.localFontFamily,this._localIdeographFontFamily=P.localIdeographFontFamily,P.style&&this.setStyle(P.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),P.attributionControl&&this.addControl(new la({customAttribution:P.customAttribution})),this._logoControl=new Uc,this.addControl(this._logoControl,P.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",f=>{this._update("style"===f.dataType),this.fire(new A.Event(`${f.dataType}data`,f))}),this.on("dataloading",f=>{this.fire(new A.Event(`${f.dataType}dataloading`,f))})}_getMapId(){return this._mapId}addControl(P,f){if(void 0===f&&(f=P.getDefaultPosition?P.getDefaultPosition():"top-right"),!P||!P.onAdd)return this.fire(new A.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const w=P.onAdd(this);this._controls.push(P);const O=this._controlPositions[f];return-1!==f.indexOf("bottom")?O.insertBefore(w,O.firstChild):O.appendChild(w),this}removeControl(P){if(!P||!P.onRemove)return this.fire(new A.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const f=this._controls.indexOf(P);return f>-1&&this._controls.splice(f,1),P.onRemove(this),this}hasControl(P){return this._controls.indexOf(P)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(P){const f=this._containerDimensions(),w=f[0],O=f[1];this._resizeCanvas(w,O),this.transform.resize(w,O),this.painter.resize(w,O);const U=!this._moving;return U&&(this.stop(),this.fire(new A.Event("movestart",P)).fire(new A.Event("move",P))),this.fire(new A.Event("resize",P)),U&&this.fire(new A.Event("moveend",P)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(P){return this.transform.setMaxBounds(A.LngLatBounds.convert(P)),this._update()}setMinZoom(P){if((P=null==P?-2:P)>=-2&&P<=this.transform.maxZoom)return this.transform.minZoom=P,this._update(),this.getZoom()<P&&this.setZoom(P),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(P){if((P=null==P?22:P)>=this.transform.minZoom)return this.transform.maxZoom=P,this._update(),this.getZoom()>P&&this.setZoom(P),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(P){if((P=null==P?0:P)<0)throw new Error("minPitch must be greater than or equal to 0");if(P>=0&&P<=this.transform.maxPitch)return this.transform.minPitch=P,this._update(),this.getPitch()<P&&this.setPitch(P),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(P){if((P=null==P?85:P)>85)throw new Error("maxPitch must be less than or equal to 85");if(P>=this.transform.minPitch)return this.transform.maxPitch=P,this._update(),this.getPitch()>P&&this.setPitch(P),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(P){return this.transform.renderWorldCopies=P,this._update()}project(P){return this.transform.locationPoint3D(A.LngLat.convert(P))}unproject(P){return this.transform.pointLocation3D(A.pointGeometry.convert(P))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(P,f,w){if("mouseenter"===P||"mouseover"===P){let O=!1;return{layer:f,listener:w,delegates:{mousemove:q=>{const ee=this.getLayer(f)?this.queryRenderedFeatures(q.point,{layers:[f]}):[];ee.length?O||(O=!0,w.call(this,new fs(P,this,q.originalEvent,{features:ee}))):O=!1},mouseout:()=>{O=!1}}}}if("mouseleave"===P||"mouseout"===P){let O=!1;return{layer:f,listener:w,delegates:{mousemove:ee=>{(this.getLayer(f)?this.queryRenderedFeatures(ee.point,{layers:[f]}):[]).length?O=!0:O&&(O=!1,w.call(this,new fs(P,this,ee.originalEvent)))},mouseout:ee=>{O&&(O=!1,w.call(this,new fs(P,this,ee.originalEvent)))}}}}{const O=U=>{const q=this.getLayer(f)?this.queryRenderedFeatures(U.point,{layers:[f]}):[];q.length&&(U.features=q,w.call(this,U),delete U.features)};return{layer:f,listener:w,delegates:{[P]:O}}}}on(P,f,w){if(void 0===w)return super.on(P,f);const O=this._createDelegatedListener(P,f,w);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[P]=this._delegatedListeners[P]||[],this._delegatedListeners[P].push(O);for(const U in O.delegates)this.on(U,O.delegates[U]);return this}once(P,f,w){if(void 0===w)return super.once(P,f);const O=this._createDelegatedListener(P,f,w);for(const U in O.delegates)this.once(U,O.delegates[U]);return this}off(P,f,w){return void 0===w?super.off(P,f):(this._delegatedListeners&&this._delegatedListeners[P]&&(O=>{const U=this._delegatedListeners[P];for(let q=0;q<U.length;q++){const ee=U[q];if(ee.layer===f&&ee.listener===w){for(const se in ee.delegates)this.off(se,ee.delegates[se]);return U.splice(q,1),this}}})(),this)}queryRenderedFeatures(P,f){return this.style?(void 0!==f||void 0===P||P instanceof A.pointGeometry||Array.isArray(P)||(f=P,P=void 0),this.style.queryRenderedFeatures(P=P||[[0,0],[this.transform.width,this.transform.height]],f=f||{},this.transform)):[]}querySourceFeatures(P,f){return this.style.querySourceFeatures(P,f)}queryTerrainElevation(P,f){const w=this.transform.elevation;return w?(f=A.extend({},{exaggerated:!0},f),w.getAtPoint(A.MercatorCoordinate.fromLngLat(P),null,f.exaggerated)):null}setStyle(P,f){return!1!==(f=A.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},f)).diff&&f.localIdeographFontFamily===this._localIdeographFontFamily&&f.localFontFamily===this._localFontFamily&&this.style&&P?(this._diffStyle(P,f),this):(this._localIdeographFontFamily=f.localIdeographFontFamily,this._localFontFamily=f.localFontFamily,this._updateStyle(P,f))}_getUIString(P){const f=this._locale[P];if(null==f)throw new Error(`Missing UI string '${P}'`);return f}_updateStyle(P,f){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),P&&(this.style=new zo(this,f||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof P?this.style.loadURL(P):this.style.loadJSON(P)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new zo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(P,f){if("string"==typeof P){const w=this._requestManager.normalizeStyleURL(P),O=this._requestManager.transformRequest(w,A.ResourceType.Style);A.getJSON(O,(U,q)=>{U?this.fire(new A.ErrorEvent(U)):q&&this._updateDiff(q,f)})}else"object"==typeof P&&this._updateDiff(P,f)}_updateDiff(P,f){try{this.style.setState(P)&&this._update(!0)}catch(w){A.warnOnce(`Unable to perform style diff: ${w.message||w.error||w}.  Rebuilding the style from scratch.`),this._updateStyle(P,f)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():A.warnOnce("There is no style added to the map.")}addSource(P,f){return this._lazyInitEmptyStyle(),this.style.addSource(P,f),this._update(!0)}isSourceLoaded(P){const f=this.style&&this.style._getSourceCaches(P);if(0!==f.length)return f.every(w=>w.loaded());this.fire(new A.ErrorEvent(new Error(`There is no source with ID '${P}'`)))}areTilesLoaded(){const P=this.style&&this.style._sourceCaches;for(const f in P){const w=P[f]._tiles;for(const O in w){const U=w[O];if("loaded"!==U.state&&"errored"!==U.state)return!1}}return!0}addSourceType(P,f,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(P,f,w)}removeSource(P){return this.style.removeSource(P),this._updateTerrain(),this._update(!0)}getSource(P){return this.style.getSource(P)}addImage(P,f,{pixelRatio:w=1,sdf:O=!1,stretchX:U,stretchY:q,content:ee}={}){if(this._lazyInitEmptyStyle(),f instanceof jc||Pu&&f instanceof Pu){const{width:se,height:ue,data:fe}=A.exported.getImageData(f);this.style.addImage(P,{data:new A.RGBAImage({width:se,height:ue},fe),pixelRatio:w,stretchX:U,stretchY:q,content:ee,sdf:O,version:0})}else{if(void 0===f.width||void 0===f.height)return this.fire(new A.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:se,height:ue,data:fe}=f,Ce=f;this.style.addImage(P,{data:new A.RGBAImage({width:se,height:ue},new Uint8Array(fe)),pixelRatio:w,stretchX:U,stretchY:q,content:ee,sdf:O,version:0,userImage:Ce}),Ce.onAdd&&Ce.onAdd(this,P)}}}updateImage(P,f){const w=this.style.getImage(P);if(!w)return this.fire(new A.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const O=f instanceof jc||Pu&&f instanceof Pu?A.exported.getImageData(f):f,{width:U,height:q,data:ee}=O;return void 0===U||void 0===q?this.fire(new A.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):U!==w.data.width||q!==w.data.height?this.fire(new A.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(ee,!(f instanceof jc||Pu&&f instanceof Pu)),void this.style.updateImage(P,w))}hasImage(P){return P?!!this.style.getImage(P):(this.fire(new A.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(P){this.style.removeImage(P)}loadImage(P,f){A.getImage(this._requestManager.transformRequest(P,A.ResourceType.Image),(w,O)=>{f(w,O instanceof jc?A.exported.getImageData(O):O)})}listImages(){return this.style.listImages()}addLayer(P,f){return this._lazyInitEmptyStyle(),this.style.addLayer(P,f),this._update(!0)}moveLayer(P,f){return this.style.moveLayer(P,f),this._update(!0)}removeLayer(P){return this.style.removeLayer(P),this._update(!0)}getLayer(P){return this.style.getLayer(P)}setLayerZoomRange(P,f,w){return this.style.setLayerZoomRange(P,f,w),this._update(!0)}setFilter(P,f,w={}){return this.style.setFilter(P,f,w),this._update(!0)}getFilter(P){return this.style.getFilter(P)}setPaintProperty(P,f,w,O={}){return this.style.setPaintProperty(P,f,w,O),this._update(!0)}getPaintProperty(P,f){return this.style.getPaintProperty(P,f)}setLayoutProperty(P,f,w,O={}){return this.style.setLayoutProperty(P,f,w,O),this._update(!0)}getLayoutProperty(P,f){return this.style.getLayoutProperty(P,f)}setLight(P,f={}){return this._lazyInitEmptyStyle(),this.style.setLight(P,f),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(P){return this._lazyInitEmptyStyle(),this.style.setTerrain(P),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(P){return this._lazyInitEmptyStyle(),this.style.setFog(P),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(P){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(A.LngLat.convert(P),this.transform):0}setFeatureState(P,f){return this.style.setFeatureState(P,f),this._update()}removeFeatureState(P,f){return this.style.removeFeatureState(P,f),this._update()}getFeatureState(P){return this.style.getFeatureState(P)}_containerDimensions(){let P=0,f=0;return this._container&&(P=this._container.clientWidth||400,f=this._container.clientHeight||300),[P,f]}_detectMissingCSS(){"rgb(250, 128, 114)"!==A.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&A.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const P=this._container;P.classList.add("mapboxgl-map"),(this._missingCSSCanary=Ge.create("div","mapboxgl-canary",P)).style.visibility="hidden",this._detectMissingCSS();const f=this._canvasContainer=Ge.create("div","mapboxgl-canvas-container",P);this._interactive&&f.classList.add("mapboxgl-interactive"),this._canvas=Ge.create("canvas","mapboxgl-canvas",f),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);const O=this._controlContainer=Ge.create("div","mapboxgl-control-container",P),U=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(q=>{U[q]=Ge.create("div",`mapboxgl-ctrl-${q}`,O)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(P,f){const w=A.exported.devicePixelRatio||1;this._canvas.width=w*P,this._canvas.height=w*f,this._canvas.style.width=`${P}px`,this._canvas.style.height=`${f}px`}_addMarker(P){this._markers.push(P)}_removeMarker(P){const f=this._markers.indexOf(P);-1!==f&&this._markers.splice(f,1)}_setupPainter(){const P=A.extend({},gt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),f=this._canvas.getContext("webgl",P)||this._canvas.getContext("experimental-webgl",P);f?(A.storeAuthState(f,!0),this.painter=new Hp(f,this.transform),this.on("data",w=>{"source"===w.dataType&&this.painter.setTileLoadedFlag(!0)}),A.exported$1.testSupport(f)):this.fire(new A.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(P){P.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new A.Event("webglcontextlost",{originalEvent:P}))}_contextRestored(P){this._setupPainter(),this.resize(),this._update(),this.fire(new A.Event("webglcontextrestored",{originalEvent:P}))}_onMapScroll(P){if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(P){return this.style?(this._styleDirty=this._styleDirty||P,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(P){return this._update(),this._renderTaskQueue.add(P)}_cancelRenderFrame(P){this._renderTaskQueue.remove(P)}_requestDomTask(P){!this.isMoving()&&this.loaded()?P():this._domRenderTaskQueue.add(P)}_render(P){let f;const w=this.painter.context.extTimerQuery,O=A.exported.now();this.listens("gpu-timing-frame")&&(f=w.createQueryEXT(),w.beginQueryEXT(w.TIME_ELAPSED_EXT,f));let U=this._updateAverageElevation(O);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(P),this._domRenderTaskQueue.run(P),this._removed)return;let q=!1;const ee=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const ue=this.transform.zoom,fe=A.exported.now();this.style.zoomHistory.update(ue,fe);const Ce=new A.EvaluationParameters(ue,{now:fe,fadeDuration:ee,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ae=Ce.crossFadingFactor();1===Ae&&Ae===this._crossFadingFactor||(q=!0,this._crossFadingFactor=Ae),this.style.update(Ce)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,ee,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:ee,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new A.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new A.Event("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ue=A.exported.now()-O;w.endQueryEXT(w.TIME_ELAPSED_EXT,f),setTimeout(()=>{const fe=w.getQueryObjectEXT(f,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(f),this.fire(new A.Event("gpu-timing-frame",{cpuTime:ue,gpuTime:fe}))},50)}if(this.listens("gpu-timing-layer")){const ue=this.painter.collectGpuTimers();setTimeout(()=>{const fe=this.painter.queryGpuTimers(ue);this.fire(new A.Event("gpu-timing-layer",{layerTimes:fe}))},50)}const se=this._sourcesDirty||this._styleDirty||this._placementDirty||U;if(se||this._repaint)this.triggerRepaint();else{const ue=!this.isMoving()&&this.loaded();if(ue&&(U=this._updateAverageElevation(O,!0)),U)this.triggerRepaint();else if(this._triggerFrame(!1),ue&&(this.fire(new A.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const fe=this._calculateSpeedIndex();this.fire(new A.Event("speedindexcompleted",{speedIndex:fe})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||se||(this._fullyLoaded=!0,this._authenticate()),this}_updateAverageElevation(P,f=!1){const w=O=>(this.transform.averageElevation=O,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&w(0);if((f||P-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(P)){const O=this.transform.averageElevation;let U=this.transform.sampleAverageElevation();isNaN(U)?U=0:this._averageElevationLastSampledAt=P;const q=Math.abs(O-U);if(q>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(U),w(U);this._averageElevation.easeTo(U,P,300)}else if(q>1e-4)return this._averageElevation.jumpTo(U),w(U)}return!!this._averageElevation.isEasing(P)&&w(this._averageElevation.getValue(P))}_authenticate(){A.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,P=>{if(P&&(P.message===A.AUTH_ERR_MSG||401===P.status)){const f=this.painter.context.gl;A.storeAuthState(f,!1),this._logoControl instanceof Uc&&this._logoControl._updateLogo(),f&&f.clear(f.DEPTH_BUFFER_BIT|f.COLOR_BUFFER_BIT|f.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new A.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),A.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const P=this.painter.canvasCopy(),f=this.painter.getCanvasCopiesAndTimestamps();f.timeStamps.push(performance.now());const w=this.painter.context.gl,O=w.createFramebuffer();function U(q){w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,q,0);const ee=new Uint8Array(w.drawingBufferWidth*w.drawingBufferHeight*4);return w.readPixels(0,0,w.drawingBufferWidth,w.drawingBufferHeight,w.RGBA,w.UNSIGNED_BYTE,ee),ee}return w.bindFramebuffer(w.FRAMEBUFFER,O),this._canvasPixelComparison(U(P),f.canvasCopies.map(U),f.timeStamps)}_canvasPixelComparison(P,f,w){let O=w[1]-w[0];const U=P.length/4;for(let q=0;q<f.length;q++){const ee=f[q];let se=0;for(let ue=0;ue<ee.length;ue+=4)ee[ue]===P[ue]&&ee[ue+1]===P[ue+1]&&ee[ue+2]===P[ue+2]&&ee[ue+3]===P[ue+3]&&(se+=1);O+=(w[q+2]-w[q+1])*(1-se/U)}return O}remove(){this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==A.window&&(A.window.removeEventListener("resize",this._onWindowResize,!1),A.window.removeEventListener("orientationchange",this._onWindowResize,!1),A.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),A.window.removeEventListener("online",this._onWindowOnline,!1));const P=this.painter.context.gl.getExtension("WEBGL_lose_context");P&&P.loseContext(),xh(this._canvasContainer),xh(this._controlContainer),xh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),A.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new A.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(P){this._renderNextFrame=this._renderNextFrame||P,this.style&&!this._frame&&(this._frame=A.exported.frame(f=>{const w=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,w&&this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(P){this._trackResize&&this.resize({originalEvent:P})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(P){this._showTileBoundaries!==P&&(this._showTileBoundaries=P,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(P){this._showTerrainWireframe!==P&&(this._showTerrainWireframe=P,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(P){this._speedIndexTiming!==P&&(this._speedIndexTiming=P,this._update())}get showPadding(){return!!this._showPadding}set showPadding(P){this._showPadding!==P&&(this._showPadding=P,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(P){this._showCollisionBoxes!==P&&(this._showCollisionBoxes=P,P?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(P){this._showOverdrawInspector!==P&&(this._showOverdrawInspector=P,this._update())}get repaint(){return!!this._repaint}set repaint(P){this._repaint!==P&&(this._repaint=P,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(P){this._vertices=P,this._update()}_setCacheLimits(P,f){A.setCacheLimits(P,f)}get version(){return A.version}},NavigationControl:class{constructor(P){this.options=A.extend({},np,P),this._container=Ge.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",f=>f.preventDefault()),this.options.showZoom&&(A.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",f=>this._map.zoomIn({},{originalEvent:f})),Ge.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",f=>this._map.zoomOut({},{originalEvent:f})),Ge.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(A.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",f=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:f}):this._map.resetNorth({},{originalEvent:f})}),this._compassIcon=Ge.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const P=this._map.getZoom(),f=P===this._map.getMaxZoom(),w=P===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())}_rotateCompassArrow(){const P=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=P)})}onAdd(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ip(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Ge.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(P,f){const w=Ge.create("button",P,this._container);return w.type="button",w.addEventListener("click",f),w}_setButtonTitle(P,f){const w=this._map._getUIString(`NavigationControl.${f}`);P.title=w,P.setAttribute("aria-label",w)}},GeolocateControl:class extends A.Evented{constructor(P){super(),this.options=A.extend({},Po,P),A.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=rd(this._updateMarkerRotation,20)}onAdd(P){var f;return this._map=P,this._container=Ge.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),f=this._setupUI,void 0!==Bn?f(Bn):void 0!==A.window.navigator.permissions?A.window.navigator.permissions.query({name:"geolocation"}).then(w=>{Bn="denied"!==w.state,f(Bn)}):(Bn=!!A.window.navigator.geolocation,f(Bn)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(A.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ge.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ca=0,Yc=!1}_isOutOfMapMaxBounds(P){const f=this._map.getMaxBounds(),w=P.coords;return f&&(w.longitude<f.getWest()||w.longitude>f.getEast()||w.latitude<f.getSouth()||w.latitude>f.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(P){if(this._map){if(this._isOutOfMapMaxBounds(P))return this._setErrorState(),this.fire(new A.Event("outofmaxbounds",P)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=P,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(P),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(P),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new A.Event("geolocate",P)),this._finish()}}_updateCamera(P){const f=new A.LngLat(P.coords.longitude,P.coords.latitude),w=P.coords.accuracy,O=this._map.getBearing(),U=A.extend({bearing:O},this.options.fitBoundsOptions);this._map.fitBounds(f.toBounds(w),U,{geolocateSource:!0})}_updateMarker(P){if(P){const f=new A.LngLat(P.coords.longitude,P.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=P.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const P=this._map._container.clientHeight/2,f=this._map.unproject([0,P]),w=this._map.unproject([100,P]),O=f.distanceTo(w)/100,U=Math.ceil(2*this._accuracy/O);this._circleElement.style.width=`${U}px`,this._circleElement.style.height=`${U}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(P){if(this._map){if(this.options.trackUserLocation)if(1===P.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===P.code&&Yc)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new A.Event("error",P)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(P){if(this._container.addEventListener("contextmenu",f=>f.preventDefault()),this._geolocateButton=Ge.create("button","mapboxgl-ctrl-geolocate",this._container),Ge.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===P){A.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ge.create("div","mapboxgl-user-location"),this._dotElement.appendChild(Ge.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Ge.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Gl({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Ge.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Gl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||"ACTIVE_LOCK"!==this._watchState||f.originalEvent&&"resize"===f.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new A.Event("trackuserlocationend")))})}_onDeviceOrientation(P){this._userLocationDotMarker&&(P.webkitCompassHeading?this._heading=P.webkitCompassHeading:!0===P.absolute&&(this._heading=-1*P.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return A.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new A.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ca--,Yc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new A.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new A.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let P;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ca++,ca>1?(P={maximumAge:6e5,timeout:0},Yc=!0):(P=this.options.positionOptions,Yc=!1),this._geolocationWatchID=A.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,P),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else A.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const P=()=>{A.window.addEventListener("ondeviceorientationabsolute"in A.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};void 0!==A.window.DeviceMotionEvent&&"function"==typeof A.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(f=>{"granted"===f&&P()}).catch(console.error):P()}_clearWatch(){A.window.navigator.geolocation.clearWatch(this._geolocationWatchID),A.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),A.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:la,ScaleControl:class{constructor(P){this.options=A.extend({},ms,P),A.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ff(this._map,this._container,this.options)}onAdd(P){return this._map=P,this._container=Ge.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Ge.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(P){this.options.unit=P,Ff(this._map,this._container,this.options)}},FullscreenControl:class{constructor(P){this._fullscreen=!1,P&&P.container&&(P.container instanceof A.window.HTMLElement?this._container=P.container:A.warnOnce("Full screen control 'container' must be a DOM element.")),A.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in A.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in A.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ge.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",A.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){Ge.remove(this._controlContainer),this._map=null,A.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!A.window.document.fullscreenEnabled&&!A.window.document.webkitFullscreenEnabled)}_setupUI(){const P=this._fullscreenButton=Ge.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Ge.create("span","mapboxgl-ctrl-icon",P).setAttribute("aria-hidden",!0),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),A.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(A.window.document.fullscreenElement||A.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?A.window.document.exitFullscreen?A.window.document.exitFullscreen():A.window.document.webkitCancelFullScreen&&A.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends A.Evented{constructor(P){super(),this.options=A.extend(Object.create(Lf),P),A.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(P){return this._map&&this.remove(),this._map=P,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new A.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&Ge.remove(this._content),this._container&&(Ge.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new A.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(P){return this._lngLat=A.LngLat.convert(P),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(P){return this.setDOMContent(A.window.document.createTextNode(P))}setHTML(P){const f=A.window.document.createDocumentFragment(),w=A.window.document.createElement("body");let O;for(w.innerHTML=P;O=w.firstChild,O;)f.appendChild(O);return this.setDOMContent(f)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(P){return this.options.maxWidth=P,this._update(),this}setDOMContent(P){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Ge.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(P),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(P){this._container&&this._container.classList.add(P)}removeClassName(P){this._container&&this._container.classList.remove(P)}setOffset(P){return this.options.offset=P,this._update(),this}toggleClassName(P){if(this._container)return this._container.classList.toggle(P)}_createCloseButton(){this.options.closeButton&&(this._closeButton=Ge.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(P){this._update(P.point)}_onMouseMove(P){this._update(P.point)}_onDrag(P){this._update(P.point)}_update(P){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=Ge.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Ge.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(q=>this._container.classList.add(q)),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=fc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!P))return;const f=this._pos=this._trackPointer&&P?P:this._map.project(this._lngLat);let w=this.options.anchor;const O=rp(this.options.offset);if(!w){const q=this._container.offsetWidth,ee=this._container.offsetHeight;let se;se=f.y+O.bottom.y<ee?["top"]:f.y>this._map.transform.height-ee?["bottom"]:[],f.x<q/2?se.push("left"):f.x>this._map.transform.width-q/2&&se.push("right"),w=0===se.length?"bottom":se.join("-")}const U=f.add(O[w]).round();this._map._requestDomTask(()=>{this._container&&w&&(Ge.setTransform(this._container,`${bh[w]} translate(${U.x}px,${U.y}px)`),Hc(this._container,w,"popup"))})}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const P=this._container.querySelector(qc);P&&P.focus()}_onClose(){this.remove()}_setOpacity(P){this._content&&(this._content.style.opacity=P),this._tip&&(this._tip.style.opacity=P)}},Marker:Gl,Style:zo,LngLat:A.LngLat,LngLatBounds:A.LngLatBounds,Point:A.pointGeometry,MercatorCoordinate:A.MercatorCoordinate,FreeCameraOptions:Bc,Evented:A.Evented,config:A.config,prewarm:function(){ve().acquire(xt)},clearPrewarmedResources:function(){const P=en;P&&(P.isPreloaded()&&1===P.numActive()?(P.release(xt),en=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return A.config.ACCESS_TOKEN},set accessToken(P){A.config.ACCESS_TOKEN=P},get baseApiUrl(){return A.config.API_URL},set baseApiUrl(P){A.config.API_URL=P},get workerCount(){return Ft.workerCount},set workerCount(P){Ft.workerCount=P},get maxParallelImageRequests(){return A.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(P){A.config.MAX_PARALLEL_IMAGE_REQUESTS=P},clearStorage(P){A.clearTileCache(P)},workerUrl:"",workerClass:null,setNow:A.exported.setNow,restoreNow:A.exported.restoreNow};return op}),s}()},3098:(ai,_n,nt)=>{"use strict";nt.d(_n,{P:()=>gt});var s=nt(9193),Vt=nt(5917),Ee=nt(205);class gt{constructor(wt,Be,Ge){this.kind=wt,this.value=Be,this.error=Ge,this.hasValue="N"===wt}observe(wt){switch(this.kind){case"N":return wt.next&&wt.next(this.value);case"E":return wt.error&&wt.error(this.error);case"C":return wt.complete&&wt.complete()}}do(wt,Be,Ge){switch(this.kind){case"N":return wt&&wt(this.value);case"E":return Be&&Be(this.error);case"C":return Ge&&Ge()}}accept(wt,Be,Ge){return wt&&"function"==typeof wt.next?this.observe(wt):this.do(wt,Be,Ge)}toObservable(){switch(this.kind){case"N":return(0,Vt.of)(this.value);case"E":return(0,Ee._)(this.error);case"C":return(0,s.c)()}throw new Error("unexpected notification kind value")}static createNext(wt){return void 0!==wt?new gt("N",wt):gt.undefinedValueNotification}static createError(wt){return new gt("E",void 0,wt)}static createComplete(){return gt.completeNotification}}gt.completeNotification=new gt("C"),gt.undefinedValueNotification=new gt("N",void 0)},7574:(ai,_n,nt)=>{"use strict";nt.d(_n,{y:()=>Et});var s=nt(7393),Ee=nt(9181),A=nt(6490),Dt=nt(6554),wt=nt(4487);var Ve=nt(2494);let Et=(()=>{class Ct{constructor(an){this._isScalar=!1,an&&(this._subscribe=an)}lift(an){const Qe=new Ct;return Qe.source=this,Qe.operator=an,Qe}subscribe(an,Qe,Rn){const{operator:dn}=this,Mt=function(Ct,zt,an){if(Ct){if(Ct instanceof s.L)return Ct;if(Ct[Ee.b])return Ct[Ee.b]()}return Ct||zt||an?new s.L(Ct,zt,an):new s.L(A.c)}(an,Qe,Rn);if(Mt.add(dn?dn.call(Mt,this.source):this.source||Ve.v.useDeprecatedSynchronousErrorHandling&&!Mt.syncErrorThrowable?this._subscribe(Mt):this._trySubscribe(Mt)),Ve.v.useDeprecatedSynchronousErrorHandling&&Mt.syncErrorThrowable&&(Mt.syncErrorThrowable=!1,Mt.syncErrorThrown))throw Mt.syncErrorValue;return Mt}_trySubscribe(an){try{return this._subscribe(an)}catch(Qe){Ve.v.useDeprecatedSynchronousErrorHandling&&(an.syncErrorThrown=!0,an.syncErrorValue=Qe),function(Ct){for(;Ct;){const{closed:zt,destination:an,isStopped:Qe}=Ct;if(zt||Qe)return!1;Ct=an&&an instanceof s.L?an:null}return!0}(an)?an.error(Qe):console.warn(Qe)}}forEach(an,Qe){return new(Qe=lt(Qe))((Rn,dn)=>{let Mt;Mt=this.subscribe(Vi=>{try{an(Vi)}catch($r){dn($r),Mt&&Mt.unsubscribe()}},dn,Rn)})}_subscribe(an){const{source:Qe}=this;return Qe&&Qe.subscribe(an)}[Dt.L](){return this}pipe(...an){return 0===an.length?this:function(Ct){return 0===Ct.length?wt.y:1===Ct.length?Ct[0]:function(an){return Ct.reduce((Qe,Rn)=>Rn(Qe),an)}}(an)(this)}toPromise(an){return new(an=lt(an))((Qe,Rn)=>{let dn;this.subscribe(Mt=>dn=Mt,Mt=>Rn(Mt),()=>Qe(dn))})}}return Ct.create=zt=>new Ct(zt),Ct})();function lt(Ct){if(Ct||(Ct=Ve.v.Promise||Promise),!Ct)throw new Error("no Promise impl found");return Ct}},6490:(ai,_n,nt)=>{"use strict";nt.d(_n,{c:()=>Ee});var s=nt(2494),Vt=nt(4449);const Ee={closed:!0,next(A){},error(A){if(s.v.useDeprecatedSynchronousErrorHandling)throw A;(0,Vt.z)(A)},complete(){}}},9765:(ai,_n,nt)=>{"use strict";nt.d(_n,{Yc:()=>wt,xQ:()=>Be});var s=nt(7574),Vt=nt(7393),Ee=nt(5319),A=nt(7971),gt=nt(8858),Dt=nt(9181);class wt extends Vt.L{constructor(Et){super(Et),this.destination=Et}}let Be=(()=>{class Ve extends s.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Dt.b](){return new wt(this)}lift(lt){const Ct=new Ge(this,this);return Ct.operator=lt,Ct}next(lt){if(this.closed)throw new A.N;if(!this.isStopped){const{observers:Ct}=this,zt=Ct.length,an=Ct.slice();for(let Qe=0;Qe<zt;Qe++)an[Qe].next(lt)}}error(lt){if(this.closed)throw new A.N;this.hasError=!0,this.thrownError=lt,this.isStopped=!0;const{observers:Ct}=this,zt=Ct.length,an=Ct.slice();for(let Qe=0;Qe<zt;Qe++)an[Qe].error(lt);this.observers.length=0}complete(){if(this.closed)throw new A.N;this.isStopped=!0;const{observers:lt}=this,Ct=lt.length,zt=lt.slice();for(let an=0;an<Ct;an++)zt[an].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(lt){if(this.closed)throw new A.N;return super._trySubscribe(lt)}_subscribe(lt){if(this.closed)throw new A.N;return this.hasError?(lt.error(this.thrownError),Ee.w.EMPTY):this.isStopped?(lt.complete(),Ee.w.EMPTY):(this.observers.push(lt),new gt.W(this,lt))}asObservable(){const lt=new s.y;return lt.source=this,lt}}return Ve.create=(Et,lt)=>new Ge(Et,lt),Ve})();class Ge extends Be{constructor(Et,lt){super(),this.destination=Et,this.source=lt}next(Et){const{destination:lt}=this;lt&&lt.next&&lt.next(Et)}error(Et){const{destination:lt}=this;lt&&lt.error&&this.destination.error(Et)}complete(){const{destination:Et}=this;Et&&Et.complete&&this.destination.complete()}_subscribe(Et){const{source:lt}=this;return lt?this.source.subscribe(Et):Ee.w.EMPTY}}},8858:(ai,_n,nt)=>{"use strict";nt.d(_n,{W:()=>Vt});var s=nt(5319);class Vt extends s.w{constructor(A,gt){super(),this.subject=A,this.subscriber=gt,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const A=this.subject,gt=A.observers;if(this.subject=null,!gt||0===gt.length||A.isStopped||A.closed)return;const Dt=gt.indexOf(this.subscriber);-1!==Dt&&gt.splice(Dt,1)}}},7393:(ai,_n,nt)=>{"use strict";nt.d(_n,{L:()=>wt});var s=nt(9105),Vt=nt(6490),Ee=nt(5319),A=nt(9181),gt=nt(2494),Dt=nt(4449);class wt extends Ee.w{constructor(Ve,Et,lt){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Vt.c;break;case 1:if(!Ve){this.destination=Vt.c;break}if("object"==typeof Ve){Ve instanceof wt?(this.syncErrorThrowable=Ve.syncErrorThrowable,this.destination=Ve,Ve.add(this)):(this.syncErrorThrowable=!0,this.destination=new Be(this,Ve));break}default:this.syncErrorThrowable=!0,this.destination=new Be(this,Ve,Et,lt)}}[A.b](){return this}static create(Ve,Et,lt){const Ct=new wt(Ve,Et,lt);return Ct.syncErrorThrowable=!1,Ct}next(Ve){this.isStopped||this._next(Ve)}error(Ve){this.isStopped||(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(Ve){this.destination.next(Ve)}_error(Ve){this.destination.error(Ve),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:Ve}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=Ve,this}}class Be extends wt{constructor(Ve,Et,lt,Ct){super(),this._parentSubscriber=Ve;let zt,an=this;(0,s.m)(Et)?zt=Et:Et&&(zt=Et.next,lt=Et.error,Ct=Et.complete,Et!==Vt.c&&(an=Object.create(Et),(0,s.m)(an.unsubscribe)&&this.add(an.unsubscribe.bind(an)),an.unsubscribe=this.unsubscribe.bind(this))),this._context=an,this._next=zt,this._error=lt,this._complete=Ct}next(Ve){if(!this.isStopped&&this._next){const{_parentSubscriber:Et}=this;gt.v.useDeprecatedSynchronousErrorHandling&&Et.syncErrorThrowable?this.__tryOrSetError(Et,this._next,Ve)&&this.unsubscribe():this.__tryOrUnsub(this._next,Ve)}}error(Ve){if(!this.isStopped){const{_parentSubscriber:Et}=this,{useDeprecatedSynchronousErrorHandling:lt}=gt.v;if(this._error)lt&&Et.syncErrorThrowable?(this.__tryOrSetError(Et,this._error,Ve),this.unsubscribe()):(this.__tryOrUnsub(this._error,Ve),this.unsubscribe());else if(Et.syncErrorThrowable)lt?(Et.syncErrorValue=Ve,Et.syncErrorThrown=!0):(0,Dt.z)(Ve),this.unsubscribe();else{if(this.unsubscribe(),lt)throw Ve;(0,Dt.z)(Ve)}}}complete(){if(!this.isStopped){const{_parentSubscriber:Ve}=this;if(this._complete){const Et=()=>this._complete.call(this._context);gt.v.useDeprecatedSynchronousErrorHandling&&Ve.syncErrorThrowable?(this.__tryOrSetError(Ve,Et),this.unsubscribe()):(this.__tryOrUnsub(Et),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(Ve,Et){try{Ve.call(this._context,Et)}catch(lt){if(this.unsubscribe(),gt.v.useDeprecatedSynchronousErrorHandling)throw lt;(0,Dt.z)(lt)}}__tryOrSetError(Ve,Et,lt){if(!gt.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Et.call(this._context,lt)}catch(Ct){return gt.v.useDeprecatedSynchronousErrorHandling?(Ve.syncErrorValue=Ct,Ve.syncErrorThrown=!0,!0):((0,Dt.z)(Ct),!0)}return!1}_unsubscribe(){const{_parentSubscriber:Ve}=this;this._context=null,this._parentSubscriber=null,Ve.unsubscribe()}}},5319:(ai,_n,nt)=>{"use strict";nt.d(_n,{w:()=>Dt});var s=nt(9796),Vt=nt(1555),Ee=nt(9105);const gt=(()=>{function Be(Ge){return Error.call(this),this.message=Ge?`${Ge.length} errors occurred during unsubscription:\n${Ge.map((Ve,Et)=>`${Et+1}) ${Ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ge,this}return Be.prototype=Object.create(Error.prototype),Be})();class Dt{constructor(Ge){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ge&&(this._ctorUnsubscribe=!0,this._unsubscribe=Ge)}unsubscribe(){let Ge;if(this.closed)return;let{_parentOrParents:Ve,_ctorUnsubscribe:Et,_unsubscribe:lt,_subscriptions:Ct}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,Ve instanceof Dt)Ve.remove(this);else if(null!==Ve)for(let zt=0;zt<Ve.length;++zt)Ve[zt].remove(this);if((0,Ee.m)(lt)){Et&&(this._unsubscribe=void 0);try{lt.call(this)}catch(zt){Ge=zt instanceof gt?wt(zt.errors):[zt]}}if((0,s.k)(Ct)){let zt=-1,an=Ct.length;for(;++zt<an;){const Qe=Ct[zt];if((0,Vt.K)(Qe))try{Qe.unsubscribe()}catch(Rn){Ge=Ge||[],Rn instanceof gt?Ge=Ge.concat(wt(Rn.errors)):Ge.push(Rn)}}}if(Ge)throw new gt(Ge)}add(Ge){let Ve=Ge;if(!Ge)return Dt.EMPTY;switch(typeof Ge){case"function":Ve=new Dt(Ge);case"object":if(Ve===this||Ve.closed||"function"!=typeof Ve.unsubscribe)return Ve;if(this.closed)return Ve.unsubscribe(),Ve;if(!(Ve instanceof Dt)){const Ct=Ve;Ve=new Dt,Ve._subscriptions=[Ct]}break;default:throw new Error("unrecognized teardown "+Ge+" added to Subscription.")}let{_parentOrParents:Et}=Ve;if(null===Et)Ve._parentOrParents=this;else if(Et instanceof Dt){if(Et===this)return Ve;Ve._parentOrParents=[Et,this]}else{if(-1!==Et.indexOf(this))return Ve;Et.push(this)}const lt=this._subscriptions;return null===lt?this._subscriptions=[Ve]:lt.push(Ve),Ve}remove(Ge){const Ve=this._subscriptions;if(Ve){const Et=Ve.indexOf(Ge);-1!==Et&&Ve.splice(Et,1)}}}var Be;function wt(Be){return Be.reduce((Ge,Ve)=>Ge.concat(Ve instanceof gt?Ve.errors:Ve),[])}Dt.EMPTY=((Be=new Dt).closed=!0,Be)},2494:(ai,_n,nt)=>{"use strict";nt.d(_n,{v:()=>Vt});let s=!1;const Vt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Ee){if(Ee){const A=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+A.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=Ee},get useDeprecatedSynchronousErrorHandling(){return s}}},5345:(ai,_n,nt)=>{"use strict";nt.d(_n,{IY:()=>A,Ds:()=>Dt,ft:()=>Be});var s=nt(7393),Vt=nt(7574),Ee=nt(7444);class A extends s.L{constructor(Ve){super(),this.parent=Ve}_next(Ve){this.parent.notifyNext(Ve)}_error(Ve){this.parent.notifyError(Ve),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Dt extends s.L{notifyNext(Ve){this.destination.next(Ve)}notifyError(Ve){this.destination.error(Ve)}notifyComplete(){this.destination.complete()}}function Be(Ge,Ve){if(Ve.closed)return;if(Ge instanceof Vt.y)return Ge.subscribe(Ve);let Et;try{Et=(0,Ee.s)(Ge)(Ve)}catch(lt){Ve.error(lt)}return Et}},2441:(ai,_n,nt)=>{"use strict";nt.d(_n,{c:()=>gt,N:()=>Dt});var s=nt(9765),Vt=nt(7574),Ee=nt(5319),A=nt(1307);class gt extends Vt.y{constructor(Et,lt){super(),this.source=Et,this.subjectFactory=lt,this._refCount=0,this._isComplete=!1}_subscribe(Et){return this.getSubject().subscribe(Et)}getSubject(){const Et=this._subject;return(!Et||Et.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Et=this._connection;return Et||(this._isComplete=!1,Et=this._connection=new Ee.w,Et.add(this.source.subscribe(new wt(this.getSubject(),this))),Et.closed&&(this._connection=null,Et=Ee.w.EMPTY)),Et}refCount(){return(0,A.x)()(this)}}const Dt=(()=>{const Ve=gt.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Ve._subscribe},_isComplete:{value:Ve._isComplete,writable:!0},getSubject:{value:Ve.getSubject},connect:{value:Ve.connect},refCount:{value:Ve.refCount}}})();class wt extends s.Yc{constructor(Et,lt){super(Et),this.connectable=lt}_error(Et){this._unsubscribe(),super._error(Et)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Et=this.connectable;if(Et){this.connectable=null;const lt=Et._connection;Et._refCount=0,Et._subject=null,Et._connection=null,lt&&lt.unsubscribe()}}}},9193:(ai,_n,nt)=>{"use strict";nt.d(_n,{E:()=>Vt,c:()=>Ee});var s=nt(7574);const Vt=new s.y(gt=>gt.complete());function Ee(gt){return gt?function(gt){return new s.y(Dt=>gt.schedule(()=>Dt.complete()))}(gt):Vt}},4402:(ai,_n,nt)=>{"use strict";nt.d(_n,{D:()=>an});var s=nt(7574),Vt=nt(7444),Ee=nt(5319),A=nt(6554),wt=nt(4087),Be=nt(377),Et=nt(4072),lt=nt(9489);function an(Qe,Rn){return Rn?function(Qe,Rn){if(null!=Qe){if(function(Qe){return Qe&&"function"==typeof Qe[A.L]}(Qe))return function(Qe,Rn){return new s.y(dn=>{const Mt=new Ee.w;return Mt.add(Rn.schedule(()=>{const Vi=Qe[A.L]();Mt.add(Vi.subscribe({next($r){Mt.add(Rn.schedule(()=>dn.next($r)))},error($r){Mt.add(Rn.schedule(()=>dn.error($r)))},complete(){Mt.add(Rn.schedule(()=>dn.complete()))}}))})),Mt})}(Qe,Rn);if((0,Et.t)(Qe))return function(Qe,Rn){return new s.y(dn=>{const Mt=new Ee.w;return Mt.add(Rn.schedule(()=>Qe.then(Vi=>{Mt.add(Rn.schedule(()=>{dn.next(Vi),Mt.add(Rn.schedule(()=>dn.complete()))}))},Vi=>{Mt.add(Rn.schedule(()=>dn.error(Vi)))}))),Mt})}(Qe,Rn);if((0,lt.z)(Qe))return(0,wt.r)(Qe,Rn);if(function(Qe){return Qe&&"function"==typeof Qe[Be.hZ]}(Qe)||"string"==typeof Qe)return function(Qe,Rn){if(!Qe)throw new Error("Iterable cannot be null");return new s.y(dn=>{const Mt=new Ee.w;let Vi;return Mt.add(()=>{Vi&&"function"==typeof Vi.return&&Vi.return()}),Mt.add(Rn.schedule(()=>{Vi=Qe[Be.hZ](),Mt.add(Rn.schedule(function(){if(dn.closed)return;let $r,Vn;try{const Di=Vi.next();$r=Di.value,Vn=Di.done}catch(Di){return void dn.error(Di)}Vn?dn.complete():(dn.next($r),this.schedule())}))})),Mt})}(Qe,Rn)}throw new TypeError((null!==Qe&&typeof Qe||Qe)+" is not observable")}(Qe,Rn):Qe instanceof s.y?Qe:new s.y((0,Vt.s)(Qe))}},6693:(ai,_n,nt)=>{"use strict";nt.d(_n,{n:()=>A});var s=nt(7574),Vt=nt(5015),Ee=nt(4087);function A(gt,Dt){return Dt?(0,Ee.r)(gt,Dt):new s.y((0,Vt.V)(gt))}},6682:(ai,_n,nt)=>{"use strict";nt.d(_n,{T:()=>gt});var s=nt(7574),Vt=nt(4869),Ee=nt(3282),A=nt(6693);function gt(...Dt){let wt=Number.POSITIVE_INFINITY,Be=null,Ge=Dt[Dt.length-1];return(0,Vt.K)(Ge)?(Be=Dt.pop(),Dt.length>1&&"number"==typeof Dt[Dt.length-1]&&(wt=Dt.pop())):"number"==typeof Ge&&(wt=Dt.pop()),null===Be&&1===Dt.length&&Dt[0]instanceof s.y?Dt[0]:(0,Ee.J)(wt)((0,A.n)(Dt,Be))}},5917:(ai,_n,nt)=>{"use strict";nt.d(_n,{of:()=>A});var s=nt(4869),Vt=nt(6693),Ee=nt(4087);function A(...gt){let Dt=gt[gt.length-1];return(0,s.K)(Dt)?(gt.pop(),(0,Ee.r)(gt,Dt)):(0,Vt.n)(gt)}},205:(ai,_n,nt)=>{"use strict";nt.d(_n,{_:()=>Vt});var s=nt(7574);function Vt(A,gt){return new s.y(gt?Dt=>gt.schedule(Ee,0,{error:A,subscriber:Dt}):Dt=>Dt.error(A))}function Ee({error:A,subscriber:gt}){gt.error(A)}},8002:(ai,_n,nt)=>{"use strict";nt.d(_n,{U:()=>Vt});var s=nt(7393);function Vt(gt,Dt){return function(Be){if("function"!=typeof gt)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Be.lift(new Ee(gt,Dt))}}class Ee{constructor(Dt,wt){this.project=Dt,this.thisArg=wt}call(Dt,wt){return wt.subscribe(new A(Dt,this.project,this.thisArg))}}class A extends s.L{constructor(Dt,wt,Be){super(Dt),this.project=wt,this.count=0,this.thisArg=Be||this}_next(Dt){let wt;try{wt=this.project.call(this.thisArg,Dt,this.count++)}catch(Be){return void this.destination.error(Be)}this.destination.next(wt)}}},3282:(ai,_n,nt)=>{"use strict";nt.d(_n,{J:()=>Ee});var s=nt(9773),Vt=nt(4487);function Ee(A=Number.POSITIVE_INFINITY){return(0,s.zg)(Vt.y,A)}},9773:(ai,_n,nt)=>{"use strict";nt.d(_n,{zg:()=>A});var s=nt(8002),Vt=nt(4402),Ee=nt(5345);function A(Be,Ge,Ve=Number.POSITIVE_INFINITY){return"function"==typeof Ge?Et=>Et.pipe(A((lt,Ct)=>(0,Vt.D)(Be(lt,Ct)).pipe((0,s.U)((zt,an)=>Ge(lt,zt,Ct,an))),Ve)):("number"==typeof Ge&&(Ve=Ge),Et=>Et.lift(new gt(Be,Ve)))}class gt{constructor(Ge,Ve=Number.POSITIVE_INFINITY){this.project=Ge,this.concurrent=Ve}call(Ge,Ve){return Ve.subscribe(new Dt(Ge,this.project,this.concurrent))}}class Dt extends Ee.Ds{constructor(Ge,Ve,Et=Number.POSITIVE_INFINITY){super(Ge),this.project=Ve,this.concurrent=Et,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Ge){this.active<this.concurrent?this._tryNext(Ge):this.buffer.push(Ge)}_tryNext(Ge){let Ve;const Et=this.index++;try{Ve=this.project(Ge,Et)}catch(lt){return void this.destination.error(lt)}this.active++,this._innerSub(Ve)}_innerSub(Ge){const Ve=new Ee.IY(this),Et=this.destination;Et.add(Ve);const lt=(0,Ee.ft)(Ge,Ve);lt!==Ve&&Et.add(lt)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Ge){this.destination.next(Ge)}notifyComplete(){const Ge=this.buffer;this.active--,Ge.length>0?this._next(Ge.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(ai,_n,nt)=>{"use strict";nt.d(_n,{QV:()=>Ee,ht:()=>gt});var s=nt(7393),Vt=nt(3098);function Ee(wt,Be=0){return function(Ve){return Ve.lift(new A(wt,Be))}}class A{constructor(Be,Ge=0){this.scheduler=Be,this.delay=Ge}call(Be,Ge){return Ge.subscribe(new gt(Be,this.scheduler,this.delay))}}class gt extends s.L{constructor(Be,Ge,Ve=0){super(Be),this.scheduler=Ge,this.delay=Ve}static dispatch(Be){const{notification:Ge,destination:Ve}=Be;Ge.observe(Ve),this.unsubscribe()}scheduleMessage(Be){this.destination.add(this.scheduler.schedule(gt.dispatch,this.delay,new Dt(Be,this.destination)))}_next(Be){this.scheduleMessage(Vt.P.createNext(Be))}_error(Be){this.scheduleMessage(Vt.P.createError(Be)),this.unsubscribe()}_complete(){this.scheduleMessage(Vt.P.createComplete()),this.unsubscribe()}}class Dt{constructor(Be,Ge){this.notification=Be,this.destination=Ge}}},1307:(ai,_n,nt)=>{"use strict";nt.d(_n,{x:()=>Vt});var s=nt(7393);function Vt(){return function(Dt){return Dt.lift(new Ee(Dt))}}class Ee{constructor(Dt){this.connectable=Dt}call(Dt,wt){const{connectable:Be}=this;Be._refCount++;const Ge=new A(Dt,Be),Ve=wt.subscribe(Ge);return Ge.closed||(Ge.connection=Be.connect()),Ve}}class A extends s.L{constructor(Dt,wt){super(Dt),this.connectable=wt}_unsubscribe(){const{connectable:Dt}=this;if(!Dt)return void(this.connection=null);this.connectable=null;const wt=Dt._refCount;if(wt<=0)return void(this.connection=null);if(Dt._refCount=wt-1,wt>1)return void(this.connection=null);const{connection:Be}=this,Ge=Dt._connection;this.connection=null,Ge&&(!Be||Ge===Be)&&Ge.unsubscribe()}}},8819:(ai,_n,nt)=>{"use strict";nt.d(_n,{B:()=>wt});var s=nt(2441);var A=nt(1307),gt=nt(9765);function Dt(){return new gt.xQ}function wt(){return Be=>(0,A.x)()(function(Be,Ge){return function(Et){let lt;lt="function"==typeof Be?Be:function(){return Be};const Ct=Object.create(Et,s.N);return Ct.source=Et,Ct.subjectFactory=lt,Ct}}(Dt)(Be))}},9673:(ai,_n,nt)=>{"use strict";nt.d(_n,{R:()=>gt});var s=nt(7574),Vt=nt(4581),Ee=nt(6561);class A extends s.y{constructor(Be,Ge=0,Ve=Vt.e){super(),this.source=Be,this.delayTime=Ge,this.scheduler=Ve,(!(0,Ee.k)(Ge)||Ge<0)&&(this.delayTime=0),(!Ve||"function"!=typeof Ve.schedule)&&(this.scheduler=Vt.e)}static create(Be,Ge=0,Ve=Vt.e){return new A(Be,Ge,Ve)}static dispatch(Be){const{source:Ge,subscriber:Ve}=Be;return this.add(Ge.subscribe(Ve))}_subscribe(Be){return this.scheduler.schedule(A.dispatch,this.delayTime,{source:this.source,subscriber:Be})}}function gt(wt,Be=0){return function(Ve){return Ve.lift(new Dt(wt,Be))}}class Dt{constructor(Be,Ge){this.scheduler=Be,this.delay=Ge}call(Be,Ge){return new A(Ge,this.delay,this.scheduler).subscribe(Be)}}},3342:(ai,_n,nt)=>{"use strict";nt.d(_n,{b:()=>A});var s=nt(7393);function Vt(){}var Ee=nt(9105);function A(wt,Be,Ge){return function(Et){return Et.lift(new gt(wt,Be,Ge))}}class gt{constructor(Be,Ge,Ve){this.nextOrObserver=Be,this.error=Ge,this.complete=Ve}call(Be,Ge){return Ge.subscribe(new Dt(Be,this.nextOrObserver,this.error,this.complete))}}class Dt extends s.L{constructor(Be,Ge,Ve,Et){super(Be),this._tapNext=Vt,this._tapError=Vt,this._tapComplete=Vt,this._tapError=Ve||Vt,this._tapComplete=Et||Vt,(0,Ee.m)(Ge)?(this._context=this,this._tapNext=Ge):Ge&&(this._context=Ge,this._tapNext=Ge.next||Vt,this._tapError=Ge.error||Vt,this._tapComplete=Ge.complete||Vt)}_next(Be){try{this._tapNext.call(this._context,Be)}catch(Ge){return void this.destination.error(Ge)}this.destination.next(Be)}_error(Be){try{this._tapError.call(this._context,Be)}catch(Ge){return void this.destination.error(Ge)}this.destination.error(Be)}_complete(){try{this._tapComplete.call(this._context)}catch(Be){return void this.destination.error(Be)}return this.destination.complete()}}},4087:(ai,_n,nt)=>{"use strict";nt.d(_n,{r:()=>Ee});var s=nt(7574),Vt=nt(5319);function Ee(A,gt){return new s.y(Dt=>{const wt=new Vt.w;let Be=0;return wt.add(gt.schedule(function(){Be!==A.length?(Dt.next(A[Be++]),Dt.closed||wt.add(this.schedule())):Dt.complete()})),wt})}},6465:(ai,_n,nt)=>{"use strict";nt.d(_n,{o:()=>Ee});var s=nt(5319);class Vt extends s.w{constructor(gt,Dt){super()}schedule(gt,Dt=0){return this}}class Ee extends Vt{constructor(gt,Dt){super(gt,Dt),this.scheduler=gt,this.work=Dt,this.pending=!1}schedule(gt,Dt=0){if(this.closed)return this;this.state=gt;const wt=this.id,Be=this.scheduler;return null!=wt&&(this.id=this.recycleAsyncId(Be,wt,Dt)),this.pending=!0,this.delay=Dt,this.id=this.id||this.requestAsyncId(Be,this.id,Dt),this}requestAsyncId(gt,Dt,wt=0){return setInterval(gt.flush.bind(gt,this),wt)}recycleAsyncId(gt,Dt,wt=0){if(null!==wt&&this.delay===wt&&!1===this.pending)return Dt;clearInterval(Dt)}execute(gt,Dt){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const wt=this._execute(gt,Dt);if(wt)return wt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(gt,Dt){let Be,wt=!1;try{this.work(gt)}catch(Ge){wt=!0,Be=!!Ge&&Ge||new Error(Ge)}if(wt)return this.unsubscribe(),Be}_unsubscribe(){const gt=this.id,Dt=this.scheduler,wt=Dt.actions,Be=wt.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Be&&wt.splice(Be,1),null!=gt&&(this.id=this.recycleAsyncId(Dt,gt,null)),this.delay=null}}},6102:(ai,_n,nt)=>{"use strict";nt.d(_n,{v:()=>Vt});let s=(()=>{class Ee{constructor(gt,Dt=Ee.now){this.SchedulerAction=gt,this.now=Dt}schedule(gt,Dt=0,wt){return new this.SchedulerAction(this,gt).schedule(wt,Dt)}}return Ee.now=()=>Date.now(),Ee})();class Vt extends s{constructor(A,gt=s.now){super(A,()=>Vt.delegate&&Vt.delegate!==this?Vt.delegate.now():gt()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(A,gt=0,Dt){return Vt.delegate&&Vt.delegate!==this?Vt.delegate.schedule(A,gt,Dt):super.schedule(A,gt,Dt)}flush(A){const{actions:gt}=this;if(this.active)return void gt.push(A);let Dt;this.active=!0;do{if(Dt=A.execute(A.state,A.delay))break}while(A=gt.shift());if(this.active=!1,Dt){for(;A=gt.shift();)A.unsubscribe();throw Dt}}}},4581:(ai,_n,nt)=>{"use strict";nt.d(_n,{e:()=>lt,E:()=>Et});let s=1;const Vt=Promise.resolve(),Ee={};function A(Ct){return Ct in Ee&&(delete Ee[Ct],!0)}const gt={setImmediate(Ct){const zt=s++;return Ee[zt]=!0,Vt.then(()=>A(zt)&&Ct()),zt},clearImmediate(Ct){A(Ct)}};var wt=nt(6465),Ge=nt(6102);const Et=new class extends Ge.v{flush(zt){this.active=!0,this.scheduled=void 0;const{actions:an}=this;let Qe,Rn=-1,dn=an.length;zt=zt||an.shift();do{if(Qe=zt.execute(zt.state,zt.delay))break}while(++Rn<dn&&(zt=an.shift()));if(this.active=!1,Qe){for(;++Rn<dn&&(zt=an.shift());)zt.unsubscribe();throw Qe}}}(class extends wt.o{constructor(zt,an){super(zt,an),this.scheduler=zt,this.work=an}requestAsyncId(zt,an,Qe=0){return null!==Qe&&Qe>0?super.requestAsyncId(zt,an,Qe):(zt.actions.push(this),zt.scheduled||(zt.scheduled=gt.setImmediate(zt.flush.bind(zt,null))))}recycleAsyncId(zt,an,Qe=0){if(null!==Qe&&Qe>0||null===Qe&&this.delay>0)return super.recycleAsyncId(zt,an,Qe);0===zt.actions.length&&(gt.clearImmediate(an),zt.scheduled=void 0)}}),lt=Et},3637:(ai,_n,nt)=>{"use strict";nt.d(_n,{z:()=>Ee,P:()=>A});var s=nt(6465);const Ee=new(nt(6102).v)(s.o),A=Ee},7771:(ai,_n,nt)=>{"use strict";nt.d(_n,{c:()=>Dt,N:()=>gt});var s=nt(6465),Ee=nt(6102);const gt=new class extends Ee.v{}(class extends s.o{constructor(Be,Ge){super(Be,Ge),this.scheduler=Be,this.work=Ge}schedule(Be,Ge=0){return Ge>0?super.schedule(Be,Ge):(this.delay=Ge,this.state=Be,this.scheduler.flush(this),this)}execute(Be,Ge){return Ge>0||this.closed?super.execute(Be,Ge):this._execute(Be,Ge)}requestAsyncId(Be,Ge,Ve=0){return null!==Ve&&Ve>0||null===Ve&&this.delay>0?super.requestAsyncId(Be,Ge,Ve):Be.flush(this)}}),Dt=gt},377:(ai,_n,nt)=>{"use strict";nt.d(_n,{hZ:()=>Vt});const Vt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ai,_n,nt)=>{"use strict";nt.d(_n,{L:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ai,_n,nt)=>{"use strict";nt.d(_n,{b:()=>s});const s="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(ai,_n,nt)=>{"use strict";nt.d(_n,{N:()=>Vt});const Vt=(()=>{function Ee(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Ee.prototype=Object.create(Error.prototype),Ee})()},4449:(ai,_n,nt)=>{"use strict";function s(Vt){setTimeout(()=>{throw Vt},0)}nt.d(_n,{z:()=>s})},4487:(ai,_n,nt)=>{"use strict";function s(Vt){return Vt}nt.d(_n,{y:()=>s})},9796:(ai,_n,nt)=>{"use strict";nt.d(_n,{k:()=>s});const s=Array.isArray||(Vt=>Vt&&"number"==typeof Vt.length)},9489:(ai,_n,nt)=>{"use strict";nt.d(_n,{z:()=>s});const s=Vt=>Vt&&"number"==typeof Vt.length&&"function"!=typeof Vt},9105:(ai,_n,nt)=>{"use strict";function s(Vt){return"function"==typeof Vt}nt.d(_n,{m:()=>s})},6561:(ai,_n,nt)=>{"use strict";nt.d(_n,{k:()=>Vt});var s=nt(9796);function Vt(Ee){return!(0,s.k)(Ee)&&Ee-parseFloat(Ee)+1>=0}},1555:(ai,_n,nt)=>{"use strict";function s(Vt){return null!==Vt&&"object"==typeof Vt}nt.d(_n,{K:()=>s})},4072:(ai,_n,nt)=>{"use strict";function s(Vt){return!!Vt&&"function"!=typeof Vt.subscribe&&"function"==typeof Vt.then}nt.d(_n,{t:()=>s})},4869:(ai,_n,nt)=>{"use strict";function s(Vt){return Vt&&"function"==typeof Vt.schedule}nt.d(_n,{K:()=>s})},7444:(ai,_n,nt)=>{"use strict";nt.d(_n,{s:()=>Et});var s=nt(5015),Vt=nt(4449),A=nt(377),Dt=nt(6554),Be=nt(9489),Ge=nt(4072),Ve=nt(1555);const Et=lt=>{if(lt&&"function"==typeof lt[Dt.L])return(lt=>Ct=>{const zt=lt[Dt.L]();if("function"!=typeof zt.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return zt.subscribe(Ct)})(lt);if((0,Be.z)(lt))return(0,s.V)(lt);if((0,Ge.t)(lt))return(lt=>Ct=>(lt.then(zt=>{Ct.closed||(Ct.next(zt),Ct.complete())},zt=>Ct.error(zt)).then(null,Vt.z),Ct))(lt);if(lt&&"function"==typeof lt[A.hZ])return(lt=>Ct=>{const zt=lt[A.hZ]();for(;;){let an;try{an=zt.next()}catch(Qe){return Ct.error(Qe),Ct}if(an.done){Ct.complete();break}if(Ct.next(an.value),Ct.closed)break}return"function"==typeof zt.return&&Ct.add(()=>{zt.return&&zt.return()}),Ct})(lt);{const zt=`You provided ${(0,Ve.K)(lt)?"an invalid object":`'${lt}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(zt)}}},5015:(ai,_n,nt)=>{"use strict";nt.d(_n,{V:()=>s});const s=Vt=>Ee=>{for(let A=0,gt=Vt.length;A<gt&&!Ee.closed;A++)Ee.next(Vt[A]);Ee.complete()}},4408:(ai,_n,nt)=>{"use strict";var s=nt(7716);let Vt=null;function Ee(){return Vt}const wt=new s.OlP("DocumentToken");let Be=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,s.Yz7)({factory:Ge,token:i,providedIn:"platform"}),i})();function Ge(){return(0,s.LFG)(Et)}const Ve=new s.OlP("Location Initialized");let Et=(()=>{class i extends Be{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ee().getBaseHref(this._doc)}onPopState(e){const o=Ee().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=Ee().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,a){lt()?this._history.pushState(e,o,a):this.location.hash=a}replaceState(e,o,a){lt()?this._history.replaceState(e,o,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt))},i.\u0275prov=(0,s.Yz7)({factory:Ct,token:i,providedIn:"platform"}),i})();function lt(){return!!window.history.pushState}function Ct(){return new Et((0,s.LFG)(wt))}function zt(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function an(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Qe(i){return i&&"?"!==i[0]?"?"+i:i}let Rn=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,s.Yz7)({factory:dn,token:i,providedIn:"root"}),i})();function dn(i){const t=(0,s.LFG)(wt).location;return new Vi((0,s.LFG)(Be),t&&t.origin||"")}const Mt=new s.OlP("appBaseHref");let Vi=(()=>{class i extends Rn{constructor(e,o){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return zt(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+Qe(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${o}${a}`:o}pushState(e,o,a,h){const v=this.prepareExternalUrl(a+Qe(h));this._platformLocation.pushState(e,o,v)}replaceState(e,o,a,h){const v=this.prepareExternalUrl(a+Qe(h));this._platformLocation.replaceState(e,o,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,a;null===(a=(o=this._platformLocation).historyGo)||void 0===a||a.call(o,e)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Be),s.LFG(Mt,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),$r=(()=>{class i extends Rn{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=zt(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,a,h){let v=this.prepareExternalUrl(a+Qe(h));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.pushState(e,o,v)}replaceState(e,o,a,h){let v=this.prepareExternalUrl(a+Qe(h));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,a;null===(a=(o=this._platformLocation).historyGo)||void 0===a||a.call(o,e)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Be),s.LFG(Mt,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),Vn=(()=>{class i{constructor(e,o){this._subject=new s.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const a=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=an(Ji(a)),this._platformStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+Qe(o))}normalize(e){return i.stripTrailingSlash(function(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,Ji(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,o="",a=null){this._platformStrategy.pushState(a,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Qe(o)),a)}replaceState(e,o="",a=null){this._platformStrategy.replaceState(a,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Qe(o)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var o,a;null===(a=(o=this._platformStrategy).historyGo)||void 0===a||a.call(o,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(a=>a(e,o))}subscribe(e,o,a){return this._subject.subscribe({next:e,error:o,complete:a})}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Rn),s.LFG(Be))},i.normalizeQueryParams=Qe,i.joinWithSlash=zt,i.stripTrailingSlash=an,i.\u0275prov=(0,s.Yz7)({factory:Di,token:i,providedIn:"root"}),i})();function Di(){return new Vn((0,s.LFG)(Rn),(0,s.LFG)(Be))}function Ji(i){return i.replace(/\/index.html$/,"")}var Gt=(()=>((Gt=Gt||{})[Gt.Zero=0]="Zero",Gt[Gt.One=1]="One",Gt[Gt.Two=2]="Two",Gt[Gt.Few=3]="Few",Gt[Gt.Many=4]="Many",Gt[Gt.Other=5]="Other",Gt))();const Li=s.kL8;class xe{}let ze=(()=>{class i extends xe{constructor(e){super(),this.locale=e}getPluralCategory(e,o){switch(Li(o||this.locale)(e)){case Gt.Zero:return"zero";case Gt.One:return"one";case Gt.Two:return"two";case Gt.Few:return"few";case Gt.Many:return"many";default:return"other"}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.soG))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();function Y(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const o=e.indexOf("="),[a,h]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(a.trim()===t)return decodeURIComponent(h)}return null}let ne=(()=>{class i{constructor(e,o,a,h){this._iterableDiffers=e,this._keyValueDiffers=o,this._ngEl=a,this._renderer=h,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,s.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,s.AaK)(o.item)}`);this._toggleClass(o.item,!0)}),e.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!0)):Object.keys(e).forEach(o=>this._toggleClass(o,!!e[o])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!1)):Object.keys(e).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(e,o){(e=e.trim())&&e.split(/\s+/g).forEach(a=>{o?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.ZZ4),s.Y36(s.aQg),s.Y36(s.SBq),s.Y36(s.Qsj))},i.\u0275dir=s.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i})();class Ie{constructor(t,e,o,a){this.$implicit=t,this.ngForOf=e,this.index=o,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Je=(()=>{class i{constructor(e,o,a){this._viewContainer=e,this._template=o,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(o){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(i){return i.name||typeof i}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const o=[];e.forEachOperation((a,h,v)=>{if(null==a.previousIndex){const k=this._viewContainer.createEmbeddedView(this._template,new Ie(null,this._ngForOf,-1,-1),null===v?void 0:v),z=new Nt(a,k);o.push(z)}else if(null==v)this._viewContainer.remove(null===h?void 0:h);else if(null!==h){const k=this._viewContainer.get(h);this._viewContainer.move(k,v);const z=new Nt(a,k);o.push(z)}});for(let a=0;a<o.length;a++)this._perViewChange(o[a].view,o[a].record);for(let a=0,h=this._viewContainer.length;a<h;a++){const v=this._viewContainer.get(a);v.context.index=a,v.context.count=h,v.context.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(e,o){e.context.$implicit=o.item}static ngTemplateContextGuard(e,o){return!0}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},i.\u0275dir=s.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class Nt{constructor(t,e){this.record=t,this.view=e}}let Xt=(()=>{class i{constructor(e,o){this._viewContainer=e,this._context=new gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){hn("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){hn("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,o){return!0}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.Rgc))},i.\u0275dir=s.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class gn{constructor(){this.$implicit=null,this.ngIf=null}}function hn(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,s.AaK)(t)}'.`)}class Kn{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Ni=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const o=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||o,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),o}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let o=0;o<this._defaultViews.length;o++)this._defaultViews[o].enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),i})(),Nn=(()=>{class i{constructor(e,o,a){this.ngSwitch=a,a._addCase(),this._view=new Kn(e,o)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(Ni,9))},i.\u0275dir=s.lG2({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),i})(),ei=(()=>{class i{constructor(e,o,a){a._addDefault(new Kn(e,o))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(Ni,9))},i.\u0275dir=s.lG2({type:i,selectors:[["","ngSwitchDefault",""]]}),i})(),or=(()=>{class i{constructor(e,o,a){this._ngEl=e,this._differs=o,this._renderer=a,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,o){const[a,h]=e.split(".");null!=(o=null!=o&&h?`${o}${h}`:o)?this._renderer.setStyle(this._ngEl.nativeElement,a,o):this._renderer.removeStyle(this._ngEl.nativeElement,a)}_applyChanges(e){e.forEachRemovedItem(o=>this._setStyle(o.key,null)),e.forEachAddedItem(o=>this._setStyle(o.key,o.currentValue)),e.forEachChangedItem(o=>this._setStyle(o.key,o.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.aQg),s.Y36(s.Qsj))},i.\u0275dir=s.lG2({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),i})(),No=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const o=this._viewContainerRef;this._viewRef&&o.remove(o.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?o.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b))},i.\u0275dir=s.lG2({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[s.TTD]}),i})();class Us{createSubscription(t,e){return t.subscribe({next:e,error:o=>{throw o}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class ro{createSubscription(t,e){return t.then(e,o=>{throw o})}dispose(t){}onDestroy(t){}}const Bo=new ro,yu=new Us;let cl=(()=>{class i{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,o=>this._updateLatestValue(e,o))}_selectStrategy(e){if((0,s.QGY)(e))return Bo;if((0,s.F4k)(e))return yu;throw function(i,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,s.AaK)(i)}'`)}(i,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,o){e===this._obj&&(this._latestValue=o,this._ref.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO,16))},i.\u0275pipe=s.Yjl({name:"async",type:i,pure:!1}),i})(),sr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[{provide:xe,useClass:ze}]}),i})();function ah(i){return"server"===i}let ui=(()=>{class i{}return i.\u0275prov=(0,s.Yz7)({token:i,providedIn:"root",factory:()=>new lh((0,s.LFG)(wt),window)}),i})();class lh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const o=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let a=o.currentNode;for(;a;){const h=a.shadowRoot;if(h){const v=h.getElementById(t)||h.querySelector(`[name="${t}"]`);if(v)return v}a=o.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),o=e.left+this.window.pageXOffset,a=e.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(o-h[0],a-h[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=xu(this.window.history)||xu(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function xu(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Bl{}class uh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new uh,Vt||(Vt=i)}onAndCancel(t,e,o){return t.addEventListener(e,o,!1),()=>{t.removeEventListener(e,o,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Ii=Ii||document.querySelector("base"),Ii?Ii.getAttribute("href"):null);return null==e?null:function(i){Pr=Pr||document.createElement("a"),Pr.setAttribute("href",i);const t=Pr.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ii=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Y(document.cookie,t)}}let Pr,Ii=null;const oo=new s.OlP("TRANSITION_ID"),Ma=[{provide:s.ip1,useFactory:function(i,t,e){return()=>{e.get(s.CZH).donePromise.then(()=>{const o=Ee();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(h=>h.getAttribute("ng-transition")===i).forEach(h=>o.remove(h))})}},deps:[oo,wt,s.zs3],multi:!0}];class hh{static init(){(0,s.VLi)(new hh)}addToWindow(t){s.dqk.getAngularTestability=(o,a=!0)=>{const h=t.findTestabilityInTree(o,a);if(null==h)throw new Error("Could not find testability for element.");return h},s.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(o=>{const a=s.dqk.getAllAngularTestabilities();let h=a.length,v=!1;const k=function(z){v=v||z,h--,0==h&&o(v)};a.forEach(function(z){z.whenStable(k)})})}findTestabilityInTree(t,e,o){if(null==e)return null;const a=t.getTestability(e);return null!=a?a:o?Ee().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Aa=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const dh=new s.OlP("EventManagerPlugins");let wn=(()=>{class i{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(a=>a.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,a){return this._findPluginFor(o).addEventListener(e,o,a)}addGlobalEventListener(e,o,a){return this._findPluginFor(o).addGlobalEventListener(e,o,a)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const a=this._plugins;for(let h=0;h<a.length;h++){const v=a[h];if(v.supports(e))return this._eventNameToPlugin.set(e,v),v}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(dh),s.LFG(s.R0b))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();class hr{constructor(t){this._doc=t}addGlobalEventListener(t,e,o){const a=Ee().getGlobalEventTarget(this._doc,t);if(!a)throw new Error(`Unsupported event target ${a} for event ${e}`);return this.addEventListener(a,e,o)}}let td=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),o.add(a))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),wo=(()=>{class i extends td{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,a){e.forEach(h=>{const v=this._doc.createElement("style");v.textContent=h,a.push(o.appendChild(v))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(nd),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,a)=>{this._addStylesToHost(e,a,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(nd))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();function nd(i){Ee().remove(i)}const Ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ds=/%COMP%/g;function so(i,t,e){for(let o=0;o<t.length;o++){let a=t[o];Array.isArray(a)?so(i,a,e):(a=a.replace(ds,i),e.push(a))}return e}function Wo(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let Ha=(()=>{class i{constructor(e,o,a){this.eventManager=e,this.sharedStylesHost=o,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ui(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case s.ifc.Emulated:{let a=this.rendererByCompId.get(o.id);return a||(a=new fh(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,a)),a.applyToHost(e),a}case 1:case s.ifc.ShadowDom:return new js(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const a=so(o.id,o.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wn),s.LFG(wo),s.LFG(s.AFp))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();class Ui{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Ua[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,o){t&&t.insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error(`The selector "${t}" did not match any elements`);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,a){if(a){e=a+":"+e;const h=Ua[a];h?t.setAttributeNS(h,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){const a=Ua[o];a?t.removeAttributeNS(a,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,a){a&(s.JOm.DashCase|s.JOm.Important)?t.style.setProperty(e,o,a&s.JOm.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&s.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t[e]=o}setValue(t,e){t.nodeValue=e}listen(t,e,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Wo(o)):this.eventManager.addEventListener(t,e,Wo(o))}}class fh extends Ui{constructor(t,e,o,a){super(t),this.component=o;const h=so(a+"-"+o.id,o.styles,[]);e.addStyles(h),this.contentAttr="_ngcontent-%COMP%".replace(ds,a+"-"+o.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(ds,i)}(a+"-"+o.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}}class js extends Ui{constructor(t,e,o,a){super(t),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=so(a.id,a.styles,[]);for(let v=0;v<h.length;v++){const k=document.createElement("style");k.textContent=h[v],this.shadowRoot.appendChild(k)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Nc=(()=>{class i extends hr{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,a){return e.addEventListener(o,a,!1),()=>this.removeEventListener(e,o,a)}removeEventListener(e,o,a){return e.removeEventListener(o,a)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const Ds=["alt","control","meta","shift"],$d={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gh={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let rd=(()=>{class i extends hr{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,o,a){const h=i.parseEventName(o),v=i.eventCallback(h.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ee().onAndCancel(e,h.domEventName,v))}static parseEventName(e){const o=e.toLowerCase().split("."),a=o.shift();if(0===o.length||"keydown"!==a&&"keyup"!==a)return null;const h=i._normalizeKey(o.pop());let v="";if(Ds.forEach(z=>{const $=o.indexOf(z);$>-1&&(o.splice($,1),v+=z+".")}),v+=h,0!=o.length||0===h.length)return null;const k={};return k.domEventName=a,k.fullKey=v,k}static getEventFullKey(e){let o="",a=function(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&Vo.hasOwnProperty(t)&&(t=Vo[t]))}return $d[t]||t}(e);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Ds.forEach(h=>{h!=a&&gh[h](e)&&(o+=h+".")}),o+=a,o}static eventCallback(e,o,a){return h=>{i.getEventFullKey(h)===e&&a.runGuarded(()=>o(h))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),ps=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,s.Yz7)({factory:function(){return(0,s.LFG)(Vl)},token:i,providedIn:"root"}),i})(),Vl=(()=>{class i extends ps{constructor(e){super(),this._doc=e}sanitize(e,o){if(null==o)return null;switch(e){case s.q3G.NONE:return o;case s.q3G.HTML:return(0,s.qzn)(o,"HTML")?(0,s.z3N)(o):(0,s.EiD)(this._doc,String(o)).toString();case s.q3G.STYLE:return(0,s.qzn)(o,"Style")?(0,s.z3N)(o):o;case s.q3G.SCRIPT:if((0,s.qzn)(o,"Script"))return(0,s.z3N)(o);throw new Error("unsafe value used in a script context");case s.q3G.URL:return(0,s.yhl)(o),(0,s.qzn)(o,"URL")?(0,s.z3N)(o):(0,s.mCW)(String(o));case s.q3G.RESOURCE_URL:if((0,s.qzn)(o,"ResourceURL"))return(0,s.z3N)(o);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,s.JVY)(e)}bypassSecurityTrustStyle(e){return(0,s.L6k)(e)}bypassSecurityTrustScript(e){return(0,s.eBb)(e)}bypassSecurityTrustUrl(e){return(0,s.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,s.pB0)(e)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt))},i.\u0275prov=(0,s.Yz7)({factory:function(){return function(i){return new Vl(i.get(wt))}((0,s.LFG)(s.gxx))},token:i,providedIn:"root"}),i})();const dc=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:"browser"},{provide:s.g9A,useValue:function(){uh.makeCurrent(),hh.init()},multi:!0},{provide:wt,useFactory:function(){return(0,s.RDi)(document),document},deps:[]}]),zc=[[],{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function(){return new s.qLn},deps:[]},{provide:dh,useClass:Nc,multi:!0,deps:[wt,s.R0b,s.Lbi]},{provide:dh,useClass:rd,multi:!0,deps:[wt]},[],{provide:Ha,useClass:Ha,deps:[wn,wo,s.AFp]},{provide:s.FYo,useExisting:Ha},{provide:td,useExisting:wo},{provide:wo,useClass:wo,deps:[wt]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b]},{provide:wn,useClass:wn,deps:[dh,s.R0b]},{provide:Bl,useClass:Aa,deps:[]},[]];let Xd=(()=>{class i{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:i,providers:[{provide:s.AFp,useValue:e.appId},{provide:oo,useExisting:s.AFp},Ma]}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(i,12))},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:zc,imports:[sr,s.hGG]}),i})();"undefined"!=typeof window&&window;const qn_firebase={apiKey:"AIzaSyA0170oJhaAshcTwIbj-W97RT3TZrVFOIo",authDomain:"ump-cafe-supply-chain.firebaseapp.com",projectId:"ump-cafe-supply-chain",storageBucket:"ump-cafe-supply-chain.appspot.com",messagingSenderId:"293844040560",appId:"1:293844040560:web:f2309fd986e7bf9757adb5",measurementId:"G-8ZM1TDQ23L"};var wr=nt(57),xl=nt(3637),Gr=nt(7574),Qn=nt(5917),vs=nt(6682),ri=nt(8002),Kd=nt(8819),jr=nt(4402),Is=nt(5345);function Yr(i,t){return"function"==typeof t?e=>e.pipe(Yr((o,a)=>(0,jr.D)(i(o,a)).pipe((0,ri.U)((h,v)=>t(o,h,a,v))))):e=>e.lift(new Hl(i))}class Hl{constructor(t){this.project=t}call(t,e){return e.subscribe(new ep(t,this.project))}}class ep extends Is.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const o=this.index++;try{e=this.project(t,o)}catch(a){return void this.destination.error(a)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const o=new Is.IY(this),a=this.destination;a.add(o),this.innerSubscription=(0,Is.ft)(t,o),this.innerSubscription!==o&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var $o=nt(7393);function la(i,t){let e=!1;return arguments.length>=2&&(e=!0),function(a){return a.lift(new Uc(i,t,e))}}class Uc{constructor(t,e,o=!1){this.accumulator=t,this.seed=e,this.hasSeed=o}call(t,e){return e.subscribe(new tp(t,this.accumulator,this.seed,this.hasSeed))}}class tp extends $o.L{constructor(t,e,o,a){super(t),this.accumulator=e,this._seed=o,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let o;try{o=this.accumulator(this.seed,t,e)}catch(a){this.destination.error(a)}this.seed=o,this.destination.next(o)}}function fc(i,t){return e=>e.lift(new bh(i,t))}class bh{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Hc(t,this.compare,this.keySelector))}}class Hc extends $o.L{constructor(t,e,o){super(t),this.keySelector=o,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:a}=this;e=a?a(t):t}catch(a){return this.destination.error(a)}let o=!1;if(this.hasKey)try{const{compare:a}=this;o=a(this.key,e)}catch(a){return this.destination.error(a)}else this.hasKey=!0;o||(this.key=e,this.destination.next(t))}}class Gl extends $o.L{notifyNext(t,e,o,a,h){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Iu extends $o.L{constructor(t,e,o){super(),this.parent=t,this.outerValue=e,this.outerIndex=o,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Gc=nt(7444);function jc(i,t,e,o,a=new Iu(i,e,o)){if(!a.closed)return t instanceof Gr.y?t.subscribe(a):(0,Gc.s)(t)(a)}class Pu{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Km(t,this.observables,this.project))}}class Km extends Gl{constructor(t,e,o){super(t),this.observables=e,this.project=o,this.toRespond=[];const a=e.length;this.values=new Array(a);for(let h=0;h<a;h++)this.toRespond.push(h);for(let h=0;h<a;h++)this.add(jc(this,e[h],void 0,h))}notifyNext(t,e,o){this.values[o]=e;const a=this.toRespond;if(a.length>0){const h=a.indexOf(o);-1!==h&&a.splice(h,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(o){return void this.destination.error(o)}this.destination.next(e)}}class np{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new ip(t,this.predicate))}}class ip extends $o.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}nt(9192);var Bn=nt(9765),ca=nt(9746),Yc=nt(7771),ms=nt(5319),Ff=nt(7971),wh=nt(8858);class Lf extends Bn.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new qc(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,o=e?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,h=o.length;let v;if(this.closed)throw new Ff.N;if(this.isStopped||this.hasError?v=ms.w.EMPTY:(this.observers.push(t),v=new wh.W(this,t)),a&&t.add(t=new ca.ht(t,a)),e)for(let k=0;k<h&&!t.closed;k++)t.next(o[k]);else for(let k=0;k<h&&!t.closed;k++)t.next(o[k].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),v}_getNow(){return(this.scheduler||Yc.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,o=this._windowTime,a=this._events,h=a.length;let v=0;for(;v<h&&!(t-a[v].time<o);)v++;return h>e&&(v=Math.max(v,h-e)),v>0&&a.splice(0,v),a}}class qc{constructor(t,e){this.time=t,this.value=e}}function rp(i,t,e){let o;return o=i&&"object"==typeof i?i:{bufferSize:i,windowTime:t,refCount:!1,scheduler:e},a=>a.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:o}){let a,v,h=0,k=!1,z=!1;return function(oe){let me;h++,!a||k?(k=!1,a=new Lf(i,t,o),me=a.subscribe(this),v=oe.subscribe({next(ke){a.next(ke)},error(ke){k=!0,a.error(ke)},complete(){z=!0,v=void 0,a.complete()}}),z&&(v=void 0)):me=a.subscribe(this),this.add(()=>{h--,me.unsubscribe(),me=void 0,v&&!z&&e&&0===h&&(v.unsubscribe(),v=void 0,a=void 0)})}}(o))}const f=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();function w(i,t){return function(o){return o.lift(new O(i,t))}}class O{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new U(t,this.predicate,this.thisArg))}}class U extends $o.L{constructor(t,e,o){super(t),this.predicate=e,this.thisArg=o,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(o){return void this.destination.error(o)}e&&this.destination.next(t)}}const ee=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();var se=nt(9193);function ue(i){return t=>0===i?(0,se.c)():t.lift(new fe(i))}class fe{constructor(t){if(this.total=t,this.total<0)throw new ee}call(t,e){return e.subscribe(new Ce(t,this.total))}}class Ce extends $o.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,o=++this.count;o<=e&&(this.destination.next(t),o===e&&(this.destination.complete(),this.unsubscribe()))}}function Ae(i=null){return t=>t.lift(new Pe(i))}class Pe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ne(t,this.defaultValue))}}class Ne extends $o.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function $e(i=Ue){return t=>t.lift(new et(i))}class et{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new mt(t,this.errorFactory))}}class mt extends $o.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Ue(){return new f}var tt=nt(4487);function ot(i,t){const e=arguments.length>=2;return o=>o.pipe(i?w((a,h)=>i(a,h,o)):tt.y,ue(1),e?Ae(t):$e(()=>new f))}function vt(i,t){return t?Yr(()=>i,t):Yr(()=>i)}var rt=nt(9673);const Kt=new s.OlP("angularfire2.auth.use-emulator"),sn=new s.OlP("angularfire2.auth.settings"),un=new s.OlP("angularfire2.auth.tenant-id"),ut=new s.OlP("angularfire2.auth.langugage-code"),En=new s.OlP("angularfire2.auth.use-device-language"),bn=new s.OlP("angularfire.auth.persistence");let Zn=(()=>{class i{constructor(e,o,a,h,v,k,z,$,oe,me){const ke=new wr.HU(h),Fe=(0,wr.ss)(ke),je=new Bn.xQ,ct=(0,Qn.of)(void 0).pipe((0,ca.QV)(ke.outsideAngular),Yr(()=>h.runOutsideAngular(()=>nt.e(336).then(nt.bind(nt,1336)))),(0,ri.U)(()=>(0,wr.on)(e,h,o)),(0,ri.U)(kt=>h.runOutsideAngular(()=>{const Qt=v,Sn=k;return(0,wr.sI)(`${kt.name}.auth`,"AngularFireAuth",kt,()=>{const xn=h.runOutsideAngular(()=>kt.auth());if(Qt&&xn.useEmulator(`http://${Qt.join(":")}`),z&&(xn.tenantId=z),xn.languageCode=$,oe&&xn.useDeviceLanguage(),Sn)for(const[Xn,ni]of Object.entries(Sn))xn.settings[Xn]=ni;return me&&xn.setPersistence(me),xn},[Qt,z,$,oe,Sn,me])})),rp({bufferSize:1,refCount:!1}));if(ah(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Qn.of)(null);else{ct.pipe(ot()).subscribe();const Qt=ct.pipe(Yr(ni=>ni.getRedirectResult().then(Qi=>Qi,()=>null)),Fe,rp({bufferSize:1,refCount:!1})),Sn=ni=>new Gr.y(Qi=>({unsubscribe:h.runOutsideAngular(()=>ni(Qi))})),xn=ct.pipe(Yr(ni=>Sn(ni.onAuthStateChanged.bind(ni)))),Xn=ct.pipe(Yr(ni=>Sn(ni.onIdTokenChanged.bind(ni))));this.authState=Qt.pipe(vt(xn),(0,rt.R)(ke.outsideAngular),(0,ca.QV)(ke.insideAngular)),this.user=Qt.pipe(vt(Xn),(0,rt.R)(ke.outsideAngular),(0,ca.QV)(ke.insideAngular)),this.idToken=this.user.pipe(Yr(ni=>ni?(0,jr.D)(ni.getIdToken()):(0,Qn.of)(null))),this.idTokenResult=this.user.pipe(Yr(ni=>ni?(0,jr.D)(ni.getIdTokenResult()):(0,Qn.of)(null))),this.credential=(0,vs.T)(Qt,je,this.authState.pipe(w(ni=>!ni))).pipe((0,ri.U)(ni=>(null==ni?void 0:ni.user)?ni:null),(0,rt.R)(ke.outsideAngular),(0,ca.QV)(ke.insideAngular))}return(0,wr.pX)(this,ct,h,{spy:{apply:(kt,Qt,Sn)=>{(kt.startsWith("signIn")||kt.startsWith("createUser"))&&Sn.then(xn=>je.next(xn))}}})}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wr.Dh),s.LFG(wr.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Kt,8),s.LFG(sn,8),s.LFG(un,8),s.LFG(ut,8),s.LFG(En,8),s.LFG(bn,8))},i.\u0275prov=s.Yz7({factory:function(){return new i(s.LFG(wr.Dh),s.LFG(wr.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Kt,8),s.LFG(sn,8),s.LFG(un,8),s.LFG(ut,8),s.LFG(En,8),s.LFG(bn,8))},token:i,providedIn:"any"}),i})();var kn=nt(2329);function ar(i){return null==i}function mr(i){return"function"==typeof i.set}function Lr(i,t){return mr(t)?t:i.ref(t)}function Bi(i,t){if(function(i){return"string"==typeof i}(i))return t.stringCase();if(mr(i))return t.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function pr(i,t,e="on",o=xl.z){return new Gr.y(a=>{let h=null;return h=i[e](t,(v,k)=>{o.schedule(()=>{a.next({snapshot:v,prevKey:k})}),"once"===e&&o.schedule(()=>a.complete())},v=>{o.schedule(()=>a.error(v))}),"on"===e?{unsubscribe(){null!=h&&i.off(t,h)}}:{unsubscribe(){}}}).pipe((0,ri.U)(a=>{const{snapshot:h,prevKey:v}=a;let k=null;return h.exists()&&(k=h.key),{type:t,payload:h,prevKey:v,key:k}}),(0,Kd.B)())}function ua(i,t){const e=i.length;for(let o=0;o<e;o++)if(i[o].payload.key===t)return o;return-1}function Uo(i,t){const{payload:e,prevKey:o,key:a}=t,h=ua(i,a),v=function(i,t){if(ar(t))return 0;{const e=ua(i,t);return-1===e?i.length:e+1}}(i,o);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let k=null;t.payload.forEach(z=>{const $={payload:z,type:"value",prevKey:k,key:z.key};return k=z.key,i=[...i,$],!1})}return i;case"child_added":if(h>-1){const k=i[h-1];(k&&k.key||null)!==o&&(i=i.filter(z=>z.payload.key!==e.key)).splice(v,0,t)}else{if(null==o)return[t,...i];(i=i.slice()).splice(v,0,t)}return i;case"child_removed":return i.filter(k=>k.payload.key!==e.key);case"child_changed":return i.map(k=>k.payload.key===a?t:k);case"child_moved":if(h>-1){const k=i.splice(h,1)[0];return(i=i.slice()).splice(v,0,k),i}return i;default:return i}}function Xo(i){return(ar(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function ha(i,t,e){return function(i,t,e){return pr(i,"value","once",e).pipe(Yr(o=>{const a=[(0,Qn.of)(o)];return t.forEach(h=>a.push(pr(i,h,"on",e))),(0,vs.T)(...a).pipe(la(Uo,[]))}),fc())}(i,t=Xo(t),e)}function wi(i,t,e){const o=(t=Xo(t)).map(a=>pr(i,a,"on",e));return(0,vs.T)(...o)}function po(i,t){return function(o,a){return Bi(o,{stringCase:()=>i.child(o)[t](a),firebaseCase:()=>o[t](a),snapshotCase:()=>o.ref[t](a)})}}function Jr(i){return function(e){return e?Bi(e,{stringCase:()=>i.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):i.remove()}}function Ps(i,t){return function(){return pr(i,"value","on",t)}}const qs=new s.OlP("angularfire2.realtimeDatabaseURL"),wl=new s.OlP("angularfire2.database.use-emulator");let Zc=(()=>{class i{constructor(e,o,a,h,v,k,z){this.schedulers=new wr.HU(v),this.keepUnstableUntilFirst=(0,wr.ss)(this.schedulers);const $=k,oe=(0,wr.on)(e,v,o);!kn.Z.auth&&z&&(0,wr.yq)(),this.database=(0,wr.sI)(`${oe.name}.database.${a}`,"AngularFireDatabase",oe,()=>{const me=v.runOutsideAngular(()=>oe.database(a||void 0));return $&&me.useEmulator(...$),me},[$])}list(e,o){const a=this.schedulers.ngZone.runOutsideAngular(()=>Lr(this.database,e));let h=a;return o&&(h=o(a)),function(i,t){const e=t.schedulers.outsideAngular,o=t.schedulers.ngZone.run(()=>i.ref);return{query:i,update:po(o,"update"),set:po(o,"set"),push:a=>o.push(a),remove:Jr(o),snapshotChanges:a=>ha(i,a,e).pipe(t.keepUnstableUntilFirst),stateChanges:a=>wi(i,a,e).pipe(t.keepUnstableUntilFirst),auditTrail:a=>function(i,t,e){return function(i,t,e){return function(i,t){return pr(i,"value","on",t).pipe((0,ri.U)(e=>{let o;return e.payload.forEach(a=>(o=a.key,!1)),{data:e,lastKeyToLoad:o}}))}(i,e).pipe(function(...i){return t=>{let e;return"function"==typeof i[i.length-1]&&(e=i.pop()),t.lift(new Pu(i,e))}}(t),(0,ri.U)(([a,h])=>{const v=a.lastKeyToLoad,k=h.map(z=>z.key);return{actions:h,lastKeyToLoad:v,loadedKeys:k}}),function(i){return t=>t.lift(new np(i))}(a=>-1===a.loadedKeys.indexOf(a.lastKeyToLoad)),(0,ri.U)(a=>a.actions))}(i,wi(i,t).pipe(la((a,h)=>[...a,h],[])),e)}(i,a,e).pipe(t.keepUnstableUntilFirst),valueChanges:(a,h)=>ha(i,a,e).pipe((0,ri.U)(k=>k.map(z=>h&&h.idField?Object.assign(Object.assign({},z.payload.val()),{[h.idField]:z.key}):z.payload.val())),t.keepUnstableUntilFirst)}}(h,this)}object(e){return function(i,t){return{query:i,snapshotChanges:()=>Ps(i,t.schedulers.outsideAngular)().pipe(t.keepUnstableUntilFirst),update:e=>i.ref.update(e),set:e=>i.ref.set(e),remove:()=>i.ref.remove(),valueChanges:()=>Ps(i,t.schedulers.outsideAngular)().pipe(t.keepUnstableUntilFirst,(0,ri.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Lr(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wr.Dh),s.LFG(wr.xv,8),s.LFG(qs,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(wl,8),s.LFG(Kt,8))},i.\u0275prov=s.Yz7({factory:function(){return new i(s.LFG(wr.Dh),s.LFG(wr.xv,8),s.LFG(qs,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(wl,8),s.LFG(Kt,8))},token:i,providedIn:"any"}),i})(),Zs=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[Zc]}),i})(),sd=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-supplier-home-page"]],decls:2,vars:0,template:function(e,o){1&e&&(s.TgZ(0,"p"),s._uU(1,"supplier-home-page works!"),s.qZA())},styles:[""]}),i})();function Wc(i,t,e,o,a,h,v){try{var k=i[h](v),z=k.value}catch($){return void e($)}k.done?t(z):Promise.resolve(z).then(o,a)}function Ho(i){return function(){var t=this,e=arguments;return new Promise(function(o,a){var h=i.apply(t,e);function v(z){Wc(h,o,a,v,k,"next",z)}function k(z){Wc(h,o,a,v,k,"throw",z)}v(void 0)})}}class fo extends Bn.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ff.N;return this._value}next(t){super.next(this._value=t)}}var Ia=nt(4869),Ru=nt(9796),E_=nt(6693);const Ou={};function jl(...i){let t,e;return(0,Ia.K)(i[i.length-1])&&(e=i.pop()),"function"==typeof i[i.length-1]&&(t=i.pop()),1===i.length&&(0,Ru.k)(i[0])&&(i=i[0]),(0,E_.n)(i,e).lift(new bv(t))}class bv{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Nf(t,this.resultSelector))}}class Nf extends Gl{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ou),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let o=0;o<e;o++)this.add(jc(this,t[o],void 0,o))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,o){const a=this.values,v=this.toRespond?a[o]===Ou?--this.toRespond:this.toRespond:0;a[o]=e,0===v&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(o){return void this.destination.error(o)}this.destination.next(e)}}var $c=nt(3282);function Rs(...i){return(0,$c.J)(1)((0,Qn.of)(...i))}function Wp(i){return new Gr.y(t=>{let e;try{e=i()}catch(a){return void t.error(a)}return(e?(0,jr.D)(e):(0,se.c)()).subscribe(t)})}var Bf=nt(2441);function xs(...i){const t=i[i.length-1];return(0,Ia.K)(t)?(i.pop(),e=>Rs(i,e,t)):e=>Rs(i,e)}function pa(i){return function(e){const o=new Ch(i),a=e.lift(o);return o.caught=a}}class Ch{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ro(t,this.selector,this.caught))}}class Ro extends Is.Ds{constructor(t,e,o){super(t),this.selector=e,this.caught=o}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(h){return void super.error(h)}this._unsubscribeAndRecycle();const o=new Is.IY(this);this.add(o);const a=(0,Is.ft)(e,o);a!==o&&this.add(a)}}}var ws=nt(9773);function ad(i,t){return(0,ws.zg)(i,t,1)}function zf(i){return function(e){return 0===i?(0,se.c)():e.lift(new Vf(i))}}class Vf{constructor(t){if(this.total=t,this.total<0)throw new ee}call(t,e){return e.subscribe(new eg(t,this.total))}}class eg extends $o.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,o=this.total,a=this.count++;e.length<o?e.push(t):e[a%o]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const o=this.count>=this.total?this.total:this.count,a=this.ring;for(let h=0;h<o;h++){const v=e++%o;t.next(a[v])}}t.complete()}}var Go=nt(3342),gc=nt(1307);function Os(i){return t=>t.lift(new _c(i))}class _c{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Fu(t,this.callback))}}class Fu extends $o.L{constructor(t,e){super(t),this.add(new ms.w(e))}}class Ws{constructor(t,e){this.id=t,this.url=e}}class yc extends Ws{constructor(t,e,o="imperative",a=null){super(t,e),this.navigationTrigger=o,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sh extends Ws{constructor(t,e,o){super(t,e),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xc extends Ws{constructor(t,e,o){super(t,e),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Eh extends Ws{constructor(t,e,o){super(t,e),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class T_ extends Ws{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M_ extends Ws{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hf extends Ws{constructor(t,e,o,a,h){super(t,e),this.urlAfterRedirects=o,this.state=a,this.shouldActivate=h}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yl extends Ws{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wv extends Ws{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class A_{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Cs{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cr{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gf{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k_{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ld{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cd{constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Hi="primary";class ja{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Th(i){return new ja(i)}const Cl="ngNavigationCancelingError";function vc(i){const t=Error("NavigationCancelingError: "+i);return t[Cl]=!0,t}function Lu(i,t,e){const o=e.path.split("/");if(o.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||o.length<i.length))return null;const a={};for(let h=0;h<o.length;h++){const v=o[h],k=i[h];if(v.startsWith(":"))a[v.substring(1)]=k;else if(v!==k.path)return null}return{consumed:i.slice(0,o.length),posParams:a}}function ql(i,t){const e=i?Object.keys(i):void 0,o=t?Object.keys(t):void 0;if(!e||!o||e.length!=o.length)return!1;let a;for(let h=0;h<e.length;h++)if(a=e[h],!tg(i[a],t[a]))return!1;return!0}function tg(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),o=[...t].sort();return e.every((a,h)=>o[h]===a)}return i===t}function ng(i){return Array.prototype.concat.apply([],i)}function Zl(i){return i.length>0?i[i.length-1]:null}function os(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Sl(i){return(0,s.CqO)(i)?i:(0,s.QGY)(i)?(0,jr.D)(Promise.resolve(i)):(0,Qn.of)(i)}const Xp={exact:function fa(i,t,e){if(!bc(i.segments,t.segments)||!El(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const o in t.children)if(!i.children[o]||!fa(i.children[o],t.children[o],e))return!1;return!0},subset:Fs},rg={exact:function(i,t){return ql(i,t)},subset:function(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>tg(i[e],t[e]))},ignored:()=>!0};function og(i,t,e){return Xp[e.paths](i.root,t.root,e.matrixParams)&&rg[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function Fs(i,t,e){return ud(i,t,t.segments,e)}function ud(i,t,e,o){if(i.segments.length>e.length){const a=i.segments.slice(0,e.length);return!(!bc(a,e)||t.hasChildren()||!El(a,e,o))}if(i.segments.length===e.length){if(!bc(i.segments,e)||!El(i.segments,e,o))return!1;for(const a in t.children)if(!i.children[a]||!Fs(i.children[a],t.children[a],o))return!1;return!0}{const a=e.slice(0,i.segments.length),h=e.slice(i.segments.length);return!!(bc(i.segments,a)&&El(i.segments,a,o)&&i.children[Hi])&&ud(i.children[Hi],t,h,o)}}function El(i,t,e){return t.every((o,a)=>rg[e](i[a].parameters,o.parameters))}class Tl{constructor(t,e,o){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Th(this.queryParams)),this._queryParamMap}toString(){return hd.serialize(this)}}class oi{constructor(t,e){this.segments=t,this.children=e,this.parent=null,os(e,(o,a)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yf(this)}}class Ya{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Th(this.parameters)),this._parameterMap}toString(){return Kp(this)}}function bc(i,t){return i.length===t.length&&i.every((e,o)=>e.path===t[o].path)}class jf{}class lg{parse(t){const e=new Sv(t);return new Tl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var i;return`${`/${Qp(t.root,!0)}`}${function(i){const t=Object.keys(i).map(e=>{const o=i[e];return Array.isArray(o)?o.map(a=>`${dd(e)}=${dd(a)}`).join("&"):`${dd(e)}=${dd(o)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${i=t.fragment,encodeURI(i)}`:""}`}}const hd=new lg;function Yf(i){return i.segments.map(t=>Kp(t)).join("/")}function Qp(i,t){if(!i.hasChildren())return Yf(i);if(t){const e=i.children[Hi]?Qp(i.children[Hi],!1):"",o=[];return os(i.children,(a,h)=>{h!==Hi&&o.push(`${h}:${Qp(a,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function(i,t){let e=[];return os(i.children,(o,a)=>{a===Hi&&(e=e.concat(t(o,a)))}),os(i.children,(o,a)=>{a!==Hi&&(e=e.concat(t(o,a)))}),e}(i,(o,a)=>a===Hi?[Qp(i.children[Hi],!1)]:[`${a}:${Qp(o,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Hi]?`${Yf(i)}/${e[0]}`:`${Yf(i)}/(${e.join("//")})`}}function Cv(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dd(i){return Cv(i).replace(/%3B/gi,";")}function Ss(i){return Cv(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xc(i){return decodeURIComponent(i)}function Jp(i){return xc(i.replace(/\+/g,"%20"))}function Kp(i){return`${Ss(i.path)}${function(i){return Object.keys(i).map(t=>`;${Ss(t)}=${Ss(i[t])}`).join("")}(i.parameters)}`}const ef=/^[^\/()?;=#]+/;function pd(i){const t=i.match(ef);return t?t[0]:""}const Wl=/^[^=?&#]+/,Ah=/^[^?&#]+/;class Sv{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new oi([],{}):new oi([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[Hi]=new oi(t,e)),o}parseSegment(){const t=pd(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ya(xc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=pd(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const a=pd(this.remaining);a&&(o=a,this.capture(o))}t[xc(e)]=xc(o)}parseQueryParam(t){const e=function(i){const t=i.match(Wl);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const v=function(i){const t=i.match(Ah);return t?t[0]:""}(this.remaining);v&&(o=v,this.capture(o))}const a=Jp(e),h=Jp(o);if(t.hasOwnProperty(a)){let v=t[a];Array.isArray(v)||(v=[v],t[a]=v),v.push(h)}else t[a]=h}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=pd(this.remaining),a=this.remaining[o.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let h;o.indexOf(":")>-1?(h=o.substr(0,o.indexOf(":")),this.capture(h),this.capture(":")):t&&(h=Hi);const v=this.parseChildren();e[h]=1===Object.keys(v).length?v[Hi]:new oi([],v),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class ap{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=cg(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){const e=cg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ug(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return ug(t,this._root).map(e=>e.value)}}function cg(i,t){if(i===t.value)return t;for(const e of t.children){const o=cg(i,e);if(o)return o}return null}function ug(i,t){if(i===t.value)return[t];for(const e of t.children){const o=ug(i,e);if(o.length)return o.unshift(t),o}return[]}class Bu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function kh(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class qf extends ap{constructor(t,e){super(t),this.snapshot=e,Dh(this,t)}toString(){return this.snapshot.toString()}}function lp(i,t){const e=function(i,t){const v=new Wf([],{},{},"",{},Hi,t,null,i.root,-1,{});return new O_("",new Bu(v,[]))}(i,t),o=new fo([new Ya("",{})]),a=new fo({}),h=new fo({}),v=new fo({}),k=new fo(""),z=new Za(o,a,v,k,h,Hi,t,e.root);return z.snapshot=e.root,new qf(new Bu(z,[]),e)}class Za{constructor(t,e,o,a,h,v,k,z){this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=h,this.outlet=v,this.component=k,this._futureSnapshot=z}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ri.U)(t=>Th(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ri.U)(t=>Th(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fd(i,t="emptyOnly"){const e=i.pathFromRoot;let o=0;if("always"!==t)for(o=e.length-1;o>=1;){const a=e[o],h=e[o-1];if(a.routeConfig&&""===a.routeConfig.path)o--;else{if(h.component)break;o--}}return function(i){return i.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(o))}class Wf{constructor(t,e,o,a,h,v,k,z,$,oe,me){this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=h,this.outlet=v,this.component=k,this.routeConfig=z,this._urlSegment=$,this._lastPathIndex=oe,this._resolve=me}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Th(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Th(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class O_ extends ap{constructor(t,e){super(e),this.url=t,Dh(this,e)}toString(){return F_(this._root)}}function Dh(i,t){t.value._routerState=i,t.children.forEach(e=>Dh(i,e))}function F_(i){const t=i.children.length>0?` { ${i.children.map(F_).join(", ")} } `:"";return`${i.value}${t}`}function hg(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,ql(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),ql(t.params,e.params)||i.params.next(e.params),function(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!ql(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),ql(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function dg(i,t){return ql(i.params,t.params)&&function(i,t){return bc(i,t)&&i.every((e,o)=>ql(e.parameters,t[o].parameters))}(i.url,t.url)&&!(!i.parent!=!t.parent)&&(!i.parent||dg(i.parent,t.parent))}function Wa(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=t.value;const a=function(i,t,e){return t.children.map(o=>{for(const a of e.children)if(i.shouldReuseRoute(o.value,a.value.snapshot))return Wa(i,o,a);return Wa(i,o)})}(i,t,e);return new Bu(o,a)}{if(i.shouldAttach(t.value)){const h=i.retrieve(t.value);if(null!==h){const v=h.route;return Qc(t,v),v}}const o=function(i){return new Za(new fo(i.url),new fo(i.params),new fo(i.queryParams),new fo(i.fragment),new fo(i.data),i.outlet,i.component,i)}(t.value),a=t.children.map(h=>Wa(i,h));return new Bu(o,a)}}function Qc(i,t){if(i.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=i.value;for(let e=0;e<i.children.length;++e)Qc(i.children[e],t.children[e])}function cp(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function zu(i){return"object"==typeof i&&null!=i&&i.outlets}function nf(i,t,e,o,a){let h={};return o&&os(o,(v,k)=>{h[k]=Array.isArray(v)?v.map(z=>`${z}`):`${v}`}),new Tl(e.root===i?t:md(e.root,i,t),h,a)}function md(i,t,e){const o={};return os(i.children,(a,h)=>{o[h]=a===t?e:md(a,t,e)}),new oi(i.segments,o)}class fg{constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&cp(o[0]))throw new Error("Root segment cannot have matrix parameters");const a=o.find(zu);if(a&&a!==Zl(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ih{constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}}function N_(i,t,e){if(i||(i=new oi([],{})),0===i.segments.length&&i.hasChildren())return Vu(i,t,e);const o=function(i,t,e){let o=0,a=t;const h={match:!1,pathIndex:0,commandIndex:0};for(;a<i.segments.length;){if(o>=e.length)return h;const v=i.segments[a],k=e[o];if(zu(k))break;const z=`${k}`,$=o<e.length-1?e[o+1]:null;if(a>0&&void 0===z)break;if(z&&$&&"object"==typeof $&&void 0===$.outlets){if(!rf(z,$,v))return h;o+=2}else{if(!rf(z,{},v))return h;o++}a++}return{match:!0,pathIndex:a,commandIndex:o}}(i,t,e),a=e.slice(o.commandIndex);if(o.match&&o.pathIndex<i.segments.length){const h=new oi(i.segments.slice(0,o.pathIndex),{});return h.children[Hi]=new oi(i.segments.slice(o.pathIndex),i.children),Vu(h,0,a)}return o.match&&0===a.length?new oi(i.segments,{}):o.match&&!i.hasChildren()?Xa(i,t,e):o.match?Vu(i,0,a):Xa(i,t,e)}function Vu(i,t,e){if(0===e.length)return new oi(i.segments,{});{const o=function(i){return zu(i[0])?i[0].outlets:{[Hi]:i}}(e),a={};return os(o,(h,v)=>{"string"==typeof h&&(h=[h]),null!==h&&(a[v]=N_(i.children[v],t,h))}),os(i.children,(h,v)=>{void 0===o[v]&&(a[v]=h)}),new oi(i.segments,a)}}function Xa(i,t,e){const o=i.segments.slice(0,t);let a=0;for(;a<e.length;){const h=e[a];if(zu(h)){const z=mg(h.outlets);return new oi(o,z)}if(0===a&&cp(e[0])){o.push(new Ya(i.segments[t].path,Jc(e[0]))),a++;continue}const v=zu(h)?h.outlets[Hi]:`${h}`,k=a<e.length-1?e[a+1]:null;v&&k&&cp(k)?(o.push(new Ya(v,Jc(k))),a+=2):(o.push(new Ya(v,{})),a++)}return new oi(o,{})}function mg(i){const t={};return os(i,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[o]=Xa(new oi([],{}),0,e))}),t}function Jc(i){const t={};return os(i,(e,o)=>t[o]=`${e}`),t}function rf(i,t,e){return i==e.path&&ql(t,e.parameters)}class Rh{constructor(t,e,o,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=a}activate(t){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),hg(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){const a=kh(e);t.children.forEach(h=>{const v=h.value.outlet;this.deactivateRoutes(h,a[v],o),delete a[v]}),os(a,(h,v)=>{this.deactivateRouteAndItsChildren(h,o)})}deactivateRoutes(t,e,o){const a=t.value,h=e?e.value:null;if(a===h)if(a.component){const v=o.getContext(a.outlet);v&&this.deactivateChildRoutes(t,e,v.children)}else this.deactivateChildRoutes(t,e,o);else h&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const o=e.getContext(t.value.outlet);if(o&&o.outlet){const a=o.outlet.detach(),h=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,h=kh(t);for(const v of Object.keys(h))this.deactivateRouteAndItsChildren(h[v],a);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(t,e,o){const a=kh(e);t.children.forEach(h=>{this.activateRoutes(h,a[h.value.outlet],o),this.forwardEvent(new ld(h.value.snapshot))}),t.children.length&&this.forwardEvent(new Gf(t.value.snapshot))}activateRoutes(t,e,o){const a=t.value,h=e?e.value:null;if(hg(a),a===h)if(a.component){const v=o.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,v.children)}else this.activateChildRoutes(t,e,o);else if(a.component){const v=o.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const k=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),v.children.onOutletReAttached(k.contexts),v.attachRef=k.componentRef,v.route=k.route.value,v.outlet&&v.outlet.attach(k.componentRef,k.route.value),gg(k.route)}else{const k=function(i){for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(a.snapshot),z=k?k.module.componentFactoryResolver:null;v.attachRef=null,v.route=a,v.resolver=z,v.outlet&&v.outlet.activateWith(a,z),this.activateChildRoutes(t,null,v.children)}}else this.activateChildRoutes(t,null,o)}}function gg(i){hg(i.value),i.children.forEach(gg)}class of{constructor(t,e){this.routes=t,this.module=e}}function eu(i){return"function"==typeof i}function wc(i){return i instanceof Tl}const gd=Symbol("INITIAL_VALUE");function sf(){return Yr(i=>jl(i.map(t=>t.pipe(ue(1),xs(gd)))).pipe(la((t,e)=>{let o=!1;return e.reduce((a,h,v)=>a!==gd?a:(h===gd&&(o=!0),o||!1!==h&&v!==e.length-1&&!wc(h)?a:h),t)},gd),w(t=>t!==gd),(0,ri.U)(t=>wc(t)?t:!0===t),ue(1)))}let Oh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&s._UZ(0,"router-outlet")},directives:function(){return[Fv]},encapsulation:2}),i})();function V_(i,t=""){for(let e=0;e<i.length;e++){const o=i[e];Ev(o,af(t,o))}}function Ev(i,t){i.children&&V_(i.children,t)}function af(i,t){return t?i||t.path?i&&!t.path?`${i}/`:!i&&t.path?t.path:`${i}/${t.path}`:"":i}function Xf(i){const t=i.children&&i.children.map(Xf),e=t?Object.assign(Object.assign({},i),{children:t}):Object.assign({},i);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Hi&&(e.component=Oh),e}function Pa(i){return i.outlet||Hi}function Qf(i,t){const e=i.filter(o=>Pa(o)===t);return e.push(...i.filter(o=>Pa(o)!==t)),e}const E={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function S(i,t,e){var o;if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?Object.assign({},E):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const h=(t.matcher||Lu)(e,i,t);if(!h)return Object.assign({},E);const v={};os(h.posParams,(z,$)=>{v[$]=z.path});const k=h.consumed.length>0?Object.assign(Object.assign({},v),h.consumed[h.consumed.length-1].parameters):v;return{matched:!0,consumedSegments:h.consumed,lastChild:h.consumed.length,parameters:k,positionalParamSegments:null!==(o=h.posParams)&&void 0!==o?o:{}}}function I(i,t,e,o,a="corrected"){if(e.length>0&&function(i,t,e){return e.some(o=>Oe(i,t,o)&&Pa(o)!==Hi)}(i,e,o)){const v=new oi(t,function(i,t,e,o){const a={};a[Hi]=o,o._sourceSegment=i,o._segmentIndexShift=t.length;for(const h of e)if(""===h.path&&Pa(h)!==Hi){const v=new oi([],{});v._sourceSegment=i,v._segmentIndexShift=t.length,a[Pa(h)]=v}return a}(i,t,o,new oi(e,i.children)));return v._sourceSegment=i,v._segmentIndexShift=t.length,{segmentGroup:v,slicedSegments:[]}}if(0===e.length&&function(i,t,e){return e.some(o=>Oe(i,t,o))}(i,e,o)){const v=new oi(i.segments,function(i,t,e,o,a,h){const v={};for(const k of o)if(Oe(i,e,k)&&!a[Pa(k)]){const z=new oi([],{});z._sourceSegment=i,z._segmentIndexShift="legacy"===h?i.segments.length:t.length,v[Pa(k)]=z}return Object.assign(Object.assign({},a),v)}(i,t,e,o,i.children,a));return v._sourceSegment=i,v._segmentIndexShift=t.length,{segmentGroup:v,slicedSegments:e}}const h=new oi(i.segments,i.children);return h._sourceSegment=i,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:e}}function Oe(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function Ye(i,t,e,o){return!!(Pa(i)===o||o!==Hi&&Oe(t,e,i))&&("**"===i.path||S(t,i,e).matched)}function st(i,t,e){return 0===t.length&&!i.children[e]}class pt{constructor(t){this.segmentGroup=t||null}}class Wt{constructor(t){this.urlTree=t}}function cn(i){return new Gr.y(t=>t.error(new pt(i)))}function Mn(i){return new Gr.y(t=>t.error(new Wt(i)))}function Wn(i){return new Gr.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class Wi{constructor(t,e,o,a,h){this.configLoader=e,this.urlSerializer=o,this.urlTree=a,this.config=h,this.allowRedirects=!0,this.ngModule=t.get(s.h0i)}apply(){const t=I(this.urlTree.root,[],[],this.config).segmentGroup,e=new oi(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Hi).pipe((0,ri.U)(h=>this.createUrlTree(Ml(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(pa(h=>{if(h instanceof Wt)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof pt?this.noMatchError(h):h}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Hi).pipe((0,ri.U)(a=>this.createUrlTree(Ml(a),t.queryParams,t.fragment))).pipe(pa(a=>{throw a instanceof pt?this.noMatchError(a):a}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,o){const a=t.segments.length>0?new oi([],{[Hi]:t}):t;return new Tl(a,e,o)}expandSegmentGroup(t,e,o,a){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(t,e,o).pipe((0,ri.U)(h=>new oi([],h))):this.expandSegment(t,o,e,o.segments,a,!0)}expandChildren(t,e,o){const a=[];for(const h of Object.keys(o.children))"primary"===h?a.unshift(h):a.push(h);return(0,jr.D)(a).pipe(ad(h=>{const v=o.children[h],k=Qf(e,h);return this.expandSegmentGroup(t,k,v,h).pipe((0,ri.U)(z=>({segment:z,outlet:h})))}),la((h,v)=>(h[v.outlet]=v.segment,h),{}),function(i,t){const e=arguments.length>=2;return o=>o.pipe(i?w((a,h)=>i(a,h,o)):tt.y,zf(1),e?Ae(t):$e(()=>new f))}())}expandSegment(t,e,o,a,h,v){return(0,jr.D)(o).pipe(ad(k=>this.expandSegmentAgainstRoute(t,e,o,k,a,h,v).pipe(pa($=>{if($ instanceof pt)return(0,Qn.of)(null);throw $}))),ot(k=>!!k),pa((k,z)=>{if(k instanceof f||"EmptyError"===k.name){if(st(e,a,h))return(0,Qn.of)(new oi([],{}));throw new pt(e)}throw k}))}expandSegmentAgainstRoute(t,e,o,a,h,v,k){return Ye(a,e,h,v)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(t,e,a,h,v):k&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,o,a,h,v):cn(e):cn(e)}expandSegmentAgainstRouteUsingRedirect(t,e,o,a,h,v){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,o,a,v):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,a,h,v)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,o,a){const h=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?Mn(h):this.lineralizeSegments(o,h).pipe((0,ws.zg)(v=>{const k=new oi(v,{});return this.expandSegment(t,k,e,v,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,a,h,v){const{matched:k,consumedSegments:z,lastChild:$,positionalParamSegments:oe}=S(e,a,h);if(!k)return cn(e);const me=this.applyRedirectCommands(z,a.redirectTo,oe);return a.redirectTo.startsWith("/")?Mn(me):this.lineralizeSegments(a,me).pipe((0,ws.zg)(ke=>this.expandSegment(t,e,o,ke.concat(h.slice($)),v,!1)))}matchSegmentAgainstRoute(t,e,o,a,h){if("**"===o.path)return o.loadChildren?(o._loadedConfig?(0,Qn.of)(o._loadedConfig):this.configLoader.load(t.injector,o)).pipe((0,ri.U)(ke=>(o._loadedConfig=ke,new oi(a,{})))):(0,Qn.of)(new oi(a,{}));const{matched:v,consumedSegments:k,lastChild:z}=S(e,o,a);if(!v)return cn(e);const $=a.slice(z);return this.getChildConfig(t,o,a).pipe((0,ws.zg)(me=>{const ke=me.module,Fe=me.routes,{segmentGroup:je,slicedSegments:ct}=I(e,k,$,Fe),kt=new oi(je.segments,je.children);if(0===ct.length&&kt.hasChildren())return this.expandChildren(ke,Fe,kt).pipe((0,ri.U)(Xn=>new oi(k,Xn)));if(0===Fe.length&&0===ct.length)return(0,Qn.of)(new oi(k,{}));const Qt=Pa(o)===h;return this.expandSegment(ke,kt,Fe,ct,Qt?Hi:h,!0).pipe((0,ri.U)(xn=>new oi(k.concat(xn.segments),xn.children)))}))}getChildConfig(t,e,o){return e.children?(0,Qn.of)(new of(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Qn.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,o).pipe((0,ws.zg)(a=>{return a?this.configLoader.load(t.injector,e).pipe((0,ri.U)(h=>(e._loadedConfig=h,h))):(i=e,new Gr.y(t=>t.error(vc(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))));var i})):(0,Qn.of)(new of([],t))}runCanLoadGuards(t,e,o){const a=e.canLoad;if(!a||0===a.length)return(0,Qn.of)(!0);const h=a.map(v=>{const k=t.get(v);let z;if((i=k)&&eu(i.canLoad))z=k.canLoad(e,o);else{if(!eu(k))throw new Error("Invalid CanLoad guard");z=k(e,o)}var i;return Sl(z)});return(0,Qn.of)(h).pipe(sf(),(0,Go.b)(v=>{if(!wc(v))return;const k=vc(`Redirecting to "${this.urlSerializer.serialize(v)}"`);throw k.url=v,k}),(0,ri.U)(v=>!0===v))}lineralizeSegments(t,e){let o=[],a=e.root;for(;;){if(o=o.concat(a.segments),0===a.numberOfChildren)return(0,Qn.of)(o);if(a.numberOfChildren>1||!a.children[Hi])return Wn(t.redirectTo);a=a.children[Hi]}}applyRedirectCommands(t,e,o){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,o)}applyRedirectCreatreUrlTree(t,e,o,a){const h=this.createSegmentGroup(t,e.root,o,a);return new Tl(h,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const o={};return os(t,(a,h)=>{if("string"==typeof a&&a.startsWith(":")){const k=a.substring(1);o[h]=e[k]}else o[h]=a}),o}createSegmentGroup(t,e,o,a){const h=this.createSegments(t,e.segments,o,a);let v={};return os(e.children,(k,z)=>{v[z]=this.createSegmentGroup(t,k,o,a)}),new oi(h,v)}createSegments(t,e,o,a){return e.map(h=>h.path.startsWith(":")?this.findPosParam(t,h,a):this.findOrReturn(h,o))}findPosParam(t,e,o){const a=o[e.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return a}findOrReturn(t,e){let o=0;for(const a of e){if(a.path===t.path)return e.splice(o),a;o++}return t}}function Ml(i){const t={};for(const o of Object.keys(i.children)){const h=Ml(i.children[o]);(h.segments.length>0||h.hasChildren())&&(t[o]=h)}return function(i){if(1===i.numberOfChildren&&i.children[Hi]){const t=i.children[Hi];return new oi(i.segments.concat(t.segments),t.children)}return i}(new oi(i.segments,t))}class lf{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class vo{constructor(t,e){this.component=t,this.route=e}}function Qa(i,t,e){const o=i._root;return bg(o,t?t._root:null,e,[o.value])}function hp(i,t,e){const o=function(i){if(!i)return null;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(o?o.module.injector:e).get(i)}function bg(i,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const h=kh(t);return i.children.forEach(v=>{(function(i,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const h=i.value,v=t?t.value:null,k=e?e.getContext(i.value.outlet):null;if(v&&h.routeConfig===v.routeConfig){const z=function(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!bc(i.url,t.url);case"pathParamsOrQueryParamsChange":return!bc(i.url,t.url)||!ql(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dg(i,t)||!ql(i.queryParams,t.queryParams);case"paramsChange":default:return!dg(i,t)}}(v,h,h.routeConfig.runGuardsAndResolvers);z?a.canActivateChecks.push(new lf(o)):(h.data=v.data,h._resolvedData=v._resolvedData),bg(i,t,h.component?k?k.children:null:e,o,a),z&&k&&k.outlet&&k.outlet.isActivated&&a.canDeactivateChecks.push(new vo(k.outlet.component,v))}else v&&Kf(t,k,a),a.canActivateChecks.push(new lf(o)),bg(i,null,h.component?k?k.children:null:e,o,a)})(v,h[v.value.outlet],e,o.concat([v.value]),a),delete h[v.value.outlet]}),os(h,(v,k)=>Kf(v,e.getContext(k),a)),a}function Kf(i,t,e){const o=kh(i),a=i.value;os(o,(h,v)=>{Kf(h,a.component?t?t.children.getContext(v):null:t,e)}),e.canDeactivateChecks.push(new vo(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}class Fh{}function uf(i){return new Gr.y(t=>t.error(i))}class Nw{constructor(t,e,o,a,h,v){this.rootComponentType=t,this.config=e,this.urlTree=o,this.url=a,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=v}recognize(){const t=I(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Hi);if(null===e)return null;const o=new Wf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Hi,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Bu(o,e),h=new O_(this.url,a);return this.inheritParamsAndData(h._root),h}inheritParamsAndData(t){const e=t.value,o=fd(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),t.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(t,e,o){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,o)}processChildren(t,e){const o=[];for(const h of Object.keys(e.children)){const v=e.children[h],k=Qf(t,h),z=this.processSegmentGroup(k,v,h);if(null===z)return null;o.push(...z)}const a=Dx(o);return a.sort((t,e)=>t.value.outlet===Hi?-1:e.value.outlet===Hi?1:t.value.outlet.localeCompare(e.value.outlet)),a}processSegment(t,e,o,a){for(const h of t){const v=this.processSegmentAgainstRoute(h,e,o,a);if(null!==v)return v}return st(e,o,a)?[]:null}processSegmentAgainstRoute(t,e,o,a){if(t.redirectTo||!Ye(t,e,o,a))return null;let h,v=[],k=[];if("**"===t.path){const Fe=o.length>0?Zl(o).parameters:{};h=new Wf(o,Fe,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dv(t),Pa(t),t.component,t,$i(e),kv(e)+o.length,dp(t))}else{const Fe=S(e,t,o);if(!Fe.matched)return null;v=Fe.consumedSegments,k=o.slice(Fe.lastChild),h=new Wf(v,Fe.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dv(t),Pa(t),t.component,t,$i(e),kv(e)+v.length,dp(t))}const z=(i=t).children?i.children:i.loadChildren?i._loadedConfig.routes:[],{segmentGroup:$,slicedSegments:oe}=I(e,v,k,z.filter(Fe=>void 0===Fe.redirectTo),this.relativeLinkResolution);var i;if(0===oe.length&&$.hasChildren()){const Fe=this.processChildren(z,$);return null===Fe?null:[new Bu(h,Fe)]}if(0===z.length&&0===oe.length)return[new Bu(h,[])];const me=Pa(t)===a,ke=this.processSegment(z,$,oe,me?Hi:a);return null===ke?null:[new Bu(h,ke)]}}function zw(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Dx(i){const t=[],e=new Set;for(const o of i){if(!zw(o)){t.push(o);continue}const a=t.find(h=>o.value.routeConfig===h.value.routeConfig);void 0!==a?(a.children.push(...o.children),e.add(a)):t.push(o)}for(const o of e){const a=Dx(o.children);t.push(new Bu(o.value,a))}return t.filter(o=>!e.has(o))}function $i(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function kv(i){let t=i,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function Dv(i){return i.data||{}}function dp(i){return i.resolve||{}}function hf(i){return Yr(t=>{const e=i(t);return e?(0,jr.D)(e).pipe((0,ri.U)(()=>t)):(0,Qn.of)(t)})}class nu extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const pp=new s.OlP("ROUTES");class tm{constructor(t,e,o,a){this.loader=t,this.compiler=e,this.onLoadStartListener=o,this.onLoadEndListener=a}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const a=this.loadModuleFactory(e.loadChildren).pipe((0,ri.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(e);const v=h.create(t);return new of(ng(v.injector.get(pp,void 0,s.XFs.Self|s.XFs.Optional)).map(Xf),v)}),pa(h=>{throw e._loader$=void 0,h}));return e._loader$=new Bf.c(a,()=>new Bn.xQ).pipe((0,gc.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,jr.D)(this.loader.load(t)):Sl(t()).pipe((0,ws.zg)(e=>e instanceof s.YKP?(0,Qn.of)(e):(0,jr.D)(this.compiler.compileModuleAsync(e))))}}class Uu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new iu,this.attachRef=null}}class iu{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const o=this.getOrCreateContext(t);o.outlet=e,this.contexts.set(t,o)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Uu,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class j_{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Uw(i){throw i}function Hw(i,t,e){return t.parse("/")}function Y_(i,t){return(0,Qn.of)(null)}const Gw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jo=(()=>{class i{constructor(e,o,a,h,v,k,z,$){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=a,this.location=h,this.config=$,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Bn.xQ,this.errorHandler=Uw,this.malformedUriErrorHandler=Hw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Y_,afterPreactivation:Y_},this.urlHandlingStrategy=new j_,this.routeReuseStrategy=new nu,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=v.get(s.h0i),this.console=v.get(s.c2e);const ke=v.get(s.R0b);this.isNgZoneEnabled=ke instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig($),this.currentUrlTree=new Tl(new oi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new tm(k,z,Fe=>this.triggerEvent(new A_(Fe)),Fe=>this.triggerEvent(new Cs(Fe))),this.routerState=lp(this.currentUrlTree,this.rootComponentType),this.transitions=new fo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(w(a=>0!==a.id),(0,ri.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Yr(a=>{let h=!1,v=!1;return(0,Qn.of)(a).pipe((0,Go.b)(k=>{this.currentNavigation={id:k.id,initialUrl:k.currentRawUrl,extractedUrl:k.extractedUrl,trigger:k.source,extras:k.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yr(k=>{const z=!this.navigated||k.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||z)&&this.urlHandlingStrategy.shouldProcessUrl(k.rawUrl))return(0,Qn.of)(k).pipe(Yr(oe=>{const me=this.transitions.getValue();return o.next(new yc(oe.id,this.serializeUrl(oe.extractedUrl),oe.source,oe.restoredState)),me!==this.transitions.getValue()?se.E:Promise.resolve(oe)}),function(i,t,e,o){return Yr(a=>function(i,t,e,o,a){return new Wi(i,t,e,o,a).apply()}(i,t,e,a.extractedUrl,o).pipe((0,ri.U)(h=>Object.assign(Object.assign({},a),{urlAfterRedirects:h}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Go.b)(oe=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:oe.urlAfterRedirects})}),function(i,t,e,o,a){return(0,ws.zg)(h=>function(i,t,e,o,a="emptyOnly",h="legacy"){try{const v=new Nw(i,t,e,o,a,h).recognize();return null===v?uf(new Fh):(0,Qn.of)(v)}catch(v){return uf(v)}}(i,t,h.urlAfterRedirects,e(h.urlAfterRedirects),o,a).pipe((0,ri.U)(v=>Object.assign(Object.assign({},h),{targetSnapshot:v}))))}(this.rootComponentType,this.config,oe=>this.serializeUrl(oe),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Go.b)(oe=>{"eager"===this.urlUpdateStrategy&&(oe.extras.skipLocationChange||this.setBrowserUrl(oe.urlAfterRedirects,oe),this.browserUrlTree=oe.urlAfterRedirects);const me=new T_(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot);o.next(me)}));if(z&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:me,extractedUrl:ke,source:Fe,restoredState:je,extras:ct}=k,kt=new yc(me,this.serializeUrl(ke),Fe,je);o.next(kt);const Qt=lp(ke,this.rootComponentType).snapshot;return(0,Qn.of)(Object.assign(Object.assign({},k),{targetSnapshot:Qt,urlAfterRedirects:ke,extras:Object.assign(Object.assign({},ct),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=k.rawUrl,this.browserUrlTree=k.urlAfterRedirects,k.resolve(null),se.E}),hf(k=>{const{targetSnapshot:z,id:$,extractedUrl:oe,rawUrl:me,extras:{skipLocationChange:ke,replaceUrl:Fe}}=k;return this.hooks.beforePreactivation(z,{navigationId:$,appliedUrlTree:oe,rawUrlTree:me,skipLocationChange:!!ke,replaceUrl:!!Fe})}),(0,Go.b)(k=>{const z=new M_(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);this.triggerEvent(z)}),(0,ri.U)(k=>Object.assign(Object.assign({},k),{guards:Qa(k.targetSnapshot,k.currentSnapshot,this.rootContexts)})),function(i,t){return(0,ws.zg)(e=>{const{targetSnapshot:o,currentSnapshot:a,guards:{canActivateChecks:h,canDeactivateChecks:v}}=e;return 0===v.length&&0===h.length?(0,Qn.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(i,t,e,o){return(0,jr.D)(i).pipe((0,ws.zg)(a=>function(i,t,e,o,a){const h=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!h||0===h.length)return(0,Qn.of)(!0);const v=h.map(k=>{const z=hp(k,t,a);let $;if(function(i){return i&&eu(i.canDeactivate)}(z))$=Sl(z.canDeactivate(i,t,e,o));else{if(!eu(z))throw new Error("Invalid CanDeactivate guard");$=Sl(z(i,t,e,o))}return $.pipe(ot())});return(0,Qn.of)(v).pipe(sf())}(a.component,a.route,e,t,o)),ot(a=>!0!==a,!0))}(v,o,a,i).pipe((0,ws.zg)(k=>k&&function(i){return"boolean"==typeof i}(k)?function(i,t,e,o){return(0,jr.D)(t).pipe(ad(a=>Rs(function(i,t){return null!==i&&t&&t(new Cr(i)),(0,Qn.of)(!0)}(a.route.parent,o),function(i,t){return null!==i&&t&&t(new k_(i)),(0,Qn.of)(!0)}(a.route,o),function(i,t,e){const o=t[t.length-1],h=t.slice(0,t.length-1).reverse().map(v=>function(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(v)).filter(v=>null!==v).map(v=>Wp(()=>{const k=v.guards.map(z=>{const $=hp(z,v.node,e);let oe;if(function(i){return i&&eu(i.canActivateChild)}($))oe=Sl($.canActivateChild(o,i));else{if(!eu($))throw new Error("Invalid CanActivateChild guard");oe=Sl($(o,i))}return oe.pipe(ot())});return(0,Qn.of)(k).pipe(sf())}));return(0,Qn.of)(h).pipe(sf())}(i,a.path,e),function(i,t,e){const o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||0===o.length)return(0,Qn.of)(!0);const a=o.map(h=>Wp(()=>{const v=hp(h,t,e);let k;if(function(i){return i&&eu(i.canActivate)}(v))k=Sl(v.canActivate(t,i));else{if(!eu(v))throw new Error("Invalid CanActivate guard");k=Sl(v(t,i))}return k.pipe(ot())}));return(0,Qn.of)(a).pipe(sf())}(i,a.route,e))),ot(a=>!0!==a,!0))}(o,h,i,t):(0,Qn.of)(k)),(0,ri.U)(k=>Object.assign(Object.assign({},e),{guardsResult:k})))})}(this.ngModule.injector,k=>this.triggerEvent(k)),(0,Go.b)(k=>{if(wc(k.guardsResult)){const $=vc(`Redirecting to "${this.serializeUrl(k.guardsResult)}"`);throw $.url=k.guardsResult,$}const z=new Hf(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot,!!k.guardsResult);this.triggerEvent(z)}),w(k=>!!k.guardsResult||(this.restoreHistory(k),this.cancelNavigationTransition(k,""),!1)),hf(k=>{if(k.guards.canActivateChecks.length)return(0,Qn.of)(k).pipe((0,Go.b)(z=>{const $=new Yl(z.id,this.serializeUrl(z.extractedUrl),this.serializeUrl(z.urlAfterRedirects),z.targetSnapshot);this.triggerEvent($)}),Yr(z=>{let $=!1;return(0,Qn.of)(z).pipe(function(i,t){return(0,ws.zg)(e=>{const{targetSnapshot:o,guards:{canActivateChecks:a}}=e;if(!a.length)return(0,Qn.of)(e);let h=0;return(0,jr.D)(a).pipe(ad(v=>function(i,t,e,o){return function(i,t,e,o){const a=Object.keys(i);if(0===a.length)return(0,Qn.of)({});const h={};return(0,jr.D)(a).pipe((0,ws.zg)(v=>function(i,t,e,o){const a=hp(i,t,o);return Sl(a.resolve?a.resolve(t,e):a(t,e))}(i[v],t,e,o).pipe((0,Go.b)(k=>{h[v]=k}))),zf(1),(0,ws.zg)(()=>Object.keys(h).length===a.length?(0,Qn.of)(h):se.E))}(i._resolve,i,t,o).pipe((0,ri.U)(h=>(i._resolvedData=h,i.data=Object.assign(Object.assign({},i.data),fd(i,e).resolve),null)))}(v.route,o,i,t)),(0,Go.b)(()=>h++),zf(1),(0,ws.zg)(v=>h===a.length?(0,Qn.of)(e):se.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Go.b)({next:()=>$=!0,complete:()=>{$||(this.restoreHistory(z),this.cancelNavigationTransition(z,"At least one route resolver didn't emit any value."))}}))}),(0,Go.b)(z=>{const $=new wv(z.id,this.serializeUrl(z.extractedUrl),this.serializeUrl(z.urlAfterRedirects),z.targetSnapshot);this.triggerEvent($)}))}),hf(k=>{const{targetSnapshot:z,id:$,extractedUrl:oe,rawUrl:me,extras:{skipLocationChange:ke,replaceUrl:Fe}}=k;return this.hooks.afterPreactivation(z,{navigationId:$,appliedUrlTree:oe,rawUrlTree:me,skipLocationChange:!!ke,replaceUrl:!!Fe})}),(0,ri.U)(k=>{const z=function(i,t,e){const o=Wa(i,t._root,e?e._root:void 0);return new qf(o,t)}(this.routeReuseStrategy,k.targetSnapshot,k.currentRouterState);return Object.assign(Object.assign({},k),{targetRouterState:z})}),(0,Go.b)(k=>{this.currentUrlTree=k.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,k.rawUrl),this.routerState=k.targetRouterState,"deferred"===this.urlUpdateStrategy&&(k.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,k),this.browserUrlTree=k.urlAfterRedirects)}),((i,t,e)=>(0,ri.U)(o=>(new Rh(t,o.targetRouterState,o.currentRouterState,e).activate(i),o)))(this.rootContexts,this.routeReuseStrategy,k=>this.triggerEvent(k)),(0,Go.b)({next(){h=!0},complete(){h=!0}}),Os(()=>{if(!h&&!v){const k=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,k)):this.cancelNavigationTransition(a,k)}this.currentNavigation=null}),pa(k=>{if(v=!0,function(i){return i&&i[Cl]}(k)){const z=wc(k.url);z||(this.navigated=!0,this.restoreHistory(a,!0));const $=new Xc(a.id,this.serializeUrl(a.extractedUrl),k.message);o.next($),z?setTimeout(()=>{const oe=this.urlHandlingStrategy.merge(k.url,this.rawUrlTree);this.scheduleNavigation(oe,"imperative",null,{skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const z=new Eh(a.id,this.serializeUrl(a.extractedUrl),k);o.next(z);try{a.resolve(this.errorHandler(k))}catch($){a.reject($)}}return se.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,o)&&setTimeout(()=>{const{source:a,state:h,urlTree:v}=o,k={replaceUrl:!0};if(h){const z=Object.assign({},h);delete z.navigationId,delete z.\u0275routerPageId,0!==Object.keys(z).length&&(k.state=z)}this.scheduleNavigation(v,a,h,k)},0),this.lastLocationChangeInfo=o}))}extractLocationChangeInfoFromEvent(e){var o;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(o=e.state)||void 0===o?void 0:o.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,o){if(!e)return!0;const a=o.urlTree.toString()===e.urlTree.toString();return o.transitionId!==e.transitionId||!a||!("hashchange"===o.source&&"popstate"===e.source||"popstate"===o.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){V_(e),this.config=e.map(Xf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:a,queryParams:h,fragment:v,queryParamsHandling:k,preserveFragment:z}=o,$=a||this.routerState.root,oe=z?this.currentUrlTree.fragment:v;let me=null;switch(k){case"merge":me=Object.assign(Object.assign({},this.currentUrlTree.queryParams),h);break;case"preserve":me=this.currentUrlTree.queryParams;break;default:me=h||null}return null!==me&&(me=this.removeEmptyProps(me)),function(i,t,e,o,a){if(0===e.length)return nf(t.root,t.root,t,o,a);const h=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new fg(!0,0,i);let t=0,e=!1;const o=i.reduce((a,h,v)=>{if("object"==typeof h&&null!=h){if(h.outlets){const k={};return os(h.outlets,(z,$)=>{k[$]="string"==typeof z?z.split("/"):z}),[...a,{outlets:k}]}if(h.segmentPath)return[...a,h.segmentPath]}return"string"!=typeof h?[...a,h]:0===v?(h.split("/").forEach((k,z)=>{0==z&&"."===k||(0==z&&""===k?e=!0:".."===k?t++:""!=k&&a.push(k))}),a):[...a,h]},[]);return new fg(e,t,o)}(e);if(h.toRoot())return nf(t.root,new oi([],{}),t,o,a);const v=function(i,t,e){if(i.isAbsolute)return new Ih(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const h=e.snapshot._urlSegment;return new Ih(h,h===t.root,0)}const o=cp(i.commands[0])?0:1;return function(i,t,e){let o=i,a=t,h=e;for(;h>a;){if(h-=a,o=o.parent,!o)throw new Error("Invalid number of '../'");a=o.segments.length}return new Ih(o,!1,a-h)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+o,i.numberOfDoubleDots)}(h,t,i),k=v.processChildren?Vu(v.segmentGroup,v.index,h.commands):N_(v.segmentGroup,v.index,h.commands);return nf(v.segmentGroup,k,t,o,a)}($,this.currentUrlTree,e,me,null!=oe?oe:null)}navigateByUrl(e,o={skipLocationChange:!1}){const a=wc(e)?e:this.parseUrl(e),h=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(h,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function(i){for(let t=0;t<i.length;t++){const e=i[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(a){o=this.malformedUriErrorHandler(a,this.urlSerializer,e)}return o}isActive(e,o){let a;if(a=!0===o?Object.assign({},Gw):!1===o?Object.assign({},Rv):o,wc(e))return og(this.currentUrlTree,e,a);const h=this.parseUrl(e);return og(this.currentUrlTree,h,a)}removeEmptyProps(e){return Object.keys(e).reduce((o,a)=>{const h=e[a];return null!=h&&(o[a]=h),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Sh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,o,a,h,v){var k,z;if(this.disposed)return Promise.resolve(!1);const $=this.getTransition(),oe="imperative"!==o&&"imperative"===(null==$?void 0:$.source),Fe=(this.lastSuccessfulId===$.id||this.currentNavigation?$.rawUrl:$.urlAfterRedirects).toString()===e.toString();if(oe&&Fe)return Promise.resolve(!0);let je,ct,kt;v?(je=v.resolve,ct=v.reject,kt=v.promise):kt=new Promise((xn,Xn)=>{je=xn,ct=Xn});const Qt=++this.navigationId;let Sn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Sn=a&&a.\u0275routerPageId?a.\u0275routerPageId:h.replaceUrl||h.skipLocationChange?null!==(k=this.browserPageId)&&void 0!==k?k:0:(null!==(z=this.browserPageId)&&void 0!==z?z:0)+1):Sn=0,this.setTransition({id:Qt,targetPageId:Sn,source:o,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:h,resolve:je,reject:ct,promise:kt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),kt.catch(xn=>Promise.reject(xn))}setBrowserUrl(e,o){const a=this.urlSerializer.serialize(e),h=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(a)||o.extras.replaceUrl?this.location.replaceState(a,"",h):this.location.go(a,"",h)}restoreHistory(e,o=!1){var a,h;if("computed"===this.canceledNavigationResolution){const v=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===v?this.currentUrlTree===(null===(h=this.currentNavigation)||void 0===h?void 0:h.finalUrl)&&0===v&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(v)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o){const a=new Xc(e.id,this.serializeUrl(e.extractedUrl),o);this.triggerEvent(a),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.DyG),s.LFG(jf),s.LFG(iu),s.LFG(Vn),s.LFG(s.zs3),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(void 0))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),df=(()=>{class i{constructor(e,o,a,h,v){this.router=e,this.route=o,this.commands=[],this.onChanges=new Bn.xQ,null==a&&h.setAttribute(v.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:Al(this.skipLocationChange),replaceUrl:Al(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Al(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Jo),s.Y36(Za),s.$8M("tabindex"),s.Y36(s.Qsj),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,o){1&e&&s.NdJ("click",function(){return o.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s.TTD]}),i})(),fp=(()=>{class i{constructor(e,o,a){this.router=e,this.route=o,this.locationStrategy=a,this.commands=[],this.onChanges=new Bn.xQ,this.subscription=e.events.subscribe(h=>{h instanceof Sh&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,o,a,h,v){if(0!==e||o||a||h||v||"string"==typeof this.target&&"_self"!=this.target)return!0;const k={skipLocationChange:Al(this.skipLocationChange),replaceUrl:Al(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,k),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Al(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Jo),s.Y36(Za),s.Y36(Rn))},i.\u0275dir=s.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,o){1&e&&s.NdJ("click",function(h){return o.onClick(h.button,h.ctrlKey,h.shiftKey,h.altKey,h.metaKey)}),2&e&&(s.Ikx("href",o.href,s.LSH),s.uIk("target",o.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s.TTD]}),i})();function Al(i){return""===i||!!i}let Ix=(()=>{class i{constructor(e,o,a,h,v,k){this.router=e,this.element=o,this.renderer=a,this.cdr=h,this.link=v,this.linkWithHref=k,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(z=>{z instanceof Sh&&this.update()})}ngAfterContentInit(){(0,Qn.of)(this.links.changes,this.linksWithHrefs.changes,(0,Qn.of)(null)).pipe((0,$c.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const o=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(a=>!!a).map(a=>a.onChanges);this.linkInputChangesSubscription=(0,jr.D)(o).pipe((0,$c.J)()).subscribe(a=>{this.isActive!==this.isLinkActive(this.router)(a)&&this.update()})}set routerLinkActive(e){const o=Array.isArray(e)?e:e.split(" ");this.classes=o.filter(a=>!!a)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(o=>{e?this.renderer.addClass(this.element.nativeElement,o):this.renderer.removeClass(this.element.nativeElement,o)}))})}isLinkActive(e){const o=function(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return a=>e.isActive(a.urlTree,o)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Jo),s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(df,8),s.Y36(fp,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,df,5),s.Suo(a,fp,5)),2&e){let h;s.iGM(h=s.CRH())&&(o.links=h),s.iGM(h=s.CRH())&&(o.linksWithHrefs=h)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[s.TTD]}),i})(),Fv=(()=>{class i{constructor(e,o,a,h,v){this.parentContexts=e,this.location=o,this.resolver=a,this.changeDetector=v,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.name=h||Hi,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const v=(o=o||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),k=this.parentContexts.getOrCreateContext(this.name).children,z=new Yw(e,k,this.location.injector);this.activated=this.location.createComponent(v,this.location.length,z),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(iu),s.Y36(s.s_b),s.Y36(s._Vd),s.$8M("name"),s.Y36(s.sBO))},i.\u0275dir=s.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class Yw{constructor(t,e,o){this.route=t,this.childContexts=e,this.parent=o}get(t,e){return t===Za?this.route:t===iu?this.childContexts:this.parent.get(t,e)}}class qw{}class Px{preload(t,e){return(0,Qn.of)(null)}}let Rx=(()=>{class i{constructor(e,o,a,h,v){this.router=e,this.injector=h,this.preloadingStrategy=v,this.loader=new tm(o,a,$=>e.triggerEvent(new A_($)),$=>e.triggerEvent(new Cs($)))}setUpPreloading(){this.subscription=this.router.events.pipe(w(e=>e instanceof Sh),ad(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(s.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const a=[];for(const h of o)if(h.loadChildren&&!h.canLoad&&h._loadedConfig){const v=h._loadedConfig;a.push(this.processRoutes(v.module,v.routes))}else h.loadChildren&&!h.canLoad?a.push(this.preloadConfig(e,h)):h.children&&a.push(this.processRoutes(e,h.children));return(0,jr.D)(a).pipe((0,$c.J)(),(0,ri.U)(h=>{}))}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?(0,Qn.of)(o._loadedConfig):this.loader.load(e.injector,o)).pipe((0,ws.zg)(h=>(o._loadedConfig=h,this.processRoutes(h.module,h.routes)))))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Jo),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(s.zs3),s.LFG(qw))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),Lv=(()=>{class i{constructor(e,o,a={}){this.router=e,this.viewportScroller=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Sh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof cd&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new cd(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Jo),s.LFG(ui),s.LFG(void 0))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const Hu=new s.OlP("ROUTER_CONFIGURATION"),Cc=new s.OlP("ROUTER_FORROOT_GUARD"),Ox=[Vn,{provide:jf,useClass:lg},{provide:Jo,useFactory:function(i,t,e,o,a,h,v,k={},z,$){const oe=new Jo(null,i,t,e,o,a,h,ng(v));return z&&(oe.urlHandlingStrategy=z),$&&(oe.routeReuseStrategy=$),function(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy)}(k,oe),k.enableTracing&&oe.events.subscribe(me=>{var ke,Fe;null===(ke=console.group)||void 0===ke||ke.call(console,`Router Event: ${me.constructor.name}`),console.log(me.toString()),console.log(me),null===(Fe=console.groupEnd)||void 0===Fe||Fe.call(console)}),oe},deps:[jf,iu,Vn,s.zs3,s.v3s,s.Sil,pp,Hu,[class{},new s.FiY],[class{},new s.FiY]]},iu,{provide:Za,useFactory:function(i){return i.routerState.root},deps:[Jo]},{provide:s.v3s,useClass:s.EAV},Rx,Px,class{preload(t,e){return e().pipe(pa(()=>(0,Qn.of)(null)))}},{provide:Hu,useValue:{enableTracing:!1}}];function Z_(){return new s.PXZ("Router",Jo)}let vd=(()=>{class i{constructor(e,o){}static forRoot(e,o){return{ngModule:i,providers:[Ox,ru(e),{provide:Cc,useFactory:Fx,deps:[[Jo,new s.FiY,new s.tp0]]},{provide:Hu,useValue:o||{}},{provide:Rn,useFactory:nm,deps:[Be,[new s.tBr(Mt),new s.FiY],Hu]},{provide:Lv,useFactory:Nv,deps:[Jo,ui,Hu]},{provide:qw,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:Px},{provide:s.PXZ,multi:!0,useFactory:Z_},[wg,{provide:s.ip1,multi:!0,useFactory:Ww,deps:[wg]},{provide:pf,useFactory:Lx,deps:[wg]},{provide:s.tb,multi:!0,useExisting:pf}]]}}static forChild(e){return{ngModule:i,providers:[ru(e)]}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Cc,8),s.LFG(Jo,8))},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();function Nv(i,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new Lv(i,t,e)}function nm(i,t,e={}){return e.useHash?new $r(i,t):new Vi(i,t)}function Fx(i){return"guarded"}function ru(i){return[{provide:s.deG,multi:!0,useValue:i},{provide:pp,multi:!0,useValue:i}]}let wg=(()=>{class i{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Bn.xQ}appInitializer(){return this.injector.get(Ve,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const a=new Promise(k=>o=k),h=this.injector.get(Jo),v=this.injector.get(Hu);return"disabled"===v.initialNavigation?(h.setUpLocationChangeListener(),o(!0)):"enabled"===v.initialNavigation||"enabledBlocking"===v.initialNavigation?(h.hooks.afterPreactivation=()=>this.initNavigation?(0,Qn.of)(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),h.initialNavigation()):o(!0),a})}bootstrapListener(e){const o=this.injector.get(Hu),a=this.injector.get(Rx),h=this.injector.get(Lv),v=this.injector.get(Jo),k=this.injector.get(s.z2F);e===k.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&v.initialNavigation(),a.setUpPreloading(),h.init(),v.resetRootComponentType(k.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.zs3))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();function Ww(i){return i.appInitializer.bind(i)}function Lx(i){return i.bootstrapListener.bind(i)}const pf=new s.OlP("Router Initializer");function Lh(){return i=>i.lift(new zv)}class zv{call(t,e){return e.subscribe(new mp(t))}}class mp extends $o.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Cg=nt(9759),We=nt(4762),Zr=nt(4685),bd=nt(300),ff=function(i,t){return(ff=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])})(i,t)};function $_(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],o=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var si,Nx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},im=im||{},Gi=Nx||self;function Vv(){}function rm(i){var t=typeof i;return"array"==(t="object"!=t?t:i?Array.isArray(i)?"array":t:"null")||"object"==t&&"number"==typeof i.length}function gp(i){var t=typeof i;return"object"==t&&null!=i||"function"==t}var X_="closure_uid_"+(1e9*Math.random()>>>0),Uv=0;function Bx(i,t,e){return i.call.apply(i.bind,arguments)}function Ka(i,t,e){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,o),i.apply(t,a)}}return function(){return i.apply(t,arguments)}}function Ra(i,t,e){return(Ra=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bx:Ka).apply(null,arguments)}function Q_(i,t){var e=Array.prototype.slice.call(arguments,1);return function(){var o=e.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function el(i,t){function e(){}e.prototype=t.prototype,i.Z=t.prototype,i.prototype=new e,i.prototype.constructor=i,i.Vb=function(o,a,h){for(var v=Array(arguments.length-2),k=2;k<arguments.length;k++)v[k-2]=arguments[k];return t.prototype[a].apply(o,v)}}function mf(){this.s=this.s,this.o=this.o}var rE={};mf.prototype.s=!1,mf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,X_)&&i[X_]||(i[X_]=++Uv)}(this);delete rE[i]}},mf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Hv=Array.prototype.indexOf?function(i,t){return Array.prototype.indexOf.call(i,t,void 0)}:function(i,t){if("string"==typeof i)return"string"!=typeof t||1!=t.length?-1:i.indexOf(t,0);for(var e=0;e<i.length;e++)if(e in i&&i[e]===t)return e;return-1},Eg=Array.prototype.forEach?function(i,t,e){Array.prototype.forEach.call(i,t,e)}:function(i,t,e){for(var o=i.length,a="string"==typeof i?i.split(""):i,h=0;h<o;h++)h in a&&t.call(e,a[h],h,i)};function jv(i){return Array.prototype.concat.apply([],arguments)}function om(i){var t=i.length;if(0<t){for(var e=Array(t),o=0;o<t;o++)e[o]=i[o];return e}return[]}function gf(i){return/^[\s\xa0]*$/.test(i)}var nl,xd=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function tl(i,t){return-1!=i.indexOf(t)}function So(i,t){return i<t?-1:i>t?1:0}e:{var Yv=Gi.navigator;if(Yv){var K_=Yv.userAgent;if(K_){nl=K_;break e}}nl=""}function Tg(i,t,e){for(var o in i)t.call(e,i[o],o,i)}function ey(i){var t={};for(var e in i)t[e]=i[e];return t}var Xl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sm(i,t){for(var e,o,a=1;a<arguments.length;a++){for(e in o=arguments[a])i[e]=o[e];for(var h=0;h<Xl.length;h++)e=Xl[h],Object.prototype.hasOwnProperty.call(o,e)&&(i[e]=o[e])}}function yp(i){return yp[" "](i),i}yp[" "]=Vv;var ma,i,oE=tl(nl,"Opera"),_f=tl(nl,"Trident")||tl(nl,"MSIE"),Zv=tl(nl,"Edge"),Wv=Zv||_f,$v=tl(nl,"Gecko")&&!(tl(nl.toLowerCase(),"webkit")&&!tl(nl,"Edge"))&&!(tl(nl,"Trident")||tl(nl,"MSIE"))&&!tl(nl,"Edge"),Mg=tl(nl.toLowerCase(),"webkit")&&!tl(nl,"Edge");function Xv(){var i=Gi.document;return i?i.documentMode:void 0}e:{var Nh="",am=(i=nl,$v?/rv:([^\);]+)(\)|;)/.exec(i):Zv?/Edge\/([\d\.]+)/.exec(i):_f?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Mg?/WebKit\/(\S+)/.exec(i):oE?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(am&&(Nh=am?am[1]:""),_f){var ty=Xv();if(null!=ty&&ty>parseFloat(Nh)){ma=String(ty);break e}}ma=Nh}var Qv={};function ny(){return t=Qv,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var i=0,t=xd(String(ma)).split("."),e=xd("9").split("."),o=Math.max(t.length,e.length),a=0;0==i&&a<o;a++){var h=t[a]||"",v=e[a]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==h[0].length&&0==v[0].length)break;i=So(0==h[1].length?0:parseInt(h[1],10),0==v[1].length?0:parseInt(v[1],10))||So(0==h[2].length,0==v[2].length)||So(h[2],v[2]),h=h[3],v=v[3]}while(0==i)}return 0<=i}();var t}var zx=Gi.document&&_f&&(Xv()||parseInt(ma,10))||void 0,ry=function(){if(!Gi.addEventListener||!Object.defineProperty)return!1;var i=!1,t=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Gi.addEventListener("test",Vv,t),Gi.removeEventListener("test",Vv,t)}catch(e){}return i}();function il(i,t){this.type=i,this.g=this.target=t,this.defaultPrevented=!1}function lm(i,t){if(il.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var e=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=t,t=i.relatedTarget){if($v){e:{try{yp(t.nodeName);var a=!0;break e}catch(h){}a=!1}a||(t=null)}}else"mouseover"==e?t=i.fromElement:"mouseout"==e&&(t=i.toElement);this.relatedTarget=t,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Kv[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&lm.Z.h.call(this)}}il.prototype.h=function(){this.defaultPrevented=!0},el(lm,il);var Kv={2:"touch",3:"pen",4:"mouse"};lm.prototype.h=function(){lm.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var yf="closure_listenable_"+(1e6*Math.random()|0),wd=0;function eb(i,t,e,o,a){this.listener=i,this.proxy=null,this.src=t,this.type=e,this.capture=!!o,this.ia=a,this.key=++wd,this.ca=this.fa=!1}function vp(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function ou(i){this.src=i,this.g={},this.h=0}function Gu(i,t){var e=t.type;if(e in i.g){var h,o=i.g[e],a=Hv(o,t);(h=0<=a)&&Array.prototype.splice.call(o,a,1),h&&(vp(t),0==i.g[e].length&&(delete i.g[e],i.h--))}}function Ag(i,t,e,o){for(var a=0;a<i.length;++a){var h=i[a];if(!h.ca&&h.listener==t&&h.capture==!!e&&h.ia==o)return a}return-1}ou.prototype.add=function(i,t,e,o,a){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var v=Ag(i,t,o,a);return-1<v?(t=i[v],e||(t.fa=!1)):((t=new eb(t,this.src,h,!!o,a)).fa=e,i.push(t)),t};var kg="closure_lm_"+(1e6*Math.random()|0),ju={};function Cd(i,t,e,o,a){if(o&&o.once)return su(i,t,e,o,a);if(Array.isArray(t)){for(var h=0;h<t.length;h++)Cd(i,t[h],e,o,a);return null}return e=hm(e),i&&i[yf]?i.N(t,e,gp(o)?!!o.capture:!!o,a):Dg(i,t,e,!1,o,a)}function Dg(i,t,e,o,a,h){if(!t)throw Error("Invalid event type");var v=gp(a)?!!a.capture:!!a,k=Ig(i);if(k||(i[kg]=k=new ou(i)),(e=k.add(t,e,o,v,h)).proxy)return e;if(o=function(){var t=Vx;return function i(e){return t.call(i.src,i.listener,e)}}(),e.proxy=o,o.src=i,o.listener=e,i.addEventListener)ry||(a=v),void 0===a&&(a=!1),i.addEventListener(t.toString(),o,a);else if(i.attachEvent)i.attachEvent(um(t.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return e}function su(i,t,e,o,a){if(Array.isArray(t)){for(var h=0;h<t.length;h++)su(i,t[h],e,o,a);return null}return e=hm(e),i&&i[yf]?i.O(t,e,gp(o)?!!o.capture:!!o,a):Dg(i,t,e,!0,o,a)}function tb(i,t,e,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)tb(i,t[h],e,o,a);else o=gp(o)?!!o.capture:!!o,e=hm(e),i&&i[yf]?(i=i.i,(t=String(t).toString())in i.g&&-1<(e=Ag(h=i.g[t],e,o,a))&&(vp(h[e]),Array.prototype.splice.call(h,e,1),0==h.length&&(delete i.g[t],i.h--))):i&&(i=Ig(i))&&(t=i.g[t.toString()],i=-1,t&&(i=Ag(t,e,o,a)),(e=-1<i?t[i]:null)&&cm(e))}function cm(i){if("number"!=typeof i&&i&&!i.ca){var t=i.src;if(t&&t[yf])Gu(t.i,i);else{var e=i.type,o=i.proxy;t.removeEventListener?t.removeEventListener(e,o,i.capture):t.detachEvent?t.detachEvent(um(e),o):t.addListener&&t.removeListener&&t.removeListener(o),(e=Ig(t))?(Gu(e,i),0==e.h&&(e.src=null,t[kg]=null)):vp(i)}}}function um(i){return i in ju?ju[i]:ju[i]="on"+i}function Vx(i,t){if(i.ca)i=!0;else{t=new lm(t,this);var e=i.listener,o=i.ia||i.src;i.fa&&cm(i),i=e.call(o,t)}return i}function Ig(i){return(i=i[kg])instanceof ou?i:null}var nb="__closure_events_fn_"+(1e9*Math.random()>>>0);function hm(i){return"function"==typeof i?i:(i[nb]||(i[nb]=function(t){return i.handleEvent(t)}),i[nb])}function ga(){mf.call(this),this.i=new ou(this),this.P=this,this.I=null}function Xs(i,t){var e,o=i.I;if(o)for(e=[];o;o=o.I)e.push(o);if(i=i.P,o=t.type||t,"string"==typeof t)t=new il(t,i);else if(t instanceof il)t.target=t.target||i;else{var a=t;sm(t=new il(o,i),a)}if(a=!0,e)for(var h=e.length-1;0<=h;h--){var v=t.g=e[h];a=dm(v,o,!0,t)&&a}if(a=dm(v=t.g=i,o,!0,t)&&a,a=dm(v,o,!1,t)&&a,e)for(h=0;h<e.length;h++)a=dm(v=t.g=e[h],o,!1,t)&&a}function dm(i,t,e,o){if(!(t=i.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,h=0;h<t.length;++h){var v=t[h];if(v&&!v.ca&&v.capture==e){var k=v.listener,z=v.ia||v.src;v.fa&&Gu(i.i,v),a=!1!==k.call(z,o)&&a}}return a&&!o.defaultPrevented}el(ga,mf),ga.prototype[yf]=!0,ga.prototype.removeEventListener=function(i,t,e,o){tb(this,i,t,e,o)},ga.prototype.M=function(){if(ga.Z.M.call(this),this.i){var t,i=this.i;for(t in i.g){for(var e=i.g[t],o=0;o<e.length;o++)vp(e[o]);delete i.g[t],i.h--}}this.I=null},ga.prototype.N=function(i,t,e,o){return this.i.add(String(i),t,!1,e,o)},ga.prototype.O=function(i,t,e,o){return this.i.add(String(i),t,!0,e,o)};var Sd=Gi.JSON.stringify;function g(){var i=re,t=null;return i.g&&(t=i.g,i.g=i.g.next,i.g||(i.h=null),t.next=null),t}var B,l=function(){function i(){this.h=this.g=null}return i.prototype.add=function(t,e){var o=_.get();o.set(t,e),this.h?this.h.next=o:this.g=o,this.h=o},i}(),_=new(function(){function i(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return i.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},i}())(function(){return new x},function(i){return i.reset()}),x=function(){function i(){this.next=this.g=this.h=null}return i.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},i.prototype.reset=function(){this.next=this.g=this.h=null},i}();function D(i){Gi.setTimeout(function(){throw i},0)}function F(i,t){B||function(){var i=Gi.Promise.resolve(void 0);B=function(){i.then(ce)}}(),X||(B(),X=!0),re.add(i,t)}var X=!1,re=new l;function ce(){for(var i;i=g();){try{i.h.call(i.g)}catch(e){D(e)}var t=_;t.j(i),100>t.h&&(t.h++,i.next=t.g,t.g=i)}X=!1}function de(i,t){ga.call(this),this.h=i||1,this.g=t||Gi,this.j=Ra(this.kb,this),this.l=Date.now()}function _e(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Se(i,t,e){if("function"==typeof i)e&&(i=Ra(i,e));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ra(i.handleEvent,i)}return 2147483647<Number(t)?-1:Gi.setTimeout(i,t||0)}function Re(i){i.g=Se(function(){i.g=null,i.i&&(i.i=!1,Re(i))},i.j);var t=i.h;i.h=null,i.m.apply(null,t)}el(de,ga),(si=de.prototype).da=!1,si.S=null,si.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xs(this,"tick"),this.da&&(_e(this),this.start()))}},si.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},si.M=function(){de.Z.M.call(this),_e(this),delete this.g};var Xe=function(i){function t(e,o){var a=i.call(this)||this;return a.m=e,a.j=o,a.h=null,a.i=!1,a.g=null,a}return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=i}ff(i,t),i.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}(t,i),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Re(this)},t.prototype.M=function(){i.prototype.M.call(this),this.g&&(Gi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(mf);function at(i){mf.call(this),this.h=i,this.g={}}el(at,mf);var bt=[];function It(i,t,e,o){Array.isArray(e)||(e&&(bt[0]=e.toString()),e=bt);for(var a=0;a<e.length;a++){var h=Cd(t,e[a],o||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function Rt(i){Tg(i.g,function(t,e){this.g.hasOwnProperty(e)&&cm(t)},i),i.g={}}function Bt(){this.g=!0}function mn(i,t,e,o){i.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(i,t){if(!i.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(i=0;i<e.length;i++)if(Array.isArray(e[i])){var o=e[i];if(!(2>o.length)){var a=o[1];if(Array.isArray(a)&&!(1>a.length)){var h=a[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var v=1;v<a.length;v++)a[v]=""}}}return Sd(e)}catch(k){return t}}(i,e)+(o?" "+o:"")})}at.prototype.M=function(){at.Z.M.call(this),Rt(this)},at.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bt.prototype.Aa=function(){this.g=!1},Bt.prototype.info=function(){};var Tn={},ln=null;function pn(){return ln=ln||new ga}function In(i){il.call(this,Tn.Ma,i)}function on(i){var t=pn();Xs(t,new In(t,i))}function Mi(i,t){il.call(this,Tn.STAT_EVENT,i),this.stat=t}function gi(i){var t=pn();Xs(t,new Mi(t,i))}function Xi(i,t){il.call(this,Tn.Na,i),this.size=t}function Fi(i,t){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Gi.setTimeout(function(){i()},t)}Tn.Ma="serverreachability",el(In,il),Tn.STAT_EVENT="statevent",el(Mi,il),Tn.Na="timingevent",el(Xi,il);var ti={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pi(){}function ss(){}pi.prototype.h=null;var mo,To={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ls(){il.call(this,"d")}function Oo(){il.call(this,"c")}function Br(){}function go(i,t,e,o){this.l=i,this.j=t,this.m=e,this.X=o||1,this.V=new at(this),this.P=Ns,this.W=new de(i=Wv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Mo}function Mo(){this.i=null,this.g="",this.h=!1}el(Ls,il),el(Oo,il),el(Br,pi),Br.prototype.g=function(){return new XMLHttpRequest},Br.prototype.i=function(){return{}},mo=new Br;var Ns=45e3,eo={},Ar={};function as(i,t,e){i.K=1,i.v=Lo(Ql(t)),i.s=e,i.U=!0,Fo(i,null)}function Fo(i,t){i.F=Date.now(),Oa(i),i.A=Ql(i.v);var e=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Og(e.h,"t",o),i.C=0,e=i.l.H,i.h=new Mo,i.g=Zx(i.l,e?t:null,!i.s),0<i.O&&(i.L=new Xe(Ra(i.Ia,i,i.g),i.O)),It(i.V,i.g,"readystatechange",i.gb),t=i.H?ey(i.H):{},i.s?(i.u||(i.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,t)):(i.u="GET",i.g.ea(i.A,i.u,null,t)),on(1),function(i,t,e,o,a,h){i.info(function(){if(i.g)if(h)for(var v="",k=h.split("&"),z=0;z<k.length;z++){var $=k[z].split("=");if(1<$.length){var oe=$[0];$=$[1];var me=oe.split("_");v=2<=me.length&&"type"==me[1]?v+(oe+"=")+$+"&":v+(oe+"=redacted&")}}else v=null;else v=h;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+t+"\n"+e+"\n"+v})}(i.j,i.u,i.A,i.m,i.X,i.s)}function jo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Qs(i,t,e){for(var a,o=!0;!i.I&&i.C<e.length;){if((a=Yo(i,e))==Ar){4==t&&(i.o=4,gi(14),o=!1),mn(i.j,i.m,null,"[Incomplete Response]");break}if(a==eo){i.o=4,gi(15),mn(i.j,i.m,e,"[Invalid Chunk]"),o=!1;break}mn(i.j,i.m,a,null),_a(i,a)}jo(i)&&a!=Ar&&a!=eo&&(i.h.g="",i.C=0),4!=t||0!=e.length||i.h.h||(i.o=1,gi(16),o=!1),i.i=i.i&&o,o?0<e.length&&!i.aa&&(i.aa=!0,(t=i.l).g==i&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),u1(t),t.L=!0,gi(11))):(mn(i.j,i.m,e,"[Invalid Chunked Response]"),Es(i),ao(i))}function Yo(i,t){var e=i.C,o=t.indexOf("\n",e);return-1==o?Ar:(e=Number(t.substring(e,o)),isNaN(e)?eo:(o+=1)+e>t.length?Ar:(t=t.substr(o,e),i.C=o+e,t))}function Oa(i){i.Y=Date.now()+i.P,Js(i,i.P)}function Js(i,t){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Fi(Ra(i.eb,i),t)}function lr(i){i.B&&(Gi.clearTimeout(i.B),i.B=null)}function ao(i){0==i.l.G||i.I||yE(i.l,i)}function Es(i){lr(i);var t=i.L;t&&"function"==typeof t.na&&t.na(),i.L=null,_e(i.W),Rt(i.V),i.g&&(t=i.g,i.g=null,t.abort(),t.na())}function _a(i,t){try{var e=i.l;if(0!=e.G&&(e.g==i||Hx(e.i,i)))if(e.I=i.N,!i.J&&Hx(e.i,i)&&3==e.G){try{var o=e.Ca.g.parse(t)}catch(kt){o=null}if(Array.isArray(o)&&3==o.length){var a=o;if(0==a[0])e:if(e.u)e.ta=a[1],0<e.ta-e.U&&37500>a[2]&&e.N&&0==e.A&&!e.v&&(e.v=Fi(Ra(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<i.F))break e;qx(e),Yx(e)}c1(e),gi(18)}if(1>=Qw(e.i)&&e.ka){try{e.ka()}catch(kt){}e.ka=void 0}}else Ng(e,11)}else if((i.J||e.g==i)&&qx(e),!gf(t))for(a=e.Ca.g.parse(t),t=0;t<a.length;t++){var h=a[t];if(e.U=h[0],h=h[1],2==e.G)if("c"==h[0]){e.J=h[1],e.la=h[2];var v=h[3];null!=v&&(e.ma=v,e.h.info("VER="+e.ma));var k=h[4];null!=k&&(e.za=k,e.h.info("SVER="+e.za));var z=h[5];null!=z&&"number"==typeof z&&0<z&&(e.K=o=1.5*z,e.h.info("backChannelRequestTimeoutMs_="+o)),o=e;var $=i.g;if($){var oe=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var me=o.i;!me.g&&(tl(oe,"spdy")||tl(oe,"quic")||tl(oe,"h2"))&&(me.j=me.l,me.g=new Set,me.h&&(Gx(me,me.h),me.h=null))}if(o.D){var ke=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(o.sa=ke,Ao(o.F,o.D,ke))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-i.F,e.h.info("Handshake RTT: "+e.O+"ms"));var Fe=i;if((o=e).oa=p1(o,o.H?o.la:null,o.W),Fe.J){cE(o.i,Fe);var je=Fe,ct=o.K;ct&&je.setTimeout(ct),je.B&&(lr(je),Oa(je)),o.g=Fe}else l1(o);0<e.l.length&&lb(e)}else"stop"!=h[0]&&"close"!=h[0]||Ng(e,7);else 3==e.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?Ng(e,7):mE(e):"noop"!=h[0]&&e.j&&e.j.wa(h),e.A=0)}on(4)}catch(kt){}}function Sc(i,t){if(i.forEach&&"function"==typeof i.forEach)i.forEach(t,void 0);else if(rm(i)||"string"==typeof i)Eg(i,t,void 0);else{if(i.T&&"function"==typeof i.T)var e=i.T();else if(i.R&&"function"==typeof i.R)e=void 0;else if(rm(i)||"string"==typeof i){e=[];for(var o=i.length,a=0;a<o;a++)e.push(a)}else for(a in e=[],o=0,i)e[o++]=a;a=(o=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(rm(i)){for(var t=[],e=i.length,o=0;o<e;o++)t.push(i[o]);return t}for(o in t=[],e=0,i)t[e++]=i[o];return t}(i)).length;for(var h=0;h<a;h++)t.call(void 0,o[h],e&&e[h],i)}}function Ec(i,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var o=0;o<e;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Ec)for(e=i.T(),o=0;o<e.length;o++)this.set(e[o],i.get(e[o]));else for(o in i)this.set(o,i[o])}function au(i){if(i.i!=i.g.length){for(var t=0,e=0;t<i.g.length;){var o=i.g[t];ls(i.h,o)&&(i.g[e++]=o),t++}i.g.length=e}if(i.i!=i.g.length){var a={};for(e=t=0;t<i.g.length;)ls(a,o=i.g[t])||(i.g[e++]=o,a[o]=1),t++;i.g.length=e}}function ls(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(si=go.prototype).setTimeout=function(i){this.P=i},si.gb=function(i){i=i.target;var t=this.L;t&&3==vf(i)?t.l():this.Ia(i)},si.Ia=function(i){try{if(i==this.g)e:{var t=vf(this.g),e=this.g.Da(),o=this.g.ba();if(!(3>t)&&(3!=t||Wv||this.g&&(this.h.h||this.g.ga()||Ek(this.g)))){this.I||4!=t||7==e||on(8==e||0>=o?3:2),lr(this);var a=this.g.ba();this.N=a;t:if(jo(this)){var h=Ek(this.g);i="";var v=h.length,k=4==vf(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Es(this),ao(this);var z="";break t}this.h.i=new Gi.TextDecoder}for(e=0;e<v;e++)this.h.h=!0,i+=this.h.i.decode(h[e],{stream:k&&e==v-1});h.splice(0,v),this.h.g+=i,this.C=0,z=this.h.g}else z=this.g.ga();if(this.i=200==a,function(i,t,e,o,a,h,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+a+"]: "+t+"\n"+e+"\n"+h+" "+v})}(this.j,this.u,this.A,this.m,this.X,t,a),this.i){if(this.$&&!this.J){t:{if(this.g){var $,oe=this.g;if(($=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gf($)){var me=$;break t}}me=null}if(!(a=me)){this.i=!1,this.o=3,gi(12),Es(this),ao(this);break e}mn(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_a(this,a)}this.U?(Qs(this,t,z),Wv&&this.i&&3==t&&(It(this.V,this.W,"tick",this.fb),this.W.start())):(mn(this.j,this.m,z,null),_a(this,z)),4==t&&Es(this),this.i&&!this.I&&(4==t?yE(this.l,this):(this.i=!1,Oa(this)))}else 400==a&&0<z.indexOf("Unknown SID")?(this.o=3,gi(12)):(this.o=0,gi(13)),Es(this),ao(this)}}}catch(ke){}},si.fb=function(){if(this.g){var i=vf(this.g),t=this.g.ga();this.C<t.length&&(lr(this),Qs(this,i,t),this.i&&4!=i&&Oa(this))}},si.cancel=function(){this.I=!0,Es(this)},si.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function(i,t){i.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(on(3),gi(17)),Es(this),this.o=2,ao(this)):Js(this,this.Y-i)},(si=Ec.prototype).R=function(){au(this);for(var i=[],t=0;t<this.g.length;t++)i.push(this.h[this.g[t]]);return i},si.T=function(){return au(this),this.g.concat()},si.get=function(i,t){return ls(this.h,i)?this.h[i]:t},si.set=function(i,t){ls(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=t},si.forEach=function(i,t){for(var e=this.T(),o=0;o<e.length;o++){var a=e[o],h=this.get(a);i.call(t,h,a,this)}};var Yu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ko(i,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Ko){this.g=void 0!==t?t:i.g,rl(this,i.j),this.s=i.s,Vh(this,i.i),lu(this,i.m),this.l=i.l,t=i.h;var e=new bp;e.i=t.i,t.g&&(e.g=new Ec(t.g),e.h=t.h),oy(this,e),this.o=i.o}else i&&(e=String(i).match(Yu))?(this.g=!!t,rl(this,e[1]||"",!0),this.s=Tc(e[2]||""),Vh(this,e[3]||"",!0),lu(this,e[4]),this.l=Tc(e[5]||"",!0),oy(this,e[6]||"",!0),this.o=Tc(e[7]||"")):(this.g=!!t,this.h=new bp(null,this.g))}function Ql(i){return new Ko(i)}function rl(i,t,e){i.j=e?Tc(t,!0):t,i.j&&(i.j=i.j.replace(/:$/,""))}function Vh(i,t,e){i.i=e?Tc(t,!0):t}function lu(i,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);i.m=t}else i.m=null}function oy(i,t,e){t instanceof bp?(i.h=t,function(i,t){t&&!i.j&&(qu(i),i.i=null,i.g.forEach(function(e,o){var a=o.toLowerCase();o!=a&&(Pg(this,o),Og(this,a,e))},i)),i.j=t}(i.h,i.g)):(e||(t=Ed(t,ly)),i.h=new bp(t,i.g))}function Ao(i,t,e){i.h.set(t,e)}function Lo(i){return Ao(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Tc(i,t){return i?t?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ed(i,t,e){return"string"==typeof i?(i=encodeURI(i).replace(t,va),e&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function va(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ko.prototype.toString=function(){var i=[],t=this.j;t&&i.push(Ed(t,Ux,!0),":");var e=this.i;return(e||"file"==t)&&(i.push("//"),(t=this.s)&&i.push(Ed(t,Ux,!0),"@"),i.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&i.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&i.push("/"),i.push(Ed(e,"/"==e.charAt(0)?ay:sy,!0))),(e=this.h.toString())&&i.push("?",e),(e=this.o)&&i.push("#",Ed(e,cy)),i.join("")};var Ux=/[#\/\?@]/g,sy=/[#\?:]/g,ay=/[#\?]/g,ly=/[#\?@]/g,cy=/#/g;function bp(i,t){this.h=this.g=null,this.i=i||null,this.j=!!t}function qu(i){i.g||(i.g=new Ec,i.h=0,i.i&&function(i,t){if(i){i=i.split("&");for(var e=0;e<i.length;e++){var o=i[e].indexOf("="),a=null;if(0<=o){var h=i[e].substring(0,o);a=i[e].substring(o+1)}else h=i[e];t(h,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(t,e){i.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Pg(i,t){qu(i),t=Fg(i,t),ls(i.g.h,t)&&(i.i=null,i.h-=i.g.get(t).length,ls((i=i.g).h,t)&&(delete i.h[t],i.i--,i.g.length>2*i.i&&au(i)))}function Rg(i,t){return qu(i),t=Fg(i,t),ls(i.g.h,t)}function Og(i,t,e){Pg(i,t),0<e.length&&(i.i=null,i.g.set(Fg(i,t),om(e)),i.h+=e.length)}function Fg(i,t){return t=String(t),i.j&&(t=t.toLowerCase()),t}(si=bp.prototype).add=function(i,t){qu(this),this.i=null,i=Fg(this,i);var e=this.g.get(i);return e||this.g.set(i,e=[]),e.push(t),this.h+=1,this},si.forEach=function(i,t){qu(this),this.g.forEach(function(e,o){Eg(e,function(a){i.call(t,a,o,this)},this)},this)},si.T=function(){qu(this);for(var i=this.g.R(),t=this.g.T(),e=[],o=0;o<t.length;o++)for(var a=i[o],h=0;h<a.length;h++)e.push(t[o]);return e},si.R=function(i){qu(this);var t=[];if("string"==typeof i)Rg(this,i)&&(t=jv(t,this.g.get(Fg(this,i))));else{i=this.g.R();for(var e=0;e<i.length;e++)t=jv(t,i[e])}return t},si.set=function(i,t){return qu(this),this.i=null,Rg(this,i=Fg(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[t]),this.h+=1,this},si.get=function(i,t){return i&&0<(i=this.R(i)).length?String(i[0]):t},si.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],t=this.g.T(),e=0;e<t.length;e++){var o=t[e],a=encodeURIComponent(String(o));o=this.R(o);for(var h=0;h<o.length;h++){var v=a;""!==o[h]&&(v+="="+encodeURIComponent(String(o[h]))),i.push(v)}}return this.i=i.join("&")};var aE=function(t,e){this.h=t,this.g=e};function $w(i){this.l=i||lE,i=Gi.PerformanceNavigationTiming?0<(i=Gi.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Gi.g&&Gi.g.Ea&&Gi.g.Ea()&&Gi.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lE=10;function Xw(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Qw(i){return i.h?1:i.g?i.g.size:0}function Hx(i,t){return i.h?i.h==t:!!i.g&&i.g.has(t)}function Gx(i,t){i.g?i.g.add(t):i.h=t}function cE(i,t){i.h&&i.h==t?i.h=null:i.g&&i.g.has(t)&&i.g.delete(t)}function Jw(i){var t,e;if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var o=i.i;try{for(var a=$_(i.g.values()),h=a.next();!h.done;h=a.next())o=o.concat(h.value.D)}catch(k){t={error:k}}finally{try{h&&!h.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o}return om(i.i)}function Kw(){}function uE(){this.g=new Kw}function hE(i,t,e){var o=e||"";try{Sc(i,function(a,h){var v=a;gp(a)&&(v=Sd(a)),t.push(o+h+"="+encodeURIComponent(v))})}catch(a){throw t.push(o+"type="+encodeURIComponent("_badmap")),a}}function e1(i,t,e,o,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(o)}catch(h){}}function ib(i){this.l=i.$b||null,this.j=i.ib||!1}function rb(i,t){ga.call(this),this.D=i,this.u=t,this.m=void 0,this.readyState=t1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$w.prototype.cancel=function(){var i,t;if(this.i=Jw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var e=$_(this.g.values()),o=e.next();!o.done;o=e.next())o.value.cancel()}catch(h){i={error:h}}finally{try{o&&!o.done&&(t=e.return)&&t.call(e)}finally{if(i)throw i.error}}this.g.clear()}},Kw.prototype.stringify=function(i){return Gi.JSON.stringify(i,void 0)},Kw.prototype.parse=function(i){return Gi.JSON.parse(i,void 0)},el(ib,pi),ib.prototype.g=function(){return new rb(this.l,this.j)},ib.prototype.i=function(i){return function(){return i}}({}),el(rb,ga);var t1=0;function n1(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function ob(i){i.readyState=4,i.l=null,i.j=null,i.A=null,sb(i)}function sb(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(si=rb.prototype).open=function(i,t){if(this.readyState!=t1)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=t,this.readyState=1,sb(this)},si.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(t.body=i),(this.D||Gi).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},si.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ob(this)),this.readyState=t1},si.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,sb(this)),this.g&&(this.readyState=3,sb(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Gi.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;n1(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},si.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var t=i.value?i.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!i.done}))&&(this.response=this.responseText+=t)}i.done?ob(this):sb(this),3==this.readyState&&n1(this)}},si.Ua=function(i){this.g&&(this.response=this.responseText=i,ob(this))},si.Ta=function(i){this.g&&(this.response=i,ob(this))},si.ha=function(){this.g&&ob(this)},si.setRequestHeader=function(i,t){this.v.append(i,t)},si.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},si.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],t=this.h.entries(),e=t.next();!e.done;)i.push((e=e.value)[0]+": "+e[1]),e=t.next();return i.join("\r\n")},Object.defineProperty(rb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var PP=Gi.JSON.parse;function ba(i){ga.call(this),this.headers=new Ec,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=r1,this.K=this.L=!1}el(ba,ga);var r1="",RP=/^https?$/i,OP=["POST","PUT"];function Ck(i){return"content-type"==i.toLowerCase()}function Sk(i,t){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=t,i.m=5,dE(i),uy(i)}function dE(i){i.D||(i.D=!0,Xs(i,"complete"),Xs(i,"error"))}function pE(i){if(i.h&&void 0!==im&&(!i.C[1]||4!=vf(i)||2!=i.ba()))if(i.v&&4==vf(i))Se(i.Fa,0,i);else if(Xs(i,"readystatechange"),4==vf(i)){i.h=!1;try{var o,t=i.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}if(!(o=e)){var a;if(a=0===t){var h=String(i.H).match(Yu)[1]||null;if(!h&&Gi.self&&Gi.self.location){var v=Gi.self.location.protocol;h=v.substr(0,v.length-1)}a=!RP.test(h?h.toLowerCase():"")}o=a}if(o)Xs(i,"complete"),Xs(i,"success");else{i.m=6;try{var k=2<vf(i)?i.g.statusText:""}catch(z){k=""}i.j=k+" ["+i.ba()+"]",dE(i)}}finally{uy(i)}}}function uy(i,t){if(i.g){jx(i);var e=i.g,o=i.C[0]?Vv:null;i.g=null,i.C=null,t||Xs(i,"ready");try{e.onreadystatechange=o}catch(a){}}}function jx(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Gi.clearTimeout(i.A),i.A=null)}function vf(i){return i.g?i.g.readyState:0}function Ek(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case r1:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(t){return null}}function fE(i,t,e){e:{for(o in e){var o=!1;break e}o=!0}o||(e=function(i){var t="";return Tg(i,function(e,o){t+=o,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof i?null!=e&&encodeURIComponent(String(e)):Ao(i,t,e))}function ab(i,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[i]||t}function o1(i){this.za=0,this.l=[],this.h=new Bt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ab("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ab("baseRetryDelayMs",5e3,i),this.$a=ab("retryDelaySeedMs",1e4,i),this.Ya=ab("forwardChannelMaxRetries",2,i),this.ra=ab("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new $w(i&&i.concurrentRequestLimit),this.Ca=new uE,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function mE(i){if(Lg(i),3==i.G){var t=i.V++,e=Ql(i.F);Ao(e,"SID",i.J),Ao(e,"RID",t),Ao(e,"TYPE","terminate"),pm(i,e),(t=new go(i,i.h,t,void 0)).K=2,t.v=Lo(Ql(e)),e=!1,Gi.navigator&&Gi.navigator.sendBeacon&&(e=Gi.navigator.sendBeacon(t.v.toString(),"")),!e&&Gi.Image&&((new Image).src=t.v,e=!0),e||(t.g=Zx(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Oa(t)}d1(i)}function Yx(i){i.g&&(u1(i),i.g.cancel(),i.g=null)}function Lg(i){Yx(i),i.u&&(Gi.clearTimeout(i.u),i.u=null),qx(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Gi.clearTimeout(i.m),i.m=null)}function s1(i,t){i.l.push(new aE(i.Za++,t)),3==i.G&&lb(i)}function lb(i){Xw(i.i)||i.m||(i.m=!0,F(i.Ha,i),i.C=0)}function a1(i,t){var e;e=t?t.m:i.V++;var o=Ql(i.F);Ao(o,"SID",i.J),Ao(o,"RID",e),Ao(o,"AID",i.U),pm(i,o),i.o&&i.s&&fE(o,i.o,i.s),e=new go(i,i.h,e,i.C+1),null===i.o&&(e.H=i.s),t&&(i.l=t.D.concat(i.l)),t=gE(i,e,1e3),e.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Gx(i.i,e),as(e,o,t)}function pm(i,t){i.j&&Sc({},function(e,o){Ao(t,o,e)})}function gE(i,t,e){e=Math.min(i.l.length,e);var o=i.j?Ra(i.j.Oa,i.j,i):null;e:for(var a=i.l,h=-1;;){var v=["count="+e];-1==h?0<e?v.push("ofs="+(h=a[0].h)):h=0:v.push("ofs="+h);for(var k=!0,z=0;z<e;z++){var $=a[z].h,oe=a[z].g;if(0>($-=h))h=Math.max(0,a[z].h-100),k=!1;else try{hE(oe,v,"req"+$+"_")}catch(me){o&&o(oe)}}if(k){o=v.join("&");break e}}return i=i.l.splice(0,e),t.D=i,o}function l1(i){i.g||i.u||(i.Y=1,F(i.Ga,i),i.A=0)}function c1(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Fi(Ra(i.Ga,i),h1(i,i.A)),i.A++,0))}function u1(i){null!=i.B&&(Gi.clearTimeout(i.B),i.B=null)}function _E(i){i.g=new go(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var t=Ql(i.oa);Ao(t,"RID","rpc"),Ao(t,"SID",i.J),Ao(t,"CI",i.N?"0":"1"),Ao(t,"AID",i.U),pm(i,t),Ao(t,"TYPE","xmlhttp"),i.o&&i.s&&fE(t,i.o,i.s),i.K&&i.g.setTimeout(i.K);var e=i.g;i=i.la,e.K=1,e.v=Lo(Ql(t)),e.s=null,e.U=!0,Fo(e,i)}function qx(i){null!=i.v&&(Gi.clearTimeout(i.v),i.v=null)}function yE(i,t){var e=null;if(i.g==t){qx(i),u1(i),i.g=null;var o=2}else{if(!Hx(i.i,t))return;e=t.D,cE(i.i,t),o=1}if(i.I=t.N,0!=i.G)if(t.i)if(1==o){e=t.s?t.s.length:0,t=Date.now()-t.F;var a=i.C;Xs(o=pn(),new Xi(o,e,t,a)),lb(i)}else l1(i);else if(3==(a=t.o)||0==a&&0<i.I||!(1==o&&function(i,t){return!(Qw(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=t.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Fi(Ra(i.Ha,i,t),h1(i,i.C)),i.C++,0)))}(i,t)||2==o&&c1(i)))switch(e&&0<e.length&&(t=i.i,t.i=t.i.concat(e)),a){case 1:Ng(i,5);break;case 4:Ng(i,10);break;case 3:Ng(i,6);break;default:Ng(i,2)}}function h1(i,t){var e=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(e*=2),e*t}function Ng(i,t){if(i.h.info("Error code "+t),2==t){var e=null;i.j&&(e=null);var o=Ra(i.jb,i);e||(e=new Ko("//www.google.com/images/cleardot.gif"),Gi.location&&"http"==Gi.location.protocol||rl(e,"https"),Lo(e)),function(i,t){var e=new Bt;if(Gi.Image){var o=new Image;o.onload=Q_(e1,e,o,"TestLoadImage: loaded",!0,t),o.onerror=Q_(e1,e,o,"TestLoadImage: error",!1,t),o.onabort=Q_(e1,e,o,"TestLoadImage: abort",!1,t),o.ontimeout=Q_(e1,e,o,"TestLoadImage: timeout",!1,t),Gi.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else t(!1)}(e.toString(),o)}else gi(2);i.G=0,i.j&&i.j.va(t),d1(i),Lg(i)}function d1(i){i.G=0,i.I=-1,i.j&&((0!=Jw(i.i).length||0!=i.l.length)&&(i.i.i.length=0,om(i.l),i.l.length=0),i.j.ua())}function p1(i,t,e){var o=function(i){return i instanceof Ko?Ql(i):new Ko(i,void 0)}(e);if(""!=o.i)t&&Vh(o,t+"."+o.i),lu(o,o.m);else{var a=Gi.location;o=function(i,t,e,o){var a=new Ko(null,void 0);return i&&rl(a,i),t&&Vh(a,t),e&&lu(a,e),o&&(a.l=o),a}(a.protocol,t?t+"."+a.hostname:a.hostname,+a.port,e)}return i.aa&&Tg(i.aa,function(h,v){Ao(o,v,h)}),e=i.sa,(t=i.D)&&e&&Ao(o,t,e),Ao(o,"VER",i.ma),pm(i,o),o}function Zx(i,t,e){if(t&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ba(e&&i.Ba&&!i.qa?new ib({ib:!0}):i.qa)).L=i.H,t}function Mk(){}function hy(){if(_f&&!(10<=Number(zx)))throw Error("Environmental error: no available transport.")}function Zu(i,t){ga.call(this),this.g=new o1(t),this.l=i,this.h=t&&t.messageUrlParams||null,i=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(i?i["X-WebChannel-Content-Type"]=t.messageContentType:i={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(i?i["X-WebChannel-Client-Profile"]=t.ya:i={"X-WebChannel-Client-Profile":t.ya}),this.g.P=i,(i=t&&t.httpHeadersOverwriteParam)&&!gf(i)&&(this.g.o=i),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!gf(t)&&(this.g.D=t,null!==(i=this.h)&&t in i&&t in(i=this.h)&&delete i[t]),this.j=new py(this)}function Ak(i){Ls.call(this);var t=i.__sm__;if(t){e:{for(var e in t){i=e;break e}i=void 0}(this.i=i)&&(i=this.i,t=null!==t&&i in t?t[i]:void 0),this.data=t}else this.data=i}function dy(){Oo.call(this),this.status=1}function py(i){this.g=i}(si=ba.prototype).ea=function(i,t,e,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);t=t?t.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mo.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:mo),this.g.onreadystatechange=Ra(this.Fa,this);try{this.F=!0,this.g.open(t,String(i),!0),this.F=!1}catch(h){return void Sk(this,h)}i=e||"";var a=new Ec(this.headers);o&&Sc(o,function(h,v){a.set(v,h)}),o=function(i){e:{for(var t=Ck,e=i.length,o="string"==typeof i?i.split(""):i,a=0;a<e;a++)if(a in o&&t.call(void 0,o[a],a,i)){t=a;break e}t=-1}return 0>t?null:"string"==typeof i?i.charAt(t):i[t]}(a.T()),e=Gi.FormData&&i instanceof Gi.FormData,!(0<=Hv(OP,t))||o||e||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(h,v){this.g.setRequestHeader(v,h)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jx(this),0<this.B&&((this.K=function(i){return _f&&ny()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ra(this.pa,this)):this.A=Se(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){Sk(this,h)}},si.pa=function(){void 0!==im&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xs(this,"timeout"),this.abort(8))},si.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Xs(this,"complete"),Xs(this,"abort"),uy(this))},si.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uy(this,!0)),ba.Z.M.call(this)},si.Fa=function(){this.s||(this.F||this.v||this.l?pE(this):this.cb())},si.cb=function(){pE(this)},si.ba=function(){try{return 2<vf(this)?this.g.status:-1}catch(i){return-1}},si.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},si.Qa=function(i){if(this.g){var t=this.g.responseText;return i&&0==t.indexOf(i)&&(t=t.substring(i.length)),PP(t)}},si.Da=function(){return this.m},si.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(si=o1.prototype).ma=8,si.G=1,si.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(t){}},si.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var t=new go(this,this.h,i,void 0),e=this.s;if(this.P&&(e?sm(e=ey(e),this.P):e=this.P),null===this.o&&(t.H=e),this.ja)e:{for(var o=0,a=0;a<this.l.length;a++){var h=this.l[a];if(void 0===(h="__data__"in h.g&&"string"==typeof(h=h.g.__data__)?h.length:void 0))break;if(4096<(o+=h)){o=a;break e}if(4096===o||a===this.l.length-1){o=a+1;break e}}o=1e3}else o=1e3;o=gE(this,t,o),Ao(a=Ql(this.F),"RID",i),Ao(a,"CVER",22),this.D&&Ao(a,"X-HTTP-Session-Id",this.D),pm(this,a),this.o&&e&&fE(a,this.o,e),Gx(this.i,t),this.Ra&&Ao(a,"TYPE","init"),this.ja?(Ao(a,"$req",o),Ao(a,"SID","null"),t.$=!0,as(t,a,null)):as(t,a,o),this.G=2}}else 3==this.G&&(i?a1(this,i):0==this.l.length||Xw(this.i)||a1(this))},si.Ga=function(){if(this.u=null,_E(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Fi(Ra(this.bb,this),i)}},si.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gi(10),Yx(this),_E(this))},si.ab=function(){null!=this.v&&(this.v=null,Yx(this),c1(this),gi(19))},si.jb=function(i){i?(this.h.info("Successfully pinged google.com"),gi(2)):(this.h.info("Failed to ping google.com"),gi(1))},(si=Mk.prototype).xa=function(){},si.wa=function(){},si.va=function(){},si.ua=function(){},si.Oa=function(){},hy.prototype.g=function(i,t){return new Zu(i,t)},el(Zu,ga),Zu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,t=this.l,e=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),F(Ra(i.hb,i,t))),gi(0),i.W=t,i.aa=e||{},i.N=i.X,i.F=p1(i,null,i.W),lb(i)},Zu.prototype.close=function(){mE(this.g)},Zu.prototype.u=function(i){if("string"==typeof i){var t={};t.__data__=i,s1(this.g,t)}else this.v?((t={}).__data__=Sd(i),s1(this.g,t)):s1(this.g,i)},Zu.prototype.M=function(){this.g.j=null,delete this.j,mE(this.g),delete this.g,Zu.Z.M.call(this)},el(Ak,Ls),el(dy,Oo),el(py,Mk),py.prototype.xa=function(){Xs(this.g,"a")},py.prototype.wa=function(i){Xs(this.g,new Ak(i))},py.prototype.va=function(i){Xs(this.g,new dy(i))},py.prototype.ua=function(){Xs(this.g,"b")},hy.prototype.createWebChannel=hy.prototype.g,Zu.prototype.send=Zu.prototype.u,Zu.prototype.open=Zu.prototype.m,Zu.prototype.close=Zu.prototype.close,ti.NO_ERROR=0,ti.TIMEOUT=8,ti.HTTP_ERROR=6,Wr.COMPLETE="complete",ss.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",ga.prototype.listen=ga.prototype.N,ba.prototype.listenOnce=ba.prototype.O,ba.prototype.getLastError=ba.prototype.La,ba.prototype.getLastErrorCode=ba.prototype.Da,ba.prototype.getStatus=ba.prototype.ba,ba.prototype.getResponseJson=ba.prototype.Qa,ba.prototype.getResponseText=ba.prototype.ga,ba.prototype.send=ba.prototype.ea;var Xx=ti,Qx=Wr,Jx=Tn,Kx_PROXY=10,Kx_NOPROXY=11,kk=ib,cb=ss,e0=ba,cu=function(){function i(t,e){var o=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(a){return o.t(a)},this.i=function(a){return e.writeSequenceNumber(a)})}return i.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},i.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},i}();cu.o=-1;var rn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Dn=function(i){function t(e,o){var a=this;return(a=i.call(this,o)||this).code=e,a.message=o,a.name="FirebaseError",a.toString=function(){return a.name+": [code="+a.code+"]: "+a.message},a}return(0,We.ZT)(t,i),t}(Error),Wu=new bd.Yd("@firebase/firestore");function ub(){return Wu.logLevel}function Gn(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Wu.logLevel<=bd.in.DEBUG){var o=t.map(t0);Wu.debug.apply(Wu,(0,We.ev)(["Firestore (8.8.1): "+i],o))}}function xa(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Wu.logLevel<=bd.in.ERROR){var o=t.map(t0);Wu.error.apply(Wu,(0,We.ev)(["Firestore (8.8.1): "+i],o))}}function fy(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Wu.logLevel<=bd.in.WARN){var o=t.map(t0);Wu.warn.apply(Wu,(0,We.ev)(["Firestore (8.8.1): "+i],o))}}function t0(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(e){return i}}function vi(i){void 0===i&&(i="Unexpected state");var t="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+i;throw xa(t),new Error(t)}function qi(i,t){i||vi()}function Jn(i,t){return i}function bE(i){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(var o=0;o<i;o++)e[o]=Math.floor(256*Math.random());return e}var f1=function(){function i(){}return i.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,o="";o.length<20;)for(var a=bE(40),h=0;h<a.length;++h)o.length<20&&a[h]<e&&(o+=t.charAt(a[h]%t.length));return o},i}();function Mr(i,t){return i<t?-1:i>t?1:0}function fm(i,t,e){return i.length===t.length&&i.every(function(o,a){return e(o,t[a])})}function m1(i){return i+"\0"}var Mc=function(){function i(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Dn(rn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Dn(rn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Dn(rn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Dn(rn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return i.now=function(){return i.fromMillis(Date.now())},i.fromDate=function(t){return i.fromMillis(t.getTime())},i.fromMillis=function(t){var e=Math.floor(t/1e3);return new i(e,Math.floor(1e6*(t-1e3*e)))},i.prototype.toDate=function(){return new Date(this.toMillis())},i.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},i.prototype._compareTo=function(t){return this.seconds===t.seconds?Mr(this.nanoseconds,t.nanoseconds):Mr(this.seconds,t.seconds)},i.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},i.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},i.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},i.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},i}(),gr=function(){function i(t){this.timestamp=t}return i.fromTimestamp=function(t){return new i(t)},i.min=function(){return new i(new Mc(0,0))},i.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},i.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},i.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},i.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},i.prototype.toTimestamp=function(){return this.timestamp},i}();function g1(i){var t=0;for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function mm(i,t){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function _1(i){for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}var y1=function(){function i(t,e,o){void 0===e?e=0:e>t.length&&vi(),void 0===o?o=t.length-e:o>t.length-e&&vi(),this.segments=t,this.offset=e,this.len=o}return Object.defineProperty(i.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return 0===i.comparator(this,t)},i.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof i?t.forEach(function(o){e.push(o)}):e.push(t),this.construct(e)},i.prototype.limit=function(){return this.offset+this.length},i.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},i.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},i.prototype.firstSegment=function(){return this.segments[this.offset]},i.prototype.lastSegment=function(){return this.get(this.length-1)},i.prototype.get=function(t){return this.segments[this.offset+t]},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},i.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},i.prototype.forEach=function(t){for(var e=this.offset,o=this.limit();e<o;e++)t(this.segments[e])},i.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},i.comparator=function(t,e){for(var o=Math.min(t.length,e.length),a=0;a<o;a++){var h=t.get(a),v=e.get(a);if(h<v)return-1;if(h>v)return 1}return t.length<e.length?-1:t.length>e.length?1:0},i}(),to=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,We.ZT)(t,i),t.prototype.construct=function(e,o,a){return new t(e,o,a)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];for(var a=[],h=0,v=e;h<v.length;h++){var k=v[h];if(k.indexOf("//")>=0)throw new Dn(rn.INVALID_ARGUMENT,"Invalid segment ("+k+"). Paths must not contain // in them.");a.push.apply(a,k.split("/").filter(function(z){return z.length>0}))}return new t(a)},t.emptyPath=function(){return new t([])},t}(y1),NP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Td=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,We.ZT)(t,i),t.prototype.construct=function(e,o,a){return new t(e,o,a)},t.isValidIdentifier=function(e){return NP.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var o=[],a="",h=0,v=function(){if(0===a.length)throw new Dn(rn.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");o.push(a),a=""},k=!1;h<e.length;){var z=e[h];if("\\"===z){if(h+1===e.length)throw new Dn(rn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var $=e[h+1];if("\\"!==$&&"."!==$&&"`"!==$)throw new Dn(rn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=$,h+=2}else"`"===z?(k=!k,h++):"."!==z||k?(a+=z,h++):(v(),h++)}if(v(),k)throw new Dn(rn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(o)},t.emptyPath=function(){return new t([])},t}(y1),my=function(){function i(t){this.fields=t,t.sort(Td.comparator)}return i.prototype.covers=function(t){for(var e=0,o=this.fields;e<o.length;e++)if(o[e].isPrefixOf(t))return!0;return!1},i.prototype.isEqual=function(t){return fm(this.fields,t.fields,function(e,o){return e.isEqual(o)})},i}(),Jl=function(){function i(t){this.binaryString=t}return i.fromBase64String=function(t){return new i(atob(t))},i.fromUint8Array=function(t){return new i(function(e){for(var o="",a=0;a<e.length;++a)o+=String.fromCharCode(e[a]);return o}(t))},i.prototype.toBase64=function(){return btoa(this.binaryString)},i.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),o=0;o<t.length;o++)e[o]=t.charCodeAt(o);return e}(this.binaryString)},i.prototype.approximateByteSize=function(){return 2*this.binaryString.length},i.prototype.compareTo=function(t){return Mr(this.binaryString,t.binaryString)},i.prototype.isEqual=function(t){return this.binaryString===t.binaryString},i}();Jl.EMPTY_BYTE_STRING=new Jl("");var Ik=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(i){if(qi(!!i),"string"==typeof i){var t=0,e=Ik.exec(i);if(qi(!!e),e[1]){var o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}var a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Ks(i.seconds),nanos:Ks(i.nanos)}}function Ks(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function gy(i){return"string"==typeof i?Jl.fromBase64String(i):Jl.fromUint8Array(i)}function v1(i){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==i?void 0:i.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function b1(i){var t=i.mapValue.fields.__previous_value__;return v1(t)?b1(t):t}function hb(i){var t=es(i.mapValue.fields.__local_write_time__.timestampValue);return new Mc(t.seconds,t.nanos)}function gm(i){return null==i}function db(i){return 0===i&&1/i==-1/0}function Bg(i){return"number"==typeof i&&Number.isInteger(i)&&!db(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var Ai=function(){function i(t){this.path=t}return i.fromPath=function(t){return new i(to.fromString(t))},i.fromName=function(t){return new i(to.fromString(t).popFirst(5))},i.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},i.prototype.isEqual=function(t){return null!==t&&0===to.comparator(this.path,t.path)},i.prototype.toString=function(){return this.path.toString()},i.comparator=function(t,e){return to.comparator(t.path,e.path)},i.isDocumentKey=function(t){return t.length%2==0},i.fromSegments=function(t){return new i(new to(t.slice()))},i}();function zg(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?v1(i)?4:10:vi()}function Md(i,t){var a,e=zg(i);if(e!==zg(t))return!1;switch(e){case 0:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return hb(i).isEqual(hb(t));case 3:return function(o,a){if("string"==typeof o.timestampValue&&"string"==typeof a.timestampValue&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;var h=es(o.timestampValue),v=es(a.timestampValue);return h.seconds===v.seconds&&h.nanos===v.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return a=t,gy(i.bytesValue).isEqual(gy(a.bytesValue));case 7:return i.referenceValue===t.referenceValue;case 8:return function(o,a){return Ks(o.geoPointValue.latitude)===Ks(a.geoPointValue.latitude)&&Ks(o.geoPointValue.longitude)===Ks(a.geoPointValue.longitude)}(i,t);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return Ks(o.integerValue)===Ks(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){var h=Ks(o.doubleValue),v=Ks(a.doubleValue);return h===v?db(h)===db(v):isNaN(h)&&isNaN(v)}return!1}(i,t);case 9:return fm(i.arrayValue.values||[],t.arrayValue.values||[],Md);case 10:return function(o,a){var h=o.mapValue.fields||{},v=a.mapValue.fields||{};if(g1(h)!==g1(v))return!1;for(var k in h)if(h.hasOwnProperty(k)&&(void 0===v[k]||!Md(h[k],v[k])))return!1;return!0}(i,t);default:return vi()}}function pb(i,t){return void 0!==(i.values||[]).find(function(e){return Md(e,t)})}function Vg(i,t){var a,h,v,k,e=zg(i),o=zg(t);if(e!==o)return Mr(e,o);switch(e){case 0:return 0;case 1:return Mr(i.booleanValue,t.booleanValue);case 2:return h=t,(v=Ks((a=i).integerValue||a.doubleValue))<(k=Ks(h.integerValue||h.doubleValue))?-1:v>k?1:v===k?0:isNaN(v)?isNaN(k)?0:-1:1;case 3:return Pk(i.timestampValue,t.timestampValue);case 4:return Pk(hb(i),hb(t));case 5:return Mr(i.stringValue,t.stringValue);case 6:return function(a,h){var v=gy(a),k=gy(h);return v.compareTo(k)}(i.bytesValue,t.bytesValue);case 7:return function(a,h){for(var v=a.split("/"),k=h.split("/"),z=0;z<v.length&&z<k.length;z++){var $=Mr(v[z],k[z]);if(0!==$)return $}return Mr(v.length,k.length)}(i.referenceValue,t.referenceValue);case 8:return function(a,h){var v=Mr(Ks(a.latitude),Ks(h.latitude));return 0!==v?v:Mr(Ks(a.longitude),Ks(h.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(a,h){for(var v=a.values||[],k=h.values||[],z=0;z<v.length&&z<k.length;++z){var $=Vg(v[z],k[z]);if($)return $}return Mr(v.length,k.length)}(i.arrayValue,t.arrayValue);case 10:return function(a,h){var v=a.fields||{},k=Object.keys(v),z=h.fields||{},$=Object.keys(z);k.sort(),$.sort();for(var oe=0;oe<k.length&&oe<$.length;++oe){var me=Mr(k[oe],$[oe]);if(0!==me)return me;var ke=Vg(v[k[oe]],z[$[oe]]);if(0!==ke)return ke}return Mr(k.length,$.length)}(i.mapValue,t.mapValue);default:throw vi()}}function Pk(i,t){if("string"==typeof i&&"string"==typeof t&&i.length===t.length)return Mr(i,t);var e=es(i),o=es(t),a=Mr(e.seconds,o.seconds);return 0!==a?a:Mr(e.nanos,o.nanos)}function fb(i){return mb(i)}function mb(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(a=es(i.timestampValue)).seconds+","+a.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?gy(i.bytesValue).toBase64():"referenceValue"in i?Ai.fromName(i.referenceValue).toString():"geoPointValue"in i?"geo("+(t=i.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in i?function(o){for(var a="[",h=!0,v=0,k=o.values||[];v<k.length;v++)h?h=!1:a+=",",a+=mb(k[v]);return a+"]"}(i.arrayValue):"mapValue"in i?function(o){for(var a="{",h=!0,v=0,k=Object.keys(o.fields||{}).sort();v<k.length;v++){var z=k[v];h?h=!1:a+=",",a+=z+":"+mb(o.fields[z])}return a+"}"}(i.mapValue):vi();var a,t}function $u(i,t){return{referenceValue:"projects/"+i.projectId+"/databases/"+i.database+"/documents/"+t.path.canonicalString()}}function x1(i){return!!i&&"integerValue"in i}function n0(i){return!!i&&"arrayValue"in i}function Ad(i){return!!i&&"nullValue"in i}function Uh(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function uu(i){return!!i&&"mapValue"in i}function _y(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){var t={mapValue:{fields:{}}};return mm(i.mapValue.fields,function(a,h){return t.mapValue.fields[a]=_y(h)}),t}if(i.arrayValue){for(var e={arrayValue:{values:[]}},o=0;o<(i.arrayValue.values||[]).length;++o)e.arrayValue.values[o]=_y(i.arrayValue.values[o]);return e}return Object.assign({},i)}var hu=function(){function i(t){this.value=t}return i.empty=function(){return new i({mapValue:{}})},i.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,o=0;o<t.length-1;++o)if(!uu(e=(e.mapValue.fields||{})[t.get(o)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},i.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=_y(e)},i.prototype.setAll=function(t){var e=this,o=Td.emptyPath(),a={},h=[];t.forEach(function(k,z){if(!o.isImmediateParentOf(z)){var $=e.getFieldsMap(o);e.applyChanges($,a,h),a={},h=[],o=z.popLast()}k?a[z.lastSegment()]=_y(k):h.push(z.lastSegment())});var v=this.getFieldsMap(o);this.applyChanges(v,a,h)},i.prototype.delete=function(t){var e=this.field(t.popLast());uu(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},i.prototype.isEqual=function(t){return Md(this.value,t.value)},i.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var o=0;o<t.length;++o){var a=e.mapValue.fields[t.get(o)];uu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(o)]=a),e=a}return e.mapValue.fields},i.prototype.applyChanges=function(t,e,o){mm(e,function(k,z){return t[k]=z});for(var a=0,h=o;a<h.length;a++)delete t[h[a]]},i.prototype.clone=function(){return new i(_y(this.value))},i}();function xE(i){var t=[];return mm(i.fields,function(e,o){var a=new Td([e]);if(uu(o)){var h=xE(o.mapValue).fields;if(0===h.length)t.push(a);else for(var v=0,k=h;v<k.length;v++)t.push(a.child(k[v]))}else t.push(a)}),new my(t)}var Dl=function(){function i(t,e,o,a,h){this.key=t,this.documentType=e,this.version=o,this.data=a,this.documentState=h}return i.newInvalidDocument=function(t){return new i(t,0,gr.min(),hu.empty(),0)},i.newFoundDocument=function(t,e,o){return new i(t,1,e,o,0)},i.newNoDocument=function(t,e){return new i(t,2,e,hu.empty(),0)},i.newUnknownDocument=function(t,e){return new i(t,3,e,hu.empty(),2)},i.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},i.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=hu.empty(),this.documentState=0,this},i.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=hu.empty(),this.documentState=2,this},i.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},i.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(i.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),i.prototype.isValidDocument=function(){return 0!==this.documentType},i.prototype.isFoundDocument=function(){return 1===this.documentType},i.prototype.isNoDocument=function(){return 2===this.documentType},i.prototype.isUnknownDocument=function(){return 3===this.documentType},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},i.prototype.clone=function(){return new i(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},i.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},i}(),Rk=function(i,t,e,o,a,h,v){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===o&&(o=[]),void 0===a&&(a=null),void 0===h&&(h=null),void 0===v&&(v=null),this.path=i,this.collectionGroup=t,this.orderBy=e,this.filters=o,this.limit=a,this.startAt=h,this.endAt=v,this.h=null};function wE(i,t,e,o,a,h,v){return void 0===t&&(t=null),void 0===e&&(e=[]),void 0===o&&(o=[]),void 0===a&&(a=null),void 0===h&&(h=null),void 0===v&&(v=null),new Rk(i,t,e,o,a,h,v)}function Ug(i){var t=Jn(i);if(null===t.h){var e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(function(o){return(a=o).field.canonicalString()+a.op.toString()+fb(a.value);var a}).join(","),e+="|ob:",e+=t.orderBy.map(function(o){return(a=o).field.canonicalString()+a.dir;var a}).join(","),gm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=yy(t.startAt)),t.endAt&&(e+="|ub:",e+=yy(t.endAt)),t.h=e}return t.h}function _m(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<i.orderBy.length;e++)if(!ME(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(var o=0;o<i.filters.length;o++)if((a=i.filters[o]).op!==(h=t.filters[o]).op||!a.field.isEqual(h.field)||!Md(a.value,h.value))return!1;var a,h;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!S1(i.startAt,t.startAt)&&S1(i.endAt,t.endAt)}function r0(i){return Ai.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}var du=function(i){function t(e,o,a){var h=this;return(h=i.call(this)||this).field=e,h.op=o,h.value=a,h}return(0,We.ZT)(t,i),t.create=function(e,o,a){return e.isKeyField()?"in"===o||"not-in"===o?this.l(e,o,a):new Ok(e,o,a):"array-contains"===o?new Fk(e,a):"in"===o?new EE(e,a):"not-in"===o?new TE(e,a):"array-contains-any"===o?new w1(e,a):new t(e,o,a)},t.l=function(e,o,a){return"in"===o?new CE(e,a):new SE(e,a)},t.prototype.matches=function(e){var o=e.data.field(this.field);return"!="===this.op?null!==o&&this.m(Vg(o,this.value)):null!==o&&zg(this.value)===zg(o)&&this.m(Vg(o,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vi()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),Ok=function(i){function t(e,o,a){var h=this;return(h=i.call(this,e,o,a)||this).key=Ai.fromName(a.referenceValue),h}return(0,We.ZT)(t,i),t.prototype.matches=function(e){var o=Ai.comparator(e.key,this.key);return this.m(o)},t}(du),CE=function(i){function t(e,o){var a=this;return(a=i.call(this,e,"in",o)||this).keys=gb(0,o),a}return(0,We.ZT)(t,i),t.prototype.matches=function(e){return this.keys.some(function(o){return o.isEqual(e.key)})},t}(du),SE=function(i){function t(e,o){var a=this;return(a=i.call(this,e,"not-in",o)||this).keys=gb(0,o),a}return(0,We.ZT)(t,i),t.prototype.matches=function(e){return!this.keys.some(function(o){return o.isEqual(e.key)})},t}(du);function gb(i,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(o){return Ai.fromName(o.referenceValue)})}var Fk=function(i){function t(e,o){return i.call(this,e,"array-contains",o)||this}return(0,We.ZT)(t,i),t.prototype.matches=function(e){var o=e.data.field(this.field);return n0(o)&&pb(o.arrayValue,this.value)},t}(du),EE=function(i){function t(e,o){return i.call(this,e,"in",o)||this}return(0,We.ZT)(t,i),t.prototype.matches=function(e){var o=e.data.field(this.field);return null!==o&&pb(this.value.arrayValue,o)},t}(du),TE=function(i){function t(e,o){return i.call(this,e,"not-in",o)||this}return(0,We.ZT)(t,i),t.prototype.matches=function(e){if(pb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var o=e.data.field(this.field);return null!==o&&!pb(this.value.arrayValue,o)},t}(du),w1=function(i){function t(e,o){return i.call(this,e,"array-contains-any",o)||this}return(0,We.ZT)(t,i),t.prototype.matches=function(e){var o=this,a=e.data.field(this.field);return!(!n0(a)||!a.arrayValue.values)&&a.arrayValue.values.some(function(h){return pb(o.value.arrayValue,h)})},t}(du),ym=function(i,t){this.position=i,this.before=t};function yy(i){return(i.before?"b":"a")+":"+i.position.map(function(t){return fb(t)}).join(",")}var Hg=function(i,t){void 0===t&&(t="asc"),this.field=i,this.dir=t};function ME(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}function C1(i,t,e){for(var o=0,a=0;a<i.position.length;a++){var h=t[a],v=i.position[a];if(o=h.field.isKeyField()?Ai.comparator(Ai.fromName(v.referenceValue),e.key):Vg(v,e.data.field(h.field)),"desc"===h.dir&&(o*=-1),0!==o)break}return i.before?o<=0:o<0}function S1(i,t){if(null===i)return null===t;if(null===t||i.before!==t.before||i.position.length!==t.position.length)return!1;for(var e=0;e<i.position.length;e++)if(!Md(i.position[e],t.position[e]))return!1;return!0}var xp=function(i,t,e,o,a,h,v,k){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===o&&(o=[]),void 0===a&&(a=null),void 0===h&&(h="F"),void 0===v&&(v=null),void 0===k&&(k=null),this.path=i,this.collectionGroup=t,this.explicitOrderBy=e,this.filters=o,this.limit=a,this.limitType=h,this.startAt=v,this.endAt=k,this.p=null,this.T=null};function E1(i,t,e,o,a,h,v,k){return new xp(i,t,e,o,a,h,v,k)}function Gg(i){return new xp(i)}function _b(i){return!gm(i.limit)&&"F"===i.limitType}function o0(i){return!gm(i.limit)&&"L"===i.limitType}function T1(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function M1(i){for(var t=0,e=i.filters;t<e.length;t++){var o=e[t];if(o.g())return o.field}return null}function A1(i){return null!==i.collectionGroup}function vy(i){var t=Jn(i);if(null===t.p){t.p=[];var e=M1(t),o=T1(t);if(null!==e&&null===o)e.isKeyField()||t.p.push(new Hg(e)),t.p.push(new Hg(Td.keyField(),"asc"));else{for(var a=!1,h=0,v=t.explicitOrderBy;h<v.length;h++){var k=v[h];t.p.push(k),k.field.isKeyField()&&(a=!0)}if(!a){var z=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Hg(Td.keyField(),z))}}}return t.p}function Hh(i){var t=Jn(i);if(!t.T)if("F"===t.limitType)t.T=wE(t.path,t.collectionGroup,vy(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var e=[],o=0,a=vy(t);o<a.length;o++){var h=a[o];e.push(new Hg(h.field,"desc"===h.dir?"asc":"desc"))}var k=t.endAt?new ym(t.endAt.position,!t.endAt.before):null,z=t.startAt?new ym(t.startAt.position,!t.startAt.before):null;t.T=wE(t.path,t.collectionGroup,e,t.filters,t.limit,k,z)}return t.T}function AE(i,t,e){return new xp(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function yb(i,t){return _m(Hh(i),Hh(t))&&i.limitType===t.limitType}function kE(i){return Ug(Hh(i))+"|lt:"+i.limitType}function k1(i){return"Query(target="+(e=(t=Hh(i)).path.canonicalString(),null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(o){return(a=o).field.canonicalString()+" "+a.op+" "+fb(a.value);var a}).join(", ")+"]"),gm(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(o){return(a=o).field.canonicalString()+" ("+a.dir+")";var a}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+yy(t.startAt)),t.endAt&&(e+=", endAt: "+yy(t.endAt)),"Target("+e+"); limitType=")+i.limitType+")";var t,e}function vb(i,t){return t.isFoundDocument()&&(a=(o=t).key.path,null!==(e=i).collectionGroup?o.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(a):Ai.isDocumentKey(e.path)?e.path.isEqual(a):e.path.isImmediateParentOf(a))&&function(e,o){for(var a=0,h=e.explicitOrderBy;a<h.length;a++){var v=h[a];if(!v.field.isKeyField()&&null===o.data.field(v.field))return!1}return!0}(i,t)&&function(e,o){for(var a=0,h=e.filters;a<h.length;a++)if(!h[a].matches(o))return!1;return!0}(i,t)&&function(e,o){return!(e.startAt&&!C1(e.startAt,vy(e),o)||e.endAt&&C1(e.endAt,vy(e),o))}(i,t);var e,o,a}function DE(i){return function(t,e){for(var o=!1,a=0,h=vy(i);a<h.length;a++){var v=h[a],k=Lk(v,t,e);if(0!==k)return k;o=o||v.field.isKeyField()}return 0}}function Lk(i,t,e){var a,v,k,z,o=i.field.isKeyField()?Ai.comparator(t.key,e.key):(v=e,k=t.data.field(a=i.field),z=v.data.field(a),null!==k&&null!==z?Vg(k,z):vi());switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return vi()}}function IE(i,t){if(i.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:db(t)?"-0":t}}function PE(i){return{integerValue:""+i}}function RE(i,t){return Bg(t)?PE(t):IE(i,t)}var s0=function(){this._=void 0};function OE(i,t,e){return i instanceof jg?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(o=e).seconds,nanos:o.nanoseconds}}}},(a=t)&&(h.fields.__previous_value__=a),{mapValue:h}):i instanceof vm?I1(i,t):i instanceof bm?P1(i,t):function(o,a){var h=D1(o,a),v=a0(h)+a0(o.A);return x1(h)&&x1(o.A)?PE(v):IE(o.R,v)}(i,t);var o,a,h}function FE(i,t,e){return i instanceof vm?I1(i,t):i instanceof bm?P1(i,t):e}function D1(i,t){return i instanceof Yg?x1(e=t)||(o=e)&&"doubleValue"in o?t:{integerValue:0}:null;var o,e}var jg=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,We.ZT)(t,i),t}(s0),vm=function(i){function t(e){var o=this;return(o=i.call(this)||this).elements=e,o}return(0,We.ZT)(t,i),t}(s0);function I1(i,t){for(var e=l0(t),o=function(v){e.some(function(k){return Md(k,v)})||e.push(v)},a=0,h=i.elements;a<h.length;a++)o(h[a]);return{arrayValue:{values:e}}}var bm=function(i){function t(e){var o=this;return(o=i.call(this)||this).elements=e,o}return(0,We.ZT)(t,i),t}(s0);function P1(i,t){for(var e=l0(t),o=function(v){e=e.filter(function(k){return!Md(k,v)})},a=0,h=i.elements;a<h.length;a++)o(h[a]);return{arrayValue:{values:e}}}var Yg=function(i){function t(e,o){var a=this;return(a=i.call(this)||this).R=e,a.A=o,a}return(0,We.ZT)(t,i),t}(s0);function a0(i){return Ks(i.integerValue||i.doubleValue)}function l0(i){return n0(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var kd=function(i,t){this.field=i,this.transform=t},Nk=function(i,t){this.version=i,this.transformResults=t},Kl=function(){function i(t,e){this.updateTime=t,this.exists=e}return i.none=function(){return new i},i.exists=function(t){return new i(void 0,t)},i.updateTime=function(t){return new i(t)},Object.defineProperty(i.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},i}();function bf(i,t){return void 0!==i.updateTime?t.isFoundDocument()&&t.version.isEqual(i.updateTime):void 0===i.exists||i.exists===t.isFoundDocument()}var R1=function(){};function O1(i,t,e){var o,a,h,v,k;i instanceof ki?(a=t,h=e,v=(o=i).value.clone(),k=zE(o.fieldTransforms,a,h.transformResults),v.setAll(k),a.convertToFoundDocument(h.version,v).setHasCommittedMutations()):i instanceof xm?function(o,a,h){if(bf(o.precondition,a)){var v=zE(o.fieldTransforms,a,h.transformResults),k=a.data;k.setAll(BE(o)),k.setAll(v),a.convertToFoundDocument(h.version,k).setHasCommittedMutations()}else a.convertToUnknownDocument(h.version)}(i,t,e):function(o,a,h){a.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,e)}function LE(i,t,e){var a;i instanceof ki?function(o,a,h){if(bf(o.precondition,a)){var v=o.value.clone(),k=bb(o.fieldTransforms,h,a);v.setAll(k),a.convertToFoundDocument(Bk(a),v).setHasLocalMutations()}}(i,t,e):i instanceof xm?function(o,a,h){if(bf(o.precondition,a)){var v=bb(o.fieldTransforms,h,a),k=a.data;k.setAll(BE(o)),k.setAll(v),a.convertToFoundDocument(Bk(a),k).setHasLocalMutations()}}(i,t,e):bf(i.precondition,a=t)&&a.convertToNoDocument(gr.min())}function NE(i,t){for(var e=null,o=0,a=i.fieldTransforms;o<a.length;o++){var h=a[o],v=t.data.field(h.field),k=D1(h.transform,v||null);null!=k&&(null==e&&(e=hu.empty()),e.set(h.field,k))}return e||null}function F1(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&(o=t.fieldTransforms,!!(void 0===(e=i.fieldTransforms)&&void 0===o||e&&o&&fm(e,o,function(a,h){return(v=a).field.isEqual((k=h).field)&&($=k.transform,(z=v.transform)instanceof vm&&$ instanceof vm||z instanceof bm&&$ instanceof bm?fm(z.elements,$.elements,Md):z instanceof Yg&&$ instanceof Yg?Md(z.A,$.A):z instanceof jg&&$ instanceof jg);var v,k,z,$})))&&(0===i.type?i.value.isEqual(t.value):1!==i.type||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask));var e,o}function Bk(i){return i.isFoundDocument()?i.version:gr.min()}var ki=function(i){function t(e,o,a,h){void 0===h&&(h=[]);var v=this;return(v=i.call(this)||this).key=e,v.value=o,v.precondition=a,v.fieldTransforms=h,v.type=0,v}return(0,We.ZT)(t,i),t}(R1),xm=function(i){function t(e,o,a,h,v){void 0===v&&(v=[]);var k=this;return(k=i.call(this)||this).key=e,k.data=o,k.fieldMask=a,k.precondition=h,k.fieldTransforms=v,k.type=1,k}return(0,We.ZT)(t,i),t}(R1);function BE(i){var t=new Map;return i.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var o=i.data.field(e);t.set(e,o)}}),t}function zE(i,t,e){var o=new Map;qi(i.length===e.length);for(var a=0;a<e.length;a++){var h=i[a],v=h.transform,k=t.data.field(h.field);o.set(h.field,FE(v,k,e[a]))}return o}function bb(i,t,e){for(var o=new Map,a=0,h=i;a<h.length;a++){var v=h[a],k=v.transform,z=e.data.field(v.field);o.set(v.field,OE(k,z,t))}return o}var wa,kr,wm=function(i){function t(e,o){var a=this;return(a=i.call(this)||this).key=e,a.precondition=o,a.type=2,a.fieldTransforms=[],a}return(0,We.ZT)(t,i),t}(R1),gs=function(i){function t(e,o){var a=this;return(a=i.call(this)||this).key=e,a.precondition=o,a.type=3,a.fieldTransforms=[],a}return(0,We.ZT)(t,i),t}(R1),BP=function(i){this.count=i};function L1(i){switch(i){case rn.OK:return vi();case rn.CANCELLED:case rn.UNKNOWN:case rn.DEADLINE_EXCEEDED:case rn.RESOURCE_EXHAUSTED:case rn.INTERNAL:case rn.UNAVAILABLE:case rn.UNAUTHENTICATED:return!1;case rn.INVALID_ARGUMENT:case rn.NOT_FOUND:case rn.ALREADY_EXISTS:case rn.PERMISSION_DENIED:case rn.FAILED_PRECONDITION:case rn.ABORTED:case rn.OUT_OF_RANGE:case rn.UNIMPLEMENTED:case rn.DATA_LOSS:return!0;default:return vi()}}function c0(i){if(void 0===i)return xa("GRPC error has no .code"),rn.UNKNOWN;switch(i){case wa.OK:return rn.OK;case wa.CANCELLED:return rn.CANCELLED;case wa.UNKNOWN:return rn.UNKNOWN;case wa.DEADLINE_EXCEEDED:return rn.DEADLINE_EXCEEDED;case wa.RESOURCE_EXHAUSTED:return rn.RESOURCE_EXHAUSTED;case wa.INTERNAL:return rn.INTERNAL;case wa.UNAVAILABLE:return rn.UNAVAILABLE;case wa.UNAUTHENTICATED:return rn.UNAUTHENTICATED;case wa.INVALID_ARGUMENT:return rn.INVALID_ARGUMENT;case wa.NOT_FOUND:return rn.NOT_FOUND;case wa.ALREADY_EXISTS:return rn.ALREADY_EXISTS;case wa.PERMISSION_DENIED:return rn.PERMISSION_DENIED;case wa.FAILED_PRECONDITION:return rn.FAILED_PRECONDITION;case wa.ABORTED:return rn.ABORTED;case wa.OUT_OF_RANGE:return rn.OUT_OF_RANGE;case wa.UNIMPLEMENTED:return rn.UNIMPLEMENTED;case wa.DATA_LOSS:return rn.DATA_LOSS;default:return vi()}}(kr=wa||(wa={}))[kr.OK=0]="OK",kr[kr.CANCELLED=1]="CANCELLED",kr[kr.UNKNOWN=2]="UNKNOWN",kr[kr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kr[kr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kr[kr.NOT_FOUND=5]="NOT_FOUND",kr[kr.ALREADY_EXISTS=6]="ALREADY_EXISTS",kr[kr.PERMISSION_DENIED=7]="PERMISSION_DENIED",kr[kr.UNAUTHENTICATED=16]="UNAUTHENTICATED",kr[kr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kr[kr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kr[kr.ABORTED=10]="ABORTED",kr[kr.OUT_OF_RANGE=11]="OUT_OF_RANGE",kr[kr.UNIMPLEMENTED=12]="UNIMPLEMENTED",kr[kr.INTERNAL=13]="INTERNAL",kr[kr.UNAVAILABLE=14]="UNAVAILABLE",kr[kr.DATA_LOSS=15]="DATA_LOSS";var ec=function(){function i(t,e){this.comparator=t,this.root=e||xf.EMPTY}return i.prototype.insert=function(t,e){return new i(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,xf.BLACK,null,null))},i.prototype.remove=function(t){return new i(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xf.BLACK,null,null))},i.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var o=this.comparator(t,e.key);if(0===o)return e.value;o<0?e=e.left:o>0&&(e=e.right)}return null},i.prototype.indexOf=function(t){for(var e=0,o=this.root;!o.isEmpty();){var a=this.comparator(t,o.key);if(0===a)return e+o.left.size;a<0?o=o.left:(e+=o.left.size+1,o=o.right)}return-1},i.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(i.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),i.prototype.minKey=function(){return this.root.minKey()},i.prototype.maxKey=function(){return this.root.maxKey()},i.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},i.prototype.forEach=function(t){this.inorderTraversal(function(e,o){return t(e,o),!1})},i.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,o){return t.push(e+":"+o),!1}),"{"+t.join(", ")+"}"},i.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},i.prototype.getIterator=function(){return new xb(this.root,null,this.comparator,!1)},i.prototype.getIteratorFrom=function(t){return new xb(this.root,t,this.comparator,!1)},i.prototype.getReverseIterator=function(){return new xb(this.root,null,this.comparator,!0)},i.prototype.getReverseIteratorFrom=function(t){return new xb(this.root,t,this.comparator,!0)},i}(),xb=function(){function i(t,e,o,a){this.isReverse=a,this.nodeStack=[];for(var h=1;!t.isEmpty();)if(h=e?o(t.key,e):1,a&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(0===h){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return i.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},i.prototype.hasNext=function(){return this.nodeStack.length>0},i.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},i}(),xf=function(){function i(t,e,o,a,h){this.key=t,this.value=e,this.color=null!=o?o:i.RED,this.left=null!=a?a:i.EMPTY,this.right=null!=h?h:i.EMPTY,this.size=this.left.size+1+this.right.size}return i.prototype.copy=function(t,e,o,a,h){return new i(null!=t?t:this.key,null!=e?e:this.value,null!=o?o:this.color,null!=a?a:this.left,null!=h?h:this.right)},i.prototype.isEmpty=function(){return!1},i.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},i.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},i.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},i.prototype.minKey=function(){return this.min().key},i.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},i.prototype.insert=function(t,e,o){var a=this,h=o(t,a.key);return(a=h<0?a.copy(null,null,null,a.left.insert(t,e,o),null):0===h?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,o))).fixUp()},i.prototype.removeMin=function(){if(this.left.isEmpty())return i.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},i.prototype.remove=function(t,e){var o,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===e(t,a.key)){if(a.right.isEmpty())return i.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()},i.prototype.isRed=function(){return this.color},i.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},i.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},i.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},i.prototype.rotateLeft=function(){var t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},i.prototype.rotateRight=function(){var t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},i.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},i.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},i.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vi();var t=this.left.check();if(t!==this.right.check())throw vi();return t+(this.isRed()?0:1)},i}();xf.EMPTY=null,xf.RED=!0,xf.BLACK=!1,xf.EMPTY=new(function(){function i(){this.size=0}return Object.defineProperty(i.prototype,"key",{get:function(){throw vi()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){throw vi()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){throw vi()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){throw vi()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){throw vi()},enumerable:!1,configurable:!0}),i.prototype.copy=function(t,e,o,a,h){return this},i.prototype.insert=function(t,e,o){return new xf(t,e)},i.prototype.remove=function(t,e){return this},i.prototype.isEmpty=function(){return!0},i.prototype.inorderTraversal=function(t){return!1},i.prototype.reverseTraversal=function(t){return!1},i.prototype.minKey=function(){return null},i.prototype.maxKey=function(){return null},i.prototype.isRed=function(){return!1},i.prototype.checkMaxDepth=function(){return!0},i.prototype.check=function(){return 0},i}());var Ca=function(){function i(t){this.comparator=t,this.data=new ec(this.comparator)}return i.prototype.has=function(t){return null!==this.data.get(t)},i.prototype.first=function(){return this.data.minKey()},i.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(i.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(t){return this.data.indexOf(t)},i.prototype.forEach=function(t){this.data.inorderTraversal(function(e,o){return t(e),!1})},i.prototype.forEachInRange=function(t,e){for(var o=this.data.getIteratorFrom(t[0]);o.hasNext();){var a=o.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}},i.prototype.forEachWhile=function(t,e){var o;for(o=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return},i.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},i.prototype.getIterator=function(){return new N1(this.data.getIterator())},i.prototype.getIteratorFrom=function(t){return new N1(this.data.getIteratorFrom(t))},i.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},i.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},i.prototype.isEmpty=function(){return this.data.isEmpty()},i.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(o){e=e.add(o)}),e},i.prototype.isEqual=function(t){if(!(t instanceof i)||this.size!==t.size)return!1;for(var e=this.data.getIterator(),o=t.data.getIterator();e.hasNext();){var a=e.getNext().key,h=o.getNext().key;if(0!==this.comparator(a,h))return!1}return!0},i.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},i.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},i.prototype.copy=function(t){var e=new i(this.comparator);return e.data=t,e},i}(),N1=function(){function i(t){this.iter=t}return i.prototype.getNext=function(){return this.iter.getNext().key},i.prototype.hasNext=function(){return this.iter.hasNext()},i}(),zk=new ec(Ai.comparator);function Gh(){return zk}var Vk=new ec(Ai.comparator);function qg(){return Vk}var Uk=new ec(Ai.comparator);function VE(){return Uk}var Hk=new Ca(Ai.comparator);function lo(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];for(var e=Hk,o=0,a=i;o<a.length;o++){var h=a[o];e=e.add(h)}return e}var UE=new Ca(Mr);function wb(){return UE}var u0=function(){function i(t,e,o,a,h){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=h}return i.createSynthesizedRemoteEventForCurrentChange=function(t,e){var o=new Map;return o.set(t,B1.createSynthesizedTargetChangeForCurrentChange(t,e)),new i(gr.min(),o,wb(),Gh(),lo())},i}(),B1=function(){function i(t,e,o,a,h){this.resumeToken=t,this.current=e,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=h}return i.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new i(Jl.EMPTY_BYTE_STRING,e,lo(),lo(),lo())},i}(),Cm=function(i,t,e,o){this.v=i,this.removedTargetIds=t,this.key=e,this.P=o},by=function(i,t){this.targetId=i,this.V=t},HE=function(i,t,e,o){void 0===e&&(e=Jl.EMPTY_BYTE_STRING),void 0===o&&(o=null),this.state=i,this.targetIds=t,this.resumeToken=e,this.cause=o},GE=function(){function i(){this.S=0,this.D=V1(),this.C=Jl.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(i.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),i.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},i.prototype.M=function(){var t=lo(),e=lo(),o=lo();return this.D.forEach(function(a,h){switch(h){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:o=o.add(a);break;default:vi()}}),new B1(this.C,this.N,t,e,o)},i.prototype.L=function(){this.F=!1,this.D=V1()},i.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},i.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},i.prototype.U=function(){this.S+=1},i.prototype.K=function(){this.S-=1},i.prototype.j=function(){this.F=!0,this.N=!0},i}(),Gk=function(){function i(t){this.W=t,this.G=new Map,this.H=Gh(),this.J=z1(),this.Y=new Ca(Mr)}return i.prototype.X=function(t){for(var e=0,o=t.v;e<o.length;e++){var a=o[e];t.P&&t.P.isFoundDocument()?this.Z(a,t.P):this.tt(a,t.key,t.P)}for(var h=0,v=t.removedTargetIds;h<v.length;h++)this.tt(a=v[h],t.key,t.P)},i.prototype.et=function(t){var e=this;this.forEachTarget(t,function(o){var a=e.nt(o);switch(t.state){case 0:e.st(o)&&a.O(t.resumeToken);break;case 1:a.K(),a.k||a.L(),a.O(t.resumeToken);break;case 2:a.K(),a.k||e.removeTarget(o);break;case 3:e.st(o)&&(a.j(),a.O(t.resumeToken));break;case 4:e.st(o)&&(e.it(o),a.O(t.resumeToken));break;default:vi()}})},i.prototype.forEachTarget=function(t,e){var o=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(a,h){o.st(h)&&e(h)})},i.prototype.rt=function(t){var e=t.targetId,o=t.V.count,a=this.ot(e);if(a){var h=a.target;if(r0(h))if(0===o){var v=new Ai(h.path);this.tt(e,v,Dl.newNoDocument(v,gr.min()))}else qi(1===o);else this.ct(e)!==o&&(this.it(e),this.Y=this.Y.add(e))}},i.prototype.ut=function(t){var e=this,o=new Map;this.G.forEach(function(v,k){var z=e.ot(k);if(z){if(v.current&&r0(z.target)){var $=new Ai(z.target.path);null!==e.H.get($)||e.at(k,$)||e.tt(k,$,Dl.newNoDocument($,t))}v.$&&(o.set(k,v.M()),v.L())}});var a=lo();this.J.forEach(function(v,k){var z=!0;k.forEachWhile(function($){var oe=e.ot($);return!oe||2===oe.purpose||(z=!1,!1)}),z&&(a=a.add(v))});var h=new u0(t,o,this.Y,this.H,a);return this.H=Gh(),this.J=z1(),this.Y=new Ca(Mr),h},i.prototype.Z=function(t,e){if(this.st(t)){var o=this.at(t,e.key)?2:0;this.nt(t).B(e.key,o),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},i.prototype.tt=function(t,e,o){if(this.st(t)){var a=this.nt(t);this.at(t,e)?a.B(e,1):a.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),o&&(this.H=this.H.insert(e,o))}},i.prototype.removeTarget=function(t){this.G.delete(t)},i.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},i.prototype.U=function(t){this.nt(t).U()},i.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new GE,this.G.set(t,e)),e},i.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ca(Mr),this.J=this.J.insert(t,e)),e},i.prototype.st=function(t){var e=null!==this.ot(t);return e||Gn("WatchChangeAggregator","Detected inactive target",t),e},i.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},i.prototype.it=function(t){var e=this;this.G.set(t,new GE),this.W.getRemoteKeysForTarget(t).forEach(function(o){e.tt(t,o,null)})},i.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},i}();function z1(){return new ec(Ai.comparator)}function V1(){return new ec(Ai.comparator)}var jE={asc:"ASCENDING",desc:"DESCENDING"},jk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YE=function(i,t){this.databaseId=i,this.I=t};function Cb(i,t){return i.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function qE(i,t){return i.I?t.toBase64():t.toUint8Array()}function zP(i,t){return Cb(i,t.toTimestamp())}function Il(i){return qi(!!i),gr.fromTimestamp((e=es(i),new Mc(e.seconds,e.nanos)));var e}function ZE(i,t){return(e=i,new to(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Yk(i){var t=to.fromString(i);return qi(rT(t)),t}function xy(i,t){return ZE(i.databaseId,t.path)}function Xu(i,t){var e=Yk(t);if(e.get(1)!==i.databaseId.projectId)throw new Dn(rn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new Dn(rn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new Ai(Cy(e))}function U1(i,t){return ZE(i.databaseId,t)}function WE(i){var t=Yk(i);return 4===t.length?to.emptyPath():Cy(t)}function wy(i){return new to(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Cy(i){return qi(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function $E(i,t,e){return{name:xy(i,t),fields:e.value.mapValue.fields}}function XE(i,t,e){var o=Xu(i,t.name),a=Il(t.updateTime),h=new hu({mapValue:{fields:t.fields}}),v=Dl.newFoundDocument(o,a,h);return e&&v.setHasCommittedMutations(),e?v.setHasCommittedMutations():v}function h0(i,t){var e,a;if(t instanceof ki)e={update:$E(i,t.key,t.value)};else if(t instanceof wm)e={delete:xy(i,t.key)};else if(t instanceof xm)e={update:$E(i,t.key,t.data),updateMask:G1(t.fieldMask)};else{if(!(t instanceof gs))return vi();e={verify:xy(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(function(o){return function(a,h){var v=h.transform;if(v instanceof jg)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof vm)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof bm)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Yg)return{fieldPath:h.field.canonicalString(),increment:v.A};throw vi()}(0,o)})),t.precondition.isNone||(e.currentDocument=void 0!==(a=t.precondition).updateTime?{updateTime:zP(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:vi()),e}function QE(i,t){var $,e=t.currentDocument?void 0!==($=t.currentDocument).updateTime?Kl.updateTime(Il($.updateTime)):void 0!==$.exists?Kl.exists($.exists):Kl.none():Kl.none(),o=t.updateTransforms?t.updateTransforms.map(function($){return function(oe,me){var ke=null;"setToServerValue"in me?(qi("REQUEST_TIME"===me.setToServerValue),ke=new jg):"appendMissingElements"in me?ke=new vm(me.appendMissingElements.values||[]):"removeAllFromArray"in me?ke=new bm(me.removeAllFromArray.values||[]):"increment"in me?ke=new Yg(oe,me.increment):vi();var ct=Td.fromServerFormat(me.fieldPath);return new kd(ct,ke)}(i,$)}):[];if(t.update){var a=Xu(i,t.update.name),h=new hu({mapValue:{fields:t.update.fields}});if(t.updateMask){var v=function($){return new my(($.fieldPaths||[]).map(function(me){return Td.fromServerFormat(me)}))}(t.updateMask);return new xm(a,h,v,e,o)}return new ki(a,h,e,o)}if(t.delete){var k=Xu(i,t.delete);return new wm(k,e)}if(t.verify){var z=Xu(i,t.verify);return new gs(z,e)}return vi()}function JE(i,t){return{documents:[U1(i,t.path)]}}function H1(i,t){var e={structuredQuery:{}},o=t.path;null!==t.collectionGroup?(e.parent=U1(i,o),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=U1(i,o.popLast()),e.structuredQuery.from=[{collectionId:o.lastSegment()}]);var a=function(k){if(0!==k.length){var z=k.map(function($){return function(oe){if("=="===oe.op){if(Uh(oe.value))return{unaryFilter:{field:Wg(oe.field),op:"IS_NAN"}};if(Ad(oe.value))return{unaryFilter:{field:Wg(oe.field),op:"IS_NULL"}}}else if("!="===oe.op){if(Uh(oe.value))return{unaryFilter:{field:Wg(oe.field),op:"IS_NOT_NAN"}};if(Ad(oe.value))return{unaryFilter:{field:Wg(oe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wg(oe.field),op:qk(oe.op),value:oe.value}}}($)});return 1===z.length?z[0]:{compositeFilter:{op:"AND",filters:z}}}}(t.filters);a&&(e.structuredQuery.where=a);var h=function(k){if(0!==k.length)return k.map(function(z){return{field:Wg(($=z).field),direction:nT($.dir)};var $})}(t.orderBy);h&&(e.structuredQuery.orderBy=h);var z,v=(z=t.limit,i.I||gm(z)?z:{value:z});return null!==v&&(e.structuredQuery.limit=v),t.startAt&&(e.structuredQuery.startAt=Zg(t.startAt)),t.endAt&&(e.structuredQuery.endAt=Zg(t.endAt)),e}function KE(i){var t=WE(i.parent),e=i.structuredQuery,o=e.from?e.from.length:0,a=null;if(o>0){qi(1===o);var h=e.from[0];h.allDescendants?a=h.collectionId:t=t.child(h.collectionId)}var v=[];e.where&&(v=eT(e.where));var k=[];e.orderBy&&(k=e.orderBy.map(function(me){return new Hg(Sy((ke=me).field),function(Fe){switch(Fe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ke.direction));var ke}));var me,ke,z=null;e.limit&&(z=gm(ke="object"==typeof(me=e.limit)?me.value:me)?null:ke);var $=null;e.startAt&&($=tT(e.startAt));var oe=null;return e.endAt&&(oe=tT(e.endAt)),E1(t,a,k,v,z,"F",$,oe)}function eT(i){return i?void 0!==i.unaryFilter?[Zk(i)]:void 0!==i.fieldFilter?[iT(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(function(t){return eT(t)}).reduce(function(t,e){return t.concat(e)}):vi():[]}function Zg(i){return{before:i.before,values:i.position}}function tT(i){return new ym(i.values||[],!!i.before)}function nT(i){return jE[i]}function qk(i){return jk[i]}function Wg(i){return{fieldPath:i.canonicalString()}}function Sy(i){return Td.fromServerFormat(i.fieldPath)}function iT(i){return du.create(Sy(i.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return vi()}}(i.fieldFilter.op),i.fieldFilter.value)}function Zk(i){switch(i.unaryFilter.op){case"IS_NAN":var t=Sy(i.unaryFilter.field);return du.create(t,"==",{doubleValue:NaN});case"IS_NULL":var e=Sy(i.unaryFilter.field);return du.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var o=Sy(i.unaryFilter.field);return du.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=Sy(i.unaryFilter.field);return du.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return vi()}}function G1(i){var t=[];return i.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function rT(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function jh(i){for(var t="",e=0;e<i.length;e++)t.length>0&&(t=sT(t)),t=oT(i.get(e),t);return sT(t)}function oT(i,t){for(var e=t,o=i.length,a=0;a<o;a++){var h=i.charAt(a);switch(h){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=h}}return e}function sT(i){return i+"\x01\x01"}function wf(i){var t=i.length;if(qi(t>=2),2===t)return qi("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),to.emptyPath();for(var e=t-2,o=[],a="",h=0;h<t;){var v=i.indexOf("\x01",h);switch((v<0||v>e)&&vi(),i.charAt(v+1)){case"\x01":var k=i.substring(h,v),z=void 0;0===a.length?z=k:(z=a+=k,a=""),o.push(z);break;case"\x10":a+=i.substring(h,v),a+="\0";break;case"\x11":a+=i.substring(h,v+1);break;default:vi()}h=v+2}return new to(o)}var Wk=function(i,t){this.seconds=i,this.nanoseconds=t},Ac=function(i,t,e){this.ownerId=i,this.allowTabSynchronization=t,this.leaseTimestampMs=e};Ac.store="owner",Ac.key="owner";var Sm=function(i,t,e){this.userId=i,this.lastAcknowledgedBatchId=t,this.lastStreamToken=e};Sm.store="mutationQueues",Sm.keyPath="userId";var ts=function(i,t,e,o,a){this.userId=i,this.batchId=t,this.localWriteTimeMs=e,this.baseMutations=o,this.mutations=a};ts.store="mutations",ts.keyPath="batchId",ts.userMutationsIndex="userMutationsIndex",ts.userMutationsKeyPath=["userId","batchId"];var tc=function(){function i(){}return i.prefixForUser=function(t){return[t]},i.prefixForPath=function(t,e){return[t,jh(e)]},i.key=function(t,e,o){return[t,jh(e),o]},i}();tc.store="documentMutations",tc.PLACEHOLDER=new tc;var $k=function(i,t){this.path=i,this.readTime=t},Xk=function(i,t){this.path=i,this.version=t},zs=function(i,t,e,o,a,h){this.unknownDocument=i,this.noDocument=t,this.document=e,this.hasCommittedMutations=o,this.readTime=a,this.parentPath=h};zs.store="remoteDocuments",zs.readTimeIndex="readTimeIndex",zs.readTimeIndexPath="readTime",zs.collectionReadTimeIndex="collectionReadTimeIndex",zs.collectionReadTimeIndexPath=["parentPath","readTime"];var wp=function(i){this.byteSize=i};wp.store="remoteDocumentGlobal",wp.key="remoteDocumentGlobalKey";var pu=function(i,t,e,o,a,h,v){this.targetId=i,this.canonicalId=t,this.readTime=e,this.resumeToken=o,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=h,this.query=v};pu.store="targets",pu.keyPath="targetId",pu.queryTargetsIndexName="queryTargetsIndex",pu.queryTargetsKeyPath=["canonicalId","targetId"];var Pl=function(i,t,e){this.targetId=i,this.path=t,this.sequenceNumber=e};Pl.store="targetDocuments",Pl.keyPath=["targetId","path"],Pl.documentTargetsIndex="documentTargetsIndex",Pl.documentTargetsKeyPath=["path","targetId"];var Qu=function(i,t,e,o){this.highestTargetId=i,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=e,this.targetCount=o};Qu.key="targetGlobalKey",Qu.store="targetGlobal";var Em=function(i,t){this.collectionId=i,this.parent=t};Em.store="collectionParents",Em.keyPath=["collectionId","parent"];var Cp=function(i,t,e,o){this.clientId=i,this.updateTimeMs=t,this.networkEnabled=e,this.inForeground=o};Cp.store="clientMetadata",Cp.keyPath="clientId";var Ey=function(i,t,e){this.bundleId=i,this.createTime=t,this.version=e};Ey.store="bundles",Ey.keyPath="bundleId";var Ty=function(i,t,e){this.name=i,this.readTime=t,this.bundledQuery=e};Ty.store="namedQueries",Ty.keyPath="name";var aT=(0,We.ev)((0,We.ev)([],(0,We.ev)((0,We.ev)([],(0,We.ev)((0,We.ev)([],(0,We.ev)((0,We.ev)([],[Sm.store,ts.store,tc.store,zs.store,pu.store,Ac.store,Qu.store,Pl.store]),[Cp.store])),[wp.store])),[Em.store])),[Ey.store,Ty.store]),lT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cT=function(){function i(){this.onCommittedListeners=[]}return i.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},i.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},i}(),nc=function(){var i=this;this.promise=new Promise(function(t,e){i.resolve=t,i.reject=e})},Fn=function(){function i(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(o){e.isDone=!0,e.result=o,e.nextCallback&&e.nextCallback(o)},function(o){e.isDone=!0,e.error=o,e.catchCallback&&e.catchCallback(o)})}return i.prototype.catch=function(t){return this.next(void 0,t)},i.prototype.next=function(t,e){var o=this;return this.callbackAttached&&vi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new i(function(a,h){o.nextCallback=function(v){o.wrapSuccess(t,v).next(a,h)},o.catchCallback=function(v){o.wrapFailure(e,v).next(a,h)}})},i.prototype.toPromise=function(){var t=this;return new Promise(function(e,o){t.next(e,o)})},i.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof i?e:i.resolve(e)}catch(o){return i.reject(o)}},i.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):i.resolve(e)},i.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):i.reject(e)},i.resolve=function(t){return new i(function(e,o){e(t)})},i.reject=function(t){return new i(function(e,o){o(t)})},i.waitFor=function(t){return new i(function(e,o){var a=0,h=0,v=!1;t.forEach(function(k){++a,k.next(function(){++h,v&&h===a&&e()},function(z){return o(z)})}),v=!0,h===a&&e()})},i.or=function(t){for(var e=i.resolve(!1),o=function(v){e=e.next(function(k){return k?i.resolve(k):v()})},a=0,h=t;a<h.length;a++)o(h[a]);return e},i.forEach=function(t,e){var o=this,a=[];return t.forEach(function(h,v){a.push(e.call(o,h,v))}),this.waitFor(a)},i}(),d0=function(){function i(t,e){var o=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new nc,this.transaction.oncomplete=function(){o.ft.resolve()},this.transaction.onabort=function(){e.error?o.ft.reject(new Sb(t,e.error)):o.ft.resolve()},this.transaction.onerror=function(a){var h=Z1(a.target.error);o.ft.reject(new Sb(t,h))}}return i.open=function(t,e,o,a){try{return new i(e,t.transaction(a,o))}catch(h){throw new Sb(e,h)}},Object.defineProperty(i.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),i.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Gn("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},i.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Y1(e)},i}(),$g=function(){function i(t,e,o){this.name=t,this.version=e,this.wt=o,12.2===i._t((0,Zr.z$)())&&xa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return i.delete=function(t){return Gn("SimpleDb","Removing database:",t),Qg(window.indexedDB.deleteDatabase(t)).toPromise()},i.yt=function(){if("undefined"==typeof indexedDB)return!1;if(i.gt())return!0;var t=(0,Zr.z$)(),e=i._t(t),o=0<e&&e<10,a=i.Et(t),h=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||h)},i.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},i.It=function(t,e){return t.store(e)},i._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(o)},i.Et=function(t){var e=t.match(/Android ([\d.]+)/i),o=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(o)},i.prototype.At=function(t){return(0,We.mG)(this,void 0,void 0,function(){var e,o=this;return(0,We.Jh)(this,function(a){switch(a.label){case 0:return this.db?[3,2]:(Gn("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(h,v){var k=indexedDB.open(o.name,o.version);k.onsuccess=function(z){h(z.target.result)},k.onblocked=function(){v(new Sb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},k.onerror=function(z){var $=z.target.error;v("VersionError"===$.name?new Dn(rn.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Sb(t,$))},k.onupgradeneeded=function(z){Gn("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',z.oldVersion),o.wt.Rt(z.target.result,k.transaction,z.oldVersion,o.version).next(function(){Gn("SimpleDb","Database upgrade to version "+o.version+" complete")})}})]);case 1:e.db=a.sent(),a.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(h){return o.bt(h)}),this.db)]}})})},i.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},i.prototype.runTransaction=function(t,e,o,a){return(0,We.mG)(this,void 0,void 0,function(){var h,v,k,z,$;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:h="readonly"===e,v=0,k=function(){var me,ke,Fe,je,ct;return(0,We.Jh)(this,function(kt){switch(kt.label){case 0:++v,kt.label=1;case 1:return kt.trys.push([1,4,,5]),[4,z.At(t)];case 2:return z.db=kt.sent(),me=d0.open(z.db,t,h?"readonly":"readwrite",o),ke=a(me).catch(function(Qt){return me.abort(Qt),Fn.reject(Qt)}).toPromise(),Fe={},ke.catch(function(){}),[4,me.dt];case 3:return[2,(Fe.value=(kt.sent(),ke),Fe)];case 4:return Gn("SimpleDb","Transaction failed with error:",(je=kt.sent()).message,"Retrying:",ct="FirebaseError"!==je.name&&v<3),z.close(),ct?[3,5]:[2,{value:Promise.reject(je)}];case 5:return[2]}})},z=this,oe.label=1;case 1:return[5,k()];case 2:if("object"==typeof($=oe.sent()))return[2,$.value];oe.label=3;case 3:return[3,1];case 4:return[2]}})})},i.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},i}(),j1=function(){function i(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(i.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),i.prototype.done=function(){this.Vt=!0},i.prototype.Ct=function(t){this.St=t},i.prototype.delete=function(){return Qg(this.Pt.delete())},i}(),Sb=function(i){function t(e,o){var a=this;return(a=i.call(this,rn.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+o)||this).name="IndexedDbTransactionError",a}return(0,We.ZT)(t,i),t}(Dn);function Xg(i){return"IndexedDbTransactionError"===i.name}var Y1=function(){function i(t){this.store=t}return i.prototype.put=function(t,e){var o;return void 0!==e?(Gn("SimpleDb","PUT",this.store.name,t,e),o=this.store.put(e,t)):(Gn("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),Qg(o)},i.prototype.add=function(t){return Gn("SimpleDb","ADD",this.store.name,t,t),Qg(this.store.add(t))},i.prototype.get=function(t){var e=this;return Qg(this.store.get(t)).next(function(o){return void 0===o&&(o=null),Gn("SimpleDb","GET",e.store.name,t,o),o})},i.prototype.delete=function(t){return Gn("SimpleDb","DELETE",this.store.name,t),Qg(this.store.delete(t))},i.prototype.count=function(){return Gn("SimpleDb","COUNT",this.store.name),Qg(this.store.count())},i.prototype.Nt=function(t,e){var o=this.cursor(this.options(t,e)),a=[];return this.xt(o,function(h,v){a.push(v)}).next(function(){return a})},i.prototype.Ft=function(t,e){Gn("SimpleDb","DELETE ALL",this.store.name);var o=this.options(t,e);o.kt=!1;var a=this.cursor(o);return this.xt(a,function(h,v,k){return k.delete()})},i.prototype.$t=function(t,e){var o;e?o=t:(o={},e=t);var a=this.cursor(o);return this.xt(a,e)},i.prototype.Ot=function(t){var e=this.cursor({});return new Fn(function(o,a){e.onerror=function(h){var v=Z1(h.target.error);a(v)},e.onsuccess=function(h){var v=h.target.result;v?t(v.primaryKey,v.value).next(function(k){k?v.continue():o()}):o()}})},i.prototype.xt=function(t,e){var o=[];return new Fn(function(a,h){t.onerror=function(v){h(v.target.error)},t.onsuccess=function(v){var k=v.target.result;if(k){var z=new j1(k),$=e(k.primaryKey,k.value,z);if($ instanceof Fn){var oe=$.catch(function(me){return z.done(),Fn.reject(me)});o.push(oe)}z.isDone?a():null===z.Dt?k.continue():k.continue(z.Dt)}else a()}}).next(function(){return Fn.waitFor(o)})},i.prototype.options=function(t,e){var o;return void 0!==t&&("string"==typeof t?o=t:e=t),{index:o,range:e}},i.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var o=this.store.index(t.index);return t.kt?o.openKeyCursor(t.range,e):o.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},i}();function Qg(i){return new Fn(function(t,e){i.onsuccess=function(o){t(o.target.result)},i.onerror=function(o){var a=Z1(o.target.error);e(a)}})}var q1=!1;function Z1(i){var t=$g._t((0,Zr.z$)());if(t>=12.2&&t<13){var e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){var o=new Dn("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return q1||(q1=!0,setTimeout(function(){throw o},0)),o}}return i}var W1=function(i){function t(e,o){var a=this;return(a=i.call(this)||this).Mt=e,a.currentSequenceNumber=o,a}return(0,We.ZT)(t,i),t}(cT);function kc(i,t){var e=Jn(i);return $g.It(e.Mt,t)}var p0=function(){function i(t,e,o,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=o,this.mutations=a}return i.prototype.applyToRemoteDocument=function(t,e){for(var o=e.mutationResults,a=0;a<this.mutations.length;a++){var h=this.mutations[a];h.key.isEqual(t.key)&&O1(h,t,o[a])}},i.prototype.applyToLocalView=function(t){for(var e=0,o=this.baseMutations;e<o.length;e++)(v=o[e]).key.isEqual(t.key)&&LE(v,t,this.localWriteTime);for(var a=0,h=this.mutations;a<h.length;a++){var v;(v=h[a]).key.isEqual(t.key)&&LE(v,t,this.localWriteTime)}},i.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(o){var a=t.get(o.key),h=a;e.applyToLocalView(h),a.isValidDocument()||h.convertToNoDocument(gr.min())})},i.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},lo())},i.prototype.isEqual=function(t){return this.batchId===t.batchId&&fm(this.mutations,t.mutations,function(e,o){return F1(e,o)})&&fm(this.baseMutations,t.baseMutations,function(e,o){return F1(e,o)})},i}(),VP=function(){function i(t,e,o,a){this.batch=t,this.commitVersion=e,this.mutationResults=o,this.docVersions=a}return i.from=function(t,e,o){qi(t.mutations.length===o.length);for(var a=VE(),h=t.mutations,v=0;v<h.length;v++)a=a.insert(h[v].key,o[v].version);return new i(t,e,o,a)},i}(),f0=function(){function i(t,e,o,a,h,v,k){void 0===h&&(h=gr.min()),void 0===v&&(v=gr.min()),void 0===k&&(k=Jl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=k}return i.prototype.withSequenceNumber=function(t){return new i(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},i.prototype.withResumeToken=function(t,e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},i.prototype.withLastLimboFreeSnapshotVersion=function(t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},i}(),Tm=function(i){this.Lt=i};function uT(i,t){if(t.document)return XE(i.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Ai.fromSegments(t.noDocument.path),o=Ay(t.noDocument.readTime),a=Dl.newNoDocument(e,o);return t.hasCommittedMutations?a.setHasCommittedMutations():a}if(t.unknownDocument){var h=Ai.fromSegments(t.unknownDocument.path);return o=Ay(t.unknownDocument.version),Dl.newUnknownDocument(h,o)}return vi()}function m0(i,t,e){var me,ke,o=My(e),a=t.key.path.popLast().toArray();if(t.isFoundDocument()){var h={name:xy(me=i.Lt,(ke=t).key),fields:ke.data.value.mapValue.fields,updateTime:Cb(me,ke.version.toTimestamp())},v=t.hasCommittedMutations;return new zs(null,null,h,v,o,a)}if(t.isNoDocument()){var k=t.key.path.toArray(),z=Dd(t.version);return v=t.hasCommittedMutations,new zs(null,new $k(k,z),null,v,o,a)}if(t.isUnknownDocument()){var $=t.key.path.toArray(),oe=Dd(t.version);return new zs(new Xk($,oe),null,null,!0,o,a)}return vi()}function My(i){var t=i.toTimestamp();return[t.seconds,t.nanoseconds]}function hT(i){var t=new Mc(i[0],i[1]);return gr.fromTimestamp(t)}function Dd(i){var t=i.toTimestamp();return new Wk(t.seconds,t.nanoseconds)}function Ay(i){var t=new Mc(i.seconds,i.nanoseconds);return gr.fromTimestamp(t)}function Eb(i,t){for(var e=(t.baseMutations||[]).map(function(z){return QE(i.Lt,z)}),o=0;o<t.mutations.length-1;++o)o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(t.mutations[o].updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o);var v=t.mutations.map(function(z){return QE(i.Lt,z)}),k=Mc.fromMillis(t.localWriteTimeMs);return new p0(t.batchId,k,e,v)}function Tb(i){var t,e,o=Ay(i.readTime),a=void 0!==i.lastLimboFreeSnapshotVersion?Ay(i.lastLimboFreeSnapshotVersion):gr.min();return void 0!==i.query.documents?(qi(1===(e=i.query).documents.length),t=Hh(Gg(WE(e.documents[0])))):t=Hh(KE(i.query)),new f0(t,i.targetId,0,i.lastListenSequenceNumber,o,a,Jl.fromBase64String(i.resumeToken))}function Id(i,t){var e,o=Dd(t.snapshotVersion),a=Dd(t.lastLimboFreeSnapshotVersion);e=r0(t.target)?JE(i.Lt,t.target):H1(i.Lt,t.target);var h=t.resumeToken.toBase64();return new pu(t.targetId,Ug(t.target),o,h,t.sequenceNumber,a,e)}function g0(i){var t=KE({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?AE(t,t.limit,"L"):t}var UP=function(){function i(){}return i.prototype.getBundleMetadata=function(t,e){return Mb(t).get(e).next(function(o){if(o)return{id:(a=o).bundleId,createTime:Ay(a.createTime),version:a.version};var a})},i.prototype.saveBundleMetadata=function(t,e){return Mb(t).put({bundleId:(o=e).id,createTime:Dd(Il(o.createTime)),version:o.version});var o},i.prototype.getNamedQuery=function(t,e){return dT(t).get(e).next(function(o){if(o)return{name:(a=o).name,query:g0(a.bundledQuery),readTime:Ay(a.readTime)};var a})},i.prototype.saveNamedQuery=function(t,e){return dT(t).put({name:(o=e).name,readTime:Dd(Il(o.readTime)),bundledQuery:o.bundledQuery});var o},i}();function Mb(i){return kc(i,Ey.store)}function dT(i){return kc(i,Ty.store)}var Qk=function(){function i(){this.Bt=new pT}return i.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Fn.resolve()},i.prototype.getCollectionParents=function(t,e){return Fn.resolve(this.Bt.getEntries(e))},i}(),pT=function(){function i(){this.index={}}return i.prototype.add=function(t){var e=t.lastSegment(),o=t.popLast(),a=this.index[e]||new Ca(to.comparator),h=!a.has(o);return this.index[e]=a.add(o),h},i.prototype.has=function(t){var e=t.lastSegment(),o=t.popLast(),a=this.index[e];return a&&a.has(o)},i.prototype.getEntries=function(t){return(this.index[t]||new Ca(to.comparator)).toArray()},i}(),Jk=function(){function i(){this.qt=new pT}return i.prototype.addToCollectionParentIndex=function(t,e){var o=this;if(!this.qt.has(e)){var a=e.lastSegment(),h=e.popLast();t.addOnCommittedListener(function(){o.qt.add(e)});var v={collectionId:a,parent:jh(h)};return fT(t).put(v)}return Fn.resolve()},i.prototype.getCollectionParents=function(t,e){var o=[],a=IDBKeyRange.bound([e,""],[m1(e),""],!1,!0);return fT(t).Nt(a).next(function(h){for(var v=0,k=h;v<k.length;v++){var z=k[v];if(z.collectionId!==e)break;o.push(wf(z.parent))}return o})},i}();function fT(i){return kc(i,Em.store)}var mT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yh=function(){function i(t,e,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=o}return i.withCacheSize=function(t){return new i(t,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},i}();function $1(i,t,e){var o=i.store(ts.store),a=i.store(tc.store),h=[],v=IDBKeyRange.only(e.batchId),k=0,z=o.$t({range:v},function(je,ct,kt){return k++,kt.delete()});h.push(z.next(function(){qi(1===k)}));for(var $=[],oe=0,me=e.mutations;oe<me.length;oe++){var ke=me[oe],Fe=tc.key(t,ke.key.path,e.batchId);h.push(a.delete(Fe)),$.push(ke.key)}return Fn.waitFor(h).next(function(){return $})}function ky(i){if(!i)return 0;var t;if(i.document)t=i.document;else if(i.unknownDocument)t=i.unknownDocument;else{if(!i.noDocument)throw vi();t=i.noDocument}return JSON.stringify(t).length}Yh.DEFAULT_COLLECTION_PERCENTILE=10,Yh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yh.DEFAULT=new Yh(41943040,Yh.DEFAULT_COLLECTION_PERCENTILE,Yh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yh.DISABLED=new Yh(-1,0,0);var gT=function(){function i(t,e,o,a){this.userId=t,this.R=e,this.Ut=o,this.referenceDelegate=a,this.Kt={}}return i.Qt=function(t,e,o,a){return qi(""!==t.uid),new i(t.isAuthenticated()?t.uid:"",e,o,a)},i.prototype.checkEmpty=function(t){var e=!0,o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jg(t).$t({index:ts.userMutationsIndex,range:o},function(a,h,v){e=!1,v.done()}).next(function(){return e})},i.prototype.addMutationBatch=function(t,e,o,a){var h=this,v=Dy(t),k=Jg(t);return k.add({}).next(function(z){qi("number"==typeof z);for(var $=new p0(z,e,o,a),oe=function(Qt,Sn,xn){var Xn=xn.baseMutations.map(function(Qi){return h0(Qt.Lt,Qi)}),ni=xn.mutations.map(function(Qi){return h0(Qt.Lt,Qi)});return new ts(Sn,xn.batchId,xn.localWriteTime.toMillis(),Xn,ni)}(h.R,h.userId,$),me=[],ke=new Ca(function(Qt,Sn){return Mr(Qt.canonicalString(),Sn.canonicalString())}),Fe=0,je=a;Fe<je.length;Fe++){var ct=je[Fe],kt=tc.key(h.userId,ct.key.path,z);ke=ke.add(ct.key.path.popLast()),me.push(k.put(oe)),me.push(v.put(kt,tc.PLACEHOLDER))}return ke.forEach(function(Qt){me.push(h.Ut.addToCollectionParentIndex(t,Qt))}),t.addOnCommittedListener(function(){h.Kt[z]=$.keys()}),Fn.waitFor(me).next(function(){return $})})},i.prototype.lookupMutationBatch=function(t,e){var o=this;return Jg(t).get(e).next(function(a){return a?(qi(a.userId===o.userId),Eb(o.R,a)):null})},i.prototype.jt=function(t,e){var o=this;return this.Kt[e]?Fn.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(a){if(a){var h=a.keys();return o.Kt[e]=h,h}return null})},i.prototype.getNextMutationBatchAfterBatchId=function(t,e){var o=this,a=e+1,h=IDBKeyRange.lowerBound([this.userId,a]),v=null;return Jg(t).$t({index:ts.userMutationsIndex,range:h},function(k,z,$){z.userId===o.userId&&(qi(z.batchId>=a),v=Eb(o.R,z)),$.done()}).next(function(){return v})},i.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),o=-1;return Jg(t).$t({index:ts.userMutationsIndex,range:e,reverse:!0},function(a,h,v){o=h.batchId,v.done()}).next(function(){return o})},i.prototype.getAllMutationBatches=function(t){var e=this,o=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jg(t).Nt(ts.userMutationsIndex,o).next(function(a){return a.map(function(h){return Eb(e.R,h)})})},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var o=this,a=tc.prefixForPath(this.userId,e.path),h=IDBKeyRange.lowerBound(a),v=[];return Dy(t).$t({range:h},function(k,z,$){var oe=k[0],ke=k[2],Fe=wf(k[1]);if(oe===o.userId&&e.path.isEqual(Fe))return Jg(t).get(ke).next(function(je){if(!je)throw vi();qi(je.userId===o.userId),v.push(Eb(o.R,je))});$.done()}).next(function(){return v})},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var o=this,a=new Ca(Mr),h=[];return e.forEach(function(v){var k=tc.prefixForPath(o.userId,v.path),z=IDBKeyRange.lowerBound(k),$=Dy(t).$t({range:z},function(oe,me,ke){var Fe=oe[0],ct=oe[2],kt=wf(oe[1]);Fe===o.userId&&v.path.isEqual(kt)?a=a.add(ct):ke.done()});h.push($)}),Fn.waitFor(h).next(function(){return o.Wt(t,a)})},i.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var o=this,a=e.path,h=a.length+1,v=tc.prefixForPath(this.userId,a),k=IDBKeyRange.lowerBound(v),z=new Ca(Mr);return Dy(t).$t({range:k},function($,oe,me){var ke=$[0],je=$[2],ct=wf($[1]);ke===o.userId&&a.isPrefixOf(ct)?ct.length===h&&(z=z.add(je)):me.done()}).next(function(){return o.Wt(t,z)})},i.prototype.Wt=function(t,e){var o=this,a=[],h=[];return e.forEach(function(v){h.push(Jg(t).get(v).next(function(k){if(null===k)throw vi();qi(k.userId===o.userId),a.push(Eb(o.R,k))}))}),Fn.waitFor(h).next(function(){return a})},i.prototype.removeMutationBatch=function(t,e){var o=this;return $1(t.Mt,this.userId,e).next(function(a){return t.addOnCommittedListener(function(){o.Gt(e.batchId)}),Fn.forEach(a,function(h){return o.referenceDelegate.markPotentiallyOrphaned(t,h)})})},i.prototype.Gt=function(t){delete this.Kt[t]},i.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(o){if(!o)return Fn.resolve();var a=IDBKeyRange.lowerBound(tc.prefixForUser(e.userId)),h=[];return Dy(t).$t({range:a},function(v,k,z){if(v[0]===e.userId){var $=wf(v[1]);h.push($)}else z.done()}).next(function(){qi(0===h.length)})})},i.prototype.containsKey=function(t,e){return _T(t,this.userId,e)},i.prototype.zt=function(t){var e=this;return yT(t).get(this.userId).next(function(o){return o||new Sm(e.userId,-1,"")})},i}();function _T(i,t,e){var o=tc.prefixForPath(t,e.path),a=o[1],h=IDBKeyRange.lowerBound(o),v=!1;return Dy(i).$t({range:h,kt:!0},function(k,z,$){k[0]===t&&k[1]===a&&(v=!0),$.done()}).next(function(){return v})}function Jg(i){return kc(i,ts.store)}function Dy(i){return kc(i,tc.store)}function yT(i){return kc(i,Sm.store)}var _0=function(){function i(t){this.Ht=t}return i.prototype.next=function(){return this.Ht+=2,this.Ht},i.Jt=function(){return new i(0)},i.Yt=function(){return new i(-1)},i}(),vT=function(){function i(t,e){this.referenceDelegate=t,this.R=e}return i.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(o){var a=new _0(o.highestTargetId);return o.highestTargetId=a.next(),e.Zt(t,o).next(function(){return o.highestTargetId})})},i.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(e){return gr.fromTimestamp(new Mc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},i.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(e){return e.highestListenSequenceNumber})},i.prototype.setTargetsMetadata=function(t,e,o){var a=this;return this.Xt(t).next(function(h){return h.highestListenSequenceNumber=e,o&&(h.lastRemoteSnapshotVersion=o.toTimestamp()),e>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=e),a.Zt(t,h)})},i.prototype.addTargetData=function(t,e){var o=this;return this.te(t,e).next(function(){return o.Xt(t).next(function(a){return a.targetCount+=1,o.ee(e,a),o.Zt(t,a)})})},i.prototype.updateTargetData=function(t,e){return this.te(t,e)},i.prototype.removeTargetData=function(t,e){var o=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Kg(t).delete(e.targetId)}).next(function(){return o.Xt(t)}).next(function(a){return qi(a.targetCount>0),a.targetCount-=1,o.Zt(t,a)})},i.prototype.removeTargets=function(t,e,o){var a=this,h=0,v=[];return Kg(t).$t(function(k,z){var $=Tb(z);$.sequenceNumber<=e&&null===o.get($.targetId)&&(h++,v.push(a.removeTargetData(t,$)))}).next(function(){return Fn.waitFor(v)}).next(function(){return h})},i.prototype.forEachTarget=function(t,e){return Kg(t).$t(function(o,a){var h=Tb(a);e(h)})},i.prototype.Xt=function(t){return X1(t).get(Qu.key).next(function(e){return qi(null!==e),e})},i.prototype.Zt=function(t,e){return X1(t).put(Qu.key,e)},i.prototype.te=function(t,e){return Kg(t).put(Id(this.R,e))},i.prototype.ee=function(t,e){var o=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,o=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,o=!0),o},i.prototype.getTargetCount=function(t){return this.Xt(t).next(function(e){return e.targetCount})},i.prototype.getTargetData=function(t,e){var o=Ug(e),a=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]),h=null;return Kg(t).$t({range:a,index:pu.queryTargetsIndexName},function(v,k,z){var $=Tb(k);_m(e,$.target)&&(h=$,z.done())}).next(function(){return h})},i.prototype.addMatchingKeys=function(t,e,o){var a=this,h=[],v=Mm(t);return e.forEach(function(k){var z=jh(k.path);h.push(v.put(new Pl(o,z))),h.push(a.referenceDelegate.addReference(t,o,k))}),Fn.waitFor(h)},i.prototype.removeMatchingKeys=function(t,e,o){var a=this,h=Mm(t);return Fn.forEach(e,function(v){var k=jh(v.path);return Fn.waitFor([h.delete([o,k]),a.referenceDelegate.removeReference(t,o,v)])})},i.prototype.removeMatchingKeysForTargetId=function(t,e){var o=Mm(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return o.delete(a)},i.prototype.getMatchingKeysForTargetId=function(t,e){var o=IDBKeyRange.bound([e],[e+1],!1,!0),a=Mm(t),h=lo();return a.$t({range:o,kt:!0},function(v,k,z){var $=wf(v[1]),oe=new Ai($);h=h.add(oe)}).next(function(){return h})},i.prototype.containsKey=function(t,e){var o=jh(e.path),a=IDBKeyRange.bound([o],[m1(o)],!1,!0),h=0;return Mm(t).$t({index:Pl.documentTargetsIndex,kt:!0,range:a},function(v,k,z){0!==v[0]&&(h++,z.done())}).next(function(){return h>0})},i.prototype.lt=function(t,e){return Kg(t).get(e).next(function(o){return o?Tb(o):null})},i}();function Kg(i){return kc(i,pu.store)}function X1(i){return kc(i,Qu.store)}function Mm(i){return kc(i,Pl.store)}function e_(i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){if(i.code!==rn.FAILED_PRECONDITION||i.message!==lT)throw i;return Gn("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Q1(i,t){var o=i[1],h=t[1],v=Mr(i[0],t[0]);return 0===v?Mr(o,h):v}var y0=function(){function i(t){this.ne=t,this.buffer=new Ca(Q1),this.se=0}return i.prototype.ie=function(){return++this.se},i.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var o=this.buffer.last();Q1(e,o)<0&&(this.buffer=this.buffer.delete(o).add(e))}},Object.defineProperty(i.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),i}(),Kk=function(){function i(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return i.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},i.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(i.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),i.prototype.ue=function(t){var e=this,o=this.oe?3e5:6e4;Gn("LruGarbageCollector","Garbage collection scheduled in "+o+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,function(){return(0,We.mG)(e,void 0,void 0,function(){var a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:this.ce=null,this.oe=!0,h.label=1;case 1:return h.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return h.sent(),[3,7];case 3:return Xg(a=h.sent())?(Gn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a),[3,6]):[3,4];case 4:return[4,e_(a)];case 5:h.sent(),h.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return h.sent(),[2]}})})})},i}(),bT=function(){function i(t,e){this.ae=t,this.params=e}return i.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(o){return Math.floor(e/100*o)})},i.prototype.nthSequenceNumber=function(t,e){var o=this;if(0===e)return Fn.resolve(cu.o);var a=new y0(e);return this.ae.forEachTarget(t,function(h){return a.re(h.sequenceNumber)}).next(function(){return o.ae.le(t,function(h){return a.re(h)})}).next(function(){return a.maxValue})},i.prototype.removeTargets=function(t,e,o){return this.ae.removeTargets(t,e,o)},i.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},i.prototype.collect=function(t,e){var o=this;return-1===this.params.cacheSizeCollectionThreshold?(Gn("LruGarbageCollector","Garbage collection skipped; disabled"),Fn.resolve(mT)):this.getCacheSize(t).next(function(a){return a<o.params.cacheSizeCollectionThreshold?(Gn("LruGarbageCollector","Garbage collection skipped; Cache size "+a+" is lower than threshold "+o.params.cacheSizeCollectionThreshold),mT):o.fe(t,e)})},i.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},i.prototype.fe=function(t,e){var o,a,h,v,k,z,$,oe=this,me=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(ke){return ke>oe.params.maximumSequenceNumbersToCollect?(Gn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+oe.params.maximumSequenceNumbersToCollect+" from "+ke),a=oe.params.maximumSequenceNumbersToCollect):a=ke,v=Date.now(),oe.nthSequenceNumber(t,a)}).next(function(ke){return o=ke,k=Date.now(),oe.removeTargets(t,o,e)}).next(function(ke){return h=ke,z=Date.now(),oe.removeOrphanedDocuments(t,o)}).next(function(ke){return $=Date.now(),ub()<=bd.in.DEBUG&&Gn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(v-me)+"ms\n\tDetermined least recently used "+a+" in "+(k-v)+"ms\n\tRemoved "+h+" targets in "+(z-k)+"ms\n\tRemoved "+ke+" documents in "+($-z)+"ms\nTotal Duration: "+($-me)+"ms"),Fn.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:h,documentsRemoved:ke})})},i}(),v0=function(){function i(t,e){this.db=t,this.garbageCollector=new bT(this,e)}return i.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(o){return e.next(function(a){return o+a})})},i.prototype.de=function(t){var e=0;return this.le(t,function(o){e++}).next(function(){return e})},i.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},i.prototype.le=function(t,e){return this.we(t,function(o,a){return e(a)})},i.prototype.addReference=function(t,e,o){return t_(t,o)},i.prototype.removeReference=function(t,e,o){return t_(t,o)},i.prototype.removeTargets=function(t,e,o){return this.db.getTargetCache().removeTargets(t,e,o)},i.prototype.markPotentiallyOrphaned=function(t,e){return t_(t,e)},i.prototype._e=function(t,e){return a=e,h=!1,yT(o=t).Ot(function(v){return _T(o,v,a).next(function(k){return k&&(h=!0),Fn.resolve(!k)})}).next(function(){return h});var o,a,h},i.prototype.removeOrphanedDocuments=function(t,e){var o=this,a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[],v=0;return this.we(t,function(k,z){if(z<=e){var $=o._e(t,k).next(function(oe){if(!oe)return v++,a.getEntry(t,k).next(function(){return a.removeEntry(k),Mm(t).delete([0,jh(k.path)])})});h.push($)}}).next(function(){return Fn.waitFor(h)}).next(function(){return a.apply(t)}).next(function(){return v})},i.prototype.removeTarget=function(t,e){var o=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)},i.prototype.updateLimboDocument=function(t,e){return t_(t,e)},i.prototype.we=function(t,e){var o,a=Mm(t),h=cu.o;return a.$t({index:Pl.documentTargetsIndex},function(v,k){var $=k.path,oe=k.sequenceNumber;0===v[0]?(h!==cu.o&&e(new Ai(wf(o)),h),h=oe,o=$):h=cu.o}).next(function(){h!==cu.o&&e(new Ai(wf(o)),h)})},i.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},i}();function t_(i,t){return Mm(i).put((o=i.currentSequenceNumber,new Pl(0,jh(t.path),o)));var o}var Sp=function(){function i(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return i.prototype.get=function(t){var e=this.mapKeyFn(t),o=this.inner[e];if(void 0!==o)for(var a=0,h=o;a<h.length;a++){var v=h[a],z=v[1];if(this.equalsFn(v[0],t))return z}},i.prototype.has=function(t){return void 0!==this.get(t)},i.prototype.set=function(t,e){var o=this.mapKeyFn(t),a=this.inner[o];if(void 0!==a){for(var h=0;h<a.length;h++)if(this.equalsFn(a[h][0],t))return void(a[h]=[t,e]);a.push([t,e])}else this.inner[o]=[[t,e]]},i.prototype.delete=function(t){var e=this.mapKeyFn(t),o=this.inner[e];if(void 0===o)return!1;for(var a=0;a<o.length;a++)if(this.equalsFn(o[a][0],t))return 1===o.length?delete this.inner[e]:o.splice(a,1),!0;return!1},i.prototype.forEach=function(t){mm(this.inner,function(e,o){for(var a=0,h=o;a<h.length;a++){var v=h[a];t(v[0],v[1])}})},i.prototype.isEmpty=function(){return _1(this.inner)},i}(),xT=function(){function i(){this.changes=new Sp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return i.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:gr.min()},i.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},i.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Dl.newInvalidDocument(t),readTime:e})},i.prototype.getEntry=function(t,e){this.assertNotApplied();var o=this.changes.get(e);return void 0!==o?Fn.resolve(o.document):this.getFromCache(t,e)},i.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},i.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},i.prototype.assertNotApplied=function(){},i}(),eD=function(){function i(t,e){this.R=t,this.Ut=e}return i.prototype.addEntry=function(t,e,o){return Am(t).put(b0(e),o)},i.prototype.removeEntry=function(t,e){var o=Am(t),a=b0(e);return o.delete(a)},i.prototype.updateMetadata=function(t,e){var o=this;return this.getMetadata(t).next(function(a){return a.byteSize+=e,o.me(t,a)})},i.prototype.getEntry=function(t,e){var o=this;return Am(t).get(b0(e)).next(function(a){return o.ye(e,a)})},i.prototype.ge=function(t,e){var o=this;return Am(t).get(b0(e)).next(function(a){return{document:o.ye(e,a),size:ky(a)}})},i.prototype.getEntries=function(t,e){var o=this,a=Gh();return this.pe(t,e,function(h,v){var k=o.ye(h,v);a=a.insert(h,k)}).next(function(){return a})},i.prototype.Ee=function(t,e){var o=this,a=Gh(),h=new ec(Ai.comparator);return this.pe(t,e,function(v,k){var z=o.ye(v,k);a=a.insert(v,z),h=h.insert(v,ky(k))}).next(function(){return{documents:a,Te:h}})},i.prototype.pe=function(t,e,o){if(e.isEmpty())return Fn.resolve();var a=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),h=e.getIterator(),v=h.getNext();return Am(t).$t({range:a},function(k,z,$){for(var oe=Ai.fromSegments(k);v&&Ai.comparator(v,oe)<0;)o(v,null),v=h.getNext();v&&v.isEqual(oe)&&(o(v,z),v=h.hasNext()?h.getNext():null),v?$.Ct(v.path.toArray()):$.done()}).next(function(){for(;v;)o(v,null),v=h.hasNext()?h.getNext():null})},i.prototype.getDocumentsMatchingQuery=function(t,e,o){var a=this,h=Gh(),v=e.path.length+1,k={};if(o.isEqual(gr.min())){var z=e.path.toArray();k.range=IDBKeyRange.lowerBound(z)}else{var $=e.path.toArray(),oe=My(o);k.range=IDBKeyRange.lowerBound([$,oe],!0),k.index=zs.collectionReadTimeIndex}return Am(t).$t(k,function(me,ke,Fe){if(me.length===v){var je=uT(a.R,ke);e.path.isPrefixOf(je.key.path)?vb(e,je)&&(h=h.insert(je.key,je)):Fe.done()}}).next(function(){return h})},i.prototype.newChangeBuffer=function(t){return new HP(this,!!t&&t.trackRemovals)},i.prototype.getSize=function(t){return this.getMetadata(t).next(function(e){return e.byteSize})},i.prototype.getMetadata=function(t){return wT(t).get(wp.key).next(function(e){return qi(!!e),e})},i.prototype.me=function(t,e){return wT(t).put(wp.key,e)},i.prototype.ye=function(t,e){if(e){var o=uT(this.R,e);if(!o.isNoDocument()||!o.version.isEqual(gr.min()))return o}return Dl.newInvalidDocument(t)},i}(),HP=function(i){function t(e,o){var a=this;return(a=i.call(this)||this).Ie=e,a.trackRemovals=o,a.Ae=new Sp(function(h){return h.toString()},function(h,v){return h.isEqual(v)}),a}return(0,We.ZT)(t,i),t.prototype.applyChanges=function(e){var o=this,a=[],h=0,v=new Ca(function(k,z){return Mr(k.canonicalString(),z.canonicalString())});return this.changes.forEach(function(k,z){var $=o.Ae.get(k);if(z.document.isValidDocument()){var oe=m0(o.Ie.R,z.document,o.getReadTime(k));v=v.add(k.path.popLast());var me=ky(oe);h+=me-$,a.push(o.Ie.addEntry(e,k,oe))}else if(h-=$,o.trackRemovals){var ke=m0(o.Ie.R,Dl.newNoDocument(k,gr.min()),o.getReadTime(k));a.push(o.Ie.addEntry(e,k,ke))}else a.push(o.Ie.removeEntry(e,k))}),v.forEach(function(k){a.push(o.Ie.Ut.addToCollectionParentIndex(e,k))}),a.push(this.Ie.updateMetadata(e,h)),Fn.waitFor(a)},t.prototype.getFromCache=function(e,o){var a=this;return this.Ie.ge(e,o).next(function(h){return a.Ae.set(o,h.size),h.document})},t.prototype.getAllFromCache=function(e,o){var a=this;return this.Ie.Ee(e,o).next(function(h){var v=h.documents;return h.Te.forEach(function(k,z){a.Ae.set(k,z)}),v})},t}(xT);function wT(i){return kc(i,wp.store)}function Am(i){return kc(i,zs.store)}function b0(i){return i.path.toArray()}var tD=function(){function i(t){this.R=t}return i.prototype.Rt=function(t,e,o,a){var h=this;qi(o<a&&o>=0&&a<=11);var z,v=new d0("createOrUpgrade",e);o<1&&a>=1&&(t.createObjectStore(Ac.store),(z=t).createObjectStore(Sm.store,{keyPath:Sm.keyPath}),z.createObjectStore(ts.store,{keyPath:ts.keyPath,autoIncrement:!0}).createIndex(ts.userMutationsIndex,ts.userMutationsKeyPath,{unique:!0}),z.createObjectStore(tc.store),CT(t),function(z){z.createObjectStore(zs.store)}(t));var k=Fn.resolve();return o<3&&a>=3&&(0!==o&&(function(z){z.deleteObjectStore(Pl.store),z.deleteObjectStore(pu.store),z.deleteObjectStore(Qu.store)}(t),CT(t)),k=k.next(function(){return function(z){var $=z.store(Qu.store),oe=new Qu(0,0,gr.min().toTimestamp(),0);return $.put(Qu.key,oe)}(v)})),o<4&&a>=4&&(0!==o&&(k=k.next(function(){return function(z,$){return $.store(ts.store).Nt().next(function(oe){z.deleteObjectStore(ts.store),z.createObjectStore(ts.store,{keyPath:ts.keyPath,autoIncrement:!0}).createIndex(ts.userMutationsIndex,ts.userMutationsKeyPath,{unique:!0});var me=$.store(ts.store),ke=oe.map(function(Fe){return me.put(Fe)});return Fn.waitFor(ke)})}(t,v)})),k=k.next(function(){!function(z){z.createObjectStore(Cp.store,{keyPath:Cp.keyPath})}(t)})),o<5&&a>=5&&(k=k.next(function(){return h.Re(v)})),o<6&&a>=6&&(k=k.next(function(){return function(z){z.createObjectStore(wp.store)}(t),h.be(v)})),o<7&&a>=7&&(k=k.next(function(){return h.ve(v)})),o<8&&a>=8&&(k=k.next(function(){return h.Pe(t,v)})),o<9&&a>=9&&(k=k.next(function(){(function(z){z.objectStoreNames.contains("remoteDocumentChanges")&&z.deleteObjectStore("remoteDocumentChanges")})(t),function(z){var $=z.objectStore(zs.store);$.createIndex(zs.readTimeIndex,zs.readTimeIndexPath,{unique:!1}),$.createIndex(zs.collectionReadTimeIndex,zs.collectionReadTimeIndexPath,{unique:!1})}(e)})),o<10&&a>=10&&(k=k.next(function(){return h.Ve(v)})),o<11&&a>=11&&(k=k.next(function(){(function(z){z.createObjectStore(Ey.store,{keyPath:Ey.keyPath})})(t),function(z){z.createObjectStore(Ty.store,{keyPath:Ty.keyPath})}(t)})),k},i.prototype.be=function(t){var e=0;return t.store(zs.store).$t(function(o,a){e+=ky(a)}).next(function(){var o=new wp(e);return t.store(wp.store).put(wp.key,o)})},i.prototype.Re=function(t){var e=this,o=t.store(Sm.store),a=t.store(ts.store);return o.Nt().next(function(h){return Fn.forEach(h,function(v){var k=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return a.Nt(ts.userMutationsIndex,k).next(function(z){return Fn.forEach(z,function($){qi($.userId===v.userId);var oe=Eb(e.R,$);return $1(t,v.userId,oe).next(function(){})})})})})},i.prototype.ve=function(t){var e=t.store(Pl.store),o=t.store(zs.store);return t.store(Qu.store).get(Qu.key).next(function(a){var h=[];return o.$t(function(v,k){var z=new to(v),$=[0,jh(z)];h.push(e.get($).next(function(oe){return oe?Fn.resolve():e.put(new Pl(0,jh(z),a.highestListenSequenceNumber))}))}).next(function(){return Fn.waitFor(h)})})},i.prototype.Pe=function(t,e){t.createObjectStore(Em.store,{keyPath:Em.keyPath});var o=e.store(Em.store),a=new pT,h=function(v){if(a.add(v)){var k=v.lastSegment(),z=v.popLast();return o.put({collectionId:k,parent:jh(z)})}};return e.store(zs.store).$t({kt:!0},function(v,k){var z=new to(v);return h(z.popLast())}).next(function(){return e.store(tc.store).$t({kt:!0},function(v,k){var $=wf(v[1]);return h($.popLast())})})},i.prototype.Ve=function(t){var e=this,o=t.store(pu.store);return o.$t(function(a,h){var v=Tb(h),k=Id(e.R,v);return o.put(k)})},i}();function CT(i){i.createObjectStore(Pl.store,{keyPath:Pl.keyPath}).createIndex(Pl.documentTargetsIndex,Pl.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(pu.store,{keyPath:pu.keyPath}).createIndex(pu.queryTargetsIndexName,pu.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Qu.store)}var J1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nD=function(){function i(t,e,o,a,h,v,k,z,$,oe){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=o,this.Se=h,this.window=v,this.document=k,this.De=$,this.Ce=oe,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(me){return Promise.resolve()},!i.yt())throw new Dn(rn.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v0(this,a),this.Le=e+"main",this.R=new Tm(z),this.Be=new $g(this.Le,11,new tD(this.R)),this.qe=new vT(this.referenceDelegate,this.R),this.Ut=new Jk,this.Ue=new eD(this.R,this.Ut),this.Ke=new UP,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===oe&&xa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return i.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Dn(rn.FAILED_PRECONDITION,J1);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new cu(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},i.prototype.He=function(t){var e=this;return this.Me=function(o){return(0,We.mG)(e,void 0,void 0,function(){return(0,We.Jh)(this,function(a){return this.started?[2,t(o)]:[2]})})},t(this.isPrimary)},i.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(o){return(0,We.mG)(e,void 0,void 0,function(){return(0,We.Jh)(this,function(a){switch(a.label){case 0:return null===o.newVersion?[4,t()]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})})},i.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,We.mG)(e,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})}))},i.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return x0(e).put(new Cp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(o){o||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(o){return t.isPrimary&&!o?t.Xe(e).next(function(){return!1}):!!o&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Xg(e))return Gn("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Gn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},i.prototype.Je=function(t){var e=this;return Ab(t).get(Ac.key).next(function(o){return Fn.resolve(e.tn(o))})},i.prototype.en=function(t){return x0(t).delete(this.clientId)},i.prototype.nn=function(){return(0,We.mG)(this,void 0,void 0,function(){var t,e,o,h=this;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(k){var z=kc(k,Cp.store);return z.Nt().next(function($){var oe=h.rn($,18e5),me=$.filter(function(ke){return-1===oe.indexOf(ke)});return Fn.forEach(me,function(ke){return z.delete(ke.clientId)}).next(function(){return me})})}).catch(function(){return[]})]);case 1:if(t=v.sent(),this.Qe)for(e=0,o=t;e<o.length;e++)this.Qe.removeItem(this.on(o[e].clientId));v.label=2;case 2:return[2]}})})},i.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},i.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},i.prototype.Ye=function(t){var e=this;return this.Ce?Fn.resolve(!0):Ab(t).get(Ac.key).next(function(o){if(null!==o&&e.sn(o.leaseTimestampMs,5e3)&&!e.cn(o.ownerId)){if(e.tn(o)&&e.networkEnabled)return!0;if(!e.tn(o)){if(!o.allowTabSynchronization)throw new Dn(rn.FAILED_PRECONDITION,J1);return!1}}return!(!e.networkEnabled||!e.inForeground)||x0(t).Nt().next(function(a){return void 0===e.rn(a,5e3).find(function(h){return!(e.clientId===h.clientId||!(!e.networkEnabled&&h.networkEnabled||!e.inForeground&&h.inForeground&&e.networkEnabled===h.networkEnabled))})})}).next(function(o){return e.isPrimary!==o&&Gn("IndexedDbPersistence","Client "+(o?"is":"is not")+" eligible for a primary lease."),o})},i.prototype.shutdown=function(){return(0,We.mG)(this,void 0,void 0,function(){var t=this;return(0,We.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ac.store,Cp.store],function(o){var a=new W1(o,cu.o);return t.Xe(a).next(function(){return t.en(a)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},i.prototype.rn=function(t,e){var o=this;return t.filter(function(a){return o.sn(a.updateTimeMs,e)&&!o.cn(a.clientId)})},i.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return x0(e).Nt().next(function(o){return t.rn(o,18e5).map(function(a){return a.clientId})})})},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.getMutationQueue=function(t){return gT.Qt(t,this.R,this.Ut,this.referenceDelegate)},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(t,e,o){var h,a=this;return Gn("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",aT,function(k){return h=new W1(k,a.Ne?a.Ne.next():cu.o),"readwrite-primary"===e?a.Je(h).next(function(z){return!!z||a.Ye(h)}).next(function(z){if(!z)throw xa("Failed to obtain primary lease for action '"+t+"'."),a.isPrimary=!1,a.Se.enqueueRetryable(function(){return a.Me(!1)}),new Dn(rn.FAILED_PRECONDITION,lT);return o(h)}).next(function(z){return a.Ze(h).next(function(){return z})}):a.dn(h).next(function(){return o(h)})}).then(function(k){return h.raiseOnCommittedEvent(),k})},i.prototype.dn=function(t){var e=this;return Ab(t).get(Ac.key).next(function(o){if(null!==o&&e.sn(o.leaseTimestampMs,5e3)&&!e.cn(o.ownerId)&&!e.tn(o)&&!(e.Ce||e.allowTabSynchronization&&o.allowTabSynchronization))throw new Dn(rn.FAILED_PRECONDITION,J1)})},i.prototype.Ze=function(t){var e=new Ac(this.clientId,this.allowTabSynchronization,Date.now());return Ab(t).put(Ac.key,e)},i.yt=function(){return $g.yt()},i.prototype.Xe=function(t){var e=this,o=Ab(t);return o.get(Ac.key).next(function(a){return e.tn(a)?(Gn("IndexedDbPersistence","Releasing primary lease."),o.delete(Ac.key)):Fn.resolve()})},i.prototype.sn=function(t,e){var o=Date.now();return!(t<o-e||t>o&&(xa("Detected an update time that is in the future: "+t+" > "+o),1))},i.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},i.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},i.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,Zr.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},i.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},i.prototype.cn=function(t){var e;try{var o=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Gn("IndexedDbPersistence","Client '"+t+"' "+(o?"is":"is not")+" zombied in LocalStorage"),o}catch(a){return xa("IndexedDbPersistence","Failed to get zombied client id.",a),!1}},i.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){xa("Failed to set zombie client id.",t)}},i.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},i.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},i}();function Ab(i){return kc(i,Ac.store)}function x0(i){return kc(i,Cp.store)}function ST(i,t){var e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+t+"/"+e+"/"}var iD=function(i,t){this.progress=i,this.wn=t},Iy=function(){function i(t,e,o){this.Ue=t,this._n=e,this.Ut=o}return i.prototype.mn=function(t,e){var o=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(a){return o.yn(t,e,a)})},i.prototype.yn=function(t,e,o){return this.Ue.getEntry(t,e).next(function(a){for(var h=0,v=o;h<v.length;h++)v[h].applyToLocalView(a);return a})},i.prototype.gn=function(t,e){t.forEach(function(o,a){for(var h=0,v=e;h<v.length;h++)v[h].applyToLocalView(a)})},i.prototype.pn=function(t,e){var o=this;return this.Ue.getEntries(t,e).next(function(a){return o.En(t,a).next(function(){return a})})},i.prototype.En=function(t,e){var o=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(a){return o.gn(e,a)})},i.prototype.getDocumentsMatchingQuery=function(t,e,o){return Ai.isDocumentKey((a=e).path)&&null===a.collectionGroup&&0===a.filters.length?this.Tn(t,e.path):A1(e)?this.In(t,e,o):this.An(t,e,o);var a},i.prototype.Tn=function(t,e){return this.mn(t,new Ai(e)).next(function(o){var a=qg();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a})},i.prototype.In=function(t,e,o){var a=this,h=e.collectionGroup,v=qg();return this.Ut.getCollectionParents(t,h).next(function(k){return Fn.forEach(k,function(z){var oe,me,$=(oe=e,me=z.child(h),new xp(me,null,oe.explicitOrderBy.slice(),oe.filters.slice(),oe.limit,oe.limitType,oe.startAt,oe.endAt));return a.An(t,$,o).next(function(oe){oe.forEach(function(me,ke){v=v.insert(me,ke)})})}).next(function(){return v})})},i.prototype.An=function(t,e,o){var a,h,v=this;return this.Ue.getDocumentsMatchingQuery(t,e,o).next(function(k){return a=k,v._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(k){return v.Rn(t,h=k,a).next(function(z){a=z;for(var $=0,oe=h;$<oe.length;$++)for(var me=oe[$],ke=0,Fe=me.mutations;ke<Fe.length;ke++){var je=Fe[ke],ct=je.key,kt=a.get(ct);null==kt&&(kt=Dl.newInvalidDocument(ct),a=a.insert(ct,kt)),LE(je,kt,me.localWriteTime),kt.isFoundDocument()||(a=a.remove(ct))}})}).next(function(){return a.forEach(function(k,z){vb(e,z)||(a=a.remove(k))}),a})},i.prototype.Rn=function(t,e,o){for(var a=lo(),h=0,v=e;h<v.length;h++)for(var k=0,z=v[h].mutations;k<z.length;k++){var $=z[k];$ instanceof xm&&null===o.get($.key)&&(a=a.add($.key))}var oe=o;return this.Ue.getEntries(t,a).next(function(me){return me.forEach(function(ke,Fe){Fe.isFoundDocument()&&(oe=oe.insert(ke,Fe))}),oe})},i}(),rD=function(){function i(t,e,o,a){this.targetId=t,this.fromCache=e,this.bn=o,this.vn=a}return i.Pn=function(t,e){for(var o=lo(),a=lo(),h=0,v=e.docChanges;h<v.length;h++){var k=v[h];switch(k.type){case 0:o=o.add(k.doc.key);break;case 1:a=a.add(k.doc.key)}}return new i(t,e.fromCache,o,a)},i}(),ET=function(){function i(){}return i.prototype.Vn=function(t){this.Sn=t},i.prototype.getDocumentsMatchingQuery=function(t,e,o,a){var v,h=this;return 0===(v=e).filters.length&&null===v.limit&&null==v.startAt&&null==v.endAt&&(0===v.explicitOrderBy.length||1===v.explicitOrderBy.length&&v.explicitOrderBy[0].field.isKeyField())||o.isEqual(gr.min())?this.Dn(t,e):this.Sn.pn(t,a).next(function(v){var k=h.Cn(e,v);return(_b(e)||o0(e))&&h.Nn(e.limitType,k,a,o)?h.Dn(t,e):(ub()<=bd.in.DEBUG&&Gn("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),k1(e)),h.Sn.getDocumentsMatchingQuery(t,e,o).next(function(z){return k.forEach(function($){z=z.insert($.key,$)}),z}))})},i.prototype.Cn=function(t,e){var o=new Ca(DE(t));return e.forEach(function(a,h){vb(t,h)&&(o=o.add(h))}),o},i.prototype.Nn=function(t,e,o,a){if(o.size!==e.size)return!0;var h="F"===t?e.last():e.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(a)>0)},i.prototype.Dn=function(t,e){return ub()<=bd.in.DEBUG&&Gn("QueryEngine","Using full collection scan to execute query:",k1(e)),this.Sn.getDocumentsMatchingQuery(t,e,gr.min())},i}(),oD=function(){function i(t,e,o,a){this.persistence=t,this.xn=e,this.R=a,this.Fn=new ec(Mr),this.kn=new Sp(function(h){return Ug(h)},_m),this.$n=gr.min(),this._n=t.getMutationQueue(o),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Iy(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return i.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(o){return t.collect(o,e.Fn)})},i}();function kb(i,t,e,o){return new oD(i,t,e,o)}function km(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return e=Jn(i),o=e._n,a=e.Mn,[4,e.persistence.runTransaction("Handle user change","readonly",function(k){var z;return e._n.getAllMutationBatches(k).next(function($){return z=$,o=e.persistence.getMutationQueue(t),a=new Iy(e.On,o,e.persistence.getIndexManager()),o.getAllMutationBatches(k)}).next(function($){for(var oe=[],me=[],ke=lo(),Fe=0,je=z;Fe<je.length;Fe++){var ct=je[Fe];oe.push(ct.batchId);for(var kt=0,Qt=ct.mutations;kt<Qt.length;kt++)ke=ke.add(Qt[kt].key)}for(var xn=0,Xn=$;xn<Xn.length;xn++){var ni=Xn[xn];me.push(ni.batchId);for(var Qi=0,Rr=ni.mutations;Qi<Rr.length;Qi++)ke=ke.add(Rr[Qi].key)}return a.pn(k,ke).next(function(us){return{Ln:us,removedBatchIds:oe,addedBatchIds:me}})})})];case 1:return h=v.sent(),[2,(e._n=o,e.Mn=a,e.xn.Vn(e.Mn),h)]}})})}function TT(i,t){var e=Jn(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(o){var v,k,z,$,oe,me,ke,a=t.batch.keys(),h=e.On.newChangeBuffer({trackRemovals:!0});return(v=e,k=o,z=t,$=h,oe=z.batch,me=oe.keys(),ke=Fn.resolve(),me.forEach(function(Fe){ke=ke.next(function(){return $.getEntry(k,Fe)}).next(function(je){var ct=z.docVersions.get(Fe);qi(null!==ct),je.version.compareTo(ct)<0&&(oe.applyToRemoteDocument(je,z),je.isValidDocument()&&$.addEntry(je,z.commitVersion))})}),ke.next(function(){return v._n.removeMutationBatch(k,oe)})).next(function(){return h.apply(o)}).next(function(){return e._n.performConsistencyCheck(o)}).next(function(){return e.Mn.pn(o,a)})})}function MT(i){var t=Jn(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.qe.getLastRemoteSnapshotVersion(e)})}function GP(i,t){var e=Jn(i),o=t.snapshotVersion,a=e.Fn;return e.persistence.runTransaction("Apply remote event","readwrite-primary",function(h){var v=e.On.newChangeBuffer({trackRemovals:!0});a=e.Fn;var k=[];t.targetChanges.forEach(function(oe,me){var ct,kt,Qt,ke=a.get(me);if(ke){k.push(e.qe.removeMatchingKeys(h,oe.removedDocuments,me).next(function(){return e.qe.addMatchingKeys(h,oe.addedDocuments,me)}));var Fe=oe.resumeToken;if(Fe.approximateByteSize()>0){var je=ke.withResumeToken(Fe,o).withSequenceNumber(h.currentSequenceNumber);a=a.insert(me,je),ct=ke,Qt=oe,qi((kt=je).resumeToken.approximateByteSize()>0),(0===ct.resumeToken.approximateByteSize()||kt.snapshotVersion.toMicroseconds()-ct.snapshotVersion.toMicroseconds()>=3e8||Qt.addedDocuments.size+Qt.modifiedDocuments.size+Qt.removedDocuments.size>0)&&k.push(e.qe.updateTargetData(h,je))}}});var z=Gh();if(t.documentUpdates.forEach(function(oe,me){t.resolvedLimboDocuments.has(oe)&&k.push(e.persistence.referenceDelegate.updateLimboDocument(h,oe))}),k.push(AT(h,v,t.documentUpdates,o,void 0).next(function(oe){z=oe})),!o.isEqual(gr.min())){var $=e.qe.getLastRemoteSnapshotVersion(h).next(function(oe){return e.qe.setTargetsMetadata(h,h.currentSequenceNumber,o)});k.push($)}return Fn.waitFor(k).next(function(){return v.apply(h)}).next(function(){return e.Mn.En(h,z)}).next(function(){return z})}).then(function(h){return e.Fn=a,h})}function AT(i,t,e,o,a){var h=lo();return e.forEach(function(v){return h=h.add(v)}),t.getEntries(i,h).next(function(v){var k=Gh();return e.forEach(function(z,$){var oe=v.get(z),me=(null==a?void 0:a.get(z))||o;$.isNoDocument()&&$.version.isEqual(gr.min())?(t.removeEntry(z,me),k=k.insert(z,$)):!oe.isValidDocument()||$.version.compareTo(oe.version)>0||0===$.version.compareTo(oe.version)&&oe.hasPendingWrites?(t.addEntry($,me),k=k.insert(z,$)):Gn("LocalStore","Ignoring outdated watch update for ",z,". Current version:",oe.version," Watch version:",$.version)}),k})}function w0(i,t){var e=Jn(i);return e.persistence.runTransaction("Get next mutation batch","readonly",function(o){return void 0===t&&(t=-1),e._n.getNextMutationBatchAfterBatchId(o,t)})}function Py(i,t){var e=Jn(i);return e.persistence.runTransaction("Allocate target","readwrite",function(o){var a;return e.qe.getTargetData(o,t).next(function(h){return h?Fn.resolve(a=h):e.qe.allocateTargetId(o).next(function(v){return a=new f0(t,v,0,o.currentSequenceNumber),e.qe.addTargetData(o,a).next(function(){return a})})})}).then(function(o){var a=e.Fn.get(o.targetId);return(null===a||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Fn=e.Fn.insert(o.targetId,o),e.kn.set(t,o.targetId)),o})}function Ry(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,h,v;return(0,We.Jh)(this,function(k){switch(k.label){case 0:o=Jn(i),a=o.Fn.get(t),h=e?"readwrite":"readwrite-primary",k.label=1;case 1:return k.trys.push([1,4,,5]),e?[3,3]:[4,o.persistence.runTransaction("Release target",h,function(z){return o.persistence.referenceDelegate.removeTarget(z,a)})];case 2:k.sent(),k.label=3;case 3:return[3,5];case 4:if(!Xg(v=k.sent()))throw v;return Gn("LocalStore","Failed to update sequence numbers for target "+t+": "+v),[3,5];case 5:return o.Fn=o.Fn.remove(t),o.kn.delete(a.target),[2]}})})}function Db(i,t,e){var o=Jn(i),a=gr.min(),h=lo();return o.persistence.runTransaction("Execute query","readonly",function(v){return(k=o,z=v,$=Hh(t),oe=Jn(k),me=oe.kn.get($),void 0!==me?Fn.resolve(oe.Fn.get(me)):oe.qe.getTargetData(z,$)).next(function(k){if(k)return a=k.lastLimboFreeSnapshotVersion,o.qe.getMatchingKeysForTargetId(v,k.targetId).next(function(z){h=z})}).next(function(){return o.xn.getDocumentsMatchingQuery(v,t,e?a:gr.min(),e?h:lo())}).next(function(k){return{documents:k,Bn:h}});var k,z,$,oe,me})}function K1(i,t){var e=Jn(i),o=Jn(e.qe),a=e.Fn.get(t);return a?Promise.resolve(a.target):e.persistence.runTransaction("Get target data","readonly",function(h){return o.lt(h,t).next(function(v){return v?v.target:null})})}function C0(i){var t=Jn(i);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return a=e,h=t.$n,v=Jn(t.On),k=Gh(),z=My(h),$=Am(a),oe=IDBKeyRange.lowerBound(z,!0),$.$t({index:zs.readTimeIndex,range:oe},function(me,ke){var Fe=uT(v.R,ke);k=k.insert(Fe.key,Fe),z=ke.readTime}).next(function(){return{wn:k,readTime:hT(z)}});var a,h,v,k,z,$,oe}).then(function(e){var o=e.wn;return t.$n=e.readTime,o})}function kT(i){return(0,We.mG)(this,void 0,void 0,function(){var t;return(0,We.Jh)(this,function(e){return[2,(t=Jn(i)).persistence.runTransaction("Synchronize last document change read time","readonly",function(o){return h=Am(o),v=gr.min(),h.$t({index:zs.readTimeIndex,reverse:!0},function(k,z,$){z.readTime&&(v=hT(z.readTime)),$.done()}).next(function(){return v});var h,v}).then(function(o){t.$n=o})]})})}function DT(i,t,e,o){return(0,We.mG)(this,void 0,void 0,function(){var a,h,v,k,z,$,oe,me,ke,Fe;return(0,We.Jh)(this,function(je){switch(je.label){case 0:for(a=Jn(i),h=lo(),v=Gh(),k=VE(),z=0,$=e;z<$.length;z++)me=t.qn((oe=$[z]).metadata.name),oe.document&&(h=h.add(me)),v=v.insert(me,t.Un(oe)),k=k.insert(me,t.Kn(oe.metadata.readTime));return ke=a.On.newChangeBuffer({trackRemovals:!0}),[4,Py(a,(ct=o,Hh(Gg(to.fromString("__bundle__/docs/"+ct)))))];case 1:return Fe=je.sent(),[2,a.persistence.runTransaction("Apply bundle documents","readwrite",function(ct){return AT(ct,ke,v,gr.min(),k).next(function(kt){return ke.apply(ct),kt}).next(function(kt){return a.qe.removeMatchingKeysForTargetId(ct,Fe.targetId).next(function(){return a.qe.addMatchingKeys(ct,h,Fe.targetId)}).next(function(){return a.Mn.En(ct,kt)}).next(function(){return kt})})})]}var ct})})}function sD(i,t,e){return void 0===e&&(e=lo()),(0,We.mG)(this,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return[4,Py(i,Hh(g0(t.bundledQuery)))];case 1:return o=h.sent(),[2,(a=Jn(i)).persistence.runTransaction("Save named query","readwrite",function(v){var k=Il(t.readTime);if(o.snapshotVersion.compareTo(k)>=0)return a.Ke.saveNamedQuery(v,t);var z=o.withResumeToken(Jl.EMPTY_BYTE_STRING,k);return a.Fn=a.Fn.insert(z.targetId,z),a.qe.updateTargetData(v,z).next(function(){return a.qe.removeMatchingKeysForTargetId(v,o.targetId)}).next(function(){return a.qe.addMatchingKeys(v,e,o.targetId)}).next(function(){return a.Ke.saveNamedQuery(v,t)})})]}})})}var aD=function(){function i(t){this.R=t,this.Qn=new Map,this.jn=new Map}return i.prototype.getBundleMetadata=function(t,e){return Fn.resolve(this.Qn.get(e))},i.prototype.saveBundleMetadata=function(t,e){var o;return this.Qn.set(e.id,{id:(o=e).id,version:o.version,createTime:Il(o.createTime)}),Fn.resolve()},i.prototype.getNamedQuery=function(t,e){return Fn.resolve(this.jn.get(e))},i.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(o=e).name,query:g0(o.bundledQuery),readTime:Il(o.readTime)}),Fn.resolve();var o},i}(),S0=function(){function i(){this.Wn=new Ca(ol.Gn),this.zn=new Ca(ol.Hn)}return i.prototype.isEmpty=function(){return this.Wn.isEmpty()},i.prototype.addReference=function(t,e){var o=new ol(t,e);this.Wn=this.Wn.add(o),this.zn=this.zn.add(o)},i.prototype.Jn=function(t,e){var o=this;t.forEach(function(a){return o.addReference(a,e)})},i.prototype.removeReference=function(t,e){this.Yn(new ol(t,e))},i.prototype.Xn=function(t,e){var o=this;t.forEach(function(a){return o.removeReference(a,e)})},i.prototype.Zn=function(t){var e=this,o=new Ai(new to([])),a=new ol(o,t),h=new ol(o,t+1),v=[];return this.zn.forEachInRange([a,h],function(k){e.Yn(k),v.push(k.key)}),v},i.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},i.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},i.prototype.es=function(t){var e=new Ai(new to([])),o=new ol(e,t),a=new ol(e,t+1),h=lo();return this.zn.forEachInRange([o,a],function(v){h=h.add(v.key)}),h},i.prototype.containsKey=function(t){var e=new ol(t,0),o=this.Wn.firstAfterOrEqual(e);return null!==o&&t.isEqual(o.key)},i}(),ol=function(){function i(t,e){this.key=t,this.ns=e}return i.Gn=function(t,e){return Ai.comparator(t.key,e.key)||Mr(t.ns,e.ns)},i.Hn=function(t,e){return Mr(t.ns,e.ns)||Ai.comparator(t.key,e.key)},i}(),IT=function(){function i(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ca(ol.Gn)}return i.prototype.checkEmpty=function(t){return Fn.resolve(0===this._n.length)},i.prototype.addMutationBatch=function(t,e,o,a){var h=this.ss;this.ss++;var v=new p0(h,e,o,a);this._n.push(v);for(var k=0,z=a;k<z.length;k++){var $=z[k];this.rs=this.rs.add(new ol($.key,h)),this.Ut.addToCollectionParentIndex(t,$.key.path.popLast())}return Fn.resolve(v)},i.prototype.lookupMutationBatch=function(t,e){return Fn.resolve(this.os(e))},i.prototype.getNextMutationBatchAfterBatchId=function(t,e){var a=this.cs(e+1),h=a<0?0:a;return Fn.resolve(this._n.length>h?this._n[h]:null)},i.prototype.getHighestUnacknowledgedBatchId=function(){return Fn.resolve(0===this._n.length?-1:this.ss-1)},i.prototype.getAllMutationBatches=function(t){return Fn.resolve(this._n.slice())},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var o=this,a=new ol(e,0),h=new ol(e,Number.POSITIVE_INFINITY),v=[];return this.rs.forEachInRange([a,h],function(k){var z=o.os(k.ns);v.push(z)}),Fn.resolve(v)},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var o=this,a=new Ca(Mr);return e.forEach(function(h){var v=new ol(h,0),k=new ol(h,Number.POSITIVE_INFINITY);o.rs.forEachInRange([v,k],function(z){a=a.add(z.ns)})}),Fn.resolve(this.us(a))},i.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var o=e.path,a=o.length+1,h=o;Ai.isDocumentKey(h)||(h=h.child(""));var v=new ol(new Ai(h),0),k=new Ca(Mr);return this.rs.forEachWhile(function(z){var $=z.key.path;return!!o.isPrefixOf($)&&($.length===a&&(k=k.add(z.ns)),!0)},v),Fn.resolve(this.us(k))},i.prototype.us=function(t){var e=this,o=[];return t.forEach(function(a){var h=e.os(a);null!==h&&o.push(h)}),o},i.prototype.removeMutationBatch=function(t,e){var o=this;qi(0===this.hs(e.batchId,"removed")),this._n.shift();var a=this.rs;return Fn.forEach(e.mutations,function(h){var v=new ol(h.key,e.batchId);return a=a.delete(v),o.referenceDelegate.markPotentiallyOrphaned(t,h.key)}).next(function(){o.rs=a})},i.prototype.Gt=function(t){},i.prototype.containsKey=function(t,e){var o=new ol(e,0),a=this.rs.firstAfterOrEqual(o);return Fn.resolve(e.isEqual(a&&a.key))},i.prototype.performConsistencyCheck=function(t){return Fn.resolve()},i.prototype.hs=function(t,e){return this.cs(t)},i.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},i.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},i}(),E0=function(){function i(t,e){this.Ut=t,this.ls=e,this.docs=new ec(Ai.comparator),this.size=0}return i.prototype.addEntry=function(t,e,o){var a=e.key,h=this.docs.get(a),v=h?h.size:0,k=this.ls(e);return this.docs=this.docs.insert(a,{document:e.clone(),size:k,readTime:o}),this.size+=k-v,this.Ut.addToCollectionParentIndex(t,a.path.popLast())},i.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},i.prototype.getEntry=function(t,e){var o=this.docs.get(e);return Fn.resolve(o?o.document.clone():Dl.newInvalidDocument(e))},i.prototype.getEntries=function(t,e){var o=this,a=Gh();return e.forEach(function(h){var v=o.docs.get(h);a=a.insert(h,v?v.document.clone():Dl.newInvalidDocument(h))}),Fn.resolve(a)},i.prototype.getDocumentsMatchingQuery=function(t,e,o){for(var a=Gh(),h=new Ai(e.path.child("")),v=this.docs.getIteratorFrom(h);v.hasNext();){var k=v.getNext(),$=k.value,oe=$.document,me=$.readTime;if(!e.path.isPrefixOf(k.key.path))break;me.compareTo(o)<=0||vb(e,oe)&&(a=a.insert(oe.key,oe.clone()))}return Fn.resolve(a)},i.prototype.fs=function(t,e){return Fn.forEach(this.docs,function(o){return e(o)})},i.prototype.newChangeBuffer=function(t){return new T0(this)},i.prototype.getSize=function(t){return Fn.resolve(this.size)},i}(),T0=function(i){function t(e){var o=this;return(o=i.call(this)||this).Ie=e,o}return(0,We.ZT)(t,i),t.prototype.applyChanges=function(e){var o=this,a=[];return this.changes.forEach(function(h,v){v.document.isValidDocument()?a.push(o.Ie.addEntry(e,v.document,o.getReadTime(h))):o.Ie.removeEntry(h)}),Fn.waitFor(a)},t.prototype.getFromCache=function(e,o){return this.Ie.getEntry(e,o)},t.prototype.getAllFromCache=function(e,o){return this.Ie.getEntries(e,o)},t}(xT),jP=function(){function i(t){this.persistence=t,this.ds=new Sp(function(e){return Ug(e)},_m),this.lastRemoteSnapshotVersion=gr.min(),this.highestTargetId=0,this.ws=0,this._s=new S0,this.targetCount=0,this.ys=_0.Jt()}return i.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(o,a){return e(a)}),Fn.resolve()},i.prototype.getLastRemoteSnapshotVersion=function(t){return Fn.resolve(this.lastRemoteSnapshotVersion)},i.prototype.getHighestSequenceNumber=function(t){return Fn.resolve(this.ws)},i.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Fn.resolve(this.highestTargetId)},i.prototype.setTargetsMetadata=function(t,e,o){return o&&(this.lastRemoteSnapshotVersion=o),e>this.ws&&(this.ws=e),Fn.resolve()},i.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new _0(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},i.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Fn.resolve()},i.prototype.updateTargetData=function(t,e){return this.te(e),Fn.resolve()},i.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Fn.resolve()},i.prototype.removeTargets=function(t,e,o){var a=this,h=0,v=[];return this.ds.forEach(function(k,z){z.sequenceNumber<=e&&null===o.get(z.targetId)&&(a.ds.delete(k),v.push(a.removeMatchingKeysForTargetId(t,z.targetId)),h++)}),Fn.waitFor(v).next(function(){return h})},i.prototype.getTargetCount=function(t){return Fn.resolve(this.targetCount)},i.prototype.getTargetData=function(t,e){var o=this.ds.get(e)||null;return Fn.resolve(o)},i.prototype.addMatchingKeys=function(t,e,o){return this._s.Jn(e,o),Fn.resolve()},i.prototype.removeMatchingKeys=function(t,e,o){this._s.Xn(e,o);var a=this.persistence.referenceDelegate,h=[];return a&&e.forEach(function(v){h.push(a.markPotentiallyOrphaned(t,v))}),Fn.waitFor(h)},i.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Fn.resolve()},i.prototype.getMatchingKeysForTargetId=function(t,e){var o=this._s.es(e);return Fn.resolve(o)},i.prototype.containsKey=function(t,e){return Fn.resolve(this._s.containsKey(e))},i}(),Ib=function(){function i(t,e){var o=this;this.gs={},this.Ne=new cu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new jP(this),this.Ut=new Qk,this.Ue=new E0(this.Ut,function(v){return o.referenceDelegate.ps(v)}),this.R=new Tm(e),this.Ke=new aD(this.R)}return i.prototype.start=function(){return Promise.resolve()},i.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.setDatabaseDeletedListener=function(){},i.prototype.setNetworkEnabled=function(){},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new IT(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(t,e,o){var a=this;Gn("MemoryPersistence","Starting transaction:",t);var h=new bo(this.Ne.next());return this.referenceDelegate.Es(),o(h).next(function(v){return a.referenceDelegate.Ts(h).next(function(){return v})}).toPromise().then(function(v){return h.raiseOnCommittedEvent(),v})},i.prototype.Is=function(t,e){return Fn.or(Object.values(this.gs).map(function(o){return function(){return o.containsKey(t,e)}}))},i}(),bo=function(i){function t(e){var o=this;return(o=i.call(this)||this).currentSequenceNumber=e,o}return(0,We.ZT)(t,i),t}(cT),Dm=function(){function i(t){this.persistence=t,this.As=new S0,this.Rs=null}return i.bs=function(t){return new i(t)},Object.defineProperty(i.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw vi()},enumerable:!1,configurable:!0}),i.prototype.addReference=function(t,e,o){return this.As.addReference(o,e),this.vs.delete(o.toString()),Fn.resolve()},i.prototype.removeReference=function(t,e,o){return this.As.removeReference(o,e),this.vs.add(o.toString()),Fn.resolve()},i.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Fn.resolve()},i.prototype.removeTarget=function(t,e){var o=this;this.As.Zn(e.targetId).forEach(function(h){return o.vs.add(h.toString())});var a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,e.targetId).next(function(h){h.forEach(function(v){return o.vs.add(v.toString())})}).next(function(){return a.removeTargetData(t,e)})},i.prototype.Es=function(){this.Rs=new Set},i.prototype.Ts=function(t){var e=this,o=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fn.forEach(this.vs,function(a){var h=Ai.fromPath(a);return e.Ps(t,h).next(function(v){v||o.removeEntry(h)})}).next(function(){return e.Rs=null,o.apply(t)})},i.prototype.updateLimboDocument=function(t,e){var o=this;return this.Ps(t,e).next(function(a){a?o.vs.delete(e.toString()):o.vs.add(e.toString())})},i.prototype.ps=function(t){return 0},i.prototype.Ps=function(t,e){var o=this;return Fn.or([function(){return Fn.resolve(o.As.containsKey(e))},function(){return o.persistence.getTargetCache().containsKey(t,e)},function(){return o.persistence.Is(t,e)}])},i}(),Fa=function(){function i(t){this.uid=t}return i.prototype.isAuthenticated=function(){return null!=this.uid},i.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},i.prototype.isEqual=function(t){return t.uid===this.uid},i}();function Oy(i,t){return"firestore_clients_"+i+"_"+t}function lD(i,t,e){var o="firestore_mutations_"+i+"_"+e;return t.isAuthenticated()&&(o+="_"+t.uid),o}function tr(i,t){return"firestore_targets_"+i+"_"+t}Fa.UNAUTHENTICATED=new Fa(null),Fa.GOOGLE_CREDENTIALS=new Fa("google-credentials-uid"),Fa.FIRST_PARTY=new Fa("first-party-uid");var Ju=function(){function i(t,e,o,a){this.user=t,this.batchId=e,this.state=o,this.error=a}return i.Vs=function(t,e,o){var a,h=JSON.parse(o),v="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return v&&h.error&&(v="string"==typeof h.error.message&&"string"==typeof h.error.code)&&(a=new Dn(h.error.code,h.error.message)),v?new i(t,e,h.state,a):(xa("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+o),null)},i.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},i}(),Pb=function(){function i(t,e,o){this.targetId=t,this.state=e,this.error=o}return i.Vs=function(t,e){var o,a=JSON.parse(e),h="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(o=new Dn(a.error.code,a.error.message)),h?new i(t,a.state,o):(xa("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},i.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},i}(),Im=function(){function i(t,e){this.clientId=t,this.activeTargetIds=e}return i.Vs=function(t,e){for(var o=JSON.parse(e),a="object"==typeof o&&o.activeTargetIds instanceof Array,h=wb(),v=0;a&&v<o.activeTargetIds.length;++v)a=Bg(o.activeTargetIds[v]),h=h.add(o.activeTargetIds[v]);return a?new i(t,h):(xa("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},i}(),YP=function(){function i(t,e){this.clientId=t,this.onlineState=e}return i.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new i(e.clientId,e.onlineState):(xa("SharedClientState","Failed to parse online state: "+t),null)},i}(),M0=function(){function i(){this.activeTargetIds=wb()}return i.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},i.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},i.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},i}(),A0=function(){function i(t,e,o,a,h){this.window=t,this.Se=e,this.persistenceKey=o,this.Ns=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ec(Mr),this.started=!1,this.$s=[];var v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.Os=Oy(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new M0),this.Ls=new RegExp("^firestore_clients_"+v+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+v+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+v+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(k){return"firestore_bundle_loaded_"+k}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return i.yt=function(t){return!(!t||!t.localStorage)},i.prototype.start=function(){return(0,We.mG)(this,void 0,void 0,function(){var t,e,o,a,h,v,k,z,$,oe,ke=this;return(0,We.Jh)(this,function(Fe){switch(Fe.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=Fe.sent(),e=0,o=t;e<o.length;e++)(a=o[e])!==this.Ns&&(h=this.getItem(Oy(this.persistenceKey,a)))&&(v=Im.Vs(a,h))&&(this.ks=this.ks.insert(v.clientId,v));for(this.Qs(),(k=this.storage.getItem(this.Us))&&(z=this.js(k))&&this.Ws(z),$=0,oe=this.$s;$<oe.length;$++)this.Fs(oe[$]);return this.$s=[],this.window.addEventListener("pagehide",function(){return ke.shutdown()}),this.started=!0,[2]}})})},i.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},i.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},i.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(o,a){a.activeTargetIds.has(t)&&(e=!0)}),e},i.prototype.addPendingMutation=function(t){this.zs(t,"pending")},i.prototype.updateMutationState=function(t,e,o){this.zs(t,e,o),this.Hs(t)},i.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var o=this.storage.getItem(tr(this.persistenceKey,t));if(o){var a=Pb.Vs(t,o);a&&(e=a.state)}}return this.Js.Ds(t),this.Qs(),e},i.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},i.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},i.prototype.clearQueryState=function(t){this.removeItem(tr(this.persistenceKey,t))},i.prototype.updateQueryState=function(t,e,o){this.Ys(t,e,o)},i.prototype.handleUserChange=function(t,e,o){var a=this;e.forEach(function(h){a.Hs(h)}),this.currentUser=t,o.forEach(function(h){a.addPendingMutation(h)})},i.prototype.setOnlineState=function(t){this.Xs(t)},i.prototype.notifyBundleLoaded=function(){this.Zs()},i.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},i.prototype.getItem=function(t){var e=this.storage.getItem(t);return Gn("SharedClientState","READ",t,e),e},i.prototype.setItem=function(t,e){Gn("SharedClientState","SET",t,e),this.storage.setItem(t,e)},i.prototype.removeItem=function(t){Gn("SharedClientState","REMOVE",t),this.storage.removeItem(t)},i.prototype.Fs=function(t){var e=this,o=t;if(o.storageArea===this.storage){if(Gn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Os)return void xa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,We.mG)(e,void 0,void 0,function(){var a,h,v,k,z,$;return(0,We.Jh)(this,function(oe){if(this.started){if(null!==o.key)if(this.Ls.test(o.key)){if(null==o.newValue)return a=this.ti(o.key),[2,this.ei(a,null)];if(h=this.ni(o.key,o.newValue))return[2,this.ei(h.clientId,h)]}else if(this.Bs.test(o.key)){if(null!==o.newValue&&(v=this.si(o.key,o.newValue)))return[2,this.ii(v)]}else if(this.qs.test(o.key)){if(null!==o.newValue&&(k=this.ri(o.key,o.newValue)))return[2,this.oi(k)]}else if(o.key===this.Us){if(null!==o.newValue&&(z=this.js(o.newValue)))return[2,this.Ws(z)]}else if(o.key===this.Ms)($=function(me){var ke=cu.o;if(null!=me)try{var Fe=JSON.parse(me);qi("number"==typeof Fe),ke=Fe}catch(je){xa("SharedClientState","Failed to read sequence number from WebStorage",je)}return ke}(o.newValue))!==cu.o&&this.sequenceNumberHandler($);else if(o.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(o);return[2]})})})}},Object.defineProperty(i.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),i.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},i.prototype.zs=function(t,e,o){var a=new Ju(this.currentUser,t,e,o),h=lD(this.persistenceKey,this.currentUser,t);this.setItem(h,a.Ss())},i.prototype.Hs=function(t){var e=lD(this.persistenceKey,this.currentUser,t);this.removeItem(e)},i.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},i.prototype.Ys=function(t,e,o){var a=tr(this.persistenceKey,t),h=new Pb(t,e,o);this.setItem(a,h.Ss())},i.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},i.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},i.prototype.ni=function(t,e){var o=this.ti(t);return Im.Vs(o,e)},i.prototype.si=function(t,e){var o=this.Bs.exec(t),a=Number(o[1]);return Ju.Vs(new Fa(void 0!==o[2]?o[2]:null),a,e)},i.prototype.ri=function(t,e){var o=this.qs.exec(t),a=Number(o[1]);return Pb.Vs(a,e)},i.prototype.js=function(t){return YP.Vs(t)},i.prototype.ii=function(t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Gn("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},i.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},i.prototype.ei=function(t,e){var o=this,a=e?this.ks.insert(t,e):this.ks.remove(t),h=this.Gs(this.ks),v=this.Gs(a),k=[],z=[];return v.forEach(function($){h.has($)||k.push($)}),h.forEach(function($){v.has($)||z.push($)}),this.syncEngine.hi(k,z).then(function(){o.ks=a})},i.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},i.prototype.Gs=function(t){var e=wb();return t.forEach(function(o,a){e=e.unionWith(a.activeTargetIds)}),e},i}(),cD=function(){function i(){this.li=new M0,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return i.prototype.addPendingMutation=function(t){},i.prototype.updateMutationState=function(t,e,o){},i.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},i.prototype.updateQueryState=function(t,e,o){this.fi[t]=e},i.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},i.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},i.prototype.clearQueryState=function(t){delete this.fi[t]},i.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},i.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},i.prototype.start=function(){return this.li=new M0,Promise.resolve()},i.prototype.handleUserChange=function(t,e,o){},i.prototype.setOnlineState=function(t){},i.prototype.shutdown=function(){},i.prototype.writeSequenceNumber=function(t){},i.prototype.notifyBundleLoaded=function(){},i}(),uD=function(){function i(){}return i.prototype.di=function(t){},i.prototype.shutdown=function(){},i}(),PT=function(){function i(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return i.prototype.di=function(t){this.gi.push(t)},i.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},i.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},i.prototype._i=function(){Gn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},i.prototype.yi=function(){Gn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},i.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},i}(),qh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ts=function(){function i(t){this.Ei=t.Ei,this.Ti=t.Ti}return i.prototype.Ii=function(t){this.Ai=t},i.prototype.Ri=function(t){this.bi=t},i.prototype.onMessage=function(t){this.vi=t},i.prototype.close=function(){this.Ti()},i.prototype.send=function(t){this.Ei(t)},i.prototype.Pi=function(){this.Ai()},i.prototype.Vi=function(t){this.bi(t)},i.prototype.Si=function(t){this.vi(t)},i}(),Pd=function(i){function t(e){var o=this;return(o=i.call(this,e)||this).forceLongPolling=e.forceLongPolling,o.autoDetectLongPolling=e.autoDetectLongPolling,o.useFetchStreams=e.useFetchStreams,o}return(0,We.ZT)(t,i),t.prototype.ki=function(e,o,a,h){return new Promise(function(v,k){var z=new e0;z.listenOnce(Qx.COMPLETE,function(){try{switch(z.getLastErrorCode()){case Xx.NO_ERROR:var oe=z.getResponseJson();Gn("Connection","XHR received:",JSON.stringify(oe)),v(oe);break;case Xx.TIMEOUT:Gn("Connection",'RPC "'+e+'" timed out'),k(new Dn(rn.DEADLINE_EXCEEDED,"Request time out"));break;case Xx.HTTP_ERROR:var me=z.getStatus();if(Gn("Connection",'RPC "'+e+'" failed with status:',me,"response text:",z.getResponseText()),me>0){var ke=z.getResponseJson().error;if(ke&&ke.status&&ke.message){var Fe=(ct=ke.status.toLowerCase().replace(/_/g,"-"),Object.values(rn).indexOf(ct)>=0?ct:rn.UNKNOWN);k(new Dn(Fe,ke.message))}else k(new Dn(rn.UNKNOWN,"Server responded with status "+z.getStatus()))}else k(new Dn(rn.UNAVAILABLE,"Connection failed."));break;default:vi()}}finally{Gn("Connection",'RPC "'+e+'" completed.')}var ct});var $=JSON.stringify(h);z.send(o,"POST",$,a,15)})},t.prototype.Oi=function(e,o){var a=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=new hy,v=pn(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(k.xmlHttpFactory=new kk({})),this.Fi(k.initMessageHeaders,o),(0,Zr.uI)()||(0,Zr.b$)()||(0,Zr.d)()||(0,Zr.w1)()||(0,Zr.Mn)()||(0,Zr.ru)()||(k.httpHeadersOverwriteParam="$httpHeaders");var z=a.join("");Gn("Connection","Creating WebChannel: "+z,k);var $=h.createWebChannel(z,k),oe=!1,me=!1,ke=new Ts({Ei:function(je){me?Gn("Connection","Not sending because WebChannel is closed:",je):(oe||(Gn("Connection","Opening WebChannel transport."),$.open(),oe=!0),Gn("Connection","WebChannel sending:",je),$.send(je))},Ti:function(){return $.close()}}),Fe=function(je,ct,kt){je.listen(ct,function(Qt){try{kt(Qt)}catch(Sn){setTimeout(function(){throw Sn},0)}})};return Fe($,cb.EventType.OPEN,function(){me||Gn("Connection","WebChannel transport opened.")}),Fe($,cb.EventType.CLOSE,function(){me||(me=!0,Gn("Connection","WebChannel transport closed"),ke.Vi())}),Fe($,cb.EventType.ERROR,function(je){me||(me=!0,fy("Connection","WebChannel transport errored:",je),ke.Vi(new Dn(rn.UNAVAILABLE,"The operation could not be completed")))}),Fe($,cb.EventType.MESSAGE,function(je){var ct;if(!me){var kt=je.data[0];qi(!!kt);var Sn=kt.error||(null===(ct=kt[0])||void 0===ct?void 0:ct.error);if(Sn){Gn("Connection","WebChannel received error:",Sn);var xn=Sn.status,Xn=function(Qi){var Rr=wa[Qi];if(void 0!==Rr)return c0(Rr)}(xn),ni=Sn.message;void 0===Xn&&(Xn=rn.INTERNAL,ni="Unknown error status: "+xn+" with message "+Sn.message),me=!0,ke.Vi(new Dn(Xn,ni)),$.close()}else Gn("Connection","WebChannel received:",kt),ke.Si(kt)}}),Fe(v,Jx.STAT_EVENT,function(je){je.stat===Kx_PROXY?Gn("Connection","Detected buffering proxy"):je.stat===Kx_NOPROXY&&Gn("Connection","Detected no buffering proxy")}),setTimeout(function(){ke.Pi()},0),ke},t}(function(){function i(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return i.prototype.Ni=function(t,e,o,a){var h=this.xi(t,e);Gn("RestConnection","Sending: ",h,o);var v={};return this.Fi(v,a),this.ki(t,h,v,o).then(function(k){return Gn("RestConnection","Received: ",k),k},function(k){throw fy("RestConnection",t+" failed with error: ",k,"url: ",h,"request:",o),k})},i.prototype.$i=function(t,e,o,a){return this.Ni(t,e,o,a)},i.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var o in e.authHeaders)e.authHeaders.hasOwnProperty(o)&&(t[o]=e.authHeaders[o])},i.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+qh[t]},i}());function eC(){return"undefined"!=typeof window?window:null}function k0(){return"undefined"!=typeof document?document:null}function Fy(i){return new YE(i,!0)}var Rb=function(){function i(t,e,o,a,h){void 0===o&&(o=1e3),void 0===a&&(a=1.5),void 0===h&&(h=6e4),this.Se=t,this.timerId=e,this.Mi=o,this.Li=a,this.Bi=h,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return i.prototype.reset=function(){this.qi=0},i.prototype.Qi=function(){this.qi=this.Bi},i.prototype.ji=function(t){var e=this;this.cancel();var o=Math.floor(this.qi+this.Wi()),a=Math.max(0,Date.now()-this.Ki),h=Math.max(0,o-a);h>0&&Gn("ExponentialBackoff","Backing off for "+h+" ms (base delay: "+this.qi+" ms, delay with jitter: "+o+" ms, last attempt: "+a+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,h,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},i.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},i.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},i.prototype.Wi=function(){return(Math.random()-.5)*this.qi},i}(),n_=function(){function i(t,e,o,a,h,v){this.Se=t,this.zi=o,this.Hi=a,this.Ji=h,this.listener=v,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rb(t,e)}return i.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},i.prototype.er=function(){return 2===this.state},i.prototype.start=function(){3!==this.state?this.auth():this.nr()},i.prototype.stop=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},i.prototype.sr=function(){this.state=0,this.Zi.reset()},i.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},i.prototype.cr=function(t){this.ur(),this.stream.send(t)},i.prototype.rr=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},i.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},i.prototype.close=function(t,e){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===rn.RESOURCE_EXHAUSTED?(xa(e.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===rn.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return o.sent(),[2]}})})},i.prototype.ar=function(){},i.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),o=this.Yi;this.Ji.getToken().then(function(a){t.Yi===o&&t.lr(a)},function(a){e(function(){var h=new Dn(rn.UNKNOWN,"Fetching auth token failed: "+a.message);return t.dr(h)})})},i.prototype.lr=function(t){var e=this,o=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){o(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(a){o(function(){return e.dr(a)})}),this.stream.onMessage(function(a){o(function(){return e.onMessage(a)})})},i.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,We.mG)(t,void 0,void 0,function(){return(0,We.Jh)(this,function(e){return this.state=0,this.start(),[2]})})})},i.prototype.dr=function(t){return Gn("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},i.prototype.hr=function(t){var e=this;return function(o){e.Se.enqueueAndForget(function(){return e.Yi===t?o():(Gn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},i}(),Ob=function(i){function t(e,o,a,h,v){var k=this;return(k=i.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",o,a,v)||this).R=h,k}return(0,We.ZT)(t,i),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var o=function(h,v){var k,kt;if("targetChange"in v){var z="NO_CHANGE"===(kt=v.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===kt?1:"REMOVE"===kt?2:"CURRENT"===kt?3:"RESET"===kt?4:vi(),$=v.targetChange.targetIds||[],oe=function(kt,Qt){return kt.I?(qi(void 0===Qt||"string"==typeof Qt),Jl.fromBase64String(Qt||"")):(qi(void 0===Qt||Qt instanceof Uint8Array),Jl.fromUint8Array(Qt||new Uint8Array))}(h,v.targetChange.resumeToken),me=(ke=v.targetChange.cause)&&function(kt){var Qt=void 0===kt.code?rn.UNKNOWN:c0(kt.code);return new Dn(Qt,kt.message||"")}(ke);k=new HE(z,$,oe,me||null)}else if("documentChange"in v){$=Xu(h,(z=v.documentChange).document.name),oe=Il(z.document.updateTime);var ke=new hu({mapValue:{fields:z.document.fields}}),Fe=(me=Dl.newFoundDocument($,oe,ke),z.targetIds||[]);k=new Cm(Fe,z.removedTargetIds||[],me.key,me)}else if("documentDelete"in v)$=Xu(h,(z=v.documentDelete).document),oe=z.readTime?Il(z.readTime):gr.min(),ke=Dl.newNoDocument($,oe),k=new Cm([],me=z.removedTargetIds||[],ke.key,ke);else if("documentRemove"in v)$=Xu(h,(z=v.documentRemove).document),k=new Cm([],oe=z.removedTargetIds||[],$,null);else{if(!("filter"in v))return vi();var ct=v.filter;$=new BP(z=ct.count||0),k=new by(oe=ct.targetId,$)}return k}(this.R,e),a=function(h){if(!("targetChange"in h))return gr.min();var v=h.targetChange;return v.targetIds&&v.targetIds.length?gr.min():v.readTime?Il(v.readTime):gr.min()}(e);return this.listener._r(o,a)},t.prototype.mr=function(e){var h,v,k,z,o={};o.database=wy(this.R),o.addTarget=(h=this.R,(k=r0(z=(v=e).target)?{documents:JE(h,z)}:{query:H1(h,z)}).targetId=v.targetId,v.resumeToken.approximateByteSize()>0?k.resumeToken=qE(h,v.resumeToken):v.snapshotVersion.compareTo(gr.min())>0&&(k.readTime=Cb(h,v.snapshotVersion.toTimestamp())),k);var a=function(h,v){var k=function(z,$){switch($){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vi()}}(0,v.purpose);return null==k?null:{"goog-listen-tags":k}}(0,e);a&&(o.labels=a),this.cr(o)},t.prototype.yr=function(e){var o={};o.database=wy(this.R),o.removeTarget=e,this.cr(o)},t}(n_),hD=function(i){function t(e,o,a,h,v){var k=this;return(k=i.call(this,e,"write_stream_connection_backoff","write_stream_idle",o,a,v)||this).R=h,k.gr=!1,k}return(0,We.ZT)(t,i),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,i.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(qi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var o=(v=e.commitTime,(h=e.writeResults)&&h.length>0?(qi(void 0!==v),h.map(function(k){return $=v,(oe=Il((z=k).updateTime?z.updateTime:$)).isEqual(gr.min())&&(oe=Il($)),new Nk(oe,z.transformResults||[]);var z,$,oe})):[]),a=Il(e.commitTime);return this.listener.Tr(a,o)}var h,v;return qi(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=wy(this.R),this.cr(e)},t.prototype.Er=function(e){var o=this,a={streamToken:this.lastStreamToken,writes:e.map(function(h){return h0(o.R,h)})};this.cr(a)},t}(n_),i_=function(i){function t(e,o,a){var h=this;return(h=i.call(this)||this).credentials=e,h.Hi=o,h.R=a,h.Rr=!1,h}return(0,We.ZT)(t,i),t.prototype.br=function(){if(this.Rr)throw new Dn(rn.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,o,a){var h=this;return this.br(),this.credentials.getToken().then(function(v){return h.Hi.Ni(e,o,a,v)}).catch(function(v){throw"FirebaseError"===v.name?(v.code===rn.UNAUTHENTICATED&&h.credentials.invalidateToken(),v):new Dn(rn.UNKNOWN,v.toString())})},t.prototype.$i=function(e,o,a){var h=this;return this.br(),this.credentials.getToken().then(function(v){return h.Hi.$i(e,o,a,v)}).catch(function(v){throw"FirebaseError"===v.name?(v.code===rn.UNAUTHENTICATED&&h.credentials.invalidateToken(),v):new Dn(rn.UNKNOWN,v.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),dD=function(){function i(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return i.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},i.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},i.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},i.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},i.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(xa(e),this.Vr=!1):Gn("OnlineStateTracker",e)},i.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},i}(),RT=function(i,t,e,o,a){var h=this;this.localStore=i,this.datastore=t,this.asyncQueue=e,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=a,this.Lr.di(function(v){e.enqueueAndForget(function(){return(0,We.mG)(h,void 0,void 0,function(){return(0,We.Jh)(this,function(k){switch(k.label){case 0:return Cf(this)?(Gn("RemoteStore","Restarting streams for network reachability change."),[4,function(z){return(0,We.mG)(this,void 0,void 0,function(){var $;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return($=Jn(z)).Or.add(4),[4,Ep($)];case 1:return oe.sent(),$.Br.set("Unknown"),$.Or.delete(4),[4,r_($)];case 2:return oe.sent(),[2]}})})}(this)]):[3,2];case 1:k.sent(),k.label=2;case 2:return[2]}})})})}),this.Br=new dD(e,o)};function r_(i){return(0,We.mG)(this,void 0,void 0,function(){var t,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:if(!Cf(i))return[3,4];t=0,e=i.Mr,o.label=1;case 1:return t<e.length?[4,(0,e[t])(!0)]:[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Ep(i){return(0,We.mG)(this,void 0,void 0,function(){var t,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:t=0,e=i.Mr,o.label=1;case 1:return t<e.length?[4,(0,e[t])(!1)]:[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Ly(i,t){var e=Jn(i);e.$r.has(t.targetId)||(e.$r.set(t.targetId,t),D0(e)?By(e):Nb(e).er()&&Pm(e,t))}function Ny(i,t){var e=Jn(i),o=Nb(e);e.$r.delete(t),o.er()&&OT(e,t),0===e.$r.size&&(o.er()?o.ir():Cf(e)&&e.Br.set("Unknown"))}function Pm(i,t){i.qr.U(t.targetId),Nb(i).mr(t)}function OT(i,t){i.qr.U(t),Nb(i).yr(t)}function By(i){i.qr=new Gk({getRemoteKeysForTarget:function(t){return i.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return i.$r.get(t)||null}}),Nb(i).start(),i.Br.Sr()}function D0(i){return Cf(i)&&!Nb(i).tr()&&i.$r.size>0}function Cf(i){return 0===Jn(i).Or.size}function tC(i){i.qr=void 0}function I0(i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){return i.$r.forEach(function(e,o){Pm(i,e)}),[2]})})}function pD(i,t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(e){return tC(i),D0(i)?(i.Br.Nr(t),By(i)):i.Br.set("Unknown"),[2]})})}function nC(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:if(i.Br.set("Online"),!(t instanceof HE&&2===t.state&&t.cause))return[3,6];v.label=1;case 1:return v.trys.push([1,3,,5]),[4,function(k,z){return(0,We.mG)(this,void 0,void 0,function(){var $,oe,me,ke;return(0,We.Jh)(this,function(Fe){switch(Fe.label){case 0:$=z.cause,oe=0,me=z.targetIds,Fe.label=1;case 1:return oe<me.length?k.$r.has(ke=me[oe])?[4,k.remoteSyncer.rejectListen(ke,$)]:[3,3]:[3,5];case 2:Fe.sent(),k.$r.delete(ke),k.qr.removeTarget(ke),Fe.label=3;case 3:Fe.label=4;case 4:return oe++,[3,1];case 5:return[2]}})})}(i,t)];case 2:return v.sent(),[3,5];case 3:return o=v.sent(),Gn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),[4,zy(i,o)];case 4:return v.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Cm?i.qr.X(t):t instanceof by?i.qr.rt(t):i.qr.et(t),e.isEqual(gr.min()))return[3,13];v.label=7;case 7:return v.trys.push([7,11,,13]),[4,MT(i.localStore)];case 8:return a=v.sent(),e.compareTo(a)>=0?[4,(k=i,z=e,$=k.qr.ut(z),$.targetChanges.forEach(function(oe,me){if(oe.resumeToken.approximateByteSize()>0){var ke=k.$r.get(me);ke&&k.$r.set(me,ke.withResumeToken(oe.resumeToken,z))}}),$.targetMismatches.forEach(function(oe){var me=k.$r.get(oe);if(me){k.$r.set(oe,me.withResumeToken(Jl.EMPTY_BYTE_STRING,me.snapshotVersion)),OT(k,oe);var ke=new f0(me.target,oe,1,me.sequenceNumber);Pm(k,ke)}}),k.remoteSyncer.applyRemoteEvent($))]:[3,10];case 9:v.sent(),v.label=10;case 10:return[3,13];case 11:return Gn("RemoteStore","Failed to raise snapshot:",h=v.sent()),[4,zy(i,h)];case 12:return v.sent(),[3,13];case 13:return[2]}var k,z,$})})}function zy(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o=this;return(0,We.Jh)(this,function(a){switch(a.label){case 0:if(!Xg(t))throw t;return i.Or.add(1),[4,Ep(i)];case 1:return a.sent(),i.Br.set("Offline"),e||(e=function(){return MT(i.localStore)}),i.asyncQueue.enqueueRetryable(function(){return(0,We.mG)(o,void 0,void 0,function(){return(0,We.Jh)(this,function(h){switch(h.label){case 0:return Gn("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return h.sent(),i.Or.delete(1),[4,r_(i)];case 2:return h.sent(),[2]}})})}),[2]}})})}function fD(i,t){return t().catch(function(e){return zy(i,e,t)})}function Fb(i){return(0,We.mG)(this,void 0,void 0,function(){var t,e,o,a,h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:t=Jn(i),e=Rm(t),o=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,v.label=1;case 1:if(!(Cf(k=t)&&k.kr.length<10))return[3,7];v.label=2;case 2:return v.trys.push([2,4,,6]),[4,w0(t.localStore,o)];case 3:return null===(a=v.sent())?(0===t.kr.length&&e.ir(),[3,7]):(o=a.batchId,function(k,z){k.kr.push(z);var $=Rm(k);$.er()&&$.pr&&$.Er(z.mutations)}(t,a),[3,6]);case 4:return h=v.sent(),[4,zy(t,h)];case 5:return v.sent(),[3,6];case 6:return[3,1];case 7:return nr(t)&&mD(t),[2]}var k})})}function nr(i){return Cf(i)&&!Rm(i).tr()&&i.kr.length>0}function mD(i){Rm(i).start()}function Lb(i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){return Rm(i).Ar(),[2]})})}function gD(i){return(0,We.mG)(this,void 0,void 0,function(){var t,e,o;return(0,We.Jh)(this,function(h){for(t=Rm(i),e=0,o=i.kr;e<o.length;e++)t.Er(o[e].mutations);return[2]})})}function _D(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return o=i.kr.shift(),a=VP.from(o,t,e),[4,fD(i,function(){return i.remoteSyncer.applySuccessfulWrite(a)})];case 1:return h.sent(),[4,Fb(i)];case 2:return h.sent(),[2]}})})}function yD(i,t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(e){switch(e.label){case 0:return t&&Rm(i).pr?[4,function(o,a){return(0,We.mG)(this,void 0,void 0,function(){var h,v;return(0,We.Jh)(this,function(k){switch(k.label){case 0:return L1(v=a.code)&&v!==rn.ABORTED?(h=o.kr.shift(),Rm(o).sr(),[4,fD(o,function(){return o.remoteSyncer.rejectFailedWrite(h.batchId,a)})]):[3,3];case 1:return k.sent(),[4,Fb(o)];case 2:k.sent(),k.label=3;case 3:return[2]}})})}(i,t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return nr(i)&&mD(i),[2]}})})}function FT(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return e=Jn(i),t?(e.Or.delete(2),[4,r_(e)]):[3,2];case 1:return o.sent(),[3,5];case 2:return t?[3,4]:(e.Or.add(2),[4,Ep(e)]);case 3:o.sent(),e.Br.set("Unknown"),o.label=4;case 4:o.label=5;case 5:return[2]}})})}function Nb(i){var e,o,a,h,t=this;return i.Ur||(i.Ur=(e=i.datastore,o=i.asyncQueue,a={Ii:I0.bind(null,i),Ri:pD.bind(null,i),_r:nC.bind(null,i)},(h=Jn(e)).br(),new Ob(o,h.Hi,h.credentials,h.R,a)),i.Mr.push(function(e){return(0,We.mG)(t,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return e?(i.Ur.sr(),D0(i)?By(i):i.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,i.Ur.stop()];case 2:o.sent(),tC(i),o.label=3;case 3:return[2]}})})})),i.Ur}function Rm(i){var e,o,a,h,t=this;return i.Kr||(i.Kr=(e=i.datastore,o=i.asyncQueue,a={Ii:Lb.bind(null,i),Ri:yD.bind(null,i),Ir:gD.bind(null,i),Tr:_D.bind(null,i)},(h=Jn(e)).br(),new hD(o,h.Hi,h.credentials,h.R,a)),i.Mr.push(function(e){return(0,We.mG)(t,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return e?(i.Kr.sr(),[4,Fb(i)]):[3,2];case 1:return o.sent(),[3,4];case 2:return[4,i.Kr.stop()];case 3:o.sent(),i.kr.length>0&&(Gn("RemoteStore","Stopping write stream with "+i.kr.length+" pending writes"),i.kr=[]),o.label=4;case 4:return[2]}})})})),i.Kr}var ic=function(){function i(t,e,o,a,h){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=o,this.op=a,this.removalCallback=h,this.deferred=new nc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(v){})}return i.createAndSchedule=function(t,e,o,a,h){var v=new i(t,e,Date.now()+o,a,h);return v.start(o),v},i.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},i.prototype.skipDelay=function(){return this.handleDelayElapsed()},i.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Dn(rn.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},i.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},i.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},i}();function Vy(i,t){if(xa("AsyncQueue",t+": "+i),Xg(i))return new Dn(rn.UNAVAILABLE,t+": "+i);throw i}var LT=function(){function i(t){this.comparator=t?function(e,o){return t(e,o)||Ai.comparator(e.key,o.key)}:function(e,o){return Ai.comparator(e.key,o.key)},this.keyedMap=qg(),this.sortedSet=new ec(this.comparator)}return i.emptySet=function(t){return new i(t.comparator)},i.prototype.has=function(t){return null!=this.keyedMap.get(t)},i.prototype.get=function(t){return this.keyedMap.get(t)},i.prototype.first=function(){return this.sortedSet.minKey()},i.prototype.last=function(){return this.sortedSet.maxKey()},i.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},i.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(i.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,o){return t(e),!1})},i.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},i.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},i.prototype.isEqual=function(t){if(!(t instanceof i)||this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();e.hasNext();){var a=e.getNext().key,h=o.getNext().key;if(!a.isEqual(h))return!1}return!0},i.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},i.prototype.copy=function(t,e){var o=new i;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=e,o},i}(),P0=function(){function i(){this.Qr=new ec(Ai.comparator)}return i.prototype.track=function(t){var e=t.doc.key,o=this.Qr.get(e);o?0!==t.type&&3===o.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==o.type?this.Qr=this.Qr.insert(e,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.Qr=this.Qr.remove(e):1===t.type&&2===o.type?this.Qr=this.Qr.insert(e,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):vi():this.Qr=this.Qr.insert(e,t)},i.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,o){t.push(o)}),t},i}(),R0=function(){function i(t,e,o,a,h,v,k,z){this.query=t,this.docs=e,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=h,this.fromCache=v,this.syncStateChanged=k,this.excludesMetadataChanges=z}return i.fromInitialDocuments=function(t,e,o,a){var h=[];return e.forEach(function(v){h.push({type:0,doc:v})}),new i(t,e,LT.emptySet(e),h,o,a,!0,!1)},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,o=t.docChanges;if(e.length!==o.length)return!1;for(var a=0;a<e.length;a++)if(e[a].type!==o[a].type||!e[a].doc.isEqual(o[a].doc))return!1;return!0},i}(),vD=function(){this.Wr=void 0,this.listeners=[]},bD=function(){this.queries=new Sp(function(i){return kE(i)},yb),this.onlineState="Unknown",this.Gr=new Set};function iC(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,h,v,k,z;return(0,We.Jh)(this,function($){switch($.label){case 0:if(e=Jn(i),a=!1,(h=e.queries.get(o=t.query))||(a=!0,h=new vD),!a)return[3,4];$.label=1;case 1:return $.trys.push([1,3,,4]),v=h,[4,e.onListen(o)];case 2:return v.Wr=$.sent(),[3,4];case 3:return k=$.sent(),z=Vy(k,"Initialization of query '"+k1(t.query)+"' failed"),[2,void t.onError(z)];case 4:return e.queries.set(o,h),h.listeners.push(t),t.zr(e.onlineState),h.Wr&&t.Hr(h.Wr)&&sC(e),[2]}})})}function rC(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,h,v;return(0,We.Jh)(this,function(k){return e=Jn(i),a=!1,(h=e.queries.get(o=t.query))&&(v=h.listeners.indexOf(t))>=0&&(h.listeners.splice(v,1),a=0===h.listeners.length),a?[2,(e.queries.delete(o),e.onUnlisten(o))]:[2]})})}function xD(i,t){for(var e=Jn(i),o=!1,a=0,h=t;a<h.length;a++){var v=h[a],z=e.queries.get(v.query);if(z){for(var $=0,oe=z.listeners;$<oe.length;$++)oe[$].Hr(v)&&(o=!0);z.Wr=v}}o&&sC(e)}function oC(i,t,e){var o=Jn(i),a=o.queries.get(t);if(a)for(var h=0,v=a.listeners;h<v.length;h++)v[h].onError(e);o.queries.delete(t)}function sC(i){i.Gr.forEach(function(t){t.next()})}var aC=function(){function i(t,e,o){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=o||{}}return i.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],o=0,a=t.docChanges;o<a.length;o++){var h=a[o];3!==h.type&&e.push(h)}t=new R0(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var v=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),v=!0):this.eo(t,this.onlineState)&&(this.no(t),v=!0),this.Xr=t,v},i.prototype.onError=function(t){this.Jr.error(t)},i.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},i.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},i.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},i.prototype.no=function(t){t=R0.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},i}(),NT=function(){function i(t,e){this.payload=t,this.byteLength=e}return i.prototype.io=function(){return"metadata"in this.payload},i}(),O0=function(){function i(t){this.R=t}return i.prototype.qn=function(t){return Xu(this.R,t)},i.prototype.Un=function(t){return t.metadata.exists?XE(this.R,t.document,!1):Dl.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},i.prototype.Kn=function(t){return Il(t)},i}();!function(){function i(t,e,o){this.ro=t,this.localStore=e,this.R=o,this.queries=[],this.documents=[],this.progress=function(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}(t)}i.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},i.prototype.co=function(t){for(var e=new Map,o=new O0(this.R),a=0,h=t;a<h.length;a++){var v=h[a];if(v.metadata.queries)for(var k=o.qn(v.metadata.name),z=0,$=v.metadata.queries;z<$.length;z++){var oe=$[z],me=(e.get(oe)||lo()).add(k);e.set(oe,me)}}return e},i.prototype.complete=function(){return(0,We.mG)(this,void 0,void 0,function(){var t,e,o,a,h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return[4,DT(this.localStore,new O0(this.R),this.documents,this.ro.id)];case 1:t=v.sent(),e=this.co(this.documents),o=0,a=this.queries,v.label=2;case 2:return o<a.length?[4,sD(this.localStore,h=a[o],e.get(h.name))]:[3,5];case 3:v.sent(),v.label=4;case 4:return o++,[3,2];case 5:return[2,(this.progress.taskState="Success",new iD(Object.assign({},this.progress),t))]}})})}}();var BT=function(i){this.key=i},zT=function(i){this.key=i},VT=function(){function i(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=lo(),this.mutatedKeys=lo(),this.lo=DE(t),this.fo=new LT(this.lo)}return Object.defineProperty(i.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),i.prototype._o=function(t,e){var o=this,a=e?e.mo:new P0,h=e?e.fo:this.fo,v=e?e.mutatedKeys:this.mutatedKeys,k=h,z=!1,$=_b(this.query)&&h.size===this.query.limit?h.last():null,oe=o0(this.query)&&h.size===this.query.limit?h.first():null;if(t.inorderTraversal(function(ke,Fe){var je=h.get(ke),ct=vb(o.query,Fe)?Fe:null,kt=!!je&&o.mutatedKeys.has(je.key),Qt=!!ct&&(ct.hasLocalMutations||o.mutatedKeys.has(ct.key)&&ct.hasCommittedMutations),Sn=!1;je&&ct?je.data.isEqual(ct.data)?kt!==Qt&&(a.track({type:3,doc:ct}),Sn=!0):o.yo(je,ct)||(a.track({type:2,doc:ct}),Sn=!0,($&&o.lo(ct,$)>0||oe&&o.lo(ct,oe)<0)&&(z=!0)):!je&&ct?(a.track({type:0,doc:ct}),Sn=!0):je&&!ct&&(a.track({type:1,doc:je}),Sn=!0,($||oe)&&(z=!0)),Sn&&(ct?(k=k.add(ct),v=Qt?v.add(ke):v.delete(ke)):(k=k.delete(ke),v=v.delete(ke)))}),_b(this.query)||o0(this.query))for(;k.size>this.query.limit;){var me=_b(this.query)?k.last():k.first();k=k.delete(me.key),v=v.delete(me.key),a.track({type:1,doc:me})}return{fo:k,mo:a,Nn:z,mutatedKeys:v}},i.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},i.prototype.applyChanges=function(t,e,o){var a=this,h=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var v=t.mo.jr();v.sort(function(oe,me){return Fe=me.type,(je=function(ct){switch(ct){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vi()}})(oe.type)-je(Fe)||a.lo(oe.doc,me.doc);var Fe,je}),this.po(o);var k=e?this.Eo():[],z=0===this.ho.size&&this.current?1:0,$=z!==this.ao;return this.ao=z,0!==v.length||$?{snapshot:new R0(this.query,t.fo,h,v,t.mutatedKeys,0===z,$,!1),To:k}:{To:k}},i.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new P0,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},i.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},i.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(o){return e.uo=e.uo.add(o)}),t.modifiedDocuments.forEach(function(o){}),t.removedDocuments.forEach(function(o){return e.uo=e.uo.delete(o)}),this.current=t.current)},i.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=lo(),this.fo.forEach(function(a){t.Io(a.key)&&(t.ho=t.ho.add(a.key))});var o=[];return e.forEach(function(a){t.ho.has(a)||o.push(new zT(a))}),this.ho.forEach(function(a){e.has(a)||o.push(new BT(a))}),o},i.prototype.Ao=function(t){this.uo=t.Bn,this.ho=lo();var e=this._o(t.documents);return this.applyChanges(e,!0)},i.prototype.Ro=function(){return R0.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},i}(),SD=function(i,t,e){this.query=i,this.targetId=t,this.view=e},ED=function(i){this.key=i,this.bo=!1},TD=function(){function i(t,e,o,a,h,v){this.localStore=t,this.remoteStore=e,this.eventManager=o,this.sharedClientState=a,this.currentUser=h,this.maxConcurrentLimboResolutions=v,this.vo={},this.Po=new Sp(function(k){return kE(k)},yb),this.Vo=new Map,this.So=new Set,this.Do=new ec(Ai.comparator),this.Co=new Map,this.No=new S0,this.xo={},this.Fo=new Map,this.ko=_0.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(i.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),i}();function Bb(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,a,h,v,k;return(0,We.Jh)(this,function(z){switch(z.label){case 0:return e=sl(i),(h=e.Po.get(t))?(e.sharedClientState.addLocalQueryTarget(h.targetId),a=h.view.Ro(),[3,4]):[3,1];case 1:return[4,Py(e.localStore,Hh(t))];case 2:return v=z.sent(),k=e.sharedClientState.addLocalQueryTarget(v.targetId),[4,lC(e,t,v.targetId,"current"===k)];case 3:a=z.sent(),e.isPrimaryClient&&Ly(e.remoteStore,v),z.label=4;case 4:return[2,a]}})})}function lC(i,t,e,o){return(0,We.mG)(this,void 0,void 0,function(){var a,h,v,k,z,$;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return i.Oo=function(me,ke,Fe){return function(je,ct,kt,Qt){return(0,We.mG)(this,void 0,void 0,function(){var Sn,xn,Xn;return(0,We.Jh)(this,function(ni){switch(ni.label){case 0:return(Sn=ct.view._o(kt)).Nn?[4,Db(je.localStore,ct.query,!1).then(function(Qi){return ct.view._o(Qi.documents,Sn)})]:[3,2];case 1:Sn=ni.sent(),ni.label=2;case 2:return xn=Qt&&Qt.targetChanges.get(ct.targetId),Xn=ct.view.applyChanges(Sn,je.isPrimaryClient,xn),[2,(hC(je,ct.targetId,Xn.To),Xn.snapshot)]}})})}(i,me,ke,Fe)},[4,Db(i.localStore,t,!0)];case 1:return a=oe.sent(),h=new VT(t,a.Bn),v=h._o(a.documents),k=B1.createSynthesizedTargetChangeForCurrentChange(e,o&&"Offline"!==i.onlineState),z=h.applyChanges(v,i.isPrimaryClient,k),hC(i,e,z.To),$=new SD(t,e,h),[2,(i.Po.set(t,$),i.Vo.has(e)?i.Vo.get(e).push(t):i.Vo.set(e,[t]),z.snapshot)]}})})}function MD(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return e=Jn(i),o=e.Po.get(t),(a=e.Vo.get(o.targetId)).length>1?[2,(e.Vo.set(o.targetId,a.filter(function(v){return!yb(v,t)})),void e.Po.delete(t))]:e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(o.targetId),e.sharedClientState.isActiveQueryTarget(o.targetId)?[3,2]:[4,Ry(e.localStore,o.targetId,!1).then(function(){e.sharedClientState.clearQueryState(o.targetId),Ny(e.remoteStore,o.targetId),o_(e,o.targetId)}).catch(e_)]):[3,3];case 1:h.sent(),h.label=2;case 2:return[3,5];case 3:return o_(e,o.targetId),[4,Ry(e.localStore,o.targetId,!0)];case 4:h.sent(),h.label=5;case 5:return[2]}})})}function UT(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,h,v;return(0,We.Jh)(this,function(k){switch(k.label){case 0:o=F0(i),k.label=1;case 1:return k.trys.push([1,5,,6]),[4,(z=o.localStore,$=t,me=Jn(z),ke=Mc.now(),Fe=$.reduce(function(je,ct){return je.add(ct.key)},lo()),me.persistence.runTransaction("Locally write mutations","readwrite",function(je){return me.Mn.pn(je,Fe).next(function(ct){oe=ct;for(var kt=[],Qt=0,Sn=$;Qt<Sn.length;Qt++){var xn=Sn[Qt],Xn=NE(xn,oe.get(xn.key));null!=Xn&&kt.push(new xm(xn.key,Xn,xE(Xn.value.mapValue),Kl.exists(!0)))}return me._n.addMutationBatch(je,ke,kt,$)})}).then(function(je){return je.applyToLocalDocumentSet(oe),{batchId:je.batchId,changes:oe}}))];case 2:return a=k.sent(),o.sharedClientState.addPendingMutation(a.batchId),function(z,$,oe){var me=z.xo[z.currentUser.toKey()];me||(me=new ec(Mr)),me=me.insert($,oe),z.xo[z.currentUser.toKey()]=me}(o,a.batchId,e),[4,Om(o,a.changes)];case 3:return k.sent(),[4,Fb(o.remoteStore)];case 4:return k.sent(),[3,6];case 5:return h=k.sent(),v=Vy(h,"Failed to persist write"),e.reject(v),[3,6];case 6:return[2]}var z,$,oe,me,ke,Fe})})}function Uy(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o;return(0,We.Jh)(this,function(a){switch(a.label){case 0:e=Jn(i),a.label=1;case 1:return a.trys.push([1,4,,6]),[4,GP(e.localStore,t)];case 2:return o=a.sent(),t.targetChanges.forEach(function(h,v){var k=e.Co.get(v);k&&(qi(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?k.bo=!0:h.modifiedDocuments.size>0?qi(k.bo):h.removedDocuments.size>0&&(qi(k.bo),k.bo=!1))}),[4,Om(e,o,t)];case 3:return a.sent(),[3,6];case 4:return[4,e_(a.sent())];case 5:return a.sent(),[3,6];case 6:return[2]}})})}function AD(i,t,e){var o=Jn(i);if(o.isPrimaryClient&&0===e||!o.isPrimaryClient&&1===e){var a=[];o.Po.forEach(function(h,v){var k=v.view.zr(t);k.snapshot&&a.push(k.snapshot)}),function(h,v){var k=Jn(h);k.onlineState=v;var z=!1;k.queries.forEach(function($,oe){for(var me=0,ke=oe.listeners;me<ke.length;me++)ke[me].zr(v)&&(z=!0)}),z&&sC(k)}(o.eventManager,t),a.length&&o.vo._r(a),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function HT(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,h,v,k,z;return(0,We.Jh)(this,function($){switch($.label){case 0:return(o=Jn(i)).sharedClientState.updateQueryState(t,"rejected",e),a=o.Co.get(t),(h=a&&a.key)?(v=(v=new ec(Ai.comparator)).insert(h,Dl.newNoDocument(h,gr.min())),k=lo().add(h),z=new u0(gr.min(),new Map,new Ca(Mr),v,k),[4,Uy(o,z)]):[3,2];case 1:return $.sent(),o.Do=o.Do.remove(h),o.Co.delete(t),jT(o),[3,4];case 2:return[4,Ry(o.localStore,t,!1).then(function(){return o_(o,t,e)}).catch(e_)];case 3:$.sent(),$.label=4;case 4:return[2]}})})}function kD(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:e=Jn(i),o=t.batch.batchId,h.label=1;case 1:return h.trys.push([1,4,,6]),[4,TT(e.localStore,t)];case 2:return a=h.sent(),uC(e,o,null),cC(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),[4,Om(e,a)];case 3:return h.sent(),[3,6];case 4:return[4,e_(h.sent())];case 5:return h.sent(),[3,6];case 6:return[2]}})})}function DD(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:o=Jn(i),h.label=1;case 1:return h.trys.push([1,4,,6]),[4,(v=o.localStore,k=t,z=Jn(v),z.persistence.runTransaction("Reject batch","readwrite-primary",function($){var oe;return z._n.lookupMutationBatch($,k).next(function(me){return qi(null!==me),oe=me.keys(),z._n.removeMutationBatch($,me)}).next(function(){return z._n.performConsistencyCheck($)}).next(function(){return z.Mn.pn($,oe)})}))];case 2:return a=h.sent(),uC(o,t,e),cC(o,t),o.sharedClientState.updateMutationState(t,"rejected",e),[4,Om(o,a)];case 3:return h.sent(),[3,6];case 4:return[4,e_(h.sent())];case 5:return h.sent(),[3,6];case 6:return[2]}var v,k,z})})}function ID(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,h,v;return(0,We.Jh)(this,function(k){switch(k.label){case 0:Cf((e=Jn(i)).remoteStore)||Gn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,(z=e.localStore,$=Jn(z),$.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(oe){return $._n.getHighestUnacknowledgedBatchId(oe)}))];case 2:return-1===(o=k.sent())?[2,void t.resolve()]:((a=e.Fo.get(o)||[]).push(t),e.Fo.set(o,a),[3,4]);case 3:return h=k.sent(),v=Vy(h,"Initialization of waitForPendingWrites() operation failed"),t.reject(v),[3,4];case 4:return[2]}var z,$})})}function cC(i,t){(i.Fo.get(t)||[]).forEach(function(e){e.resolve()}),i.Fo.delete(t)}function uC(i,t,e){var o=Jn(i),a=o.xo[o.currentUser.toKey()];if(a){var h=a.get(t);h&&(e?h.reject(e):h.resolve(),a=a.remove(t)),o.xo[o.currentUser.toKey()]=a}}function o_(i,t,e){void 0===e&&(e=null),i.sharedClientState.removeLocalQueryTarget(t);for(var o=0,a=i.Vo.get(t);o<a.length;o++){var h=a[o];i.Po.delete(h),e&&i.vo.Mo(h,e)}i.Vo.delete(t),i.isPrimaryClient&&i.No.Zn(t).forEach(function(v){i.No.containsKey(v)||GT(i,v)})}function GT(i,t){i.So.delete(t.path.canonicalString());var e=i.Do.get(t);null!==e&&(Ny(i.remoteStore,e),i.Do=i.Do.remove(t),i.Co.delete(e),jT(i))}function hC(i,t,e){for(var o=0,a=e;o<a.length;o++){var h=a[o];h instanceof BT?(i.No.addReference(h.key,t),qP(i,h)):h instanceof zT?(Gn("SyncEngine","Document no longer in limbo: "+h.key),i.No.removeReference(h.key,t),i.No.containsKey(h.key)||GT(i,h.key)):vi()}}function qP(i,t){var e=t.key,o=e.path.canonicalString();i.Do.get(e)||i.So.has(o)||(Gn("SyncEngine","New document in limbo: "+e),i.So.add(o),jT(i))}function jT(i){for(;i.So.size>0&&i.Do.size<i.maxConcurrentLimboResolutions;){var t=i.So.values().next().value;i.So.delete(t);var e=new Ai(to.fromString(t)),o=i.ko.next();i.Co.set(o,new ED(e)),i.Do=i.Do.insert(e,o),Ly(i.remoteStore,new f0(Hh(Gg(e.path)),o,2,cu.o))}}function Om(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,h,v;return(0,We.Jh)(this,function(k){switch(k.label){case 0:return o=Jn(i),a=[],h=[],v=[],o.Po.isEmpty()?[3,3]:(o.Po.forEach(function(z,$){v.push(o.Oo($,t,e).then(function(oe){if(oe){o.isPrimaryClient&&o.sharedClientState.updateQueryState($.targetId,oe.fromCache?"not-current":"current"),a.push(oe);var me=rD.Pn($.targetId,oe);h.push(me)}}))}),[4,Promise.all(v)]);case 1:return k.sent(),o.vo._r(a),[4,function(z,$){return(0,We.mG)(this,void 0,void 0,function(){var oe,me,ke,Fe,je,ct,kt,Sn;return(0,We.Jh)(this,function(xn){switch(xn.label){case 0:oe=Jn(z),xn.label=1;case 1:return xn.trys.push([1,3,,4]),[4,oe.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Xn){return Fn.forEach($,function(ni){return Fn.forEach(ni.bn,function(Qi){return oe.persistence.referenceDelegate.addReference(Xn,ni.targetId,Qi)}).next(function(){return Fn.forEach(ni.vn,function(Qi){return oe.persistence.referenceDelegate.removeReference(Xn,ni.targetId,Qi)})})})})];case 2:return xn.sent(),[3,4];case 3:if(!Xg(me=xn.sent()))throw me;return Gn("LocalStore","Failed to update sequence numbers: "+me),[3,4];case 4:for(ke=0,Fe=$;ke<Fe.length;ke++)ct=(je=Fe[ke]).targetId,je.fromCache||(kt=oe.Fn.get(ct),Sn=kt.withLastLimboFreeSnapshotVersion(kt.snapshotVersion),oe.Fn=oe.Fn.insert(ct,Sn));return[2]}})})}(o.localStore,h)];case 2:k.sent(),k.label=3;case 3:return[2]}})})}function dC(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o;return(0,We.Jh)(this,function(a){switch(a.label){case 0:return(e=Jn(i)).currentUser.isEqual(t)?[3,3]:(Gn("SyncEngine","User change. New user:",t.toKey()),[4,km(e.localStore,t)]);case 1:return o=a.sent(),e.currentUser=t,(h=e).Fo.forEach(function(k){k.forEach(function(z){z.reject(new Dn(rn.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Fo.clear(),e.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),[4,Om(e,o.Ln)];case 2:a.sent(),a.label=3;case 3:return[2]}var h})})}function PD(i,t){var e=Jn(i),o=e.Co.get(t);if(o&&o.bo)return lo().add(o.key);var a=lo(),h=e.Vo.get(t);if(!h)return a;for(var v=0,k=h;v<k.length;v++){var $=e.Po.get(k[v]);a=a.unionWith($.view.wo)}return a}function RD(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return[4,Db((e=Jn(i)).localStore,t.query,!0)];case 1:return o=h.sent(),a=t.view.Ao(o),[2,(e.isPrimaryClient&&hC(e,t.targetId,a.To),a)]}})})}function OD(i){return(0,We.mG)(this,void 0,void 0,function(){var t;return(0,We.Jh)(this,function(e){return[2,C0((t=Jn(i)).localStore).then(function(o){return Om(t,o)})]})})}function FD(i,t,e,o){return(0,We.mG)(this,void 0,void 0,function(){var a,h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return[4,(k=(a=Jn(i)).localStore,z=t,$=Jn(k),oe=Jn($._n),$.persistence.runTransaction("Lookup mutation documents","readonly",function(me){return oe.jt(me,z).next(function(ke){return ke?$.Mn.pn(me,ke):Fn.resolve(null)})}))];case 1:return null===(h=v.sent())?[3,6]:"pending"!==e?[3,3]:[4,Fb(a.remoteStore)];case 2:return v.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(uC(a,t,o||null),cC(a,t),function(k,z){Jn(Jn(k)._n).Gt(z)}(a.localStore,t)):vi(),v.label=4;case 4:return[4,Om(a,h)];case 5:return v.sent(),[3,7];case 6:Gn("SyncEngine","Cannot apply mutation batch with id: "+t),v.label=7;case 7:return[2]}var k,z,$,oe})})}function LD(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,h,v,z,$;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return sl(e=Jn(i)),F0(e),!0!==t||!0===e.$o?[3,3]:(o=e.sharedClientState.getAllActiveQueryTargets(),[4,YT(e,o.toArray())]);case 1:return a=oe.sent(),e.$o=!0,[4,FT(e.remoteStore,!0)];case 2:for(oe.sent(),h=0,v=a;h<v.length;h++)Ly(e.remoteStore,v[h]);return[3,7];case 3:return!1!==t||!1===e.$o?[3,7]:(z=[],$=Promise.resolve(),e.Vo.forEach(function(me,ke){e.sharedClientState.isLocalQueryTarget(ke)?z.push(ke):$=$.then(function(){return o_(e,ke),Ry(e.localStore,ke,!0)}),Ny(e.remoteStore,ke)}),[4,$]);case 4:return oe.sent(),[4,YT(e,z)];case 5:return oe.sent(),(ke=Jn(e)).Co.forEach(function(Fe,je){Ny(ke.remoteStore,je)}),ke.No.ts(),ke.Co=new Map,ke.Do=new ec(Ai.comparator),e.$o=!1,[4,FT(e.remoteStore,!1)];case 6:oe.sent(),oe.label=7;case 7:return[2]}var ke})})}function YT(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,h,v,k,z,$,oe,me,ke,je,ct,kt;return(0,We.Jh)(this,function(Qt){switch(Qt.label){case 0:o=Jn(i),a=[],h=[],v=0,k=t,Qt.label=1;case 1:return v<k.length?($=void 0,(oe=o.Vo.get(z=k[v]))&&0!==oe.length?[4,Py(o.localStore,Hh(oe[0]))]:[3,7]):[3,13];case 2:$=Qt.sent(),me=0,ke=oe,Qt.label=3;case 3:return me<ke.length?(je=o.Po.get(ke[me]),[4,RD(o,je)]):[3,6];case 4:(ct=Qt.sent()).snapshot&&h.push(ct.snapshot),Qt.label=5;case 5:return me++,[3,3];case 6:return[3,11];case 7:return[4,K1(o.localStore,z)];case 8:return kt=Qt.sent(),[4,Py(o.localStore,kt)];case 9:return $=Qt.sent(),[4,lC(o,pC(kt),z,!1)];case 10:Qt.sent(),Qt.label=11;case 11:a.push($),Qt.label=12;case 12:return v++,[3,1];case 13:return[2,(o.vo._r(h),a)]}})})}function pC(i){return E1(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function fC(i){var t=Jn(i);return Jn(Jn(t.localStore).persistence).fn()}function ND(i,t,e,o){return(0,We.mG)(this,void 0,void 0,function(){var a,h,v;return(0,We.Jh)(this,function(k){switch(k.label){case 0:return(a=Jn(i)).$o?(Gn("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!a.Vo.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,C0(a.localStore)];case 3:return h=k.sent(),v=u0.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,Om(a,h,v)];case 4:return k.sent(),[3,8];case 5:return[4,Ry(a.localStore,t,!0)];case 6:return k.sent(),o_(a,t,o),[3,8];case 7:vi(),k.label=8;case 8:return[2]}})})}function Hy(i,t,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,h,v,k,z,$,oe,me;return(0,We.Jh)(this,function(Fe){switch(Fe.label){case 0:if(!(o=sl(i)).$o)return[3,10];a=0,h=t,Fe.label=1;case 1:return a<h.length?o.Vo.has(v=h[a])?(Gn("SyncEngine","Adding an already active target "+v),[3,5]):[4,K1(o.localStore,v)]:[3,6];case 2:return k=Fe.sent(),[4,Py(o.localStore,k)];case 3:return z=Fe.sent(),[4,lC(o,pC(k),z.targetId,!1)];case 4:Fe.sent(),Ly(o.remoteStore,z),Fe.label=5;case 5:return a++,[3,1];case 6:$=function(je){return(0,We.Jh)(this,function(ct){switch(ct.label){case 0:return o.Vo.has(je)?[4,Ry(o.localStore,je,!1).then(function(){Ny(o.remoteStore,je),o_(o,je)}).catch(e_)]:[3,2];case 1:ct.sent(),ct.label=2;case 2:return[2]}})},oe=0,me=e,Fe.label=7;case 7:return oe<me.length?[5,$(me[oe])]:[3,10];case 8:Fe.sent(),Fe.label=9;case 9:return oe++,[3,7];case 10:return[2]}})})}function sl(i){var t=Jn(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=Uy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=PD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=HT.bind(null,t),t.vo._r=xD.bind(null,t.eventManager),t.vo.Mo=oC.bind(null,t.eventManager),t}function F0(i){var t=Jn(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DD.bind(null,t),t}var L0=function(){function i(){this.synchronizeTabs=!1}return i.prototype.initialize=function(t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(e){switch(e.label){case 0:return this.R=Fy(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},i.prototype.Uo=function(t){return null},i.prototype.Ko=function(t){return kb(this.persistence,new ET,t.initialUser,this.R)},i.prototype.qo=function(t){return new Ib(Dm.bs,this.R)},i.prototype.Bo=function(t){return new cD},i.prototype.terminate=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},i}(),qT=function(i){function t(e,o,a){var h=this;return(h=i.call(this)||this).Qo=e,h.cacheSizeBytes=o,h.forceOwnership=a,h.synchronizeTabs=!1,h}return(0,We.ZT)(t,i),t.prototype.initialize=function(e){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return[4,i.prototype.initialize.call(this,e)];case 1:return o.sent(),[4,kT(this.localStore)];case 2:return o.sent(),[4,this.Qo.initialize(this,e)];case 3:return o.sent(),[4,F0(this.Qo.syncEngine)];case 4:return o.sent(),[4,Fb(this.Qo.remoteStore)];case 5:return o.sent(),[2]}})})},t.prototype.Ko=function(e){return kb(this.persistence,new ET,e.initialUser,this.R)},t.prototype.Uo=function(e){return new Kk(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)},t.prototype.qo=function(e){var o=ST(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Yh.withCacheSize(this.cacheSizeBytes):Yh.DEFAULT;return new nD(this.synchronizeTabs,o,e.clientId,a,e.asyncQueue,eC(),k0(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new cD},t}(L0),ZT=function(i){function t(e,o){var a=this;return(a=i.call(this,e,o,!1)||this).Qo=e,a.cacheSizeBytes=o,a.synchronizeTabs=!0,a}return(0,We.ZT)(t,i),t.prototype.initialize=function(e){return(0,We.mG)(this,void 0,void 0,function(){var o,a=this;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return[4,i.prototype.initialize.call(this,e)];case 1:return h.sent(),o=this.Qo.syncEngine,this.sharedClientState instanceof A0?(this.sharedClientState.syncEngine={ui:FD.bind(null,o),ai:ND.bind(null,o),hi:Hy.bind(null,o),fn:fC.bind(null,o),ci:OD.bind(null,o)},[4,this.sharedClientState.start()]):[3,3];case 2:h.sent(),h.label=3;case 3:return[4,this.persistence.He(function(v){return(0,We.mG)(a,void 0,void 0,function(){return(0,We.Jh)(this,function(k){switch(k.label){case 0:return[4,LD(this.Qo.syncEngine,v)];case 1:return k.sent(),this.gcScheduler&&(v&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):v||this.gcScheduler.stop()),[2]}})})})];case 4:return h.sent(),[2]}})})},t.prototype.Bo=function(e){var o=eC();if(!A0.yt(o))throw new Dn(rn.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var a=ST(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new A0(o,e.asyncQueue,a,e.clientId,e.initialUser)},t}(qT),N0=function(){function i(){}return i.prototype.initialize=function(t,e){return(0,We.mG)(this,void 0,void 0,function(){var o=this;return(0,We.Jh)(this,function(a){switch(a.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(h){return AD(o.syncEngine,h,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dC.bind(null,this.syncEngine),[4,FT(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:a.sent(),a.label=2;case 2:return[2]}})})},i.prototype.createEventManager=function(t){return new bD},i.prototype.createDatastore=function(t){var o=Fy(t.databaseInfo.databaseId),a=new Pd(t.databaseInfo);return new i_(t.credentials,a,o)},i.prototype.createRemoteStore=function(t){var e,o,a,h,v,k=this;return e=this.localStore,o=this.datastore,a=t.asyncQueue,h=function(z){return AD(k.syncEngine,z,0)},v=PT.yt()?new PT:new uD,new RT(e,o,a,h,v)},i.prototype.createSyncEngine=function(t,e){return $=e,oe=new TD(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions),$&&(oe.$o=!0),oe;var $,oe},i.prototype.terminate=function(){return function(t){return(0,We.mG)(this,void 0,void 0,function(){var e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return e=Jn(t),Gn("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Ep(e)];case 1:return o.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},i}(),B0=function(){function i(t){this.observer=t,this.muted=!1}return i.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},i.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},i.prototype.Wo=function(){this.muted=!0},i.prototype.jo=function(t,e){var o=this;this.muted||setTimeout(function(){o.muted||t(e)},0)},i}(),zD=(function(){function i(t,e){var o=this;this.Go=t,this.R=e,this.metadata=new nc,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(a){a&&a.io()?o.metadata.resolve(a.payload.metadata):o.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==a?void 0:a.payload)))},function(a){return o.metadata.reject(a)})}i.prototype.close=function(){return this.Go.cancel()},i.prototype.getMetadata=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){return[2,this.metadata.promise]})})},i.prototype.Lo=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},i.prototype.Ho=function(){return(0,We.mG)(this,void 0,void 0,function(){var t,e,o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return[4,this.Jo()];case 1:return null===(t=h.sent())?[2,null]:(e=this.zo.decode(t),o=Number(e),isNaN(o)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(o)]);case 2:return a=h.sent(),[2,new NT(JSON.parse(a),t.length+o)]}})})},i.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},i.prototype.Jo=function(){return(0,We.mG)(this,void 0,void 0,function(){var t,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(o.sent())return[3,3];o.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},i.prototype.Xo=function(t){return(0,We.mG)(this,void 0,void 0,function(){var e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:o.sent()&&this.Yo("Reached the end of bundle when more is expected."),o.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},i.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},i.prototype.tc=function(){return(0,We.mG)(this,void 0,void 0,function(){var t,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return[4,this.Go.read()];case 1:return(t=o.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function i(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return i.prototype.lookup=function(t){return(0,We.mG)(this,void 0,void 0,function(){var e,o=this;return(0,We.Jh)(this,function(a){switch(a.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Dn(rn.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(h,v){return(0,We.mG)(this,void 0,void 0,function(){var k,z,$,oe,me,ke;return(0,We.Jh)(this,function(Fe){switch(Fe.label){case 0:return k=Jn(h),z=wy(k.R)+"/documents",$={documents:v.map(function(je){return xy(k.R,je)})},[4,k.$i("BatchGetDocuments",z,$)];case 1:return oe=Fe.sent(),me=new Map,oe.forEach(function(je){var kt,Qt,ct=(kt=k.R,"found"in(Qt=je)?function(Sn,xn){qi(!!xn.found);var Xn=Xu(Sn,xn.found.name),ni=Il(xn.found.updateTime),Qi=new hu({mapValue:{fields:xn.found.fields}});return Dl.newFoundDocument(Xn,ni,Qi)}(kt,Qt):"missing"in Qt?function(Sn,xn){qi(!!xn.missing),qi(!!xn.readTime);var Xn=Xu(Sn,xn.missing),ni=Il(xn.readTime);return Dl.newNoDocument(Xn,ni)}(kt,Qt):vi());me.set(ct.key.toString(),ct)}),ke=[],[2,(v.forEach(function(je){var ct=me.get(je.toString());qi(!!ct),ke.push(ct)}),ke)]}})})}(this.datastore,t)];case 1:return[2,((e=a.sent()).forEach(function(h){return o.recordVersion(h)}),e)]}})})},i.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},i.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(t.toString())},i.prototype.delete=function(t){this.write(new wm(t,this.precondition(t))),this.writtenDocs.add(t.toString())},i.prototype.commit=function(){return(0,We.mG)(this,void 0,void 0,function(){var t,e=this;return(0,We.Jh)(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(a){t.delete(a.key.toString())}),t.forEach(function(a,h){var v=Ai.fromPath(h);e.mutations.push(new gs(v,e.precondition(v)))}),[4,function(a,h){return(0,We.mG)(this,void 0,void 0,function(){var v,k,z;return(0,We.Jh)(this,function($){switch($.label){case 0:return v=Jn(a),k=wy(v.R)+"/documents",z={writes:h.map(function(oe){return h0(v.R,oe)})},[4,v.Ni("Commit",k,z)];case 1:return $.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return o.sent(),this.committed=!0,[2]}})})},i.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw vi();e=gr.min()}var o=this.readVersions.get(t.key.toString());if(o){if(!e.isEqual(o))throw new Dn(rn.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},i.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Kl.updateTime(e):Kl.none()},i.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(gr.min()))throw new Dn(rn.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kl.updateTime(e)}return Kl.exists(!0)},i.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},i.prototype.ensureCommitNotCalled=function(){},i}()),WT=function(){function i(t,e,o,a){this.asyncQueue=t,this.datastore=e,this.updateFunction=o,this.deferred=a,this.ec=5,this.Zi=new Rb(this.asyncQueue,"transaction_retry")}return i.prototype.run=function(){this.ec-=1,this.nc()},i.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,We.mG)(t,void 0,void 0,function(){var e,o,a=this;return(0,We.Jh)(this,function(h){return e=new zD(this.datastore),(o=this.sc(e))&&o.then(function(v){a.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){a.deferred.resolve(v)}).catch(function(k){a.ic(k)})})}).catch(function(v){a.ic(v)}),[2]})})})},i.prototype.sc=function(t){try{var e=this.updateFunction(t);return!gm(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(o){return this.deferred.reject(o),null}},i.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},i.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!L1(e)}return!1},i}(),VD=function(){function i(t,e,o){var a=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=o,this.user=Fa.UNAUTHENTICATED,this.clientId=f1.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(h){return(0,We.mG)(a,void 0,void 0,function(){return(0,We.Jh)(this,function(v){switch(v.label){case 0:return Gn("FirestoreClient","Received user=",h.uid),[4,this.credentialListener(h)];case 1:return v.sent(),this.user=h,[2]}})})})}return i.prototype.getConfiguration=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},i.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},i.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Dn(rn.FAILED_PRECONDITION,"The client has already been terminated.")},i.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new nc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,We.mG)(t,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return h.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:h.sent(),h.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:h.sent(),h.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return o=h.sent(),a=Vy(o,"Failed to shutdown persistence"),e.reject(a),[3,6];case 6:return[2]}})})}),e.promise},i}();function UD(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a=this;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return i.asyncQueue.verifyOperationInProgress(),Gn("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=h.sent(),[4,t.initialize(e)];case 2:return h.sent(),o=e.initialUser,i.setCredentialChangeListener(function(v){return(0,We.mG)(a,void 0,void 0,function(){return(0,We.Jh)(this,function(k){switch(k.label){case 0:return o.isEqual(v)?[3,2]:[4,km(t.localStore,v)];case 1:k.sent(),o=v,k.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=t,[2]}})})}function $T(i,t){return(0,We.mG)(this,void 0,void 0,function(){var e,o;return(0,We.Jh)(this,function(a){switch(a.label){case 0:return i.asyncQueue.verifyOperationInProgress(),[4,gC(i)];case 1:return e=a.sent(),Gn("FirestoreClient","Initializing OnlineComponentProvider"),[4,i.getConfiguration()];case 2:return o=a.sent(),[4,t.initialize(e,o)];case 3:return a.sent(),i.setCredentialChangeListener(function(h){return function(v,k){return(0,We.mG)(this,void 0,void 0,function(){var z,$;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return(z=Jn(v)).asyncQueue.verifyOperationInProgress(),Gn("RemoteStore","RemoteStore received new credentials"),$=Cf(z),z.Or.add(3),[4,Ep(z)];case 1:return oe.sent(),$&&z.Br.set("Unknown"),[4,z.remoteSyncer.handleCredentialChange(k)];case 2:return oe.sent(),z.Or.delete(3),[4,r_(z)];case 3:return oe.sent(),[2]}})})}(t.remoteStore,h)}),i.onlineComponents=t,[2]}})})}function gC(i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){switch(t.label){case 0:return i.offlineComponents?[3,2]:(Gn("FirestoreClient","Using default OfflineComponentProvider"),[4,UD(i,new L0)]);case 1:t.sent(),t.label=2;case 2:return[2,i.offlineComponents]}})})}function Sf(i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(t){switch(t.label){case 0:return i.onlineComponents?[3,2]:(Gn("FirestoreClient","Using default OnlineComponentProvider"),[4,$T(i,new N0)]);case 1:t.sent(),t.label=2;case 2:return[2,i.onlineComponents]}})})}function HD(i){return gC(i).then(function(t){return t.persistence})}function z0(i){return gC(i).then(function(t){return t.localStore})}function XT(i){return Sf(i).then(function(t){return t.remoteStore})}function QT(i){return Sf(i).then(function(t){return t.syncEngine})}function s_(i){return(0,We.mG)(this,void 0,void 0,function(){var t,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return[4,Sf(i)];case 1:return t=o.sent(),[2,((e=t.eventManager).onListen=Bb.bind(null,t.syncEngine),e.onUnlisten=MD.bind(null,t.syncEngine),e)]}})})}function JT(i,t,e){var o=this;void 0===e&&(e={});var a=new nc;return i.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(o,void 0,void 0,function(){var h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return h=function(k,z,$,oe,me){var ke=new B0({next:function(je){z.enqueueAndForget(function(){return rC(k,Fe)});var ct=je.docs.has($);!ct&&je.fromCache?me.reject(new Dn(rn.UNAVAILABLE,"Failed to get document because the client is offline.")):ct&&je.fromCache&&oe&&"server"===oe.source?me.reject(new Dn(rn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):me.resolve(je)},error:function(je){return me.reject(je)}}),Fe=new aC(Gg($.path),ke,{includeMetadataChanges:!0,so:!0});return iC(k,Fe)},[4,s_(i)];case 1:return[2,h.apply(void 0,[v.sent(),i.asyncQueue,t,e,a])]}})})}),a.promise}function V0(i,t,e){var o=this;void 0===e&&(e={});var a=new nc;return i.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(o,void 0,void 0,function(){var h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return h=function(k,z,$,oe,me){var ke=new B0({next:function(je){z.enqueueAndForget(function(){return rC(k,Fe)}),je.fromCache&&"server"===oe.source?me.reject(new Dn(rn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):me.resolve(je)},error:function(je){return me.reject(je)}}),Fe=new aC($,ke,{includeMetadataChanges:!0,so:!0});return iC(k,Fe)},[4,s_(i)];case 1:return[2,h.apply(void 0,[v.sent(),i.asyncQueue,t,e,a])]}})})}),a.promise}var KT=function(i,t,e,o,a,h,v,k){this.databaseId=i,this.appId=t,this.persistenceKey=e,this.host=o,this.ssl=a,this.forceLongPolling=h,this.autoDetectLongPolling=v,this.useFetchStreams=k},zb=function(){function i(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(i.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return t instanceof i&&t.projectId===this.projectId&&t.database===this.database},i}(),_C=new Map,yC=function(i,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+i},vC=function(){function i(){this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(null)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Fa.UNAUTHENTICATED)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),eM=function(){function i(t){this.token=t,this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(this.token)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(t,e){var o=this;this.changeListener=e,t.enqueueRetryable(function(){return e(o.token.user)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),tM=function(){function i(t){var e=this;this.currentUser=Fa.UNAUTHENTICATED,this.oc=new nc,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var o=function(a){Gn("FirebaseCredentialsProvider","Auth detected"),e.auth=a,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(a){return o(a)}),setTimeout(function(){if(!e.auth){var a=t.getImmediate({optional:!0});a?o(a):(Gn("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return i.prototype.getToken=function(){var t=this,e=this.cc,o=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(o).then(function(a){return t.cc!==e?(Gn("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):a?(qi("string"==typeof a.accessToken),new yC(a.accessToken,t.currentUser)):null}):Promise.resolve(null)},i.prototype.invalidateToken=function(){this.forceRefresh=!0},i.prototype.setChangeListener=function(t,e){var o=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,We.mG)(o,void 0,void 0,function(){return(0,We.Jh)(this,function(a){switch(a.label){case 0:return[4,this.oc.promise];case 1:return a.sent(),[4,e(this.currentUser)];case 2:return a.sent(),this.changeListener=e,[2]}})})})},i.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},i.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return qi(null===t||"string"==typeof t),new Fa(t)},i}(),nM=function(){function i(t,e,o){this.hc=t,this.lc=e,this.fc=o,this.type="FirstParty",this.user=Fa.FIRST_PARTY}return Object.defineProperty(i.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),i}(),GD=function(){function i(t,e,o){this.hc=t,this.lc=e,this.fc=o}return i.prototype.getToken=function(){return Promise.resolve(new nM(this.hc,this.lc,this.fc))},i.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Fa.FIRST_PARTY)})},i.prototype.removeChangeListener=function(){},i.prototype.invalidateToken=function(){},i}();function U0(i,t,e){if(!e)throw new Dn(rn.INVALID_ARGUMENT,"Function "+i+"() cannot be called with an empty "+t+".")}function a_(i,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Dn(rn.INVALID_ARGUMENT,"Invalid options passed to function "+i+'(): You cannot specify both "merge" and "mergeFields".');return t}function bC(i,t,e,o){if(!0===t&&!0===o)throw new Dn(rn.INVALID_ARGUMENT,i+" and "+e+" cannot be used together.")}function xC(i){if(!Ai.isDocumentKey(i))throw new Dn(rn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+i+" has "+i.length+".")}function wC(i){if(Ai.isDocumentKey(i))throw new Dn(rn.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+i+" has "+i.length+".")}function Vb(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=i.substring(0,20)+"..."),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";var t=function(e){if(e.constructor){var o=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(o&&o.length>1)return o[1]}return null}(i);return t?"a custom "+t+" object":"an object"}return"function"==typeof i?"a function":vi()}function no(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Dn(rn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var e=Vb(i);throw new Dn(rn.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+e)}return i}function CC(i,t){if(t<=0)throw new Dn(rn.INVALID_ARGUMENT,"Function "+i+"() requires a positive number, but it was: "+t+".")}var iM=function(){function i(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Dn(rn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Dn(rn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,bC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return i.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},i}(),Gy=function(){function i(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iM({}),this._settingsFrozen=!1,t instanceof zb?(this._databaseId=t,this._credentials=new vC):(this._app=t,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Dn(rn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zb(o.options.projectId)}(t),this._credentials=new tM(e))}return Object.defineProperty(i.prototype,"app",{get:function(){if(!this._app)throw new Dn(rn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),i.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Dn(rn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iM(t),void 0!==t.credentials&&(this._credentials=function(e){if(!e)return new vC;switch(e.type){case"gapi":var o=e.client;return qi(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new GD(o,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Dn(rn.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},i.prototype._getSettings=function(){return this._settings},i.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},i.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},i.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},i.prototype._terminate=function(){return(e=_C.get(this))&&(Gn("ComponentProvider","Removing Datastore"),_C.delete(this),e.terminate()),Promise.resolve();var e},i}(),Ms=function(){function i(t,e,o){this.converter=e,this._key=o,this.type="document",this.firestore=t}return Object.defineProperty(i.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new Fm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),i.prototype.withConverter=function(t){return new i(this.firestore,t,this._key)},i}(),fu=function(){function i(t,e,o){this.converter=e,this._query=o,this.type="query",this.firestore=t}return i.prototype.withConverter=function(t){return new i(this.firestore,t,this._query)},i}(),Fm=function(i){function t(e,o,a){var h=this;return(h=i.call(this,e,o,Gg(a))||this)._path=a,h.type="collection",h}return(0,We.ZT)(t,i),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ms(this.firestore,null,new Ai(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(fu);function rM(i,t){for(var e,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(i=(0,Zr.m9)(i),U0("collection","path",t),i instanceof Gy)return wC(e=to.fromString.apply(to,(0,We.ev)([t],o))),new Fm(i,null,e);if(!(i instanceof Ms||i instanceof Fm))throw new Dn(rn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return wC(e=to.fromString.apply(to,(0,We.ev)([i.path],o)).child(to.fromString(t))),new Fm(i.firestore,null,e)}function Lm(i,t){for(var e,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(i=(0,Zr.m9)(i),1===arguments.length&&(t=f1.u()),U0("doc","path",t),i instanceof Gy)return xC(e=to.fromString.apply(to,(0,We.ev)([t],o))),new Ms(i,null,new Ai(e));if(!(i instanceof Ms||i instanceof Fm))throw new Dn(rn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return xC(e=i._path.child(to.fromString.apply(to,(0,We.ev)([t],o)))),new Ms(i.firestore,i instanceof Fm?i.converter:null,new Ai(e))}function jy(i,t){return i=(0,Zr.m9)(i),t=(0,Zr.m9)(t),(i instanceof Ms||i instanceof Fm)&&(t instanceof Ms||t instanceof Fm)&&i.firestore===t.firestore&&i.path===t.path&&i.converter===t.converter}function oM(i,t){return i=(0,Zr.m9)(i),t=(0,Zr.m9)(t),i instanceof fu&&t instanceof fu&&i.firestore===t.firestore&&yb(i._query,t._query)&&i.converter===t.converter}var SC=function(){function i(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Rb(this,"async_queue_retry"),this.Ic=function(){var o=k0();o&&Gn("AsyncQueue","Visibility state changed to "+o.visibilityState),t.Zi.Gi()};var e=k0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(i.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),i.prototype.enqueueAndForget=function(t){this.enqueue(t)},i.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},i.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=k0();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},i.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var o=new nc;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(o.resolve,o.reject),o.promise)}).then(function(){return o.promise})},i.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},i.prototype.bc=function(){return(0,We.mG)(this,void 0,void 0,function(){var t,e=this;return(0,We.Jh)(this,function(o){switch(o.label){case 0:if(0===this.wc.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return o.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Xg(t=o.sent()))throw t;return Gn("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),o.label=5;case 5:return[2]}})})},i.prototype.Rc=function(t){var e=this,o=this.dc.then(function(){return e.gc=!0,t().catch(function(a){throw e.yc=a,e.gc=!1,xa("INTERNAL UNHANDLED ERROR: ",(v=(h=a).message||"",h.stack&&(v=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),v)),a;var h,v}).then(function(a){return e.gc=!1,a})});return this.dc=o,o},i.prototype.enqueueAfterDelay=function(t,e,o){var a=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var h=ic.createAndSchedule(this,t,e,o,function(v){return a.vc(v)});return this.mc.push(h),h},i.prototype.Ac=function(){this.yc&&vi()},i.prototype.verifyOperationInProgress=function(){},i.prototype.Pc=function(){return(0,We.mG)(this,void 0,void 0,function(){var t;return(0,We.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},i.prototype.Vc=function(t){for(var e=0,o=this.mc;e<o.length;e++)if(o[e].timerId===t)return!0;return!1},i.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(v,k){return v.targetTimeMs-k.targetTimeMs});for(var o=0,a=e.mc;o<a.length;o++){var h=a[o];if(h.skipDelay(),"all"!==t&&h.timerId===t)break}return e.Pc()})},i.prototype.Dc=function(t){this.Tc.push(t)},i.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},i}();function Dc(i){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var o=t,a=0,h=["next","error","complete"];a<h.length;a++){var v=h[a];if(v in o&&"function"==typeof o[v])return!0}return!1}(i)}!function(){function i(){this._progressObserver={},this._taskCompletionResolver=new nc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}i.prototype.onProgress=function(t,e,o){this._progressObserver={next:t,error:e,complete:o}},i.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},i.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},i.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},i.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},i.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var ea=function(i){function t(e,o){var a=this;return(a=i.call(this,e,o)||this).type="firestore",a._queue=new SC,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return(0,We.ZT)(t,i),t.prototype._terminate=function(){return this._firestoreClient||YD(this),this._firestoreClient.terminate()},t}(Gy);function al(i){return i._firestoreClient||YD(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function YD(i){var t,h,k,e=i._freezeSettings(),o=(h=(null===(t=i._app)||void 0===t?void 0:t.options.appId)||"",new KT(i._databaseId,h,i._persistenceKey,(k=e).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,k.useFetchStreams));i._firestoreClient=new VD(i._credentials,i._queue,o)}function H0(i,t,e){var o=this,a=new nc;return i.asyncQueue.enqueue(function(){return(0,We.mG)(o,void 0,void 0,function(){var h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return v.trys.push([0,3,,4]),[4,UD(i,e)];case 1:return v.sent(),[4,$T(i,t)];case 2:return v.sent(),a.resolve(),[3,4];case 3:if(!("FirebaseError"===(k=h=v.sent()).name?k.code===rn.FAILED_PRECONDITION||k.code===rn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&k instanceof DOMException)||22===k.code||20===k.code||11===k.code))throw h;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+h),a.reject(h),[3,4];case 4:return[2]}var k})})}).then(function(){return a.promise})}function G0(i){if(i._initialized||i._terminated)throw new Dn(rn.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Od=function(){function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o=0;o<t.length;++o)if(0===t[o].length)throw new Dn(rn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Td(t)}return i.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},i}(),Ef=function(){function i(t){this._byteString=t}return i.fromBase64String=function(t){try{return new i(Jl.fromBase64String(t))}catch(e){throw new Dn(rn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},i.fromUint8Array=function(t){return new i(Jl.fromUint8Array(t))},i.prototype.toBase64=function(){return this._byteString.toBase64()},i.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},i.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},i.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},i}(),Tf=function(i){this._methodName=i},j0=function(){function i(t,e){if(!isFinite(t)||t<-90||t>90)throw new Dn(rn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Dn(rn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(i.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},i.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},i.prototype._compareTo=function(t){return Mr(this._lat,t._lat)||Mr(this._long,t._long)},i}(),qD=/^__.*__$/,ZD=function(){function i(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}return i.prototype.toMutation=function(t,e){return null!==this.fieldMask?new xm(t,this.data,this.fieldMask,e,this.fieldTransforms):new ki(t,this.data,e,this.fieldTransforms)},i}(),sM=function(){function i(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}return i.prototype.toMutation=function(t,e){return new xm(t,this.data,this.fieldMask,e,this.fieldTransforms)},i}();function EC(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vi()}}var Y0=function(){function i(t,e,o,a,h,v){this.settings=t,this.databaseId=e,this.R=o,this.ignoreUndefinedProperties=a,void 0===h&&this.Cc(),this.fieldTransforms=h||[],this.fieldMask=v||[]}return Object.defineProperty(i.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),i.prototype.xc=function(t){return new i(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},i.prototype.Fc=function(t){var e,o=null===(e=this.path)||void 0===e?void 0:e.child(t),a=this.xc({path:o,kc:!1});return a.$c(t),a},i.prototype.Oc=function(t){var e,o=null===(e=this.path)||void 0===e?void 0:e.child(t),a=this.xc({path:o,kc:!1});return a.Cc(),a},i.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},i.prototype.Lc=function(t){return W0(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},i.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},i.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},i.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(EC(this.Nc)&&qD.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},i}(),aM=function(){function i(t,e,o){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=o||Fy(t)}return i.prototype.Uc=function(t,e,o,a){return void 0===a&&(a=!1),new Y0({Nc:t,methodName:e,qc:o,path:Td.emptyPath(),kc:!1,Bc:a},this.databaseId,this.R,this.ignoreUndefinedProperties)},i}();function Nm(i){var t=i._freezeSettings(),e=Fy(i._databaseId);return new aM(i._databaseId,!!t.ignoreUndefinedProperties,e)}function Hb(i,t,e,o,a,h){void 0===h&&(h={});var v=i.Uc(h.merge||h.mergeFields?2:0,t,e,a);mM("Data must be an object, but it was:",v,o);var k,z,$=pM(o,v);if(h.merge)k=new my(v.fieldMask),z=v.fieldTransforms;else if(h.mergeFields){for(var oe=[],me=0,ke=h.mergeFields;me<ke.length;me++){var Fe=l_(t,ke[me],e);if(!v.contains(Fe))throw new Dn(rn.INVALID_ARGUMENT,"Field '"+Fe+"' is specified in your field mask but missing from your input data.");TC(oe,Fe)||oe.push(Fe)}k=new my(oe),z=v.fieldTransforms.filter(function(je){return k.covers(je.field)})}else k=null,z=v.fieldTransforms;return new ZD(new hu($),k,z)}var q0=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,We.ZT)(t,i),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw e.Lc(1===e.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Tf);function lM(i,t,e){return new Y0({Nc:3,qc:t.settings.qc,methodName:i._methodName,kc:e},t.databaseId,t.R,t.ignoreUndefinedProperties)}var cM=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,We.ZT)(t,i),t.prototype._toFieldTransform=function(e){return new kd(e.path,new jg)},t.prototype.isEqual=function(e){return e instanceof t},t}(Tf),uM=function(i){function t(e,o){var a=this;return(a=i.call(this,e)||this).Kc=o,a}return(0,We.ZT)(t,i),t.prototype._toFieldTransform=function(e){var o=lM(this,e,!0),a=this.Kc.map(function(v){return Zh(v,o)}),h=new vm(a);return new kd(e.path,h)},t.prototype.isEqual=function(e){return this===e},t}(Tf),WD=function(i){function t(e,o){var a=this;return(a=i.call(this,e)||this).Kc=o,a}return(0,We.ZT)(t,i),t.prototype._toFieldTransform=function(e){var o=lM(this,e,!0),a=this.Kc.map(function(v){return Zh(v,o)}),h=new bm(a);return new kd(e.path,h)},t.prototype.isEqual=function(e){return this===e},t}(Tf),hM=function(i){function t(e,o){var a=this;return(a=i.call(this,e)||this).Qc=o,a}return(0,We.ZT)(t,i),t.prototype._toFieldTransform=function(e){var o=new Yg(e.R,RE(e.R,this.Qc));return new kd(e.path,o)},t.prototype.isEqual=function(e){return this===e},t}(Tf);function Z0(i,t,e,o){var a=i.Uc(1,t,e);mM("Data must be an object, but it was:",a,o);var h=[],v=hu.empty();mm(o,function(z,$){var oe=Gb(t,z,e);$=(0,Zr.m9)($);var me=a.Oc(oe);if($ instanceof q0)h.push(oe);else{var ke=Zh($,me);null!=ke&&(h.push(oe),v.set(oe,ke))}});var k=new my(h);return new sM(v,k,a.fieldTransforms)}function dM(i,t,e,o,a,h){var v=i.Uc(1,t,e),k=[l_(t,o,e)],z=[a];if(h.length%2!=0)throw new Dn(rn.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var $=0;$<h.length;$+=2)k.push(l_(t,h[$])),z.push(h[$+1]);for(var oe=[],me=hu.empty(),ke=k.length-1;ke>=0;--ke)if(!TC(oe,k[ke])){var Fe=k[ke],je=z[ke];je=(0,Zr.m9)(je);var ct=v.Oc(Fe);if(je instanceof q0)oe.push(Fe);else{var kt=Zh(je,ct);null!=kt&&(oe.push(Fe),me.set(Fe,kt))}}var Qt=new my(oe);return new sM(me,Qt,v.fieldTransforms)}function rc(i,t,e,o){return void 0===o&&(o=!1),Zh(e,i.Uc(o?4:3,t))}function Zh(i,t){if(fM(i=(0,Zr.m9)(i)))return mM("Unsupported field value:",t,i),pM(i,t);if(i instanceof Tf)return function(e,o){if(!EC(o.Nc))throw o.Lc(e._methodName+"() can only be used with update() and set()");if(!o.path)throw o.Lc(e._methodName+"() is not currently supported inside arrays");var a=e._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(i,t),null;if(void 0===i&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.kc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,o){for(var a=[],h=0,v=0,k=e;v<k.length;v++){var z=Zh(k[v],o.Mc(h));null==z&&(z={nullValue:"NULL_VALUE"}),a.push(z),h++}return{arrayValue:{values:a}}}(i,t)}return function(e,o){if(null===(e=(0,Zr.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return RE(o.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var a=Mc.fromDate(e);return{timestampValue:Cb(o.R,a)}}if(e instanceof Mc)return a=new Mc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:Cb(o.R,a)};if(e instanceof j0)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ef)return{bytesValue:qE(o.R,e._byteString)};if(e instanceof Ms){var h=e.firestore._databaseId;if(!h.isEqual(a=o.databaseId))throw o.Lc("Document reference is for database "+h.projectId+"/"+h.database+" but should be for database "+a.projectId+"/"+a.database);return{referenceValue:ZE(e.firestore._databaseId||o.databaseId,e._key.path)}}throw o.Lc("Unsupported field value: "+Vb(e))}(i,t)}function pM(i,t){var e={};return _1(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mm(i,function(o,a){var h=Zh(a,t.Fc(o));null!=h&&(e[o]=h)}),{mapValue:{fields:e}}}function fM(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Mc||i instanceof j0||i instanceof Ef||i instanceof Ms||i instanceof Tf)}function mM(i,t,e){if(!fM(e)||"object"!=typeof(a=e)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){var o=Vb(e);throw t.Lc("an object"===o?i+" a custom object":i+" "+o)}var a}function l_(i,t,e){if((t=(0,Zr.m9)(t))instanceof Od)return t._internalPath;if("string"==typeof t)return Gb(i,t);throw W0("Field path arguments must be of type string or FieldPath.",i,!1,void 0,e)}var $D=new RegExp("[~\\*/\\[\\]]");function Gb(i,t,e){if(t.search($D)>=0)throw W0("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",i,!1,void 0,e);try{return(new(Od.bind.apply(Od,(0,We.ev)([void 0],t.split(".")))))._internalPath}catch(o){throw W0("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",i,!1,void 0,e)}}function W0(i,t,e,o,a){var h=o&&!o.isEmpty(),v=void 0!==a,k="Function "+t+"() called with invalid data";e&&(k+=" (via `toFirestore()`)");var z="";return(h||v)&&(z+=" (found",h&&(z+=" in field "+o),v&&(z+=" in document "+a),z+=")"),new Dn(rn.INVALID_ARGUMENT,(k+=". ")+i+z)}function TC(i,t){return i.some(function(e){return e.isEqual(t)})}var jb=function(){function i(t,e,o,a,h){this._firestore=t,this._userDataWriter=e,this._key=o,this._document=a,this._converter=h}return Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ref",{get:function(){return new Ms(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),i.prototype.exists=function(){return null!==this._document},i.prototype.data=function(){if(this._document){if(this._converter){var t=new XD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},i.prototype.get=function(t){if(this._document){var e=this._document.data.field(Yy("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},i}(),XD=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,We.ZT)(t,i),t.prototype.data=function(){return i.prototype.data.call(this)},t}(jb);function Yy(i,t){return"string"==typeof t?Gb(i,t):t instanceof Od?t._internalPath:t._delegate._internalPath}var Bm=function(){function i(t,e){this.hasPendingWrites=t,this.fromCache=e}return i.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},i}(),Tp=function(i){function t(e,o,a,h,v,k){var z=this;return(z=i.call(this,e,o,a,h,k)||this)._firestore=e,z._firestoreImpl=e,z.metadata=v,z}return(0,We.ZT)(t,i),t.prototype.exists=function(){return i.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var o=new zm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,o){if(void 0===o&&(o={}),this._document){var a=this._document.data.field(Yy("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,o.serverTimestamps)}},t}(jb),zm=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,We.ZT)(t,i),t.prototype.data=function(e){return void 0===e&&(e={}),i.prototype.data.call(this,e)},t}(Tp),Mp=function(){function i(t,e,o,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Bm(a.hasPendingWrites,a.fromCache),this.query=o}return Object.defineProperty(i.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(t,e){var o=this;this._snapshot.docs.forEach(function(a){t.call(e,new zm(o._firestore,o._userDataWriter,a.key,a,new Bm(o._snapshot.mutatedKeys.has(a.key),o._snapshot.fromCache),o.query.converter))})},i.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Dn(rn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){var h=0;return o._snapshot.docChanges.map(function(k){return{type:"added",doc:new zm(o._firestore,o._userDataWriter,k.doc.key,k.doc,new Bm(o._snapshot.mutatedKeys.has(k.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:h++}})}var v=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(function(k){return a||3!==k.type}).map(function(k){var z=new zm(o._firestore,o._userDataWriter,k.doc.key,k.doc,new Bm(o._snapshot.mutatedKeys.has(k.doc.key),o._snapshot.fromCache),o.query.converter),$=-1,oe=-1;return 0!==k.type&&($=v.indexOf(k.doc.key),v=v.delete(k.doc.key)),1!==k.type&&(oe=(v=v.add(k.doc)).indexOf(k.doc.key)),{type:ZP(k.type),doc:z,oldIndex:$,newIndex:oe}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},i}();function ZP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vi()}}function MC(i,t){return i instanceof Tp&&t instanceof Tp?i._firestore===t._firestore&&i._key.isEqual(t._key)&&(null===i._document?null===t._document:i._document.isEqual(t._document))&&i._converter===t._converter:i instanceof Mp&&t instanceof Mp&&i._firestore===t._firestore&&oM(i.query,t.query)&&i.metadata.isEqual(t.metadata)&&i._snapshot.isEqual(t._snapshot)}function gM(i){if(o0(i)&&0===i.explicitOrderBy.length)throw new Dn(rn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qy=function(){};function Fd(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var o=0,a=t;o<a.length;o++){var h=a[o];i=h._apply(i)}return i}var _M=function(i){function t(e,o,a){var h=this;return(h=i.call(this)||this).jc=e,h.Wc=o,h.Gc=a,h.type="where",h}return(0,We.ZT)(t,i),t.prototype._apply=function(e){var h,k,o=Nm(e.firestore),a=function(h,v,k,z,$,oe,me){var ke;if($.isKeyField()){if("array-contains"===oe||"array-contains-any"===oe)throw new Dn(rn.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+oe+"' queries on FieldPath.documentId().");if("in"===oe||"not-in"===oe){kC(me,oe);for(var Fe=[],je=0,ct=me;je<ct.length;je++)Fe.push(AC(z,h,ct[je]));ke={arrayValue:{values:Fe}}}else ke=AC(z,h,me)}else"in"!==oe&&"not-in"!==oe&&"array-contains-any"!==oe||kC(me,oe),ke=rc(k,"where",me,"in"===oe||"not-in"===oe);var Qt=du.create($,oe,ke);return function(Sn,xn){if(xn.g()){var Xn=M1(Sn);if(null!==Xn&&!Xn.isEqual(xn.field))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Xn.toString()+"' and '"+xn.field.toString()+"'");var ni=T1(Sn);null!==ni&&DC(0,xn.field,ni)}var Qi=function(Rr,ta){for(var us=0,ac=Rr.filters;us<ac.length;us++){var QS=ac[us];if(ta.indexOf(QS.op)>=0)return QS.op}return null}(Sn,function(Rr){switch(Rr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(xn.op));if(null!==Qi)throw new Dn(rn.INVALID_ARGUMENT,Qi===xn.op?"Invalid query. You cannot use more than one '"+xn.op.toString()+"' filter.":"Invalid query. You cannot use '"+xn.op.toString()+"' filters with '"+Qi.toString()+"' filters.")}(h,Qt),Qt}(e._query,0,o,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new fu(e.firestore,e.converter,(k=(h=e._query).filters.concat([a]),new xp(h.path,h.collectionGroup,h.explicitOrderBy.slice(),k,h.limit,h.limitType,h.startAt,h.endAt)))},t}(qy),QD=function(i){function t(e,o){var a=this;return(a=i.call(this)||this).jc=e,a.zc=o,a.type="orderBy",a}return(0,We.ZT)(t,i),t.prototype._apply=function(e){var a,v,o=function(a,h,v){if(null!==a.startAt)throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var k=new Hg(h,v);return function(z,$){if(null===T1(z)){var oe=M1(z);null!==oe&&DC(0,oe,$.field)}}(a,k),k}(e._query,this.jc,this.zc);return new fu(e.firestore,e.converter,(v=(a=e._query).explicitOrderBy.concat([o]),new xp(a.path,a.collectionGroup,v,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)))},t}(qy),$0=function(i){function t(e,o,a){var h=this;return(h=i.call(this)||this).type=e,h.Hc=o,h.Jc=a,h}return(0,We.ZT)(t,i),t.prototype._apply=function(e){return new fu(e.firestore,e.converter,AE(e._query,this.Hc,this.Jc))},t}(qy),X0=function(i){function t(e,o,a){var h=this;return(h=i.call(this)||this).type=e,h.Yc=o,h.Xc=a,h}return(0,We.ZT)(t,i),t.prototype._apply=function(e){var a,h,o=vM(e,this.type,this.Yc,this.Xc);return new fu(e.firestore,e.converter,(h=o,new xp((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)))},t}(qy),yM=function(i){function t(e,o,a){var h=this;return(h=i.call(this)||this).type=e,h.Yc=o,h.Xc=a,h}return(0,We.ZT)(t,i),t.prototype._apply=function(e){var a,h,o=vM(e,this.type,this.Yc,this.Xc);return new fu(e.firestore,e.converter,(h=o,new xp((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)))},t}(qy);function vM(i,t,e,o){if(e[0]=(0,Zr.m9)(e[0]),e[0]instanceof jb)return function(h,v,k,z,$){if(!z)throw new Dn(rn.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+k+"().");for(var oe=[],me=0,ke=vy(h);me<ke.length;me++){var Fe=ke[me];if(Fe.field.isKeyField())oe.push($u(v,z.key));else{var je=z.data.field(Fe.field);if(v1(je))throw new Dn(rn.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Fe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===je){var ct=Fe.field.canonicalString();throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+ct+"' (used as the orderBy) does not exist.")}oe.push(je)}}return new ym(oe,$)}(i._query,i.firestore._databaseId,t,e[0]._document,o);var a=Nm(i.firestore);return function(h,v,k,z,$,oe){var me=h.explicitOrderBy;if($.length>me.length)throw new Dn(rn.INVALID_ARGUMENT,"Too many arguments provided to "+z+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var ke=[],Fe=0;Fe<$.length;Fe++){var je=$[Fe];if(me[Fe].field.isKeyField()){if("string"!=typeof je)throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+z+"(), but got a "+typeof je);if(!A1(h)&&-1!==je.indexOf("/"))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+z+"() must be a plain document ID, but '"+je+"' contains a slash.");var ct=h.path.child(to.fromString(je));if(!Ai.isDocumentKey(ct))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+z+"() must result in a valid document path, but '"+ct+"' is not because it contains an odd number of segments.");var kt=new Ai(ct);ke.push($u(v,kt))}else{var Qt=rc(k,z,je);ke.push(Qt)}}return new ym(ke,oe)}(i._query,i.firestore._databaseId,a,t,e,o)}function AC(i,t,e){if("string"==typeof(e=(0,Zr.m9)(e))){if(""===e)throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!A1(t)&&-1!==e.indexOf("/"))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var o=t.path.child(to.fromString(e));if(!Ai.isDocumentKey(o))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+o+"' is not because it has an odd number of segments ("+o.length+").");return $u(i,new Ai(o))}if(e instanceof Ms)return $u(i,e._key);throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Vb(e)+".")}function kC(i,t){if(!Array.isArray(i)||0===i.length)throw new Dn(rn.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(i.length>10)throw new Dn(rn.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function DC(i,t,e){if(!e.isEqual(t))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+e.toString()+"' instead.")}var IC=function(){function i(){}return i.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),zg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ks(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(gy(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw vi()}},i.prototype.convertObject=function(t,e){var o=this,a={};return mm(t.fields,function(h,v){a[h]=o.convertValue(v,e)}),a},i.prototype.convertGeoPoint=function(t){return new j0(Ks(t.latitude),Ks(t.longitude))},i.prototype.convertArray=function(t,e){var o=this;return(t.values||[]).map(function(a){return o.convertValue(a,e)})},i.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var o=b1(t);return null==o?null:this.convertValue(o,e);case"estimate":return this.convertTimestamp(hb(t));default:return null}},i.prototype.convertTimestamp=function(t){var e=es(t);return new Mc(e.seconds,e.nanos)},i.prototype.convertDocumentKey=function(t,e){var o=to.fromString(t);qi(rT(o));var a=new zb(o.get(1),o.get(3)),h=new Ai(o.popFirst(5));return a.isEqual(e)||xa("Document "+h+" contains a document reference within a different database ("+a.projectId+"/"+a.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),h},i}();function Yb(i,t,e){return i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t}var bM=function(i){function t(e){var o=this;return(o=i.call(this)||this).firestore=e,o}return(0,We.ZT)(t,i),t.prototype.convertBytes=function(e){return new Ef(e)},t.prototype.convertReference=function(e){var o=this.convertDocumentKey(e,this.firestore._databaseId);return new Ms(this.firestore,null,o)},t}(IC),JD=function(){function i(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Nm(t)}return i.prototype.set=function(t,e,o){this._verifyNotCommitted();var a=Vm(t,this._firestore),h=Yb(a.converter,e,o),v=Hb(this._dataReader,"WriteBatch.set",a._key,h,null!==a.converter,o);return this._mutations.push(v.toMutation(a._key,Kl.none())),this},i.prototype.update=function(t,e,o){for(var a=[],h=3;h<arguments.length;h++)a[h-3]=arguments[h];this._verifyNotCommitted();var v,k=Vm(t,this._firestore);return v="string"==typeof(e=(0,Zr.m9)(e))||e instanceof Od?dM(this._dataReader,"WriteBatch.update",k._key,e,o,a):Z0(this._dataReader,"WriteBatch.update",k._key,e),this._mutations.push(v.toMutation(k._key,Kl.exists(!0))),this},i.prototype.delete=function(t){this._verifyNotCommitted();var e=Vm(t,this._firestore);return this._mutations=this._mutations.concat(new wm(e._key,Kl.none())),this},i.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},i.prototype._verifyNotCommitted=function(){if(this._committed)throw new Dn(rn.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},i}();function Vm(i,t){if((i=(0,Zr.m9)(i)).firestore!==t)throw new Dn(rn.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}var Um=function(i){function t(e){var o=this;return(o=i.call(this)||this).firestore=e,o}return(0,We.ZT)(t,i),t.prototype.convertBytes=function(e){return new Ef(e)},t.prototype.convertReference=function(e){var o=this.convertDocumentKey(e,this.firestore._databaseId);return new Ms(this.firestore,null,o)},t}(IC);function xM(i,t,e){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];i=no(i,Ms);var h=no(i.firestore,ea),v=Nm(h);return Zy(h,[("string"==typeof(t=(0,Zr.m9)(t))||t instanceof Od?dM(v,"updateDoc",i._key,t,e,o):Z0(v,"updateDoc",i._key,t)).toMutation(i._key,Kl.exists(!0))])}function PC(i){for(var t,e,o,a=[],h=1;h<arguments.length;h++)a[h-1]=arguments[h];i=(0,Zr.m9)(i);var v={includeMetadataChanges:!1},k=0;"object"!=typeof a[k]||Dc(a[k])||(v=a[k],k++);var z,$,oe,me={includeMetadataChanges:v.includeMetadataChanges};if(Dc(a[k])){var ke=a[k];a[k]=null===(t=ke.next)||void 0===t?void 0:t.bind(ke),a[k+1]=null===(e=ke.error)||void 0===e?void 0:e.bind(ke),a[k+2]=null===(o=ke.complete)||void 0===o?void 0:o.bind(ke)}if(i instanceof Ms)$=no(i.firestore,ea),oe=Gg(i._key.path),z={next:function(ct){a[k]&&a[k](Q0($,i,ct))},error:a[k+1],complete:a[k+2]};else{var Fe=no(i,fu);$=no(Fe.firestore,ea),oe=Fe._query;var je=new Um($);z={next:function(ct){a[k]&&a[k](new Mp($,je,Fe,ct))},error:a[k+1],complete:a[k+2]},gM(i._query)}return function(ct,kt,Qt,Sn){var xn=this,Xn=new B0(Sn),ni=new aC(kt,Xn,Qt);return ct.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(xn,void 0,void 0,function(){var Qi;return(0,We.Jh)(this,function(Rr){switch(Rr.label){case 0:return Qi=iC,[4,s_(ct)];case 1:return[2,Qi.apply(void 0,[Rr.sent(),ni])]}})})}),function(){Xn.Wo(),ct.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(xn,void 0,void 0,function(){var Qi;return(0,We.Jh)(this,function(Rr){switch(Rr.label){case 0:return Qi=rC,[4,s_(ct)];case 1:return[2,Qi.apply(void 0,[Rr.sent(),ni])]}})})})}}(al($),oe,me,z)}function Zy(i,t){return function(e,o){var a=this,h=new nc;return e.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(a,void 0,void 0,function(){var v;return(0,We.Jh)(this,function(k){switch(k.label){case 0:return v=UT,[4,QT(e)];case 1:return[2,v.apply(void 0,[k.sent(),o,h])]}})})}),h.promise}(al(i),t)}function Q0(i,t,e){var o=e.docs.get(t._key),a=new Um(i);return new Tp(i,a,t._key,o,new Bm(e.hasPendingWrites,e.fromCache),t.converter)}var wM=function(i){function t(e,o){var a=this;return(a=i.call(this,e,o)||this)._firestore=e,a}return(0,We.ZT)(t,i),t.prototype.get=function(e){var o=this,a=Vm(e,this._firestore),h=new Um(this._firestore);return i.prototype.get.call(this,e).then(function(v){return new Tp(o._firestore,h,a._key,v._document,new Bm(!1,!1),a.converter)})},t}(function(){function i(t,e){this._firestore=t,this._transaction=e,this._dataReader=Nm(t)}return i.prototype.get=function(t){var e=this,o=Vm(t,this._firestore),a=new bM(this._firestore);return this._transaction.lookup([o._key]).then(function(h){if(!h||1!==h.length)return vi();var v=h[0];if(v.isFoundDocument())return new jb(e._firestore,a,v.key,v,o.converter);if(v.isNoDocument())return new jb(e._firestore,a,o._key,null,o.converter);throw vi()})},i.prototype.set=function(t,e,o){var a=Vm(t,this._firestore),h=Yb(a.converter,e,o),v=Hb(this._dataReader,"Transaction.set",a._key,h,null!==a.converter,o);return this._transaction.set(a._key,v),this},i.prototype.update=function(t,e,o){for(var a=[],h=3;h<arguments.length;h++)a[h-3]=arguments[h];var v,k=Vm(t,this._firestore);return v="string"==typeof(e=(0,Zr.m9)(e))||e instanceof Od?dM(this._dataReader,"Transaction.update",k._key,e,o,a):Z0(this._dataReader,"Transaction.update",k._key,e),this._transaction.update(k._key,v),this},i.prototype.delete=function(t){var e=Vm(t,this._firestore);return this._transaction.delete(e._key),this},i}());function CM(){if("undefined"==typeof Uint8Array)throw new Dn(rn.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function SM(){if("undefined"==typeof atob)throw new Dn(rn.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var EM=function(){function i(t){this._delegate=t}return i.fromBase64String=function(t){return SM(),new i(Ef.fromBase64String(t))},i.fromUint8Array=function(t){return CM(),new i(Ef.fromUint8Array(t))},i.prototype.toBase64=function(){return SM(),this._delegate.toBase64()},i.prototype.toUint8Array=function(){return CM(),this._delegate.toUint8Array()},i.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},i.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},i}(),TM=function(){function i(){}return i.prototype.enableIndexedDbPersistence=function(t,e){return function(o,a){G0(o=no(o,ea));var h=al(o),v=o._freezeSettings(),k=new N0;return H0(h,k,new qT(k,v.cacheSizeBytes,null==a?void 0:a.forceOwnership))}(t._delegate,{forceOwnership:e})},i.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(e){G0(e=no(e,ea));var o=al(e),a=e._freezeSettings(),h=new N0;return H0(o,h,new ZT(h,a.cacheSizeBytes))}(t._delegate)},i.prototype.clearIndexedDbPersistence=function(t){return function(e){var o=this;if(e._initialized&&!e._terminated)throw new Dn(rn.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var a=new nc;return e._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,We.mG)(o,void 0,void 0,function(){var h;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),[4,function(k){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function($){switch($.label){case 0:return $g.yt()?[4,$g.delete(k+"main")]:[2,Promise.resolve()];case 1:return $.sent(),[2]}})})}(ST(e._databaseId,e._persistenceKey))];case 1:return v.sent(),a.resolve(),[3,3];case 2:return h=v.sent(),a.reject(h),[3,3];case 3:return[2]}})})}),a.promise}(t._delegate)},i}(),KD=function(){function i(t,e,o){var a=this;this._delegate=e,this.Zc=o,this.INTERNAL={delete:function(){return a.terminate()}},t instanceof zb||(this.tu=t)}return Object.defineProperty(i.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),i.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||fy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},i.prototype.useEmulator=function(t,e,o){void 0===o&&(o={}),function(a,h,v,k){void 0===k&&(k={});var z=(a=no(a,Gy))._getSettings();if("firestore.googleapis.com"!==z.host&&z.host!==h&&fy("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},z),{host:h+":"+v,ssl:!1})),k.mockUserToken){var $=(0,Zr.Sg)(k.mockUserToken),oe=k.mockUserToken.sub||k.mockUserToken.user_id;if(!oe)throw new Dn(rn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a._credentials=new eM(new yC($,new Fa(oe)))}}(this._delegate,t,e,o)},i.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,We.mG)(e,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return[4,HD(t)];case 1:return o=h.sent(),[4,XT(t)];case 2:return a=h.sent(),[2,(o.setNetworkEnabled(!0),v=a,k=Jn(v),k.Or.delete(0),r_(k))]}var v,k})})})}(al(no(this._delegate,ea)))},i.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,We.mG)(e,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return[4,HD(t)];case 1:return o=h.sent(),[4,XT(t)];case 2:return a=h.sent(),[2,(o.setNetworkEnabled(!1),function(v){return(0,We.mG)(this,void 0,void 0,function(){var k;return(0,We.Jh)(this,function(z){switch(z.label){case 0:return(k=Jn(v)).Or.add(0),[4,Ep(k)];case 1:return z.sent(),k.Br.set("Offline"),[2]}})})}(a))]}})})})}(al(no(this._delegate,ea)))},i.prototype.enablePersistence=function(t){var e=!1,o=!1;return t&&bC("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",o=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,o)},i.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},i.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},i.prototype.waitForPendingWrites=function(){return function(t){var e=this,o=new nc;return t.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(e,void 0,void 0,function(){var a;return(0,We.Jh)(this,function(h){switch(h.label){case 0:return a=ID,[4,QT(t)];case 1:return[2,a.apply(void 0,[h.sent(),o])]}})})}),o.promise}(al(no(this._delegate,ea)))},i.prototype.onSnapshotsInSync=function(t){return o=t,function(a,h){var v=this,k=new B0(h);return a.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(v,void 0,void 0,function(){var z;return(0,We.Jh)(this,function($){switch($.label){case 0:return z=function(oe,me){Jn(oe).Gr.add(me),me.next()},[4,s_(a)];case 1:return[2,z.apply(void 0,[$.sent(),k])]}})})}),function(){k.Wo(),a.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(v,void 0,void 0,function(){var z;return(0,We.Jh)(this,function($){switch($.label){case 0:return z=function(oe,me){Jn(oe).Gr.delete(me)},[4,s_(a)];case 1:return[2,z.apply(void 0,[$.sent(),k])]}})})})}}(al(no(this._delegate,ea)),Dc(o)?o:{next:o});var o},Object.defineProperty(i.prototype,"app",{get:function(){if(!this.tu)throw new Dn(rn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),i.prototype.collection=function(t){try{return new FC(this,rM(this._delegate,t))}catch(e){throw mu(e,"collection()","Firestore.collection()")}},i.prototype.doc=function(t){try{return new Wy(this,Lm(this._delegate,t))}catch(e){throw mu(e,"doc()","Firestore.doc()")}},i.prototype.collectionGroup=function(t){try{return new ew(this,function(e,o){if(e=no(e,Gy),U0("collectionGroup","collection id",o),o.indexOf("/")>=0)throw new Dn(rn.INVALID_ARGUMENT,"Invalid collection ID '"+o+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new fu(e,null,(a=o,new xp(to.emptyPath(),a)));var a}(this._delegate,t))}catch(e){throw mu(e,"collectionGroup()","Firestore.collectionGroup()")}},i.prototype.runTransaction=function(t){var o,e=this;return function(h,v){var k=this,z=new nc;return h.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(k,void 0,void 0,function(){var $;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return[4,(me=h,Sf(me).then(function(ke){return ke.datastore}))];case 1:return $=oe.sent(),new WT(h.asyncQueue,$,v,z).run(),[2]}var me})})}),z.promise}(al(o=this._delegate),function(h){return function(o){return t(new eI(e,o))}(new wM(o,h))})},i.prototype.batch=function(){var t=this;return al(this._delegate),new tI(new JD(this._delegate,function(e){return Zy(t._delegate,e)}))},i.prototype.loadBundle=function(t){throw new Dn(rn.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},i.prototype.namedQuery=function(t){throw new Dn(rn.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},i}(),RC=function(i){function t(e){var o=this;return(o=i.call(this)||this).firestore=e,o}return(0,We.ZT)(t,i),t.prototype.convertBytes=function(e){return new EM(new Ef(e))},t.prototype.convertReference=function(e){var o=this.convertDocumentKey(e,this.firestore._databaseId);return Wy.eu(o,this.firestore,null)},t}(IC),eI=function(){function i(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new RC(t)}return i.prototype.get=function(t){var e=this,o=$y(t);return this._delegate.get(o).then(function(a){return new J0(e._firestore,new Tp(e._firestore._delegate,e._userDataWriter,a._key,a._document,a.metadata,o.converter))})},i.prototype.set=function(t,e,o){var a=$y(t);return o?(a_("Transaction.set",o),this._delegate.set(a,e,o)):this._delegate.set(a,e),this},i.prototype.update=function(t,e,o){for(var a,h=[],v=3;v<arguments.length;v++)h[v-3]=arguments[v];var k=$y(t);return 2===arguments.length?this._delegate.update(k,e):(a=this._delegate).update.apply(a,(0,We.ev)([k,e,o],h)),this},i.prototype.delete=function(t){var e=$y(t);return this._delegate.delete(e),this},i}(),tI=function(){function i(t){this._delegate=t}return i.prototype.set=function(t,e,o){var a=$y(t);return o?(a_("WriteBatch.set",o),this._delegate.set(a,e,o)):this._delegate.set(a,e),this},i.prototype.update=function(t,e,o){for(var a,h=[],v=3;v<arguments.length;v++)h[v-3]=arguments[v];var k=$y(t);return 2===arguments.length?this._delegate.update(k,e):(a=this._delegate).update.apply(a,(0,We.ev)([k,e,o],h)),this},i.prototype.delete=function(t){var e=$y(t);return this._delegate.delete(e),this},i.prototype.commit=function(){return this._delegate.commit()},i}(),OC=function(){function i(t,e,o){this._firestore=t,this._userDataWriter=e,this._delegate=o}return i.prototype.fromFirestore=function(t,e){var o=new zm(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new K0(this._firestore,o),null!=e?e:{})},i.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},i.nu=function(t,e){var o=i.su,a=o.get(t);a||(a=new WeakMap,o.set(t,a));var h=a.get(e);return h||(h=new i(t,new RC(t),e),a.set(e,h)),h},i}();OC.su=new WeakMap;var Wy=function(){function i(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new RC(t)}return i.iu=function(t,e,o){if(t.length%2!=0)throw new Dn(rn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new i(e,new Ms(e._delegate,o,new Ai(t)))},i.eu=function(t,e,o){return new i(e,new Ms(e._delegate,o,t))},Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new FC(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),i.prototype.collection=function(t){try{return new FC(this.firestore,rM(this._delegate,t))}catch(e){throw mu(e,"collection()","DocumentReference.collection()")}},i.prototype.isEqual=function(t){return(t=(0,Zr.m9)(t))instanceof Ms&&jy(this._delegate,t)},i.prototype.set=function(t,e){e=a_("DocumentReference.set",e);try{return function(o,a,h){o=no(o,Ms);var v=no(o.firestore,ea),k=Yb(o.converter,a,h);return Zy(v,[Hb(Nm(v),"setDoc",o._key,k,null!==o.converter,h).toMutation(o._key,Kl.none())])}(this._delegate,t,e)}catch(o){throw mu(o,"setDoc()","DocumentReference.set()")}},i.prototype.update=function(t,e){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];try{return 1===arguments.length?xM(this._delegate,t):xM.apply(void 0,(0,We.ev)([this._delegate,t,e],o))}catch(h){throw mu(h,"updateDoc()","DocumentReference.update()")}},i.prototype.delete=function(){return Zy(no((t=this._delegate).firestore,ea),[new wm(t._key,Kl.none())]);var t},i.prototype.onSnapshot=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a=nI(e),h=iI(e,function(v){return new J0(t.firestore,new Tp(t.firestore._delegate,t._userDataWriter,v._key,v._document,v.metadata,t._delegate.converter))});return PC(this._delegate,a,h)},i.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(o){o=no(o,Ms);var a=no(o.firestore,ea),h=al(a),v=new Um(a);return function(k,z){var $=this,oe=new nc;return k.asyncQueue.enqueueAndForget(function(){return(0,We.mG)($,void 0,void 0,function(){var me;return(0,We.Jh)(this,function(ke){switch(ke.label){case 0:return me=function(Fe,je,ct){return(0,We.mG)(this,void 0,void 0,function(){var kt,Qt;return(0,We.Jh)(this,function(Sn){switch(Sn.label){case 0:return Sn.trys.push([0,2,,3]),[4,(xn=Fe,Xn=je,ni=Jn(xn),ni.persistence.runTransaction("read document","readonly",function(Qi){return ni.Mn.mn(Qi,Xn)}))];case 1:return(Qt=Sn.sent()).isFoundDocument()?ct.resolve(Qt):Qt.isNoDocument()?ct.resolve(null):ct.reject(new Dn(rn.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return kt=Sn.sent(),Qt=Vy(kt,"Failed to get document '"+je+" from cache"),ct.reject(Qt),[3,3];case 3:return[2]}var xn,Xn,ni})})},[4,z0(k)];case 1:return[2,me.apply(void 0,[ke.sent(),z,oe])]}})})}),oe.promise}(h,o._key).then(function(k){return new Tp(a,v,o._key,k,new Bm(null!==k&&k.hasLocalMutations,!0),o.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(o){o=no(o,Ms);var a=no(o.firestore,ea);return JT(al(a),o._key,{source:"server"}).then(function(h){return Q0(a,o,h)})}(this._delegate):function(o){o=no(o,Ms);var a=no(o.firestore,ea);return JT(al(a),o._key).then(function(h){return Q0(a,o,h)})}(this._delegate)).then(function(o){return new J0(e.firestore,new Tp(e.firestore._delegate,e._userDataWriter,o._key,o._document,o.metadata,e._delegate.converter))})},i.prototype.withConverter=function(t){return new i(this.firestore,this._delegate.withConverter(t?OC.nu(this.firestore,t):null))},i}();function mu(i,t,e){return i.message=i.message.replace(t,e),i}function nI(i){for(var t=0,e=i;t<e.length;t++){var o=e[t];if("object"==typeof o&&!Dc(o))return o}return{}}function iI(i,t){var e,o,a;return{next:function(h){a.next&&a.next(t(h))},error:null===(e=(a=Dc(i[0])?i[0]:Dc(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]}).error)||void 0===e?void 0:e.bind(a),complete:null===(o=a.complete)||void 0===o?void 0:o.bind(a)}}var J0=function(){function i(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(i.prototype,"ref",{get:function(){return new Wy(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),i.prototype.data=function(t){return this._delegate.data(t)},i.prototype.get=function(t,e){return this._delegate.get(t,e)},i.prototype.isEqual=function(t){return MC(this._delegate,t._delegate)},i}(),K0=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,We.ZT)(t,i),t.prototype.data=function(e){return this._delegate.data(e)},t}(J0),ew=function(){function i(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new RC(t)}return i.prototype.where=function(t,e,o){try{return new i(this.firestore,Fd(this._delegate,(v=o,k=e,z=Yy("where",a=t),new _M(z,k,v))))}catch(a){throw mu(a,/(orderBy|where)\(\)/,"Query.$1()")}var a,v,k,z},i.prototype.orderBy=function(t,e){try{return new i(this.firestore,Fd(this._delegate,function(o,a){void 0===a&&(a="asc");var h=a,v=Yy("orderBy",o);return new QD(v,h)}(t,e)))}catch(o){throw mu(o,/(orderBy|where)\(\)/,"Query.$1()")}},i.prototype.limit=function(t){try{return new i(this.firestore,Fd(this._delegate,(CC("limit",e=t),new $0("limit",e,"F"))))}catch(e){throw mu(e,"limit()","Query.limit()")}var e},i.prototype.limitToLast=function(t){try{return new i(this.firestore,Fd(this._delegate,(CC("limitToLast",e=t),new $0("limitToLast",e,"L"))))}catch(e){throw mu(e,"limitToLast()","Query.limitToLast()")}var e},i.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new i(this.firestore,Fd(this._delegate,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new X0("startAt",o,!0)}.apply(void 0,t)))}catch(o){throw mu(o,"startAt()","Query.startAt()")}},i.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new i(this.firestore,Fd(this._delegate,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new X0("startAfter",o,!1)}.apply(void 0,t)))}catch(o){throw mu(o,"startAfter()","Query.startAfter()")}},i.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new i(this.firestore,Fd(this._delegate,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new yM("endBefore",o,!0)}.apply(void 0,t)))}catch(o){throw mu(o,"endBefore()","Query.endBefore()")}},i.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new i(this.firestore,Fd(this._delegate,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new yM("endAt",o,!1)}.apply(void 0,t)))}catch(o){throw mu(o,"endAt()","Query.endAt()")}},i.prototype.isEqual=function(t){return oM(this._delegate,t._delegate)},i.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(o){o=no(o,fu);var a=no(o.firestore,ea),h=al(a),v=new Um(a);return function(k,z){var $=this,oe=new nc;return k.asyncQueue.enqueueAndForget(function(){return(0,We.mG)($,void 0,void 0,function(){var me;return(0,We.Jh)(this,function(ke){switch(ke.label){case 0:return me=function(Fe,je,ct){return(0,We.mG)(this,void 0,void 0,function(){var kt,Qt,Sn,xn,Xn;return(0,We.Jh)(this,function(ni){switch(ni.label){case 0:return ni.trys.push([0,2,,3]),[4,Db(Fe,je,!0)];case 1:return Xn=ni.sent(),kt=new VT(je,Xn.Bn),Qt=kt._o(Xn.documents),Sn=kt.applyChanges(Qt,!1),ct.resolve(Sn.snapshot),[3,3];case 2:return xn=ni.sent(),Xn=Vy(xn,"Failed to execute query '"+je+" against cache"),ct.reject(Xn),[3,3];case 3:return[2]}})})},[4,z0(k)];case 1:return[2,me.apply(void 0,[ke.sent(),z,oe])]}})})}),oe.promise}(h,o._query).then(function(k){return new Mp(a,v,o,k)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(o){o=no(o,fu);var a=no(o.firestore,ea),h=al(a),v=new Um(a);return V0(h,o._query,{source:"server"}).then(function(k){return new Mp(a,v,o,k)})}(this._delegate):function(o){o=no(o,fu);var a=no(o.firestore,ea),h=al(a),v=new Um(a);return gM(o._query),V0(h,o._query).then(function(k){return new Mp(a,v,o,k)})}(this._delegate)).then(function(o){return new MM(e.firestore,new Mp(e.firestore._delegate,e._userDataWriter,e._delegate,o._snapshot))})},i.prototype.onSnapshot=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a=nI(e),h=iI(e,function(v){return new MM(t.firestore,new Mp(t.firestore._delegate,t._userDataWriter,t._delegate,v._snapshot))});return PC(this._delegate,a,h)},i.prototype.withConverter=function(t){return new i(this.firestore,this._delegate.withConverter(t?OC.nu(this.firestore,t):null))},i}(),$P=function(){function i(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(i.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doc",{get:function(){return new K0(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),i}(),MM=function(){function i(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(i.prototype,"query",{get:function(){return new ew(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new K0(t._firestore,e)})},enumerable:!1,configurable:!0}),i.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(o){return new $P(e._firestore,o)})},i.prototype.forEach=function(t,e){var o=this;this._delegate.forEach(function(a){t.call(e,new K0(o._firestore,a))})},i.prototype.isEqual=function(t){return MC(this._delegate,t._delegate)},i}(),FC=function(i){function t(e,o){var a=this;return(a=i.call(this,e,o)||this).firestore=e,a._delegate=o,a}return(0,We.ZT)(t,i),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new Wy(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new Wy(this.firestore,void 0===e?Lm(this._delegate):Lm(this._delegate,e))}catch(o){throw mu(o,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var a,h,v,k,z,o=this;return(a=this._delegate,h=e,v=no(a.firestore,ea),k=Lm(a),z=Yb(a.converter,h),Zy(v,[Hb(Nm(a.firestore),"addDoc",k._key,z,null!==a.converter,{}).toMutation(k._key,Kl.exists(!1))]).then(function(){return k})).then(function(a){return new Wy(o.firestore,a)})},t.prototype.isEqual=function(e){return jy(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?OC.nu(this.firestore,e):null))},t}(ew);function $y(i){return no(i,Ms)}var rI=function(){function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Od.bind.apply(Od,(0,We.ev)([void 0],t)))}return i.documentId=function(){return new i(Td.keyField().canonicalString())},i.prototype.isEqual=function(t){return(t=(0,Zr.m9)(t))instanceof Od&&this._delegate._internalPath.isEqual(t._internalPath)},i}(),oI=function(){function i(t){this._delegate=t}return i.serverTimestamp=function(){var t=new cM("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new i(t)},i.delete=function(){var t=new q0("deleteField");return t._methodName="FieldValue.delete",new i(t)},i.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=function(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];return new uM("arrayUnion",a)}.apply(void 0,t);return o._methodName="FieldValue.arrayUnion",new i(o)},i.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=function(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];return new WD("arrayRemove",a)}.apply(void 0,t);return o._methodName="FieldValue.arrayRemove",new i(o)},i.increment=function(t){var e=new hM("increment",t);return e._methodName="FieldValue.increment",new i(e)},i.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},i}(),QP=nt(6034),JP={Firestore:KD,GeoPoint:j0,Timestamp:Mc,Blob:EM,Transaction:eI,WriteBatch:tI,DocumentReference:Wy,DocumentSnapshot:J0,Query:ew,QueryDocumentSnapshot:K0,QuerySnapshot:MM,CollectionReference:FC,FieldPath:rI,FieldValue:oI,setLogLevel:function(i){Wu.setLogLevel(i)},CACHE_SIZE_UNLIMITED:-1};function AM(i,t){return function(i,t=xl.z){return new Gr.y(e=>{let o;return null!=t?t.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},e)}):o=i.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=o&&o()}})}(i,t)}function kM(i,t){return AM(i,t).pipe((0,ri.U)(e=>({payload:e,type:"query"})))}function LC(i,t){return kM(i,t).pipe(xs(void 0),Lh(),(0,ri.U)(([e,o])=>{const a=o.payload.docChanges(),h=a.map(v=>({type:v.type,payload:v}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((v,k)=>{const z=a.find(oe=>oe.doc.ref.isEqual(v.ref)),$=null==e?void 0:e.payload.docs.find(oe=>oe.ref.isEqual(v.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(v.metadata)||!z&&$&&JSON.stringify($.metadata)===JSON.stringify(v.metadata)||h.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:v}})}),h}))}function lI(i,t,e){return LC(i,e).pipe(la((o,a)=>function(i,t,e){return t.forEach(o=>{e.indexOf(o.type)>-1&&(i=function(i,t){switch(t.type){case"added":if(!i[t.newIndex]||!i[t.newIndex].doc.ref.isEqual(t.doc.ref))return DM(i,t.newIndex,0,t);break;case"modified":if(null==i[t.oldIndex]||i[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=i.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return DM(i,t.newIndex,1,t)}break;case"removed":if(i[t.oldIndex]&&i[t.oldIndex].doc.ref.isEqual(t.doc.ref))return DM(i,t.oldIndex,1)}return i}(i,o))}),i}(o,a.map(h=>h.payload),t),[]),fc(),(0,ri.U)(o=>o.map(a=>({type:a.type,payload:a}))))}function DM(i,t,e,...o){const a=i.slice();return a.splice(t,e,...o),a}function tw(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}!function(i){i.INTERNAL.registerComponent(new QP.wA("firestore",function(o){return t=o.getProvider("app").getImmediate(),e=o.getProvider("auth-internal"),new KD(t,new ea(t,e),new TM);var t,e},"PUBLIC").setServiceProps(Object.assign({},JP))),i.registerVersion("@firebase/firestore","2.3.10")}(Cg.Z);class c_{constructor(t,e,o){this.ref=t,this.query=e,this.afs=o}stateChanges(t){let e=LC(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ri.U)(o=>o.filter(a=>t.indexOf(a.type)>-1)))),e.pipe(xs(void 0),Lh(),w(([o,a])=>a.length>0||!o),(0,ri.U)(([o,a])=>a),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(la((e,o)=>[...e,...o],[]))}snapshotChanges(t){const e=tw(t);return lI(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return kM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ri.U)(e=>e.payload.docs.map(o=>t.idField?Object.assign(Object.assign({},o.data()),{[t.idField]:o.id}):o.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,jr.D)(this.query.get(t)).pipe((0,ca.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new NC(this.ref.doc(t),this.afs)}}class NC{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const o=this.ref.collection(t),{ref:a,query:h}=UC(o,e);return new c_(a,h,this.afs)}snapshotChanges(){return function(i,t){return AM(i,t).pipe(xs(void 0),Lh(),(0,ri.U)(([e,o])=>o.exists?(null==e?void 0:e.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ri.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,jr.D)(this.ref.get(t)).pipe((0,ca.QV)(this.afs.schedulers.insideAngular))}}class hI{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?LC(this.query,this.afs.schedulers.outsideAngular).pipe((0,ri.U)(e=>e.filter(o=>t.indexOf(o.type)>-1)),w(e=>e.length>0),this.afs.keepUnstableUntilFirst):LC(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(la((e,o)=>[...e,...o],[]))}snapshotChanges(t){const e=tw(t);return lI(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return kM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ri.U)(o=>o.payload.docs.map(a=>t.idField?Object.assign({[t.idField]:a.id},a.data()):a.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,jr.D)(this.query.get(t)).pipe((0,ca.QV)(this.afs.schedulers.insideAngular))}}const BC=new s.OlP("angularfire2.enableFirestorePersistence"),qb=new s.OlP("angularfire2.firestore.persistenceSettings"),zC=new s.OlP("angularfire2.firestore.settings"),VC=new s.OlP("angularfire2.firestore.use-emulator");function UC(i,t=(e=>e)){return{query:t(i),ref:i}}let HM,Wh=(()=>{class i{constructor(e,o,a,h,v,k,z,$,oe){this.schedulers=new wr.HU(k),this.keepUnstableUntilFirst=(0,wr.ss)(this.schedulers);const me=(0,wr.on)(e,k,o);!kn.Z.auth&&oe&&(0,wr.yq)();const ke=$;[this.firestore,this.persistenceEnabled$]=(0,wr.sI)(`${me.name}.firestore`,"AngularFirestore",me,()=>{const Fe=k.runOutsideAngular(()=>me.firestore());if(h&&Fe.settings(h),ke&&Fe.useEmulator(...ke),a&&!ah(v)){const je=()=>{try{return(0,jr.D)(Fe.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(ct){return"undefined"!=typeof console&&console.warn(ct),(0,Qn.of)(!1)}};return[Fe,k.runOutsideAngular(je)]}return[Fe,(0,Qn.of)(!1)]},[h,ke,a])}collection(e,o){let a;a="string"==typeof e?this.firestore.collection(e):e;const{ref:h,query:v}=UC(a,o),k=this.schedulers.ngZone.run(()=>h);return new c_(k,v,this)}collectionGroup(e,o){const a=o||(v=>v),h=this.firestore.collectionGroup(e);return new hI(a(h),this)}doc(e){let o;o="string"==typeof e?this.firestore.doc(e):e;const a=this.schedulers.ngZone.run(()=>o);return new NC(a,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wr.Dh),s.LFG(wr.xv,8),s.LFG(BC,8),s.LFG(zC,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(qb,8),s.LFG(VC,8),s.LFG(Kt,8))},i.\u0275prov=s.Yz7({factory:function(){return new i(s.LFG(wr.Dh),s.LFG(wr.xv,8),s.LFG(BC,8),s.LFG(zC,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(qb,8),s.LFG(VC,8),s.LFG(Kt,8))},token:i,providedIn:"any"}),i})(),IM=(()=>{class i{static enablePersistence(e){return{ngModule:i,providers:[{provide:BC,useValue:!0},{provide:qb,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[Wh]}),i})(),Ld=(()=>{class i{constructor(e,o,a,h){this.fauth=e,this.route=o,this.router=a,this.firestore=h,this.tempo="",this.user$=this.fauth.authState,this.user$.subscribe(v=>{this.uid=null==v?void 0:v.uid,console.log("User Logged in "+this.uid)}),e.setPersistence("local").then(v=>{console.log("local session")})}login(e,o){var a=this;return Ho(function*(){return new Promise(h=>{a.fauth.signInWithEmailAndPassword(e,o).then(v=>{var k,z;a.uid=null===(k=v.user)||void 0===k?void 0:k.uid,a.firestore.collection("Admin").doc(a.uid).valueChanges().subscribe($=>{$&&a.router.navigateByUrl("/adminpage")}),a.firestore.collection("Student").doc(a.uid).valueChanges().subscribe($=>{$&&a.router.navigateByUrl("/studentpage")}),a.firestore.collection("Supplier").doc(a.uid).valueChanges().subscribe($=>{$&&a.router.navigateByUrl("/supplierpage")}),(null===(z=v.user)||void 0===z?void 0:z.emailVerified)||(a.emailVerified=!1),h(!0)}).catch(v=>{"auth/wrong-password"===v.code&&(console.log("wrong password"),a.passwordVerified=!1,a.passwordVerified||(a.passwordVerified=!1)),"auth/user-not-found"===v.code&&(a.userVerified=!1),h(!1)})})})()}register(e,o,a,h,v,k,z,$,oe){var me=this;return Ho(function*(){return new Promise((ke,Fe)=>{me.fauth.createUserWithEmailAndPassword(e,o).then(je=>{var ct,kt;console.log(je),ke({validate:!0}),me.fauth.currentUser.then(Qt=>{null==Qt||Qt.sendEmailVerification()}).then(Qt=>{console.log(Qt)}),"1"===a?(console.log("student"),me.firestore.collection("Student").doc(null===(ct=je.user)||void 0===ct?void 0:ct.uid).set({name:h,email:e,dob:v,phone:k,gender:z,matrixid:$,isStudent:!1})):"2"===a&&(console.log("supplier"),me.firestore.collection("Supplier").doc(null===(kt=je.user)||void 0===kt?void 0:kt.uid).set({name:h,email:e,dob:v,phone:k,gender:z,compname:oe,isSupplier:!1}))}).catch(je=>{console.log(je),"auth/email-already-in-use"===je.code&&ke({validate:!1})})})})()}getAdminStatus(){var e=this;return Ho(function*(){return new Promise(o=>{e.admin$=e.firestore.collection("Admin").doc(e.uid).valueChanges(),e.admin$.subscribe(a=>{o(null==a?void 0:a.isAdmin)})})})()}getStudentStatus(){var e=this;return Ho(function*(){return new Promise(o=>{e.student$=e.firestore.collection("Student").doc(e.uid).valueChanges(),e.student$.subscribe(a=>{o(null==a?void 0:a.isStudent)})})})()}getSupplierStatus(){var e=this;return Ho(function*(){return new Promise(o=>{e.supplier$=e.firestore.collection("Supplier").doc(e.uid).valueChanges(),e.supplier$.subscribe(a=>{o(null==a?void 0:a.isSupplier)})})})()}verificationemail(){this.fauth.user.subscribe(e=>{null==e||e.sendEmailVerification(),console.log("Verification email sent")},e=>{console.log(e)})}checkExistedEmail(e){var o=this;return Ho(function*(){return new Promise(a=>{o.fauth.fetchSignInMethodsForEmail(e).then(h=>{console.log(h),o.emailExistedStatus=!0,a(!0)},h=>{console.log(h)})})})()}forgotPassword(e){var o=this;return Ho(function*(){return new Promise(a=>{o.fauth.sendPasswordResetEmail(e).then(h=>{console.log("success"),a(!0)},h=>{console.log(h.code),"auth/user-not-found"===h.code&&a(!1)})})})()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Zn),s.LFG(Za),s.LFG(Jo),s.LFG(Wh))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),HC=(()=>{class i{constructor(e,o){this.auth=e,this.router=o}canActivate(e,o){var a=this;return Ho(function*(){let h=yield a.auth.getAdminStatus();return console.log(h),0!=h||(a.router.navigateByUrl(""),!1)})()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Ld),s.LFG(Jo))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Zb=(()=>{class i{constructor(e,o,a){this.fauth=e,this.router=o,this.af=a,this.fauth.authState.subscribe(h=>{let v=null==h?void 0:h.uid;this.username$=this.af.collection("Admin").doc(v).valueChanges()})}ngOnInit(){}logout(){this.fauth.signOut(),localStorage.removeItem("admin"),this.router.navigateByUrl("")}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Zn),s.Y36(Jo),s.Y36(Wh))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-adminnavbarpage"]],decls:26,vars:5,consts:[[1,"navbar","navbar-expand-lg","navbar-light","shadow-sm"],[1,"container-fluid"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],["routerLink","/adminpage",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLinkActive","active","aria-current","page","routerLink","/adminpage",1,"nav-link","active"],["routerLinkActive","active","routerLink","/adminmanageinv",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],["routerLink","/adminprofile",1,"dropdown-item"],[1,"dropdown-item",3,"click"]],template:function(e,o){if(1&e&&(s.TgZ(0,"nav",0),s.TgZ(1,"div",1),s._UZ(2,"img",2),s.TgZ(3,"a",3),s._uU(4,"UMP SCMS"),s.qZA(),s.TgZ(5,"button",4),s._UZ(6,"span",5),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"ul",7),s.TgZ(9,"li",8),s.TgZ(10,"a",9),s._uU(11,"Home"),s.qZA(),s.qZA(),s.TgZ(12,"li",8),s.TgZ(13,"a",10),s._uU(14,"Manage Inventory"),s.qZA(),s.qZA(),s.TgZ(15,"li",11),s.TgZ(16,"a",12),s._uU(17),s.ALo(18,"async"),s.qZA(),s.TgZ(19,"ul",13),s.TgZ(20,"li"),s.TgZ(21,"a",14),s._uU(22,"My Profile"),s.qZA(),s.qZA(),s.TgZ(23,"li"),s.TgZ(24,"a",15),s.NdJ("click",function(){return o.logout()}),s._uU(25,"Logout"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){let a;s.Udp("background","#b8ab97"),s.xp6(17),s.hij(" ",null==(a=s.lcZ(18,3,o.username$))?null:a.username," ")}},directives:[fp,Ix],pipes:[cl],styles:["img[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;margin-right:10px}"]}),i})(),eR=(()=>{class i{constructor(e,o,a){this.fauth=e,this.router=o,this.af=a}ngAfterViewInit(){}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Zn),s.Y36(Jo),s.Y36(Wh))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-admin-home-page"]],decls:1,vars:0,template:function(e,o){1&e&&s._UZ(0,"app-adminnavbarpage")},directives:[Zb],styles:["mat-progress-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5}body[_ngcontent-%COMP%]{background:#f0f0f0}.chart[_ngcontent-%COMP%]{background:black;display:flex;justify-content:center}.loader-container[_ngcontent-%COMP%]{position:fixed;width:100%;z-index:999}"]}),i})();function _r(i){return null!=i&&"false"!=`${i}`}function Rl(i,t=0){return dI(i)?Number(i):t}function dI(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function u_(i){return Array.isArray(i)?i:[i]}function Sa(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Hm(i){return i instanceof s.SBq?i.nativeElement:i}function La(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function WC(i,t=xl.P){return e=>e.lift(new OI(i,t))}class OI{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new FI(t,this.dueTime,this.scheduler))}}class FI extends $o.L{constructor(t,e,o){super(t),this.dueTime=e,this.scheduler=o,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(LI,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function LI(i){i.debouncedNext()}try{HM="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){HM=!1}let Ky,xo=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(i){return"browser"===i}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!HM)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.Lbi))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(s.Lbi))},token:i,providedIn:"root"}),i})(),Wb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();const ev=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function $C(){if(Ky)return Ky;if("object"!=typeof document||!document)return Ky=new Set(ev),Ky;let i=document.createElement("input");return Ky=new Set(ev.filter(t=>(i.setAttribute("type",t),i.type===t))),Ky}let sw,XC,tv,QC;function aw(i){return function(){if(null==sw&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>sw=!0}))}finally{sw=sw||!1}return sw}()?i:!!i.capture}function lw(){if(null==tv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return tv=!1,tv;if("scrollBehavior"in document.documentElement.style)tv=!0;else{const i=Element.prototype.scrollTo;tv=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return tv}function $b(){if("object"!=typeof document||!document)return 0;if(null==XC){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),o=e.style;o.width="2px",o.height="1px",i.appendChild(e),document.body.appendChild(i),XC=0,0===i.scrollLeft&&(i.scrollLeft=1,XC=0===i.scrollLeft?1:2),i.parentNode.removeChild(i)}return XC}function zI(i){if(function(){if(null==QC){const i="undefined"!=typeof document?document.head:null;QC=!(!i||!i.createShadowRoot&&!i.attachShadow)}return QC}()){const t=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}let JC=(()=>{class i{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})(),GM=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,o)=>this._cleanupObserver(o))}observe(e){const o=Hm(e);return new Gr.y(a=>{const v=this._observeElement(o).subscribe(a);return()=>{v.unsubscribe(),this._unobserveElement(o)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const o=new Bn.xQ,a=this._mutationObserverFactory.create(h=>o.next(h));a&&a.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:a,stream:o,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:o,stream:a}=this._observedElements.get(e);o&&o.disconnect(),a.complete(),this._observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(JC))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(JC))},token:i,providedIn:"root"}),i})(),jM=(()=>{class i{constructor(e,o,a){this._contentObserver=e,this._elementRef=o,this._ngZone=a,this.event=new s.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=_r(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Rl(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(WC(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(GM),s.Y36(s.SBq),s.Y36(s.R0b))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),Ku=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[JC]}),i})();function Xb(i,t){return(i.getAttribute(t)||"").match(/\S+/g)||[]}const KC="cdk-describedby-message-container",eS="cdk-describedby-message",nv="cdk-describedby-host";let tS=0;const $h=new Map;let Ea=null,Qb=(()=>{class i{constructor(e){this._document=e}describe(e,o,a){if(!this._canBeDescribed(e,o))return;const h=cw(o,a);"string"!=typeof o?(nS(o),$h.set(h,{messageElement:o,referenceCount:0})):$h.has(h)||this._createMessageElement(o,a),this._isElementDescribedByMessage(e,h)||this._addMessageReference(e,h)}removeDescription(e,o,a){if(!o||!this._isElementNode(e))return;const h=cw(o,a);if(this._isElementDescribedByMessage(e,h)&&this._removeMessageReference(e,h),"string"==typeof o){const v=$h.get(h);v&&0===v.referenceCount&&this._deleteMessageElement(h)}Ea&&0===Ea.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const e=this._document.querySelectorAll(`[${nv}]`);for(let o=0;o<e.length;o++)this._removeCdkDescribedByReferenceIds(e[o]),e[o].removeAttribute(nv);Ea&&this._deleteMessagesContainer(),$h.clear()}_createMessageElement(e,o){const a=this._document.createElement("div");nS(a),a.textContent=e,o&&a.setAttribute("role",o),this._createMessagesContainer(),Ea.appendChild(a),$h.set(cw(e,o),{messageElement:a,referenceCount:0})}_deleteMessageElement(e){const o=$h.get(e),a=o&&o.messageElement;Ea&&a&&Ea.removeChild(a),$h.delete(e)}_createMessagesContainer(){if(!Ea){const e=this._document.getElementById(KC);e&&e.parentNode&&e.parentNode.removeChild(e),Ea=this._document.createElement("div"),Ea.id=KC,Ea.style.visibility="hidden",Ea.classList.add("cdk-visually-hidden"),this._document.body.appendChild(Ea)}}_deleteMessagesContainer(){Ea&&Ea.parentNode&&(Ea.parentNode.removeChild(Ea),Ea=null)}_removeCdkDescribedByReferenceIds(e){const o=Xb(e,"aria-describedby").filter(a=>0!=a.indexOf(eS));e.setAttribute("aria-describedby",o.join(" "))}_addMessageReference(e,o){const a=$h.get(o);(function(i,t,e){const o=Xb(i,t);o.some(a=>a.trim()==e.trim())||(o.push(e.trim()),i.setAttribute(t,o.join(" ")))})(e,"aria-describedby",a.messageElement.id),e.setAttribute(nv,""),a.referenceCount++}_removeMessageReference(e,o){const a=$h.get(o);a.referenceCount--,function(i,t,e){const a=Xb(i,t).filter(h=>h!=e.trim());a.length?i.setAttribute(t,a.join(" ")):i.removeAttribute(t)}(e,"aria-describedby",a.messageElement.id),e.removeAttribute(nv)}_isElementDescribedByMessage(e,o){const a=Xb(e,"aria-describedby"),h=$h.get(o),v=h&&h.messageElement.id;return!!v&&-1!=a.indexOf(v)}_canBeDescribed(e,o){if(!this._isElementNode(e))return!1;if(o&&"object"==typeof o)return!0;const a=null==o?"":`${o}`.trim(),h=e.getAttribute("aria-label");return!(!a||h&&h.trim()===a)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(wt))},token:i,providedIn:"root"}),i})();function cw(i,t){return"string"==typeof i?`${t||""}/${i}`:i}function nS(i){i.id||(i.id=`${eS}-${tS++}`)}class qM{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Bn.xQ,this._typeaheadSubscription=ms.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Bn.xQ,this.change=new Bn.xQ,t instanceof s.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const a=e.toArray().indexOf(this._activeItem);a>-1&&a!==this._activeItemIndex&&(this._activeItemIndex=a)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Go.b)(e=>this._pressedLetters.push(e)),WC(t),w(()=>this._pressedLetters.length>0),(0,ri.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const o=this._getItemsArray();for(let a=1;a<o.length+1;a++){const h=(this._activeItemIndex+a)%o.length,v=o[h];if(!this._skipPredicateFn(v)&&0===v.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(h);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(h=>!t[h]||this._allowedModifierKeys.indexOf(h)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&a){this.setNextItemActive();break}return;case 38:if(this._vertical&&a){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&a){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&a){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&a){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&a){this.setLastItemActive();break}return;default:return void((a||La(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),o="number"==typeof t?t:e.indexOf(t),a=e[o];this._activeItem=null==a?null:a,this._activeItemIndex=o}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let o=1;o<=e.length;o++){const a=(this._activeItemIndex+t*o+e.length)%e.length;if(!this._skipPredicateFn(e[a]))return void this.setActiveItem(a)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const o=this._getItemsArray();if(o[t]){for(;this._skipPredicateFn(o[t]);)if(!o[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof s.n_E?this._items.toArray():this._items}}class HI extends qM{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class iS extends qM{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let ZM=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const o=function(i){try{return i.frameElement}catch(t){return null}}(function(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(o&&(-1===hw(o)||!this.isVisible(o)))return!1;let a=e.nodeName.toLowerCase(),h=hw(e);return e.hasAttribute("contenteditable")?-1!==h:!("iframe"===a||"object"===a||this._platform.WEBKIT&&this._platform.IOS&&!function(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===a?!!e.hasAttribute("controls")&&-1!==h:"video"===a?-1!==h&&(null!==h||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,o){return function(i){return!function(i){return function(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function(i){return function(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||Kb(i))}(e)&&!this.isDisabled(e)&&((null==o?void 0:o.ignoreVisibility)||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(xo))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(xo))},token:i,providedIn:"root"}),i})();function Kb(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function hw(i){if(!Kb(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class qI{constructor(t,e,o,a,h=!1){this._element=t,this._checker=e,this._ngZone=o,this._document=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,h||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let o=0;o<e.length;o++)e[o].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[o]):e[o].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[o]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const e=this._getFirstTabbableElement(t);return null==e||e.focus(),!!e}return t.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let o=0;o<e.length;o++){let a=e[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[o]):null;if(a)return a}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let o=e.length-1;o>=0;o--){let a=e[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[o]):null;if(a)return a}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ue(1)).subscribe(t)}}let XM=(()=>{class i{constructor(e,o,a){this._checker=e,this._ngZone=o,this._document=a}create(e,o=!1){return new qI(e,this._checker,this._ngZone,this._document,o)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(ZM),s.LFG(s.R0b),s.LFG(wt))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(ZM),(0,s.LFG)(s.R0b),(0,s.LFG)(wt))},token:i,providedIn:"root"}),i})();"undefined"!=typeof Element&&Element;const fw=new s.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),oS=new s.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let ex=(()=>{class i{constructor(e,o,a,h){this._ngZone=o,this._defaultOptions=h,this._document=a,this._liveElement=e||this._createLiveElement()}announce(e,...o){const a=this._defaultOptions;let h,v;return 1===o.length&&"number"==typeof o[0]?v=o[0]:[h,v]=o,this.clear(),clearTimeout(this._previousTimeout),h||(h=a&&a.politeness?a.politeness:"polite"),null==v&&a&&(v=a.duration),this._liveElement.setAttribute("aria-live",h),this._ngZone.runOutsideAngular(()=>new Promise(k=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,k(),"number"==typeof v&&(this._previousTimeout=setTimeout(()=>this.clear(),v))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e="cdk-live-announcer-element",o=this._document.getElementsByClassName(e),a=this._document.createElement("div");for(let h=0;h<o.length;h++)o[h].parentNode.removeChild(o[h]);return a.classList.add(e),a.classList.add("cdk-visually-hidden"),a.setAttribute("aria-atomic","true"),a.setAttribute("aria-live","polite"),this._document.body.appendChild(a),a}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(fw,8),s.LFG(s.R0b),s.LFG(wt),s.LFG(oS,8))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(fw,8),(0,s.LFG)(s.R0b),(0,s.LFG)(wt),(0,s.LFG)(oS,8))},token:i,providedIn:"root"}),i})();function sS(i){return 0===i.buttons}function aS(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const iv=new s.OlP("cdk-focus-monitor-default-options"),Pc=aw({passive:!0,capture:!0});let eh=(()=>{class i{constructor(e,o,a,h){this._ngZone=e,this._platform=o,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=v=>{if(!this._lastTouchTarget){const k=sS(v)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(k)}},this._documentTouchstartListener=v=>{aS(v)?this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard"):(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=Af(v),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650))},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=v=>{const k=Af(v),z="focus"===v.type?this._onFocus:this._onBlur;for(let $=k;$;$=$.parentElement)z.call(this,v,$)},this._document=a,this._detectionMode=(null==h?void 0:h.detectionMode)||0}monitor(e,o=!1){const a=Hm(e);if(!this._platform.isBrowser||1!==a.nodeType)return(0,Qn.of)(null);const h=zI(a)||this._getDocument(),v=this._elementInfo.get(a);if(v)return o&&(v.checkChildren=!0),v.subject;const k={checkChildren:o,subject:new Bn.xQ,rootNode:h};return this._elementInfo.set(a,k),this._registerGlobalListeners(k),k.subject}stopMonitoring(e){const o=Hm(e),a=this._elementInfo.get(o);a&&(a.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(a))}focusVia(e,o,a){const h=Hm(e);h===this._getDocument().activeElement?this._getClosestElementsInfo(h).forEach(([k,z])=>this._originChanged(k,o,z)):(this._setOriginForCurrentEventQueue(o),"function"==typeof h.focus&&h.focus(a))}ngOnDestroy(){this._elementInfo.forEach((e,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,o,a){a?e.classList.add(o):e.classList.remove(o)}_getFocusOrigin(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}_setClasses(e,o){this._toggleClass(e,"cdk-focused",!!o),this._toggleClass(e,"cdk-touch-focused","touch"===o),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===o),this._toggleClass(e,"cdk-mouse-focused","mouse"===o),this._toggleClass(e,"cdk-program-focused","program"===o)}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(e){const o=Af(e);return this._lastTouchTarget instanceof Node&&o instanceof Node&&(o===this._lastTouchTarget||o.contains(this._lastTouchTarget))}_onFocus(e,o){const a=this._elementInfo.get(o);!a||!a.checkChildren&&o!==Af(e)||this._originChanged(o,this._getFocusOrigin(e),a)}_onBlur(e,o){const a=this._elementInfo.get(o);!a||a.checkChildren&&e.relatedTarget instanceof Node&&o.contains(e.relatedTarget)||(this._setClasses(o),this._emitOrigin(a.subject,null))}_emitOrigin(e,o){this._ngZone.run(()=>e.next(o))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const o=e.rootNode,a=this._rootNodeFocusListenerCount.get(o)||0;a||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,Pc),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,Pc)}),this._rootNodeFocusListenerCount.set(o,a+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const h=this._getDocument(),v=this._getWindow();h.addEventListener("keydown",this._documentKeydownListener,Pc),h.addEventListener("mousedown",this._documentMousedownListener,Pc),h.addEventListener("touchstart",this._documentTouchstartListener,Pc),v.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(e){const o=e.rootNode;if(this._rootNodeFocusListenerCount.has(o)){const a=this._rootNodeFocusListenerCount.get(o);a>1?this._rootNodeFocusListenerCount.set(o,a-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Pc),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Pc),this._rootNodeFocusListenerCount.delete(o))}if(!--this._monitoredElementCount){const a=this._getDocument(),h=this._getWindow();a.removeEventListener("keydown",this._documentKeydownListener,Pc),a.removeEventListener("mousedown",this._documentMousedownListener,Pc),a.removeEventListener("touchstart",this._documentTouchstartListener,Pc),h.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(e,o,a){this._setClasses(e,o),this._emitOrigin(a.subject,o),this._lastFocusOrigin=o}_getClosestElementsInfo(e){const o=[];return this._elementInfo.forEach((a,h)=>{(h===e||a.checkChildren&&h.contains(e))&&o.push([h,a])}),o}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.R0b),s.LFG(xo),s.LFG(wt,8),s.LFG(iv,8))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(s.R0b),(0,s.LFG)(xo),(0,s.LFG)(wt,8),(0,s.LFG)(iv,8))},token:i,providedIn:"root"}),i})();function Af(i){return i.composedPath?i.composedPath()[0]:i.target}const JM="cdk-high-contrast-black-on-white",KM="cdk-high-contrast-white-on-black",mw="cdk-high-contrast-active";let lS=(()=>{class i{constructor(e,o){this._platform=e,this._document=o}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const o=this._document.defaultView||window,a=o&&o.getComputedStyle?o.getComputedStyle(e):null,h=(a&&a.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),h){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(mw),e.remove(JM),e.remove(KM);const o=this.getHighContrastMode();1===o?(e.add(mw),e.add(JM)):2===o&&(e.add(mw),e.add(KM))}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(xo),s.LFG(wt))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(xo),(0,s.LFG)(wt))},token:i,providedIn:"root"}),i})(),cS=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(lS))},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[Wb,Ku]]}),i})();const uS=new s.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,s.f3M)(wt)}});let Xh=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new s.vpe,e){const a=e.documentElement?e.documentElement.dir:null,h=(e.body?e.body.dir:null)||a;this.value="ltr"===h||"rtl"===h?h:"ltr"}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(uS,8))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(uS,8))},token:i,providedIn:"root"}),i})(),rv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();const jm=new s.GfV("11.2.13");class gw{}const kf="*";function As(i,t){return{type:7,name:i,definitions:t,options:{}}}function Dr(i,t=null){return{type:4,styles:t,timings:i}}function KI(i,t=null){return{type:2,steps:i,options:t}}function zn(i){return{type:6,styles:i,offset:null}}function ko(i,t,e){return{type:0,name:i,styles:t,options:e}}function h_(i){return{type:5,steps:i}}function Sr(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function dS(i,t=null){return{type:8,animation:i,options:t}}function eA(i=null){return{type:9,options:i}}function pS(i,t=null){return{type:10,animation:i,options:t}}function tA(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function e2(i){Promise.resolve(null).then(i)}class tx{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){e2(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class c{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,o=0,a=0;const h=this.players.length;0==h?e2(()=>this._onFinish()):this.players.forEach(v=>{v.onDone(()=>{++e==h&&this._onFinish()}),v.onDestroy(()=>{++o==h&&this._onDestroy()}),v.onStart(()=>{++a==h&&this._onStart()})}),this.totalTime=this.players.reduce((v,k)=>Math.max(v,k.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(o=>{const a=o.totalTime?Math.min(1,e/o.totalTime):1;o.setPosition(a)})}getPosition(){const t=this.players.reduce((e,o)=>null===e||o.totalTime>e.totalTime?o:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}function m(){return"undefined"!=typeof window&&void 0!==window.document}function b(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function T(i){switch(i.length){case 0:return new tx;case 1:return i[0];default:return new c(i)}}function N(i,t,e,o,a={},h={}){const v=[],k=[];let z=-1,$=null;if(o.forEach(oe=>{const me=oe.offset,ke=me==z,Fe=ke&&$||{};Object.keys(oe).forEach(je=>{let ct=je,kt=oe[je];if("offset"!==je)switch(ct=t.normalizePropertyName(ct,v),kt){case"!":kt=a[je];break;case kf:kt=h[je];break;default:kt=t.normalizeStyleValue(je,ct,kt,v)}Fe[ct]=kt}),ke||k.push(Fe),$=Fe,z=me}),v.length){const oe="\n - ";throw new Error(`Unable to animate due to the following errors:${oe}${v.join(oe)}`)}return k}function j(i,t,e,o){switch(t){case"start":i.onStart(()=>o(e&&W(e,"start",i)));break;case"done":i.onDone(()=>o(e&&W(e,"done",i)));break;case"destroy":i.onDestroy(()=>o(e&&W(e,"destroy",i)))}}function W(i,t,e){const o=e.totalTime,h=ie(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,null==o?i.totalTime:o,!!e.disabled),v=i._data;return null!=v&&(h._data=v),h}function ie(i,t,e,o,a="",h=0,v){return{element:i,triggerName:t,fromState:e,toState:o,phaseName:a,totalTime:h,disabled:!!v}}function he(i,t,e){let o;return i instanceof Map?(o=i.get(t),o||i.set(t,o=e)):(o=i[t],o||(o=i[t]=e)),o}function Te(i){const t=i.indexOf(":");return[i.substring(1,t),i.substr(t+1)]}let Le=(i,t)=>!1,_t=(i,t)=>!1,tn=(i,t,e)=>[];const Pn=b();(Pn||"undefined"!=typeof Element)&&(Le=m()?(i,t)=>{for(;t&&t!==document.documentElement;){if(t===i)return!0;t=t.parentNode||t.host}return!1}:(i,t)=>i.contains(t),_t=(()=>{if(Pn||Element.prototype.matches)return(i,t)=>i.matches(t);{const i=Element.prototype,t=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return t?(e,o)=>t.apply(e,[o]):_t}})(),tn=(i,t,e)=>{let o=[];if(e){const a=i.querySelectorAll(t);for(let h=0;h<a.length;h++)o.push(a[h])}else{const a=i.querySelector(t);a&&o.push(a)}return o});let fi=null,ji=!1;function Er(i){fi||(fi=("undefined"!=typeof document?document.body:null)||{},ji=!!fi.style&&"WebkitAppearance"in fi.style);let t=!0;return fi.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in fi.style,!t&&ji&&(t="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in fi.style)),t}const gu=_t,d_=Le,Ym=tn;function p_(i){const t={};return Object.keys(i).forEach(e=>{const o=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[o]=i[e]}),t}let f_=(()=>{class i{validateStyleProperty(e){return Er(e)}matchesElement(e,o){return gu(e,o)}containsElement(e,o){return d_(e,o)}query(e,o,a){return Ym(e,o,a)}computeStyle(e,o,a){return a||""}animate(e,o,a,h,v,k=[],z){return new tx(a,h)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();class ov{}ov.NOOP=new f_;const nx="ng-enter",nA="ng-leave",iA="ng-trigger",rA=".ng-trigger",sO="ng-animating",t2=".ng-animating";function ix(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:n2(parseFloat(t[1]),t[2])}function n2(i,t){switch(t){case"s":return 1e3*i;default:return i}}function oA(i,t,e){return i.hasOwnProperty("duration")?i:function(i,t,e){let a,h=0,v="";if("string"==typeof i){const k=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===k)return t.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};a=n2(parseFloat(k[1]),k[2]);const z=k[3];null!=z&&(h=n2(parseFloat(z),k[4]));const $=k[5];$&&(v=$)}else a=i;if(!e){let k=!1,z=t.length;a<0&&(t.push("Duration values below 0 are not allowed for this animation step."),k=!0),h<0&&(t.push("Delay values below 0 are not allowed for this animation step."),k=!0),k&&t.splice(z,0,`The provided timing value "${i}" is invalid.`)}return{duration:a,delay:h,easing:v}}(i,t,e)}function yw(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function sv(i,t,e={}){if(t)for(let o in i)e[o]=i[o];else yw(i,e);return e}function lO(i,t,e){return e?t+":"+e+";":""}function cO(i){let t="";for(let e=0;e<i.style.length;e++){const o=i.style.item(e);t+=lO(0,o,i.style.getPropertyValue(o))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=lO(0,QB(e),i.style[e]));i.setAttribute("style",t)}function qm(i,t,e){i.style&&(Object.keys(t).forEach(o=>{const a=o2(o);e&&!e.hasOwnProperty(o)&&(e[o]=i.style[a]),i.style[a]=t[o]}),b()&&cO(i))}function rx(i,t){i.style&&(Object.keys(t).forEach(e=>{const o=o2(e);i.style[o]=""}),b()&&cO(i))}function gS(i){return Array.isArray(i)?1==i.length?i[0]:KI(i):i}const r2=new RegExp("{{\\s*(.+?)\\s*}}","g");function uO(i){let t=[];if("string"==typeof i){let e;for(;e=r2.exec(i);)t.push(e[1]);r2.lastIndex=0}return t}function sA(i,t,e){const o=i.toString(),a=o.replace(r2,(h,v)=>{let k=t[v];return t.hasOwnProperty(v)||(e.push(`Please provide a value for the animation param ${v}`),k=""),k.toString()});return a==o?i:a}function aA(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const XB=/-+([a-z0-9])/g;function o2(i){return i.replace(XB,(...t)=>t[1].toUpperCase())}function QB(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function hO(i,t){return 0===i||0===t}function dO(i,t,e){const o=Object.keys(e);if(o.length&&t.length){let h=t[0],v=[];if(o.forEach(k=>{h.hasOwnProperty(k)||v.push(k),h[k]=e[k]}),v.length)for(var a=1;a<t.length;a++){let k=t[a];v.forEach(function(z){k[z]=s2(i,z)})}}return t}function Nd(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function s2(i,t){return window.getComputedStyle(i)[t]}function JB(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(o=>function(i,t,e){if(":"==i[0]){const z=function(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,o)=>parseFloat(o)>parseFloat(e);case":decrement":return(e,o)=>parseFloat(o)<parseFloat(e);default:return t.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,e);if("function"==typeof z)return void t.push(z);i=z}const o=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==o||o.length<4)return e.push(`The provided transition expression "${i}" is not supported`),t;const a=o[1],h=o[2],v=o[3];t.push(pO(a,v));"<"==h[0]&&!("*"==a&&"*"==v)&&t.push(pO(v,a))}(o,e,t)):e.push(i),e}const cA=new Set(["true","1"]),uA=new Set(["false","0"]);function pO(i,t){const e=cA.has(i)||uA.has(i),o=cA.has(t)||uA.has(t);return(a,h)=>{let v="*"==i||i==a,k="*"==t||t==h;return!v&&e&&"boolean"==typeof a&&(v=a?cA.has(i):uA.has(i)),!k&&o&&"boolean"==typeof h&&(k=h?cA.has(t):uA.has(t)),v&&k}}const t3=new RegExp("s*:selfs*,?","g");function a2(i,t,e){return new n3(i).build(t,e)}class n3{constructor(t){this._driver=t}build(t,e){const o=new s3(e);return this._resetContextStyleTimingState(o),Nd(this,gS(t),o)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let o=e.queryCount=0,a=e.depCount=0;const h=[],v=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(k=>{if(this._resetContextStyleTimingState(e),0==k.type){const z=k,$=z.name;$.toString().split(/\s*,\s*/).forEach(oe=>{z.name=oe,h.push(this.visitState(z,e))}),z.name=$}else if(1==k.type){const z=this.visitTransition(k,e);o+=z.queryCount,a+=z.depCount,v.push(z)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:h,transitions:v,queryCount:o,depCount:a,options:null}}visitState(t,e){const o=this.visitStyle(t.styles,e),a=t.options&&t.options.params||null;if(o.containsDynamicStyles){const h=new Set,v=a||{};if(o.styles.forEach(k=>{if(hA(k)){const z=k;Object.keys(z).forEach($=>{uO(z[$]).forEach(oe=>{v.hasOwnProperty(oe)||h.add(oe)})})}}),h.size){const k=aA(h.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${k.join(", ")}`)}}return{type:0,name:t.name,style:o,options:a?{params:a}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const o=Nd(this,gS(t.animation),e);return{type:1,matchers:JB(t.expr,e.errors),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:ox(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(o=>Nd(this,o,e)),options:ox(t.options)}}visitGroup(t,e){const o=e.currentTime;let a=0;const h=t.steps.map(v=>{e.currentTime=o;const k=Nd(this,v,e);return a=Math.max(a,e.currentTime),k});return e.currentTime=a,{type:3,steps:h,options:ox(t.options)}}visitAnimate(t,e){const o=function(i,t){let e=null;if(i.hasOwnProperty("duration"))e=i;else if("number"==typeof i)return l2(oA(i,t).duration,0,"");const o=i;if(o.split(/\s+/).some(h=>"{"==h.charAt(0)&&"{"==h.charAt(1))){const h=l2(0,0,"");return h.dynamic=!0,h.strValue=o,h}return e=e||oA(o,t),l2(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=o;let a,h=t.styles?t.styles:zn({});if(5==h.type)a=this.visitKeyframes(h,e);else{let v=t.styles,k=!1;if(!v){k=!0;const $={};o.easing&&($.easing=o.easing),v=zn($)}e.currentTime+=o.duration+o.delay;const z=this.visitStyle(v,e);z.isEmptyStep=k,a=z}return e.currentAnimateTimings=null,{type:4,timings:o,style:a,options:null}}visitStyle(t,e){const o=this._makeStyleAst(t,e);return this._validateStyleAst(o,e),o}_makeStyleAst(t,e){const o=[];Array.isArray(t.styles)?t.styles.forEach(v=>{"string"==typeof v?v==kf?o.push(v):e.errors.push(`The provided style string value ${v} is not allowed.`):o.push(v)}):o.push(t.styles);let a=!1,h=null;return o.forEach(v=>{if(hA(v)){const k=v,z=k.easing;if(z&&(h=z,delete k.easing),!a)for(let $ in k)if(k[$].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:o,easing:h,offset:t.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(t,e){const o=e.currentAnimateTimings;let a=e.currentTime,h=e.currentTime;o&&h>0&&(h-=o.duration+o.delay),t.styles.forEach(v=>{"string"!=typeof v&&Object.keys(v).forEach(k=>{if(!this._driver.validateStyleProperty(k))return void e.errors.push(`The provided animation property "${k}" is not a supported CSS property for animations`);const z=e.collectedStyles[e.currentQuerySelector],$=z[k];let oe=!0;$&&(h!=a&&h>=$.startTime&&a<=$.endTime&&(e.errors.push(`The CSS property "${k}" that exists between the times of "${$.startTime}ms" and "${$.endTime}ms" is also being animated in a parallel animation between the times of "${h}ms" and "${a}ms"`),oe=!1),h=$.startTime),oe&&(z[k]={startTime:h,endTime:a}),e.options&&function(i,t,e){const o=t.params||{},a=uO(i);a.length&&a.forEach(h=>{o.hasOwnProperty(h)||e.push(`Unable to resolve the local animation param ${h} in the given list of values`)})}(v[k],e.options,e.errors)})})}visitKeyframes(t,e){const o={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),o;let h=0;const v=[];let k=!1,z=!1,$=0;const oe=t.steps.map(Qt=>{const Sn=this._makeStyleAst(Qt,e);let xn=null!=Sn.offset?Sn.offset:function(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(hA(e)&&e.hasOwnProperty("offset")){const o=e;t=parseFloat(o.offset),delete o.offset}});else if(hA(i)&&i.hasOwnProperty("offset")){const e=i;t=parseFloat(e.offset),delete e.offset}return t}(Sn.styles),Xn=0;return null!=xn&&(h++,Xn=Sn.offset=xn),z=z||Xn<0||Xn>1,k=k||Xn<$,$=Xn,v.push(Xn),Sn});z&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),k&&e.errors.push("Please ensure that all keyframe offsets are in order");const me=t.steps.length;let ke=0;h>0&&h<me?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==h&&(ke=1/(me-1));const Fe=me-1,je=e.currentTime,ct=e.currentAnimateTimings,kt=ct.duration;return oe.forEach((Qt,Sn)=>{const xn=ke>0?Sn==Fe?1:ke*Sn:v[Sn],Xn=xn*kt;e.currentTime=je+ct.delay+Xn,ct.duration=Xn,this._validateStyleAst(Qt,e),Qt.offset=xn,o.styles.push(Qt)}),o}visitReference(t,e){return{type:8,animation:Nd(this,gS(t.animation),e),options:ox(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ox(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ox(t.options)}}visitQuery(t,e){const o=e.currentQuerySelector,a=t.options||{};e.queryCount++,e.currentQuery=t;const[h,v]=function(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(t3,"")),[i=i.replace(/@\*/g,rA).replace(/@\w+/g,e=>rA+"-"+e.substr(1)).replace(/:animating/g,t2),t]}(t.selector);e.currentQuerySelector=o.length?o+" "+h:h,he(e.collectedStyles,e.currentQuerySelector,{});const k=Nd(this,gS(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=o,{type:11,selector:h,limit:a.limit||0,optional:!!a.optional,includeSelf:v,animation:k,originalSelector:t.selector,options:ox(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const o="full"===t.timings?{duration:0,delay:0,easing:"full"}:oA(t.timings,e.errors,!0);return{type:12,animation:Nd(this,gS(t.animation),e),timings:o,options:null}}}class s3{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function hA(i){return!Array.isArray(i)&&"object"==typeof i}function ox(i){return i?(i=yw(i)).params&&(i.params=function(i){return i?yw(i):null}(i.params)):i={},i}function l2(i,t,e){return{duration:i,delay:t,easing:e}}function c2(i,t,e,o,a,h,v=null,k=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:o,duration:a,delay:h,totalTime:a+h,easing:v,subTimeline:k}}class dA{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let o=this._map.get(t);o||this._map.set(t,o=[]),o.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const h3=new RegExp(":enter","g"),p3=new RegExp(":leave","g");function u2(i,t,e,o,a,h={},v={},k,z,$=[]){return(new f3).buildKeyframes(i,t,e,o,a,h,v,k,z,$)}class f3{buildKeyframes(t,e,o,a,h,v,k,z,$,oe=[]){$=$||new dA;const me=new h2(t,e,$,a,h,oe,[]);me.options=z,me.currentTimeline.setStyles([v],null,me.errors,z),Nd(this,o,me);const ke=me.timelines.filter(Fe=>Fe.containsAnimation());if(ke.length&&Object.keys(k).length){const Fe=ke[ke.length-1];Fe.allowOnlyTimelineStyles()||Fe.setStyles([k],null,me.errors,z)}return ke.length?ke.map(Fe=>Fe.buildKeyframes()):[c2(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const o=e.subInstructions.consume(e.element);if(o){const a=e.createSubContext(t.options),h=e.currentTimeline.currentTime,v=this._visitSubInstructions(o,a,a.options);h!=v&&e.transformIntoNewTimeline(v)}e.previousNode=t}visitAnimateRef(t,e){const o=e.createSubContext(t.options);o.transformIntoNewTimeline(),this.visitReference(t.animation,o),e.transformIntoNewTimeline(o.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,o){let h=e.currentTimeline.currentTime;const v=null!=o.duration?ix(o.duration):null,k=null!=o.delay?ix(o.delay):null;return 0!==v&&t.forEach(z=>{const $=e.appendInstructionToTimeline(z,v,k);h=Math.max(h,$.duration+$.delay)}),h}visitReference(t,e){e.updateOptions(t.options,!0),Nd(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const o=e.subContextCount;let a=e;const h=t.options;if(h&&(h.params||h.delay)&&(a=e.createSubContext(h),a.transformIntoNewTimeline(),null!=h.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=pA);const v=ix(h.delay);a.delayNextStep(v)}t.steps.length&&(t.steps.forEach(v=>Nd(this,v,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>o&&a.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const o=[];let a=e.currentTimeline.currentTime;const h=t.options&&t.options.delay?ix(t.options.delay):0;t.steps.forEach(v=>{const k=e.createSubContext(t.options);h&&k.delayNextStep(h),Nd(this,v,k),a=Math.max(a,k.currentTimeline.currentTime),o.push(k.currentTimeline)}),o.forEach(v=>e.currentTimeline.mergeTimelineCollectedStyles(v)),e.transformIntoNewTimeline(a),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const o=t.strValue;return oA(e.params?sA(o,e.params,e.errors):o,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const o=e.currentAnimateTimings=this._visitTiming(t.timings,e),a=e.currentTimeline;o.delay&&(e.incrementTime(o.delay),a.snapshotCurrentStyles());const h=t.style;5==h.type?this.visitKeyframes(h,e):(e.incrementTime(o.duration),this.visitStyle(h,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const o=e.currentTimeline,a=e.currentAnimateTimings;!a&&o.getCurrentStyleProperties().length&&o.forwardFrame();const h=a&&a.easing||t.easing;t.isEmptyStep?o.applyEmptyStep(h):o.setStyles(t.styles,h,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const o=e.currentAnimateTimings,a=e.currentTimeline.duration,h=o.duration,k=e.createSubContext().currentTimeline;k.easing=o.easing,t.styles.forEach(z=>{k.forwardTime((z.offset||0)*h),k.setStyles(z.styles,z.easing,e.errors,e.options),k.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(k),e.transformIntoNewTimeline(a+h),e.previousNode=t}visitQuery(t,e){const o=e.currentTimeline.currentTime,a=t.options||{},h=a.delay?ix(a.delay):0;h&&(6===e.previousNode.type||0==o&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=pA);let v=o;const k=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=k.length;let z=null;k.forEach(($,oe)=>{e.currentQueryIndex=oe;const me=e.createSubContext(t.options,$);h&&me.delayNextStep(h),$===e.element&&(z=me.currentTimeline),Nd(this,t.animation,me),me.currentTimeline.applyStylesToKeyframe(),v=Math.max(v,me.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(v),z&&(e.currentTimeline.mergeTimelineCollectedStyles(z),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const o=e.parentContext,a=e.currentTimeline,h=t.timings,v=Math.abs(h.duration),k=v*(e.currentQueryTotal-1);let z=v*e.currentQueryIndex;switch(h.duration<0?"reverse":h.easing){case"reverse":z=k-z;break;case"full":z=o.currentStaggerTime}const oe=e.currentTimeline;z&&oe.delayNextStep(z);const me=oe.currentTime;Nd(this,t.animation,e),e.previousNode=t,o.currentStaggerTime=a.currentTime-me+(a.startTime-o.currentTimeline.startTime)}}const pA={};class h2{constructor(t,e,o,a,h,v,k,z){this._driver=t,this.element=e,this.subInstructions=o,this._enterClassName=a,this._leaveClassName=h,this.errors=v,this.timelines=k,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=z||new fA(this._driver,e,0),k.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const o=t;let a=this.options;null!=o.duration&&(a.duration=ix(o.duration)),null!=o.delay&&(a.delay=ix(o.delay));const h=o.params;if(h){let v=a.params;v||(v=this.options.params={}),Object.keys(h).forEach(k=>{(!e||!v.hasOwnProperty(k))&&(v[k]=sA(h[k],v,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const o=t.params={};Object.keys(e).forEach(a=>{o[a]=e[a]})}}return t}createSubContext(t=null,e,o){const a=e||this.element,h=new h2(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,o||0));return h.previousNode=this.previousNode,h.currentAnimateTimings=this.currentAnimateTimings,h.options=this._copyOptions(),h.updateOptions(t),h.currentQueryIndex=this.currentQueryIndex,h.currentQueryTotal=this.currentQueryTotal,h.parentContext=this,this.subContextCount++,h}transformIntoNewTimeline(t){return this.previousNode=pA,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,o){const a={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=o?o:0)+t.delay,easing:""},h=new m3(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,a,t.stretchStartingKeyframe);return this.timelines.push(h),a}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,o,a,h,v){let k=[];if(a&&k.push(this.element),t.length>0){t=(t=t.replace(h3,"."+this._enterClassName)).replace(p3,"."+this._leaveClassName);let $=this._driver.query(this.element,t,1!=o);0!==o&&($=o<0?$.slice($.length+o,$.length):$.slice(0,o)),k.push(...$)}return!h&&0==k.length&&v.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),k}}class fA{constructor(t,e,o,a){this._driver=t,this.element=e,this.startTime=o,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new fA(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||kf,this._currentKeyframe[e]=kf}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,o,a){e&&(this._previousKeyframe.easing=e);const h=a&&a.params||{},v=function(i,t){const e={};let o;return i.forEach(a=>{"*"===a?(o=o||Object.keys(t),o.forEach(h=>{e[h]=kf})):sv(a,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(v).forEach(k=>{const z=sA(v[k],h,o);this._pendingStyles[k]=z,this._localTimelineStyles.hasOwnProperty(k)||(this._backFill[k]=this._globalTimelineStyles.hasOwnProperty(k)?this._globalTimelineStyles[k]:kf),this._updateStyle(k,z)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(o=>{this._currentKeyframe[o]=t[o]}),Object.keys(this._localTimelineStyles).forEach(o=>{this._currentKeyframe.hasOwnProperty(o)||(this._currentKeyframe[o]=this._localTimelineStyles[o])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const o=this._styleSummary[e],a=t._styleSummary[e];(!o||a.time>o.time)&&this._updateStyle(e,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,o=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((k,z)=>{const $=sv(k,!0);Object.keys($).forEach(oe=>{const me=$[oe];"!"==me?t.add(oe):me==kf&&e.add(oe)}),o||($.offset=z/this.duration),a.push($)});const h=t.size?aA(t.values()):[],v=e.size?aA(e.values()):[];if(o){const k=a[0],z=yw(k);k.offset=0,z.offset=1,a=[k,z]}return c2(this.element,a,h,v,this.duration,this.startTime,this.easing,!1)}}class m3 extends fA{constructor(t,e,o,a,h,v,k=!1){super(t,e,v.delay),this.keyframes=o,this.preStyleProps=a,this.postStyleProps=h,this._stretchStartingKeyframe=k,this.timings={duration:v.duration,delay:v.delay,easing:v.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:o,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){const h=[],v=o+e,k=e/v,z=sv(t[0],!1);z.offset=0,h.push(z);const $=sv(t[0],!1);$.offset=gO(k),h.push($);const oe=t.length-1;for(let me=1;me<=oe;me++){let ke=sv(t[me],!1);ke.offset=gO((e+ke.offset*o)/v),h.push(ke)}o=v,e=0,a="",t=h}return c2(this.element,t,this.preStyleProps,this.postStyleProps,o,e,a,!0)}}function gO(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class d2{}class _3 extends d2{normalizePropertyName(t,e){return o2(t)}normalizeStyleValue(t,e,o,a){let h="";const v=o.toString().trim();if(y3[e]&&0!==o&&"0"!==o)if("number"==typeof o)h="px";else{const k=o.match(/^[+-]?[\d\.]+([a-z]*)$/);k&&0==k[1].length&&a.push(`Please provide a CSS unit value for ${t}:${o}`)}return v+h}}const y3=(()=>function(i){const t={};return i.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function _O(i,t,e,o,a,h,v,k,z,$,oe,me,ke){return{type:0,element:i,triggerName:t,isRemovalTransition:a,fromState:e,fromStyles:h,toState:o,toStyles:v,timelines:k,queriedElements:z,preStyleProps:$,postStyleProps:oe,totalTime:me,errors:ke}}const p2={};class yO{constructor(t,e,o){this._triggerName=t,this.ast=e,this._stateStyles=o}match(t,e,o,a){return function(i,t,e,o,a){return i.some(h=>h(t,e,o,a))}(this.ast.matchers,t,e,o,a)}buildStyles(t,e,o){const a=this._stateStyles["*"],h=this._stateStyles[t],v=a?a.buildStyles(e,o):{};return h?h.buildStyles(e,o):v}build(t,e,o,a,h,v,k,z,$,oe){const me=[],ke=this.ast.options&&this.ast.options.params||p2,je=this.buildStyles(o,k&&k.params||p2,me),ct=z&&z.params||p2,kt=this.buildStyles(a,ct,me),Qt=new Set,Sn=new Map,xn=new Map,Xn="void"===a,ni={params:Object.assign(Object.assign({},ke),ct)},Qi=oe?[]:u2(t,e,this.ast.animation,h,v,je,kt,ni,$,me);let Rr=0;if(Qi.forEach(us=>{Rr=Math.max(us.duration+us.delay,Rr)}),me.length)return _O(e,this._triggerName,o,a,Xn,je,kt,[],[],Sn,xn,Rr,me);Qi.forEach(us=>{const ac=us.element,QS=he(Sn,ac,{});us.preStyleProps.forEach(xx=>QS[xx]=!0);const JS=he(xn,ac,{});us.postStyleProps.forEach(xx=>JS[xx]=!0),ac!==e&&Qt.add(ac)});const ta=aA(Qt.values());return _O(e,this._triggerName,o,a,Xn,je,kt,Qi,ta,Sn,xn,Rr)}}class x3{constructor(t,e,o){this.styles=t,this.defaultParams=e,this.normalizer=o}buildStyles(t,e){const o={},a=yw(this.defaultParams);return Object.keys(t).forEach(h=>{const v=t[h];null!=v&&(a[h]=v)}),this.styles.styles.forEach(h=>{if("string"!=typeof h){const v=h;Object.keys(v).forEach(k=>{let z=v[k];z.length>1&&(z=sA(z,a,e));const $=this.normalizer.normalizePropertyName(k,e);z=this.normalizer.normalizeStyleValue(k,$,z,e),o[$]=z})}}),o}}class C3{constructor(t,e,o){this.name=t,this.ast=e,this._normalizer=o,this.transitionFactories=[],this.states={},e.states.forEach(a=>{this.states[a.name]=new x3(a.style,a.options&&a.options.params||{},o)}),vO(this.states,"true","1"),vO(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new yO(t,a,this.states))}),this.fallbackTransition=function(i,t,e){return new yO(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(v,k)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,o,a){return this.transitionFactories.find(v=>v.match(t,e,o,a))||null}matchStyles(t,e,o){return this.fallbackTransition.buildStyles(t,e,o)}}function vO(i,t,e){i.hasOwnProperty(t)?i.hasOwnProperty(e)||(i[e]=i[t]):i.hasOwnProperty(e)&&(i[t]=i[e])}const E3=new dA;class T3{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._animations={},this._playersById={},this.players=[]}register(t,e){const o=[],a=a2(this._driver,e,o);if(o.length)throw new Error(`Unable to build the animation due to the following errors: ${o.join("\n")}`);this._animations[t]=a}_buildPlayer(t,e,o){const a=t.element,h=N(0,this._normalizer,0,t.keyframes,e,o);return this._driver.animate(a,h,t.duration,t.delay,t.easing,[],!0)}create(t,e,o={}){const a=[],h=this._animations[t];let v;const k=new Map;if(h?(v=u2(this._driver,e,h,nx,nA,{},{},o,E3,a),v.forEach(oe=>{const me=he(k,oe.element,{});oe.postStyleProps.forEach(ke=>me[ke]=null)})):(a.push("The requested animation doesn't exist or has already been destroyed"),v=[]),a.length)throw new Error(`Unable to create the animation due to the following errors: ${a.join("\n")}`);k.forEach((oe,me)=>{Object.keys(oe).forEach(ke=>{oe[ke]=this._driver.computeStyle(me,ke,kf)})});const $=T(v.map(oe=>{const me=k.get(oe.element);return this._buildPlayer(oe,{},me)}));return this._playersById[t]=$,$.onDestroy(()=>this.destroy(t)),this.players.push($),$}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const o=this.players.indexOf(e);o>=0&&this.players.splice(o,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,o,a){const h=ie(e,"","","");return j(this._getPlayer(t),o,h,a),()=>{}}command(t,e,o,a){if("register"==o)return void this.register(t,a[0]);if("create"==o)return void this.create(t,e,a[0]||{});const h=this._getPlayer(t);switch(o){case"play":h.play();break;case"pause":h.pause();break;case"reset":h.reset();break;case"restart":h.restart();break;case"finish":h.finish();break;case"init":h.init();break;case"setPosition":h.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(t)}}}const bO="ng-animate-queued",xO="ng-animate-disabled",wO=".ng-animate-disabled",D3=[],CO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},I3={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Dp="__ng_removed";class f2{constructor(t,e=""){this.namespaceId=e;const o=t&&t.hasOwnProperty("value");if(this.value=function(i){return null!=i?i:null}(o?t.value:t),o){const h=yw(t);delete h.value,this.options=h}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const o=this.options.params;Object.keys(e).forEach(a=>{null==o[a]&&(o[a]=e[a])})}}}const _S="void",m2=new f2(_S);class P3{constructor(t,e,o){this.id=t,this.hostElement=e,this._engine=o,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ip(e,this._hostClassName)}listen(t,e,o,a){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${o}" because the animation trigger "${e}" doesn't exist!`);if(null==o||0==o.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(i){return"start"==i||"done"==i}(o))throw new Error(`The provided animation trigger event "${o}" for the animation trigger "${e}" is not supported!`);const h=he(this._elementListeners,t,[]),v={name:e,phase:o,callback:a};h.push(v);const k=he(this._engine.statesByElement,t,{});return k.hasOwnProperty(e)||(Ip(t,iA),Ip(t,iA+"-"+e),k[e]=m2),()=>{this._engine.afterFlush(()=>{const z=h.indexOf(v);z>=0&&h.splice(z,1),this._triggers[e]||delete k[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,o,a=!0){const h=this._getTrigger(e),v=new g2(this.id,e,t);let k=this._engine.statesByElement.get(t);k||(Ip(t,iA),Ip(t,iA+"-"+e),this._engine.statesByElement.set(t,k={}));let z=k[e];const $=new f2(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&z&&$.absorbOptions(z.options),k[e]=$,z||(z=m2),$.value!==_S&&z.value===$.value){if(!function(i,t){const e=Object.keys(i),o=Object.keys(t);if(e.length!=o.length)return!1;for(let a=0;a<e.length;a++){const h=e[a];if(!t.hasOwnProperty(h)||i[h]!==t[h])return!1}return!0}(z.params,$.params)){const ct=[],kt=h.matchStyles(z.value,z.params,ct),Qt=h.matchStyles($.value,$.params,ct);ct.length?this._engine.reportError(ct):this._engine.afterFlush(()=>{rx(t,kt),qm(t,Qt)})}return}const ke=he(this._engine.playersByElement,t,[]);ke.forEach(ct=>{ct.namespaceId==this.id&&ct.triggerName==e&&ct.queued&&ct.destroy()});let Fe=h.matchTransition(z.value,$.value,t,$.params),je=!1;if(!Fe){if(!a)return;Fe=h.fallbackTransition,je=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:Fe,fromState:z,toState:$,player:v,isFallbackTransition:je}),je||(Ip(t,bO),v.onStart(()=>{vw(t,bO)})),v.onDone(()=>{let ct=this.players.indexOf(v);ct>=0&&this.players.splice(ct,1);const kt=this._engine.playersByElement.get(t);if(kt){let Qt=kt.indexOf(v);Qt>=0&&kt.splice(Qt,1)}}),this.players.push(v),ke.push(v),v}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,o)=>{delete e[t]}),this._elementListeners.forEach((e,o)=>{this._elementListeners.set(o,e.filter(a=>a.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(o=>o.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const o=this._engine.driver.query(t,rA,!0);o.forEach(a=>{if(a[Dp])return;const h=this._engine.fetchNamespacesByElement(a);h.size?h.forEach(v=>v.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(t,e,o,a){const h=this._engine.statesByElement.get(t);if(h){const v=[];if(Object.keys(h).forEach(k=>{if(this._triggers[k]){const z=this.trigger(t,k,_S,a);z&&v.push(z)}}),v.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),o&&T(v).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),o=this._engine.statesByElement.get(t);if(e&&o){const a=new Set;e.forEach(h=>{const v=h.name;if(a.has(v))return;a.add(v);const z=this._triggers[v].fallbackTransition,$=o[v]||m2,oe=new f2(_S),me=new g2(this.id,v,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:v,transition:z,fromState:$,toState:oe,player:me,isFallbackTransition:!0})})}}removeNode(t,e){const o=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let a=!1;if(o.totalAnimations){const h=o.players.length?o.playersByQueriedElement.get(t):[];if(h&&h.length)a=!0;else{let v=t;for(;v=v.parentNode;)if(o.statesByElement.get(v)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(t),a)o.markElementAsRemoved(this.id,t,!1,e);else{const h=t[Dp];(!h||h===CO)&&(o.afterFlush(()=>this.clearElementCache(t)),o.destroyInnerAnimations(t),o._onRemovalComplete(t,e))}}insertNode(t,e){Ip(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(o=>{const a=o.player;if(a.destroyed)return;const h=o.element,v=this._elementListeners.get(h);v&&v.forEach(k=>{if(k.name==o.triggerName){const z=ie(h,o.triggerName,o.fromState.value,o.toState.value);z._data=t,j(o.player,k.phase,z,k.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(o)}),this._queue=[],e.sort((o,a)=>{const h=o.transition.ast.depCount,v=a.transition.ast.depCount;return 0==h||0==v?h-v:this._engine.driver.containsElement(o.element,a.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(o=>o.element===t)||e,e}}class R3{constructor(t,e,o){this.bodyNode=t,this.driver=e,this._normalizer=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,h)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(o=>{o.queued&&t.push(o)})}),t}createNamespace(t,e){const o=new P3(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(o,e):(this.newHostElements.set(e,o),this.collectEnterElement(e)),this._namespaceLookup[t]=o}_balanceNamespaceList(t,e){const o=this._namespaceList.length-1;if(o>=0){let a=!1;for(let h=o;h>=0;h--)if(this.driver.containsElement(this._namespaceList[h].hostElement,e)){this._namespaceList.splice(h+1,0,t),a=!0;break}a||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let o=this._namespaceLookup[t];return o||(o=this.createNamespace(t,e)),o}registerTrigger(t,e,o){let a=this._namespaceLookup[t];a&&a.register(e,o)&&this.totalAnimations++}destroy(t,e){if(!t)return;const o=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(o.hostElement),delete this._namespaceLookup[t];const a=this._namespaceList.indexOf(o);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>o.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,o=this.statesByElement.get(t);if(o){const a=Object.keys(o);for(let h=0;h<a.length;h++){const v=o[a[h]].namespaceId;if(v){const k=this._fetchNamespace(v);k&&e.add(k)}}}return e}trigger(t,e,o,a){if(mA(e)){const h=this._fetchNamespace(t);if(h)return h.trigger(e,o,a),!0}return!1}insertNode(t,e,o,a){if(!mA(e))return;const h=e[Dp];if(h&&h.setForRemoval){h.setForRemoval=!1,h.setForMove=!0;const v=this.collectedLeaveElements.indexOf(e);v>=0&&this.collectedLeaveElements.splice(v,1)}if(t){const v=this._fetchNamespace(t);v&&v.insertNode(e,o)}a&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ip(t,xO)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),vw(t,xO))}removeNode(t,e,o,a){if(mA(e)){const h=t?this._fetchNamespace(t):null;if(h?h.removeNode(e,a):this.markElementAsRemoved(t,e,!1,a),o){const v=this.namespacesByHostElement.get(e);v&&v.id!==t&&v.removeNode(e,a)}}else this._onRemovalComplete(e,a)}markElementAsRemoved(t,e,o,a){this.collectedLeaveElements.push(e),e[Dp]={namespaceId:t,setForRemoval:a,hasAnimation:o,removedBeforeQueried:!1}}listen(t,e,o,a,h){return mA(e)?this._fetchNamespace(t).listen(e,o,a,h):()=>{}}_buildInstruction(t,e,o,a,h){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,o,a,t.fromState.options,t.toState.options,e,h)}destroyInnerAnimations(t){let e=this.driver.query(t,rA,!0);e.forEach(o=>this.destroyActiveAnimationsForElement(o)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,t2,!0),e.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return T(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Dp];if(e&&e.setForRemoval){if(t[Dp]=CO,e.namespaceId){this.destroyInnerAnimations(t);const o=this._fetchNamespace(e.namespaceId);o&&o.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,wO)&&this.markElementAsDisabled(t,!1),this.driver.query(t,wO,!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,a)=>this._balanceNamespaceList(o,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++)Ip(this.collectedEnterElements[o],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const o=[];try{e=this._flushAnimations(o,t)}finally{for(let a=0;a<o.length;a++)o[a]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){const o=this._whenQuietFns;this._whenQuietFns=[],e.length?T(e).onDone(()=>{o.forEach(a=>a())}):o.forEach(a=>a())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const o=new dA,a=[],h=new Map,v=[],k=new Map,z=new Map,$=new Map,oe=new Set;this.disabledNodes.forEach(_i=>{oe.add(_i);const zi=this.driver.query(_i,".ng-animate-queued",!0);for(let ur=0;ur<zi.length;ur++)oe.add(zi[ur])});const me=this.bodyNode,ke=Array.from(this.statesByElement.keys()),Fe=TO(ke,this.collectedEnterElements),je=new Map;let ct=0;Fe.forEach((_i,zi)=>{const ur=nx+ct++;je.set(zi,ur),_i.forEach(_o=>Ip(_o,ur))});const kt=[],Qt=new Set,Sn=new Set;for(let _i=0;_i<this.collectedLeaveElements.length;_i++){const zi=this.collectedLeaveElements[_i],ur=zi[Dp];ur&&ur.setForRemoval&&(kt.push(zi),Qt.add(zi),ur.hasAnimation?this.driver.query(zi,".ng-star-inserted",!0).forEach(_o=>Qt.add(_o)):Sn.add(zi))}const xn=new Map,Xn=TO(ke,Array.from(Qt));Xn.forEach((_i,zi)=>{const ur=nA+ct++;xn.set(zi,ur),_i.forEach(_o=>Ip(_o,ur))}),t.push(()=>{Fe.forEach((_i,zi)=>{const ur=je.get(zi);_i.forEach(_o=>vw(_o,ur))}),Xn.forEach((_i,zi)=>{const ur=xn.get(zi);_i.forEach(_o=>vw(_o,ur))}),kt.forEach(_i=>{this.processLeaveNode(_i)})});const ni=[],Qi=[];for(let _i=this._namespaceList.length-1;_i>=0;_i--)this._namespaceList[_i].drainQueuedTransitions(e).forEach(ur=>{const _o=ur.player,lc=ur.element;if(ni.push(_o),this.collectedEnterElements.length){const Xm=lc[Dp];if(Xm&&Xm.setForMove)return void _o.destroy()}const $m=!me||!this.driver.containsElement(me,lc),Vd=xn.get(lc),vv=je.get(lc),Ta=this._buildInstruction(ur,o,vv,Vd,$m);if(Ta.errors&&Ta.errors.length)Qi.push(Ta);else{if($m)return _o.onStart(()=>rx(lc,Ta.fromStyles)),_o.onDestroy(()=>qm(lc,Ta.toStyles)),void a.push(_o);if(ur.isFallbackTransition)return _o.onStart(()=>rx(lc,Ta.fromStyles)),_o.onDestroy(()=>qm(lc,Ta.toStyles)),void a.push(_o);Ta.timelines.forEach(Xm=>Xm.stretchStartingKeyframe=!0),o.append(lc,Ta.timelines),v.push({instruction:Ta,player:_o,element:lc}),Ta.queriedElements.forEach(Xm=>he(k,Xm,[]).push(_o)),Ta.preStyleProps.forEach((Xm,KS)=>{const bk=Object.keys(Xm);if(bk.length){let wx=z.get(KS);wx||z.set(KS,wx=new Set),bk.forEach(IP=>wx.add(IP))}}),Ta.postStyleProps.forEach((Xm,KS)=>{const bk=Object.keys(Xm);let wx=$.get(KS);wx||$.set(KS,wx=new Set),bk.forEach(IP=>wx.add(IP))})}});if(Qi.length){const _i=[];Qi.forEach(zi=>{_i.push(`@${zi.triggerName} has failed due to:\n`),zi.errors.forEach(ur=>_i.push(`- ${ur}\n`))}),ni.forEach(zi=>zi.destroy()),this.reportError(_i)}const Rr=new Map,ta=new Map;v.forEach(_i=>{const zi=_i.element;o.has(zi)&&(ta.set(zi,zi),this._beforeAnimationBuild(_i.player.namespaceId,_i.instruction,Rr))}),a.forEach(_i=>{const zi=_i.element;this._getPreviousPlayers(zi,!1,_i.namespaceId,_i.triggerName,null).forEach(_o=>{he(Rr,zi,[]).push(_o),_o.destroy()})});const us=kt.filter(_i=>AO(_i,z,$)),ac=new Map;EO(ac,this.driver,Sn,$,kf).forEach(_i=>{AO(_i,z,$)&&us.push(_i)});const JS=new Map;Fe.forEach((_i,zi)=>{EO(JS,this.driver,new Set(_i),z,"!")}),us.forEach(_i=>{const zi=ac.get(_i),ur=JS.get(_i);ac.set(_i,Object.assign(Object.assign({},zi),ur))});const xx=[],xB=[],wB={};v.forEach(_i=>{const{element:zi,player:ur,instruction:_o}=_i;if(o.has(zi)){if(oe.has(zi))return ur.onDestroy(()=>qm(zi,_o.toStyles)),ur.disabled=!0,ur.overrideTotalTime(_o.totalTime),void a.push(ur);let lc=wB;if(ta.size>1){let Vd=zi;const vv=[];for(;Vd=Vd.parentNode;){const Ta=ta.get(Vd);if(Ta){lc=Ta;break}vv.push(Vd)}vv.forEach(Ta=>ta.set(Ta,lc))}const $m=this._buildAnimation(ur.namespaceId,_o,Rr,h,JS,ac);if(ur.setRealPlayer($m),lc===wB)xx.push(ur);else{const Vd=this.playersByElement.get(lc);Vd&&Vd.length&&(ur.parentPlayer=T(Vd)),a.push(ur)}}else rx(zi,_o.fromStyles),ur.onDestroy(()=>qm(zi,_o.toStyles)),xB.push(ur),oe.has(zi)&&a.push(ur)}),xB.forEach(_i=>{const zi=h.get(_i.element);if(zi&&zi.length){const ur=T(zi);_i.setRealPlayer(ur)}}),a.forEach(_i=>{_i.parentPlayer?_i.syncPlayerEvents(_i.parentPlayer):_i.destroy()});for(let _i=0;_i<kt.length;_i++){const zi=kt[_i],ur=zi[Dp];if(vw(zi,nA),ur&&ur.hasAnimation)continue;let _o=[];if(k.size){let $m=k.get(zi);$m&&$m.length&&_o.push(...$m);let Vd=this.driver.query(zi,t2,!0);for(let vv=0;vv<Vd.length;vv++){let Ta=k.get(Vd[vv]);Ta&&Ta.length&&_o.push(...Ta)}}const lc=_o.filter($m=>!$m.destroyed);lc.length?N3(this,zi,lc):this.processLeaveNode(zi)}return kt.length=0,xx.forEach(_i=>{this.players.push(_i),_i.onDone(()=>{_i.destroy();const zi=this.players.indexOf(_i);this.players.splice(zi,1)}),_i.play()}),xx}elementContainsData(t,e){let o=!1;const a=e[Dp];return a&&a.setForRemoval&&(o=!0),this.playersByElement.has(e)&&(o=!0),this.playersByQueriedElement.has(e)&&(o=!0),this.statesByElement.has(e)&&(o=!0),this._fetchNamespace(t).elementContainsData(e)||o}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,o,a,h){let v=[];if(e){const k=this.playersByQueriedElement.get(t);k&&(v=k)}else{const k=this.playersByElement.get(t);if(k){const z=!h||h==_S;k.forEach($=>{$.queued||!z&&$.triggerName!=a||v.push($)})}}return(o||a)&&(v=v.filter(k=>!(o&&o!=k.namespaceId||a&&a!=k.triggerName))),v}_beforeAnimationBuild(t,e,o){const h=e.element,v=e.isRemovalTransition?void 0:t,k=e.isRemovalTransition?void 0:e.triggerName;for(const z of e.timelines){const $=z.element,oe=$!==h,me=he(o,$,[]);this._getPreviousPlayers($,oe,v,k,e.toState).forEach(Fe=>{const je=Fe.getRealPlayer();je.beforeDestroy&&je.beforeDestroy(),Fe.destroy(),me.push(Fe)})}rx(h,e.fromStyles)}_buildAnimation(t,e,o,a,h,v){const k=e.triggerName,z=e.element,$=[],oe=new Set,me=new Set,ke=e.timelines.map(je=>{const ct=je.element;oe.add(ct);const kt=ct[Dp];if(kt&&kt.removedBeforeQueried)return new tx(je.duration,je.delay);const Qt=ct!==z,Sn=function(i){const t=[];return MO(i,t),t}((o.get(ct)||D3).map(Rr=>Rr.getRealPlayer())).filter(Rr=>!!Rr.element&&Rr.element===ct),xn=h.get(ct),Xn=v.get(ct),ni=N(0,this._normalizer,0,je.keyframes,xn,Xn),Qi=this._buildPlayer(je,ni,Sn);if(je.subTimeline&&a&&me.add(ct),Qt){const Rr=new g2(t,k,ct);Rr.setRealPlayer(Qi),$.push(Rr)}return Qi});$.forEach(je=>{he(this.playersByQueriedElement,je.element,[]).push(je),je.onDone(()=>function(i,t,e){let o;if(i instanceof Map){if(o=i.get(t),o){if(o.length){const a=o.indexOf(e);o.splice(a,1)}0==o.length&&i.delete(t)}}else if(o=i[t],o){if(o.length){const a=o.indexOf(e);o.splice(a,1)}0==o.length&&delete i[t]}return o}(this.playersByQueriedElement,je.element,je))}),oe.forEach(je=>Ip(je,sO));const Fe=T(ke);return Fe.onDestroy(()=>{oe.forEach(je=>vw(je,sO)),qm(z,e.toStyles)}),me.forEach(je=>{he(a,je,[]).push(Fe)}),Fe}_buildPlayer(t,e,o){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,o):new tx(t.duration,t.delay)}}class g2{constructor(t,e,o){this.namespaceId=t,this.triggerName=e,this.element=o,this._player=new tx,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(o=>j(t,e,void 0,o))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){he(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function mA(i){return i&&1===i.nodeType}function SO(i,t){const e=i.style.display;return i.style.display=null!=t?t:"none",e}function EO(i,t,e,o,a){const h=[];e.forEach(z=>h.push(SO(z)));const v=[];o.forEach((z,$)=>{const oe={};z.forEach(me=>{const ke=oe[me]=t.computeStyle($,me,a);(!ke||0==ke.length)&&($[Dp]=I3,v.push($))}),i.set($,oe)});let k=0;return e.forEach(z=>SO(z,h[k++])),v}function TO(i,t){const e=new Map;if(i.forEach(k=>e.set(k,[])),0==t.length)return e;const a=new Set(t),h=new Map;function v(k){if(!k)return 1;let z=h.get(k);if(z)return z;const $=k.parentNode;return z=e.has($)?$:a.has($)?1:v($),h.set(k,z),z}return t.forEach(k=>{const z=v(k);1!==z&&e.get(z).push(k)}),e}const gA="$$classes";function Ip(i,t){if(i.classList)i.classList.add(t);else{let e=i[gA];e||(e=i[gA]={}),e[t]=!0}}function vw(i,t){if(i.classList)i.classList.remove(t);else{let e=i[gA];e&&delete e[t]}}function N3(i,t,e){T(e).onDone(()=>i.processLeaveNode(t))}function MO(i,t){for(let e=0;e<i.length;e++){const o=i[e];o instanceof c?MO(o.players,t):t.push(o)}}function AO(i,t,e){const o=e.get(i);if(!o)return!1;let a=t.get(i);return a?o.forEach(h=>a.add(h)):t.set(i,o),e.delete(i),!0}class _A{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._triggerCache={},this.onRemovalComplete=(a,h)=>{},this._transitionEngine=new R3(t,e,o),this._timelineEngine=new T3(t,e,o),this._transitionEngine.onRemovalComplete=(a,h)=>this.onRemovalComplete(a,h)}registerTrigger(t,e,o,a,h){const v=t+"-"+a;let k=this._triggerCache[v];if(!k){const z=[],$=a2(this._driver,h,z);if(z.length)throw new Error(`The animation trigger "${a}" has failed to build due to the following errors:\n - ${z.join("\n - ")}`);k=function(i,t,e){return new C3(i,t,e)}(a,$,this._normalizer),this._triggerCache[v]=k}this._transitionEngine.registerTrigger(e,a,k)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,o,a){this._transitionEngine.insertNode(t,e,o,a)}onRemove(t,e,o,a){this._transitionEngine.removeNode(t,e,a||!1,o)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,o,a){if("@"==o.charAt(0)){const[h,v]=Te(o);this._timelineEngine.command(h,e,v,a)}else this._transitionEngine.trigger(t,e,o,a)}listen(t,e,o,a,h){if("@"==o.charAt(0)){const[v,k]=Te(o);return this._timelineEngine.listen(v,e,k,h)}return this._transitionEngine.listen(t,e,o,a,h)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function kO(i,t){let e=null,o=null;return Array.isArray(t)&&t.length?(e=_2(t[0]),t.length>1&&(o=_2(t[t.length-1]))):t&&(e=_2(t)),e||o?new bw(i,e,o):null}class bw{constructor(t,e,o){this._element=t,this._startStyles=e,this._endStyles=o,this._state=0;let a=bw.initialStylesByElement.get(t);a||bw.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&qm(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qm(this._element,this._initialStyles),this._endStyles&&(qm(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(bw.initialStylesByElement.delete(this._element),this._startStyles&&(rx(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(rx(this._element,this._endStyles),this._endStyles=null),qm(this._element,this._initialStyles),this._state=3)}}function _2(i){let t=null;const e=Object.keys(i);for(let o=0;o<e.length;o++){const a=e[o];V3(a)&&(t=t||{},t[a]=i[a])}return t}function V3(i){return"display"===i||"position"===i}bw.initialStylesByElement=new WeakMap;const DO="animation",IO="animationend";class G3{constructor(t,e,o,a,h,v,k){this._element=t,this._name=e,this._duration=o,this._delay=a,this._easing=h,this._fillMode=v,this._onDoneFn=k,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=z=>this._handleCallback(z)}apply(){(function(i,t){const e=v2(i,"").trim();let o=0;e.length&&(function(i,t){let e=0;for(let o=0;o<i.length;o++)","===i.charAt(o)&&e++;return e}(e)+1,t=`${e}, ${t}`),yA(i,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),OO(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){PO(this._element,this._name,"paused")}resume(){PO(this._element,this._name,"running")}setPosition(t){const e=RO(this._element,this._name);this._position=t*this._duration,yA(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),o=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&o>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),OO(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,t){const o=v2(i,"").split(","),a=y2(o,t);a>=0&&(o.splice(a,1),yA(i,"",o.join(",")))}(this._element,this._name))}}function PO(i,t,e){yA(i,"PlayState",e,RO(i,t))}function RO(i,t){const e=v2(i,"");return e.indexOf(",")>0?y2(e.split(","),t):y2([e],t)}function y2(i,t){for(let e=0;e<i.length;e++)if(i[e].indexOf(t)>=0)return e;return-1}function OO(i,t,e){e?i.removeEventListener(IO,t):i.addEventListener(IO,t)}function yA(i,t,e,o){const a=DO+t;if(null!=o){const h=i.style[a];if(h.length){const v=h.split(",");v[o]=e,e=v.join(",")}}i.style[a]=e}function v2(i,t){return i.style[DO+t]||""}class FO{constructor(t,e,o,a,h,v,k,z){this.element=t,this.keyframes=e,this.animationName=o,this._duration=a,this._delay=h,this._finalStyles=k,this._specialStyles=z,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=v||"linear",this.totalTime=a+h,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new G3(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(o=>{"offset"!=o&&(t[o]=e?this._finalStyles[o]:s2(this.element,o))})}this.currentSnapshot=t}}class $3 extends tx{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=p_(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class NO{constructor(){this._count=0}validateStyleProperty(t){return Er(t)}matchesElement(t,e){return gu(t,e)}containsElement(t,e){return d_(t,e)}query(t,e,o){return Ym(t,e,o)}computeStyle(t,e,o){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,o){o=o.map(k=>p_(k));let a=`@keyframes ${e} {\n`,h="";o.forEach(k=>{h=" ";const z=parseFloat(k.offset);a+=`${h}${100*z}% {\n`,h+=" ",Object.keys(k).forEach($=>{const oe=k[$];switch($){case"offset":return;case"easing":return void(oe&&(a+=`${h}animation-timing-function: ${oe};\n`));default:return void(a+=`${h}${$}: ${oe};\n`)}}),a+=`${h}}\n`}),a+="}\n";const v=document.createElement("style");return v.textContent=a,v}animate(t,e,o,a,h,v=[],k){const z=v.filter(kt=>kt instanceof FO),$={};hO(o,a)&&z.forEach(kt=>{let Qt=kt.currentSnapshot;Object.keys(Qt).forEach(Sn=>$[Sn]=Qt[Sn])});const oe=function(i){let t={};return i&&(Array.isArray(i)?i:[i]).forEach(o=>{Object.keys(o).forEach(a=>{"offset"==a||"easing"==a||(t[a]=o[a])})}),t}(e=dO(t,e,$));if(0==o)return new $3(t,oe);const me="gen_css_kf_"+this._count++,ke=this.buildKeyframeElement(t,me,e);(function(i){var t;const e=null===(t=i.getRootNode)||void 0===t?void 0:t.call(i);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(ke);const je=kO(t,e),ct=new FO(t,e,me,o,a,h,oe,je);return ct.onDestroy(()=>function(i){i.parentNode.removeChild(i)}(ke)),ct}}class zO{constructor(t,e,o,a){this.element=t,this.keyframes=e,this.options=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,o){return t.animate(e,o)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:s2(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class ez{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(VO().toString()),this._cssKeyframesDriver=new NO}validateStyleProperty(t){return Er(t)}matchesElement(t,e){return gu(t,e)}containsElement(t,e){return d_(t,e)}query(t,e,o){return Ym(t,e,o)}computeStyle(t,e,o){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,o,a,h,v=[],k){if(!k&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,o,a,h,v);const oe={duration:o,delay:a,fill:0==a?"both":"forwards"};h&&(oe.easing=h);const me={},ke=v.filter(je=>je instanceof zO);hO(o,a)&&ke.forEach(je=>{let ct=je.currentSnapshot;Object.keys(ct).forEach(kt=>me[kt]=ct[kt])});const Fe=kO(t,e=dO(t,e=e.map(je=>sv(je,!1)),me));return new zO(t,e,oe,Fe)}}function VO(){return m()&&Element.prototype.animate||{}}let nz=(()=>{class i extends gw{constructor(e,o){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(o.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(e){const o=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(e)?KI(e):e;return UO(this._renderer,null,o,"register",[a]),new iz(o,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.FYo),s.LFG(wt))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();class iz extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new rz(this._id,t,e||{},this._renderer)}}class rz{constructor(t,e,o,a){this.id=t,this.element=e,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",o)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return UO(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function UO(i,t,e,o,a){return i.setProperty(t,`@@${e}:${o}`,a)}const HO="@.disabled";let oz=(()=>{class i{constructor(e,o,a){this.delegate=e,this.engine=o,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),o.onRemovalComplete=(h,v)=>{v&&v.parentNode(h)&&v.removeChild(h.parentNode,h)}}createRenderer(e,o){const h=this.delegate.createRenderer(e,o);if(!(e&&o&&o.data&&o.data.animation)){let oe=this._rendererCache.get(h);return oe||(oe=new GO("",h,this.engine),this._rendererCache.set(h,oe)),oe}const v=o.id,k=o.id+"-"+this._currentId;this._currentId++,this.engine.register(k,e);const z=oe=>{Array.isArray(oe)?oe.forEach(z):this.engine.registerTrigger(v,k,e,oe.name,oe)};return o.data.animation.forEach(z),new sz(this,k,h,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,o,a){e>=0&&e<this._microtaskId?this._zone.run(()=>o(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(h=>{const[v,k]=h;v(k)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([o,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.FYo),s.LFG(_A),s.LFG(s.R0b))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();class GO{constructor(t,e,o){this.namespaceId=t,this.delegate=e,this.engine=o,this.destroyNode=this.delegate.destroyNode?a=>e.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,o,a=!0){this.delegate.insertBefore(t,e,o),this.engine.onInsert(this.namespaceId,e,t,a)}removeChild(t,e,o){this.engine.onRemove(this.namespaceId,e,this.delegate,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,a){this.delegate.setAttribute(t,e,o,a)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,a){this.delegate.setStyle(t,e,o,a)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){"@"==e.charAt(0)&&e==HO?this.disableAnimations(t,!!o):this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.delegate.listen(t,e,o)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class sz extends GO{constructor(t,e,o,a){super(e,o,a),this.factory=t,this.namespaceId=e}setProperty(t,e,o){"@"==e.charAt(0)?"."==e.charAt(1)&&e==HO?this.disableAnimations(t,o=void 0===o||!!o):this.engine.process(this.namespaceId,t,e.substr(1),o):this.delegate.setProperty(t,e,o)}listen(t,e,o){if("@"==e.charAt(0)){const a=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let h=e.substr(1),v="";return"@"!=h.charAt(0)&&([h,v]=function(i){const t=i.indexOf(".");return[i.substring(0,t),i.substr(t+1)]}(h)),this.engine.listen(this.namespaceId,a,h,v,k=>{this.factory.scheduleListenerCallback(k._data||-1,o,k)})}return this.delegate.listen(t,e,o)}}let cz=(()=>{class i extends _A{constructor(e,o,a){super(e.body,o,a)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt),s.LFG(ov),s.LFG(d2))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const th=new s.OlP("AnimationModuleType"),jO=[{provide:gw,useClass:nz},{provide:d2,useFactory:function(){return new _3}},{provide:_A,useClass:cz},{provide:s.FYo,useFactory:function(i,t,e){return new oz(i,t,e)},deps:[Ha,_A,s.R0b]}],YO=[{provide:ov,useFactory:function(){return"function"==typeof VO()?new ez:new NO}},{provide:th,useValue:"BrowserAnimations"},...jO],qO=[{provide:ov,useClass:f_},{provide:th,useValue:"NoopAnimations"},...jO];let pz=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?qO:YO}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:YO,imports:[Xd]}),i})();function gz(i,t){if(1&i&&s._UZ(0,"mat-pseudo-checkbox",4),2&i){const e=s.oxw();s.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function _z(i,t){if(1&i&&(s.TgZ(0,"span",5),s._uU(1),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.hij("(",e.group.label,")")}}const yz=["*"];let vz=(()=>{class i{}return i.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",i.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",i.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",i.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",i})(),bz=(()=>{class i{}return i.COMPLEX="375ms",i.ENTERING="225ms",i.EXITING="195ms",i})();const ZO=new s.GfV("11.2.13"),wz=new s.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let sx,Ir=(()=>{class i{constructor(e,o,a){this._hasDoneGlobalChecks=!1,this._document=a,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=o,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const e=this._document.defaultView||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return(0,s.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const e=this._getWindow();return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const o=this._document.createElement("div");o.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(o);const a=getComputedStyle(o);a&&"none"!==a.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(o)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&ZO.full!==jm.full&&console.warn("The Angular Material version ("+ZO.full+") does not match the Angular CDK version ("+jm.full+").\nPlease ensure the versions of these two packages exactly match.")}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(lS),s.LFG(wz,8),s.LFG(wt))},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[rv],rv]}),i})();function m_(i){return class extends i{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=_r(t)}}}function xw(i,t){return class extends i{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const o=e||this.defaultColor;o!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),o&&this._elementRef.nativeElement.classList.add(`mat-${o}`),this._color=o)}}}function bA(i){return class extends i{constructor(...o){super(...o),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(o){this._disableRipple=_r(o)}}}function WO(i,t=0){return class extends i{constructor(...a){super(...a),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(a){this._tabIndex=null!=a?Rl(a):this.defaultTabIndex}}}function $O(i){return class extends i{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new Bn.xQ}updateErrorState(){const t=this.errorState,h=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);h!==t&&(this.errorState=h,this.stateChanges.next())}}}function XO(i){return class extends i{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Gr.y(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}try{sx="undefined"!=typeof Intl}catch(i){sx=!1}let b2=(()=>{class i{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})();class Oz{constructor(t,e,o){this._renderer=t,this.element=e,this.config=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const JO={enterDuration:450,exitDuration:400},x2=aw({passive:!0}),KO=["mousedown","touchstart"],eF=["mouseup","mouseleave","touchend","touchcancel"];class Lz{constructor(t,e,o,a){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=Hm(o))}fadeInRipple(t,e,o={}){const a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),h=Object.assign(Object.assign({},JO),o.animation);o.centered&&(t=a.left+a.width/2,e=a.top+a.height/2);const v=o.radius||function(i,t,e){const o=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),a=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+a*a)}(t,e,a),k=t-a.left,z=e-a.top,$=h.enterDuration,oe=document.createElement("div");oe.classList.add("mat-ripple-element"),oe.style.left=k-v+"px",oe.style.top=z-v+"px",oe.style.height=2*v+"px",oe.style.width=2*v+"px",null!=o.color&&(oe.style.backgroundColor=o.color),oe.style.transitionDuration=`${$}ms`,this._containerElement.appendChild(oe),function(i){window.getComputedStyle(i).getPropertyValue("opacity")}(oe),oe.style.transform="scale(1)";const me=new Oz(this,oe,o);return me.state=0,this._activeRipples.add(me),o.persistent||(this._mostRecentTransientRipple=me),this._runTimeoutOutsideZone(()=>{const ke=me===this._mostRecentTransientRipple;me.state=1,!o.persistent&&(!ke||!this._isPointerDown)&&me.fadeOut()},$),me}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const o=t.element,a=Object.assign(Object.assign({},JO),t.config.animation);o.style.transitionDuration=`${a.exitDuration}ms`,o.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,o.parentNode.removeChild(o)},a.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Hm(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(KO))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(eF),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=sS(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!aS(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,x2)})})}_removeTriggerEvents(){this._triggerElement&&(KO.forEach(t=>{this._triggerElement.removeEventListener(t,this,x2)}),this._pointerUpEventsRegistered&&eF.forEach(t=>{this._triggerElement.removeEventListener(t,this,x2)}))}}const zz=new s.OlP("mat-ripple-global-options");let av=(()=>{class i{constructor(e,o,a,h,v){this._elementRef=e,this._animationMode=v,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=h||{},this._rippleRenderer=new Lz(this,o,e,a)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,o=0,a){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,o,Object.assign(Object.assign({},this.rippleConfig),a)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(xo),s.Y36(zz,8),s.Y36(th,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("mat-ripple-unbounded",o.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),i})(),vS=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[Ir,Wb],Ir]}),i})(),Vz=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(th,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,o){2&e&&s.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===o.state)("mat-pseudo-checkbox-checked","checked"===o.state)("mat-pseudo-checkbox-disabled",o.disabled)("_mat-animation-noopable","NoopAnimations"===o._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,o){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),i})(),Uz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[Ir]]}),i})();const w2=new s.OlP("MAT_OPTION_PARENT_COMPONENT");class Hz{}const Gz=m_(Hz);let jz=0,tF=(()=>{class i extends Gz{constructor(e){var o;super(),this._labelId="mat-optgroup-label-"+jz++,this._inert=null!==(o=null==e?void 0:e.inertGroups)&&void 0!==o&&o}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(w2,8))},i.\u0275dir=s.lG2({type:i,inputs:{label:"label"},features:[s.qOj]}),i})();const C2=new s.OlP("MatOptgroup");let Yz=0;class qz{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let Zz=(()=>{class i{constructor(e,o,a,h){this._element=e,this._changeDetectorRef=o,this._parent=a,this.group=h,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Yz++,this.onSelectionChange=new s.vpe,this._stateChanges=new Bn.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=_r(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,o){const a=this._getHostElement();"function"==typeof a.focus&&a.focus(o)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!La(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new qz(this,e))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(void 0),s.Y36(tF))},i.\u0275dir=s.lG2({type:i,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),nF=(()=>{class i extends Zz{constructor(e,o,a,h){super(e,o,a,h)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(w2,8),s.Y36(C2,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,o){1&e&&s.NdJ("click",function(){return o._selectViaInteraction()})("keydown",function(h){return o._handleKeydown(h)}),2&e&&(s.Ikx("id",o.id),s.uIk("tabindex",o._getTabIndex())("aria-selected",o._getAriaSelected())("aria-disabled",o.disabled.toString()),s.ekj("mat-selected",o.selected)("mat-option-multiple",o.multiple)("mat-active",o.active)("mat-option-disabled",o.disabled))},exportAs:["matOption"],features:[s.qOj],ngContentSelectors:yz,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,o){1&e&&(s.F$t(),s.YNc(0,gz,1,2,"mat-pseudo-checkbox",0),s.TgZ(1,"span",1),s.Hsn(2),s.qZA(),s.YNc(3,_z,2,1,"span",2),s._UZ(4,"div",3)),2&e&&(s.Q6J("ngIf",o.multiple),s.xp6(3),s.Q6J("ngIf",o.group&&o.group._inert),s.xp6(1),s.Q6J("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disabled||o.disableRipple))},directives:[Xt,av,Vz],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),i})();function iF(i,t,e){if(e.length){let o=t.toArray(),a=e.toArray(),h=0;for(let v=0;v<i+1;v++)o[v].group&&o[v].group===a[h]&&h++;return h}return 0}let rF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[vS,sr,Ir,Uz]]}),i})();const $z=["mat-sort-header",""];function Xz(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",3),s.NdJ("@arrowPosition.start",function(){return s.CHM(e),s.oxw()._disableViewStateAnimation=!0})("@arrowPosition.done",function(){return s.CHM(e),s.oxw()._disableViewStateAnimation=!1}),s._UZ(1,"div",4),s.TgZ(2,"div",5),s._UZ(3,"div",6),s._UZ(4,"div",7),s._UZ(5,"div",8),s.qZA(),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),s.xp6(2),s.Q6J("@indicator",e._getArrowDirectionState()),s.xp6(1),s.Q6J("@leftPointer",e._getArrowDirectionState()),s.xp6(1),s.Q6J("@rightPointer",e._getArrowDirectionState())}}const Qz=["*"],Jz=new s.OlP("MAT_SORT_DEFAULT_OPTIONS");class Kz{}const eV=XO(m_(Kz));let ax=(()=>{class i extends eV{constructor(e){super(),this._defaultOptions=e,this.sortables=new Map,this._stateChanges=new Bn.xQ,this.start="asc",this._direction="",this.sortChange=new s.vpe}get direction(){return this._direction}set direction(e){this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=_r(e)}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){var o,a,h;if(!e)return"";const v=null!==(a=null!==(o=null==e?void 0:e.disableClear)&&void 0!==o?o:this.disableClear)&&void 0!==a?a:!!(null===(h=this._defaultOptions)||void 0===h?void 0:h.disableClear);let k=function(i,t){let e=["asc","desc"];return"desc"==i&&e.reverse(),t||e.push(""),e}(e.start||this.start,v),z=k.indexOf(this.direction)+1;return z>=k.length&&(z=0),k[z]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Jz,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[s.qOj,s.TTD]}),i})();const lv=bz.ENTERING+" "+vz.STANDARD_CURVE,ww={indicator:As("indicator",[ko("active-asc, asc",zn({transform:"translateY(0px)"})),ko("active-desc, desc",zn({transform:"translateY(10px)"})),Sr("active-asc <=> active-desc",Dr(lv))]),leftPointer:As("leftPointer",[ko("active-asc, asc",zn({transform:"rotate(-45deg)"})),ko("active-desc, desc",zn({transform:"rotate(45deg)"})),Sr("active-asc <=> active-desc",Dr(lv))]),rightPointer:As("rightPointer",[ko("active-asc, asc",zn({transform:"rotate(45deg)"})),ko("active-desc, desc",zn({transform:"rotate(-45deg)"})),Sr("active-asc <=> active-desc",Dr(lv))]),arrowOpacity:As("arrowOpacity",[ko("desc-to-active, asc-to-active, active",zn({opacity:1})),ko("desc-to-hint, asc-to-hint, hint",zn({opacity:.54})),ko("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",zn({opacity:0})),Sr("* => asc, * => desc, * => active, * => hint, * => void",Dr("0ms")),Sr("* <=> *",Dr(lv))]),arrowPosition:As("arrowPosition",[Sr("* => desc-to-hint, * => desc-to-active",Dr(lv,h_([zn({transform:"translateY(-25%)"}),zn({transform:"translateY(0)"})]))),Sr("* => hint-to-desc, * => active-to-desc",Dr(lv,h_([zn({transform:"translateY(0)"}),zn({transform:"translateY(25%)"})]))),Sr("* => asc-to-hint, * => asc-to-active",Dr(lv,h_([zn({transform:"translateY(25%)"}),zn({transform:"translateY(0)"})]))),Sr("* => hint-to-asc, * => active-to-asc",Dr(lv,h_([zn({transform:"translateY(0)"}),zn({transform:"translateY(-25%)"})]))),ko("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",zn({transform:"translateY(0)"})),ko("hint-to-desc, active-to-desc, desc",zn({transform:"translateY(-25%)"})),ko("hint-to-asc, active-to-asc, asc",zn({transform:"translateY(25%)"}))]),allowChildren:As("allowChildren",[Sr("* <=> *",[tA("@*",eA(),{optional:!0})])])};let wA=(()=>{class i{constructor(){this.changes=new Bn.xQ,this.sortButtonLabel=e=>`Change sorting for ${e}`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})();const iV={provide:wA,deps:[[new s.FiY,new s.tp0,wA]],useFactory:function(i){return i||new wA}};class rV{}const oV=m_(rV);let S2=(()=>{class i extends oV{constructor(e,o,a,h,v,k){super(),this._intl=e,this._changeDetectorRef=o,this._sort=a,this._columnDef=h,this._focusMonitor=v,this._elementRef=k,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._handleStateChanges()}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=_r(e)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const o=!!e;o!==this._showIndicatorHint&&(this._setIndicatorHintVisible(o),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(32===e.keyCode||13===e.keyCode)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_handleStateChanges(){this._rerenderSubscription=(0,vs.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(wA),s.Y36(s.sBO),s.Y36(ax,8),s.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),s.Y36(eh),s.Y36(s.SBq))},i.\u0275cmp=s.Xpm({type:i,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(e,o){1&e&&s.NdJ("click",function(){return o._handleClick()})("keydown",function(h){return o._handleKeydown(h)})("mouseenter",function(){return o._setIndicatorHintVisible(!0)})("mouseleave",function(){return o._setIndicatorHintVisible(!1)}),2&e&&(s.uIk("aria-sort",o._getAriaSortAttribute()),s.ekj("mat-sort-header-disabled",o._isDisabled()))},inputs:{disabled:"disabled",arrowPosition:"arrowPosition",disableClear:"disableClear",id:["mat-sort-header","id"],start:"start"},exportAs:["matSortHeader"],features:[s.qOj],attrs:$z,ngContentSelectors:Qz,decls:4,vars:6,consts:[["role","button",1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(e,o){1&e&&(s.F$t(),s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.Hsn(2),s.qZA(),s.YNc(3,Xz,6,6,"div",2),s.qZA()),2&e&&(s.ekj("mat-sort-header-sorted",o._isSorted())("mat-sort-header-position-before","before"==o.arrowPosition),s.uIk("tabindex",o._isDisabled()?null:0),s.xp6(3),s.Q6J("ngIf",o._renderArrow()))},directives:[Xt],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n"],encapsulation:2,data:{animation:[ww.indicator,ww.leftPointer,ww.rightPointer,ww.arrowOpacity,ww.arrowPosition,ww.allowChildren]},changeDetection:0}),i})(),sV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[iV],imports:[[sr,Ir]]}),i})();const oF=["mat-button",""],sF=["*"],lV=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class cV{constructor(t){this._elementRef=t}}const uV=xw(m_(bA(cV)));let cv=(()=>{class i extends uV{constructor(e,o,a){super(e),this._focusMonitor=o,this._animationMode=a,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const h of lV)this._hasHostAttributes(h)&&this._getHostElement().classList.add(h);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,o){e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(o=>this._getHostElement().hasAttribute(o))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(eh),s.Y36(th,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,o){if(1&e&&s.Gf(av,5),2&e){let a;s.iGM(a=s.CRH())&&(o.ripple=a.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,o){2&e&&(s.uIk("disabled",o.disabled||null),s.ekj("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-button-disabled",o.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[s.qOj],attrs:oF,ngContentSelectors:sF,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,o){1&e&&(s.F$t(),s.TgZ(0,"span",0),s.Hsn(1),s.qZA(),s._UZ(2,"span",1),s._UZ(3,"span",2)),2&e&&(s.xp6(2),s.ekj("mat-button-ripple-round",o.isRoundButton||o.isIconButton),s.Q6J("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",o.isIconButton)("matRippleTrigger",o._getHostElement()))},directives:[av],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),E2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[vS,Ir],Ir]}),i})();var hV=nt(9105);function Cw(i,t,e,o){return(0,hV.m)(e)&&(o=e,e=void 0),o?Cw(i,t,e).pipe((0,ri.U)(a=>(0,Ru.k)(a)?o(...a):o(a))):new Gr.y(a=>{lF(i,t,function(v){a.next(arguments.length>1?Array.prototype.slice.call(arguments):v)},a,e)})}function lF(i,t,e,o,a){let h;if(function(i){return i&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener}(i)){const v=i;i.addEventListener(t,e,a),h=()=>v.removeEventListener(t,e,a)}else if(function(i){return i&&"function"==typeof i.on&&"function"==typeof i.off}(i)){const v=i;i.on(t,e),h=()=>v.off(t,e)}else if(function(i){return i&&"function"==typeof i.addListener&&"function"==typeof i.removeListener}(i)){const v=i;i.addListener(t,e),h=()=>v.removeListener(t,e)}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(let v=0,k=i.length;v<k;v++)lF(i[v],t,e,o,a)}o.add(h)}var mV=nt(6465),_V=nt(6102);const vV=new class extends _V.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let o,a=-1,h=e.length;t=t||e.shift();do{if(o=t.execute(t.state,t.delay))break}while(++a<h&&(t=e.shift()));if(this.active=!1,o){for(;++a<h&&(t=e.shift());)t.unsubscribe();throw o}}}(class extends mV.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,o=0){if(null!==o&&o>0||null===o&&this.delay>0)return super.recycleAsyncId(t,e,o);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});var bS=nt(4581);function T2(i){return!!i&&(i instanceof Gr.y||"function"==typeof i.lift&&"function"==typeof i.subscribe)}class xV{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new wV(t,this.durationSelector))}}class wV extends Is.Ds{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:a}=this;e=a(t)}catch(a){return this.destination.error(a)}const o=(0,Is.ft)(e,new Is.IY(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}}clearThrottle(){const{value:t,hasValue:e,throttled:o}=this;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var cF=nt(6561);function SV(i){const{index:t,period:e,subscriber:o}=i;if(o.next(t),!o.closed){if(-1===e)return o.complete();i.index=t+1,this.schedule(i,e)}}function CA(i,t=xl.P){return function(i){return function(e){return e.lift(new xV(i))}}(()=>function(i=0,t,e){let o=-1;return(0,cF.k)(t)?o=Number(t)<1?1:Number(t):(0,Ia.K)(t)&&(e=t),(0,Ia.K)(e)||(e=xl.P),new Gr.y(a=>{const h=(0,cF.k)(i)?i:+i-e.now();return e.schedule(SV,h,{index:0,period:o,subscriber:a})})}(i,t))}function qo(i){return t=>t.lift(new EV(i))}class EV{constructor(t){this.notifier=t}call(t,e){const o=new TV(t),a=(0,Is.ft)(this.notifier,new Is.IY(o));return a&&!o.seenValue?(o.add(a),e.subscribe(o)):o}}class TV extends Is.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class uF{}function SA(i){return i&&"function"==typeof i.connect}class MV extends uF{constructor(t){super(),this._data=t}connect(){return T2(this._data)?this._data:(0,Qn.of)(this._data)}disconnect(){}}class hF{applyChanges(t,e,o,a,h){t.forEachOperation((v,k,z)=>{let $,oe;if(null==v.previousIndex){const me=o(v,k,z);$=e.createEmbeddedView(me.templateRef,me.context,me.index),oe=1}else null==z?(e.remove(k),oe=3):($=e.get(k),e.move($,z),oe=2);h&&h({context:null==$?void 0:$.context,operation:oe,record:v})})}detach(){}}class AV{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(t,e,o,a,h){t.forEachOperation((v,k,z)=>{let $,oe;null==v.previousIndex?($=this._insertView(()=>o(v,k,z),z,e,a(v)),oe=$?1:0):null==z?(this._detachAndCacheView(k,e),oe=3):($=this._moveView(k,z,e,a(v)),oe=2),h&&h({context:null==$?void 0:$.context,operation:oe,record:v})})}detach(){for(const t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,e,o,a){const h=this._insertViewFromCache(e,o);if(h)return void(h.context.$implicit=a);const v=t();return o.createEmbeddedView(v.templateRef,v.context,v.index)}_detachAndCacheView(t,e){const o=e.detach(t);this._maybeCacheView(o,e)}_moveView(t,e,o,a){const h=o.get(t);return o.move(h,e),h.context.$implicit=a,h}_maybeCacheView(t,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{const o=e.indexOf(t);-1===o?t.destroy():e.remove(o)}}_insertViewFromCache(t,e){const o=this._viewCache.pop();return o&&e.insert(o,t),o||null}}class kV{constructor(t=!1,e,o=!0){this._multiple=t,this._emitChanges=o,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Bn.xQ,e&&e.length&&(t?e.forEach(a=>this._markSelected(a)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}const xS=new s.OlP("_ViewRepeater"),DV=["contentWrapper"],IV=["*"],pF=new s.OlP("VIRTUAL_SCROLL_STRATEGY");class PV{constructor(t,e,o){this._scrolledIndexChange=new Bn.xQ,this.scrolledIndexChange=this._scrolledIndexChange.pipe(fc()),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=o}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,o){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=o,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},o=this._viewport.getViewportSize(),a=this._viewport.getDataLength();let h=this._viewport.measureScrollOffset(),v=this._itemSize>0?h/this._itemSize:0;if(e.end>a){const z=Math.ceil(o/this._itemSize),$=Math.max(0,Math.min(v,a-z));v!=$&&(v=$,h=$*this._itemSize,e.start=Math.floor(v)),e.end=Math.max(0,Math.min(a,e.start+z))}const k=h-e.start*this._itemSize;if(k<this._minBufferPx&&0!=e.start){const z=Math.ceil((this._maxBufferPx-k)/this._itemSize);e.start=Math.max(0,e.start-z),e.end=Math.min(a,Math.ceil(v+(o+this._minBufferPx)/this._itemSize))}else{const z=e.end*this._itemSize-(h+o);if(z<this._minBufferPx&&e.end!=a){const $=Math.ceil((this._maxBufferPx-z)/this._itemSize);$>0&&(e.end=Math.min(a,e.end+$),e.start=Math.max(0,Math.floor(v-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(v))}}function RV(i){return i._scrollStrategy}let fF=(()=>{class i{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new PV(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=Rl(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Rl(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Rl(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[s._Bn([{provide:pF,useFactory:RV,deps:[(0,s.Gpc)(()=>i)]}]),s.TTD]}),i})(),wS=(()=>{class i{constructor(e,o,a){this._ngZone=e,this._platform=o,this._scrolled=new Bn.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Gr.y(o=>{this._globalSubscription||this._addGlobalListener();const a=e>0?this._scrolled.pipe(CA(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Qn.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){const a=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(w(h=>!h||a.indexOf(h)>-1))}getAncestorScrollContainers(e){const o=[];return this.scrollContainers.forEach((a,h)=>{this._scrollableContainsElement(h,e)&&o.push(h)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let a=Hm(o),h=e.getElementRef().nativeElement;do{if(a==h)return!0}while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Cw(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.R0b),s.LFG(xo),s.LFG(wt,8))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(s.R0b),(0,s.LFG)(xo),(0,s.LFG)(wt,8))},token:i,providedIn:"root"}),i})(),mF=(()=>{class i{constructor(e,o,a,h){this.elementRef=e,this.scrollDispatcher=o,this.ngZone=a,this.dir=h,this._destroyed=new Bn.xQ,this._elementScrolled=new Gr.y(v=>this.ngZone.runOutsideAngular(()=>Cw(this.elementRef.nativeElement,"scroll").pipe(qo(this._destroyed)).subscribe(v)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const o=this.elementRef.nativeElement,a=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=a?e.end:e.start),null==e.right&&(e.right=a?e.start:e.end),null!=e.bottom&&(e.top=o.scrollHeight-o.clientHeight-e.bottom),a&&0!=$b()?(null!=e.left&&(e.right=o.scrollWidth-o.clientWidth-e.left),2==$b()?e.left=e.right:1==$b()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=o.scrollWidth-o.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const o=this.elementRef.nativeElement;lw()?o.scrollTo(e):(null!=e.top&&(o.scrollTop=e.top),null!=e.left&&(o.scrollLeft=e.left))}measureScrollOffset(e){const o="left",a="right",h=this.elementRef.nativeElement;if("top"==e)return h.scrollTop;if("bottom"==e)return h.scrollHeight-h.clientHeight-h.scrollTop;const v=this.dir&&"rtl"==this.dir.value;return"start"==e?e=v?a:o:"end"==e&&(e=v?o:a),v&&2==$b()?e==o?h.scrollWidth-h.clientWidth-h.scrollLeft:h.scrollLeft:v&&1==$b()?e==o?h.scrollLeft+h.scrollWidth-h.clientWidth:-h.scrollLeft:e==o?h.scrollLeft:h.scrollWidth-h.clientWidth-h.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(wS),s.Y36(s.R0b),s.Y36(Xh,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),i})(),lx=(()=>{class i{constructor(e,o,a){this._platform=e,this._change=new Bn.xQ,this._changeListener=h=>{this._change.next(h)},this._document=a,o.runOutsideAngular(()=>{if(e.isBrowser){const h=this._getWindow();h.addEventListener("resize",this._changeListener),h.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:o,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+o,height:a,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,o=this._getWindow(),a=e.documentElement,h=a.getBoundingClientRect();return{top:-h.top||e.body.scrollTop||o.scrollY||a.scrollTop||0,left:-h.left||e.body.scrollLeft||o.scrollX||a.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(CA(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(xo),s.LFG(s.R0b),s.LFG(wt,8))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(xo),(0,s.LFG)(s.R0b),(0,s.LFG)(wt,8))},token:i,providedIn:"root"}),i})();const NV="undefined"!=typeof requestAnimationFrame?vV:bS.E;let CS=(()=>{class i extends mF{constructor(e,o,a,h,v,k,z){super(e,k,a,v),this.elementRef=e,this._changeDetectorRef=o,this._scrollStrategy=h,this._detachedSubject=new Bn.xQ,this._renderedRangeSubject=new Bn.xQ,this._orientation="vertical",this.scrolledIndexChange=new Gr.y($=>this._scrollStrategy.scrolledIndexChange.subscribe(oe=>Promise.resolve().then(()=>this.ngZone.run(()=>$.next(oe))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=ms.w.EMPTY,this._viewportChanges=z.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe(xs(null),CA(0,NV)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(qo(this._detachedSubject)).subscribe(o=>{const a=o.length;a!==this._dataLength&&(this._dataLength=a,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function(i,t){return i.start==t.start&&i.end==t.end})(this._renderedRange,e)||(this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,o="to-start"){const h="horizontal"==this.orientation,v=h?"X":"Y";let z=`translate${v}(${Number((h&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===o&&(z+=` translate${v}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=z&&(this._renderedContentTransform=z,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,o="auto"){const a={behavior:o};"horizontal"===this.orientation?a.start=e:a.top=e,this.scrollTo(a)}scrollToIndex(e,o="auto"){this._scrollStrategy.scrollToIndex(e,o)}measureScrollOffset(e){return super.measureScrollOffset(e||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const e=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?e.clientWidth:e.clientHeight}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const o of e)o()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(pF,8),s.Y36(Xh,8),s.Y36(wS),s.Y36(lx))},i.\u0275cmp=s.Xpm({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,o){if(1&e&&s.Gf(DV,7),2&e){let a;s.iGM(a=s.CRH())&&(o._contentWrapper=a.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===o.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==o.orientation)},inputs:{orientation:"orientation"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[s._Bn([{provide:mF,useExisting:i}]),s.qOj],ngContentSelectors:IV,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,o){1&e&&(s.F$t(),s.TgZ(0,"div",0,1),s.Hsn(2),s.qZA(),s._UZ(3,"div",2)),2&e&&(s.xp6(3),s.Udp("width",o._totalContentWidth)("height",o._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),i})();function gF(i,t,e){if(!e.getBoundingClientRect)return 0;const a=e.getBoundingClientRect();return"horizontal"===i?"start"===t?a.left:a.right:"start"===t?a.top:a.bottom}let _F=(()=>{class i{constructor(e,o,a,h,v,k){this._viewContainerRef=e,this._template=o,this._differs=a,this._viewRepeater=h,this._viewport=v,this.viewChange=new Bn.xQ,this._dataSourceChanges=new Bn.xQ,this.dataStream=this._dataSourceChanges.pipe(xs(null),Lh(),Yr(([z,$])=>this._changeDataSource(z,$)),rp(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new Bn.xQ,this.dataStream.subscribe(z=>{this._data=z,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(qo(this._destroyed)).subscribe(z=>{this._renderedRange=z,k.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,SA(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new MV(T2(e)?e:Array.from(e||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(o,a)=>e(o+(this._renderedRange?this._renderedRange.start:0),a):void 0}set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=Rl(e)}measureRangeSize(e,o){if(e.start>=e.end)return 0;const a=e.start-this._renderedRange.start,h=e.end-e.start;let v,k;for(let z=0;z<h;z++){const $=this._viewContainerRef.get(z+a);if($&&$.rootNodes.length){v=k=$.rootNodes[0];break}}for(let z=h-1;z>-1;z--){const $=this._viewContainerRef.get(z+a);if($&&$.rootNodes.length){k=$.rootNodes[$.rootNodes.length-1];break}}return v&&k?gF(o,"end",k)-gF(o,"start",v):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){!this._renderedRange||(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,o)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,o):o)),this._needsUpdate=!0)}_changeDataSource(e,o){return e&&e.disconnect(this),this._needsUpdate=!0,o?o.connect(this):(0,Qn.of)()}_updateContext(){const e=this._data.length;let o=this._viewContainerRef.length;for(;o--;){const a=this._viewContainerRef.get(o);a.context.index=this._renderedRange.start+o,a.context.count=e,this._updateComputedContextProperties(a.context),a.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(h,v,k)=>this._getEmbeddedViewArgs(h,k),h=>h.item),e.forEachIdentityChange(h=>{this._viewContainerRef.get(h.currentIndex).context.$implicit=h.item});const o=this._data.length;let a=this._viewContainerRef.length;for(;a--;){const h=this._viewContainerRef.get(a);h.context.index=this._renderedRange.start+a,h.context.count=o,this._updateComputedContextProperties(h.context)}}_updateComputedContextProperties(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}_getEmbeddedViewArgs(e,o){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:o}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(xS),s.Y36(CS,4),s.Y36(s.R0b))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[s._Bn([{provide:xS,useClass:AV}])]}),i})(),SS=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})(),cx=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[rv,Wb,SS],rv,SS]}),i})();class M2{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Sw extends M2{constructor(t,e,o,a){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=a}}class uv extends M2{constructor(t,e,o){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class BV extends M2{constructor(t){super(),this.element=t instanceof s.SBq?t.nativeElement:t}}class EA{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Sw?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof uv?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof BV?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class yF extends EA{constructor(t,e,o,a,h){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=a,this.attachDomPortal=v=>{const k=v.element,z=this._document.createComment("dom-portal");k.parentNode.insertBefore(z,k),this.outletElement.appendChild(k),this._attachedPortal=v,super.setDisposeFn(()=>{z.parentNode&&z.parentNode.replaceChild(k,z)})},this._document=h}attachComponentPortal(t){const o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let a;return t.viewContainerRef?(a=t.viewContainerRef.createComponent(o,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>a.destroy())):(a=o.create(t.injector||this._defaultInjector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(a)),this._attachedPortal=t,a}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context);return o.rootNodes.forEach(a=>this.outletElement.appendChild(a)),o.detectChanges(),this.setDisposeFn(()=>{let a=e.indexOf(o);-1!==a&&e.remove(a)}),this._attachedPortal=t,o}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let ux=(()=>{class i extends EA{constructor(e,o,a){super(),this._componentFactoryResolver=e,this._viewContainerRef=o,this._isInitialized=!1,this.attached=new s.vpe,this.attachDomPortal=h=>{const v=h.element,k=this._document.createComment("dom-portal");h.setAttachedHost(this),v.parentNode.insertBefore(k,v),this._getRootNode().appendChild(v),this._attachedPortal=h,super.setDisposeFn(()=>{k.parentNode&&k.parentNode.replaceChild(v,k)})},this._document=a}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const o=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,h=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),v=o.createComponent(h,o.length,e.injector||o.injector);return o!==this._viewContainerRef&&this._getRootNode().appendChild(v.hostView.rootNodes[0]),super.setDisposeFn(()=>v.destroy()),this._attachedPortal=e,this._attachedRef=v,this.attached.emit(v),v}attachTemplatePortal(e){e.setAttachedHost(this);const o=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s._Vd),s.Y36(s.s_b),s.Y36(wt))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[s.qOj]}),i})(),TA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();class VV{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new UV(t,this.predicate,this.inclusive))}}class UV extends $o.L{constructor(t,e,o){super(t),this.predicate=e,this.inclusive=o,this.index=0}_next(t){const e=this.destination;let o;try{o=this.predicate(t,this.index++)}catch(a){return void e.error(a)}this.nextOrComplete(t,o)}nextOrComplete(t,e){const o=this.destination;Boolean(e)?o.next(t):(this.inclusive&&o.next(t),o.complete())}}const bF=lw();class HV{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Sa(-this._previousScrollPosition.left),t.style.top=Sa(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,o=t.style,a=this._document.body.style,h=o.scrollBehavior||"",v=a.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),bF&&(o.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),bF&&(o.scrollBehavior=h,a.scrollBehavior=v)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}}class GV{constructor(t,e,o,a){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=o,this._config=a,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class xF{enable(){}disable(){}attach(){}}function A2(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function wF(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class jV{constructor(t,e,o,a){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=o,this._config=a,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:a}=this._viewportRuler.getViewportSize();A2(e,[{width:o,height:a,bottom:a,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let YV=(()=>{class i{constructor(e,o,a,h){this._scrollDispatcher=e,this._viewportRuler=o,this._ngZone=a,this.noop=()=>new xF,this.close=v=>new GV(this._scrollDispatcher,this._ngZone,this._viewportRuler,v),this.block=()=>new HV(this._viewportRuler,this._document),this.reposition=v=>new jV(this._scrollDispatcher,this._viewportRuler,this._ngZone,v),this._document=h}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wS),s.LFG(lx),s.LFG(s.R0b),s.LFG(wt))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(wS),(0,s.LFG)(lx),(0,s.LFG)(s.R0b),(0,s.LFG)(wt))},token:i,providedIn:"root"}),i})();class ES{constructor(t){if(this.scrollStrategy=new xF,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const o of e)void 0!==t[o]&&(this[o]=t[o])}}}class qV{constructor(t,e,o,a,h){this.offsetX=o,this.offsetY=a,this.panelClass=h,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class ZV{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let CF=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(wt))},token:i,providedIn:"root"}),i})(),WV=(()=>{class i extends CF{constructor(e){super(e),this._keydownListener=o=>{const a=this._attachedOverlays;for(let h=a.length-1;h>-1;h--)if(a[h]._keydownEvents.observers.length>0){a[h]._keydownEvents.next(o);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(wt))},token:i,providedIn:"root"}),i})(),$V=(()=>{class i extends CF{constructor(e,o){super(e),this._platform=o,this._cursorStyleIsSet=!1,this._clickListener=a=>{const h=a.composedPath?a.composedPath()[0]:a.target,v=this._attachedOverlays.slice();for(let k=v.length-1;k>-1;k--){const z=v[k];if(!(z._outsidePointerEvents.observers.length<1)&&z.hasAttached()){if(z.overlayElement.contains(h))break;z._outsidePointerEvents.next(a)}}}}add(e){if(super.add(e),!this._isAttached){const o=this._document.body;o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt),s.LFG(xo))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(wt),(0,s.LFG)(xo))},token:i,providedIn:"root"}),i})();const SF=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let TS=(()=>{class i{constructor(e,o){this._platform=o,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||SF){const a=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let h=0;h<a.length;h++)a[h].parentNode.removeChild(a[h])}const o=this._document.createElement("div");o.classList.add(e),SF?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt),s.LFG(xo))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(wt),(0,s.LFG)(xo))},token:i,providedIn:"root"}),i})();class XV{constructor(t,e,o,a,h,v,k,z,$){this._portalOutlet=t,this._host=e,this._pane=o,this._config=a,this._ngZone=h,this._keyboardDispatcher=v,this._document=k,this._location=z,this._outsideClickDispatcher=$,this._backdropElement=null,this._backdropClick=new Bn.xQ,this._attachments=new Bn.xQ,this._detachments=new Bn.xQ,this._locationChanges=ms.w.EMPTY,this._backdropClickHandler=oe=>this._backdropClick.next(oe),this._keydownEvents=new Bn.xQ,this._outsidePointerEvents=new Bn.xQ,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ue(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Sa(this._config.width),t.height=Sa(this._config.height),t.minWidth=Sa(this._config.minWidth),t.minHeight=Sa(this._config.minHeight),t.maxWidth=Sa(this._config.maxWidth),t.maxHeight=Sa(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(!t)return;let e,o=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",o),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",o)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(o,500))}_toggleClasses(t,e,o){const a=t.classList;u_(e).forEach(h=>{h&&(o?a.add(h):a.remove(h))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(qo((0,vs.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const EF="cdk-overlay-connected-position-bounding-box",QV=/([A-Za-z%]+)$/;class TF{constructor(t,e,o,a,h){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=h,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Bn.xQ,this._resizeSubscription=ms.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(EF),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,o=this._viewportRect,a=[];let h;for(let v of this._preferredPositions){let k=this._getOriginPoint(t,v),z=this._getOverlayPoint(k,e,v),$=this._getOverlayFit(z,e,o,v);if($.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(v,k);this._canFitWithFlexibleDimensions($,z,o)?a.push({position:v,origin:k,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(k,v)}):(!h||h.overlayFit.visibleArea<$.visibleArea)&&(h={overlayFit:$,overlayPoint:z,originPoint:k,position:v,overlayRect:e})}if(a.length){let v=null,k=-1;for(const z of a){const $=z.boundingBoxRect.width*z.boundingBoxRect.height*(z.position.weight||1);$>k&&(k=$,v=z)}return this._isPushed=!1,void this._applyPosition(v.position,v.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(h.position,h.originPoint);this._applyPosition(h.position,h.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&hx(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(EF),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let o,a;if("center"==e.originX)o=t.left+t.width/2;else{const h=this._isRtl()?t.right:t.left,v=this._isRtl()?t.left:t.right;o="start"==e.originX?h:v}return a="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:o,y:a}}_getOverlayPoint(t,e,o){let a,h;return a="center"==o.overlayX?-e.width/2:"start"===o.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,h="center"==o.overlayY?-e.height/2:"top"==o.overlayY?0:-e.height,{x:t.x+a,y:t.y+h}}_getOverlayFit(t,e,o,a){const h=AF(e);let{x:v,y:k}=t,z=this._getOffset(a,"x"),$=this._getOffset(a,"y");z&&(v+=z),$&&(k+=$);let ke=0-k,Fe=k+h.height-o.height,je=this._subtractOverflows(h.width,0-v,v+h.width-o.width),ct=this._subtractOverflows(h.height,ke,Fe),kt=je*ct;return{visibleArea:kt,isCompletelyWithinViewport:h.width*h.height===kt,fitsInViewportVertically:ct===h.height,fitsInViewportHorizontally:je==h.width}}_canFitWithFlexibleDimensions(t,e,o){if(this._hasFlexibleDimensions){const a=o.bottom-e.y,h=o.right-e.x,v=MF(this._overlayRef.getConfig().minHeight),k=MF(this._overlayRef.getConfig().minWidth),$=t.fitsInViewportHorizontally||null!=k&&k<=h;return(t.fitsInViewportVertically||null!=v&&v<=a)&&$}return!1}_pushOverlayOnScreen(t,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const a=AF(e),h=this._viewportRect,v=Math.max(t.x+a.width-h.width,0),k=Math.max(t.y+a.height-h.height,0),z=Math.max(h.top-o.top-t.y,0),$=Math.max(h.left-o.left-t.x,0);let oe=0,me=0;return oe=a.width<=h.width?$||-v:t.x<this._viewportMargin?h.left-o.left-t.x:0,me=a.height<=h.height?z||-k:t.y<this._viewportMargin?h.top-o.top-t.y:0,this._previousPushAmount={x:oe,y:me},{x:t.x+oe,y:t.y+me}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const o=this._getScrollVisibility(),a=new ZV(t,o);this._positionChanges.next(a)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,a=t.overlayY;o="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let h=0;h<e.length;h++)e[h].style.transformOrigin=`${o} ${a}`}_calculateBoundingBoxRect(t,e){const o=this._viewportRect,a=this._isRtl();let h,v,k,oe,me,ke;if("top"===e.overlayY)v=t.y,h=o.height-v+this._viewportMargin;else if("bottom"===e.overlayY)k=o.height-t.y+2*this._viewportMargin,h=o.height-k+this._viewportMargin;else{const Fe=Math.min(o.bottom-t.y+o.top,t.y),je=this._lastBoundingBoxSize.height;h=2*Fe,v=t.y-Fe,h>je&&!this._isInitialRender&&!this._growAfterOpen&&(v=t.y-je/2)}if("end"===e.overlayX&&!a||"start"===e.overlayX&&a)ke=o.width-t.x+this._viewportMargin,oe=t.x-this._viewportMargin;else if("start"===e.overlayX&&!a||"end"===e.overlayX&&a)me=t.x,oe=o.right-t.x;else{const Fe=Math.min(o.right-t.x+o.left,t.x),je=this._lastBoundingBoxSize.width;oe=2*Fe,me=t.x-Fe,oe>je&&!this._isInitialRender&&!this._growAfterOpen&&(me=t.x-je/2)}return{top:v,left:me,bottom:k,right:ke,width:oe,height:h}}_setBoundingBoxStyles(t,e){const o=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{const h=this._overlayRef.getConfig().maxHeight,v=this._overlayRef.getConfig().maxWidth;a.height=Sa(o.height),a.top=Sa(o.top),a.bottom=Sa(o.bottom),a.width=Sa(o.width),a.left=Sa(o.left),a.right=Sa(o.right),a.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",a.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",h&&(a.maxHeight=Sa(h)),v&&(a.maxWidth=Sa(v))}this._lastBoundingBoxSize=o,hx(this._boundingBox.style,a)}_resetBoundingBoxStyles(){hx(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){hx(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const o={},a=this._hasExactPosition(),h=this._hasFlexibleDimensions,v=this._overlayRef.getConfig();if(a){const oe=this._viewportRuler.getViewportScrollPosition();hx(o,this._getExactOverlayY(e,t,oe)),hx(o,this._getExactOverlayX(e,t,oe))}else o.position="static";let k="",z=this._getOffset(e,"x"),$=this._getOffset(e,"y");z&&(k+=`translateX(${z}px) `),$&&(k+=`translateY(${$}px)`),o.transform=k.trim(),v.maxHeight&&(a?o.maxHeight=Sa(v.maxHeight):h&&(o.maxHeight="")),v.maxWidth&&(a?o.maxWidth=Sa(v.maxWidth):h&&(o.maxWidth="")),hx(this._pane.style,o)}_getExactOverlayY(t,e,o){let a={top:"",bottom:""},h=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(h=this._pushOverlayOnScreen(h,this._overlayRect,o));let v=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return h.y-=v,"bottom"===t.overlayY?a.bottom=this._document.documentElement.clientHeight-(h.y+this._overlayRect.height)+"px":a.top=Sa(h.y),a}_getExactOverlayX(t,e,o){let v,a={left:"",right:""},h=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(h=this._pushOverlayOnScreen(h,this._overlayRect,o)),v=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===v?a.right=this._document.documentElement.clientWidth-(h.x+this._overlayRect.width)+"px":a.left=Sa(h.x),a}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:wF(t,o),isOriginOutsideView:A2(t,o),isOverlayClipped:wF(e,o),isOverlayOutsideView:A2(e,o)}}_subtractOverflows(t,...e){return e.reduce((o,a)=>o-Math.max(a,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+t-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&u_(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof s.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,o=t.height||0;return{top:t.y,bottom:t.y+o,left:t.x,right:t.x+e,height:o,width:e}}}function hx(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function MF(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(QV);return e&&"px"!==e?null:parseFloat(t)}return i||null}function AF(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}class JV{constructor(t,e,o,a,h,v,k){this._preferredPositions=[],this._positionStrategy=new TF(o,a,h,v,k).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,o,a){const h=new qV(t,e,o,a);return this._preferredPositions.push(h),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const kF="cdk-global-overlay-wrapper";class KV{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(kF),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:a,height:h,maxWidth:v,maxHeight:k}=o,z=!("100%"!==a&&"100vw"!==a||v&&"100%"!==v&&"100vw"!==v),$=!("100%"!==h&&"100vh"!==h||k&&"100%"!==k&&"100vh"!==k);t.position=this._cssPosition,t.marginLeft=z?"0":this._leftOffset,t.marginTop=$?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,z?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=$?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(kF),o.justifyContent=o.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let e4=(()=>{class i{constructor(e,o,a,h){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=h}global(){return new KV}connectedTo(e,o,a){return new JV(o,a,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new TF(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(lx),s.LFG(wt),s.LFG(xo),s.LFG(TS))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(lx),(0,s.LFG)(wt),(0,s.LFG)(xo),(0,s.LFG)(TS))},token:i,providedIn:"root"}),i})(),t4=0,Bd=(()=>{class i{constructor(e,o,a,h,v,k,z,$,oe,me,ke){this.scrollStrategies=e,this._overlayContainer=o,this._componentFactoryResolver=a,this._positionBuilder=h,this._keyboardDispatcher=v,this._injector=k,this._ngZone=z,this._document=$,this._directionality=oe,this._location=me,this._outsideClickDispatcher=ke}create(e){const o=this._createHostElement(),a=this._createPaneElement(o),h=this._createPortalOutlet(a),v=new ES(e);return v.direction=v.direction||this._directionality.value,new XV(h,o,a,v,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const o=this._document.createElement("div");return o.id="cdk-overlay-"+t4++,o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(s.z2F)),new yF(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(YV),s.LFG(TS),s.LFG(s._Vd),s.LFG(e4),s.LFG(WV),s.LFG(s.zs3),s.LFG(s.R0b),s.LFG(wt),s.LFG(Xh),s.LFG(Vn),s.LFG($V))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const n4=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],DF=new s.OlP("cdk-connected-overlay-scroll-strategy");let r4=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})(),IF=(()=>{class i{constructor(e,o,a,h,v){this._overlay=e,this._dir=v,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=ms.w.EMPTY,this._attachSubscription=ms.w.EMPTY,this._detachSubscription=ms.w.EMPTY,this._positionSubscription=ms.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new s.vpe,this.positionChange=new s.vpe,this.attach=new s.vpe,this.detach=new s.vpe,this.overlayKeydown=new s.vpe,this.overlayOutsideClick=new s.vpe,this._templatePortal=new uv(o,a),this._scrollStrategyFactory=h,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=_r(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=_r(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=_r(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=_r(e)}get push(){return this._push}set push(e){this._push=_r(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=n4);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(o=>{this.overlayKeydown.next(o),27===o.keyCode&&!this.disableClose&&!La(o)&&(o.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(o=>{this.overlayOutsideClick.next(o)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),o=new ES({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(o.width=this.width),(this.height||0===this.height)&&(o.height=this.height),(this.minWidth||0===this.minWidth)&&(o.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(o.minHeight=this.minHeight),this.backdropClass&&(o.backdropClass=this.backdropClass),this.panelClass&&(o.panelClass=this.panelClass),o}_updatePositionStrategy(e){const o=this.positions.map(a=>({originX:a.originX,originY:a.originY,overlayX:a.overlayX,overlayY:a.overlayY,offsetX:a.offsetX||this.offsetX,offsetY:a.offsetY||this.offsetY,panelClass:a.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(o).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(i,t=!1){return e=>e.lift(new VV(i,t))}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Bd),s.Y36(s.Rgc),s.Y36(s.s_b),s.Y36(DF),s.Y36(Xh,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[s.TTD]}),i})();const s4={provide:DF,deps:[Bd],useFactory:function(i){return()=>i.scrollStrategies.reposition()}};let MS=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[Bd,s4],imports:[[rv,TA,cx],cx]}),i})();const a4=["underline"],l4=["connectionContainer"],c4=["inputContainer"],u4=["label"];function h4(i,t){1&i&&(s.ynx(0),s.TgZ(1,"div",14),s._UZ(2,"div",15),s._UZ(3,"div",16),s._UZ(4,"div",17),s.qZA(),s.TgZ(5,"div",18),s._UZ(6,"div",15),s._UZ(7,"div",16),s._UZ(8,"div",17),s.qZA(),s.BQk())}function d4(i,t){1&i&&(s.TgZ(0,"div",19),s.Hsn(1,1),s.qZA())}function p4(i,t){if(1&i&&(s.ynx(0),s.Hsn(1,2),s.TgZ(2,"span"),s._uU(3),s.qZA(),s.BQk()),2&i){const e=s.oxw(2);s.xp6(3),s.Oqu(e._control.placeholder)}}function f4(i,t){1&i&&s.Hsn(0,3,["*ngSwitchCase","true"])}function m4(i,t){1&i&&(s.TgZ(0,"span",23),s._uU(1," *"),s.qZA())}function g4(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"label",20,21),s.NdJ("cdkObserveContent",function(){return s.CHM(e),s.oxw().updateOutlineGap()}),s.YNc(2,p4,4,1,"ng-container",12),s.YNc(3,f4,1,0,"ng-content",12),s.YNc(4,m4,2,0,"span",22),s.qZA()}if(2&i){const e=s.oxw();s.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),s.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),s.uIk("for",e._control.id)("aria-owns",e._control.id),s.xp6(2),s.Q6J("ngSwitchCase",!1),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function _4(i,t){1&i&&(s.TgZ(0,"div",24),s.Hsn(1,4),s.qZA())}function y4(i,t){if(1&i&&(s.TgZ(0,"div",25,26),s._UZ(2,"span",27),s.qZA()),2&i){const e=s.oxw();s.xp6(2),s.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function v4(i,t){if(1&i&&(s.TgZ(0,"div"),s.Hsn(1,5),s.qZA()),2&i){const e=s.oxw();s.Q6J("@transitionMessages",e._subscriptAnimationState)}}function b4(i,t){if(1&i&&(s.TgZ(0,"div",31),s._uU(1),s.qZA()),2&i){const e=s.oxw(2);s.Q6J("id",e._hintLabelId),s.xp6(1),s.Oqu(e.hintLabel)}}function x4(i,t){if(1&i&&(s.TgZ(0,"div",28),s.YNc(1,b4,2,2,"div",29),s.Hsn(2,6),s._UZ(3,"div",30),s.Hsn(4,7),s.qZA()),2&i){const e=s.oxw();s.Q6J("@transitionMessages",e._subscriptAnimationState),s.xp6(1),s.Q6J("ngIf",e.hintLabel)}}const w4=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],C4=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],PF=new s.OlP("MatError"),E4={transitionMessages:As("transitionMessages",[ko("enter",zn({opacity:1,transform:"translateY(0%)"})),Sr("void => enter",[zn({opacity:0,transform:"translateY(-5px)"}),Dr("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let MA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i}),i})();const RF=new s.OlP("MatHint");let Ew=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["mat-label"]]}),i})(),M4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["mat-placeholder"]]}),i})();const OF=new s.OlP("MatPrefix"),FF=new s.OlP("MatSuffix");let LF=0;class k4{constructor(t){this._elementRef=t}}const D4=xw(k4,"primary"),I4=new s.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),k2=new s.OlP("MatFormField");let AS=(()=>{class i extends D4{constructor(e,o,a,h,v,k,z,$){super(e),this._elementRef=e,this._changeDetectorRef=o,this._dir=h,this._defaults=v,this._platform=k,this._ngZone=z,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Bn.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+LF++,this._labelId="mat-form-field-label-"+LF++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==$,this.appearance=v&&v.appearance?v.appearance:"legacy",this._hideRequiredMarker=!(!v||null==v.hideRequiredMarker)&&v.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const o=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&o!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=_r(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(xs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(qo(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(qo(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,vs.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(xs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(xs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(qo(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const o=this._control?this._control.ngControl:null;return o&&o[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Cw(this._label.nativeElement,"transitionend").pipe(ue(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const o=this._hintChildren?this._hintChildren.find(h=>"start"===h.align):null,a=this._hintChildren?this._hintChildren.find(h=>"end"===h.align):null;o?e.push(o.id):this._hintLabel&&e.push(this._hintLabelId),a&&e.push(a.id)}else this._errorChildren&&e.push(...this._errorChildren.map(o=>o.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&e&&e.children.length&&e.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const h=this._connectionContainerRef.nativeElement,v=h.querySelectorAll(".mat-form-field-outline-start"),k=h.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const z=h.getBoundingClientRect();if(0===z.width&&0===z.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const $=this._getStartEnd(z),oe=e.children,me=this._getStartEnd(oe[0].getBoundingClientRect());let ke=0;for(let Fe=0;Fe<oe.length;Fe++)ke+=oe[Fe].offsetWidth;o=Math.abs(me-$)-5,a=ke>0?.75*ke+10:0}for(let z=0;z<v.length;z++)v[z].style.width=`${o}px`;for(let z=0;z<k.length;z++)k[z].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const o=e.getRootNode();return o&&o!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(s.SBq),s.Y36(Xh,8),s.Y36(I4,8),s.Y36(xo),s.Y36(s.R0b),s.Y36(th,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,MA,5),s.Suo(a,MA,7),s.Suo(a,Ew,5),s.Suo(a,Ew,7),s.Suo(a,M4,5),s.Suo(a,PF,5),s.Suo(a,RF,5),s.Suo(a,OF,5),s.Suo(a,FF,5)),2&e){let h;s.iGM(h=s.CRH())&&(o._controlNonStatic=h.first),s.iGM(h=s.CRH())&&(o._controlStatic=h.first),s.iGM(h=s.CRH())&&(o._labelChildNonStatic=h.first),s.iGM(h=s.CRH())&&(o._labelChildStatic=h.first),s.iGM(h=s.CRH())&&(o._placeholderChild=h.first),s.iGM(h=s.CRH())&&(o._errorChildren=h),s.iGM(h=s.CRH())&&(o._hintChildren=h),s.iGM(h=s.CRH())&&(o._prefixChildren=h),s.iGM(h=s.CRH())&&(o._suffixChildren=h)}},viewQuery:function(e,o){if(1&e&&(s.Gf(a4,5),s.Gf(l4,7),s.Gf(c4,5),s.Gf(u4,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.underlineRef=a.first),s.iGM(a=s.CRH())&&(o._connectionContainerRef=a.first),s.iGM(a=s.CRH())&&(o._inputContainerRef=a.first),s.iGM(a=s.CRH())&&(o._label=a.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,o){2&e&&s.ekj("mat-form-field-appearance-standard","standard"==o.appearance)("mat-form-field-appearance-fill","fill"==o.appearance)("mat-form-field-appearance-outline","outline"==o.appearance)("mat-form-field-appearance-legacy","legacy"==o.appearance)("mat-form-field-invalid",o._control.errorState)("mat-form-field-can-float",o._canLabelFloat())("mat-form-field-should-float",o._shouldLabelFloat())("mat-form-field-has-label",o._hasFloatingLabel())("mat-form-field-hide-placeholder",o._hideControlPlaceholder())("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-focused",o._control.focused)("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))("_mat-animation-noopable",!o._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[s._Bn([{provide:k2,useExisting:i}]),s.qOj],ngContentSelectors:C4,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,o){1&e&&(s.F$t(w4),s.TgZ(0,"div",0),s.TgZ(1,"div",1,2),s.NdJ("click",function(h){return o._control.onContainerClick&&o._control.onContainerClick(h)}),s.YNc(3,h4,9,0,"ng-container",3),s.YNc(4,d4,2,0,"div",4),s.TgZ(5,"div",5,6),s.Hsn(7),s.TgZ(8,"span",7),s.YNc(9,g4,5,16,"label",8),s.qZA(),s.qZA(),s.YNc(10,_4,2,0,"div",9),s.qZA(),s.YNc(11,y4,3,4,"div",10),s.TgZ(12,"div",11),s.YNc(13,v4,2,1,"div",12),s.YNc(14,x4,5,2,"div",13),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Q6J("ngIf","outline"==o.appearance),s.xp6(1),s.Q6J("ngIf",o._prefixChildren.length),s.xp6(5),s.Q6J("ngIf",o._hasFloatingLabel()),s.xp6(1),s.Q6J("ngIf",o._suffixChildren.length),s.xp6(1),s.Q6J("ngIf","outline"!=o.appearance),s.xp6(1),s.Q6J("ngSwitch",o._getDisplayedMessages()),s.xp6(1),s.Q6J("ngSwitchCase","error"),s.xp6(1),s.Q6J("ngSwitchCase","hint"))},directives:[Xt,Ni,Nn,jM],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[E4.transitionMessages]},changeDetection:0}),i})(),AA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,Ir,Ku],Ir]}),i})();var P4=nt(1555);function BF(...i){if(1===i.length){const t=i[0];if((0,Ru.k)(t))return kA(t,null);if((0,P4.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return kA(e.map(o=>t[o]),e)}}if("function"==typeof i[i.length-1]){const t=i.pop();return kA(i=1===i.length&&(0,Ru.k)(i[0])?i[0]:i,null).pipe((0,ri.U)(e=>t(...e)))}return kA(i,null)}function kA(i,t){return new Gr.y(e=>{const o=i.length;if(0===o)return void e.complete();const a=new Array(o);let h=0,v=0;for(let k=0;k<o;k++){const z=(0,jr.D)(i[k]);let $=!1;e.add(z.subscribe({next:oe=>{$||($=!0,v++),a[k]=oe},error:oe=>e.error(oe),complete:()=>{h++,(h===o||!$)&&(v===o&&e.next(t?t.reduce((oe,me,ke)=>(oe[me]=a[ke],oe),{}):a),e.complete())}}))}})}let zF=(()=>{class i{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Qsj),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i}),i})(),dx=(()=>{class i extends zF{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,features:[s.qOj]}),i})();const Ll=new s.OlP("NgValueAccessor"),O4={provide:Ll,useExisting:(0,s.Gpc)(()=>px),multi:!0},L4=new s.OlP("CompositionEventMode");let px=(()=>{class i extends zF{constructor(e,o,a){super(e,o),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=Ee()?Ee().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(L4,8))},i.\u0275dir=s.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&s.NdJ("input",function(h){return o._handleInput(h.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(h){return o._compositionEnd(h.target.value)})},features:[s._Bn([O4]),s.qOj]}),i})();function hv(i){return null==i||0===i.length}function UF(i){return null!=i&&"number"==typeof i.length}const Rc=new s.OlP("NgValidators"),dv=new s.OlP("NgAsyncValidators"),N4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class cs{static min(t){return function(i){return t=>{if(hv(t.value)||hv(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}(t)}static max(t){return function(i){return t=>{if(hv(t.value)||hv(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}(t)}static required(t){return jF(t)}static requiredTrue(t){return function(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function(i){return hv(i.value)||N4.test(i.value)?null:{email:!0}}(t)}static minLength(t){return ZF(t)}static maxLength(t){return function(i){return t=>UF(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static pattern(t){return function(i){if(!i)return pv;let t,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),o=>{if(hv(o.value))return null;const a=o.value;return t.test(a)?null:{pattern:{requiredPattern:e,actualValue:a}}}}(t)}static nullValidator(t){return null}static compose(t){return tL(t)}static composeAsync(t){return nL(t)}}function jF(i){return hv(i.value)?{required:!0}:null}function ZF(i){return t=>hv(t.value)||!UF(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function pv(i){return null}function XF(i){return null!=i}function QF(i){const t=(0,s.QGY)(i)?(0,jr.D)(i):i;return(0,s.CqO)(t),t}function JF(i){let t={};return i.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function KF(i,t){return t.map(e=>e(i))}function eL(i){return i.map(t=>function(i){return!i.validate}(t)?t:e=>t.validate(e))}function tL(i){if(!i)return null;const t=i.filter(XF);return 0==t.length?null:function(e){return JF(KF(e,t))}}function D2(i){return null!=i?tL(eL(i)):null}function nL(i){if(!i)return null;const t=i.filter(XF);return 0==t.length?null:function(e){return BF(KF(e,t).map(QF)).pipe((0,ri.U)(JF))}}function I2(i){return null!=i?nL(eL(i)):null}function iL(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function rL(i){return i._rawValidators}function oL(i){return i._rawAsyncValidators}function P2(i){return i?Array.isArray(i)?i:[i]:[]}function DA(i,t){return Array.isArray(i)?i.includes(t):i===t}function sL(i,t){const e=P2(t);return P2(i).forEach(a=>{DA(e,a)||e.push(a)}),e}function aL(i,t){return P2(t).filter(e=>!DA(i,e))}let lL=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=D2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=I2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,o){return!!this.control&&this.control.hasError(e,o)}getError(e,o){return this.control?this.control.getError(e,o):null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i}),i})(),nh=(()=>{class i extends lL{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,features:[s.qOj]}),i})();class Zm extends lL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cL{constructor(t){this._cd=t}is(t){var e,o,a;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(a=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===a?void 0:a[t])}}let fx=(()=>{class i extends cL{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Zm,2))},i.\u0275dir=s.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&s.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[s.qOj]}),i})(),kS=(()=>{class i extends cL{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(nh,10))},i.\u0275dir=s.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,o){2&e&&s.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))("ng-submitted",o.is("submitted"))},features:[s.qOj]}),i})();function IA(i,t){return[...t.path,i]}function DS(i,t){R2(i,t),t.valueAccessor.writeValue(i.value),function(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&uL(i,t)})}(i,t),function(i,t){const e=(o,a)=>{t.valueAccessor.writeValue(o),a&&t.viewToModelUpdate(o)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&uL(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function(i,t){if(t.valueAccessor.setDisabledState){const e=o=>{t.valueAccessor.setDisabledState(o)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function PA(i,t,e=!0){const o=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(o),t.valueAccessor.registerOnTouched(o)),OA(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function RA(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function R2(i,t){const e=rL(i);null!==t.validator?i.setValidators(iL(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const o=oL(i);null!==t.asyncValidator?i.setAsyncValidators(iL(o,t.asyncValidator)):"function"==typeof o&&i.setAsyncValidators([o]);const a=()=>i.updateValueAndValidity();RA(t._rawValidators,a),RA(t._rawAsyncValidators,a)}function OA(i,t){let e=!1;if(null!==i){if(null!==t.validator){const a=rL(i);if(Array.isArray(a)&&a.length>0){const h=a.filter(v=>v!==t.validator);h.length!==a.length&&(e=!0,i.setValidators(h))}}if(null!==t.asyncValidator){const a=oL(i);if(Array.isArray(a)&&a.length>0){const h=a.filter(v=>v!==t.asyncValidator);h.length!==a.length&&(e=!0,i.setAsyncValidators(h))}}}const o=()=>{};return RA(t._rawValidators,o),RA(t._rawAsyncValidators,o),e}function uL(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function hL(i,t){R2(i,t)}function O2(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function dL(i,t){i._syncPendingControls(),t.forEach(e=>{const o=e.control;"submit"===o.updateOn&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}function F2(i,t){if(!t)return null;let e,o,a;return Array.isArray(t),t.forEach(h=>{h.constructor===px?e=h:function(i){return Object.getPrototypeOf(i.constructor)===dx}(h)?o=h:a=h}),a||o||e||null}function FA(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const IS="VALID",LA="INVALID",Tw="PENDING",PS="DISABLED";function L2(i){return(B2(i)?i.validators:i)||null}function pL(i){return Array.isArray(i)?D2(i):i||null}function N2(i,t){return(B2(t)?t.asyncValidators:i)||null}function fL(i){return Array.isArray(i)?I2(i):i||null}function B2(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class z2{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=pL(this._rawValidators),this._composedAsyncValidatorFn=fL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===IS}get invalid(){return this.status===LA}get pending(){return this.status==Tw}get disabled(){return this.status===PS}get enabled(){return this.status!==PS}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=pL(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=fL(t)}addValidators(t){this.setValidators(sL(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(sL(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(aL(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(aL(t,this._rawAsyncValidators))}hasValidator(t){return DA(this._rawValidators,t)}hasAsyncValidator(t){return DA(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Tw,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=PS,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=IS,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===IS||this.status===Tw)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?PS:IS}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Tw,this._hasOwnPendingAsyncValidator=!0;const e=QF(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(i,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let o=i;return t.forEach(a=>{o=o instanceof RS?o.controls.hasOwnProperty(a)?o.controls[a]:null:o instanceof V2&&o.at(a)||null}),o}(this,t)}getError(t,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?PS:this.errors?LA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tw)?Tw:this._anyControlsHaveStatus(LA)?LA:IS}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){B2(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class fv extends z2{constructor(t=null,e,o){super(L2(e),N2(o,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){FA(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){FA(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class RS extends z2{constructor(t,e,o){super(L2(e),N2(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,a)=>{o.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e instanceof fv?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const o=this.controls[e];if(this.contains(e)&&t(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,o)=>((e.enabled||this.disabled)&&(t[o]=e.value),t))}_reduceChildren(t,e){let o=t;return this._forEachChild((a,h)=>{o=e(o,a,h)}),o}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,o)=>{if(void 0===t[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class V2 extends z2{constructor(t,e,o){super(L2(e),N2(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,o={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((o,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((o,a)=>{this.at(a)&&this.at(a).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((o,a)=>{o.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof fv?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,o)=>!!o._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,o)=>{t(e,o)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,o)=>{if(void 0===t[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const W4={provide:nh,useExisting:(0,s.Gpc)(()=>FS)},OS=(()=>Promise.resolve(null))();let FS=(()=>{class i extends nh{constructor(e,o){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new s.vpe,this.form=new RS({},D2(e),I2(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){OS.then(()=>{const o=this._findContainer(e.path);e.control=o.registerControl(e.name,e.control),DS(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){OS.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name),FA(this._directives,e)})}addFormGroup(e){OS.then(()=>{const o=this._findContainer(e.path),a=new RS({});hL(a,e),o.registerControl(e.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){OS.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,o){OS.then(()=>{this.form.get(e.path).setValue(o)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,dL(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Rc,10),s.Y36(dv,10))},i.\u0275dir=s.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,o){1&e&&s.NdJ("submit",function(h){return o.onSubmit(h)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([W4]),s.qOj]}),i})();const X4={provide:Zm,useExisting:(0,s.Gpc)(()=>LS)},_L=(()=>Promise.resolve(null))();let LS=(()=>{class i extends Zm{constructor(e,o,a,h){super(),this.control=new fv,this._registered=!1,this.update=new s.vpe,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=F2(0,h)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),O2(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?IA(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){DS(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){_L.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const o=e.isDisabled.currentValue,a=""===o||o&&"false"!==o;_L.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(nh,9),s.Y36(Rc,10),s.Y36(dv,10),s.Y36(Ll,10))},i.\u0275dir=s.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s._Bn([X4]),s.qOj,s.TTD]}),i})(),NS=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),vL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();const U2=new s.OlP("NgModelWithFormControlWarning"),n6={provide:nh,useExisting:(0,s.Gpc)(()=>g_)};let g_=(()=>{class i extends nh{constructor(e,o){super(),this.validators=e,this.asyncValidators=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new s.vpe,this._setValidators(e),this._setAsyncValidators(o)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(OA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const o=this.form.get(e.path);return DS(o,e),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),o}getControl(e){return this.form.get(e.path)}removeControl(e){PA(e.control||null,e,!1),FA(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,o){this.form.get(e.path).setValue(o)}onSubmit(e){return this.submitted=!0,dL(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const o=e.control,a=this.form.get(e.path);o!==a&&(PA(o||null,e),a instanceof fv&&(DS(a,e),e.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const o=this.form.get(e.path);hL(o,e),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const o=this.form.get(e.path);o&&function(i,t){return OA(i,t)}(o,e)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){R2(this.form,this),this._oldForm&&OA(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Rc,10),s.Y36(dv,10))},i.\u0275dir=s.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,o){1&e&&s.NdJ("submit",function(h){return o.onSubmit(h)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([n6]),s.qOj,s.TTD]}),i})();const s6={provide:Zm,useExisting:(0,s.Gpc)(()=>Mw)};let Mw=(()=>{class i extends Zm{constructor(e,o,a,h,v){super(),this._ngModelWarningConfig=v,this._added=!1,this.update=new s.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=F2(0,h)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),O2(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return IA(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(nh,13),s.Y36(Rc,10),s.Y36(dv,10),s.Y36(Ll,10),s.Y36(U2,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[s._Bn([s6]),s.qOj,s.TTD]}),i._ngModelWarningSentOnce=!1,i})();const a6={provide:Ll,useExisting:(0,s.Gpc)(()=>NA),multi:!0};function SL(i,t){return null==i?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let NA=(()=>{class i extends dx{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=this._getOptionId(e);null==o&&this.setProperty("selectedIndex",-1);const a=SL(o,e);this.setProperty("value",a)}registerOnChange(e){this.onChange=o=>{this.value=this._getOptionValue(o),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o),e))return o;return null}_getOptionValue(e){const o=function(i){return i.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o):e}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,o){1&e&&s.NdJ("change",function(h){return o.onChange(h.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([a6]),s.qOj]}),i})(),EL=(()=>{class i{constructor(e,o,a){this._element=e,this._renderer=o,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(SL(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(NA,9))},i.\u0275dir=s.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const c6={provide:Ll,useExisting:(0,s.Gpc)(()=>j2),multi:!0};function TL(i,t){return null==i?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let j2=(()=>{class i extends dx{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let o;if(this.value=e,Array.isArray(e)){const a=e.map(h=>this._getOptionId(h));o=(h,v)=>{h._setSelected(a.indexOf(v.toString())>-1)}}else o=(a,h)=>{a._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(e){this.onChange=o=>{const a=[];if(void 0!==o.selectedOptions){const h=o.selectedOptions;for(let v=0;v<h.length;v++){const k=h.item(v),z=this._getOptionValue(k.value);a.push(z)}}else{const h=o.options;for(let v=0;v<h.length;v++){const k=h.item(v);if(k.selected){const z=this._getOptionValue(k.value);a.push(z)}}}this.value=a,e(a)}}_registerOption(e){const o=(this._idCounter++).toString();return this._optionMap.set(o,e),o}_getOptionId(e){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o)._value,e))return o;return null}_getOptionValue(e){const o=function(i){return i.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o)._value:e}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,o){1&e&&s.NdJ("change",function(h){return o.onChange(h.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([c6]),s.qOj]}),i})(),ML=(()=>{class i{constructor(e,o,a){this._element=e,this._renderer=o,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(TL(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(TL(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(j2,9))},i.\u0275dir=s.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const p6={provide:Rc,useExisting:(0,s.Gpc)(()=>Aw),multi:!0};let Aw=(()=>{class i{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?jF(e):null}registerOnValidatorChange(e){this._onChange=e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,o){2&e&&s.uIk("required",o.required?"":null)},inputs:{required:"required"},features:[s._Bn([p6])]}),i})();const g6={provide:Rc,useExisting:(0,s.Gpc)(()=>q2),multi:!0};let q2=(()=>{class i{constructor(){this._validator=pv}ngOnChanges(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return this.enabled()?this._validator(e):null}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=this.enabled()?ZF(function(i){return"number"==typeof i?i:parseInt(i,10)}(this.minlength)):pv}enabled(){return null!=this.minlength}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,o){2&e&&s.uIk("minlength",o.enabled()?o.minlength:null)},inputs:{minlength:"minlength"},features:[s._Bn([g6]),s.TTD]}),i})(),FL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[vL]]}),i})(),BA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[FL]}),i})(),LL=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:U2,useValue:e.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[FL]}),i})(),zA=(()=>{class i{group(e,o=null){const a=this._reduceControls(e);let k,h=null,v=null;return null!=o&&(function(i){return void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn}(o)?(h=null!=o.validators?o.validators:null,v=null!=o.asyncValidators?o.asyncValidators:null,k=null!=o.updateOn?o.updateOn:void 0):(h=null!=o.validator?o.validator:null,v=null!=o.asyncValidator?o.asyncValidator:null)),new RS(a,{asyncValidators:v,updateOn:k,validators:h})}control(e,o,a){return new fv(e,o,a)}array(e,o,a){const h=e.map(v=>this._createControl(v));return new V2(h,o,a)}_reduceControls(e){const o={};return Object.keys(e).forEach(a=>{o[a]=this._createControl(e[a])}),o}_createControl(e){return e instanceof fv||e instanceof RS||e instanceof V2?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i},token:i,providedIn:LL}),i})();const b6=["trigger"],x6=["panel"];function w6(i,t){if(1&i&&(s.TgZ(0,"span",8),s._uU(1),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Oqu(e.placeholder)}}function C6(i,t){if(1&i&&(s.TgZ(0,"span",12),s._uU(1),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.triggerValue)}}function S6(i,t){1&i&&s.Hsn(0,0,["*ngSwitchCase","true"])}function E6(i,t){if(1&i&&(s.TgZ(0,"span",9),s.YNc(1,C6,2,1,"span",10),s.YNc(2,S6,1,0,"ng-content",11),s.qZA()),2&i){const e=s.oxw();s.Q6J("ngSwitch",!!e.customTrigger),s.xp6(2),s.Q6J("ngSwitchCase",!0)}}function T6(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",13),s.TgZ(1,"div",14,15),s.NdJ("@transformPanel.done",function(a){return s.CHM(e),s.oxw()._panelDoneAnimatingStream.next(a.toState)})("keydown",function(a){return s.CHM(e),s.oxw()._handleKeydown(a)}),s.Hsn(3,1),s.qZA(),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("@transformPanelWrap",void 0),s.xp6(1),s.Gre("mat-select-panel ",e._getPanelTheme(),""),s.Udp("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),s.Q6J("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),s.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const M6=[[["mat-select-trigger"]],"*"],A6=["mat-select-trigger","*"],NL={transformPanelWrap:As("transformPanelWrap",[Sr("* => void",tA("@transformPanel",[eA()],{optional:!0}))]),transformPanel:As("transformPanel",[ko("void",zn({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),ko("showing",zn({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),ko("showing-multiple",zn({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Sr("void => *",Dr("120ms cubic-bezier(0, 0, 0.2, 1)")),Sr("* => void",Dr("100ms 25ms linear",zn({opacity:0})))])};let BL=0;const VL=new s.OlP("mat-select-scroll-strategy"),P6=new s.OlP("MAT_SELECT_CONFIG"),R6={provide:VL,deps:[Bd],useFactory:function(i){return()=>i.scrollStrategies.reposition()}};class O6{constructor(t,e){this.source=t,this.value=e}}class F6{constructor(t,e,o,a,h){this._elementRef=t,this._defaultErrorStateMatcher=e,this._parentForm=o,this._parentFormGroup=a,this.ngControl=h}}const L6=bA(WO(m_($O(F6)))),UL=new s.OlP("MatSelectTrigger");let N6=(()=>{class i extends L6{constructor(e,o,a,h,v,k,z,$,oe,me,ke,Fe,je,ct){var kt,Qt,Sn;super(v,h,z,$,me),this._viewportRuler=e,this._changeDetectorRef=o,this._ngZone=a,this._dir=k,this._parentFormField=oe,this.ngControl=me,this._liveAnnouncer=je,this._defaultOptions=ct,this._panelOpen=!1,this._compareWith=(xn,Xn)=>xn===Xn,this._uid="mat-select-"+BL++,this._triggerAriaLabelledBy=null,this._destroy=new Bn.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+BL++,this._panelDoneAnimatingStream=new Bn.xQ,this._overlayPanelClass=(null===(kt=this._defaultOptions)||void 0===kt?void 0:kt.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(Sn=null===(Qt=this._defaultOptions)||void 0===Qt?void 0:Qt.disableOptionCentering)&&void 0!==Sn&&Sn,this.ariaLabel="",this.optionSelectionChanges=Wp(()=>{const xn=this.options;return xn?xn.changes.pipe(xs(xn),Yr(()=>(0,vs.T)(...xn.map(Xn=>Xn.onSelectionChange)))):this._ngZone.onStable.pipe(ue(1),Yr(()=>this.optionSelectionChanges))}),this.openedChange=new s.vpe,this._openedStream=this.openedChange.pipe(w(xn=>xn),(0,ri.U)(()=>{})),this._closedStream=this.openedChange.pipe(w(xn=>!xn),(0,ri.U)(()=>{})),this.selectionChange=new s.vpe,this.valueChange=new s.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ct?void 0:ct.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ct.typeaheadDebounceInterval),this._scrollStrategyFactory=Fe,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(ke)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=_r(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=_r(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=_r(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Rl(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new kV(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(fc(),qo(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(qo(this._destroy)).subscribe(e=>{e.added.forEach(o=>o.select()),e.removed.forEach(o=>o.deselect())}),this.options.changes.pipe(xs(null),qo(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const o=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?o.setAttribute("aria-labelledby",e):o.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(o=>o.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const o=e.keyCode,a=40===o||38===o||37===o||39===o,h=13===o||32===o,v=this._keyManager;if(!v.isTyping()&&h&&!La(e)||(this.multiple||e.altKey)&&a)e.preventDefault(),this.open();else if(!this.multiple){const k=this.selected;v.onKeydown(e);const z=this.selected;z&&k!==z&&this._liveAnnouncer.announce(z.viewValue,1e4)}}_handleOpenKeydown(e){const o=this._keyManager,a=e.keyCode,h=40===a||38===a,v=o.isTyping();if(h&&e.altKey)e.preventDefault(),this.close();else if(v||13!==a&&32!==a||!o.activeItem||La(e))if(!v&&this._multiple&&65===a&&e.ctrlKey){e.preventDefault();const k=this.options.some(z=>!z.disabled&&!z.selected);this.options.forEach(z=>{z.disabled||(k?z.select():z.deselect())})}else{const k=o.activeItemIndex;o.onKeydown(e),this._multiple&&h&&e.shiftKey&&o.activeItem&&o.activeItemIndex!==k&&o.activeItem._selectViaInteraction()}else e.preventDefault(),o.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(ue(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(o=>o.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(o=>this._selectValue(o)),this._sortValues();else{const o=this._selectValue(e);o?this._keyManager.updateActiveItem(o):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const o=this.options.find(a=>{if(this._selectionModel.isSelected(a))return!1;try{return null!=a.value&&this._compareWith(a.value,e)}catch(h){return!1}});return o&&this._selectionModel.select(o),o}_initKeyManager(){this._keyManager=new HI(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(qo(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(qo(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,vs.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(qo(e)).subscribe(o=>{this._onSelect(o.source,o.isUserInput),o.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,vs.T)(...this.options.map(o=>o._stateChanges)).pipe(qo(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,o){const a=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(a!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),o&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),o&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),a!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((o,a)=>this.sortComparator?this.sortComparator(o,a,e):e.indexOf(o)-e.indexOf(a)),this.stateChanges.next()}}_propagateChanges(e){let o=null;o=this.multiple?this.selected.map(a=>a.value):this.selected?this.selected.value:e,this._value=o,this.valueChange.emit(o),this._onChange(o),this.selectionChange.emit(this._getChangeEvent(o)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const o=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(o?o+" ":"")+this.ariaLabelledby:o}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const o=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let a=(o?o+" ":"")+this._valueId;return this.ariaLabelledby&&(a+=" "+this.ariaLabelledby),a}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(lx),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(b2),s.Y36(s.SBq),s.Y36(Xh,8),s.Y36(FS,8),s.Y36(g_,8),s.Y36(k2,8),s.Y36(Zm,10),s.$8M("tabindex"),s.Y36(VL),s.Y36(ex),s.Y36(P6,8))},i.\u0275dir=s.lG2({type:i,viewQuery:function(e,o){if(1&e&&(s.Gf(b6,5),s.Gf(x6,5),s.Gf(IF,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.trigger=a.first),s.iGM(a=s.CRH())&&(o.panel=a.first),s.iGM(a=s.CRH())&&(o.overlayDir=a.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[s.qOj,s.TTD]}),i})(),B6=(()=>{class i extends N6{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,o,a){const h=this._getItemHeight();return Math.min(Math.max(0,h*e-o+h/2),a)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(qo(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(ue(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const o=iF(e,this.options,this.optionGroups),a=this._getItemHeight();this.panel.nativeElement.scrollTop=function(i,t,e,o){return i<e?i:i+t>e+256?Math.max(0,i-256+t):e}((e+o)*a,a,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new O6(this,e)}_calculateOverlayOffsetX(){const e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),o=this._viewportRuler.getViewportSize(),a=this._isRtl(),h=this.multiple?56:32;let v;if(this.multiple)v=40;else if(this.disableOptionCentering)v=16;else{let $=this._selectionModel.selected[0]||this.options.first;v=$&&$.group?32:16}a||(v*=-1);const k=0-(e.left+v-(a?h:0)),z=e.right+v-o.width+(a?0:h);k>0?v+=k+8:z>0&&(v-=z+8),this.overlayDir.offsetX=Math.round(v),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,o,a){const h=this._getItemHeight(),v=(h-this._triggerRect.height)/2,k=Math.floor(256/h);let z;return this.disableOptionCentering?0:(z=0===this._scrollTop?e*h:this._scrollTop===a?(e-(this._getItemCount()-k))*h+(h-(this._getItemCount()*h-256)%h):o-h/2,Math.round(-1*z-v))}_checkOverlayWithinViewport(e){const o=this._getItemHeight(),a=this._viewportRuler.getViewportSize(),h=this._triggerRect.top-8,v=a.height-this._triggerRect.bottom-8,k=Math.abs(this._offsetY),$=Math.min(this._getItemCount()*o,256)-k-this._triggerRect.height;$>v?this._adjustPanelUp($,v):k>h?this._adjustPanelDown(k,h,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,o){const a=Math.round(e-o);this._scrollTop-=a,this._offsetY-=a,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,o,a){const h=Math.round(e-o);if(this._scrollTop+=h,this._offsetY+=h,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=a)return this._scrollTop=a,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),o=this._getItemCount(),a=Math.min(o*e,256),v=o*e-a;let k;k=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),k+=iF(k,this.options,this.optionGroups);const z=a/2;this._scrollTop=this._calculateOverlayScroll(k,z,v),this._offsetY=this._calculateOverlayOffsetY(k,z,v),this._checkOverlayWithinViewport(v)}_getOriginBasedOnOption(){const e=this._getItemHeight(),o=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-o+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-select"]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,UL,5),s.Suo(a,nF,5),s.Suo(a,C2,5)),2&e){let h;s.iGM(h=s.CRH())&&(o.customTrigger=h.first),s.iGM(h=s.CRH())&&(o.options=h),s.iGM(h=s.CRH())&&(o.optionGroups=h)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,o){1&e&&s.NdJ("keydown",function(h){return o._handleKeydown(h)})("focus",function(){return o._onFocus()})("blur",function(){return o._onBlur()}),2&e&&(s.uIk("id",o.id)("tabindex",o.tabIndex)("aria-controls",o.panelOpen?o.id+"-panel":null)("aria-expanded",o.panelOpen)("aria-label",o.ariaLabel||null)("aria-required",o.required.toString())("aria-disabled",o.disabled.toString())("aria-invalid",o.errorState)("aria-describedby",o._ariaDescribedby||null)("aria-activedescendant",o._getAriaActiveDescendant()),s.ekj("mat-select-disabled",o.disabled)("mat-select-invalid",o.errorState)("mat-select-required",o.required)("mat-select-empty",o.empty)("mat-select-multiple",o.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[s._Bn([{provide:MA,useExisting:i},{provide:w2,useExisting:i}]),s.qOj],ngContentSelectors:A6,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,o){if(1&e&&(s.F$t(M6),s.TgZ(0,"div",0,1),s.NdJ("click",function(){return o.toggle()}),s.TgZ(3,"div",2),s.YNc(4,w6,2,1,"span",3),s.YNc(5,E6,3,2,"span",4),s.qZA(),s.TgZ(6,"div",5),s._UZ(7,"div",6),s.qZA(),s.qZA(),s.YNc(8,T6,4,14,"ng-template",7),s.NdJ("backdropClick",function(){return o.close()})("attach",function(){return o._onAttached()})("detach",function(){return o.close()})),2&e){const a=s.MAs(1);s.uIk("aria-owns",o.panelOpen?o.id+"-panel":null),s.xp6(3),s.Q6J("ngSwitch",o.empty),s.uIk("id",o._valueId),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngSwitchCase",!1),s.xp6(3),s.Q6J("cdkConnectedOverlayPanelClass",o._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",o._scrollStrategy)("cdkConnectedOverlayOrigin",a)("cdkConnectedOverlayOpen",o.panelOpen)("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayMinWidth",null==o._triggerRect?null:o._triggerRect.width)("cdkConnectedOverlayOffsetY",o._offsetY)}},directives:[r4,Ni,Nn,IF,ei,ne],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px}\n'],encapsulation:2,data:{animation:[NL.transformPanelWrap,NL.transformPanel]},changeDetection:0}),i})(),HL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[R6],imports:[[sr,MS,rF,Ir],SS,AA,rF,Ir]}),i})();class V6{constructor(t){this.total=t}call(t,e){return e.subscribe(new U6(t,this.total))}}class U6 extends $o.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}const GL=new Set;let Dw,jL=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):G6}matchMedia(e){return this._platform.WEBKIT&&function(i){if(!GL.has(i))try{Dw||(Dw=document.createElement("style"),Dw.setAttribute("type","text/css"),document.head.appendChild(Dw)),Dw.sheet&&(Dw.sheet.insertRule(`@media ${i} {.fx-query-test{ }}`,0),GL.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(xo))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(xo))},token:i,providedIn:"root"}),i})();function G6(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let Z2=(()=>{class i{constructor(e,o){this._mediaMatcher=e,this._zone=o,this._queries=new Map,this._destroySubject=new Bn.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return YL(u_(e)).some(a=>this._registerQuery(a).mql.matches)}observe(e){let h=jl(YL(u_(e)).map(v=>this._registerQuery(v).observable));return h=Rs(h.pipe(ue(1)),h.pipe(t=>t.lift(new V6(1)),WC(0))),h.pipe((0,ri.U)(v=>{const k={matches:!1,breakpoints:{}};return v.forEach(({matches:z,query:$})=>{k.matches=k.matches||z,k.breakpoints[$]=z}),k}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const o=this._mediaMatcher.matchMedia(e),h={observable:new Gr.y(v=>{const k=z=>this._zone.run(()=>v.next(z));return o.addListener(k),()=>{o.removeListener(k)}}).pipe(xs(o),(0,ri.U)(({matches:v})=>({query:e,matches:v})),qo(this._destroySubject)),mql:o};return this._queries.set(e,h),h}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(jL),s.LFG(s.R0b))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(jL),(0,s.LFG)(s.R0b))},token:i,providedIn:"root"}),i})();function YL(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}const j6={tooltipState:As("state",[ko("initial, void, hidden",zn({opacity:0,transform:"scale(0)"})),ko("visible",zn({transform:"scale(1)"})),Sr("* => visible",Dr("200ms cubic-bezier(0, 0, 0.2, 1)",h_([zn({opacity:0,transform:"scale(0)",offset:0}),zn({opacity:.5,transform:"scale(0.99)",offset:.5}),zn({opacity:1,transform:"scale(1)",offset:1})]))),Sr("* => hidden",Dr("100ms cubic-bezier(0, 0, 0.2, 1)",zn({opacity:0})))])},ZL=aw({passive:!0}),WL=new s.OlP("mat-tooltip-scroll-strategy"),$6={provide:WL,deps:[Bd],useFactory:function(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},X6=new s.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let J6=(()=>{class i{constructor(e,o,a,h,v,k,z,$,oe,me,ke,Fe){this._overlay=e,this._elementRef=o,this._scrollDispatcher=a,this._viewContainerRef=h,this._ngZone=v,this._platform=k,this._ariaDescriber=z,this._focusMonitor=$,this._dir=me,this._defaultOptions=ke,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Bn.xQ,this._handleKeydown=je=>{this._isTooltipVisible()&&27===je.keyCode&&!La(je)&&(je.preventDefault(),je.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=oe,ke&&(ke.position&&(this.position=ke.position),ke.touchGestures&&(this.touchGestures=ke.touchGestures)),v.runOutsideAngular(()=>{o.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=_r(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(qo(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([o,a])=>{e.removeEventListener(o,a,ZL)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const o=this._createOverlay();this._detach(),this._portal=this._portal||new Sw(K6,this._viewContainerRef),this._tooltipInstance=o.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(qo(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),o=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(e);return o.positionChanges.pipe(qo(this._destroyed)).subscribe(a=>{this._tooltipInstance&&a.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:o,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(qo(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(){const e=this._overlayRef.getConfig().positionStrategy,o=this._getOrigin(),a=this._getOverlayPosition();e.withPositions([Object.assign(Object.assign({},o.main),a.main),Object.assign(Object.assign({},o.fallback),a.fallback)])}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,o=this.position;let a;"above"==o||"below"==o?a={originX:"center",originY:"above"==o?"top":"bottom"}:"before"==o||"left"==o&&e||"right"==o&&!e?a={originX:"start",originY:"center"}:("after"==o||"right"==o&&e||"left"==o&&!e)&&(a={originX:"end",originY:"center"});const{x:h,y:v}=this._invertPosition(a.originX,a.originY);return{main:a,fallback:{originX:h,originY:v}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,o=this.position;let a;"above"==o?a={overlayX:"center",overlayY:"bottom"}:"below"==o?a={overlayX:"center",overlayY:"top"}:"before"==o||"left"==o&&e||"right"==o&&!e?a={overlayX:"end",overlayY:"center"}:("after"==o||"right"==o&&e||"left"==o&&!e)&&(a={overlayX:"start",overlayY:"center"});const{x:h,y:v}=this._invertPosition(a.overlayX,a.overlayY);return{main:a,fallback:{overlayX:h,overlayY:v}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(ue(1),qo(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,o){return"above"===this.position||"below"===this.position?"top"===o?o="bottom":"bottom"===o&&(o="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",()=>this.hide()],["wheel",o=>this._wheelListener(o)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const o=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",o],["touchcancel",o])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([o,a])=>{this._elementRef.nativeElement.addEventListener(o,a,ZL)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const a=(this._document||document).elementFromPoint(e.clientX,e.clientY),h=this._elementRef.nativeElement;a!==h&&!h.contains(a)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const o=this._elementRef.nativeElement,a=o.style;("on"===e||"INPUT"!==o.nodeName&&"TEXTAREA"!==o.nodeName)&&(a.userSelect=a.msUserSelect=a.webkitUserSelect=a.MozUserSelect="none"),("on"===e||!o.draggable)&&(a.webkitUserDrag="none"),a.touchAction="none",a.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Bd),s.Y36(s.SBq),s.Y36(wS),s.Y36(s.s_b),s.Y36(s.R0b),s.Y36(xo),s.Y36(Qb),s.Y36(eh),s.Y36(WL),s.Y36(Xh,8),s.Y36(X6,8),s.Y36(wt))},i.\u0275dir=s.lG2({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),i})(),K6=(()=>{class i{constructor(e,o){this._changeDetectorRef=e,this._breakpointObserver=o,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new Bn.xQ,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}show(e){this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=null,this._markForCheck()},e)}hide(e){this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=null,this._markForCheck()},e)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){const o=e.toState;"hidden"===o&&!this.isVisible()&&this._onHide.next(),("visible"===o||"hidden"===o)&&(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(Z2))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,o){1&e&&s.NdJ("click",function(){return o._handleBodyInteraction()},!1,s.pYS)("auxclick",function(){return o._handleBodyInteraction()},!1,s.pYS),2&e&&s.Udp("zoom","visible"===o._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,o){if(1&e&&(s.TgZ(0,"div",0),s.NdJ("@state.start",function(){return o._animationStart()})("@state.done",function(h){return o._animationDone(h)}),s.ALo(1,"async"),s._uU(2),s.qZA()),2&e){let a;s.ekj("mat-tooltip-handset",null==(a=s.lcZ(1,5,o._isHandset))?null:a.matches),s.Q6J("ngClass",o.tooltipClass)("@state",o._visibility),s.xp6(2),s.Oqu(o.message)}},directives:[ne],pipes:[cl],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[j6.tooltipState]},changeDetection:0}),i})(),eU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[$6],imports:[[cS,sr,MS,Ir],Ir,SS]}),i})();function tU(i,t){if(1&i&&(s.TgZ(0,"mat-option",19),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e," ")}}function nU(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"mat-form-field",16),s.TgZ(1,"mat-select",17),s.NdJ("selectionChange",function(a){return s.CHM(e),s.oxw(2)._changePageSize(a.value)}),s.YNc(2,tU,2,2,"mat-option",18),s.qZA(),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("appearance",e._formFieldAppearance)("color",e.color),s.xp6(1),s.Q6J("value",e.pageSize)("disabled",e.disabled)("aria-label",e._intl.itemsPerPageLabel),s.xp6(1),s.Q6J("ngForOf",e._displayedPageSizeOptions)}}function iU(i,t){if(1&i&&(s.TgZ(0,"div",20),s._uU(1),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.pageSize)}}function rU(i,t){if(1&i&&(s.TgZ(0,"div",12),s.TgZ(1,"div",13),s._uU(2),s.qZA(),s.YNc(3,nU,3,6,"mat-form-field",14),s.YNc(4,iU,2,1,"div",15),s.qZA()),2&i){const e=s.oxw();s.xp6(2),s.hij(" ",e._intl.itemsPerPageLabel," "),s.xp6(1),s.Q6J("ngIf",e._displayedPageSizeOptions.length>1),s.xp6(1),s.Q6J("ngIf",e._displayedPageSizeOptions.length<=1)}}function oU(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",21),s.NdJ("click",function(){return s.CHM(e),s.oxw().firstPage()}),s.O4$(),s.TgZ(1,"svg",7),s._UZ(2,"path",22),s.qZA(),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),s.uIk("aria-label",e._intl.firstPageLabel)}}function sU(i,t){if(1&i){const e=s.EpF();s.O4$(),s.kcU(),s.TgZ(0,"button",23),s.NdJ("click",function(){return s.CHM(e),s.oxw().lastPage()}),s.O4$(),s.TgZ(1,"svg",7),s._UZ(2,"path",24),s.qZA(),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),s.uIk("aria-label",e._intl.lastPageLabel)}}let zS=(()=>{class i{constructor(){this.changes=new Bn.xQ,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,o,a)=>{if(0==a||0==o)return`0 of ${a}`;const h=e*o;return`${h+1} \u2013 ${h<(a=Math.max(a,0))?Math.min(h+o,a):h+o} of ${a}`}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})();const lU={provide:zS,deps:[[new s.FiY,new s.tp0,zS]],useFactory:function(i){return i||new zS}},uU=new s.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS");class hU{}const dU=m_(XO(hU));let pU=(()=>{class i extends dU{constructor(e,o,a){if(super(),this._intl=e,this._changeDetectorRef=o,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new s.vpe,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),a){const{pageSize:h,pageSizeOptions:v,hidePageSize:k,showFirstLastButtons:z}=a;null!=h&&(this._pageSize=h),null!=v&&(this._pageSizeOptions=v),null!=k&&(this._hidePageSize=k),null!=z&&(this._showFirstLastButtons=z)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(Rl(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=Rl(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(Rl(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(o=>Rl(o)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=_r(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=_r(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex++,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex--,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const a=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(a)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,o)=>e-o),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(zS),s.Y36(s.sBO),s.Y36(void 0))},i.\u0275dir=s.lG2({type:i,inputs:{pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",color:"color"},outputs:{page:"page"},features:[s.qOj]}),i})(),Iw=(()=>{class i extends pU{constructor(e,o,a){super(e,o,a),a&&null!=a.formFieldAppearance&&(this._formFieldAppearance=a.formFieldAppearance)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(zS),s.Y36(s.sBO),s.Y36(uU,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[s.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.YNc(2,rU,5,3,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s._uU(5),s.qZA(),s.YNc(6,oU,3,5,"button",5),s.TgZ(7,"button",6),s.NdJ("click",function(){return o.previousPage()}),s.O4$(),s.TgZ(8,"svg",7),s._UZ(9,"path",8),s.qZA(),s.qZA(),s.kcU(),s.TgZ(10,"button",9),s.NdJ("click",function(){return o.nextPage()}),s.O4$(),s.TgZ(11,"svg",7),s._UZ(12,"path",10),s.qZA(),s.qZA(),s.YNc(13,sU,3,5,"button",11),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",!o.hidePageSize),s.xp6(3),s.hij(" ",o._intl.getRangeLabel(o.pageIndex,o.pageSize,o.length)," "),s.xp6(1),s.Q6J("ngIf",o.showFirstLastButtons),s.xp6(1),s.Q6J("matTooltip",o._intl.previousPageLabel)("matTooltipDisabled",o._previousButtonsDisabled())("matTooltipPosition","above")("disabled",o._previousButtonsDisabled()),s.uIk("aria-label",o._intl.previousPageLabel),s.xp6(3),s.Q6J("matTooltip",o._intl.nextPageLabel)("matTooltipDisabled",o._nextButtonsDisabled())("matTooltipPosition","above")("disabled",o._nextButtonsDisabled()),s.uIk("aria-label",o._intl.nextPageLabel),s.xp6(3),s.Q6J("ngIf",o.showFirstLastButtons))},directives:[Xt,cv,J6,AS,B6,Je,nF],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}\n"],encapsulation:2,changeDetection:0}),i})(),fU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[lU],imports:[[sr,E2,HL,eU,Ir]]}),i})();const mU=[[["caption"]],[["colgroup"],["col"]]],gU=["caption","colgroup, col"];function W2(i){return class extends i{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=_r(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const Pw=new s.OlP("CDK_TABLE");let Rw=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkCellDef",""]]}),i})(),Ow=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkHeaderCellDef",""]]}),i})(),UA=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkFooterCellDef",""]]}),i})();class bU{}const xU=W2(bU);let __=(()=>{class i extends xU{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const o=this._stickyEnd;this._stickyEnd=_r(e),this._hasStickyChanged=o!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Pw,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,Rw,5),s.Suo(a,Ow,5),s.Suo(a,UA,5)),2&e){let h;s.iGM(h=s.CRH())&&(o.cell=h.first),s.iGM(h=s.CRH())&&(o.headerCell=h.first),s.iGM(h=s.CRH())&&(o.footerCell=h.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[s._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),s.qOj]}),i})();class $2{constructor(t,e){const o=e.nativeElement.classList;for(const a of t._columnCssClassName)o.add(a)}}let X2=(()=>{class i extends $2{constructor(e,o){super(e,o)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(__),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[s.qOj]}),i})(),Q2=(()=>{class i extends $2{constructor(e,o){super(e,o)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(__),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:["role","gridcell",1,"cdk-cell"],features:[s.qOj]}),i})();class XL{constructor(){this.tasks=[],this.endTasks=[]}}const J2=new s.OlP("_COALESCED_STYLE_SCHEDULER");let QL=(()=>{class i{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Bn.xQ}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new XL,this._getScheduleObservable().pipe(qo(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new XL;for(const o of e.tasks)o();for(const o of e.endTasks)o()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,jr.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(ue(1))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.R0b))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),K2=(()=>{class i{constructor(e,o){this.template=e,this._differs=o}ngOnChanges(e){if(!this._columnsDiffer){const o=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(o).create(),this._columnsDiffer.diff(o)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof VS?e.headerCell.template:this instanceof US?e.footerCell.template:e.cell.template}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc),s.Y36(s.ZZ4))},i.\u0275dir=s.lG2({type:i,features:[s.TTD]}),i})();class wU extends K2{}const CU=W2(wU);let VS=(()=>{class i extends CU{constructor(e,o,a){super(e,o),this._table=a}ngOnChanges(e){super.ngOnChanges(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(Pw,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[s.qOj,s.TTD]}),i})();class SU extends K2{}const EU=W2(SU);let US=(()=>{class i extends EU{constructor(e,o,a){super(e,o),this._table=a}ngOnChanges(e){super.ngOnChanges(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(Pw,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[s.qOj,s.TTD]}),i})(),HA=(()=>{class i extends K2{constructor(e,o,a){super(e,o),this._table=a}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(Pw,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[s.qOj]}),i})(),y_=(()=>{class i{constructor(e){this._viewContainer=e,i.mostRecentCellOutlet=this}ngOnDestroy(){i.mostRecentCellOutlet===this&&(i.mostRecentCellOutlet=null)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkCellOutlet",""]]}),i.mostRecentCellOutlet=null,i})(),eP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,o){1&e&&s.GkF(0,0)},directives:[y_],encapsulation:2}),i})(),nP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,o){1&e&&s.GkF(0,0)},directives:[y_],encapsulation:2}),i})(),GA=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc))},i.\u0275dir=s.lG2({type:i,selectors:[["ng-template","cdkNoDataRow",""]]}),i})();const JL=["top","bottom","left","right"];class TU{constructor(t,e,o,a,h=!0,v=!0,k){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=o,this._coalescedStyleScheduler=a,this._isBrowser=h,this._needsPositionStickyOnElement=v,this._positionListener=k,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const o=[];for(const a of t)if(a.nodeType===a.ELEMENT_NODE){o.push(a);for(let h=0;h<a.children.length;h++)o.push(a.children[h])}this._scheduleStyleChanges(()=>{for(const a of o)this._removeStickyStyle(a,e)})}updateStickyColumns(t,e,o,a=!0){if(!t.length||!this._isBrowser||!e.some(ke=>ke)&&!o.some(ke=>ke))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const h=t[0],v=h.children.length,k=this._getCellWidths(h,a),z=this._getStickyStartColumnPositions(k,e),$=this._getStickyEndColumnPositions(k,o),oe=e.lastIndexOf(!0),me=o.indexOf(!0);this._scheduleStyleChanges(()=>{const ke="rtl"===this.direction,Fe=ke?"right":"left",je=ke?"left":"right";for(const ct of t)for(let kt=0;kt<v;kt++){const Qt=ct.children[kt];e[kt]&&this._addStickyStyle(Qt,Fe,z[kt],kt===oe),o[kt]&&this._addStickyStyle(Qt,je,$[kt],kt===me)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===oe?[]:k.slice(0,oe+1).map((ct,kt)=>e[kt]?ct:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===me?[]:k.slice(me).map((ct,kt)=>o[kt+me]?ct:null).reverse()}))})}stickRows(t,e,o){if(!this._isBrowser)return;const a="bottom"===o?t.slice().reverse():t,h="bottom"===o?e.slice().reverse():e,v=[],k=[],z=[];for(let oe=0,me=0;oe<a.length;oe++){if(v[oe]=me,!h[oe])continue;const ke=a[oe];z[oe]=this._isNativeHtmlTable?Array.from(ke.children):[ke];const Fe=ke.getBoundingClientRect().height;me+=Fe,k[oe]=Fe}const $=h.lastIndexOf(!0);this._scheduleStyleChanges(()=>{var oe,me;for(let ke=0;ke<a.length;ke++){if(!h[ke])continue;const Fe=v[ke],je=ke===$;for(const ct of z[ke])this._addStickyStyle(ct,o,Fe,je)}"top"===o?null===(oe=this._positionListener)||void 0===oe||oe.stickyHeaderRowsUpdated({sizes:k,elements:z}):null===(me=this._positionListener)||void 0===me||me.stickyFooterRowsUpdated({sizes:k,elements:z})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const o=t.querySelector("tfoot");this._scheduleStyleChanges(()=>{e.some(a=>!a)?this._removeStickyStyle(o,["bottom"]):this._addStickyStyle(o,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const a of e)t.style[a]="",t.classList.remove(this._borderCellCss[a]);JL.some(a=>-1===e.indexOf(a)&&t.style[a])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,o,a){t.classList.add(this._stickCellCss),a&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${o}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let o=0;for(const a of JL)t.style[a]&&(o+=e[a]);return o?`${o}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const o=[],a=t.children;for(let h=0;h<a.length;h++)o.push(a[h].getBoundingClientRect().width);return this._cachedCellWidths=o,o}_getStickyStartColumnPositions(t,e){const o=[];let a=0;for(let h=0;h<t.length;h++)e[h]&&(o[h]=a,a+=t[h]);return o}_getStickyEndColumnPositions(t,e){const o=[];let a=0;for(let h=t.length;h>0;h--)e[h]&&(o[h]=a,a+=t[h]);return o}_scheduleStyleChanges(t){this._coalescedStyleScheduler?this._coalescedStyleScheduler.schedule(t):t()}}const KL=new s.OlP("CDK_SPL");let jA=(()=>{class i{constructor(e,o){this.viewContainer=e,this.elementRef=o}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","rowOutlet",""]]}),i})(),YA=(()=>{class i{constructor(e,o){this.viewContainer=e,this.elementRef=o}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","headerRowOutlet",""]]}),i})(),qA=(()=>{class i{constructor(e,o){this.viewContainer=e,this.elementRef=o}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","footerRowOutlet",""]]}),i})(),ZA=(()=>{class i{constructor(e,o){this.viewContainer=e,this.elementRef=o}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","noDataRowOutlet",""]]}),i})(),WA=(()=>{class i{constructor(e,o,a,h,v,k,z,$,oe,me,ke){this._differs=e,this._changeDetectorRef=o,this._elementRef=a,this._dir=v,this._platform=z,this._viewRepeater=$,this._coalescedStyleScheduler=oe,this._stickyPositioningListener=me,this._viewportRuler=ke,this._onDestroy=new Bn.xQ,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.viewChange=new fo({start:0,end:Number.MAX_VALUE}),h||this._elementRef.nativeElement.setAttribute("role","grid"),this._document=k,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=_r(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=_r(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,o)=>this.trackBy?this.trackBy(o.dataIndex,o.data):o),this._viewportRuler&&this._viewportRuler.change().pipe(qo(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const o=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||o,this._forceRecalculateCellWidths=o,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){this._rowOutlet.viewContainer.clear(),this._noDataRowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),SA(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return void this._updateNoDataRow();const o=this._rowOutlet.viewContainer;this._viewRepeater?this._viewRepeater.applyChanges(e,o,(a,h,v)=>this._getEmbeddedViewArgs(a.item,v),a=>a.item.data,a=>{1===a.operation&&a.context&&this._renderCellTemplateForItem(a.record.item.rowDef,a.context)}):e.forEachOperation((a,h,v)=>{if(null==a.previousIndex){const k=a.item;this._renderRow(this._rowOutlet,k.rowDef,v,{$implicit:k.data})}else if(null==v)o.remove(h);else{const k=o.get(h);o.move(k,v)}}),this._updateRowIndexContext(),e.forEachIdentityChange(a=>{o.get(a.currentIndex).context.$implicit=a.item.data}),this._updateNoDataRow(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),a=this._elementRef.nativeElement.querySelector("thead");a&&(a.style.display=e.length?"":"none");const h=this._headerRowDefs.map(v=>v.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,h,"top"),this._headerRowDefs.forEach(v=>v.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),a=this._elementRef.nativeElement.querySelector("tfoot");a&&(a.style.display=e.length?"":"none");const h=this._footerRowDefs.map(v=>v.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,h,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,h),this._footerRowDefs.forEach(v=>v.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),o=this._getRenderedRows(this._rowOutlet),a=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...o,...a],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((h,v)=>{this._addStickyColumnStyles([h],this._headerRowDefs[v])}),this._rowDefs.forEach(h=>{const v=[];for(let k=0;k<o.length;k++)this._renderRows[k].rowDef===h&&v.push(o[k]);this._addStickyColumnStyles(v,h)}),a.forEach((h,v)=>{this._addStickyColumnStyles([h],this._footerRowDefs[v])}),Array.from(this._columnDefsByName.values()).forEach(h=>h.resetStickyChanged())}_getAllRenderRows(){const e=[],o=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let a=0;a<this._data.length;a++){let h=this._data[a];const v=this._getRenderRowsForData(h,a,o.get(h));this._cachedRenderRowsMap.has(h)||this._cachedRenderRowsMap.set(h,new WeakMap);for(let k=0;k<v.length;k++){let z=v[k];const $=this._cachedRenderRowsMap.get(z.data);$.has(z.rowDef)?$.get(z.rowDef).push(z):$.set(z.rowDef,[z]),e.push(z)}}return e}_getRenderRowsForData(e,o,a){return this._getRowDefs(e,o).map(v=>{const k=a&&a.has(v)?a.get(v):[];if(k.length){const z=k.shift();return z.dataIndex=o,z}return{data:e,rowDef:v,dataIndex:o}})}_cacheColumnDefs(){this._columnDefsByName.clear(),$A(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(o=>{this._columnDefsByName.has(o.name),this._columnDefsByName.set(o.name,o)})}_cacheRowDefs(){this._headerRowDefs=$A(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=$A(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=$A(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(o=>!o.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(v,k)=>v||!!k.getColumnsDiff(),o=this._rowDefs.reduce(e,!1);o&&this._forceRenderDataRows();const a=this._headerRowDefs.reduce(e,!1);a&&this._forceRenderHeaderRows();const h=this._footerRowDefs.reduce(e,!1);return h&&this._forceRenderFooterRows(),o||a||h}_switchDataSource(e){this._data=[],SA(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;SA(this.dataSource)?e=this.dataSource.connect(this):T2(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=(0,Qn.of)(this.dataSource)),this._renderChangeSubscription=e.pipe(qo(this._onDestroy)).subscribe(o=>{this._data=o||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,o)=>this._renderRow(this._headerRowOutlet,e,o)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,o)=>this._renderRow(this._footerRowOutlet,e,o)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,o){const a=Array.from(o.columns||[]).map(k=>this._columnDefsByName.get(k)),h=a.map(k=>k.sticky),v=a.map(k=>k.stickyEnd);this._stickyStyler.updateStickyColumns(e,h,v,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const o=[];for(let a=0;a<e.viewContainer.length;a++){const h=e.viewContainer.get(a);o.push(h.rootNodes[0])}return o}_getRowDefs(e,o){if(1==this._rowDefs.length)return[this._rowDefs[0]];let a=[];if(this.multiTemplateDataRows)a=this._rowDefs.filter(h=>!h.when||h.when(o,e));else{let h=this._rowDefs.find(v=>v.when&&v.when(o,e))||this._defaultRowDef;h&&a.push(h)}return a}_getEmbeddedViewArgs(e,o){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:o}}_renderRow(e,o,a,h={}){const v=e.viewContainer.createEmbeddedView(o.template,h,a);return this._renderCellTemplateForItem(o,h),v}_renderCellTemplateForItem(e,o){for(let a of this._getCellTemplates(e))y_.mostRecentCellOutlet&&y_.mostRecentCellOutlet._viewContainer.createEmbeddedView(a,o);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let o=0,a=e.length;o<a;o++){const v=e.get(o).context;v.count=a,v.first=0===o,v.last=o===a-1,v.even=o%2==0,v.odd=!v.even,this.multiTemplateDataRows?(v.dataIndex=this._renderRows[o].dataIndex,v.renderIndex=o):v.index=this._renderRows[o].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,o=>{const a=this._columnDefsByName.get(o);return e.extractCellTemplate(a)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),o=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const a of o){const h=this._document.createElement(a.tag);h.setAttribute("role","rowgroup");for(const v of a.outlets)h.appendChild(v.elementRef.nativeElement);e.appendChild(h)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(o,a)=>o||a.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new TU(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,Qn.of)()).pipe(qo(this._onDestroy)).subscribe(o=>{this._stickyStyler.direction=o,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(o=>!o._table||o._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(e){const o=0===this._rowOutlet.viewContainer.length;if(o!==this._isShowingNoDataRow){const a=this._noDataRowOutlet.viewContainer;o?a.createEmbeddedView(e.templateRef):a.clear(),this._isShowingNoDataRow=o}}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.ZZ4),s.Y36(s.sBO),s.Y36(s.SBq),s.$8M("role"),s.Y36(Xh,8),s.Y36(wt),s.Y36(xo),s.Y36(xS,8),s.Y36(J2,8),s.Y36(KL,12),s.Y36(lx,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,GA,5),s.Suo(a,__,5),s.Suo(a,HA,5),s.Suo(a,VS,5),s.Suo(a,US,5)),2&e){let h;s.iGM(h=s.CRH())&&(o._noDataRow=h.first),s.iGM(h=s.CRH())&&(o._contentColumnDefs=h),s.iGM(h=s.CRH())&&(o._contentRowDefs=h),s.iGM(h=s.CRH())&&(o._contentHeaderRowDefs=h),s.iGM(h=s.CRH())&&(o._contentFooterRowDefs=h)}},viewQuery:function(e,o){if(1&e&&(s.Gf(jA,7),s.Gf(YA,7),s.Gf(qA,7),s.Gf(ZA,7)),2&e){let a;s.iGM(a=s.CRH())&&(o._rowOutlet=a.first),s.iGM(a=s.CRH())&&(o._headerRowOutlet=a.first),s.iGM(a=s.CRH())&&(o._footerRowOutlet=a.first),s.iGM(a=s.CRH())&&(o._noDataRowOutlet=a.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("cdk-table-fixed-layout",o.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},exportAs:["cdkTable"],features:[s._Bn([{provide:Pw,useExisting:i},{provide:xS,useClass:hF},{provide:J2,useClass:QL},{provide:KL,useValue:null}])],ngContentSelectors:gU,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,o){1&e&&(s.F$t(mU),s.Hsn(0),s.Hsn(1,1),s.GkF(2,0),s.GkF(3,1),s.GkF(4,2),s.GkF(5,3))},directives:[YA,jA,ZA,qA],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),i})();function $A(i,t){return i.concat(Array.from(t))}let MU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[cx]]}),i})();const AU=[[["caption"]],[["colgroup"],["col"]]],kU=["caption","colgroup, col"];let XA=(()=>{class i extends WA{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("mat-table-fixed-layout",o.fixedLayout)},exportAs:["matTable"],features:[s._Bn([{provide:xS,useClass:hF},{provide:WA,useExisting:i},{provide:Pw,useExisting:i},{provide:J2,useClass:QL}]),s.qOj],ngContentSelectors:kU,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,o){1&e&&(s.F$t(AU),s.Hsn(0),s.Hsn(1,1),s.GkF(2,0),s.GkF(3,1),s.GkF(4,2),s.GkF(5,3))},directives:[YA,jA,ZA,qA],styles:['mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-row::after,mat-header-row::after,mat-footer-row::after{display:inline-block;min-height:inherit;content:""}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:-webkit-sticky !important;position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n'],encapsulation:2}),i})(),HS=(()=>{class i extends Rw{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["","matCellDef",""]],features:[s._Bn([{provide:Rw,useExisting:i}]),s.qOj]}),i})(),GS=(()=>{class i extends Ow{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["","matHeaderCellDef",""]],features:[s._Bn([{provide:Ow,useExisting:i}]),s.qOj]}),i})(),jS=(()=>{class i extends __{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[s._Bn([{provide:__,useExisting:i},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),s.qOj]}),i})(),YS=(()=>{class i extends X2{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[s.qOj]}),i})(),qS=(()=>{class i extends Q2{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[s.qOj]}),i})(),QA=(()=>{class i extends VS{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[s._Bn([{provide:VS,useExisting:i}]),s.qOj]}),i})(),JA=(()=>{class i extends HA{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[s._Bn([{provide:HA,useExisting:i}]),s.qOj]}),i})(),KA=(()=>{class i extends eP{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[s._Bn([{provide:eP,useExisting:i}]),s.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,o){1&e&&s.GkF(0,0)},directives:[y_],encapsulation:2}),i})(),ek=(()=>{class i extends nP{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[s._Bn([{provide:nP,useExisting:i}]),s.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,o){1&e&&s.GkF(0,0)},directives:[y_],encapsulation:2}),i})(),tk=(()=>{class i extends GA{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275dir=s.lG2({type:i,selectors:[["ng-template","matNoDataRow",""]],features:[s._Bn([{provide:GA,useExisting:i}]),s.qOj]}),i})(),NU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[MU,Ir],Ir]}),i})();class zU extends uF{constructor(t=[]){super(),this._renderData=new fo([]),this._filter=new fo(""),this._internalPageChanges=new Bn.xQ,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,o)=>{const a=e[o];if(dI(a)){const h=Number(a);return h<9007199254740991?h:a}return a},this.sortData=(e,o)=>{const a=o.active,h=o.direction;return a&&""!=h?e.sort((v,k)=>{let z=this.sortingDataAccessor(v,a),$=this.sortingDataAccessor(k,a);const oe=typeof z,me=typeof $;oe!==me&&("number"===oe&&(z+=""),"number"===me&&($+=""));let ke=0;return null!=z&&null!=$?z>$?ke=1:z<$&&(ke=-1):null!=z?ke=1:null!=$&&(ke=-1),ke*("asc"==h?1:-1)}):e},this.filterPredicate=(e,o)=>{const a=Object.keys(e).reduce((v,k)=>v+e[k]+"\u25ec","").toLowerCase(),h=o.trim().toLowerCase();return-1!=a.indexOf(h)},this._data=new fo(t),this._updateChangeSubscription()}get data(){return this._data.value}set data(t){this._data.next(t),this._renderChangesSubscription||this._filterData(t)}get filter(){return this._filter.value}set filter(t){this._filter.next(t),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(t){this._sort=t,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(t){this._paginator=t,this._updateChangeSubscription()}_updateChangeSubscription(){var t;const e=this._sort?(0,vs.T)(this._sort.sortChange,this._sort.initialized):(0,Qn.of)(null),o=this._paginator?(0,vs.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):(0,Qn.of)(null),h=jl([this._data,this._filter]).pipe((0,ri.U)(([z])=>this._filterData(z))),v=jl([h,e]).pipe((0,ri.U)(([z])=>this._orderData(z))),k=jl([v,o]).pipe((0,ri.U)(([z])=>this._pageData(z)));null===(t=this._renderChangesSubscription)||void 0===t||t.unsubscribe(),this._renderChangesSubscription=k.subscribe(z=>this._renderData.next(z))}_filterData(t){return this.filteredData=null==this.filter||""===this.filter?t:t.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(t){return this.sort?this.sortData(t.slice(),this.sort):t}_pageData(t){if(!this.paginator)return t;const e=this.paginator.pageIndex*this.paginator.pageSize;return t.slice(e,e+this.paginator.pageSize)}_updatePaginator(t){Promise.resolve().then(()=>{const e=this.paginator;if(e&&(e.length=t,e.pageIndex>0)){const o=Math.ceil(e.length/e.pageSize)-1||0,a=Math.min(e.pageIndex,o);a!==e.pageIndex&&(e.pageIndex=a,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){var t;null===(t=this._renderChangesSubscription)||void 0===t||t.unsubscribe(),this._renderChangesSubscription=null}}class ZS extends zU{}class Ci{static equals(t,e,o){return o?this.resolveFieldData(t,o)===this.resolveFieldData(e,o):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var h,v,k,o=Array.isArray(t),a=Array.isArray(e);if(o&&a){if((v=t.length)!=e.length)return!1;for(h=v;0!=h--;)if(!this.equalsByValue(t[h],e[h]))return!1;return!0}if(o!=a)return!1;var z=t instanceof Date,$=e instanceof Date;if(z!=$)return!1;if(z&&$)return t.getTime()==e.getTime();var oe=t instanceof RegExp,me=e instanceof RegExp;if(oe!=me)return!1;if(oe&&me)return t.toString()==e.toString();var ke=Object.keys(t);if((v=ke.length)!==Object.keys(e).length)return!1;for(h=v;0!=h--;)if(!Object.prototype.hasOwnProperty.call(e,ke[h]))return!1;for(h=v;0!=h--;)if(!this.equalsByValue(t[k=ke[h]],e[k]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let o=e.split("."),a=t;for(let h=0,v=o.length;h<v;++h){if(null==a)return null;a=a[o[h]]}return a}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,o){t&&e!==o&&(o>=t.length&&(o%=t.length,e%=t.length),t.splice(o,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,o,a){if(o.length>0){let h=!1;for(let v=0;v<o.length;v++)if(this.findIndexInList(o[v],a)>e){o.splice(v,0,t),h=!0;break}h||o.push(t)}else o.push(t)}static findIndexInList(t,e){let o=-1;if(e)for(let a=0;a<e.length;a++)if(e[a]==t){o=a;break}return o}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}}var tN=0;function nN(){return"pr_id_"+ ++tN}var zd=function(){let i=[];const a=h=>h&&parseInt(h.style.zIndex,10)||0;return{get:a,set:(h,v,k)=>{v&&(v.style.zIndex=String(((h,v)=>{let k=i.length>0?i[i.length-1]:{key:h,value:v},z=k.value+(k.key===h?0:v)+1;return i.push({key:h,value:z}),z})(h,k)))},clear:h=>{h&&((h=>{i=i.filter(v=>v.value!==h)})(a(h)),h.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const UU=["*"];let Oc=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),mx=(()=>{class i{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Oc.STARTS_WITH,Oc.CONTAINS,Oc.NOT_CONTAINS,Oc.ENDS_WITH,Oc.EQUALS,Oc.NOT_EQUALS],numeric:[Oc.EQUALS,Oc.NOT_EQUALS,Oc.LESS_THAN,Oc.LESS_THAN_OR_EQUAL_TO,Oc.GREATER_THAN,Oc.GREATER_THAN_OR_EQUAL_TO],date:[Oc.DATE_IS,Oc.DATE_IS_NOT,Oc.DATE_BEFORE,Oc.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Bn.xQ,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation=Object.assign(Object.assign({},this.translation),e),this.translationSource.next(this.translation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),sc=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})();var mv=(()=>(function(i){i[i.ACCEPT=0]="ACCEPT",i[i.REJECT=1]="REJECT",i[i.CANCEL=2]="CANCEL"}(mv||(mv={})),mv))();let nk=(()=>{class i{constructor(){this.requireConfirmationSource=new Bn.xQ,this.acceptConfirmationSource=new Bn.xQ,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),iN=(()=>{class i{constructor(){this.filters={startsWith:(e,o,a)=>{if(null==o||""===o.trim())return!0;if(null==e)return!1;let h=Ci.removeAccents(o.toString()).toLocaleLowerCase(a);return Ci.removeAccents(e.toString()).toLocaleLowerCase(a).slice(0,h.length)===h},contains:(e,o,a)=>{if(null==o||"string"==typeof o&&""===o.trim())return!0;if(null==e)return!1;let h=Ci.removeAccents(o.toString()).toLocaleLowerCase(a);return-1!==Ci.removeAccents(e.toString()).toLocaleLowerCase(a).indexOf(h)},notContains:(e,o,a)=>{if(null==o||"string"==typeof o&&""===o.trim())return!0;if(null==e)return!1;let h=Ci.removeAccents(o.toString()).toLocaleLowerCase(a);return-1===Ci.removeAccents(e.toString()).toLocaleLowerCase(a).indexOf(h)},endsWith:(e,o,a)=>{if(null==o||""===o.trim())return!0;if(null==e)return!1;let h=Ci.removeAccents(o.toString()).toLocaleLowerCase(a),v=Ci.removeAccents(e.toString()).toLocaleLowerCase(a);return-1!==v.indexOf(h,v.length-h.length)},equals:(e,o,a)=>null==o||"string"==typeof o&&""===o.trim()||null!=e&&(e.getTime&&o.getTime?e.getTime()===o.getTime():Ci.removeAccents(e.toString()).toLocaleLowerCase(a)==Ci.removeAccents(o.toString()).toLocaleLowerCase(a)),notEquals:(e,o,a)=>!(null==o||"string"==typeof o&&""===o.trim()||null!=e&&(e.getTime&&o.getTime?e.getTime()===o.getTime():Ci.removeAccents(e.toString()).toLocaleLowerCase(a)==Ci.removeAccents(o.toString()).toLocaleLowerCase(a))),in:(e,o)=>{if(null==o||0===o.length)return!0;for(let a=0;a<o.length;a++)if(Ci.equals(e,o[a]))return!0;return!1},between:(e,o)=>null==o||null==o[0]||null==o[1]||null!=e&&(e.getTime?o[0].getTime()<=e.getTime()&&e.getTime()<=o[1].getTime():o[0]<=e&&e<=o[1]),lt:(e,o,a)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()<o.getTime():e<o),lte:(e,o,a)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()<=o.getTime():e<=o),gt:(e,o,a)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()>o.getTime():e>o),gte:(e,o,a)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()>=o.getTime():e>=o),is:(e,o,a)=>this.filters.equals(e,o,a),isNot:(e,o,a)=>this.filters.notEquals(e,o,a),before:(e,o,a)=>this.filters.lt(e,o,a),after:(e,o,a)=>this.filters.gt(e,o,a),dateIs:(e,o)=>null==o||null!=e&&e.toDateString()===o.toDateString(),dateIsNot:(e,o)=>null==o||null!=e&&e.toDateString()!==o.toDateString(),dateBefore:(e,o)=>null==o||null!=e&&e.getTime()<o.getTime(),dateAfter:(e,o)=>null==o||null!=e&&e.getTime()>o.getTime()}}filter(e,o,a,h,v){let k=[];if(e)for(let z of e)for(let $ of o){let oe=Ci.resolveFieldData(z,$);if(this.filters[h](oe,a,v)){k.push(z);break}}return k}register(e,o){this.filters[e]=o}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ik=(()=>{class i{constructor(){this.clickSource=new Bn.xQ,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),rN=(()=>{class i{}return i.AND="and",i.OR="or",i})(),HU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-footer"]],ngContentSelectors:UU,decls:1,vars:0,template:function(e,o){1&e&&(s.F$t(),s.Hsn(0))},encapsulation:2}),i})(),gx=(()=>{class i{constructor(e){this.template=e}getType(){return this.name}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc))},i.\u0275dir=s.lG2({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),Wm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr]]}),i})(),rk=(()=>{class i{constructor(e,o){this.fs=e,this.auth=o,this.data=[],this.temp=!0,this.index=1,this.isLoading=new fo(this.temp),this.auth.authState.subscribe(a=>{this.uid=null==a?void 0:a.uid,this.fs.collection("Admin").doc(null==a?void 0:a.uid).valueChanges().subscribe(h=>{this.name=h,console.log(this.name),this.isLoading=new fo(!1)})})}getAdminInfo(){var e=this;return Ho(function*(){return new Promise((o,a)=>{e.auth.authState.subscribe(h=>{e.fs.collection("Admin").doc(null==h?void 0:h.uid).valueChanges().subscribe(k=>{console.log(k),o(k)})})})})()}updateInfo(e,o,a){this.fs.collection("Admin").doc(this.uid).update({username:e,email:o,phone:a}),this.auth.authState.subscribe(h=>{null==h||h.updateEmail(o)})}getPurchaseHistory(e){return Ho(function*(){return new Promise((o,a)=>{})})()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Wh),s.LFG(Zn))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const oN=aw({passive:!0});let sN=(()=>{class i{constructor(e,o){this._platform=e,this._ngZone=o,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return se.E;const o=Hm(e),a=this._monitoredElements.get(o);if(a)return a.subject;const h=new Bn.xQ,v="cdk-text-field-autofilled",k=z=>{"cdk-text-field-autofill-start"!==z.animationName||o.classList.contains(v)?"cdk-text-field-autofill-end"===z.animationName&&o.classList.contains(v)&&(o.classList.remove(v),this._ngZone.run(()=>h.next({target:z.target,isAutofilled:!1}))):(o.classList.add(v),this._ngZone.run(()=>h.next({target:z.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{o.addEventListener("animationstart",k,oN),o.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(o,{subject:h,unlisten:()=>{o.removeEventListener("animationstart",k,oN)}}),h}stopMonitoring(e){const o=Hm(e),a=this._monitoredElements.get(o);a&&(a.unlisten(),a.subject.complete(),o.classList.remove("cdk-text-field-autofill-monitored"),o.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(o))}ngOnDestroy(){this._monitoredElements.forEach((e,o)=>this.stopMonitoring(o))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(xo),s.LFG(s.R0b))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(xo),(0,s.LFG)(s.R0b))},token:i,providedIn:"root"}),i})(),aN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[Wb]]}),i})();const jU=new s.OlP("MAT_INPUT_VALUE_ACCESSOR"),YU=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let qU=0;class ZU{constructor(t,e,o,a){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=o,this.ngControl=a}}const WU=$O(ZU);let ok=(()=>{class i extends WU{constructor(e,o,a,h,v,k,z,$,oe,me){super(k,h,v,a),this._elementRef=e,this._platform=o,this.ngControl=a,this._autofillMonitor=$,this._formField=me,this._uid="mat-input-"+qU++,this.focused=!1,this.stateChanges=new Bn.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(je=>$C().has(je));const ke=this._elementRef.nativeElement,Fe=ke.nodeName.toLowerCase();this._inputValueAccessor=z||ke,this._previousNativeValue=this.value,this.id=this.id,o.IOS&&oe.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",je=>{let ct=je.target;!ct.value&&!ct.selectionStart&&!ct.selectionEnd&&(ct.setSelectionRange(1,1),ct.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Fe,this._isTextarea="textarea"===Fe,this._isNativeSelect&&(this.controlType=ke.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=_r(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=_r(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&$C().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=_r(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(!this.readonly||!e)&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,o;const a=(null===(o=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===o?void 0:o.call(e))?null:this.placeholder;if(a!==this._previousPlaceholder){const h=this._elementRef.nativeElement;this._previousPlaceholder=a,a?h.setAttribute("placeholder",a):h.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){YU.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,o=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&o&&o.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(xo),s.Y36(Zm,10),s.Y36(FS,8),s.Y36(g_,8),s.Y36(b2),s.Y36(jU,10),s.Y36(sN),s.Y36(s.R0b),s.Y36(k2,8))},i.\u0275dir=s.lG2({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(e,o){1&e&&s.NdJ("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),2&e&&(s.Ikx("disabled",o.disabled)("required",o.required),s.uIk("id",o.id)("data-placeholder",o.placeholder)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.errorState&&!o.empty)("aria-required",o.required),s.ekj("mat-input-server",o._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[s._Bn([{provide:MA,useExisting:i}]),s.qOj,s.TTD]}),i})(),$U=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[b2],imports:[[aN,AA,Ir],aN,AA]}),i})();const sk="undefined"!=typeof performance&&void 0!==performance.now&&"function"==typeof performance.mark&&"function"==typeof performance.measure&&("function"==typeof performance.clearMarks||"function"==typeof performance.clearMeasures),XU="undefined"!=typeof PerformanceObserver&&void 0!==PerformanceObserver.prototype&&"function"==typeof PerformanceObserver.prototype.constructor,iP="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);let ak={},Fw={};const rP=()=>sk?performance.now():Date.now(),lN=i=>{ak[i]=void 0,Fw[i]&&(Fw[i]=void 0),sk&&(iP||performance.clearMeasures(i),performance.clearMarks(i))},cN=i=>{if(sk){if(iP&&XU){const t=new PerformanceObserver(e=>{Fw[i]=e.getEntries().find(o=>o.name===i),t.disconnect()});t.observe({entryTypes:["measure"]})}performance.mark(i)}ak[i]=rP()},uN=(i,t)=>{try{const e=ak[i];return sk?(t||performance.mark(`${i}-end`),performance.measure(i,i,t||`${i}-end`),iP?Fw[i]?Fw[i]:e?{duration:rP()-e,startTime:e,entryType:"measure",name:i}:{}:performance.getEntriesByName(i).pop()||{}):e?{duration:rP()-e,startTime:e,entryType:"measure",name:i}:{}}catch(e){return{}}finally{lN(i),lN(t||`${i}-end`)}},QU=function(i,t,e,o){return{circle:i,progress:t,"progress-dark":e,pulse:o}};function JU(i,t){if(1&i&&s._UZ(0,"span",1),2&i){const e=s.oxw();s.Q6J("ngClass",s.l5B(4,QU,"circle"===e.appearance,"progress"===e.animation,"progress-dark"===e.animation,"pulse"===e.animation))("ngStyle",e.theme),s.uIk("aria-label",e.ariaLabel)("aria-valuetext",e.loadingText)}}const hN=new s.OlP("ngx-skeleton-loader.config");let KU=(()=>{class i{constructor(e){const{appearance:o="line",animation:a="progress",theme:h=null,loadingText:v="Loading...",count:k=1,ariaLabel:z="loading"}=e||{};this.appearance=o,this.animation=a,this.theme=h,this.loadingText=v,this.count=k,this.items=[],this.ariaLabel=z}ngOnInit(){cN("NgxSkeletonLoader:Rendered"),cN("NgxSkeletonLoader:Loaded"),this.validateInputValues()}validateInputValues(){/^\d+$/.test(`${this.count}`)||((0,s.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'count' a numeric value. Forcing default to \"1\"."),this.count=1),this.items.length=this.count;const e=["progress","progress-dark","pulse","false"];-1===e.indexOf(String(this.animation))&&((0,s.X6Q)()&&console.error(`\`NgxSkeletonLoaderComponent\` need to receive 'animation' as: ${e.join(", ")}. Forcing default to "progress".`),this.animation="progress"),-1===["circle","line",""].indexOf(String(this.appearance))&&((0,s.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'appearance' as: circle or line or empty string. Forcing default to \"''\"."),this.appearance="")}ngOnChanges(e){["count","animation","appearance"].find(o=>e[o]&&(e[o].isFirstChange()||e[o].previousValue===e[o].currentValue))||this.validateInputValues()}ngAfterViewInit(){uN("NgxSkeletonLoader:Rendered")}ngOnDestroy(){uN("NgxSkeletonLoader:Loaded")}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(hN,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["ngx-skeleton-loader"]],inputs:{appearance:"appearance",animation:"animation",theme:"theme",loadingText:"loadingText",count:"count",ariaLabel:"ariaLabel"},features:[s.TTD],decls:1,vars:1,consts:[["class","loader","aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],["aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",1,"loader",3,"ngClass","ngStyle"]],template:function(e,o){1&e&&s.YNc(0,JU,1,9,"span",0),2&e&&s.Q6J("ngForOf",o.items)},directives:[Je,ne,or],styles:['.loader[_ngcontent-%COMP%]{background:#eff1f6 no-repeat;border-radius:4px;box-sizing:border-box;display:inline-block;height:20px;margin-bottom:10px;overflow:hidden;position:relative;width:100%;will-change:transform}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{box-sizing:border-box}.loader.circle[_ngcontent-%COMP%]{border-radius:50%;height:40px;margin:5px;width:40px}.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%]{transform:translateZ(0)}.loader.progress-dark[_ngcontent-%COMP%]:after, .loader.progress-dark[_ngcontent-%COMP%]:before, .loader.progress[_ngcontent-%COMP%]:after, .loader.progress[_ngcontent-%COMP%]:before{box-sizing:border-box}.loader.progress-dark[_ngcontent-%COMP%]:before, .loader.progress[_ngcontent-%COMP%]:before{-webkit-animation:progress 2s ease-in-out infinite;animation:progress 2s ease-in-out infinite;background-size:200px 100%;content:"";height:100%;left:0;position:absolute;top:0;width:200px;z-index:1}.loader.progress[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.6),hsla(0,0%,100%,0))}.loader.progress-dark[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,transparent,rgba(0,0,0,.2),transparent)}.loader.pulse[_ngcontent-%COMP%]{-webkit-animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;-webkit-animation-delay:.5s;animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;animation-delay:.5s}@media (prefers-reduced-motion:reduce){.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%], .loader.pulse[_ngcontent-%COMP%]{-webkit-animation:none;animation:none}.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%]{background-image:none}}@-webkit-keyframes progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}@keyframes progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}'],changeDetection:0}),i})(),eH=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:hN,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr]]}),i})(),nn=(()=>{class i{static addClass(e,o){e.classList?e.classList.add(o):e.className+=" "+o}static addMultipleClasses(e,o){if(e.classList){let a=o.trim().split(" ");for(let h=0;h<a.length;h++)e.classList.add(a[h])}else{let a=o.split(" ");for(let h=0;h<a.length;h++)e.className+=" "+a[h]}}static removeClass(e,o){e.classList?e.classList.remove(o):e.className=e.className.replace(new RegExp("(^|\\b)"+o.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,o){return e.classList?e.classList.contains(o):new RegExp("(^| )"+o+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(o){return o!==e})}static find(e,o){return Array.from(e.querySelectorAll(o))}static findSingle(e,o){return e?e.querySelector(o):null}static index(e){let o=e.parentNode.childNodes,a=0;for(var h=0;h<o.length;h++){if(o[h]==e)return a;1==o[h].nodeType&&a++}return-1}static indexWithinGroup(e,o){let a=e.parentNode?e.parentNode.childNodes:[],h=0;for(var v=0;v<a.length;v++){if(a[v]==e)return h;a[v].attributes&&a[v].attributes[o]&&1==a[v].nodeType&&h++}return-1}static relativePosition(e,o){let a=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const h=o.offsetHeight,v=o.getBoundingClientRect(),k=this.getViewport();let z,$;v.top+h+a.height>k.height?(z=-1*a.height,e.style.transformOrigin="bottom",v.top+z<0&&(z=-1*v.top)):(z=h,e.style.transformOrigin="top"),$=a.width>k.width?-1*v.left:v.left+a.width>k.width?-1*(v.left+a.width-k.width):0,e.style.top=z+"px",e.style.left=$+"px"}static absolutePosition(e,o){let Fe,je,a=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),h=a.height,v=a.width,k=o.offsetHeight,z=o.offsetWidth,$=o.getBoundingClientRect(),oe=this.getWindowScrollTop(),me=this.getWindowScrollLeft(),ke=this.getViewport();$.top+k+h>ke.height?(Fe=$.top+oe-h,e.style.transformOrigin="bottom",Fe<0&&(Fe=oe)):(Fe=k+$.top+oe,e.style.transformOrigin="top"),je=$.left+v>ke.width?Math.max(0,$.left+me+z-v):$.left+me,e.style.top=Fe+"px",e.style.left=je+"px"}static getParents(e,o=[]){return null===e.parentNode?o:this.getParents(e.parentNode,o.concat([e.parentNode]))}static getScrollableParents(e){let o=[];if(e){let a=this.getParents(e);const h=/(auto|scroll)/,v=k=>{let z=window.getComputedStyle(k,null);return h.test(z.getPropertyValue("overflow"))||h.test(z.getPropertyValue("overflowX"))||h.test(z.getPropertyValue("overflowY"))};for(let k of a){let z=1===k.nodeType&&k.dataset.scrollselectors;if(z){let $=z.split(",");for(let oe of $){let me=this.findSingle(k,oe);me&&v(me)&&o.push(me)}}9!==k.nodeType&&v(k)&&o.push(k)}}return o}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let o=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",o}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let o=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",o}static getHiddenElementDimensions(e){let o={};return e.style.visibility="hidden",e.style.display="block",o.width=e.offsetWidth,o.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",o}static scrollInView(e,o){let a=getComputedStyle(e).getPropertyValue("borderTopWidth"),h=a?parseFloat(a):0,v=getComputedStyle(e).getPropertyValue("paddingTop"),k=v?parseFloat(v):0,z=e.getBoundingClientRect(),oe=o.getBoundingClientRect().top+document.body.scrollTop-(z.top+document.body.scrollTop)-h-k,me=e.scrollTop,ke=e.clientHeight,Fe=this.getOuterHeight(o);oe<0?e.scrollTop=me+oe:oe+Fe>ke&&(e.scrollTop=me+oe-ke+Fe)}static fadeIn(e,o){e.style.opacity=0;let a=+new Date,h=0,v=function(){h=+e.style.opacity.replace(",",".")+((new Date).getTime()-a)/o,e.style.opacity=h,a=+new Date,+h<1&&(window.requestAnimationFrame&&requestAnimationFrame(v)||setTimeout(v,16))};v()}static fadeOut(e,o){var a=1,k=50/o;let z=setInterval(()=>{(a-=k)<=0&&(a=0,clearInterval(z)),e.style.opacity=a},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,o){var a=Element.prototype;return(a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||function(v){return-1!==[].indexOf.call(document.querySelectorAll(v),this)}).call(e,o)}static getOuterWidth(e,o){let a=e.offsetWidth;if(o){let h=getComputedStyle(e);a+=parseFloat(h.marginLeft)+parseFloat(h.marginRight)}return a}static getHorizontalPadding(e){let o=getComputedStyle(e);return parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)}static getHorizontalMargin(e){let o=getComputedStyle(e);return parseFloat(o.marginLeft)+parseFloat(o.marginRight)}static innerWidth(e){let o=e.offsetWidth,a=getComputedStyle(e);return o+=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),o}static width(e){let o=e.offsetWidth,a=getComputedStyle(e);return o-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),o}static getInnerHeight(e){let o=e.offsetHeight,a=getComputedStyle(e);return o+=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),o}static getOuterHeight(e,o){let a=e.offsetHeight;if(o){let h=getComputedStyle(e);a+=parseFloat(h.marginTop)+parseFloat(h.marginBottom)}return a}static getHeight(e){let o=e.offsetHeight,a=getComputedStyle(e);return o-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom)+parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth),o}static getWidth(e){let o=e.offsetWidth,a=getComputedStyle(e);return o-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight)+parseFloat(a.borderLeftWidth)+parseFloat(a.borderRightWidth),o}static getViewport(){let e=window,o=document,a=o.documentElement,h=o.getElementsByTagName("body")[0];return{width:e.innerWidth||a.clientWidth||h.clientWidth,height:e.innerHeight||a.clientHeight||h.clientHeight}}static getOffset(e){var o=e.getBoundingClientRect();return{top:o.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:o.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,o){let a=e.parentNode;if(!a)throw"Can't replace element";return a.replaceChild(o,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static appendChild(e,o){if(this.isElement(o))o.appendChild(e);else{if(!o.el||!o.el.nativeElement)throw"Cannot append "+o+" to "+e;o.el.nativeElement.appendChild(e)}}static removeChild(e,o){if(this.isElement(o))o.removeChild(e);else{if(!o.el||!o.el.nativeElement)throw"Cannot remove "+e+" from "+o;o.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let o=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let o=document.createElement("div");o.className="p-scrollbar-measure",document.body.appendChild(o);let a=o.offsetWidth-o.clientWidth;return document.body.removeChild(o),this.calculatedScrollbarWidth=a,a}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let o=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=o,o}static invokeElementMethod(e,o,a){e[o].apply(e,a)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),o=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:o[1]||"",version:o[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let o=i.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])'),a=[];for(let h of o)"none"!=getComputedStyle(h).display&&"hidden"!=getComputedStyle(h).visibility&&a.push(h);return a}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class lk{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=nn.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let WS=(()=>{class i{constructor(e,o,a){this.el=e,this.zone=o,this.config=a}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let o=this.getInk();if(!o||"none"===getComputedStyle(o,null).display)return;if(nn.removeClass(o,"p-ink-active"),!nn.getHeight(o)&&!nn.getWidth(o)){let k=Math.max(nn.getOuterWidth(this.el.nativeElement),nn.getOuterHeight(this.el.nativeElement));o.style.height=k+"px",o.style.width=k+"px"}let a=nn.getOffset(this.el.nativeElement),h=e.pageX-a.left+document.body.scrollTop-nn.getWidth(o)/2,v=e.pageY-a.top+document.body.scrollLeft-nn.getHeight(o)/2;o.style.top=v+"px",o.style.left=h+"px",nn.addClass(o,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&nn.removeClass(e,"p-ink-active")}onAnimationEnd(e){nn.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),nn.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(mx,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","pRipple",""]],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("p-ripple",!0)}}),i})(),_x=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr]]}),i})(),oP=(()=>{class i{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,nn.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),this.icon&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let o=this.label?"p-button-icon-"+this.iconPos:null;o&&nn.addClass(e,o),nn.addMultipleClasses(e,this.getIconClass());let a=nn.findSingle(this.el.nativeElement,".p-button-label");a?this.el.nativeElement.insertBefore(e,a):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=nn.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=nn.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(nn.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","pButton",""]],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),Lw=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,_x]]}),i})();const nH=["content"];function iH(i,t){1&i&&s.GkF(0)}function rH(i,t){if(1&i&&(s.TgZ(0,"div",10),s.YNc(1,iH,1,0,"ng-container",11),s.qZA()),2&i){const e=s.oxw(3);s.xp6(1),s.Q6J("ngTemplateOutlet",e.headerTemplate)}}function oH(i,t){if(1&i&&(s.TgZ(0,"span",15),s._uU(1),s.qZA()),2&i){const e=s.oxw(4);s.xp6(1),s.Oqu(e.option("header"))}}const sH=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function aH(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(a){return s.CHM(e),s.oxw(4).close(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(4).close(a)}),s._UZ(1,"span",17),s.qZA()}2&i&&s.Q6J("ngClass",s.DdM(1,sH))}function lH(i,t){if(1&i&&(s.TgZ(0,"div",10),s.YNc(1,oH,2,1,"span",12),s.TgZ(2,"div",13),s.YNc(3,aH,2,2,"button",14),s.qZA(),s.qZA()),2&i){const e=s.oxw(3);s.xp6(1),s.Q6J("ngIf",e.option("header")),s.xp6(2),s.Q6J("ngIf",e.closable)}}function cH(i,t){if(1&i&&s._UZ(0,"i",1),2&i){const e=s.oxw(3);s.Tol(e.option("icon")),s.Q6J("ngClass","p-confirm-dialog-icon")}}function uH(i,t){1&i&&s.GkF(0)}function hH(i,t){if(1&i&&(s.TgZ(0,"div",18),s.Hsn(1),s.YNc(2,uH,1,0,"ng-container",11),s.qZA()),2&i){const e=s.oxw(3);s.xp6(2),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}function dH(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",20),s.NdJ("click",function(){return s.CHM(e),s.oxw(4).reject()}),s.qZA()}if(2&i){const e=s.oxw(4);s.Tol(e.option("rejectButtonStyleClass")),s.Q6J("icon",e.option("rejectIcon"))("label",e.rejectButtonLabel)("ngClass","p-confirm-dialog-reject"),s.uIk("aria-label",e.rejectAriaLabel)}}function pH(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",20),s.NdJ("click",function(){return s.CHM(e),s.oxw(4).accept()}),s.qZA()}if(2&i){const e=s.oxw(4);s.Tol(e.option("acceptButtonStyleClass")),s.Q6J("icon",e.option("acceptIcon"))("label",e.acceptButtonLabel)("ngClass","p-confirm-dialog-accept"),s.uIk("aria-label",e.acceptAriaLabel)}}function fH(i,t){if(1&i&&(s.TgZ(0,"div",18),s.YNc(1,dH,1,6,"button",19),s.YNc(2,pH,1,6,"button",19),s.qZA()),2&i){const e=s.oxw(3);s.xp6(1),s.Q6J("ngIf",e.option("rejectVisible")),s.xp6(1),s.Q6J("ngIf",e.option("acceptVisible"))}}const mH=function(i){return{"p-dialog p-confirm-dialog p-component":!0,"p-dialog-rtl":i}},gH=function(i,t){return{transform:i,transition:t}},_H=function(i){return{value:"visible",params:i}};function yH(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",3),s.NdJ("mousedown",function(){return s.CHM(e),s.oxw(2).moveOnTop()})("@animation.start",function(a){return s.CHM(e),s.oxw(2).onAnimationStart(a)})("@animation.done",function(a){return s.CHM(e),s.oxw(2).onAnimationEnd(a)}),s.YNc(1,rH,2,1,"div",4),s.YNc(2,lH,4,2,"div",4),s.TgZ(3,"div",5,6),s.YNc(5,cH,1,3,"i",7),s._UZ(6,"span",8),s.qZA(),s.YNc(7,hH,3,1,"div",9),s.YNc(8,fH,3,2,"div",9),s.qZA()}if(2&i){const e=s.oxw(2);s.Tol(e.styleClass),s.Q6J("ngClass",s.VKq(11,mH,e.rtl))("ngStyle",e.style)("@animation",s.VKq(16,_H,s.WLB(13,gH,e.transformOptions,e.transitionOptions))),s.xp6(1),s.Q6J("ngIf",e.headerTemplate),s.xp6(1),s.Q6J("ngIf",!e.headerTemplate),s.xp6(3),s.Q6J("ngIf",e.option("icon")),s.xp6(1),s.Q6J("innerHTML",e.option("message"),s.oJD),s.xp6(1),s.Q6J("ngIf",e.footer||e.footerTemplate),s.xp6(1),s.Q6J("ngIf",!e.footer&&!e.footerTemplate)}}function vH(i,t){if(1&i&&(s.TgZ(0,"div",1),s.YNc(1,yH,9,18,"div",2),s.qZA()),2&i){const e=s.oxw();s.Tol(e.maskStyleClass),s.Q6J("ngClass",e.getMaskClass()),s.xp6(1),s.Q6J("ngIf",e.visible)}}const bH=[[["p-footer"]]],xH=["p-footer"],wH=dS([zn({transform:"{{transform}}",opacity:0}),Dr("{{transition}}",zn({transform:"none",opacity:1}))]),CH=dS([Dr("{{transition}}",zn({transform:"{{transform}}",opacity:0}))]);let SH=(()=>{class i{constructor(e,o,a,h,v,k){this.el=e,this.renderer=o,this.confirmationService=a,this.zone=h,this.cd=v,this.config=k,this.acceptIcon="pi pi-check",this.acceptVisible=!0,this.rejectIcon="pi pi-times",this.rejectVisible=!0,this.closeOnEscape=!0,this.blockScroll=!0,this.closable=!0,this.autoZIndex=!0,this.baseZIndex=0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.focusTrap=!0,this.defaultFocus="accept",this.onHide=new s.vpe,this._position="center",this.transformOptions="scale(0.7)",this.id=nN(),this.subscription=this.confirmationService.requireConfirmation$.subscribe(z=>{z?z.key===this.key&&(this.confirmation=z,this.confirmationOptions={message:this.confirmation.message||this.message,icon:this.confirmation.icon||this.icon,header:this.confirmation.header||this.header,rejectVisible:null==this.confirmation.rejectVisible?this.rejectVisible:this.confirmation.rejectVisible,acceptVisible:null==this.confirmation.acceptVisible?this.acceptVisible:this.confirmation.acceptVisible,acceptLabel:this.confirmation.acceptLabel||this.acceptLabel,rejectLabel:this.confirmation.rejectLabel||this.rejectLabel,acceptIcon:this.confirmation.acceptIcon||this.acceptIcon,rejectIcon:this.confirmation.rejectIcon||this.rejectIcon,acceptButtonStyleClass:this.confirmation.acceptButtonStyleClass||this.acceptButtonStyleClass,rejectButtonStyleClass:this.confirmation.rejectButtonStyleClass||this.rejectButtonStyleClass,defaultFocus:this.confirmation.defaultFocus||this.defaultFocus,blockScroll:!1===this.confirmation.blockScroll||!0===this.confirmation.blockScroll?this.confirmation.blockScroll:this.blockScroll,closeOnEscape:!1===this.confirmation.closeOnEscape||!0===this.confirmation.closeOnEscape?this.confirmation.closeOnEscape:this.closeOnEscape,dismissableMask:!1===this.confirmation.dismissableMask||!0===this.confirmation.dismissableMask?this.confirmation.dismissableMask:this.dismissableMask},this.confirmation.accept&&(this.confirmation.acceptEvent=new s.vpe,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new s.vpe,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"top-left":case"bottom-left":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"top-right":case"bottom-right":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}option(e){const o=this.confirmationOptions||this;if(o.hasOwnProperty(e))return o[e]}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.contentContainer=nn.findSingle(this.container,".p-dialog-content"),this.container.setAttribute(this.id,"");const o=this.getElementToFocus();o&&o.focus(),this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.enableModality()}}onAnimationEnd(e){switch(e.toState){case"void":this.onOverlayHide()}}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":return nn.findSingle(this.container,".p-confirm-dialog-accept");case"reject":return nn.findSingle(this.container,".p-confirm-dialog-reject");case"close":return nn.findSingle(this.container,".p-dialog-header-close");case"none":return null;default:return nn.findSingle(this.container,".p-confirm-dialog-accept")}}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):nn.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.wrapper&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}enableModality(){this.option("blockScroll")&&nn.addClass(document.body,"p-overflow-hidden"),this.option("dismissableMask")&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)}))}disableModality(){this.maskVisible=!1,this.option("blockScroll")&&nn.removeClass(document.body,"p-overflow-hidden"),this.dismissableMask&&this.unbindMaskClickListener(),this.container&&!this.cd.destroyed&&this.cd.detectChanges()}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let o in this.breakpoints)e+=`\n                    @media screen and (max-width: ${o}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[o]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}close(e){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(mv.CANCEL),this.hide(mv.CANCEL),e.preventDefault()}hide(e){this.onHide.emit(e),this.visible=!1,this.confirmation=null,this.confirmationOptions=null}moveOnTop(){this.autoZIndex&&(this.container.style.zIndex=String(this.baseZIndex+ ++nn.zindex),this.wrapper.style.zIndex=String(this.baseZIndex+(nn.zindex-1)))}getMaskClass(){let e={"p-dialog-mask p-component-overlay":!0,"p-dialog-mask-scrollblocker":this.blockScroll};return e[this.getPositionClass().toString()]=!0,e}getPositionClass(){const o=["left","right","top","top-left","top-right","bottom","bottom-left","bottom-right"].find(a=>a===this.position);return o?`p-dialog-${o}`:""}bindGlobalListeners(){(this.option("closeOnEscape")&&this.closable||this.focusTrap&&!this.documentEscapeListener)&&(this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",o=>{if(27==o.which&&this.option("closeOnEscape")&&this.closable&&parseInt(this.container.style.zIndex)===nn.zindex+this.baseZIndex&&this.visible&&this.close(o),9===o.which&&this.focusTrap){o.preventDefault();let a=nn.getFocusableElements(this.container);if(a&&a.length>0)if(a[0].ownerDocument.activeElement){let h=a.indexOf(a[0].ownerDocument.activeElement);o.shiftKey?-1==h||0===h?a[a.length-1].focus():a[h-1].focus():-1==h||h===a.length-1?a[0].focus():a[h+1].focus()}else a[0].focus()}}))}unbindGlobalListeners(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}onOverlayHide(){this.disableModality(),this.unbindGlobalListeners(),this.container=null}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.restoreAppend(),this.onOverlayHide(),this.subscription.unsubscribe(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle()}accept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(mv.ACCEPT)}reject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(mv.REJECT),this.hide(mv.REJECT)}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(sc.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(sc.REJECT)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(nk),s.Y36(s.R0b),s.Y36(s.sBO),s.Y36(mx))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-confirmDialog"]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,HU,5),s.Suo(a,gx,4)),2&e){let h;s.iGM(h=s.CRH())&&(o.footer=h.first),s.iGM(h=s.CRH())&&(o.templates=h)}},viewQuery:function(e,o){if(1&e&&s.Gf(nH,5),2&e){let a;s.iGM(a=s.CRH())&&(o.contentViewChild=a.first)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:"acceptVisible",rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:"rejectVisible",acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",blockScroll:"blockScroll",rtl:"rtl",closable:"closable",appendTo:"appendTo",key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",transitionOptions:"transitionOptions",focusTrap:"focusTrap",defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position"},outputs:{onHide:"onHide"},ngContentSelectors:xH,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass","ngStyle","class","mousedown",4,"ngIf"],[3,"ngClass","ngStyle","mousedown"],["class","p-dialog-header",4,"ngIf"],[1,"p-dialog-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-dialog-message",3,"innerHTML"],["class","p-dialog-footer",4,"ngIf"],[1,"p-dialog-header"],[4,"ngTemplateOutlet"],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button",3,"ngClass","click","keydown.enter"],[1,"pi","pi-times"],[1,"p-dialog-footer"],["type","button","pRipple","","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],["type","button","pRipple","","pButton","",3,"icon","label","ngClass","click"]],template:function(e,o){1&e&&(s.F$t(bH),s.YNc(0,vH,2,4,"div",0)),2&e&&s.Q6J("ngIf",o.maskVisible)},directives:[Xt,ne,or,No,WS,oP],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none;background-color:transparent;transition-property:background-color}.p-dialog,.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-dialog-mask.p-dialog-mask-leave{background-color:transparent}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-top .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top,.p-dialog-top-left{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}"],encapsulation:2,data:{animation:[As("animation",[Sr("void => visible",[pS(wH)]),Sr("visible => void",[pS(CH)])])]},changeDetection:0}),i})(),EH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,Lw,_x],Lw,Wm]}),i})();const TH=["primaryValueBar"];class MH{constructor(t){this._elementRef=t}}const AH=xw(MH,"primary"),kH=new s.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const i=(0,s.f3M)(wt),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}});let IH=0,sP=(()=>{class i extends AH{constructor(e,o,a,h){super(e),this._elementRef=e,this._ngZone=o,this._animationMode=a,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new s.vpe,this._animationEndSubscription=ms.w.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+IH++;const v=h?h.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${v}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===a}get value(){return this._value}set value(e){this._value=dN(Rl(e)||0)}get bufferValue(){return this._bufferValue}set bufferValue(e){this._bufferValue=dN(e||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=this._primaryValueBar.nativeElement;this._animationEndSubscription=Cw(e,"transitionend").pipe(w(o=>o.target===e)).subscribe(()=>{("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(th,8),s.Y36(kH,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-progress-bar"]],viewQuery:function(e,o){if(1&e&&s.Gf(TH,5),2&e){let a;s.iGM(a=s.CRH())&&(o._primaryValueBar=a.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(e,o){2&e&&(s.uIk("aria-valuenow","indeterminate"===o.mode||"query"===o.mode?null:o.value)("mode",o.mode),s.ekj("_mat-animation-noopable",o._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[s.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.O4$(),s.TgZ(1,"svg",1),s.TgZ(2,"defs"),s.TgZ(3,"pattern",2),s._UZ(4,"circle",3),s.qZA(),s.qZA(),s._UZ(5,"rect",4),s.qZA(),s.kcU(),s._UZ(6,"div",5),s._UZ(7,"div",6,7),s._UZ(9,"div",8),s.qZA()),2&e&&(s.xp6(3),s.Q6J("id",o.progressbarId),s.xp6(2),s.uIk("fill",o._rectangleFillValue),s.xp6(1),s.Q6J("ngStyle",o._bufferTransform()),s.xp6(1),s.Q6J("ngStyle",o._primaryTransform()))},directives:[or],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),i})();function dN(i,t=0,e=100){return Math.max(t,Math.min(e,i))}let pN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,Ir],Ir]}),i})();function PH(i,t){1&i&&(s.TgZ(0,"div",25),s._UZ(1,"mat-progress-bar",26),s.qZA())}function RH(i,t){1&i&&(s.TgZ(0,"th",27),s._uU(1,"No"),s.qZA())}function OH(i,t){if(1&i&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.x)}}function FH(i,t){1&i&&(s.TgZ(0,"th",27),s._uU(1,"Item Name"),s.qZA()),2&i&&s.Udp("width","30%")}function LH(i,t){if(1&i&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.id)}}function NH(i,t){1&i&&(s.TgZ(0,"th",27),s._uU(1,"Quantity"),s.qZA())}function BH(i,t){if(1&i&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.key)}}function zH(i,t){1&i&&(s.TgZ(0,"th",27),s._uU(1,"Lowest Margin"),s.qZA()),2&i&&s.Udp("width","10%")}function VH(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"td",28),s.TgZ(1,"input",29),s.NdJ("click",function(a){const v=s.CHM(e).$implicit;return s.oxw().update(a,v.id)})("keyup.enter",function(a){const v=s.CHM(e).$implicit;return s.oxw().update(a,v.id)}),s.qZA(),s.qZA()}if(2&i){const e=t.$implicit;s.xp6(1),s.Q6J("value",e.lowestmargin)}}function UH(i,t){1&i&&(s.TgZ(0,"th",27),s._uU(1," Action"),s.qZA())}const HH=function(i){return["/adminviewhistory/",i]};function GH(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"td",28),s.TgZ(1,"button",30),s._uU(2,"VIEW HISTORY"),s.qZA(),s.TgZ(3,"button",31),s.NdJ("click",function(){const h=s.CHM(e).$implicit;return s.oxw().delete(h.id)}),s._uU(4,"DELETE"),s.qZA(),s.qZA()}if(2&i){const e=t.$implicit;s.xp6(1),s.Q6J("routerLink",s.VKq(2,HH,e.id)),s.xp6(2),s.Q6J("disabled",e.key>0)}}function jH(i,t){1&i&&s._UZ(0,"tr",32)}function YH(i,t){1&i&&s._UZ(0,"tr",33)}function qH(i,t){if(1&i&&(s.TgZ(0,"tr",34),s.TgZ(1,"td",35),s._uU(2),s.qZA(),s.qZA()),2&i){s.oxw();const e=s.MAs(14);s.xp6(2),s.hij(' No data matching the filter "',e.value,'" ')}}const ZH=function(){return[5,10,20]};let WH=(()=>{class i{constructor(e,o,a,h){this.fs=e,this.admins=o,this.confirmationService=a,this.primengConfig=h,this.temp=!0,this.isLoading2=new fo(this.temp),this.displayedColumns=["x","id","key","lowestmargin","action"],this.data=[],this.index=0,this.tableinfo$=this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("inventory").snapshotChanges(),this.tableinfo$.subscribe(v=>{this.data=[];let k=1;v.map(z=>{let $={x:k+++".",id:z.payload.doc.id,key:z.payload.doc.data().quantity,lowestmargin:z.payload.doc.data().lowestmargin};this.data.push($),console.log(this.data),this.dataSource=new ZS(this.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading2=new fo(!1)})})}ngOnInit(){this.primengConfig.ripple=!0}ngAfterViewInit(){}update(e,o){console.log(e.target.value),console.log(o),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("inventory").doc(o).update({lowestmargin:e.target.value})}delete(e){this.confirmationService.confirm({message:"Are you sure that you want to perform this action?",accept:()=>{this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("inventory").doc(e).delete()}})}value(e){console.log(e)}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase().toString()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Wh),s.Y36(rk),s.Y36(nk),s.Y36(mx))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-admin-manage-inventory"]],viewQuery:function(e,o){if(1&e&&(s.Gf(Iw,5),s.Gf(ax,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.paginator=a.first),s.iGM(a=s.CRH())&&(o.sort=a.first)}},features:[s._Bn([nk])],decls:39,vars:10,consts:[["class","loader-container",4,"ngIf"],[1,"title"],["id","invtitle"],["id","add","mat-raised-button","","routerLink","/adminaddorder"],["appearance","standard","id","filter"],[1,"fas","fa-search"],["matInput","","placeholder","Ex. Egg",3,"keyup"],["input",""],["id","table",1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","x"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[1,"name"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",3,"width",4,"matHeaderCellDef"],["matColumnDef","key"],["matColumnDef","lowestmargin"],["matColumnDef","action"],["count","1","appearance","line"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"loader-container"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number","id","form1","min","0",1,"form-control",3,"value","click","keyup.enter"],["mat-raised-button","",3,"routerLink"],["mat-raised-button","",3,"disabled","click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(s.TgZ(0,"body"),s._UZ(1,"app-adminnavbarpage"),s.YNc(2,PH,2,0,"div",0),s.ALo(3,"async"),s.TgZ(4,"div",1),s.TgZ(5,"h4",2),s._uU(6,"Manage Inventory"),s.qZA(),s.TgZ(7,"button",3),s._uU(8,"ADD ORDER"),s.qZA(),s.qZA(),s.TgZ(9,"mat-form-field",4),s.TgZ(10,"mat-label"),s._UZ(11,"i",5),s._uU(12," Search"),s.qZA(),s.TgZ(13,"input",6,7),s.NdJ("keyup",function(h){return o.applyFilter(h)}),s.qZA(),s.qZA(),s.TgZ(15,"div",8),s.TgZ(16,"table",9),s.ynx(17,10),s.YNc(18,RH,2,0,"th",11),s.YNc(19,OH,2,1,"td",12),s.BQk(),s.TgZ(20,"div",13),s.ynx(21,14),s.YNc(22,FH,2,2,"th",15),s.YNc(23,LH,2,1,"td",12),s.BQk(),s.qZA(),s.ynx(24,16),s.YNc(25,NH,2,0,"th",11),s.YNc(26,BH,2,1,"td",12),s.BQk(),s.ynx(27,17),s.YNc(28,zH,2,2,"th",15),s.YNc(29,VH,2,1,"td",12),s.BQk(),s.ynx(30,18),s.YNc(31,UH,2,0,"th",11),s.YNc(32,GH,5,4,"td",12),s._UZ(33,"ngx-skeleton-loader",19),s.BQk(),s.YNc(34,jH,1,0,"tr",20),s.YNc(35,YH,1,0,"tr",21),s.YNc(36,qH,3,1,"tr",22),s.qZA(),s._UZ(37,"mat-paginator",23),s.qZA(),s._UZ(38,"p-confirmDialog",24),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",s.lcZ(3,7,o.isLoading2)),s.xp6(14),s.Udp("width","100%"),s.Q6J("dataSource",o.dataSource),s.xp6(18),s.Q6J("matHeaderRowDef",o.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",o.displayedColumns),s.xp6(2),s.Q6J("pageSizeOptions",s.DdM(9,ZH)))},directives:[Zb,Xt,cv,df,AS,Ew,ok,XA,ax,jS,GS,HS,KU,QA,JA,tk,Iw,SH,sP,YS,S2,qS,KA,ek],pipes:[cl],styles:["body[_ngcontent-%COMP%]{background:#f5f5f5;margin:0;padding:0}.tableInv[_ngcontent-%COMP%]{margin:20px}.mat-elevation-z8[_ngcontent-%COMP%]{width:90%;margin:auto}td[_ngcontent-%COMP%]:hover{background:#f5f5f5}.title[_ngcontent-%COMP%]{display:flex;width:100%;position:relative}#add[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:3.4rem;margin-top:20px}#invtitle[_ngcontent-%COMP%]{position:absolute;left:0;margin-left:3.4rem;margin-top:20px}button[_ngcontent-%COMP%]{margin:0 10px}button[_ngcontent-%COMP%]:hover{color:red}button[_ngcontent-%COMP%]:disabled{background:grey}#table[_ngcontent-%COMP%]{margin-top:8rem}#filter[_ngcontent-%COMP%]{position:absolute;right:4.5rem;z-index:999;top:8rem}ngx-skeleton-loader[_ngcontent-%COMP%]{z-index:99}"]}),i})(),yx=(()=>{class i{constructor(e,o,a,h){this.auth=e,this.router=o,this.fauth=a,this.fs=h}canActivate(e,o){var a=this;return Ho(function*(){return 0!=(yield a.auth.getAdminStatus())||(a.router.navigateByUrl(""),!1)})()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Ld),s.LFG(Jo),s.LFG(Zn),s.LFG(Wh))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),v_=(()=>{class i{constructor(e,o,a){this.auth=e,this.router=o,this.fauth=a}canActivate(e,o){return this.fauth.authState.pipe((0,ri.U)(a=>(console.log(a),!!a||(this.router.navigate([""],{queryParams:{returnUrl:o.url}}),!1))))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Ld),s.LFG(Jo),s.LFG(Zn))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),fN=(()=>{class i{constructor(e,o,a,h){this.auth=e,this.as=o,this.fs=a,this.router=h}canActivate(e,o){var a=this;return Ho(function*(){let h=yield a.as.getStudentStatus();return console.log(h),0!=h||(a.router.navigateByUrl(""),!1)})()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Zn),s.LFG(Ld),s.LFG(Wh),s.LFG(Jo))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function $H(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",1),s.TgZ(1,"button",2),s.NdJ("click",function(){return s.CHM(e),s.oxw().action()}),s._uU(2),s.qZA(),s.qZA()}if(2&i){const e=s.oxw();s.xp6(2),s.Oqu(e.data.action)}}function XH(i,t){}const mN=new s.OlP("MatSnackBarData");class ck{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const QH=Math.pow(2,31)-1;class aP{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Bn.xQ,this._afterOpened=new Bn.xQ,this._onAction=new Bn.xQ,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=>this.dismiss()),t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,QH))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let JH=(()=>{class i{constructor(e,o){this.snackBarRef=e,this.data=o}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(aP),s.Y36(mN))},i.\u0275cmp=s.Xpm({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,o){1&e&&(s.TgZ(0,"span"),s._uU(1),s.qZA(),s.YNc(2,$H,3,1,"div",0)),2&e&&(s.xp6(1),s.Oqu(o.data.message),s.xp6(1),s.Q6J("ngIf",o.hasAction))},directives:[Xt,cv],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),i})();const KH={snackBarState:As("state",[ko("void, hidden",zn({transform:"scale(0.8)",opacity:0})),ko("visible",zn({transform:"scale(1)",opacity:1})),Sr("* => visible",Dr("150ms cubic-bezier(0, 0, 0.2, 1)")),Sr("* => void, * => hidden",Dr("75ms cubic-bezier(0.4, 0.0, 1, 1)",zn({opacity:0})))])};let e5=(()=>{class i extends EA{constructor(e,o,a,h,v){super(),this._ngZone=e,this._elementRef=o,this._changeDetectorRef=a,this._platform=h,this.snackBarConfig=v,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Bn.xQ,this._onExit=new Bn.xQ,this._onEnter=new Bn.xQ,this._animationState="void",this.attachDomPortal=k=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(k)),this._live="assertive"!==v.politeness||v.announcementMessage?"off"===v.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:o,toState:a}=e;if(("void"===a&&"void"!==o||"hidden"===a)&&this._completeExit(),"visible"===a){const h=this._onEnter;this._ngZone.run(()=>{h.next(),h.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(ue(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,o=this.snackBarConfig.panelClass;o&&(Array.isArray(o)?o.forEach(a=>e.classList.add(a)):e.classList.add(o)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),o=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&o){let a=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(a=document.activeElement),e.removeAttribute("aria-hidden"),o.appendChild(e),null==a||a.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(xo),s.Y36(ck))},i.\u0275cmp=s.Xpm({type:i,selectors:[["snack-bar-container"]],viewQuery:function(e,o){if(1&e&&s.Gf(ux,7),2&e){let a;s.iGM(a=s.CRH())&&(o._portalOutlet=a.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,o){1&e&&s.WFA("@state.done",function(h){return o.onAnimationEnd(h)}),2&e&&s.d8E("@state",o._animationState)},features:[s.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.YNc(1,XH,0,0,"ng-template",1),s.qZA(),s._UZ(2,"div")),2&e&&(s.xp6(2),s.uIk("aria-live",o._live)("role",o._role))},directives:[ux],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[KH.snackBarState]}}),i})(),gN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[MS,TA,sr,E2,Ir],Ir]}),i})();const _N=new s.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new ck}});let yN=(()=>{class i{constructor(e,o,a,h,v,k){this._overlay=e,this._live=o,this._injector=a,this._breakpointObserver=h,this._parentSnackBar=v,this._defaultConfig=k,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=JH,this.snackBarContainerComponent=e5,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,o){return this._attach(e,o)}openFromTemplate(e,o){return this._attach(e,o)}open(e,o="",a){const h=Object.assign(Object.assign({},this._defaultConfig),a);return h.data={message:e,action:o},h.announcementMessage===e&&(h.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,h)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,o){const h=s.zs3.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:ck,useValue:o}]}),v=new Sw(this.snackBarContainerComponent,o.viewContainerRef,h),k=e.attach(v);return k.instance.snackBarConfig=o,k.instance}_attach(e,o){const a=Object.assign(Object.assign(Object.assign({},new ck),this._defaultConfig),o),h=this._createOverlay(a),v=this._attachSnackBarContainer(h,a),k=new aP(v,h);if(e instanceof s.Rgc){const z=new uv(e,null,{$implicit:a.data,snackBarRef:k});k.instance=v.attachTemplatePortal(z)}else{const z=this._createInjector(a,k),$=new Sw(e,void 0,z),oe=v.attachComponentPortal($);k.instance=oe.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(qo(h.detachments())).subscribe(z=>{const $=h.overlayElement.classList;z.matches?$.add(this.handsetCssClass):$.remove(this.handsetCssClass)}),a.announcementMessage&&v._onAnnounce.subscribe(()=>{this._live.announce(a.announcementMessage,a.politeness)}),this._animateSnackBar(k,a),this._openedSnackBarRef=k,this._openedSnackBarRef}_animateSnackBar(e,o){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),o.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),o.duration&&o.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(o.duration))}_createOverlay(e){const o=new ES;o.direction=e.direction;let a=this._overlay.position().global();const h="rtl"===e.direction,v="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!h||"end"===e.horizontalPosition&&h,k=!v&&"center"!==e.horizontalPosition;return v?a.left("0"):k?a.right("0"):a.centerHorizontally(),"top"===e.verticalPosition?a.top("0"):a.bottom("0"),o.positionStrategy=a,this._overlay.create(o)}_createInjector(e,o){return s.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:aP,useValue:o},{provide:mN,useValue:e.data}]})}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Bd),s.LFG(ex),s.LFG(s.zs3),s.LFG(Z2),s.LFG(i,12),s.LFG(_N))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(Bd),(0,s.LFG)(ex),(0,s.LFG)(s.gxx),(0,s.LFG)(Z2),(0,s.LFG)(i,12),(0,s.LFG)(_N))},token:i,providedIn:gN}),i})();function n5(i,t){1&i&&(s.TgZ(0,"div",17),s._uU(1," Email Address is not registered. "),s.qZA())}function r5(i,t){1&i&&s._UZ(0,"i",20)}function o5(i,t){1&i&&s._UZ(0,"i",21)}function s5(i,t){if(1&i&&(s.TgZ(0,"div"),s.YNc(1,r5,1,0,"i",18),s.YNc(2,o5,1,0,"i",19),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.fp.errors.required),s.xp6(1),s.Q6J("ngIf",e.fp.errors.email)}}let a5=(()=>{class i{constructor(e,o,a,h){this.fb=e,this.service=o,this._snackBar=a,this.router=h,this.form2=this.fb.group({fpassword:["",[cs.required,cs.email]]})}ngOnInit(){}get fp(){return this.form2.get("fpassword")}forgotPassword(){var e=this;return Ho(function*(){let o=yield e.service.forgotPassword(e.form2.get("fpassword").value);1==o?(e.form2.setErrors({notfound:!1}),e._snackBar.open("Forgot Password Email Successfully!","Close",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"}),setTimeout(()=>{e.router.navigateByUrl("")},4e3)):0==o&&e.form2.setErrors({notfound:!0})})()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(zA),s.Y36(Ld),s.Y36(yN),s.Y36(Jo))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-forgotpassword-page"]],decls:26,vars:4,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"forgotpassword"],["class","alert alert-danger",4,"ngIf"],["action","",3,"formGroup"],[1,"error"],["type","email","placeholder","Email Address","required","","formControlName","fpassword"],[4,"ngIf"],[3,"disabled","click"],[1,"special"],["routerLink","/","href",""],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"alert","alert-danger"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Please enter your email address.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Formatting of email address is invalid.",4,"ngIf"],["id","tooltip","data-tooltip","Please enter your email address.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","Formatting of email address is invalid.",1,"fas","fa-exclamation-triangle"]],template:function(e,o){1&e&&(s._UZ(0,"link",0),s._UZ(1,"link",1),s._UZ(2,"link",2),s.TgZ(3,"body"),s.TgZ(4,"div",3),s.TgZ(5,"div",4),s._UZ(6,"img",5),s.TgZ(7,"h1"),s._uU(8," UMP Supply Chain "),s._UZ(9,"br"),s._uU(10," Management System "),s.qZA(),s.qZA(),s.TgZ(11,"div",6),s.TgZ(12,"h3"),s._uU(13,"Forgot Password?"),s.qZA(),s.YNc(14,n5,2,0,"div",7),s.TgZ(15,"form",8),s.TgZ(16,"div",9),s._UZ(17,"input",10),s.YNc(18,s5,3,2,"div",11),s.qZA(),s.TgZ(19,"button",12),s.NdJ("click",function(){return o.forgotPassword()}),s._uU(20," Reset Password "),s.qZA(),s.TgZ(21,"div",13),s.TgZ(22,"a",14),s._uU(23,"Back to Login?"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.O4$(),s.TgZ(24,"svg",15),s._UZ(25,"path",16),s.qZA(),s.qZA()),2&e&&(s.xp6(14),s.Q6J("ngIf",1==(null==o.form2.errors?null:o.form2.errors.notfound)),s.xp6(1),s.Q6J("formGroup",o.form2),s.xp6(3),s.Q6J("ngIf",o.fp.touched&&o.fp.invalid),s.xp6(1),s.Q6J("disabled",o.form2.invalid))},directives:[Xt,NS,kS,g_,px,Aw,fx,Mw,fp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.forgotpassword[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999}h3[_ngcontent-%COMP%]{margin-left:.6rem}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;position:relative;margin-left:4.8rem}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center;margin-top:-1rem}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 25px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:2rem;top:-2rem;left:-2.5rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999}.login[_ngcontent-%COMP%]{margin-top:10px}.title[_ngcontent-%COMP%]{margin-top:100px}.special[_ngcontent-%COMP%]{margin-left:1rem}}']}),i})();function l5(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",22),s._uU(1," Please verify your email address. "),s.TgZ(2,"a",23),s.NdJ("click",function(){return s.CHM(e),s.oxw().sendVerifyEmail()}),s._uU(3," Click"),s.qZA(),s._uU(4," Here to send the verification email again. "),s.qZA()}}function c5(i,t){1&i&&(s.TgZ(0,"div",22),s._uU(1," Your password is invalid. "),s.qZA())}function u5(i,t){1&i&&(s.TgZ(0,"div",22),s._uU(1," Your email address is not registered. "),s.qZA())}function h5(i,t){1&i&&s._UZ(0,"i",26)}function d5(i,t){1&i&&s._UZ(0,"i",27)}function p5(i,t){if(1&i&&(s.TgZ(0,"div"),s.YNc(1,h5,1,0,"i",24),s.YNc(2,d5,1,0,"i",25),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.emailaddress.errors.required),s.xp6(1),s.Q6J("ngIf",e.emailaddress.errors.email)}}function f5(i,t){1&i&&s._UZ(0,"i",29)}function m5(i,t){if(1&i&&(s.TgZ(0,"div",9),s.YNc(1,f5,1,0,"i",28),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.getpassword.errors.required)}}const g5=function(i,t){return{"fa-eye":i,"fa-eye-slash":t}};let _5=(()=>{class i{constructor(e,o){this.fb=e,this.service=o,this.email="",this.password="",this.errMessage="",this.visibility=!0,this.form=e.group({email:["",[cs.required,cs.email]],password:["",[cs.required]]})}ngOnInit(){}example(e){return(0,Qn.of)(e)}onVisible(){this.visibility=!this.visibility}login(){var e=this;return Ho(function*(){console.log(e.form),yield e.service.login(e.form.value.email,e.form.value.password),!1===e.service.emailVerified?e.form.setErrors({emailVerify:!0,wrongpassword:!1,notregister:!1}):!1===e.service.passwordVerified?(console.log("wrong password ts"),e.form.setErrors({wrongpassword:!0,notregister:!1})):!1===e.service.userVerified&&e.form.setErrors({notregister:!0,wrongpassword:!1})})()}sendVerifyEmail(){this.service.verificationemail()}get emailaddress(){return this.form.get("email")}get getpassword(){return this.form.get("password")}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(zA),s.Y36(Ld))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-home-page"]],decls:34,vars:13,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"login"],[3,"formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"error"],["type","email","name","email","formControlName","email","placeholder","Email Address","required","",1,"icon-email",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"visible"],["name","password","placeholder","Password","formControlName","password","required","",1,"icon-password",3,"type"],[1,"far",3,"ngClass","click"],["class","error",4,"ngIf"],[1,"special"],["routerLink","/register",1,"new-user"],["routerLink","/forgotpassword",1,"forgot-password"],[3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"alert","alert-danger"],[1,"link",3,"click"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip"," Email Address is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","  Formatting of Email Address\n            is incorrect.",4,"ngIf"],["id","tooltip","data-tooltip"," Email Address is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","  Formatting of Email Address\n            is incorrect.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Password is required.",4,"ngIf"],["id","tooltip2","data-tooltip"," Password is required.",1,"fas","fa-exclamation-triangle"]],template:function(e,o){1&e&&(s._UZ(0,"link",0),s._UZ(1,"link",1),s._UZ(2,"link",2),s.TgZ(3,"body"),s.TgZ(4,"div",3),s.TgZ(5,"div",4),s._UZ(6,"img",5),s.TgZ(7,"h1"),s._uU(8," UMP Supply Chain "),s._UZ(9,"br"),s._uU(10," Management System "),s.qZA(),s.qZA(),s.TgZ(11,"div",6),s.TgZ(12,"h3"),s._uU(13,"User Login"),s.qZA(),s.TgZ(14,"form",7),s.YNc(15,l5,5,0,"div",8),s.YNc(16,c5,2,0,"div",8),s.YNc(17,u5,2,0,"div",8),s.TgZ(18,"div",9),s.TgZ(19,"input",10),s.NdJ("ngModelChange",function(h){return o.email=h}),s.qZA(),s.YNc(20,p5,3,2,"div",11),s.qZA(),s.TgZ(21,"div",12),s._UZ(22,"input",13),s.TgZ(23,"i",14),s.NdJ("click",function(){return o.onVisible()}),s.qZA(),s.qZA(),s.YNc(24,m5,2,1,"div",15),s.TgZ(25,"div",16),s.TgZ(26,"a",17),s._uU(27,"New User? Create one!"),s.qZA(),s.TgZ(28,"a",18),s._uU(29,"Forgot Password?"),s.qZA(),s.qZA(),s.TgZ(30,"button",19),s.NdJ("click",function(){return o.login()}),s._uU(31,"Login"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.O4$(),s.TgZ(32,"svg",20),s._UZ(33,"path",21),s.qZA(),s.qZA()),2&e&&(s.xp6(14),s.Q6J("formGroup",o.form),s.xp6(1),s.Q6J("ngIf",null==o.form.error?null:o.form.error.emailVerify),s.xp6(1),s.Q6J("ngIf",1==(null==o.form.errors?null:o.form.errors.wrongpassword)),s.xp6(1),s.Q6J("ngIf",1==(null==o.form.errors?null:o.form.errors.notregister)),s.xp6(2),s.Q6J("ngModel",o.email),s.xp6(1),s.Q6J("ngIf",o.emailaddress.invalid&&o.emailaddress.touched),s.xp6(2),s.Q6J("type",o.visibility?"password":"text"),s.xp6(1),s.Q6J("ngClass",s.WLB(10,g5,!o.visibility,o.visibility)),s.xp6(1),s.Q6J("ngIf",o.getpassword.touched&&o.getpassword.invalid),s.xp6(6),s.Q6J("disabled",o.form.invalid))},directives:[NS,kS,g_,Xt,px,fx,Mw,Aw,ne,fp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.alert.alert-danger[_ngcontent-%COMP%]{text-align:justify}.login[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;margin-left:10%;position:relative}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px auto}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.visible[_ngcontent-%COMP%]{position:relative}.far.fa-eye[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.far.fa-eye-slash[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}.link[_ngcontent-%COMP%]{color:red;text-decoration:underline;margin:0}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 1rem 2px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}p[_ngcontent-%COMP%]{font-size:12px;height:1px;margin-top:-10px;color:red}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:red;transition:.3s all ease-in-out}#tooltip2[_ngcontent-%COMP%]{position:absolute;right:1.4rem;margin-right:10px;bottom:1.2rem;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}#tooltip2[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:1rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999}.login[_ngcontent-%COMP%]{margin-top:10px}.title[_ngcontent-%COMP%]{margin-top:100px}}']}),i})();class lP{constructor(){}static passwordVerification(t){let e=t.get("rpassword"),o=t.get("rconfirmpassword");return(null==e?void 0:e.value)!==(null==o?void 0:o.value)?{passwordVerification:!0}:null}static checkRole(t){return"Role"===t.value?(console.log("Role"),{checkRole:!0}):null}static checkGender(t){return"Gender"===t.value?(console.log("Gender"),{gender:!0}):null}static checkMatricCard(t){return"Matric Card Number"===t.value?(console.log("Matric Card Number"),{checkMatrixCard:!0}):null}static checkCompanyName(t){return"Company Name"===t.value?(console.log("Matrix Card"),{checkMatrixCard:!0}):null}}let y5=(()=>{class i{constructor(e){this.el=e}onBlur(){this.el.nativeElement.value=this.el.nativeElement.value.toUpperCase()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","appRegisterD",""]],hostBindings:function(e,o){1&e&&s.NdJ("blur",function(){return o.onBlur()})}}),i})();function v5(i,t){1&i&&s._UZ(0,"i",34)}function b5(i,t){1&i&&s._UZ(0,"i",35)}function x5(i,t){if(1&i&&(s.TgZ(0,"div",31),s.YNc(1,v5,1,0,"i",32),s.YNc(2,b5,1,0,"i",33),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.e.errors.required),s.xp6(1),s.Q6J("ngIf",e.e.errors.email)}}function w5(i,t){1&i&&(s.TgZ(0,"div",36),s._uU(1," Email Address is existed. "),s.qZA())}function C5(i,t){1&i&&s._UZ(0,"i",39)}function S5(i,t){1&i&&s._UZ(0,"i",40)}function E5(i,t){if(1&i&&(s.TgZ(0,"div",31),s.YNc(1,C5,1,0,"i",37),s.YNc(2,S5,1,0,"i",38),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.p.errors.required),s.xp6(1),s.Q6J("ngIf",e.p.errors.minlength)}}function T5(i,t){1&i&&s._UZ(0,"i",39)}function M5(i,t){if(1&i&&(s.TgZ(0,"div",31),s.YNc(1,T5,1,0,"i",37),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.cp.errors.required)}}function A5(i,t){1&i&&(s.TgZ(0,"div",31),s._UZ(1,"i",41),s.qZA())}function k5(i,t){1&i&&s._UZ(0,"i",43)}function D5(i,t){if(1&i&&(s.TgZ(0,"div",31),s.YNc(1,k5,1,0,"i",42),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.name.errors.required)}}function I5(i,t){1&i&&s._UZ(0,"i",45)}function P5(i,t){if(1&i&&(s.TgZ(0,"div",31),s.YNc(1,I5,1,0,"i",44),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.pn.errors.required)}}function R5(i,t){1&i&&(s.TgZ(0,"div",36),s._uU(1," Date of Birth is required. "),s.qZA())}function O5(i,t){if(1&i&&(s.TgZ(0,"div"),s.YNc(1,R5,2,0,"div",10),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.d.errors.required)}}function F5(i,t){1&i&&(s.TgZ(0,"div",36),s._uU(1," Gender is required. "),s.qZA())}function L5(i,t){if(1&i&&(s.TgZ(0,"div"),s.YNc(1,F5,2,0,"div",10),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.g.errors.required)}}function N5(i,t){1&i&&s._UZ(0,"i",47)}function B5(i,t){if(1&i&&(s.TgZ(0,"div",31),s.YNc(1,N5,1,0,"i",46),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.r.errors.role)}}function z5(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",48),s.NdJ("change",function(a){return s.CHM(e),s.oxw().checkEmpty(a)}),s.qZA()}}function V5(i,t){1&i&&s._UZ(0,"i",50)}function U5(i,t){if(1&i&&(s.TgZ(0,"div",31),s.YNc(1,V5,1,0,"i",49),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.matrix.errors.role)}}function H5(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",51),s.NdJ("change",function(a){return s.CHM(e),s.oxw().checkEmpty(a)}),s.qZA()}}const vN=function(i,t){return{"fa-eye":i,"fa-eye-slash":t}};let G5=(()=>{class i{constructor(e,o,a,h,v,k){this.fb=e,this.auth=o,this.firestore=a,this.service=h,this._snackBar=v,this.router=k,this.visibility=!0,this.triggedMessage=!0,this.student=!1,this.supplier=!1,this.form1=e.group({remail:["",[cs.required,cs.email]],rpassword:["",[cs.required,cs.minLength]],rconfirmpassword:["",[cs.required]],name:["",[cs.required]],phonenumber:["",cs.required],date:["",cs.required],role:["Role",[cs.required,lP.checkRole]],gender:["Gender",[cs.required,lP.checkGender]],matrix:[""],comp:[""]},{validator:lP.passwordVerification})}ngOnInit(){}onVisible(){this.visibility=!this.visibility}getRole(e){this.role=e.target.value,1==this.role?(this.student=!0,this.supplier=!1):2==this.role?(this.supplier=!0,this.student=!1):"Role"==this.role&&(this.student=!1,this.supplier=!1),console.log(this.role)}checkform(e){console.log(e);for(let o in this.form1.controls)this.form1.controls[o].errors&&console.log(o)}checkEmpty(e){console.log(e.target.value.length),0==e.target.value.length?this.form1.setErrors({matrixError:!0}):e.target.value.length>0&&this.form1.setErrors(null)}getDate(e){this.date=e.target.value}getGender(e){this.gender=e.target.value}get cp(){return this.form1.get("rconfirmpassword")}get p(){return this.form1.get("rpassword")}get e(){return this.form1.get("remail")}get name(){return this.form1.get("name")}get pn(){return this.form1.get("phonenumber")}get d(){return this.form1.get("date")}get g(){return this.form1.get("gender")}get r(){return this.form1.get("role")}get matrix(){return this.form1.get("matrix")}get comp(){return this.form1.get("comp")}submit(){var e=this;return Ho(function*(){var o,a,h,v,k,z,$,oe,me;yield e.service.checkExistedEmail(null===(o=e.form1.get("remail"))||void 0===o?void 0:o.value),console.log(e.service.emailExistedStatus);let ke=yield e.service.register(null===(a=e.form1.get("remail"))||void 0===a?void 0:a.value,e.form1.get("rpassword").value,null===(h=e.form1.get("role"))||void 0===h?void 0:h.value,null===(v=e.form1.get("name"))||void 0===v?void 0:v.value,null===(k=e.form1.get("date"))||void 0===k?void 0:k.value,null===(z=e.form1.get("phonenumber"))||void 0===z?void 0:z.value,null===($=e.form1.get("gender"))||void 0===$?void 0:$.value,null===(oe=e.form1.get("matrix"))||void 0===oe?void 0:oe.value,null===(me=e.form1.get("comp"))||void 0===me?void 0:me.value);1==ke?(e.form1.setErrors({emailExist:!0}),console.log(e.form1)):e.form1.setErrors({emailExist:!1}),!0===ke.validate?(e._snackBar.open("Register Successfully!","Close",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"}),setTimeout(()=>{e.router.navigateByUrl("")},4e3)):e._snackBar.open("Please try again!","Close",{duration:3e3,verticalPosition:"top"})})()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(zA),s.Y36(Zn),s.Y36(Wh),s.Y36(Ld),s.Y36(yN),s.Y36(Jo))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-register-page"]],decls:59,vars:25,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"registration"],[3,"formGroup","change"],["type","text","placeholder","Email Address","formControlName","remail","required","",1,"icon-email"],["class","error",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"visible"],["name","rpassword","placeholder","Password","required","","formControlName","rpassword","minlength","6",1,"i",3,"type"],[1,"far",3,"ngClass","click"],["name","rconfirmpassword","placeholder","Confirm Password","required","","formControlName","rconfirmpassword",1,"i",3,"type"],["type","text","name","","placeholder","Name","formControlName","name","required","","appRegisterD","",1,"i"],["type","text","placeholder","Phone Number","formControlName","phonenumber","required","",1,"i"],["type","date","placeholder","Date","formControlName","date","required","",1,"i",3,"change"],[4,"ngIf"],["aria-label","Default select example","formControlName","gender","required","",1,"form-select",3,"change"],["selected",""],["value","1"],["value","2"],["aria-label","Default select example","required","","formControlName","role",1,"form-select","mt-2",3,"change"],["type","text","placeholder","Matrix Card Number","formControlName","matrix","class","i",3,"change",4,"ngIf"],["type","text","placeholder","Company Name","formControlName","comp","class","i",3,"change",4,"ngIf"],[1,"special"],["routerLink","/",1,"new-user"],[3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"error"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Email Address is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Formatting of Email Address is invalid.",4,"ngIf"],["id","tooltip","data-tooltip","Email Address is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","Formatting of Email Address is invalid.",1,"fas","fa-exclamation-triangle"],[1,"alert","alert-danger"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Password is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Minimum Length must be at least mixed of 6 characters.",4,"ngIf"],["id","tooltip2","data-tooltip"," Password is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip2","data-tooltip"," Minimum Length must be at least mixed of 6 characters.",1,"fas","fa-exclamation-triangle"],["id","tooltip2","data-tooltip"," Password is not matched.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Name is required.",4,"ngIf"],["id","tooltip","data-tooltip","Name is required.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Phone Number is required.",4,"ngIf"],["id","tooltip","data-tooltip","Phone Number is required.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Role is required.",4,"ngIf"],["id","tooltip","data-tooltip","Role is required.",1,"fas","fa-exclamation-triangle"],["type","text","placeholder","Matrix Card Number","formControlName","matrix",1,"i",3,"change"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Matrix Card is required.",4,"ngIf"],["id","tooltip","data-tooltip","Matrix Card is required.",1,"fas","fa-exclamation-triangle"],["type","text","placeholder","Company Name","formControlName","comp",1,"i",3,"change"]],template:function(e,o){1&e&&(s._UZ(0,"link",0),s._UZ(1,"link",1),s._UZ(2,"link",2),s.TgZ(3,"body"),s.TgZ(4,"div",3),s.TgZ(5,"div",4),s._UZ(6,"img",5),s.TgZ(7,"h1"),s._uU(8," UMP Supply Chain "),s._UZ(9,"br"),s._uU(10," Management System "),s.qZA(),s.qZA(),s.TgZ(11,"div",6),s.TgZ(12,"h3"),s._uU(13,"Sign Up "),s.qZA(),s.TgZ(14,"form",7),s.NdJ("change",function(){return o.checkform(o.form1)}),s._UZ(15,"input",8),s.YNc(16,x5,3,2,"div",9),s.YNc(17,w5,2,0,"div",10),s.TgZ(18,"div",11),s._UZ(19,"input",12),s.TgZ(20,"i",13),s.NdJ("click",function(){return o.onVisible()}),s.qZA(),s.qZA(),s.YNc(21,E5,3,2,"div",9),s.TgZ(22,"div",11),s._UZ(23,"input",14),s.TgZ(24,"i",13),s.NdJ("click",function(){return o.onVisible()}),s.qZA(),s.qZA(),s.YNc(25,M5,2,1,"div",9),s.YNc(26,A5,2,0,"div",9),s._UZ(27,"input",15),s.YNc(28,D5,2,1,"div",9),s._UZ(29,"input",16),s.YNc(30,P5,2,1,"div",9),s.TgZ(31,"input",17),s.NdJ("change",function(h){return o.getDate(h)}),s.qZA(),s.YNc(32,O5,2,1,"div",18),s.TgZ(33,"select",19),s.NdJ("change",function(h){return o.getGender(h)}),s.TgZ(34,"option",20),s._uU(35,"Gender"),s.qZA(),s.TgZ(36,"option",21),s._uU(37,"Male"),s.qZA(),s.TgZ(38,"option",22),s._uU(39,"Female"),s.qZA(),s.qZA(),s.YNc(40,L5,2,1,"div",18),s.TgZ(41,"select",23),s.NdJ("change",function(h){return o.getRole(h)}),s.TgZ(42,"option"),s._uU(43,"Role"),s.qZA(),s.TgZ(44,"option",21),s._uU(45,"Student"),s.qZA(),s.TgZ(46,"option",22),s._uU(47,"Supplier"),s.qZA(),s.qZA(),s.YNc(48,B5,2,1,"div",9),s.YNc(49,z5,1,0,"input",24),s.YNc(50,U5,2,1,"div",9),s.YNc(51,H5,1,0,"input",25),s.TgZ(52,"div",26),s.TgZ(53,"a",27),s._uU(54,"Already Registered? Login Now!"),s.qZA(),s.qZA(),s.TgZ(55,"button",28),s.NdJ("click",function(){return o.submit()}),s._uU(56,"Sign Up"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.O4$(),s.TgZ(57,"svg",29),s._UZ(58,"path",30),s.qZA(),s.qZA()),2&e&&(s.xp6(14),s.Q6J("formGroup",o.form1),s.xp6(2),s.Q6J("ngIf",o.e.touched&&o.e.invalid),s.xp6(1),s.Q6J("ngIf",null==o.form1.errors?null:o.form1.errors.emailExist),s.xp6(2),s.Q6J("type",o.visibility?"password":"text"),s.xp6(1),s.Q6J("ngClass",s.WLB(19,vN,!o.visibility,o.visibility)),s.xp6(1),s.Q6J("ngIf",o.p.touched&&o.p.invalid),s.xp6(2),s.Q6J("type",o.visibility?"password":"text"),s.xp6(1),s.Q6J("ngClass",s.WLB(22,vN,!o.visibility,o.visibility)),s.xp6(1),s.Q6J("ngIf",o.cp.touched&&o.cp.invalid),s.xp6(1),s.Q6J("ngIf",(null==o.form1.errors?null:o.form1.errors.passwordVerification)&&o.cp.valid&&o.p.valid),s.xp6(2),s.Q6J("ngIf",o.name.touched&&o.name.invalid),s.xp6(2),s.Q6J("ngIf",o.pn.touched&&o.pn.invalid),s.xp6(2),s.Q6J("ngIf",o.d.touched&&o.d.invalid),s.xp6(8),s.Q6J("ngIf",o.g.touched&&o.g.invalid),s.xp6(8),s.Q6J("ngIf",o.r.touched&&o.r.invalid),s.xp6(1),s.Q6J("ngIf",1==o.student),s.xp6(1),s.Q6J("ngIf",o.matrix.touched&&o.matrix.invalid),s.xp6(1),s.Q6J("ngIf",1==o.supplier),s.xp6(4),s.Q6J("disabled",o.form1.invalid))},directives:[NS,kS,g_,px,fx,Mw,Aw,Xt,q2,ne,y5,NA,EL,ML,fp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.registration[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999;width:400px}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;position:relative;padding-left:8rem}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-4rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px auto}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center;padding-top:10px}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 25px 2.5px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:-2.25rem;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}.visible[_ngcontent-%COMP%]{position:relative}.far.fa-eye[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.far.fa-eye-slash[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}#tooltip2[_ngcontent-%COMP%]{position:absolute;right:1.4rem;margin-right:10px;bottom:1.2rem;color:red;transition:.3s all ease-in-out}#tooltip2[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100%;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:4rem;top:-2rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999;display:none}.registration[_ngcontent-%COMP%]{margin-top:-1.5rem}.title[_ngcontent-%COMP%]{margin-top:100px}}.i.ng-pristine.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}']}),i})(),j5=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-student-home-page"]],decls:2,vars:0,template:function(e,o){1&e&&(s.TgZ(0,"p"),s._uU(1,"student-home-page works!"),s.qZA())},styles:[""]}),i})();function Y5(i,t){1&i&&(s.TgZ(0,"div",8),s._UZ(1,"mat-progress-bar",9),s.qZA())}let q5=(()=>{class i{constructor(e,o,a){this.asS=e,this.fb=o,this.fs=a,this.form=this.fb.group({name:[""],email:[""],phone:[""]}),this.getInfo()}ngOnInit(){}update(){this.asS.updateInfo(this.form.get("name").value,this.form.get("email").value,this.form.get("phone").value)}getInfo(){var e=this;return Ho(function*(){e.data=yield e.asS.getAdminInfo()})()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(rk),s.Y36(zA),s.Y36(Wh))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-admin-profile-page"]],decls:22,vars:11,consts:[["class","loader-container",4,"ngIf"],[1,"form"],["action","",3,"formGroup"],["appearance","standard","id",""],["matInput","","formControlName","name",3,"ngModel","value"],["matInput","","formControlName","email",3,"ngModel","value"],["matInput","","formControlName","phone",3,"ngModel","value"],["mat-raised-button","","routerLink","/adminprofile",3,"click"],[1,"loader-container"],["mode","indeterminate"]],template:function(e,o){1&e&&(s.TgZ(0,"body"),s._UZ(1,"app-adminnavbarpage"),s.YNc(2,Y5,2,0,"div",0),s.ALo(3,"async"),s.TgZ(4,"div",1),s.TgZ(5,"form",2),s.TgZ(6,"h5"),s._uU(7),s.qZA(),s.TgZ(8,"mat-form-field",3),s.TgZ(9,"mat-label"),s._uU(10,"Name"),s.qZA(),s._UZ(11,"input",4),s.qZA(),s.TgZ(12,"mat-form-field",3),s.TgZ(13,"mat-label"),s._uU(14,"Email"),s.qZA(),s._UZ(15,"input",5),s.qZA(),s.TgZ(16,"mat-form-field",3),s.TgZ(17,"mat-label"),s._uU(18,"Phone"),s.qZA(),s._UZ(19,"input",6),s.qZA(),s.TgZ(20,"button",7),s.NdJ("click",function(){return o.update()}),s._uU(21,"Update"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",s.lcZ(3,9,o.asS.isLoading)),s.xp6(3),s.Q6J("formGroup",o.form),s.xp6(2),s.hij("Profile - ",null==o.asS.name?null:o.asS.name.username,""),s.xp6(4),s.s9C("value",null==o.asS.name?null:o.asS.name.username),s.Q6J("ngModel",null==o.asS.name?null:o.asS.name.username),s.xp6(4),s.s9C("value",null==o.asS.name?null:o.asS.name.email),s.Q6J("ngModel",null==o.asS.name?null:o.asS.name.email),s.xp6(4),s.s9C("value",null==o.asS.name?null:o.asS.name.phone),s.Q6J("ngModel",null==o.asS.name?null:o.asS.name.phone))},directives:[Zb,Xt,NS,kS,g_,AS,Ew,ok,px,fx,Mw,cv,df,sP],pipes:[cl],styles:["body[_ngcontent-%COMP%]{width:100vw;background-color:#f5f5f5;height:100vh;color:#000}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#c0ad91;width:30%;margin:50px auto auto;padding:10px}mat-form-field[_ngcontent-%COMP%]{width:300px}"]}),i})();function Z5(i,t){1&i&&(s.TgZ(0,"th",19),s._uU(1,"Name"),s.qZA())}function W5(i,t){if(1&i&&(s.TgZ(0,"td",20),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.brand)}}function $5(i,t){1&i&&(s.TgZ(0,"th",19),s._uU(1,"Name"),s.qZA()),2&i&&s.Udp("width","30%")}function X5(i,t){if(1&i&&(s.TgZ(0,"td",20),s.TgZ(1,"b"),s._uU(2),s.qZA(),s._UZ(3,"br"),s._uU(4),s.qZA()),2&i){const e=t.$implicit;s.xp6(2),s.Oqu(e.company),s.xp6(2),s.hij("",e.brand," ")}}function Q5(i,t){1&i&&(s.TgZ(0,"th",19),s._uU(1,"Quantity"),s.qZA())}function J5(i,t){if(1&i&&(s.TgZ(0,"td",20),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.quantity)}}function K5(i,t){1&i&&(s.TgZ(0,"th",19),s._uU(1,"Total Price"),s.qZA())}function eG(i,t){if(1&i&&(s.TgZ(0,"td",20),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.hij("RM ",e.totalprice,"")}}function tG(i,t){1&i&&(s.TgZ(0,"th",19),s._uU(1,"Action"),s.qZA())}function nG(i,t){1&i&&(s.TgZ(0,"td",20),s.TgZ(1,"button",21),s._uU(2,"View Details"),s.qZA(),s.TgZ(3,"button",21),s._uU(4,"Buy Again"),s.qZA(),s.qZA())}function iG(i,t){1&i&&s._UZ(0,"tr",22)}function rG(i,t){1&i&&s._UZ(0,"tr",23)}function oG(i,t){if(1&i&&(s.TgZ(0,"tr",24),s.TgZ(1,"td",25),s._uU(2),s.qZA(),s.qZA()),2&i){s.oxw();const e=s.MAs(10);s.xp6(2),s.hij(' No data matching the filter "',e.value,'" ')}}const sG=function(){return[5,10,25,100]};let aG=(()=>{class i{constructor(e,o,a,h){this.fs=e,this.fa=o,this.route=a,this.adminAuthService=h,this.displayedColumns=["company","quantity","totalprice","action"],this.data=[],this.route.paramMap.subscribe(v=>{console.log(v.get("id")),this.category=v.get("id")||""}),this.fa.authState.subscribe(v=>{this.uid=null==v?void 0:v.uid,this.fs.collection("Admin").doc(this.uid).collection("inventory").doc(this.category).collection("purchasehistory").snapshotChanges().subscribe(z=>{console.log(z),this.data=[],z.map($=>{let oe={company:$.payload.doc.id,totalprice:$.payload.doc.data().totalprice,quantity:$.payload.doc.data().quantity,brand:$.payload.doc.data().brand};this.data.push(oe),this.dataSource=new ZS(this.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,console.log(this.data)})})})}ngOnInit(){}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Wh),s.Y36(Zn),s.Y36(Za),s.Y36(rk))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-admin-pur-chase-history-page"]],viewQuery:function(e,o){if(1&e&&(s.Gf(Iw,5),s.Gf(ax,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.paginator=a.first),s.iGM(a=s.CRH())&&(o.sort=a.first)}},decls:32,vars:8,consts:[[1,"title"],["appearance","standard"],[1,"fas","fa-search"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","brand"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","company"],["mat-header-cell","","mat-sort-header","",3,"width",4,"matHeaderCellDef"],["matColumnDef","quantity"],["matColumnDef","totalprice"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(s.TgZ(0,"body"),s._UZ(1,"app-adminnavbarpage"),s.TgZ(2,"h4"),s._uU(3),s.qZA(),s.TgZ(4,"div",0),s.TgZ(5,"mat-form-field",1),s.TgZ(6,"mat-label"),s._UZ(7,"i",2),s._uU(8," Search"),s.qZA(),s.TgZ(9,"input",3,4),s.NdJ("keyup",function(h){return o.applyFilter(h)}),s.qZA(),s.qZA(),s.TgZ(11,"div",5),s.TgZ(12,"table",6),s.ynx(13,7),s.YNc(14,Z5,2,0,"th",8),s.YNc(15,W5,2,1,"td",9),s.ynx(16,10),s.YNc(17,$5,2,2,"th",11),s.YNc(18,X5,5,2,"td",9),s.BQk(),s.BQk(),s.ynx(19,12),s.YNc(20,Q5,2,0,"th",8),s.YNc(21,J5,2,1,"td",9),s.BQk(),s.ynx(22,13),s.YNc(23,K5,2,0,"th",8),s.YNc(24,eG,2,1,"td",9),s.BQk(),s.ynx(25,14),s.YNc(26,tG,2,0,"th",8),s.YNc(27,nG,5,0,"td",9),s.BQk(),s.YNc(28,iG,1,0,"tr",15),s.YNc(29,rG,1,0,"tr",16),s.YNc(30,oG,3,1,"tr",17),s.qZA(),s._UZ(31,"mat-paginator",18),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.hij("Purchase History - ",o.category,""),s.xp6(9),s.Udp("width","100%"),s.Q6J("dataSource",o.dataSource),s.xp6(16),s.Q6J("matHeaderRowDef",o.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",o.displayedColumns),s.xp6(2),s.Q6J("pageSizeOptions",s.DdM(7,sG)))},directives:[Zb,AS,Ew,ok,XA,ax,jS,GS,HS,QA,JA,tk,Iw,YS,S2,qS,cv,KA,ek],styles:["body[_ngcontent-%COMP%]{background:#f5f5f5;margin:0;padding:0}h4[_ngcontent-%COMP%]{margin:20px}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;width:80%;margin:3rem auto auto}mat-form-field[_ngcontent-%COMP%]{width:200px;align-self:flex-end}button[_ngcontent-%COMP%]{margin-right:5px}.mat-sort-header-content[_ngcontent-%COMP%]{justify-content:end}"]}),i})();var bN=nt(3098);function xN(i,t=xl.P){const o=function(i){return i instanceof Date&&!isNaN(+i)}(i)?+i-t.now():Math.abs(i);return a=>a.lift(new cG(o,t))}class cG{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new cP(t,this.delay,this.scheduler))}}class cP extends $o.L{constructor(t,e,o){super(t),this.delay=e,this.scheduler=o,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,o=e.queue,a=t.scheduler,h=t.destination;for(;o.length>0&&o[0].time-a.now()<=0;)o.shift().notification.observe(h);if(o.length>0){const v=Math.max(0,o[0].time-a.now());this.schedule(t,v)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(cP.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,o=new uG(e.now()+this.delay,t);this.queue.push(o),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(bN.P.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(bN.P.createComplete()),this.unsubscribe()}}class uG{constructor(t,e){this.time=t,this.notification=e}}const hG=["mat-menu-item",""],wN=["*"];function dG(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",0),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw()._handleKeydown(a)})("click",function(){return s.CHM(e),s.oxw().closed.emit("click")})("@transformMenu.start",function(a){return s.CHM(e),s.oxw()._onAnimationStart(a)})("@transformMenu.done",function(a){return s.CHM(e),s.oxw()._onAnimationDone(a)}),s.TgZ(1,"div",1),s.Hsn(2),s.qZA(),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),s.uIk("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const uk={transformMenu:As("transformMenu",[ko("void",zn({opacity:0,transform:"scale(0.8)"})),Sr("void => enter",Dr("120ms cubic-bezier(0, 0, 0.2, 1)",zn({opacity:1,transform:"scale(1)"}))),Sr("* => void",Dr("100ms 25ms linear",zn({opacity:0})))]),fadeInItems:As("fadeInItems",[ko("showing",zn({opacity:1})),Sr("void => *",[zn({opacity:0}),Dr("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},CN=new s.OlP("MatMenuContent"),uP=new s.OlP("MAT_MENU_PANEL");class pG{}const fG=bA(m_(pG));let hk=(()=>{class i extends fG{constructor(e,o,a,h){super(),this._elementRef=e,this._focusMonitor=a,this._parentMenu=h,this.role="menuitem",this._hovered=new Bn.xQ,this._focused=new Bn.xQ,this._highlighted=!1,this._triggersSubmenu=!1,h&&h.addItem&&h.addItem(this)}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e,o;const a=this._elementRef.nativeElement.cloneNode(!0),h=a.querySelectorAll("mat-icon, .material-icons");for(let v=0;v<h.length;v++){const k=h[v];null===(e=k.parentNode)||void 0===e||e.removeChild(k)}return(null===(o=a.textContent)||void 0===o?void 0:o.trim())||""}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(wt),s.Y36(eh),s.Y36(uP,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,o){1&e&&s.NdJ("click",function(h){return o._checkDisabled(h)})("mouseenter",function(){return o._handleMouseEnter()}),2&e&&(s.uIk("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled.toString())("disabled",o.disabled||null),s.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",o._highlighted)("mat-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[s.qOj],attrs:hG,ngContentSelectors:wN,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(e,o){1&e&&(s.F$t(),s.Hsn(0),s._UZ(1,"div",0)),2&e&&(s.xp6(1),s.Q6J("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()))},directives:[av],encapsulation:2,changeDetection:0}),i})();const SN=new s.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let _G=0,$S=(()=>{class i{constructor(e,o,a){this._elementRef=e,this._ngZone=o,this._defaultOptions=a,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new s.n_E,this._tabSubscription=ms.w.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Bn.xQ,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new s.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+_G++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=_r(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=_r(e)}set panelClass(e){const o=this._previousPanelClass;o&&o.length&&o.split(" ").forEach(a=>{this._classList[a]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(a=>{this._classList[a]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new iS(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(xs(this._directDescendantItems),Yr(e=>(0,vs.T)(...e.map(o=>o._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(xs(this._directDescendantItems),Yr(o=>(0,vs.T)(...o.map(a=>a._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const o=e.keyCode,a=this._keyManager;switch(o){case 27:La(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===o||40===o)&&a.setFocusOrigin("keyboard"),a.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(ue(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const o=this._keyManager;if(o.setFocusOrigin(e).setFirstItemActive(),!o.activeItem&&this._directDescendantItems.length){let a=this._directDescendantItems.first._getHostElement().parentElement;for(;a;){if("menu"===a.getAttribute("role")){a.focus();break}a=a.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const a=`mat-elevation-z${Math.min(4+e,24)}`,h=Object.keys(this._classList).find(v=>v.startsWith("mat-elevation-z"));(!h||h===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[a]=!0,this._previousElevation=a)}setPositionClasses(e=this.xPosition,o=this.yPosition){const a=this._classList;a["mat-menu-before"]="before"===e,a["mat-menu-after"]="after"===e,a["mat-menu-above"]="above"===o,a["mat-menu-below"]="below"===o}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(xs(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(o=>o._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(SN))},i.\u0275dir=s.lG2({type:i,contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,CN,5),s.Suo(a,hk,5),s.Suo(a,hk,4)),2&e){let h;s.iGM(h=s.CRH())&&(o.lazyContent=h.first),s.iGM(h=s.CRH())&&(o._allItems=h),s.iGM(h=s.CRH())&&(o.items=h)}},viewQuery:function(e,o){if(1&e&&s.Gf(s.Rgc,5),2&e){let a;s.iGM(a=s.CRH())&&(o.templateRef=a.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),i})(),yG=(()=>{class i extends $S{constructor(e,o,a){super(e,o,a)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(SN))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,o){2&e&&s.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[s._Bn([{provide:uP,useExisting:i}]),s.qOj],ngContentSelectors:wN,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,o){1&e&&(s.F$t(),s.YNc(0,dG,3,6,"ng-template"))},directives:[ne],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[uk.transformMenu,uk.fadeInItems]},changeDetection:0}),i})();const EN=new s.OlP("mat-menu-scroll-strategy"),TN={provide:EN,deps:[Bd],useFactory:function(i){return()=>i.scrollStrategies.reposition()}},AN=aw({passive:!0});let bG=(()=>{class i{constructor(e,o,a,h,v,k,z,$){this._overlay=e,this._element=o,this._viewContainerRef=a,this._menuItemInstance=k,this._dir=z,this._focusMonitor=$,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=ms.w.EMPTY,this._hoverSubscription=ms.w.EMPTY,this._menuCloseSubscription=ms.w.EMPTY,this._handleTouchStart=oe=>{aS(oe)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new s.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new s.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=h,this._parentMaterialMenu=v instanceof $S?v:void 0,o.nativeElement.addEventListener("touchstart",this._handleTouchStart,AN),k&&(k._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(o=>{this._destroyMenu(o),("click"===o||"tab"===o)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(o)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,AN),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),o=e.getConfig();this._setPosition(o.positionStrategy),o.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof $S&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,o):this._element.nativeElement.focus(o)}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const o=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,o instanceof $S?(o._resetAnimation(),o.lazyContent?o._animationDone.pipe(w(a=>"void"===a.toState),ue(1),qo(o.lazyContent._attached)).subscribe({next:()=>o.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),o.lazyContent&&o.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,o=this.menu.parentMenu;for(;o;)e++,o=o.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new ES({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(o=>{this.menu.setPositionClasses("start"===o.connectionPair.overlayX?"after":"before","top"===o.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[o,a]="before"===this.menu.xPosition?["end","start"]:["start","end"],[h,v]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[k,z]=[h,v],[$,oe]=[o,a],me=0;this.triggersSubmenu()?(oe=o="before"===this.menu.xPosition?"start":"end",a=$="end"===o?"start":"end",me="bottom"===h?8:-8):this.menu.overlapTrigger||(k="top"===h?"bottom":"top",z="top"===v?"bottom":"top"),e.withPositions([{originX:o,originY:k,overlayX:$,overlayY:h,offsetY:me},{originX:a,originY:k,overlayX:oe,overlayY:h,offsetY:me},{originX:o,originY:z,overlayX:$,overlayY:v,offsetY:-me},{originX:a,originY:z,overlayX:oe,overlayY:v,offsetY:-me}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),o=this._overlayRef.detachments(),a=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,Qn.of)(),h=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(w(v=>v!==this._menuItemInstance),w(()=>this._menuOpen)):(0,Qn.of)();return(0,vs.T)(e,a,h,o)}_handleMousedown(e){sS(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const o=e.keyCode;(13===o||32===o)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===o&&"ltr"===this.dir||37===o&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(w(e=>e===this._menuItemInstance&&!e.disabled),xN(0,bS.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof $S&&this.menu._isAnimating?this.menu._animationDone.pipe(ue(1),xN(0,bS.E),qo(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new uv(this.menu.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Bd),s.Y36(s.SBq),s.Y36(s.s_b),s.Y36(EN),s.Y36(uP,8),s.Y36(hk,10),s.Y36(Xh,8),s.Y36(eh))},i.\u0275dir=s.lG2({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(e,o){1&e&&s.NdJ("mousedown",function(h){return o._handleMousedown(h)})("keydown",function(h){return o._handleKeydown(h)})("click",function(h){return o._handleClick(h)}),2&e&&s.uIk("aria-expanded",o.menuOpen||null)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),i})(),kN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[TN],imports:[Ir]}),i})(),xG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[TN],imports:[[sr,Ir,vS,MS,kN],SS,Ir,kN]}),i})();var wG=nt(205);class DN{}class IN{}class b_{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const o=e.indexOf(":");if(o>0){const a=e.slice(0,o),h=a.toLowerCase(),v=e.slice(o+1).trim();this.maybeSetNormalizedName(a,h),this.headers.has(h)?this.headers.get(h).push(v):this.headers.set(h,[v])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let o=t[e];const a=e.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(a,o),this.maybeSetNormalizedName(e,a))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof b_?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new b_;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof b_?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(t.name,e);const a=("a"===t.op?this.headers.get(e):void 0)||[];a.push(...o),this.headers.set(e,a);break;case"d":const h=t.value;if(h){let v=this.headers.get(e);if(!v)return;v=v.filter(k=>-1===h.indexOf(k)),0===v.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,v)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class CG{encodeKey(t){return PN(t)}encodeValue(t){return PN(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function PN(i){return encodeURIComponent(i).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function RN(i){return`${i}`}class gv{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new CG,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(a=>{const h=a.indexOf("="),[v,k]=-1==h?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,h)),t.decodeValue(a.slice(h+1))],z=e.get(v)||[];z.push(k),e.set(v,z)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const o=t.fromObject[e];this.map.set(e,Array.isArray(o)?o:[o])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(o=>{const a=t[o];Array.isArray(a)?a.forEach(h=>{e.push({param:o,value:h,op:"a"})}):e.push({param:o,value:a,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gv({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(RN(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let o=this.map.get(t.param)||[];const a=o.indexOf(RN(t.value));-1!==a&&o.splice(a,1),o.length>0?this.map.set(t.param,o):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class EG{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function ON(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function FN(i){return"undefined"!=typeof Blob&&i instanceof Blob}function LN(i){return"undefined"!=typeof FormData&&i instanceof FormData}class XS{constructor(t,e,o,a){let h;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==o?o:null,h=a):h=o,h&&(this.reportProgress=!!h.reportProgress,this.withCredentials=!!h.withCredentials,h.responseType&&(this.responseType=h.responseType),h.headers&&(this.headers=h.headers),h.context&&(this.context=h.context),h.params&&(this.params=h.params)),this.headers||(this.headers=new b_),this.context||(this.context=new EG),this.params){const v=this.params.toString();if(0===v.length)this.urlWithParams=e;else{const k=e.indexOf("?");this.urlWithParams=e+(-1===k?"?":k<e.length-1?"&":"")+v}}else this.params=new gv,this.urlWithParams=e}serializeBody(){return null===this.body?null:ON(this.body)||FN(this.body)||LN(this.body)||function(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||LN(this.body)?null:FN(this.body)?this.body.type||null:ON(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const o=t.method||this.method,a=t.url||this.url,h=t.responseType||this.responseType,v=void 0!==t.body?t.body:this.body,k=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,z=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let $=t.headers||this.headers,oe=t.params||this.params;const me=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&($=Object.keys(t.setHeaders).reduce((ke,Fe)=>ke.set(Fe,t.setHeaders[Fe]),$)),t.setParams&&(oe=Object.keys(t.setParams).reduce((ke,Fe)=>ke.set(Fe,t.setParams[Fe]),oe)),new XS(o,a,v,{params:oe,headers:$,context:me,reportProgress:z,responseType:h,withCredentials:k})}}var ll=(()=>((ll=ll||{})[ll.Sent=0]="Sent",ll[ll.UploadProgress=1]="UploadProgress",ll[ll.ResponseHeader=2]="ResponseHeader",ll[ll.DownloadProgress=3]="DownloadProgress",ll[ll.Response=4]="Response",ll[ll.User=5]="User",ll))();class hP{constructor(t,e=200,o="OK"){this.headers=t.headers||new b_,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class dP extends hP{constructor(t={}){super(t),this.type=ll.ResponseHeader}clone(t={}){return new dP({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class dk extends hP{constructor(t={}){super(t),this.type=ll.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new dk({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class NN extends hP{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function pP(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let pk=(()=>{class i{constructor(e){this.handler=e}request(e,o,a={}){let h;if(e instanceof XS)h=e;else{let z,$;z=a.headers instanceof b_?a.headers:new b_(a.headers),a.params&&($=a.params instanceof gv?a.params:new gv({fromObject:a.params})),h=new XS(e,o,void 0!==a.body?a.body:null,{headers:z,context:a.context,params:$,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const v=(0,Qn.of)(h).pipe(ad(z=>this.handler.handle(z)));if(e instanceof XS||"events"===a.observe)return v;const k=v.pipe(w(z=>z instanceof dk));switch(a.observe||"body"){case"body":switch(h.responseType){case"arraybuffer":return k.pipe((0,ri.U)(z=>{if(null!==z.body&&!(z.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return z.body}));case"blob":return k.pipe((0,ri.U)(z=>{if(null!==z.body&&!(z.body instanceof Blob))throw new Error("Response is not a Blob.");return z.body}));case"text":return k.pipe((0,ri.U)(z=>{if(null!==z.body&&"string"!=typeof z.body)throw new Error("Response is not a string.");return z.body}));case"json":default:return k.pipe((0,ri.U)(z=>z.body))}case"response":return k;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:(new gv).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,a={}){return this.request("PATCH",e,pP(a,o))}post(e,o,a={}){return this.request("POST",e,pP(a,o))}put(e,o,a={}){return this.request("PUT",e,pP(a,o))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(DN))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();class BN{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const fP=new s.OlP("HTTP_INTERCEPTORS");let AG=(()=>{class i{intercept(e,o){return o.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const kG=/^\)\]\}',?\n/;let zN=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Gr.y(o=>{const a=this.xhrFactory.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((Fe,je)=>a.setRequestHeader(Fe,je.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Fe=e.detectContentTypeHeader();null!==Fe&&a.setRequestHeader("Content-Type",Fe)}if(e.responseType){const Fe=e.responseType.toLowerCase();a.responseType="json"!==Fe?Fe:"text"}const h=e.serializeBody();let v=null;const k=()=>{if(null!==v)return v;const Fe=1223===a.status?204:a.status,je=a.statusText||"OK",ct=new b_(a.getAllResponseHeaders()),kt=function(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(a)||e.url;return v=new dP({headers:ct,status:Fe,statusText:je,url:kt}),v},z=()=>{let{headers:Fe,status:je,statusText:ct,url:kt}=k(),Qt=null;204!==je&&(Qt=void 0===a.response?a.responseText:a.response),0===je&&(je=Qt?200:0);let Sn=je>=200&&je<300;if("json"===e.responseType&&"string"==typeof Qt){const xn=Qt;Qt=Qt.replace(kG,"");try{Qt=""!==Qt?JSON.parse(Qt):null}catch(Xn){Qt=xn,Sn&&(Sn=!1,Qt={error:Xn,text:Qt})}}Sn?(o.next(new dk({body:Qt,headers:Fe,status:je,statusText:ct,url:kt||void 0})),o.complete()):o.error(new NN({error:Qt,headers:Fe,status:je,statusText:ct,url:kt||void 0}))},$=Fe=>{const{url:je}=k(),ct=new NN({error:Fe,status:a.status||0,statusText:a.statusText||"Unknown Error",url:je||void 0});o.error(ct)};let oe=!1;const me=Fe=>{oe||(o.next(k()),oe=!0);let je={type:ll.DownloadProgress,loaded:Fe.loaded};Fe.lengthComputable&&(je.total=Fe.total),"text"===e.responseType&&!!a.responseText&&(je.partialText=a.responseText),o.next(je)},ke=Fe=>{let je={type:ll.UploadProgress,loaded:Fe.loaded};Fe.lengthComputable&&(je.total=Fe.total),o.next(je)};return a.addEventListener("load",z),a.addEventListener("error",$),a.addEventListener("timeout",$),a.addEventListener("abort",$),e.reportProgress&&(a.addEventListener("progress",me),null!==h&&a.upload&&a.upload.addEventListener("progress",ke)),a.send(h),o.next({type:ll.Sent}),()=>{a.removeEventListener("error",$),a.removeEventListener("abort",$),a.removeEventListener("load",z),a.removeEventListener("timeout",$),e.reportProgress&&(a.removeEventListener("progress",me),null!==h&&a.upload&&a.upload.removeEventListener("progress",ke)),a.readyState!==a.DONE&&a.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Bl))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const mP=new s.OlP("XSRF_COOKIE_NAME"),gP=new s.OlP("XSRF_HEADER_NAME");class VN{}let IG=(()=>{class i{constructor(e,o,a){this.doc=e,this.platform=o,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Y(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(wt),s.LFG(s.Lbi),s.LFG(mP))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),_P=(()=>{class i{constructor(e,o){this.tokenService=e,this.headerName=o}intercept(e,o){const a=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||a.startsWith("http://")||a.startsWith("https://"))return o.handle(e);const h=this.tokenService.getToken();return null!==h&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,h)})),o.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(VN),s.LFG(gP))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),PG=(()=>{class i{constructor(e,o){this.backend=e,this.injector=o,this.chain=null}handle(e){if(null===this.chain){const o=this.injector.get(fP,[]);this.chain=o.reduceRight((a,h)=>new BN(a,h),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(IN),s.LFG(s.zs3))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),RG=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:_P,useClass:AG}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:mP,useValue:e.cookieName}:[],e.headerName?{provide:gP,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[_P,{provide:fP,useExisting:_P,multi:!0},{provide:VN,useClass:IG},{provide:mP,useValue:"XSRF-TOKEN"},{provide:gP,useValue:"X-XSRF-TOKEN"}]}),i})(),OG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[pk,{provide:DN,useClass:PG},zN,{provide:IN,useExisting:zN}],imports:[[RG.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),i})();const FG=["*"];function UN(i){return Error(`Unable to find icon with the name "${i}"`)}function HN(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function GN(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class vx{constructor(t,e,o){this.url=t,this.svgText=e,this.options=o}}let fk=(()=>{class i{constructor(e,o,a,h){this._httpClient=e,this._sanitizer=o,this._errorHandler=h,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=a}addSvgIcon(e,o,a){return this.addSvgIconInNamespace("",e,o,a)}addSvgIconLiteral(e,o,a){return this.addSvgIconLiteralInNamespace("",e,o,a)}addSvgIconInNamespace(e,o,a,h){return this._addSvgIconConfig(e,o,new vx(a,null,h))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,o,a,h){const v=this._sanitizer.sanitize(s.q3G.HTML,a);if(!v)throw GN(a);return this._addSvgIconConfig(e,o,new vx("",v,h))}addSvgIconSet(e,o){return this.addSvgIconSetInNamespace("",e,o)}addSvgIconSetLiteral(e,o){return this.addSvgIconSetLiteralInNamespace("",e,o)}addSvgIconSetInNamespace(e,o,a){return this._addSvgIconSetConfig(e,new vx(o,null,a))}addSvgIconSetLiteralInNamespace(e,o,a){const h=this._sanitizer.sanitize(s.q3G.HTML,o);if(!h)throw GN(o);return this._addSvgIconSetConfig(e,new vx("",h,a))}registerFontClassAlias(e,o=e){return this._fontCssClassesByAlias.set(e,o),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const o=this._sanitizer.sanitize(s.q3G.RESOURCE_URL,e);if(!o)throw HN(e);const a=this._cachedIconsByUrl.get(o);return a?(0,Qn.of)(mk(a)):this._loadSvgIconFromConfig(new vx(e,null)).pipe((0,Go.b)(h=>this._cachedIconsByUrl.set(o,h)),(0,ri.U)(h=>mk(h)))}getNamedSvgIcon(e,o=""){const a=jN(o,e);let h=this._svgIconConfigs.get(a);if(h)return this._getSvgFromConfig(h);if(h=this._getIconConfigFromResolvers(o,e),h)return this._svgIconConfigs.set(a,h),this._getSvgFromConfig(h);const v=this._iconSetConfigs.get(o);return v?this._getSvgFromIconSetConfigs(e,v):(0,wG._)(UN(a))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,Qn.of)(mk(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,ri.U)(o=>mk(o)))}_getSvgFromIconSetConfigs(e,o){const a=this._extractIconWithNameFromAnySet(e,o);return a?(0,Qn.of)(a):BF(o.filter(v=>!v.svgText).map(v=>this._loadSvgIconSetFromConfig(v).pipe(pa(k=>{const $=`Loading icon set URL: ${this._sanitizer.sanitize(s.q3G.RESOURCE_URL,v.url)} failed: ${k.message}`;return this._errorHandler.handleError(new Error($)),(0,Qn.of)(null)})))).pipe((0,ri.U)(()=>{const v=this._extractIconWithNameFromAnySet(e,o);if(!v)throw UN(e);return v}))}_extractIconWithNameFromAnySet(e,o){for(let a=o.length-1;a>=0;a--){const h=o[a];if(h.svgText&&h.svgText.indexOf(e)>-1){const v=this._svgElementFromConfig(h),k=this._extractSvgIconFromSet(v,e,h.options);if(k)return k}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,Go.b)(o=>e.svgText=o),(0,ri.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,Qn.of)(null):this._fetchIcon(e).pipe((0,Go.b)(o=>e.svgText=o))}_extractSvgIconFromSet(e,o,a){const h=e.querySelector(`[id="${o}"]`);if(!h)return null;const v=h.cloneNode(!0);if(v.removeAttribute("id"),"svg"===v.nodeName.toLowerCase())return this._setSvgAttributes(v,a);if("symbol"===v.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(v),a);const k=this._svgElementFromString("<svg></svg>");return k.appendChild(v),this._setSvgAttributes(k,a)}_svgElementFromString(e){const o=this._document.createElement("DIV");o.innerHTML=e;const a=o.querySelector("svg");if(!a)throw Error("<svg> tag not found");return a}_toSvgElement(e){const o=this._svgElementFromString("<svg></svg>"),a=e.attributes;for(let h=0;h<a.length;h++){const{name:v,value:k}=a[h];"id"!==v&&o.setAttribute(v,k)}for(let h=0;h<e.childNodes.length;h++)e.childNodes[h].nodeType===this._document.ELEMENT_NODE&&o.appendChild(e.childNodes[h].cloneNode(!0));return o}_setSvgAttributes(e,o){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),o&&o.viewBox&&e.setAttribute("viewBox",o.viewBox),e}_fetchIcon(e){var o;const{url:a,options:h}=e,v=null!==(o=null==h?void 0:h.withCredentials)&&void 0!==o&&o;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==a)throw Error(`Cannot fetch icon from URL "${a}".`);const k=this._sanitizer.sanitize(s.q3G.RESOURCE_URL,a);if(!k)throw HN(a);const z=this._inProgressUrlFetches.get(k);if(z)return z;const $=this._httpClient.get(k,{responseType:"text",withCredentials:v}).pipe(Os(()=>this._inProgressUrlFetches.delete(k)),(0,Kd.B)());return this._inProgressUrlFetches.set(k,$),$}_addSvgIconConfig(e,o,a){return this._svgIconConfigs.set(jN(e,o),a),this}_addSvgIconSetConfig(e,o){const a=this._iconSetConfigs.get(e);return a?a.push(o):this._iconSetConfigs.set(e,[o]),this}_svgElementFromConfig(e){if(!e.svgElement){const o=this._svgElementFromString(e.svgText);this._setSvgAttributes(o,e.options),e.svgElement=o}return e.svgElement}_getIconConfigFromResolvers(e,o){for(let a=0;a<this._resolvers.length;a++){const h=this._resolvers[a](o,e);if(h)return BG(h)?new vx(h.url,null,h.options):new vx(h,null)}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(pk,8),s.LFG(ps),s.LFG(wt,8),s.LFG(s.qLn))},i.\u0275prov=(0,s.Yz7)({factory:function(){return new i((0,s.LFG)(pk,8),(0,s.LFG)(ps),(0,s.LFG)(wt,8),(0,s.LFG)(s.qLn))},token:i,providedIn:"root"}),i})();function mk(i){return i.cloneNode(!0)}function jN(i,t){return i+":"+t}function BG(i){return!(!i.url||!i.options)}class zG{constructor(t){this._elementRef=t}}const VG=xw(zG),UG=new s.OlP("mat-icon-location",{providedIn:"root",factory:function(){const i=(0,s.f3M)(wt),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),YN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],jG=YN.map(i=>`[${i}]`).join(", "),YG=/^url\(['"]?#(.*?)['"]?\)$/;let yP=(()=>{class i extends VG{constructor(e,o,a,h,v){super(e),this._iconRegistry=o,this._location=h,this._errorHandler=v,this._inline=!1,this._currentIconFetch=ms.w.EMPTY,a||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=_r(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const o=this._cleanupFontValue(e);o!==this._fontSet&&(this._fontSet=o,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const o=this._cleanupFontValue(e);o!==this._fontIcon&&(this._fontIcon=o,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const o=e.split(":");switch(o.length){case 1:return["",o[0]];case 2:return o;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const o=this._location.getPathname();o!==this._previousPath&&(this._previousPath=o,this._prependPathToReferences(o))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const o=e.querySelectorAll("style");for(let h=0;h<o.length;h++)o[h].textContent+=" ";const a=this._location.getPathname();this._previousPath=a,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(a),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let o=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();o--;){const a=e.childNodes[o];(1!==a.nodeType||"svg"===a.nodeName.toLowerCase())&&e.removeChild(a)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,o=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();o!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),o&&e.classList.add(o),this._previousFontSetClass=o),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const o=this._elementsWithExternalReferences;o&&o.forEach((a,h)=>{a.forEach(v=>{h.setAttribute(v.name,`url('${e}#${v.value}')`)})})}_cacheChildrenWithExternalReferences(e){const o=e.querySelectorAll(jG),a=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let h=0;h<o.length;h++)YN.forEach(v=>{const k=o[h],z=k.getAttribute(v),$=z?z.match(YG):null;if($){let oe=a.get(k);oe||(oe=[],a.set(k,oe)),oe.push({name:v,value:$[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[o,a]=this._splitIconName(e);o&&(this._svgNamespace=o),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,o).pipe(ue(1)).subscribe(h=>this._setSvgElement(h),h=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${o}:${a}! ${h.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(fk),s.$8M("aria-hidden"),s.Y36(UG),s.Y36(s.qLn))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,o){2&e&&(s.uIk("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet),s.ekj("mat-icon-inline",o.inline)("mat-icon-no-color","primary"!==o.color&&"accent"!==o.color&&"warn"!==o.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[s.qOj],ngContentSelectors:FG,decls:1,vars:0,template:function(e,o){1&e&&(s.F$t(),s.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i})(),qN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[Ir],Ir]}),i})(),qG=0;class ZG{}const WG=m_(ZG);let $G=(()=>{class i extends WG{constructor(e,o,a,h,v){super(),this._ngZone=e,this._elementRef=o,this._ariaDescriber=a,this._renderer=h,this._animationMode=v,this._hasContent=!1,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=qG++}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=_r(e)}get description(){return this._description}set description(e){if(e!==this._description){const o=this._badgeElement;this._updateHostAriaDescription(e,this._description),this._description=e,o&&(e?o.setAttribute("aria-label",e):o.removeAttribute("aria-label"))}}get hidden(){return this._hidden}set hidden(e){this._hidden=_r(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}ngOnChanges(e){const o=e.content;if(o){const a=o.currentValue;this._hasContent=null!=a&&`${a}`.trim().length>0,this._updateTextContent()}}ngOnDestroy(){const e=this._badgeElement;e&&(this.description&&this._ariaDescriber.removeDescription(e,this.description),this._renderer.destroyNode&&this._renderer.destroyNode(e))}getBadgeElement(){return this._badgeElement}_updateTextContent(){return this._badgeElement?this._badgeElement.textContent=this._stringifyContent():this._badgeElement=this._createBadgeElement(),this._badgeElement}_createBadgeElement(){const e=this._renderer.createElement("span"),o="mat-badge-active",a="mat-badge-content";return this._clearExistingBadges(a),e.setAttribute("id",`mat-badge-content-${this._id}`),e.classList.add(a),e.textContent=this._stringifyContent(),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this.description&&e.setAttribute("aria-label",this.description),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(o)})}):e.classList.add(o),e}_updateHostAriaDescription(e,o){const a=this._updateTextContent();o&&this._ariaDescriber.removeDescription(a,o),e&&this._ariaDescriber.describe(a,e)}_setColor(e){if(e!==this._color){const o=this._elementRef.nativeElement.classList;this._color&&o.remove(`mat-badge-${this._color}`),e&&o.add(`mat-badge-${e}`)}}_clearExistingBadges(e){const o=this._elementRef.nativeElement;let a=o.children.length;for(;a--;){const h=o.children[a];h.classList.contains(e)&&o.removeChild(h)}}_stringifyContent(){const e=this.content;return null==e?"":`${e}`}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(Qb),s.Y36(s.Qsj),s.Y36(th,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,o){2&e&&s.ekj("mat-badge-overlap",o.overlap)("mat-badge-above",o.isAbove())("mat-badge-below",!o.isAbove())("mat-badge-before",!o.isAfter())("mat-badge-after",o.isAfter())("mat-badge-small","small"===o.size)("mat-badge-medium","medium"===o.size)("mat-badge-large","large"===o.size)("mat-badge-hidden",o.hidden||!o._hasContent)("mat-badge-disabled",o.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],position:["matBadgePosition","position"],size:["matBadgeSize","size"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],description:["matBadgeDescription","description"],hidden:["matBadgeHidden","hidden"],content:["matBadge","content"]},features:[s.qOj,s.TTD]}),i})(),XG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[cS,Ir],Ir]}),i})();function QG(i,t){if(1&i&&(s.TgZ(0,"button",32),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.AsE(" ",e.brand," ------\x3e RM",e.price," ")}}function JG(i,t){1&i&&(s.TgZ(0,"button",33),s._uU(1,"View Cart"),s.qZA())}function KG(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",18),s.NdJ("click",function(){const h=s.CHM(e).$implicit;return s.oxw().filterCategory(h)}),s._uU(1),s.qZA()}if(2&i){const e=t.$implicit;s.xp6(1),s.hij(" ",e," ")}}function ej(i,t){1&i&&(s.TgZ(0,"th",34),s._uU(1," Product Name "),s.qZA())}function tj(i,t){if(1&i&&(s.TgZ(0,"td",35),s._uU(1),s._UZ(2,"br"),s._uU(3),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.hij(" ",e.brand," "),s.xp6(2),s.hij(" ",e.compname.compname," ")}}function nj(i,t){1&i&&(s.TgZ(0,"th",34),s._uU(1," Product Name "),s.qZA())}function ij(i,t){1&i&&s._UZ(0,"td",35)}function rj(i,t){1&i&&(s.TgZ(0,"th",34),s._uU(1,"Rating"),s.qZA())}function oj(i,t){if(1&i&&(s.TgZ(0,"td",35),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.rating)}}function sj(i,t){1&i&&(s.TgZ(0,"th",34),s._uU(1,"Price/Item"),s.qZA())}function aj(i,t){if(1&i&&(s.TgZ(0,"td",35),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.price)}}function lj(i,t){1&i&&(s.TgZ(0,"th",34),s._uU(1,"Action"),s.qZA())}function cj(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"td",35),s.TgZ(1,"button",36),s.NdJ("click",function(){const h=s.CHM(e).$implicit;return s.oxw().addtocart(h.brand,h.price,h.compname.compname)}),s._uU(2," Add to Cart "),s.qZA(),s.qZA()}}function uj(i,t){1&i&&s._UZ(0,"tr",37)}function hj(i,t){1&i&&s._UZ(0,"tr",38)}function dj(i,t){if(1&i&&(s.TgZ(0,"tr",39),s.TgZ(1,"td",40),s._uU(2),s.qZA(),s.qZA()),2&i){s.oxw();const e=s.MAs(18);s.xp6(2),s.hij(' No data matching the filter "',e.value,'" ')}}const pj=function(){return[5,10,25,100]};let fj=(()=>{class i{constructor(e){this.fs=e,this.supplierid=[],this.overallmenu=[],this.supplier=[],this.loader=!0,this.cart=[],this.newArray=[],this.status="ONLINE",this.isConnected=!0,this.newCategory=[],this.displayedColumns=["brand","rating","price","action"],this.checkDuplicate=[],this.filter2=[],this.filter3=[],this.quantity=[],this.temp=[],this.isModified=!1,this.fs.collection("Supplier").snapshotChanges().subscribe(o=>{o.map(a=>{let h=a.payload.doc.data();this.fs.collection("Supplier").doc(a.payload.doc.id).collection("menu").snapshotChanges().subscribe(v=>{v.map(k=>{if("added"==k.type){let z={compname:h,brand:k.payload.doc.data().brand,rating:k.payload.doc.data().rating,price:k.payload.doc.data().price,category:k.payload.doc.data().category};this.overallmenu.push(z),this.dataSource=new ZS(this.overallmenu),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}})})})}),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").snapshotChanges().subscribe(o=>{this.filter2=[],this.cartlength=o.length,o.map(a=>{console.log(a);let h={brand:a.payload.doc.id,quantity:a.payload.doc.data().quantity,price:a.payload.doc.data().price};this.filter2.push(h),this.filter3=[...new Set(this.filter2)]})})}ngOnInit(){}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}filter(){for(let e=0;e<this.overallmenu.length;e++)this.newArray.push(this.overallmenu[e].category);this.newCategory=[...new Set(this.newArray)]}filterCategory(e){if(console.log(e),"clear"==e)this.dataSource=new ZS(this.overallmenu),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort;else{let o=this.overallmenu.filter(a=>{if(a.category==e)return a});this.dataSource=new ZS(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}}addtocart(e,o,a){let h=o;const v=o;0==this.filter3.length&&this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e).set({quantity:1,price:v,brand:e,compname:a,totalprice:h});for(let k=0;k<this.filter3.length;k++){let z=[];const $=this.filter3[k];if(this.filter3.filter(oe=>{z.push(oe.brand),this.isExisted=!0}),0==z.includes(e)&&(this.isExisted=!1),$.brand==e){const me=this.filter3[k].quantity+1;console.log(k);const ke=me*v;this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e).update({quantity:me,price:v,brand:e,compname:a,totalprice:ke})}else!1===this.isExisted&&this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e).set({quantity:1,price:v,brand:e,compname:a})}}reload(){window.location.reload()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Wh))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-admin-add-order-page"]],viewQuery:function(e,o){if(1&e&&(s.Gf(Iw,5),s.Gf(ax,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.paginator=a.first),s.iGM(a=s.CRH())&&(o.sort=a.first)}},decls:48,vars:12,consts:[[1,"content"],[1,"combine"],[1,"search"],["mat-button","",3,"matMenuTriggerFor","mouseenter"],["menuTrigger","matMenuTrigger"],["matBadgePosition","after","matBadgeColor","accent",3,"matBadge"],[3,"overlapTrigger"],["menu","matMenu"],[3,"mouseleave"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-raised-button","","routerLink","/admincartpage",4,"ngIf"],["appearance","standard"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"filter"],["mat-button","",3,"matMenuTriggerFor","click"],["category","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[1,"mat-elevation-z8","table"],["mat-table","","matSort","","width","100%",3,"dataSource"],["matColumnDef","brand"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","compname"],["matColumnDef","rating"],["matColumnDef","price"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-menu-item",""],["mat-raised-button","","routerLink","/admincartpage"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){if(1&e){const a=s.EpF();s.TgZ(0,"body"),s._UZ(1,"app-adminnavbarpage"),s.TgZ(2,"div",0),s.TgZ(3,"div",1),s.TgZ(4,"div",2),s.TgZ(5,"button",3,4),s.NdJ("mouseenter",function(){return s.CHM(a),s.MAs(6).openMenu()}),s.TgZ(7,"mat-icon",5),s._uU(8,"shopping_cart"),s.qZA(),s.qZA(),s.TgZ(9,"mat-menu",6,7),s.TgZ(11,"span",8),s.NdJ("mouseleave",function(){return s.CHM(a),s.MAs(6).closeMenu()}),s.YNc(12,QG,2,2,"button",9),s.YNc(13,JG,2,0,"button",10),s.qZA(),s.qZA(),s.TgZ(14,"mat-form-field",11),s.TgZ(15,"mat-label"),s._uU(16,"Search"),s.qZA(),s.TgZ(17,"input",12,13),s.NdJ("keyup",function(v){return o.applyFilter(v)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"div",14),s.TgZ(20,"button",15),s.NdJ("click",function(){return o.filter()}),s._uU(21," Category "),s.qZA(),s.TgZ(22,"mat-menu",null,16),s.YNc(24,KG,2,1,"button",17),s.TgZ(25,"button",18),s.NdJ("click",function(){return o.filterCategory("clear")}),s._uU(26,"Clear"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div",19),s.TgZ(28,"table",20),s.ynx(29,21),s.YNc(30,ej,2,0,"th",22),s.YNc(31,tj,4,2,"td",23),s.ynx(32,24),s.YNc(33,nj,2,0,"th",22),s.YNc(34,ij,1,0,"td",23),s.BQk(),s.BQk(),s.ynx(35,25),s.YNc(36,rj,2,0,"th",22),s.YNc(37,oj,2,1,"td",23),s.BQk(),s.ynx(38,26),s.YNc(39,sj,2,0,"th",22),s.YNc(40,aj,2,1,"td",23),s.BQk(),s.ynx(41,27),s.YNc(42,lj,2,0,"th",22),s.YNc(43,cj,3,0,"td",23),s.BQk(),s.YNc(44,uj,1,0,"tr",28),s.YNc(45,hj,1,0,"tr",29),s.YNc(46,dj,3,1,"tr",30),s.qZA(),s._UZ(47,"mat-paginator",31),s.qZA(),s.qZA(),s.qZA()}if(2&e){const a=s.MAs(10),h=s.MAs(23);s.xp6(5),s.Q6J("matMenuTriggerFor",a),s.xp6(2),s.s9C("matBadge",o.cartlength),s.xp6(2),s.Q6J("overlapTrigger",!1),s.xp6(3),s.Q6J("ngForOf",o.filter3),s.xp6(1),s.Q6J("ngIf",o.filter3.length>0),s.xp6(7),s.Q6J("matMenuTriggerFor",h),s.xp6(4),s.Q6J("ngForOf",o.newCategory),s.xp6(4),s.Q6J("dataSource",o.dataSource),s.xp6(16),s.Q6J("matHeaderRowDef",o.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",o.displayedColumns),s.xp6(2),s.Q6J("pageSizeOptions",s.DdM(11,pj))}},directives:[Zb,cv,bG,yP,$G,yG,Je,Xt,AS,Ew,ok,hk,XA,ax,jS,GS,HS,QA,JA,tk,Iw,df,YS,S2,qS,KA,ek],styles:["mgl-map[_ngcontent-%COMP%]{height:80%;width:50%}.table[_ngcontent-%COMP%]{width:80%;margin:auto}.combine[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.filter[_ngcontent-%COMP%]{order:1;margin-top:1.5rem}.search[_ngcontent-%COMP%]{order:2;margin-left:5rem}"]}),i})(),mj=(()=>{class i{constructor(e,o,a){this.el=e,this.zone=o,this.config=a,this.escape=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!1,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{"hover"===this.getOption("tooltipEvent")?(this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener)):"focus"===this.getOption("tooltipEvent")&&(this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this),this.el.nativeElement.addEventListener("focus",this.focusListener),this.el.nativeElement.addEventListener("blur",this.blurListener))})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({showDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions=Object.assign(Object.assign({},this._tooltipOptions),e.tooltipOptions.currentValue),this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?nn.appendChild(this.container,this.el.nativeElement):nn.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block"}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),nn.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?zd.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&zd.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+nn.getWindowScrollLeft(),top:e.top+nn.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),o=e.left+nn.getOuterWidth(this.el.nativeElement),a=e.top+(nn.getOuterHeight(this.el.nativeElement)-nn.getOuterHeight(this.container))/2;this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=a+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),o=e.left-nn.getOuterWidth(this.container),a=e.top+(nn.getOuterHeight(this.el.nativeElement)-nn.getOuterHeight(this.container))/2;this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=a+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),o=e.left+(nn.getOuterWidth(this.el.nativeElement)-nn.getOuterWidth(this.container))/2,a=e.top-nn.getOuterHeight(this.container);this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=a+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),o=e.left+(nn.getOuterWidth(this.el.nativeElement)-nn.getOuterWidth(this.container))/2,a=e.top+nn.getOuterHeight(this.el.nativeElement);this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=a+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions=Object.assign(Object.assign({},this._tooltipOptions),e)}getOption(e){return this._tooltipOptions[e]}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let o="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?o+" "+this.getOption("tooltipStyleClass"):o}isOutOfBounds(){let e=this.container.getBoundingClientRect(),o=e.top,a=e.left,h=nn.getOuterWidth(this.container),v=nn.getOuterHeight(this.container),k=nn.getViewport();return a+h>k.width||a<0||o<0||o+v>k.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new lk(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){"hover"===this.getOption("tooltipEvent")?(this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener)):"focus"===this.getOption("tooltipEvent")&&(this.el.nativeElement.removeEventListener("focus",this.focusListener),this.el.nativeElement.removeEventListener("blur",this.blurListener)),this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):nn.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&zd.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(mx))},i.\u0275dir=s.lG2({type:i,selectors:[["","pTooltip",""]],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[s.TTD]}),i})(),gj=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr]]}),i})();function _j(i,t){if(1&i&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Oqu(e.label||"empty")}}function yj(i,t){1&i&&s.GkF(0)}const ZN=function(i){return{height:i}},vj=function(i,t){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":t}},vP=function(i){return{$implicit:i}},bj=["container"],xj=["filter"],wj=["in"],Cj=["editableInput"];function Sj(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.label||"empty")}}function Ej(i,t){1&i&&s.GkF(0)}const Tj=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function Mj(i,t){if(1&i&&(s.TgZ(0,"span",12),s.YNc(1,Sj,2,1,"ng-container",13),s.YNc(2,Ej,1,0,"ng-container",14),s.qZA()),2&i){const e=s.oxw();s.Q6J("ngClass",s.VKq(8,Tj,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),s.xp6(1),s.Q6J("ngIf",!e.selectedItemTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",s.VKq(10,vP,e.selectedOption))}}const Aj=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function kj(i,t){if(1&i&&(s.TgZ(0,"span",15),s._uU(1),s.qZA()),2&i){const e=s.oxw();s.Q6J("ngClass",s.VKq(2,Aj,null==e.placeholder||0===e.placeholder.length)),s.xp6(1),s.Oqu(e.placeholder||"empty")}}function Dj(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",16,17),s.NdJ("click",function(){return s.CHM(e),s.oxw().onEditableInputClick()})("input",function(a){return s.CHM(e),s.oxw().onEditableInputChange(a)})("focus",function(a){return s.CHM(e),s.oxw().onEditableInputFocus(a)})("blur",function(a){return s.CHM(e),s.oxw().onInputBlur(a)}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("disabled",e.disabled),s.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function Ij(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"i",18),s.NdJ("click",function(a){return s.CHM(e),s.oxw().clear(a)}),s.qZA()}}function Pj(i,t){1&i&&s.GkF(0)}function Rj(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",26),s.TgZ(1,"div",27),s.NdJ("click",function(a){return a.stopPropagation()}),s.TgZ(2,"input",28,29),s.NdJ("keydown.enter",function(a){return a.preventDefault()})("keydown",function(a){return s.CHM(e),s.oxw(2).onKeydown(a,!1)})("input",function(a){return s.CHM(e),s.oxw(2).onFilterInputChange(a)}),s.qZA(),s._UZ(4,"span",30),s.qZA(),s.qZA()}if(2&i){const e=s.oxw(2);s.xp6(2),s.Q6J("value",e.filterValue||""),s.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)}}function Oj(i,t){if(1&i&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&i){const e=s.oxw().$implicit,o=s.oxw(3);s.xp6(1),s.Oqu(o.getOptionGroupLabel(e)||"empty")}}function Fj(i,t){1&i&&s.GkF(0)}function Lj(i,t){1&i&&s.GkF(0)}const WN=function(i,t){return{$implicit:i,selectedOption:t}};function Nj(i,t){if(1&i&&(s.TgZ(0,"li",32),s.YNc(1,Oj,2,1,"span",13),s.YNc(2,Fj,1,0,"ng-container",14),s.qZA(),s.YNc(3,Lj,1,0,"ng-container",14)),2&i){const e=t.$implicit;s.oxw(2);const o=s.MAs(8),a=s.oxw();s.xp6(1),s.Q6J("ngIf",!a.groupTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",a.groupTemplate)("ngTemplateOutletContext",s.VKq(5,vP,e)),s.xp6(1),s.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",s.WLB(7,WN,a.getOptionGroupChildren(e),a.selectedOption))}}function Bj(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Nj,4,10,"ng-template",31),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",e.optionsToDisplay)}}function zj(i,t){1&i&&s.GkF(0)}function Vj(i,t){if(1&i&&(s.ynx(0),s.YNc(1,zj,1,0,"ng-container",14),s.BQk()),2&i){s.oxw();const e=s.MAs(8),o=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",s.WLB(2,WN,o.optionsToDisplay,o.selectedOption))}}function Uj(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"p-dropdownItem",35),s.NdJ("onClick",function(a){return s.CHM(e),s.oxw(4).onItemClick(a)}),s.qZA()}if(2&i){const e=t.$implicit,o=s.oxw(2).selectedOption,a=s.oxw(2);s.Q6J("option",e)("selected",o==e)("label",a.getOptionLabel(e))("disabled",a.isOptionDisabled(e))("template",a.itemTemplate)}}function Hj(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Uj,1,5,"ng-template",31),s.BQk()),2&i){const e=s.oxw().$implicit;s.xp6(1),s.Q6J("ngForOf",e)}}function Gj(i,t){if(1&i){const e=s.EpF();s.ynx(0),s.TgZ(1,"p-dropdownItem",35),s.NdJ("onClick",function(a){return s.CHM(e),s.oxw(5).onItemClick(a)}),s.qZA(),s.BQk()}if(2&i){const e=t.$implicit,o=s.oxw(3).selectedOption,a=s.oxw(2);s.xp6(1),s.Q6J("option",e)("selected",o==e)("label",a.getOptionLabel(e))("disabled",a.isOptionDisabled(e))("template",a.itemTemplate)}}function jj(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"cdk-virtual-scroll-viewport",37,38),s.NdJ("scrolledIndexChange",function(){return s.CHM(e),s.oxw(4).scrollToSelectedVirtualScrollElement()}),s.YNc(2,Gj,2,5,"ng-container",39),s.qZA()}if(2&i){const e=s.oxw(2).$implicit,o=s.oxw(2);s.Q6J("ngStyle",s.VKq(3,ZN,o.scrollHeight))("itemSize",o.itemSize),s.xp6(2),s.Q6J("cdkVirtualForOf",e)}}function Yj(i,t){if(1&i&&s.YNc(0,jj,3,5,"cdk-virtual-scroll-viewport",36),2&i){const e=s.oxw(3);s.Q6J("ngIf",e.virtualScroll&&e.optionsToDisplay&&e.optionsToDisplay.length)}}function qj(i,t){if(1&i&&(s.YNc(0,Hj,2,1,"ng-container",33),s.YNc(1,Yj,1,1,"ng-template",null,34,s.W1O)),2&i){const e=s.MAs(2),o=s.oxw(2);s.Q6J("ngIf",!o.virtualScroll)("ngIfElse",e)}}function Zj(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(3);s.xp6(1),s.hij(" ",e.emptyFilterMessageLabel," ")}}function Wj(i,t){1&i&&s.GkF(0,null,41)}function $j(i,t){if(1&i&&(s.TgZ(0,"li",40),s.YNc(1,Zj,2,1,"ng-container",33),s.YNc(2,Wj,2,0,"ng-container",20),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),s.xp6(1),s.Q6J("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function Xj(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(3);s.xp6(1),s.hij(" ",e.emptyMessageLabel," ")}}function Qj(i,t){1&i&&s.GkF(0,null,42)}function Jj(i,t){if(1&i&&(s.TgZ(0,"li",40),s.YNc(1,Xj,2,1,"ng-container",33),s.YNc(2,Qj,2,0,"ng-container",20),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),s.xp6(1),s.Q6J("ngTemplateOutlet",e.emptyTemplate)}}function Kj(i,t){1&i&&s.GkF(0)}const eY=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},tY=function(i){return{value:"visible",params:i}},nY=function(i){return{"p-dropdown-virtualscroll":i}};function iY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",19),s.NdJ("click",function(a){return s.CHM(e),s.oxw().onOverlayClick(a)})("@overlayAnimation.start",function(a){return s.CHM(e),s.oxw().onOverlayAnimationStart(a)})("@overlayAnimation.start",function(a){return s.CHM(e),s.oxw().onOverlayAnimationEnd(a)}),s.YNc(1,Pj,1,0,"ng-container",20),s.YNc(2,Rj,5,3,"div",21),s.TgZ(3,"div",22),s.TgZ(4,"ul",23),s.YNc(5,Bj,2,1,"ng-container",13),s.YNc(6,Vj,2,5,"ng-container",13),s.YNc(7,qj,3,2,"ng-template",null,24,s.W1O),s.YNc(9,$j,3,3,"li",25),s.YNc(10,Jj,3,3,"li",25),s.qZA(),s.qZA(),s.YNc(11,Kj,1,0,"ng-container",20),s.qZA()}if(2&i){const e=s.oxw();s.Tol(e.panelStyleClass),s.Q6J("ngClass","p-dropdown-panel p-component")("@overlayAnimation",s.VKq(18,tY,s.WLB(15,eY,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),s.xp6(1),s.Q6J("ngTemplateOutlet",e.headerTemplate),s.xp6(1),s.Q6J("ngIf",e.filter),s.xp6(1),s.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),s.xp6(1),s.Q6J("ngClass",s.VKq(20,nY,e.virtualScroll)),s.xp6(1),s.Q6J("ngIf",e.group),s.xp6(1),s.Q6J("ngIf",!e.group),s.xp6(3),s.Q6J("ngIf",e.filterValue&&e.isEmpty()),s.xp6(1),s.Q6J("ngIf",!e.filterValue&&e.isEmpty()),s.xp6(1),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}const rY=function(i,t,e,o){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":o}},oY={provide:Ll,useExisting:(0,s.Gpc)(()=>$N),multi:!0};let sY=(()=>{class i{constructor(){this.onClick=new s.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-dropdownItem"]],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:14,consts:[["role","option","pRipple","",3,"ngStyle","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(s.TgZ(0,"li",0),s.NdJ("click",function(h){return o.onOptionClick(h)}),s.YNc(1,_j,2,1,"span",1),s.YNc(2,yj,1,0,"ng-container",2),s.qZA()),2&e&&(s.Q6J("ngStyle",s.VKq(7,ZN,o.itemSize+"px"))("ngClass",s.WLB(9,vj,o.selected,o.disabled)),s.uIk("aria-label",o.label)("aria-selected",o.selected),s.xp6(1),s.Q6J("ngIf",!o.template),s.xp6(1),s.Q6J("ngTemplateOutlet",o.template)("ngTemplateOutletContext",s.VKq(12,vP,o.option)))},directives:[WS,or,ne,Xt,No],encapsulation:2}),i})(),$N=(()=>{class i{constructor(e,o,a,h,v,k,z){this.el=e,this.renderer=o,this.cd=a,this.zone=h,this.filterService=v,this.config=k,this.overlayService=z,this.scrollHeight="200px",this.appendTo="body",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new s.vpe,this.onFilter=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onClick=new s.vpe,this.onShow=new s.vpe,this.onHide=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.viewPortOffsetTop=0}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;default:this.itemTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null)}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(sc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(sc.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?Ci.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ci.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ci.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?Ci.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ci.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const o=e.option;this.isOptionDisabled(o)||(this.selectItem(e,o),this.accessibleViewChild.nativeElement.focus()),setTimeout(()=>{this.hide()},150)}selectItem(e,o){this.selectedOption!=o&&(this.selectedOption=o,this.value=this.getOptionValue(o),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e.originalEvent,value:this.value}),this.virtualScroll&&setTimeout(()=>{this.viewPortOffsetTop=this.viewPort?this.viewPort.measureScrollOffset():0},1))}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.virtualScroll&&this.updateVirtualScrollSelectedIndex(!0),this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){if(this.virtualScroll&&this.viewPort){let o=this.viewPort.getRenderedRange();this.updateVirtualScrollSelectedIndex(!1),(o.start>this.virtualScrollSelectedIndex||o.end<this.virtualScrollSelectedIndex)&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)}nn.findSingle(this.overlay,"li.p-highlight")&&nn.scrollInView(this.itemsWrapper,nn.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1}}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.optionsToDisplay[0]),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus(),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return nn.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=nn.findSingle(this.overlay,this.virtualScroll?".cdk-virtual-scroll-viewport":".p-dropdown-items-wrapper"),this.appendOverlay(),this.autoZIndex&&zd.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length&&!this.virtualScroll){let a=nn.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");a&&nn.scrollInView(this.itemsWrapper,a)}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){switch(e.toState){case"void":zd.clear(e.element)}}scrollToSelectedVirtualScrollElement(){this.virtualAutoScrolled||(this.viewPortOffsetTop?this.viewPort.scrollToOffset(this.viewPortOffsetTop):this.virtualScrollSelectedIndex>-1&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)),this.virtualAutoScrolled=!0}updateVirtualScrollSelectedIndex(e){this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&(e&&(this.viewPortOffsetTop=0),this.virtualScrollSelectedIndex=this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay))}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):nn.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=nn.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.virtualScroll&&(this.virtualAutoScrolled=!1),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?nn.absolutePosition(this.overlay,this.containerViewChild.nativeElement):nn.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let o;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let a=e-1;0<=a;a--){let h=this.optionsToDisplay[a];if(!h.disabled){o=h;break}}if(!o)for(let a=this.optionsToDisplay.length-1;a>=e;a--){let h=this.optionsToDisplay[a];if(!this.isOptionDisabled(h)){o=h;break}}}return o}findNextEnabledOption(e){let o;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let a=e+1;a<this.optionsToDisplay.length;a++){let h=this.optionsToDisplay[a];if(!this.isOptionDisabled(h)){o=h;break}}if(!o)for(let a=0;a<e;a++){let h=this.optionsToDisplay[a];if(!this.isOptionDisabled(h)){o=h;break}}}return o}onKeydown(e,o){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let a=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==a){let h=a.itemIndex+1;h<this.getOptionGroupChildren(this.optionsToDisplay[a.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[a.groupIndex])[h]),this.selectedOptionUpdated=!0):this.optionsToDisplay[a.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[a.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let a=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,h=this.findNextEnabledOption(a);h&&(this.selectItem(e,h),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let a=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==a){let h=a.itemIndex-1;if(h>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[a.groupIndex])[h]),this.selectedOptionUpdated=!0;else if(h<0){let v=this.optionsToDisplay[a.groupIndex-1];v&&(this.selectItem(e,this.getOptionGroupChildren(v)[this.getOptionGroupChildren(v).length-1]),this.selectedOptionUpdated=!0)}}}else{let a=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,h=this.findPrevEnabledOption(a);h&&(this.selectItem(e,h),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 13:(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)&&this.hide(),e.preventDefault();break;case 27:case 9:this.hide();break;default:o&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const o=e.key;let a;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=o,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+o:o,this.group){let h=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};a=this.searchOptionWithinGroup(h)}else{let h=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;a=this.searchOption(++h)}a&&!this.isOptionDisabled(a)&&(this.selectItem(e,a),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let o;return this.searchValue&&(o=this.searchOptionInRange(e,this.optionsToDisplay.length),o||(o=this.searchOptionInRange(0,e))),o}searchOptionInRange(e,o){for(let a=e;a<o;a++){let h=this.optionsToDisplay[a];if(this.getOptionLabel(h).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(h))return h}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let a=e.groupIndex;a<this.optionsToDisplay.length;a++)for(let h=e.groupIndex===a?e.itemIndex+1:0;h<this.getOptionGroupChildren(this.optionsToDisplay[a]).length;h++){let v=this.getOptionGroupChildren(this.optionsToDisplay[a])[h];if(this.getOptionLabel(v).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(v))return v}for(let a=0;a<=e.groupIndex;a++)for(let h=0;h<(e.groupIndex===a?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[a]).length);h++){let v=this.getOptionGroupChildren(this.optionsToDisplay[a])[h];if(this.getOptionLabel(v).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(v))return v}}return null}findOptionIndex(e,o){let a=-1;if(o)for(let h=0;h<o.length;h++)if(null==e&&null==this.getOptionValue(o[h])||Ci.equals(e,this.getOptionValue(o[h]),this.dataKey)){a=h;break}return a}findOptionGroupIndex(e,o){let a,h;if(o)for(let v=0;v<o.length&&(a=v,h=this.findOptionIndex(e,this.getOptionGroupChildren(o[v])),-1===h);v++);return-1!==h?{groupIndex:a,itemIndex:h}:-1}findOption(e,o,a){if(this.group&&!a){let h;if(o&&o.length)for(let v of o)if(h=this.findOption(e,this.getOptionGroupChildren(v),!0),h)break;return h}{let h=this.findOptionIndex(e,o);return-1!=h?o[h]:null}}onFilterInputChange(e){let o=e.target.value;o&&o.length?(this._filterValue=o,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let o=[];for(let a of this.options){let h=this.filterService.filter(this.getOptionGroupChildren(a),e,this.filterValue,this.filterMatchMode,this.filterLocale);h&&h.length&&o.push(Object.assign(Object.assign({},a),{[this.optionGroupChildren]:h}))}this.optionsToDisplay=o}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?nn.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():nn.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",o=>{this.isOutsideClicked(o)&&(this.hide(),this.unbindDocumentClickListener()),this.cd.markForCheck()}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){nn.isAndroid()||this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new lk(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&zd.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(iN),s.Y36(mx),s.Y36(ik))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-dropdown"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,gx,4),2&e){let h;s.iGM(h=s.CRH())&&(o.templates=h)}},viewQuery:function(e,o){if(1&e&&(s.Gf(bj,5),s.Gf(xj,5),s.Gf(wj,5),s.Gf(CS,5),s.Gf(Cj,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.containerViewChild=a.first),s.iGM(a=s.CRH())&&(o.filterViewChild=a.first),s.iGM(a=s.CRH())&&(o.accessibleViewChild=a.first),s.iGM(a=s.CRH())&&(o.viewPort=a.first),s.iGM(a=s.CRH())&&(o.editableInputViewChild=a.first)}},hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focused||o.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",virtualScroll:"virtualScroll",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide"},features:[s._Bn([oY])],decls:12,vars:22,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox",3,"disabled","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",4,"ngIf"],[1,"p-dropdown-items-wrapper"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["itemslist",""],["class","p-dropdown-empty-message",4,"ngIf"],[1,"p-dropdown-header"],[1,"p-dropdown-filter-container",3,"click"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],[3,"option","selected","label","disabled","template","onClick"],[3,"ngStyle","itemSize","scrolledIndexChange",4,"ngIf"],[3,"ngStyle","itemSize","scrolledIndexChange"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"p-dropdown-empty-message"],["emptyFilter",""],["empty",""]],template:function(e,o){1&e&&(s.TgZ(0,"div",0,1),s.NdJ("click",function(h){return o.onMouseclick(h)}),s.TgZ(2,"div",2),s.TgZ(3,"input",3,4),s.NdJ("focus",function(h){return o.onInputFocus(h)})("blur",function(h){return o.onInputBlur(h)})("keydown",function(h){return o.onKeydown(h,!0)}),s.qZA(),s.qZA(),s.YNc(5,Mj,3,12,"span",5),s.YNc(6,kj,2,4,"span",6),s.YNc(7,Dj,2,4,"input",7),s.YNc(8,Ij,1,0,"i",8),s.TgZ(9,"div",9),s._UZ(10,"span",10),s.qZA(),s.YNc(11,iY,12,22,"div",11),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",s.l5B(17,rY,o.disabled,o.overlayVisible,o.focused,o.showClear&&!o.disabled))("ngStyle",o.style),s.xp6(3),s.Q6J("disabled",o.disabled),s.uIk("id",o.inputId)("aria-expanded",o.overlayVisible)("aria-labelledby",o.ariaLabelledBy)("tabindex",o.tabindex)("autofocus",o.autofocus),s.xp6(2),s.Q6J("ngIf",!o.editable&&null!=o.label),s.xp6(1),s.Q6J("ngIf",!o.editable&&null==o.label),s.xp6(1),s.Q6J("ngIf",o.editable),s.xp6(1),s.Q6J("ngIf",null!=o.value&&o.showClear&&!o.disabled),s.xp6(1),s.uIk("aria-expanded",o.overlayVisible),s.xp6(1),s.Q6J("ngClass",o.dropdownIcon),s.xp6(1),s.Q6J("ngIf",o.overlayVisible))},directives:[ne,or,Xt,mj,No,Je,sY,CS,fF,_F],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}"],encapsulation:2,data:{animation:[As("overlayAnimation",[Sr(":enter",[zn({opacity:0,transform:"scaleY(0.8)"}),Dr("{{showTransitionParams}}")]),Sr(":leave",[Dr("{{hideTransitionParams}}",zn({opacity:0}))])])]},changeDetection:0}),i})(),bP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,Wm,cx,gj,_x],Wm,cx]}),i})();function aY(i,t){1&i&&s.GkF(0)}const xP=function(i){return{$implicit:i}};function lY(i,t){if(1&i&&(s.TgZ(0,"div",14),s.YNc(1,aY,1,0,"ng-container",15),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",s.VKq(2,xP,e.paginatorState))}}function cY(i,t){if(1&i&&(s.TgZ(0,"span",16),s._uU(1),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.currentPageReport)}}const gk=function(i){return{"p-disabled":i}};function uY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",17),s.NdJ("click",function(a){return s.CHM(e),s.oxw(2).changePageToFirst(a)}),s._UZ(1,"span",18),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("disabled",e.isFirstPage())("ngClass",s.VKq(2,gk,e.isFirstPage()))}}const hY=function(i){return{"p-highlight":i}};function dY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",21),s.NdJ("click",function(a){const v=s.CHM(e).$implicit;return s.oxw(3).onPageLinkClick(a,v-1)}),s._uU(1),s.qZA()}if(2&i){const e=t.$implicit,o=s.oxw(3);s.Q6J("ngClass",s.VKq(2,hY,e-1==o.getPage())),s.xp6(1),s.Oqu(e)}}function pY(i,t){if(1&i&&(s.TgZ(0,"span",19),s.YNc(1,dY,2,4,"button",20),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",e.pageLinks)}}function fY(i,t){if(1&i&&s._uU(0),2&i){const e=s.oxw(3);s.Oqu(e.currentPageReport)}}function mY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"p-dropdown",22),s.NdJ("onChange",function(a){return s.CHM(e),s.oxw(2).onPageDropdownChange(a)}),s.YNc(1,fY,1,1,"ng-template",23),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("options",e.pageItems)("ngModel",e.getPage())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function gY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",24),s.NdJ("click",function(a){return s.CHM(e),s.oxw(2).changePageToLast(a)}),s._UZ(1,"span",25),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("disabled",e.isLastPage())("ngClass",s.VKq(2,gk,e.isLastPage()))}}function _Y(i,t){1&i&&s.GkF(0)}function yY(i,t){if(1&i&&s.YNc(0,_Y,1,0,"ng-container",15),2&i){const e=t.$implicit,o=s.oxw(4);s.Q6J("ngTemplateOutlet",o.dropdownItemTemplate)("ngTemplateOutletContext",s.VKq(2,xP,e))}}function vY(i,t){1&i&&(s.ynx(0),s.YNc(1,yY,1,4,"ng-template",28),s.BQk())}function bY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"p-dropdown",26),s.NdJ("ngModelChange",function(a){return s.CHM(e),s.oxw(2).rows=a})("onChange",function(a){return s.CHM(e),s.oxw(2).onRppChange(a)}),s.YNc(1,vY,2,0,"ng-container",27),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("options",e.rowsPerPageItems)("ngModel",e.rows)("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),s.xp6(1),s.Q6J("ngIf",e.dropdownItemTemplate)}}function xY(i,t){1&i&&s.GkF(0)}function wY(i,t){if(1&i&&(s.TgZ(0,"div",29),s.YNc(1,xY,1,0,"ng-container",15),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",s.VKq(2,xP,e.paginatorState))}}function CY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",1),s.YNc(1,lY,2,4,"div",2),s.YNc(2,cY,2,1,"span",3),s.YNc(3,uY,2,4,"button",4),s.TgZ(4,"button",5),s.NdJ("click",function(a){return s.CHM(e),s.oxw().changePageToPrev(a)}),s._UZ(5,"span",6),s.qZA(),s.YNc(6,pY,2,1,"span",7),s.YNc(7,mY,2,4,"p-dropdown",8),s.TgZ(8,"button",9),s.NdJ("click",function(a){return s.CHM(e),s.oxw().changePageToNext(a)}),s._UZ(9,"span",10),s.qZA(),s.YNc(10,gY,2,4,"button",11),s.YNc(11,bY,2,5,"p-dropdown",12),s.YNc(12,wY,2,4,"div",13),s.qZA()}if(2&i){const e=s.oxw();s.Tol(e.styleClass),s.Q6J("ngStyle",e.style)("ngClass","p-paginator p-component"),s.xp6(1),s.Q6J("ngIf",e.templateLeft),s.xp6(1),s.Q6J("ngIf",e.showCurrentPageReport),s.xp6(1),s.Q6J("ngIf",e.showFirstLastIcon),s.xp6(1),s.Q6J("disabled",e.isFirstPage())("ngClass",s.VKq(16,gk,e.isFirstPage())),s.xp6(2),s.Q6J("ngIf",e.showPageLinks),s.xp6(1),s.Q6J("ngIf",e.showJumpToPageDropdown),s.xp6(1),s.Q6J("disabled",e.isLastPage())("ngClass",s.VKq(18,gk,e.isLastPage())),s.xp6(2),s.Q6J("ngIf",e.showFirstLastIcon),s.xp6(1),s.Q6J("ngIf",e.rowsPerPageOptions),s.xp6(1),s.Q6J("ngIf",e.templateRight)}}let SY=(()=>{class i{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new s.vpe,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)||1}calculatePageLinkBoundaries(){let e=this.getPageCount(),o=Math.min(this.pageLinkSize,e),a=Math.max(0,Math.ceil(this.getPage()-o/2)),h=Math.min(e-1,a+o-1);return a=Math.max(0,a-(this.pageLinkSize-(h-a+1))),[a,h]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),a=e[1];for(let h=e[0];h<=a;h++)this.pageLinks.push(h+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let h=0;h<this.getPageCount();h++)this.pageItems.push({label:String(h+1),value:h})}}changePage(e){var o=this.getPageCount();if(e>=0&&e<o){this._first=this.rows*e;var a={page:e,first:this.first,rows:this.rows,pageCount:o};this.updatePageLinks(),this.onPageChange.emit(a),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,o){this.changePage(o),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.getPage()+1)).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-paginator"]],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[s.TTD],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,o){1&e&&s.YNc(0,CY,13,20,"div",0),2&e&&s.Q6J("ngIf",!!o.alwaysShow||o.pageLinks&&o.pageLinks.length>1)},directives:[Xt,or,ne,WS,No,Je,$N,fx,LS,gx],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-current,.p-paginator-first,.p-paginator-last,.p-paginator-next,.p-paginator-page,.p-paginator-prev{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}"],encapsulation:2,changeDetection:0}),i})(),EY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,bP,BA,Wm,_x],bP,BA,Wm]}),i})(),XN=(()=>{class i{constructor(e,o){this.el=e,this.ngModel=o}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(LS,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","pInputText",""]],hostVars:6,hostBindings:function(e,o){1&e&&s.NdJ("input",function(h){return o.onInput(h)}),2&e&&s.ekj("p-inputtext",!0)("p-component",!0)("p-filled",o.filled)}}),i})(),wP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr]]}),i})();function TY(i,t){if(1&i&&s._UZ(0,"span",8),2&i){const e=s.oxw(2).$implicit;s.Tol(e.icon),s.Q6J("ngClass","p-button-icon p-button-icon-left")}}function MY(i,t){if(1&i&&(s.ynx(0),s.YNc(1,TY,1,3,"span",6),s.TgZ(2,"span",7),s._uU(3),s.qZA(),s.BQk()),2&i){const e=s.oxw().$implicit,o=s.oxw();s.xp6(1),s.Q6J("ngIf",e.icon),s.xp6(2),s.Oqu(o.getOptionLabel(e))}}function AY(i,t){1&i&&s.GkF(0)}const kY=function(i,t){return{$implicit:i,index:t}};function DY(i,t){if(1&i&&s.YNc(0,AY,1,0,"ng-container",9),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw();s.Q6J("ngTemplateOutlet",h.itemTemplate)("ngTemplateOutletContext",s.WLB(2,kY,o,a))}}const IY=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-button-icon-only":e}};function PY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",2,3),s.NdJ("click",function(a){const h=s.CHM(e),v=h.$implicit,k=h.index;return s.oxw().onItemClick(a,v,k)})("keydown.enter",function(a){const h=s.CHM(e),v=h.$implicit,k=h.index;return s.oxw().onItemClick(a,v,k)})("blur",function(){return s.CHM(e),s.oxw().onBlur()}),s.YNc(2,MY,4,2,"ng-container",4),s.YNc(3,DY,1,5,"ng-template",null,5,s.W1O),s.qZA()}if(2&i){const e=t.$implicit,o=s.MAs(4),a=s.oxw();s.Tol(e.styleClass),s.Q6J("ngClass",s.kEZ(10,IY,a.isSelected(e),a.disabled||a.isOptionDisabled(e),e.icon&&!a.getOptionLabel(e))),s.uIk("aria-pressed",a.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",a.disabled?null:a.tabindex)("aria-labelledby",a.getOptionLabel(e)),s.xp6(2),s.Q6J("ngIf",!a.itemTemplate)("ngIfElse",o)}}const RY={provide:Ll,useExisting:(0,s.Gpc)(()=>OY),multi:!0};let OY=(()=>{class i{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new s.vpe,this.onChange=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?Ci.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ci.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ci.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,o,a){this.disabled||this.isOptionDisabled(o)||(this.multiple?this.isSelected(o)?this.removeOption(o):this.value=[...this.value||[],this.getOptionValue(o)]:this.value=this.getOptionValue(o),this.onOptionClick.emit({originalEvent:e,option:o,index:a}),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(o=>!Ci.equals(o,this.getOptionValue(e),this.dataKey))}isSelected(e){let o=!1,a=this.getOptionValue(e);if(this.multiple){if(this.value)for(let h of this.value)if(Ci.equals(h,a,this.dataKey)){o=!0;break}}else o=Ci.equals(this.getOptionValue(e),this.value,this.dataKey);return o}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-selectButton"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,s.Rgc,5),2&e){let h;s.iGM(h=s.CRH())&&(o.itemTemplate=h.first)}},inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[s._Bn([RY])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.YNc(1,PY,5,14,"div",1),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",o.style),s.xp6(1),s.Q6J("ngForOf",o.options))},directives:[ne,or,Je,WS,Xt,No],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}.p-button-label{transition:all .2s}"],encapsulation:2,changeDetection:0}),i})(),FY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,_x]]}),i})();const LY=function(i,t,e){return{"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function NY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"label",7),s.NdJ("click",function(a){s.CHM(e);const h=s.oxw(),v=s.MAs(3);return h.onClick(a,v)}),s._uU(1),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("ngClass",s.kEZ(3,LY,null!=e.value,e.disabled,e.focused)),s.uIk("for",e.inputId),s.xp6(1),s.Oqu(e.label)}}const BY=function(i,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":t}},zY=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},VY={provide:Ll,useExisting:(0,s.Gpc)(()=>UY),multi:!0};let UY=(()=>{class i{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,o){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,o.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-triStateCheckbox"]],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[s._Bn([VY])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,o){if(1&e){const a=s.EpF();s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"input",2,3),s.NdJ("keyup",function(v){return o.onKeyup(v)})("keydown",function(v){return o.onKeydown(v)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),s.qZA(),s.qZA(),s.TgZ(4,"div",4),s.NdJ("click",function(v){s.CHM(a);const k=s.MAs(3);return o.onClick(v,k)}),s._UZ(5,"span",5),s.qZA(),s.qZA(),s.YNc(6,NY,2,7,"label",6)}2&e&&(s.Tol(o.styleClass),s.Q6J("ngStyle",o.style)("ngClass",s.WLB(14,BY,o.disabled,o.focused)),s.xp6(2),s.Q6J("name",o.name)("readonly",o.readonly)("disabled",o.disabled),s.uIk("id",o.inputId)("tabindex",o.tabindex)("aria-labelledby",o.ariaLabelledBy),s.xp6(2),s.Q6J("ngClass",s.kEZ(17,zY,null!=o.value,o.disabled,o.focused)),s.uIk("aria-checked",!0===o.value),s.xp6(1),s.Q6J("ngClass",!0===o.value?o.checkboxTrueIcon:!1===o.value?o.checkboxFalseIcon:""),s.xp6(1),s.Q6J("ngIf",o.label))},directives:[or,ne,Xt],encapsulation:2,changeDetection:0}),i})(),HY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr]]}),i})();const GY=["container"],jY=["inputfield"],YY=["contentWrapper"];function qY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(a){s.CHM(e),s.oxw();const h=s.MAs(1);return s.oxw().onButtonClick(a,h)}),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("icon",e.icon)("disabled",e.disabled)}}function ZY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",4,5),s.NdJ("focus",function(a){return s.CHM(e),s.oxw().onInputFocus(a)})("keydown",function(a){return s.CHM(e),s.oxw().onInputKeydown(a)})("click",function(){return s.CHM(e),s.oxw().onInputClick()})("blur",function(a){return s.CHM(e),s.oxw().onInputBlur(a)})("input",function(a){return s.CHM(e),s.oxw().onUserInput(a)}),s.qZA(),s.YNc(2,qY,1,2,"button",6)}if(2&i){const e=s.oxw();s.Tol(e.inputStyleClass),s.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),s.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),s.xp6(2),s.Q6J("ngIf",e.showIcon)}}function WY(i,t){1&i&&s.GkF(0)}function $Y(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",27),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(4).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(4).onPrevButtonClick(a)}),s._UZ(1,"span",28),s.qZA()}}function XY(i,t){if(1&i&&(s.TgZ(0,"span",29),s._uU(1),s.qZA()),2&i){const e=s.oxw().$implicit,o=s.oxw(3);s.xp6(1),s.Oqu(o.getTranslation("monthNames")[e.month])}}function QY(i,t){if(1&i&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&i){const e=t.$implicit,o=t.index,a=s.oxw(2).$implicit;s.Q6J("value",o)("selected",o===a.month),s.xp6(1),s.Oqu(e)}}function JY(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"select",30),s.NdJ("change",function(a){return s.CHM(e),s.oxw(4).onMonthDropdownChange(a.target.value)}),s.YNc(1,QY,2,3,"option",31),s.qZA()}if(2&i){const e=s.oxw(4);s.xp6(1),s.Q6J("ngForOf",e.getTranslation("monthNames"))}}function KY(i,t){if(1&i&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&i){const e=t.$implicit,o=s.oxw(5);s.Q6J("value",e)("selected",e===o.currentYear),s.xp6(1),s.Oqu(e)}}function eq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"select",33),s.NdJ("change",function(a){return s.CHM(e),s.oxw(4).onYearDropdownChange(a.target.value)}),s.YNc(1,KY,2,3,"option",31),s.qZA()}if(2&i){const e=s.oxw(4);s.xp6(1),s.Q6J("ngForOf",e.yearOptions)}}function tq(i,t){if(1&i&&(s.TgZ(0,"span",34),s._uU(1),s.qZA()),2&i){const e=s.oxw().$implicit,o=s.oxw(3);s.xp6(1),s.Oqu("month"===o.view?o.currentYear:e.year)}}function nq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",35),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(4).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(4).onNextButtonClick(a)}),s._UZ(1,"span",36),s.qZA()}}function iq(i,t){if(1&i&&(s.TgZ(0,"th",42),s.TgZ(1,"span"),s._uU(2),s.qZA(),s.qZA()),2&i){const e=s.oxw(5);s.xp6(2),s.Oqu(e.getTranslation("weekHeader"))}}function rq(i,t){if(1&i&&(s.TgZ(0,"th",43),s.TgZ(1,"span"),s._uU(2),s.qZA(),s.qZA()),2&i){const e=t.$implicit;s.xp6(2),s.Oqu(e)}}function oq(i,t){if(1&i&&(s.TgZ(0,"td",46),s.TgZ(1,"span",47),s._uU(2),s.qZA(),s.qZA()),2&i){const e=s.oxw().index,o=s.oxw(2).$implicit;s.xp6(2),s.hij(" ",o.weekNumbers[e]," ")}}function sq(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2).$implicit;s.xp6(1),s.Oqu(e.day)}}function aq(i,t){1&i&&s.GkF(0)}const QN=function(i,t){return{"p-highlight":i,"p-disabled":t}},lq=function(i){return{$implicit:i}};function cq(i,t){if(1&i){const e=s.EpF();s.ynx(0),s.TgZ(1,"span",49),s.NdJ("click",function(a){s.CHM(e);const h=s.oxw().$implicit;return s.oxw(6).onDateSelect(a,h)})("keydown",function(a){s.CHM(e);const h=s.oxw().$implicit,v=s.oxw(3).index;return s.oxw(3).onDateCellKeydown(a,h,v)}),s.YNc(2,sq,2,1,"ng-container",11),s.YNc(3,aq,1,0,"ng-container",50),s.qZA(),s.BQk()}if(2&i){const e=s.oxw().$implicit,o=s.oxw(6);s.xp6(1),s.Q6J("ngClass",s.WLB(4,QN,o.isSelected(e),!e.selectable)),s.xp6(1),s.Q6J("ngIf",!o.dateTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",o.dateTemplate)("ngTemplateOutletContext",s.VKq(7,lq,e))}}const uq=function(i,t){return{"p-datepicker-other-month":i,"p-datepicker-today":t}};function hq(i,t){if(1&i&&(s.TgZ(0,"td",48),s.YNc(1,cq,4,9,"ng-container",11),s.qZA()),2&i){const e=t.$implicit,o=s.oxw(6);s.Q6J("ngClass",s.WLB(2,uq,e.otherMonth,e.today)),s.xp6(1),s.Q6J("ngIf",!e.otherMonth||o.showOtherMonths)}}function dq(i,t){if(1&i&&(s.TgZ(0,"tr"),s.YNc(1,oq,3,1,"td",44),s.YNc(2,hq,2,5,"td",45),s.qZA()),2&i){const e=t.$implicit,o=s.oxw(5);s.xp6(1),s.Q6J("ngIf",o.showWeek),s.xp6(1),s.Q6J("ngForOf",e)}}function pq(i,t){if(1&i&&(s.TgZ(0,"div",37),s.TgZ(1,"table",38),s.TgZ(2,"thead"),s.TgZ(3,"tr"),s.YNc(4,iq,3,1,"th",39),s.YNc(5,rq,3,1,"th",40),s.qZA(),s.qZA(),s.TgZ(6,"tbody"),s.YNc(7,dq,3,2,"tr",41),s.qZA(),s.qZA(),s.qZA()),2&i){const e=s.oxw().$implicit,o=s.oxw(3);s.xp6(4),s.Q6J("ngIf",o.showWeek),s.xp6(1),s.Q6J("ngForOf",o.weekDays),s.xp6(2),s.Q6J("ngForOf",e.dates)}}function fq(i,t){if(1&i&&(s.TgZ(0,"div",17),s.TgZ(1,"div",18),s.YNc(2,$Y,2,0,"button",19),s.TgZ(3,"div",20),s.YNc(4,XY,2,1,"span",21),s.YNc(5,JY,2,1,"select",22),s.YNc(6,eq,2,1,"select",23),s.YNc(7,tq,2,1,"span",24),s.qZA(),s.YNc(8,nq,2,0,"button",25),s.qZA(),s.YNc(9,pq,8,3,"div",26),s.qZA()),2&i){const e=t.index,o=s.oxw(3);s.xp6(2),s.Q6J("ngIf",0===e),s.xp6(2),s.Q6J("ngIf",!o.monthNavigator&&"month"!==o.view),s.xp6(1),s.Q6J("ngIf",o.monthNavigator&&"month"!==o.view&&1===o.numberOfMonths),s.xp6(1),s.Q6J("ngIf",o.yearNavigator&&1===o.numberOfMonths),s.xp6(1),s.Q6J("ngIf",!o.yearNavigator),s.xp6(1),s.Q6J("ngIf",1===o.numberOfMonths||e===o.numberOfMonths-1),s.xp6(1),s.Q6J("ngIf","date"===o.view)}}function mq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"span",53),s.NdJ("click",function(a){const v=s.CHM(e).index;return s.oxw(4).onMonthSelect(a,v)})("keydown",function(a){const v=s.CHM(e).index;return s.oxw(4).onMonthCellKeydown(a,v)}),s._uU(1),s.qZA()}if(2&i){const e=t.$implicit,o=t.index,a=s.oxw(4);s.Q6J("ngClass",s.WLB(2,QN,a.isMonthSelected(o),!a.isSelectable(1,o,a.currentYear,!1))),s.xp6(1),s.hij(" ",e," ")}}function gq(i,t){if(1&i&&(s.TgZ(0,"div",51),s.YNc(1,mq,2,5,"span",52),s.qZA()),2&i){const e=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",e.monthPickerValues)}}function _q(i,t){if(1&i&&(s.ynx(0),s.TgZ(1,"div",14),s.YNc(2,fq,10,7,"div",15),s.qZA(),s.YNc(3,gq,2,1,"div",16),s.BQk()),2&i){const e=s.oxw(2);s.xp6(2),s.Q6J("ngForOf",e.months),s.xp6(1),s.Q6J("ngIf","month"===e.view)}}function yq(i,t){1&i&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function vq(i,t){1&i&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function bq(i,t){if(1&i&&(s.TgZ(0,"div",59),s.TgZ(1,"span"),s._uU(2),s.qZA(),s.qZA()),2&i){const e=s.oxw(3);s.xp6(2),s.Oqu(e.timeSeparator)}}function xq(i,t){1&i&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function wq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",64),s.TgZ(1,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(3).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(3).incrementSecond(a)})("mousedown",function(a){return s.CHM(e),s.oxw(3).onTimePickerElementMouseDown(a,2,1)})("mouseup",function(a){return s.CHM(e),s.oxw(3).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(3).onTimePickerElementMouseLeave()}),s._UZ(2,"span",57),s.qZA(),s.TgZ(3,"span"),s.YNc(4,xq,2,0,"ng-container",11),s._uU(5),s.qZA(),s.TgZ(6,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(3).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(3).decrementSecond(a)})("mousedown",function(a){return s.CHM(e),s.oxw(3).onTimePickerElementMouseDown(a,2,-1)})("mouseup",function(a){return s.CHM(e),s.oxw(3).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(3).onTimePickerElementMouseLeave()}),s._UZ(7,"span",58),s.qZA(),s.qZA()}if(2&i){const e=s.oxw(3);s.xp6(4),s.Q6J("ngIf",e.currentSecond<10),s.xp6(1),s.Oqu(e.currentSecond)}}function Cq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",65),s.TgZ(1,"button",66),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(3).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(3).toggleAMPM(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(3).toggleAMPM(a)}),s._UZ(2,"span",57),s.qZA(),s.TgZ(3,"span"),s._uU(4),s.qZA(),s.TgZ(5,"button",66),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(3).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(3).toggleAMPM(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(3).toggleAMPM(a)}),s._UZ(6,"span",58),s.qZA(),s.qZA()}if(2&i){const e=s.oxw(3);s.xp6(4),s.Oqu(e.pm?"PM":"AM")}}function Sq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",54),s.TgZ(1,"div",55),s.TgZ(2,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(2).incrementHour(a)})("mousedown",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseDown(a,0,1)})("mouseup",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(2).onTimePickerElementMouseLeave()}),s._UZ(3,"span",57),s.qZA(),s.TgZ(4,"span"),s.YNc(5,yq,2,0,"ng-container",11),s._uU(6),s.qZA(),s.TgZ(7,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(2).decrementHour(a)})("mousedown",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseDown(a,0,-1)})("mouseup",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(2).onTimePickerElementMouseLeave()}),s._UZ(8,"span",58),s.qZA(),s.qZA(),s.TgZ(9,"div",59),s.TgZ(10,"span"),s._uU(11),s.qZA(),s.qZA(),s.TgZ(12,"div",60),s.TgZ(13,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(2).incrementMinute(a)})("mousedown",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseDown(a,1,1)})("mouseup",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(2).onTimePickerElementMouseLeave()}),s._UZ(14,"span",57),s.qZA(),s.TgZ(15,"span"),s.YNc(16,vq,2,0,"ng-container",11),s._uU(17),s.qZA(),s.TgZ(18,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(2).decrementMinute(a)})("mousedown",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseDown(a,1,-1)})("mouseup",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(2).onTimePickerElementMouseLeave()}),s._UZ(19,"span",58),s.qZA(),s.qZA(),s.YNc(20,bq,3,1,"div",61),s.YNc(21,wq,8,2,"div",62),s.YNc(22,Cq,7,1,"div",63),s.qZA()}if(2&i){const e=s.oxw(2);s.xp6(5),s.Q6J("ngIf",e.currentHour<10),s.xp6(1),s.Oqu(e.currentHour),s.xp6(5),s.Oqu(e.timeSeparator),s.xp6(5),s.Q6J("ngIf",e.currentMinute<10),s.xp6(1),s.Oqu(e.currentMinute),s.xp6(3),s.Q6J("ngIf",e.showSeconds),s.xp6(1),s.Q6J("ngIf",e.showSeconds),s.xp6(1),s.Q6J("ngIf","12"==e.hourFormat)}}const JN=function(i){return[i]};function Eq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",67),s.TgZ(1,"button",68),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(2).onTodayButtonClick(a)}),s.qZA(),s.TgZ(2,"button",68),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(2).onClearButtonClick(a)}),s.qZA(),s.qZA()}if(2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("label",e.getTranslation("today"))("ngClass",s.VKq(4,JN,e.todayButtonStyleClass)),s.xp6(1),s.Q6J("label",e.getTranslation("clear"))("ngClass",s.VKq(6,JN,e.clearButtonStyleClass))}}function Tq(i,t){1&i&&s.GkF(0)}const Mq=function(i,t,e,o,a,h){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":o,"p-datepicker-monthpicker":a,"p-datepicker-touch-ui":h}},KN=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Aq=function(i){return{value:"visibleTouchUI",params:i}},kq=function(i){return{value:"visible",params:i}};function Dq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",8,9),s.NdJ("@overlayAnimation.start",function(a){return s.CHM(e),s.oxw().onOverlayAnimationStart(a)})("@overlayAnimation.done",function(a){return s.CHM(e),s.oxw().onOverlayAnimationDone(a)})("click",function(a){return s.CHM(e),s.oxw().onOverlayClick(a)}),s.Hsn(2),s.YNc(3,WY,1,0,"ng-container",10),s.YNc(4,_q,4,2,"ng-container",11),s.YNc(5,Sq,23,8,"div",12),s.YNc(6,Eq,3,8,"div",13),s.Hsn(7,1),s.YNc(8,Tq,1,0,"ng-container",10),s.qZA()}if(2&i){const e=s.oxw();s.Tol(e.panelStyleClass),s.Q6J("ngStyle",e.panelStyle)("ngClass",s.HTZ(11,Mq,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?s.VKq(21,Aq,s.WLB(18,KN,e.showTransitionOptions,e.hideTransitionOptions)):s.VKq(26,kq,s.WLB(23,KN,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),s.xp6(3),s.Q6J("ngTemplateOutlet",e.headerTemplate),s.xp6(1),s.Q6J("ngIf",!e.timeOnly),s.xp6(1),s.Q6J("ngIf",e.showTime||e.timeOnly),s.xp6(1),s.Q6J("ngIf",e.showButtonBar),s.xp6(2),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}const Iq=[[["p-header"]],[["p-footer"]]],Pq=function(i,t,e,o){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":o}},Rq=["p-header","p-footer"],Oq={provide:Ll,useExisting:(0,s.Gpc)(()=>Fq),multi:!0};let Fq=(()=>{class i{constructor(e,o,a,h,v,k){this.el=e,this.renderer=o,this.cd=a,this.zone=h,this.config=v,this.overlayService=k,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.numberOfMonths=1,this.view="date",this.timeSeparator=":",this.focusTrap=!0,this.firstDayOfWeek=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onClose=new s.vpe,this.onSelect=new s.vpe,this.onInput=new s.vpe,this.onTodayClick=new s.vpe,this.onClearClick=new s.vpe,this.onMonthChange=new s.vpe,this.onYearChange=new s.vpe,this.onClickOutside=new s.vpe,this.onShow=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this.convertTo24Hour=function(z,$){return"12"==this.hourFormat?12===z?$?12:0:$?z+12:z:z}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.initFocusableCell())}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const o=e||new Date;this.currentMonth=o.getMonth(),this.currentYear=o.getFullYear(),this.initTime(o),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const o=e.split(":"),a=parseInt(o[0]),h=parseInt(o[1]);this.populateYearOptions(a,h)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){const e=this.defaultDate||new Date;this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),"date"===this.view?(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7):"month"===this.view&&this.createMonthPickerValues(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":this.dateTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.dateTemplate=e.template}})}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,o){this.yearOptions=[];for(let a=e;a<=o;a++)this.yearOptions.push(a)}createWeekDays(){this.weekDays=[];let e=this.firstDayOfWeek,o=this.getTranslation(sc.DAY_NAMES_MIN);for(let a=0;a<7;a++)this.weekDays.push(o[e]),e=6==e?0:++e}createMonthPickerValues(){this.monthPickerValues=[];let e=this.getTranslation(sc.MONTH_NAMES_SHORT);for(let o=0;o<=11;o++)this.monthPickerValues.push(e[o])}createMonths(e,o){this.months=this.months=[];for(let a=0;a<this.numberOfMonths;a++){let h=e+a,v=o;h>11&&(h=h%11-1,v=o+1),this.months.push(this.createMonth(h,v))}}getWeekNumber(e){let o=new Date(e.getTime());o.setDate(o.getDate()+4-(o.getDay()||7));let a=o.getTime();return o.setMonth(0),o.setDate(1),Math.floor(Math.round((a-o.getTime())/864e5)/7)+1}createMonth(e,o){let a=[],h=this.getFirstDayOfMonthIndex(e,o),v=this.getDaysCountInMonth(e,o),k=this.getDaysCountInPrevMonth(e,o),z=1,$=new Date,oe=[],me=Math.ceil((v+h)/7);for(let ke=0;ke<me;ke++){let Fe=[];if(0==ke){for(let ct=k-h+1;ct<=k;ct++){let kt=this.getPreviousMonthAndYear(e,o);Fe.push({day:ct,month:kt.month,year:kt.year,otherMonth:!0,today:this.isToday($,ct,kt.month,kt.year),selectable:this.isSelectable(ct,kt.month,kt.year,!0)})}let je=7-Fe.length;for(let ct=0;ct<je;ct++)Fe.push({day:z,month:e,year:o,today:this.isToday($,z,e,o),selectable:this.isSelectable(z,e,o,!1)}),z++}else for(let je=0;je<7;je++){if(z>v){let ct=this.getNextMonthAndYear(e,o);Fe.push({day:z-v,month:ct.month,year:ct.year,otherMonth:!0,today:this.isToday($,z-v,ct.month,ct.year),selectable:this.isSelectable(z-v,ct.month,ct.year,!0)})}else Fe.push({day:z,month:e,year:o,today:this.isToday($,z,e,o),selectable:this.isSelectable(z,e,o,!1)});z++}this.showWeek&&oe.push(this.getWeekNumber(new Date(Fe[0].year,Fe[0].month,Fe[0].day))),a.push(Fe)}return{month:e,year:o,dates:a,weekNumbers:oe}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){e.stopPropagation(),this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.view?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){e.stopPropagation(),this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.view?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}onDateSelect(e,o){!this.disabled&&o.selectable?(this.isMultipleSelection()&&this.isSelected(o)?(this.value=this.value.filter((a,h)=>!this.isDateEquals(a,o)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(o)&&this.selectDate(o),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,o){nn.hasClass(e.target,"p-disabled")||this.onDateSelect(e,{year:this.currentYear,month:o,day:1,selectable:!0})}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let o=0;o<this.value.length;o++)e+=this.formatDateTime(this.value[o]),o!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let a=this.value[1];e=this.formatDateTime(this.value[0]),a&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(a))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let o=null;return e&&(this.timeOnly?o=this.formatTime(e):(o=this.formatDate(e,this.getDateFormat()),this.showTime&&(o+=" "+this.formatTime(e)))),o}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}selectDate(e){let o=new Date(e.year,e.month,e.day);if(this.showTime&&(o.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),o.setMinutes(this.currentMinute),o.setSeconds(this.currentSecond)),this.minDate&&this.minDate>o&&(o=this.minDate,this.setCurrentHourPM(o.getHours()),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds()),this.maxDate&&this.maxDate<o&&(o=this.maxDate,this.setCurrentHourPM(o.getHours()),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds()),this.isSingleSelection())this.updateModel(o);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,o]:[o]);else if(this.isRangeSelection())if(this.value&&this.value.length){let a=this.value[0],h=this.value[1];!h&&o.getTime()>=a.getTime()?h=o:(a=o,h=null),this.updateModel([a,h])}else this.updateModel([o,null]);this.onSelect.emit(o)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let o=null;this.value&&(o=this.value.map(a=>this.formatDateTime(a))),this.onModelChange(o)}}getFirstDayOfMonthIndex(e,o){let a=new Date;a.setDate(1),a.setMonth(e),a.setFullYear(o);let h=a.getDay()+this.getSundayIndex();return h>=7?h-7:h}getDaysCountInMonth(e,o){return 32-this.daylightSavingAdjust(new Date(o,e,32)).getDate()}getDaysCountInPrevMonth(e,o){let a=this.getPreviousMonthAndYear(e,o);return this.getDaysCountInMonth(a.month,a.year)}getPreviousMonthAndYear(e,o){let a,h;return 0===e?(a=11,h=o-1):(a=e-1,h=o),{month:a,year:h}}getNextMonthAndYear(e,o){let a,h;return 11===e?(a=0,h=o+1):(a=e+1,h=o),{month:a,year:h}}getSundayIndex(){return this.firstDayOfWeek>0?7-this.firstDayOfWeek:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let o=!1;for(let a of this.value)if(o=this.isDateEquals(a,e),o)break;return o}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isMonthSelected(e){let o=this.value?Array.isArray(this.value)?this.value[0].getDate():this.value.getDate():1;return this.isSelected({year:this.currentYear,month:e,day:o,selectable:!0})}isDateEquals(e,o){return!!e&&e.getDate()===o.day&&e.getMonth()===o.month&&e.getFullYear()===o.year}isDateBetween(e,o,a){if(e&&o){let v=new Date(a.year,a.month,a.day);return e.getTime()<=v.getTime()&&o.getTime()>=v.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,o,a,h){return e.getDate()===o&&e.getMonth()===a&&e.getFullYear()===h}isSelectable(e,o,a,h){let v=!0,k=!0,z=!0,$=!0;return!(h&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>a||this.minDate.getFullYear()===a&&(this.minDate.getMonth()>o||this.minDate.getMonth()===o&&this.minDate.getDate()>e))&&(v=!1),this.maxDate&&(this.maxDate.getFullYear()<a||this.maxDate.getFullYear()===a&&(this.maxDate.getMonth()<o||this.maxDate.getMonth()===o&&this.maxDate.getDate()<e))&&(k=!1),this.disabledDates&&(z=!this.isDateDisabled(e,o,a)),this.disabledDays&&($=!this.isDayDisabled(e,o,a)),v&&k&&z&&$)}isDateDisabled(e,o,a){if(this.disabledDates)for(let h of this.disabledDates)if(h.getFullYear()===a&&h.getMonth()===o&&h.getDate()===e)return!0;return!1}isDayDisabled(e,o,a){if(this.disabledDays){let v=new Date(a,o,e).getDay();return-1!==this.disabledDays.indexOf(v)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,o){this.overlayVisible?this.hideOverlay():(o.focus(),this.showOverlay())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(nn.getFocusableElements(this.contentViewChild.nativeElement).forEach(o=>o.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,o,a){const h=e.currentTarget,v=h.parentElement;switch(e.which){case 40:{h.tabIndex="-1";let k=nn.index(v),z=v.parentElement.nextElementSibling;z?nn.hasClass(z.children[k].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(z.children[k].children[0].tabIndex="0",z.children[k].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{h.tabIndex="-1";let k=nn.index(v),z=v.parentElement.previousElementSibling;if(z){let $=z.children[k].children[0];nn.hasClass($,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):($.tabIndex="0",$.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{h.tabIndex="-1";let k=v.previousElementSibling;if(k){let z=k.children[0];nn.hasClass(z,"p-disabled")||nn.hasClass(z.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,a):(z.tabIndex="0",z.focus())}else this.navigateToMonth(!0,a);e.preventDefault();break}case 39:{h.tabIndex="-1";let k=v.nextElementSibling;if(k){let z=k.children[0];nn.hasClass(z,"p-disabled")?this.navigateToMonth(!1,a):(z.tabIndex="0",z.focus())}else this.navigateToMonth(!1,a);e.preventDefault();break}case 13:this.onDateSelect(e,o),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,o){const a=e.currentTarget;switch(e.which){case 38:case 40:{a.tabIndex="-1";var h=a.parentElement.children,v=nn.index(a);let k=h[40===e.which?v+3:v-3];k&&(k.tabIndex="0",k.focus()),e.preventDefault();break}case 37:{a.tabIndex="-1";let k=a.previousElementSibling;k&&(k.tabIndex="0",k.focus()),e.preventDefault();break}case 39:{a.tabIndex="-1";let k=a.nextElementSibling;k&&(k.tabIndex="0",k.focus()),e.preventDefault();break}case 13:this.onMonthSelect(e,o),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}navigateToMonth(e,o){if(e)if(1===this.numberOfMonths||0===o)this.navigationState={backward:!0},this.navBackward(event);else{let h=nn.find(this.contentViewChild.nativeElement.children[o-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),v=h[h.length-1];v.tabIndex="0",v.focus()}else if(1===this.numberOfMonths||o===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let h=nn.findSingle(this.contentViewChild.nativeElement.children[o+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");h.tabIndex="0",h.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?nn.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():nn.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let o=nn.find(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e=o[o.length-1]}else e=nn.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.view){let o=nn.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),a=nn.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");o.forEach(h=>h.tabIndex=-1),e=a||o[0],0===o.length&&nn.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(v=>v.tabIndex=-1)}else if(e=nn.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){e=nn.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)")||nn.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0")}trapFocus(e){let o=nn.getFocusableElements(this.contentViewChild.nativeElement);if(o&&o.length>0)if(o[0].ownerDocument.activeElement){let a=o.indexOf(o[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==a||0===a)if(this.focusTrap)o[o.length-1].focus();else{if(-1===a)return this.hideOverlay();if(0===a)return}else o[a-1].focus();else if(-1==a||a===o.length-1){if(!this.focusTrap&&-1!=a)return this.hideOverlay();o[0].focus()}else o[a+1].focus()}else o[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,o,a,h){let v=this.value;const k=this.convertTo24Hour(e,h);this.isRangeSelection()&&(v=this.value[1]||this.value[0]),this.isMultipleSelection()&&(v=this.value[this.value.length-1]);const z=v?v.toDateString():null;return!(this.minDate&&z&&this.minDate.toDateString()===z&&(this.minDate.getHours()>k||this.minDate.getHours()===k&&(this.minDate.getMinutes()>o||this.minDate.getMinutes()===o&&this.minDate.getSeconds()>a))||this.maxDate&&z&&this.maxDate.toDateString()===z&&(this.maxDate.getHours()<k||this.maxDate.getHours()===k&&(this.maxDate.getMinutes()<o||this.maxDate.getMinutes()===o&&this.maxDate.getSeconds()<a)))}incrementHour(e){let a=this.currentHour+this.stepHour,h=this.pm;"24"==this.hourFormat?a=a>=24?a-24:a:"12"==this.hourFormat&&(this.currentHour<12&&a>11&&(h=!this.pm),a=a>=13?a-12:a),this.validateTime(a,this.currentMinute,this.currentSecond,h)&&(this.currentHour=a,this.pm=h),e.preventDefault()}onTimePickerElementMouseDown(e,o,a){this.disabled||(this.repeat(e,null,o,a),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,o,a,h){let v=o||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,a,h),this.cd.markForCheck()},v),a){case 0:1===h?this.incrementHour(e):this.decrementHour(e);break;case 1:1===h?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===h?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let o=this.currentHour-this.stepHour,a=this.pm;"24"==this.hourFormat?o=o<0?24+o:o:"12"==this.hourFormat&&(12===this.currentHour&&(a=!this.pm),o=o<=0?12+o:o),this.validateTime(o,this.currentMinute,this.currentSecond,a)&&(this.currentHour=o,this.pm=a),e.preventDefault()}incrementMinute(e){let o=this.currentMinute+this.stepMinute;o=o>59?o-60:o,this.validateTime(this.currentHour,o,this.currentSecond,this.pm)&&(this.currentMinute=o),e.preventDefault()}decrementMinute(e){let o=this.currentMinute-this.stepMinute;o=o<0?60+o:o,this.validateTime(this.currentHour,o,this.currentSecond,this.pm)&&(this.currentMinute=o),e.preventDefault()}incrementSecond(e){let o=this.currentSecond+this.stepSecond;o=o>59?o-60:o,this.validateTime(this.currentHour,this.currentMinute,o,this.pm)&&(this.currentSecond=o),e.preventDefault()}decrementSecond(e){let o=this.currentSecond-this.stepSecond;o=o<0?60+o:o,this.validateTime(this.currentHour,this.currentMinute,o,this.pm)&&(this.currentSecond=o),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const o=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,o)&&(this.pm=o,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let o=e.target.value;try{let a=this.parseValueFromString(o);this.isValidSelection(a)&&(this.updateModel(a),this.updateUI())}catch(a){this.updateModel(null)}this.filled=null!=o&&o.length,this.onInput.emit(e)}isValidSelection(e){let o=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(o=!1):e.every(a=>this.isSelectable(a.getDate(),a.getMonth(),a.getFullYear(),!1))&&this.isRangeSelection()&&(o=e.length>1&&e[1]>e[0]),o}parseValueFromString(e){if(!e||0===e.trim().length)return null;let o;if(this.isSingleSelection())o=this.parseDateTime(e);else if(this.isMultipleSelection()){let a=e.split(this.multipleSeparator);o=[];for(let h of a)o.push(this.parseDateTime(h.trim()))}else if(this.isRangeSelection()){let a=e.split(" "+this.rangeSeparator+" ");o=[];for(let h=0;h<a.length;h++)o[h]=this.parseDateTime(a[h].trim())}return o}parseDateTime(e){let o,a=e.split(" ");if(this.timeOnly)o=new Date,this.populateTime(o,a[0],a[1]);else{const h=this.getDateFormat();if(this.showTime){let v="12"==this.hourFormat?a.pop():null,k=a.pop();o=this.parseDate(a.join(" "),h),this.populateTime(o,k,v)}else o=this.parseDate(e,h)}return o}populateTime(e,o,a){if("12"==this.hourFormat&&!a)throw"Invalid Time";this.pm="PM"===a||"pm"===a;let h=this.parseTime(o);e.setHours(h.hour),e.setMinutes(h.minute),e.setSeconds(h.second)}updateUI(){let e=this.value||this.defaultDate||new Date;Array.isArray(e)&&(e=e[0]),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(e.getHours()),this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.appendOverlay(),this.autoZIndex&&(this.touchUI?zd.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):zd.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&zd.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):nn.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.appendTo?nn.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement):nn.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement)}enableModality(e){this.mask||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),nn.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker"),this.maskClickListener=this.renderer.listen(this.mask,"click",a=>{this.disableModality()}),document.body.appendChild(this.mask),nn.addClass(document.body,"p-overflow-hidden"))}disableModality(){if(this.mask){document.body.removeChild(this.mask);let o,e=document.body.children;for(let a=0;a<e.length;a++)if(nn.hasClass(e[a],"p-datepicker-mask-scrollblocker")){o=!0;break}o||nn.removeClass(document.body,"p-overflow-hidden"),this.unbindMaskClickListener(),this.mask=null}}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}writeValue(e){this.value=e,this.value&&"string"==typeof this.value&&(this.value=this.parseValueFromString(this.value)),this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}formatDate(e,o){if(!e)return"";let a;const h=oe=>{const me=a+1<o.length&&o.charAt(a+1)===oe;return me&&a++,me},v=(oe,me,ke)=>{let Fe=""+me;if(h(oe))for(;Fe.length<ke;)Fe="0"+Fe;return Fe},k=(oe,me,ke,Fe)=>h(oe)?Fe[me]:ke[me];let z="",$=!1;if(e)for(a=0;a<o.length;a++)if($)"'"!==o.charAt(a)||h("'")?z+=o.charAt(a):$=!1;else switch(o.charAt(a)){case"d":z+=v("d",e.getDate(),2);break;case"D":z+=k("D",e.getDay(),this.getTranslation(sc.DAY_NAMES_SHORT),this.getTranslation(sc.DAY_NAMES));break;case"o":z+=v("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":z+=v("m",e.getMonth()+1,2);break;case"M":z+=k("M",e.getMonth(),this.getTranslation(sc.MONTH_NAMES_SHORT),this.getTranslation(sc.MONTH_NAMES));break;case"y":z+=h("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":z+=e.getTime();break;case"!":z+=1e4*e.getTime()+this.ticksTo1970;break;case"'":h("'")?z+="'":$=!0;break;default:z+=o.charAt(a)}return z}formatTime(e){if(!e)return"";let o="",a=e.getHours(),h=e.getMinutes(),v=e.getSeconds();return"12"==this.hourFormat&&a>11&&12!=a&&(a-=12),o+="12"==this.hourFormat&&0===a?12:a<10?"0"+a:a,o+=":",o+=h<10?"0"+h:h,this.showSeconds&&(o+=":",o+=v<10?"0"+v:v),"12"==this.hourFormat&&(o+=e.getHours()>11?" PM":" AM"),o}parseTime(e){let o=e.split(":");if(o.length!==(this.showSeconds?3:2))throw"Invalid time";let h=parseInt(o[0]),v=parseInt(o[1]),k=this.showSeconds?parseInt(o[2]):null;if(isNaN(h)||isNaN(v)||h>23||v>59||"12"==this.hourFormat&&h>12||this.showSeconds&&(isNaN(k)||k>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==h&&this.pm?h+=12:!this.pm&&12===h&&(h-=12)),{hour:h,minute:v,second:k}}parseDate(e,o){if(null==o||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let a,h,v,je,k=0,z="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),$=-1,oe=-1,me=-1,ke=-1,Fe=!1,ct=xn=>{let Xn=a+1<o.length&&o.charAt(a+1)===xn;return Xn&&a++,Xn},kt=xn=>{let Xn=ct(xn),ni="@"===xn?14:"!"===xn?20:"y"===xn&&Xn?4:"o"===xn?3:2,Rr=new RegExp("^\\d{"+("y"===xn?ni:1)+","+ni+"}"),ta=e.substring(k).match(Rr);if(!ta)throw"Missing number at position "+k;return k+=ta[0].length,parseInt(ta[0],10)},Qt=(xn,Xn,ni)=>{let Qi=-1,Rr=ct(xn)?ni:Xn,ta=[];for(let us=0;us<Rr.length;us++)ta.push([us,Rr[us]]);ta.sort((us,ac)=>-(us[1].length-ac[1].length));for(let us=0;us<ta.length;us++){let ac=ta[us][1];if(e.substr(k,ac.length).toLowerCase()===ac.toLowerCase()){Qi=ta[us][0],k+=ac.length;break}}if(-1!==Qi)return Qi+1;throw"Unknown name at position "+k},Sn=()=>{if(e.charAt(k)!==o.charAt(a))throw"Unexpected literal at position "+k;k++};for("month"===this.view&&(me=1),a=0;a<o.length;a++)if(Fe)"'"!==o.charAt(a)||ct("'")?Sn():Fe=!1;else switch(o.charAt(a)){case"d":me=kt("d");break;case"D":Qt("D",this.getTranslation(sc.DAY_NAMES_SHORT),this.getTranslation(sc.DAY_NAMES));break;case"o":ke=kt("o");break;case"m":oe=kt("m");break;case"M":oe=Qt("M",this.getTranslation(sc.MONTH_NAMES_SHORT),this.getTranslation(sc.MONTH_NAMES));break;case"y":$=kt("y");break;case"@":je=new Date(kt("@")),$=je.getFullYear(),oe=je.getMonth()+1,me=je.getDate();break;case"!":je=new Date((kt("!")-this.ticksTo1970)/1e4),$=je.getFullYear(),oe=je.getMonth()+1,me=je.getDate();break;case"'":ct("'")?Sn():Fe=!0;break;default:Sn()}if(k<e.length&&(v=e.substr(k),!/^\s+/.test(v)))throw"Extra/unparsed characters found in date: "+v;if(-1===$?$=(new Date).getFullYear():$<100&&($+=(new Date).getFullYear()-(new Date).getFullYear()%100+($<=z?0:-100)),ke>-1)for(oe=1,me=ke;h=this.getDaysCountInMonth($,oe-1),!(me<=h);)oe++,me-=h;if(je=this.daylightSavingAdjust(new Date($,oe-1,me)),je.getFullYear()!==$||je.getMonth()+1!==oe||je.getDate()!==me)throw"Invalid date";return je}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let o=new Date,a={day:o.getDate(),month:o.getMonth(),year:o.getFullYear(),otherMonth:o.getMonth()!==this.currentMonth||o.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,a),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",o=>{this.isOutsideClicked(o)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(o),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new lk(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return nn.hasClass(e.target,"p-datepicker-prev")||nn.hasClass(e.target,"p-datepicker-prev-icon")||nn.hasClass(e.target,"p-datepicker-next")||nn.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!nn.isAndroid()&&this.hideOverlay()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindMaskClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.disableModality()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&zd.clear(this.overlay),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(mx),s.Y36(ik))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-calendar"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,gx,4),2&e){let h;s.iGM(h=s.CRH())&&(o.templates=h)}},viewQuery:function(e,o){if(1&e&&(s.Gf(GY,5),s.Gf(jY,5),s.Gf(YY,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.containerViewChild=a.first),s.iGM(a=s.CRH())&&(o.inputfieldViewChild=a.first),s.iGM(a=s.CRH())&&(o.content=a.first)}},hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focus)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",numberOfMonths:"numberOfMonths",view:"view",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",firstDayOfWeek:"firstDayOfWeek",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[s._Bn([Oq])],ngContentSelectors:Rq,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["class","p-datepicker-month",4,"ngIf"],["tabindex","0","class","p-datepicker-month",3,"change",4,"ngIf"],["tabindex","0","class","p-datepicker-year",3,"change",4,"ngIf"],["class","p-datepicker-year",4,"ngIf"],["class","p-datepicker-next p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],[1,"p-datepicker-month"],["tabindex","0",1,"p-datepicker-month",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],["tabindex","0",1,"p-datepicker-year",3,"change"],[1,"p-datepicker-year"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","mousedown","mouseup","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,o){1&e&&(s.F$t(Iq),s.TgZ(0,"span",0,1),s.YNc(2,ZY,3,16,"ng-template",2),s.YNc(3,Dq,9,28,"div",3),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",s.l5B(6,Pq,o.showIcon,o.timeOnly,o.disabled,o.focus))("ngStyle",o.style),s.xp6(2),s.Q6J("ngIf",!o.inline),s.xp6(1),s.Q6J("ngIf",o.inline||o.overlayVisible))},directives:[ne,or,Xt,oP,WS,No,Je],styles:[".p-calendar{position:relative;display:inline-flex}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{position:static}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-next,.p-datepicker-prev{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;margin:0 auto}.p-datepicker td>span,.p-monthpicker-month{justify-content:center;align-items:center;cursor:pointer;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker,.p-timepicker button{display:flex;justify-content:center;align-items:center}.p-timepicker button{cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-calendar .p-datepicker-touch-ui,.p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}"],encapsulation:2,data:{animation:[As("overlayAnimation",[ko("visibleTouchUI",zn({transform:"translate(-50%,-50%)",opacity:1})),Sr("void => visible",[zn({opacity:0,transform:"scaleY(0.8)"}),Dr("{{showTransitionParams}}",zn({opacity:1,transform:"*"}))]),Sr("visible => void",[Dr("{{hideTransitionParams}}",zn({opacity:0}))]),Sr("void => visibleTouchUI",[zn({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Dr("{{showTransitionParams}}")]),Sr("visibleTouchUI => void",[Dr("{{hideTransitionParams}}",zn({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),Lq=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,Lw,Wm,_x],Lw,Wm]}),i})();const Nq=["input"],eB=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},tB=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function Bq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"span",5),s.TgZ(1,"button",6),s.NdJ("mousedown",function(a){return s.CHM(e),s.oxw().onUpButtonMouseDown(a)})("mouseup",function(){return s.CHM(e),s.oxw().onUpButtonMouseUp()})("mouseleave",function(){return s.CHM(e),s.oxw().onUpButtonMouseLeave()})("keydown",function(a){return s.CHM(e),s.oxw().onUpButtonKeyDown(a)})("keyup",function(){return s.CHM(e),s.oxw().onUpButtonKeyUp()}),s.qZA(),s.TgZ(2,"button",6),s.NdJ("mousedown",function(a){return s.CHM(e),s.oxw().onDownButtonMouseDown(a)})("mouseup",function(){return s.CHM(e),s.oxw().onDownButtonMouseUp()})("mouseleave",function(){return s.CHM(e),s.oxw().onDownButtonMouseLeave()})("keydown",function(a){return s.CHM(e),s.oxw().onDownButtonKeyDown(a)})("keyup",function(){return s.CHM(e),s.oxw().onDownButtonKeyUp()}),s.qZA(),s.qZA()}if(2&i){const e=s.oxw();s.xp6(1),s.Tol(e.incrementButtonClass),s.Q6J("ngClass",s.DdM(10,eB))("icon",e.incrementButtonIcon)("disabled",e.disabled),s.xp6(1),s.Tol(e.decrementButtonClass),s.Q6J("ngClass",s.DdM(11,tB))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function zq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",6),s.NdJ("mousedown",function(a){return s.CHM(e),s.oxw().onUpButtonMouseDown(a)})("mouseup",function(){return s.CHM(e),s.oxw().onUpButtonMouseUp()})("mouseleave",function(){return s.CHM(e),s.oxw().onUpButtonMouseLeave()})("keydown",function(a){return s.CHM(e),s.oxw().onUpButtonKeyDown(a)})("keyup",function(){return s.CHM(e),s.oxw().onUpButtonKeyUp()}),s.qZA()}if(2&i){const e=s.oxw();s.Tol(e.incrementButtonClass),s.Q6J("ngClass",s.DdM(5,eB))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function Vq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",6),s.NdJ("mousedown",function(a){return s.CHM(e),s.oxw().onDownButtonMouseDown(a)})("mouseup",function(){return s.CHM(e),s.oxw().onDownButtonMouseUp()})("mouseleave",function(){return s.CHM(e),s.oxw().onDownButtonMouseLeave()})("keydown",function(a){return s.CHM(e),s.oxw().onDownButtonKeyDown(a)})("keyup",function(){return s.CHM(e),s.oxw().onDownButtonKeyUp()}),s.qZA()}if(2&i){const e=s.oxw();s.Tol(e.decrementButtonClass),s.Q6J("ngClass",s.DdM(5,tB))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const Uq=function(i,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},Hq={provide:Ll,useExisting:(0,s.Gpc)(()=>nB),multi:!0};let nB=(()=>{class i{constructor(e,o){this.el=e,this.cd=o,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.step=1,this.onInput=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onKeyDown=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar="",this._modeOption="decimal",this._useGroupingOption=!0}get locale(){return this._localeOption}set locale(e){this._localeOption=e,this.updateConstructParser()}get localeMatcher(){return this._localeMatcherOption}set localeMatcher(e){this._localeMatcherOption=e,this.updateConstructParser()}get mode(){return this._modeOption}set mode(e){this._modeOption=e,this.updateConstructParser()}get currency(){return this._currencyOption}set currency(e){this._currencyOption=e,this.updateConstructParser()}get currencyDisplay(){return this._currencyDisplayOption}set currencyDisplay(e){this._currencyDisplayOption=e,this.updateConstructParser()}get useGrouping(){return this._useGroupingOption}set useGrouping(e){this._useGroupingOption=e,this.updateConstructParser()}get minFractionDigits(){return this._minFractionDigitsOption}set minFractionDigits(e){this._minFractionDigitsOption=e,this.updateConstructParser()}get maxFractionDigits(){return this._maxFractionDigitsOption}set maxFractionDigits(e){this._maxFractionDigitsOption=e,this.updateConstructParser()}get prefix(){return this._prefixOption}set prefix(e){this._prefixOption=e,this.updateConstructParser()}get suffix(){return this._suffixOption}set suffix(e){this._suffixOption=e,this.updateConstructParser()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),o=new Map(e.map((a,h)=>[a,h]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._decimal=this.getDecimalExpression(),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=a=>o.get(a)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(1.1).trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._decimal,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let a=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(a=this.prefix+a),this.suffix&&(a+=this.suffix),a}return e.toString()}return""}parseValue(e){let o=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(o){if("-"===o)return o;let a=+o;return isNaN(a)?null:a}return null}repeat(e,o,a){let h=o||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,a)},h),this.spin(e,a)}spin(e,o){let a=this.step*o,h=this.parseValue(this.input.nativeElement.value)||0,v=this.validateValue(h+a);this.maxlength&&this.maxlength<this.formatValue(v).length||(this.updateInput(v,null,"spin"),this.updateModel(e,v),this.handleOnInput(e,h,v))}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1}onInputKeyDown(e){if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let o=e.target.selectionStart,a=e.target.selectionEnd,h=e.target.value,v=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(h.charAt(o-1))||e.preventDefault();break;case 39:this.isNumeralChar(h.charAt(o))||e.preventDefault();break;case 13:let k=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(k),this.input.nativeElement.setAttribute("aria-valuenow",k),this.updateModel(e,k);break;case 8:if(e.preventDefault(),o===a){let z=h.charAt(o-1),$=h.search(this._decimal);this._decimal.lastIndex=0,this.isNumeralChar(z)&&(this._group.test(z)?(this._group.lastIndex=0,v=h.slice(0,o-2)+h.slice(o-1)):this._decimal.test(z)?(this._decimal.lastIndex=0,this.input.nativeElement.setSelectionRange(o-1,o-1)):$>0&&o>$?v=h.slice(0,o-1)+"0"+h.slice(o):$>0&&1===$?(v=h.slice(0,o-1)+"0"+h.slice(o),v=this.parseValue(v)>0?v:""):v=h.slice(0,o-1)+h.slice(o)),this.updateValue(e,v,null,"delete-single")}else v=this.deleteRange(h,o,a),this.updateValue(e,v,null,"delete-range");break;case 46:if(e.preventDefault(),o===a){let z=h.charAt(o),$=h.search(this._decimal);this._decimal.lastIndex=0,this.isNumeralChar(z)&&(this._group.test(z)?(this._group.lastIndex=0,v=h.slice(0,o)+h.slice(o+2)):this._decimal.test(z)?(this._decimal.lastIndex=0,this.input.nativeElement.setSelectionRange(o+1,o+1)):$>0&&o>$?v=h.slice(0,o)+"0"+h.slice(o+1):$>0&&1===$?(v=h.slice(0,o)+"0"+h.slice(o+1),v=this.parseValue(v)>0?v:""):v=h.slice(0,o)+h.slice(o+1)),this.updateValue(e,v,null,"delete-back-single")}else v=this.deleteRange(h,o,a),this.updateValue(e,v,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){e.preventDefault();let o=e.which||e.keyCode,a=String.fromCharCode(o);const h=this.isDecimalSign(a),v=this.isMinusSign(a);(48<=o&&o<=57||v||h)&&this.insert(e,a,{isDecimalSign:h,isMinusSign:v})}onPaste(e){if(!this.disabled){e.preventDefault();let o=(e.clipboardData||window.clipboardData).getData("Text");if(o){let a=this.parseValue(o);null!=a&&this.insert(e,a.toString())}}}isMinusSign(e){return!!this._minusSign.test(e)&&(this._minusSign.lastIndex=0,!0)}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}insert(e,o,a={isDecimalSign:!1,isMinusSign:!1}){let h=this.input.nativeElement.selectionStart,v=this.input.nativeElement.selectionEnd,k=this.input.nativeElement.value.trim();const z=k.search(this._decimal);this._decimal.lastIndex=0;const $=k.search(this._minusSign);let oe;if(this._minusSign.lastIndex=0,a.isMinusSign)0===h&&(oe=k,(-1===$||0!==v)&&(oe=this.insertText(k,o,0,v)),this.updateValue(e,oe,o,"insert"));else if(a.isDecimalSign)z>0&&h===z?this.updateValue(e,k,o,"insert"):z>h&&z<v&&(oe=this.insertText(k,o,h,v),this.updateValue(e,oe,o,"insert"));else{const me=this.numberFormat.resolvedOptions().maximumFractionDigits,ke=h!==v?"range-insert":"insert";z>0&&h>z?h+o.length-(z+1)<=me&&(oe=k.slice(0,h)+o+k.slice(h+o.length),this.updateValue(e,oe,o,ke)):(oe=this.insertText(k,o,h,v),this.updateValue(e,oe,o,ke))}}insertText(e,o,a,h){if(2==o.split(".").length){const k=e.slice(a,h).search(this._decimal);return this._decimal.lastIndex=0,k>0?e.slice(0,a)+this.formatValue(o)+e.slice(h):e||this.formatValue(o)}return h-a===e.length?this.formatValue(o):0===a?o+e.slice(h):h===e.length?e.slice(0,a)+o:e.slice(0,a)+o+e.slice(h)}deleteRange(e,o,a){let h;return h=a-o===e.length?"":0===o?e.slice(a):a===e.length?e.slice(0,o):e.slice(0,o)+e.slice(a),h}initCursor(){let e=this.input.nativeElement.selectionStart,o=this.input.nativeElement.value,a=o.length,h=null,v=o.charAt(e);if(this.isNumeralChar(v))return;let k=e-1;for(;k>=0;){if(v=o.charAt(k),this.isNumeralChar(v)){h=k;break}k--}if(null!==h)this.input.nativeElement.setSelectionRange(h+1,h+1);else{for(k=e+1;k<a;){if(v=o.charAt(k),this.isNumeralChar(v)){h=k;break}k++}null!==h&&this.input.nativeElement.setSelectionRange(h,h)}}onInputClick(){this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,o,a,h){let v=this.input.nativeElement.value,k=null;null!=o&&(k=this.parseValue(o),this.updateInput(k,a,h)),this.handleOnInput(e,v,k)}handleOnInput(e,o,a){this.isValueChanged(o,a)&&this.onInput.emit({originalEvent:e,value:a})}isValueChanged(e,o){return null===o&&null!==e||null!=o&&o!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return null!==this.min&&e<this.min?this.min:null!==this.max&&e>this.max?this.max:"-"===e?null:e}updateInput(e,o,a){o=o||"";let h=this.input.nativeElement.value,v=this.formatValue(e),k=h.length;if(0===k){this.input.nativeElement.value=v,this.input.nativeElement.setSelectionRange(0,0),this.initCursor();const $=(this.prefixChar||"").length+o.length;this.input.nativeElement.setSelectionRange($,$)}else{let z=this.input.nativeElement.selectionStart,$=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<v.length)return;this.input.nativeElement.value=v;let oe=v.length;if("range-insert"===a){const me=this.parseValue((h||"").slice(0,z)),Fe=(null!==me?me.toString():"").split("").join(`(${this.groupChar})?`),je=new RegExp(Fe,"g");je.test(v);const ct=o.split("").join(`(${this.groupChar})?`),kt=new RegExp(ct,"g");kt.test(v.slice(je.lastIndex)),$=je.lastIndex+kt.lastIndex,this.input.nativeElement.setSelectionRange($,$)}else if(oe===k)"insert"===a||"delete-back-single"===a?this.input.nativeElement.setSelectionRange($+1,$+1):"delete-single"===a?this.input.nativeElement.setSelectionRange($-1,$-1):("delete-range"===a||"spin"===a)&&this.input.nativeElement.setSelectionRange($,$);else if("delete-back-single"===a){let me=h.charAt($-1),ke=h.charAt($),Fe=k-oe,je=this._group.test(ke);je&&1===Fe?$+=1:!je&&this.isNumeralChar(me)&&($+=-1*Fe+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange($,$)}else $+=oe-k,this.input.nativeElement.setSelectionRange($,$)}this.input.nativeElement.setAttribute("aria-valuenow",e)}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let o=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(e,o),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value)}updateModel(e,o){this.value!==o&&(this.value=o,this.onModelChange(o)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-inputNumber"]],viewQuery:function(e,o){if(1&e&&s.Gf(Nq,5),2&e){let a;s.iGM(a=s.CRH())&&(o.input=a.first)}},hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focused)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",step:"step",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown"},features:[s._Bn([Hq])],decls:6,vars:30,consts:[[3,"ngClass","ngStyle"],["pInputText","",3,"ngClass","ngStyle","value","disabled","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,o){1&e&&(s.TgZ(0,"span",0),s.TgZ(1,"input",1,2),s.NdJ("input",function(h){return o.onUserInput(h)})("keydown",function(h){return o.onInputKeyDown(h)})("keypress",function(h){return o.onInputKeyPress(h)})("paste",function(h){return o.onPaste(h)})("click",function(){return o.onInputClick()})("focus",function(h){return o.onInputFocus(h)})("blur",function(h){return o.onInputBlur(h)}),s.qZA(),s.YNc(3,Bq,3,12,"span",3),s.YNc(4,zq,1,6,"button",4),s.YNc(5,Vq,1,6,"button",4),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",s.kEZ(26,Uq,o.showButtons&&"stacked"===o.buttonLayout,o.showButtons&&"horizontal"===o.buttonLayout,o.showButtons&&"vertical"===o.buttonLayout))("ngStyle",o.style),s.xp6(1),s.Tol(o.inputStyleClass),s.Q6J("ngClass","p-inputnumber-input")("ngStyle",o.inputStyle)("value",o.formattedValue())("disabled",o.disabled),s.uIk("placeholder",o.placeholder)("title",o.title)("id",o.inputId)("size",o.size)("name",o.name)("autocomplete",o.autocomplete)("maxlength",o.maxlength)("tabindex",o.tabindex)("aria-label",o.ariaLabel)("aria-required",o.ariaRequired)("required",o.required)("aria-valuemin",o.min)("aria-valuemax",o.max),s.xp6(2),s.Q6J("ngIf",o.showButtons&&"stacked"===o.buttonLayout),s.xp6(1),s.Q6J("ngIf",o.showButtons&&"stacked"!==o.buttonLayout),s.xp6(1),s.Q6J("ngIf",o.showButtons&&"stacked"!==o.buttonLayout))},directives:[ne,or,XN,Xt,oP],styles:[".p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}"],encapsulation:2,changeDetection:0}),i})(),iB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,wP,Lw]]}),i})();const Gq=["container"],jq=["resizeHelper"],Yq=["reorderIndicatorUp"],qq=["reorderIndicatorDown"],Zq=["wrapper"],Wq=["table"],$q=["tableHeader"];function Xq(i,t){if(1&i&&(s.TgZ(0,"div",14),s._UZ(1,"i"),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Tol("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function Qq(i,t){1&i&&s.GkF(0)}function Jq(i,t){if(1&i&&(s.TgZ(0,"div",15),s.YNc(1,Qq,1,0,"ng-container",16),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.captionTemplate)}}function Kq(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"p-paginator",17),s.NdJ("onPageChange",function(a){return s.CHM(e),s.oxw().onPageChange(a)}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function eZ(i,t){1&i&&s.GkF(0)}function tZ(i,t){1&i&&s.GkF(0)}function nZ(i,t){if(1&i&&s._UZ(0,"tbody",25),2&i){const e=s.oxw(2);s.Q6J("value",e.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",e.frozenBodyTemplate)("frozen",!0)}}function iZ(i,t){1&i&&s.GkF(0)}const _v=function(i){return{$implicit:i}};function rZ(i,t){if(1&i&&(s.TgZ(0,"tfoot",26),s.YNc(1,iZ,1,0,"ng-container",20),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.footerGroupedTemplate||e.footerTemplate)("ngTemplateOutletContext",s.VKq(2,_v,e.columns))}}function oZ(i,t){if(1&i&&(s.TgZ(0,"table",18,19),s.YNc(2,eZ,1,0,"ng-container",20),s.TgZ(3,"thead",21),s.YNc(4,tZ,1,0,"ng-container",20),s.qZA(),s.YNc(5,nZ,1,5,"tbody",22),s._UZ(6,"tbody",23),s.YNc(7,rZ,2,4,"tfoot",24),s.qZA()),2&i){const e=s.oxw();s.Q6J("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),s.xp6(2),s.Q6J("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",s.VKq(11,_v,e.columns)),s.xp6(2),s.Q6J("ngTemplateOutlet",e.headerGroupedTemplate||e.headerTemplate)("ngTemplateOutletContext",s.VKq(13,_v,e.columns)),s.xp6(1),s.Q6J("ngIf",e.frozenValue||e.frozenBodyTemplate),s.xp6(1),s.Q6J("value",e.dataToRender)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate),s.xp6(1),s.Q6J("ngIf",e.footerGroupedTemplate||e.footerTemplate)}}function sZ(i,t){1&i&&s.GkF(0)}function aZ(i,t){1&i&&s.GkF(0)}function lZ(i,t){if(1&i&&s._UZ(0,"tbody",25),2&i){const e=s.oxw(2);s.Q6J("value",e.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate)("frozen",!0)}}function cZ(i,t){1&i&&s.GkF(0)}function uZ(i,t){if(1&i&&(s.TgZ(0,"tfoot",26),s.YNc(1,cZ,1,0,"ng-container",20),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.footerGroupedTemplate||e.footerTemplate)("ngTemplateOutletContext",s.VKq(2,_v,e.columns))}}function hZ(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"cdk-virtual-scroll-viewport",27),s.NdJ("scrolledIndexChange",function(a){return s.CHM(e),s.oxw().onScrollIndexChange(a)}),s.TgZ(1,"table",18,19),s.YNc(3,sZ,1,0,"ng-container",20),s.TgZ(4,"thead",21,28),s.YNc(6,aZ,1,0,"ng-container",20),s.qZA(),s.YNc(7,lZ,1,5,"tbody",22),s._UZ(8,"tbody",23),s.YNc(9,uZ,2,4,"tfoot",24),s.qZA(),s.qZA()}if(2&i){const e=s.oxw();s.Udp("height","flex"!==e.scrollHeight?e.scrollHeight:void 0),s.Q6J("itemSize",e.virtualRowHeight)("minBufferPx",e.minBufferPx)("maxBufferPx",e.maxBufferPx),s.xp6(1),s.Q6J("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),s.xp6(2),s.Q6J("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",s.VKq(16,_v,e.columns)),s.xp6(3),s.Q6J("ngTemplateOutlet",e.headerGroupedTemplate||e.headerTemplate)("ngTemplateOutletContext",s.VKq(18,_v,e.columns)),s.xp6(1),s.Q6J("ngIf",e.frozenValue||e.frozenBodyTemplate),s.xp6(1),s.Q6J("value",e.dataToRender)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate),s.xp6(1),s.Q6J("ngIf",e.footerGroupedTemplate||e.footerTemplate)}}function dZ(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"p-paginator",29),s.NdJ("onPageChange",function(a){return s.CHM(e),s.oxw().onPageChange(a)}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function pZ(i,t){1&i&&s.GkF(0)}function fZ(i,t){if(1&i&&(s.TgZ(0,"div",30),s.YNc(1,pZ,1,0,"ng-container",16),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.summaryTemplate)}}function mZ(i,t){1&i&&s._UZ(0,"div",31,32)}function gZ(i,t){1&i&&s._UZ(0,"span",33,34)}function _Z(i,t){1&i&&s._UZ(0,"span",35,36)}const yZ=function(i,t,e,o,a,h,v,k,z,$,oe,me,ke,Fe){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":o,"p-datatable-scrollable":a,"p-datatable-scrollable-vertical":h,"p-datatable-scrollable-horizontal":v,"p-datatable-scrollable-both":k,"p-datatable-flex-scrollable":z,"p-datatable-responsive-stack":$,"p-datatable-responsive-scroll":oe,"p-datatable-responsive":me,"p-datatable-grouped-header":ke,"p-datatable-grouped-footer":Fe}},vZ=function(i){return{height:i}},bZ=["pTableBody",""];function xZ(i,t){1&i&&s.GkF(0)}const _k=function(i,t,e,o,a){return{$implicit:i,rowIndex:t,columns:e,editing:o,frozen:a}};function wZ(i,t){if(1&i&&(s.ynx(0,3),s.YNc(1,xZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.dt.groupHeaderTemplate)("ngTemplateOutletContext",s.qbA(2,_k,o,h.dt.paginator?h.dt.first+a:a,h.columns,"row"===h.dt.editMode&&h.dt.isRowEditing(o),h.frozen))}}function CZ(i,t){1&i&&s.GkF(0)}function SZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,CZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.template)("ngTemplateOutletContext",s.qbA(2,_k,o,h.dt.paginator?h.dt.first+a:a,h.columns,"row"===h.dt.editMode&&h.dt.isRowEditing(o),h.frozen))}}function EZ(i,t){1&i&&s.GkF(0)}const TZ=function(i,t,e,o,a,h,v){return{$implicit:i,rowIndex:t,columns:e,editing:o,frozen:a,rowgroup:h,rowspan:v}};function MZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,EZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.template)("ngTemplateOutletContext",s.Hh0(2,TZ,o,h.dt.paginator?h.dt.first+a:a,h.columns,"row"===h.dt.editMode&&h.dt.isRowEditing(o),h.frozen,h.shouldRenderRowspan(h.value,o,a),h.calculateRowGroupSize(h.value,o,a)))}}function AZ(i,t){1&i&&s.GkF(0)}function kZ(i,t){if(1&i&&(s.ynx(0,3),s.YNc(1,AZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.dt.groupFooterTemplate)("ngTemplateOutletContext",s.qbA(2,_k,o,h.dt.paginator?h.dt.first+a:a,h.columns,"row"===h.dt.editMode&&h.dt.isRowEditing(o),h.frozen))}}function DZ(i,t){if(1&i&&(s.YNc(0,wZ,2,8,"ng-container",2),s.YNc(1,SZ,2,8,"ng-container",0),s.YNc(2,MZ,2,10,"ng-container",0),s.YNc(3,kZ,2,8,"ng-container",2)),2&i){const e=t.$implicit,o=t.index,a=s.oxw(2);s.Q6J("ngIf",a.dt.groupHeaderTemplate&&"subheader"===a.dt.rowGroupMode&&a.shouldRenderRowGroupHeader(a.value,e,o)),s.xp6(1),s.Q6J("ngIf","rowspan"!==a.dt.rowGroupMode),s.xp6(1),s.Q6J("ngIf","rowspan"===a.dt.rowGroupMode),s.xp6(1),s.Q6J("ngIf",a.dt.groupFooterTemplate&&"subheader"===a.dt.rowGroupMode&&a.shouldRenderRowGroupFooter(a.value,e,o))}}function IZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,DZ,4,4,"ng-template",1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function PZ(i,t){1&i&&s.GkF(0)}function RZ(i,t){if(1&i&&s.YNc(0,PZ,1,0,"ng-container",4),2&i){const e=t.$implicit,o=t.index,a=s.oxw(2);s.Q6J("ngTemplateOutlet",e?a.template:a.dt.loadingBodyTemplate)("ngTemplateOutletContext",s.qbA(2,_k,e,a.dt.paginator?a.dt.first+o:o,a.columns,"row"===a.dt.editMode&&a.dt.isRowEditing(e),a.frozen))}}function OZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,RZ,1,8,"ng-template",5),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("cdkVirtualForOf",e.value)("cdkVirtualForTrackBy",e.dt.rowTrackBy)("cdkVirtualForTemplateCacheSize",0)}}function FZ(i,t){1&i&&s.GkF(0)}const yk=function(i,t,e,o,a,h){return{$implicit:i,rowIndex:t,columns:e,expanded:o,editing:a,frozen:h}};function LZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,FZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.template)("ngTemplateOutletContext",s.HTZ(2,yk,o,h.dt.paginator?h.dt.first+a:a,h.columns,h.dt.isRowExpanded(o),"row"===h.dt.editMode&&h.dt.isRowEditing(o),h.frozen))}}function NZ(i,t){1&i&&s.GkF(0)}function BZ(i,t){if(1&i&&(s.ynx(0,3),s.YNc(1,NZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.dt.groupHeaderTemplate)("ngTemplateOutletContext",s.HTZ(2,yk,o,h.dt.paginator?h.dt.first+a:a,h.columns,h.dt.isRowExpanded(o),"row"===h.dt.editMode&&h.dt.isRowEditing(o),h.frozen))}}function zZ(i,t){1&i&&s.GkF(0)}function VZ(i,t){1&i&&s.GkF(0)}function UZ(i,t){if(1&i&&(s.ynx(0,3),s.YNc(1,VZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw(2),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.dt.groupFooterTemplate)("ngTemplateOutletContext",s.HTZ(2,yk,o,h.dt.paginator?h.dt.first+a:a,h.columns,h.dt.isRowExpanded(o),"row"===h.dt.editMode&&h.dt.isRowEditing(o),h.frozen))}}const rB=function(i,t,e,o){return{$implicit:i,rowIndex:t,columns:e,frozen:o}};function HZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,zZ,1,0,"ng-container",4),s.YNc(2,UZ,2,9,"ng-container",2),s.BQk()),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.dt.expandedRowTemplate)("ngTemplateOutletContext",s.l5B(3,rB,o,h.dt.paginator?h.dt.first+a:a,h.columns,h.frozen)),s.xp6(1),s.Q6J("ngIf",h.dt.groupFooterTemplate&&"subheader"===h.dt.rowGroupMode&&h.shouldRenderRowGroupFooter(h.value,o,a))}}function GZ(i,t){if(1&i&&(s.YNc(0,LZ,2,9,"ng-container",0),s.YNc(1,BZ,2,9,"ng-container",2),s.YNc(2,HZ,3,8,"ng-container",0)),2&i){const e=t.$implicit,o=t.index,a=s.oxw(2);s.Q6J("ngIf",!a.dt.groupHeaderTemplate),s.xp6(1),s.Q6J("ngIf",a.dt.groupHeaderTemplate&&"subheader"===a.dt.rowGroupMode&&a.shouldRenderRowGroupHeader(a.value,e,o)),s.xp6(1),s.Q6J("ngIf",a.dt.isRowExpanded(e))}}function jZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,GZ,3,3,"ng-template",1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function YZ(i,t){1&i&&s.GkF(0)}function qZ(i,t){1&i&&s.GkF(0)}function ZZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,qZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw(),o=e.$implicit,a=e.index,h=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",h.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",s.l5B(2,rB,o,h.dt.paginator?h.dt.first+a:a,h.columns,h.frozen))}}function WZ(i,t){if(1&i&&(s.YNc(0,YZ,1,0,"ng-container",4),s.YNc(1,ZZ,2,7,"ng-container",0)),2&i){const e=t.$implicit,o=t.index,a=s.oxw(2);s.Q6J("ngTemplateOutlet",a.template)("ngTemplateOutletContext",s.HTZ(3,yk,e,a.dt.paginator?a.dt.first+o:o,a.columns,a.dt.isRowExpanded(e),"row"===a.dt.editMode&&a.dt.isRowEditing(e),a.frozen)),s.xp6(1),s.Q6J("ngIf",a.dt.isRowExpanded(e))}}function $Z(i,t){if(1&i&&(s.ynx(0),s.YNc(1,WZ,2,10,"ng-template",1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function XZ(i,t){1&i&&s.GkF(0)}const oB=function(i,t){return{$implicit:i,frozen:t}};function QZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,XZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",s.WLB(2,oB,e.columns,e.frozen))}}function JZ(i,t){1&i&&s.GkF(0)}function KZ(i,t){if(1&i&&(s.ynx(0),s.YNc(1,JZ,1,0,"ng-container",4),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",s.WLB(2,oB,e.columns,e.frozen))}}const nW=["box"],iW=function(i,t){return{"p-checkbox-box p-component":!0,"p-highlight":i,"p-disabled":t}},rW=function(i){return{"pi pi-check":i}};let vk=(()=>{class i{constructor(){this.sortSource=new Bn.xQ,this.selectionSource=new Bn.xQ,this.contextMenuSource=new Bn.xQ,this.valueSource=new Bn.xQ,this.totalRecordsSource=new Bn.xQ,this.columnsSource=new Bn.xQ,this.resetSource=new Bn.xQ,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next()}onResetChange(){this.resetSource.next()}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),CP=(()=>{class i{constructor(e,o,a,h,v,k){this.el=e,this.zone=o,this.tableService=a,this.cd=h,this.filterService=v,this.overlayService=k,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectionChange=new s.vpe,this.contextMenuSelectionChange=new s.vpe,this.contextMenuSelectionMode="separate",this.rowTrackBy=(z,$)=>$,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.virtualRowHeight=28,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new s.vpe,this.onRowUnselect=new s.vpe,this.onPage=new s.vpe,this.onSort=new s.vpe,this.onFilter=new s.vpe,this.onLazyLoad=new s.vpe,this.onRowExpand=new s.vpe,this.onRowCollapse=new s.vpe,this.onContextMenuSelect=new s.vpe,this.onColResize=new s.vpe,this.onColReorder=new s.vpe,this.onRowReorder=new s.vpe,this.onEditInit=new s.vpe,this.onEditComplete=new s.vpe,this.onEditCancel=new s.vpe,this.onHeaderCheckboxToggle=new s.vpe,this.sortFunction=new s.vpe,this.firstChange=new s.vpe,this.rowsChange=new s.vpe,this.onStateSave=new s.vpe,this.onStateRestore=new s.vpe,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=nN()}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths(),this.scrollable&&("vertical"!==this.scrollDirection||"subheader"===this.rowGroupMode)&&this.updateScrollWidth(),this.scrollable&&this.virtualScroll&&(this.virtualScrollSubscription=this.virtualScrollBody.renderedRangeStream.subscribe(e=>{this.tableHeaderViewChild.nativeElement.style.top=e.start*this.virtualRowHeight*-1+"px"}))}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue),this.scrollable&&("vertical"!==this.scrollDirection||"subheader"===this.rowGroupMode)&&this.updateScrollWidth()),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder(),this.scrollable&&("vertical"!==this.scrollDirection||"subheader"===this.rowGroupMode)&&this.updateScrollWidth()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get dataToRender(){let e=this.filteredValue||this.value;return e?this.paginator&&!this.lazy?e.slice(this.first,this.first+this.rows):e:[]}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(Ci.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(Ci.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let o=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let a=o.metaKey||o.ctrlKey,h=this.getSortMeta(e.field);h?a?h.order=-1*h.order:(this._multiSortMeta=[{field:e.field,order:-1*h.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!a||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){if(this.sortField&&this.sortOrder){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):(this.value.sort((o,a)=>{let h=Ci.resolveFieldData(o,this.sortField),v=Ci.resolveFieldData(a,this.sortField),k=null;return k=null==h&&null!=v?-1:null!=h&&null==v?1:null==h&&null==v?0:"string"==typeof h&&"string"==typeof v?h.localeCompare(v):h<v?-1:h>v?1:0,this.sortOrder*k}),this._value=[...this.value]),this.hasFilter()&&this._filter());let e={field:this.sortField,order:this.sortOrder};this.onSort.emit(e),this.tableService.onSort(e)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,o)=>this.multisortField(e,o,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,o,a,h){let v=Ci.resolveFieldData(e,a[h].field),k=Ci.resolveFieldData(o,a[h].field),z=null;if(null==v&&null!=k)z=-1;else if(null!=v&&null==k)z=1;else if(null==v&&null==k)z=0;else if("string"==typeof v||v instanceof String){if(v.localeCompare&&v!=k)return a[h].order*v.localeCompare(k)}else z=v<k?-1:1;return v==k?a.length-1>h?this.multisortField(e,o,a,h+1):0:a[h].order*z}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let o=0;o<this.multiSortMeta.length;o++)if(this.multiSortMeta[o].field===e)return this.multiSortMeta[o];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let o=!1;if(this.multiSortMeta)for(let a=0;a<this.multiSortMeta.length;a++)if(this.multiSortMeta[a].field==e){o=!0;break}return o}}handleRowClick(e){let o=e.originalEvent.target,a=o.nodeName,h=o.parentElement&&o.parentElement.nodeName;if("INPUT"!=a&&"BUTTON"!=a&&"A"!=a&&"INPUT"!=h&&"BUTTON"!=h&&"A"!=h&&!nn.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)nn.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=e.rowIndex,this.selectRange(e.originalEvent,e.rowIndex);else{let v=e.rowData,k=this.isSelected(v),z=!this.rowTouched&&this.metaKeySelection,$=this.dataKey?String(Ci.resolveFieldData(v,this.dataKey)):null;if(this.anchorRowIndex=e.rowIndex,this.rangeRowIndex=e.rowIndex,z){let oe=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(k&&oe){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let me=this.findIndexInSelection(v);this._selection=this.selection.filter((ke,Fe)=>Fe!=me),this.selectionChange.emit(this.selection),$&&delete this.selectionKeys[$]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:v,type:"row"})}else this.isSingleSelectionMode()?(this._selection=v,this.selectionChange.emit(v),$&&(this.selectionKeys={},this.selectionKeys[$]=1)):this.isMultipleSelectionMode()&&(oe?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,v],this.selectionChange.emit(this.selection),$&&(this.selectionKeys[$]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex})}else if("single"===this.selectionMode)k?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex})):(this._selection=v,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex}),$&&(this.selectionKeys={},this.selectionKeys[$]=1));else if("multiple"===this.selectionMode)if(k){let oe=this.findIndexInSelection(v);this._selection=this.selection.filter((me,ke)=>ke!=oe),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex}),$&&delete this.selectionKeys[$]}else this._selection=this.selection?[...this.selection,v]:[v],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex}),$&&(this.selectionKeys[$]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const o=e.rowData;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=o,this.contextMenuSelectionChange.emit(o),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:o,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(o);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let a=this.isSelected(o),h=this.dataKey?String(Ci.resolveFieldData(o,this.dataKey)):null;a||(this.isSingleSelectionMode()?(this.selection=o,this.selectionChange.emit(o),h&&(this.selectionKeys={},this.selectionKeys[h]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),h&&(this.selectionKeys[h]=1))),this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:o,index:e.rowIndex})}}}selectRange(e,o){let a,h;this.anchorRowIndex>o?(a=o,h=this.anchorRowIndex):this.anchorRowIndex<o?(a=this.anchorRowIndex,h=o):(a=o,h=o),this.lazy&&this.paginator&&(a-=this.first,h-=this.first);let v=[];for(let k=a;k<=h;k++){let z=this.filteredValue?this.filteredValue[k]:this.value[k];if(!this.isSelected(z)){v.push(z),this._selection=[...this.selection,z];let $=this.dataKey?String(Ci.resolveFieldData(z,this.dataKey)):null;$&&(this.selectionKeys[$]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:v,type:"row"})}clearSelectionRange(e){let o,a;this.rangeRowIndex>this.anchorRowIndex?(o=this.anchorRowIndex,a=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(o=this.rangeRowIndex,a=this.anchorRowIndex):(o=this.rangeRowIndex,a=this.rangeRowIndex);for(let h=o;h<=a;h++){let v=this.value[h],k=this.findIndexInSelection(v);this._selection=this.selection.filter(($,oe)=>oe!=k);let z=this.dataKey?String(Ci.resolveFieldData(v,this.dataKey)):null;z&&delete this.selectionKeys[z],this.onRowUnselect.emit({originalEvent:e,data:v,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[Ci.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let o=-1;if(this.selection&&this.selection.length)for(let a=0;a<this.selection.length;a++)if(this.equals(e,this.selection[a])){o=a;break}return o}toggleRowWithRadio(e,o){this.preventSelectionSetterPropagation=!0,this.selection!=o?(this._selection=o,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:o,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(Ci.resolveFieldData(o,this.dataKey))]=1)):(this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:o,type:"radiobutton"})),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,o){this.selection=this.selection||[];let a=this.isSelected(o),h=this.dataKey?String(Ci.resolveFieldData(o,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,a){let v=this.findIndexInSelection(o);this._selection=this.selection.filter((k,z)=>z!=v),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:o,type:"checkbox"}),h&&delete this.selectionKeys[h]}else this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:o,type:"checkbox"}),h&&(this.selectionKeys[h]=1);this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,o){this._selection=o?this.filteredValue?this.filteredValue.slice():this.value.slice():[],this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:o}),this.isStateful()&&this.saveState()}equals(e,o){return"equals"===this.compareSelectionBy?e===o:Ci.equals(e,o,this.dataKey)}filter(e,o,a){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[o]&&delete this.filters[o]:this.filters[o]={value:e,matchMode:a},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,o){this.filter(e,"global",o)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let o=0;o<this.value.length;o++){let k,a=!0,h=!1,v=!1;for(let z in this.filters)if(this.filters.hasOwnProperty(z)&&"global"!==z){v=!0;let $=z,oe=this.filters[$];if(Array.isArray(oe)){for(let me of oe)if(a=this.executeLocalFilter($,this.value[o],me),me.operator===rN.OR&&a||me.operator===rN.AND&&!a)break}else a=this.executeLocalFilter($,this.value[o],oe);if(!a)break}if(this.filters.global&&!h&&e)for(let z=0;z<e.length&&(h=this.filterService.filters[this.filters.global.matchMode](Ci.resolveFieldData(this.value[o],e[z].field||e[z]),this.filters.global.value,this.filterLocale),!h);z++);k=this.filters.global?v?v&&a&&h:h:v&&a,k&&this.filteredValue.push(this.value[o])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,o,a){let h=a.value,v=a.matchMode||Oc.STARTS_WITH,k=Ci.resolveFieldData(o,e);return this.filterService.filters[v](k,h,this.filterLocale)}hasFilter(){let e=!0;for(let o in this.filters)if(this.filters.hasOwnProperty(o)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}exportCSV(e){let o,a="",h=this.frozenColumns?[...this.frozenColumns,...this.columns]:this.columns;e&&e.selectionOnly?o=this.selection||[]:(o=this.filteredValue||this.value,this.frozenValue&&(o=o?[...this.frozenValue,...o]:this.frozenValue));for(let k=0;k<h.length;k++){let z=h[k];!1!==z.exportable&&z.field&&(a+='"'+(z.header||z.field)+'"',k<h.length-1&&(a+=this.csvSeparator))}o.forEach((k,z)=>{a+="\n";for(let $=0;$<h.length;$++){let oe=h[$];if(!1!==oe.exportable&&oe.field){let me=Ci.resolveFieldData(k,oe.field);me=null!=me?this.exportFunction?this.exportFunction({data:me,field:oe.field}):String(me).replace(/"/g,'""'):"",a+='"'+me+'"',$<h.length-1&&(a+=this.csvSeparator)}}});let v=new Blob([a],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(v,this.exportFilename+".csv");else{let k=document.createElement("a");k.style.display="none",document.body.appendChild(k),void 0!==k.download?(k.setAttribute("href",URL.createObjectURL(v)),k.setAttribute("download",this.exportFilename+".csv"),k.click()):(a="data:text/csv;charset=utf-8,"+a,window.open(encodeURI(a))),document.body.removeChild(k)}}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScrollBody&&this.virtualScrollBody.scrollToIndex(e)}onScrollIndexChange(e){this.lazy&&(this.virtualScrollTimeout&&clearTimeout(this.virtualScrollTimeout),this.virtualScrollTimeout=setTimeout(()=>{let o=Math.floor(e/this.rows),a=0===o?0:(o-1)*this.rows,h=0===o?2*this.rows:3*this.rows;o!==this.virtualPage&&(this.virtualPage=o,this.onLazyLoad.emit({first:a,rows:h,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}))},this.virtualScrollDelay))}scrollTo(e){this.virtualScrollBody?this.virtualScrollBody.scrollTo(e):this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top)}updateEditingCell(e,o,a,h){this.editingCell=e,this.editingCellData=o,this.editingCellField=a,this.editingCellRowIndex=h,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===nn.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(nn.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let o=String(Ci.resolveFieldData(e,this.dataKey));this.editingRowKeys[o]=!0}saveRowEdit(e,o){if(0===nn.find(o,".ng-invalid.ng-dirty").length){let a=String(Ci.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[a]}}cancelRowEdit(e){let o=String(Ci.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[o]}toggleRow(e,o){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let a=String(Ci.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[a]?(delete this.expandedRowKeys[a],this.onRowCollapse.emit({originalEvent:o,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[a]=!0,this.onRowExpand.emit({originalEvent:o,data:e})),o&&o.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(Ci.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(Ci.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let o=nn.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-o+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let o=nn.getOffset(this.containerViewChild.nativeElement).left;nn.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-o+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,a=this.resizeColumnElement.offsetWidth+e;if(a>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let v=this.resizeColumnElement.nextElementSibling,k=v.offsetWidth-e;a>15&&k>15&&(this.scrollable?this.resizeTableCells(a,k):(this.resizeColumnElement.style.width=a+"px",v&&(v.style.width=k+"px")))}else if("expand"===this.columnResizeMode){let v=this.tableViewChild.nativeElement.offsetWidth+e;if(this.scrollable){this.resizeTableCells(a,null);let k=nn.calculateScrollbarWidth(this.wrapperViewChild.nativeElement),z=this.containerViewChild.nativeElement.offsetWidth>v+k;this.tableViewChild.nativeElement.style.width=v+"px",this.wrapperViewChild.nativeElement.style.width=z?v+k+"px":"auto"}else this.tableViewChild.nativeElement.style.width=v+"px",this.resizeColumnElement.style.width=a+"px"}this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",nn.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,o){let a=nn.index(this.resizeColumnElement),h=[];nn.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(z=>h.push(nn.getOuterWidth(z))),this.destroyStyleElement(),this.createStyleElement();let k="";h.forEach((z,$)=>{let oe=$===a?e:o&&$===a+1?o:z;k+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${$+1}) {\n                    flex: 0 0 ${oe}px;\n                }\n\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${$+1}) {\n                    flex: 0 0 ${oe}px;\n                }\n            `}),this.styleElement.innerHTML=k}onColumnDragStart(e,o){this.reorderIconWidth=nn.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=nn.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=o,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,o){if(this.reorderableColumns&&this.draggedColumn&&o){e.preventDefault();let a=nn.getOffset(this.containerViewChild.nativeElement),h=nn.getOffset(o);if(this.draggedColumn!=o){let v=nn.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),k=nn.indexWithinGroup(o,"preorderablecolumn"),z=h.left-a.left,oe=h.left+o.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=h.top-a.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=h.top-a.top+o.offsetHeight+"px",e.pageX>oe?(this.reorderIndicatorUpViewChild.nativeElement.style.left=z+o.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=z+o.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=z-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=z-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),k-v==1&&-1===this.dropPosition||k-v==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,o){if(e.preventDefault(),this.draggedColumn){let a=nn.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),h=nn.indexWithinGroup(o,"preorderablecolumn"),v=a!=h;v&&(h-a==1&&-1===this.dropPosition||a-h==1&&1===this.dropPosition)&&(v=!1),v&&h<a&&1===this.dropPosition&&(h+=1),v&&h>a&&-1===this.dropPosition&&(h-=1),v&&(Ci.reorderArray(this.columns,a,h),this.onColReorder.emit({dragIndex:a,dropIndex:h,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,o){this.rowDragging=!0,this.draggedRowIndex=o,e.dataTransfer.setData("text","b")}onRowDragOver(e,o,a){if(this.rowDragging&&this.draggedRowIndex!==o){let h=nn.getOffset(a).top+nn.getWindowScrollTop(),v=e.pageY,k=h+nn.getOuterHeight(a)/2,z=a.previousElementSibling;v<k?(nn.removeClass(a,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=o,z?nn.addClass(z,"p-datatable-dragpoint-bottom"):nn.addClass(a,"p-datatable-dragpoint-top")):(z?nn.removeClass(z,"p-datatable-dragpoint-bottom"):nn.addClass(a,"p-datatable-dragpoint-top"),this.droppedRowIndex=o+1,nn.addClass(a,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,o){let a=o.previousElementSibling;a&&nn.removeClass(a,"p-datatable-dragpoint-bottom"),nn.removeClass(o,"p-datatable-dragpoint-bottom"),nn.removeClass(o,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,o){if(null!=this.droppedRowIndex){let a=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;Ci.reorderArray(this.value,this.draggedRowIndex,a),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:a})}this.onRowDragLeave(e,o),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let o={};this.paginator&&(o.first=this.first,o.rows=this.rows),this.sortField&&(o.sortField=this.sortField,o.sortOrder=this.sortOrder),this.multiSortMeta&&(o.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(o.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(o),this.reorderableColumns&&this.saveColumnOrder(o),this.selection&&(o.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(o.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(o)),this.onStateSave.emit(o)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const o=this.getStorage().getItem(this.stateKey),a=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(o){let v=JSON.parse(o,function(v,k){return"string"==typeof k&&a.test(k)?new Date(k):k});this.paginator&&(void 0!==this.first&&(this.first=v.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=v.rows,this.rowsChange.emit(this.rows))),v.sortField&&(this.restoringSort=!0,this._sortField=v.sortField,this._sortOrder=v.sortOrder),v.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=v.multiSortMeta),v.filters&&(this.restoringFilter=!0,this.filters=v.filters),this.resizableColumns&&(this.columnWidthsState=v.columnWidths,this.tableWidthState=v.tableWidth,this.wrapperWidthState=v.wrapperWidth),v.expandedRowKeys&&(this.expandedRowKeys=v.expandedRowKeys),v.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(v.selection)),this.stateRestored=!0,this.onStateRestore.emit(v)}}saveColumnWidths(e){let o=[];nn.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(h=>o.push(nn.getOuterWidth(h))),e.columnWidths=o.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=nn.getOuterWidth(this.tableViewChild.nativeElement)+"px",e.wrapperWidth=this.wrapperViewChild.nativeElement.style.width)}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&(this.tableWidthState&&(this.tableViewChild.nativeElement.style.width=this.tableWidthState),this.wrapperWidthState&&(this.wrapperViewChild.nativeElement.style.width=this.wrapperWidthState)),this.createStyleElement(),this.scrollable&&e&&e.length>0){let o="";e.forEach((a,h)=>{o+=`\n                            #${this.id} .p-datatable-thead > tr > th:nth-child(${h+1}) {\n                                flex: 0 0 ${a}px;\n                            }\n\n                            #${this.id} .p-datatable-tbody > tr > td:nth-child(${h+1}) {\n                                flex: 0 0 ${a}px;\n                            }\n                        `}),this.styleElement.innerHTML=o}else nn.find(this.tableViewChild.nativeElement,".p-datatable-thead > tr > th").forEach((o,a)=>{o.style.width=e[a]+"px"})}}saveColumnOrder(e){if(this.columns){let o=[];this.columns.map(a=>{o.push(a.field||a.key)}),e.columnOrder=o}}restoreColumnOrder(){const o=this.getStorage().getItem(this.stateKey);if(o){let h=JSON.parse(o).columnOrder;if(h){let v=[];h.map(k=>{let z=this.findColumnByKey(k);z&&v.push(z)}),this.columnOrderStateRestored=!0,this.columns=v}}}updateScrollWidth(){if(this.tableViewChild&&this.tableViewChild.nativeElement){let e=nn.getWidth(this.tableViewChild.nativeElement.parentElement);this.tableViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.scrollWidth>e?this.tableViewChild.nativeElement.scrollWidth+"px":e-nn.calculateScrollbarHeight()+"px"}}findColumnByKey(e){if(!this.columns)return null;for(let o of this.columns)if(o.key===e||o.field===e)return o}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.virtualScrollSubscription&&this.virtualScrollSubscription.unsubscribe(),this.destroyStyleElement(),this.destroyResponsiveStyle()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(vk),s.Y36(s.sBO),s.Y36(iN),s.Y36(ik))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-table"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,gx,4),2&e){let h;s.iGM(h=s.CRH())&&(o.templates=h)}},viewQuery:function(e,o){if(1&e&&(s.Gf(Gq,5),s.Gf(jq,5),s.Gf(Yq,5),s.Gf(qq,5),s.Gf(Zq,5),s.Gf(Wq,5),s.Gf($q,5),s.Gf(CS,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.containerViewChild=a.first),s.iGM(a=s.CRH())&&(o.resizeHelperViewChild=a.first),s.iGM(a=s.CRH())&&(o.reorderIndicatorUpViewChild=a.first),s.iGM(a=s.CRH())&&(o.reorderIndicatorDownViewChild=a.first),s.iGM(a=s.CRH())&&(o.wrapperViewChild=a.first),s.iGM(a=s.CRH())&&(o.tableViewChild=a.first),s.iGM(a=s.CRH())&&(o.tableHeaderViewChild=a.first),s.iGM(a=s.CRH())&&(o.virtualScrollBody=a.first)}},inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollDelay:"virtualScrollDelay",virtualRowHeight:"virtualRowHeight",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[s._Bn([vk]),s.TTD],decls:14,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],["role","table","class","p-datatable-table",3,"ngClass","ngStyle",4,"ngIf"],["tabindex","0","class","p-datatable-virtual-scrollable-body",3,"itemSize","height","minBufferPx","maxBufferPx","scrolledIndexChange",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"value","pTableBody","pTableBodyTemplate"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["tabindex","0",1,"p-datatable-virtual-scrollable-body",3,"itemSize","minBufferPx","maxBufferPx","scrolledIndexChange"],["tableHeader",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,o){1&e&&(s.TgZ(0,"div",0,1),s.YNc(2,Xq,2,2,"div",2),s.YNc(3,Jq,2,1,"div",3),s.YNc(4,Kq,1,16,"p-paginator",4),s.TgZ(5,"div",5,6),s.YNc(7,oZ,8,15,"table",7),s.YNc(8,hZ,10,20,"cdk-virtual-scroll-viewport",8),s.qZA(),s.YNc(9,dZ,1,16,"p-paginator",9),s.YNc(10,fZ,2,1,"div",10),s.YNc(11,mZ,2,0,"div",11),s.YNc(12,gZ,2,0,"span",12),s.YNc(13,_Z,2,0,"span",13),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngStyle",o.style)("ngClass",s.rFY(16,yZ,[o.rowHover||o.selectionMode,o.autoLayout,o.resizableColumns,o.resizableColumns&&"fit"===o.columnResizeMode,o.scrollable,o.scrollable&&"vertical"===o.scrollDirection,o.scrollable&&"horizontal"===o.scrollDirection,o.scrollable&&"both"===o.scrollDirection,o.scrollable&&"flex"===o.scrollHeight,"stack"===o.responsiveLayout,"scroll"===o.responsiveLayout,o.responsive,null!=o.headerGroupedTemplate,null!=o.footerGroupedTemplate])),s.uIk("id",o.id),s.xp6(2),s.Q6J("ngIf",o.loading&&o.showLoader),s.xp6(1),s.Q6J("ngIf",o.captionTemplate),s.xp6(1),s.Q6J("ngIf",o.paginator&&("top"===o.paginatorPosition||"both"==o.paginatorPosition)),s.xp6(1),s.Q6J("ngStyle",s.VKq(31,vZ,o.scrollHeight)),s.xp6(2),s.Q6J("ngIf",!o.virtualScroll),s.xp6(1),s.Q6J("ngIf",o.virtualScroll),s.xp6(1),s.Q6J("ngIf",o.paginator&&("bottom"===o.paginatorPosition||"both"==o.paginatorPosition)),s.xp6(1),s.Q6J("ngIf",o.summaryTemplate),s.xp6(1),s.Q6J("ngIf",o.resizableColumns),s.xp6(1),s.Q6J("ngIf",o.reorderableColumns),s.xp6(1),s.Q6J("ngIf",o.reorderableColumns))},directives:function(){return[or,ne,Xt,No,SY,MW,CS,fF]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-badge,.p-datatable .p-sortable-column .p-sortable-column-icon{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table,.p-datatable-responsive-scroll>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-table,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot,.p-datatable-scrollable .p-datatable-thead{display:block}.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr,.p-datatable-scrollable .p-datatable-thead>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td,.p-datatable-scrollable .p-datatable-thead>tr>th{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable .p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable .p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable .p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th\n.p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot,.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr,.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td,.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th{display:table-cell}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-tbody>tr>td,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-thead>tr>th{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-cancel,.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-down,.p-datatable-reorder-indicator-up{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-clear-button,.p-column-filter-menu-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}cdk-virtual-scroll-viewport{outline:0 none}"],encapsulation:2}),i})(),MW=(()=>{class i{constructor(e,o,a,h){this.dt=e,this.tableService=o,this.cd=a,this.el=h,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}shouldRenderRowGroupHeader(e,o,a){let h=Ci.resolveFieldData(o,this.dt.groupRowsBy),v=e[a-1];return!v||h!==Ci.resolveFieldData(v,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,o,a){let h=Ci.resolveFieldData(o,this.dt.groupRowsBy),v=e[a+1];return!v||h!==Ci.resolveFieldData(v,this.dt.groupRowsBy)}shouldRenderRowspan(e,o,a){let h=Ci.resolveFieldData(o,this.dt.groupRowsBy),v=e[a-1];return!v||h!==Ci.resolveFieldData(v,this.dt.groupRowsBy)}calculateRowGroupSize(e,o,a){let h=Ci.resolveFieldData(o,this.dt.groupRowsBy),v=h,k=0;for(;h===v;){k++;let z=e[++a];if(!z)break;v=Ci.resolveFieldData(z,this.dt.groupRowsBy)}return 1===k?null:k}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=nn.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=nn.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(CP),s.Y36(vk),s.Y36(s.sBO),s.Y36(s.SBq))},i.\u0275cmp=s.Xpm({type:i,selectors:[["","pTableBody",""]],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows"},attrs:bZ,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkVirtualFor","",3,"cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"]],template:function(e,o){1&e&&(s.YNc(0,IZ,2,2,"ng-container",0),s.YNc(1,OZ,2,3,"ng-container",0),s.YNc(2,jZ,2,2,"ng-container",0),s.YNc(3,$Z,2,2,"ng-container",0),s.YNc(4,QZ,2,5,"ng-container",0),s.YNc(5,KZ,2,5,"ng-container",0)),2&e&&(s.Q6J("ngIf",!o.dt.expandedRowTemplate&&!o.dt.virtualScroll),s.xp6(1),s.Q6J("ngIf",!o.dt.expandedRowTemplate&&o.dt.virtualScroll),s.xp6(1),s.Q6J("ngIf",o.dt.expandedRowTemplate&&!(o.frozen&&o.dt.frozenExpandedRowTemplate)),s.xp6(1),s.Q6J("ngIf",o.dt.frozenExpandedRowTemplate&&o.frozen),s.xp6(1),s.Q6J("ngIf",o.dt.loading),s.xp6(1),s.Q6J("ngIf",o.dt.isEmpty()&&!o.dt.loading))},directives:[Xt,Je,No,_F],encapsulation:2}),i})(),AW=(()=>{class i{constructor(e,o,a){this.dt=e,this.tableService=o,this.cd=a,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),nn.clearSelection()}onFocus(){nn.addClass(this.boxViewChild.nativeElement,"p-focus")}onBlur(){nn.removeClass(this.boxViewChild.nativeElement,"p-focus")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(CP),s.Y36(vk),s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-tableCheckbox"]],viewQuery:function(e,o){if(1&e&&s.Gf(nW,5),2&e){let a;s.iGM(a=s.CRH())&&(o.boxViewChild=a.first)}},inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:14,consts:[[1,"p-checkbox","p-component",3,"click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.NdJ("click",function(h){return o.onClick(h)}),s.TgZ(1,"div",1),s.TgZ(2,"input",2),s.NdJ("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),s.qZA(),s.qZA(),s.TgZ(3,"div",3,4),s._UZ(5,"span",5),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("checked",o.checked)("disabled",o.disabled),s.uIk("id",o.inputId)("name",o.name)("required",o.required)("aria-label",o.ariaLabel),s.xp6(1),s.Q6J("ngClass",s.WLB(9,iW,o.checked,o.disabled)),s.uIk("aria-checked",o.checked),s.xp6(2),s.Q6J("ngClass",s.VKq(12,rW,o.checked)))},directives:[ne],encapsulation:2,changeDetection:0}),i})(),kW=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,EY,wP,bP,cx,BA,Lw,FY,Lq,iB,HY],Wm,cx]}),i})();const DW=["*",[["mat-card-footer"]]],IW=["*","mat-card-footer"];let sB=(()=>{class i{constructor(e){this._animationMode=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(th,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("_mat-animation-noopable","NoopAnimations"===o._animationMode)},exportAs:["matCard"],ngContentSelectors:IW,decls:2,vars:0,template:function(e,o){1&e&&(s.F$t(DW),s.Hsn(0),s.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),i})(),aB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[Ir],Ir]}),i})();function NW(i,t){1&i&&(s.TgZ(0,"tr"),s._UZ(1,"th",4),s.TgZ(2,"th"),s._uU(3,"Product"),s.qZA(),s.TgZ(4,"th"),s._uU(5,"Unit Price"),s.qZA(),s.TgZ(6,"th"),s._uU(7,"Quantity"),s.qZA(),s.TgZ(8,"th"),s._uU(9,"Total Price"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Action"),s.qZA(),s.qZA())}function BW(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s.TgZ(2,"p-tableCheckbox",5,6),s.NdJ("click",function(a){const h=s.CHM(e),v=h.$implicit,k=h.rowIndex,z=s.MAs(3);return s.oxw().info(v,k,z,a)}),s.qZA(),s.qZA(),s.TgZ(4,"td"),s._uU(5),s.qZA(),s.TgZ(6,"td"),s._uU(7),s.qZA(),s.TgZ(8,"td"),s.TgZ(9,"p-inputNumber",7,8),s.NdJ("ngModelChange",function(a){const v=s.CHM(e).rowIndex;return s.oxw().products[v].quantity=a})("click",function(){const h=s.CHM(e).rowIndex,v=s.MAs(10);return s.oxw().getInfo(v,h)})("click",function(){const a=s.CHM(e),h=a.rowIndex,v=a.$implicit,k=s.oxw();return k.quantityControl(h,k.products[h].quantity,v.brand,v.price)}),s.qZA(),s.qZA(),s.TgZ(11,"td"),s._uU(12),s.qZA(),s.TgZ(13,"td"),s.TgZ(14,"button",9),s.NdJ("click",function(){const h=s.CHM(e).$implicit;return s.oxw().deleteCart(h.brand)}),s._uU(15,"Delete"),s.qZA(),s.qZA(),s.qZA()}if(2&i){const e=t.$implicit,o=t.rowIndex,a=s.oxw();s.xp6(2),s.Q6J("value",e),s.xp6(3),s.Oqu(e.brand),s.xp6(2),s.Oqu(e.price),s.xp6(2),s.Udp("margin-left","-6rem")("text-align","center"),s.Q6J("disabled",a.disablequantity)("ngModel",a.products[o].quantity)("showButtons",!0)("step",1),s.xp6(3),s.Oqu(e.totalprice)}}const zW=[{path:"",component:_5},{path:"register",component:G5},{path:"forgotpassword",component:a5},{path:"adminpage",component:eR,canActivate:[v_,yx]},{path:"adminmanageinv",component:WH,canActivate:[v_,yx]},{path:"studentpage",component:j5,canActivate:[v_,fN]},{path:"supplierpage",component:sd,canActivate:[v_,HC]},{path:"adminprofile",component:q5,canActivate:[v_,yx]},{path:"adminviewhistory/:id",component:aG,canActivate:[v_,yx]},{path:"adminaddorder",component:fj,canActivate:[v_,yx]},{path:"admincartpage",component:(()=>{class i{constructor(e){this.fs=e,this.products=[],this.selectedProducts3=[],this.cartinfo=[],this.cartinfo2=[],this.isMofile=!1,this.difference=0,this.x=0,this.checkInfo2=[],this.totalprice=0,this.checked=!1,this.overallprice=0,this.overallquantity=0,this.checkInfo=[],this.x1=[],this.x2=[],this.x3=[],this.x4=[],this.total=0,this.total2=0,this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").snapshotChanges().subscribe(o=>{this.cartinfo=[],o.map(a=>{this.totalprice=Number(a.payload.doc.data().quantity)*a.payload.doc.data().price;let h={brand:a.payload.doc.data().brand,price:a.payload.doc.data().price,quantity:a.payload.doc.data().quantity,compname:a.payload.doc.data().compname,totalprice:this.totalprice};this.cartinfo.push(h),this.products=this.cartinfo})})}ngOnInit(){}info(e,o,a,h){this.status=a.checked,a.checked?(this.x1.push(e),this.overallprice+=a.value.totalprice,this.disablequantity=!0,this.overallquantity+=a.value.quantity,this.x3.push(o)):a.checked||(this.x1.splice(o,1),this.x3.splice(o,1),this.disablequantity=!1,this.overallprice-=a.value.totalprice,this.overallquantity-=a.value.quantity);let v=[...new Set(this.x3)];console.log(v),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e.brand).update({totalprice:e.totalprice,quantity:e.quantity})}quantityControl(e,o,a,h){this.total=0,this.total2=0;let v=o*h;this.x2=[],this.x4=[],this.cartinfo.forEach(k=>{this.x2.push(k.quantity*k.price),this.x4.push(k.quantity),console.log(this.x2),console.log(this.x4)});for(let k=0;k<this.x3.length;k++){let $=this.x2[k],oe=this.x4[k];this.total+=$,this.total2+=oe,console.log($),console.log(oe)}this.overallprice=this.total,this.overallquantity=this.total2,this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(a).update({quantity:o,totalprice:v})}getInfo(e,o){this.status&&(this.overallquantity=e.value,console.log(this.products)),this.status&&console.log(this.products[o])}totalBar(){this.x1.forEach(e=>{this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e.brand).snapshotChanges().subscribe(o=>{var a;let h=null===(a=o.payload.data())||void 0===a?void 0:a.totalprice;console.log(h)})})}deleteCart(e){this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e).delete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Wh))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-admin-cart-page"]],decls:7,vars:4,consts:[[1,"card"],["dataKey","brand",3,"value","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"width","3rem"],[3,"value","click"],["e",""],["buttonLayout","horizontal","spinnerMode","horizontal","decrementButtonClass","p-button-danger","incrementButtonClass","p-button-success","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"disabled","ngModel","showButtons","step","ngModelChange","click"],["p",""],["mat-raised-button","",3,"click"]],template:function(e,o){1&e&&(s._UZ(0,"app-adminnavbarpage"),s.TgZ(1,"div",0),s.TgZ(2,"p-table",1),s.NdJ("selectionChange",function(h){return o.selectedProducts3=h}),s.YNc(3,NW,12,0,"ng-template",2),s.YNc(4,BW,16,12,"ng-template",3),s.qZA(),s.qZA(),s.TgZ(5,"mat-card"),s._uU(6),s.qZA()),2&e&&(s.xp6(2),s.Q6J("value",o.products)("selection",o.selectedProducts3),s.xp6(4),s.AsE("Total (",o.overallquantity,"): RM ",o.overallprice,""))},directives:[Zb,CP,gx,sB,AW,nB,fx,LS,cv],styles:["table[_ngcontent-%COMP%]{width:100%}input[type=number][_ngcontent-%COMP%]{padding:10px}p-inputNumber[_ngcontent-%COMP%]{margin-left:-20px}"]}),i})(),canActivate:[v_,yx]}];let VW=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[vd.forRoot(zW)],vd]}),i})(),UW=(()=>{class i{constructor(){this.title="UMPCafeSupplyChainManagementSystem"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){1&e&&s._UZ(0,"router-outlet")},directives:[Fv],styles:[""]}),i})();function lB(i,t,e){const o={timing:i,delay:0,rotateX:t,rotateY:e};return dS([zn({"backface-visibility":"visible"}),Dr("{{ timing }}s {{ delay }}s ease-in",h_([zn({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),zn({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),zn({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),zn({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),zn({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:o})}RegExp(/^(?=.*?[a-z])/),RegExp(/^(?=.*?[A-Z])/),RegExp(/^(?=.*?[0-9])/),RegExp(/^(?=.*?[" !"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"])/),lB(1,1,0),lB(1,0,1),dS(Dr("{{ timing }}s {{ delay }}s",h_([zn({transform:"translate3d(0, 0, 0)",offset:0}),zn({transform:"translate3d(-10px, 0, 0)",offset:.1}),zn({transform:"translate3d(10px, 0, 0)",offset:.2}),zn({transform:"translate3d(-10px, 0, 0)",offset:.3}),zn({transform:"translate3d(10px, 0, 0)",offset:.4}),zn({transform:"translate3d(-10px, 0, 0)",offset:.5}),zn({transform:"translate3d(10px, 0, 0)",offset:.6}),zn({transform:"translate3d(-10px, 0, 0)",offset:.7}),zn({transform:"translate3d(10px, 0, 0)",offset:.8}),zn({transform:"translate3d(-10px, 0, 0)",offset:.9}),zn({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}});let v8=(()=>{class i{static forRoot(){return{ngModule:i,providers:[]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,pN,aB,qN,vS]]}),i})();var b8=nt(3300);window.ApexCharts=nt.n(b8)();let C8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[]]}),i})();function S8(i,t){if(1&i&&(s.O4$(),s._UZ(0,"circle",3)),2&i){const e=s.oxw();s.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),s.uIk("r",e._getCircleRadius())}}function E8(i,t){if(1&i&&(s.O4$(),s._UZ(0,"circle",3)),2&i){const e=s.oxw();s.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),s.uIk("r",e._getCircleRadius())}}class k8{constructor(t){this._elementRef=t}}const D8=xw(k8,"primary"),hB=new s.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class x_ extends D8{constructor(t,e,o,a,h){super(t),this._elementRef=t,this._document=o,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const v=x_._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),v.has(o.head)||v.set(o.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations="NoopAnimations"===a&&!!h&&!h._forceAnimations,h&&(h.diameter&&(this.diameter=h.diameter),h.strokeWidth&&(this.strokeWidth=h.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Rl(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Rl(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Rl(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=zI(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,o=x_._diameters;let a=o.get(t);if(!a||!a.has(e)){const h=this._document.createElement("style");h.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),h.textContent=this._getAnimationText(),t.appendChild(h),a||(a=new Set,o.set(t,a)),a.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}x_.\u0275fac=function(t){return new(t||x_)(s.Y36(s.SBq),s.Y36(xo),s.Y36(wt,8),s.Y36(th,8),s.Y36(hB))},x_.\u0275cmp=s.Xpm({type:x_,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(s.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),s.Udp("width",e.diameter,"px")("height",e.diameter,"px"),s.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[s.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(s.O4$(),s.TgZ(0,"svg",0),s.YNc(1,S8,1,9,"circle",1),s.YNc(2,E8,1,7,"circle",2),s.qZA()),2&t&&(s.Udp("width",e.diameter,"px")("height",e.diameter,"px"),s.Q6J("ngSwitch","indeterminate"===e.mode),s.uIk("viewBox",e._getViewBox()),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngSwitchCase",!1))},directives:[Ni,Nn],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),x_._diameters=new WeakMap;let R8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[Ir,sr],Ir]}),i})(),O8=(()=>{class i{constructor(e){this.admins=e}intercept(e,o){return this.admins.isLoading.next(!0),o.handle(e).pipe(Os(()=>{this.admins.isLoading.next(!1)}))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(rk))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function F8(i,t){}class EP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const L8={dialogContainer:As("dialogContainer",[ko("void, exit",zn({opacity:0,transform:"scale(0.7)"})),ko("enter",zn({transform:"none"})),Sr("* => enter",Dr("150ms cubic-bezier(0, 0, 0.2, 1)",zn({transform:"none",opacity:1}))),Sr("* => void, * => exit",Dr("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",zn({opacity:0})))])};let N8=(()=>{class i extends EA{constructor(e,o,a,h,v,k){super(),this._elementRef=e,this._focusTrapFactory=o,this._changeDetectorRef=a,this._config=v,this._focusMonitor=k,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=z=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(z)),this._ariaLabelledBy=v.ariaLabelledBy||null,this._document=h}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const o=this._getActiveElement(),a=this._elementRef.nativeElement;(!o||o===this._document.body||o===a||a.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._getActiveElement())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,o=this._getActiveElement();return e===o||e.contains(o)}_getActiveElement(){var e;const o=this._document.activeElement;return(null===(e=null==o?void 0:o.shadowRoot)||void 0===e?void 0:e.activeElement)||o}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(XM),s.Y36(s.sBO),s.Y36(wt,8),s.Y36(EP),s.Y36(eh))},i.\u0275dir=s.lG2({type:i,viewQuery:function(e,o){if(1&e&&s.Gf(ux,7),2&e){let a;s.iGM(a=s.CRH())&&(o._portalOutlet=a.first)}},features:[s.qOj]}),i})(),B8=(()=>{class i extends N8{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:o}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:o})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:o}))}_onAnimationStart({toState:e,totalTime:o}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:o}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:o})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=s.n5z(i)))(o||i)}}(),i.\u0275cmp=s.Xpm({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,o){1&e&&s.WFA("@dialogContainer.start",function(h){return o._onAnimationStart(h)})("@dialogContainer.done",function(h){return o._onAnimationDone(h)}),2&e&&(s.Ikx("id",o._id),s.uIk("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),s.d8E("@dialogContainer",o._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,o){1&e&&s.YNc(0,F8,0,0,"ng-template",0)},directives:[ux],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[L8.dialogContainer]}}),i})(),z8=0;class TP{constructor(t,e,o="mat-dialog-"+z8++){this._overlayRef=t,this._containerInstance=e,this.id=o,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Bn.xQ,this._afterClosed=new Bn.xQ,this._beforeClosed=new Bn.xQ,this._state=0,e._id=o,e._animationStateChanged.pipe(w(a=>"opened"===a.state),ue(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(w(a=>"closed"===a.state),ue(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(w(a=>27===a.keyCode&&!this.disableClose&&!La(a))).subscribe(a=>{a.preventDefault(),MP(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():MP(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(w(e=>"closing"===e.state),ue(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function MP(i,t,e){return void 0!==i._containerInstance&&(i._containerInstance._closeInteractionType=t),i.close(e)}const V8=new s.OlP("MatDialogData"),U8=new s.OlP("mat-dialog-default-options"),dB=new s.OlP("mat-dialog-scroll-strategy"),G8={provide:dB,deps:[Bd],useFactory:function(i){return()=>i.scrollStrategies.block()}};let j8=(()=>{class i{constructor(e,o,a,h,v,k,z,$,oe){this._overlay=e,this._injector=o,this._defaultOptions=a,this._parentDialog=h,this._overlayContainer=v,this._dialogRefConstructor=z,this._dialogContainerType=$,this._dialogDataToken=oe,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Bn.xQ,this._afterOpenedAtThisLevel=new Bn.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=Wp(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(xs(void 0))),this._scrollStrategy=k}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,o){(o=function(i,t){return Object.assign(Object.assign({},t),i)}(o,this._defaultOptions||new EP)).id&&this.getDialogById(o.id);const a=this._createOverlay(o),h=this._attachDialogContainer(a,o),v=this._attachDialogContent(e,h,a,o);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(v),v.afterClosed().subscribe(()=>this._removeOpenDialog(v)),this.afterOpened.next(v),h._initializeWithAttachedContent(),v}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(o=>o.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const o=this._getOverlayConfig(e);return this._overlay.create(o)}_getOverlayConfig(e){const o=new ES({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(o.backdropClass=e.backdropClass),o}_attachDialogContainer(e,o){const h=s.zs3.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:EP,useValue:o}]}),v=new Sw(this._dialogContainerType,o.viewContainerRef,h,o.componentFactoryResolver);return e.attach(v).instance}_attachDialogContent(e,o,a,h){const v=new this._dialogRefConstructor(a,o,h.id);if(e instanceof s.Rgc)o.attachTemplatePortal(new uv(e,null,{$implicit:h.data,dialogRef:v}));else{const k=this._createInjector(h,v,o),z=o.attachComponentPortal(new Sw(e,h.viewContainerRef,k));v.componentInstance=z.instance}return v.updateSize(h.width,h.height).updatePosition(h.position),v}_createInjector(e,o,a){const h=e&&e.viewContainerRef&&e.viewContainerRef.injector,v=[{provide:this._dialogContainerType,useValue:a},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:o}];return e.direction&&(!h||!h.get(Xh,null))&&v.push({provide:Xh,useValue:{value:e.direction,change:(0,Qn.of)()}}),s.zs3.create({parent:h||this._injector,providers:v})}_removeOpenDialog(e){const o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,h)=>{a?h.setAttribute("aria-hidden",a):h.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const o=e.parentElement.children;for(let a=o.length-1;a>-1;a--){let h=o[a];h!==e&&"SCRIPT"!==h.nodeName&&"STYLE"!==h.nodeName&&!h.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(h,h.getAttribute("aria-hidden")),h.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let o=e.length;for(;o--;)e[o].close()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Bd),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(TS),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},i.\u0275dir=s.lG2({type:i}),i})(),AP=(()=>{class i extends j8{constructor(e,o,a,h,v,k,z){super(e,o,h,k,z,v,TP,B8,V8)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Bd),s.LFG(s.zs3),s.LFG(Vn,8),s.LFG(U8,8),s.LFG(dB),s.LFG(i,12),s.LFG(TS))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),Z8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[AP,G8],imports:[[MS,TA,Ir],Ir]}),i})(),$8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr],Wm]}),i})(),l$=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,_x]]}),i})();const c$=["input"];function u$(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"i",4),s.NdJ("click",function(){return s.CHM(e),s.oxw().onMaskToggle()}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("ngClass",e.toggleIconClass())}}function h$(i,t){1&i&&s.GkF(0)}function d$(i,t){1&i&&s.GkF(0)}function p$(i,t){if(1&i&&(s.ynx(0),s.YNc(1,d$,1,0,"ng-container",6),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.contentTemplate)}}const f$=function(i){return{width:i}};function m$(i,t){if(1&i&&(s.TgZ(0,"div",9),s._UZ(1,"div",0),s.qZA(),s.TgZ(2,"div",10),s._uU(3),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngClass",e.strengthClass())("ngStyle",s.VKq(3,f$,e.meter?e.meter.width:"")),s.xp6(2),s.Oqu(e.infoText)}}function g$(i,t){1&i&&s.GkF(0)}const _$=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},y$=function(i){return{value:"visible",params:i}};function v$(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",4,5),s.NdJ("click",function(a){return s.CHM(e),s.oxw().onOverlayClick(a)})("@overlayAnimation.start",function(a){return s.CHM(e),s.oxw().onAnimationStart(a)})("@overlayAnimation.done",function(a){return s.CHM(e),s.oxw().onAnimationEnd(a)}),s.YNc(2,h$,1,0,"ng-container",6),s.YNc(3,p$,2,1,"ng-container",7),s.YNc(4,m$,4,5,"ng-template",null,8,s.W1O),s.YNc(6,g$,1,0,"ng-container",6),s.qZA()}if(2&i){const e=s.MAs(5),o=s.oxw();s.Q6J("ngClass","p-password-panel p-component")("@overlayAnimation",s.VKq(9,y$,s.WLB(6,_$,o.showTransitionOptions,o.hideTransitionOptions))),s.xp6(2),s.Q6J("ngTemplateOutlet",o.headerTemplate),s.xp6(1),s.Q6J("ngIf",o.contentTemplate)("ngIfElse",e),s.xp6(3),s.Q6J("ngTemplateOutlet",o.footerTemplate)}}const b$={provide:Ll,useExisting:(0,s.Gpc)(()=>x$),multi:!0};let x$=(()=>{class i{constructor(e,o,a,h){this.cd=e,this.config=o,this.el=a,this.overlayService=h,this.mediumRegex="^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})",this.strongRegex="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})",this.feedback=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.overlayVisible=!1,this.focused=!1,this.unmasked=!1,this.value=null,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.contentTemplate=e.template}})}ngOnInit(){this.infoText=this.promptText(),this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.updateUI(this.value||"")})}onAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,zd.set("overlay",this.overlay,this.config.zIndex.overlay),this.appendContainer(),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener();break;case"void":this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null}}onAnimationEnd(e){switch(e.toState){case"void":zd.clear(e.element)}}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):document.getElementById(this.appendTo).appendChild(this.overlay))}alignOverlay(){this.appendTo?(this.overlay.style.minWidth=nn.getOuterWidth(this.input.nativeElement)+"px",nn.absolutePosition(this.overlay,this.input.nativeElement)):nn.relativePosition(this.overlay,this.input.nativeElement)}onInput(e){this.value=e.target.value,this.onModelChange(this.value),this.onModelTouched()}onFocus(){this.focused=!0,this.feedback&&(this.overlayVisible=!0)}onBlur(){this.focused=!1,this.feedback&&(this.overlayVisible=!1)}onKeyUp(e){this.feedback&&(this.updateUI(e.target.value),this.overlayVisible||(this.overlayVisible=!0))}updateUI(e){let o=null,a=null;switch(this.testStrength(e)){case 1:o=this.weakText(),a={strength:"weak",width:"33.33%"};break;case 2:o=this.mediumText(),a={strength:"medium",width:"66.66%"};break;case 3:o=this.strongText(),a={strength:"strong",width:"100%"};break;default:o=this.promptText(),a=null}this.meter=a,this.infoText=o}onMaskToggle(){this.unmasked=!this.unmasked}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}testStrength(e){let o=0;return this.strongCheckRegExp.test(e)?o=3:this.mediumCheckRegExp.test(e)?o=2:e.length&&(o=1),o}writeValue(e){this.value=void 0===e?null:e,this.feedback&&this.updateUI(this.value||""),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new lk(this.input.nativeElement,()=>{this.overlayVisible&&(this.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()}bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&(this.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}containerClass(){return{"p-password p-component p-inputwrapper":!0,"p-input-icon-right":this.toggleMask}}inputFieldClass(){return{"p-password-input":!0,"p-disabled":this.disabled}}toggleIconClass(){return this.unmasked?"pi pi-eye-slash":"pi pi-eye"}strengthClass(){return`p-password-strength ${this.meter?this.meter.strength:""}`}filled(){return null!=this.value&&this.value.toString().length>0}promptText(){return this.promptLabel||this.getTranslation(sc.PASSWORD_PROMPT)}weakText(){return this.weakLabel||this.getTranslation(sc.WEAK)}mediumText(){return this.mediumLabel||this.getTranslation(sc.MEDIUM)}strongText(){return this.strongLabel||this.getTranslation(sc.STRONG)}restoreAppend(){this.overlay&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.overlay):document.getElementById(this.appendTo).removeChild(this.overlay))}inputType(){return this.unmasked?"text":"password"}getTranslation(e){return this.config.getTranslation(e)}ngOnDestroy(){this.overlay&&(zd.clear(this.overlay),this.overlay=null),this.restoreAppend(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(mx),s.Y36(s.SBq),s.Y36(ik))},i.\u0275cmp=s.Xpm({type:i,selectors:[["p-password"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,gx,4),2&e){let h;s.iGM(h=s.CRH())&&(o.templates=h)}},viewQuery:function(e,o){if(1&e&&s.Gf(c$,5),2&e){let a;s.iGM(a=s.CRH())&&(o.input=a.first)}},hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("p-inputwrapper-filled",o.filled())("p-inputwrapper-focus",o.focused)},inputs:{disabled:"disabled",promptLabel:"promptLabel",mediumRegex:"mediumRegex",strongRegex:"strongRegex",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",inputId:"inputId",feedback:"feedback",appendTo:"appendTo",toggleMask:"toggleMask",inputStyleClass:"inputStyleClass",styleClass:"styleClass",style:"style",inputStyle:"inputStyle",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",placeholder:"placeholder"},features:[s._Bn([b$])],decls:5,vars:14,consts:[[3,"ngClass","ngStyle"],["pInputText","",3,"ngClass","ngStyle","value","input","focus","blur","keyup"],["input",""],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],["overlay",""],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["content",""],[1,"p-password-meter"],["className","p-password-info"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"input",1,2),s.NdJ("input",function(h){return o.onInput(h)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()})("keyup",function(h){return o.onKeyUp(h)}),s.qZA(),s.YNc(3,u$,1,1,"i",3),s.YNc(4,v$,7,11,"div",3),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",o.containerClass())("ngStyle",o.style),s.xp6(1),s.Tol(o.inputStyleClass),s.Q6J("ngClass",o.inputFieldClass())("ngStyle",o.inputStyle)("value",o.value),s.uIk("id",o.inputId)("type",o.inputType())("placeholder",o.placeholder),s.xp6(2),s.Q6J("ngIf",o.toggleMask),s.xp6(1),s.Q6J("ngIf",o.overlayVisible))},directives:[ne,or,XN,Xt,No],styles:[".p-password{position:relative;display:inline-flex}.p-password-panel{position:absolute;top:0;left:0}.p-password .p-password-panel{min-width:100%}.p-password-meter{height:10px}.p-password-strength{height:100%;width:0;transition:width 1s ease-in-out}.p-fluid .p-password{display:flex}"],encapsulation:2,data:{animation:[As("overlayAnimation",[Sr(":enter",[zn({opacity:0,transform:"scaleY(0.8)"}),Dr("{{showTransitionParams}}")]),Sr(":leave",[Dr("{{hideTransitionParams}}",zn({opacity:0}))])])]},changeDetection:0}),i})(),w$=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,wP],Wm]}),i})();nt(2958);const M$=new s.OlP("MapboxApiKey"),A$=new s.OlP("MapboxApiKey");let k$=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:M$,useValue:e.accessToken},{provide:A$,useValue:e.geocoderAccessToken||e.accessToken}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr]]}),i})(),F$=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})(),W$=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr,Ir,F$,TA]]}),i})();class w_{constructor(){this.connectionMonitor=new Gr.y(t=>{window.addEventListener("offline",e=>{t.next(!1)}),window.addEventListener("online",e=>{t.next(!0)})})}monitor(){return this.connectionMonitor}}w_.\u0275fac=function(t){return new(t||w_)},w_.\u0275prov=s.Yz7({token:w_,factory:w_.\u0275fac,providedIn:"root"}),w_.ngInjectableDef=(0,s.Ez6)({factory:function(){return new w_},token:w_,providedIn:"root"});let $$=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[w_],imports:[[]]}),i})(),bB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})(),c9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[vS,Ir,Ku,bB],Ir,bB]}),i})(),h9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[sr]]}),i})(),d9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i,bootstrap:[UW]}),i.\u0275inj=s.cJS({providers:[v_,Ld,yx,{provide:fP,useClass:O8,multi:!0},nk,HC,fN],imports:[[Xd,VW,wr.hO.initializeApp(qn_firebase),Zs,BA,LL.withConfig({warnOnNgModelWithFormControl:"never"}),v8,AA,IM,pz,gN,C8,NU,fU,sV,$U,R8,pN,E2,Z8,EH,$8,l$,qN,w$,eH,k$.withConfig({accessToken:"pk.eyJ1Ijoib3NjYXJjaHVhd2Vpd2VuLWZzZCIsImEiOiJja3N4eXYycjgxYXp6Mm9wdTg5bTZ5eGUzIn0.uR8fYkY2kZhEjP43Cx-f6w",geocoderAccessToken:"pk.eyJ1Ijoib3NjYXJjaHVhd2Vpd2VuLWZzZCIsImEiOiJja3N4eXYycjgxYXp6Mm9wdTg5bTZ5eGUzIn0.uR8fYkY2kZhEjP43Cx-f6w"}),OG,xG,XG,HL,W$,$$,c9,h9,aB,kW,iB]]}),i})();(0,s.G48)(),dc().bootstrapModule(d9).catch(i=>console.error(i))},4762:(ai,_n,nt)=>{"use strict";nt.d(_n,{ZT:()=>Vt,pi:()=>Ee,mG:()=>Be,Jh:()=>Ge,XA:()=>lt,CR:()=>Ct,ev:()=>Qe});var s=function(Zt,Gt){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($t,Ht){$t.__proto__=Ht}||function($t,Ht){for(var fn in Ht)Object.prototype.hasOwnProperty.call(Ht,fn)&&($t[fn]=Ht[fn])})(Zt,Gt)};function Vt(Zt,Gt){if("function"!=typeof Gt&&null!==Gt)throw new TypeError("Class extends value "+String(Gt)+" is not a constructor or null");function $t(){this.constructor=Zt}s(Zt,Gt),Zt.prototype=null===Gt?Object.create(Gt):($t.prototype=Gt.prototype,new $t)}var Ee=function(){return(Ee=Object.assign||function(Gt){for(var $t,Ht=1,fn=arguments.length;Ht<fn;Ht++)for(var Yt in $t=arguments[Ht])Object.prototype.hasOwnProperty.call($t,Yt)&&(Gt[Yt]=$t[Yt]);return Gt}).apply(this,arguments)};function Be(Zt,Gt,$t,Ht){return new($t||($t=Promise))(function(Yt,On){function hi(ii){try{Un(Ht.next(ii))}catch(Hn){On(Hn)}}function mi(ii){try{Un(Ht.throw(ii))}catch(Hn){On(Hn)}}function Un(ii){ii.done?Yt(ii.value):function(Yt){return Yt instanceof $t?Yt:new $t(function(On){On(Yt)})}(ii.value).then(hi,mi)}Un((Ht=Ht.apply(Zt,Gt||[])).next())})}function Ge(Zt,Gt){var Ht,fn,Yt,On,$t={label:0,sent:function(){if(1&Yt[0])throw Yt[1];return Yt[1]},trys:[],ops:[]};return On={next:hi(0),throw:hi(1),return:hi(2)},"function"==typeof Symbol&&(On[Symbol.iterator]=function(){return this}),On;function hi(Un){return function(ii){return function(Un){if(Ht)throw new TypeError("Generator is already executing.");for(;$t;)try{if(Ht=1,fn&&(Yt=2&Un[0]?fn.return:Un[0]?fn.throw||((Yt=fn.return)&&Yt.call(fn),0):fn.next)&&!(Yt=Yt.call(fn,Un[1])).done)return Yt;switch(fn=0,Yt&&(Un=[2&Un[0],Yt.value]),Un[0]){case 0:case 1:Yt=Un;break;case 4:return $t.label++,{value:Un[1],done:!1};case 5:$t.label++,fn=Un[1],Un=[0];continue;case 7:Un=$t.ops.pop(),$t.trys.pop();continue;default:if(!(Yt=(Yt=$t.trys).length>0&&Yt[Yt.length-1])&&(6===Un[0]||2===Un[0])){$t=0;continue}if(3===Un[0]&&(!Yt||Un[1]>Yt[0]&&Un[1]<Yt[3])){$t.label=Un[1];break}if(6===Un[0]&&$t.label<Yt[1]){$t.label=Yt[1],Yt=Un;break}if(Yt&&$t.label<Yt[2]){$t.label=Yt[2],$t.ops.push(Un);break}Yt[2]&&$t.ops.pop(),$t.trys.pop();continue}Un=Gt.call(Zt,$t)}catch(ii){Un=[6,ii],fn=0}finally{Ht=Yt=0}if(5&Un[0])throw Un[1];return{value:Un[0]?Un[1]:void 0,done:!0}}([Un,ii])}}}function lt(Zt){var Gt="function"==typeof Symbol&&Symbol.iterator,$t=Gt&&Zt[Gt],Ht=0;if($t)return $t.call(Zt);if(Zt&&"number"==typeof Zt.length)return{next:function(){return Zt&&Ht>=Zt.length&&(Zt=void 0),{value:Zt&&Zt[Ht++],done:!Zt}}};throw new TypeError(Gt?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ct(Zt,Gt){var $t="function"==typeof Symbol&&Zt[Symbol.iterator];if(!$t)return Zt;var fn,On,Ht=$t.call(Zt),Yt=[];try{for(;(void 0===Gt||Gt-- >0)&&!(fn=Ht.next()).done;)Yt.push(fn.value)}catch(hi){On={error:hi}}finally{try{fn&&!fn.done&&($t=Ht.return)&&$t.call(Ht)}finally{if(On)throw On.error}}return Yt}function Qe(Zt,Gt,$t){if($t||2===arguments.length)for(var Yt,Ht=0,fn=Gt.length;Ht<fn;Ht++)(Yt||!(Ht in Gt))&&(Yt||(Yt=Array.prototype.slice.call(Gt,0,Ht)),Yt[Ht]=Gt[Ht]);return Zt.concat(Yt||Array.prototype.slice.call(Gt))}}},ai=>{ai(ai.s=4408)}]);