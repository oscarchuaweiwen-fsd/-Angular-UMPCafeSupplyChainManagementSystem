(self.webpackChunkumpcafe_supply_chain_management_system=self.webpackChunkumpcafe_supply_chain_management_system||[]).push([[179],{8255:ai=>{function _n(nt){return Promise.resolve().then(()=>{var s=new Error("Cannot find module '"+nt+"'");throw s.code="MODULE_NOT_FOUND",s})}_n.keys=()=>[],_n.resolve=_n,_n.id=8255,ai.exports=_n},7716:(ai,_n,nt)=>{"use strict";nt.d(_n,{deG:()=>Nn,tb:()=>JC,AFp:()=>WC,ip1:()=>lw,CZH:()=>f_,hGG:()=>$R,z2F:()=>dw,sBO:()=>Im,Sil:()=>Dp,_Vd:()=>Am,EJc:()=>KC,SBq:()=>Od,qLn:()=>Ph,vpe:()=>Dc,gxx:()=>Td,tBr:()=>Zs,XFs:()=>Yn,OlP:()=>Oo,zs3:()=>de,ZZ4:()=>E0,aQg:()=>T0,soG:()=>zd,YKP:()=>zT,v3s:()=>MR,h0i:()=>Pm,PXZ:()=>xR,R0b:()=>sc,FiY:()=>Sl,Lbi:()=>QC,g9A:()=>XC,n_E:()=>Xb,Qsj:()=>ET,FYo:()=>Lb,JOm:()=>Xa,Tiy:()=>Zh,q3G:()=>oi,tp0:()=>Ws,EAV:()=>PR,Rgc:()=>Ny,dDg:()=>bI,DyG:()=>U,q4F:()=>Fy,GfV:()=>sC,s_b:()=>A0,ifc:()=>$n,eFA:()=>EI,Ez6:()=>Io,G48:()=>mR,Gpc:()=>Et,f3M:()=>hr,X6Q:()=>tS,_c5:()=>HR,VLi:()=>fR,c2e:()=>jM,zSh:()=>Il,wAp:()=>Ai,vHH:()=>an,EiD:()=>pd,mCW:()=>Ya,qzn:()=>Mh,JVY:()=>R_,pB0:()=>O_,eBb:()=>ql,L6k:()=>Yf,LAX:()=>Iv,cg1:()=>Y1,Tjo:()=>VR,kL8:()=>XE,yhl:()=>P_,dqk:()=>Cr,sIi:()=>Hh,CqO:()=>Xu,QGY:()=>rn,F4k:()=>Dn,RDi:()=>hh,AaK:()=>Be,z3N:()=>Qc,qOj:()=>ao,TTD:()=>Fi,_Bn:()=>iC,xp6:()=>Bv,uIk:()=>Wx,Tol:()=>u0,Gre:()=>Tb,ekj:()=>Sb,Suo:()=>Qb,Xpm:()=>Ge,lG2:()=>xt,Yz7:()=>qi,cJS:()=>_r,oAB:()=>yt,Yjl:()=>Ft,Y36:()=>yy,_UZ:()=>a0,GkF:()=>OA,BQk:()=>PE,ynx:()=>l0,qZA:()=>s0,TgZ:()=>o0,EpF:()=>uu,n5z:()=>rp,Ikx:()=>f0,LFG:()=>wi,$8M:()=>wh,NdJ:()=>vb,CRH:()=>K0,kcU:()=>yh,O4$:()=>zc,oxw:()=>Zi,ALo:()=>OC,lcZ:()=>$y,Hsn:()=>E1,F$t:()=>RE,Q6J:()=>t0,s9C:()=>kr,DdM:()=>dM,VKq:()=>Wb,WLB:()=>kC,kEZ:()=>AC,l5B:()=>DC,qbA:()=>pM,HTZ:()=>fM,Hh0:()=>mM,rFY:()=>W0,iGM:()=>bM,MAs:()=>CE,pYS:()=>Rh,CHM:()=>id,oJD:()=>qa,LSH:()=>bc,kYT:()=>Ot,Udp:()=>Cb,WFA:()=>Gn,d8E:()=>m0,YNc:()=>u1,W1O:()=>ew,_uU:()=>zE,Oqu:()=>R1,hij:()=>xm,AsE:()=>Sy,Gf:()=>Vm});var s=nt(9765),Vt=nt(5319),Ee=nt(7574),k=nt(6682),gt=nt(8819);function Dt(u){for(let h in u)if(u[h]===Dt)return h;throw Error("Could not find renamed property on target object.")}function wt(u,h){for(const m in h)h.hasOwnProperty(m)&&!u.hasOwnProperty(m)&&(u[m]=h[m])}function Be(u){if("string"==typeof u)return u;if(Array.isArray(u))return"["+u.map(Be).join(", ")+"]";if(null==u)return""+u;if(u.overriddenName)return`${u.overriddenName}`;if(u.name)return`${u.name}`;const h=u.toString();if(null==h)return""+h;const m=h.indexOf("\n");return-1===m?h:h.substring(0,m)}function je(u,h){return null==u||""===u?null===h?"":h:null==h||""===h?u:u+" "+h}const Ve=Dt({__forward_ref__:Dt});function Et(u){return u.__forward_ref__=Et,u.toString=function(){return Be(this())},u}function lt(u){return Ct(u)?u():u}function Ct(u){return"function"==typeof u&&u.hasOwnProperty(Ve)&&u.__forward_ref__===Et}class an extends Error{constructor(h,m){super(function(u,h){return`${u?`NG0${u}: `:""}${h}`}(h,m)),this.code=h}}function dn(u){return"string"==typeof u?u:null==u?"":String(u)}function Mt(u){return"function"==typeof u?u.name||u.toString():"object"==typeof u&&null!=u&&"function"==typeof u.type?u.type.name||u.type.toString():dn(u)}function Di(u,h){const m=h?` in ${h}`:"";throw new an("201",`No provider for ${Mt(u)} found${m}`)}function ri(u,h){null==u&&function(u,h,m,b){throw new Error(`ASSERTION ERROR: ${u}`+(null==b?"":` [Expected=> ${m} ${b} ${h} <=Actual]`))}(h,u,null,"!=")}function qi(u){return{token:u.token,providedIn:u.providedIn||null,factory:u.factory,value:void 0}}const Io=qi;function _r(u){return{providers:u.providers||[],imports:u.imports||[]}}function io(u){return Fr(u,Ni)||Fr(u,uo)}function Fr(u,h){return u.hasOwnProperty(h)?u[h]:null}function ds(u){return u&&(u.hasOwnProperty(Si)||u.hasOwnProperty(Po))?u[Si]:null}const Ni=Dt({\u0275prov:Dt}),Si=Dt({\u0275inj:Dt}),uo=Dt({ngInjectableDef:Dt}),Po=Dt({ngInjectorDef:Dt});var Yn=(()=>((Yn=Yn||{})[Yn.Default=0]="Default",Yn[Yn.Host=1]="Host",Yn[Yn.Self=2]="Self",Yn[Yn.SkipSelf=4]="SkipSelf",Yn[Yn.Optional=8]="Optional",Yn))();let xr;function wr(u){const h=xr;return xr=u,h}function is(u,h,m){const b=io(u);return b&&"root"==b.providedIn?void 0===b.value?b.value=b.factory():b.value:m&Yn.Optional?null:void 0!==h?h:void Di(Be(u),"Injector")}function ho(u){return{toString:u}.toString()}var Gr=(()=>((Gr=Gr||{})[Gr.OnPush=0]="OnPush",Gr[Gr.Default=1]="Default",Gr))(),$n=(()=>(($n=$n||{})[$n.Emulated=0]="Emulated",$n[$n.None=2]="None",$n[$n.ShadowDom=3]="ShadowDom",$n))();const Ei="undefined"!=typeof globalThis&&globalThis,Bl="undefined"!=typeof window&&window,Us="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ys="undefined"!=typeof global&&global,Cr=Ei||ys||Bl||Us,ft={},dt=[],Tt=Dt({\u0275cmp:Dt}),Kt=Dt({\u0275dir:Dt}),Lt=Dt({\u0275pipe:Dt}),Bn=Dt({\u0275mod:Dt}),di=Dt({\u0275loc:Dt}),Oi=Dt({\u0275fac:Dt}),sr=Dt({__NG_ELEMENT_ID__:Dt});let ir=0;function Ge(u){return ho(()=>{const m={},b={type:u.type,providersResolver:null,decls:u.decls,vars:u.vars,factory:null,template:u.template||null,consts:u.consts||null,ngContentSelectors:u.ngContentSelectors,hostBindings:u.hostBindings||null,hostVars:u.hostVars||0,hostAttrs:u.hostAttrs||null,contentQueries:u.contentQueries||null,declaredInputs:m,inputs:null,outputs:null,exportAs:u.exportAs||null,onPush:u.changeDetection===Gr.OnPush,directiveDefs:null,pipeDefs:null,selectors:u.selectors||dt,viewQuery:u.viewQuery||null,features:u.features||null,data:u.data||{},encapsulation:u.encapsulation||$n.Emulated,id:"c",styles:u.styles||dt,_:null,setInput:null,schemas:u.schemas||null,tView:null},T=u.directives,N=u.features,j=u.pipes;return b.id+=ir++,b.inputs=Pt(u.inputs,m),b.outputs=Pt(u.outputs),N&&N.forEach(W=>W(b)),b.directiveDefs=T?()=>("function"==typeof T?T():T).map(De):null,b.pipeDefs=j?()=>("function"==typeof j?j():j).map(qe):null,b})}function De(u){return tn(u)||function(u){return u[Kt]||null}(u)}function qe(u){return function(u){return u[Lt]||null}(u)}const it={};function yt(u){return ho(()=>{const h={type:u.type,bootstrap:u.bootstrap||dt,declarations:u.declarations||dt,imports:u.imports||dt,exports:u.exports||dt,transitiveCompileScopes:null,schemas:u.schemas||null,id:u.id||null};return null!=u.id&&(it[u.id]=u.type),h})}function Ot(u,h){return ho(()=>{const m=p(u,!0);m.declarations=h.declarations||dt,m.imports=h.imports||dt,m.exports=h.exports||dt})}function Pt(u,h){if(null==u)return ft;const m={};for(const b in u)if(u.hasOwnProperty(b)){let T=u[b],N=T;Array.isArray(T)&&(N=T[1],T=T[0]),m[T]=b,h&&(h[T]=N)}return m}const xt=Ge;function Ft(u){return{type:u.type,name:u.name,factory:null,pure:!1!==u.pure,onDestroy:u.type.prototype.ngOnDestroy||null}}function tn(u){return u[Tt]||null}function p(u,h){const m=u[Bn]||null;if(!m&&!0===h)throw new Error(`Type ${Be(u)} does not have '\u0275mod' property.`);return m}const Y=16;function ar(u){return Array.isArray(u)&&"object"==typeof u[1]}function vo(u){return Array.isArray(u)&&!0===u[1]}function Mr(u){return 0!=(8&u.flags)}function Wi(u){return 2==(2&u.flags)}function Ro(u){return 1==(1&u.flags)}function Sr(u){return null!==u.template}function vs(u){return 0!=(512&u[2])}function pl(u,h){return u.hasOwnProperty(Oi)?u[Oi]:null}class wu{constructor(h,m,b){this.previousValue=h,this.currentValue=m,this.firstChange=b}isFirstChange(){return this.firstChange}}function Fi(){return fl}function fl(u){return u.type.prototype.ngOnChanges&&(u.setInput=ah),sh}function sh(){const u=lh(this),h=null==u?void 0:u.current;if(h){const m=u.previous;if(m===ft)u.previous=h;else for(let b in h)m[b]=h[b];u.current=null,this.ngOnChanges(h)}}function ah(u,h,m,b){const T=lh(u)||function(u,h){return u[$i]=h}(u,{previous:ft,current:null}),N=T.current||(T.current={}),j=T.previous,W=this.declaredInputs[m],ie=j[W];N[W]=new wu(ie&&ie.currentValue,h,j===ft),u[b]=h}Fi.ngInherit=!0;const $i="__ngSimpleChanges__";function lh(u){return u[$i]||null}const ui="http://www.w3.org/2000/svg";let Cu;function hh(u){Cu=u}function td(){return void 0!==Cu?Cu:"undefined"!=typeof document?document:void 0}function Xr(u){return!!u.listen}const Ii={createRenderer:(u,h)=>td()};function Pr(u){for(;Array.isArray(u);)u=u[0];return u}function Lc(u,h){return Pr(h[u])}function Ma(u,h){return Pr(h[u.index])}function ka(u,h){return u.data[h]}function za(u,h){return u[h]}function js(u,h){const m=h[u];return ar(m)?m:m[0]}function oa(u){return 4==(4&u[2])}function $d(u){return 128==(128&u[2])}function Va(u,h){return null==h?null:u[h]}function nd(u){u[18]=0}function Ua(u,h){u[5]+=h;let m=u,b=u[3];for(;null!==b&&(1===h&&1===m[5]||-1===h&&0===m[5]);)b[5]+=h,m=b,b=b[3]}const bi={lFrame:vl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Rf(){return bi.bindingsEnabled}function wn(){return bi.lFrame.lView}function fr(){return bi.lFrame.tView}function id(u){return bi.lFrame.contextLView=u,u[8]}function So(){let u=rd();for(;null!==u&&64===u.type;)u=u.parent;return u}function rd(){return bi.lFrame.currentTNode}function ps(u,h){const m=bi.lFrame;m.currentTNode=u,m.isParent=h}function ml(){return bi.lFrame.isParent}function mh(){bi.lFrame.isParent=!1}function sa(){return bi.isInCheckNoChangesMode}function gl(u){bi.isInCheckNoChangesMode=u}function so(){const u=bi.lFrame;let h=u.bindingRootIndex;return-1===h&&(h=u.bindingRootIndex=u.tView.bindingStartIndex),h}function $o(){return bi.lFrame.bindingIndex}function Ga(){return bi.lFrame.bindingIndex++}function Hi(u){const h=bi.lFrame,m=h.bindingIndex;return h.bindingIndex=h.bindingIndex+u,m}function Gp(u,h){const m=bi.lFrame;m.bindingIndex=m.bindingRootIndex=u,Ys(h)}function Ys(u){bi.lFrame.currentDirectiveIndex=u}function Bc(u){const h=bi.lFrame.currentDirectiveIndex;return-1===h?null:u[h]}function od(){return bi.lFrame.currentQueryIndex}function Mu(u){bi.lFrame.currentQueryIndex=u}function Qd(u){const h=u[1];return 2===h.type?h.declTNode:1===h.type?u[6]:null}function Aa(u,h,m){if(m&Yn.SkipSelf){let T=h,N=u;for(;!(T=T.parent,null!==T||m&Yn.Host||(T=Qd(N),null===T||(N=N[15],10&T.type))););if(null===T)return!1;h=T,u=N}const b=bi.lFrame=yl();return b.currentTNode=h,b.lView=u,!0}function _l(u){const h=yl(),m=u[1];bi.lFrame=h,h.currentTNode=m.firstChild,h.lView=u,h.tView=m,h.contextLView=u,h.bindingIndex=m.bindingStartIndex,h.inI18n=!1}function yl(){const u=bi.lFrame,h=null===u?null:u.child;return null===h?vl(u):h}function vl(u){const h={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:u,child:null,inI18n:!1};return null!==u&&(u.child=h),h}function jp(){const u=bi.lFrame;return bi.lFrame=u.parent,u.currentTNode=null,u.lView=null,u}const _h=jp;function Ds(){const u=jp();u.isParent=!0,u.tView=null,u.selectedIndex=-1,u.contextLView=null,u.elementDepthCount=0,u.currentDirectiveIndex=-1,u.currentNamespace=null,u.bindingRootIndex=-1,u.bindingIndex=-1,u.currentQueryIndex=0}function Ho(){return bi.lFrame.selectedIndex}function aa(u){bi.lFrame.selectedIndex=u}function Lr(){const u=bi.lFrame;return ka(u.tView,u.selectedIndex)}function zc(){bi.lFrame.currentNamespace=ui}function yh(){bi.lFrame.currentNamespace=null}function bl(u,h){for(let m=h.directiveStart,b=h.directiveEnd;m<b;m++){const N=u.data[m].type.prototype,{ngAfterContentInit:j,ngAfterContentChecked:W,ngAfterViewInit:ie,ngAfterViewChecked:he,ngOnDestroy:Te}=N;j&&(u.contentHooks||(u.contentHooks=[])).push(-m,j),W&&((u.contentHooks||(u.contentHooks=[])).push(m,W),(u.contentCheckHooks||(u.contentCheckHooks=[])).push(m,W)),ie&&(u.viewHooks||(u.viewHooks=[])).push(-m,ie),he&&((u.viewHooks||(u.viewHooks=[])).push(m,he),(u.viewCheckHooks||(u.viewCheckHooks=[])).push(m,he)),null!=Te&&(u.destroyHooks||(u.destroyHooks=[])).push(m,Te)}}function Ul(u,h,m){xl(u,h,3,m)}function vh(u,h,m,b){(3&u[2])===m&&xl(u,h,m,b)}function bh(u,h){let m=u[2];(3&m)===h&&(m&=2047,m+=1,u[2]=m)}function xl(u,h,m,b){const N=null!=b?b:-1,j=h.length-1;let W=0;for(let ie=void 0!==b?65535&u[18]:0;ie<j;ie++)if("number"==typeof h[ie+1]){if(W=h[ie],null!=b&&W>=b)break}else h[ie]<0&&(u[18]+=65536),(W<N||-1==N)&&(ku(u,m,h,ie),u[18]=(4294901760&u[18])+ie+2),ie++}function ku(u,h,m,b){const T=m[b]<0,N=m[b+1],W=u[T?-m[b]:m[b]];if(T){if(u[2]>>11<u[18]>>16&&(3&u[2])===h){u[2]+=2048;try{N.call(W)}finally{}}}else try{N.call(W)}finally{}}class ms{constructor(h,m,b){this.factory=h,this.resolving=!1,this.canSeeViewProviders=m,this.injectImpl=b}}function ep(u,h,m){const b=Xr(u);let T=0;for(;T<m.length;){const N=m[T];if("number"==typeof N){if(0!==N)break;T++;const j=m[T++],W=m[T++],ie=m[T++];b?u.setAttribute(h,W,ie,j):h.setAttributeNS(j,W,ie)}else{const j=N,W=m[++T];Qr(j)?b&&u.setProperty(h,j,W):b?u.setAttribute(h,j,W):h.setAttribute(j,W),T++}}return T}function Zp(u){return 3===u||4===u||6===u}function Qr(u){return 64===u.charCodeAt(0)}function ad(u,h){if(null!==h&&0!==h.length)if(null===u||0===u.length)u=h.slice();else{let m=-1;for(let b=0;b<h.length;b++){const T=h[b];"number"==typeof T?m=T:0===m||wl(u,m,T,null,-1===m||2===m?h[++b]:null)}}return u}function wl(u,h,m,b,T){let N=0,j=u.length;if(-1===h)j=-1;else for(;N<u.length;){const W=u[N++];if("number"==typeof W){if(W===h){j=-1;break}if(W>h){j=N-1;break}}}for(;N<u.length;){const W=u[N];if("number"==typeof W)break;if(W===m){if(null===b)return void(null!==T&&(u[N+1]=T));if(b===u[N+1])return void(u[N+2]=T)}N++,null!==b&&N++,null!==T&&N++}-1!==j&&(u.splice(j,0,h),N=j+1),u.splice(N++,0,m),null!==b&&u.splice(N++,0,b),null!==T&&u.splice(N++,0,T)}function xh(u){return-1!==u}function la(u){return 32767&u}function Uc(u,h){let m=function(u){return u>>16}(u),b=h;for(;m>0;)b=b[15],m--;return b}let Wp=!0;function Du(u){const h=Wp;return Wp=u,h}let pc=0;function Iu(u,h){const m=qn(u,h);if(-1!==m)return m;const b=h[1];b.firstCreatePass&&(u.injectorIndex=h.length,Pu(b.data,u),Pu(h,null),Pu(b.blueprint,null));const T=Xi(u,h),N=u.injectorIndex;if(xh(T)){const j=la(T),W=Uc(T,h),ie=W[1].data;for(let he=0;he<8;he++)h[N+he]=W[j+he]|ie[j+he]}return h[N+8]=T,N}function Pu(u,h){u.push(0,0,0,0,0,0,0,0,h)}function qn(u,h){return-1===u.injectorIndex||u.parent&&u.parent.injectorIndex===u.injectorIndex||null===h[u.injectorIndex+8]?-1:u.injectorIndex}function Xi(u,h){if(u.parent&&-1!==u.parent.injectorIndex)return u.parent.injectorIndex;let m=0,b=null,T=h;for(;null!==T;){const N=T[1],j=N.type;if(b=2===j?N.declTNode:1===j?T[6]:null,null===b)return-1;if(m++,T=T[15],-1!==b.injectorIndex)return b.injectorIndex|m<<16}return-1}function Cl(u,h,m){!function(u,h,m){let b;"string"==typeof m?b=m.charCodeAt(0)||0:m.hasOwnProperty(sr)&&(b=m[sr]),null==b&&(b=m[sr]=pc++);const T=255&b;h.data[u+(T>>5)]|=1<<T}(u,h,m)}function Xn(u,h,m){if(m&Yn.Optional)return u;Di(h,"NodeInjector")}function bs(u,h,m,b){if(m&Yn.Optional&&void 0===b&&(b=null),0==(m&(Yn.Self|Yn.Host))){const T=u[9],N=wr(void 0);try{return T?T.get(h,b,m&Yn.Optional):is(h,b,m&Yn.Optional)}finally{wr(N)}}return Xn(b,h,m)}function ei(u,h,m,b=Yn.Default,T){if(null!==u){const N=function(u){if("string"==typeof u)return u.charCodeAt(0)||0;const h=u.hasOwnProperty(sr)?u[sr]:void 0;return"number"==typeof h?h>=0?255&h:Nr:h}(m);if("function"==typeof N){if(!Aa(h,u,b))return b&Yn.Host?Xn(T,m,b):bs(h,m,b,T);try{const j=N(b);if(null!=j||b&Yn.Optional)return j;Di(m)}finally{_h()}}else if("number"==typeof N){let j=null,W=qn(u,h),ie=-1,he=b&Yn.Host?h[Y][6]:null;for((-1===W||b&Yn.SkipSelf)&&(ie=-1===W?Xi(u,h):h[W+8],-1!==ie&&ca(b,!1)?(j=h[1],W=la(ie),h=Uc(ie,h)):W=-1);-1!==W;){const Te=h[1];if(Xo(N,W,Te.data)){const Le=Is(W,h,m,j,b,he);if(Le!==np)return Le}ie=h[W+8],-1!==ie&&ca(b,h[1].data[W+8]===he)&&Xo(N,W,h)?(j=Te,W=la(ie),h=Uc(ie,h)):W=-1}}}return bs(h,m,b,T)}const np={};function Nr(){return new Hc(So(),wn())}function Is(u,h,m,b,T,N){const j=h[1],W=j.data[u+8],Te=Rr(W,j,m,null==b?Wi(W)&&Wp:b!=j&&0!=(3&W.type),T&Yn.Host&&N===W);return null!==Te?Gl(h,j,Te,W):np}function Rr(u,h,m,b,T){const N=u.providerIndexes,j=h.data,W=1048575&N,ie=u.directiveStart,Te=N>>20,Ze=T?W+Te:u.directiveEnd;for(let _t=b?W:W+Te;_t<Ze;_t++){const kt=j[_t];if(_t<ie&&m===kt||_t>=ie&&kt.type===m)return _t}if(T){const _t=j[ie];if(_t&&Sr(_t)&&_t.type===m)return ie}return null}function Gl(u,h,m,b){let T=u[m];const N=h.data;if(function(u){return u instanceof ms}(T)){const j=T;j.resolving&&function(u,h){throw new an("200",`Circular dependency in DI detected for ${u}`)}(Mt(N[m]));const W=Du(j.canSeeViewProviders);j.resolving=!0;const ie=j.injectImpl?wr(j.injectImpl):null;Aa(u,b,Yn.Default);try{T=u[m]=j.factory(void 0,N,u,b),h.firstCreatePass&&m>=b.directiveStart&&function(u,h,m){const{ngOnChanges:b,ngOnInit:T,ngDoCheck:N}=h.type.prototype;if(b){const j=fl(h);(m.preOrderHooks||(m.preOrderHooks=[])).push(u,j),(m.preOrderCheckHooks||(m.preOrderCheckHooks=[])).push(u,j)}T&&(m.preOrderHooks||(m.preOrderHooks=[])).push(0-u,T),N&&((m.preOrderHooks||(m.preOrderHooks=[])).push(u,N),(m.preOrderCheckHooks||(m.preOrderCheckHooks=[])).push(u,N))}(m,N[m],h)}finally{null!==ie&&wr(ie),Du(W),j.resolving=!1,_h()}}return T}function Xo(u,h,m){return!!(m[h+(u>>5)]&1<<u)}function ca(u,h){return!(u&Yn.Self||u&Yn.Host&&h)}class Hc{constructor(h,m){this._tNode=h,this._lView=m}get(h,m){return ei(this._tNode,this._lView,h,void 0,m)}}function rp(u){return ho(()=>{const h=u.prototype.constructor,m=h[Oi]||fc(h),b=Object.prototype;let T=Object.getPrototypeOf(u.prototype).constructor;for(;T&&T!==b;){const N=T[Oi]||fc(T);if(N&&N!==m)return N;T=Object.getPrototypeOf(T)}return N=>new N})}function fc(u){return Ct(u)?()=>{const h=fc(lt(u));return h&&h()}:pl(u)}function wh(u){return function(u,h){if("class"===h)return u.classes;if("style"===h)return u.styles;const m=u.attrs;if(m){const b=m.length;let T=0;for(;T<b;){const N=m[T];if(Zp(N))break;if(0===N)T+=2;else if("number"==typeof N)for(T++;T<b&&"string"==typeof m[T];)T++;else{if(N===h)return m[T+1];T+=2}}}return null}(So(),u)}const jl="__parameters__";function mc(u,h,m){return ho(()=>{const b=function(u){return function(...m){if(u){const b=u(...m);for(const T in b)this[T]=b[T]}}}(h);function T(...N){if(this instanceof T)return b.apply(this,N),this;const j=new T(...N);return W.annotation=j,W;function W(ie,he,Te){const Le=ie.hasOwnProperty(jl)?ie[jl]:Object.defineProperty(ie,jl,{value:[]})[jl];for(;Le.length<=Te;)Le.push(null);return(Le[Te]=Le[Te]||[]).push(j),ie}}return m&&(T.prototype=Object.create(m.prototype)),T.prototype.ngMetadataName=u,T.annotationCls=T,T})}class Oo{constructor(h,m){this._desc=h,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof m?this.__NG_ELEMENT_ID__=m:void 0!==m&&(this.\u0275prov=qi({token:this,providedIn:m.providedIn||"root",factory:m.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nn=new Oo("AnalyzeForEntryComponents"),U=Function;function ue(u,h){void 0===h&&(h=u);for(let m=0;m<u.length;m++){let b=u[m];Array.isArray(b)?(h===u&&(h=u.slice(0,m)),ue(b,h)):h!==u&&h.push(b)}return h}function me(u,h){u.forEach(m=>Array.isArray(m)?me(m,h):h(m))}function Ce(u,h,m){h>=u.length?u.push(m):u.splice(h,0,m)}function Ae(u,h){return h>=u.length-1?u.pop():u.splice(h,1)[0]}function Pe(u,h){const m=[];for(let b=0;b<u;b++)m.push(h);return m}function ot(u,h,m){let b=rt(u,h);return b>=0?u[1|b]=m:(b=~b,function(u,h,m,b){let T=u.length;if(T==h)u.push(m,b);else if(1===T)u.push(b,u[0]),u[0]=m;else{for(T--,u.push(u[T-1],u[T]);T>h;)u[T]=u[T-2],T--;u[h]=m,u[h+1]=b}}(u,b,h,m)),b}function vt(u,h){const m=rt(u,h);if(m>=0)return u[1|m]}function rt(u,h){return function(u,h,m){let b=0,T=u.length>>m;for(;T!==b;){const N=b+(T-b>>1),j=u[N<<m];if(h===j)return N<<m;j>h?T=N:b=N+1}return~(T<<m)}(u,h,1)}const ci={},lr="__NG_DI_FLAG__",yr="ngTempTokenPath",zi=/\n/gm,po="__source",xs=Dt({provide:String,useValue:Dt});let Go;function Qo(u){const h=Go;return Go=u,h}function ha(u,h=Yn.Default){if(void 0===Go)throw new Error("inject() must be called from an injection context");return null===Go?is(u,void 0,h):Go.get(u,h&Yn.Optional?null:void 0,h)}function wi(u,h=Yn.Default){return(xr||ha)(lt(u),h)}const hr=wi;function qr(u){const h=[];for(let m=0;m<u.length;m++){const b=lt(u[m]);if(Array.isArray(b)){if(0===b.length)throw new Error("Arguments array must have arguments.");let T,N=Yn.Default;for(let j=0;j<b.length;j++){const W=b[j],ie=Jr(W);"number"==typeof ie?-1===ie?T=W.token:N|=ie:T=W}h.push(wi(T,N))}else h.push(wi(b))}return h}function fo(u,h){return u[lr]=h,u.prototype[lr]=h,u}function Jr(u){return u[lr]}function da(u,h,m,b){const T=u[yr];throw h[po]&&T.unshift(h[po]),u.message=function(u,h,m,b=null){u=u&&"\n"===u.charAt(0)&&"\u0275"==u.charAt(1)?u.substr(2):u;let T=Be(h);if(Array.isArray(h))T=h.map(Be).join(" -> ");else if("object"==typeof h){let N=[];for(let j in h)if(h.hasOwnProperty(j)){let W=h[j];N.push(j+":"+("string"==typeof W?JSON.stringify(W):Be(W)))}T=`{${N.join(", ")}}`}return`${m}${b?"("+b+")":""}[${T}]: ${u.replace(zi,"\n  ")}`}("\n"+u.message,T,m,b),u.ngTokenPath=T,u[yr]=null,u}const Zs=fo(mc("Inject",u=>({token:u})),-1),Sl=fo(mc("Optional"),8),Ws=fo(mc("SkipSelf"),4);let pa,Gf;function Fo(u){var h;return(null===(h=function(){if(void 0===pa&&(pa=null,Cr.trustedTypes))try{pa=Cr.trustedTypes.createPolicy("angular",{createHTML:u=>u,createScript:u=>u,createScriptURL:u=>u})}catch(u){}return pa}())||void 0===h?void 0:h.createHTML(u))||u}function jf(u){var h;return(null===(h=function(){if(void 0===Gf&&(Gf=null,Cr.trustedTypes))try{Gf=Cr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:u=>u,createScript:u=>u,createScriptURL:u=>u})}catch(u){}return Gf}())||void 0===h?void 0:h.createHTML(u))||u}class Fs{constructor(h){this.changingThisBreaksApplicationSecurity=h}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class _c extends Fs{getTypeName(){return"HTML"}}class Nu extends Fs{getTypeName(){return"Style"}}class $s extends Fs{getTypeName(){return"Script"}}class yc extends Fs{getTypeName(){return"URL"}}class Th extends Fs{getTypeName(){return"ResourceURL"}}function Qc(u){return u instanceof Fs?u.changingThisBreaksApplicationSecurity:u}function Mh(u,h){const m=P_(u);if(null!=m&&m!==h){if("ResourceURL"===m&&"URL"===h)return!0;throw new Error(`Required a safe ${h}, got a ${m} (see https://g.co/ng/security#xss)`)}return m===h}function P_(u){return u instanceof Fs&&u.getTypeName()||null}function R_(u){return new _c(u)}function Yf(u){return new Nu(u)}function ql(u){return new $s(u)}function Iv(u){return new yc(u)}function O_(u){return new Th(u)}class Er{constructor(h){this.inertDocumentHelper=h}getInertBodyElement(h){h="<body><remove></remove>"+h;try{const m=(new window.DOMParser).parseFromString(Fo(h),"text/html").body;return null===m?this.inertDocumentHelper.getInertBodyElement(h):(m.removeChild(m.firstChild),m)}catch(m){return null}}}class qf{constructor(h){if(this.defaultDoc=h,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const m=this.inertDocument.createElement("html");this.inertDocument.appendChild(m);const b=this.inertDocument.createElement("body");m.appendChild(b)}}getInertBodyElement(h){const m=this.inertDocument.createElement("template");if("content"in m)return m.innerHTML=Fo(h),m;const b=this.inertDocument.createElement("body");return b.innerHTML=Fo(h),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(b),b}stripCustomNsAttrs(h){const m=h.attributes;for(let T=m.length-1;0<T;T--){const j=m.item(T).name;("xmlns:ns1"===j||0===j.indexOf("ns1:"))&&h.removeAttribute(j)}let b=h.firstChild;for(;b;)b.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(b),b=b.nextSibling}}const hd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ya(u){return(u=String(u)).match(hd)||u.match(Gi)?u:"unsafe:"+u}function El(u){const h={};for(const m of u.split(","))h[m]=!0;return h}function vc(...u){const h={};for(const m of u)for(const b in m)m.hasOwnProperty(b)&&(h[b]=!0);return h}const L_=El("area,br,col,hr,img,wbr"),Bu=El("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),N_=El("rp,rt"),Wl=vc(L_,vc(Bu,El("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vc(N_,El("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vc(N_,Bu)),Qp=El("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ss=El("srcset"),Jp=vc(Qp,ss,El("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),El("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cg=El("script,style,template");class ug{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(h){let m=h.firstChild,b=!0;for(;m;)if(m.nodeType===Node.ELEMENT_NODE?b=this.startElement(m):m.nodeType===Node.TEXT_NODE?this.chars(m.nodeValue):this.sanitizedSomething=!0,b&&m.firstChild)m=m.firstChild;else for(;m;){m.nodeType===Node.ELEMENT_NODE&&this.endElement(m);let T=this.checkClobberedElement(m,m.nextSibling);if(T){m=T;break}m=this.checkClobberedElement(m,m.parentNode)}return this.buf.join("")}startElement(h){const m=h.nodeName.toLowerCase();if(!Wl.hasOwnProperty(m))return this.sanitizedSomething=!0,!cg.hasOwnProperty(m);this.buf.push("<"),this.buf.push(m);const b=h.attributes;for(let T=0;T<b.length;T++){const N=b.item(T),j=N.name,W=j.toLowerCase();if(!Jp.hasOwnProperty(W)){this.sanitizedSomething=!0;continue}let ie=N.value;Qp[W]&&(ie=Ya(ie)),ss[W]&&(u=ie,ie=(u=String(u)).split(",").map(h=>Ya(h.trim())).join(", ")),this.buf.push(" ",j,'="',hg(ie),'"')}var u;return this.buf.push(">"),!0}endElement(h){const m=h.nodeName.toLowerCase();Wl.hasOwnProperty(m)&&!L_.hasOwnProperty(m)&&(this.buf.push("</"),this.buf.push(m),this.buf.push(">"))}chars(h){this.buf.push(hg(h))}checkClobberedElement(h,m){if(m&&(h.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${h.outerHTML}`);return m}}const B_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fa=/([^\#-~ |!])/g;function hg(u){return u.replace(/&/g,"&amp;").replace(B_,function(h){return"&#"+(1024*(h.charCodeAt(0)-55296)+(h.charCodeAt(1)-56320)+65536)+";"}).replace(fa,function(h){return"&#"+h.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ls;function pd(u,h){let m=null;try{Ls=Ls||function(u){const h=new qf(u);return function(){try{return!!(new window.DOMParser).parseFromString(Fo(""),"text/html")}catch(u){return!1}}()?new Er(h):h}(u);let b=h?String(h):"";m=Ls.getInertBodyElement(b);let T=5,N=b;do{if(0===T)throw new Error("Failed to sanitize html because the input is unstable");T--,b=N,N=m.innerHTML,m=Ls.getInertBodyElement(b)}while(b!==N);return Fo((new ug).sanitizeChildren(Ml(m)||m))}finally{if(m){const b=Ml(m)||m;for(;b.firstChild;)b.removeChild(b.firstChild)}}}function Ml(u){return"content"in u&&function(u){return u.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===u.nodeName}(u)?u.content:null}var oi=(()=>((oi=oi||{})[oi.NONE=0]="NONE",oi[oi.HTML=1]="HTML",oi[oi.STYLE=2]="STYLE",oi[oi.SCRIPT=3]="SCRIPT",oi[oi.URL=4]="URL",oi[oi.RESOURCE_URL=5]="RESOURCE_URL",oi))();function qa(u){const h=Ah();return h?jf(h.sanitize(oi.HTML,u)||""):Mh(u,"HTML")?jf(Qc(u)):pd(td(),dn(u))}function bc(u){const h=Ah();return h?h.sanitize(oi.URL,u)||"":Mh(u,"URL")?Qc(u):Ya(dn(u))}function Ah(){const u=wn();return u&&u[12]}const tf="__ngContext__";function Xs(u,h){u[tf]=h}function nf(u){const h=function(u){return u[tf]||null}(u);return h?Array.isArray(h)?h:h.lView:null}function Xf(u){return u.ngOriginalError}function V_(u,...h){u.error(...h)}class Ph{constructor(){this._console=console}handleError(h){const m=this._findOriginalError(h),b=this._findContext(h),T=(u=h)&&u.ngErrorLogger||V_;var u;T(this._console,"ERROR",h),m&&T(this._console,"ORIGINAL ERROR",m),b&&T(this._console,"ERROR CONTEXT",b)}_findContext(h){return h?h.ngDebugContext||this._findContext(Xf(h)):null}_findOriginalError(h){let m=h&&Xf(h);for(;m&&Xf(m);)m=Xf(m);return m||null}}const yd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Cr))();function Rh(u){return u.ownerDocument.body}function Xl(u){return u instanceof Function?u():u}var Xa=(()=>((Xa=Xa||{})[Xa.Important=1]="Important",Xa[Xa.DashCase=2]="DashCase",Xa))();function Kc(u,h){return undefined(u,h)}function Fh(u){const h=u[3];return vo(h)?h[3]:h}function af(u){return wg(u[13])}function tu(u){return wg(u[4])}function wg(u){for(;null!==u&&!vo(u);)u=u[4];return u}function dp(u,h,m,b,T){if(null!=b){let N,j=!1;vo(b)?N=b:ar(b)&&(j=!0,b=b[0]);const W=Pr(b);0===u&&null!==m?null==T?Fe(h,m,W):ye(h,m,W,T||null,!0):1===u&&null!==m?ye(h,m,W,T||null,!0):2===u?function(u,h,m){const b=pt(u,h);b&&function(u,h,m,b){Xr(u)?u.removeChild(h,m,b):h.removeChild(m)}(u,b,h,m)}(h,W,j):3===u&&h.destroyNode(W),null!=N&&function(u,h,m,b,T){const N=m[7];N!==Pr(m)&&dp(h,u,b,N,T);for(let W=10;W<m.length;W++){const ie=m[W];Qa(ie[1],ie,u,h,b,N)}}(h,u,N,m,T)}}function vd(u,h,m){return Xr(u)?u.createElement(h,m):null===m?u.createElement(h):u.createElementNS(m,h)}function Ra(u,h){const m=u[9],b=m.indexOf(h),T=h[3];1024&h[2]&&(h[2]&=-1025,Ua(T,-1)),m.splice(b,1)}function em(u,h){if(u.length<=10)return;const m=10+h,b=u[m];if(b){const T=b[17];null!==T&&T!==u&&Ra(T,b),h>0&&(u[m-1][4]=b[4]);const N=Ae(u,10+h);!function(u,h){Qa(u,h,h[11],2,null,null),h[0]=null,h[6]=null}(b[1],b);const j=N[19];null!==j&&j.detachView(N[1]),b[3]=null,b[4]=null,b[2]&=-129}return b}function E(u,h){if(!(256&h[2])){const m=h[11];Xr(m)&&m.destroyNode&&Qa(u,h,m,3,null,null),function(u){let h=u[13];if(!h)return S(u[1],u);for(;h;){let m=null;if(ar(h))m=h[13];else{const b=h[10];b&&(m=b)}if(!m){for(;h&&!h[4]&&h!==u;)ar(h)&&S(h[1],h),h=h[3];null===h&&(h=u),ar(h)&&S(h[1],h),m=h&&h[4]}h=m}}(h)}}function S(u,h){if(!(256&h[2])){h[2]&=-129,h[2]|=256,function(u,h){let m;if(null!=u&&null!=(m=u.destroyHooks))for(let b=0;b<m.length;b+=2){const T=h[m[b]];if(!(T instanceof ms)){const N=m[b+1];if(Array.isArray(N))for(let j=0;j<N.length;j+=2){const W=T[N[j]],ie=N[j+1];try{ie.call(W)}finally{}}else try{N.call(T)}finally{}}}}(u,h),function(u,h){const m=u.cleanup,b=h[7];let T=-1;if(null!==m)for(let N=0;N<m.length-1;N+=2)if("string"==typeof m[N]){const j=m[N+1],W="function"==typeof j?j(h):Pr(h[j]),ie=b[T=m[N+2]],he=m[N+3];"boolean"==typeof he?W.removeEventListener(m[N],ie,he):he>=0?b[T=he]():b[T=-he].unsubscribe(),N+=2}else{const j=b[T=m[N+1]];m[N].call(j)}if(null!==b){for(let N=T+1;N<b.length;N++)b[N]();h[7]=null}}(u,h),1===h[1].type&&Xr(h[11])&&h[11].destroy();const m=h[17];if(null!==m&&vo(h[3])){m!==h[3]&&Ra(m,h);const b=h[19];null!==b&&b.detachView(u)}}}function Q(u,h,m){return function(u,h,m){let b=h;for(;null!==b&&40&b.type;)b=(h=b).parent;if(null===b)return m[0];if(2&b.flags){const T=u.data[b.directiveStart].encapsulation;if(T===$n.None||T===$n.Emulated)return null}return Ma(b,m)}(u,h.parent,m)}function ye(u,h,m,b,T){Xr(u)?u.insertBefore(h,m,b,T):h.insertBefore(m,b,T)}function Fe(u,h,m){Xr(u)?u.appendChild(h,m):h.appendChild(m)}function Ye(u,h,m,b,T){null!==b?ye(u,h,m,b,T):Fe(u,h,m)}function pt(u,h){return Xr(u)?u.parentNode(h):h.parentNode}function cn(u,h,m){return Wn(u,h,m)}let Wn=function(u,h,m){return 40&u.type?Ma(u,m):null};function Qi(u,h,m,b){const T=Q(u,b,h),N=h[11],W=cn(b.parent||h[6],b,h);if(null!=T)if(Array.isArray(m))for(let ie=0;ie<m.length;ie++)Ye(N,T,m[ie],W,!1);else Ye(N,T,m,W,!1)}function Jo(u,h){if(null!==h){const m=h.type;if(3&m)return Ma(h,u);if(4&m)return bd(-1,u[h.index]);if(8&m){const b=h.child;if(null!==b)return Jo(u,b);{const T=u[h.index];return vo(T)?bd(-1,T):Pr(T)}}if(32&m)return Kc(h,u)()||Pr(u[h.index]);{const b=Al(u,h);return null!==b?Array.isArray(b)?b[0]:Jo(Fh(u[Y]),b):Jo(u,h.next)}}return null}function Al(u,h){return null!==h?u[Y][6].projection[h.projection]:null}function bd(u,h){const m=10+u+1;if(m<h.length){const b=h[m],T=b[1].firstChild;if(null!==T)return Jo(b,T)}return h[7]}function xo(u,h,m,b,T,N,j){for(;null!=m;){const W=b[m.index],ie=m.type;if(j&&0===h&&(W&&Xs(Pr(W),b),m.flags|=4),64!=(64&m.flags))if(8&ie)xo(u,h,m.child,b,T,N,!1),dp(h,u,T,W,N);else if(32&ie){const he=Kc(m,b);let Te;for(;Te=he();)dp(h,u,T,Te,N);dp(h,u,T,W,N)}else 16&ie?pp(u,h,b,m,T,N):dp(h,u,T,W,N);m=j?m.projectionNext:m.next}}function Qa(u,h,m,b,T,N){xo(m,b,u.firstChild,h,T,N,!1)}function pp(u,h,m,b,T,N){const j=m[Y],ie=j[6].projection[b.projection];if(Array.isArray(ie))for(let he=0;he<ie.length;he++)dp(h,u,T,ie[he],N);else xo(u,h,ie,j[3],T,N,!0)}function Px(u,h,m){Xr(u)?u.setAttribute(h,"style",m):h.style.cssText=m}function hf(u,h,m){Xr(u)?""===m?u.removeAttribute(h,"class"):u.setAttribute(h,"class",m):h.className=m}function nm(u,h,m){let b=u.length;for(;;){const T=u.indexOf(h,m);if(-1===T)return T;if(0===T||u.charCodeAt(T-1)<=32){const N=h.length;if(T+N===b||u.charCodeAt(T+N)<=32)return T}m=T+1}}const Lv="ng-template";function Rx(u,h,m){let b=0;for(;b<u.length;){let T=u[b++];if(m&&"class"===T){if(T=u[b],-1!==nm(T.toLowerCase(),h,0))return!0}else if(1===T){for(;b<u.length&&"string"==typeof(T=u[b++]);)if(T.toLowerCase()===h)return!0;return!1}}return!1}function im(u){return 4===u.type&&u.value!==Lv}function Kr(u,h,m){return h===(4!==u.type||m?u.value:Lv)}function Nv(u,h,m){let b=4;const T=u.attrs||[],N=function(u){for(let h=0;h<u.length;h++)if(Zp(u[h]))return h;return u.length}(T);let j=!1;for(let W=0;W<h.length;W++){const ie=h[W];if("number"!=typeof ie){if(!j)if(4&b){if(b=2|1&b,""!==ie&&!Kr(u,ie,m)||""===ie&&1===h.length){if(nu(b))return!1;j=!0}}else{const he=8&b?ie:h[++W];if(8&b&&null!==u.attrs){if(!Rx(u.attrs,he,m)){if(nu(b))return!1;j=!0}continue}const Le=Ox(8&b?"class":ie,T,im(u),m);if(-1===Le){if(nu(b))return!1;j=!0;continue}if(""!==he){let Ze;Ze=Le>N?"":T[Le+1].toLowerCase();const _t=8&b?Ze:null;if(_t&&-1!==nm(_t,he,0)||2&b&&he!==Ze){if(nu(b))return!1;j=!0}}}}else{if(!j&&!nu(b)&&!nu(ie))return!1;if(j&&nu(ie))continue;j=!1,b=ie|1&b}}return nu(b)||j}function nu(u){return 0==(1&u)}function Ox(u,h,m,b){if(null===h)return-1;let T=0;if(b||!m){let N=!1;for(;T<h.length;){const j=h[T];if(j===u)return T;if(3===j||6===j)N=!0;else{if(1===j||2===j){let W=h[++T];for(;"string"==typeof W;)W=h[++T];continue}if(4===j)break;if(0===j){T+=4;continue}}T+=N?1:2}return-1}return function(u,h){let m=u.indexOf(4);if(m>-1)for(m++;m<u.length;){const b=u[m];if("number"==typeof b)return-1;if(b===h)return m;m++}return-1}(h,u)}function Nh(u,h,m=!1){for(let b=0;b<h.length;b++)if(Nv(u,h[b],m))return!0;return!1}function $w(u,h){e:for(let m=0;m<h.length;m++){const b=h[m];if(u.length===b.length){for(let T=0;T<u.length;T++)if(u[T]!==b[T])continue e;return!0}}return!1}function Lx(u,h){return u?":not("+h.trim()+")":h}function Xw(u){let h=u[0],m=1,b=2,T="",N=!1;for(;m<u.length;){let j=u[m];if("string"==typeof j)if(2&b){const W=u[++m];T+="["+j+(W.length>0?'="'+W+'"':"")+"]"}else 8&b?T+="."+j:4&b&&(T+=" "+j);else""!==T&&!nu(j)&&(h+=Lx(N,T),T=""),b=j,N=N||!nu(b);m++}return""!==T&&(h+=Lx(N,T)),h}const Ji={};function Bv(u){zv(fr(),wn(),Ho()+u,sa())}function zv(u,h,m,b){if(!b)if(3==(3&h[2])){const N=u.preOrderCheckHooks;null!==N&&Ul(h,N,m)}else{const N=u.preOrderHooks;null!==N&&vh(h,N,0,m)}aa(m)}function fp(u,h){return u<<17|h<<2}function Ja(u){return u>>17&32767}function Uv(u){return 2|u}function xd(u){return(131068&u)>>2}function pf(u,h){return-131069&u|h<<2}function W_(u){return 1|u}function Gx(u,h){const m=u.contentQueries;if(null!==m)for(let b=0;b<m.length;b+=2){const T=m[b],N=m[b+1];if(-1!==N){const j=u.data[N];Mu(T),j.contentQueries(2,h[N],N)}}}function ey(u,h,m,b,T,N,j,W,ie,he){const Te=h.blueprint.slice();return Te[0]=T,Te[2]=140|b,nd(Te),Te[3]=Te[15]=u,Te[8]=m,Te[10]=j||u&&u[10],Te[11]=W||u&&u[11],Te[12]=ie||u&&u[12]||null,Te[9]=he||u&&u[9]||null,Te[6]=N,Te[Y]=2==h.type?u[Y]:Te,Te}function Bh(u,h,m,b,T){let N=u.data[h];if(null===N)N=function(u,h,m,b,T){const N=rd(),j=ml(),ie=u.data[h]=function(u,h,m,b,T,N){return{type:m,index:b,insertBeforeIndex:null,injectorIndex:h?h.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:T,attrs:N,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:h,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,j?N:N&&N.parent,m,h,b,T);return null===u.firstChild&&(u.firstChild=ie),null!==N&&(j?null==N.child&&null!==ie.parent&&(N.child=ie):null===N.next&&(N.next=ie)),ie}(u,h,m,b,T),bi.lFrame.inI18n&&(N.flags|=64);else if(64&N.type){N.type=m,N.value=b,N.attrs=T;const j=function(){const u=bi.lFrame,h=u.currentTNode;return u.isParent?h:h.parent}();N.injectorIndex=null===j?-1:j.injectorIndex}return ps(N,!0),N}function _p(u,h,m,b){if(0===m)return-1;const T=h.length;for(let N=0;N<m;N++)h.push(b),u.blueprint.push(b),u.data.push(null);return T}function kg(u,h,m){_l(h);try{const b=u.viewQuery;null!==b&&uy(1,b,m);const T=u.template;null!==T&&Cd(u,h,T,1,m),u.firstCreatePass&&(u.firstCreatePass=!1),u.staticContentQueries&&Gx(u,h),u.staticViewQueries&&uy(2,u.viewQuery,m);const N=u.components;null!==N&&function(u,h){for(let m=0;m<h.length;m++)ob(u,h[m])}(h,N)}catch(b){throw u.firstCreatePass&&(u.incompleteFirstPass=!0,u.firstCreatePass=!1),b}finally{h[2]&=-5,Ds()}}function We(u,h,m,b){const T=h[2];if(256==(256&T))return;_l(h);const N=sa();try{nd(h),function(u){bi.lFrame.bindingIndex=u}(u.bindingStartIndex),null!==m&&Cd(u,h,m,2,b);const j=3==(3&T);if(!N)if(j){const he=u.preOrderCheckHooks;null!==he&&Ul(h,he,null)}else{const he=u.preOrderHooks;null!==he&&vh(h,he,0,null),bh(h,0)}if(function(u){for(let h=af(u);null!==h;h=tu(h)){if(!h[2])continue;const m=h[9];for(let b=0;b<m.length;b++){const T=m[b],N=T[3];0==(1024&T[2])&&Ua(N,1),T[2]|=1024}}}(h),function(u){for(let h=af(u);null!==h;h=tu(h))for(let m=10;m<h.length;m++){const b=h[m],T=b[1];$d(b)&&We(T,b,T.template,b[8])}}(h),null!==u.contentQueries&&Gx(u,h),!N)if(j){const he=u.contentCheckHooks;null!==he&&Ul(h,he)}else{const he=u.contentHooks;null!==he&&vh(h,he,1),bh(h,1)}!function(u,h){const m=u.hostBindingOpCodes;if(null!==m)try{for(let b=0;b<m.length;b++){const T=m[b];if(T<0)aa(~T);else{const N=T,j=m[++b],W=m[++b];Gp(j,N),W(2,h[N])}}}finally{aa(-1)}}(u,h);const W=u.components;null!==W&&function(u,h){for(let m=0;m<h.length;m++)rb(u,h[m])}(h,W);const ie=u.viewQuery;if(null!==ie&&uy(2,ie,b),!N)if(j){const he=u.viewCheckHooks;null!==he&&Ul(h,he)}else{const he=u.viewHooks;null!==he&&vh(h,he,2),bh(h,2)}!0===u.firstUpdatePass&&(u.firstUpdatePass=!1),N||(h[2]&=-73),1024&h[2]&&(h[2]&=-1025,Ua(h[3],-1))}finally{Ds()}}function Zr(u,h,m,b){const T=h[10],N=!sa(),j=oa(h);try{N&&!j&&T.begin&&T.begin(),j&&kg(u,h,b),We(u,h,m,b)}finally{N&&!j&&T.end&&T.end()}}function Cd(u,h,m,b,T){const N=Ho(),j=2&b;try{aa(-1),j&&h.length>20&&zv(u,h,20,sa()),m(b,T)}finally{aa(N)}}function gf(u,h,m){if(Mr(h)){const T=h.directiveEnd;for(let N=h.directiveStart;N<T;N++){const j=u.data[N];j.contentQueries&&j.contentQueries(1,m[N],N)}}}function Ag(u,h,m){!Rf()||(function(u,h,m,b){const T=m.directiveStart,N=m.directiveEnd;u.firstCreatePass||Iu(m,h),Xs(b,h);const j=m.initialInputs;for(let W=T;W<N;W++){const ie=u.data[W],he=Sr(ie);he&&sy(h,m,ie);const Te=Gl(h,u,W,m);Xs(Te,h),null!==j&&bp(0,W-T,Te,ie,0,j),he&&(js(m.index,h)[8]=Te)}}(u,h,m,Ma(m,h)),128==(128&m.flags)&&function(u,h,m){const b=m.directiveStart,T=m.directiveEnd,j=m.index,W=bi.lFrame.currentDirectiveIndex;try{aa(j);for(let ie=b;ie<T;ie++){const he=u.data[ie],Te=h[ie];Ys(ie),(null!==he.hostBindings||0!==he.hostVars||null!==he.hostAttrs)&&Sd(he,Te)}}finally{aa(-1),Ys(W)}}(u,h,m))}function ty(u,h,m=Ma){const b=h.localNames;if(null!==b){let T=h.index+1;for(let N=0;N<b.length;N+=2){const j=b[N+1],W=-1===j?m(h,u):u[j];u[T++]=W}}}function jx(u){const h=u.tView;return null===h||h.incompleteFirstPass?u.tView=si(1,null,u.template,u.decls,u.vars,u.directiveDefs,u.pipeDefs,u.viewQuery,u.schemas,u.consts):h}function si(u,h,m,b,T,N,j,W,ie,he){const Te=20+b,Le=Te+T,Ze=function(u,h){const m=[];for(let b=0;b<h;b++)m.push(b<u?null:Ji);return m}(Te,Le),_t="function"==typeof he?he():he;return Ze[1]={type:u,blueprint:Ze,template:m,queries:null,viewQuery:W,declTNode:h,data:Ze.slice().fill(null,Te),bindingStartIndex:Te,expandoStartIndex:Le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof N?N():N,pipeRegistry:"function"==typeof j?j():j,firstChild:null,schemas:ie,consts:_t,incompleteFirstPass:!1}}function yp(u,h,m,b){const T=lb(h);null===m?T.push(b):(T.push(m),u.firstCreatePass&&bf(u).push(b,T.length-1))}function ny(u,h,m){for(let b in u)if(u.hasOwnProperty(b)){const T=u[b];(m=null===m?{}:m).hasOwnProperty(b)?m[b].push(h,T):m[b]=[h,T]}return m}function Ka(u,h,m,b,T,N,j,W){const ie=Ma(h,m);let Te,he=h.inputs;!W&&null!=he&&(Te=he[b])?(xp(u,m,Te,b,T),Wi(h)&&function(u,h){const m=js(h,u);16&m[2]||(m[2]|=64)}(m,h.index)):3&h.type&&(b=function(u){return"class"===u?"className":"for"===u?"htmlFor":"formaction"===u?"formAction":"innerHtml"===u?"innerHTML":"readonly"===u?"readOnly":"tabindex"===u?"tabIndex":u}(b),T=null!=j?j(T,h.value||"",b):T,Xr(N)?N.setProperty(ie,b,T):Qr(b)||(ie.setProperty?ie.setProperty(b,T):ie[b]=T))}function Dg(u,h,m,b){let T=!1;if(Rf()){const N=function(u,h,m){const b=u.directiveRegistry;let T=null;if(b)for(let N=0;N<b.length;N++){const j=b[N];Nh(m,j.selectors,!1)&&(T||(T=[]),Cl(Iu(m,h),u,j.type),Sr(j)?(To(u,m),T.unshift(j)):T.push(j))}return T}(u,h,m),j=null===b?null:{"":-1};if(null!==N){T=!0,oy(m,u.data.length,N.length);for(let Te=0;Te<N.length;Te++){const Le=N[Te];Le.providersResolver&&Le.providersResolver(Le)}let W=!1,ie=!1,he=_p(u,h,N.length,null);for(let Te=0;Te<N.length;Te++){const Le=N[Te];m.mergedAttrs=ad(m.mergedAttrs,Le.hostAttrs),Ig(u,m,h,he,Le),eb(he,Le,j),null!==Le.contentQueries&&(m.flags|=8),(null!==Le.hostBindings||null!==Le.hostAttrs||0!==Le.hostVars)&&(m.flags|=128);const Ze=Le.type.prototype;!W&&(Ze.ngOnChanges||Ze.ngOnInit||Ze.ngDoCheck)&&((u.preOrderHooks||(u.preOrderHooks=[])).push(m.index),W=!0),!ie&&(Ze.ngOnChanges||Ze.ngDoCheck)&&((u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(m.index),ie=!0),he++}!function(u,h){const b=h.directiveEnd,T=u.data,N=h.attrs,j=[];let W=null,ie=null;for(let he=h.directiveStart;he<b;he++){const Te=T[he],Le=Te.inputs,Ze=null===N||im(h)?null:tb(Le,N);j.push(Ze),W=ny(Le,he,W),ie=ny(Te.outputs,he,ie)}null!==W&&(W.hasOwnProperty("class")&&(h.flags|=16),W.hasOwnProperty("style")&&(h.flags|=32)),h.initialInputs=j,h.inputs=W,h.outputs=ie}(u,m)}j&&function(u,h,m){if(h){const b=u.localNames=[];for(let T=0;T<h.length;T+=2){const N=m[h[T+1]];if(null==N)throw new an("301",`Export of name '${h[T+1]}' not found!`);b.push(h[T],N)}}}(m,b,j)}return m.mergedAttrs=ad(m.mergedAttrs,m.attrs),T}function Jv(u,h,m,b,T,N){const j=N.hostBindings;if(j){let W=u.hostBindingOpCodes;null===W&&(W=u.hostBindingOpCodes=[]);const ie=~h.index;(function(u){let h=u.length;for(;h>0;){const m=u[--h];if("number"==typeof m&&m<0)return m}return 0})(W)!=ie&&W.push(ie),W.push(b,T,j)}}function Sd(u,h){null!==u.hostBindings&&u.hostBindings(1,h)}function To(u,h){h.flags|=2,(u.components||(u.components=[])).push(h.index)}function eb(u,h,m){if(m){if(h.exportAs)for(let b=0;b<h.exportAs.length;b++)m[h.exportAs[b]]=u;Sr(h)&&(m[""]=u)}}function oy(u,h,m){u.flags|=1,u.directiveStart=h,u.directiveEnd=h+m,u.providerIndexes=h}function Ig(u,h,m,b,T){u.data[b]=T;const N=T.factory||(T.factory=pl(T.type)),j=new ms(N,Sr(T),null);u.blueprint[b]=j,m[b]=j,Jv(u,h,0,b,_p(u,m,T.hostVars,Ji),T)}function sy(u,h,m){const b=Ma(h,u),T=jx(m),N=u[10],j=zh(u,ey(u,T,null,m.onPush?64:16,b,h,N,N.createRenderer(b,m),null,null));u[h.index]=j}function Ql(u,h,m,b,T,N){const j=Ma(u,h);!function(u,h,m,b,T,N,j){if(null==N)Xr(u)?u.removeAttribute(h,T,m):h.removeAttribute(T);else{const W=null==j?dn(N):j(N,b||"",T);Xr(u)?u.setAttribute(h,T,W,m):m?h.setAttributeNS(m,T,W):h.setAttribute(T,W)}}(h[11],j,N,u.value,m,b,T)}function bp(u,h,m,b,T,N){const j=N[h];if(null!==j){const W=b.setInput;for(let ie=0;ie<j.length;){const he=j[ie++],Te=j[ie++],Le=j[ie++];null!==W?b.setInput(m,Le,he,Te):m[Te]=Le}}}function tb(u,h){let m=null,b=0;for(;b<h.length;){const T=h[b];if(0!==T)if(5!==T){if("number"==typeof T)break;u.hasOwnProperty(T)&&(null===m&&(m=[]),m.push(T,u[T],h[b+1])),b+=2}else b+=2;else b+=4}return m}function vf(u,h,m,b){return new Array(u,!0,!1,h,null,0,b,m,null,null)}function rb(u,h){const m=js(h,u);if($d(m)){const b=m[1];80&m[2]?We(b,m,b.template,m[8]):m[5]>0&&Pg(m)}}function Pg(u){for(let b=af(u);null!==b;b=tu(b))for(let T=10;T<b.length;T++){const N=b[T];if(1024&N[2]){const j=N[1];We(j,N,j.template,N[8])}else N[5]>0&&Pg(N)}const m=u[1].components;if(null!==m)for(let b=0;b<m.length;b++){const T=js(m[b],u);$d(T)&&T[5]>0&&Pg(T)}}function ob(u,h){const m=js(h,u),b=m[1];(function(u,h){for(let m=h.length;m<u.blueprint.length;m++)h.push(u.blueprint[m])})(b,m),kg(b,m,m[8])}function zh(u,h){return u[13]?u[14][4]=h:u[13]=h,u[14]=h,h}function um(u){for(;u;){u[2]|=64;const h=Fh(u);if(vs(u)&&!h)return u;u=h}return null}function ly(u,h,m){const b=h[10];b.begin&&b.begin();try{We(u,h,u.template,m)}catch(T){throw cb(h,T),T}finally{b.end&&b.end()}}function cy(u){!function(u){for(let h=0;h<u.components.length;h++){const m=u.components[h],b=nf(m),T=b[1];Zr(T,b,T.template,m)}}(u[8])}function uy(u,h,m){Mu(0),h(u,m)}const hm=(()=>Promise.resolve(null))();function lb(u){return u[7]||(u[7]=[])}function bf(u){return u.cleanup||(u.cleanup=[])}function Ed(u,h,m){return(null===u||Sr(u))&&(m=function(u){for(;Array.isArray(u);){if("object"==typeof u[1])return u;u=u[0]}return null}(m[h.index])),m[11]}function cb(u,h){const m=u[9],b=m?m.get(Ph,null):null;b&&b.handleError(h)}function xp(u,h,m,b,T){for(let N=0;N<m.length;){const j=m[N++],W=m[N++],ie=h[j],he=u.data[j];null!==he.setInput?he.setInput(ie,T,b,W):ie[W]=T}}function su(u,h,m){const b=Lc(h,u);!function(u,h,m){Xr(u)?u.setValue(h,m):h.textContent=m}(u[11],b,m)}function Yu(u,h,m){let b=m?u.styles:null,T=m?u.classes:null,N=0;if(null!==h)for(let j=0;j<h.length;j++){const W=h[j];"number"==typeof W?N=W:1==N?T=je(T,W):2==N&&(b=je(b,W+": "+h[++j]+";"))}m?u.styles=b:u.stylesWithoutHost=b,m?u.classes=T:u.classesWithoutHost=T}const Td=new Oo("INJECTOR",-1);class Fg{get(h,m=ci){if(m===ci){const b=new Error(`NullInjectorError: No provider for ${Be(h)}!`);throw b.name="NullInjectorError",b}return m}}const Il=new Oo("Set Injector scope."),au={},ub={};let dm;function pm(){return void 0===dm&&(dm=new Fg),dm}function Lg(u,h=null,m=null,b){return new hb(u,m,h||pm(),b)}class hb{constructor(h,m,b,T=null){this.parent=b,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const N=[];m&&me(m,W=>this.processProvider(W,h,m)),me([h],W=>this.processInjectorType(W,[],N)),this.records.set(Td,Md(void 0,this));const j=this.records.get(Il);this.scope=null!=j?j.value:null,this.source=T||("object"==typeof h?null:Be(h))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(h=>h.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(h,m=ci,b=Yn.Default){this.assertNotDestroyed();const T=Qo(this),N=wr(void 0);try{if(!(b&Yn.SkipSelf)){let W=this.records.get(h);if(void 0===W){const ie=("function"==typeof(u=h)||"object"==typeof u&&u instanceof Oo)&&io(h);W=ie&&this.injectableDefInScope(ie)?Md(fm(h),au):null,this.records.set(h,W)}if(null!=W)return this.hydrate(h,W)}return(b&Yn.Self?pm():this.parent).get(h,m=b&Yn.Optional&&m===ci?null:m)}catch(j){if("NullInjectorError"===j.name){if((j[yr]=j[yr]||[]).unshift(Be(h)),T)throw j;return da(j,h,"R3InjectorError",this.source)}throw j}finally{wr(N),Qo(T)}var u}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(h=>this.get(h))}toString(){const h=[];return this.records.forEach((b,T)=>h.push(Be(T))),`R3Injector[${h.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(h,m,b){if(!(h=lt(h)))return!1;let T=ds(h);const N=null==T&&h.ngModule||void 0,j=void 0===N?h:N,W=-1!==b.indexOf(j);if(void 0!==N&&(T=ds(N)),null==T)return!1;if(null!=T.imports&&!W){let Te;b.push(j);try{me(T.imports,Le=>{this.processInjectorType(Le,m,b)&&(void 0===Te&&(Te=[]),Te.push(Le))})}finally{}if(void 0!==Te)for(let Le=0;Le<Te.length;Le++){const{ngModule:Ze,providers:_t}=Te[Le];me(_t,kt=>this.processProvider(kt,Ze,_t||dt))}}this.injectorDefTypes.add(j);const ie=pl(j)||(()=>new j);this.records.set(j,Md(ie,au));const he=T.providers;if(null!=he&&!W){const Te=h;me(he,Le=>this.processProvider(Le,Te,he))}return void 0!==N&&void 0!==h.providers}processProvider(h,m,b){let T=x(h=lt(h))?h:lt(h&&h.provide);const N=g(u=h)?Md(void 0,u.useValue):Md(mm(u),au);var u;if(x(h)||!0!==h.multi)this.records.get(T);else{let j=this.records.get(T);j||(j=Md(void 0,au,!0),j.factory=()=>qr(j.multi),this.records.set(T,j)),T=h,j.multi.push(h)}this.records.set(T,N)}hydrate(h,m){return m.value===au&&(m.value=ub,m.value=m.factory()),"object"==typeof m.value&&m.value&&null!==(u=m.value)&&"object"==typeof u&&"function"==typeof u.ngOnDestroy&&this.onDestroy.add(m.value),m.value;var u}injectableDefInScope(h){if(!h.providedIn)return!1;const m=lt(h.providedIn);return"string"==typeof m?"any"===m||m===this.scope:this.injectorDefTypes.has(m)}}function fm(u){const h=io(u),m=null!==h?h.factory:pl(u);if(null!==m)return m;if(u instanceof Oo)throw new Error(`Token ${Be(u)} is missing a \u0275prov definition.`);if(u instanceof Function)return function(u){const h=u.length;if(h>0){const b=Pe(h,"?");throw new Error(`Can't resolve all parameters for ${Be(u)}: (${b.join(", ")}).`)}const m=function(u){const h=u&&(u[Ni]||u[uo]);if(h){const m=function(u){if(u.hasOwnProperty("name"))return u.name;const h=(""+u).match(/^function\s*([^\s(]+)/);return null===h?"":h[1]}(u);return console.warn(`DEPRECATED: DI is instantiating a token "${m}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${m}" class.`),h}return null}(u);return null!==m?()=>m.factory(u):()=>new u}(u);throw new Error("unreachable")}function mm(u,h,m){let b;if(x(u)){const T=lt(u);return pl(T)||fm(T)}if(g(u))b=()=>lt(u.useValue);else if(function(u){return!(!u||!u.useFactory)}(u))b=()=>u.useFactory(...qr(u.deps||[]));else if(function(u){return!(!u||!u.useExisting)}(u))b=()=>wi(lt(u.useExisting));else{const T=lt(u&&(u.useClass||u.provide));if(!function(u){return!!u.deps}(u))return pl(T)||fm(T);b=()=>new T(...qr(u.deps))}return b}function Md(u,h,m=!1){return{factory:u,value:h,multi:m?[]:void 0}}function g(u){return null!==u&&"object"==typeof u&&xs in u}function x(u){return"function"==typeof u}const ce=function(u,h,m){return function(u,h=null,m=null,b){const T=Lg(u,h,m,b);return T._resolveInjectorDefTypes(),T}({name:m},h,u,m)};class de{static create(h,m){return Array.isArray(h)?ce(h,m,""):ce(h.providers,h.parent,h.name||"")}}function Fa(u,h){bl(nf(u)[1],So())}function ao(u){let h=function(u){return Object.getPrototypeOf(u.prototype).constructor}(u.type),m=!0;const b=[u];for(;h;){let T;if(Sr(u))T=h.\u0275cmp||h.\u0275dir;else{if(h.\u0275cmp)throw new Error("Directives cannot inherit Components");T=h.\u0275dir}if(T){if(m){b.push(T);const j=u;j.inputs=_a(u.inputs),j.declaredInputs=_a(u.declaredInputs),j.outputs=_a(u.outputs);const W=T.hostBindings;W&&Ec(u,W);const ie=T.viewQuery,he=T.contentQueries;if(ie&&Vh(u,ie),he&&Sc(u,he),wt(u.inputs,T.inputs),wt(u.declaredInputs,T.declaredInputs),wt(u.outputs,T.outputs),Sr(T)&&T.data.animation){const Te=u.data;Te.animation=(Te.animation||[]).concat(T.data.animation)}}const N=T.features;if(N)for(let j=0;j<N.length;j++){const W=N[j];W&&W.ngInherit&&W(u),W===ao&&(m=!1)}}h=Object.getPrototypeOf(h)}!function(u){let h=0,m=null;for(let b=u.length-1;b>=0;b--){const T=u[b];T.hostVars=h+=T.hostVars,T.hostAttrs=ad(T.hostAttrs,m=ad(m,T.hostAttrs))}}(b)}function _a(u){return u===ft?{}:u===dt?[]:u}function Vh(u,h){const m=u.viewQuery;u.viewQuery=m?(b,T)=>{h(b,T),m(b,T)}:h}function Sc(u,h){const m=u.contentQueries;u.contentQueries=m?(b,T,N)=>{h(b,T,N),m(b,T,N)}:h}function Ec(u,h){const m=u.hostBindings;u.hostBindings=m?(b,T)=>{h(b,T),m(b,T)}:h}de.THROW_IF_NOT_FOUND=ci,de.NULL=new Fg,de.\u0275prov=qi({token:de,providedIn:"any",factory:()=>wi(Td)}),de.__NG_ELEMENT_ID__=-1;let Uh=null;function Ko(){if(!Uh){const u=Cr.Symbol;if(u&&u.iterator)Uh=u.iterator;else{const h=Object.getOwnPropertyNames(Map.prototype);for(let m=0;m<h.length;++m){const b=h[m];"entries"!==b&&"size"!==b&&Map.prototype[b]===Map.prototype.entries&&(Uh=b)}}}return Uh}class rl{constructor(h){this.wrapped=h}static wrap(h){return new rl(h)}static unwrap(h){return rl.isWrapped(h)?h.wrapped:h}static isWrapped(h){return h instanceof rl}}function Hh(u){return!!Do(u)&&(Array.isArray(u)||!(u instanceof Map)&&Ko()in u)}function Do(u){return null!==u&&("function"==typeof u||"object"==typeof u)}function zo(u,h,m){return u[h]=m}function ya(u,h){return u[h]}function zs(u,h,m){return!Object.is(u[h],m)&&(u[h]=m,!0)}function Tc(u,h,m,b){const T=zs(u,h,m);return zs(u,h+1,b)||T}function kd(u,h,m,b,T){const N=Tc(u,h,m,b);return zs(u,h+2,T)||N}function va(u,h,m,b,T,N){const j=Tc(u,h,m,b);return Tc(u,h+2,T,N)||j}function Wx(u,h,m,b){const T=wn();return zs(T,Ga(),h)&&(fr(),Ql(Lr(),T,u,h,m,b)),Wx}function py(u,h,m,b){return zs(u,Ga(),m)?h+dn(m)+b:Ji}function u1(u,h,m,b,T,N,j,W){const ie=wn(),he=fr(),Te=u+20,Le=he.firstCreatePass?function(u,h,m,b,T,N,j,W,ie){const he=h.consts,Te=Bh(h,u,4,j||null,Va(he,W));Dg(h,m,Te,Va(he,ie)),bl(h,Te);const Le=Te.tViews=si(2,Te,b,T,N,h.directiveRegistry,h.pipeRegistry,null,h.schemas,he);return null!==h.queries&&(h.queries.template(h,Te),Le.queries=h.queries.embeddedTView(Te)),Te}(Te,he,ie,h,m,b,T,N,j):he.data[Te];ps(Le,!1);const Ze=ie[11].createComment("");Qi(he,ie,Ze,Le),Xs(Ze,ie),zh(ie,ie[Te]=vf(Ze,ie,Ze,Le)),Ro(Le)&&Ag(he,ie,Le),null!=j&&ty(ie,Le,W)}function CE(u){return za(bi.lFrame.contextLView,20+u)}function yy(u,h=Yn.Default){const m=wn();return null===m?wi(u,h):ei(So(),m,lt(u),h)}function t0(u,h,m){const b=wn();return zs(b,Ga(),h)&&Ka(fr(),Lr(),b,u,h,b[11],m,!1),t0}function n0(u,h,m,b,T){const j=T?"class":"style";xp(u,m,h.inputs[j],j,b)}function o0(u,h,m,b){const T=wn(),N=fr(),j=20+u,W=T[11],ie=T[j]=vd(W,h,bi.lFrame.currentNamespace),he=N.firstCreatePass?function(u,h,m,b,T,N,j){const W=h.consts,he=Bh(h,u,2,T,Va(W,N));return Dg(h,m,he,Va(W,j)),null!==he.attrs&&Yu(he,he.attrs,!1),null!==he.mergedAttrs&&Yu(he,he.mergedAttrs,!0),null!==h.queries&&h.queries.elementStart(h,he),he}(j,N,T,0,h,m,b):N.data[j];ps(he,!0);const Te=he.mergedAttrs;null!==Te&&ep(W,ie,Te);const Le=he.classes;null!==Le&&hf(W,ie,Le);const Ze=he.styles;null!==Ze&&Px(W,ie,Ze),64!=(64&he.flags)&&Qi(N,T,ie,he),0===bi.lFrame.elementDepthCount&&Xs(ie,T),bi.lFrame.elementDepthCount++,Ro(he)&&(Ag(N,T,he),gf(N,he,T)),null!==b&&ty(T,he)}function s0(){let u=So();ml()?mh():(u=u.parent,ps(u,!1));const h=u;bi.lFrame.elementDepthCount--;const m=fr();m.firstCreatePass&&(bl(m,u),Mr(u)&&m.queries.elementEnd(u)),null!=h.classesWithoutHost&&function(u){return 0!=(16&u.flags)}(h)&&n0(m,h,wn(),h.classesWithoutHost,!0),null!=h.stylesWithoutHost&&function(u){return 0!=(32&u.flags)}(h)&&n0(m,h,wn(),h.stylesWithoutHost,!1)}function a0(u,h,m,b){o0(u,h,m,b),s0()}function l0(u,h,m){const b=wn(),T=fr(),N=u+20,j=T.firstCreatePass?function(u,h,m,b,T){const N=h.consts,j=Va(N,b),W=Bh(h,u,8,"ng-container",j);return null!==j&&Yu(W,j,!0),Dg(h,m,W,Va(N,T)),null!==h.queries&&h.queries.elementStart(h,W),W}(N,T,b,h,m):T.data[N];ps(j,!0);const W=b[N]=b[11].createComment("");Qi(T,b,W,j),Xs(W,b),Ro(j)&&(Ag(T,b,j),gf(T,j,b)),null!=m&&ty(b,j)}function PE(){let u=So();const h=fr();ml()?mh():(u=u.parent,ps(u,!1)),h.firstCreatePass&&(bl(h,u),Mr(u)&&h.queries.elementEnd(u))}function OA(u,h,m){l0(u,h,m),PE()}function uu(){return wn()}function rn(u){return!!u&&"function"==typeof u.then}function Dn(u){return!!u&&"function"==typeof u.subscribe}const Xu=Dn;function vb(u,h,m,b){const T=wn(),N=fr(),j=So();return by(N,T,T[11],j,u,h,!!m,b),vb}function Gn(u,h){const m=So(),b=wn(),T=fr();return by(T,b,Ed(Bc(T.data),m,b),m,u,h,!1),Gn}function by(u,h,m,b,T,N,j,W){const ie=Ro(b),Te=u.firstCreatePass&&bf(u),Le=h[8],Ze=lb(h);let _t=!0;if(3&b.type||W){const qt=Ma(b,h),Pn=W?W(qt):qt,yn=Ze.length,fi=W?Yi=>W(Pr(Yi[b.index])):b.index;if(Xr(m)){let Yi=null;if(!W&&ie&&(Yi=function(u,h,m,b){const T=u.cleanup;if(null!=T)for(let N=0;N<T.length-1;N+=2){const j=T[N];if(j===m&&T[N+1]===b){const W=h[7],ie=T[N+2];return W.length>ie?W[ie]:null}"string"==typeof j&&(N+=2)}return null}(u,h,T,b.index)),null!==Yi)(Yi.__ngLastListenerFn__||Yi).__ngNextListenerFn__=N,Yi.__ngLastListenerFn__=N,_t=!1;else{N=vi(b,h,Le,N,!1);const Tr=m.listen(Pn,T,N);Ze.push(N,Tr),Te&&Te.push(T,fi,yn,yn+1)}}else N=vi(b,h,Le,N,!0),Pn.addEventListener(T,N,j),Ze.push(N),Te&&Te.push(T,fi,yn,j)}else N=vi(b,h,Le,N,!1);const kt=b.outputs;let nn;if(_t&&null!==kt&&(nn=kt[T])){const qt=nn.length;if(qt)for(let Pn=0;Pn<qt;Pn+=2){const Ba=h[nn[Pn]][nn[Pn+1]].subscribe(N),yu=Ze.length;Ze.push(N,Ba),Te&&Te.push(T,b.index,yu,-(yu+1))}}}function c0(u,h,m,b){try{return!1!==m(b)}catch(T){return cb(u,T),!1}}function vi(u,h,m,b,T){return function N(j){if(j===Function)return b;const W=2&u.flags?js(u.index,h):h;0==(32&h[2])&&um(W);let ie=c0(h,0,b,j),he=N.__ngNextListenerFn__;for(;he;)ie=c0(h,0,he,j)&&ie,he=he.__ngNextListenerFn__;return T&&!1===ie&&(j.preventDefault(),j.returnValue=!1),ie}}function Zi(u=1){return function(u){return(bi.lFrame.contextLView=function(u,h){for(;u>0;)h=h[15],u--;return h}(u,bi.lFrame.contextLView))[8]}(u)}function Jn(u,h){let m=null;const b=function(u){const h=u.attrs;if(null!=h){const m=h.indexOf(5);if(0==(1&m))return h[m+1]}return null}(u);for(let T=0;T<h.length;T++){const N=h[T];if("*"!==N){if(null===b?Nh(u,N,!0):$w(b,N))return T}else m=T}return m}function RE(u){const h=wn()[Y][6];if(!h.projection){const b=h.projection=Pe(u?u.length:1,null),T=b.slice();let N=h.child;for(;null!==N;){const j=u?Jn(N,u):0;null!==j&&(T[j]?T[j].projectionNext=N:b[j]=N,T[j]=N),N=N.next}}}function E1(u,h=0,m){const b=wn(),T=fr(),N=Bh(T,20+u,16,null,m||null);null===N.projection&&(N.projection=h),mh(),64!=(64&N.flags)&&function(u,h,m){pp(h[11],0,h,m,Q(u,m,h),cn(m.parent||h[6],m,h))}(T,b,N)}function kr(u,h,m){return _m(u,"",h,"",m),kr}function _m(u,h,m,b,T){const N=wn(),j=py(N,h,m,b);return j!==Ji&&Ka(fr(),Lr(),N,u,j,N[11],T,!1),_m}function Kl(u,h,m,b,T){const N=u[m+1],j=null===h;let W=b?Ja(N):xd(N),ie=!1;for(;0!==W&&(!1===ie||j);){const Te=u[W+1];FA(u[W],h)&&(ie=!0,u[W+1]=b?W_(Te):Uv(Te)),W=b?Ja(Te):xd(Te)}ie&&(u[m+1]=b?Uv(N):W_(N))}function FA(u,h){return null===u||null==h||(Array.isArray(u)?u[1]:u)===h||!(!Array.isArray(u)||"string"!=typeof h)&&rt(u,h)>=0}const es={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ea(u){return u.substring(es.key,es.keyEnd)}function I1(u,h){const m=es.textEnd;return m===h?-1:(h=es.keyEnd=function(u,h,m){for(;h<m&&u.charCodeAt(h)>32;)h++;return h}(u,es.key=h,m),Gg(u,h,m))}function Gg(u,h,m){for(;h<m&&u.charCodeAt(h)<=32;)h++;return h}function Cb(u,h,m){return Gh(u,h,m,!1),Cb}function Sb(u,h){return Gh(u,h,null,!0),Sb}function u0(u){hu(ot,Id,u,!0)}function Id(u,h){for(let m=function(u){return function(u){es.key=0,es.keyEnd=0,es.value=0,es.valueEnd=0,es.textEnd=u.length}(u),I1(u,Gg(u,0,es.textEnd))}(h);m>=0;m=I1(h,m))ot(u,ea(h),!0)}function Gh(u,h,m,b){const T=wn(),N=fr(),j=Hi(2);N.firstUpdatePass&&du(N,u,j,b),h!==Ji&&zs(T,j,h)&&LE(N,N.data[Ho()],T,T[11],u,T[j+1]=function(u,h){return null==u||("string"==typeof h?u+=h:"object"==typeof u&&(u=Be(Qc(u)))),u}(h,m),b,j)}function hu(u,h,m,b){const T=fr(),N=Hi(2);T.firstUpdatePass&&du(T,null,N,b);const j=wn();if(m!==Ji&&zs(j,N,m)){const W=T.data[Ho()];if(BE(W,b)&&!Cy(T,N)){let ie=b?W.classesWithoutHost:W.stylesWithoutHost;null!==ie&&(m=je(ie,m||"")),n0(T,W,j,m,b)}else!function(u,h,m,b,T,N,j,W){T===Ji&&(T=dt);let ie=0,he=0,Te=0<T.length?T[0]:null,Le=0<N.length?N[0]:null;for(;null!==Te||null!==Le;){const Ze=ie<T.length?T[ie+1]:void 0,_t=he<N.length?N[he+1]:void 0;let nn,kt=null;Te===Le?(ie+=2,he+=2,Ze!==_t&&(kt=Le,nn=_t)):null===Le||null!==Te&&Te<Le?(ie+=2,kt=Te):(he+=2,kt=Le,nn=_t),null!==kt&&LE(u,h,m,b,kt,nn,j,W),Te=ie<T.length?T[ie]:null,Le=he<N.length?N[he]:null}}(T,W,j,j[11],j[N+1],j[N+1]=function(u,h,m){if(null==m||""===m)return dt;const b=[],T=Qc(m);if(Array.isArray(T))for(let N=0;N<T.length;N++)u(b,T[N],!0);else if("object"==typeof T)for(const N in T)T.hasOwnProperty(N)&&u(b,N,T[N]);else"string"==typeof T&&h(b,T);return b}(u,h,m),b,N)}}function Cy(u,h){return h>=u.expandoStartIndex}function du(u,h,m,b){const T=u.data;if(null===T[m+1]){const N=T[Ho()],j=Cy(u,m);BE(N,b)&&null===h&&!j&&(h=!1),h=function(u,h,m,b){const T=Bc(u);let N=b?h.residualClasses:h.residualStyles;if(null===T)0===(b?h.classBindings:h.styleBindings)&&(m=bm(m=qg(null,u,h,m,b),h.attrs,b),N=null);else{const j=h.directiveStylingLast;if(-1===j||u[j]!==T)if(m=qg(T,u,h,m,b),null===N){let ie=function(u,h,m){const b=m?h.classBindings:h.styleBindings;if(0!==xd(b))return u[Ja(b)]}(u,h,b);void 0!==ie&&Array.isArray(ie)&&(ie=qg(null,u,h,ie[1],b),ie=bm(ie,h.attrs,b),function(u,h,m,b){u[Ja(m?h.classBindings:h.styleBindings)]=b}(u,h,b,ie))}else N=function(u,h,m){let b;const T=h.directiveEnd;for(let N=1+h.directiveStylingLast;N<T;N++)b=bm(b,u[N].hostAttrs,m);return bm(b,h.attrs,m)}(u,h,b)}return void 0!==N&&(b?h.residualClasses=N:h.residualStyles=N),m}(T,N,h,b),function(u,h,m,b,T,N){let j=N?h.classBindings:h.styleBindings,W=Ja(j),ie=xd(j);u[b]=m;let Te,he=!1;if(Array.isArray(m)){const Le=m;Te=Le[1],(null===Te||rt(Le,Te)>0)&&(he=!0)}else Te=m;if(T)if(0!==ie){const Ze=Ja(u[W+1]);u[b+1]=fp(Ze,W),0!==Ze&&(u[Ze+1]=pf(u[Ze+1],b)),u[W+1]=function(u,h){return 131071&u|h<<17}(u[W+1],b)}else u[b+1]=fp(W,0),0!==W&&(u[W+1]=pf(u[W+1],b)),W=b;else u[b+1]=fp(ie,0),0===W?W=b:u[ie+1]=pf(u[ie+1],b),ie=b;he&&(u[b+1]=Uv(u[b+1])),Kl(u,Te,b,!0),Kl(u,Te,b,!1),function(u,h,m,b,T){const N=T?u.residualClasses:u.residualStyles;null!=N&&"string"==typeof h&&rt(N,h)>=0&&(m[b+1]=W_(m[b+1]))}(h,Te,u,b,N),j=fp(W,ie),N?h.classBindings=j:h.styleBindings=j}(T,N,h,m,j,b)}}function qg(u,h,m,b,T){let N=null;const j=m.directiveEnd;let W=m.directiveStylingLast;for(-1===W?W=m.directiveStart:W++;W<j&&(N=h[W],b=bm(b,N.hostAttrs,T),N!==u);)W++;return null!==u&&(m.directiveStylingLast=W),b}function bm(u,h,m){const b=m?1:2;let T=-1;if(null!==h)for(let N=0;N<h.length;N++){const j=h[N];"number"==typeof j?T=j:T===b&&(Array.isArray(u)||(u=void 0===u?[]:["",u]),ot(u,j,!!m||h[++N]))}return void 0===u?null:u}function LE(u,h,m,b,T,N,j,W){if(!(3&h.type))return;const ie=u.data,he=ie[W+1];Eb(function(u){return 1==(1&u)}(he)?NE(ie,h,m,T,xd(he),j):void 0)||(Eb(N)||function(u){return 2==(2&u)}(he)&&(N=NE(ie,null,m,T,W,j)),function(u,h,m,b,T){const N=Xr(u);if(h)T?N?u.addClass(m,b):m.classList.add(b):N?u.removeClass(m,b):m.classList.remove(b);else{let j=-1===b.indexOf("-")?void 0:Xa.DashCase;if(null==T)N?u.removeStyle(m,b,j):m.style.removeProperty(b);else{const W="string"==typeof T&&T.endsWith("!important");W&&(T=T.slice(0,-10),j|=Xa.Important),N?u.setStyle(m,b,T,j):m.style.setProperty(b,T,W?"important":"")}}}(b,j,Lc(Ho(),m),T,N))}function NE(u,h,m,b,T,N){const j=null===h;let W;for(;T>0;){const ie=u[T],he=Array.isArray(ie),Te=he?ie[1]:ie,Le=null===Te;let Ze=m[T+1];Ze===Ji&&(Ze=Le?dt:void 0);let _t=Le?vt(Ze,b):Te===b?Ze:void 0;if(he&&!Eb(_t)&&(_t=vt(ie,b)),Eb(_t)&&(W=_t,j))return W;const kt=u[T+1];T=j?Ja(kt):xd(kt)}if(null!==h){let ie=N?h.residualClasses:h.residualStyles;null!=ie&&(W=vt(ie,b))}return W}function Eb(u){return void 0!==u}function BE(u,h){return 0!=(u.flags&(h?16:32))}function zE(u,h=""){const m=wn(),b=fr(),T=u+20,N=b.firstCreatePass?Bh(b,T,1,h,null):b.data[T],j=m[T]=function(u,h){return Xr(u)?u.createText(h):u.createTextNode(h)}(m[11],h);Qi(b,m,j,N),ps(N,!1)}function R1(u){return xm("",u,""),R1}function xm(u,h,m){const b=wn(),T=py(b,u,h,m);return T!==Ji&&su(b,Ho(),T),xm}function Sy(u,h,m,b,T){const N=wn(),j=function(u,h,m,b,T,N){const W=Tc(u,$o(),m,T);return Hi(2),W?h+dn(m)+b+dn(T)+N:Ji}(N,u,h,m,b,T);return j!==Ji&&su(N,Ho(),j),Sy}function Tb(u,h,m){hu(ot,Id,py(wn(),u,h,m),!0)}function f0(u,h,m){const b=wn();return zs(b,Ga(),h)&&Ka(fr(),Lr(),b,u,h,b[11],m,!0),f0}function m0(u,h,m){const b=wn();if(zs(b,Ga(),h)){const N=fr(),j=Lr();Ka(N,j,b,u,h,Ed(Bc(N.data),j,b),m,!0)}return m0}const Pd=void 0;var ec=["en",[["a","p"],["AM","PM"],Pd],[["AM","PM"],Pd,Pd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pd,"{1} 'at' {0}",Pd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(u){const h=Math.floor(Math.abs(u)),m=u.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===m?1:5}];let wf={};function Y1(u){const h=function(u){return u.toLowerCase().replace(/_/g,"-")}(u);let m=q1(h);if(m)return m;const b=h.split("-")[0];if(m=q1(b),m)return m;if("en"===b)return ec;throw new Error(`Missing locale data for the locale "${u}".`)}function XE(u){return Y1(u)[Ai.PluralCase]}function q1(u){return u in wf||(wf[u]=Cr.ng&&Cr.ng.common&&Cr.ng.common.locales&&Cr.ng.common.locales[u]),wf[u]}var Ai=(()=>((Ai=Ai||{})[Ai.LocaleId=0]="LocaleId",Ai[Ai.DayPeriodsFormat=1]="DayPeriodsFormat",Ai[Ai.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ai[Ai.DaysFormat=3]="DaysFormat",Ai[Ai.DaysStandalone=4]="DaysStandalone",Ai[Ai.MonthsFormat=5]="MonthsFormat",Ai[Ai.MonthsStandalone=6]="MonthsStandalone",Ai[Ai.Eras=7]="Eras",Ai[Ai.FirstDayOfWeek=8]="FirstDayOfWeek",Ai[Ai.WeekendRange=9]="WeekendRange",Ai[Ai.DateFormat=10]="DateFormat",Ai[Ai.TimeFormat=11]="TimeFormat",Ai[Ai.DateTimeFormat=12]="DateTimeFormat",Ai[Ai.NumberSymbols=13]="NumberSymbols",Ai[Ai.NumberFormats=14]="NumberFormats",Ai[Ai.CurrencyCode=15]="CurrencyCode",Ai[Ai.CurrencySymbol=16]="CurrencySymbol",Ai[Ai.CurrencyName=17]="CurrencyName",Ai[Ai.Currencies=18]="Currencies",Ai[Ai.Directionality=19]="Directionality",Ai[Ai.PluralCase=20]="PluralCase",Ai[Ai.ExtraData=21]="ExtraData",Ai))();const Ab="en-US";let Z1=Ab;function g0(u){ri(u,"Expected localeId to be defined"),"string"==typeof u&&(Z1=u.toLowerCase().replace(/_/g,"-"))}function Ln(u,h,m,b,T){if(u=lt(u),Array.isArray(u))for(let N=0;N<u.length;N++)Ln(u[N],h,m,b,T);else{const N=fr(),j=wn();let W=x(u)?u:lt(u.provide),ie=mm(u);const he=So(),Te=1048575&he.providerIndexes,Le=he.directiveStart,Ze=he.providerIndexes>>20;if(x(u)||!u.multi){const _t=new ms(ie,T,yy),kt=tC(W,h,T?Te:Te+Ze,Le);-1===kt?(Cl(Iu(he,j),N,W),v0(N,u,h.length),h.push(W),he.directiveStart++,he.directiveEnd++,T&&(he.providerIndexes+=1048576),m.push(_t),j.push(_t)):(m[kt]=_t,j[kt]=_t)}else{const _t=tC(W,h,Te+Ze,Le),kt=tC(W,h,Te,Te+Ze),nn=_t>=0&&m[_t],qt=kt>=0&&m[kt];if(T&&!qt||!T&&!nn){Cl(Iu(he,j),N,W);const Pn=function(u,h,m,b,T){const N=new ms(u,m,yy);return N.multi=[],N.index=h,N.componentProviders=0,e_(N,T,b&&!m),N}(T?t_:Rb,m.length,T,b,ie);!T&&qt&&(m[kt].providerFactory=Pn),v0(N,u,h.length,0),h.push(W),he.directiveStart++,he.directiveEnd++,T&&(he.providerIndexes+=1048576),m.push(Pn),j.push(Pn)}else v0(N,u,_t>-1?_t:kt,e_(m[T?kt:_t],ie,!T&&b));!T&&b&&qt&&m[kt].componentProviders++}}}function v0(u,h,m,b){const T=x(h);if(T||function(u){return!!u.useClass}(h)){const j=(h.useClass||h).prototype.ngOnDestroy;if(j){const W=u.destroyHooks||(u.destroyHooks=[]);if(!T&&h.multi){const ie=W.indexOf(m);-1===ie?W.push(m,[b,j]):W[ie+1].push(b,j)}else W.push(m,j)}}}function e_(u,h,m){return m&&u.componentProviders++,u.multi.push(h)-1}function tC(u,h,m,b){for(let T=m;T<b;T++)if(h[T]===u)return T;return-1}function Rb(u,h,m,b){return nC(this.multi,[])}function t_(u,h,m,b){const T=this.multi;let N;if(this.providerFactory){const j=this.providerFactory.componentProviders,W=Gl(m,m[1],this.providerFactory.index,b);N=W.slice(0,j),nC(T,N);for(let ie=j;ie<W.length;ie++)N.push(W[ie])}else N=[],nC(T,N);return N}function nC(u,h){for(let m=0;m<u.length;m++)h.push((0,u[m])());return h}function iC(u,h=[]){return m=>{m.providersResolver=(b,T)=>function(u,h,m){const b=fr();if(b.firstCreatePass){const T=Sr(u);Ln(m,b.data,b.blueprint,T,!0),Ln(h,b.data,b.blueprint,T,!1)}}(b,T?T(u):u,h)}}class oC{}const b0="ngComponent";class x0{resolveComponentFactory(h){throw function(u){const h=Error(`No component factory found for ${Be(u)}. Did you add it to @NgModule.entryComponents?`);return h[b0]=u,h}(h)}}class Am{}function Ry(...u){}function Rd(u,h){return new Od(Ma(u,h))}Am.NULL=new x0;const Fb=function(){return Rd(So(),wn())};let Od=(()=>{class u{constructor(m){this.nativeElement=m}}return u.__NG_ELEMENT_ID__=Fb,u})();function C0(u){return u instanceof Od?u.nativeElement:u}class Lb{}let ET=(()=>{class u{}return u.__NG_ELEMENT_ID__=()=>nD(),u})();const nD=function(){const u=wn(),m=js(So().index,u);return function(u){return u[11]}(ar(m)?m:u)};let Zh=(()=>{class u{}return u.\u0275prov=qi({token:u,providedIn:"root",factory:()=>null}),u})();class sC{constructor(h){this.full=h,this.major=h.split(".")[0],this.minor=h.split(".")[1],this.patch=h.split(".").slice(2).join(".")}}const Fy=new sC("12.2.1");class AT{constructor(){}supports(h){return Hh(h)}create(h){return new Ly(h)}}const DT=(u,h)=>h;class Ly{constructor(h){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=h||DT}forEachItem(h){let m;for(m=this._itHead;null!==m;m=m._next)h(m)}forEachOperation(h){let m=this._itHead,b=this._removalsHead,T=0,N=null;for(;m||b;){const j=!b||m&&m.currentIndex<r_(b,T,N)?m:b,W=r_(j,T,N),ie=j.currentIndex;if(j===b)T--,b=b._nextRemoved;else if(m=m._next,null==j.previousIndex)T++;else{N||(N=[]);const he=W-T,Te=ie-T;if(he!=Te){for(let Ze=0;Ze<he;Ze++){const _t=Ze<N.length?N[Ze]:N[Ze]=0,kt=_t+Ze;Te<=kt&&kt<he&&(N[Ze]=_t+1)}N[j.previousIndex]=Te-he}}W!==ie&&h(j,W,ie)}}forEachPreviousItem(h){let m;for(m=this._previousItHead;null!==m;m=m._nextPrevious)h(m)}forEachAddedItem(h){let m;for(m=this._additionsHead;null!==m;m=m._nextAdded)h(m)}forEachMovedItem(h){let m;for(m=this._movesHead;null!==m;m=m._nextMoved)h(m)}forEachRemovedItem(h){let m;for(m=this._removalsHead;null!==m;m=m._nextRemoved)h(m)}forEachIdentityChange(h){let m;for(m=this._identityChangesHead;null!==m;m=m._nextIdentityChange)h(m)}diff(h){if(null==h&&(h=[]),!Hh(h))throw new Error(`Error trying to diff '${Be(h)}'. Only arrays and iterables are allowed`);return this.check(h)?this:null}onDestroy(){}check(h){this._reset();let T,N,j,m=this._itHead,b=!1;if(Array.isArray(h)){this.length=h.length;for(let W=0;W<this.length;W++)N=h[W],j=this._trackByFn(W,N),null!==m&&Object.is(m.trackById,j)?(b&&(m=this._verifyReinsertion(m,N,j,W)),Object.is(m.item,N)||this._addIdentityChange(m,N)):(m=this._mismatch(m,N,j,W),b=!0),m=m._next}else T=0,function(u,h){if(Array.isArray(u))for(let m=0;m<u.length;m++)h(u[m]);else{const m=u[Ko()]();let b;for(;!(b=m.next()).done;)h(b.value)}}(h,W=>{j=this._trackByFn(T,W),null!==m&&Object.is(m.trackById,j)?(b&&(m=this._verifyReinsertion(m,W,j,T)),Object.is(m.item,W)||this._addIdentityChange(m,W)):(m=this._mismatch(m,W,j,T),b=!0),m=m._next,T++}),this.length=T;return this._truncate(m),this.collection=h,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let h;for(h=this._previousItHead=this._itHead;null!==h;h=h._next)h._nextPrevious=h._next;for(h=this._additionsHead;null!==h;h=h._nextAdded)h.previousIndex=h.currentIndex;for(this._additionsHead=this._additionsTail=null,h=this._movesHead;null!==h;h=h._nextMoved)h.previousIndex=h.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(h,m,b,T){let N;return null===h?N=this._itTail:(N=h._prev,this._remove(h)),null!==(h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null))?(Object.is(h.item,m)||this._addIdentityChange(h,m),this._reinsertAfter(h,N,T)):null!==(h=null===this._linkedRecords?null:this._linkedRecords.get(b,T))?(Object.is(h.item,m)||this._addIdentityChange(h,m),this._moveAfter(h,N,T)):h=this._addAfter(new IT(m,b),N,T),h}_verifyReinsertion(h,m,b,T){let N=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null);return null!==N?h=this._reinsertAfter(N,h._prev,T):h.currentIndex!=T&&(h.currentIndex=T,this._addToMoves(h,T)),h}_truncate(h){for(;null!==h;){const m=h._next;this._addToRemovals(this._unlink(h)),h=m}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(h,m,b){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(h);const T=h._prevRemoved,N=h._nextRemoved;return null===T?this._removalsHead=N:T._nextRemoved=N,null===N?this._removalsTail=T:N._prevRemoved=T,this._insertAfter(h,m,b),this._addToMoves(h,b),h}_moveAfter(h,m,b){return this._unlink(h),this._insertAfter(h,m,b),this._addToMoves(h,b),h}_addAfter(h,m,b){return this._insertAfter(h,m,b),this._additionsTail=null===this._additionsTail?this._additionsHead=h:this._additionsTail._nextAdded=h,h}_insertAfter(h,m,b){const T=null===m?this._itHead:m._next;return h._next=T,h._prev=m,null===T?this._itTail=h:T._prev=h,null===m?this._itHead=h:m._next=h,null===this._linkedRecords&&(this._linkedRecords=new PT),this._linkedRecords.put(h),h.currentIndex=b,h}_remove(h){return this._addToRemovals(this._unlink(h))}_unlink(h){null!==this._linkedRecords&&this._linkedRecords.remove(h);const m=h._prev,b=h._next;return null===m?this._itHead=b:m._next=b,null===b?this._itTail=m:b._prev=m,h}_addToMoves(h,m){return h.previousIndex===m||(this._movesTail=null===this._movesTail?this._movesHead=h:this._movesTail._nextMoved=h),h}_addToRemovals(h){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PT),this._unlinkedRecords.put(h),h.currentIndex=null,h._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=h,h._prevRemoved=null):(h._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=h),h}_addIdentityChange(h,m){return h.item=m,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=h:this._identityChangesTail._nextIdentityChange=h,h}}class IT{constructor(h,m){this.item=h,this.trackById=m,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class S0{constructor(){this._head=null,this._tail=null}add(h){null===this._head?(this._head=this._tail=h,h._nextDup=null,h._prevDup=null):(this._tail._nextDup=h,h._prevDup=this._tail,h._nextDup=null,this._tail=h)}get(h,m){let b;for(b=this._head;null!==b;b=b._nextDup)if((null===m||m<=b.currentIndex)&&Object.is(b.trackById,h))return b;return null}remove(h){const m=h._prevDup,b=h._nextDup;return null===m?this._head=b:m._nextDup=b,null===b?this._tail=m:b._prevDup=m,null===this._head}}class PT{constructor(){this.map=new Map}put(h){const m=h.trackById;let b=this.map.get(m);b||(b=new S0,this.map.set(m,b)),b.add(h)}get(h,m){const T=this.map.get(h);return T?T.get(h,m):null}remove(h){const m=h.trackById;return this.map.get(m).remove(h)&&this.map.delete(m),h}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function r_(u,h,m){const b=u.previousIndex;if(null===b)return b;let T=0;return m&&b<m.length&&(T=m[b]),b+h+T}class aC{constructor(){}supports(h){return h instanceof Map||Do(h)}create(){return new Dm}}class Dm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(h){let m;for(m=this._mapHead;null!==m;m=m._next)h(m)}forEachPreviousItem(h){let m;for(m=this._previousMapHead;null!==m;m=m._nextPrevious)h(m)}forEachChangedItem(h){let m;for(m=this._changesHead;null!==m;m=m._nextChanged)h(m)}forEachAddedItem(h){let m;for(m=this._additionsHead;null!==m;m=m._nextAdded)h(m)}forEachRemovedItem(h){let m;for(m=this._removalsHead;null!==m;m=m._nextRemoved)h(m)}diff(h){if(h){if(!(h instanceof Map||Do(h)))throw new Error(`Error trying to diff '${Be(h)}'. Only maps and objects are allowed`)}else h=new Map;return this.check(h)?this:null}onDestroy(){}check(h){this._reset();let m=this._mapHead;if(this._appendAfter=null,this._forEach(h,(b,T)=>{if(m&&m.key===T)this._maybeAddToChanges(m,b),this._appendAfter=m,m=m._next;else{const N=this._getOrCreateRecordForKey(T,b);m=this._insertBeforeOrAppend(m,N)}}),m){m._prev&&(m._prev._next=null),this._removalsHead=m;for(let b=m;null!==b;b=b._nextRemoved)b===this._mapHead&&(this._mapHead=null),this._records.delete(b.key),b._nextRemoved=b._next,b.previousValue=b.currentValue,b.currentValue=null,b._prev=null,b._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(h,m){if(h){const b=h._prev;return m._next=h,m._prev=b,h._prev=m,b&&(b._next=m),h===this._mapHead&&(this._mapHead=m),this._appendAfter=h,h}return this._appendAfter?(this._appendAfter._next=m,m._prev=this._appendAfter):this._mapHead=m,this._appendAfter=m,null}_getOrCreateRecordForKey(h,m){if(this._records.has(h)){const T=this._records.get(h);this._maybeAddToChanges(T,m);const N=T._prev,j=T._next;return N&&(N._next=j),j&&(j._prev=N),T._next=null,T._prev=null,T}const b=new o_(h);return this._records.set(h,b),b.currentValue=m,this._addToAdditions(b),b}_reset(){if(this.isDirty){let h;for(this._previousMapHead=this._mapHead,h=this._previousMapHead;null!==h;h=h._next)h._nextPrevious=h._next;for(h=this._changesHead;null!==h;h=h._nextChanged)h.previousValue=h.currentValue;for(h=this._additionsHead;null!=h;h=h._nextAdded)h.previousValue=h.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(h,m){Object.is(m,h.currentValue)||(h.previousValue=h.currentValue,h.currentValue=m,this._addToChanges(h))}_addToAdditions(h){null===this._additionsHead?this._additionsHead=this._additionsTail=h:(this._additionsTail._nextAdded=h,this._additionsTail=h)}_addToChanges(h){null===this._changesHead?this._changesHead=this._changesTail=h:(this._changesTail._nextChanged=h,this._changesTail=h)}_forEach(h,m){h instanceof Map?h.forEach(m):Object.keys(h).forEach(b=>m(h[b],b))}}class o_{constructor(h){this.key=h,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lC(){return new E0([new AT])}let E0=(()=>{class u{constructor(m){this.factories=m}static create(m,b){if(null!=b){const T=b.factories.slice();m=m.concat(T)}return new u(m)}static extend(m){return{provide:u,useFactory:b=>u.create(m,b||lC()),deps:[[u,new Ws,new Sl]]}}find(m){const b=this.factories.find(T=>T.supports(m));if(null!=b)return b;throw new Error(`Cannot find a differ supporting object '${m}' of type '${function(u){return u.name||typeof u}(m)}'`)}}return u.\u0275prov=qi({token:u,providedIn:"root",factory:lC}),u})();function RT(){return new T0([new aC])}let T0=(()=>{class u{constructor(m){this.factories=m}static create(m,b){if(b){const T=b.factories.slice();m=m.concat(T)}return new u(m)}static extend(m){return{provide:u,useFactory:b=>u.create(m,b||RT()),deps:[[u,new Ws,new Sl]]}}find(m){const b=this.factories.find(T=>T.supports(m));if(b)return b;throw new Error(`Cannot find a differ supporting object '${m}'`)}}return u.\u0275prov=qi({token:u,providedIn:"root",factory:RT}),u})();function s_(u,h,m,b,T=!1){for(;null!==m;){const N=h[m.index];if(null!==N&&b.push(Pr(N)),vo(N))for(let W=10;W<N.length;W++){const ie=N[W],he=ie[1].firstChild;null!==he&&s_(ie[1],ie,he,b)}const j=m.type;if(8&j)s_(u,h,m.child,b);else if(32&j){const W=Kc(m,h);let ie;for(;ie=W();)b.push(ie)}else if(16&j){const W=Al(h,m);if(Array.isArray(W))b.push(...W);else{const ie=Fh(h[Y]);s_(ie[1],ie,W,b,!0)}}m=T?m.projectionNext:m.next}return b}class Tp{constructor(h,m){this._lView=h,this._cdRefInjectingView=m,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const h=this._lView,m=h[1];return s_(m,h,m.firstChild,[])}get context(){return this._lView[8]}set context(h){this._lView[8]=h}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const h=this._lView[3];if(vo(h)){const m=h[8],b=m?m.indexOf(this):-1;b>-1&&(em(h,b),Ae(m,b))}this._attachedToViewContainer=!1}E(this._lView[1],this._lView)}onDestroy(h){yp(this._lView[1],this._lView,null,h)}markForCheck(){um(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ly(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(u,h,m){gl(!0);try{ly(u,h,m)}finally{gl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var h;this._appRef=null,Qa(this._lView[1],h=this._lView,h[11],2,null,null)}attachToAppRef(h){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=h}}class OT extends Tp{constructor(h){super(h),this._view=h}detectChanges(){cy(this._view)}checkNoChanges(){!function(u){gl(!0);try{cy(u)}finally{gl(!1)}}(this._view)}get context(){return null}}const FT=function(u){return function(u,h,m){if(Wi(u)&&!m){const b=js(u.index,h);return new Tp(b,b)}return 47&u.type?new Tp(h[Y],h):null}(So(),wn(),16==(16&u))};let Im=(()=>{class u{}return u.__NG_ELEMENT_ID__=FT,u})();const LT=[new aC],sD=new E0([new AT]),Nb=new T0(LT),aD=function(){return Bb(So(),wn())};let Ny=(()=>{class u{}return u.__NG_ELEMENT_ID__=aD,u})();const lD=Ny,BT=class extends lD{constructor(h,m,b){super(),this._declarationLView=h,this._declarationTContainer=m,this.elementRef=b}createEmbeddedView(h){const m=this._declarationTContainer.tViews,b=ey(this._declarationLView,m,h,16,null,m.declTNode,null,null,null,null);b[17]=this._declarationLView[this._declarationTContainer.index];const N=this._declarationLView[19];return null!==N&&(b[19]=N.createEmbeddedView(m)),kg(m,b,h),new Tp(b)}};function Bb(u,h){return 4&u.type?new BT(h,u,Rd(u,h)):null}class Pm{}class zT{}const UT=function(){return HT(So(),wn())};let A0=(()=>{class u{}return u.__NG_ELEMENT_ID__=UT,u})();const zy=A0,zb=class extends zy{constructor(h,m,b){super(),this._lContainer=h,this._hostTNode=m,this._hostLView=b}get element(){return Rd(this._hostTNode,this._hostLView)}get injector(){return new Hc(this._hostTNode,this._hostLView)}get parentInjector(){const h=Xi(this._hostTNode,this._hostLView);if(xh(h)){const m=Uc(h,this._hostLView),b=la(h);return new Hc(m[1].data[b+8],m)}return new Hc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(h){const m=uC(this._lContainer);return null!==m&&m[h]||null}get length(){return this._lContainer.length-10}createEmbeddedView(h,m,b){const T=h.createEmbeddedView(m||{});return this.insert(T,b),T}createComponent(h,m,b,T,N){const j=b||this.parentInjector;if(!N&&null==h.ngModule&&j){const ie=j.get(Pm,null);ie&&(N=ie)}const W=h.create(j,T,void 0,N);return this.insert(W.hostView,m),W}insert(h,m){const b=h._lView,T=b[1];if(vo(b[3])){const Te=this.indexOf(h);if(-1!==Te)this.detach(Te);else{const Le=b[3],Ze=new zb(Le,Le[6],Le[3]);Ze.detach(Ze.indexOf(h))}}const N=this._adjustIndex(m),j=this._lContainer;!function(u,h,m,b){const T=10+b,N=m.length;b>0&&(m[T-1][4]=h),b<N-10?(h[4]=m[T],Ce(m,10+b,h)):(m.push(h),h[4]=null),h[3]=m;const j=h[17];null!==j&&m!==j&&function(u,h){const m=u[9];h[Y]!==h[3][3][Y]&&(u[2]=!0),null===m?u[9]=[h]:m.push(h)}(j,h);const W=h[19];null!==W&&W.insertView(u),h[2]|=128}(T,b,j,N);const W=bd(N,j),ie=b[11],he=pt(ie,j[7]);return null!==he&&function(u,h,m,b,T,N){b[0]=T,b[6]=h,Qa(u,b,m,1,T,N)}(T,j[6],ie,b,he,W),h.attachToViewContainerRef(),Ce(D0(j),N,h),h}move(h,m){return this.insert(h,m)}indexOf(h){const m=uC(this._lContainer);return null!==m?m.indexOf(h):-1}remove(h){const m=this._adjustIndex(h,-1),b=em(this._lContainer,m);b&&(Ae(D0(this._lContainer),m),E(b[1],b))}detach(h){const m=this._adjustIndex(h,-1),b=em(this._lContainer,m);return b&&null!=Ae(D0(this._lContainer),m)?new Tp(b):null}_adjustIndex(h,m=0){return null==h?this.length+m:h}};function uC(u){return u[8]}function D0(u){return u[8]||(u[8]=[])}function HT(u,h){let m;const b=h[u.index];if(vo(b))m=b;else{let T;if(8&u.type)T=Pr(b);else{const N=h[11];T=N.createComment("");const j=Ma(u,h);ye(N,pt(N,j),T,function(u,h){return Xr(u)?u.nextSibling(h):h.nextSibling}(N,j),!1)}h[u.index]=m=vf(b,h,T,u),zh(h,m)}return new zb(m,u,h)}const Wy={};class j0 extends Am{constructor(h){super(),this.ngModule=h}resolveComponentFactory(h){const m=tn(h);return new aM(m,this.ngModule)}}function TC(u){const h=[];for(let m in u)u.hasOwnProperty(m)&&h.push({propName:u[m],templateName:m});return h}const HD=new Oo("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yd});class aM extends oC{constructor(h,m){super(),this.componentDef=h,this.ngModule=m,this.componentType=h.type,this.selector=h.selectors.map(Xw).join(","),this.ngContentSelectors=h.ngContentSelectors?h.ngContentSelectors:[],this.isBoundToModule=!!m}get inputs(){return TC(this.componentDef.inputs)}get outputs(){return TC(this.componentDef.outputs)}create(h,m,b,T){const N=(T=T||this.ngModule)?function(u,h){return{get:(m,b,T)=>{const N=u.get(m,Wy,T);return N!==Wy||b===Wy?N:h.get(m,b,T)}}}(h,T.injector):h,j=N.get(Lb,Ii),W=N.get(Zh,null),ie=j.createRenderer(null,this.componentDef),he=this.componentDef.selectors[0][0]||"div",Te=b?function(u,h,m){if(Xr(u))return u.selectRootElement(h,m===$n.ShadowDom);let b="string"==typeof h?u.querySelector(h):h;return b.textContent="",b}(ie,b,this.componentDef.encapsulation):vd(j.createRenderer(null,this.componentDef),he,function(u){const h=u.toLowerCase();return"svg"===h?ui:"math"===h?"http://www.w3.org/1998/MathML/":null}(he)),Le=this.componentDef.onPush?576:528,Ze=function(u,h){return{components:[],scheduler:u||yd,clean:hm,playerHandler:h||null,flags:0}}(),_t=si(0,null,null,1,0,null,null,null,null,null),kt=ey(null,_t,Ze,Le,null,null,j,ie,W,N);let nn,qt;_l(kt);try{const Pn=function(u,h,m,b,T,N){const j=m[1];m[20]=u;const ie=Bh(j,20,2,"#host",null),he=ie.mergedAttrs=h.hostAttrs;null!==he&&(Yu(ie,he,!0),null!==u&&(ep(T,u,he),null!==ie.classes&&hf(T,u,ie.classes),null!==ie.styles&&Px(T,u,ie.styles)));const Te=b.createRenderer(u,h),Le=ey(m,jx(h),null,h.onPush?64:16,m[20],ie,b,Te,N||null,null);return j.firstCreatePass&&(Cl(Iu(ie,m),j,h.type),To(j,ie),oy(ie,m.length,1)),zh(m,Le),m[20]=Le}(Te,this.componentDef,kt,j,ie);if(Te)if(b)ep(ie,Te,["ng-version",Fy.full]);else{const{attrs:yn,classes:fi}=function(u){const h=[],m=[];let b=1,T=2;for(;b<u.length;){let N=u[b];if("string"==typeof N)2===T?""!==N&&h.push(N,u[++b]):8===T&&m.push(N);else{if(!nu(T))break;T=N}b++}return{attrs:h,classes:m}}(this.componentDef.selectors[0]);yn&&ep(ie,Te,yn),fi&&fi.length>0&&hf(ie,Te,fi.join(" "))}if(qt=ka(_t,20),void 0!==m){const yn=qt.projection=[];for(let fi=0;fi<this.ngContentSelectors.length;fi++){const Yi=m[fi];yn.push(null!=Yi?Array.from(Yi):null)}}nn=function(u,h,m,b,T){const N=m[1],j=function(u,h,m){const b=So();u.firstCreatePass&&(m.providersResolver&&m.providersResolver(m),Ig(u,b,h,_p(u,h,1,null),m));const T=Gl(h,u,b.directiveStart,b);Xs(T,h);const N=Ma(b,h);return N&&Xs(N,h),T}(N,m,h);if(b.components.push(j),u[8]=j,T&&T.forEach(ie=>ie(j,h)),h.contentQueries){const ie=So();h.contentQueries(1,j,ie.directiveStart)}const W=So();return!N.firstCreatePass||null===h.hostBindings&&null===h.hostAttrs||(aa(W.index),Jv(m[1],W,0,W.directiveStart,W.directiveEnd,h),Sd(h,j)),j}(Pn,this.componentDef,kt,Ze,[Fa]),kg(_t,kt,null)}finally{Ds()}return new lM(this.componentType,nn,Rd(qt,kt),kt,qt)}}class lM extends class{}{constructor(h,m,b,T,N){super(),this.location=b,this._rootLView=T,this._tNode=N,this.instance=m,this.hostView=this.changeDetectorRef=new OT(T),this.componentType=h}get injector(){return new Hc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(h){this.hostView.onDestroy(h)}}const Tf=new Map;class hM extends Pm{constructor(h,m){super(),this._parent=m,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new j0(this);const b=p(h),T=h[di]||null;T&&g0(T),this._bootstrapComponents=Xl(b.bootstrap),this._r3Injector=Lg(h,m,[{provide:Pm,useValue:this},{provide:Am,useValue:this.componentFactoryResolver}],Be(h)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(h)}get(h,m=de.THROW_IF_NOT_FOUND,b=Yn.Default){return h===de||h===Pm||h===Td?this:this._r3Injector.get(h,m,b)}destroy(){const h=this._r3Injector;!h.destroyed&&h.destroy(),this.destroyCbs.forEach(m=>m()),this.destroyCbs=null}onDestroy(h){this.destroyCbs.push(h)}}class Z0 extends zT{constructor(h){super(),this.moduleType=h,null!==p(h)&&function(u){const h=new Set;!function m(b){const T=p(b,!0),N=T.id;null!==N&&(function(u,h,m){if(h&&h!==m)throw new Error(`Duplicate module registered for ${u} - ${Be(h)} vs ${Be(h.name)}`)}(N,Tf.get(N),b),Tf.set(N,b));const j=Xl(T.imports);for(const W of j)h.has(W)||(h.add(W),m(W))}(u)}(h)}create(h){return new hM(this.moduleType,h)}}function dM(u,h,m){const b=so()+u,T=wn();return T[b]===Ji?zo(T,b,m?h.call(m):h()):ya(T,b)}function Wb(u,h,m,b){return IC(wn(),so(),u,h,m,b)}function kC(u,h,m,b,T){return function(u,h,m,b,T,N,j){const W=h+m;return Tc(u,W,T,N)?zo(u,W+2,j?b.call(j,T,N):b(T,N)):d_(u,W+2)}(wn(),so(),u,h,m,b,T)}function AC(u,h,m,b,T,N){return function(u,h,m,b,T,N,j,W){const ie=h+m;return kd(u,ie,T,N,j)?zo(u,ie+3,W?b.call(W,T,N,j):b(T,N,j)):d_(u,ie+3)}(wn(),so(),u,h,m,b,T,N)}function DC(u,h,m,b,T,N,j){return function(u,h,m,b,T,N,j,W,ie){const he=h+m;return va(u,he,T,N,j,W)?zo(u,he+4,ie?b.call(ie,T,N,j,W):b(T,N,j,W)):d_(u,he+4)}(wn(),so(),u,h,m,b,T,N,j)}function pM(u,h,m,b,T,N,j,W){const ie=so()+u,he=wn(),Te=va(he,ie,m,b,T,N);return zs(he,ie+4,j)||Te?zo(he,ie+5,W?h.call(W,m,b,T,N,j):h(m,b,T,N,j)):ya(he,ie+5)}function fM(u,h,m,b,T,N,j,W,ie){const he=so()+u,Te=wn(),Le=va(Te,he,m,b,T,N);return Tc(Te,he+4,j,W)||Le?zo(Te,he+6,ie?h.call(ie,m,b,T,N,j,W):h(m,b,T,N,j,W)):ya(Te,he+6)}function mM(u,h,m,b,T,N,j,W,ie,he){const Te=so()+u,Le=wn();let Ze=va(Le,Te,m,b,T,N);return kd(Le,Te+4,j,W,ie)||Ze?zo(Le,Te+7,he?h.call(he,m,b,T,N,j,W,ie):h(m,b,T,N,j,W,ie)):ya(Le,Te+7)}function W0(u,h,m,b){return function(u,h,m,b,T,N){let j=h+m,W=!1;for(let ie=0;ie<T.length;ie++)zs(u,j++,T[ie])&&(W=!0);return W?zo(u,j,b.apply(N,T)):d_(u,j)}(wn(),so(),u,h,m,b)}function d_(u,h){const m=u[h];return m===Ji?void 0:m}function IC(u,h,m,b,T,N){const j=h+m;return zs(u,j,T)?zo(u,j+1,N?b.call(N,T):b(T)):d_(u,j+1)}function OC(u,h){const m=fr();let b;const T=u+20;m.firstCreatePass?(b=function(u,h){if(h)for(let m=h.length-1;m>=0;m--){const b=h[m];if(u===b.name)return b}throw new an("302",`The pipe '${u}' could not be found!`)}(h,m.pipeRegistry),m.data[T]=b,b.onDestroy&&(m.destroyHooks||(m.destroyHooks=[])).push(T,b.onDestroy)):b=m.data[T];const N=b.factory||(b.factory=pl(b.type)),j=wr(yy);try{const W=Du(!1),ie=N();return Du(W),function(u,h,m,b){m>=u.data.length&&(u.data[m]=null,u.blueprint[m]=null),h[m]=b}(m,wn(),T,ie),ie}finally{wr(j)}}function $y(u,h,m){const b=u+20,T=wn(),N=za(T,b);return function(u,h){rl.isWrapped(h)&&(h=rl.unwrap(h),u[$o()]=Ji);return h}(T,function(u,h){return u[1].data[h].pure}(T,b)?IC(T,so(),h,N.transform,m,N):N.transform(m))}function FC(u){return h=>{setTimeout(u,void 0,h)}}const Dc=class extends s.xQ{constructor(h=!1){super(),this.__isAsync=h}emit(h){super.next(h)}subscribe(h,m,b){var T,N,j;let W=h,ie=m||(()=>null),he=b;if(h&&"object"==typeof h){const Le=h;W=null===(T=Le.next)||void 0===T?void 0:T.bind(Le),ie=null===(N=Le.error)||void 0===N?void 0:N.bind(Le),he=null===(j=Le.complete)||void 0===j?void 0:j.bind(Le)}this.__isAsync&&(ie=FC(ie),W&&(W=FC(W)),he&&(he=FC(he)));const Te=super.subscribe({next:W,error:ie,complete:he});return h instanceof Vt.w&&h.add(Te),Te}};function WD(){return this._results[Ko()]()}class Xb{constructor(h=!1){this._emitDistinctChangesOnly=h,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const m=Ko(),b=Xb.prototype;b[m]||(b[m]=WD)}get changes(){return this._changes||(this._changes=new Dc)}get(h){return this._results[h]}map(h){return this._results.map(h)}filter(h){return this._results.filter(h)}find(h){return this._results.find(h)}reduce(h,m){return this._results.reduce(h,m)}forEach(h){this._results.forEach(h)}some(h){return this._results.some(h)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(h,m){const b=this;b.dirty=!1;const T=ue(h);(this._changesDetected=!function(u,h,m){if(u.length!==h.length)return!1;for(let b=0;b<u.length;b++){let T=u[b],N=h[b];if(m&&(T=m(T),N=m(N)),N!==T)return!1}return!0}(b._results,T,m))&&(b._results=T,b.length=T.length,b.last=T[this.length-1],b.first=T[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class $0{constructor(h){this.queryList=h,this.matches=null}clone(){return new $0(this.queryList)}setDirty(){this.queryList.setDirty()}}class X0{constructor(h=[]){this.queries=h}createEmbeddedView(h){const m=h.queries;if(null!==m){const b=null!==h.contentQueries?h.contentQueries[0]:m.length,T=[];for(let N=0;N<b;N++){const j=m.getByIndex(N);T.push(this.queries[j.indexInDeclarationView].clone())}return new X0(T)}return null}insertView(h){this.dirtyQueriesWithMatches(h)}detachView(h){this.dirtyQueriesWithMatches(h)}dirtyQueriesWithMatches(h){for(let m=0;m<this.queries.length;m++)null!==SM(h,m).matches&&this.queries[m].setDirty()}}class Nd{constructor(h,m,b=null){this.predicate=h,this.flags=m,this.read=b}}class Mf{constructor(h=[]){this.queries=h}elementStart(h,m){for(let b=0;b<this.queries.length;b++)this.queries[b].elementStart(h,m)}elementEnd(h){for(let m=0;m<this.queries.length;m++)this.queries[m].elementEnd(h)}embeddedTView(h){let m=null;for(let b=0;b<this.length;b++){const T=null!==m?m.length:0,N=this.getByIndex(b).embeddedTView(h,T);N&&(N.indexInDeclarationView=b,null!==m?m.push(N):m=[N])}return null!==m?new Mf(m):null}template(h,m){for(let b=0;b<this.queries.length;b++)this.queries[b].template(h,m)}getByIndex(h){return this.queries[h]}get length(){return this.queries.length}track(h){this.queries.push(h)}}class kf{constructor(h,m=-1){this.metadata=h,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=m}elementStart(h,m){this.isApplyingToNode(m)&&this.matchTNode(h,m)}elementEnd(h){this._declarationNodeIndex===h.index&&(this._appliesToNextNode=!1)}template(h,m){this.elementStart(h,m)}embeddedTView(h,m){return this.isApplyingToNode(h)?(this.crossesNgTemplate=!0,this.addMatch(-h.index,m),new kf(this.metadata)):null}isApplyingToNode(h){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const m=this._declarationNodeIndex;let b=h.parent;for(;null!==b&&8&b.type&&b.index!==m;)b=b.parent;return m===(null!==b?b.index:-1)}return this._appliesToNextNode}matchTNode(h,m){const b=this.metadata.predicate;if(Array.isArray(b))for(let T=0;T<b.length;T++){const N=b[T];this.matchTNodeWithReadOption(h,m,Q0(m,N)),this.matchTNodeWithReadOption(h,m,Rr(m,h,N,!1,!1))}else b===Ny?4&m.type&&this.matchTNodeWithReadOption(h,m,-1):this.matchTNodeWithReadOption(h,m,Rr(m,h,b,!1,!1))}matchTNodeWithReadOption(h,m,b){if(null!==b){const T=this.metadata.read;if(null!==T)if(T===Od||T===A0||T===Ny&&4&m.type)this.addMatch(m.index,-2);else{const N=Rr(m,h,T,!1,!1);null!==N&&this.addMatch(m.index,N)}else this.addMatch(m.index,b)}}addMatch(h,m){null===this.matches?this.matches=[h,m]:this.matches.push(h,m)}}function Q0(u,h){const m=u.localNames;if(null!==m)for(let b=0;b<m.length;b+=2)if(m[b]===h)return m[b+1];return null}function QD(u,h,m,b){return-1===m?function(u,h){return 11&u.type?Rd(u,h):4&u.type?Bb(u,h):null}(h,u):-2===m?function(u,h,m){return m===Od?Rd(h,u):m===Ny?Bb(h,u):m===A0?HT(h,u):void 0}(u,h,b):Gl(u,u[1],m,h)}function LC(u,h,m,b){const T=h[19].queries[b];if(null===T.matches){const N=u.data,j=m.matches,W=[];for(let ie=0;ie<j.length;ie+=2){const he=j[ie];W.push(he<0?null:QD(h,N[he],j[ie+1],m.metadata.read))}T.matches=W}return T.matches}function J0(u,h,m,b){const T=u.queries.getByIndex(m),N=T.matches;if(null!==N){const j=LC(u,h,T,m);for(let W=0;W<N.length;W+=2){const ie=N[W];if(ie>0)b.push(j[W/2]);else{const he=N[W+1],Te=h[-ie];for(let Le=10;Le<Te.length;Le++){const Ze=Te[Le];Ze[17]===Ze[3]&&J0(Ze[1],Ze,he,b)}if(null!==Te[9]){const Le=Te[9];for(let Ze=0;Ze<Le.length;Ze++){const _t=Le[Ze];J0(_t[1],_t,he,b)}}}}}return b}function bM(u){const h=wn(),m=fr(),b=od();Mu(b+1);const T=SM(m,b);if(u.dirty&&oa(h)===(2==(2&T.metadata.flags))){if(null===T.matches)u.reset([]);else{const N=T.crossesNgTemplate?J0(m,h,b,[]):LC(m,h,T,b);u.reset(N,C0),u.notifyOnChanges()}return!0}return!1}function Vm(u,h,m){const b=fr();b.firstCreatePass&&(CM(b,new Nd(u,h,m),-1),2==(2&h)&&(b.staticViewQueries=!0)),wM(b,wn(),h)}function Qb(u,h,m,b){const T=fr();if(T.firstCreatePass){const N=So();CM(T,new Nd(h,m,b),N.index),function(u,h){const m=u.contentQueries||(u.contentQueries=[]);h!==(m.length?m[m.length-1]:-1)&&m.push(u.queries.length-1,h)}(T,u),2==(2&m)&&(T.staticContentQueries=!0)}wM(T,wn(),m)}function K0(){return u=wn(),h=od(),u[19].queries[h].queryList;var u,h}function wM(u,h,m){const b=new Xb(4==(4&m));yp(u,h,b,b.destroy),null===h[19]&&(h[19]=new X0),h[19].queries.push(new $0(b))}function CM(u,h,m){null===u.queries&&(u.queries=new Mf),u.queries.track(new kf(h,m))}function SM(u,h){return u.queries.getByIndex(h)}function ew(u,h){return Bb(u,h)}const lw=new Oo("Application Initializer");let f_=(()=>{class u{constructor(m){this.appInits=m,this.resolve=Ry,this.reject=Ry,this.initialized=!1,this.done=!1,this.donePromise=new Promise((b,T)=>{this.resolve=b,this.reject=T})}runInitializers(){if(this.initialized)return;const m=[],b=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let T=0;T<this.appInits.length;T++){const N=this.appInits[T]();if(rn(N))m.push(N);else if(Xu(N)){const j=new Promise((W,ie)=>{N.subscribe({complete:W,error:ie})});m.push(j)}}Promise.all(m).then(()=>{b()}).catch(T=>{this.reject(T)}),0===m.length&&b(),this.initialized=!0}}return u.\u0275fac=function(m){return new(m||u)(wi(lw,8))},u.\u0275prov=qi({token:u,factory:u.\u0275fac}),u})();const WC=new Oo("AppId"),$C={provide:WC,useFactory:function(){return`${tx()}${tx()}${tx()}`},deps:[]};function tx(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const XC=new Oo("Platform Initializer"),QC=new Oo("Platform ID"),JC=new Oo("appBootstrapListener");let jM=(()=>{class u{log(m){console.log(m)}warn(m){console.warn(m)}}return u.\u0275fac=function(m){return new(m||u)},u.\u0275prov=qi({token:u,factory:u.\u0275fac}),u})();const zd=new Oo("LocaleId"),KC=new Oo("DefaultCurrencyCode");class Sa{constructor(h,m){this.ngModuleFactory=h,this.componentFactories=m}}const YM=function(u){return new Z0(u)},oR=YM,nv=function(u){return Promise.resolve(YM(u))},_I=function(u){const h=YM(u),b=Xl(p(u).declarations).reduce((T,N)=>{const j=tn(N);return j&&T.push(new aM(j)),T},[]);return new Sa(h,b)},aR=_I,cw=function(u){return Promise.resolve(_I(u))};let Dp=(()=>{class u{constructor(){this.compileModuleSync=oR,this.compileModuleAsync=nv,this.compileModuleAndAllComponentsSync=aR,this.compileModuleAndAllComponentsAsync=cw}clearCache(){}clearCacheFor(m){}getModuleId(m){}}return u.\u0275fac=function(m){return new(m||u)},u.\u0275prov=qi({token:u,factory:u.\u0275fac}),u})();const yI=(()=>Promise.resolve(0))();function eS(u){"undefined"==typeof Zone?yI.then(()=>{u&&u.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",u)}class sc{constructor({enableLongStackTrace:h=!1,shouldCoalesceEventChangeDetection:m=!1,shouldCoalesceRunChangeDetection:b=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dc(!1),this.onMicrotaskEmpty=new Dc(!1),this.onStable=new Dc(!1),this.onError=new Dc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const T=this;T._nesting=0,T._outer=T._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(T._inner=T._inner.fork(new Zone.TaskTrackingZoneSpec)),h&&Zone.longStackTraceZoneSpec&&(T._inner=T._inner.fork(Zone.longStackTraceZoneSpec)),T.shouldCoalesceEventChangeDetection=!b&&m,T.shouldCoalesceRunChangeDetection=b,T.lastRequestAnimationFrameId=-1,T.nativeRequestAnimationFrame=function(){let u=Cr.requestAnimationFrame,h=Cr.cancelAnimationFrame;if("undefined"!=typeof Zone&&u&&h){const m=u[Zone.__symbol__("OriginalDelegate")];m&&(u=m);const b=h[Zone.__symbol__("OriginalDelegate")];b&&(h=b)}return{nativeRequestAnimationFrame:u,nativeCancelAnimationFrame:h}}().nativeRequestAnimationFrame,function(u){const h=()=>{!function(u){u.isCheckStableRunning||-1!==u.lastRequestAnimationFrameId||(u.lastRequestAnimationFrameId=u.nativeRequestAnimationFrame.call(Cr,()=>{u.fakeTopEventTask||(u.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{u.lastRequestAnimationFrameId=-1,qM(u),u.isCheckStableRunning=!0,iv(u),u.isCheckStableRunning=!1},void 0,()=>{},()=>{})),u.fakeTopEventTask.invoke()}),qM(u))}(u)};u._inner=u._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(m,b,T,N,j,W)=>{try{return vI(u),m.invokeTask(T,N,j,W)}finally{(u.shouldCoalesceEventChangeDetection&&"eventTask"===N.type||u.shouldCoalesceRunChangeDetection)&&h(),ZM(u)}},onInvoke:(m,b,T,N,j,W,ie)=>{try{return vI(u),m.invoke(T,N,j,W,ie)}finally{u.shouldCoalesceRunChangeDetection&&h(),ZM(u)}},onHasTask:(m,b,T,N)=>{m.hasTask(T,N),b===T&&("microTask"==N.change?(u._hasPendingMicrotasks=N.microTask,qM(u),iv(u)):"macroTask"==N.change&&(u.hasPendingMacrotasks=N.macroTask))},onHandleError:(m,b,T,N)=>(m.handleError(T,N),u.runOutsideAngular(()=>u.onError.emit(N)),!1)})}(T)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!sc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(sc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(h,m,b){return this._inner.run(h,m,b)}runTask(h,m,b,T){const N=this._inner,j=N.scheduleEventTask("NgZoneEvent: "+T,h,hw,Ry,Ry);try{return N.runTask(j,m,b)}finally{N.cancelTask(j)}}runGuarded(h,m,b){return this._inner.runGuarded(h,m,b)}runOutsideAngular(h){return this._outer.run(h)}}const hw={};function iv(u){if(0==u._nesting&&!u.hasPendingMicrotasks&&!u.isStable)try{u._nesting++,u.onMicrotaskEmpty.emit(null)}finally{if(u._nesting--,!u.hasPendingMicrotasks)try{u.runOutsideAngular(()=>u.onStable.emit(null))}finally{u.isStable=!0}}}function qM(u){u.hasPendingMicrotasks=!!(u._hasPendingMicrotasks||(u.shouldCoalesceEventChangeDetection||u.shouldCoalesceRunChangeDetection)&&-1!==u.lastRequestAnimationFrameId)}function vI(u){u._nesting++,u.isStable&&(u.isStable=!1,u.onUnstable.emit(null))}function ZM(u){u._nesting--,iv(u)}class dR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dc,this.onMicrotaskEmpty=new Dc,this.onStable=new Dc,this.onError=new Dc}run(h,m,b){return h.apply(m,b)}runGuarded(h,m,b){return h.apply(m,b)}runOutsideAngular(h){return h()}runTask(h,m,b,T){return h.apply(m,b)}}let bI=(()=>{class u{constructor(m){this._ngZone=m,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),m.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{sc.assertNotInAngularZone(),eS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())eS(()=>{for(;0!==this._callbacks.length;){let m=this._callbacks.pop();clearTimeout(m.timeoutId),m.doneCb(this._didWork)}this._didWork=!1});else{let m=this.getPendingTasks();this._callbacks=this._callbacks.filter(b=>!b.updateCb||!b.updateCb(m)||(clearTimeout(b.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(m=>({source:m.source,creationLocation:m.creationLocation,data:m.data})):[]}addCallback(m,b,T){let N=-1;b&&b>0&&(N=setTimeout(()=>{this._callbacks=this._callbacks.filter(j=>j.timeoutId!==N),m(this._didWork,this.getPendingTasks())},b)),this._callbacks.push({doneCb:m,timeoutId:N,updateCb:T})}whenStable(m,b,T){if(T&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(m,b,T),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(m,b,T){return[]}}return u.\u0275fac=function(m){return new(m||u)(wi(sc))},u.\u0275prov=qi({token:u,factory:u.\u0275fac}),u})(),xI=(()=>{class u{constructor(){this._applications=new Map,WM.addToWindow(this)}registerApplication(m,b){this._applications.set(m,b)}unregisterApplication(m){this._applications.delete(m)}unregisterAllApplications(){this._applications.clear()}getTestability(m){return this._applications.get(m)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(m,b=!0){return WM.findTestabilityInTree(this,m,b)}}return u.\u0275fac=function(m){return new(m||u)},u.\u0275prov=qi({token:u,factory:u.\u0275fac}),u})();class pR{addToWindow(h){}findTestabilityInTree(h,m,b){return null}}function fR(u){WM=u}let WM=new pR,wI=!0,CI=!1;function tS(){return CI=!0,wI}function mR(){if(CI)throw new Error("Cannot enable prod mode after platform setup.");wI=!1}let Ip;const SI=new Oo("AllowMultipleToken");class xR{constructor(h,m){this.name=h,this.token=m}}function EI(u,h,m=[]){const b=`Platform: ${h}`,T=new Oo(b);return(N=[])=>{let j=TI();if(!j||j.injector.get(SI,!1))if(u)u(m.concat(N).concat({provide:T,useValue:!0}));else{const W=m.concat(N).concat({provide:T,useValue:!0},{provide:Il,useValue:"platform"});!function(u){if(Ip&&!Ip.destroyed&&!Ip.injector.get(SI,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ip=u.get(MI);const h=u.get(XC,null);h&&h.forEach(m=>m())}(de.create({providers:W,name:b}))}return function(u){const h=TI();if(!h)throw new Error("No platform exists!");if(!h.injector.get(u,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return h}(T)}}function TI(){return Ip&&!Ip.destroyed?Ip:null}let MI=(()=>{class u{constructor(m){this._injector=m,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(m,b){const W=function(u,h){let m;return m="noop"===u?new dR:("zone.js"===u?void 0:u)||new sc({enableLongStackTrace:tS(),shouldCoalesceEventChangeDetection:!!(null==h?void 0:h.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==h?void 0:h.ngZoneRunCoalescing)}),m}(b?b.ngZone:void 0,{ngZoneEventCoalescing:b&&b.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:b&&b.ngZoneRunCoalescing||!1}),ie=[{provide:sc,useValue:W}];return W.run(()=>{const he=de.create({providers:ie,parent:this.injector,name:m.moduleType.name}),Te=m.create(he),Le=Te.injector.get(Ph,null);if(!Le)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return W.runOutsideAngular(()=>{const Ze=W.onError.subscribe({next:_t=>{Le.handleError(_t)}});Te.onDestroy(()=>{XM(this._modules,Te),Ze.unsubscribe()})}),function(u,h,m){try{const b=m();return rn(b)?b.catch(T=>{throw h.runOutsideAngular(()=>u.handleError(T)),T}):b}catch(b){throw h.runOutsideAngular(()=>u.handleError(b)),b}}(Le,W,()=>{const Ze=Te.injector.get(f_);return Ze.runInitializers(),Ze.donePromise.then(()=>(g0(Te.injector.get(zd,Ab)||Ab),this._moduleDoBootstrap(Te),Te))})})}bootstrapModule(m,b=[]){const T=kI({},b);return function(u,h,m){const b=new Z0(m);return Promise.resolve(b)}(0,0,m).then(N=>this.bootstrapModuleFactory(N,T))}_moduleDoBootstrap(m){const b=m.injector.get(dw);if(m._bootstrapComponents.length>0)m._bootstrapComponents.forEach(T=>b.bootstrap(T));else{if(!m.instance.ngDoBootstrap)throw new Error(`The module ${Be(m.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);m.instance.ngDoBootstrap(b)}this._modules.push(m)}onDestroy(m){this._destroyListeners.push(m)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(m=>m.destroy()),this._destroyListeners.forEach(m=>m()),this._destroyed=!0}get destroyed(){return this._destroyed}}return u.\u0275fac=function(m){return new(m||u)(wi(de))},u.\u0275prov=qi({token:u,factory:u.\u0275fac}),u})();function kI(u,h){return Array.isArray(h)?h.reduce(kI,u):Object.assign(Object.assign({},u),h)}let dw=(()=>{class u{constructor(m,b,T,N,j){this._zone=m,this._injector=b,this._exceptionHandler=T,this._componentFactoryResolver=N,this._initStatus=j,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const W=new Ee.y(he=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{he.next(this._stable),he.complete()})}),ie=new Ee.y(he=>{let Te;this._zone.runOutsideAngular(()=>{Te=this._zone.onStable.subscribe(()=>{sc.assertNotInAngularZone(),eS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,he.next(!0))})})});const Le=this._zone.onUnstable.subscribe(()=>{sc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{he.next(!1)}))});return()=>{Te.unsubscribe(),Le.unsubscribe()}});this.isStable=(0,k.T)(W,ie.pipe((0,gt.B)()))}bootstrap(m,b){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let T;T=m instanceof oC?m:this._componentFactoryResolver.resolveComponentFactory(m),this.componentTypes.push(T.componentType);const N=function(u){return u.isBoundToModule}(T)?void 0:this._injector.get(Pm),W=T.create(de.NULL,[],b||T.selector,N),ie=W.location.nativeElement,he=W.injector.get(bI,null),Te=he&&W.injector.get(xI);return he&&Te&&Te.registerApplication(ie,he),W.onDestroy(()=>{this.detachView(W.hostView),XM(this.components,W),Te&&Te.unregisterApplication(ie)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let m of this._views)m.detectChanges()}catch(m){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(m))}finally{this._runningTick=!1}}attachView(m){const b=m;this._views.push(b),b.attachToAppRef(this)}detachView(m){const b=m;XM(this._views,b),b.detachFromAppRef()}_loadComponent(m){this.attachView(m.hostView),this.tick(),this.components.push(m),this._injector.get(JC,[]).concat(this._bootstrapListeners).forEach(T=>T(m))}ngOnDestroy(){this._views.slice().forEach(m=>m.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return u.\u0275fac=function(m){return new(m||u)(wi(sc),wi(de),wi(Ph),wi(Am),wi(f_))},u.\u0275prov=qi({token:u,factory:u.\u0275fac}),u})();function XM(u,h){const m=u.indexOf(h);m>-1&&u.splice(m,1)}class MR{}class DR{}const IR={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let PR=(()=>{class u{constructor(m,b){this._compiler=m,this._config=b||IR}load(m){return this.loadAndCompile(m)}loadAndCompile(m){let[b,T]=m.split("#");return void 0===T&&(T="default"),nt(8255)(b).then(N=>N[T]).then(N=>PI(N,b,T)).then(N=>this._compiler.compileModuleAsync(N))}loadFactory(m){let[b,T]=m.split("#"),N="NgFactory";return void 0===T&&(T="default",N=""),nt(8255)(this._config.factoryPathPrefix+b+this._config.factoryPathSuffix).then(j=>j[T+N]).then(j=>PI(j,b,T))}}return u.\u0275fac=function(m){return new(m||u)(wi(Dp),wi(DR,8))},u.\u0275prov=qi({token:u,factory:u.\u0275fac}),u})();function PI(u,h,m){if(!u)throw new Error(`Cannot find '${m}' in '${h}'`);return u}const VR=function(u){return null},HR=EI(null,"core",[{provide:QC,useValue:"unknown"},{provide:MI,deps:[de]},{provide:xI,deps:[]},{provide:jM,deps:[]}]),ZR=[{provide:dw,useClass:dw,deps:[sc,de,Ph,Am,f_]},{provide:HD,deps:[sc],useFactory:function(u){let h=[];return u.onStable.subscribe(()=>{for(;h.length;)h.pop()()}),function(m){h.push(m)}}},{provide:f_,useClass:f_,deps:[[new Sl,lw]]},{provide:Dp,useClass:Dp,deps:[]},$C,{provide:E0,useFactory:function(){return sD},deps:[]},{provide:T0,useFactory:function(){return Nb},deps:[]},{provide:zd,useFactory:function(u){return g0(u=u||"undefined"!=typeof $localize&&$localize.locale||Ab),u},deps:[[new Zs(zd),new Sl,new Ws]]},{provide:KC,useValue:"USD"}];let $R=(()=>{class u{constructor(m){}}return u.\u0275fac=function(m){return new(m||u)(wi(dw))},u.\u0275mod=yt({type:u}),u.\u0275inj=_r({providers:ZR}),u})()},57:(ai,_n,nt)=>{"use strict";nt.d(_n,{hO:()=>nr,xv:()=>On,Dh:()=>Qe,HU:()=>Et,GT:()=>an,sI:()=>Ur,on:()=>Ui,ss:()=>lt,pX:()=>zt,yq:()=>$r});var s=nt(7771),Vt=nt(3637),Ee=nt(3342),k=nt(9673),gt=nt(9746),Dt=nt(7716),wt=nt(2329);function Be(){}ai=nt.hmd(ai);class je{constructor(Gt,$t=s.N){this.zone=Gt,this.delegate=$t}now(){return this.delegate.now()}schedule(Gt,$t,Ht){const fn=this.zone;return this.delegate.schedule(function(Fn){fn.runGuarded(()=>{Gt.apply(this,[Fn])})},$t,Ht)}}class Ve{constructor(Gt){this.zone=Gt,this.task=null}call(Gt,$t){const Ht=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Be,{},Be,Be)),$t.pipe((0,Ee.b)({next:Ht,complete:Ht,error:Ht})).subscribe(Gt).add(Ht)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Et{constructor(Gt){this.ngZone=Gt,this.outsideAngular=Gt.runOutsideAngular(()=>new je(Zone.current)),this.insideAngular=Gt.run(()=>new je(Zone.current,Vt.z))}}function lt(Zt){return function($t){return($t=$t.lift(new Ve(Zt.ngZone))).pipe((0,k.R)(Zt.outsideAngular),(0,gt.QV)(Zt.insideAngular))}}const Ct=["ngOnDestroy"],zt=(Zt,Gt,$t,Ht={})=>new Proxy(Zt,{get:(fn,Yt)=>$t.runOutsideAngular(()=>{var Fn;if(Zt[Yt])return(null===(Fn=null==Ht?void 0:Ht.spy)||void 0===Fn?void 0:Fn.get)&&Ht.spy.get(Yt,Zt[Yt]),Zt[Yt];if(Ct.indexOf(Yt)>-1)return()=>{};const hi=Gt.toPromise().then(mi=>{const Un=mi&&mi[Yt];return"function"==typeof Un?Un.bind(mi):Un&&Un.then?Un.then(ri=>$t.run(()=>ri)):$t.run(()=>Un)});return new Proxy(()=>{},{get:(mi,Un)=>hi[Un],apply:(mi,Un,ri)=>hi.then(Hn=>{var jn;const xi=Hn&&Hn(...ri);return(null===(jn=null==Ht?void 0:Ht.spy)||void 0===jn?void 0:jn.apply)&&Ht.spy.apply(Yt,ri,xi),xi})})})}),an=(Zt,Gt)=>{Gt.forEach($t=>{Object.getOwnPropertyNames($t.prototype||$t).forEach(Ht=>{Object.defineProperty(Zt.prototype,Ht,Object.getOwnPropertyDescriptor($t.prototype||$t,Ht))})})},Qe=new Dt.OlP("angularfire2.app.options"),On=new Dt.OlP("angularfire2.app.nameOrConfig"),Mt=new Dt.GfV("6.1.5");function Ui(Zt,Gt,$t){const fn="object"==typeof $t&&$t||{};fn.name=fn.name||"string"==typeof $t&&$t||"[DEFAULT]";const Fn=wt.Z.apps.filter(hi=>hi&&hi.name===fn.name)[0]||Gt.runOutsideAngular(()=>wt.Z.initializeApp(Zt,fn));try{JSON.stringify(Zt)!==JSON.stringify(Fn.options)&&Vn("error",`${Fn.name} Firebase App already initialized with different options${ai.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(hi){}return Fn}const $r=()=>{Vn("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},Vn=(Zt,...Gt)=>{(0,Dt.X6Q)()&&"undefined"!=typeof console&&console[Zt](...Gt)};function Ur(Zt,Gt,$t,Ht,fn){const[Yt,...Fn]=globalThis.\u0275AngularfireInstanceCache.get(Zt)||[];if(Yt){try{fn.some((hi,mi)=>{const Un=Fn[mi];return hi&&"object"==typeof hi?JSON.stringify(hi)!==JSON.stringify(Un):hi!==Un})&&Vn("error",`${Gt} was already initialized on the ${$t.name} Firebase App instance with different settings.${ai.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(hi){}return Yt}{const hi=Ht();return globalThis.\u0275AngularfireInstanceCache.set(Zt,[hi,...fn]),hi}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const tr={provide:class{},useFactory:Ui,deps:[Qe,Dt.R0b,[new Dt.FiY,On]]};let nr=(()=>{class Zt{constructor($t){wt.Z.registerVersion("angularfire",Mt.full,$t.toString()),wt.Z.registerVersion("angular",Dt.q4F.full)}static initializeApp($t,Ht){return{ngModule:Zt,providers:[{provide:Qe,useValue:$t},{provide:On,useValue:Ht}]}}}return Zt.\u0275fac=function($t){return new($t||Zt)(Dt.LFG(Dt.Lbi))},Zt.\u0275mod=Dt.oAB({type:Zt}),Zt.\u0275inj=Dt.cJS({providers:[tr]}),Zt})()},9759:(ai,_n,nt)=>{"use strict";nt.d(_n,{Z:()=>ri});var gt,Vn,s=nt(4762),Vt=nt(4685),Ee=nt(6034),k=nt(300),Dt=((gt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",gt["bad-app-name"]="Illegal App name: '{$appName}",gt["duplicate-app"]="Firebase App named '{$appName}' already exists",gt["app-deleted"]="Firebase App named '{$appName}' already deleted",gt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",gt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",gt),wt=new Vt.LL("app","Firebase",Dt),Be="@firebase/app",Di="[DEFAULT]",Ur=((Vn={})[Be]="fire-core",Vn["@firebase/analytics"]="fire-analytics",Vn["@firebase/app-check"]="fire-app-check",Vn["@firebase/auth"]="fire-auth",Vn["@firebase/database"]="fire-rtdb",Vn["@firebase/functions"]="fire-fn",Vn["@firebase/installations"]="fire-iid",Vn["@firebase/messaging"]="fire-fcm",Vn["@firebase/performance"]="fire-perf",Vn["@firebase/remote-config"]="fire-rc",Vn["@firebase/storage"]="fire-gcs",Vn["@firebase/firestore"]="fire-fst",Vn["fire-js"]="fire-js",Vn["firebase-wrapper"]="fire-js-all",Vn),tr=new k.Yd("@firebase/app"),nr=function(){function Hn(jn,xi,li){var qi=this;this.firebase_=li,this.isDeleted_=!1,this.name_=xi.name,this.automaticDataCollectionEnabled_=xi.automaticDataCollectionEnabled||!1,this.options_=(0,Vt.p$)(jn),this.container=new Ee.H0(xi.name),this._addComponent(new Ee.wA("app",function(){return qi},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(Io){return qi._addComponent(Io)})}return Object.defineProperty(Hn.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(jn){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=jn},enumerable:!1,configurable:!0}),Object.defineProperty(Hn.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Hn.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Hn.prototype.delete=function(){var jn=this;return new Promise(function(xi){jn.checkDestroyed_(),xi()}).then(function(){return jn.firebase_.INTERNAL.removeApp(jn.name_),Promise.all(jn.container.getProviders().map(function(xi){return xi.delete()}))}).then(function(){jn.isDeleted_=!0})},Hn.prototype._getService=function(jn,xi){var li;void 0===xi&&(xi=Di),this.checkDestroyed_();var qi=this.container.getProvider(jn);return!qi.isInitialized()&&"EXPLICIT"===(null===(li=qi.getComponent())||void 0===li?void 0:li.instantiationMode)&&qi.initialize(),qi.getImmediate({identifier:xi})},Hn.prototype._removeServiceInstance=function(jn,xi){void 0===xi&&(xi=Di),this.container.getProvider(jn).clearInstance(xi)},Hn.prototype._addComponent=function(jn){try{this.container.addComponent(jn)}catch(xi){tr.debug("Component "+jn.name+" failed to register with FirebaseApp "+this.name,xi)}},Hn.prototype._addOrOverwriteComponent=function(jn){this.container.addOrOverwriteComponent(jn)},Hn.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Hn.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw wt.create("app-deleted",{appName:this.name_})},Hn}();nr.prototype.name&&nr.prototype.options||nr.prototype.delete||console.log("dc");var Ht=function $t(){var Hn=function(Hn){var jn={},xi=new Map,li={__esModule:!0,initializeApp:function(Ni,Si){void 0===Si&&(Si={}),("object"!=typeof Si||null===Si)&&(Si={name:Si});var Po=Si;void 0===Po.name&&(Po.name=Di);var Yn=Po.name;if("string"!=typeof Yn||!Yn)throw wt.create("bad-app-name",{appName:String(Yn)});if((0,Vt.r3)(jn,Yn))throw wt.create("duplicate-app",{appName:Yn});var xr=new Hn(Ni,Po,li);return jn[Yn]=xr,xr},app:Io,registerVersion:function(Ni,Si,uo){var Po,Yn=null!==(Po=Ur[Ni])&&void 0!==Po?Po:Ni;uo&&(Yn+="-"+uo);var xr=Yn.match(/\s|\//),Hr=Si.match(/\s|\//);if(xr||Hr){var wr=['Unable to register library "'+Yn+'" with version "'+Si+'":'];return xr&&wr.push('library name "'+Yn+'" contains illegal characters (whitespace or "/")'),xr&&Hr&&wr.push("and"),Hr&&wr.push('version name "'+Si+'" contains illegal characters (whitespace or "/")'),void tr.warn(wr.join(" "))}Fr(new Ee.wA(Yn+"-version",function(){return{library:Yn,version:Si}},"VERSION"))},setLogLevel:k.Ub,onLog:function(Ni,Si){if(null!==Ni&&"function"!=typeof Ni)throw wt.create("invalid-log-argument");(0,k.Am)(Ni,Si)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:Fr,removeApp:function(Ni){delete jn[Ni]},components:xi,useAsService:function(Ni,Si){return"serverAuth"===Si?null:Si}}};function Io(Ni){if(!(0,Vt.r3)(jn,Ni=Ni||Di))throw wt.create("no-app",{appName:Ni});return jn[Ni]}function Fr(Ni){var Si=Ni.name;if(xi.has(Si))return tr.debug("There were multiple attempts to register component "+Si+"."),"PUBLIC"===Ni.type?li[Si]:null;if(xi.set(Si,Ni),"PUBLIC"===Ni.type){var uo=function(Hr){if(void 0===Hr&&(Hr=Io()),"function"!=typeof Hr[Si])throw wt.create("invalid-app-argument",{appName:Si});return Hr[Si]()};void 0!==Ni.serviceProps&&(0,Vt.ZB)(uo,Ni.serviceProps),li[Si]=uo,Hn.prototype[Si]=function(){for(var Hr=[],wr=0;wr<arguments.length;wr++)Hr[wr]=arguments[wr];return this._getService.bind(this,Si).apply(this,Ni.multipleInstances?Hr:[])}}for(var Po=0,Yn=Object.keys(jn);Po<Yn.length;Po++)jn[Yn[Po]]._addComponent(Ni);return"PUBLIC"===Ni.type?li[Si]:null}return li.default=li,Object.defineProperty(li,"apps",{get:function(){return Object.keys(jn).map(function(Ni){return jn[Ni]})}}),Io.App=Hn,li}(nr);return Hn.INTERNAL=(0,s.pi)((0,s.pi)({},Hn.INTERNAL),{createFirebaseNamespace:$t,extendNamespace:function(xi){(0,Vt.ZB)(Hn,xi)},createSubscribe:Vt.ne,ErrorFactory:Vt.LL,deepExtend:Vt.ZB}),Hn}(),fn=function(){function Hn(jn){this.container=jn}return Hn.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(xi){if(function(Hn){var jn=Hn.getComponent();return"VERSION"===(null==jn?void 0:jn.type)}(xi)){var li=xi.getImmediate();return li.library+"/"+li.version}return null}).filter(function(xi){return xi}).join(" ")},Hn}();if((0,Vt.jU)()&&void 0!==self.firebase){tr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var hi=self.firebase.SDK_VERSION;hi&&hi.indexOf("LITE")>=0&&tr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var mi=Ht.initializeApp;Ht.initializeApp=function(){for(var Hn=[],jn=0;jn<arguments.length;jn++)Hn[jn]=arguments[jn];return(0,Vt.UG)()&&tr.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),mi.apply(void 0,Hn)};var Hn,Un=Ht;(Hn=Un).INTERNAL.registerComponent(new Ee.wA("platform-logger",function(xi){return new fn(xi)},"PRIVATE")),Hn.registerVersion(Be,"0.6.29",undefined),Hn.registerVersion("fire-js","");const ri=Un},6034:(ai,_n,nt)=>{"use strict";nt.d(_n,{wA:()=>Ee,H0:()=>Be,zt:()=>gt});var s=nt(4762),Vt=nt(4685),Ee=function(){function je(Ve,Et,lt){this.name=Ve,this.instanceFactory=Et,this.type=lt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return je.prototype.setInstantiationMode=function(Ve){return this.instantiationMode=Ve,this},je.prototype.setMultipleInstances=function(Ve){return this.multipleInstances=Ve,this},je.prototype.setServiceProps=function(Ve){return this.serviceProps=Ve,this},je.prototype.setInstanceCreatedCallback=function(Ve){return this.onInstanceCreated=Ve,this},je}(),k="[DEFAULT]",gt=function(){function je(Ve,Et){this.name=Ve,this.container=Et,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return je.prototype.get=function(Ve){var Et=this.normalizeInstanceIdentifier(Ve);if(!this.instancesDeferred.has(Et)){var lt=new Vt.BH;if(this.instancesDeferred.set(Et,lt),this.isInitialized(Et)||this.shouldAutoInitialize())try{var Ct=this.getOrInitializeService({instanceIdentifier:Et});Ct&&lt.resolve(Ct)}catch(zt){}}return this.instancesDeferred.get(Et).promise},je.prototype.getImmediate=function(Ve){var Et,lt=this.normalizeInstanceIdentifier(null==Ve?void 0:Ve.identifier),Ct=null!==(Et=null==Ve?void 0:Ve.optional)&&void 0!==Et&&Et;if(!this.isInitialized(lt)&&!this.shouldAutoInitialize()){if(Ct)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:lt})}catch(zt){if(Ct)return null;throw zt}},je.prototype.getComponent=function(){return this.component},je.prototype.setComponent=function(Ve){var Et,lt;if(Ve.name!==this.name)throw Error("Mismatching Component "+Ve.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=Ve,this.shouldAutoInitialize()){if(function(je){return"EAGER"===je.instantiationMode}(Ve))try{this.getOrInitializeService({instanceIdentifier:k})}catch(Ui){}try{for(var Ct=(0,s.XA)(this.instancesDeferred.entries()),zt=Ct.next();!zt.done;zt=Ct.next()){var an=(0,s.CR)(zt.value,2),On=an[1],dn=this.normalizeInstanceIdentifier(an[0]);try{var Mt=this.getOrInitializeService({instanceIdentifier:dn});On.resolve(Mt)}catch(Ui){}}}catch(Ui){Et={error:Ui}}finally{try{zt&&!zt.done&&(lt=Ct.return)&&lt.call(Ct)}finally{if(Et)throw Et.error}}}},je.prototype.clearInstance=function(Ve){void 0===Ve&&(Ve=k),this.instancesDeferred.delete(Ve),this.instances.delete(Ve)},je.prototype.delete=function(){return(0,s.mG)(this,void 0,void 0,function(){var Ve;return(0,s.Jh)(this,function(Et){switch(Et.label){case 0:return Ve=Array.from(this.instances.values()),[4,Promise.all((0,s.ev)((0,s.ev)([],(0,s.CR)(Ve.filter(function(lt){return"INTERNAL"in lt}).map(function(lt){return lt.INTERNAL.delete()}))),(0,s.CR)(Ve.filter(function(lt){return"_delete"in lt}).map(function(lt){return lt._delete()}))))];case 1:return Et.sent(),[2]}})})},je.prototype.isComponentSet=function(){return null!=this.component},je.prototype.isInitialized=function(Ve){return void 0===Ve&&(Ve=k),this.instances.has(Ve)},je.prototype.initialize=function(Ve){var Et,lt;void 0===Ve&&(Ve={});var Ct=Ve.options,zt=void 0===Ct?{}:Ct,an=this.normalizeInstanceIdentifier(Ve.instanceIdentifier);if(this.isInitialized(an))throw Error(this.name+"("+an+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Qe=this.getOrInitializeService({instanceIdentifier:an,options:zt});try{for(var On=(0,s.XA)(this.instancesDeferred.entries()),dn=On.next();!dn.done;dn=On.next()){var Mt=(0,s.CR)(dn.value,2),$r=Mt[1];an===this.normalizeInstanceIdentifier(Mt[0])&&$r.resolve(Qe)}}catch(Di){Et={error:Di}}finally{try{dn&&!dn.done&&(lt=On.return)&&lt.call(On)}finally{if(Et)throw Et.error}}return Qe},je.prototype.onInit=function(Ve,Et){var lt,Ct=this.normalizeInstanceIdentifier(Et),zt=null!==(lt=this.onInitCallbacks.get(Ct))&&void 0!==lt?lt:new Set;zt.add(Ve),this.onInitCallbacks.set(Ct,zt);var an=this.instances.get(Ct);return an&&Ve(an,Ct),function(){zt.delete(Ve)}},je.prototype.invokeOnInitCallbacks=function(Ve,Et){var lt,Ct,zt=this.onInitCallbacks.get(Et);if(zt)try{for(var an=(0,s.XA)(zt),Qe=an.next();!Qe.done;Qe=an.next()){var On=Qe.value;try{On(Ve,Et)}catch(dn){}}}catch(dn){lt={error:dn}}finally{try{Qe&&!Qe.done&&(Ct=an.return)&&Ct.call(an)}finally{if(lt)throw lt.error}}},je.prototype.getOrInitializeService=function(Ve){var Et=Ve.instanceIdentifier,lt=Ve.options,Ct=void 0===lt?{}:lt,zt=this.instances.get(Et);if(!zt&&this.component&&(zt=this.component.instanceFactory(this.container,{instanceIdentifier:Dt(Et),options:Ct}),this.instances.set(Et,zt),this.invokeOnInitCallbacks(zt,Et),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Et,zt)}catch(an){}return zt||null},je.prototype.normalizeInstanceIdentifier=function(Ve){return void 0===Ve&&(Ve=k),this.component?this.component.multipleInstances?Ve:k:Ve},je.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},je}();function Dt(je){return je===k?void 0:je}var Be=function(){function je(Ve){this.name=Ve,this.providers=new Map}return je.prototype.addComponent=function(Ve){var Et=this.getProvider(Ve.name);if(Et.isComponentSet())throw new Error("Component "+Ve.name+" has already been registered with "+this.name);Et.setComponent(Ve)},je.prototype.addOrOverwriteComponent=function(Ve){this.getProvider(Ve.name).isComponentSet()&&this.providers.delete(Ve.name),this.addComponent(Ve)},je.prototype.getProvider=function(Ve){if(this.providers.has(Ve))return this.providers.get(Ve);var Et=new gt(Ve,this);return this.providers.set(Ve,Et),Et},je.prototype.getProviders=function(){return Array.from(this.providers.values())},je}()},9192:(ai,_n,nt)=>{"use strict";var s=nt(9759),Vt=nt(6034),Ee=nt(4685),k=nt(4762),gt=nt(300);ai=nt.hmd(ai);var Be="";function je(E){Be=E}var E,Ve=function(){function E(S){this.domStorage_=S,this.prefix_="firebase:"}return E.prototype.set=function(S,I){null==I?this.domStorage_.removeItem(this.prefixedName_(S)):this.domStorage_.setItem(this.prefixedName_(S),(0,Ee.Pz)(I))},E.prototype.get=function(S){var I=this.domStorage_.getItem(this.prefixedName_(S));return null==I?null:(0,Ee.cI)(I)},E.prototype.remove=function(S){this.domStorage_.removeItem(this.prefixedName_(S))},E.prototype.prefixedName_=function(S){return this.prefix_+S},E.prototype.toString=function(){return this.domStorage_.toString()},E}(),Et=function(){function E(){this.cache_={},this.isInMemoryStorage=!0}return E.prototype.set=function(S,I){null==I?delete this.cache_[S]:this.cache_[S]=I},E.prototype.get=function(S){return(0,Ee.r3)(this.cache_,S)?this.cache_[S]:null},E.prototype.remove=function(S){delete this.cache_[S]},E}(),lt=function(E){try{if("undefined"!=typeof window&&void 0!==window[E]){var S=window[E];return S.setItem("firebase:sentinel","cache"),S.removeItem("firebase:sentinel"),new Ve(S)}}catch(I){}return new Et},Ct=lt("localStorage"),zt=lt("sessionStorage"),an=new gt.Yd("@firebase/database"),Qe=(E=1,function(){return E++}),On=function(E){var S=(0,Ee.dS)(E),I=new Ee.gQ;I.update(S);var V=I.digest();return Ee.US.encodeByteArray(V)},dn=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];for(var I="",V=0;V<E.length;V++){var Q=E[V];Array.isArray(Q)||Q&&"object"==typeof Q&&"number"==typeof Q.length?I+=dn.apply(null,Q):I+="object"==typeof Q?(0,Ee.Pz)(Q):Q,I+=" "}return I},Mt=null,Ui=!0,$r=function(E,S){(0,Ee.hu)(!S||!0===E||!1===E,"Can't turn on custom loggers persistently."),!0===E?(an.logLevel=gt.in.VERBOSE,Mt=an.log.bind(an),S&&zt.set("logging_enabled",!0)):"function"==typeof E?Mt=E:(Mt=null,zt.remove("logging_enabled"))},Vn=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];if(!0===Ui&&(Ui=!1,null===Mt&&!0===zt.get("logging_enabled")&&$r(!0)),Mt){var I=dn.apply(null,E);Mt(I)}},Di=function(E){return function(){for(var S=[],I=0;I<arguments.length;I++)S[I]=arguments[I];Vn.apply(void 0,(0,k.ev)([E],(0,k.CR)(S)))}},Ur=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];var I="FIREBASE INTERNAL ERROR: "+dn.apply(void 0,(0,k.ev)([],(0,k.CR)(E)));an.error(I)},tr=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];var I="FIREBASE FATAL ERROR: "+dn.apply(void 0,(0,k.ev)([],(0,k.CR)(E)));throw an.error(I),new Error(I)},nr=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];var I="FIREBASE WARNING: "+dn.apply(void 0,(0,k.ev)([],(0,k.CR)(E)));an.warn(I)},Gt=function(E){return"number"==typeof E&&(E!=E||E===Number.POSITIVE_INFINITY||E===Number.NEGATIVE_INFINITY)},Ht="[MIN_NAME]",fn="[MAX_NAME]",Yt=function(E,S){if(E===S)return 0;if(E===Ht||S===fn)return-1;if(S===Ht||E===fn)return 1;var I=io(E),V=io(S);return null!==I?null!==V?I-V==0?E.length-S.length:I-V:-1:null!==V?1:E<S?-1:1},Fn=function(E,S){return E===S?0:E<S?-1:1},hi=function(E,S){if(S&&E in S)return S[E];throw new Error("Missing required key ("+E+") in object: "+(0,Ee.Pz)(S))},mi=function(E){if("object"!=typeof E||null===E)return(0,Ee.Pz)(E);var S=[];for(var I in E)S.push(I);S.sort();for(var V="{",Q=0;Q<S.length;Q++)0!==Q&&(V+=","),V+=(0,Ee.Pz)(S[Q]),V+=":",V+=mi(E[S[Q]]);return V+"}"},Un=function(E,S){var I=E.length;if(I<=S)return[E];for(var V=[],Q=0;Q<I;Q+=S)V.push(E.substring(Q,Q+S>I?I:Q+S));return V};function ri(E,S){for(var I in E)E.hasOwnProperty(I)&&S(I,E[I])}var Hn=function(E){(0,Ee.hu)(!Gt(E),"Invalid JSON number");var Q,le,ye,Fe,Ye,V=1023;0===E?(le=0,ye=0,Q=1/E==-1/0?1:0):(Q=E<0,(E=Math.abs(E))>=Math.pow(2,1-V)?(le=(Fe=Math.min(Math.floor(Math.log(E)/Math.LN2),V))+V,ye=Math.round(E*Math.pow(2,52-Fe)-Math.pow(2,52))):(le=0,ye=Math.round(E/Math.pow(2,-1074))));var st=[];for(Ye=52;Ye;Ye-=1)st.push(ye%2?1:0),ye=Math.floor(ye/2);for(Ye=11;Ye;Ye-=1)st.push(le%2?1:0),le=Math.floor(le/2);st.push(Q?1:0),st.reverse();var pt=st.join(""),Wt="";for(Ye=0;Ye<64;Ye+=8){var cn=parseInt(pt.substr(Ye,8),2).toString(16);1===cn.length&&(cn="0"+cn),Wt+=cn}return Wt.toLowerCase()},qi=new RegExp("^-?(0*)\\d{1,10}$"),Io=-2147483648,_r=2147483647,io=function(E){if(qi.test(E)){var S=Number(E);if(S>=Io&&S<=_r)return S}return null},Fr=function(E){try{E()}catch(S){setTimeout(function(){throw nr("Exception was thrown by user callback.",S.stack||""),S},Math.floor(0))}},Ri=function(E,S){var I=setTimeout(E,S);return"object"==typeof I&&I.unref&&I.unref(),I},ds=function(){function E(S,I){var V=this;this.appName_=S,this.appCheckProvider=I,this.appCheck=null==I?void 0:I.getImmediate({optional:!0}),this.appCheck||null==I||I.get().then(function(Q){return V.appCheck=Q})}return E.prototype.getToken=function(S){var I=this;return this.appCheck?this.appCheck.getToken(S):new Promise(function(V,Q){setTimeout(function(){I.appCheck?I.getToken(S).then(V,Q):V(null)},0)})},E.prototype.addTokenChangeListener=function(S){var I;null===(I=this.appCheckProvider)||void 0===I||I.get().then(function(V){return V.addTokenListener(S)})},E.prototype.notifyForInvalidToken=function(){nr('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},E}(),Ni=function(){function E(S,I,V){var Q=this;this.appName_=S,this.firebaseOptions_=I,this.authProvider_=V,this.auth_=null,this.auth_=V.getImmediate({optional:!0}),this.auth_||V.onInit(function(le){return Q.auth_=le})}return E.prototype.getToken=function(S){var I=this;return this.auth_?this.auth_.getToken(S).catch(function(V){return V&&"auth/token-not-initialized"===V.code?(Vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(V)}):new Promise(function(V,Q){setTimeout(function(){I.auth_?I.getToken(S).then(V,Q):V(null)},0)})},E.prototype.addTokenChangeListener=function(S){this.auth_?this.auth_.addAuthTokenListener(S):this.authProvider_.get().then(function(I){return I.addAuthTokenListener(S)})},E.prototype.removeTokenChangeListener=function(S){this.authProvider_.get().then(function(I){return I.removeAuthTokenListener(S)})},E.prototype.notifyForInvalidToken=function(){var S='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';nr(S+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},E}(),Si=function(){function E(S){this.accessToken=S}return E.prototype.getToken=function(S){return Promise.resolve({accessToken:this.accessToken})},E.prototype.addTokenChangeListener=function(S){S(this.accessToken)},E.prototype.removeTokenChangeListener=function(S){},E.prototype.notifyForInvalidToken=function(){},E.OWNER="owner",E}(),wr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gr="websocket",rs="long_polling",jr=function(){function E(S,I,V,Q,le,ye,Fe){void 0===le&&(le=!1),void 0===ye&&(ye=""),void 0===Fe&&(Fe=!1),this.secure=I,this.namespace=V,this.webSocketOnly=Q,this.nodeAdmin=le,this.persistenceKey=ye,this.includeNamespaceInQueryParams=Fe,this._host=S.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ct.get("host:"+S)||this._host}return E.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},E.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(E.prototype,"host",{get:function(){return this._host},set:function(S){S!==this.internalHost&&(this.internalHost=S,this.isCacheableHost()&&Ct.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),E.prototype.toString=function(){var S=this.toURLString();return this.persistenceKey&&(S+="<"+this.persistenceKey+">"),S},E.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},E}();function Ei(E,S,I){var V;if((0,Ee.hu)("string"==typeof S,"typeof type must == string"),(0,Ee.hu)("object"==typeof I,"typeof params must == object"),S===Gr)V=(E.secure?"wss://":"ws://")+E.internalHost+"/.ws?";else{if(S!==rs)throw new Error("Unknown connection type: "+S);V=(E.secure?"https://":"http://")+E.internalHost+"/.lp?"}(function(E){return E.host!==E.internalHost||E.isCustomHost()||E.includeNamespaceInQueryParams})(E)&&(I.ns=E.namespace);var Q=[];return ri(I,function(le,ye){Q.push(le+"="+ye)}),V+Q.join("&")}var Bl=function(){function E(){this.counters_={}}return E.prototype.incrementCounter=function(S,I){void 0===I&&(I=1),(0,Ee.r3)(this.counters_,S)||(this.counters_[S]=0),this.counters_[S]+=I},E.prototype.get=function(){return(0,Ee.p$)(this.counters_)},E}(),Us={},ys={};function Cr(E){var S=E.toString();return Us[S]||(Us[S]=new Bl),Us[S]}var cc=function(){function E(S){this.onMessage_=S,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return E.prototype.closeAfter=function(S,I){this.closeAfterResponse=S,this.onClose=I,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},E.prototype.handleResponse=function(S,I){var V=this;this.pendingResponses[S]=I;for(var Q=function(){var Fe=le.pendingResponses[le.currentResponseNum];delete le.pendingResponses[le.currentResponseNum];for(var Ye=function(pt){Fe[pt]&&Fr(function(){V.onMessage_(Fe[pt])})},st=0;st<Fe.length;++st)Ye(st);if(le.currentResponseNum===le.closeAfterResponse)return le.onClose&&(le.onClose(),le.onClose=null),"break";le.currentResponseNum++},le=this;this.pendingResponses[this.currentResponseNum]&&"break"!==Q(););},E}(),Pt=function(){function E(S,I,V,Q,le,ye,Fe){var Ye=this;this.connId=S,this.repoInfo=I,this.applicationId=V,this.appCheckToken=Q,this.authToken=le,this.transportSessionId=ye,this.lastSessionId=Fe,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Di(S),this.stats_=Cr(I),this.urlFn=function(st){return Ye.appCheckToken&&(st.ac=Ye.appCheckToken),Ei(I,rs,st)}}return E.prototype.open=function(S,I){var V=this;this.curSegmentNum=0,this.onDisconnect_=I,this.myPacketOrderer=new cc(S),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){V.log_("Timed out trying to connect."),V.onClosed_(),V.connectTimeoutTimer_=null},Math.floor(3e4)),function(E){if((0,Ee.Yr)()||"complete"===document.readyState)E();else{var S=!1,I=function(){document.body?S||(S=!0,E()):setTimeout(I,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",I,!1),window.addEventListener("load",I,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&I()}),window.attachEvent("onload",I))}}(function(){if(!V.isClosed_){V.scriptTagHolder=new xt(function(){for(var ye=[],Fe=0;Fe<arguments.length;Fe++)ye[Fe]=arguments[Fe];var Ye=(0,k.CR)(ye,5),st=Ye[0],pt=Ye[1],Wt=Ye[2];if(V.incrementIncomingBytes_(ye),V.scriptTagHolder)if(V.connectTimeoutTimer_&&(clearTimeout(V.connectTimeoutTimer_),V.connectTimeoutTimer_=null),V.everConnected_=!0,"start"===st)V.id=pt,V.password=Wt;else{if("close"!==st)throw new Error("Unrecognized command received: "+st);pt?(V.scriptTagHolder.sendNewPolls=!1,V.myPacketOrderer.closeAfter(pt,function(){V.onClosed_()})):V.onClosed_()}},function(){for(var ye=[],Fe=0;Fe<arguments.length;Fe++)ye[Fe]=arguments[Fe];var Ye=(0,k.CR)(ye,2),st=Ye[0],pt=Ye[1];V.incrementIncomingBytes_(ye),V.myPacketOrderer.handleResponse(st,pt)},function(){V.onClosed_()},V.urlFn);var Q={start:"t"};Q.ser=Math.floor(1e8*Math.random()),V.scriptTagHolder.uniqueCallbackIdentifier&&(Q.cb=V.scriptTagHolder.uniqueCallbackIdentifier),Q.v="5",V.transportSessionId&&(Q.s=V.transportSessionId),V.lastSessionId&&(Q.ls=V.lastSessionId),V.applicationId&&(Q.p=V.applicationId),V.appCheckToken&&(Q.ac=V.appCheckToken),"undefined"!=typeof location&&location.hostname&&wr.test(location.hostname)&&(Q.r="f");var le=V.urlFn(Q);V.log_("Connecting via long-poll to "+le),V.scriptTagHolder.addTag(le,function(){})}})},E.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},E.forceAllow=function(){E.forceAllow_=!0},E.forceDisallow=function(){E.forceDisallow_=!0},E.isAvailable=function(){return!((0,Ee.Yr)()||!E.forceAllow_&&(E.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},E.prototype.markConnectionHealthy=function(){},E.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},E.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},E.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},E.prototype.send=function(S){var I=(0,Ee.Pz)(S);this.bytesSent+=I.length,this.stats_.incrementCounter("bytes_sent",I.length);for(var V=(0,Ee.h$)(I),Q=Un(V,1840),le=0;le<Q.length;le++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,Q.length,Q[le]),this.curSegmentNum++},E.prototype.addDisconnectPingFrame=function(S,I){if(!(0,Ee.Yr)()){this.myDisconnFrame=document.createElement("iframe");var V={dframe:"t"};V.id=S,V.pw=I,this.myDisconnFrame.src=this.urlFn(V),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},E.prototype.incrementIncomingBytes_=function(S){var I=(0,Ee.Pz)(S).length;this.bytesReceived+=I,this.stats_.incrementCounter("bytes_received",I)},E}(),xt=function(){function E(S,I,V,Q){if(this.onDisconnect=V,this.urlFn=Q,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Ee.Yr)())this.commandCB=S,this.onMessageCB=I;else{this.uniqueCallbackIdentifier=Qe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=S,window["pRTLPCB"+this.uniqueCallbackIdentifier]=I,this.myIFrame=E.createIFrame_();var le="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(le='<script>document.domain="'+document.domain+'";<\/script>');var Fe="<html><body>"+le+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(Fe),this.myIFrame.doc.close()}catch(Ye){Vn("frame writing exception"),Ye.stack&&Vn(Ye.stack),Vn(Ye)}}}return E.createIFrame_=function(){var S=document.createElement("iframe");if(S.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(S);try{S.contentWindow.document||Vn("No IE domain setting required")}catch(Q){var V=document.domain;S.src="javascript:void((function(){document.open();document.domain='"+V+"';document.close();})())"}return S.contentDocument?S.doc=S.contentDocument:S.contentWindow?S.doc=S.contentWindow.document:S.document&&(S.doc=S.document),S},E.prototype.close=function(){var S=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==S.myIFrame&&(document.body.removeChild(S.myIFrame),S.myIFrame=null)},Math.floor(0)));var I=this.onDisconnect;I&&(this.onDisconnect=null,I())},E.prototype.startLongPoll=function(S,I){for(this.myID=S,this.myPW=I,this.alive=!0;this.newRequest_(););},E.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var S={};S.id=this.myID,S.pw=this.myPW,S.ser=this.currentSerial;for(var I=this.urlFn(S),V="",Q=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+V.length<=1870;){var ye=this.pendingSegs.shift();V=V+"&seg"+Q+"="+ye.seg+"&ts"+Q+"="+ye.ts+"&d"+Q+"="+ye.d,Q++}return this.addLongPollTag_(I+=V,this.currentSerial),!0}return!1},E.prototype.enqueueSegment=function(S,I,V){this.pendingSegs.push({seg:S,ts:I,d:V}),this.alive&&this.newRequest_()},E.prototype.addLongPollTag_=function(S,I){var V=this;this.outstandingRequests.add(I);var Q=function(){V.outstandingRequests.delete(I),V.newRequest_()},le=setTimeout(Q,Math.floor(25e3));this.addTag(S,function(){clearTimeout(le),Q()})},E.prototype.addTag=function(S,I){var V=this;(0,Ee.Yr)()?this.doNodeLongPoll(S,I):setTimeout(function(){try{if(!V.sendNewPolls)return;var Q=V.myIFrame.doc.createElement("script");Q.type="text/javascript",Q.async=!0,Q.src=S,Q.onload=Q.onreadystatechange=function(){var le=Q.readyState;(!le||"loaded"===le||"complete"===le)&&(Q.onload=Q.onreadystatechange=null,Q.parentNode&&Q.parentNode.removeChild(Q),I())},Q.onerror=function(){Vn("Long-poll script failed to load: "+S),V.sendNewPolls=!1,V.close()},V.myIFrame.doc.body.appendChild(Q)}catch(le){}},Math.floor(1))},E}(),ve=null;"undefined"!=typeof MozWebSocket?ve=MozWebSocket:"undefined"!=typeof WebSocket&&(ve=WebSocket);var d=function(){function E(S,I,V,Q,le,ye,Fe){this.connId=S,this.applicationId=V,this.appCheckToken=Q,this.authToken=le,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Di(this.connId),this.stats_=Cr(I),this.connURL=E.connectionURL_(I,ye,Fe,Q),this.nodeAdmin=I.nodeAdmin}return E.connectionURL_=function(S,I,V,Q){var le={v:"5"};return!(0,Ee.Yr)()&&"undefined"!=typeof location&&location.hostname&&wr.test(location.hostname)&&(le.r="f"),I&&(le.s=I),V&&(le.ls=V),Q&&(le.ac=Q),Ei(S,Gr,le)},E.prototype.open=function(S,I){var V=this;this.onDisconnect=I,this.onMessage=S,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ct.set("previous_websocket_failure",!0);try{if((0,Ee.Yr)()){var le={headers:{"User-Agent":"Firebase/5/"+Be+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(le.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(le.headers["X-Firebase-AppCheck"]=this.appCheckToken);var ye=process.env,Fe=0===this.connURL.indexOf("wss://")?ye.HTTPS_PROXY||ye.https_proxy:ye.HTTP_PROXY||ye.http_proxy;Fe&&(le.proxy={origin:Fe}),this.mySock=new ve(this.connURL,[],le)}else this.mySock=new ve(this.connURL,[],le={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(st){this.log_("Error instantiating WebSocket.");var Ye=st.message||st.data;return Ye&&this.log_(Ye),void this.onClosed_()}this.mySock.onopen=function(){V.log_("Websocket connected."),V.everConnected_=!0},this.mySock.onclose=function(){V.log_("Websocket connection was disconnected."),V.mySock=null,V.onClosed_()},this.mySock.onmessage=function(st){V.handleIncomingFrame(st)},this.mySock.onerror=function(st){V.log_("WebSocket error.  Closing connection.");var pt=st.message||st.data;pt&&V.log_(pt),V.onClosed_()}},E.prototype.start=function(){},E.forceDisallow=function(){E.forceDisallow_=!0},E.isAvailable=function(){var S=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var V=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);V&&V.length>1&&parseFloat(V[1])<4.4&&(S=!0)}return!S&&null!==ve&&!E.forceDisallow_},E.previouslyFailed=function(){return Ct.isInMemoryStorage||!0===Ct.get("previous_websocket_failure")},E.prototype.markConnectionHealthy=function(){Ct.remove("previous_websocket_failure")},E.prototype.appendFrame_=function(S){if(this.frames.push(S),this.frames.length===this.totalFrames){var I=this.frames.join("");this.frames=null;var V=(0,Ee.cI)(I);this.onMessage(V)}},E.prototype.handleNewFrameCount_=function(S){this.totalFrames=S,this.frames=[]},E.prototype.extractFrameCount_=function(S){if((0,Ee.hu)(null===this.frames,"We already have a frame buffer"),S.length<=6){var I=Number(S);if(!isNaN(I))return this.handleNewFrameCount_(I),null}return this.handleNewFrameCount_(1),S},E.prototype.handleIncomingFrame=function(S){if(null!==this.mySock){var I=S.data;if(this.bytesReceived+=I.length,this.stats_.incrementCounter("bytes_received",I.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(I);else{var V=this.extractFrameCount_(I);null!==V&&this.appendFrame_(V)}}},E.prototype.send=function(S){this.resetKeepAlive();var I=(0,Ee.Pz)(S);this.bytesSent+=I.length,this.stats_.incrementCounter("bytes_sent",I.length);var V=Un(I,16384);V.length>1&&this.sendString_(String(V.length));for(var Q=0;Q<V.length;Q++)this.sendString_(V[Q])},E.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},E.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},E.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},E.prototype.resetKeepAlive=function(){var S=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){S.mySock&&S.sendString_("0"),S.resetKeepAlive()},Math.floor(45e3))},E.prototype.sendString_=function(S){try{this.mySock.send(S)}catch(I){this.log_("Exception thrown from WebSocket.send():",I.message||I.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},E.responsesRequiredToBeHealthy=2,E.healthyTimeout=3e4,E}(),p=function(){function E(S){this.initTransports_(S)}return Object.defineProperty(E,"ALL_TRANSPORTS",{get:function(){return[Pt,d]},enumerable:!1,configurable:!0}),E.prototype.initTransports_=function(S){var I,V,Q=d&&d.isAvailable(),le=Q&&!d.previouslyFailed();if(S.webSocketOnly&&(Q||nr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),le=!0),le)this.transports_=[d];else{var ye=this.transports_=[];try{for(var Fe=(0,k.XA)(E.ALL_TRANSPORTS),Ye=Fe.next();!Ye.done;Ye=Fe.next()){var st=Ye.value;st&&st.isAvailable()&&ye.push(st)}}catch(pt){I={error:pt}}finally{try{Ye&&!Ye.done&&(V=Fe.return)&&V.call(Fe)}finally{if(I)throw I.error}}}},E.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},E.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},E}(),Me=function(){function E(S,I,V,Q,le,ye,Fe,Ye,st,pt){this.id=S,this.repoInfo_=I,this.applicationId_=V,this.appCheckToken_=Q,this.authToken_=le,this.onMessage_=ye,this.onReady_=Fe,this.onDisconnect_=Ye,this.onKill_=st,this.lastSessionId=pt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Di("c:"+this.id+":"),this.transportManager_=new p(I),this.log_("Connection created"),this.start_()}return E.prototype.start_=function(){var S=this,I=this.transportManager_.initialTransport();this.conn_=new I(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=I.responsesRequiredToBeHealthy||0;var V=this.connReceiver_(this.conn_),Q=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){S.conn_&&S.conn_.open(V,Q)},Math.floor(0));var le=I.healthyTimeout||0;le>0&&(this.healthyTimeout_=Ri(function(){S.healthyTimeout_=null,S.isHealthy_||(S.conn_&&S.conn_.bytesReceived>102400?(S.log_("Connection exceeded healthy timeout but has received "+S.conn_.bytesReceived+" bytes.  Marking connection healthy."),S.isHealthy_=!0,S.conn_.markConnectionHealthy()):S.conn_&&S.conn_.bytesSent>10240?S.log_("Connection exceeded healthy timeout but has sent "+S.conn_.bytesSent+" bytes.  Leaving connection alive."):(S.log_("Closing unhealthy connection after timeout."),S.close()))},Math.floor(le)))},E.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},E.prototype.disconnReceiver_=function(S){var I=this;return function(V){S===I.conn_?I.onConnectionLost_(V):S===I.secondaryConn_?(I.log_("Secondary connection lost."),I.onSecondaryConnectionLost_()):I.log_("closing an old connection")}},E.prototype.connReceiver_=function(S){var I=this;return function(V){2!==I.state_&&(S===I.rx_?I.onPrimaryMessageReceived_(V):S===I.secondaryConn_?I.onSecondaryMessageReceived_(V):I.log_("message on old connection"))}},E.prototype.sendRequest=function(S){this.sendData_({t:"d",d:S})},E.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},E.prototype.onSecondaryControl_=function(S){if("t"in S){var I=S.t;"a"===I?this.upgradeIfSecondaryHealthy_():"r"===I?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===I&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},E.prototype.onSecondaryMessageReceived_=function(S){var I=hi("t",S),V=hi("d",S);if("c"===I)this.onSecondaryControl_(V);else{if("d"!==I)throw new Error("Unknown protocol layer: "+I);this.pendingDataMessages.push(V)}},E.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},E.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},E.prototype.onPrimaryMessageReceived_=function(S){var I=hi("t",S),V=hi("d",S);"c"===I?this.onControl_(V):"d"===I&&this.onDataMessage_(V)},E.prototype.onDataMessage_=function(S){this.onPrimaryResponse_(),this.onMessage_(S)},E.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},E.prototype.onControl_=function(S){var I=hi("t",S);if("d"in S){var V=S.d;if("h"===I)this.onHandshake_(V);else if("n"===I){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var Q=0;Q<this.pendingDataMessages.length;++Q)this.onDataMessage_(this.pendingDataMessages[Q]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===I?this.onConnectionShutdown_(V):"r"===I?this.onReset_(V):"e"===I?Ur("Server Error: "+V):"o"===I?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ur("Unknown control packet command: "+I)}},E.prototype.onHandshake_=function(S){var I=S.ts,V=S.v,Q=S.h;this.sessionId=S.s,this.repoInfo_.host=Q,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,I),"5"!==V&&nr("Protocol version mismatch detected"),this.tryStartUpgrade_())},E.prototype.tryStartUpgrade_=function(){var S=this.transportManager_.upgradeTransport();S&&this.startUpgrade_(S)},E.prototype.startUpgrade_=function(S){var I=this;this.secondaryConn_=new S(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=S.responsesRequiredToBeHealthy||0;var V=this.connReceiver_(this.secondaryConn_),Q=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(V,Q),Ri(function(){I.secondaryConn_&&(I.log_("Timed out trying to upgrade."),I.secondaryConn_.close())},Math.floor(6e4))},E.prototype.onReset_=function(S){this.log_("Reset packet received.  New host: "+S),this.repoInfo_.host=S,1===this.state_?this.close():(this.closeConnections_(),this.start_())},E.prototype.onConnectionEstablished_=function(S,I){var V=this;this.log_("Realtime connection established."),this.conn_=S,this.state_=1,this.onReady_&&(this.onReady_(I,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ri(function(){V.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},E.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},E.prototype.onSecondaryConnectionLost_=function(){var S=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===S||this.rx_===S)&&this.close()},E.prototype.onConnectionLost_=function(S){this.conn_=null,S||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ct.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},E.prototype.onConnectionShutdown_=function(S){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(S),this.onKill_=null),this.onDisconnect_=null,this.close()},E.prototype.sendData_=function(S){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(S)},E.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},E.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},E}(),ze=function(){function E(){}return E.prototype.put=function(S,I,V,Q){},E.prototype.merge=function(S,I,V,Q){},E.prototype.refreshAuthToken=function(S){},E.prototype.refreshAppCheckToken=function(S){},E.prototype.onDisconnectPut=function(S,I,V){},E.prototype.onDisconnectMerge=function(S,I,V){},E.prototype.onDisconnectCancel=function(S,I){},E.prototype.reportStats=function(S){},E}(),Ke=function(){function E(S){this.allowedEvents_=S,this.listeners_={},(0,Ee.hu)(Array.isArray(S)&&S.length>0,"Requires a non-empty array")}return E.prototype.trigger=function(S){for(var I=[],V=1;V<arguments.length;V++)I[V-1]=arguments[V];if(Array.isArray(this.listeners_[S]))for(var Q=(0,k.ev)([],(0,k.CR)(this.listeners_[S])),le=0;le<Q.length;le++)Q[le].callback.apply(Q[le].context,I)},E.prototype.on=function(S,I,V){this.validateEventType_(S),this.listeners_[S]=this.listeners_[S]||[],this.listeners_[S].push({callback:I,context:V});var Q=this.getInitialEvent(S);Q&&I.apply(V,Q)},E.prototype.off=function(S,I,V){this.validateEventType_(S);for(var Q=this.listeners_[S]||[],le=0;le<Q.length;le++)if(Q[le].callback===I&&(!V||V===Q[le].context))return void Q.splice(le,1)},E.prototype.validateEventType_=function(S){(0,Ee.hu)(this.allowedEvents_.find(function(I){return I===S}),"Unknown event: "+S)},E}(),Y=function(E){function S(){var I=E.call(this,["online"])||this;return I.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Ee.uI)()&&(window.addEventListener("online",function(){I.online_||(I.online_=!0,I.trigger("online",!0))},!1),window.addEventListener("offline",function(){I.online_&&(I.online_=!1,I.trigger("online",!1))},!1)),I}return(0,k.ZT)(S,E),S.getInstance=function(){return new S},S.prototype.getInitialEvent=function(I){return(0,Ee.hu)("online"===I,"Unknown event type: "+I),[this.online_]},S.prototype.currentlyOnline=function(){return this.online_},S}(Ke),Ie=function(){function E(S,I){if(void 0===I){this.pieces_=S.split("/");for(var V=0,Q=0;Q<this.pieces_.length;Q++)this.pieces_[Q].length>0&&(this.pieces_[V]=this.pieces_[Q],V++);this.pieces_.length=V,this.pieceNum_=0}else this.pieces_=S,this.pieceNum_=I}return E.prototype.toString=function(){for(var S="",I=this.pieceNum_;I<this.pieces_.length;I++)""!==this.pieces_[I]&&(S+="/"+this.pieces_[I]);return S||"/"},E}();function Je(){return new Ie("")}function Nt(E){return E.pieceNum_>=E.pieces_.length?null:E.pieces_[E.pieceNum_]}function St(E){return E.pieces_.length-E.pieceNum_}function Xt(E){var S=E.pieceNum_;return S<E.pieces_.length&&S++,new Ie(E.pieces_,S)}function gn(E){return E.pieceNum_<E.pieces_.length?E.pieces_[E.pieces_.length-1]:null}function Kn(E,S){return void 0===S&&(S=0),E.pieces_.slice(E.pieceNum_+S)}function Bi(E){if(E.pieceNum_>=E.pieces_.length)return null;for(var S=[],I=E.pieceNum_;I<E.pieces_.length-1;I++)S.push(E.pieces_[I]);return new Ie(S,0)}function zn(E,S){for(var I=[],V=E.pieceNum_;V<E.pieces_.length;V++)I.push(E.pieces_[V]);if(S instanceof Ie)for(V=S.pieceNum_;V<S.pieces_.length;V++)I.push(S.pieces_[V]);else{var Q=S.split("/");for(V=0;V<Q.length;V++)Q[V].length>0&&I.push(Q[V])}return new Ie(I,0)}function ti(E){return E.pieceNum_>=E.pieces_.length}function ar(E,S){var I=Nt(E),V=Nt(S);if(null===I)return S;if(I===V)return ar(Xt(E),Xt(S));throw new Error("INTERNAL ERROR: innerPath ("+S+") is not within outerPath ("+E+")")}function vo(E,S){for(var I=Kn(E,0),V=Kn(S,0),Q=0;Q<I.length&&Q<V.length;Q++){var le=Yt(I[Q],V[Q]);if(0!==le)return le}return I.length===V.length?0:I.length<V.length?-1:1}function Mr(E,S){if(St(E)!==St(S))return!1;for(var I=E.pieceNum_,V=S.pieceNum_;I<=E.pieces_.length;I++,V++)if(E.pieces_[I]!==S.pieces_[V])return!1;return!0}function Wi(E,S){var I=E.pieceNum_,V=S.pieceNum_;if(St(E)>St(S))return!1;for(;I<E.pieces_.length;){if(E.pieces_[I]!==S.pieces_[V])return!1;++I,++V}return!0}var Ro=function(S,I){this.errorPrefix_=I,this.parts_=Kn(S,0),this.byteLength_=Math.max(1,this.parts_.length);for(var V=0;V<this.parts_.length;V++)this.byteLength_+=(0,Ee.ug)(this.parts_[V]);Hs(this)};function Hs(E){if(E.byteLength_>768)throw new Error(E.errorPrefix_+"has a key path longer than 768 bytes ("+E.byteLength_+").");if(E.parts_.length>32)throw new Error(E.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ro(E))}function ro(E){return 0===E.parts_.length?"":"in property '"+E.parts_.join(".")+"'"}var oh,wu,Vo=function(E){function S(){var V,Q,I=E.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(Q="visibilitychange",V="hidden"):void 0!==document.mozHidden?(Q="mozvisibilitychange",V="mozHidden"):void 0!==document.msHidden?(Q="msvisibilitychange",V="msHidden"):void 0!==document.webkitHidden&&(Q="webkitvisibilitychange",V="webkitHidden")),I.visible_=!0,Q&&document.addEventListener(Q,function(){var le=!document[V];le!==I.visible_&&(I.visible_=le,I.trigger("visible",le))},!1),I}return(0,k.ZT)(S,E),S.getInstance=function(){return new S},S.prototype.getInitialEvent=function(I){return(0,Ee.hu)("visible"===I,"Unknown event type: "+I),[this.visible_]},S}(Ke),bu=1e3,uc=function(E){function S(I,V,Q,le,ye,Fe,Ye,st){var pt=E.call(this)||this;if(pt.repoInfo_=I,pt.applicationId_=V,pt.onDataUpdate_=Q,pt.onConnectStatus_=le,pt.onServerInfoUpdate_=ye,pt.authTokenProvider_=Fe,pt.appCheckTokenProvider_=Ye,pt.authOverride_=st,pt.id=S.nextPersistentConnectionId_++,pt.log_=Di("p:"+pt.id+":"),pt.interruptReasons_={},pt.listens=new Map,pt.outstandingPuts_=[],pt.outstandingGets_=[],pt.outstandingPutCount_=0,pt.outstandingGetCount_=0,pt.onDisconnectRequestQueue_=[],pt.connected_=!1,pt.reconnectDelay_=bu,pt.maxReconnectDelay_=3e5,pt.securityDebugCallback_=null,pt.lastSessionId=null,pt.establishConnectionTimer_=null,pt.visible_=!1,pt.requestCBHash_={},pt.requestNumber_=0,pt.realtime_=null,pt.authToken_=null,pt.appCheckToken_=null,pt.forceTokenRefresh_=!1,pt.invalidAuthTokenCount_=0,pt.invalidAppCheckTokenCount_=0,pt.firstConnection_=!0,pt.lastConnectionAttemptTime_=null,pt.lastConnectionEstablishedTime_=null,st&&!(0,Ee.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Vo.getInstance().on("visible",pt.onVisible_,pt),-1===I.host.indexOf("fblocal")&&Y.getInstance().on("online",pt.onOnline_,pt),pt}return(0,k.ZT)(S,E),S.prototype.sendRequest=function(I,V,Q){var le=++this.requestNumber_,ye={r:le,a:I,b:V};this.log_((0,Ee.Pz)(ye)),(0,Ee.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(ye),Q&&(this.requestCBHash_[le]=Q)},S.prototype.get=function(I){var V=this;this.initConnection_();var Q=new Ee.BH,le={p:I._path.toString(),q:I._queryObject},ye={action:"g",request:le,onComplete:function(Ye){var st=Ye.d;"ok"===Ye.s?(V.onDataUpdate_(le.p,st,!1,null),Q.resolve(st)):Q.reject(st)}};this.outstandingGets_.push(ye),this.outstandingGetCount_++;var Fe=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var Ye=V.outstandingGets_[Fe];void 0===Ye||ye!==Ye||(delete V.outstandingGets_[Fe],V.outstandingGetCount_--,0===V.outstandingGetCount_&&(V.outstandingGets_=[]),V.log_("get "+Fe+" timed out on connection"),Q.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(Fe),Q.promise},S.prototype.listen=function(I,V,Q,le){this.initConnection_();var ye=I._queryIdentifier,Fe=I._path.toString();this.log_("Listen called for "+Fe+" "+ye),this.listens.has(Fe)||this.listens.set(Fe,new Map),(0,Ee.hu)(I._queryParams.isDefault()||!I._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Ee.hu)(!this.listens.get(Fe).has(ye),"listen() called twice for same path/queryId.");var Ye={onComplete:le,hashFn:V,query:I,tag:Q};this.listens.get(Fe).set(ye,Ye),this.connected_&&this.sendListen_(Ye)},S.prototype.sendGet_=function(I){var V=this,Q=this.outstandingGets_[I];this.sendRequest("g",Q.request,function(le){delete V.outstandingGets_[I],V.outstandingGetCount_--,0===V.outstandingGetCount_&&(V.outstandingGets_=[]),Q.onComplete&&Q.onComplete(le)})},S.prototype.sendListen_=function(I){var V=this,Q=I.query,le=Q._path.toString(),ye=Q._queryIdentifier;this.log_("Listen on "+le+" for "+ye);var Fe={p:le};I.tag&&(Fe.q=Q._queryObject,Fe.t=I.tag),Fe.h=I.hashFn(),this.sendRequest("q",Fe,function(st){var pt=st.d,Wt=st.s;S.warnOnListenWarnings_(pt,Q),(V.listens.get(le)&&V.listens.get(le).get(ye))===I&&(V.log_("listen response",st),"ok"!==Wt&&V.removeListen_(le,ye),I.onComplete&&I.onComplete(Wt,pt))})},S.warnOnListenWarnings_=function(I,V){if(I&&"object"==typeof I&&(0,Ee.r3)(I,"w")){var Q=(0,Ee.DV)(I,"w");if(Array.isArray(Q)&&~Q.indexOf("no_index")){var le='".indexOn": "'+V._queryParams.getIndex().toString()+'"',ye=V._path.toString();nr("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+le+" at "+ye+" to your security rules for better performance.")}}},S.prototype.refreshAuthToken=function(I){this.authToken_=I,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(I)},S.prototype.reduceReconnectDelayIfAdminCredential_=function(I){(I&&40===I.length||(0,Ee.GJ)(I))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},S.prototype.refreshAppCheckToken=function(I){this.appCheckToken_=I,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},S.prototype.tryAuth=function(){var I=this;if(this.connected_&&this.authToken_){var V=this.authToken_,Q=(0,Ee.w9)(V)?"auth":"gauth",le={cred:V};null===this.authOverride_?le.noauth=!0:"object"==typeof this.authOverride_&&(le.authvar=this.authOverride_),this.sendRequest(Q,le,function(ye){var Fe=ye.s,Ye=ye.d||"error";I.authToken_===V&&("ok"===Fe?I.invalidAuthTokenCount_=0:I.onAuthRevoked_(Fe,Ye))})}},S.prototype.tryAppCheck=function(){var I=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(V){var Q=V.s,le=V.d||"error";"ok"===Q?I.invalidAppCheckTokenCount_=0:I.onAppCheckRevoked_(Q,le)})},S.prototype.unlisten=function(I,V){var Q=I._path.toString(),le=I._queryIdentifier;this.log_("Unlisten called for "+Q+" "+le),(0,Ee.hu)(I._queryParams.isDefault()||!I._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(Q,le)&&this.connected_&&this.sendUnlisten_(Q,le,I._queryObject,V)},S.prototype.sendUnlisten_=function(I,V,Q,le){this.log_("Unlisten on "+I+" for "+V);var ye={p:I};le&&(ye.q=Q,ye.t=le),this.sendRequest("n",ye)},S.prototype.onDisconnectPut=function(I,V,Q){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",I,V,Q):this.onDisconnectRequestQueue_.push({pathString:I,action:"o",data:V,onComplete:Q})},S.prototype.onDisconnectMerge=function(I,V,Q){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",I,V,Q):this.onDisconnectRequestQueue_.push({pathString:I,action:"om",data:V,onComplete:Q})},S.prototype.onDisconnectCancel=function(I,V){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",I,null,V):this.onDisconnectRequestQueue_.push({pathString:I,action:"oc",data:null,onComplete:V})},S.prototype.sendOnDisconnect_=function(I,V,Q,le){var ye={p:V,d:Q};this.log_("onDisconnect "+I,ye),this.sendRequest(I,ye,function(Fe){le&&setTimeout(function(){le(Fe.s,Fe.d)},Math.floor(0))})},S.prototype.put=function(I,V,Q,le){this.putInternal("p",I,V,Q,le)},S.prototype.merge=function(I,V,Q,le){this.putInternal("m",I,V,Q,le)},S.prototype.putInternal=function(I,V,Q,le,ye){this.initConnection_();var Fe={p:V,d:Q};void 0!==ye&&(Fe.h=ye),this.outstandingPuts_.push({action:I,request:Fe,onComplete:le}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+V)},S.prototype.sendPut_=function(I){var V=this,Q=this.outstandingPuts_[I].action,le=this.outstandingPuts_[I].request,ye=this.outstandingPuts_[I].onComplete;this.outstandingPuts_[I].queued=this.connected_,this.sendRequest(Q,le,function(Fe){V.log_(Q+" response",Fe),delete V.outstandingPuts_[I],V.outstandingPutCount_--,0===V.outstandingPutCount_&&(V.outstandingPuts_=[]),ye&&ye(Fe.s,Fe.d)})},S.prototype.reportStats=function(I){var V=this;if(this.connected_){var Q={c:I};this.log_("reportStats",Q),this.sendRequest("s",Q,function(le){"ok"!==le.s&&V.log_("reportStats","Error sending stats: "+le.d)})}},S.prototype.onDataMessage_=function(I){if("r"in I){this.log_("from server: "+(0,Ee.Pz)(I));var V=I.r,Q=this.requestCBHash_[V];Q&&(delete this.requestCBHash_[V],Q(I.b))}else{if("error"in I)throw"A server-side error has occurred: "+I.error;"a"in I&&this.onDataPush_(I.a,I.b)}},S.prototype.onDataPush_=function(I,V){this.log_("handleServerMessage",I,V),"d"===I?this.onDataUpdate_(V.p,V.d,!1,V.t):"m"===I?this.onDataUpdate_(V.p,V.d,!0,V.t):"c"===I?this.onListenRevoked_(V.p,V.q):"ac"===I?this.onAuthRevoked_(V.s,V.d):"apc"===I?this.onAppCheckRevoked_(V.s,V.d):"sd"===I?this.onSecurityDebugPacket_(V):Ur("Unrecognized action received from server: "+(0,Ee.Pz)(I)+"\nAre you using the latest client?")},S.prototype.onReady_=function(I,V){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(I),this.lastSessionId=V,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},S.prototype.scheduleConnect_=function(I){var V=this;(0,Ee.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){V.establishConnectionTimer_=null,V.establishConnection_()},Math.floor(I))},S.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},S.prototype.onVisible_=function(I){I&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bu,this.realtime_||this.scheduleConnect_(0)),this.visible_=I},S.prototype.onOnline_=function(I){I?(this.log_("Browser went online."),this.reconnectDelay_=bu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},S.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=bu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var V=(new Date).getTime()-this.lastConnectionAttemptTime_,Q=Math.max(0,this.reconnectDelay_-V);Q=Math.random()*Q,this.log_("Trying to reconnect in "+Q+"ms"),this.scheduleConnect_(Q),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},S.prototype.establishConnection_=function(){return(0,k.mG)(this,void 0,void 0,function(){var I,V,Q,le,ye,Fe,Ye,st,Wt,cn,Mn,Wn,Pi,yi=this;return(0,k.Jh)(this,function(Qi){switch(Qi.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,I=this.onDataMessage_.bind(this),V=this.onReady_.bind(this),Q=this.onRealtimeDisconnect_.bind(this),le=this.id+":"+S.nextConnectionId_++,ye=this.lastSessionId,Fe=!1,Ye=null,this.realtime_={close:st=function(){Ye?Ye.close():(Fe=!0,Q())},sendRequest:function(Jo){(0,Ee.hu)(Ye,"sendRequest call when we're not connected not allowed."),Ye.sendRequest(Jo)}},Wt=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,Qi.label=1;case 1:return Qi.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(Wt),this.appCheckTokenProvider_.getToken(Wt)])];case 2:return cn=k.CR.apply(void 0,[Qi.sent(),2]),Mn=cn[0],Wn=cn[1],Fe?Vn("getToken() completed but was canceled"):(Vn("getToken() completed. Creating connection."),this.authToken_=Mn&&Mn.accessToken,this.appCheckToken_=Wn&&Wn.token,Ye=new Me(le,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,I,V,Q,function(Jo){nr(Jo+" ("+yi.repoInfo_.toString()+")"),yi.interrupt("server_kill")},ye)),[3,4];case 3:return Pi=Qi.sent(),this.log_("Failed to get token: "+Pi),Fe||(this.repoInfo_.nodeAdmin&&nr(Pi),st()),[3,4];case 4:return[2]}})})},S.prototype.interrupt=function(I){Vn("Interrupting connection for reason: "+I),this.interruptReasons_[I]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},S.prototype.resume=function(I){Vn("Resuming connection for reason: "+I),delete this.interruptReasons_[I],(0,Ee.xb)(this.interruptReasons_)&&(this.reconnectDelay_=bu,this.realtime_||this.scheduleConnect_(0))},S.prototype.handleTimestamp_=function(I){var V=I-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:V})},S.prototype.cancelSentTransactions_=function(){for(var I=0;I<this.outstandingPuts_.length;I++){var V=this.outstandingPuts_[I];V&&"h"in V.request&&V.queued&&(V.onComplete&&V.onComplete("disconnect"),delete this.outstandingPuts_[I],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},S.prototype.onListenRevoked_=function(I,V){var Q;Q=V?V.map(function(ye){return mi(ye)}).join("$"):"default";var le=this.removeListen_(I,Q);le&&le.onComplete&&le.onComplete("permission_denied")},S.prototype.removeListen_=function(I,V){var le,Q=new Ie(I).toString();if(this.listens.has(Q)){var ye=this.listens.get(Q);le=ye.get(V),ye.delete(V),0===ye.size&&this.listens.delete(Q)}else le=void 0;return le},S.prototype.onAuthRevoked_=function(I,V){Vn("Auth token revoked: "+I+"/"+V),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===I||"permission_denied"===I)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},S.prototype.onAppCheckRevoked_=function(I,V){Vn("App check token revoked: "+I+"/"+V),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===I||"permission_denied"===I)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},S.prototype.onSecurityDebugPacket_=function(I){this.securityDebugCallback_?this.securityDebugCallback_(I):"msg"in I&&console.log("FIREBASE: "+I.msg.replace("\n","\nFIREBASE: "))},S.prototype.restoreState_=function(){var I,V,Q,le;this.tryAuth(),this.tryAppCheck();try{for(var ye=(0,k.XA)(this.listens.values()),Fe=ye.next();!Fe.done;Fe=ye.next()){var Ye=Fe.value;try{for(var st=(Q=void 0,(0,k.XA)(Ye.values())),pt=st.next();!pt.done;pt=st.next())this.sendListen_(pt.value)}catch(Wn){Q={error:Wn}}finally{try{pt&&!pt.done&&(le=st.return)&&le.call(st)}finally{if(Q)throw Q.error}}}}catch(Wn){I={error:Wn}}finally{try{Fe&&!Fe.done&&(V=ye.return)&&V.call(ye)}finally{if(I)throw I.error}}for(var cn=0;cn<this.outstandingPuts_.length;cn++)this.outstandingPuts_[cn]&&this.sendPut_(cn);for(;this.onDisconnectRequestQueue_.length;){var Mn=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(Mn.action,Mn.pathString,Mn.data,Mn.onComplete)}for(cn=0;cn<this.outstandingGets_.length;cn++)this.outstandingGets_[cn]&&this.sendGet_(cn)},S.prototype.sendConnectStats_=function(){var I={},V="js";(0,Ee.Yr)()&&(V=this.repoInfo_.nodeAdmin?"admin_node":"node"),I["sdk."+V+"."+Be.replace(/\./g,"-")]=1,(0,Ee.uI)()?I["framework.cordova"]=1:(0,Ee.b$)()&&(I["framework.reactnative"]=1),this.reportStats(I)},S.prototype.shouldReconnect_=function(){var I=Y.getInstance().currentlyOnline();return(0,Ee.xb)(this.interruptReasons_)&&I},S.nextPersistentConnectionId_=0,S.nextConnectionId_=0,S}(ze),mr=function(){function E(S,I){this.name=S,this.node=I}return E.Wrap=function(S,I){return new E(S,I)},E}(),Gd=function(){function E(){}return E.prototype.getCompare=function(){return this.compare.bind(this)},E.prototype.indexedValueChanged=function(S,I){var V=new mr(Ht,S),Q=new mr(Ht,I);return 0!==this.compare(V,Q)},E.prototype.minPost=function(){return mr.MIN},E}(),jd=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,k.ZT)(S,E),Object.defineProperty(S,"__EMPTY_NODE",{get:function(){return oh},set:function(I){oh=I},enumerable:!1,configurable:!0}),S.prototype.compare=function(I,V){return Yt(I.name,V.name)},S.prototype.isDefinedOn=function(I){throw(0,Ee.g5)("KeyIndex.isDefinedOn not expected to be called.")},S.prototype.indexedValueChanged=function(I,V){return!1},S.prototype.minPost=function(){return mr.MIN},S.prototype.maxPost=function(){return new mr(fn,oh)},S.prototype.makePost=function(I,V){return(0,Ee.hu)("string"==typeof I,"KeyIndex indexValue must always be a string."),new mr(I,oh)},S.prototype.toString=function(){return".key"},S}(Gd),dl=new jd,ed=function(){function E(S,I,V,Q,le){void 0===le&&(le=null),this.isReverse_=Q,this.resultGenerator_=le,this.nodeStack_=[];for(var ye=1;!S.isEmpty();)if(S=S,ye=I?V(S.key,I):1,Q&&(ye*=-1),ye<0)S=this.isReverse_?S.left:S.right;else{if(0===ye){this.nodeStack_.push(S);break}this.nodeStack_.push(S),S=this.isReverse_?S.right:S.left}}return E.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var I,S=this.nodeStack_.pop();if(I=this.resultGenerator_?this.resultGenerator_(S.key,S.value):{key:S.key,value:S.value},this.isReverse_)for(S=S.left;!S.isEmpty();)this.nodeStack_.push(S),S=S.right;else for(S=S.right;!S.isEmpty();)this.nodeStack_.push(S),S=S.left;return I},E.prototype.hasNext=function(){return this.nodeStack_.length>0},E.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var S=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(S.key,S.value):{key:S.key,value:S.value}},E}(),ra=function(){function E(S,I,V,Q,le){this.key=S,this.value=I,this.color=null!=V?V:E.RED,this.left=null!=Q?Q:Uo.EMPTY_NODE,this.right=null!=le?le:Uo.EMPTY_NODE}return E.prototype.copy=function(S,I,V,Q,le){return new E(null!=S?S:this.key,null!=I?I:this.value,null!=V?V:this.color,null!=Q?Q:this.left,null!=le?le:this.right)},E.prototype.count=function(){return this.left.count()+1+this.right.count()},E.prototype.isEmpty=function(){return!1},E.prototype.inorderTraversal=function(S){return this.left.inorderTraversal(S)||!!S(this.key,this.value)||this.right.inorderTraversal(S)},E.prototype.reverseTraversal=function(S){return this.right.reverseTraversal(S)||S(this.key,this.value)||this.left.reverseTraversal(S)},E.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},E.prototype.minKey=function(){return this.min_().key},E.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},E.prototype.insert=function(S,I,V){var Q=this,le=V(S,Q.key);return(Q=le<0?Q.copy(null,null,null,Q.left.insert(S,I,V),null):0===le?Q.copy(null,I,null,null,null):Q.copy(null,null,null,null,Q.right.insert(S,I,V))).fixUp_()},E.prototype.removeMin_=function(){if(this.left.isEmpty())return Uo.EMPTY_NODE;var S=this;return!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),(S=S.copy(null,null,null,S.left.removeMin_(),null)).fixUp_()},E.prototype.remove=function(S,I){var V,Q;if(I(S,(V=this).key)<0)!V.left.isEmpty()&&!V.left.isRed_()&&!V.left.left.isRed_()&&(V=V.moveRedLeft_()),V=V.copy(null,null,null,V.left.remove(S,I),null);else{if(V.left.isRed_()&&(V=V.rotateRight_()),!V.right.isEmpty()&&!V.right.isRed_()&&!V.right.left.isRed_()&&(V=V.moveRedRight_()),0===I(S,V.key)){if(V.right.isEmpty())return Uo.EMPTY_NODE;Q=V.right.min_(),V=V.copy(Q.key,Q.value,null,null,V.right.removeMin_())}V=V.copy(null,null,null,null,V.right.remove(S,I))}return V.fixUp_()},E.prototype.isRed_=function(){return this.color},E.prototype.fixUp_=function(){var S=this;return S.right.isRed_()&&!S.left.isRed_()&&(S=S.rotateLeft_()),S.left.isRed_()&&S.left.left.isRed_()&&(S=S.rotateRight_()),S.left.isRed_()&&S.right.isRed_()&&(S=S.colorFlip_()),S},E.prototype.moveRedLeft_=function(){var S=this.colorFlip_();return S.right.left.isRed_()&&(S=(S=(S=S.copy(null,null,null,null,S.right.rotateRight_())).rotateLeft_()).colorFlip_()),S},E.prototype.moveRedRight_=function(){var S=this.colorFlip_();return S.left.left.isRed_()&&(S=(S=S.rotateRight_()).colorFlip_()),S},E.prototype.rotateLeft_=function(){var S=this.copy(null,null,E.RED,null,this.right.left);return this.right.copy(null,null,this.color,S,null)},E.prototype.rotateRight_=function(){var S=this.copy(null,null,E.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,S)},E.prototype.colorFlip_=function(){var S=this.left.copy(null,null,!this.left.color,null,null),I=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,S,I)},E.prototype.checkMaxDepth_=function(){var S=this.check_();return Math.pow(2,S)<=this.count()+1},E.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var S=this.left.check_();if(S!==this.right.check_())throw new Error("Black depths differ");return S+(this.isRed_()?0:1)},E.RED=!0,E.BLACK=!1,E}(),D_=function(){function E(){}return E.prototype.copy=function(S,I,V,Q,le){return this},E.prototype.insert=function(S,I,V){return new ra(S,I,null)},E.prototype.remove=function(S,I){return this},E.prototype.count=function(){return 0},E.prototype.isEmpty=function(){return!0},E.prototype.inorderTraversal=function(S){return!1},E.prototype.reverseTraversal=function(S){return!1},E.prototype.minKey=function(){return null},E.prototype.maxKey=function(){return null},E.prototype.check_=function(){return 0},E.prototype.isRed_=function(){return!1},E}(),Uo=function(){function E(S,I){void 0===I&&(I=E.EMPTY_NODE),this.comparator_=S,this.root_=I}return E.prototype.insert=function(S,I){return new E(this.comparator_,this.root_.insert(S,I,this.comparator_).copy(null,null,ra.BLACK,null,null))},E.prototype.remove=function(S){return new E(this.comparator_,this.root_.remove(S,this.comparator_).copy(null,null,ra.BLACK,null,null))},E.prototype.get=function(S){for(var I,V=this.root_;!V.isEmpty();){if(0===(I=this.comparator_(S,V.key)))return V.value;I<0?V=V.left:I>0&&(V=V.right)}return null},E.prototype.getPredecessorKey=function(S){for(var I,V=this.root_,Q=null;!V.isEmpty();){if(0===(I=this.comparator_(S,V.key))){if(V.left.isEmpty())return Q?Q.key:null;for(V=V.left;!V.right.isEmpty();)V=V.right;return V.key}I<0?V=V.left:I>0&&(Q=V,V=V.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},E.prototype.isEmpty=function(){return this.root_.isEmpty()},E.prototype.count=function(){return this.root_.count()},E.prototype.minKey=function(){return this.root_.minKey()},E.prototype.maxKey=function(){return this.root_.maxKey()},E.prototype.inorderTraversal=function(S){return this.root_.inorderTraversal(S)},E.prototype.reverseTraversal=function(S){return this.root_.reverseTraversal(S)},E.prototype.getIterator=function(S){return new ed(this.root_,null,this.comparator_,!1,S)},E.prototype.getIteratorFrom=function(S,I){return new ed(this.root_,S,this.comparator_,!1,I)},E.prototype.getReverseIteratorFrom=function(S,I){return new ed(this.root_,S,this.comparator_,!0,I)},E.prototype.getReverseIterator=function(S){return new ed(this.root_,null,this.comparator_,!0,S)},E.EMPTY_NODE=new D_,E}();function Yd(E,S){return Yt(E.name,S.name)}function pl(E,S){return Yt(E,S)}var ah,lh,ch,td,dh,fl=function(E){return"number"==typeof E?"number:"+Hn(E):"string:"+E},sh=function(E){if(E.isLeafNode()){var S=E.val();(0,Ee.hu)("string"==typeof S||"number"==typeof S||"object"==typeof S&&(0,Ee.r3)(S,".sv"),"Priority must be a string or number.")}else(0,Ee.hu)(E===wu||E.isEmpty(),"priority of unexpected type.");(0,Ee.hu)(E===wu||E.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$i=function(){function E(S,I){void 0===I&&(I=E.__childrenNodeConstructor.EMPTY_NODE),this.value_=S,this.priorityNode_=I,this.lazyHash_=null,(0,Ee.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),sh(this.priorityNode_)}return Object.defineProperty(E,"__childrenNodeConstructor",{get:function(){return ah},set:function(S){ah=S},enumerable:!1,configurable:!0}),E.prototype.isLeafNode=function(){return!0},E.prototype.getPriority=function(){return this.priorityNode_},E.prototype.updatePriority=function(S){return new E(this.value_,S)},E.prototype.getImmediateChild=function(S){return".priority"===S?this.priorityNode_:E.__childrenNodeConstructor.EMPTY_NODE},E.prototype.getChild=function(S){return ti(S)?this:".priority"===Nt(S)?this.priorityNode_:E.__childrenNodeConstructor.EMPTY_NODE},E.prototype.hasChild=function(){return!1},E.prototype.getPredecessorChildName=function(S,I){return null},E.prototype.updateImmediateChild=function(S,I){return".priority"===S?this.updatePriority(I):I.isEmpty()&&".priority"!==S?this:E.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(S,I).updatePriority(this.priorityNode_)},E.prototype.updateChild=function(S,I){var V=Nt(S);return null===V?I:I.isEmpty()&&".priority"!==V?this:((0,Ee.hu)(".priority"!==V||1===St(S),".priority must be the last token in a path"),this.updateImmediateChild(V,E.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xt(S),I)))},E.prototype.isEmpty=function(){return!1},E.prototype.numChildren=function(){return 0},E.prototype.forEachChild=function(S,I){return!1},E.prototype.val=function(S){return S&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},E.prototype.hash=function(){if(null===this.lazyHash_){var S="";this.priorityNode_.isEmpty()||(S+="priority:"+fl(this.priorityNode_.val())+":");var I=typeof this.value_;S+=I+":",S+="number"===I?Hn(this.value_):this.value_,this.lazyHash_=On(S)}return this.lazyHash_},E.prototype.getValue=function(){return this.value_},E.prototype.compareTo=function(S){return S===E.__childrenNodeConstructor.EMPTY_NODE?1:S instanceof E.__childrenNodeConstructor?-1:((0,Ee.hu)(S.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(S))},E.prototype.compareToLeafNode_=function(S){var I=typeof S.value_,V=typeof this.value_,Q=E.VALUE_TYPE_ORDER.indexOf(I),le=E.VALUE_TYPE_ORDER.indexOf(V);return(0,Ee.hu)(Q>=0,"Unknown leaf type: "+I),(0,Ee.hu)(le>=0,"Unknown leaf type: "+V),Q===le?"object"===V?0:this.value_<S.value_?-1:this.value_===S.value_?0:1:le-Q},E.prototype.withIndex=function(){return this},E.prototype.isIndexed=function(){return!0},E.prototype.equals=function(S){return S===this||!!S.isLeafNode()&&(this.value_===S.value_&&this.priorityNode_.equals(S.priorityNode_))},E.VALUE_TYPE_ORDER=["object","boolean","number","string"],E}(),ui=new(function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,k.ZT)(S,E),S.prototype.compare=function(I,V){var Q=I.node.getPriority(),le=V.node.getPriority(),ye=Q.compareTo(le);return 0===ye?Yt(I.name,V.name):ye},S.prototype.isDefinedOn=function(I){return!I.getPriority().isEmpty()},S.prototype.indexedValueChanged=function(I,V){return!I.getPriority().equals(V.getPriority())},S.prototype.minPost=function(){return mr.MIN},S.prototype.maxPost=function(){return new mr(fn,new $i("[PRIORITY-POST]",ch))},S.prototype.makePost=function(I,V){var Q=lh(I);return new mr(V,new $i("[PRIORITY-POST]",Q))},S.prototype.toString=function(){return".priority"},S}(Gd)),uh=Math.log(2),Cu=function(){function E(S){this.count=parseInt(Math.log(S+1)/uh,10),this.current_=this.count-1;var Q=parseInt(Array(this.count+1).join("1"),2);this.bits_=S+1&Q}return E.prototype.nextBitIsOne=function(){var S=!(this.bits_&1<<this.current_);return this.current_--,S},E}(),hh=function(E,S,I,V){E.sort(S);var Q=function(Ye,st){var Wt,cn,pt=st-Ye;if(0===pt)return null;if(1===pt)return Wt=E[Ye],cn=I?I(Wt):Wt,new ra(cn,Wt.node,ra.BLACK,null,null);var Mn=parseInt(pt/2,10)+Ye,Wn=Q(Ye,Mn),Pi=Q(Mn+1,st);return Wt=E[Mn],cn=I?I(Wt):Wt,new ra(cn,Wt.node,ra.BLACK,Wn,Pi)},Fe=function(Ye){for(var st=null,pt=null,Wt=E.length,cn=function(Qi,Jo){var Al=Wt-Qi,bd=Wt;Wt-=Qi;var uf=Q(Al+1,bd),xo=E[Al],Qa=I?I(xo):xo;Mn(new ra(Qa,xo.node,Jo,null,uf))},Mn=function(Qi){st?(st.left=Qi,st=Qi):(pt=Qi,st=Qi)},Wn=0;Wn<Ye.count;++Wn){var Pi=Ye.nextBitIsOne(),yi=Math.pow(2,Ye.count-(Wn+1));Pi?cn(yi,ra.BLACK):(cn(yi,ra.BLACK),cn(yi,ra.RED))}return pt}(new Cu(E.length));return new Uo(V||S,Fe)},zl={},Xr=function(){function E(S,I){this.indexes_=S,this.indexSet_=I}return Object.defineProperty(E,"Default",{get:function(){return(0,Ee.hu)(zl&&ui,"ChildrenNode.ts has not been loaded"),td=td||new E({".priority":zl},{".priority":ui})},enumerable:!1,configurable:!0}),E.prototype.get=function(S){var I=(0,Ee.DV)(this.indexes_,S);if(!I)throw new Error("No index defined for "+S);return I instanceof Uo?I:null},E.prototype.hasIndex=function(S){return(0,Ee.r3)(this.indexSet_,S.toString())},E.prototype.addIndex=function(S,I){(0,Ee.hu)(S!==dl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var V=[],Q=!1,le=I.getIterator(mr.Wrap),ye=le.getNext();ye;)Q=Q||S.isDefinedOn(ye.node),V.push(ye),ye=le.getNext();var Fe;Fe=Q?hh(V,S.getCompare()):zl;var Ye=S.toString(),st=(0,k.pi)({},this.indexSet_);st[Ye]=S;var pt=(0,k.pi)({},this.indexes_);return pt[Ye]=Fe,new E(pt,st)},E.prototype.addToIndexes=function(S,I){var V=this;return new E((0,Ee.UI)(this.indexes_,function(le,ye){var Fe=(0,Ee.DV)(V.indexSet_,ye);if((0,Ee.hu)(Fe,"Missing index implementation for "+ye),le===zl){if(Fe.isDefinedOn(S.node)){for(var Ye=[],st=I.getIterator(mr.Wrap),pt=st.getNext();pt;)pt.name!==S.name&&Ye.push(pt),pt=st.getNext();return Ye.push(S),hh(Ye,Fe.getCompare())}return zl}var Wt=I.get(S.name),cn=le;return Wt&&(cn=cn.remove(new mr(S.name,Wt))),cn.insert(S,S.node)}),this.indexSet_)},E.prototype.removeFromIndexes=function(S,I){return new E((0,Ee.UI)(this.indexes_,function(Q){if(Q===zl)return Q;var le=I.get(S.name);return le?Q.remove(new mr(S.name,le)):Q}),this.indexSet_)},E}(),Ii=function(){function E(S,I,V){this.children_=S,this.priorityNode_=I,this.indexMap_=V,this.lazyHash_=null,this.priorityNode_&&sh(this.priorityNode_),this.children_.isEmpty()&&(0,Ee.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(E,"EMPTY_NODE",{get:function(){return dh||(dh=new E(new Uo(pl),null,Xr.Default))},enumerable:!1,configurable:!0}),E.prototype.isLeafNode=function(){return!1},E.prototype.getPriority=function(){return this.priorityNode_||dh},E.prototype.updatePriority=function(S){return this.children_.isEmpty()?this:new E(this.children_,S,this.indexMap_)},E.prototype.getImmediateChild=function(S){if(".priority"===S)return this.getPriority();var I=this.children_.get(S);return null===I?dh:I},E.prototype.getChild=function(S){var I=Nt(S);return null===I?this:this.getImmediateChild(I).getChild(Xt(S))},E.prototype.hasChild=function(S){return null!==this.children_.get(S)},E.prototype.updateImmediateChild=function(S,I){if((0,Ee.hu)(I,"We should always be passing snapshot nodes"),".priority"===S)return this.updatePriority(I);var V=new mr(S,I),Q=void 0,le=void 0;I.isEmpty()?(Q=this.children_.remove(S),le=this.indexMap_.removeFromIndexes(V,this.children_)):(Q=this.children_.insert(S,I),le=this.indexMap_.addToIndexes(V,this.children_));var ye=Q.isEmpty()?dh:this.priorityNode_;return new E(Q,ye,le)},E.prototype.updateChild=function(S,I){var V=Nt(S);if(null===V)return I;(0,Ee.hu)(".priority"!==Nt(S)||1===St(S),".priority must be the last token in a path");var Q=this.getImmediateChild(V).updateChild(Xt(S),I);return this.updateImmediateChild(V,Q)},E.prototype.isEmpty=function(){return this.children_.isEmpty()},E.prototype.numChildren=function(){return this.children_.count()},E.prototype.val=function(S){if(this.isEmpty())return null;var I={},V=0,Q=0,le=!0;if(this.forEachChild(ui,function(Ye,st){I[Ye]=st.val(S),V++,le&&E.INTEGER_REGEXP_.test(Ye)?Q=Math.max(Q,Number(Ye)):le=!1}),!S&&le&&Q<2*V){var ye=[];for(var Fe in I)ye[Fe]=I[Fe];return ye}return S&&!this.getPriority().isEmpty()&&(I[".priority"]=this.getPriority().val()),I},E.prototype.hash=function(){if(null===this.lazyHash_){var S="";this.getPriority().isEmpty()||(S+="priority:"+fl(this.getPriority().val())+":"),this.forEachChild(ui,function(I,V){var Q=V.hash();""!==Q&&(S+=":"+I+":"+Q)}),this.lazyHash_=""===S?"":On(S)}return this.lazyHash_},E.prototype.getPredecessorChildName=function(S,I,V){var Q=this.resolveIndex_(V);if(Q){var le=Q.getPredecessorKey(new mr(S,I));return le?le.name:null}return this.children_.getPredecessorKey(S)},E.prototype.getFirstChildName=function(S){var I=this.resolveIndex_(S);if(I){var V=I.minKey();return V&&V.name}return this.children_.minKey()},E.prototype.getFirstChild=function(S){var I=this.getFirstChildName(S);return I?new mr(I,this.children_.get(I)):null},E.prototype.getLastChildName=function(S){var I=this.resolveIndex_(S);if(I){var V=I.maxKey();return V&&V.name}return this.children_.maxKey()},E.prototype.getLastChild=function(S){var I=this.getLastChildName(S);return I?new mr(I,this.children_.get(I)):null},E.prototype.forEachChild=function(S,I){var V=this.resolveIndex_(S);return V?V.inorderTraversal(function(Q){return I(Q.name,Q.node)}):this.children_.inorderTraversal(I)},E.prototype.getIterator=function(S){return this.getIteratorFrom(S.minPost(),S)},E.prototype.getIteratorFrom=function(S,I){var V=this.resolveIndex_(I);if(V)return V.getIteratorFrom(S,function(ye){return ye});for(var Q=this.children_.getIteratorFrom(S.name,mr.Wrap),le=Q.peek();null!=le&&I.compare(le,S)<0;)Q.getNext(),le=Q.peek();return Q},E.prototype.getReverseIterator=function(S){return this.getReverseIteratorFrom(S.maxPost(),S)},E.prototype.getReverseIteratorFrom=function(S,I){var V=this.resolveIndex_(I);if(V)return V.getReverseIteratorFrom(S,function(ye){return ye});for(var Q=this.children_.getReverseIteratorFrom(S.name,mr.Wrap),le=Q.peek();null!=le&&I.compare(le,S)>0;)Q.getNext(),le=Q.peek();return Q},E.prototype.compareTo=function(S){return this.isEmpty()?S.isEmpty()?0:-1:S.isLeafNode()||S.isEmpty()?1:S===Pr?-1:0},E.prototype.withIndex=function(S){if(S===dl||this.indexMap_.hasIndex(S))return this;var I=this.indexMap_.addIndex(S,this.children_);return new E(this.children_,this.priorityNode_,I)},E.prototype.isIndexed=function(S){return S===dl||this.indexMap_.hasIndex(S)},E.prototype.equals=function(S){if(S===this)return!0;if(S.isLeafNode())return!1;var I=S;if(this.getPriority().equals(I.getPriority())){if(this.children_.count()===I.children_.count()){for(var V=this.getIterator(ui),Q=I.getIterator(ui),le=V.getNext(),ye=Q.getNext();le&&ye;){if(le.name!==ye.name||!le.node.equals(ye.node))return!1;le=V.getNext(),ye=Q.getNext()}return null===le&&null===ye}return!1}return!1},E.prototype.resolveIndex_=function(S){return S===dl?null:this.indexMap_.get(S.toString())},E.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,E}(),Pr=new(function(E){function S(){return E.call(this,new Uo(pl),Ii.EMPTY_NODE,Xr.Default)||this}return(0,k.ZT)(S,E),S.prototype.compareTo=function(I){return I===this?0:1},S.prototype.equals=function(I){return I===this},S.prototype.getPriority=function(){return this},S.prototype.getImmediateChild=function(I){return Ii.EMPTY_NODE},S.prototype.isEmpty=function(){return!1},S}(Ii));function oo(E,S){if(void 0===S&&(S=null),null===E)return Ii.EMPTY_NODE;if("object"==typeof E&&".priority"in E&&(S=E[".priority"]),(0,Ee.hu)(null===S||"string"==typeof S||"number"==typeof S||"object"==typeof S&&".sv"in S,"Invalid priority type found: "+typeof S),"object"==typeof E&&".value"in E&&null!==E[".value"]&&(E=E[".value"]),"object"!=typeof E||".sv"in E)return new $i(E,oo(S));if(E instanceof Array){var Ye=Ii.EMPTY_NODE;return ri(E,function(st,pt){if((0,Ee.r3)(E,st)&&"."!==st.substring(0,1)){var Wt=oo(pt);(Wt.isLeafNode()||!Wt.isEmpty())&&(Ye=Ye.updateImmediateChild(st,Wt))}}),Ye.updatePriority(oo(S))}var V=[],Q=!1;if(ri(E,function(st,pt){if("."!==st.substring(0,1)){var Wt=oo(pt);Wt.isEmpty()||(Q=Q||!Wt.getPriority().isEmpty(),V.push(new mr(st,Wt)))}}),0===V.length)return Ii.EMPTY_NODE;var ye=hh(V,Yd,function(st){return st.name},pl);if(Q){var Fe=hh(V,ui.getCompare());return new Ii(ye,oo(S),new Xr({".priority":Fe},{".priority":ui}))}return new Ii(ye,oo(S),Xr.Default)}Object.defineProperties(mr,{MIN:{value:new mr(Ht,Ii.EMPTY_NODE)},MAX:{value:new mr(fn,Pr)}}),jd.__EMPTY_NODE=Ii.EMPTY_NODE,$i.__childrenNodeConstructor=Ii,function(E){wu=E}(Pr),function(E){ch=E}(Pr),function(E){lh=E}(oo);var Lc=function(E){function S(I){var V=E.call(this)||this;return V.indexPath_=I,(0,Ee.hu)(!ti(I)&&".priority"!==Nt(I),"Can't create PathIndex with empty path or .priority key"),V}return(0,k.ZT)(S,E),S.prototype.extractChild=function(I){return I.getChild(this.indexPath_)},S.prototype.isDefinedOn=function(I){return!I.getChild(this.indexPath_).isEmpty()},S.prototype.compare=function(I,V){var Q=this.extractChild(I.node),le=this.extractChild(V.node),ye=Q.compareTo(le);return 0===ye?Yt(I.name,V.name):ye},S.prototype.makePost=function(I,V){var Q=oo(I),le=Ii.EMPTY_NODE.updateChild(this.indexPath_,Q);return new mr(V,le)},S.prototype.maxPost=function(){var I=Ii.EMPTY_NODE.updateChild(this.indexPath_,Pr);return new mr(fn,I)},S.prototype.toString=function(){return Kn(this.indexPath_,0).join("/")},S}(Gd),ph=new(function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,k.ZT)(S,E),S.prototype.compare=function(I,V){var Q=I.node.compareTo(V.node);return 0===Q?Yt(I.name,V.name):Q},S.prototype.isDefinedOn=function(I){return!0},S.prototype.indexedValueChanged=function(I,V){return!I.equals(V)},S.prototype.minPost=function(){return mr.MIN},S.prototype.maxPost=function(){return mr.MAX},S.prototype.makePost=function(I,V){var Q=oo(I);return new mr(V,Q)},S.prototype.toString=function(){return".value"},S}(Gd)),ka="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$d=function(){var E=0,S=[];return function(I){var V=I===E;E=I;var Q,le=new Array(8);for(Q=7;Q>=0;Q--)le[Q]=ka.charAt(I%64),I=Math.floor(I/64);(0,Ee.hu)(0===I,"Cannot push at time == 0");var ye=le.join("");if(V){for(Q=11;Q>=0&&63===S[Q];Q--)S[Q]=0;S[Q]++}else for(Q=0;Q<12;Q++)S[Q]=Math.floor(64*Math.random());for(Q=0;Q<12;Q++)ye+=ka.charAt(S[Q]);return(0,Ee.hu)(20===ye.length,"nextPushId: Length should be 20."),ye}}(),Nc=function(E){if(E===""+_r)return"-";var S=io(E);if(null!=S)return""+(S+1);for(var I=new Array(E.length),V=0;V<I.length;V++)I[V]=E.charAt(V);if(I.length<786)return I.push("-"),I.join("");for(var Q=I.length-1;Q>=0&&"z"===I[Q];)Q--;if(-1===Q)return fn;var ye=ka.charAt(ka.indexOf(I[Q])+1);return I[Q]=ye,I.slice(0,Q+1).join("")},Va=function(E){if(E===""+Io)return Ht;var S=io(E);if(null!=S)return""+(S-1);for(var I=new Array(E.length),V=0;V<I.length;V++)I[V]=E.charAt(V);return"-"===I[I.length-1]?1===I.length?""+_r:(delete I[I.length-1],I.join("")):(I[I.length-1]=ka.charAt(ka.indexOf(I[I.length-1])-1),I.join("")+"z".repeat(786-I.length))};function nd(E){return{type:"value",snapshotNode:E}}function Ua(E,S){return{type:"child_added",snapshotNode:S,childName:E}}function bi(E,S){return{type:"child_removed",snapshotNode:S,childName:E}}function Su(E,S,I){return{type:"child_changed",snapshotNode:S,childName:E,oldSnap:I}}var Eu=function(){function E(S){this.index_=S}return E.prototype.updateChild=function(S,I,V,Q,le,ye){(0,Ee.hu)(S.isIndexed(this.index_),"A node must be indexed if only a child is updated");var Fe=S.getImmediateChild(I);return Fe.getChild(Q).equals(V.getChild(Q))&&Fe.isEmpty()===V.isEmpty()||(null!=ye&&(V.isEmpty()?S.hasChild(I)?ye.trackChildChange(bi(I,Fe)):(0,Ee.hu)(S.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Fe.isEmpty()?ye.trackChildChange(Ua(I,V)):ye.trackChildChange(Su(I,V,Fe))),S.isLeafNode()&&V.isEmpty())?S:S.updateImmediateChild(I,V).withIndex(this.index_)},E.prototype.updateFullNode=function(S,I,V){return null!=V&&(S.isLeafNode()||S.forEachChild(ui,function(Q,le){I.hasChild(Q)||V.trackChildChange(bi(Q,le))}),I.isLeafNode()||I.forEachChild(ui,function(Q,le){if(S.hasChild(Q)){var ye=S.getImmediateChild(Q);ye.equals(le)||V.trackChildChange(Su(Q,le,ye))}else V.trackChildChange(Ua(Q,le))})),I.withIndex(this.index_)},E.prototype.updatePriority=function(S,I){return S.isEmpty()?Ii.EMPTY_NODE:S.updatePriority(I)},E.prototype.filtersNodes=function(){return!1},E.prototype.getIndexedFilter=function(){return this},E.prototype.getIndex=function(){return this.index_},E}(),Xd=function(){function E(S){this.indexedFilter_=new Eu(S.getIndex()),this.index_=S.getIndex(),this.startPost_=E.getStartPost_(S),this.endPost_=E.getEndPost_(S)}return E.prototype.getStartPost=function(){return this.startPost_},E.prototype.getEndPost=function(){return this.endPost_},E.prototype.matches=function(S){return this.index_.compare(this.getStartPost(),S)<=0&&this.index_.compare(S,this.getEndPost())<=0},E.prototype.updateChild=function(S,I,V,Q,le,ye){return this.matches(new mr(I,V))||(V=Ii.EMPTY_NODE),this.indexedFilter_.updateChild(S,I,V,Q,le,ye)},E.prototype.updateFullNode=function(S,I,V){I.isLeafNode()&&(I=Ii.EMPTY_NODE);var Q=I.withIndex(this.index_);Q=Q.updatePriority(Ii.EMPTY_NODE);var le=this;return I.forEachChild(ui,function(ye,Fe){le.matches(new mr(ye,Fe))||(Q=Q.updateImmediateChild(ye,Ii.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(S,Q,V)},E.prototype.updatePriority=function(S,I){return S},E.prototype.filtersNodes=function(){return!0},E.prototype.getIndexedFilter=function(){return this.indexedFilter_},E.prototype.getIndex=function(){return this.index_},E.getStartPost_=function(S){if(S.hasStart()){var I=S.getIndexStartName();return S.getIndex().makePost(S.getIndexStartValue(),I)}return S.getIndex().minPost()},E.getEndPost_=function(S){if(S.hasEnd()){var I=S.getIndexEndName();return S.getIndex().makePost(S.getIndexEndValue(),I)}return S.getIndex().maxPost()},E}(),Rf=function(){function E(S){this.rangedFilter_=new Xd(S),this.index_=S.getIndex(),this.limit_=S.getLimit(),this.reverse_=!S.isViewFromLeft()}return E.prototype.updateChild=function(S,I,V,Q,le,ye){return this.rangedFilter_.matches(new mr(I,V))||(V=Ii.EMPTY_NODE),S.getImmediateChild(I).equals(V)?S:S.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(S,I,V,Q,le,ye):this.fullLimitUpdateChild_(S,I,V,le,ye)},E.prototype.updateFullNode=function(S,I,V){var Q;if(I.isLeafNode()||I.isEmpty())Q=Ii.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<I.numChildren()&&I.isIndexed(this.index_)){Q=Ii.EMPTY_NODE.withIndex(this.index_);var le=void 0;le=this.reverse_?I.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):I.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var ye=0;le.hasNext()&&ye<this.limit_;){var Fe=le.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),Fe)<=0:this.index_.compare(Fe,this.rangedFilter_.getEndPost())<=0))break;Q=Q.updateImmediateChild(Fe.name,Fe.node),ye++}}else{Q=(Q=I.withIndex(this.index_)).updatePriority(Ii.EMPTY_NODE);var st=void 0,pt=void 0,Wt=void 0;if(le=void 0,this.reverse_){le=Q.getReverseIterator(this.index_),st=this.rangedFilter_.getEndPost(),pt=this.rangedFilter_.getStartPost();var cn=this.index_.getCompare();Wt=function(yi,Qi){return cn(Qi,yi)}}else le=Q.getIterator(this.index_),st=this.rangedFilter_.getStartPost(),pt=this.rangedFilter_.getEndPost(),Wt=this.index_.getCompare();ye=0;for(var Mn=!1;le.hasNext();)Fe=le.getNext(),!Mn&&Wt(st,Fe)<=0&&(Mn=!0),Mn&&ye<this.limit_&&Wt(Fe,pt)<=0?ye++:Q=Q.updateImmediateChild(Fe.name,Ii.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(S,Q,V)},E.prototype.updatePriority=function(S,I){return S},E.prototype.filtersNodes=function(){return!0},E.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},E.prototype.getIndex=function(){return this.index_},E.prototype.fullLimitUpdateChild_=function(S,I,V,Q,le){var ye;if(this.reverse_){var Fe=this.index_.getCompare();ye=function(Jo,Al){return Fe(Al,Jo)}}else ye=this.index_.getCompare();var Ye=S;(0,Ee.hu)(Ye.numChildren()===this.limit_,"");var st=new mr(I,V),pt=this.reverse_?Ye.getFirstChild(this.index_):Ye.getLastChild(this.index_),Wt=this.rangedFilter_.matches(st);if(Ye.hasChild(I)){for(var cn=Ye.getImmediateChild(I),Mn=Q.getChildAfterChild(this.index_,pt,this.reverse_);null!=Mn&&(Mn.name===I||Ye.hasChild(Mn.name));)Mn=Q.getChildAfterChild(this.index_,Mn,this.reverse_);var Wn=null==Mn?1:ye(Mn,st);if(Wt&&!V.isEmpty()&&Wn>=0)return null!=le&&le.trackChildChange(Su(I,V,cn)),Ye.updateImmediateChild(I,V);null!=le&&le.trackChildChange(bi(I,cn));var yi=Ye.updateImmediateChild(I,Ii.EMPTY_NODE);return null!=Mn&&this.rangedFilter_.matches(Mn)?(null!=le&&le.trackChildChange(Ua(Mn.name,Mn.node)),yi.updateImmediateChild(Mn.name,Mn.node)):yi}return V.isEmpty()?S:Wt&&ye(pt,st)>=0?(null!=le&&(le.trackChildChange(bi(pt.name,pt.node)),le.trackChildChange(Ua(I,V))),Ye.updateImmediateChild(I,V).updateImmediateChild(pt.name,Ii.EMPTY_NODE)):S},E}(),Tu=function(){function E(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ui}return E.prototype.hasStart=function(){return this.startSet_},E.prototype.hasStartAfter=function(){return this.startAfterSet_},E.prototype.hasEndBefore=function(){return this.endBeforeSet_},E.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},E.prototype.getIndexStartValue=function(){return(0,Ee.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},E.prototype.getIndexStartName=function(){return(0,Ee.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ht},E.prototype.hasEnd=function(){return this.endSet_},E.prototype.getIndexEndValue=function(){return(0,Ee.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},E.prototype.getIndexEndName=function(){return(0,Ee.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fn},E.prototype.hasLimit=function(){return this.limitSet_},E.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},E.prototype.getLimit=function(){return(0,Ee.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},E.prototype.getIndex=function(){return this.index_},E.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},E.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ui},E.prototype.copy=function(){var S=new E;return S.limitSet_=this.limitSet_,S.limit_=this.limit_,S.startSet_=this.startSet_,S.indexStartValue_=this.indexStartValue_,S.startNameSet_=this.startNameSet_,S.indexStartName_=this.indexStartName_,S.endSet_=this.endSet_,S.indexEndValue_=this.indexEndValue_,S.endNameSet_=this.endNameSet_,S.indexEndName_=this.indexEndName_,S.index_=this.index_,S.viewFrom_=this.viewFrom_,S},E}();function id(E,S,I){var V=E.copy();return V.startSet_=!0,void 0===S&&(S=null),V.indexStartValue_=S,null!=I?(V.startNameSet_=!0,V.indexStartName_=I):(V.startNameSet_=!1,V.indexStartName_=""),V}function rd(E,S,I){var V=E.copy();return V.endSet_=!0,void 0===S&&(S=null),V.indexEndValue_=S,void 0!==I?(V.endNameSet_=!0,V.indexEndName_=I):(V.endNameSet_=!1,V.indexEndName_=""),V}function ps(E,S){var I=E.copy();return I.index_=S,I}function ml(E){var I,S={};return E.isDefault()||(E.index_===ui?I="$priority":E.index_===ph?I="$value":E.index_===dl?I="$key":((0,Ee.hu)(E.index_ instanceof Lc,"Unrecognized index type!"),I=E.index_.toString()),S.orderBy=(0,Ee.Pz)(I),E.startSet_&&(S.startAt=(0,Ee.Pz)(E.indexStartValue_),E.startNameSet_&&(S.startAt+=","+(0,Ee.Pz)(E.indexStartName_))),E.endSet_&&(S.endAt=(0,Ee.Pz)(E.indexEndValue_),E.endNameSet_&&(S.endAt+=","+(0,Ee.Pz)(E.indexEndName_))),E.limitSet_&&(E.isViewFromLeft()?S.limitToFirst=E.limit_:S.limitToLast=E.limit_)),S}function mh(E){var S={};if(E.startSet_&&(S.sp=E.indexStartValue_,E.startNameSet_&&(S.sn=E.indexStartName_)),E.endSet_&&(S.ep=E.indexEndValue_,E.endNameSet_&&(S.en=E.indexEndName_)),E.limitSet_){S.l=E.limit_;var I=E.viewFrom_;""===I&&(I=E.isViewFromLeft()?"l":"r"),S.vf=I}return E.index_!==ui&&(S.i=E.index_.toString()),S}var ng=function(E){function S(I,V,Q,le){var ye=E.call(this)||this;return ye.repoInfo_=I,ye.onDataUpdate_=V,ye.authTokenProvider_=Q,ye.appCheckTokenProvider_=le,ye.log_=Di("p:rest:"),ye.listens_={},ye}return(0,k.ZT)(S,E),S.prototype.reportStats=function(I){throw new Error("Method not implemented.")},S.getListenId_=function(I,V){return void 0!==V?"tag$"+V:((0,Ee.hu)(I._queryParams.isDefault(),"should have a tag if it's not a default query."),I._path.toString())},S.prototype.listen=function(I,V,Q,le){var ye=this,Fe=I._path.toString();this.log_("Listen called for "+Fe+" "+I._queryIdentifier);var Ye=S.getListenId_(I,Q),st={};this.listens_[Ye]=st;var pt=ml(I._queryParams);this.restRequest_(Fe+".json",pt,function(Wt,cn){var Mn=cn;404===Wt&&(Mn=null,Wt=null),null===Wt&&ye.onDataUpdate_(Fe,Mn,!1,Q),(0,Ee.DV)(ye.listens_,Ye)===st&&le(Wt?401===Wt?"permission_denied":"rest_error:"+Wt:"ok",null)})},S.prototype.unlisten=function(I,V){var Q=S.getListenId_(I,V);delete this.listens_[Q]},S.prototype.get=function(I){var V=this,Q=ml(I._queryParams),le=I._path.toString(),ye=new Ee.BH;return this.restRequest_(le+".json",Q,function(Fe,Ye){var st=Ye;404===Fe&&(st=null,Fe=null),null===Fe?(V.onDataUpdate_(le,st,!1,null),ye.resolve(st)):ye.reject(new Error(st))}),ye.promise},S.prototype.refreshAuthToken=function(I){},S.prototype.restRequest_=function(I,V,Q){var le=this;return void 0===V&&(V={}),V.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(ye){var Fe=(0,k.CR)(ye,2),Ye=Fe[0],st=Fe[1];Ye&&Ye.accessToken&&(V.auth=Ye.accessToken),st&&st.token&&(V.ac=st.token);var pt=(le.repoInfo_.secure?"https://":"http://")+le.repoInfo_.host+I+"?ns="+le.repoInfo_.namespace+(0,Ee.xO)(V);le.log_("Sending REST request for "+pt);var Wt=new XMLHttpRequest;Wt.onreadystatechange=function(){if(Q&&4===Wt.readyState){le.log_("REST Response for "+pt+" received. status:",Wt.status,"response:",Wt.responseText);var cn=null;if(Wt.status>=200&&Wt.status<300){try{cn=(0,Ee.cI)(Wt.responseText)}catch(Mn){nr("Failed to parse JSON response for "+pt+": "+Wt.responseText)}Q(null,cn)}else 401!==Wt.status&&404!==Wt.status&&nr("Got unsuccessful REST response for "+pt+" Status: "+Wt.status),Q(Wt.status);Q=null}},Wt.open("GET",pt,!0),Wt.send()})},S}(ze),Up=function(){function E(){this.rootNode_=Ii.EMPTY_NODE}return E.prototype.getNode=function(S){return this.rootNode_.getChild(S)},E.prototype.updateSnapshot=function(S,I){this.rootNode_=this.rootNode_.updateChild(S,I)},E}();function sa(){return{value:null,children:new Map}}function gl(E,S,I){if(ti(S))E.value=I,E.children.clear();else if(null!==E.value)E.value=E.value.updateChild(S,I);else{var V=Nt(S);E.children.has(V)||E.children.set(V,sa()),gl(E.children.get(V),S=Xt(S),I)}}function so(E,S){if(ti(S))return E.value=null,E.children.clear(),!0;if(null!==E.value){if(E.value.isLeafNode())return!1;var I=E.value;return E.value=null,I.forEachChild(ui,function(le,ye){gl(E,new Ie(le),ye)}),so(E,S)}if(E.children.size>0){var V=Nt(S);return S=Xt(S),E.children.has(V)&&so(E.children.get(V),S)&&E.children.delete(V),0===E.children.size}return!0}function $o(E,S,I){null!==E.value?I(S,E.value):function(E,S){E.children.forEach(function(I,V){S(V,I)})}(E,function(V,Q){$o(Q,new Ie(S.toString()+"/"+V),I)})}var Ga=function(){function E(S){this.collection_=S,this.last_=null}return E.prototype.get=function(){var S=this.collection_.get(),I=(0,k.pi)({},S);return this.last_&&ri(this.last_,function(V,Q){I[V]=I[V]-Q}),this.last_=S,I},E}(),Gp=function(){function E(S,I){this.server_=I,this.statsToReport_={},this.statsListener_=new Ga(S);var V=1e4+2e4*Math.random();Ri(this.reportStats_.bind(this),Math.floor(V))}return E.prototype.reportStats_=function(){var S=this,I=this.statsListener_.get(),V={},Q=!1;ri(I,function(le,ye){ye>0&&(0,Ee.r3)(S.statsToReport_,le)&&(V[le]=ye,Q=!0)}),Q&&this.server_.reportStats(V),Ri(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},E}(),Ys=(()=>(function(E){E[E.OVERWRITE=0]="OVERWRITE",E[E.MERGE=1]="MERGE",E[E.ACK_USER_WRITE=2]="ACK_USER_WRITE",E[E.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ys||(Ys={})),Ys))();function Mu(E){return{fromUser:!1,fromServer:!0,queryId:E,tagged:!0}}var Qd=function(){function E(S,I,V){this.path=S,this.affectedTree=I,this.revert=V,this.type=Ys.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return E.prototype.operationForChild=function(S){if(ti(this.path)){if(null!=this.affectedTree.value)return(0,Ee.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var I=this.affectedTree.subtree(new Ie(S));return new E(Je(),I,this.revert)}return(0,Ee.hu)(Nt(this.path)===S,"operationForChild called for unrelated child."),new E(Xt(this.path),this.affectedTree,this.revert)},E}(),Aa=function(){function E(S,I){this.source=S,this.path=I,this.type=Ys.LISTEN_COMPLETE}return E.prototype.operationForChild=function(S){return ti(this.path)?new E(this.source,Je()):new E(this.source,Xt(this.path))},E}(),_l=function(){function E(S,I,V){this.source=S,this.path=I,this.snap=V,this.type=Ys.OVERWRITE}return E.prototype.operationForChild=function(S){return ti(this.path)?new E(this.source,Je(),this.snap.getImmediateChild(S)):new E(this.source,Xt(this.path),this.snap)},E}(),yl=function(){function E(S,I,V){this.source=S,this.path=I,this.children=V,this.type=Ys.MERGE}return E.prototype.operationForChild=function(S){if(ti(this.path)){var I=this.children.subtree(new Ie(S));return I.isEmpty()?null:I.value?new _l(this.source,Je(),I.value):new E(this.source,Je(),I)}return(0,Ee.hu)(Nt(this.path)===S,"Can't get a merge for a child not on the path of the operation"),new E(this.source,Xt(this.path),this.children)},E.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},E}(),vl=function(){function E(S,I,V){this.node_=S,this.fullyInitialized_=I,this.filtered_=V}return E.prototype.isFullyInitialized=function(){return this.fullyInitialized_},E.prototype.isFiltered=function(){return this.filtered_},E.prototype.isCompleteForPath=function(S){if(ti(S))return this.isFullyInitialized()&&!this.filtered_;var I=Nt(S);return this.isCompleteForChild(I)},E.prototype.isCompleteForChild=function(S){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(S)},E.prototype.getNode=function(){return this.node_},E}(),jp=function(S){this.query_=S,this.index_=this.query_._queryParams.getIndex()};function Ds(E,S,I,V,Q,le){var ye=V.filter(function(Fe){return Fe.type===I});ye.sort(function(Fe,Ye){return function(E,S,I){if(null==S.childName||null==I.childName)throw(0,Ee.g5)("Should only compare child_ events.");var V=new mr(S.childName,S.snapshotNode),Q=new mr(I.childName,I.snapshotNode);return E.index_.compare(V,Q)}(E,Fe,Ye)}),ye.forEach(function(Fe){var Ye=function(E,S,I){return"value"===S.type||"child_removed"===S.type||(S.prevName=I.getPredecessorChildName(S.childName,S.snapshotNode,E.index_)),S}(E,Fe,le);Q.forEach(function(st){st.respondsTo(Fe.type)&&S.push(st.createEvent(Ye,E.query_))})})}function Ho(E,S){return{eventCache:E,serverCache:S}}function aa(E,S,I,V){return Ho(new vl(S,I,V),E.serverCache)}function Lr(E,S,I,V){return Ho(E.eventCache,new vl(S,I,V))}function zc(E){return E.eventCache.isFullyInitialized()?E.eventCache.getNode():null}function Vl(E){return E.serverCache.isFullyInitialized()?E.serverCache.getNode():null}var yh,Da=function(){function E(S,I){void 0===I&&(yh||(yh=new Uo(Fn)),I=yh),this.value=S,this.children=I}return E.fromObject=function(S){var I=new E(null);return ri(S,function(V,Q){I=I.set(new Ie(V),Q)}),I},E.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},E.prototype.findRootMostMatchingPathAndValue=function(S,I){if(null!=this.value&&I(this.value))return{path:Je(),value:this.value};if(ti(S))return null;var V=Nt(S),Q=this.children.get(V);if(null!==Q){var le=Q.findRootMostMatchingPathAndValue(Xt(S),I);return null!=le?{path:zn(new Ie(V),le.path),value:le.value}:null}return null},E.prototype.findRootMostValueAndPath=function(S){return this.findRootMostMatchingPathAndValue(S,function(){return!0})},E.prototype.subtree=function(S){if(ti(S))return this;var I=Nt(S),V=this.children.get(I);return null!==V?V.subtree(Xt(S)):new E(null)},E.prototype.set=function(S,I){if(ti(S))return new E(I,this.children);var V=Nt(S),le=(this.children.get(V)||new E(null)).set(Xt(S),I),ye=this.children.insert(V,le);return new E(this.value,ye)},E.prototype.remove=function(S){if(ti(S))return this.children.isEmpty()?new E(null):new E(null,this.children);var I=Nt(S),V=this.children.get(I);if(V){var Q=V.remove(Xt(S)),le=void 0;return le=Q.isEmpty()?this.children.remove(I):this.children.insert(I,Q),null===this.value&&le.isEmpty()?new E(null):new E(this.value,le)}return this},E.prototype.get=function(S){if(ti(S))return this.value;var I=Nt(S),V=this.children.get(I);return V?V.get(Xt(S)):null},E.prototype.setTree=function(S,I){if(ti(S))return I;var ye,V=Nt(S),le=(this.children.get(V)||new E(null)).setTree(Xt(S),I);return ye=le.isEmpty()?this.children.remove(V):this.children.insert(V,le),new E(this.value,ye)},E.prototype.fold=function(S){return this.fold_(Je(),S)},E.prototype.fold_=function(S,I){var V={};return this.children.inorderTraversal(function(Q,le){V[Q]=le.fold_(zn(S,Q),I)}),I(S,this.value,V)},E.prototype.findOnPath=function(S,I){return this.findOnPath_(S,Je(),I)},E.prototype.findOnPath_=function(S,I,V){var Q=!!this.value&&V(I,this.value);if(Q)return Q;if(ti(S))return null;var le=Nt(S),ye=this.children.get(le);return ye?ye.findOnPath_(Xt(S),zn(I,le),V):null},E.prototype.foreachOnPath=function(S,I){return this.foreachOnPath_(S,Je(),I)},E.prototype.foreachOnPath_=function(S,I,V){if(ti(S))return this;this.value&&V(I,this.value);var Q=Nt(S),le=this.children.get(Q);return le?le.foreachOnPath_(Xt(S),zn(I,Q),V):new E(null)},E.prototype.foreach=function(S){this.foreach_(Je(),S)},E.prototype.foreach_=function(S,I){this.children.inorderTraversal(function(V,Q){Q.foreach_(zn(S,V),I)}),this.value&&I(S,this.value)},E.prototype.foreachChild=function(S){this.children.inorderTraversal(function(I,V){V.value&&S(I,V.value)})},E}(),fs=function(){function E(S){this.writeTree_=S}return E.empty=function(){return new E(new Da(null))},E}();function bl(E,S,I){if(ti(S))return new fs(new Da(I));var V=E.writeTree_.findRootMostValueAndPath(S);if(null!=V){var Q=V.path,le=V.value,ye=ar(Q,S);return le=le.updateChild(ye,I),new fs(E.writeTree_.set(Q,le))}var Fe=new Da(I),Ye=E.writeTree_.setTree(S,Fe);return new fs(Ye)}function Ul(E,S,I){var V=E;return ri(I,function(Q,le){V=bl(V,zn(S,Q),le)}),V}function vh(E,S){if(ti(S))return fs.empty();var I=E.writeTree_.setTree(S,new Da(null));return new fs(I)}function bh(E,S){return null!=xl(E,S)}function xl(E,S){var I=E.writeTree_.findRootMostValueAndPath(S);return null!=I?E.writeTree_.get(I.path).getChild(ar(I.path,S)):null}function ku(E){var S=[],I=E.writeTree_.value;return null!=I?I.isLeafNode()||I.forEachChild(ui,function(V,Q){S.push(new mr(V,Q))}):E.writeTree_.children.inorderTraversal(function(V,Q){null!=Q.value&&S.push(new mr(V,Q.value))}),S}function os(E,S){if(ti(S))return E;var I=xl(E,S);return new fs(null!=I?new Da(I):E.writeTree_.subtree(S))}function ms(E){return E.writeTree_.isEmpty()}function hc(E,S){return Yp(Je(),E.writeTree_,S)}function Yp(E,S,I){if(null!=S.value)return I.updateChild(E,S.value);var V=null;return S.children.inorderTraversal(function(Q,le){".priority"===Q?((0,Ee.hu)(null!==le.value,"Priority writes must always be leaf nodes"),V=le.value):I=Yp(zn(E,Q),le,I)}),!I.getChild(E).isEmpty()&&null!==V&&(I=I.updateChild(zn(E,".priority"),V)),I}function dc(E,S){return Pu(S,E)}function Lf(E,S){if(E.snap)return Wi(E.path,S);for(var I in E.children)if(E.children.hasOwnProperty(I)&&Wi(zn(E.path,I),S))return!0;return!1}function Zp(E){return E.visible}function Qr(E,S,I){for(var V=fs.empty(),Q=0;Q<E.length;++Q){var le=E[Q];if(S(le)){var ye=le.path,Fe=void 0;if(le.snap)Wi(I,ye)?V=bl(V,Fe=ar(I,ye),le.snap):Wi(ye,I)&&(Fe=ar(ye,I),V=bl(V,Je(),le.snap.getChild(Fe)));else{if(!le.children)throw(0,Ee.g5)("WriteRecord should have .snap or .children");if(Wi(I,ye))V=Ul(V,Fe=ar(I,ye),le.children);else if(Wi(ye,I))if(ti(Fe=ar(ye,I)))V=Ul(V,Je(),le.children);else{var Ye=(0,Ee.DV)(le.children,Nt(Fe));if(Ye){var st=Ye.getChild(Xt(Fe));V=bl(V,Je(),st)}}}}}return V}function ad(E,S,I,V,Q){if(V||Q){var Ye=os(E.visibleWrites,S);return!Q&&ms(Ye)?I:Q||null!=I||bh(Ye,Je())?hc(Qr(E.allWrites,function(cn){return(cn.visible||Q)&&(!V||!~V.indexOf(cn.writeId))&&(Wi(cn.path,S)||Wi(S,cn.path))},S),I||Ii.EMPTY_NODE):null}var le=xl(E.visibleWrites,S);if(null!=le)return le;var ye=os(E.visibleWrites,S);return ms(ye)?I:null!=I||bh(ye,Je())?hc(ye,I||Ii.EMPTY_NODE):null}function Du(E,S,I,V){return ad(E.writeTree,E.treePath,S,I,V)}function Nf(E,S){return function(E,S,I){var V=Ii.EMPTY_NODE,Q=xl(E.visibleWrites,S);if(Q)return Q.isLeafNode()||Q.forEachChild(ui,function(Fe,Ye){V=V.updateImmediateChild(Fe,Ye)}),V;if(I){var le=os(E.visibleWrites,S);return I.forEachChild(ui,function(Fe,Ye){var st=hc(os(le,new Ie(Fe)),Ye);V=V.updateImmediateChild(Fe,st)}),ku(le).forEach(function(Fe){V=V.updateImmediateChild(Fe.name,Fe.node)}),V}return ku(os(E.visibleWrites,S)).forEach(function(Fe){V=V.updateImmediateChild(Fe.name,Fe.node)}),V}(E.writeTree,E.treePath,S)}function tp(E,S,I,V){return function(E,S,I,V,Q){(0,Ee.hu)(V||Q,"Either existingEventSnap or existingServerSnap must exist");var le=zn(S,I);if(bh(E.visibleWrites,le))return null;var ye=os(E.visibleWrites,le);return ms(ye)?Q.getChild(I):hc(ye,Q.getChild(I))}(E.writeTree,E.treePath,S,I,V)}function Hl(E,S){return function(E,S){return xl(E.visibleWrites,S)}(E.writeTree,zn(E.treePath,S))}function $p(E,S,I){return function(E,S,I,V){var Q=zn(S,I),le=xl(E.visibleWrites,Q);return null!=le?le:V.isCompleteForChild(I)?hc(os(E.visibleWrites,Q),V.getNode().getImmediateChild(I)):null}(E.writeTree,E.treePath,S,I)}function Iu(E,S){return Pu(zn(E.treePath,S),E.writeTree)}function Pu(E,S){return{treePath:E,writeTree:S}}var qn=function(){function E(){this.changeMap=new Map}return E.prototype.trackChildChange=function(S){var I=S.type,V=S.childName;(0,Ee.hu)("child_added"===I||"child_changed"===I||"child_removed"===I,"Only child changes supported for tracking"),(0,Ee.hu)(".priority"!==V,"Only non-priority child changes can be tracked.");var Q=this.changeMap.get(V);if(Q){var le=Q.type;if("child_added"===I&&"child_removed"===le)this.changeMap.set(V,Su(V,S.snapshotNode,Q.snapshotNode));else if("child_removed"===I&&"child_added"===le)this.changeMap.delete(V);else if("child_removed"===I&&"child_changed"===le)this.changeMap.set(V,bi(V,Q.oldSnap));else if("child_changed"===I&&"child_added"===le)this.changeMap.set(V,Ua(V,S.snapshotNode));else{if("child_changed"!==I||"child_changed"!==le)throw(0,Ee.g5)("Illegal combination of changes: "+S+" occurred after "+Q);this.changeMap.set(V,Su(V,S.snapshotNode,Q.oldSnap))}}else this.changeMap.set(V,S)},E.prototype.getChanges=function(){return Array.from(this.changeMap.values())},E}(),Cl=new(function(){function E(){}return E.prototype.getCompleteChild=function(S){return null},E.prototype.getChildAfterChild=function(S,I,V){return null},E}()),Yr=function(){function E(S,I,V){void 0===V&&(V=null),this.writes_=S,this.viewCache_=I,this.optCompleteServerCache_=V}return E.prototype.getCompleteChild=function(S){var I=this.viewCache_.eventCache;if(I.isCompleteForChild(S))return I.getNode().getImmediateChild(S);var V=null!=this.optCompleteServerCache_?new vl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $p(this.writes_,S,V)},E.prototype.getChildAfterChild=function(S,I,V){var Q=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vl(this.viewCache_),le=function(E,S,I,V,Q,le){return function(E,S,I,V,Q,le,ye){var Fe,Ye=os(E.visibleWrites,S),st=xl(Ye,Je());if(null!=st)Fe=st;else{if(null==I)return[];Fe=hc(Ye,I)}if((Fe=Fe.withIndex(ye)).isEmpty()||Fe.isLeafNode())return[];for(var pt=[],Wt=ye.getCompare(),cn=le?Fe.getReverseIteratorFrom(V,ye):Fe.getIteratorFrom(V,ye),Mn=cn.getNext();Mn&&pt.length<Q;)0!==Wt(Mn,V)&&pt.push(Mn),Mn=cn.getNext();return pt}(E.writeTree,E.treePath,S,I,V,Q,le)}(this.writes_,Q,I,1,V,S);return 0===le.length?null:le[0]},E}();function Nr(E,S,I,V,Q,le){var ye=S.eventCache;if(null!=Hl(V,I))return S;var Fe=void 0,Ye=void 0;if(ti(I))if((0,Ee.hu)(S.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),S.serverCache.isFiltered()){var st=Vl(S),Wt=Nf(V,st instanceof Ii?st:Ii.EMPTY_NODE);Fe=E.filter.updateFullNode(S.eventCache.getNode(),Wt,le)}else{var cn=Du(V,Vl(S));Fe=E.filter.updateFullNode(S.eventCache.getNode(),cn,le)}else{var Mn=Nt(I);if(".priority"===Mn){(0,Ee.hu)(1===St(I),"Can't have a priority with additional path components");var Wn=ye.getNode(),Pi=tp(V,I,Wn,Ye=S.serverCache.getNode());Fe=null!=Pi?E.filter.updatePriority(Wn,Pi):ye.getNode()}else{var yi=Xt(I),Qi=void 0;if(ye.isCompleteForChild(Mn)){Ye=S.serverCache.getNode();var Jo=tp(V,I,ye.getNode(),Ye);Qi=null!=Jo?ye.getNode().getImmediateChild(Mn).updateChild(yi,Jo):ye.getNode().getImmediateChild(Mn)}else Qi=$p(V,Mn,S.serverCache);Fe=null!=Qi?E.filter.updateChild(ye.getNode(),Mn,Qi,yi,Q,le):ye.getNode()}}return aa(S,Fe,ye.isFullyInitialized()||ti(I),E.filter.filtersNodes())}function Is(E,S,I,V,Q,le,ye,Fe){var st,Ye=S.serverCache,pt=ye?E.filter:E.filter.getIndexedFilter();if(ti(I))st=pt.updateFullNode(Ye.getNode(),V,null);else if(pt.filtersNodes()&&!Ye.isFiltered()){var Wt=Ye.getNode().updateChild(I,V);st=pt.updateFullNode(Ye.getNode(),Wt,null)}else{var cn=Nt(I);if(!Ye.isCompleteForPath(I)&&St(I)>1)return S;var Mn=Xt(I),Pi=Ye.getNode().getImmediateChild(cn).updateChild(Mn,V);st=".priority"===cn?pt.updatePriority(Ye.getNode(),Pi):pt.updateChild(Ye.getNode(),cn,Pi,Mn,Cl,null)}var yi=Lr(S,st,Ye.isFullyInitialized()||ti(I),pt.filtersNodes());return Nr(E,yi,I,Q,new Yr(Q,yi,le),Fe)}function Rr(E,S,I,V,Q,le,ye){var Ye,st,Fe=S.eventCache,pt=new Yr(Q,S,le);if(ti(I))st=E.filter.updateFullNode(S.eventCache.getNode(),V,ye),Ye=aa(S,st,!0,E.filter.filtersNodes());else{var Wt=Nt(I);if(".priority"===Wt)st=E.filter.updatePriority(S.eventCache.getNode(),V),Ye=aa(S,st,Fe.isFullyInitialized(),Fe.isFiltered());else{var cn=Xt(I),Mn=Fe.getNode().getImmediateChild(Wt),Wn=void 0;if(ti(cn))Wn=V;else{var Pi=pt.getCompleteChild(Wt);Wn=null!=Pi?".priority"===gn(cn)&&Pi.getChild(Bi(cn)).isEmpty()?Pi:Pi.updateChild(cn,V):Ii.EMPTY_NODE}Ye=Mn.equals(Wn)?S:aa(S,E.filter.updateChild(Fe.getNode(),Wt,Wn,cn,pt,ye),Fe.isFullyInitialized(),E.filter.filtersNodes())}}return Ye}function Gl(E,S){return E.eventCache.isCompleteForChild(S)}function Xo(E,S,I){return I.foreach(function(V,Q){S=S.updateChild(V,Q)}),S}function ca(E,S,I,V,Q,le,ye,Fe){if(S.serverCache.getNode().isEmpty()&&!S.serverCache.isFullyInitialized())return S;var st,Ye=S;st=ti(I)?V:new Da(null).setTree(I,V);var pt=S.serverCache.getNode();return st.children.inorderTraversal(function(Wt,cn){if(pt.hasChild(Wt)){var Wn=Xo(0,S.serverCache.getNode().getImmediateChild(Wt),cn);Ye=Is(E,Ye,new Ie(Wt),Wn,Q,le,ye,Fe)}}),st.children.inorderTraversal(function(Wt,cn){var Mn=!S.serverCache.isCompleteForChild(Wt)&&void 0===cn.value;if(!pt.hasChild(Wt)&&!Mn){var Pi=Xo(0,S.serverCache.getNode().getImmediateChild(Wt),cn);Ye=Is(E,Ye,new Ie(Wt),Pi,Q,le,ye,Fe)}}),Ye}var wh=function(){function E(S,I){this.query_=S,this.eventRegistrations_=[];var V=this.query_._queryParams,Q=new Eu(V.getIndex()),le=function(E){return E.loadsAllData()?new Eu(E.getIndex()):E.hasLimit()?new Rf(E):new Xd(E)}(V);this.processor_=function(E){return{filter:E}}(le);var ye=I.serverCache,Fe=I.eventCache,Ye=Q.updateFullNode(Ii.EMPTY_NODE,ye.getNode(),null),st=le.updateFullNode(Ii.EMPTY_NODE,Fe.getNode(),null),pt=new vl(Ye,ye.isFullyInitialized(),Q.filtersNodes()),Wt=new vl(st,Fe.isFullyInitialized(),le.filtersNodes());this.viewCache_=Ho(Wt,pt),this.eventGenerator_=new jp(this.query_)}return Object.defineProperty(E.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),E}();function Ru(E,S){var I=Vl(E.viewCache_);return I&&(E.query._queryParams.loadsAllData()||!ti(S)&&!I.getImmediateChild(Nt(S)).isEmpty())?I.getChild(S):null}function jc(E){return 0===E.eventRegistrations_.length}function mc(E,S,I){var V=[];if(I){(0,Ee.hu)(null==S,"A cancel should cancel all event registrations.");var Q=E.query._path;E.eventRegistrations_.forEach(function(Ye){var st=Ye.createCancelEvent(I,Q);st&&V.push(st)})}if(S){for(var le=[],ye=0;ye<E.eventRegistrations_.length;++ye){var Fe=E.eventRegistrations_[ye];if(Fe.matches(S)){if(S.hasAnyCallback()){le=le.concat(E.eventRegistrations_.slice(ye+1));break}}else le.push(Fe)}E.eventRegistrations_=le}else E.eventRegistrations_=[];return V}function Ou(E,S,I,V){S.type===Ys.MERGE&&null!==S.source.queryId&&((0,Ee.hu)(Vl(E.viewCache_),"We should always have a full cache before handling merges"),(0,Ee.hu)(zc(E.viewCache_),"Missing event cache, even though we have a server cache"));var Q=E.viewCache_,le=function(E,S,I,V,Q){var ye,Fe,le=new qn;if(I.type===Ys.OVERWRITE){var Ye=I;Ye.source.fromUser?ye=Rr(E,S,Ye.path,Ye.snap,V,Q,le):((0,Ee.hu)(Ye.source.fromServer,"Unknown source."),Fe=Ye.source.tagged||S.serverCache.isFiltered()&&!ti(Ye.path),ye=Is(E,S,Ye.path,Ye.snap,V,Q,Fe,le))}else if(I.type===Ys.MERGE){var st=I;st.source.fromUser?ye=function(E,S,I,V,Q,le,ye){var Fe=S;return V.foreach(function(Ye,st){var pt=zn(I,Ye);Gl(S,Nt(pt))&&(Fe=Rr(E,Fe,pt,st,Q,le,ye))}),V.foreach(function(Ye,st){var pt=zn(I,Ye);Gl(S,Nt(pt))||(Fe=Rr(E,Fe,pt,st,Q,le,ye))}),Fe}(E,S,st.path,st.children,V,Q,le):((0,Ee.hu)(st.source.fromServer,"Unknown source."),Fe=st.source.tagged||S.serverCache.isFiltered(),ye=ca(E,S,st.path,st.children,V,Q,Fe,le))}else if(I.type===Ys.ACK_USER_WRITE){var pt=I;ye=pt.revert?function(E,S,I,V,Q,le){var ye;if(null!=Hl(V,I))return S;var Fe=new Yr(V,S,Q),Ye=S.eventCache.getNode(),st=void 0;if(ti(I)||".priority"===Nt(I)){var pt=void 0;if(S.serverCache.isFullyInitialized())pt=Du(V,Vl(S));else{var Wt=S.serverCache.getNode();(0,Ee.hu)(Wt instanceof Ii,"serverChildren would be complete if leaf node"),pt=Nf(V,Wt)}st=E.filter.updateFullNode(Ye,pt=pt,le)}else{var cn=Nt(I),Mn=$p(V,cn,S.serverCache);null==Mn&&S.serverCache.isCompleteForChild(cn)&&(Mn=Ye.getImmediateChild(cn)),(st=null!=Mn?E.filter.updateChild(Ye,cn,Mn,Xt(I),Fe,le):S.eventCache.getNode().hasChild(cn)?E.filter.updateChild(Ye,cn,Ii.EMPTY_NODE,Xt(I),Fe,le):Ye).isEmpty()&&S.serverCache.isFullyInitialized()&&(ye=Du(V,Vl(S))).isLeafNode()&&(st=E.filter.updateFullNode(st,ye,le))}return ye=S.serverCache.isFullyInitialized()||null!=Hl(V,Je()),aa(S,st,ye,E.filter.filtersNodes())}(E,S,pt.path,V,Q,le):function(E,S,I,V,Q,le,ye){if(null!=Hl(Q,I))return S;var Fe=S.serverCache.isFiltered(),Ye=S.serverCache;if(null!=V.value){if(ti(I)&&Ye.isFullyInitialized()||Ye.isCompleteForPath(I))return Is(E,S,I,Ye.getNode().getChild(I),Q,le,Fe,ye);if(ti(I)){var st=new Da(null);return Ye.getNode().forEachChild(dl,function(Wt,cn){st=st.set(new Ie(Wt),cn)}),ca(E,S,I,st,Q,le,Fe,ye)}return S}var pt=new Da(null);return V.foreach(function(Wt,cn){var Mn=zn(I,Wt);Ye.isCompleteForPath(Mn)&&(pt=pt.set(Wt,Ye.getNode().getChild(Mn)))}),ca(E,S,I,pt,Q,le,Fe,ye)}(E,S,pt.path,pt.affectedTree,V,Q,le)}else{if(I.type!==Ys.LISTEN_COMPLETE)throw(0,Ee.g5)("Unknown operation type: "+I.type);ye=function(E,S,I,V,Q){var le=S.serverCache;return Nr(E,Lr(S,le.getNode(),le.isFullyInitialized()||ti(I),le.isFiltered()),I,V,Cl,Q)}(E,S,I.path,V,le)}var Wt=le.getChanges();return function(E,S,I){var V=S.eventCache;if(V.isFullyInitialized()){var Q=V.getNode().isLeafNode()||V.getNode().isEmpty(),le=zc(E);(I.length>0||!E.eventCache.isFullyInitialized()||Q&&!V.getNode().equals(le)||!V.getNode().getPriority().equals(le.getPriority()))&&I.push(nd(zc(S)))}}(S,ye,Wt),{viewCache:ye,changes:Wt}}(E.processor_,Q,S,I,V);return function(E,S){(0,Ee.hu)(S.eventCache.getNode().isIndexed(E.filter.getIndex()),"Event snap not indexed"),(0,Ee.hu)(S.serverCache.getNode().isIndexed(E.filter.getIndex()),"Server snap not indexed")}(E.processor_,le.viewCache),(0,Ee.hu)(le.viewCache.serverCache.isFullyInitialized()||!Q.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),E.viewCache_=le.viewCache,Ch(E,le.changes,le.viewCache.eventCache.getNode(),null)}function Ch(E,S,I,V){return function(E,S,I,V){var Q=[],le=[];return S.forEach(function(ye){"child_changed"===ye.type&&E.index_.indexedValueChanged(ye.oldSnap,ye.snapshotNode)&&le.push(function(E,S){return{type:"child_moved",snapshotNode:S,childName:E}}(ye.childName,ye.snapshotNode))}),Ds(E,Q,"child_removed",S,V,I),Ds(E,Q,"child_added",S,V,I),Ds(E,Q,"child_moved",le,V,I),Ds(E,Q,"child_changed",S,V,I),Ds(E,Q,"value",S,V,I),Q}(E.eventGenerator_,S,I,V?[V]:E.eventRegistrations_)}var op,w,sp=function(){this.views=new Map};function qc(E,S,I,V){var Q,le,ye=S.source.queryId;if(null!==ye){var Fe=E.views.get(ye);return(0,Ee.hu)(null!=Fe,"SyncTree gave us an op for an invalid query."),Ou(Fe,S,I,V)}var Ye=[];try{for(var st=(0,k.XA)(E.views.values()),pt=st.next();!pt.done;pt=st.next())Ye=Ye.concat(Ou(Fe=pt.value,S,I,V))}catch(Wt){Q={error:Wt}}finally{try{pt&&!pt.done&&(le=st.return)&&le.call(st)}finally{if(Q)throw Q.error}}return Ye}function gs(E,S,I,V,Q){var ye=E.views.get(S._queryIdentifier);if(!ye){var Fe=Du(I,Q?V:null),Ye=!1;Fe?Ye=!0:V instanceof Ii?(Fe=Nf(I,V),Ye=!1):(Fe=Ii.EMPTY_NODE,Ye=!1);var st=Ho(new vl(Fe,Ye,!1),new vl(V,Q,!1));return new wh(S,st)}return ye}function zf(E){var S,I,V=[];try{for(var Q=(0,k.XA)(E.views.values()),le=Q.next();!le.done;le=Q.next()){var ye=le.value;ye.query._queryParams.loadsAllData()||V.push(ye)}}catch(Fe){S={error:Fe}}finally{try{le&&!le.done&&(I=Q.return)&&I.call(Q)}finally{if(S)throw S.error}}return V}function Zc(E,S){var I,V,Q=null;try{for(var le=(0,k.XA)(E.views.values()),ye=le.next();!ye.done;ye=le.next())Q=Q||Ru(ye.value,S)}catch(Ye){I={error:Ye}}finally{try{ye&&!ye.done&&(V=le.return)&&V.call(le)}finally{if(I)throw I.error}}return Q}function ld(E,S){return S._queryParams.loadsAllData()?f(E):E.views.get(S._queryIdentifier)}function ap(E,S){return null!=ld(E,S)}function P(E){return null!=f(E)}function f(E){var S,I;try{for(var V=(0,k.XA)(E.views.values()),Q=V.next();!Q.done;Q=V.next()){var le=Q.value;if(le.query._queryParams.loadsAllData())return le}}catch(ye){S={error:ye}}finally{try{Q&&!Q.done&&(I=V.return)&&I.call(V)}finally{if(S)throw S.error}}return null}var q=1,ee=function(S){this.listenProvider_=S,this.syncPointTree_=new Da(null),this.pendingWriteTree_={visibleWrites:fs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function se(E,S,I,V,Q){return function(E,S,I,V,Q){(0,Ee.hu)(V>E.lastWriteId,"Stacking an older write on top of newer ones"),void 0===Q&&(Q=!0),E.allWrites.push({path:S,snap:I,writeId:V,visible:Q}),Q&&(E.visibleWrites=bl(E.visibleWrites,S,I)),E.lastWriteId=V}(E.pendingWriteTree_,S,I,V,Q),Q?vt(E,new _l({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},S,I)):[]}function me(E,S,I){void 0===I&&(I=!1);var V=function(E,S){for(var I=0;I<E.allWrites.length;I++){var V=E.allWrites[I];if(V.writeId===S)return V}return null}(E.pendingWriteTree_,S);if(function(E,S){var I=E.allWrites.findIndex(function(st){return st.writeId===S});(0,Ee.hu)(I>=0,"removeWrite called with nonexistent writeId.");var V=E.allWrites[I];E.allWrites.splice(I,1);for(var Q=V.visible,le=!1,ye=E.allWrites.length-1;Q&&ye>=0;){var Fe=E.allWrites[ye];Fe.visible&&(ye>=I&&Lf(Fe,V.path)?Q=!1:Wi(V.path,Fe.path)&&(le=!0)),ye--}return!!Q&&(le?(function(E){E.visibleWrites=Qr(E.allWrites,Zp,Je()),E.lastWriteId=E.allWrites.length>0?E.allWrites[E.allWrites.length-1].writeId:-1}(E),!0):(V.snap?E.visibleWrites=vh(E.visibleWrites,V.path):ri(V.children,function(st){E.visibleWrites=vh(E.visibleWrites,zn(V.path,st))}),!0))}(E.pendingWriteTree_,S)){var le=new Da(null);return null!=V.snap?le=le.set(Je(),!0):ri(V.children,function(ye){le=le.set(new Ie(ye),!0)}),vt(E,new Qd(V.path,le,I))}return[]}function Ce(E,S,I){return vt(E,new _l({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},S,I))}function $e(E,S,I,V){var Q=S._path,le=E.syncPointTree_.get(Q),ye=[];if(le&&("default"===S._queryIdentifier||ap(le,S))){var Fe=function(E,S,I,V){var Q,le,ye=S._queryIdentifier,Fe=[],Ye=[],st=P(E);if("default"===ye)try{for(var pt=(0,k.XA)(E.views.entries()),Wt=pt.next();!Wt.done;Wt=pt.next()){var Wn,cn=(0,k.CR)(Wt.value,2),Mn=cn[0];Ye=Ye.concat(mc(Wn=cn[1],I,V)),jc(Wn)&&(E.views.delete(Mn),Wn.query._queryParams.loadsAllData()||Fe.push(Wn.query))}}catch(Pi){Q={error:Pi}}finally{try{Wt&&!Wt.done&&(le=pt.return)&&le.call(pt)}finally{if(Q)throw Q.error}}else(Wn=E.views.get(ye))&&(Ye=Ye.concat(mc(Wn,I,V)),jc(Wn)&&(E.views.delete(ye),Wn.query._queryParams.loadsAllData()||Fe.push(Wn.query)));return st&&!P(E)&&Fe.push(new((0,Ee.hu)(op,"Reference.ts has not been loaded"),op)(S._repo,S._path)),{removed:Fe,events:Ye}}(le,S,I,V);(function(E){return 0===E.views.size})(le)&&(E.syncPointTree_=E.syncPointTree_.remove(Q));var Ye=Fe.removed;ye=Fe.events;var st=-1!==Ye.findIndex(function(Jo){return Jo._queryParams.loadsAllData()}),pt=E.syncPointTree_.findOnPath(Q,function(Jo,Al){return P(Al)});if(st&&!pt){var Wt=E.syncPointTree_.subtree(Q);if(!Wt.isEmpty())for(var cn=function(E){return E.fold(function(S,I,V){if(I&&P(I))return[f(I)];var le=[];return I&&(le=zf(I)),ri(V,function(ye,Fe){le=le.concat(Fe)}),le})}(Wt),Mn=0;Mn<cn.length;++Mn){var Wn=cn[Mn],Pi=Wn.query,yi=en(E,Wn);E.listenProvider_.startListening(kn(Pi),sn(E,Pi),yi.hashFn,yi.onComplete)}}!pt&&Ye.length>0&&!V&&(st?E.listenProvider_.stopListening(kn(S),null):Ye.forEach(function(Jo){var Al=E.queryToTagMap.get(un(Jo));E.listenProvider_.stopListening(kn(Jo),Al)})),function(E,S){for(var I=0;I<S.length;++I){var V=S[I];if(!V._queryParams.loadsAllData()){var Q=un(V),le=E.queryToTagMap.get(Q);E.queryToTagMap.delete(Q),E.tagToQueryMap.delete(le)}}}(E,Ye)}return ye}function Ue(E,S,I){var V=S._path,Q=null,le=!1;E.syncPointTree_.foreachOnPath(V,function(Pi,yi){var Qi=ar(Pi,V);Q=Q||Zc(yi,Qi),le=le||P(yi)});var Fe,ye=E.syncPointTree_.get(V);ye?(le=le||P(ye),Q=Q||Zc(ye,Je())):(ye=new sp,E.syncPointTree_=E.syncPointTree_.set(V,ye)),null!=Q?Fe=!0:(Fe=!1,Q=Ii.EMPTY_NODE,E.syncPointTree_.subtree(V).foreachChild(function(Pi,yi){var Qi=Zc(yi,Je());Qi&&(Q=Q.updateImmediateChild(Pi,Qi))}));var st=ap(ye,S);if(!st&&!S._queryParams.loadsAllData()){var pt=un(S);(0,Ee.hu)(!E.queryToTagMap.has(pt),"View does not exist, but we have a tag");var Wt=q++;E.queryToTagMap.set(pt,Wt),E.tagToQueryMap.set(Wt,pt)}var Mn=function(E,S,I,V,Q,le){var ye=gs(E,S,V,Q,le);return E.views.has(S._queryIdentifier)||E.views.set(S._queryIdentifier,ye),function(E,S){E.eventRegistrations_.push(S)}(ye,I),function(E,S){var I=E.viewCache_.eventCache,V=[];return I.getNode().isLeafNode()||I.getNode().forEachChild(ui,function(le,ye){V.push(Ua(le,ye))}),I.isFullyInitialized()&&V.push(nd(I.getNode())),Ch(E,V,I.getNode(),S)}(ye,I)}(ye,S,I,dc(E.pendingWriteTree_,V),Q,Fe);if(!st&&!le){var Wn=ld(ye,S);Mn=Mn.concat(function(E,S,I){var V=S._path,Q=sn(E,S),le=en(E,I),ye=E.listenProvider_.startListening(kn(S),Q,le.hashFn,le.onComplete),Fe=E.syncPointTree_.subtree(V);if(Q)(0,Ee.hu)(!P(Fe.value),"If we're adding a query, it shouldn't be shadowed");else for(var Ye=Fe.fold(function(Wt,cn,Mn){if(!ti(Wt)&&cn&&P(cn))return[f(cn).query];var Wn=[];return cn&&(Wn=Wn.concat(zf(cn).map(function(Pi){return Pi.query}))),ri(Mn,function(Pi,yi){Wn=Wn.concat(yi)}),Wn}),st=0;st<Ye.length;++st){var pt=Ye[st];E.listenProvider_.stopListening(kn(pt),sn(E,pt))}return ye}(E,S,Wn))}return Mn}function tt(E,S,I){var Q=E.pendingWriteTree_,le=E.syncPointTree_.findOnPath(S,function(ye,Fe){var st=Zc(Fe,ar(ye,S));if(st)return st});return ad(Q,S,le,I,!0)}function vt(E,S){return rt(S,E.syncPointTree_,null,dc(E.pendingWriteTree_,Je()))}function rt(E,S,I,V){if(ti(E.path))return ht(E,S,I,V);var Q=S.get(Je());null==I&&null!=Q&&(I=Zc(Q,Je()));var le=[],ye=Nt(E.path),Fe=E.operationForChild(ye),Ye=S.children.get(ye);if(Ye&&Fe){var st=I?I.getImmediateChild(ye):null,pt=Iu(V,ye);le=le.concat(rt(Fe,Ye,st,pt))}return Q&&(le=le.concat(qc(Q,E,V,I))),le}function ht(E,S,I,V){var Q=S.get(Je());null==I&&null!=Q&&(I=Zc(Q,Je()));var le=[];return S.children.inorderTraversal(function(ye,Fe){var Ye=I?I.getImmediateChild(ye):null,st=Iu(V,ye),pt=E.operationForChild(ye);pt&&(le=le.concat(ht(pt,Fe,Ye,st)))}),Q&&(le=le.concat(qc(Q,E,V,I))),le}function en(E,S){var I=S.query,V=sn(E,I);return{hashFn:function(){return(function(E){return E.viewCache_.serverCache.getNode()}(S)||Ii.EMPTY_NODE).hash()},onComplete:function(Q){if("ok"===Q)return V?function(E,S,I){var V=ut(E,I);if(V){var Q=En(V),le=Q.path,ye=Q.queryId,Fe=ar(le,S);return bn(E,le,new Aa(Mu(ye),Fe))}return[]}(E,I._path,V):function(E,S){return vt(E,new Aa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},S))}(E,I._path);var le=function(E,S){var I="Unknown Error";"too_big"===E?I="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===E?I="Client doesn't have permission to access the desired data.":"unavailable"===E&&(I="The service is unavailable");var V=new Error(E+" at "+S._path.toString()+": "+I);return V.code=E.toUpperCase(),V}(Q,I);return $e(E,I,null,le)}}}function sn(E,S){var I=un(S);return E.queryToTagMap.get(I)}function un(E){return E._path.toString()+"$"+E._queryIdentifier}function ut(E,S){return E.tagToQueryMap.get(S)}function En(E){var S=E.indexOf("$");return(0,Ee.hu)(-1!==S&&S<E.length-1,"Bad queryKey."),{queryId:E.substr(S+1),path:new Ie(E.substr(0,S))}}function bn(E,S,I){var V=E.syncPointTree_.get(S);return(0,Ee.hu)(V,"Missing sync point for query tag that we're tracking"),qc(V,I,dc(E.pendingWriteTree_,S),null)}function kn(E){return E._queryParams.loadsAllData()&&!E._queryParams.isDefault()?new((0,Ee.hu)(w,"Reference.ts has not been loaded"),w)(E._repo,E._path):E}var lr=function(){function E(S){this.node_=S}return E.prototype.getImmediateChild=function(S){return new E(this.node_.getImmediateChild(S))},E.prototype.node=function(){return this.node_},E}(),yr=function(){function E(S,I){this.syncTree_=S,this.path_=I}return E.prototype.getImmediateChild=function(S){var I=zn(this.path_,S);return new E(this.syncTree_,I)},E.prototype.node=function(){return tt(this.syncTree_,this.path_)},E}(),zi=function(E,S,I){return E&&"object"==typeof E?((0,Ee.hu)(".sv"in E,"Unexpected leaf node or priority contents"),"string"==typeof E[".sv"]?gr(E[".sv"],S,I):"object"==typeof E[".sv"]?po(E[".sv"],S):void(0,Ee.hu)(!1,"Unexpected server value: "+JSON.stringify(E,null,2))):E},gr=function(E,S,I){switch(E){case"timestamp":return I.timestamp;default:(0,Ee.hu)(!1,"Unexpected server value: "+E)}},po=function(E,S,I){E.hasOwnProperty("increment")||(0,Ee.hu)(!1,"Unexpected server value: "+JSON.stringify(E,null,2));var V=E.increment;"number"!=typeof V&&(0,Ee.hu)(!1,"Unexpected increment value: "+V);var Q=S.node();if((0,Ee.hu)(null!=Q,"Expected ChildrenNode.EMPTY_NODE for nulls"),!Q.isLeafNode())return V;var ye=Q.getValue();return"number"!=typeof ye?V:ye+V},ua=function(E,S,I,V){return Go(S,new yr(I,E),V)},xs=function(E,S,I){return Go(E,new lr(S),I)};function Go(E,S,I){var le,V=E.getPriority().val(),Q=zi(V,S.getImmediateChild(".priority"),I);if(E.isLeafNode()){var ye=E,Fe=zi(ye.getValue(),S,I);return Fe!==ye.getValue()||Q!==ye.getPriority().val()?new $i(Fe,oo(Q)):E}var Ye=E;return le=Ye,Q!==Ye.getPriority().val()&&(le=le.updatePriority(new $i(Q))),Ye.forEachChild(ui,function(st,pt){var Wt=Go(pt,S.getImmediateChild(st),I);Wt!==pt&&(le=le.updateImmediateChild(st,Wt))}),le}var Qo=function(S,I,V){void 0===S&&(S=""),void 0===I&&(I=null),void 0===V&&(V={children:{},childCount:0}),this.name=S,this.parent=I,this.node=V};function ha(E,S){for(var I=S instanceof Ie?S:new Ie(S),V=E,Q=Nt(I);null!==Q;){var le=(0,Ee.DV)(V.node.children,Q)||{children:{},childCount:0};V=new Qo(Q,V,le),Q=Nt(I=Xt(I))}return V}function wi(E){return E.node.value}function zr(E,S){E.node.value=S,qs(E)}function hr(E){return E.node.childCount>0}function fo(E,S){ri(E.node.children,function(I,V){S(new Qo(I,E,V))})}function Jr(E,S,I,V){I&&!V&&S(E),fo(E,function(Q){Jr(Q,S,!0,V)}),I&&V&&S(E)}function Rs(E){return new Ie(null===E.parent?E.name:Rs(E.parent)+"/"+E.name)}function qs(E){null!==E.parent&&function(E,S,I){var V=function(E){return void 0===wi(E)&&!hr(E)}(I),Q=(0,Ee.r3)(E.node.children,S);V&&Q?(delete E.node.children[S],E.node.childCount--,qs(E)):!V&&!Q&&(E.node.children[S]=I.node,E.node.childCount++,qs(E))}(E.parent,E.name,E)}var Sl=/[\[\].#$\/\u0000-\u001F\u007F]/,Wc=/[\[\].#$\u0000-\u001F\u007F]/,Ws=10485760,cd=function(E){return"string"==typeof E&&0!==E.length&&!Sl.test(E)},$c=function(E){return"string"==typeof E&&0!==E.length&&!Wc.test(E)},mo=function(E){return null===E||"string"==typeof E||"number"==typeof E&&!Gt(E)||E&&"object"==typeof E&&(0,Ee.r3)(E,".sv")},Ia=function(E,S,I,V){V&&void 0===S||Fu((0,Ee.gK)(E,"value"),S,I)},Fu=function(E,S,I){var V=I instanceof Ie?new Ro(I,E):I;if(void 0===S)throw new Error(E+"contains undefined "+ro(V));if("function"==typeof S)throw new Error(E+"contains a function "+ro(V)+" with contents = "+S.toString());if(Gt(S))throw new Error(E+"contains "+S.toString()+" "+ro(V));if("string"==typeof S&&S.length>Ws/3&&(0,Ee.ug)(S)>Ws)throw new Error(E+"contains a string greater than "+Ws+" utf8 bytes "+ro(V)+" ('"+S.substring(0,50)+"...')");if(S&&"object"==typeof S){var Q=!1,le=!1;if(ri(S,function(ye,Fe){if(".value"===ye)Q=!0;else if(".priority"!==ye&&".sv"!==ye&&(le=!0,!cd(ye)))throw new Error(E+" contains an invalid key ("+ye+") "+ro(V)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(E,S){E.parts_.length>0&&(E.byteLength_+=1),E.parts_.push(S),E.byteLength_+=(0,Ee.ug)(S),Hs(E)})(V,ye),Fu(E,Fe,V),function(E){var S=E.parts_.pop();E.byteLength_-=(0,Ee.ug)(S),E.parts_.length>0&&(E.byteLength_-=1)}(V)}),Q&&le)throw new Error(E+' contains ".value" child '+ro(V)+" in addition to actual children.")}},Lu=function(E,S,I,V){if(!V||void 0!==S){var Q=(0,Ee.gK)(E,"values");if(!S||"object"!=typeof S||Array.isArray(S))throw new Error(Q+" must be an object containing the children to replace.");var le=[];ri(S,function(ye,Fe){var Ye=new Ie(ye);if(Fu(Q,Fe,zn(I,Ye)),".priority"===gn(Ye)&&!mo(Fe))throw new Error(Q+"contains an invalid value for '"+Ye.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");le.push(Ye)}),function(E,S){var I,V;for(I=0;I<S.length;I++)for(var Q=Kn(V=S[I]),le=0;le<Q.length;le++)if((".priority"!==Q[le]||le!==Q.length-1)&&!cd(Q[le]))throw new Error(E+"contains an invalid key ("+Q[le]+") in path "+V.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');S.sort(vo);var ye=null;for(I=0;I<S.length;I++){if(V=S[I],null!==ye&&Wi(ye,V))throw new Error(E+"contains a path "+ye.toString()+" that is ancestor of another path "+V.toString());ye=V}}(Q,le)}},Yl=function(E,S,I){if(!I||void 0!==S){if(Gt(S))throw new Error((0,Ee.gK)(E,"priority")+"is "+S.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mo(S))throw new Error((0,Ee.gK)(E,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Av=function(E,S,I){if(!I||void 0!==S)switch(S){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Ee.gK)(E,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Vf=function(E,S,I,V){if(!(V&&void 0===I||cd(I)))throw new Error((0,Ee.gK)(E,S)+'was an invalid key = "'+I+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Xc=function(E,S,I,V){if(!(V&&void 0===I||$c(I)))throw new Error((0,Ee.gK)(E,S)+'was an invalid path = "'+I+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Os=function(E,S){if(".info"===Nt(S))throw new Error(E+" failed = Can't modify data under /.info/")},Xp=function(E,S){var I=S.path.toString();if("string"!=typeof S.repoInfo.host||0===S.repoInfo.host.length||!cd(S.repoInfo.namespace)&&"localhost"!==S.repoInfo.host.split(":")[0]||0!==I.length&&!function(E){return E&&(E=E.replace(/^\/*\.info(\/|$)/,"/")),$c(E)}(I))throw new Error((0,Ee.gK)(E,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Uf=function(E,S,I,V){if((!V||void 0!==I)&&"boolean"!=typeof I)throw new Error((0,Ee.gK)(E,S)+"must be a boolean.")},ws=function(){this.eventLists_=[],this.recursionDepth_=0};function pa(E,S){for(var I=null,V=0;V<S.length;V++){var Q=S[V],le=Q.getPath();null!==I&&!Mr(le,I.path)&&(E.eventLists_.push(I),I=null),null===I&&(I={events:[],path:le}),I.events.push(Q)}I&&E.eventLists_.push(I)}function Eh(E,S,I){pa(E,I),Cs(E,function(V){return Mr(V,S)})}function Fo(E,S,I){pa(E,I),Cs(E,function(V){return Wi(V,S)||Wi(S,V)})}function Cs(E,S){E.recursionDepth_++;for(var I=!0,V=0;V<E.eventLists_.length;V++){var Q=E.eventLists_[V];Q&&(S(Q.path)?(ud(E.eventLists_[V]),E.eventLists_[V]=null):I=!1)}I&&(E.eventLists_=[]),E.recursionDepth_--}function ud(E){for(var S=0;S<E.events.length;S++){var I=E.events[S];if(null!==I){E.events[S]=null;var V=I.getEventRunner();Mt&&Vn("event: "+I.toString()),Fr(V)}}}var Hf="repo_interrupt",og=function(){function E(S,I,V,Q){this.repoInfo_=S,this.forceRestClient_=I,this.authTokenProvider_=V,this.appCheckProvider_=Q,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ws,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sa(),this.transactionQueueTree_=new Qo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return E.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},E}();function jo(E){var I=E.infoData_.getNode(new Ie(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+I}function gc(E){return function(E){return(E=E||{}).timestamp=E.timestamp||(new Date).getTime(),E}({timestamp:jo(E)})}function Fs(E,S,I,V,Q){E.dataUpdateCount++;var le=new Ie(S);I=E.interceptServerDataCallback_?E.interceptServerDataCallback_(S,I):I;var ye=[];if(Q)if(V){var Fe=(0,Ee.UI)(I,function(cn){return oo(cn)});ye=function(E,S,I,V){var Q=ut(E,V);if(Q){var le=En(Q),ye=le.path,Fe=le.queryId,Ye=ar(ye,S),st=Da.fromObject(I);return bn(E,ye,new yl(Mu(Fe),Ye,st))}return[]}(E.serverSyncTree_,le,Fe,Q)}else{var Ye=oo(I);ye=function(E,S,I,V){var Q=ut(E,V);if(null!=Q){var le=En(Q),ye=le.path,Fe=le.queryId,Ye=ar(ye,S);return bn(E,ye,new _l(Mu(Fe),Ye,I))}return[]}(E.serverSyncTree_,le,Ye,Q)}else if(V){var st=(0,Ee.UI)(I,function(cn){return oo(cn)});ye=function(E,S,I){var V=Da.fromObject(I);return vt(E,new yl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},S,V))}(E.serverSyncTree_,le,st)}else{var pt=oo(I);ye=Ce(E.serverSyncTree_,le,pt)}var Wt=le;ye.length>0&&(Wt=Bu(E,le)),Fo(E.eventQueue_,Wt,ye)}function Nu(E,S){yc(E,"connected",S),!1===S&&function(E){Gi(E,"onDisconnectEvents");var S=gc(E),I=sa();$o(E.onDisconnect_,Je(),function(Q,le){var ye=ua(Q,le,E.serverSyncTree_,S);gl(I,Q,ye)});var V=[];$o(I,Je(),function(Q,le){V=V.concat(Ce(E.serverSyncTree_,Q,le));var ye=Qp(E,Q);Bu(E,ye)}),E.onDisconnect_=sa(),Fo(E.eventQueue_,Je(),V)}(E)}function yc(E,S,I){var V=new Ie("/.info/"+S),Q=oo(I);E.infoData_.updateSnapshot(V,Q);var le=Ce(E.infoSyncTree_,V,Q);Fo(E.eventQueue_,V,le)}function Th(E){return E.nextWriteId_++}function Mh(E,S,I,V,Q){Gi(E,"set",{path:S.toString(),value:I,priority:V});var le=gc(E),ye=oo(I,V),Fe=tt(E.serverSyncTree_,S),Ye=xs(ye,Fe,le),st=Th(E),pt=se(E.serverSyncTree_,S,Ye,st,!0);pa(E.eventQueue_,pt),E.server_.put(S.toString(),ye.val(!0),function(cn,Mn){var Wn="ok"===cn;Wn||nr("set at "+S+" failed: "+cn);var Pi=me(E.serverSyncTree_,st,!Wn);Fo(E.eventQueue_,S,Pi),Ya(0,Q,cn,Mn)});var Wt=Qp(E,S);Bu(E,Wt),Fo(E.eventQueue_,Wt,[])}function Yf(E,S,I){E.server_.onDisconnectCancel(S.toString(),function(V,Q){"ok"===V&&so(E.onDisconnect_,S),Ya(0,I,V,Q)})}function ql(E,S,I,V){var Q=oo(I);E.server_.onDisconnectPut(S.toString(),Q.val(!0),function(le,ye){"ok"===le&&gl(E.onDisconnect_,S,Q),Ya(0,V,le,ye)})}function Er(E,S,I){var V;V=".info"===Nt(S._path)?$e(E.infoSyncTree_,S,I):$e(E.serverSyncTree_,S,I),Eh(E.eventQueue_,S._path,V)}function qf(E){E.persistentConnection_&&E.persistentConnection_.interrupt(Hf)}function Gi(E){for(var S=[],I=1;I<arguments.length;I++)S[I-1]=arguments[I];var V="";E.persistentConnection_&&(V=E.persistentConnection_.id+":"),Vn.apply(void 0,(0,k.ev)([V],(0,k.CR)(S)))}function Ya(E,S,I,V){S&&Fr(function(){if("ok"===I)S(null);else{var Q=(I||"error").toUpperCase(),le=Q;V&&(le+=": "+V);var ye=new Error(le);ye.code=Q,S(ye)}})}function El(E,S,I){return tt(E.serverSyncTree_,S,I)||Ii.EMPTY_NODE}function vc(E,S){if(void 0===S&&(S=E.transactionQueueTree_),S||Wl(E,S),wi(S)){var I=sg(E,S);(0,Ee.hu)(I.length>0,"Sending zero length transaction queue"),I.every(function(Q){return 0===Q.status})&&function(E,S,I){for(var V=I.map(function(cn){return cn.currentWriteId}),Q=El(E,S,V),le=Q,ye=Q.hash(),Fe=0;Fe<I.length;Fe++){var Ye=I[Fe];(0,Ee.hu)(0===Ye.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ye.status=1,Ye.retryCount++;var st=ar(S,Ye.path);le=le.updateChild(st,Ye.currentOutputSnapshotRaw)}var pt=le.val(!0),Wt=S;E.server_.put(Wt.toString(),pt,function(cn){Gi(E,"transaction put response",{path:Wt.toString(),status:cn});var Mn=[];if("ok"===cn){for(var Wn=[],Pi=function(Qi){I[Qi].status=2,Mn=Mn.concat(me(E.serverSyncTree_,I[Qi].currentWriteId)),I[Qi].onComplete&&Wn.push(function(){return I[Qi].onComplete(null,!0,I[Qi].currentOutputSnapshotResolved)}),I[Qi].unwatcher()},yi=0;yi<I.length;yi++)Pi(yi);for(Wl(E,ha(E.transactionQueueTree_,S)),vc(E,E.transactionQueueTree_),Fo(E.eventQueue_,S,Mn),yi=0;yi<Wn.length;yi++)Fr(Wn[yi])}else{if("datastale"===cn)for(yi=0;yi<I.length;yi++)I[yi].status=3===I[yi].status?4:0;else for(nr("transaction at "+Wt.toString()+" failed: "+cn),yi=0;yi<I.length;yi++)I[yi].status=4,I[yi].abortReason=cn;Bu(E,S)}},ye)}(E,Rs(S),I)}else hr(S)&&fo(S,function(Q){vc(E,Q)})}function Bu(E,S){var I=Zl(E,S),V=Rs(I);return function(E,S,I){if(0!==S.length){for(var V=[],Q=[],ye=S.filter(function(st){return 0===st.status}).map(function(st){return st.currentWriteId}),Fe=function(st){var Mn,pt=S[st],Wt=ar(I,pt.path),cn=!1;if((0,Ee.hu)(null!==Wt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===pt.status)cn=!0,Mn=pt.abortReason,Q=Q.concat(me(E.serverSyncTree_,pt.currentWriteId,!0));else if(0===pt.status)if(pt.retryCount>=25)cn=!0,Mn="maxretry",Q=Q.concat(me(E.serverSyncTree_,pt.currentWriteId,!0));else{var Wn=El(E,pt.path,ye);pt.currentInputSnapshot=Wn;var Pi=S[st].update(Wn.val());if(void 0!==Pi){Fu("transaction failed: Data returned ",Pi,pt.path);var yi=oo(Pi);"object"==typeof Pi&&null!=Pi&&(0,Ee.r3)(Pi,".priority")||(yi=yi.updatePriority(Wn.getPriority()));var Jo=pt.currentWriteId,Al=gc(E),bd=xs(yi,Wn,Al);pt.currentOutputSnapshotRaw=yi,pt.currentOutputSnapshotResolved=bd,pt.currentWriteId=Th(E),ye.splice(ye.indexOf(Jo),1),Q=(Q=Q.concat(se(E.serverSyncTree_,pt.path,bd,pt.currentWriteId,pt.applyLocally))).concat(me(E.serverSyncTree_,Jo,!0))}else cn=!0,Mn="nodata",Q=Q.concat(me(E.serverSyncTree_,pt.currentWriteId,!0))}Fo(E.eventQueue_,I,Q),Q=[],cn&&(S[st].status=2,setTimeout(S[st].unwatcher,Math.floor(0)),S[st].onComplete&&V.push("nodata"===Mn?function(){return S[st].onComplete(null,!1,S[st].currentInputSnapshot)}:function(){return S[st].onComplete(new Error(Mn),!1,null)}))},Ye=0;Ye<S.length;Ye++)Fe(Ye);for(Wl(E,E.transactionQueueTree_),Ye=0;Ye<V.length;Ye++)Fr(V[Ye]);vc(E,E.transactionQueueTree_)}}(E,sg(E,I),V),V}function Zl(E,S){var I,V=E.transactionQueueTree_;for(I=Nt(S);null!==I&&void 0===wi(V);)V=ha(V,I),I=Nt(S=Xt(S));return V}function sg(E,S){var I=[];return ag(E,S,I),I.sort(function(V,Q){return V.order-Q.order}),I}function ag(E,S,I){var V=wi(S);if(V)for(var Q=0;Q<V.length;Q++)I.push(V[Q]);fo(S,function(le){ag(E,le,I)})}function Wl(E,S){var I=wi(S);if(I){for(var V=0,Q=0;Q<I.length;Q++)2!==I[Q].status&&(I[V]=I[Q],V++);I.length=V,zr(S,I.length>0?I:void 0)}fo(S,function(le){Wl(E,le)})}function Qp(E,S){var I=Rs(Zl(E,S)),V=ha(E.transactionQueueTree_,S);return function(E,S,I){for(var V=E.parent;null!==V;){if(S(V))return!0;V=V.parent}}(V,function(Q){ss(E,Q)}),ss(E,V),Jr(V,function(Q){ss(E,Q)}),I}function ss(E,S){var I=wi(S);if(I){for(var V=[],Q=[],le=-1,ye=0;ye<I.length;ye++)3===I[ye].status||(1===I[ye].status?((0,Ee.hu)(le===ye-1,"All SENT items should be at beginning of queue."),le=ye,I[ye].status=3,I[ye].abortReason="set"):((0,Ee.hu)(0===I[ye].status,"Unexpected transaction status in abort"),I[ye].unwatcher(),Q=Q.concat(me(E.serverSyncTree_,I[ye].currentWriteId,!0)),I[ye].onComplete&&V.push(I[ye].onComplete.bind(null,new Error("set"),!1,null))));for(-1===le?zr(S,void 0):I.length=le+1,Fo(E.eventQueue_,Rs(S),Q),ye=0;ye<V.length;ye++)Fr(V[ye])}}var Jp=function(E,S){var I=cg(E),V=I.namespace;return"firebase.com"===I.domain&&tr(I.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!V||"undefined"===V)&&"localhost"!==I.domain&&tr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),I.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&nr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new jr(I.host,I.secure,V,S,"ws"===I.scheme||"wss"===I.scheme,"",V!==I.subdomain),path:new Ie(I.pathString)}},cg=function(E){var S="",I="",V="",Q="",le="",ye=!0,Fe="https",Ye=443;if("string"==typeof E){var st=E.indexOf("//");st>=0&&(Fe=E.substring(0,st-1),E=E.substring(st+2));var pt=E.indexOf("/");-1===pt&&(pt=E.length);var Wt=E.indexOf("?");-1===Wt&&(Wt=E.length),S=E.substring(0,Math.min(pt,Wt)),pt<Wt&&(Q=function(E){for(var S="",I=E.split("/"),V=0;V<I.length;V++)if(I[V].length>0){var Q=I[V];try{Q=decodeURIComponent(Q.replace(/\+/g," "))}catch(le){}S+="/"+Q}return S}(E.substring(pt,Wt)));var cn=function(E){var S,I,V={};"?"===E.charAt(0)&&(E=E.substring(1));try{for(var Q=(0,k.XA)(E.split("&")),le=Q.next();!le.done;le=Q.next()){var ye=le.value;if(0!==ye.length){var Fe=ye.split("=");2===Fe.length?V[decodeURIComponent(Fe[0])]=decodeURIComponent(Fe[1]):nr("Invalid query segment '"+ye+"' in query '"+E+"'")}}}catch(Ye){S={error:Ye}}finally{try{le&&!le.done&&(I=Q.return)&&I.call(Q)}finally{if(S)throw S.error}}return V}(E.substring(Math.min(E.length,Wt)));(st=S.indexOf(":"))>=0?(ye="https"===Fe||"wss"===Fe,Ye=parseInt(S.substring(st+1),10)):st=S.length;var Mn=S.slice(0,st);if("localhost"===Mn.toLowerCase())I="localhost";else if(Mn.split(".").length<=2)I=Mn;else{var Wn=S.indexOf(".");V=S.substring(0,Wn).toLowerCase(),I=S.substring(Wn+1),le=V}"ns"in cn&&(le=cn.ns)}return{host:S,port:Ye,domain:I,subdomain:V,secure:ye,scheme:Fe,pathString:Q,namespace:le}},ug=function(){function E(S,I,V,Q){this.eventType=S,this.eventRegistration=I,this.snapshot=V,this.prevName=Q}return E.prototype.getPath=function(){var S=this.snapshot.ref;return"value"===this.eventType?S._path:S.parent._path},E.prototype.getEventType=function(){return this.eventType},E.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},E.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,Ee.Pz)(this.snapshot.exportVal())},E}(),B_=function(){function E(S,I,V){this.eventRegistration=S,this.error=I,this.path=V}return E.prototype.getPath=function(){return this.path},E.prototype.getEventType=function(){return"cancel"},E.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},E.prototype.toString=function(){return this.path.toString()+":cancel"},E}(),fa=function(){function E(S,I){this.snapshotCallback=S,this.cancelCallback=I}return E.prototype.onValue=function(S,I){this.snapshotCallback.call(null,S,I)},E.prototype.onCancel=function(S){return(0,Ee.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,S)},Object.defineProperty(E.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),E.prototype.matches=function(S){return this.snapshotCallback===S.snapshotCallback||this.snapshotCallback.userCallback===S.snapshotCallback.userCallback&&this.snapshotCallback.context===S.snapshotCallback.context},E}(),hg=function(){function E(S,I){this._repo=S,this._path=I}return E.prototype.cancel=function(){var S=new Ee.BH;return Yf(this._repo,this._path,S.wrapCallback(function(){})),S.promise},E.prototype.remove=function(){Os("OnDisconnect.remove",this._path);var S=new Ee.BH;return ql(this._repo,this._path,null,S.wrapCallback(function(){})),S.promise},E.prototype.set=function(S){Os("OnDisconnect.set",this._path),Ia("OnDisconnect.set",S,this._path,!1);var I=new Ee.BH;return ql(this._repo,this._path,S,I.wrapCallback(function(){})),I.promise},E.prototype.setWithPriority=function(S,I){Os("OnDisconnect.setWithPriority",this._path),Ia("OnDisconnect.setWithPriority",S,this._path,!1),Yl("OnDisconnect.setWithPriority",I,!1);var V=new Ee.BH;return function(E,S,I,V,Q){var le=oo(I,V);E.server_.onDisconnectPut(S.toString(),le.val(!0),function(ye,Fe){"ok"===ye&&gl(E.onDisconnect_,S,le),Ya(0,Q,ye,Fe)})}(this._repo,this._path,S,I,V.wrapCallback(function(){})),V.promise},E.prototype.update=function(S){Os("OnDisconnect.update",this._path),Lu("OnDisconnect.update",S,this._path,!1);var I=new Ee.BH;return function(E,S,I,V){if((0,Ee.xb)(I))return Vn("onDisconnect().update() called with empty data.  Don't do anything."),void Ya(0,V,"ok",void 0);E.server_.onDisconnectMerge(S.toString(),I,function(Q,le){"ok"===Q&&ri(I,function(ye,Fe){var Ye=oo(Fe);gl(E.onDisconnect_,zn(S,ye),Ye)}),Ya(0,V,Q,le)})}(this._repo,this._path,S,I.wrapCallback(function(){})),I.promise},E}(),Ls=function(){function E(S,I,V,Q){this._repo=S,this._path=I,this._queryParams=V,this._orderByCalled=Q}return Object.defineProperty(E.prototype,"key",{get:function(){return ti(this._path)?null:gn(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"ref",{get:function(){return new oi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"_queryIdentifier",{get:function(){var S=mh(this._queryParams),I=mi(S);return"{}"===I?"default":I},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"_queryObject",{get:function(){return mh(this._queryParams)},enumerable:!1,configurable:!0}),E.prototype.isEqual=function(S){if(!((S=(0,Ee.m9)(S))instanceof E))return!1;var I=this._repo===S._repo,V=Mr(this._path,S._path);return I&&V&&this._queryIdentifier===S._queryIdentifier},E.prototype.toJSON=function(){return this.toString()},E.prototype.toString=function(){return this._repo.toString()+function(E){for(var S="",I=E.pieceNum_;I<E.pieces_.length;I++)""!==E.pieces_[I]&&(S+="/"+encodeURIComponent(String(E.pieces_[I])));return S||"/"}(this._path)},E}();function pd(E,S){if(!0===E._orderByCalled)throw new Error(S+": You can't combine multiple orderBy calls.")}function Ml(E){var S=null,I=null;if(E.hasStart()&&(S=E.getIndexStartValue()),E.hasEnd()&&(I=E.getIndexEndValue()),E.getIndex()===dl){var V="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",Q="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(E.hasStart()){if(E.getIndexStartName()!==Ht)throw new Error(V);if("string"!=typeof S)throw new Error(Q)}if(E.hasEnd()){if(E.getIndexEndName()!==fn)throw new Error(V);if("string"!=typeof I)throw new Error(Q)}}else if(E.getIndex()===ui){if(null!=S&&!mo(S)||null!=I&&!mo(I))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Ee.hu)(E.getIndex()instanceof Lc||E.getIndex()===ph,"unknown index type."),null!=S&&"object"==typeof S||null!=I&&"object"==typeof I)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kl(E){if(E.hasStart()&&E.hasEnd()&&E.hasLimit()&&!E.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var oi=function(E){function S(I,V){return E.call(this,I,V,new Tu,!1)||this}return(0,k.ZT)(S,E),Object.defineProperty(S.prototype,"parent",{get:function(){var I=Bi(this._path);return null===I?null:new S(this._repo,I)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"root",{get:function(){for(var I=this;null!==I.parent;)I=I.parent;return I},enumerable:!1,configurable:!0}),S}(Ls),qa=function(){function E(S,I,V){this._node=S,this.ref=I,this._index=V}return Object.defineProperty(E.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),E.prototype.child=function(S){var I=new Ie(S),V=zu(this.ref,S);return new E(this._node.getChild(I),V,ui)},E.prototype.exists=function(){return!this._node.isEmpty()},E.prototype.exportVal=function(){return this._node.val(!0)},E.prototype.forEach=function(S){var I=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(Q,le){return S(new E(le,zu(I.ref,Q),ui))})},E.prototype.hasChild=function(S){var I=new Ie(S);return!this._node.getChild(I).isEmpty()},E.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},E.prototype.toJSON=function(){return this.exportVal()},E.prototype.val=function(){return this._node.val()},E}();function dg(E,S){return(E=(0,Ee.m9)(E))._checkNotDeleted("ref"),void 0!==S?zu(E._root,S):E._root}function bc(E,S){(E=(0,Ee.m9)(E))._checkNotDeleted("refFromURL");var I=Jp(S,E._repo.repoInfo_.nodeAdmin);Xp("refFromURL",I);var V=I.repoInfo;return!E._repo.repoInfo_.isCustomHost()&&V.host!==E._repo.repoInfo_.host&&tr("refFromURL: Host name does not match the current database: (found "+V.host+" but expected "+E._repo.repoInfo_.host+")"),dg(E,I.path.toString())}function zu(E,S){return null===Nt((E=(0,Ee.m9)(E))._path)?((I=S)&&(I=I.replace(/^\/*\.info(\/|$)/,"/")),Xc("child","path",I,!1)):Xc("child","path",S,!1),new oi(E._repo,zn(E._path,S));var I}function Zf(E,S){E=(0,Ee.m9)(E),Os("push",E._path),Ia("push",S,E._path,!0);var ye,I=jo(E._repo),V=$d(I),Q=zu(E,V),le=zu(E,V);return ye=null!=S?fd(le,S).then(function(){return le}):Promise.resolve(le),Q.then=ye.then.bind(ye),Q.catch=ye.then.bind(ye,void 0),Q}function pg(E){return Os("remove",E._path),fd(E,null)}function fd(E,S){E=(0,Ee.m9)(E),Os("set",E._path),Ia("set",S,E._path,!1);var I=new Ee.BH;return Mh(E._repo,E._path,S,null,I.wrapCallback(function(){})),I.promise}function Wf(E,S){E=(0,Ee.m9)(E),Os("setPriority",E._path),Yl("setPriority",S,!1);var I=new Ee.BH;return Mh(E._repo,zn(E._path,".priority"),S,null,I.wrapCallback(function(){})),I.promise}function Kp(E,S,I){if(Os("setWithPriority",E._path),Ia("setWithPriority",S,E._path,!1),Yl("setWithPriority",I,!1),".length"===E.key||".keys"===E.key)throw"setWithPriority failed: "+E.key+" is a read-only object.";var V=new Ee.BH;return Mh(E._repo,E._path,S,I,V.wrapCallback(function(){})),V.promise}function Pv(E,S){Lu("update",S,E._path,!1);var I=new Ee.BH;return function(E,S,I,V){Gi(E,"update",{path:S.toString(),value:I});var Q=!0,le=gc(E),ye={};if(ri(I,function(st,pt){Q=!1,ye[st]=ua(zn(S,st),oo(pt),E.serverSyncTree_,le)}),Q)Vn("update() called with empty data.  Don't do anything."),Ya(0,V,"ok",void 0);else{var Fe=Th(E),Ye=function(E,S,I,V){!function(E,S,I,V){(0,Ee.hu)(V>E.lastWriteId,"Stacking an older merge on top of newer ones"),E.allWrites.push({path:S,children:I,writeId:V,visible:!0}),E.visibleWrites=Ul(E.visibleWrites,S,I),E.lastWriteId=V}(E.pendingWriteTree_,S,I,V);var Q=Da.fromObject(I);return vt(E,new yl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},S,Q))}(E.serverSyncTree_,S,ye,Fe);pa(E.eventQueue_,Ye),E.server_.merge(S.toString(),I,function(st,pt){var Wt="ok"===st;Wt||nr("update at "+S+" failed: "+st);var cn=me(E.serverSyncTree_,Fe,!Wt),Mn=cn.length>0?Bu(E,S):S;Fo(E.eventQueue_,Mn,cn),Ya(0,V,st,pt)}),ri(I,function(st){var pt=Qp(E,zn(S,st));Bu(E,pt)}),Fo(E.eventQueue_,S,[])}}(E._repo,E._path,S,I.wrapCallback(function(){})),I.promise}function md(E){return function(E,S){var I=function(E,S){var I=S._path,V=null;E.syncPointTree_.foreachOnPath(I,function(st,pt){var Wt=ar(st,I);V=V||Zc(pt,Wt)});var Q=E.syncPointTree_.get(I);Q?V=V||Zc(Q,Je()):(Q=new sp,E.syncPointTree_=E.syncPointTree_.set(I,Q));var le=null!=V,ye=le?new vl(V,!0,!1):null;return function(E){return zc(E.viewCache_)}(gs(Q,S,dc(E.pendingWriteTree_,S._path),le?ye.getNode():Ii.EMPTY_NODE,le))}(E.serverSyncTree_,S);return null!=I?Promise.resolve(I):E.server_.get(S).then(function(V){var Q=oo(V).withIndex(S._queryParams.getIndex()),le=Ce(E.serverSyncTree_,S._path,Q);return Eh(E.eventQueue_,S._path,le),Promise.resolve(Q)},function(V){return Gi(E,"get for query "+(0,Ee.Pz)(S)+" failed: "+V),Promise.reject(new Error(V))})}((E=(0,Ee.m9)(E))._repo,E).then(function(S){return new qa(S,new oi(E._repo,E._path),E._queryParams.getIndex())})}var Ah=function(){function E(S){this.callbackContext=S}return E.prototype.respondsTo=function(S){return"value"===S},E.prototype.createEvent=function(S,I){var V=I._queryParams.getIndex();return new ug("value",this,new qa(S.snapshotNode,new oi(I._repo,I._path),V))},E.prototype.getEventRunner=function(S){var I=this;return"cancel"===S.getEventType()?function(){return I.callbackContext.onCancel(S.error)}:function(){return I.callbackContext.onValue(S.snapshot,null)}},E.prototype.createCancelEvent=function(S,I){return this.callbackContext.hasCancelCallback?new B_(this,S,I):null},E.prototype.matches=function(S){return S instanceof E&&(!S.callbackContext||!this.callbackContext||S.callbackContext.matches(this.callbackContext))},E.prototype.hasAnyCallback=function(){return null!==this.callbackContext},E}(),Es=function(){function E(S,I){this.eventType=S,this.callbackContext=I}return E.prototype.respondsTo=function(S){var I="children_added"===S?"child_added":S;return this.eventType===("children_removed"===I?"child_removed":I)},E.prototype.createCancelEvent=function(S,I){return this.callbackContext.hasCancelCallback?new B_(this,S,I):null},E.prototype.createEvent=function(S,I){(0,Ee.hu)(null!=S.childName,"Child events should have a childName.");var V=zu(new oi(I._repo,I._path),S.childName),Q=I._queryParams.getIndex();return new ug(S.type,this,new qa(S.snapshotNode,V,Q),S.prevName)},E.prototype.getEventRunner=function(S){var I=this;return"cancel"===S.getEventType()?function(){return I.callbackContext.onCancel(S.error)}:function(){return I.callbackContext.onValue(S.snapshot,S.prevName)}},E.prototype.matches=function(S){return S instanceof E&&this.eventType===S.eventType&&(!this.callbackContext||!S.callbackContext||this.callbackContext.matches(S.callbackContext))},E.prototype.hasAnyCallback=function(){return!!this.callbackContext},E}();function xc(E,S,I,V,Q){var le;if("object"==typeof V&&(le=void 0,Q=V),"function"==typeof V&&(le=V),Q&&Q.onlyOnce){var ye=I,Fe=function(pt,Wt){Er(E._repo,E,st),ye(pt,Wt)};Fe.userCallback=I.userCallback,Fe.context=I.context,I=Fe}var Ye=new fa(I,le||void 0),st="value"===S?new Ah(Ye):new Es(S,Ye);return function(E,S,I){var V;V=".info"===Nt(S._path)?Ue(E.infoSyncTree_,S,I):Ue(E.serverSyncTree_,S,I),Eh(E.eventQueue_,S._path,V)}(E._repo,E,st),function(){return Er(E._repo,E,st)}}function ef(E,S,I,V){return xc(E,"value",S,I,V)}function tf(E,S,I,V){return xc(E,"child_added",S,I,V)}function Xs(E,S,I,V){return xc(E,"child_changed",S,I,V)}function lp(E,S,I,V){return xc(E,"child_moved",S,I,V)}function nf(E,S,I,V){return xc(E,"child_removed",S,I,V)}function gd(E,S,I){var V=null,Q=I?new fa(I):null;"value"===S?V=new Ah(Q):S&&(V=new Es(S,Q)),Er(E._repo,E,V)}var $l=function(){},rf=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,k.ZT)(S,E),S.prototype._apply=function(I){Ia("endAt",this._value,I._path,!0);var V=rd(I._queryParams,this._value,this._key);if(kl(V),Ml(V),I._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ls(I._repo,I._path,V,I._orderByCalled)},S}($l);function Dh(E,S){return Vf("endAt","key",S,!0),new rf(E,S)}var Za=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,k.ZT)(S,E),S.prototype._apply=function(I){Ia("endBefore",this._value,I._path,!1);var V=function(E,S,I){var Q;return E.index_===dl?("string"==typeof S&&(S=Va(S)),Q=rd(E,S,I)):Q=rd(E,S,null==I?Ht:Va(I)),Q.endBeforeSet_=!0,Q}(I._queryParams,this._value,this._key);if(kl(V),Ml(V),I._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ls(I._repo,I._path,V,I._orderByCalled)},S}($l);function Rv(E,S){return Vf("endBefore","key",S,!0),new Za(E,S)}var cp=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,k.ZT)(S,E),S.prototype._apply=function(I){Ia("startAt",this._value,I._path,!0);var V=id(I._queryParams,this._value,this._key);if(kl(V),Ml(V),I._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ls(I._repo,I._path,V,I._orderByCalled)},S}($l);function fg(E,S){return void 0===E&&(E=null),Vf("startAt","key",S,!0),new cp(E,S)}var mg=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,k.ZT)(S,E),S.prototype._apply=function(I){Ia("startAfter",this._value,I._path,!1);var V=function(E,S,I){var V;return E.index_===dl?("string"==typeof S&&(S=Nc(S)),V=id(E,S,I)):V=id(E,S,null==I?fn:Nc(I)),V.startAfterSet_=!0,V}(I._queryParams,this._value,this._key);if(kl(V),Ml(V),I._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ls(I._repo,I._path,V,I._orderByCalled)},S}($l);function Vu(E,S){return Vf("startAfter","key",S,!0),new mg(E,S)}var Ih=function(E){function S(I){var V=E.call(this)||this;return V._limit=I,V}return(0,k.ZT)(S,E),S.prototype._apply=function(I){if(I._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ls(I._repo,I._path,function(E,S){var I=E.copy();return I.limitSet_=!0,I.limit_=S,I.viewFrom_="l",I}(I._queryParams,this._limit),I._orderByCalled)},S}($l);function $f(E){if("number"!=typeof E||Math.floor(E)!==E||E<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ih(E)}var up=function(E){function S(I){var V=E.call(this)||this;return V._limit=I,V}return(0,k.ZT)(S,E),S.prototype._apply=function(I){if(I._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ls(I._repo,I._path,function(E,S){var I=E.copy();return I.limitSet_=!0,I.limit_=S,I.viewFrom_="r",I}(I._queryParams,this._limit),I._orderByCalled)},S}($l);function z_(E){if("number"!=typeof E||Math.floor(E)!==E||E<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new up(E)}var Pa=function(E){function S(I){var V=E.call(this)||this;return V._path=I,V}return(0,k.ZT)(S,E),S.prototype._apply=function(I){pd(I,"orderByChild");var V=new Ie(this._path);if(ti(V))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var Q=new Lc(V),le=ps(I._queryParams,Q);return Ml(le),new Ls(I._repo,I._path,le,!0)},S}($l);function _d(E){if("$key"===E)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===E)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===E)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Xc("orderByChild","path",E,!1),new Pa(E)}var Xf=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,k.ZT)(S,E),S.prototype._apply=function(I){pd(I,"orderByKey");var V=ps(I._queryParams,dl);return Ml(V),new Ls(I._repo,I._path,V,!0)},S}($l);function Qf(){return new Xf}var V_=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,k.ZT)(S,E),S.prototype._apply=function(I){pd(I,"orderByPriority");var V=ps(I._queryParams,ui);return Ml(V),new Ls(I._repo,I._path,V,!0)},S}($l);function Ph(){return new V_}var U_=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,k.ZT)(S,E),S.prototype._apply=function(I){pd(I,"orderByValue");var V=ps(I._queryParams,ph);return Ml(V),new Ls(I._repo,I._path,V,!0)},S}($l);function gg(){return new U_}var _g=function(E){function S(I,V){var Q=E.call(this)||this;return Q._value=I,Q._key=V,Q}return(0,k.ZT)(S,E),S.prototype._apply=function(I){if(Ia("equalTo",this._value,I._path,!1),I._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(I._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new rf(this._value,this._key)._apply(new cp(this._value,this._key)._apply(I))},S}($l);function yg(E,S){return Vf("equalTo","key",S,!0),new _g(E,S)}function Wa(E){for(var S,I,V=[],Q=1;Q<arguments.length;Q++)V[Q-1]=arguments[Q];var le=(0,Ee.m9)(E);try{for(var ye=(0,k.XA)(V),Fe=ye.next();!Fe.done;Fe=ye.next()){var Ye=Fe.value;le=Ye._apply(le)}}catch(st){S={error:st}}finally{try{Fe&&!Fe.done&&(I=ye.return)&&I.call(ye)}finally{if(S)throw S.error}}return le}(function(E){(0,Ee.hu)(!op,"__referenceConstructor has already been defined"),op=E})(oi),function(E){(0,Ee.hu)(!w,"__referenceConstructor has already been defined"),w=E}(oi);var $a={},Eo=!1;function hp(E,S,I,V,Q){var le=V||E.options.databaseURL;void 0===le&&(E.options.projectId||tr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vn("Using default host for project ",E.options.projectId),le=E.options.projectId+"-default-rtdb.firebaseio.com");var Ye,ye=Jp(le,Q),Fe=ye.repoInfo,st=void 0;"undefined"!=typeof process&&(st=process.env.FIREBASE_DATABASE_EMULATOR_HOST),st?(Ye=!0,Fe=(ye=Jp(le="http://"+st+"?ns="+Fe.namespace,Q)).repoInfo):Ye=!ye.repoInfo.secure;var pt=Q&&Ye?new Si(Si.OWNER):new Ni(E.name,E.options,S);Xp("Invalid Firebase Database URL",ye),ti(ye.path)||tr("Database URL must point to the root of a Firebase Database (not including a child path).");var Wt=function(E,S,I,V){var Q=$a[S.name];Q||($a[S.name]=Q={});var le=Q[E.toURLString()];return le&&tr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),le=new og(E,Eo,I,V),Q[E.toURLString()]=le,le}(Fe,E,pt,new ds(E.name,I));return new vg(Wt,E)}var vg=function(){function E(S,I){this._repoInternal=S,this.app=I,this.type="database",this._instanceStarted=!1}return Object.defineProperty(E.prototype,"_repo",{get:function(){return this._instanceStarted||(function(E,S,I){if(E.stats_=Cr(E.repoInfo_),E.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)E.server_=new ng(E.repoInfo_,function(V,Q,le,ye){Fs(E,V,Q,le,ye)},E.authTokenProvider_,E.appCheckProvider_),setTimeout(function(){return Nu(E,!0)},0);else{if(null!=I){if("object"!=typeof I)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Ee.Pz)(I)}catch(V){throw new Error("Invalid authOverride provided: "+V)}}E.persistentConnection_=new uc(E.repoInfo_,S,function(V,Q,le,ye){Fs(E,V,Q,le,ye)},function(V){Nu(E,V)},function(V){!function(E,S){ri(S,function(I,V){yc(E,I,V)})}(E,V)},E.authTokenProvider_,E.appCheckProvider_,I),E.server_=E.persistentConnection_}E.authTokenProvider_.addTokenChangeListener(function(V){E.server_.refreshAuthToken(V)}),E.appCheckProvider_.addTokenChangeListener(function(V){E.server_.refreshAppCheckToken(V.token)}),E.statsReporter_=function(E,S){var I=E.toString();return ys[I]||(ys[I]=S()),ys[I]}(E.repoInfo_,function(){return new Gp(E.stats_,E.server_)}),E.infoData_=new Up,E.infoSyncTree_=new ee({startListening:function(V,Q,le,ye){var Fe=[],Ye=E.infoData_.getNode(V._path);return Ye.isEmpty()||(Fe=Ce(E.infoSyncTree_,V._path,Ye),setTimeout(function(){ye("ok")},0)),Fe},stopListening:function(){}}),yc(E,"connected",!1),E.serverSyncTree_=new ee({startListening:function(V,Q,le,ye){return E.server_.listen(V,le,Q,function(Fe,Ye){var st=ye(Fe,Ye);Fo(E.eventQueue_,V._path,st)}),[]},stopListening:function(V,Q){E.server_.unlisten(V,Q)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new oi(this._repo,Je())),this._rootInternal},enumerable:!1,configurable:!0}),E.prototype._delete=function(){return null!==this._rootInternal&&(function(E,S){var I=$a[S];(!I||I[E.key]!==E)&&tr("Database "+S+"("+E.repoInfo_+") has already been deleted."),qf(E),delete I[E.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},E.prototype._checkNotDeleted=function(S){null===this._rootInternal&&tr("Cannot call "+S+" on a deleted database.")},E}();function Rh(E){(E=(0,Ee.m9)(E))._checkNotDeleted("goOffline"),qf(E._repo)}function Oh(E){(E=(0,Ee.m9)(E))._checkNotDeleted("goOnline"),function(E){E.persistentConnection_&&E.persistentConnection_.resume(Hf)}(E._repo)}var Xl={".sv":"timestamp"},Hu=function(){function E(S,I){this.committed=S,this.snapshot=I}return E.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},E}();function Ix(E,S,I){var V;if(E=(0,Ee.m9)(E),Os("Reference.transaction",E._path),".length"===E.key||".keys"===E.key)throw"Reference.transaction failed: "+E.key+" is a read-only object.";var Q=null===(V=null==I?void 0:I.applyLocally)||void 0===V||V,le=new Ee.BH,Fe=ef(E,function(){});return function(E,S,I,V,Q,le){Gi(E,"transaction on "+S);var ye={path:S,update:I,onComplete:V,status:null,order:Qe(),applyLocally:le,retryCount:0,unwatcher:Q,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Fe=El(E,S,void 0);ye.currentInputSnapshot=Fe;var Ye=ye.update(Fe.val());if(void 0===Ye)ye.unwatcher(),ye.currentOutputSnapshotRaw=null,ye.currentOutputSnapshotResolved=null,ye.onComplete&&ye.onComplete(null,!1,ye.currentInputSnapshot);else{Fu("transaction failed: Data returned ",Ye,ye.path),ye.status=0;var st=ha(E.transactionQueueTree_,S),pt=wi(st)||[];pt.push(ye),zr(st,pt);var Wt=void 0;"object"==typeof Ye&&null!==Ye&&(0,Ee.r3)(Ye,".priority")?(Wt=(0,Ee.DV)(Ye,".priority"),(0,Ee.hu)(mo(Wt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Wt=(tt(E.serverSyncTree_,S)||Ii.EMPTY_NODE).getPriority().val();var Mn=gc(E),Wn=oo(Ye,Wt),Pi=xs(Wn,Fe,Mn);ye.currentOutputSnapshotRaw=Wn,ye.currentOutputSnapshotResolved=Pi,ye.currentWriteId=Th(E);var yi=se(E.serverSyncTree_,S,Pi,ye.currentWriteId,ye.applyLocally);Fo(E.eventQueue_,S,yi),vc(E,E.transactionQueueTree_)}}(E._repo,E._path,S,function(Ye,st,pt){var Wt=null;Ye?le.reject(Ye):(Wt=new qa(pt,new oi(E._repo,E._path),ui),le.resolve(new Hu(st,Wt)))},Fe,Q),le.promise}var Xa=function(){function E(S){this._delegate=S}return E.prototype.cancel=function(S){(0,Ee.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Ee.Wj)("OnDisconnect.cancel","onComplete",S,!0);var I=this._delegate.cancel();return S&&I.then(function(){return S(null)},function(V){return S(V)}),I},E.prototype.remove=function(S){(0,Ee.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Ee.Wj)("OnDisconnect.remove","onComplete",S,!0);var I=this._delegate.remove();return S&&I.then(function(){return S(null)},function(V){return S(V)}),I},E.prototype.set=function(S,I){(0,Ee.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Ee.Wj)("OnDisconnect.set","onComplete",I,!0);var V=this._delegate.set(S);return I&&V.then(function(){return I(null)},function(Q){return I(Q)}),V},E.prototype.setWithPriority=function(S,I,V){(0,Ee.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Ee.Wj)("OnDisconnect.setWithPriority","onComplete",V,!0);var Q=this._delegate.setWithPriority(S,I);return V&&Q.then(function(){return V(null)},function(le){return V(le)}),Q},E.prototype.update=function(S,I){if((0,Ee.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(S)){for(var V={},Q=0;Q<S.length;++Q)V[""+Q]=S[Q];S=V,nr("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Ee.Wj)("OnDisconnect.update","onComplete",I,!0);var le=this._delegate.update(S);return I&&le.then(function(){return I(null)},function(ye){return I(ye)}),le},E}(),bg=function(){function E(S,I){this.committed=S,this.snapshot=I}return E.prototype.toJSON=function(){return(0,Ee.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},E}(),Kc=function(){function E(S,I){this._database=S,this._delegate=I}return E.prototype.val=function(){return(0,Ee.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},E.prototype.exportVal=function(){return(0,Ee.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},E.prototype.toJSON=function(){return(0,Ee.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},E.prototype.exists=function(){return(0,Ee.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},E.prototype.child=function(S){return(0,Ee.Dv)("DataSnapshot.child",0,1,arguments.length),S=String(S),Xc("DataSnapshot.child","path",S,!1),new E(this._database,this._delegate.child(S))},E.prototype.hasChild=function(S){return(0,Ee.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Xc("DataSnapshot.hasChild","path",S,!1),this._delegate.hasChild(S)},E.prototype.getPriority=function(){return(0,Ee.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},E.prototype.forEach=function(S){var I=this;return(0,Ee.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Ee.Wj)("DataSnapshot.forEach","action",S,!1),this._delegate.forEach(function(V){return S(new E(I._database,V))})},E.prototype.hasChildren=function(){return(0,Ee.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(E.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),E.prototype.numChildren=function(){return(0,Ee.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},E.prototype.getRef=function(){return(0,Ee.Dv)("DataSnapshot.ref",0,0,arguments.length),new eu(this._database,this._delegate.ref)},Object.defineProperty(E.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),E}(),sf=function(){function E(S,I){this.database=S,this._delegate=I}return E.prototype.on=function(S,I,V,Q){var ye,le=this;(0,Ee.Dv)("Query.on",2,4,arguments.length),(0,Ee.Wj)("Query.on","callback",I,!1);var Fe=E.getCancelAndContextArgs_("Query.on",V,Q),Ye=function(pt,Wt){I.call(Fe.context,new Kc(le.database,pt),Wt)};Ye.userCallback=I,Ye.context=Fe.context;var st=null===(ye=Fe.cancel)||void 0===ye?void 0:ye.bind(Fe.context);switch(S){case"value":return ef(this._delegate,Ye,st),I;case"child_added":return tf(this._delegate,Ye,st),I;case"child_removed":return nf(this._delegate,Ye,st),I;case"child_changed":return Xs(this._delegate,Ye,st),I;case"child_moved":return lp(this._delegate,Ye,st),I;default:throw new Error((0,Ee.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},E.prototype.off=function(S,I,V){if((0,Ee.Dv)("Query.off",0,3,arguments.length),Av("Query.off",S,!0),(0,Ee.Wj)("Query.off","callback",I,!0),(0,Ee.lb)("Query.off","context",V,!0),I){var Q=function(){};Q.userCallback=I,Q.context=V,gd(this._delegate,S,Q)}else gd(this._delegate,S)},E.prototype.get=function(){var S=this;return md(this._delegate).then(function(I){return new Kc(S.database,I)})},E.prototype.once=function(S,I,V,Q){var le=this;(0,Ee.Dv)("Query.once",1,4,arguments.length),(0,Ee.Wj)("Query.once","callback",I,!0);var ye=E.getCancelAndContextArgs_("Query.once",V,Q),Fe=new Ee.BH,Ye=function(pt,Wt){var cn=new Kc(le.database,pt);I&&I.call(ye.context,cn,Wt),Fe.resolve(cn)};Ye.userCallback=I,Ye.context=ye.context;var st=function(pt){ye.cancel&&ye.cancel.call(ye.context,pt),Fe.reject(pt)};switch(S){case"value":ef(this._delegate,Ye,st,{onlyOnce:!0});break;case"child_added":tf(this._delegate,Ye,st,{onlyOnce:!0});break;case"child_removed":nf(this._delegate,Ye,st,{onlyOnce:!0});break;case"child_changed":Xs(this._delegate,Ye,st,{onlyOnce:!0});break;case"child_moved":lp(this._delegate,Ye,st,{onlyOnce:!0});break;default:throw new Error((0,Ee.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return Fe.promise},E.prototype.limitToFirst=function(S){return(0,Ee.Dv)("Query.limitToFirst",1,1,arguments.length),new E(this.database,Wa(this._delegate,$f(S)))},E.prototype.limitToLast=function(S){return(0,Ee.Dv)("Query.limitToLast",1,1,arguments.length),new E(this.database,Wa(this._delegate,z_(S)))},E.prototype.orderByChild=function(S){return(0,Ee.Dv)("Query.orderByChild",1,1,arguments.length),new E(this.database,Wa(this._delegate,_d(S)))},E.prototype.orderByKey=function(){return(0,Ee.Dv)("Query.orderByKey",0,0,arguments.length),new E(this.database,Wa(this._delegate,Qf()))},E.prototype.orderByPriority=function(){return(0,Ee.Dv)("Query.orderByPriority",0,0,arguments.length),new E(this.database,Wa(this._delegate,Ph()))},E.prototype.orderByValue=function(){return(0,Ee.Dv)("Query.orderByValue",0,0,arguments.length),new E(this.database,Wa(this._delegate,gg()))},E.prototype.startAt=function(S,I){return void 0===S&&(S=null),(0,Ee.Dv)("Query.startAt",0,2,arguments.length),new E(this.database,Wa(this._delegate,fg(S,I)))},E.prototype.startAfter=function(S,I){return void 0===S&&(S=null),(0,Ee.Dv)("Query.startAfter",0,2,arguments.length),new E(this.database,Wa(this._delegate,Vu(S,I)))},E.prototype.endAt=function(S,I){return void 0===S&&(S=null),(0,Ee.Dv)("Query.endAt",0,2,arguments.length),new E(this.database,Wa(this._delegate,Dh(S,I)))},E.prototype.endBefore=function(S,I){return void 0===S&&(S=null),(0,Ee.Dv)("Query.endBefore",0,2,arguments.length),new E(this.database,Wa(this._delegate,Rv(S,I)))},E.prototype.equalTo=function(S,I){return(0,Ee.Dv)("Query.equalTo",1,2,arguments.length),new E(this.database,Wa(this._delegate,yg(S,I)))},E.prototype.toString=function(){return(0,Ee.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},E.prototype.toJSON=function(){return(0,Ee.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},E.prototype.isEqual=function(S){if((0,Ee.Dv)("Query.isEqual",1,1,arguments.length),!(S instanceof E)){var I="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(I)}return this._delegate.isEqual(S._delegate)},E.getCancelAndContextArgs_=function(S,I,V){var Q={cancel:void 0,context:void 0};if(I&&V)Q.cancel=I,(0,Ee.Wj)(S,"cancel",Q.cancel,!0),Q.context=V,(0,Ee.lb)(S,"context",Q.context,!0);else if(I)if("object"==typeof I&&null!==I)Q.context=I;else{if("function"!=typeof I)throw new Error((0,Ee.gK)(S,"cancelOrContext")+" must either be a cancel callback or a context object.");Q.cancel=I}return Q},Object.defineProperty(E.prototype,"ref",{get:function(){return new eu(this.database,new oi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),E}(),eu=function(E){function S(I,V){var Q=E.call(this,I,new Ls(V._repo,V._path,new Tu,!1))||this;return Q.database=I,Q._delegate=V,Q}return(0,k.ZT)(S,E),S.prototype.getKey=function(){return(0,Ee.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},S.prototype.child=function(I){return(0,Ee.Dv)("Reference.child",1,1,arguments.length),"number"==typeof I&&(I=String(I)),new S(this.database,zu(this._delegate,I))},S.prototype.getParent=function(){(0,Ee.Dv)("Reference.parent",0,0,arguments.length);var I=this._delegate.parent;return I?new S(this.database,I):null},S.prototype.getRoot=function(){return(0,Ee.Dv)("Reference.root",0,0,arguments.length),new S(this.database,this._delegate.root)},S.prototype.set=function(I,V){(0,Ee.Dv)("Reference.set",1,2,arguments.length),(0,Ee.Wj)("Reference.set","onComplete",V,!0);var Q=fd(this._delegate,I);return V&&Q.then(function(){return V(null)},function(le){return V(le)}),Q},S.prototype.update=function(I,V){if((0,Ee.Dv)("Reference.update",1,2,arguments.length),Array.isArray(I)){for(var Q={},le=0;le<I.length;++le)Q[""+le]=I[le];I=Q,nr("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Os("Reference.update",this._delegate._path),(0,Ee.Wj)("Reference.update","onComplete",V,!0);var ye=Pv(this._delegate,I);return V&&ye.then(function(){return V(null)},function(Fe){return V(Fe)}),ye},S.prototype.setWithPriority=function(I,V,Q){(0,Ee.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Ee.Wj)("Reference.setWithPriority","onComplete",Q,!0);var le=Kp(this._delegate,I,V);return Q&&le.then(function(){return Q(null)},function(ye){return Q(ye)}),le},S.prototype.remove=function(I){(0,Ee.Dv)("Reference.remove",0,1,arguments.length),(0,Ee.Wj)("Reference.remove","onComplete",I,!0);var V=pg(this._delegate);return I&&V.then(function(){return I(null)},function(Q){return I(Q)}),V},S.prototype.transaction=function(I,V,Q){var le=this;(0,Ee.Dv)("Reference.transaction",1,3,arguments.length),(0,Ee.Wj)("Reference.transaction","transactionUpdate",I,!1),(0,Ee.Wj)("Reference.transaction","onComplete",V,!0),Uf("Reference.transaction","applyLocally",Q,!0);var ye=Ix(this._delegate,I,{applyLocally:Q}).then(function(Fe){return new bg(Fe.committed,new Kc(le.database,Fe.snapshot))});return V&&ye.then(function(Fe){return V(null,Fe.committed,Fe.snapshot)},function(Fe){return V(Fe,!1,null)}),ye},S.prototype.setPriority=function(I,V){(0,Ee.Dv)("Reference.setPriority",1,2,arguments.length),(0,Ee.Wj)("Reference.setPriority","onComplete",V,!0);var Q=Wf(this._delegate,I);return V&&Q.then(function(){return V(null)},function(le){return V(le)}),Q},S.prototype.push=function(I,V){var Q=this;(0,Ee.Dv)("Reference.push",0,2,arguments.length),(0,Ee.Wj)("Reference.push","onComplete",V,!0);var le=Zf(this._delegate,I),ye=le.then(function(Ye){return new S(Q.database,Ye)});V&&ye.then(function(){return V(null)},function(Ye){return V(Ye)});var Fe=new S(this.database,le);return Fe.then=ye.then.bind(ye),Fe.catch=ye.catch.bind(ye,void 0),Fe},S.prototype.onDisconnect=function(){return Os("Reference.onDisconnect",this._delegate._path),new Xa(new hg(this._delegate._repo,this._delegate._path))},Object.defineProperty(S.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),S}(sf),Fh=function(){function E(S,I){var V=this;this._delegate=S,this.app=I,this.INTERNAL={delete:function(){return V._delegate._delete()}}}return E.prototype.useEmulator=function(S,I,V){void 0===V&&(V={}),function(E,S,I,V){void 0===V&&(V={}),(E=(0,Ee.m9)(E))._checkNotDeleted("useEmulator"),E._instanceStarted&&tr("Cannot call useEmulator() after instance has already been initialized.");var Q=E._repoInternal,le=void 0;if(Q.repoInfo_.nodeAdmin)V.mockUserToken&&tr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),le=new Si(Si.OWNER);else if(V.mockUserToken){var ye=(0,Ee.Sg)(V.mockUserToken,E.app.options.projectId);le=new Si(ye)}!function(E,S,I,V){E.repoInfo_=new jr(S+":"+I,!1,E.repoInfo_.namespace,E.repoInfo_.webSocketOnly,E.repoInfo_.nodeAdmin,E.repoInfo_.persistenceKey,E.repoInfo_.includeNamespaceInQueryParams),V&&(E.authTokenProvider_=V)}(Q,S,I,le)}(this._delegate,S,I,V)},E.prototype.ref=function(S){if((0,Ee.Dv)("database.ref",0,1,arguments.length),S instanceof eu){var I=bc(this._delegate,S.toString());return new eu(this,I)}return I=dg(this._delegate,S),new eu(this,I)},E.prototype.refFromURL=function(S){var I="database.refFromURL";(0,Ee.Dv)(I,1,1,arguments.length);var V=bc(this._delegate,S);return new eu(this,V)},E.prototype.goOffline=function(){return(0,Ee.Dv)("database.goOffline",0,0,arguments.length),Rh(this._delegate)},E.prototype.goOnline=function(){return(0,Ee.Dv)("database.goOnline",0,0,arguments.length),Oh(this._delegate)},E.ServerValue={TIMESTAMP:Xl,increment:function(S){return function(E){return{".sv":{increment:E}}}(S)}},E}(),Y_=Object.freeze({__proto__:null,forceLongPolling:function(){d.forceDisallow(),Pt.forceAllow()},forceWebSockets:function(){Pt.forceDisallow()},isWebSocketsAvailable:function(){return d.isAvailable()},setSecurityDebugCallback:function(E,S){E._delegate._repo.persistentConnection_.securityDebugCallback_=S},stats:function(E,S){!function(E,S){if(void 0===S&&(S=!1),"undefined"!=typeof console){var I;S?(E.statsListener_||(E.statsListener_=new Ga(E.stats_)),I=E.statsListener_.get()):I=E.stats_.get();var V=Object.keys(I).reduce(function(Q,le){return Math.max(le.length,Q)},0);ri(I,function(Q,le){for(var ye=Q,Fe=Q.length;Fe<V+2;Fe++)ye+=" ";console.log(ye+le)})}}(E._delegate._repo,S)},statsIncrementCounter:function(E,S){!function(E,S){E.stats_.incrementCounter(S),function(E,S){E.statsToReport_[S]=!0}(E.statsReporter_,S)}(E._delegate._repo,S)},dataUpdateCount:function(E){return E._delegate._repo.dataUpdateCount},interceptServerData:function(E,S){return function(E,S){E.interceptServerDataCallback_=S}(E._delegate._repo,S)},initStandalone:function(E){var S=E.app,I=E.url,Q=E.customAuthImpl,le=E.namespace,ye=E.nodeAdmin,Fe=void 0!==ye&&ye;je(E.version);var Ye=new Vt.zt("auth-internal",new Vt.H0("database-standalone"));return Ye.setComponent(new Vt.wA("auth-internal",function(){return Q},"PRIVATE")),{instance:new Fh(hp(S,Ye,void 0,I,Fe),S),namespace:le}}}),vd=uc;uc.prototype.simpleListen=function(E,S){this.sendRequest("q",{p:E},S)},uc.prototype.echo=function(E,S){this.sendRequest("echo",{d:E},S)};var Kf=Object.freeze({__proto__:null,DataConnection:vd,RealTimeConnection:Me,hijackHash:function(E){var S=uc.prototype.put;return uc.prototype.put=function(I,V,Q,le){void 0!==le&&(le=E()),S.call(this,I,V,Q,le)},function(){uc.prototype.put=S}},ConnectionTarget:jr,queryIdentifier:function(E){return E._delegate._queryIdentifier},forceRestClient:function(E){!function(E){Eo=E}(E)}}),Ra=Fh.ServerValue;!function(E){je(E.SDK_VERSION);var S=E.INTERNAL.registerComponent(new Vt.wA("database",function(I,V){var Q=V.instanceIdentifier,le=I.getProvider("app").getImmediate(),ye=I.getProvider("auth-internal"),Fe=I.getProvider("app-check-internal");return new Fh(hp(le,ye,Fe,Q),le)},"PUBLIC").setServiceProps({Reference:eu,Query:sf,Database:Fh,DataSnapshot:Kc,enableLogging:$r,INTERNAL:Y_,ServerValue:Ra,TEST_ACCESS:Kf}).setMultipleInstances(!0));E.registerVersion("@firebase/database","0.10.9"),(0,Ee.Yr)()&&(ai.exports=S)}(s.Z)},300:(ai,_n,nt)=>{"use strict";function s(){for(var lt=0,Ct=0,zt=arguments.length;Ct<zt;Ct++)lt+=arguments[Ct].length;var an=Array(lt),Qe=0;for(Ct=0;Ct<zt;Ct++)for(var On=arguments[Ct],dn=0,Mt=On.length;dn<Mt;dn++,Qe++)an[Qe]=On[dn];return an}nt.d(_n,{in:()=>k,Yd:()=>je,Ub:()=>Ve,Am:()=>Et});var Vt,Ee=[],k=(()=>{return(lt=k||(k={}))[lt.DEBUG=0]="DEBUG",lt[lt.VERBOSE=1]="VERBOSE",lt[lt.INFO=2]="INFO",lt[lt.WARN=3]="WARN",lt[lt.ERROR=4]="ERROR",lt[lt.SILENT=5]="SILENT",k;var lt})(),gt={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},Dt=k.INFO,wt=((Vt={})[k.DEBUG]="log",Vt[k.VERBOSE]="log",Vt[k.INFO]="info",Vt[k.WARN]="warn",Vt[k.ERROR]="error",Vt),Be=function(lt,Ct){for(var zt=[],an=2;an<arguments.length;an++)zt[an-2]=arguments[an];if(!(Ct<lt.logLevel)){var Qe=(new Date).toISOString(),On=wt[Ct];if(!On)throw new Error("Attempted to log a message with an invalid logType (value: "+Ct+")");console[On].apply(console,s(["["+Qe+"]  "+lt.name+":"],zt))}},je=function(){function lt(Ct){this.name=Ct,this._logLevel=Dt,this._logHandler=Be,this._userLogHandler=null,Ee.push(this)}return Object.defineProperty(lt.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Ct){if(!(Ct in k))throw new TypeError('Invalid value "'+Ct+'" assigned to `logLevel`');this._logLevel=Ct},enumerable:!1,configurable:!0}),lt.prototype.setLogLevel=function(Ct){this._logLevel="string"==typeof Ct?gt[Ct]:Ct},Object.defineProperty(lt.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Ct){if("function"!=typeof Ct)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ct},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Ct){this._userLogHandler=Ct},enumerable:!1,configurable:!0}),lt.prototype.debug=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,k.DEBUG],Ct)),this._logHandler.apply(this,s([this,k.DEBUG],Ct))},lt.prototype.log=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,k.VERBOSE],Ct)),this._logHandler.apply(this,s([this,k.VERBOSE],Ct))},lt.prototype.info=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,k.INFO],Ct)),this._logHandler.apply(this,s([this,k.INFO],Ct))},lt.prototype.warn=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,k.WARN],Ct)),this._logHandler.apply(this,s([this,k.WARN],Ct))},lt.prototype.error=function(){for(var Ct=[],zt=0;zt<arguments.length;zt++)Ct[zt]=arguments[zt];this._userLogHandler&&this._userLogHandler.apply(this,s([this,k.ERROR],Ct)),this._logHandler.apply(this,s([this,k.ERROR],Ct))},lt}();function Ve(lt){Ee.forEach(function(Ct){Ct.setLogLevel(lt)})}function Et(lt,Ct){for(var zt=function(dn){var Mt=null;Ct&&Ct.level&&(Mt=gt[Ct.level]),dn.userLogHandler=null===lt?null:function(Ui,$r){for(var Vn=[],Di=2;Di<arguments.length;Di++)Vn[Di-2]=arguments[Di];var Ur=Vn.map(function(tr){if(null==tr)return null;if("string"==typeof tr)return tr;if("number"==typeof tr||"boolean"==typeof tr)return tr.toString();if(tr instanceof Error)return tr.message;try{return JSON.stringify(tr)}catch(nr){return null}}).filter(function(tr){return tr}).join(" ");$r>=(null!=Mt?Mt:Ui.logLevel)&&lt({level:k[$r].toLowerCase(),message:Ur,args:Vn,type:Ui.name})}},an=0,Qe=Ee;an<Qe.length;an++)zt(Qe[an])}},4685:(ai,_n,nt)=>{"use strict";nt.d(_n,{BH:()=>Ct,LL:()=>Yt,gQ:()=>Si,hu:()=>Ee,g5:()=>k,US:()=>wt,h$:()=>Be,r3:()=>qi,Sg:()=>zt,ne:()=>uo,p$:()=>Ve,ZB:()=>Et,gK:()=>is,m9:()=>cc,z$:()=>an,GJ:()=>li,jU:()=>dn,ru:()=>Mt,d:()=>$r,xb:()=>_r,w1:()=>Vn,uI:()=>Qe,UG:()=>On,Yr:()=>Ur,b$:()=>Ui,G6:()=>tr,Mn:()=>Di,w9:()=>xi,cI:()=>mi,UI:()=>io,xO:()=>Ri,DV:()=>Io,ug:()=>jr,dS:()=>rs,Pz:()=>Un,Dv:()=>wr,Wj:()=>ho,lb:()=>Gr});var s=nt(4762),Ee=function(ft,dt){if(!ft)throw k(dt)},k=function(ft){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ft)},gt=function(ft){for(var dt=[],Tt=0,Kt=0;Kt<ft.length;Kt++){var Lt=ft.charCodeAt(Kt);Lt<128?dt[Tt++]=Lt:Lt<2048?(dt[Tt++]=Lt>>6|192,dt[Tt++]=63&Lt|128):55296==(64512&Lt)&&Kt+1<ft.length&&56320==(64512&ft.charCodeAt(Kt+1))?(Lt=65536+((1023&Lt)<<10)+(1023&ft.charCodeAt(++Kt)),dt[Tt++]=Lt>>18|240,dt[Tt++]=Lt>>12&63|128,dt[Tt++]=Lt>>6&63|128,dt[Tt++]=63&Lt|128):(dt[Tt++]=Lt>>12|224,dt[Tt++]=Lt>>6&63|128,dt[Tt++]=63&Lt|128)}return dt},wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(ft,dt){if(!Array.isArray(ft))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Tt=dt?this.byteToCharMapWebSafe_:this.byteToCharMap_,Kt=[],Lt=0;Lt<ft.length;Lt+=3){var Bn=ft[Lt],di=Lt+1<ft.length,Oi=di?ft[Lt+1]:0,sr=Lt+2<ft.length,ir=sr?ft[Lt+2]:0,De=(15&Oi)<<2|ir>>6,qe=63&ir;sr||(qe=64,di||(De=64)),Kt.push(Tt[Bn>>2],Tt[(3&Bn)<<4|Oi>>4],Tt[De],Tt[qe])}return Kt.join("")},encodeString:function(ft,dt){return this.HAS_NATIVE_SUPPORT&&!dt?btoa(ft):this.encodeByteArray(gt(ft),dt)},decodeString:function(ft,dt){return this.HAS_NATIVE_SUPPORT&&!dt?atob(ft):function(ft){for(var dt=[],Tt=0,Kt=0;Tt<ft.length;){var Lt=ft[Tt++];if(Lt<128)dt[Kt++]=String.fromCharCode(Lt);else if(Lt>191&&Lt<224){var Bn=ft[Tt++];dt[Kt++]=String.fromCharCode((31&Lt)<<6|63&Bn)}else if(Lt>239&&Lt<365){var sr=((7&Lt)<<18|(63&(Bn=ft[Tt++]))<<12|(63&(di=ft[Tt++]))<<6|63&ft[Tt++])-65536;dt[Kt++]=String.fromCharCode(55296+(sr>>10)),dt[Kt++]=String.fromCharCode(56320+(1023&sr))}else{Bn=ft[Tt++];var di=ft[Tt++];dt[Kt++]=String.fromCharCode((15&Lt)<<12|(63&Bn)<<6|63&di)}}return dt.join("")}(this.decodeStringToByteArray(ft,dt))},decodeStringToByteArray:function(ft,dt){this.init_();for(var Tt=dt?this.charToByteMapWebSafe_:this.charToByteMap_,Kt=[],Lt=0;Lt<ft.length;){var Bn=Tt[ft.charAt(Lt++)],Oi=Lt<ft.length?Tt[ft.charAt(Lt)]:0,ir=++Lt<ft.length?Tt[ft.charAt(Lt)]:64,we=++Lt<ft.length?Tt[ft.charAt(Lt)]:64;if(++Lt,null==Bn||null==Oi||null==ir||null==we)throw Error();Kt.push(Bn<<2|Oi>>4),64!==ir&&(Kt.push(Oi<<4&240|ir>>2),64!==we&&Kt.push(ir<<6&192|we))}return Kt},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var ft=0;ft<this.ENCODED_VALS.length;ft++)this.byteToCharMap_[ft]=this.ENCODED_VALS.charAt(ft),this.charToByteMap_[this.byteToCharMap_[ft]]=ft,this.byteToCharMapWebSafe_[ft]=this.ENCODED_VALS_WEBSAFE.charAt(ft),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ft]]=ft,ft>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ft)]=ft,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ft)]=ft)}}},Be=function(ft){var dt=gt(ft);return wt.encodeByteArray(dt,!0)},je=function(ft){try{return wt.decodeString(ft,!0)}catch(dt){console.error("base64Decode failed: ",dt)}return null};function Ve(ft){return Et(void 0,ft)}function Et(ft,dt){if(!(dt instanceof Object))return dt;switch(dt.constructor){case Date:return new Date(dt.getTime());case Object:void 0===ft&&(ft={});break;case Array:ft=[];break;default:return dt}for(var Kt in dt)!dt.hasOwnProperty(Kt)||!lt(Kt)||(ft[Kt]=Et(ft[Kt],dt[Kt]));return ft}function lt(ft){return"__proto__"!==ft}var Ct=function(){function ft(){var dt=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Tt,Kt){dt.resolve=Tt,dt.reject=Kt})}return ft.prototype.wrapCallback=function(dt){var Tt=this;return function(Kt,Lt){Kt?Tt.reject(Kt):Tt.resolve(Lt),"function"==typeof dt&&(Tt.promise.catch(function(){}),1===dt.length?dt(Kt):dt(Kt,Lt))}},ft}();function zt(ft,dt){if(ft.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Kt=dt||"demo-project",Lt=ft.iat||0,Bn=ft.sub||ft.user_id;if(!Bn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var di=(0,s.pi)({iss:"https://securetoken.google.com/"+Kt,aud:Kt,iat:Lt,exp:Lt+3600,auth_time:Lt,sub:Bn,user_id:Bn,firebase:{sign_in_provider:"custom",identities:{}}},ft);return[wt.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),wt.encodeString(JSON.stringify(di),!1),""].join(".")}function an(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function On(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ft){return!1}}function dn(){return"object"==typeof self&&self.self===self}function Mt(){var ft="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ft&&void 0!==ft.id}function Ui(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $r(){return an().indexOf("Electron/")>=0}function Vn(){var ft=an();return ft.indexOf("MSIE ")>=0||ft.indexOf("Trident/")>=0}function Di(){return an().indexOf("MSAppHost/")>=0}function Ur(){return!1}function tr(){return!On()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var fn=function(ft){function dt(Tt,Kt,Lt){var Bn=ft.call(this,Kt)||this;return Bn.code=Tt,Bn.customData=Lt,Bn.name="FirebaseError",Object.setPrototypeOf(Bn,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(Bn,Yt.prototype.create),Bn}return(0,s.ZT)(dt,ft),dt}(Error),Yt=function(){function ft(dt,Tt,Kt){this.service=dt,this.serviceName=Tt,this.errors=Kt}return ft.prototype.create=function(dt){for(var Tt=[],Kt=1;Kt<arguments.length;Kt++)Tt[Kt-1]=arguments[Kt];var Lt=Tt[0]||{},Bn=this.service+"/"+dt,di=this.errors[dt],Oi=di?Fn(di,Lt):"Error",sr=this.serviceName+": "+Oi+" ("+Bn+").",ir=new fn(Bn,sr,Lt);return ir},ft}();function Fn(ft,dt){return ft.replace(hi,function(Tt,Kt){var Lt=dt[Kt];return null!=Lt?String(Lt):"<"+Kt+"?>"})}var hi=/\{\$([^}]+)}/g;function mi(ft){return JSON.parse(ft)}function Un(ft){return JSON.stringify(ft)}var ri=function(ft){var dt={},Tt={},Kt={},Lt="";try{var Bn=ft.split(".");dt=mi(je(Bn[0])||""),Tt=mi(je(Bn[1])||""),Lt=Bn[2],Kt=Tt.d||{},delete Tt.d}catch(di){}return{header:dt,claims:Tt,data:Kt,signature:Lt}},xi=function(ft){var Tt=ri(ft).claims;return!!Tt&&"object"==typeof Tt&&Tt.hasOwnProperty("iat")},li=function(ft){var dt=ri(ft).claims;return"object"==typeof dt&&!0===dt.admin};function qi(ft,dt){return Object.prototype.hasOwnProperty.call(ft,dt)}function Io(ft,dt){if(Object.prototype.hasOwnProperty.call(ft,dt))return ft[dt]}function _r(ft){for(var dt in ft)if(Object.prototype.hasOwnProperty.call(ft,dt))return!1;return!0}function io(ft,dt,Tt){var Kt={};for(var Lt in ft)Object.prototype.hasOwnProperty.call(ft,Lt)&&(Kt[Lt]=dt.call(Tt,ft[Lt],Lt,ft));return Kt}function Ri(ft){for(var dt=[],Tt=function(sr,ir){Array.isArray(ir)?ir.forEach(function(Ge){dt.push(encodeURIComponent(sr)+"="+encodeURIComponent(Ge))}):dt.push(encodeURIComponent(sr)+"="+encodeURIComponent(ir))},Kt=0,Lt=Object.entries(ft);Kt<Lt.length;Kt++){var Bn=Lt[Kt];Tt(Bn[0],Bn[1])}return dt.length?"&"+dt.join("&"):""}var Si=function(){function ft(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var dt=1;dt<this.blockSize;++dt)this.pad_[dt]=0;this.reset()}return ft.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ft.prototype.compress_=function(dt,Tt){Tt||(Tt=0);var Kt=this.W_;if("string"==typeof dt)for(var Lt=0;Lt<16;Lt++)Kt[Lt]=dt.charCodeAt(Tt)<<24|dt.charCodeAt(Tt+1)<<16|dt.charCodeAt(Tt+2)<<8|dt.charCodeAt(Tt+3),Tt+=4;else for(Lt=0;Lt<16;Lt++)Kt[Lt]=dt[Tt]<<24|dt[Tt+1]<<16|dt[Tt+2]<<8|dt[Tt+3],Tt+=4;for(Lt=16;Lt<80;Lt++)Kt[Lt]=4294967295&((Bn=Kt[Lt-3]^Kt[Lt-8]^Kt[Lt-14]^Kt[Lt-16])<<1|Bn>>>31);var we,De,di=this.chain_[0],Oi=this.chain_[1],sr=this.chain_[2],ir=this.chain_[3],Ge=this.chain_[4];for(Lt=0;Lt<80;Lt++){Lt<40?Lt<20?(we=ir^Oi&(sr^ir),De=1518500249):(we=Oi^sr^ir,De=1859775393):Lt<60?(we=Oi&sr|ir&(Oi|sr),De=2400959708):(we=Oi^sr^ir,De=3395469782);var Bn=(di<<5|di>>>27)+we+Ge+De+Kt[Lt]&4294967295;Ge=ir,ir=sr,sr=4294967295&(Oi<<30|Oi>>>2),Oi=di,di=Bn}this.chain_[0]=this.chain_[0]+di&4294967295,this.chain_[1]=this.chain_[1]+Oi&4294967295,this.chain_[2]=this.chain_[2]+sr&4294967295,this.chain_[3]=this.chain_[3]+ir&4294967295,this.chain_[4]=this.chain_[4]+Ge&4294967295},ft.prototype.update=function(dt,Tt){if(null!=dt){void 0===Tt&&(Tt=dt.length);for(var Kt=Tt-this.blockSize,Lt=0,Bn=this.buf_,di=this.inbuf_;Lt<Tt;){if(0===di)for(;Lt<=Kt;)this.compress_(dt,Lt),Lt+=this.blockSize;if("string"==typeof dt){for(;Lt<Tt;)if(Bn[di]=dt.charCodeAt(Lt),++Lt,++di===this.blockSize){this.compress_(Bn),di=0;break}}else for(;Lt<Tt;)if(Bn[di]=dt[Lt],++Lt,++di===this.blockSize){this.compress_(Bn),di=0;break}}this.inbuf_=di,this.total_+=Tt}},ft.prototype.digest=function(){var dt=[],Tt=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Kt=this.blockSize-1;Kt>=56;Kt--)this.buf_[Kt]=255&Tt,Tt/=256;this.compress_(this.buf_);var Lt=0;for(Kt=0;Kt<5;Kt++)for(var Bn=24;Bn>=0;Bn-=8)dt[Lt]=this.chain_[Kt]>>Bn&255,++Lt;return dt},ft}();function uo(ft,dt){var Tt=new Po(ft,dt);return Tt.subscribe.bind(Tt)}var Po=function(){function ft(dt,Tt){var Kt=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Tt,this.task.then(function(){dt(Kt)}).catch(function(Lt){Kt.error(Lt)})}return ft.prototype.next=function(dt){this.forEachObserver(function(Tt){Tt.next(dt)})},ft.prototype.error=function(dt){this.forEachObserver(function(Tt){Tt.error(dt)}),this.close(dt)},ft.prototype.complete=function(){this.forEachObserver(function(dt){dt.complete()}),this.close()},ft.prototype.subscribe=function(dt,Tt,Kt){var Bn,Lt=this;if(void 0===dt&&void 0===Tt&&void 0===Kt)throw new Error("Missing Observer.");void 0===(Bn=function(ft,dt){if("object"!=typeof ft||null===ft)return!1;for(var Tt=0,Kt=["next","error","complete"];Tt<Kt.length;Tt++){var Lt=Kt[Tt];if(Lt in ft&&"function"==typeof ft[Lt])return!0}return!1}(dt)?dt:{next:dt,error:Tt,complete:Kt}).next&&(Bn.next=Hr),void 0===Bn.error&&(Bn.error=Hr),void 0===Bn.complete&&(Bn.complete=Hr);var di=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Lt.finalError?Bn.error(Lt.finalError):Bn.complete()}catch(Oi){}}),this.observers.push(Bn),di},ft.prototype.unsubscribeOne=function(dt){void 0===this.observers||void 0===this.observers[dt]||(delete this.observers[dt],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ft.prototype.forEachObserver=function(dt){if(!this.finalized)for(var Tt=0;Tt<this.observers.length;Tt++)this.sendOne(Tt,dt)},ft.prototype.sendOne=function(dt,Tt){var Kt=this;this.task.then(function(){if(void 0!==Kt.observers&&void 0!==Kt.observers[dt])try{Tt(Kt.observers[dt])}catch(Lt){"undefined"!=typeof console&&console.error&&console.error(Lt)}})},ft.prototype.close=function(dt){var Tt=this;this.finalized||(this.finalized=!0,void 0!==dt&&(this.finalError=dt),this.task.then(function(){Tt.observers=void 0,Tt.onNoObservers=void 0}))},ft}();function Hr(){}var wr=function(ft,dt,Tt,Kt){var Lt;if(Kt<dt?Lt="at least "+dt:Kt>Tt&&(Lt=0===Tt?"none":"no more than "+Tt),Lt)throw new Error(ft+" failed: Was called with "+Kt+(1===Kt?" argument.":" arguments.")+" Expects "+Lt+".")};function is(ft,dt){return ft+" failed: "+dt+" argument "}function ho(ft,dt,Tt,Kt){if((!Kt||Tt)&&"function"!=typeof Tt)throw new Error(is(ft,dt)+"must be a valid function.")}function Gr(ft,dt,Tt,Kt){if((!Kt||Tt)&&("object"!=typeof Tt||null===Tt))throw new Error(is(ft,dt)+"must be a valid context object.")}var rs=function(ft){for(var dt=[],Tt=0,Kt=0;Kt<ft.length;Kt++){var Lt=ft.charCodeAt(Kt);if(Lt>=55296&&Lt<=56319){var Bn=Lt-55296;Kt++,Ee(Kt<ft.length,"Surrogate pair missing trail surrogate."),Lt=65536+(Bn<<10)+(ft.charCodeAt(Kt)-56320)}Lt<128?dt[Tt++]=Lt:Lt<2048?(dt[Tt++]=Lt>>6|192,dt[Tt++]=63&Lt|128):Lt<65536?(dt[Tt++]=Lt>>12|224,dt[Tt++]=Lt>>6&63|128,dt[Tt++]=63&Lt|128):(dt[Tt++]=Lt>>18|240,dt[Tt++]=Lt>>12&63|128,dt[Tt++]=Lt>>6&63|128,dt[Tt++]=63&Lt|128)}return dt},jr=function(ft){for(var dt=0,Tt=0;Tt<ft.length;Tt++){var Kt=ft.charCodeAt(Tt);Kt<128?dt++:Kt<2048?dt+=2:Kt>=55296&&Kt<=56319?(dt+=4,Tt++):dt+=3}return dt};function cc(ft){return ft&&ft._delegate?ft._delegate:ft}},3300:(ai,_n,nt)=>{"use strict";var s;function Vt(ve){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(ve)}function Ee(ve,d){if(!(ve instanceof d))throw new TypeError("Cannot call a class as a function")}function k(ve,d){for(var p=0;p<d.length;p++){var y=d[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(ve,y.key,y)}}function gt(ve,d,p){return d&&k(ve.prototype,d),p&&k(ve,p),ve}function Dt(ve,d,p){return d in ve?Object.defineProperty(ve,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):ve[d]=p,ve}function wt(ve,d){var p=Object.keys(ve);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(ve);d&&(y=y.filter(function(C){return Object.getOwnPropertyDescriptor(ve,C).enumerable})),p.push.apply(p,y)}return p}function Be(ve){for(var d=1;d<arguments.length;d++){var p=null!=arguments[d]?arguments[d]:{};d%2?wt(Object(p),!0).forEach(function(y){Dt(ve,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(p)):wt(Object(p)).forEach(function(y){Object.defineProperty(ve,y,Object.getOwnPropertyDescriptor(p,y))})}return ve}function je(ve,d){if("function"!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(d&&d.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),d&&Et(ve,d)}function Ve(ve){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(d){return d.__proto__||Object.getPrototypeOf(d)})(ve)}function Et(ve,d){return(Et=Object.setPrototypeOf||function(p,y){return p.__proto__=y,p})(ve,d)}function lt(ve,d){return!d||"object"!=typeof d&&"function"!=typeof d?function(p){if(void 0===p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}(ve):d}function Ct(ve){var d=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(p){return!1}}();return function(){var p,y=Ve(ve);if(d){var C=Ve(this).constructor;p=Reflect.construct(y,arguments,C)}else p=y.apply(this,arguments);return lt(this,p)}}function zt(ve){return function(d){if(Array.isArray(d))return an(d)}(ve)||function(d){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d))return Array.from(d)}(ve)||function(d,p){if(d){if("string"==typeof d)return an(d,p);var y=Object.prototype.toString.call(d).slice(8,-1);if("Object"===y&&d.constructor&&(y=d.constructor.name),"Map"===y||"Set"===y)return Array.from(d);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return an(d,p)}}(ve)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(ve,d){(null==d||d>ve.length)&&(d=ve.length);for(var p=0,y=new Array(d);p<d;p++)y[p]=ve[p];return y}var Qe=function(){function ve(){Ee(this,ve)}return gt(ve,[{key:"shadeRGBColor",value:function(d,p){var y=p.split(","),C=d<0?0:255,M=d<0?-1*d:d,L=parseInt(y[0].slice(4),10),R=parseInt(y[1],10),H=parseInt(y[2],10);return"rgb("+(Math.round((C-L)*M)+L)+","+(Math.round((C-R)*M)+R)+","+(Math.round((C-H)*M)+H)+")"}},{key:"shadeHexColor",value:function(d,p){var y=parseInt(p.slice(1),16),C=d<0?0:255,M=d<0?-1*d:d,L=y>>16,R=y>>8&255,H=255&y;return"#"+(16777216+65536*(Math.round((C-L)*M)+L)+256*(Math.round((C-R)*M)+R)+(Math.round((C-H)*M)+H)).toString(16).slice(1)}},{key:"shadeColor",value:function(d,p){return ve.isColorHex(p)?this.shadeHexColor(d,p):this.shadeRGBColor(d,p)}}],[{key:"bind",value:function(d,p){return function(){return d.apply(p,arguments)}}},{key:"isObject",value:function(d){return d&&"object"===Vt(d)&&!Array.isArray(d)&&null!=d}},{key:"listToArray",value:function(d){var p,y=[];for(p=0;p<d.length;p++)y[p]=d[p];return y}},{key:"extend",value:function(d,p){var y=this;"function"!=typeof Object.assign&&(Object.assign=function(M){if(null==M)throw new TypeError("Cannot convert undefined or null to object");for(var L=Object(M),R=1;R<arguments.length;R++){var H=arguments[R];if(null!=H)for(var G in H)H.hasOwnProperty(G)&&(L[G]=H[G])}return L});var C=Object.assign({},d);return this.isObject(d)&&this.isObject(p)&&Object.keys(p).forEach(function(M){y.isObject(p[M])&&M in d?C[M]=y.extend(d[M],p[M]):Object.assign(C,Dt({},M,p[M]))}),C}},{key:"extendArray",value:function(d,p){var y=[];return d.map(function(C){y.push(ve.extend(p,C))}),y}},{key:"monthMod",value:function(d){return d%12}},{key:"clone",value:function(d){if("[object Array]"===Object.prototype.toString.call(d)){for(var p=[],y=0;y<d.length;y++)p[y]=this.clone(d[y]);return p}if("[object Null]"===Object.prototype.toString.call(d))return null;if("[object Date]"===Object.prototype.toString.call(d))return d;if("object"===Vt(d)){var C={};for(var M in d)d.hasOwnProperty(M)&&(C[M]=this.clone(d[M]));return C}return d}},{key:"log10",value:function(d){return Math.log(d)/Math.LN10}},{key:"roundToBase10",value:function(d){return Math.pow(10,Math.floor(Math.log10(d)))}},{key:"roundToBase",value:function(d,p){return Math.pow(p,Math.floor(Math.log(d)/Math.log(p)))}},{key:"parseNumber",value:function(d){return null===d?d:parseFloat(d)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(d){var p=String(d).split(/[eE]/);if(1===p.length)return p[0];var y="",C=d<0?"-":"",M=p[0].replace(".",""),L=Number(p[1])+1;if(L<0){for(y=C+"0.";L++;)y+="0";return y+M.replace(/^-/,"")}for(L-=M.length;L--;)y+="0";return M+y}},{key:"getDimensions",value:function(d){var p=getComputedStyle(d,null),y=d.clientHeight,C=d.clientWidth;return y-=parseFloat(p.paddingTop)+parseFloat(p.paddingBottom),[C-=parseFloat(p.paddingLeft)+parseFloat(p.paddingRight),y]}},{key:"getBoundingClientRect",value:function(d){var p=d.getBoundingClientRect();return{top:p.top,right:p.right,bottom:p.bottom,left:p.left,width:d.clientWidth,height:d.clientHeight,x:p.left,y:p.top}}},{key:"getLargestStringFromArr",value:function(d){return d.reduce(function(p,y){return Array.isArray(y)&&(y=y.reduce(function(C,M){return C.length>M.length?C:M})),p.length>y.length?p:y},0)}},{key:"hexToRgba",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==d.substring(0,1)&&(d="#999999");var y=d.replace("#","");y=y.match(new RegExp("(.{"+y.length/3+"})","g"));for(var C=0;C<y.length;C++)y[C]=parseInt(1===y[C].length?y[C]+y[C]:y[C],16);return void 0!==p&&y.push(p),"rgba("+y.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(d){return parseFloat(d.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(d){return(d=d.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===d.length?"#"+("0"+parseInt(d[1],10).toString(16)).slice(-2)+("0"+parseInt(d[2],10).toString(16)).slice(-2)+("0"+parseInt(d[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(d){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(d)}},{key:"getPolygonPos",value:function(d,p){for(var y=[],C=2*Math.PI/p,M=0;M<p;M++){var L={};L.x=d*Math.sin(M*C),L.y=-d*Math.cos(M*C),y.push(L)}return y}},{key:"polarToCartesian",value:function(d,p,y,C){var M=(C-90)*Math.PI/180;return{x:d+y*Math.cos(M),y:p+y*Math.sin(M)}}},{key:"escapeString",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",y=d.toString().slice();return y.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,p)}},{key:"negToZero",value:function(d){return d<0?0:d}},{key:"moveIndexInArray",value:function(d,p,y){if(y>=d.length)for(var C=y-d.length+1;C--;)d.push(void 0);return d.splice(y,0,d.splice(p,1)[0]),d}},{key:"extractNumber",value:function(d){return parseFloat(d.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(d,p){for(;(d=d.parentElement)&&!d.classList.contains(p););return d}},{key:"setELstyles",value:function(d,p){for(var y in p)p.hasOwnProperty(y)&&(d.style.key=p[y])}},{key:"isNumber",value:function(d){return!isNaN(d)&&parseFloat(Number(d))===d&&!isNaN(parseInt(d,10))}},{key:"isFloat",value:function(d){return Number(d)===d&&d%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var d=window.navigator.userAgent,p=d.indexOf("MSIE ");if(p>0)return parseInt(d.substring(p+5,d.indexOf(".",p)),10);if(d.indexOf("Trident/")>0){var y=d.indexOf("rv:");return parseInt(d.substring(y+3,d.indexOf(".",y)),10)}var C=d.indexOf("Edge/");return C>0&&parseInt(d.substring(C+5,d.indexOf(".",C)),10)}},{key:"sanitizeDom",value:function(d){return String(d).replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;")}}]),ve}(),On=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.setEasingFunctions()}return gt(ve,[{key:"setEasingFunctions",value:function(){var d;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":d="-";break;case"easein":d="<";break;case"easeout":d=">";break;case"easeinout":d="<>";break;case"swing":d=function(p){var y=1.70158;return(p-=1)*p*((y+1)*p+y)+1};break;case"bounce":d=function(p){return p<1/2.75?7.5625*p*p:p<2/2.75?7.5625*(p-=1.5/2.75)*p+.75:p<2.5/2.75?7.5625*(p-=2.25/2.75)*p+.9375:7.5625*(p-=2.625/2.75)*p+.984375};break;case"elastic":d=function(p){return p===!!p?p:Math.pow(2,-10*p)*Math.sin((p-.075)*(2*Math.PI)/.3)+1};break;default:d="<>"}this.w.globals.easing=d}}},{key:"animateLine",value:function(d,p,y,C){d.attr(p).animate(C).attr(y)}},{key:"animateMarker",value:function(d,p,y,C,M,L){p||(p=0),d.attr({r:p,width:p,height:p}).animate(C,M).attr({r:y,width:y.width,height:y.height}).afterAll(function(){L()})}},{key:"animateCircle",value:function(d,p,y,C,M){d.attr({r:p.r,cx:p.cx,cy:p.cy}).animate(C,M).attr({r:y.r,cx:y.cx,cy:y.cy})}},{key:"animateRect",value:function(d,p,y,C,M){d.attr(p).animate(C).attr(y).afterAll(function(){return M()})}},{key:"animatePathsGradually",value:function(d){var J=this.w,te=0;J.config.chart.animations.animateGradually.enabled&&(te=J.config.chart.animations.animateGradually.delay),J.config.chart.animations.dynamicAnimation.enabled&&J.globals.dataChanged&&"bar"!==J.config.chart.type&&(te=0),this.morphSVG(d.el,d.realIndex,d.j,"line"!==J.config.chart.type||J.globals.comboCharts?d.fill:"stroke",d.pathFrom,d.pathTo,d.speed,d.delay*te)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(d){d.el.classList.remove("apexcharts-element-hidden")})}},{key:"animationCompleted",value:function(d){var p=this.w;p.globals.animationEnded||(p.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof p.config.chart.events.animationEnd&&p.config.chart.events.animationEnd(this.ctx,{el:d,w:p}))}},{key:"morphSVG",value:function(d,p,y,C,M,L,R,H){var G=this,J=this.w;M||(M=d.attr("pathFrom")),L||(L=d.attr("pathTo"));var te=function(K){return"radar"===J.config.chart.type&&(R=1),"M 0 ".concat(J.globals.gridHeight)};(!M||M.indexOf("undefined")>-1||M.indexOf("NaN")>-1)&&(M=te()),(!L||L.indexOf("undefined")>-1||L.indexOf("NaN")>-1)&&(L=te()),J.globals.shouldAnimate||(R=1),d.plot(M).animate(1,J.globals.easing,H).plot(M).animate(R,J.globals.easing,H).plot(L).afterAll(function(){Qe.isNumber(y)?y===J.globals.series[J.globals.maxValsInArrayIndex].length-2&&J.globals.shouldAnimate&&G.animationCompleted(d):"none"!==C&&J.globals.shouldAnimate&&(!J.globals.comboCharts&&p===J.globals.series.length-1||J.globals.comboCharts)&&G.animationCompleted(d),G.showDelayedElements()})}}]),ve}(),dn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"getDefaultFilter",value:function(d,p){var y=this.w;d.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==y.config.states.normal.filter?this.applyFilter(d,p,y.config.states.normal.filter.type,y.config.states.normal.filter.value):y.config.chart.dropShadow.enabled&&this.dropShadow(d,y.config.chart.dropShadow,p)}},{key:"addNormalFilter",value:function(d,p){var y=this.w;y.config.chart.dropShadow.enabled&&!d.node.classList.contains("apexcharts-marker")&&this.dropShadow(d,y.config.chart.dropShadow,p)}},{key:"addLightenFilter",value:function(d,p,y){var C=this,M=this.w,L=y.intensity;d.unfilter(!0),new window.SVG.Filter,d.filter(function(R){var H=M.config.chart.dropShadow;(H.enabled?C.addShadow(R,p,H):R).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:L}})}),d.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(d.filterer.node)}},{key:"addDarkenFilter",value:function(d,p,y){var C=this,M=this.w,L=y.intensity;d.unfilter(!0),new window.SVG.Filter,d.filter(function(R){var H=M.config.chart.dropShadow;(H.enabled?C.addShadow(R,p,H):R).componentTransfer({rgb:{type:"linear",slope:L}})}),d.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(d.filterer.node)}},{key:"applyFilter",value:function(d,p,y){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(y){case"none":this.addNormalFilter(d,p);break;case"lighten":this.addLightenFilter(d,p,{intensity:C});break;case"darken":this.addDarkenFilter(d,p,{intensity:C})}}},{key:"addShadow",value:function(d,p,y){var C=y.blur,M=y.top,L=y.left,R=y.color,H=y.opacity,G=d.flood(Array.isArray(R)?R[p]:R,H).composite(d.sourceAlpha,"in").offset(L,M).gaussianBlur(C).merge(d.source);return d.blend(d.source,G)}},{key:"dropShadow",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,C=p.top,M=p.left,L=p.blur,R=p.color,H=p.opacity,G=p.noUserSpaceOnUse,J=this.w;return d.unfilter(!0),Qe.isIE()&&"radialBar"===J.config.chart.type||(R=Array.isArray(R)?R[y]:R,d.filter(function(te){var K;K=Qe.isSafari()||Qe.isFirefox()||Qe.isIE()?te.flood(R,H).composite(te.sourceAlpha,"in").offset(M,C).gaussianBlur(L):te.flood(R,H).composite(te.sourceAlpha,"in").offset(M,C).gaussianBlur(L).merge(te.source),te.blend(te.source,K)}),G||d.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(d.filterer.node)),d}},{key:"setSelectionFilter",value:function(d,p,y){var C=this.w;if(void 0!==C.globals.selectedDataPoints[p]&&C.globals.selectedDataPoints[p].indexOf(y)>-1){d.node.setAttribute("selected",!0);var M=C.config.states.active.filter;"none"!==M&&this.applyFilter(d,p,M.type,M.value)}}},{key:"_scaleFilterSize",value:function(d){!function(p){for(var y in p)p.hasOwnProperty(y)&&d.setAttribute(y,p[y])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),ve}(),Mt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"drawLine",value:function(d,p,y,C){var M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,H=this.w,G=H.globals.dom.Paper.line().attr({x1:d,y1:p,x2:y,y2:C,stroke:M,"stroke-dasharray":L,"stroke-width":R});return G}},{key:"drawRect",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,H=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,G=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,J=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,te=this.w,K=te.globals.dom.Paper.rect();return K.attr({x:d,y:p,width:y>0?y:0,height:C>0?C:0,rx:M,ry:M,opacity:R,"stroke-width":null!==H?H:0,stroke:null!==G?G:"none","stroke-dasharray":J}),K.node.setAttribute("fill",L),K}},{key:"drawPolygon",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",M=this.w,L=M.globals.dom.Paper.polygon(d).attr({fill:C,stroke:p,"stroke-width":y});return L}},{key:"drawCircle",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=this.w;d<0&&(d=0);var C=y.globals.dom.Paper.circle(2*d);return null!==p&&C.attr(p),C}},{key:"drawPath",value:function(d){var p=d.d,y=void 0===p?"":p,C=d.stroke,M=void 0===C?"#a8a8a8":C,L=d.strokeWidth,R=void 0===L?1:L,H=d.fill,G=d.fillOpacity,J=void 0===G?1:G,te=d.strokeOpacity,K=void 0===te?1:te,ae=d.classes,pe=d.strokeLinecap,ge=void 0===pe?null:pe,xe=d.strokeDashArray,Me=void 0===xe?0:xe,ze=this.w;return null===ge&&(ge=ze.config.stroke.lineCap),(y.indexOf("undefined")>-1||y.indexOf("NaN")>-1)&&(y="M 0 ".concat(ze.globals.gridHeight)),ze.globals.dom.Paper.path(y).attr({fill:H,"fill-opacity":J,stroke:M,"stroke-opacity":K,"stroke-linecap":ge,"stroke-width":R,"stroke-dasharray":Me,class:ae})}},{key:"group",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,p=this.w,y=p.globals.dom.Paper.group();return null!==d&&y.attr(d),y}},{key:"move",value:function(d,p){return["M",d,p].join(" ")}},{key:"line",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=null;return null===y?C=["L",d,p].join(" "):"H"===y?C=["H",d].join(" "):"V"===y&&(C=["V",p].join(" ")),C}},{key:"curve",value:function(d,p,y,C,M,L){return["C",d,p,y,C,M,L].join(" ")}},{key:"quadraticCurve",value:function(d,p,y,C){return["Q",d,p,y,C].join(" ")}},{key:"arc",value:function(d,p,y,C,M,L,R){var H=arguments.length>7&&void 0!==arguments[7]&&arguments[7],G="A";H&&(G="a");var J=[G,d,p,y,C,M,L,R].join(" ");return J}},{key:"renderPaths",value:function(d){var p,y=d.j,C=d.realIndex,M=d.pathFrom,L=d.pathTo,R=d.stroke,H=d.strokeWidth,G=d.strokeLinecap,J=d.fill,te=d.animationDelay,K=d.initialSpeed,ae=d.dataChangeSpeed,pe=d.className,ge=d.shouldClipToGrid,xe=void 0===ge||ge,Me=d.bindEventsOnPaths,ze=void 0===Me||Me,Ke=d.drawShadow,Y=void 0===Ke||Ke,ne=this.w,be=new dn(this.ctx),Ie=new On(this.ctx),Je=this.w.config.chart.animations.enabled,Nt=Je&&this.w.config.chart.animations.dynamicAnimation.enabled,St=!!(Je&&!ne.globals.resized||Nt&&ne.globals.dataChanged&&ne.globals.shouldAnimate);St?p=M:(p=L,ne.globals.animationEnded=!0);var gn,Xt=ne.config.stroke.dashArray;gn=Array.isArray(Xt)?Xt[C]:ne.config.stroke.dashArray;var hn=this.drawPath({d:p,stroke:R,strokeWidth:H,fill:J,fillOpacity:1,classes:pe,strokeLinecap:G,strokeDashArray:gn});hn.attr("index",C),xe&&hn.attr({"clip-path":"url(#gridRectMask".concat(ne.globals.cuid,")")}),"none"!==ne.config.states.normal.filter.type?be.getDefaultFilter(hn,C):ne.config.chart.dropShadow.enabled&&Y&&(!ne.config.chart.dropShadow.enabledOnSeries||ne.config.chart.dropShadow.enabledOnSeries&&-1!==ne.config.chart.dropShadow.enabledOnSeries.indexOf(C))&&be.dropShadow(hn,ne.config.chart.dropShadow,C),ze&&(hn.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,hn)),hn.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,hn)),hn.node.addEventListener("mousedown",this.pathMouseDown.bind(this,hn))),hn.attr({pathTo:L,pathFrom:M});var Bi={el:hn,j:y,realIndex:C,pathFrom:M,pathTo:L,fill:J,strokeWidth:H,delay:te};return!Je||ne.globals.resized||ne.globals.dataChanged?!ne.globals.resized&&ne.globals.dataChanged||Ie.showDelayedElements():Ie.animatePathsGradually(Be(Be({},Bi),{},{speed:K})),ne.globals.dataChanged&&Nt&&St&&Ie.animatePathsGradually(Be(Be({},Bi),{},{speed:ae})),hn}},{key:"drawPattern",value:function(d,p,y){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,L=this.w,R=L.globals.dom.Paper.pattern(p,y,function(H){"horizontalLines"===d?H.line(0,0,y,0).stroke({color:C,width:M+1}):"verticalLines"===d?H.line(0,0,0,p).stroke({color:C,width:M+1}):"slantedLines"===d?H.line(0,0,p,y).stroke({color:C,width:M}):"squares"===d?H.rect(p,y).fill("none").stroke({color:C,width:M}):"circles"===d&&H.circle(p).fill("none").stroke({color:C,width:M})});return R}},{key:"drawGradient",value:function(d,p,y,C,M){var L,R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,G=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,J=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,te=this.w;p.length<9&&0===p.indexOf("#")&&(p=Qe.hexToRgba(p,C)),y.length<9&&0===y.indexOf("#")&&(y=Qe.hexToRgba(y,M));var K=0,ae=1,pe=1,ge=null;null!==H&&(K=void 0!==H[0]?H[0]/100:0,ae=void 0!==H[1]?H[1]/100:1,pe=void 0!==H[2]?H[2]/100:1,ge=void 0!==H[3]?H[3]/100:null);var xe=!("donut"!==te.config.chart.type&&"pie"!==te.config.chart.type&&"polarArea"!==te.config.chart.type&&"bubble"!==te.config.chart.type);if(L=te.globals.dom.Paper.gradient(xe?"radial":"linear",null===G||0===G.length?function(Ke){Ke.at(K,p,C),Ke.at(ae,y,M),Ke.at(pe,y,M),null!==ge&&Ke.at(ge,p,C)}:function(Ke){(Array.isArray(G[J])?G[J]:G).forEach(function(Y){Ke.at(Y.offset/100,Y.color,Y.opacity)})}),xe){var Me=te.globals.gridWidth/2,ze=te.globals.gridHeight/2;L.attr("bubble"!==te.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:Me,cy:ze,r:R}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===d?L.from(0,0).to(0,1):"diagonal"===d?L.from(0,0).to(1,1):"horizontal"===d?L.from(0,1).to(1,1):"diagonal2"===d&&L.from(1,0).to(0,1);return L}},{key:"drawText",value:function(d){var p,y=d.x,C=d.y,M=d.text,L=d.textAnchor,R=d.fontSize,H=d.fontFamily,G=d.fontWeight,J=d.foreColor,te=d.opacity,K=d.cssClass,ae=void 0===K?"":K,pe=d.isPlainText,ge=void 0===pe||pe,xe=this.w;return void 0===M&&(M=""),L||(L="start"),J&&J.length||(J=xe.config.chart.foreColor),H=H||xe.config.chart.fontFamily,G=G||"regular",(p=Array.isArray(M)?xe.globals.dom.Paper.text(function(Me){for(var ze=0;ze<M.length;ze++)0===ze?Me.tspan(M[ze]):Me.tspan(M[ze]).newLine()}):ge?xe.globals.dom.Paper.plain(M):xe.globals.dom.Paper.text(function(Me){return Me.tspan(M)})).attr({x:y,y:C,"text-anchor":L,"dominant-baseline":"auto","font-size":R,"font-family":H,"font-weight":G,fill:J,class:"apexcharts-text "+ae}),p.node.style.fontFamily=H,p.node.style.opacity=te,p}},{key:"drawMarker",value:function(d,p,y){d=d||0;var C=y.pSize||0,M=null;if("square"===y.shape||"rect"===y.shape){var L=void 0===y.pRadius?C/2:y.pRadius;null!==p&&C||(C=0,L=0);var R=1.2*C+L,H=this.drawRect(R,R,R,R,L);H.attr({x:d-R/2,y:p-R/2,cx:d,cy:p,class:y.class?y.class:"",fill:y.pointFillColor,"fill-opacity":y.pointFillOpacity?y.pointFillOpacity:1,stroke:y.pointStrokeColor,"stroke-width":y.pointStrokeWidth?y.pointStrokeWidth:0,"stroke-opacity":y.pointStrokeOpacity?y.pointStrokeOpacity:1}),M=H}else"circle"!==y.shape&&y.shape||(Qe.isNumber(p)||(C=0,p=0),M=this.drawCircle(C,{cx:d,cy:p,class:y.class?y.class:"",stroke:y.pointStrokeColor,fill:y.pointFillColor,"fill-opacity":y.pointFillOpacity?y.pointFillOpacity:1,"stroke-width":y.pointStrokeWidth?y.pointStrokeWidth:0,"stroke-opacity":y.pointStrokeOpacity?y.pointStrokeOpacity:1}));return M}},{key:"pathMouseEnter",value:function(d,p){var y=this.w,C=new dn(this.ctx),M=parseInt(d.node.getAttribute("index"),10),L=parseInt(d.node.getAttribute("j"),10);if("function"==typeof y.config.chart.events.dataPointMouseEnter&&y.config.chart.events.dataPointMouseEnter(p,this.ctx,{seriesIndex:M,dataPointIndex:L,w:y}),this.ctx.events.fireEvent("dataPointMouseEnter",[p,this.ctx,{seriesIndex:M,dataPointIndex:L,w:y}]),("none"===y.config.states.active.filter.type||"true"!==d.node.getAttribute("selected"))&&"none"!==y.config.states.hover.filter.type&&"none"!==y.config.states.active.filter.type&&!y.globals.isTouchDevice){var R=y.config.states.hover.filter;C.applyFilter(d,M,R.type,R.value)}}},{key:"pathMouseLeave",value:function(d,p){var y=this.w,C=new dn(this.ctx),M=parseInt(d.node.getAttribute("index"),10),L=parseInt(d.node.getAttribute("j"),10);"function"==typeof y.config.chart.events.dataPointMouseLeave&&y.config.chart.events.dataPointMouseLeave(p,this.ctx,{seriesIndex:M,dataPointIndex:L,w:y}),this.ctx.events.fireEvent("dataPointMouseLeave",[p,this.ctx,{seriesIndex:M,dataPointIndex:L,w:y}]),"none"!==y.config.states.active.filter.type&&"true"===d.node.getAttribute("selected")||"none"!==y.config.states.hover.filter.type&&C.getDefaultFilter(d,M)}},{key:"pathMouseDown",value:function(d,p){var y=this.w,C=new dn(this.ctx),M=parseInt(d.node.getAttribute("index"),10),L=parseInt(d.node.getAttribute("j"),10),R="false";if("true"===d.node.getAttribute("selected")){if(d.node.setAttribute("selected","false"),y.globals.selectedDataPoints[M].indexOf(L)>-1){var H=y.globals.selectedDataPoints[M].indexOf(L);y.globals.selectedDataPoints[M].splice(H,1)}}else{if(!y.config.states.active.allowMultipleDataPointsSelection&&y.globals.selectedDataPoints.length>0){y.globals.selectedDataPoints=[];var G=y.globals.dom.Paper.select(".apexcharts-series path").members,J=y.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,te=function(ae){Array.prototype.forEach.call(ae,function(pe){pe.node.setAttribute("selected","false"),C.getDefaultFilter(pe,M)})};te(G),te(J)}d.node.setAttribute("selected","true"),R="true",void 0===y.globals.selectedDataPoints[M]&&(y.globals.selectedDataPoints[M]=[]),y.globals.selectedDataPoints[M].push(L)}if("true"===R){var K=y.config.states.active.filter;"none"!==K&&C.applyFilter(d,M,K.type,K.value)}else"none"!==y.config.states.active.filter.type&&C.getDefaultFilter(d,M);"function"==typeof y.config.chart.events.dataPointSelection&&y.config.chart.events.dataPointSelection(p,this.ctx,{selectedDataPoints:y.globals.selectedDataPoints,seriesIndex:M,dataPointIndex:L,w:y}),p&&this.ctx.events.fireEvent("dataPointSelection",[p,this.ctx,{selectedDataPoints:y.globals.selectedDataPoints,seriesIndex:M,dataPointIndex:L,w:y}])}},{key:"rotateAroundCenter",value:function(d){var p=d.getBBox();return{x:p.x+p.width/2,y:p.y+p.height/2}}},{key:"getTextRects",value:function(d,p,y,C){var M=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],L=this.w,R=this.drawText({x:-200,y:-200,text:d,textAnchor:"start",fontSize:p,fontFamily:y,foreColor:"#fff",opacity:0});C&&R.attr("transform",C),L.globals.dom.Paper.add(R);var H=R.bbox();return M||(H=R.node.getBoundingClientRect()),R.remove(),{width:H.width,height:H.height}}},{key:"placeTextWithEllipsis",value:function(d,p,y){if("function"==typeof d.getComputedTextLength&&(d.textContent=p,p.length>0&&d.getComputedTextLength()>=y/1.1)){for(var C=p.length-3;C>0;C-=3)if(d.getSubStringLength(0,C)<=y/1.1)return void(d.textContent=p.substring(0,C)+"...");d.textContent="."}}}],[{key:"setAttrs",value:function(d,p){for(var y in p)p.hasOwnProperty(y)&&d.setAttribute(y,p[y])}}]),ve}(),Ui=function(){function ve(d){Ee(this,ve),this.w=d.w,this.annoCtx=d}return gt(ve,[{key:"setOrientations",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=this.w;if("vertical"===d.label.orientation){var C=null!==p?p:0,M=y.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(C,"']"));if(null!==M){var L=M.getBoundingClientRect();M.setAttribute("x",parseFloat(M.getAttribute("x"))-L.height+4),M.setAttribute("y","top"===d.label.position?parseFloat(M.getAttribute("y"))+L.width:parseFloat(M.getAttribute("y"))-L.width);var R=this.annoCtx.graphics.rotateAroundCenter(M),H=R.x,G=R.y;M.setAttribute("transform","rotate(-90 ".concat(H," ").concat(G,")"))}}}},{key:"addBackgroundToAnno",value:function(d,p){var y=this.w;if(!d||!p.label.text||p.label.text&&!p.label.text.trim())return null;var C=y.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),M=d.getBoundingClientRect(),L=p.label.style.padding.left,R=p.label.style.padding.right,H=p.label.style.padding.top,G=p.label.style.padding.bottom;"vertical"===p.label.orientation&&(H=p.label.style.padding.left,G=p.label.style.padding.right,L=p.label.style.padding.top,R=p.label.style.padding.bottom);var K=this.annoCtx.graphics.drawRect(M.left-C.left-L-y.globals.barPadForNumericAxis,M.top-C.top-H,M.width+L+R,M.height+H+G,p.label.borderRadius,p.label.style.background,1,p.label.borderWidth,p.label.borderColor,0);return p.id&&K.node.classList.add(p.id),K}},{key:"annotationsBackground",value:function(){var d=this,p=this.w,y=function(C,M,L){var R=p.globals.dom.baseEl.querySelector(".apexcharts-".concat(L,"-annotations .apexcharts-").concat(L,"-annotation-label[rel='").concat(M,"']"));if(R){var H=R.parentNode,G=d.addBackgroundToAnno(R,C);G&&H.insertBefore(G.node,R)}};p.config.annotations.xaxis.map(function(C,M){y(C,M,"xaxis")}),p.config.annotations.yaxis.map(function(C,M){y(C,M,"yaxis")}),p.config.annotations.points.map(function(C,M){y(C,M,"point")})}},{key:"getStringX",value:function(d){var p=this.w,y=d;p.config.xaxis.convertedCatToNumeric&&p.globals.categoryLabels.length&&(d=p.globals.categoryLabels.indexOf(d)+1);var C=p.globals.labels.indexOf(d),M=p.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(C+1)+")");return M&&(y=parseFloat(M.getAttribute("x"))),y}}]),ve}(),$r=function(){function ve(d){Ee(this,ve),this.w=d.w,this.annoCtx=d,this.invertAxis=this.annoCtx.invertAxis}return gt(ve,[{key:"addXaxisAnnotation",value:function(d,p,y){var C=this.w,M=this.invertAxis?C.globals.minY:C.globals.minX,L=this.invertAxis?C.globals.maxY:C.globals.maxX,R=this.invertAxis?C.globals.yRange[0]:C.globals.xRange,H=(d.x-M)/(R/C.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(H=(L-d.x)/(R/C.globals.gridWidth));var G=d.label.text;"category"!==C.config.xaxis.type&&!C.config.xaxis.convertedCatToNumeric||this.invertAxis||C.globals.dataFormatXNumeric||(H=this.annoCtx.helpers.getStringX(d.x));var J=d.strokeDashArray;if(Qe.isNumber(H)){if(null==d.x2){var te=this.annoCtx.graphics.drawLine(H+d.offsetX,0+d.offsetY,H+d.offsetX,C.globals.gridHeight+d.offsetY,d.borderColor,J,d.borderWidth);p.appendChild(te.node),d.id&&te.node.classList.add(d.id)}else{var K=(d.x2-M)/(R/C.globals.gridWidth);if(this.annoCtx.inversedReversedAxis&&(K=(L-d.x2)/(R/C.globals.gridWidth)),"category"!==C.config.xaxis.type&&!C.config.xaxis.convertedCatToNumeric||this.invertAxis||C.globals.dataFormatXNumeric||(K=this.annoCtx.helpers.getStringX(d.x2)),K<H){var ae=H;H=K,K=ae}var pe=this.annoCtx.graphics.drawRect(H+d.offsetX,0+d.offsetY,K-H,C.globals.gridHeight+d.offsetY,0,d.fillColor,d.opacity,1,d.borderColor,J);pe.node.classList.add("apexcharts-annotation-rect"),pe.attr("clip-path","url(#gridRectMask".concat(C.globals.cuid,")")),p.appendChild(pe.node),d.id&&pe.node.classList.add(d.id)}var ge="top"===d.label.position?4:C.globals.gridHeight,xe=this.annoCtx.graphics.getTextRects(G,parseFloat(d.label.style.fontSize)),Me=this.annoCtx.graphics.drawText({x:H+d.label.offsetX,y:ge+d.label.offsetY-("vertical"===d.label.orientation?"top"===d.label.position?xe.width/2-12:-xe.width/2:0),text:G,textAnchor:d.label.textAnchor,fontSize:d.label.style.fontSize,fontFamily:d.label.style.fontFamily,fontWeight:d.label.style.fontWeight,foreColor:d.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(d.label.style.cssClass," ").concat(d.id?d.id:"")});Me.attr({rel:y}),p.appendChild(Me.node),this.annoCtx.helpers.setOrientations(d,y)}}},{key:"drawXAxisAnnotations",value:function(){var d=this,p=this.w,y=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return p.config.annotations.xaxis.map(function(C,M){d.addXaxisAnnotation(C,y.node,M)}),y}}]),ve}(),Vn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"getStackedSeriesTotals",value:function(){var d=this.w,p=[];if(0===d.globals.series.length)return p;for(var y=0;y<d.globals.series[d.globals.maxValsInArrayIndex].length;y++){for(var C=0,M=0;M<d.globals.series.length;M++)void 0!==d.globals.series[M][y]&&(C+=d.globals.series[M][y]);p.push(C)}return d.globals.stackedSeriesTotals=p,p}},{key:"getSeriesTotalByIndex",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===d?this.w.config.series.reduce(function(p,y){return p+y},0):this.w.globals.series[d].reduce(function(p,y){return p+y},0)}},{key:"isSeriesNull",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===d?this.w.config.series.filter(function(p){return null!==p}):this.w.config.series[d].data.filter(function(p){return null!==p})).length}},{key:"seriesHaveSameValues",value:function(d){return this.w.globals.series[d].every(function(p,y,C){return p===C[0]})}},{key:"getCategoryLabels",value:function(d){var p=this.w,y=d.slice();return p.config.xaxis.convertedCatToNumeric&&(y=d.map(function(C,M){return p.config.xaxis.labels.formatter(C-p.globals.minX+1)})),y}},{key:"getLargestSeries",value:function(){var d=this.w;d.globals.maxValsInArrayIndex=d.globals.series.map(function(p){return p.length}).indexOf(Math.max.apply(Math,d.globals.series.map(function(p){return p.length})))}},{key:"getLargestMarkerSize",value:function(){var d=this.w,p=0;return d.globals.markers.size.forEach(function(y){p=Math.max(p,y)}),d.globals.markers.largestSize=p,p}},{key:"getSeriesTotals",value:function(){var d=this.w;d.globals.seriesTotals=d.globals.series.map(function(p,y){var C=0;if(Array.isArray(p))for(var M=0;M<p.length;M++)C+=p[M];else C+=p;return C})}},{key:"getSeriesTotalsXRange",value:function(d,p){var y=this.w;return y.globals.series.map(function(C,M){for(var L=0,R=0;R<C.length;R++)y.globals.seriesX[M][R]>d&&y.globals.seriesX[M][R]<p&&(L+=C[R]);return L})}},{key:"getPercentSeries",value:function(){var d=this.w;d.globals.seriesPercent=d.globals.series.map(function(p,y){var C=[];if(Array.isArray(p))for(var M=0;M<p.length;M++){var L=d.globals.stackedSeriesTotals[M],R=0;L&&(R=100*p[M]/L),C.push(R)}else{var H=100*p/d.globals.seriesTotals.reduce(function(G,J){return G+J},0);C.push(H)}return C})}},{key:"getCalculatedRatios",value:function(){var d,p,y,C,M=this.w.globals,L=[],R=0,H=[],G=.1,J=0;if(M.yRange=[],M.isMultipleYAxis)for(var te=0;te<M.minYArr.length;te++)M.yRange.push(Math.abs(M.minYArr[te]-M.maxYArr[te])),H.push(0);else M.yRange.push(Math.abs(M.minY-M.maxY));M.xRange=Math.abs(M.maxX-M.minX),M.zRange=Math.abs(M.maxZ-M.minZ);for(var K=0;K<M.yRange.length;K++)L.push(M.yRange[K]/M.gridHeight);if(p=M.xRange/M.gridWidth,y=Math.abs(M.initialMaxX-M.initialMinX)/M.gridWidth,d=M.yRange/M.gridWidth,C=M.xRange/M.gridHeight,(R=M.zRange/M.gridHeight*16)||(R=1),M.minY!==Number.MIN_VALUE&&0!==Math.abs(M.minY)&&(M.hasNegs=!0),M.isMultipleYAxis){H=[];for(var ae=0;ae<L.length;ae++)H.push(-M.minYArr[ae]/L[ae])}else H.push(-M.minY/L[0]),M.minY!==Number.MIN_VALUE&&0!==Math.abs(M.minY)&&(G=-M.minY/d,J=M.minX/p);return{yRatio:L,invertedYRatio:d,zRatio:R,xRatio:p,initialXRatio:y,invertedXRatio:C,baseLineInvertedY:G,baseLineY:H,baseLineX:J}}},{key:"getLogSeries",value:function(d){var p=this,y=this.w;return y.globals.seriesLog=d.map(function(C,M){return y.config.yaxis[M]&&y.config.yaxis[M].logarithmic?C.map(function(L){return null===L?null:p.getLogVal(L,M)}):C}),y.globals.invalidLogScale?d:y.globals.seriesLog}},{key:"getLogVal",value:function(d,p){var y=this.w;return(Math.log(d)-Math.log(y.globals.minYArr[p]))/(Math.log(y.globals.maxYArr[p])-Math.log(y.globals.minYArr[p]))}},{key:"getLogYRatios",value:function(d){var p=this,y=this.w,C=this.w.globals;return C.yLogRatio=d.slice(),C.logYRange=C.yRange.map(function(M,L){if(y.config.yaxis[L]&&p.w.config.yaxis[L].logarithmic){var R,H=-Number.MAX_VALUE,G=Number.MIN_VALUE;return C.seriesLog.forEach(function(J,te){J.forEach(function(K){y.config.yaxis[te]&&y.config.yaxis[te].logarithmic&&(H=Math.max(K,H),G=Math.min(K,G))})}),R=Math.pow(C.yRange[L],Math.abs(G-H)/C.yRange[L]),C.yLogRatio[L]=R/C.gridHeight,R}}),C.invalidLogScale?d.slice():C.yLogRatio}}],[{key:"checkComboSeries",value:function(d){var p=!1,y=0,C=0;return d.length&&void 0!==d[0].type&&d.forEach(function(M){"bar"!==M.type&&"column"!==M.type&&"candlestick"!==M.type&&"boxPlot"!==M.type||y++,void 0!==M.type&&C++}),C>1&&(p=!0),{comboBarCount:y,comboCharts:p}}},{key:"extendArrayProps",value:function(d,p,y){return p.yaxis&&(p=d.extendYAxis(p,y)),p.annotations&&(p.annotations.yaxis&&(p=d.extendYAxisAnnotations(p)),p.annotations.xaxis&&(p=d.extendXAxisAnnotations(p)),p.annotations.points&&(p=d.extendPointAnnotations(p))),p}}]),ve}(),Di=function(){function ve(d){Ee(this,ve),this.w=d.w,this.annoCtx=d}return gt(ve,[{key:"addYaxisAnnotation",value:function(d,p,y){var C,M=this.w,L=d.strokeDashArray,R=this._getY1Y2("y1",d),H=d.label.text;if(null==d.y2){var G=this.annoCtx.graphics.drawLine(0+d.offsetX,R+d.offsetY,this._getYAxisAnnotationWidth(d),R+d.offsetY,d.borderColor,L,d.borderWidth);p.appendChild(G.node),d.id&&G.node.classList.add(d.id)}else{if((C=this._getY1Y2("y2",d))>R){var J=R;R=C,C=J}var te=this.annoCtx.graphics.drawRect(0+d.offsetX,C+d.offsetY,this._getYAxisAnnotationWidth(d),R-C,0,d.fillColor,d.opacity,1,d.borderColor,L);te.node.classList.add("apexcharts-annotation-rect"),te.attr("clip-path","url(#gridRectMask".concat(M.globals.cuid,")")),p.appendChild(te.node),d.id&&te.node.classList.add(d.id)}var ae=this.annoCtx.graphics.drawText({x:("right"===d.label.position?M.globals.gridWidth:0)+d.label.offsetX,y:(C||R)+d.label.offsetY-3,text:H,textAnchor:d.label.textAnchor,fontSize:d.label.style.fontSize,fontFamily:d.label.style.fontFamily,fontWeight:d.label.style.fontWeight,foreColor:d.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(d.label.style.cssClass," ").concat(d.id?d.id:"")});ae.attr({rel:y}),p.appendChild(ae.node)}},{key:"_getY1Y2",value:function(d,p){var y,C="y1"===d?p.y:p.y2,M=this.w;if(this.annoCtx.invertAxis){var L=M.globals.labels.indexOf(C);M.config.xaxis.convertedCatToNumeric&&(L=M.globals.categoryLabels.indexOf(C));var R=M.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(L+1)+")");R&&(y=parseFloat(R.getAttribute("y")))}else{var H;H=M.config.yaxis[p.yAxisIndex].logarithmic?(C=new Vn(this.annoCtx.ctx).getLogVal(C,p.yAxisIndex))/M.globals.yLogRatio[p.yAxisIndex]:(C-M.globals.minYArr[p.yAxisIndex])/(M.globals.yRange[p.yAxisIndex]/M.globals.gridHeight),y=M.globals.gridHeight-H,M.config.yaxis[p.yAxisIndex]&&M.config.yaxis[p.yAxisIndex].reversed&&(y=H)}return y}},{key:"_getYAxisAnnotationWidth",value:function(d){var p=this.w;return(d.width.indexOf("%")>-1?p.globals.gridWidth*parseInt(d.width,10)/100:parseInt(d.width,10))+d.offsetX}},{key:"drawYAxisAnnotations",value:function(){var d=this,p=this.w,y=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return p.config.annotations.yaxis.map(function(C,M){d.addYaxisAnnotation(C,y.node,M)}),y}}]),ve}(),Ur=function(){function ve(d){Ee(this,ve),this.w=d.w,this.annoCtx=d}return gt(ve,[{key:"addPointAnnotation",value:function(d,p,y){var C=this.w,M=0,L=0,R=0;this.annoCtx.invertAxis&&console.warn("Point annotation is not supported in horizontal bar charts.");var H=parseFloat(d.y);if("string"==typeof d.x){var G=C.globals.labels.indexOf(d.x);C.config.xaxis.convertedCatToNumeric&&(G=C.globals.categoryLabels.indexOf(d.x)),M=this.annoCtx.helpers.getStringX(d.x),null===d.y&&(H=C.globals.series[d.seriesIndex][G])}else M=(d.x-C.globals.minX)/(C.globals.xRange/C.globals.gridWidth);for(var J,te=[],K=0,ae=0;ae<=d.seriesIndex;ae++){var pe=C.config.yaxis[ae].seriesName;if(pe)for(var ge=ae+1;ge<=d.seriesIndex;ge++)C.config.yaxis[ge].seriesName===pe&&-1===te.indexOf(pe)&&(K++,te.push(pe))}if(C.config.yaxis[d.yAxisIndex].logarithmic)J=(H=new Vn(this.annoCtx.ctx).getLogVal(H,d.yAxisIndex))/C.globals.yLogRatio[d.yAxisIndex];else{var xe=d.yAxisIndex+K;J=(H-C.globals.minYArr[xe])/(C.globals.yRange[xe]/C.globals.gridHeight)}if(L=C.globals.gridHeight-J-parseFloat(d.label.style.fontSize)-d.marker.size,R=C.globals.gridHeight-J,C.config.yaxis[d.yAxisIndex]&&C.config.yaxis[d.yAxisIndex].reversed&&(L=J+parseFloat(d.label.style.fontSize)+d.marker.size,R=J),Qe.isNumber(M)){var Me={pSize:d.marker.size,pointStrokeWidth:d.marker.strokeWidth,pointFillColor:d.marker.fillColor,pointStrokeColor:d.marker.strokeColor,shape:d.marker.shape,pRadius:d.marker.radius,class:"apexcharts-point-annotation-marker ".concat(d.marker.cssClass," ").concat(d.id?d.id:"")},ze=this.annoCtx.graphics.drawMarker(M+d.marker.offsetX,R+d.marker.offsetY,Me);p.appendChild(ze.node);var Y=this.annoCtx.graphics.drawText({x:M+d.label.offsetX,y:L+d.label.offsetY,text:d.label.text?d.label.text:"",textAnchor:d.label.textAnchor,fontSize:d.label.style.fontSize,fontFamily:d.label.style.fontFamily,fontWeight:d.label.style.fontWeight,foreColor:d.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(d.label.style.cssClass," ").concat(d.id?d.id:"")});if(Y.attr({rel:y}),p.appendChild(Y.node),d.customSVG.SVG){var ne=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+d.customSVG.cssClass});ne.attr({transform:"translate(".concat(M+d.customSVG.offsetX,", ").concat(L+d.customSVG.offsetY,")")}),ne.node.innerHTML=d.customSVG.SVG,p.appendChild(ne.node)}if(d.image.path){var be=d.image.width?d.image.width:20,Ie=d.image.height?d.image.height:20;this.annoCtx.addImage({x:M+d.image.offsetX-be/2,y:L+d.image.offsetY-Ie/2,width:be,height:Ie,path:d.image.path,appendTo:".apexcharts-point-annotations"})}}}},{key:"drawPointAnnotations",value:function(){var d=this,p=this.w,y=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return p.config.annotations.points.map(function(C,M){d.addPointAnnotation(C,y.node,M)}),y}}]),ve}(),tr={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},nr=function(){function ve(){Ee(this,ve),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={x:0,y:null,yAxisIndex:0,seriesIndex:0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return gt(ve,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[tr],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(d){return new Date(d).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(d){return d}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(d){return d+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(d){return d.globals.seriesTotals.reduce(function(p,y){return p+y},0)/d.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(d){return d}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(d){return d}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(d){return d.globals.seriesTotals.reduce(function(p,y){return p+y},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(d){return null!==d?d:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(d){return d?d+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),ve}(),Zt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.graphics=new Mt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Ui(this),this.xAxisAnnotations=new $r(this),this.yAxisAnnotations=new Di(this),this.pointsAnnotations=new Ur(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return gt(ve,[{key:"drawAxesAnnotations",value:function(){var d=this.w;if(d.globals.axisCharts){for(var p=this.yAxisAnnotations.drawYAxisAnnotations(),y=this.xAxisAnnotations.drawXAxisAnnotations(),C=this.pointsAnnotations.drawPointAnnotations(),M=d.config.chart.animations.enabled,L=[p,y,C],R=[y.node,p.node,C.node],H=0;H<3;H++)d.globals.dom.elGraphical.add(L[H]),!M||d.globals.resized||d.globals.dataChanged||"scatter"!==d.config.chart.type&&"bubble"!==d.config.chart.type&&d.globals.dataPoints>1&&R[H].classList.add("apexcharts-element-hidden"),d.globals.delayedElements.push({el:R[H],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var d=this;this.w.config.annotations.images.map(function(p,y){d.addImage(p,y)})}},{key:"drawTextAnnos",value:function(){var d=this;this.w.config.annotations.texts.map(function(p,y){d.addText(p,y)})}},{key:"addXaxisAnnotation",value:function(d,p,y){this.xAxisAnnotations.addXaxisAnnotation(d,p,y)}},{key:"addYaxisAnnotation",value:function(d,p,y){this.yAxisAnnotations.addYaxisAnnotation(d,p,y)}},{key:"addPointAnnotation",value:function(d,p,y){this.pointsAnnotations.addPointAnnotation(d,p,y)}},{key:"addText",value:function(d,p){var M=d.text,K=d.backgroundColor,ae=d.borderWidth,pe=d.strokeDashArray,ge=d.borderRadius,xe=d.borderColor,Me=d.appendTo,ze=void 0===Me?".apexcharts-annotations":Me,Ke=d.paddingLeft,Y=void 0===Ke?4:Ke,ne=d.paddingRight,be=void 0===ne?4:ne,Ie=d.paddingBottom,Je=void 0===Ie?2:Ie,Nt=d.paddingTop,St=void 0===Nt?2:Nt,Xt=this.w,gn=this.graphics.drawText({x:d.x,y:d.y,text:M,textAnchor:d.textAnchor||"start",fontSize:d.fontSize||"12px",fontWeight:d.fontWeight||"regular",fontFamily:d.fontFamily||Xt.config.chart.fontFamily,foreColor:d.foreColor||Xt.config.chart.foreColor,cssClass:d.cssClass}),hn=Xt.globals.dom.baseEl.querySelector(ze);hn&&hn.appendChild(gn.node);var Kn=gn.bbox();if(M){var Bi=this.graphics.drawRect(Kn.x-Y,Kn.y-St,Kn.width+Y+be,Kn.height+Je+St,ge,K||"transparent",1,ae,xe,pe);hn.insertBefore(Bi.node,gn.node)}}},{key:"addImage",value:function(d,p){var y=this.w,M=d.x,L=void 0===M?0:M,R=d.y,H=void 0===R?0:R,G=d.width,J=void 0===G?20:G,te=d.height,K=void 0===te?20:te,ae=d.appendTo,pe=void 0===ae?".apexcharts-annotations":ae,ge=y.globals.dom.Paper.image(d.path);ge.size(J,K).move(L,H);var xe=y.globals.dom.baseEl.querySelector(pe);xe&&xe.appendChild(ge.node)}},{key:"addXaxisAnnotationExternal",value:function(d,p,y){return this.addAnnotationExternal({params:d,pushToMemory:p,context:y,type:"xaxis",contextMethod:y.addXaxisAnnotation}),y}},{key:"addYaxisAnnotationExternal",value:function(d,p,y){return this.addAnnotationExternal({params:d,pushToMemory:p,context:y,type:"yaxis",contextMethod:y.addYaxisAnnotation}),y}},{key:"addPointAnnotationExternal",value:function(d,p,y){return void 0===this.invertAxis&&(this.invertAxis=y.w.globals.isBarHorizontal),this.addAnnotationExternal({params:d,pushToMemory:p,context:y,type:"point",contextMethod:y.addPointAnnotation}),y}},{key:"addAnnotationExternal",value:function(d){var p=d.params,y=d.pushToMemory,C=d.context,M=d.type,L=d.contextMethod,R=C,H=R.w,G=H.globals.dom.baseEl.querySelector(".apexcharts-".concat(M,"-annotations")),J=G.childNodes.length+1,te=new nr,K=Object.assign({},"xaxis"===M?te.xAxisAnnotation:"yaxis"===M?te.yAxisAnnotation:te.pointAnnotation),ae=Qe.extend(K,p);switch(M){case"xaxis":this.addXaxisAnnotation(ae,G,J);break;case"yaxis":this.addYaxisAnnotation(ae,G,J);break;case"point":this.addPointAnnotation(ae,G,J)}var pe=H.globals.dom.baseEl.querySelector(".apexcharts-".concat(M,"-annotations .apexcharts-").concat(M,"-annotation-label[rel='").concat(J,"']")),ge=this.helpers.addBackgroundToAnno(pe,ae);return ge&&G.insertBefore(ge.node,pe),y&&H.globals.memory.methodsToExec.push({context:R,id:ae.id?ae.id:Qe.randomId(),method:L,label:"addAnnotation",params:p}),C}},{key:"clearAnnotations",value:function(d){var p=d.w,y=p.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");p.globals.memory.methodsToExec.map(function(C,M){"addText"!==C.label&&"addAnnotation"!==C.label||p.globals.memory.methodsToExec.splice(M,1)}),y=Qe.listToArray(y),Array.prototype.forEach.call(y,function(C){for(;C.firstChild;)C.removeChild(C.firstChild)})}},{key:"removeAnnotation",value:function(d,p){var y=d.w,C=y.globals.dom.baseEl.querySelectorAll(".".concat(p));C&&(y.globals.memory.methodsToExec.map(function(M,L){M.id===p&&y.globals.memory.methodsToExec.splice(L,1)}),Array.prototype.forEach.call(C,function(M){M.parentElement.removeChild(M)}))}}]),ve}(),Gt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.opts=null,this.seriesIndex=0}return gt(ve,[{key:"clippedImgArea",value:function(d){var p=this.w,y=p.config,C=parseInt(p.globals.gridWidth,10),M=parseInt(p.globals.gridHeight,10),L=C>M?C:M,R=d.image,H=0,G=0;void 0===d.width&&void 0===d.height?void 0!==y.fill.image.width&&void 0!==y.fill.image.height?(H=y.fill.image.width+1,G=y.fill.image.height):(H=L+1,G=L):(H=d.width,G=d.height);var J=document.createElementNS(p.globals.SVGNS,"pattern");Mt.setAttrs(J,{id:d.patternID,patternUnits:d.patternUnits?d.patternUnits:"userSpaceOnUse",width:H+"px",height:G+"px"});var te=document.createElementNS(p.globals.SVGNS,"image");J.appendChild(te),te.setAttributeNS(window.SVG.xlink,"href",R),Mt.setAttrs(te,{x:0,y:0,preserveAspectRatio:"none",width:H+"px",height:G+"px"}),te.style.opacity=d.opacity,p.globals.dom.elDefs.node.appendChild(J)}},{key:"getSeriesIndex",value:function(d){var p=this.w;return this.seriesIndex=("bar"===p.config.chart.type||"rangeBar"===p.config.chart.type)&&p.config.plotOptions.bar.distributed||"heatmap"===p.config.chart.type||"treemap"===p.config.chart.type?d.seriesNumber:d.seriesNumber%p.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(d){var p=this.w;this.opts=d;var y,C,M,L=this.w.config;this.seriesIndex=this.getSeriesIndex(d);var R=this.getFillColors()[this.seriesIndex];void 0!==p.globals.seriesColors[this.seriesIndex]&&(R=p.globals.seriesColors[this.seriesIndex]),"function"==typeof R&&(R=R({seriesIndex:this.seriesIndex,dataPointIndex:d.dataPointIndex,value:d.value,w:p}));var H=this.getFillType(this.seriesIndex),G=Array.isArray(L.fill.opacity)?L.fill.opacity[this.seriesIndex]:L.fill.opacity;d.color&&(R=d.color);var J=R;if(-1===R.indexOf("rgb")?R.length<9&&(J=Qe.hexToRgba(R,G)):R.indexOf("rgba")>-1&&(G=Qe.getOpacityFromRGBA(R)),d.opacity&&(G=d.opacity),"pattern"===H&&(C=this.handlePatternFill(C,R,G,J)),"gradient"===H&&(M=this.handleGradientFill(R,G,this.seriesIndex)),"image"===H){var te=L.fill.image.src,K=d.patternID?d.patternID:"";this.clippedImgArea({opacity:G,image:Array.isArray(te)?d.seriesNumber<te.length?te[d.seriesNumber]:te[0]:te,width:d.width?d.width:void 0,height:d.height?d.height:void 0,patternUnits:d.patternUnits,patternID:"pattern".concat(p.globals.cuid).concat(d.seriesNumber+1).concat(K)}),y="url(#pattern".concat(p.globals.cuid).concat(d.seriesNumber+1).concat(K,")")}else y="gradient"===H?M:"pattern"===H?C:J;return d.solid&&(y=J),y}},{key:"getFillType",value:function(d){var p=this.w;return Array.isArray(p.config.fill.type)?p.config.fill.type[d]:p.config.fill.type}},{key:"getFillColors",value:function(){var d=this.w,p=d.config,y=this.opts,C=[];return d.globals.comboCharts?"line"===d.config.series[this.seriesIndex].type?Array.isArray(d.globals.stroke.colors)?C=d.globals.stroke.colors:C.push(d.globals.stroke.colors):Array.isArray(d.globals.fill.colors)?C=d.globals.fill.colors:C.push(d.globals.fill.colors):"line"===p.chart.type?Array.isArray(d.globals.stroke.colors)?C=d.globals.stroke.colors:C.push(d.globals.stroke.colors):Array.isArray(d.globals.fill.colors)?C=d.globals.fill.colors:C.push(d.globals.fill.colors),void 0!==y.fillColors&&(C=[],Array.isArray(y.fillColors)?C=y.fillColors.slice():C.push(y.fillColors)),C}},{key:"handlePatternFill",value:function(d,p,y,C){var M=this.w.config,L=this.opts,R=new Mt(this.ctx),H=void 0===M.fill.pattern.strokeWidth?Array.isArray(M.stroke.width)?M.stroke.width[this.seriesIndex]:M.stroke.width:Array.isArray(M.fill.pattern.strokeWidth)?M.fill.pattern.strokeWidth[this.seriesIndex]:M.fill.pattern.strokeWidth,G=p;return Array.isArray(M.fill.pattern.style)?void 0!==M.fill.pattern.style[L.seriesNumber]?R.drawPattern(M.fill.pattern.style[L.seriesNumber],M.fill.pattern.width,M.fill.pattern.height,G,H,y):C:R.drawPattern(M.fill.pattern.style,M.fill.pattern.width,M.fill.pattern.height,G,H,y)}},{key:"handleGradientFill",value:function(d,p,y){var C,M=this.w.config,L=this.opts,R=new Mt(this.ctx),H=new Qe,G=M.fill.gradient.type,J=d,te=void 0===M.fill.gradient.opacityFrom?p:Array.isArray(M.fill.gradient.opacityFrom)?M.fill.gradient.opacityFrom[y]:M.fill.gradient.opacityFrom;J.indexOf("rgba")>-1&&(te=Qe.getOpacityFromRGBA(J));var K=void 0===M.fill.gradient.opacityTo?p:Array.isArray(M.fill.gradient.opacityTo)?M.fill.gradient.opacityTo[y]:M.fill.gradient.opacityTo;if(void 0===M.fill.gradient.gradientToColors||0===M.fill.gradient.gradientToColors.length)C=H.shadeColor("dark"===M.fill.gradient.shade?-1*parseFloat(M.fill.gradient.shadeIntensity):parseFloat(M.fill.gradient.shadeIntensity),d.indexOf("rgb")>-1?Qe.rgb2hex(d):d);else if(M.fill.gradient.gradientToColors[L.seriesNumber]){var ae=M.fill.gradient.gradientToColors[L.seriesNumber];C=ae,ae.indexOf("rgba")>-1&&(K=Qe.getOpacityFromRGBA(ae))}else C=d;if(M.fill.gradient.inverseColors){var pe=J;J=C,C=pe}return J.indexOf("rgb")>-1&&(J=Qe.rgb2hex(J)),C.indexOf("rgb")>-1&&(C=Qe.rgb2hex(C)),R.drawGradient(G,J,C,te,K,L.size,M.fill.gradient.stops,M.fill.gradient.colorStops,y)}}]),ve}(),$t=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"setGlobalMarkerSize",value:function(){var d=this.w;if(d.globals.markers.size=Array.isArray(d.config.markers.size)?d.config.markers.size:[d.config.markers.size],d.globals.markers.size.length>0){if(d.globals.markers.size.length<d.globals.series.length+1)for(var p=0;p<=d.globals.series.length;p++)void 0===d.globals.markers.size[p]&&d.globals.markers.size.push(d.globals.markers.size[0])}else d.globals.markers.size=d.config.series.map(function(y){return d.config.markers.size})}},{key:"plotChartMarkers",value:function(d,p,y,C){var M,L=arguments.length>4&&void 0!==arguments[4]&&arguments[4],R=this.w,H=p,G=d,J=null,te=new Mt(this.ctx);if((R.globals.markers.size[p]>0||L)&&(J=te.group({class:L?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(R.globals.cuid,")")),Array.isArray(G.x))for(var K=0;K<G.x.length;K++){var ae=y;1===y&&0===K&&(ae=0),1===y&&1===K&&(ae=1);var pe="apexcharts-marker";"line"!==R.config.chart.type&&"area"!==R.config.chart.type||R.globals.comboCharts||R.config.tooltip.intersect||(pe+=" no-pointer-events");var ge=Array.isArray(R.config.markers.size)?R.globals.markers.size[p]>0:R.config.markers.size>0;if(ge||L){Qe.isNumber(G.y[K])?pe+=" w".concat(Qe.randomId()):pe="apexcharts-nullpoint";var xe=this.getMarkerConfig(pe,p,ae);R.config.series[H].data[ae]&&(R.config.series[H].data[ae].fillColor&&(xe.pointFillColor=R.config.series[H].data[ae].fillColor),R.config.series[H].data[ae].strokeColor&&(xe.pointStrokeColor=R.config.series[H].data[ae].strokeColor)),C&&(xe.pSize=C),(M=te.drawMarker(G.x[K],G.y[K],xe)).attr("rel",ae),M.attr("j",ae),M.attr("index",p),M.node.setAttribute("default-marker-size",xe.pSize);var Me=new dn(this.ctx);Me.setSelectionFilter(M,p,ae),this.addEvents(M),J&&J.add(M)}else void 0===R.globals.pointsArray[p]&&(R.globals.pointsArray[p]=[]),R.globals.pointsArray[p].push([G.x[K],G.y[K]])}return J}},{key:"getMarkerConfig",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=this.w,M=this.getMarkerStyle(p),L=C.globals.markers.size[p],R=C.config.markers;return null!==y&&R.discrete.length&&R.discrete.map(function(H){H.seriesIndex===p&&H.dataPointIndex===y&&(M.pointStrokeColor=H.strokeColor,M.pointFillColor=H.fillColor,L=H.size,M.pointShape=H.shape)}),{pSize:L,pRadius:R.radius,width:Array.isArray(R.width)?R.width[p]:R.width,height:Array.isArray(R.height)?R.height[p]:R.height,pointStrokeWidth:Array.isArray(R.strokeWidth)?R.strokeWidth[p]:R.strokeWidth,pointStrokeColor:M.pointStrokeColor,pointFillColor:M.pointFillColor,shape:M.pointShape||(Array.isArray(R.shape)?R.shape[p]:R.shape),class:d,pointStrokeOpacity:Array.isArray(R.strokeOpacity)?R.strokeOpacity[p]:R.strokeOpacity,pointStrokeDashArray:Array.isArray(R.strokeDashArray)?R.strokeDashArray[p]:R.strokeDashArray,pointFillOpacity:Array.isArray(R.fillOpacity)?R.fillOpacity[p]:R.fillOpacity,seriesIndex:p}}},{key:"addEvents",value:function(d){var p=this.w,y=new Mt(this.ctx);d.node.addEventListener("mouseenter",y.pathMouseEnter.bind(this.ctx,d)),d.node.addEventListener("mouseleave",y.pathMouseLeave.bind(this.ctx,d)),d.node.addEventListener("mousedown",y.pathMouseDown.bind(this.ctx,d)),d.node.addEventListener("click",p.config.markers.onClick),d.node.addEventListener("dblclick",p.config.markers.onDblClick),d.node.addEventListener("touchstart",y.pathMouseDown.bind(this.ctx,d),{passive:!0})}},{key:"getMarkerStyle",value:function(d){var p=this.w,y=p.globals.markers.colors,C=p.config.markers.strokeColor||p.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(C)?C[d]:C,pointFillColor:Array.isArray(y)?y[d]:y}}}]),ve}(),Ht=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return gt(ve,[{key:"draw",value:function(d,p,y){var C=this.w,M=new Mt(this.ctx),L=y.realIndex,R=y.pointsPos,H=y.zRatio,G=y.elParent,J=M.group({class:"apexcharts-series-markers apexcharts-series-".concat(C.config.chart.type)});if(J.attr("clip-path","url(#gridRectMarkerMask".concat(C.globals.cuid,")")),Array.isArray(R.x))for(var te=0;te<R.x.length;te++){var K=p+1,ae=!0;0===p&&0===te&&(K=0),0===p&&1===te&&(K=1);var pe=0,ge=C.globals.markers.size[L];if(H!==1/0){ge=C.globals.seriesZ[L][K]/H;var xe=C.config.plotOptions.bubble;xe.minBubbleRadius&&ge<xe.minBubbleRadius&&(ge=xe.minBubbleRadius),xe.maxBubbleRadius&&ge>xe.maxBubbleRadius&&(ge=xe.maxBubbleRadius)}C.config.chart.animations.enabled||(pe=ge);var ze=R.y[te];if(pe=pe||0,null!==ze&&void 0!==C.globals.series[L][K]||(ae=!1),ae){var Ke=this.drawPoint(R.x[te],ze,pe,ge,L,K,p);J.add(Ke)}G.add(J)}}},{key:"drawPoint",value:function(d,p,y,C,M,L,R){var H,G=this.w,J=M,te=new On(this.ctx),K=new dn(this.ctx),ae=new Gt(this.ctx),pe=new $t(this.ctx),ge=new Mt(this.ctx),xe=pe.getMarkerConfig("apexcharts-marker",J),Me=ae.fillPath({seriesNumber:M,dataPointIndex:L,patternUnits:"objectBoundingBox",value:G.globals.series[M][R]});if("circle"===xe.shape?H=ge.drawCircle(y):"square"!==xe.shape&&"rect"!==xe.shape||(H=ge.drawRect(0,0,xe.width-xe.pointStrokeWidth/2,xe.height-xe.pointStrokeWidth/2,xe.pRadius)),G.config.series[J].data[L]&&G.config.series[J].data[L].fillColor&&(Me=G.config.series[J].data[L].fillColor),H.attr({x:d-xe.width/2-xe.pointStrokeWidth/2,y:p-xe.height/2-xe.pointStrokeWidth/2,cx:d,cy:p,fill:Me,"fill-opacity":xe.pointFillOpacity,stroke:xe.pointStrokeColor,r:C,"stroke-width":xe.pointStrokeWidth,"stroke-dasharray":xe.pointStrokeDashArray,"stroke-opacity":xe.pointStrokeOpacity}),G.config.chart.dropShadow.enabled&&K.dropShadow(H,G.config.chart.dropShadow,M),!this.initialAnim||G.globals.dataChanged||G.globals.resized?G.globals.animationEnded=!0:te.animateMarker(H,0,"circle"===xe.shape?C:{width:xe.width,height:xe.height},G.config.chart.animations.speed,G.globals.easing,function(){window.setTimeout(function(){te.animationCompleted(H)},100)}),G.globals.dataChanged&&"circle"===xe.shape)if(this.dynamicAnim){var Y,ne,be,Ie,Je=G.config.chart.animations.dynamicAnimation.speed;null!=(Ie=G.globals.previousPaths[M]&&G.globals.previousPaths[M][R])&&(Y=Ie.x,ne=Ie.y,be=void 0!==Ie.r?Ie.r:C);for(var Nt=0;Nt<G.globals.collapsedSeries.length;Nt++)G.globals.collapsedSeries[Nt].index===M&&(Je=1,C=0);0===d&&0===p&&(C=0),te.animateCircle(H,{cx:Y,cy:ne,r:be},{cx:d,cy:p,r:C},Je,G.globals.easing)}else H.attr({r:C});return H.attr({rel:L,j:L,index:M,"default-marker-size":C}),K.setSelectionFilter(H,M,L),pe.addEvents(H),H.node.classList.add("apexcharts-marker"),H}},{key:"centerTextInBubble",value:function(d){return{y:d+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),ve}(),fn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"dataLabelsCorrection",value:function(d,p,y,C,M,L,R){var H=this.w,G=!1,J=new Mt(this.ctx).getTextRects(y,R),te=J.width,K=J.height;if(p<0&&(p=0),p>H.globals.gridHeight+K&&(p=H.globals.gridHeight+K/2),void 0===H.globals.dataLabelsRects[C]&&(H.globals.dataLabelsRects[C]=[]),H.globals.dataLabelsRects[C].push({x:d,y:p,width:te,height:K}),void 0!==H.globals.dataLabelsRects[C][H.globals.dataLabelsRects[C].length-2]){var ge=H.globals.dataLabelsRects[C][void 0!==H.globals.lastDrawnDataLabelsIndexes[C]?H.globals.lastDrawnDataLabelsIndexes[C][H.globals.lastDrawnDataLabelsIndexes[C].length-1]:0];(d>ge.x+ge.width+2||p>ge.y+ge.height+2||d+te<ge.x)&&(G=!0)}return(0===M||L)&&(G=!0),{x:d,y:p,textRects:J,drawnextLabel:G}}},{key:"drawDataLabel",value:function(d,p,y){var C=this,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,L=this.w,R=new Mt(this.ctx),H=L.config.dataLabels,G=0,J=0,te=y,K=null;if(!H.enabled||!Array.isArray(d.x))return K;K=R.group({class:"apexcharts-data-labels"});for(var ae=0;ae<d.x.length;ae++)if(G=d.x[ae]+H.offsetX,J=d.y[ae]+H.offsetY+M,!isNaN(G)){1===y&&0===ae&&(te=0),1===y&&1===ae&&(te=1);var pe=L.globals.series[p][te],ge="",xe=function(Ke){return L.config.dataLabels.formatter(Ke,{ctx:C.ctx,seriesIndex:p,dataPointIndex:te,w:L})};if("bubble"===L.config.chart.type){ge=xe(pe=L.globals.seriesZ[p][te]),J=d.y[ae];var Me=new Ht(this.ctx),ze=Me.centerTextInBubble(J,p,te);J=ze.y}else void 0!==pe&&(ge=xe(pe));this.plotDataLabelsText({x:G,y:J,text:ge,i:p,j:te,parent:K,offsetCorrection:!0,dataLabelsConfig:L.config.dataLabels})}return K}},{key:"plotDataLabelsText",value:function(d){var p=this.w,y=new Mt(this.ctx),C=d.x,M=d.y,L=d.i,R=d.j,H=d.text,G=d.textAnchor,J=d.fontSize,te=d.parent,K=d.dataLabelsConfig,ae=d.color,pe=d.alwaysDrawDataLabel,ge=d.offsetCorrection;if(!(Array.isArray(p.config.dataLabels.enabledOnSeries)&&p.config.dataLabels.enabledOnSeries.indexOf(L)<0)){var xe={x:C,y:M,drawnextLabel:!0};ge&&(xe=this.dataLabelsCorrection(C,M,H,L,R,pe,parseInt(K.style.fontSize,10))),p.globals.zoomed||(C=xe.x,M=xe.y),xe.textRects&&(C<-10-xe.textRects.width||C>p.globals.gridWidth+xe.textRects.width+10)&&(H="");var Me=p.globals.dataLabels.style.colors[L];(("bar"===p.config.chart.type||"rangeBar"===p.config.chart.type)&&p.config.plotOptions.bar.distributed||p.config.dataLabels.distributed)&&(Me=p.globals.dataLabels.style.colors[R]),"function"==typeof Me&&(Me=Me({series:p.globals.series,seriesIndex:L,dataPointIndex:R,w:p})),ae&&(Me=ae);var ze=K.offsetX,Ke=K.offsetY;if("bar"!==p.config.chart.type&&"rangeBar"!==p.config.chart.type||(ze=0,Ke=0),xe.drawnextLabel){var Y=y.drawText({width:100,height:parseInt(K.style.fontSize,10),x:C+ze,y:M+Ke,foreColor:Me,textAnchor:G||K.textAnchor,text:H,fontSize:J||K.style.fontSize,fontFamily:K.style.fontFamily,fontWeight:K.style.fontWeight||"normal"});if(Y.attr({class:"apexcharts-datalabel",cx:C,cy:M}),K.dropShadow.enabled){var ne=K.dropShadow;new dn(this.ctx).dropShadow(Y,ne)}te.add(Y),void 0===p.globals.lastDrawnDataLabelsIndexes[L]&&(p.globals.lastDrawnDataLabelsIndexes[L]=[]),p.globals.lastDrawnDataLabelsIndexes[L].push(R)}}}},{key:"addBackgroundToDataLabel",value:function(d,p){var y=this.w,C=y.config.dataLabels.background,M=C.padding,L=C.padding/2,R=p.width,H=p.height,G=new Mt(this.ctx).drawRect(p.x-M,p.y-L/2,R+2*M,H+L,C.borderRadius,"transparent"===y.config.chart.background?"#fff":y.config.chart.background,C.opacity,C.borderWidth,C.borderColor);return C.dropShadow.enabled&&new dn(this.ctx).dropShadow(G,C.dropShadow),G}},{key:"dataLabelsBackground",value:function(){var d=this.w;if("bubble"!==d.config.chart.type)for(var p=d.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),y=0;y<p.length;y++){var C=p[y],M=C.getBBox(),L=null;if(M.width&&M.height&&(L=this.addBackgroundToDataLabel(C,M)),L){C.parentNode.insertBefore(L.node,C);var R=C.getAttribute("fill");!d.config.chart.animations.enabled||d.globals.resized||d.globals.dataChanged?L.attr({fill:R}):L.animate().attr({fill:R}),C.setAttribute("fill",d.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var d=this.w,p=d.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),y=d.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),C=0;C<p.length;C++)y&&y.insertBefore(p[C],y.nextSibling)}}]),ve}(),Yt=function(){function ve(d){Ee(this,ve),this.w=d.w,this.barCtx=d}return gt(ve,[{key:"handleBarDataLabels",value:function(d){var p=d.x,y=d.y,C=d.y1,M=d.y2,L=d.i,R=d.j,H=d.realIndex,G=d.series,J=d.barHeight,te=d.barWidth,K=d.barYPosition,ae=d.visibleSeries,pe=d.renderedPath,ge=this.w,xe=new Mt(this.barCtx.ctx),Me=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[H]:this.barCtx.strokeWidth,ze=p+parseFloat(te*ae),Ke=y+parseFloat(J*ae);ge.globals.isXNumeric&&!ge.globals.isBarHorizontal&&(ze=p+parseFloat(te*(ae+1)),Ke=y+parseFloat(J*(ae+1))-Me);var be,Y=p,ne=y,Ie=ge.config.dataLabels,Je=this.barCtx.barOptions.dataLabels;void 0!==K&&this.barCtx.isTimelineBar&&(Ke=K,ne=K);var Nt=Ie.offsetX,St=Ie.offsetY,Xt={width:0,height:0};ge.config.dataLabels.enabled&&(Xt=xe.getTextRects(ge.globals.yLabelFormatters[0](this.barCtx.series[L][R]),parseFloat(Ie.style.fontSize)));var hn={x:p,y,i:L,j:R,renderedPath:pe,bcx:ze,bcy:Ke,barHeight:J,barWidth:te,textRects:Xt,strokeWidth:Me,dataLabelsX:Y,dataLabelsY:ne,barDataLabelsConfig:Je,offX:Nt,offY:St};return be=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(hn):this.calculateColumnsDataLabelsPosition(hn),pe.attr({cy:be.bcy,cx:be.bcx,j:R,val:G[L][R],barHeight:J,barWidth:te}),this.drawCalculatedDataLabels({x:be.dataLabelsX,y:be.dataLabelsY,val:this.barCtx.isTimelineBar?[C,M]:G[L][R],i:H,j:R,barWidth:te,barHeight:J,textRects:Xt,dataLabelsConfig:Ie})}},{key:"calculateColumnsDataLabelsPosition",value:function(d){var p,y=this.w,C=d.i,M=d.j,L=d.y,R=d.bcx,H=d.barWidth,G=d.barHeight,J=d.textRects,te=d.dataLabelsY,K=d.barDataLabelsConfig,ae=d.strokeWidth,pe=d.offX,ge=d.offY;G=Math.abs(G);var xe="vertical"===y.config.plotOptions.bar.dataLabels.orientation;R-=ae/2,p=y.globals.isXNumeric?R-H/2+pe:R-y.globals.gridWidth/y.globals.dataPoints+H/2+pe,xe&&(p=p+J.height/2-ae/2-2);var ze=this.barCtx.series[C][M]<0,Ke=L;switch(this.barCtx.isReversed&&(Ke=L-G+(ze?2*G:0),L-=G),K.position){case"center":te=xe?ze?Ke+G/2+ge:Ke+G/2-ge:ze?Ke-G/2+J.height/2+ge:Ke+G/2+J.height/2-ge;break;case"bottom":te=xe?ze?Ke+G+ge:Ke+G-ge:ze?Ke-G+J.height+ae+ge:Ke+G-J.height/2+ae-ge;break;case"top":te=xe?ze?Ke+ge:Ke-ge:ze?Ke-J.height/2-ge:Ke+J.height+ge}return y.config.chart.stacked||(te<0?te=0+ae:te+J.height/3>y.globals.gridHeight&&(te=y.globals.gridHeight-ae)),{bcx:R,bcy:L,dataLabelsX:p,dataLabelsY:te}}},{key:"calculateBarsDataLabelsPosition",value:function(d){var p=this.w,y=d.x,C=d.i,M=d.j,L=d.bcy,R=d.barHeight,H=d.barWidth,G=d.textRects,J=d.dataLabelsX,te=d.strokeWidth,K=d.barDataLabelsConfig,ae=d.offX,pe=d.offY,ge=p.globals.gridHeight/p.globals.dataPoints;H=Math.abs(H);var xe=L-(this.barCtx.isTimelineBar?0:ge)+R/2+G.height/2+pe-3,Me=this.barCtx.series[C][M]<0,ze=y;switch(this.barCtx.isReversed&&(ze=y+H-(Me?2*H:0),y=p.globals.gridWidth-H),K.position){case"center":J=Me?ze+H/2-ae:Math.max(G.width/2,ze-H/2)+ae;break;case"bottom":J=Me?ze+H-te-Math.round(G.width/2)-ae:ze-H+te+Math.round(G.width/2)+ae;break;case"top":J=Me?ze-te+Math.round(G.width/2)-ae:ze-te-Math.round(G.width/2)+ae}return p.config.chart.stacked||(J<0?J=J+G.width+te:J+G.width/2>p.globals.gridWidth&&(J=p.globals.gridWidth-G.width-te)),{bcx:y,bcy:L,dataLabelsX:J,dataLabelsY:xe}}},{key:"drawCalculatedDataLabels",value:function(d){var p=d.x,y=d.y,C=d.val,M=d.i,L=d.j,R=d.textRects,H=d.barHeight,G=d.barWidth,J=d.dataLabelsConfig,te=this.w,K="rotate(0)";"vertical"===te.config.plotOptions.bar.dataLabels.orientation&&(K="rotate(-90, ".concat(p,", ").concat(y,")"));var ae=new fn(this.barCtx.ctx),pe=new Mt(this.barCtx.ctx),ge=J.formatter,xe=null,Me=te.globals.collapsedSeriesIndices.indexOf(M)>-1;if(J.enabled&&!Me){xe=pe.group({class:"apexcharts-data-labels",transform:K});var ze="";void 0!==C&&(ze=ge(C,{seriesIndex:M,dataPointIndex:L,w:te}));var Ke=te.globals.series[M][L]<0,Y=te.config.plotOptions.bar.dataLabels.position;"vertical"===te.config.plotOptions.bar.dataLabels.orientation&&("top"===Y&&(J.textAnchor=Ke?"end":"start"),"center"===Y&&(J.textAnchor="middle"),"bottom"===Y&&(J.textAnchor=Ke?"end":"start")),this.barCtx.isTimelineBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&G<pe.getTextRects(ze,parseFloat(J.style.fontSize)).width&&(ze=""),te.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?(G>0&&R.width/1.6>G||G<0&&R.width/1.6<G)&&(ze=""):R.height/1.6>H&&(ze=""));var ne=Be({},J);this.barCtx.isHorizontal&&C<0&&("start"===J.textAnchor?ne.textAnchor="end":"end"===J.textAnchor&&(ne.textAnchor="start")),ae.plotDataLabelsText({x:p,y,text:ze,i:M,j:L,parent:xe,dataLabelsConfig:ne,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return xe}}]),ve}(),Fn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.legendInactiveClass="legend-mouseover-inactive"}return gt(ve,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(d){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(Qe.escapeString(d),"']"))}},{key:"isSeriesHidden",value:function(d){var p=this.getSeriesByName(d),y=parseInt(p.getAttribute("data:realIndex"),10);return{isHidden:p.classList.contains("apexcharts-series-collapsed"),realIndex:y}}},{key:"addCollapsedClassToSeries",value:function(d,p){var y=this.w;function C(M){for(var L=0;L<M.length;L++)M[L].index===p&&d.node.classList.add("apexcharts-series-collapsed")}C(y.globals.collapsedSeries),C(y.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(d){var p=this.isSeriesHidden(d);return this.ctx.legend.legendHelpers.toggleDataSeries(p.realIndex,p.isHidden),p.isHidden}},{key:"showSeries",value:function(d){var p=this.isSeriesHidden(d);p.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(p.realIndex,!0)}},{key:"hideSeries",value:function(d){var p=this.isSeriesHidden(d);p.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(p.realIndex,!1)}},{key:"resetSeries",value:function(){var d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=this.w,M=Qe.clone(C.globals.initialSeries);C.globals.previousPaths=[],y?(C.globals.collapsedSeries=[],C.globals.ancillaryCollapsedSeries=[],C.globals.collapsedSeriesIndices=[],C.globals.ancillaryCollapsedSeriesIndices=[]):M=this.emptyCollapsedSeries(M),C.config.series=M,d&&(p&&(C.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(M,C.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(d){for(var p=this.w,y=0;y<d.length;y++)p.globals.collapsedSeriesIndices.indexOf(y)>-1&&(d[y].data=[]);return d}},{key:"toggleSeriesOnHover",value:function(d,p){var y=this.w,C=y.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===d.type){var M=parseInt(p.getAttribute("rel"),10)-1,L=null,R=null;y.globals.axisCharts||"radialBar"===y.config.chart.type?y.globals.axisCharts?(L=y.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(M,"']")),R=y.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(M,"']"))):L=y.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(M+1,"']")):L=y.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(M+1,"'] path"));for(var H=0;H<C.length;H++)C[H].classList.add(this.legendInactiveClass);null!==L&&(y.globals.axisCharts||L.parentNode.classList.remove(this.legendInactiveClass),L.classList.remove(this.legendInactiveClass),null!==R&&R.classList.remove(this.legendInactiveClass))}else if("mouseout"===d.type)for(var G=0;G<C.length;G++)C[G].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(d,p){var y=this,C=this.w,M=C.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),L=function(H){for(var G=0;G<M.length;G++)M[G].classList[H](y.legendInactiveClass)};if("mousemove"===d.type){var R=parseInt(p.getAttribute("rel"),10)-1;L("add"),function(H){for(var G=0;G<M.length;G++){var J=parseInt(M[G].getAttribute("val"),10);J>=H.from&&J<=H.to&&M[G].classList.remove(y.legendInactiveClass)}}(C.config.plotOptions.heatmap.colorScale.ranges[R])}else"mouseout"===d.type&&L("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var d=arguments.length>0&&void 0!==arguments[0]&&arguments[0],p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",y=this.w,C=0;if(y.config.series.length>1)for(var M=y.config.series.map(function(R,H){var G=!1;return d&&(G="bar"===y.config.series[H].type||"column"===y.config.series[H].type),R.data&&R.data.length>0&&!G?H:-1}),L="asc"===p?0:M.length-1;"asc"===p?L<M.length:L>=0;"asc"===p?L++:L--)if(-1!==M[L]){C=M[L];break}return C}},{key:"getPreviousPaths",value:function(){var d=this.w;function p(L,R,H){for(var G=L[R].childNodes,J={type:H,paths:[],realIndex:L[R].getAttribute("data:realIndex")},te=0;te<G.length;te++)if(G[te].hasAttribute("pathTo")){var K=G[te].getAttribute("pathTo");J.paths.push({d:K})}d.globals.previousPaths.push(J)}d.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach(function(L){for(var H=d.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(L,"-series .apexcharts-series")),G=0;G<H.length;G++)p(H,G,L)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var y=d.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d.config.chart.type," .apexcharts-series"));if(y.length>0)for(var C=function(L){for(var R=d.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(L,"'] rect")),H=[],G=function(te){var K=function(pe){return R[te].getAttribute(pe)},ae={x:parseFloat(K("x")),y:parseFloat(K("y")),width:parseFloat(K("width")),height:parseFloat(K("height"))};H.push({rect:ae,color:R[te].getAttribute("color")})},J=0;J<R.length;J++)G(J);d.globals.previousPaths.push(H)},M=0;M<y.length;M++)C(M);d.globals.axisCharts||(d.globals.previousPaths=d.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(d){var p=this.w,y=p.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d,"-series .apexcharts-series"));if(y.length>0)for(var C=0;C<y.length;C++){for(var M=p.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d,"-series .apexcharts-series[data\\:realIndex='").concat(C,"'] circle")),L=[],R=0;R<M.length;R++)L.push({x:M[R].getAttribute("cx"),y:M[R].getAttribute("cy"),r:M[R].getAttribute("r")});p.globals.previousPaths.push(L)}}},{key:"clearPreviousPaths",value:function(){var d=this.w;d.globals.previousPaths=[],d.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var d=this.w,p=d.config.noData,y=new Mt(this.ctx),C=d.globals.svgWidth/2,M=d.globals.svgHeight/2,L="middle";if(d.globals.noData=!0,d.globals.animationEnded=!0,"left"===p.align?(C=10,L="start"):"right"===p.align&&(C=d.globals.svgWidth-10,L="end"),"top"===p.verticalAlign?M=50:"bottom"===p.verticalAlign&&(M=d.globals.svgHeight-50),C+=p.offsetX,M=M+parseInt(p.style.fontSize,10)+2+p.offsetY,void 0!==p.text&&""!==p.text){var R=y.drawText({x:C,y:M,text:p.text,textAnchor:L,fontSize:p.style.fontSize,fontFamily:p.style.fontFamily,foreColor:p.style.color,opacity:1,class:"apexcharts-text-nodata"});d.globals.dom.Paper.add(R)}}},{key:"setNullSeriesToZeroValues",value:function(d){for(var p=this.w,y=0;y<d.length;y++)if(0===d[y].length)for(var C=0;C<d[p.globals.maxValsInArrayIndex].length;C++)d[y].push(0);return d}},{key:"hasAllSeriesEqualX",value:function(){for(var d=!0,p=this.w,y=this.filteredSeriesX(),C=0;C<y.length-1;C++)if(y[C][0]!==y[C+1][0]){d=!1;break}return p.globals.allSeriesHasEqualX=d,d}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(p){return p.length>0?p:[]})}}]),ve}(),hi=function(){function ve(d){Ee(this,ve),this.w=d.w,this.barCtx=d}return gt(ve,[{key:"initVariables",value:function(d){var p=this.w;this.barCtx.series=d,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var y=0;y<d.length;y++)if(d[y].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=d[y].length),p.globals.isXNumeric)for(var C=0;C<d[y].length;C++)p.globals.seriesX[y][C]>p.globals.minX&&p.globals.seriesX[y][C]<p.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=p.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=d.length-1,p.globals.comboCharts||this.checkZeroSeries({series:d})}},{key:"initialPositions",value:function(){var d,p,y,C,M,L,R,H,G=this.w,J=G.globals.dataPoints;this.barCtx.isTimelineBar&&(J=G.globals.labels.length);var te=this.barCtx.seriesLen;if(G.config.plotOptions.bar.rangeBarGroupRows&&(te=1),this.barCtx.isHorizontal)M=(y=G.globals.gridHeight/J)/te,G.globals.isXNumeric&&(M=(y=G.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),M=M*parseInt(this.barCtx.barOptions.barHeight,10)/100,H=this.barCtx.baseLineInvertedY+G.globals.padHorizontal+(this.barCtx.isReversed?G.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),p=(y-M*this.barCtx.seriesLen)/2;else{if(C=G.globals.gridWidth/this.barCtx.visibleItems,G.config.xaxis.convertedCatToNumeric&&(C=G.globals.gridWidth/G.globals.dataPoints),L=C/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,G.globals.isXNumeric){var K=this.barCtx.xRatio;G.config.xaxis.convertedCatToNumeric&&(K=this.barCtx.initialXRatio),G.globals.minXDiff&&.5!==G.globals.minXDiff&&G.globals.minXDiff/K>0&&(C=G.globals.minXDiff/K),(L=C/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(L=1)}R=G.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?G.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),d=G.globals.padHorizontal+(C-L*this.barCtx.seriesLen)/2}return{x:d,y:p,yDivision:y,xDivision:C,barHeight:M,barWidth:L,zeroH:R,zeroW:H}}},{key:"getPathFillColor",value:function(d,p,y,C){var M=this.w,L=new Gt(this.barCtx.ctx),R=null,H=this.barCtx.barOptions.distributed?y:p;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(G){d[p][y]>=G.from&&d[p][y]<=G.to&&(R=G.color)}),M.config.series[p].data[y]&&M.config.series[p].data[y].fillColor&&(R=M.config.series[p].data[y].fillColor),L.fillPath({seriesNumber:this.barCtx.barOptions.distributed?H:C,dataPointIndex:y,color:R,value:d[p][y]})}},{key:"getStrokeWidth",value:function(d,p,y){var C=0,M=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[d][p],M.config.stroke.show&&(this.barCtx.isNullValue||(C=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[y]:this.barCtx.strokeWidth)),C}},{key:"barBackground",value:function(d){var p=d.j,y=d.i,C=d.x1,M=d.x2,L=d.y1,R=d.y2,H=d.elSeries,G=this.w,J=new Mt(this.barCtx.ctx),te=new Fn(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&te===y){p>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(p-=this.barCtx.barOptions.colors.backgroundBarColors.length);var ae=J.drawRect(void 0!==C?C:0,void 0!==L?L:0,void 0!==M?M:G.globals.gridWidth,void 0!==R?R:G.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[p],this.barCtx.barOptions.colors.backgroundBarOpacity);H.add(ae),ae.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(d){var p=d.barWidth,y=d.barXPosition,C=d.yRatio,M=d.y1,L=d.y2,R=d.strokeWidth,H=d.series,G=d.realIndex,J=d.i,te=d.j,K=d.w,ae=new Mt(this.barCtx.ctx);(R=Array.isArray(R)?R[G]:R)||(R=0);var ge=this.getRoundedBars(K,{barWidth:p,strokeWidth:R,yRatio:C,barXPosition:y,y1:M,y2:L},H,J,te),xe=y,Me=y+p,ze=ae.move(xe,M),Ke=ae.move(xe,M),Y=ae.line(Me-R,M);return K.globals.previousPaths.length>0&&(Ke=this.barCtx.getPreviousPath(G,te,!1)),ze=ze+ae.line(xe,ge.y2)+ge.pathWithRadius+ae.line(Me-R,ge.y2)+Y+Y+"z",Ke=Ke+ae.line(xe,M)+Y+Y+Y+Y+Y+ae.line(xe,M),K.config.chart.stacked&&(this.barCtx.yArrj.push(ge.y2),this.barCtx.yArrjF.push(Math.abs(M-ge.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[J][te])),{pathTo:ze,pathFrom:Ke}}},{key:"getBarpaths",value:function(d){var p=d.barYPosition,y=d.barHeight,C=d.x1,M=d.x2,L=d.strokeWidth,R=d.series,H=d.realIndex,G=d.i,J=d.j,te=d.w,K=new Mt(this.barCtx.ctx);(L=Array.isArray(L)?L[H]:L)||(L=0);var pe=this.getRoundedBars(te,{barHeight:y,strokeWidth:L,barYPosition:p,x2:M,x1:C},R,G,J),ge=K.move(C,p),xe=K.move(C,p);te.globals.previousPaths.length>0&&(xe=this.barCtx.getPreviousPath(H,J,!1));var Me=p,ze=p+y,Ke=K.line(C,ze-L);return ge=ge+K.line(pe.x2,Me)+pe.pathWithRadius+K.line(pe.x2,ze-L)+Ke+Ke+"z",xe=xe+K.line(C,Me)+Ke+Ke+Ke+Ke+Ke+K.line(C,Me),te.config.chart.stacked&&(this.barCtx.xArrj.push(pe.x2),this.barCtx.xArrjF.push(Math.abs(C-pe.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[G][J])),{pathTo:ge,pathFrom:xe}}},{key:"getRoundedBars",value:function(d,p,y,C,M){var L=new Mt(this.barCtx.ctx),R=d.config.plotOptions.bar.borderRadius;if(d.config.chart.stacked&&y.length>1&&C!==this.barCtx.radiusOnSeriesNumber&&(R=0),this.barCtx.isHorizontal){var H="",G=p.x2;if(Math.abs(p.x1-p.x2)<R&&(R=Math.abs(p.x1-p.x2)),void 0!==y[C][M]||null!==y[C][M]){var J=this.barCtx.isReversed?y[C][M]>0:y[C][M]<0;J&&(R*=-1),H=L.quadraticCurve((G-=R)+R,p.barYPosition,G+R,p.barYPosition+(J?-1*R:R))+L.line(G+R,p.barYPosition+p.barHeight-p.strokeWidth-(J?-1*R:R))+L.quadraticCurve(G+R,p.barYPosition+p.barHeight-p.strokeWidth,G,p.barYPosition+p.barHeight-p.strokeWidth)}return{pathWithRadius:H,x2:G}}var te="",K=p.y2;if(Math.abs(p.y1-p.y2)<R&&(R=Math.abs(p.y1-p.y2)),void 0!==y[C][M]||null!==y[C][M]){var ae=y[C][M]<0;ae&&(R*=-1),te=L.quadraticCurve(p.barXPosition,(K+=R)-R,p.barXPosition+(ae?-1*R:R),K-R)+L.line(p.barXPosition+p.barWidth-p.strokeWidth-(ae?-1*R:R),K-R)+L.quadraticCurve(p.barXPosition+p.barWidth-p.strokeWidth,K-R,p.barXPosition+p.barWidth-p.strokeWidth,K)}return{pathWithRadius:te,y2:K}}},{key:"checkZeroSeries",value:function(d){for(var p=d.series,y=this.w,C=0;C<p.length;C++){for(var M=0,L=0;L<p[y.globals.maxValsInArrayIndex].length;L++)M+=p[C][L];0===M&&this.barCtx.zeroSerieses.push(C)}for(var R=p.length-1;R>=0;R--)this.barCtx.zeroSerieses.indexOf(R)>-1&&R===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var H=p.length-1;H>=0;H--)y.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(d,p){var y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=y?p:null;return null!=d&&(C=p+d/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?d/this.barCtx.invertedYRatio:0)),C}},{key:"getYForValue",value:function(d,p){var y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=y?p:null;return null!=d&&(C=p-d/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?d/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),C}},{key:"getGoalValues",value:function(d,p,y,C,M){var L=this,R=this.w,H=[];return R.globals.seriesGoals[C]&&R.globals.seriesGoals[C][M]&&Array.isArray(R.globals.seriesGoals[C][M])&&R.globals.seriesGoals[C][M].forEach(function(G){var J;H.push((Dt(J={},d,"x"===d?L.getXForValue(G.value,p,!1):L.getYForValue(G.value,y,!1)),Dt(J,"attrs",G),J))}),H}},{key:"drawGoalLine",value:function(d){var p=d.barXPosition,y=d.barYPosition,C=d.goalX,M=d.goalY,L=d.barWidth,R=d.barHeight,H=new Mt(this.barCtx.ctx),G=H.group({className:"apexcharts-bar-goals-groups"}),J=null;return this.barCtx.isHorizontal?Array.isArray(C)&&C.forEach(function(te){J=H.drawLine(te.x,y,te.x,y+R,te.attrs.strokeColor?te.attrs.strokeColor:void 0,0,te.attrs.strokeWidth?te.attrs.strokeWidth:2),G.add(J)}):Array.isArray(M)&&M.forEach(function(te){J=H.drawLine(p,te.y,p+L,te.y,te.attrs.strokeColor?te.attrs.strokeColor:void 0,0,te.attrs.strokeWidth?te.attrs.strokeWidth:2),G.add(J)}),G}}]),ve}(),mi=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w;var y=this.w;this.barOptions=y.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=y.config.stroke.width,this.isNullValue=!1,this.isTimelineBar="datetime"===y.config.xaxis.type&&y.globals.seriesRangeBarTimeline.length,this.xyRatios=p,null!==this.xyRatios&&(this.xRatio=p.xRatio,this.initialXRatio=p.initialXRatio,this.yRatio=p.yRatio,this.invertedXRatio=p.invertedXRatio,this.invertedYRatio=p.invertedYRatio,this.baseLineY=p.baseLineY,this.baseLineInvertedY=p.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new hi(this)}return gt(ve,[{key:"draw",value:function(d,p){var y=this.w,C=new Mt(this.ctx),M=new Vn(this.ctx,y);d=M.getLogSeries(d),this.series=d,this.yRatio=M.getLogYRatios(this.yRatio),this.barHelpers.initVariables(d);var L=C.group({class:"apexcharts-bar-series apexcharts-plot-series"});y.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var R=0,H=0;R<d.length;R++,H++){var G,J,te,K,ae=void 0,pe=void 0,ge=[],xe=[],Me=y.globals.comboCharts?p[R]:R,ze=C.group({class:"apexcharts-series",rel:R+1,seriesName:Qe.escapeString(y.globals.seriesNames[Me]),"data:realIndex":Me});this.ctx.series.addCollapsedClassToSeries(ze,Me),d[R].length>0&&(this.visibleI=this.visibleI+1);var Ke=0,Y=0;this.yRatio.length>1&&(this.yaxisIndex=Me),this.isReversed=y.config.yaxis[this.yaxisIndex]&&y.config.yaxis[this.yaxisIndex].reversed;var ne=this.barHelpers.initialPositions();pe=ne.y,Ke=ne.barHeight,J=ne.yDivision,K=ne.zeroW,ae=ne.x,Y=ne.barWidth,G=ne.xDivision,te=ne.zeroH,this.horizontal||xe.push(ae+Y/2);for(var be=C.group({class:"apexcharts-datalabels","data:realIndex":Me}),Ie=C.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),Je=0;Je<y.globals.dataPoints;Je++){var Nt=this.barHelpers.getStrokeWidth(R,Je,Me),St=null,Xt={indexes:{i:R,j:Je,realIndex:Me,bc:H},x:ae,y:pe,strokeWidth:Nt,elSeries:ze};this.isHorizontal?(St=this.drawBarPaths(Be(Be({},Xt),{},{barHeight:Ke,zeroW:K,yDivision:J})),Y=this.series[R][Je]/this.invertedYRatio):(St=this.drawColumnPaths(Be(Be({},Xt),{},{xDivision:G,barWidth:Y,zeroH:te})),Ke=this.series[R][Je]/this.yRatio[this.yaxisIndex]);var gn=this.barHelpers.drawGoalLine({barXPosition:St.barXPosition,barYPosition:St.barYPosition,goalX:St.goalX,goalY:St.goalY,barHeight:Ke,barWidth:Y});gn&&Ie.add(gn),pe=St.y,ae=St.x,Je>0&&xe.push(ae+Y/2),ge.push(pe);var hn=this.barHelpers.getPathFillColor(d,R,Je,Me);this.renderSeries({realIndex:Me,pathFill:hn,j:Je,i:R,pathFrom:St.pathFrom,pathTo:St.pathTo,strokeWidth:Nt,elSeries:ze,x:ae,y:pe,series:d,barHeight:Ke,barWidth:Y,elDataLabelsWrap:be,elGoalsMarkers:Ie,visibleSeries:this.visibleI,type:"bar"})}y.globals.seriesXvalues[Me]=xe,y.globals.seriesYvalues[Me]=ge,L.add(ze)}return L}},{key:"renderSeries",value:function(d){var p=d.realIndex,y=d.pathFill,C=d.lineFill,M=d.j,L=d.i,R=d.pathFrom,H=d.pathTo,G=d.strokeWidth,J=d.elSeries,te=d.x,K=d.y,ae=d.y1,pe=d.y2,ge=d.series,xe=d.barHeight,Me=d.barWidth,ze=d.barYPosition,Ke=d.elDataLabelsWrap,Y=d.elGoalsMarkers,ne=d.visibleSeries,be=d.type,Ie=this.w,Je=new Mt(this.ctx);C||(C=this.barOptions.distributed?Ie.globals.stroke.colors[M]:Ie.globals.stroke.colors[p]),Ie.config.series[L].data[M]&&Ie.config.series[L].data[M].strokeColor&&(C=Ie.config.series[L].data[M].strokeColor),this.isNullValue&&(y="none");var St=Je.renderPaths({i:L,j:M,realIndex:p,pathFrom:R,pathTo:H,stroke:C,strokeWidth:G,strokeLineCap:Ie.config.stroke.lineCap,fill:y,animationDelay:M/Ie.config.chart.animations.animateGradually.delay*(Ie.config.chart.animations.speed/Ie.globals.dataPoints)/2.4,initialSpeed:Ie.config.chart.animations.speed,dataChangeSpeed:Ie.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(be,"-area")});St.attr("clip-path","url(#gridRectMask".concat(Ie.globals.cuid,")"));var Xt=Ie.config.forecastDataPoints;Xt.count>0&&M>=Ie.globals.dataPoints-Xt.count&&(St.node.setAttribute("stroke-dasharray",Xt.dashArray),St.node.setAttribute("stroke-width",Xt.strokeWidth),St.node.setAttribute("fill-opacity",Xt.fillOpacity)),void 0!==ae&&void 0!==pe&&(St.attr("data-range-y1",ae),St.attr("data-range-y2",pe)),new dn(this.ctx).setSelectionFilter(St,p,M),J.add(St);var gn=new Yt(this).handleBarDataLabels({x:te,y:K,y1:ae,y2:pe,i:L,j:M,series:ge,realIndex:p,barHeight:xe,barWidth:Me,barYPosition:ze,renderedPath:St,visibleSeries:ne});return null!==gn&&Ke.add(gn),J.add(Ke),Y&&J.add(Y),J}},{key:"drawBarPaths",value:function(d){var L,p=d.indexes,y=d.barHeight,C=d.strokeWidth,M=d.zeroW,R=d.y,H=d.yDivision,G=d.elSeries,J=this.w,te=p.i,K=p.j;J.globals.isXNumeric&&(R=(J.globals.seriesX[te][K]-J.globals.minX)/this.invertedXRatio-y);var ae=R+y*this.visibleI;L=this.barHelpers.getXForValue(this.series[te][K],M);var pe=this.barHelpers.getBarpaths({barYPosition:ae,barHeight:y,x1:M,x2:L,strokeWidth:C,series:this.series,realIndex:p.realIndex,i:te,j:K,w:J});return J.globals.isXNumeric||(R+=H),this.barHelpers.barBackground({j:K,i:te,y1:ae-y*this.visibleI,y2:y*this.seriesLen,elSeries:G}),{pathTo:pe.pathTo,pathFrom:pe.pathFrom,x:L,y:R,goalX:this.barHelpers.getGoalValues("x",M,null,te,K),barYPosition:ae}}},{key:"drawColumnPaths",value:function(d){var C,p=d.indexes,y=d.x,M=d.xDivision,L=d.barWidth,R=d.zeroH,H=d.strokeWidth,G=d.elSeries,J=this.w,te=p.realIndex,K=p.i,ae=p.j,pe=p.bc;if(J.globals.isXNumeric){var ge=te;J.globals.seriesX[te].length||(ge=J.globals.maxValsInArrayIndex),y=(J.globals.seriesX[ge][ae]-J.globals.minX)/this.xRatio-L*this.seriesLen/2}var xe=y+L*this.visibleI;C=this.barHelpers.getYForValue(this.series[K][ae],R);var Me=this.barHelpers.getColumnPaths({barXPosition:xe,barWidth:L,y1:R,y2:C,strokeWidth:H,series:this.series,realIndex:p.realIndex,i:K,j:ae,w:J});return J.globals.isXNumeric||(y+=M),this.barHelpers.barBackground({bc:pe,j:ae,i:K,x1:xe-H/2-L*this.visibleI,x2:L*this.seriesLen+H/2,elSeries:G}),{pathTo:Me.pathTo,pathFrom:Me.pathFrom,x:y,y:C,goalY:this.barHelpers.getGoalValues("y",null,R,K,ae),barXPosition:xe}}},{key:"getPreviousPath",value:function(d,p){for(var y,C=this.w,M=0;M<C.globals.previousPaths.length;M++){var L=C.globals.previousPaths[M];L.paths&&L.paths.length>0&&parseInt(L.realIndex,10)===parseInt(d,10)&&void 0!==C.globals.previousPaths[M].paths[p]&&(y=C.globals.previousPaths[M].paths[p].d)}return y}}]),ve}(),Un=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return gt(ve,[{key:"isValidDate",value:function(d){return!isNaN(this.parseDate(d))}},{key:"getTimeStamp",value:function(d){return Date.parse(d)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(d).toISOString().substr(0,25)).getTime():new Date(d).getTime():d}},{key:"getDate",value:function(d){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(d).toUTCString()):new Date(d)}},{key:"parseDate",value:function(d){var p=Date.parse(d);if(!isNaN(p))return this.getTimeStamp(d);var y=Date.parse(d.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(y)}},{key:"parseDateWithTimezone",value:function(d){return Date.parse(d.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(d,p){var y=this.w.globals.locale,C=this.w.config.xaxis.labels.datetimeUTC,M=["\0"].concat(zt(y.months)),L=["\x01"].concat(zt(y.shortMonths)),R=["\x02"].concat(zt(y.days)),H=["\x03"].concat(zt(y.shortDays));function G(Je,Nt){var St=Je+"";for(Nt=Nt||2;St.length<Nt;)St="0"+St;return St}var J=C?d.getUTCFullYear():d.getFullYear();p=(p=(p=p.replace(/(^|[^\\])yyyy+/g,"$1"+J)).replace(/(^|[^\\])yy/g,"$1"+J.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+J);var te=(C?d.getUTCMonth():d.getMonth())+1;p=(p=(p=(p=p.replace(/(^|[^\\])MMMM+/g,"$1"+M[0])).replace(/(^|[^\\])MMM/g,"$1"+L[0])).replace(/(^|[^\\])MM/g,"$1"+G(te))).replace(/(^|[^\\])M/g,"$1"+te);var K=C?d.getUTCDate():d.getDate();p=(p=(p=(p=p.replace(/(^|[^\\])dddd+/g,"$1"+R[0])).replace(/(^|[^\\])ddd/g,"$1"+H[0])).replace(/(^|[^\\])dd/g,"$1"+G(K))).replace(/(^|[^\\])d/g,"$1"+K);var ae=C?d.getUTCHours():d.getHours(),pe=ae>12?ae-12:0===ae?12:ae;p=(p=(p=(p=p.replace(/(^|[^\\])HH+/g,"$1"+G(ae))).replace(/(^|[^\\])H/g,"$1"+ae)).replace(/(^|[^\\])hh+/g,"$1"+G(pe))).replace(/(^|[^\\])h/g,"$1"+pe);var ge=C?d.getUTCMinutes():d.getMinutes();p=(p=p.replace(/(^|[^\\])mm+/g,"$1"+G(ge))).replace(/(^|[^\\])m/g,"$1"+ge);var xe=C?d.getUTCSeconds():d.getSeconds();p=(p=p.replace(/(^|[^\\])ss+/g,"$1"+G(xe))).replace(/(^|[^\\])s/g,"$1"+xe);var Me=C?d.getUTCMilliseconds():d.getMilliseconds();p=p.replace(/(^|[^\\])fff+/g,"$1"+G(Me,3)),Me=Math.round(Me/10),p=p.replace(/(^|[^\\])ff/g,"$1"+G(Me)),Me=Math.round(Me/10);var ze=ae<12?"AM":"PM";p=(p=(p=p.replace(/(^|[^\\])f/g,"$1"+Me)).replace(/(^|[^\\])TT+/g,"$1"+ze)).replace(/(^|[^\\])T/g,"$1"+ze.charAt(0));var Ke=ze.toLowerCase();p=(p=p.replace(/(^|[^\\])tt+/g,"$1"+Ke)).replace(/(^|[^\\])t/g,"$1"+Ke.charAt(0));var Y=-d.getTimezoneOffset(),ne=C||!Y?"Z":Y>0?"+":"-";if(!C){var be=(Y=Math.abs(Y))%60;ne+=G(Math.floor(Y/60))+":"+G(be)}p=p.replace(/(^|[^\\])K/g,"$1"+ne);var Ie=(C?d.getUTCDay():d.getDay())+1;return(p=(p=(p=(p=p.replace(new RegExp(R[0],"g"),R[Ie])).replace(new RegExp(H[0],"g"),H[Ie])).replace(new RegExp(M[0],"g"),M[te])).replace(new RegExp(L[0],"g"),L[te])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(d,p,y){var C=this.w;void 0!==C.config.xaxis.min&&(d=C.config.xaxis.min),void 0!==C.config.xaxis.max&&(p=C.config.xaxis.max);var M=this.getDate(d),L=this.getDate(p),R=this.formatDate(M,"yyyy MM dd HH mm ss fff").split(" "),H=this.formatDate(L,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(R[6],10),maxMillisecond:parseInt(H[6],10),minSecond:parseInt(R[5],10),maxSecond:parseInt(H[5],10),minMinute:parseInt(R[4],10),maxMinute:parseInt(H[4],10),minHour:parseInt(R[3],10),maxHour:parseInt(H[3],10),minDate:parseInt(R[2],10),maxDate:parseInt(H[2],10),minMonth:parseInt(R[1],10)-1,maxMonth:parseInt(H[1],10)-1,minYear:parseInt(R[0],10),maxYear:parseInt(H[0],10)}}},{key:"isLeapYear",value:function(d){return d%4==0&&d%100!=0||d%400==0}},{key:"calculcateLastDaysOfMonth",value:function(d,p,y){return this.determineDaysOfMonths(d,p)-y}},{key:"determineDaysOfYear",value:function(d){var p=365;return this.isLeapYear(d)&&(p=366),p}},{key:"determineRemainingDaysOfYear",value:function(d,p,y){var C=this.daysCntOfYear[p]+y;return p>1&&this.isLeapYear()&&C++,C}},{key:"determineDaysOfMonths",value:function(d,p){var y=30;switch(d=Qe.monthMod(d),!0){case this.months30.indexOf(d)>-1:2===d&&(y=this.isLeapYear(p)?29:28);break;case this.months31.indexOf(d)>-1:default:y=31}return y}}]),ve}(),ri=function(ve){je(p,mi);var d=Ct(p);function p(){return Ee(this,p),d.apply(this,arguments)}return gt(p,[{key:"draw",value:function(y,C){var M=this.w,L=new Mt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=y,this.seriesRangeStart=M.globals.seriesRangeStart,this.seriesRangeEnd=M.globals.seriesRangeEnd,this.barHelpers.initVariables(y);for(var R=L.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),H=0;H<y.length;H++){var G,J,te,K=void 0,ae=void 0,pe=void 0,ge=M.globals.comboCharts?C[H]:H,xe=L.group({class:"apexcharts-series",seriesName:Qe.escapeString(M.globals.seriesNames[ge]),rel:H+1,"data:realIndex":ge});y[H].length>0&&(this.visibleI=this.visibleI+1);var Me=0,ze=0;this.yRatio.length>1&&(this.yaxisIndex=ge);var Ke=this.barHelpers.initialPositions();ae=Ke.y,te=Ke.zeroW,K=Ke.x,ze=Ke.barWidth,G=Ke.xDivision,J=Ke.zeroH;for(var Y=L.group({class:"apexcharts-datalabels","data:realIndex":ge}),ne=L.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),be=0;be<M.globals.dataPoints;be++){var Ie=this.barHelpers.getStrokeWidth(H,be,ge),Je=this.seriesRangeStart[H][be],Nt=this.seriesRangeEnd[H][be],St=null,Xt=null,gn={x:K,y:ae,strokeWidth:Ie,elSeries:xe};if(pe=Ke.yDivision,Me=Ke.barHeight,this.isHorizontal){Xt=ae+Me*this.visibleI;var hn=this.seriesLen;M.config.plotOptions.bar.rangeBarGroupRows&&(hn=1);var Kn=(pe-Me*hn)/2;if(void 0===M.config.series[H].data[be])break;if(this.isTimelineBar&&M.config.series[H].data[be].x){var Bi=this.detectOverlappingBars({i:H,j:be,barYPosition:Xt,srty:Kn,barHeight:Me,yDivision:pe,initPositions:Ke});Me=Bi.barHeight,Xt=Bi.barYPosition}ze=(St=this.drawRangeBarPaths(Be({indexes:{i:H,j:be,realIndex:ge},barHeight:Me,barYPosition:Xt,zeroW:te,yDivision:pe,y1:Je,y2:Nt},gn))).barWidth}else Me=(St=this.drawRangeColumnPaths(Be({indexes:{i:H,j:be,realIndex:ge},zeroH:J,barWidth:ze,xDivision:G},gn))).barHeight;var zn=this.barHelpers.drawGoalLine({barXPosition:St.barXPosition,barYPosition:Xt,goalX:St.goalX,goalY:St.goalY,barHeight:Me,barWidth:ze});zn&&ne.add(zn),ae=St.y,K=St.x;var ti=this.barHelpers.getPathFillColor(y,H,be,ge);this.renderSeries({realIndex:ge,pathFill:ti,lineFill:M.globals.stroke.colors[ge],j:be,i:H,x:K,y:ae,y1:Je,y2:Nt,pathFrom:St.pathFrom,pathTo:St.pathTo,strokeWidth:Ie,elSeries:xe,series:y,barHeight:Me,barYPosition:Xt,barWidth:ze,elDataLabelsWrap:Y,elGoalsMarkers:ne,visibleSeries:this.visibleI,type:"rangebar"})}R.add(xe)}return R}},{key:"detectOverlappingBars",value:function(y){var C=y.i,M=y.j,L=y.barYPosition,R=y.srty,H=y.barHeight,G=y.yDivision,J=y.initPositions,te=this.w,K=[],ae=te.config.series[C].data[M].rangeName,pe=te.config.series[C].data[M].x,ge=te.globals.labels.indexOf(pe),xe=te.globals.seriesRangeBarTimeline[C].findIndex(function(Me){return Me.x===pe&&Me.overlaps.length>0});return L=te.config.plotOptions.bar.rangeBarGroupRows?R+G*ge:R+H*this.visibleI+G*ge,xe>-1&&!te.config.plotOptions.bar.rangeBarOverlap&&(K=te.globals.seriesRangeBarTimeline[C][xe].overlaps).indexOf(ae)>-1&&(L=(H=J.barHeight/K.length)*this.visibleI+G*(100-parseInt(this.barOptions.barHeight,10))/100/2+H*(this.visibleI+K.indexOf(ae))+G*ge),{barYPosition:L,barHeight:H}}},{key:"drawRangeColumnPaths",value:function(y){var C=y.indexes,M=y.x,L=y.xDivision,R=y.barWidth,H=y.zeroH,G=this.w,J=C.i,te=C.j,K=this.yRatio[this.yaxisIndex],ae=C.realIndex,pe=this.getRangeValue(ae,te),ge=Math.min(pe.start,pe.end),xe=Math.max(pe.start,pe.end);G.globals.isXNumeric&&(M=(G.globals.seriesX[J][te]-G.globals.minX)/this.xRatio-R/2);var Me=M+R*this.visibleI;null==this.series[J][te]?ge=H:(ge=H-ge/K,xe=H-xe/K);var ze=Math.abs(xe-ge),Ke=this.barHelpers.getColumnPaths({barXPosition:Me,barWidth:R,y1:ge,y2:xe,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:C.realIndex,i:ae,j:te,w:G});return G.globals.isXNumeric||(M+=L),{pathTo:Ke.pathTo,pathFrom:Ke.pathFrom,barHeight:ze,x:M,y:xe,goalY:this.barHelpers.getGoalValues("y",null,H,J,te),barXPosition:Me}}},{key:"drawRangeBarPaths",value:function(y){var C=y.indexes,M=y.y,H=y.yDivision,G=y.barHeight,J=y.barYPosition,te=y.zeroW,K=this.w,ae=te+y.y1/this.invertedYRatio,pe=te+y.y2/this.invertedYRatio,ge=Math.abs(pe-ae),xe=this.barHelpers.getBarpaths({barYPosition:J,barHeight:G,x1:ae,x2:pe,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:C.realIndex,realIndex:C.realIndex,j:C.j,w:K});return K.globals.isXNumeric||(M+=H),{pathTo:xe.pathTo,pathFrom:xe.pathFrom,barWidth:ge,x:pe,goalX:this.barHelpers.getGoalValues("x",te,null,C.realIndex,C.j),y:M}}},{key:"getRangeValue",value:function(y,C){var M=this.w;return{start:M.globals.seriesRangeStart[y][C],end:M.globals.seriesRangeEnd[y][C]}}},{key:"getTooltipValues",value:function(y){var C=y.ctx,M=y.seriesIndex,L=y.dataPointIndex,R=y.y1,H=y.y2,G=y.w,J=G.globals.seriesRangeStart[M][L],te=G.globals.seriesRangeEnd[M][L],K=G.globals.labels[L],ae=G.config.series[M].name?G.config.series[M].name:"",pe=G.config.tooltip.y.formatter,ge=G.config.tooltip.y.title.formatter,xe={w:G,seriesIndex:M,dataPointIndex:L,start:J,end:te};"function"==typeof ge&&(ae=ge(ae,xe)),Number.isFinite(R)&&Number.isFinite(H)&&(J=R,te=H,G.config.series[M].data[L].x&&(K=G.config.series[M].data[L].x+":"),"function"==typeof pe&&(K=pe(K,xe)));var Me="",ze="",Ke=G.globals.colors[M];if(void 0===G.config.tooltip.x.formatter)if("datetime"===G.config.xaxis.type){var Y=new Un(C);Me=Y.formatDate(Y.getDate(J),G.config.tooltip.x.format),ze=Y.formatDate(Y.getDate(te),G.config.tooltip.x.format)}else Me=J,ze=te;else Me=G.config.tooltip.x.formatter(J),ze=G.config.tooltip.x.formatter(te);return{start:J,end:te,startVal:Me,endVal:ze,ylabel:K,color:Ke,seriesName:ae}}},{key:"buildCustomTooltipHTML",value:function(y){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+y.color+'">'+(y.seriesName||"")+'</span></div><div> <span class="category">'+y.ylabel+' </span> <span class="value start-value">'+y.start+'</span> <span class="separator">-</span> <span class="value end-value">'+y.end+"</span></div></div>"}}]),p}(),Hn=function(){function ve(d){Ee(this,ve),this.opts=d}return gt(ve,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(d){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,Qe.extend(d,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var d=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(p){return d._getBoxTooltip(p.w,p.seriesIndex,p.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var d=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(p){return d._getBoxTooltip(p.w,p.seriesIndex,p.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(d,p){var y=p.seriesIndex,C=p.dataPointIndex,M=p.w;return M.globals.seriesRangeEnd[y][C]-M.globals.seriesRangeStart[y][C]},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(d){return d.w.config.plotOptions&&d.w.config.plotOptions.bar&&d.w.config.plotOptions.bar.horizontal?(C=(y=new ri((p=d).ctx,null)).getTooltipValues(p),y.buildCustomTooltipHTML({color:C.color,seriesName:C.seriesName,ylabel:C.ylabel,start:C.startVal,end:C.endVal})):function(p){var y=new ri(p.ctx,null),C=y.getTooltipValues(p);return y.buildCustomTooltipHTML({color:C.color,seriesName:C.seriesName,ylabel:C.ylabel,start:C.start,end:C.end})}(d);var p,y,C}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(d){return Qe.extend(d,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(d){d.dataLabels=d.dataLabels||{},d.dataLabels.formatter=d.dataLabels.formatter||void 0;var p=d.dataLabels.formatter;return d.yaxis.forEach(function(y,C){d.yaxis[C].min=0,d.yaxis[C].max=100}),"bar"===d.chart.type&&(d.dataLabels.formatter=p||function(y){return"number"==typeof y&&y?y.toFixed(0)+"%":y}),d}},{key:"convertCatToNumeric",value:function(d){return d.xaxis.convertedCatToNumeric=!0,d}},{key:"convertCatToNumericXaxis",value:function(d,p,y){d.xaxis.type="numeric",d.xaxis.labels=d.xaxis.labels||{},d.xaxis.labels.formatter=d.xaxis.labels.formatter||function(L){return Qe.isNumber(L)?Math.floor(L):L};var C=d.xaxis.labels.formatter,M=d.xaxis.categories&&d.xaxis.categories.length?d.xaxis.categories:d.labels;return y&&y.length&&(M=y.map(function(L){return Array.isArray(L)?L:String(L)})),M&&M.length&&(d.xaxis.labels.formatter=function(L){return Qe.isNumber(L)?C(M[Math.floor(L)-1]):C(L)}),d.xaxis.categories=[],d.labels=[],d.xaxis.tickAmount=d.xaxis.tickAmount||"dataPoints",d}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(d){return d.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(d){return d.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(d){return d.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(d){return d},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(d,p,y,C,M){var L=d.globals.seriesCandleO[p][y],R=d.globals.seriesCandleH[p][y],H=d.globals.seriesCandleM[p][y],G=d.globals.seriesCandleL[p][y],J=d.globals.seriesCandleC[p][y];return d.config.series[p].type&&d.config.series[p].type!==M?'<div class="apexcharts-custom-tooltip">\n          '.concat(d.config.series[p].name?d.config.series[p].name:"series-"+(p+1),": <strong>").concat(d.globals.series[p][y],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(d.config.chart.type,'">')+"<div>".concat(C[0],': <span class="value">')+L+"</span></div>"+"<div>".concat(C[1],': <span class="value">')+R+"</span></div>"+(H?"<div>".concat(C[2],': <span class="value">')+H+"</span></div>":"")+"<div>".concat(C[3],': <span class="value">')+G+"</span></div>"+"<div>".concat(C[4],': <span class="value">')+J+"</span></div></div>"}}]),ve}(),jn=function(){function ve(d){Ee(this,ve),this.opts=d}return gt(ve,[{key:"init",value:function(d){var p=d.responsiveOverride,y=this.opts,C=new nr,M=new Hn(y);this.chartType=y.chart.type,"histogram"===this.chartType&&(y.chart.type="bar",y=Qe.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},y)),y=this.extendYAxis(y),y=this.extendAnnotations(y);var L=C.init(),R={};if(y&&"object"===Vt(y)){var H={};H=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(y.chart.type)?M[y.chart.type]():M.line(),y.chart.brush&&y.chart.brush.enabled&&(H=M.brush(H)),y.chart.stacked&&"100%"===y.chart.stackType&&(y=M.stacked100(y)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(y),y.xaxis=y.xaxis||window.Apex.xaxis||{},p||(y.xaxis.convertedCatToNumeric=!1),((y=this.checkForCatToNumericXAxis(this.chartType,H,y)).chart.sparkline&&y.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(H=M.sparkline(H)),R=Qe.extend(L,H)}var G=Qe.extend(R,window.Apex);return L=Qe.extend(G,y),this.handleUserInputErrors(L)}},{key:"checkForCatToNumericXAxis",value:function(d,p,y){var C=new Hn(y);return"bar"===d&&y.plotOptions&&y.plotOptions.bar&&y.plotOptions.bar.horizontal||"pie"===d||"polarArea"===d||"donut"===d||"radar"===d||"radialBar"===d||"heatmap"===d||!("datetime"!==y.xaxis.type&&"numeric"!==y.xaxis.type)||"between"===(y.xaxis.tickPlacement?y.xaxis.tickPlacement:p.xaxis&&p.xaxis.tickPlacement)||(y=C.convertCatToNumeric(y)),y}},{key:"extendYAxis",value:function(d,p){var y=new nr;(void 0===d.yaxis||!d.yaxis||Array.isArray(d.yaxis)&&0===d.yaxis.length)&&(d.yaxis={}),d.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(d.yaxis=Qe.extend(d.yaxis,window.Apex.yaxis)),d.yaxis=d.yaxis.constructor!==Array?[Qe.extend(y.yAxis,d.yaxis)]:Qe.extendArray(d.yaxis,y.yAxis);var C=!1;d.yaxis.forEach(function(L){L.logarithmic&&(C=!0)});var M=d.series;return p&&!M&&(M=p.config.series),C&&M.length!==d.yaxis.length&&M.length&&(d.yaxis=M.map(function(L,R){if(L.name||(M[R].name="series-".concat(R+1)),d.yaxis[R])return d.yaxis[R].seriesName=M[R].name,d.yaxis[R];var H=Qe.extend(y.yAxis,d.yaxis[0]);return H.show=!1,H})),C&&M.length>1&&M.length!==d.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),d}},{key:"extendAnnotations",value:function(d){return void 0===d.annotations&&(d.annotations={},d.annotations.yaxis=[],d.annotations.xaxis=[],d.annotations.points=[]),d=this.extendYAxisAnnotations(d),d=this.extendXAxisAnnotations(d),this.extendPointAnnotations(d)}},{key:"extendYAxisAnnotations",value:function(d){var p=new nr;return d.annotations.yaxis=Qe.extendArray(void 0!==d.annotations.yaxis?d.annotations.yaxis:[],p.yAxisAnnotation),d}},{key:"extendXAxisAnnotations",value:function(d){var p=new nr;return d.annotations.xaxis=Qe.extendArray(void 0!==d.annotations.xaxis?d.annotations.xaxis:[],p.xAxisAnnotation),d}},{key:"extendPointAnnotations",value:function(d){var p=new nr;return d.annotations.points=Qe.extendArray(void 0!==d.annotations.points?d.annotations.points:[],p.pointAnnotation),d}},{key:"checkForDarkTheme",value:function(d){d.theme&&"dark"===d.theme.mode&&(d.tooltip||(d.tooltip={}),"light"!==d.tooltip.theme&&(d.tooltip.theme="dark"),d.chart.foreColor||(d.chart.foreColor="#f6f7f8"),d.chart.background||(d.chart.background="#424242"),d.theme.palette||(d.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(d){var p=d;if(p.tooltip.shared&&p.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===p.chart.type&&p.plotOptions.bar.horizontal){if(p.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");p.yaxis[0].reversed&&(p.yaxis[0].opposite=!0),p.xaxis.tooltip.enabled=!1,p.yaxis[0].tooltip.enabled=!1,p.chart.zoom.enabled=!1}return"bar"!==p.chart.type&&"rangeBar"!==p.chart.type||p.tooltip.shared&&"barWidth"===p.xaxis.crosshairs.width&&p.series.length>1&&(p.xaxis.crosshairs.width="tickWidth"),"candlestick"!==p.chart.type&&"boxPlot"!==p.chart.type||p.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(p.chart.type," chart is not supported.")),p.yaxis[0].reversed=!1),p.chart.group&&0===p.yaxis[0].labels.minWidth&&console.warn("It looks like you have multiple charts in synchronization. You must provide yaxis.labels.minWidth which must be EQUAL for all grouped charts to prevent incorrect behaviour."),Array.isArray(p.stroke.width)&&"line"!==p.chart.type&&"area"!==p.chart.type&&(console.warn("stroke.width option accepts array only for line and area charts. Reverted back to Number"),p.stroke.width=p.stroke.width[0]),p}}]),ve}(),xi=function(){function ve(){Ee(this,ve)}return gt(ve,[{key:"initGlobalVars",value:function(d){d.series=[],d.seriesCandleO=[],d.seriesCandleH=[],d.seriesCandleM=[],d.seriesCandleL=[],d.seriesCandleC=[],d.seriesRangeStart=[],d.seriesRangeEnd=[],d.seriesRangeBarTimeline=[],d.seriesPercent=[],d.seriesGoals=[],d.seriesX=[],d.seriesZ=[],d.seriesNames=[],d.seriesTotals=[],d.seriesLog=[],d.seriesColors=[],d.stackedSeriesTotals=[],d.seriesXvalues=[],d.seriesYvalues=[],d.labels=[],d.categoryLabels=[],d.timescaleLabels=[],d.noLabelsProvided=!1,d.resizeTimer=null,d.selectionResizeTimer=null,d.delayedElements=[],d.pointsArray=[],d.dataLabelsRects=[],d.isXNumeric=!1,d.xaxisLabelsCount=0,d.skipLastTimelinelabel=!1,d.skipFirstTimelinelabel=!1,d.isDataXYZ=!1,d.isMultiLineX=!1,d.isMultipleYAxis=!1,d.maxY=-Number.MAX_VALUE,d.minY=Number.MIN_VALUE,d.minYArr=[],d.maxYArr=[],d.maxX=-Number.MAX_VALUE,d.minX=Number.MAX_VALUE,d.initialMaxX=-Number.MAX_VALUE,d.initialMinX=Number.MAX_VALUE,d.maxDate=0,d.minDate=Number.MAX_VALUE,d.minZ=Number.MAX_VALUE,d.maxZ=-Number.MAX_VALUE,d.minXDiff=Number.MAX_VALUE,d.yAxisScale=[],d.xAxisScale=null,d.xAxisTicksPositions=[],d.yLabelsCoords=[],d.yTitleCoords=[],d.barPadForNumericAxis=0,d.padHorizontal=0,d.xRange=0,d.yRange=[],d.zRange=0,d.dataPoints=0,d.xTickAmount=0}},{key:"globalVars",value:function(d){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:d.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===d.chart.toolbar.autoSelected&&d.chart.toolbar.tools.zoom&&d.chart.zoom.enabled,panEnabled:"pan"===d.chart.toolbar.autoSelected&&d.chart.toolbar.tools.pan,selectionEnabled:"selection"===d.chart.toolbar.autoSelected&&d.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(d){var p=this.globalVars(d);return this.initGlobalVars(p),p.initialConfig=Qe.extend({},d),p.initialSeries=Qe.clone(d.series),p.lastXAxis=Qe.clone(p.initialConfig.xaxis),p.lastYAxis=Qe.clone(p.initialConfig.yaxis),p}}]),ve}(),li=function(){function ve(d){Ee(this,ve),this.opts=d}return gt(ve,[{key:"init",value:function(){var d=new jn(this.opts).init({responsiveOverride:!1});return{config:d,globals:(new xi).init(d)}}}]),ve}(),qi=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Vn(this.ctx)}return gt(ve,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var d=this.w.config.series.slice(),p=new Fn(this.ctx);if(this.activeSeriesIndex=p.getActiveConfigSeriesIndex(),void 0!==d[this.activeSeriesIndex].data&&d[this.activeSeriesIndex].data.length>0&&null!==d[this.activeSeriesIndex].data[0]&&void 0!==d[this.activeSeriesIndex].data[0].x&&null!==d[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var d=this.w.config.series.slice(),p=new Fn(this.ctx);if(this.activeSeriesIndex=p.getActiveConfigSeriesIndex(),void 0!==d[this.activeSeriesIndex].data&&d[this.activeSeriesIndex].data.length>0&&null!=d[this.activeSeriesIndex].data[0]&&d[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(d,p){for(var y=this.w.config,C=this.w.globals,M="boxPlot"===y.chart.type||"boxPlot"===y.series[p].type,L=0;L<d[p].data.length;L++)if(void 0!==d[p].data[L][1]&&(Array.isArray(d[p].data[L][1])&&4===d[p].data[L][1].length&&!M?this.twoDSeries.push(Qe.parseNumber(d[p].data[L][1][3])):this.twoDSeries.push(Qe.parseNumber(d[p].data[L].length>=5?d[p].data[L][4]:d[p].data[L][1])),C.dataFormatXNumeric=!0),"datetime"===y.xaxis.type){var R=new Date(d[p].data[L][0]);R=new Date(R).getTime(),this.twoDSeriesX.push(R)}else this.twoDSeriesX.push(d[p].data[L][0]);for(var H=0;H<d[p].data.length;H++)void 0!==d[p].data[H][2]&&(this.threeDSeries.push(d[p].data[H][2]),C.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(d,p){var y=this.w.config,C=this.w.globals,M=new Un(this.ctx),L=p;C.collapsedSeriesIndices.indexOf(p)>-1&&(L=this.activeSeriesIndex);for(var R=0;R<d[p].data.length;R++)void 0!==d[p].data[R].y&&(Array.isArray(d[p].data[R].y)?this.twoDSeries.push(Qe.parseNumber(d[p].data[R].y[d[p].data[R].y.length-1])):this.twoDSeries.push(Qe.parseNumber(d[p].data[R].y))),void 0!==d[p].data[R].goals&&Array.isArray(d[p].data[R].goals)?(void 0===this.seriesGoals[p]&&(this.seriesGoals[p]=[]),this.seriesGoals[p].push(d[p].data[R].goals)):(void 0===this.seriesGoals[p]&&(this.seriesGoals[p]=[]),this.seriesGoals[p].push(null));for(var H=0;H<d[L].data.length;H++){var G="string"==typeof d[L].data[H].x,J=Array.isArray(d[L].data[H].x),te=!J&&!!M.isValidDate(d[L].data[H].x.toString());G||te?G||y.xaxis.convertedCatToNumeric?"datetime"!==y.xaxis.type||C.isBarHorizontal&&C.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(d[L].data[H].x)):this.twoDSeriesX.push(M.parseDate(d[L].data[H].x)):"datetime"===y.xaxis.type?this.twoDSeriesX.push(M.parseDate(d[L].data[H].x.toString())):(C.dataFormatXNumeric=!0,C.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(d[L].data[H].x))):J?(this.fallbackToCategory=!0,this.twoDSeriesX.push(d[L].data[H].x)):(C.isXNumeric=!0,C.dataFormatXNumeric=!0,this.twoDSeriesX.push(d[L].data[H].x))}if(d[p].data[0]&&void 0!==d[p].data[0].z){for(var ae=0;ae<d[p].data.length;ae++)this.threeDSeries.push(d[p].data[ae].z);C.isDataXYZ=!0}}},{key:"handleRangeData",value:function(d,p){var y=this.w.config,C=this.w.globals,M={};return this.isFormat2DArray()?M=this.handleRangeDataFormat("array",d,p):this.isFormatXY()&&(M=this.handleRangeDataFormat("xy",d,p)),C.seriesRangeStart.push(M.start),C.seriesRangeEnd.push(M.end),"datetime"===y.xaxis.type&&C.seriesRangeBarTimeline.push(M.rangeUniques),C.seriesRangeBarTimeline.forEach(function(L,R){L&&L.forEach(function(H,G){H.y.forEach(function(J,te){for(var K=0;K<H.y.length;K++)te!==K&&J.y1<=H.y[K].y2&&H.y[K].y1<=J.y2&&(H.overlaps.indexOf(J.rangeName)<0&&H.overlaps.push(J.rangeName),H.overlaps.indexOf(H.y[K].rangeName)<0&&H.overlaps.push(H.y[K].rangeName))})})}),M}},{key:"handleCandleStickBoxData",value:function(d,p){var y=this.w.globals,C={};return this.isFormat2DArray()?C=this.handleCandleStickBoxDataFormat("array",d,p):this.isFormatXY()&&(C=this.handleCandleStickBoxDataFormat("xy",d,p)),y.seriesCandleO[p]=C.o,y.seriesCandleH[p]=C.h,y.seriesCandleM[p]=C.m,y.seriesCandleL[p]=C.l,y.seriesCandleC[p]=C.c,C}},{key:"handleRangeDataFormat",value:function(d,p,y){var C=[],M=[],L=p[y].data.filter(function(K,ae,pe){return ae===pe.findIndex(function(ge){return ge.x===K.x})}).map(function(K,ae){return{x:K.x,overlaps:[],y:[]}}),R="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",H=new Fn(this.ctx).getActiveConfigSeriesIndex();if("array"===d){if(2!==p[H].data[0][1].length)throw new Error(R);for(var G=0;G<p[y].data.length;G++)C.push(p[y].data[G][1][0]),M.push(p[y].data[G][1][1])}else if("xy"===d){if(2!==p[H].data[0].y.length)throw new Error(R);for(var J=function(K){var ae=Qe.randomId(),pe=p[y].data[K].x,ge={y1:p[y].data[K].y[0],y2:p[y].data[K].y[1],rangeName:ae};p[y].data[K].rangeName=ae;var xe=L.findIndex(function(Me){return Me.x===pe});L[xe].y.push(ge),C.push(ge.y1),M.push(ge.y2)},te=0;te<p[y].data.length;te++)J(te)}return{start:C,end:M,rangeUniques:L}}},{key:"handleCandleStickBoxDataFormat",value:function(d,p,y){var C=this.w,M="boxPlot"===C.config.chart.type||"boxPlot"===C.config.series[y].type,L=[],R=[],H=[],G=[],J=[];if("array"===d)if(M&&6===p[y].data[0].length||!M&&5===p[y].data[0].length)for(var te=0;te<p[y].data.length;te++)L.push(p[y].data[te][1]),R.push(p[y].data[te][2]),M?(H.push(p[y].data[te][3]),G.push(p[y].data[te][4]),J.push(p[y].data[te][5])):(G.push(p[y].data[te][3]),J.push(p[y].data[te][4]));else for(var K=0;K<p[y].data.length;K++)Array.isArray(p[y].data[K][1])&&(L.push(p[y].data[K][1][0]),R.push(p[y].data[K][1][1]),M?(H.push(p[y].data[K][1][2]),G.push(p[y].data[K][1][3]),J.push(p[y].data[K][1][4])):(G.push(p[y].data[K][1][2]),J.push(p[y].data[K][1][3])));else if("xy"===d)for(var ae=0;ae<p[y].data.length;ae++)Array.isArray(p[y].data[ae].y)&&(L.push(p[y].data[ae].y[0]),R.push(p[y].data[ae].y[1]),M?(H.push(p[y].data[ae].y[2]),G.push(p[y].data[ae].y[3]),J.push(p[y].data[ae].y[4])):(G.push(p[y].data[ae].y[2]),J.push(p[y].data[ae].y[3])));return{o:L,h:R,m:H,l:G,c:J}}},{key:"parseDataAxisCharts",value:function(d){var p=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,C=this.w.config,M=this.w.globals,L=new Un(y),R=C.labels.length>0?C.labels.slice():C.xaxis.categories.slice();M.isTimelineBar="rangeBar"===C.chart.type&&"datetime"===C.xaxis.type;for(var H=function(){for(var te=0;te<R.length;te++)if("string"==typeof R[te]){if(!L.isValidDate(R[te]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");p.twoDSeriesX.push(L.parseDate(R[te]))}else p.twoDSeriesX.push(R[te])},G=0;G<d.length;G++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===d[G].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==C.chart.type&&"rangeArea"!==C.chart.type&&"rangeBar"!==d[G].type&&"rangeArea"!==d[G].type||(M.isRangeData=!0,this.handleRangeData(d,G)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(d,G):this.isFormatXY()&&this.handleFormatXY(d,G),"candlestick"!==C.chart.type&&"candlestick"!==d[G].type&&"boxPlot"!==C.chart.type&&"boxPlot"!==d[G].type||this.handleCandleStickBoxData(d,G),M.series.push(this.twoDSeries),M.labels.push(this.twoDSeriesX),M.seriesX.push(this.twoDSeriesX),M.seriesGoals=this.seriesGoals,G!==this.activeSeriesIndex||this.fallbackToCategory||(M.isXNumeric=!0);else{"datetime"===C.xaxis.type?(M.isXNumeric=!0,H(),M.seriesX.push(this.twoDSeriesX)):"numeric"===C.xaxis.type&&(M.isXNumeric=!0,R.length>0&&(this.twoDSeriesX=R,M.seriesX.push(this.twoDSeriesX))),M.labels.push(this.twoDSeriesX);var J=d[G].data.map(function(te){return Qe.parseNumber(te)});M.series.push(J)}M.seriesZ.push(this.threeDSeries),M.seriesNames.push(void 0!==d[G].name?d[G].name:"series-"+parseInt(G+1,10)),M.seriesColors.push(void 0!==d[G].color?d[G].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(d){var p=this.w.globals,y=this.w.config;p.series=d.slice(),p.seriesNames=y.labels.slice();for(var C=0;C<p.series.length;C++)void 0===p.seriesNames[C]&&p.seriesNames.push("series-"+(C+1));return this.w}},{key:"handleExternalLabelsData",value:function(d){var p=this.w.config,y=this.w.globals;p.xaxis.categories.length>0?y.labels=p.xaxis.categories:p.labels.length>0?y.labels=p.labels.slice():this.fallbackToCategory?(y.labels=y.labels[0],y.seriesRangeBarTimeline.length&&(y.seriesRangeBarTimeline.map(function(C){C.forEach(function(M){y.labels.indexOf(M.x)<0&&M.x&&y.labels.push(M.x)})}),y.labels=y.labels.filter(function(C,M,L){return L.indexOf(C)===M})),p.xaxis.convertedCatToNumeric&&(new Hn(p).convertCatToNumericXaxis(p,this.ctx,y.seriesX[0]),this._generateExternalLabels(d))):this._generateExternalLabels(d)}},{key:"_generateExternalLabels",value:function(d){var p=this.w.globals,y=this.w.config,C=[];if(p.axisCharts){if(p.series.length>0)for(var M=0;M<p.series[p.maxValsInArrayIndex].length;M++)C.push(M+1);p.seriesX=[];for(var L=0;L<d.length;L++)p.seriesX.push(C);p.isXNumeric=!0}if(0===C.length){C=p.axisCharts?[]:p.series.map(function(H,G){return G+1});for(var R=0;R<d.length;R++)p.seriesX.push(C)}p.labels=C,y.xaxis.convertedCatToNumeric&&(p.categoryLabels=C.map(function(H){return y.xaxis.labels.formatter(H)})),p.noLabelsProvided=!0}},{key:"parseData",value:function(d){var p=this.w,y=p.config,C=p.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),C.axisCharts?this.parseDataAxisCharts(d):this.parseDataNonAxisCharts(d),this.coreUtils.getLargestSeries(),"bar"===y.chart.type&&y.chart.stacked){var M=new Fn(this.ctx);C.series=M.setNullSeriesToZeroValues(C.series)}this.coreUtils.getSeriesTotals(),C.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),C.dataFormatXNumeric||C.isXNumeric&&("numeric"!==y.xaxis.type||0!==y.labels.length||0!==y.xaxis.categories.length)||this.handleExternalLabelsData(d);for(var L=this.coreUtils.getCategoryLabels(C.labels),R=0;R<L.length;R++)if(Array.isArray(L[R])){C.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var d=this,p=this.w;p.globals.ignoreYAxisIndexes=p.globals.collapsedSeries.map(function(y,C){if(d.w.globals.isMultipleYAxis&&!p.config.chart.stacked)return y.index})}}]),ve}(),Io=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.tooltipKeyFormat="dd MMM"}return gt(ve,[{key:"xLabelFormat",value:function(d,p,y,C){var M=this.w;if("datetime"===M.config.xaxis.type&&void 0===M.config.xaxis.labels.formatter&&void 0===M.config.tooltip.x.formatter){var L=new Un(this.ctx);return L.formatDate(L.getDate(p),M.config.tooltip.x.format)}return d(p,y,C)}},{key:"defaultGeneralFormatter",value:function(d){return Array.isArray(d)?d.map(function(p){return p}):d}},{key:"defaultYFormatter",value:function(d,p,y){var C=this.w;return Qe.isNumber(d)&&(d=d.toFixed(0!==C.globals.yValueDecimal?void 0!==p.decimalsInFloat?p.decimalsInFloat:C.globals.yValueDecimal:C.globals.maxYArr[y]-C.globals.minYArr[y]<5?1:0)),d}},{key:"setLabelFormatters",value:function(){var d=this,p=this.w;return p.globals.xaxisTooltipFormatter=function(y){return d.defaultGeneralFormatter(y)},p.globals.ttKeyFormatter=function(y){return d.defaultGeneralFormatter(y)},p.globals.ttZFormatter=function(y){return y},p.globals.legendFormatter=function(y){return d.defaultGeneralFormatter(y)},p.globals.xLabelFormatter=void 0!==p.config.xaxis.labels.formatter?p.config.xaxis.labels.formatter:function(y){if(Qe.isNumber(y)){if(!p.config.xaxis.convertedCatToNumeric&&"numeric"===p.config.xaxis.type){if(Qe.isNumber(p.config.xaxis.decimalsInFloat))return y.toFixed(p.config.xaxis.decimalsInFloat);var C=p.globals.maxX-p.globals.minX;return y.toFixed(C>0&&C<100?1:0)}return y.toFixed(p.globals.isBarHorizontal&&p.globals.maxY-p.globals.minYArr<4?1:0)}return y},p.globals.ttKeyFormatter="function"==typeof p.config.tooltip.x.formatter?p.config.tooltip.x.formatter:p.globals.xLabelFormatter,"function"==typeof p.config.xaxis.tooltip.formatter&&(p.globals.xaxisTooltipFormatter=p.config.xaxis.tooltip.formatter),(Array.isArray(p.config.tooltip.y)||void 0!==p.config.tooltip.y.formatter)&&(p.globals.ttVal=p.config.tooltip.y),void 0!==p.config.tooltip.z.formatter&&(p.globals.ttZFormatter=p.config.tooltip.z.formatter),void 0!==p.config.legend.formatter&&(p.globals.legendFormatter=p.config.legend.formatter),p.config.yaxis.forEach(function(y,C){p.globals.yLabelFormatters[C]=void 0!==y.labels.formatter?y.labels.formatter:function(M){return p.globals.xyCharts?Array.isArray(M)?M.map(function(L){return d.defaultYFormatter(L,y,C)}):d.defaultYFormatter(M,y,C):M}}),p.globals}},{key:"heatmapLabelFormatters",value:function(){var d=this.w;if("heatmap"===d.config.chart.type){d.globals.yAxisScale[0].result=d.globals.seriesNames.slice();var p=d.globals.seriesNames.reduce(function(y,C){return y.length>C.length?y:C},0);d.globals.yAxisScale[0].niceMax=p,d.globals.yAxisScale[0].niceMin=p}}}]),ve}(),_r=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"getLabel",value:function(d,p,y,C){var M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",R=this.w,H=void 0===d[C]?"":d[C],G=H,J=R.globals.xLabelFormatter,te=R.config.xaxis.labels.formatter,K=!1,ae=new Io(this.ctx),pe=H;G=ae.xLabelFormat(J,H,pe,{i:C,dateFormatter:new Un(this.ctx).formatDate,w:R}),void 0!==te&&(G=te(H,d[C],{i:C,dateFormatter:new Un(this.ctx).formatDate,w:R}));var ge=function(Ke){var Y=null;return p.forEach(function(ne){"month"===ne.unit?Y="year":"day"===ne.unit?Y="month":"hour"===ne.unit?Y="day":"minute"===ne.unit&&(Y="hour")}),Y===Ke};p.length>0?(K=ge(p[C].unit),y=p[C].position,G=p[C].value):"datetime"===R.config.xaxis.type&&void 0===te&&(G=""),void 0===G&&(G=""),G=Array.isArray(G)?G:G.toString();var xe=new Mt(this.ctx),Me={};Me=R.globals.rotateXLabels?xe.getTextRects(G,parseInt(L,10),null,"rotate(".concat(R.config.xaxis.labels.rotate," 0 0)"),!1):xe.getTextRects(G,parseInt(L,10));var ze=!R.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(G)&&(0===G.indexOf("NaN")||0===G.toLowerCase().indexOf("invalid")||G.toLowerCase().indexOf("infinity")>=0||M.indexOf(G)>=0&&ze)&&(G=""),{x:y,text:G,textRect:Me,isBold:K}}},{key:"checkLabelBasedOnTickamount",value:function(d,p,y){var C=this.w,M=C.config.xaxis.tickAmount;return"dataPoints"===M&&(M=Math.round(C.globals.gridWidth/120)),M>y||d%Math.round(y/(M+1))==0||(p.text=""),p}},{key:"checkForOverflowingLabels",value:function(d,p,y,C,M){var L=this.w;if(0===d&&L.globals.skipFirstTimelinelabel&&(p.text=""),d===y-1&&L.globals.skipLastTimelinelabel&&(p.text=""),L.config.xaxis.labels.hideOverlappingLabels&&C.length>0){var R=M[M.length-1];p.x<R.textRect.width/(L.globals.rotateXLabels?Math.abs(L.config.xaxis.labels.rotate)/12:1.01)+R.x&&(p.text="")}return p}},{key:"checkForReversedLabels",value:function(d,p){var y=this.w;return y.config.yaxis[d]&&y.config.yaxis[d].reversed&&p.reverse(),p}},{key:"isYAxisHidden",value:function(d){var p=this.w,y=new Vn(this.ctx);return!p.config.yaxis[d].show||!p.config.yaxis[d].showForNullSeries&&y.isSeriesNull(d)&&-1===p.globals.collapsedSeriesIndices.indexOf(d)}},{key:"getYAxisForeColor",value:function(d,p){var y=this.w;return Array.isArray(d)&&y.globals.yAxisScale[p]&&this.ctx.theme.pushExtraColors(d,y.globals.yAxisScale[p].result.length,!1),d}},{key:"drawYAxisTicks",value:function(d,p,y,C,M,L,R){var H=this.w,G=new Mt(this.ctx),J=H.globals.translateY;if(C.show&&p>0){!0===H.config.yaxis[M].opposite&&(d+=C.width);for(var te=p;te>=0;te--){var K=J+p/10+H.config.yaxis[M].labels.offsetY-1;H.globals.isBarHorizontal&&(K=L*te),"heatmap"===H.config.chart.type&&(K+=L/2);var ae=G.drawLine(d+y.offsetX-C.width+C.offsetX,K+C.offsetY,d+y.offsetX+C.offsetX,K+C.offsetY,C.color);R.add(ae),J+=L}}}}]),ve}(),io=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"scaleSvgNode",value:function(d,p){var y=parseFloat(d.getAttributeNS(null,"width")),C=parseFloat(d.getAttributeNS(null,"height"));d.setAttributeNS(null,"width",y*p),d.setAttributeNS(null,"height",C*p),d.setAttributeNS(null,"viewBox","0 0 "+y+" "+C)}},{key:"fixSvgStringForIe11",value:function(d){if(!Qe.isIE11())return d;var p=0,y=d.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(C){return 2==++p?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"':C});return(y=y.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(d){var p=this.w.globals.dom.Paper.svg();if(1!==d){var y=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(y,d),p=(new XMLSerializer).serializeToString(y)}return this.fixSvgStringForIe11(p)}},{key:"cleanup",value:function(){var d=this.w,p=d.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),y=d.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),C=d.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(C,function(M){M.setAttribute("width",0)}),p&&p[0]&&(p[0].setAttribute("x",-500),p[0].setAttribute("x1",-500),p[0].setAttribute("x2",-500)),y&&y[0]&&(y[0].setAttribute("y",-100),y[0].setAttribute("y1",-100),y[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var d=this.getSvgString(),p=new Blob([d],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(p)}},{key:"dataURI",value:function(d){var p=this;return new Promise(function(y){var C=p.w,M=d?d.scale||d.width/C.globals.svgWidth:1;p.cleanup();var L=document.createElement("canvas");L.width=C.globals.svgWidth*M,L.height=parseInt(C.globals.dom.elWrap.style.height,10)*M;var R="transparent"===C.config.chart.background?"#fff":C.config.chart.background,H=L.getContext("2d");H.fillStyle=R,H.fillRect(0,0,L.width*M,L.height*M);var G=p.getSvgString(M);if(window.canvg&&Qe.isIE11()){var J=window.canvg.Canvg.fromString(H,G,{ignoreClear:!0,ignoreDimensions:!0});J.start();var te=L.msToBlob();J.stop(),y({blob:te})}else{var K="data:image/svg+xml,"+encodeURIComponent(G),ae=new Image;ae.crossOrigin="anonymous",ae.onload=function(){if(H.drawImage(ae,0,0),L.msToBlob){var pe=L.msToBlob();y({blob:pe})}else{var ge=L.toDataURL("image/png");y({imgURI:ge})}},ae.src=K}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var d=this;this.dataURI().then(function(p){var y=p.imgURI,C=p.blob;C?navigator.msSaveOrOpenBlob(C,d.w.globals.chartID+".png"):d.triggerDownload(y,d.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(d){var p=this,y=d.series,C=d.columnDelimiter,M=d.lineDelimiter,L=void 0===M?"\n":M,R=this.w,H=[],G=[],J="data:text/csv;charset=utf-8,\ufeff",te=new qi(this.ctx),K=new _r(this.ctx),ae=function(pe){var ge="";if(R.globals.axisCharts){if("category"===R.config.xaxis.type||R.config.xaxis.convertedCatToNumeric)if(R.globals.isBarHorizontal){var xe=R.globals.yLabelFormatters[0],Me=new Fn(p.ctx).getActiveConfigSeriesIndex();ge=xe(R.globals.labels[pe],{seriesIndex:Me,dataPointIndex:pe,w:R})}else ge=K.getLabel(R.globals.labels,R.globals.timescaleLabels,0,pe).text;"datetime"===R.config.xaxis.type&&(R.config.xaxis.categories.length?ge=R.config.xaxis.categories[pe]:R.config.labels.length&&(ge=R.config.labels[pe]))}else ge=R.config.labels[pe];return Array.isArray(ge)&&(ge=ge.join(" ")),Qe.isNumber(ge)?ge:ge.split(C).join("")};H.push(R.config.chart.toolbar.export.csv.headerCategory),y.map(function(pe,ge){var xe=pe.name?pe.name:"series-".concat(ge);R.globals.axisCharts&&H.push(xe.split(C).join("")?xe.split(C).join(""):"series-".concat(ge))}),R.globals.axisCharts||(H.push(R.config.chart.toolbar.export.csv.headerValue),G.push(H.join(C))),y.map(function(pe,ge){R.globals.axisCharts?function(xe,Me){if(H.length&&0===Me&&G.push(H.join(C)),xe.data&&xe.data.length)for(var ze=0;ze<xe.data.length;ze++){H=[];var Ke=ae(ze);if(Ke||(te.isFormatXY()?Ke=y[Me].data[ze].x:te.isFormat2DArray()&&(Ke=y[Me].data[ze]?y[Me].data[ze][0]:"")),0===Me){H.push("datetime"===R.config.xaxis.type&&String(Ke).length>=10?R.config.chart.toolbar.export.csv.dateFormatter(Ke):Qe.isNumber(Ke)?Ke:Ke.split(C).join(""));for(var Y=0;Y<R.globals.series.length;Y++)H.push(R.globals.series[Y][ze])}("candlestick"===R.config.chart.type||xe.type&&"candlestick"===xe.type)&&(H.pop(),H.push(R.globals.seriesCandleO[Me][ze]),H.push(R.globals.seriesCandleH[Me][ze]),H.push(R.globals.seriesCandleL[Me][ze]),H.push(R.globals.seriesCandleC[Me][ze])),("boxPlot"===R.config.chart.type||xe.type&&"boxPlot"===xe.type)&&(H.pop(),H.push(R.globals.seriesCandleO[Me][ze]),H.push(R.globals.seriesCandleH[Me][ze]),H.push(R.globals.seriesCandleM[Me][ze]),H.push(R.globals.seriesCandleL[Me][ze]),H.push(R.globals.seriesCandleC[Me][ze])),"rangeBar"===R.config.chart.type&&(H.pop(),H.push(R.globals.seriesRangeStart[Me][ze]),H.push(R.globals.seriesRangeEnd[Me][ze])),H.length&&G.push(H.join(C))}}(pe,ge):((H=[]).push(R.globals.labels[ge].split(C).join("")),H.push(R.globals.series[ge]),G.push(H.join(C)))}),J+=G.join(L),this.triggerDownload(encodeURI(J),R.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(d,p,y){var C=document.createElement("a");C.href=d,C.download=(p||this.w.globals.chartID)+y,document.body.appendChild(C),C.click(),document.body.removeChild(C)}}]),ve}(),Fr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.axesUtils=new _r(d),this.xaxisLabels=p.globals.labels.slice(),p.globals.timescaleLabels.length>0&&!p.globals.isBarHorizontal&&(this.xaxisLabels=p.globals.timescaleLabels.slice()),p.config.xaxis.overwriteCategories&&(this.xaxisLabels=p.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===p.config.xaxis.position?0:p.globals.gridHeight+1,this.offY=this.offY+p.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===p.config.chart.type&&p.config.plotOptions.bar.horizontal,this.xaxisFontSize=p.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=p.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=p.config.xaxis.labels.style.colors,this.xaxisBorderWidth=p.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=p.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?p.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=p.config.xaxis.axisBorder.height,this.yaxis=p.config.yaxis[0]}return gt(ve,[{key:"drawXaxis",value:function(){var d,p=this,y=this.w,C=new Mt(this.ctx),M=C.group({class:"apexcharts-xaxis",transform:"translate(".concat(y.config.xaxis.offsetX,", ").concat(y.config.xaxis.offsetY,")")}),L=C.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(y.globals.translateXAxisX,", ").concat(y.globals.translateXAxisY,")")});M.add(L);for(var R=y.globals.padHorizontal,H=[],G=0;G<this.xaxisLabels.length;G++)H.push(this.xaxisLabels[G]);var J=H.length;R=y.globals.isXNumeric?R+(d=y.globals.gridWidth/(J>1?J-1:J))/2+y.config.xaxis.labels.offsetX:R+(d=y.globals.gridWidth/H.length)+y.config.xaxis.labels.offsetX;for(var K=function(ze){var Ke=R-d/2+y.config.xaxis.labels.offsetX;0===ze&&1===J&&d/2===R&&1===y.globals.dataPoints&&(Ke=y.globals.gridWidth/2);var Y=p.axesUtils.getLabel(H,y.globals.timescaleLabels,Ke,ze,p.drawnLabels,p.xaxisFontSize),ne=28;if(y.globals.rotateXLabels&&(ne=22),(Y=void 0!==y.config.xaxis.tickAmount&&"dataPoints"!==y.config.xaxis.tickAmount&&"datetime"!==y.config.xaxis.type?p.axesUtils.checkLabelBasedOnTickamount(ze,Y,J):p.axesUtils.checkForOverflowingLabels(ze,Y,J,p.drawnLabels,p.drawnLabelsRects)).text&&y.globals.xaxisLabelsCount++,y.config.xaxis.labels.show){var be=C.drawText({x:Y.x,y:p.offY+y.config.xaxis.labels.offsetY+ne-("top"===y.config.xaxis.position?y.globals.xAxisHeight+y.config.xaxis.axisTicks.height-2:0),text:Y.text,textAnchor:"middle",fontWeight:Y.isBold?600:y.config.xaxis.labels.style.fontWeight,fontSize:p.xaxisFontSize,fontFamily:p.xaxisFontFamily,foreColor:Array.isArray(p.xaxisForeColors)?y.config.xaxis.convertedCatToNumeric?p.xaxisForeColors[y.globals.minX+ze-1]:p.xaxisForeColors[ze]:p.xaxisForeColors,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+y.config.xaxis.labels.style.cssClass});L.add(be);var Ie=document.createElementNS(y.globals.SVGNS,"title");Ie.textContent=Array.isArray(Y.text)?Y.text.join(" "):Y.text,be.node.appendChild(Ie),""!==Y.text&&(p.drawnLabels.push(Y.text),p.drawnLabelsRects.push(Y))}R+=d},ae=0;ae<=J-1;ae++)K(ae);if(void 0!==y.config.xaxis.title.text){var pe=C.group({class:"apexcharts-xaxis-title"}),ge=C.drawText({x:y.globals.gridWidth/2+y.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+y.globals.xAxisLabelsHeight+y.config.xaxis.title.offsetY,text:y.config.xaxis.title.text,textAnchor:"middle",fontSize:y.config.xaxis.title.style.fontSize,fontFamily:y.config.xaxis.title.style.fontFamily,fontWeight:y.config.xaxis.title.style.fontWeight,foreColor:y.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+y.config.xaxis.title.style.cssClass});pe.add(ge),M.add(pe)}if(y.config.xaxis.axisBorder.show){var xe=y.globals.barPadForNumericAxis,Me=C.drawLine(y.globals.padHorizontal+y.config.xaxis.axisBorder.offsetX-xe,this.offY,this.xaxisBorderWidth+xe,this.offY,y.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);M.add(Me)}return M}},{key:"drawXaxisInversed",value:function(d){var p,y,C=this,M=this.w,L=new Mt(this.ctx),R=M.config.yaxis[0].opposite?M.globals.translateYAxisX[d]:0,H=L.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:d}),G=L.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+R+", 0)"});H.add(G);var J=[];if(M.config.yaxis[d].show)for(var te=0;te<this.xaxisLabels.length;te++)J.push(this.xaxisLabels[te]);y=-(p=M.globals.gridHeight/J.length)/2.2;var K=M.globals.yLabelFormatters[0],ae=M.config.yaxis[0].labels;if(ae.show)for(var pe=function(ne){var be=void 0===J[ne]?"":J[ne];be=K(be,{seriesIndex:d,dataPointIndex:ne,w:M});var Ie=C.axesUtils.getYAxisForeColor(ae.style.colors,d),Je=0;Array.isArray(be)&&(Je=be.length/2*parseInt(ae.style.fontSize,10));var Nt=L.drawText({x:ae.offsetX-15,y:y+p+ae.offsetY-Je,text:be,textAnchor:C.yaxis.opposite?"start":"end",foreColor:Array.isArray(Ie)?Ie[ne]:Ie,fontSize:ae.style.fontSize,fontFamily:ae.style.fontFamily,fontWeight:ae.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+ae.style.cssClass});G.add(Nt);var St=document.createElementNS(M.globals.SVGNS,"title");if(St.textContent=Array.isArray(be)?be.join(" "):be,Nt.node.appendChild(St),0!==M.config.yaxis[d].labels.rotate){var Xt=L.rotateAroundCenter(Nt.node);Nt.node.setAttribute("transform","rotate(".concat(M.config.yaxis[d].labels.rotate," 0 ").concat(Xt.y,")"))}y+=p},ge=0;ge<=J.length-1;ge++)pe(ge);if(void 0!==M.config.yaxis[0].title.text){var xe=L.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+R+", 0)"}),Me=L.drawText({x:0,y:M.globals.gridHeight/2,text:M.config.yaxis[0].title.text,textAnchor:"middle",foreColor:M.config.yaxis[0].title.style.color,fontSize:M.config.yaxis[0].title.style.fontSize,fontWeight:M.config.yaxis[0].title.style.fontWeight,fontFamily:M.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+M.config.yaxis[0].title.style.cssClass});xe.add(Me),H.add(xe)}var ze=0;this.isCategoryBarHorizontal&&M.config.yaxis[0].opposite&&(ze=M.globals.gridWidth);var Ke=M.config.xaxis.axisBorder;if(Ke.show){var Y=L.drawLine(M.globals.padHorizontal+Ke.offsetX+ze,1+Ke.offsetY,M.globals.padHorizontal+Ke.offsetX+ze,M.globals.gridHeight+Ke.offsetY,Ke.color,0);H.add(Y)}return M.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(ze,J.length,M.config.yaxis[0].axisBorder,M.config.yaxis[0].axisTicks,0,p,H),H}},{key:"drawXaxisTicks",value:function(d,p){var y=this.w,C=d;if(!(d<0||d-2>y.globals.gridWidth)){var M=this.offY+y.config.xaxis.axisTicks.offsetY,L=M+y.config.xaxis.axisTicks.height;if("top"===y.config.xaxis.position&&(L=M-y.config.xaxis.axisTicks.height),y.config.xaxis.axisTicks.show){var R=new Mt(this.ctx).drawLine(d+y.config.xaxis.axisTicks.offsetX,M+y.config.xaxis.offsetY,C+y.config.xaxis.axisTicks.offsetX,L+y.config.xaxis.offsetY,y.config.xaxis.axisTicks.color);p.add(R),R.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var d=this.w,p=[],y=this.xaxisLabels.length,C=d.globals.padHorizontal;if(d.globals.timescaleLabels.length>0)for(var M=0;M<y;M++)p.push(C=this.xaxisLabels[M].position);else for(var L=y,R=0;R<L;R++){var H=L;d.globals.isXNumeric&&"bar"!==d.config.chart.type&&(H-=1),p.push(C+=d.globals.gridWidth/H)}return p}},{key:"xAxisLabelCorrections",value:function(){var d=this.w,p=new Mt(this.ctx),y=d.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),C=d.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text"),M=d.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),L=d.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(d.globals.rotateXLabels||d.config.xaxis.labels.rotateAlways)for(var R=0;R<C.length;R++){var H=p.rotateAroundCenter(C[R]);H.y=H.y-1,H.x=H.x+1,C[R].setAttribute("transform","rotate(".concat(d.config.xaxis.labels.rotate," ").concat(H.x," ").concat(H.y,")")),C[R].setAttribute("text-anchor","end"),y.setAttribute("transform","translate(0, ".concat(-10,")")),d.config.xaxis.labels.trim&&Array.prototype.forEach.call(C[R].childNodes,function(ae){p.placeTextWithEllipsis(ae,ae.textContent,d.globals.xAxisLabelsHeight-("bottom"===d.config.legend.position?20:10))})}else!function(){for(var ae=d.globals.gridWidth/(d.globals.labels.length+1),pe=0;pe<C.length;pe++)d.config.xaxis.labels.trim&&"datetime"!==d.config.xaxis.type&&Array.prototype.forEach.call(C[pe].childNodes,function(xe){p.placeTextWithEllipsis(xe,xe.textContent,ae)})}();if(M.length>0){var J=M[M.length-1].getBBox(),te=M[0].getBBox();J.x<-20&&M[M.length-1].parentNode.removeChild(M[M.length-1]),te.x+te.width>d.globals.gridWidth&&!d.globals.isBarHorizontal&&M[0].parentNode.removeChild(M[0]);for(var K=0;K<L.length;K++)p.placeTextWithEllipsis(L[K],L[K].textContent,d.config.yaxis[0].labels.maxWidth-2*parseFloat(d.config.yaxis[0].title.style.fontSize)-20)}}}]),ve}(),As=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.xaxisLabels=p.globals.labels.slice(),this.axesUtils=new _r(d),this.isTimelineBar="datetime"===p.config.xaxis.type&&p.globals.seriesRangeBarTimeline.length,p.globals.timescaleLabels.length>0&&(this.xaxisLabels=p.globals.timescaleLabels.slice())}return gt(ve,[{key:"drawGridArea",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,p=this.w,y=new Mt(this.ctx);null===d&&(d=y.group({class:"apexcharts-grid"}));var C=y.drawLine(p.globals.padHorizontal,1,p.globals.padHorizontal,p.globals.gridHeight,"transparent"),M=y.drawLine(p.globals.padHorizontal,p.globals.gridHeight,p.globals.gridWidth,p.globals.gridHeight,"transparent");return d.add(M),d.add(C),d}},{key:"drawGrid",value:function(){var d=null;return this.w.globals.axisCharts&&(d=this.renderGrid(),this.drawGridArea(d.el)),d}},{key:"createGridMask",value:function(){var d=this.w,p=d.globals,y=new Mt(this.ctx),C=Array.isArray(d.config.stroke.width)?0:d.config.stroke.width;if(Array.isArray(d.config.stroke.width)){var M=0;d.config.stroke.width.forEach(function(te){M=Math.max(M,te)}),C=M}p.dom.elGridRectMask=document.createElementNS(p.SVGNS,"clipPath"),p.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(p.cuid)),p.dom.elGridRectMarkerMask=document.createElementNS(p.SVGNS,"clipPath"),p.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(p.cuid)),p.dom.elForecastMask=document.createElementNS(p.SVGNS,"clipPath"),p.dom.elForecastMask.setAttribute("id","forecastMask".concat(p.cuid)),p.dom.elNonForecastMask=document.createElementNS(p.SVGNS,"clipPath"),p.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(p.cuid));var L=d.config.chart.type,R=0,H=0;("bar"===L||"rangeBar"===L||"candlestick"===L||"boxPlot"===L||d.globals.comboBarCount>0)&&d.globals.isXNumeric&&!d.globals.isBarHorizontal&&(H=d.config.grid.padding.right,p.barPadForNumericAxis>(R=d.config.grid.padding.left)&&(R=p.barPadForNumericAxis,H=p.barPadForNumericAxis)),p.dom.elGridRect=y.drawRect(-C/2-R-2,-C/2,p.gridWidth+C+H+R+4,p.gridHeight+C,0,"#fff"),new Vn(this).getLargestMarkerSize();var G=d.globals.markers.largestSize+1;p.dom.elGridRectMarker=y.drawRect(2*-G,2*-G,p.gridWidth+4*G,p.gridHeight+4*G,0,"#fff"),p.dom.elGridRectMask.appendChild(p.dom.elGridRect.node),p.dom.elGridRectMarkerMask.appendChild(p.dom.elGridRectMarker.node);var J=p.dom.baseEl.querySelector("defs");J.appendChild(p.dom.elGridRectMask),J.appendChild(p.dom.elForecastMask),J.appendChild(p.dom.elNonForecastMask),J.appendChild(p.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(d){var p=d.i,y=d.x1,G=this.w;0===p&&G.globals.skipFirstTimelinelabel||p===d.xCount-1&&G.globals.skipLastTimelinelabel&&!G.config.xaxis.labels.formatter||"radar"===G.config.chart.type||(G.config.grid.xaxis.lines.show&&this._drawGridLine({x1:y,y1:d.y1,x2:d.x2,y2:d.y2,parent:d.parent}),new Fr(this.ctx).drawXaxisTicks(y,this.elg))}},{key:"_drawGridLine",value:function(d){var p=d.x1,y=d.y1,C=d.x2,M=d.y2,L=d.parent,R=this.w,H=L.node.classList.contains("apexcharts-gridlines-horizontal"),G=R.config.grid.strokeDashArray,J=R.globals.barPadForNumericAxis,te=new Mt(this).drawLine(p-(H?J:0),y,C+(H?J:0),M,R.config.grid.borderColor,G);te.node.classList.add("apexcharts-gridline"),L.add(te)}},{key:"_drawGridBandRect",value:function(d){var p=d.c,y=d.x1,C=d.y1,M=d.x2,L=d.y2,R=d.type,H=this.w,G=new Mt(this.ctx),J=H.globals.barPadForNumericAxis;if("column"!==R||"datetime"!==H.config.xaxis.type){var K=G.drawRect(y-("row"===R?J:0),C,M+("row"===R?2*J:0),L,0,H.config.grid[R].colors[p],H.config.grid[R].opacity);this.elg.add(K),K.attr("clip-path","url(#gridRectMask".concat(H.globals.cuid,")")),K.node.classList.add("apexcharts-grid-".concat(R))}}},{key:"_drawXYLines",value:function(d){var p=this,y=d.xCount,C=d.tickAmount,M=this.w;if(M.config.grid.xaxis.lines.show||M.config.xaxis.axisTicks.show){var L,R=M.globals.padHorizontal,H=M.globals.gridHeight;M.globals.timescaleLabels.length?function(pe){for(var ge=pe.xC,Me=pe.y1,Ke=pe.y2,Y=0;Y<ge;Y++)p._drawGridLines({i:Y,x1:p.xaxisLabels[Y].position,y1:Me,x2:p.xaxisLabels[Y].position,y2:Ke,xCount:y,parent:p.elgridLinesV})}({xC:y,x1:R,y1:0,x2:L,y2:H}):(M.globals.isXNumeric&&(y=M.globals.xAxisScale.result.length),M.config.xaxis.convertedCatToNumeric&&(y=M.globals.xaxisLabelsCount),function(pe){var ge=pe.xC,xe=pe.x1,Me=pe.y1,ze=pe.x2,Ke=pe.y2;if(void 0!==M.config.xaxis.tickAmount&&"dataPoints"!==M.config.xaxis.tickAmount)M.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach(function(ne,be){var Ie=ne.getBBox();p._drawGridLines({i:be,x1:Ie.x+Ie.width/2,y1:Me,x2:Ie.x+Ie.width/2,y2:Ke,xCount:y,parent:p.elgridLinesV})});else for(var Y=0;Y<ge+(M.globals.isXNumeric?0:1);Y++)0===Y&&1===ge&&1===M.globals.dataPoints&&(ze=xe=M.globals.gridWidth/2),p._drawGridLines({i:Y,x1:xe,y1:Me,x2:ze,y2:Ke,xCount:y,parent:p.elgridLinesV}),ze=xe+=M.globals.gridWidth/(M.globals.isXNumeric?ge-1:ge)}({xC:y,x1:R,y1:0,x2:L,y2:H}))}if(M.config.grid.yaxis.lines.show){var G=0,J=0,te=M.globals.gridWidth,K=C+1;this.isTimelineBar&&(K=M.globals.labels.length);for(var ae=0;ae<K+(this.isTimelineBar?1:0);ae++)this._drawGridLine({x1:0,y1:G,x2:te,y2:J,parent:this.elgridLinesH}),J=G+=M.globals.gridHeight/(this.isTimelineBar?K:C)}}},{key:"_drawInvertedXYLines",value:function(d){var p=d.xCount,y=this.w;if(y.config.grid.xaxis.lines.show||y.config.xaxis.axisTicks.show)for(var C,M=y.globals.padHorizontal,L=y.globals.gridHeight,R=0;R<p+1;R++)y.config.grid.xaxis.lines.show&&this._drawGridLine({x1:M,y1:0,x2:C,y2:L,parent:this.elgridLinesV}),new Fr(this.ctx).drawXaxisTicks(M,this.elg),C=M=M+y.globals.gridWidth/p+.3;if(y.config.grid.yaxis.lines.show)for(var H=0,G=0,J=y.globals.gridWidth,te=0;te<y.globals.dataPoints+1;te++)this._drawGridLine({x1:0,y1:H,x2:J,y2:G,parent:this.elgridLinesH}),G=H+=y.globals.gridHeight/y.globals.dataPoints}},{key:"renderGrid",value:function(){var d=this.w,p=new Mt(this.ctx);this.elg=p.group({class:"apexcharts-grid"}),this.elgridLinesH=p.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=p.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),d.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var y,C=d.globals.yAxisScale.length?d.globals.yAxisScale[0].result.length-1:5,M=0;M<d.globals.series.length&&(void 0!==d.globals.yAxisScale[M]&&(C=d.globals.yAxisScale[M].result.length-1),!(C>2));M++);return!d.globals.isBarHorizontal||this.isTimelineBar?(y=this.xaxisLabels.length,this.isTimelineBar&&(C=d.globals.labels.length,d.config.xaxis.tickAmount&&d.config.xaxis.labels.formatter&&(y=d.config.xaxis.tickAmount)),this._drawXYLines({xCount:y,tickAmount:C})):this._drawInvertedXYLines({xCount:y=C,tickAmount:C=d.globals.xTickAmount}),this.drawGridBands(y,C),{el:this.elg,xAxisTickWidth:d.globals.gridWidth/y}}},{key:"drawGridBands",value:function(d,p){var y=this.w;if(void 0!==y.config.grid.row.colors&&y.config.grid.row.colors.length>0)for(var C=0,M=y.globals.gridHeight/p,L=y.globals.gridWidth,R=0,H=0;R<p;R++,H++)H>=y.config.grid.row.colors.length&&(H=0),this._drawGridBandRect({c:H,x1:0,y1:C,x2:L,y2:M,type:"row"}),C+=y.globals.gridHeight/p;if(void 0!==y.config.grid.column.colors&&y.config.grid.column.colors.length>0)for(var G=y.globals.isBarHorizontal||"category"!==y.config.xaxis.type&&!y.config.xaxis.convertedCatToNumeric?d:d-1,J=y.globals.padHorizontal,te=y.globals.padHorizontal+y.globals.gridWidth/G,K=y.globals.gridHeight,ae=0,pe=0;ae<d;ae++,pe++)pe>=y.config.grid.column.colors.length&&(pe=0),this._drawGridBandRect({c:pe,x1:J,y1:0,x2:te,y2:K,type:"column"}),J+=y.globals.gridWidth/G}}]),ve}(),Ri=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"niceScale",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,M=arguments.length>4?arguments[4]:void 0,L=this.w,R=Math.abs(p-d);if("dataPoints"===(y=this._adjustTicksForSmallRange(y,C,R))&&(y=L.globals.dataPoints-1),d===Number.MIN_VALUE&&0===p||!Qe.isNumber(d)&&!Qe.isNumber(p)||d===Number.MIN_VALUE&&p===-Number.MAX_VALUE){var H=this.linearScale(d=0,p=y,y);return H}d>p?(console.warn("axis.min cannot be greater than axis.max"),p=d+.1):d===p&&(d=0===d?0:d-.5,p=0===p?2:p+.5);var G=[];R<1&&M&&("candlestick"===L.config.chart.type||"candlestick"===L.config.series[C].type||"boxPlot"===L.config.chart.type||"boxPlot"===L.config.series[C].type||L.globals.isRangeData)&&(p*=1.01);var J=y+1;J<2?J=2:J>2&&(J-=2);var te=R/J,K=Math.floor(Qe.log10(te)),ae=Math.pow(10,K),pe=Math.round(te/ae);pe<1&&(pe=1);var ge=pe*ae,xe=ge*Math.floor(d/ge),Me=ge*Math.ceil(p/ge),ze=xe;if(M&&R>2){for(;G.push(ze),!((ze+=ge)>Me););return{result:G,niceMin:G[0],niceMax:G[G.length-1]}}var Ke=d;(G=[]).push(Ke);for(var Y=Math.abs(p-d)/y,ne=0;ne<=y;ne++)G.push(Ke+=Y);return G[G.length-2]>=p&&G.pop(),{result:G,niceMin:G[0],niceMax:G[G.length-1]}}},{key:"linearScale",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,C=arguments.length>3?arguments[3]:void 0,M=Math.abs(p-d);"dataPoints"===(y=this._adjustTicksForSmallRange(y,C,M))&&(y=this.w.globals.dataPoints-1);var L=M/y;y===Number.MAX_VALUE&&(y=10,L=1);for(var R=[],H=d;y>=0;)R.push(H),H+=L,y-=1;return{result:R,niceMin:R[0],niceMax:R[R.length-1]}}},{key:"logarithmicScale",value:function(d){for(var p=[],y=Math.ceil(Math.log10(d))+1,C=0;C<y;C++)p.push(Math.pow(10,C));return{result:p,niceMin:p[0],niceMax:p[p.length-1]}}},{key:"_adjustTicksForSmallRange",value:function(d,p,y){var C=d;if(void 0!==p&&this.w.config.yaxis[p].labels.formatter&&void 0===this.w.config.yaxis[p].tickAmount){var M=this.w.config.yaxis[p].labels.formatter(1);Qe.isNumber(Number(M))&&!Qe.isFloat(M)&&(C=Math.ceil(y))}return C<d?C:d}},{key:"setYScaleForIndex",value:function(d,p,y){var C=this.w.globals,M=this.w.config,L=C.isBarHorizontal?M.xaxis:M.yaxis[d];void 0===C.yAxisScale[d]&&(C.yAxisScale[d]=[]);var R=Math.abs(y-p);L.logarithmic&&R<=5&&(C.invalidLogScale=!0),L.logarithmic&&R>5?(C.allSeriesCollapsed=!1,C.yAxisScale[d]=this.logarithmicScale(y)):y!==-Number.MAX_VALUE&&Qe.isNumber(y)?(C.allSeriesCollapsed=!1,C.yAxisScale[d]=void 0===L.min&&void 0===L.max||L.forceNiceScale?this.niceScale(p,y,L.tickAmount?L.tickAmount:R<5&&R>1?R+1:5,d,void 0===M.yaxis[d].max&&void 0===M.yaxis[d].min||M.yaxis[d].forceNiceScale):this.linearScale(p,y,L.tickAmount,d)):C.yAxisScale[d]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(d,p){var y=this.w,C=y.globals,M=y.config.xaxis,L=Math.abs(p-d);return C.xAxisScale=p!==-Number.MAX_VALUE&&Qe.isNumber(p)?this.linearScale(d,p,M.tickAmount?M.tickAmount:L<5&&L>1?L+1:5,0):this.linearScale(0,5,5),C.xAxisScale}},{key:"setMultipleYScales",value:function(){var d=this,p=this.w.globals,y=this.w.config,C=p.minYArr.concat([]),M=p.maxYArr.concat([]),L=[];y.yaxis.forEach(function(R,H){var G=H;y.series.forEach(function(K,ae){K.name===R.seriesName&&(G=ae,L.push(H!==ae?{index:ae,similarIndex:H,alreadyExists:!0}:{index:ae}))}),d.setYScaleForIndex(H,C[G],M[G])}),this.sameScaleInMultipleAxes(C,M,L)}},{key:"sameScaleInMultipleAxes",value:function(d,p,y){var C=this,M=this.w.config,L=this.w.globals,R=[];y.forEach(function(ge){ge.alreadyExists&&(void 0===R[ge.index]&&(R[ge.index]=[]),R[ge.index].push(ge.index),R[ge.index].push(ge.similarIndex))}),L.yAxisSameScaleIndices=R,R.forEach(function(ge,xe){R.forEach(function(Me,ze){var Ke,Y;xe!==ze&&(Ke=ge,Y=Me,Ke.filter(function(ne){return-1!==Y.indexOf(ne)})).length>0&&(R[xe]=R[xe].concat(R[ze]))})});var H=R.map(function(ge){return ge.filter(function(xe,Me){return ge.indexOf(xe)===Me})}).map(function(ge){return ge.sort()});R=R.filter(function(ge){return!!ge});var G=H.slice(),J=G.map(function(ge){return JSON.stringify(ge)});G=G.filter(function(ge,xe){return J.indexOf(JSON.stringify(ge))===xe});var te=[],K=[];d.forEach(function(ge,xe){G.forEach(function(Me,ze){Me.indexOf(xe)>-1&&(void 0===te[ze]&&(te[ze]=[],K[ze]=[]),te[ze].push({key:xe,value:ge}),K[ze].push({key:xe,value:p[xe]}))})});var ae=Array.apply(null,Array(G.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),pe=Array.apply(null,Array(G.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);te.forEach(function(ge,xe){ge.forEach(function(Me,ze){ae[xe]=Math.min(Me.value,ae[xe])})}),K.forEach(function(ge,xe){ge.forEach(function(Me,ze){pe[xe]=Math.max(Me.value,pe[xe])})}),d.forEach(function(ge,xe){K.forEach(function(Me,ze){var Ke=ae[ze],Y=pe[ze];M.chart.stacked&&(Y=0,Me.forEach(function(ne,be){ne.value!==-Number.MAX_VALUE&&(Y+=ne.value),Ke!==Number.MIN_VALUE&&(Ke+=te[ze][be].value)})),Me.forEach(function(ne,be){Me[be].key===xe&&(void 0!==M.yaxis[xe].min&&(Ke="function"==typeof M.yaxis[xe].min?M.yaxis[xe].min(L.minY):M.yaxis[xe].min),void 0!==M.yaxis[xe].max&&(Y="function"==typeof M.yaxis[xe].max?M.yaxis[xe].max(L.maxY):M.yaxis[xe].max),C.setYScaleForIndex(xe,Ke,Y))})})})}},{key:"autoScaleY",value:function(d,p,y){d||(d=this);var C=d.w;if(C.globals.isMultipleYAxis||C.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),p;var M=C.globals.seriesX[0],L=C.config.chart.stacked;return p.forEach(function(R,H){for(var G=0,J=0;J<M.length;J++)if(M[J]>=y.xaxis.min){G=J;break}var te,K,ae=C.globals.minYArr[H],pe=C.globals.maxYArr[H],ge=C.globals.stackedSeriesTotals;C.globals.series.forEach(function(xe,Me){var ze=xe[G];L?(te=K=ze=ge[G],ge.forEach(function(Ke,Y){M[Y]<=y.xaxis.max&&M[Y]>=y.xaxis.min&&(Ke>K&&null!==Ke&&(K=Ke),xe[Y]<te&&null!==xe[Y]&&(te=xe[Y]))})):(te=K=ze,xe.forEach(function(Ke,Y){if(M[Y]<=y.xaxis.max&&M[Y]>=y.xaxis.min){var ne=Ke,be=Ke;C.globals.series.forEach(function(Ie,Je){null!==Ke&&(ne=Math.min(Ie[Y],ne),be=Math.max(Ie[Y],be))}),be>K&&null!==be&&(K=be),ne<te&&null!==ne&&(te=ne)}})),void 0===te&&void 0===K&&(te=ae,K=pe),(K*=K<0?.9:1.1)<0&&K<pe&&(K=pe),(te*=te<0?1.1:.9)<0&&te>ae&&(te=ae),p.length>1?(p[Me].min=void 0===R.min?te:R.min,p[Me].max=void 0===R.max?K:R.max):(p[0].min=void 0===R.min?te:R.min,p[0].max=void 0===R.max?K:R.max)})}),p}}]),ve}(),ds=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.scales=new Ri(d)}return gt(ve,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,M=this.w.config,L=this.w.globals,R=-Number.MAX_VALUE,H=Number.MIN_VALUE;null===C&&(C=d+1);var G=L.series,J=G,te=G;"candlestick"===M.chart.type?(J=L.seriesCandleL,te=L.seriesCandleH):"boxPlot"===M.chart.type?(J=L.seriesCandleO,te=L.seriesCandleC):L.isRangeData&&(J=L.seriesRangeStart,te=L.seriesRangeEnd);for(var K=d;K<C;K++){L.dataPoints=Math.max(L.dataPoints,G[K].length);for(var ae=0;ae<L.series[K].length;ae++){var pe=G[K][ae];null!==pe&&Qe.isNumber(pe)?(void 0!==te[K][ae]&&(R=Math.max(R,te[K][ae])),void 0!==J[K][ae]&&(p=Math.min(p,J[K][ae]),y=Math.max(y,J[K][ae])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==L.seriesCandleC[K][ae]&&(R=Math.max(R,L.seriesCandleO[K][ae]),R=Math.max(R,L.seriesCandleH[K][ae]),R=Math.max(R,L.seriesCandleL[K][ae]),R=Math.max(R,L.seriesCandleC[K][ae]),"boxPlot"===this.w.config.chart.type&&(R=Math.max(R,L.seriesCandleM[K][ae]))),!M.series[K].type||"candlestick"===M.series[K].type&&"boxPlot"===M.series[K].type||(R=Math.max(R,L.series[K][ae]),p=Math.min(p,L.series[K][ae])),y=R),L.seriesGoals[K]&&L.seriesGoals[K][ae]&&Array.isArray(L.seriesGoals[K][ae])&&L.seriesGoals[K][ae].forEach(function(ge){H!==Number.MIN_VALUE&&(H=Math.min(H,ge.value),p=H),R=Math.max(R,ge.value),y=R}),Qe.isFloat(pe)&&(pe=Qe.noExponents(pe),L.yValueDecimal=Math.max(L.yValueDecimal,pe.toString().split(".")[1].length)),H>J[K][ae]&&J[K][ae]<0&&(H=J[K][ae])):L.hasNullValues=!0}}return"rangeBar"===M.chart.type&&L.seriesRangeStart.length&&L.isBarHorizontal&&"datetime"===M.xaxis.type&&(H=p),"bar"===M.chart.type&&(H<0&&R<0&&(R=0),H===Number.MIN_VALUE&&(H=0)),{minY:H,maxY:R,lowestY:p,highestY:y}}},{key:"setYRange",value:function(){var d=this.w.globals,p=this.w.config;d.maxY=-Number.MAX_VALUE,d.minY=Number.MIN_VALUE;var y=Number.MAX_VALUE;if(d.isMultipleYAxis)for(var C=0;C<d.series.length;C++){var M=this.getMinYMaxY(C,y,null,C+1);d.minYArr.push(M.minY),d.maxYArr.push(M.maxY),y=M.lowestY}var L=this.getMinYMaxY(0,y,null,d.series.length);if(d.minY=L.minY,d.maxY=L.maxY,y=L.lowestY,p.chart.stacked&&this._setStackedMinMax(),("line"===p.chart.type||"area"===p.chart.type||"candlestick"===p.chart.type||"boxPlot"===p.chart.type||"rangeBar"===p.chart.type&&!d.isBarHorizontal)&&d.minY===Number.MIN_VALUE&&y!==-Number.MAX_VALUE&&y!==d.maxY){var R=d.maxY-y;(y>=0&&y<=10||void 0!==p.yaxis[0].min||void 0!==p.yaxis[0].max)&&(R=0),d.minY=y-5*R/100,y>0&&d.minY<0&&(d.minY=0),d.maxY=d.maxY+5*R/100}return p.yaxis.forEach(function(H,G){void 0!==H.max&&("number"==typeof H.max?d.maxYArr[G]=H.max:"function"==typeof H.max&&(d.maxYArr[G]=H.max(d.isMultipleYAxis?d.maxYArr[G]:d.maxY)),d.maxY=d.maxYArr[G]),void 0!==H.min&&("number"==typeof H.min?d.minYArr[G]=H.min:"function"==typeof H.min&&(d.minYArr[G]=H.min(d.isMultipleYAxis?d.minYArr[G]===Number.MIN_VALUE?0:d.minYArr[G]:d.minY)),d.minY=d.minYArr[G])}),d.isBarHorizontal&&["min","max"].forEach(function(H){void 0!==p.xaxis[H]&&"number"==typeof p.xaxis[H]&&("min"===H?d.minY=p.xaxis[H]:d.maxY=p.xaxis[H])}),d.isMultipleYAxis?(this.scales.setMultipleYScales(),d.minY=y,d.yAxisScale.forEach(function(H,G){d.minYArr[G]=H.niceMin,d.maxYArr[G]=H.niceMax})):(this.scales.setYScaleForIndex(0,d.minY,d.maxY),d.minY=d.yAxisScale[0].niceMin,d.maxY=d.yAxisScale[0].niceMax,d.minYArr[0]=d.yAxisScale[0].niceMin,d.maxYArr[0]=d.yAxisScale[0].niceMax),{minY:d.minY,maxY:d.maxY,minYArr:d.minYArr,maxYArr:d.maxYArr,yAxisScale:d.yAxisScale}}},{key:"setXRange",value:function(){var d=this.w.globals,p=this.w.config,y="numeric"===p.xaxis.type||"datetime"===p.xaxis.type||"category"===p.xaxis.type&&!d.noLabelsProvided||d.noLabelsProvided||d.isXNumeric;if(d.isXNumeric&&function(){for(var R=0;R<d.series.length;R++)if(d.labels[R])for(var H=0;H<d.labels[R].length;H++)null!==d.labels[R][H]&&Qe.isNumber(d.labels[R][H])&&(d.maxX=Math.max(d.maxX,d.labels[R][H]),d.initialMaxX=Math.max(d.maxX,d.labels[R][H]),d.minX=Math.min(d.minX,d.labels[R][H]),d.initialMinX=Math.min(d.minX,d.labels[R][H]))}(),d.noLabelsProvided&&0===p.xaxis.categories.length&&(d.maxX=d.labels[d.labels.length-1],d.initialMaxX=d.labels[d.labels.length-1],d.minX=1,d.initialMinX=1),d.isXNumeric||d.noLabelsProvided||d.dataFormatXNumeric){var C;if(void 0===p.xaxis.tickAmount?(C=Math.round(d.svgWidth/150),"numeric"===p.xaxis.type&&d.dataPoints<30&&(C=d.dataPoints-1),C>d.dataPoints&&0!==d.dataPoints&&(C=d.dataPoints-1)):"dataPoints"===p.xaxis.tickAmount?(d.series.length>1&&(C=d.series[d.maxValsInArrayIndex].length-1),d.isXNumeric&&(C=d.maxX-d.minX-1)):C=p.xaxis.tickAmount,d.xTickAmount=C,void 0!==p.xaxis.max&&"number"==typeof p.xaxis.max&&(d.maxX=p.xaxis.max),void 0!==p.xaxis.min&&"number"==typeof p.xaxis.min&&(d.minX=p.xaxis.min),void 0!==p.xaxis.range&&(d.minX=d.maxX-p.xaxis.range),d.minX!==Number.MAX_VALUE&&d.maxX!==-Number.MAX_VALUE)if(p.xaxis.convertedCatToNumeric&&!d.dataFormatXNumeric){for(var M=[],L=d.minX-1;L<d.maxX;L++)M.push(L+1);d.xAxisScale={result:M,niceMin:M[0],niceMax:M[M.length-1]}}else d.xAxisScale=this.scales.setXScale(d.minX,d.maxX);else d.xAxisScale=this.scales.linearScale(1,C,C),d.noLabelsProvided&&d.labels.length>0&&(d.xAxisScale=this.scales.linearScale(1,d.labels.length,C-1),d.seriesX=d.labels.slice());y&&(d.labels=d.xAxisScale.result.slice())}return d.isBarHorizontal&&d.labels.length&&(d.xTickAmount=d.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:d.minX,maxX:d.maxX}}},{key:"setZRange",value:function(){var d=this.w.globals;if(d.isDataXYZ)for(var p=0;p<d.series.length;p++)if(void 0!==d.seriesZ[p])for(var y=0;y<d.seriesZ[p].length;y++)null!==d.seriesZ[p][y]&&Qe.isNumber(d.seriesZ[p][y])&&(d.maxZ=Math.max(d.maxZ,d.seriesZ[p][y]),d.minZ=Math.min(d.minZ,d.seriesZ[p][y]))}},{key:"_handleSingleDataPoint",value:function(){var d=this.w.globals,p=this.w.config;if(d.minX===d.maxX){var y=new Un(this.ctx);if("datetime"===p.xaxis.type){var C=y.getDate(d.minX);C.setUTCDate(C.getDate()-2),d.minX=new Date(C).getTime();var M=y.getDate(d.maxX);M.setUTCDate(M.getDate()+2),d.maxX=new Date(M).getTime()}else("numeric"===p.xaxis.type||"category"===p.xaxis.type&&!d.noLabelsProvided)&&(d.minX=d.minX-2,d.initialMinX=d.minX,d.maxX=d.maxX+2,d.initialMaxX=d.maxX)}}},{key:"_getMinXDiff",value:function(){var d=this.w.globals;d.isXNumeric&&d.seriesX.forEach(function(p,y){1===p.length&&p.push(d.seriesX[d.maxValsInArrayIndex][d.seriesX[d.maxValsInArrayIndex].length-1]);var C=p.slice();C.sort(function(M,L){return M-L}),C.forEach(function(M,L){if(L>0){var R=M-C[L-1];R>0&&(d.minXDiff=Math.min(R,d.minXDiff))}}),1===d.dataPoints&&d.minXDiff===Number.MAX_VALUE&&(d.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var d=this.w.globals,p=[],y=[];if(d.series.length)for(var C=0;C<d.series[d.maxValsInArrayIndex].length;C++)for(var M=0,L=0,R=0;R<d.series.length;R++)null!==d.series[R][C]&&Qe.isNumber(d.series[R][C])&&(d.series[R][C]>0?M=M+parseFloat(d.series[R][C])+1e-4:L+=parseFloat(d.series[R][C])),R===d.series.length-1&&(p.push(M),y.push(L));for(var H=0;H<p.length;H++)d.maxY=Math.max(d.maxY,p[H]),d.minY=Math.min(d.minY,y[H])}}]),ve}(),Ni=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.xaxisFontSize=p.config.xaxis.labels.style.fontSize,this.axisFontFamily=p.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=p.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===p.config.chart.type&&p.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===p.config.xaxis.position&&(this.xAxisoffX=p.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new _r(d)}return gt(ve,[{key:"drawYaxis",value:function(d){var p=this,y=this.w,C=new Mt(this.ctx),M=y.config.yaxis[d].labels.style,L=M.fontSize,R=M.fontFamily,H=M.fontWeight,G=C.group({class:"apexcharts-yaxis",rel:d,transform:"translate("+y.globals.translateYAxisX[d]+", 0)"});if(this.axesUtils.isYAxisHidden(d))return G;var J=C.group({class:"apexcharts-yaxis-texts-g"});G.add(J);var te=y.globals.yAxisScale[d].result.length-1,K=y.globals.gridHeight/te,ae=y.globals.translateY,pe=y.globals.yLabelFormatters[d],ge=y.globals.yAxisScale[d].result.slice();ge=this.axesUtils.checkForReversedLabels(d,ge);var xe="";if(y.config.yaxis[d].labels.show)for(var Me=function(Nt){var St=ge[Nt];St=pe(St,Nt,y);var Xt=y.config.yaxis[d].labels.padding;y.config.yaxis[d].opposite&&0!==y.config.yaxis.length&&(Xt*=-1);var gn=p.axesUtils.getYAxisForeColor(M.colors,d),hn=C.drawText({x:Xt,y:ae+te/10+y.config.yaxis[d].labels.offsetY+1,text:St,textAnchor:y.config.yaxis[d].opposite?"start":"end",fontSize:L,fontFamily:R,fontWeight:H,foreColor:Array.isArray(gn)?gn[Nt]:gn,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+M.cssClass});Nt===te&&(xe=hn),J.add(hn);var Kn=document.createElementNS(y.globals.SVGNS,"title");if(Kn.textContent=Array.isArray(St)?St.join(" "):St,hn.node.appendChild(Kn),0!==y.config.yaxis[d].labels.rotate){var Bi=C.rotateAroundCenter(xe.node),zn=C.rotateAroundCenter(hn.node);hn.node.setAttribute("transform","rotate(".concat(y.config.yaxis[d].labels.rotate," ").concat(Bi.x," ").concat(zn.y,")"))}ae+=K},ze=te;ze>=0;ze--)Me(ze);if(void 0!==y.config.yaxis[d].title.text){var Ke=C.group({class:"apexcharts-yaxis-title"}),Y=0;y.config.yaxis[d].opposite&&(Y=y.globals.translateYAxisX[d]);var ne=C.drawText({x:Y,y:y.globals.gridHeight/2+y.globals.translateY+y.config.yaxis[d].title.offsetY,text:y.config.yaxis[d].title.text,textAnchor:"end",foreColor:y.config.yaxis[d].title.style.color,fontSize:y.config.yaxis[d].title.style.fontSize,fontWeight:y.config.yaxis[d].title.style.fontWeight,fontFamily:y.config.yaxis[d].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+y.config.yaxis[d].title.style.cssClass});Ke.add(ne),G.add(Ke)}var be=y.config.yaxis[d].axisBorder,Ie=31+be.offsetX;if(y.config.yaxis[d].opposite&&(Ie=-31-be.offsetX),be.show){var Je=C.drawLine(Ie,y.globals.translateY+be.offsetY-2,Ie,y.globals.gridHeight+y.globals.translateY+be.offsetY+2,be.color,0,be.width);G.add(Je)}return y.config.yaxis[d].axisTicks.show&&this.axesUtils.drawYAxisTicks(Ie,te,be,y.config.yaxis[d].axisTicks,d,K,G),G}},{key:"drawYaxisInversed",value:function(d){var p=this.w,y=new Mt(this.ctx),C=y.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),M=y.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(p.globals.translateXAxisX,", ").concat(p.globals.translateXAxisY,")")});C.add(M);var L=p.globals.yAxisScale[d].result.length-1,R=p.globals.gridWidth/L+.1,H=R+p.config.xaxis.labels.offsetX,G=p.globals.xLabelFormatter,J=p.globals.yAxisScale[d].result.slice(),te=p.globals.timescaleLabels;te.length>0&&(this.xaxisLabels=te.slice(),L=(J=te.slice()).length),J=this.axesUtils.checkForReversedLabels(d,J);var K=te.length;if(p.config.xaxis.labels.show)for(var ae=K?0:L;K?ae<K:ae>=0;K?ae++:ae--){var pe=J[ae];pe=G(pe,ae,p);var ge=p.globals.gridWidth+p.globals.padHorizontal-(H-R+p.config.xaxis.labels.offsetX);if(te.length){var xe=this.axesUtils.getLabel(J,te,ge,ae,this.drawnLabels,this.xaxisFontSize);ge=xe.x,pe=xe.text,this.drawnLabels.push(xe.text),0===ae&&p.globals.skipFirstTimelinelabel&&(pe=""),ae===J.length-1&&p.globals.skipLastTimelinelabel&&(pe="")}var Me=y.drawText({x:ge,y:this.xAxisoffX+p.config.xaxis.labels.offsetY+30-("top"===p.config.xaxis.position?p.globals.xAxisHeight+p.config.xaxis.axisTicks.height-2:0),text:pe,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[d]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:p.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+p.config.xaxis.labels.style.cssClass});M.add(Me),Me.tspan(pe);var ze=document.createElementNS(p.globals.SVGNS,"title");ze.textContent=pe,Me.node.appendChild(ze),H+=R}return this.inversedYAxisTitleText(C),this.inversedYAxisBorder(C),C}},{key:"inversedYAxisBorder",value:function(d){var p=this.w,y=new Mt(this.ctx),C=p.config.xaxis.axisBorder;if(C.show){var M=0;"bar"===p.config.chart.type&&p.globals.isXNumeric&&(M-=15);var L=y.drawLine(p.globals.padHorizontal+M+C.offsetX,this.xAxisoffX,p.globals.gridWidth,this.xAxisoffX,C.color,0,C.height);d.add(L)}}},{key:"inversedYAxisTitleText",value:function(d){var p=this.w,y=new Mt(this.ctx);if(void 0!==p.config.xaxis.title.text){var C=y.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),M=y.drawText({x:p.globals.gridWidth/2+p.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(p.config.xaxis.title.style.fontSize)+p.config.xaxis.title.offsetY+20,text:p.config.xaxis.title.text,textAnchor:"middle",fontSize:p.config.xaxis.title.style.fontSize,fontFamily:p.config.xaxis.title.style.fontFamily,fontWeight:p.config.xaxis.title.style.fontWeight,foreColor:p.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+p.config.xaxis.title.style.cssClass});C.add(M),d.add(C)}}},{key:"yAxisTitleRotate",value:function(d,p){var y=this.w,C=new Mt(this.ctx),M={width:0,height:0},L={width:0,height:0},R=y.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-texts-g"));null!==R&&(M=R.getBoundingClientRect());var H=y.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-title text"));if(null!==H&&(L=H.getBoundingClientRect()),null!==H){var G=this.xPaddingForYAxisTitle(d,M,L,p);H.setAttribute("x",G.xPos-(p?10:0))}if(null!==H){var J=C.rotateAroundCenter(H);H.setAttribute("transform","rotate(".concat(p?-1*y.config.yaxis[d].title.rotate:y.config.yaxis[d].title.rotate," ").concat(J.x," ").concat(J.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(d,p,y,C){var M=this.w,L=0,R=0,H=10;return void 0===M.config.yaxis[d].title.text||d<0?{xPos:R,padd:0}:(C?(R=p.width+M.config.yaxis[d].title.offsetX+y.width/2+H/2,0===(L+=1)&&(R-=H/2)):(R=-1*p.width+M.config.yaxis[d].title.offsetX+H/2+y.width/2,M.globals.isBarHorizontal&&(R=-1*p.width-M.config.yaxis[d].title.offsetX-(H=25))),{xPos:R,padd:H})}},{key:"setYAxisXPosition",value:function(d,p){var y=this.w,C=0,M=0,L=18,R=1;y.config.yaxis.length>1&&(this.multipleYs=!0),y.config.yaxis.map(function(H,G){var J=y.globals.ignoreYAxisIndexes.indexOf(G)>-1||!H.show||H.floating||0===d[G].width,te=d[G].width+p[G].width;H.opposite?y.globals.isBarHorizontal?y.globals.translateYAxisX[G]=(M=y.globals.gridWidth+y.globals.translateX-1)-H.labels.offsetX:(M=y.globals.gridWidth+y.globals.translateX+R,J||(R=R+te+20),y.globals.translateYAxisX[G]=M-H.labels.offsetX+20):(C=y.globals.translateX-L,J||(L=L+te+20),y.globals.translateYAxisX[G]=C+H.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var d=this.w,p=d.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(p=Qe.listToArray(p)).forEach(function(y,C){var M=d.config.yaxis[C];if(M&&void 0!==M.labels.align){var L=d.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(C,"'] .apexcharts-yaxis-texts-g")),R=d.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(C,"'] .apexcharts-yaxis-label"));R=Qe.listToArray(R);var H=L.getBoundingClientRect();"left"===M.labels.align?(R.forEach(function(G,J){G.setAttribute("text-anchor","start")}),M.opposite||L.setAttribute("transform","translate(-".concat(H.width,", 0)"))):"center"===M.labels.align?(R.forEach(function(G,J){G.setAttribute("text-anchor","middle")}),L.setAttribute("transform","translate(".concat(H.width/2*(M.opposite?1:-1),", 0)"))):"right"===M.labels.align&&(R.forEach(function(G,J){G.setAttribute("text-anchor","end")}),M.opposite&&L.setAttribute("transform","translate(".concat(H.width,", 0)")))}})}}]),ve}(),Si=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.documentEvent=Qe.bind(this.documentEvent,this)}return gt(ve,[{key:"addEventListener",value:function(d,p){var y=this.w;y.globals.events.hasOwnProperty(d)?y.globals.events[d].push(p):y.globals.events[d]=[p]}},{key:"removeEventListener",value:function(d,p){var y=this.w;if(y.globals.events.hasOwnProperty(d)){var C=y.globals.events[d].indexOf(p);-1!==C&&y.globals.events[d].splice(C,1)}}},{key:"fireEvent",value:function(d,p){var y=this.w;if(y.globals.events.hasOwnProperty(d)){p&&p.length||(p=[]);for(var C=y.globals.events[d],M=C.length,L=0;L<M;L++)C[L].apply(null,p)}}},{key:"setupEventHandlers",value:function(){var d=this,p=this.w,y=this.ctx,C=p.globals.dom.baseEl.querySelector(p.globals.chartClass);this.ctx.eventList.forEach(function(M){C.addEventListener(M,function(L){var R=Object.assign({},p,{seriesIndex:p.globals.capturedSeriesIndex,dataPointIndex:p.globals.capturedDataPointIndex});"mousemove"===L.type||"touchmove"===L.type?"function"==typeof p.config.chart.events.mouseMove&&p.config.chart.events.mouseMove(L,y,R):"mouseleave"===L.type||"touchleave"===L.type?"function"==typeof p.config.chart.events.mouseLeave&&p.config.chart.events.mouseLeave(L,y,R):("mouseup"===L.type&&1===L.which||"touchend"===L.type)&&("function"==typeof p.config.chart.events.click&&p.config.chart.events.click(L,y,R),y.ctx.events.fireEvent("click",[L,y,R]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(M){p.globals.dom.baseEl.addEventListener(M,d.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(d){var p=this.w,y=d.target.className;if("click"===d.type){var C=p.globals.dom.baseEl.querySelector(".apexcharts-menu");C&&C.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==y&&C.classList.remove("apexcharts-menu-open")}p.globals.clientX="touchmove"===d.type?d.touches[0].clientX:d.clientX,p.globals.clientY="touchmove"===d.type?d.touches[0].clientY:d.clientY}}]),ve}(),uo=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"setCurrentLocaleValues",value:function(d){var p=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(p=this.w.config.chart.locales.concat(window.Apex.chart.locales));var y=p.filter(function(M){return M.name===d})[0];if(!y)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var C=Qe.extend(tr,y);this.w.globals.locale=C.options}}]),ve}(),Po=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"drawAxis",value:function(d,p){var y,C,M=this.w.globals,L=this.w.config,R=new Fr(this.ctx),H=new Ni(this.ctx);M.axisCharts&&"radar"!==d&&(M.isBarHorizontal?(C=H.drawYaxisInversed(0),y=R.drawXaxisInversed(0),M.dom.elGraphical.add(y),M.dom.elGraphical.add(C)):(y=R.drawXaxis(),M.dom.elGraphical.add(y),L.yaxis.map(function(G,J){-1===M.ignoreYAxisIndexes.indexOf(J)&&(C=H.drawYaxis(J),M.dom.Paper.add(C))})))}}]),ve}(),Yn=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"drawXCrosshairs",value:function(){var d=this.w,p=new Mt(this.ctx),y=new dn(this.ctx),C=d.config.xaxis.crosshairs.fill.gradient,M=d.config.xaxis.crosshairs.dropShadow,K=M.enabled,ae=M.left,pe=M.top,ge=M.blur,xe=M.color,Me=M.opacity,ze=d.config.xaxis.crosshairs.fill.color;if(d.config.xaxis.crosshairs.show){"gradient"===d.config.xaxis.crosshairs.fill.type&&(ze=p.drawGradient("vertical",C.colorFrom,C.colorTo,C.opacityFrom,C.opacityTo,null,C.stops,null));var Ke=p.drawRect();1===d.config.xaxis.crosshairs.width&&(Ke=p.drawLine());var Y=d.globals.gridHeight;(!Qe.isNumber(Y)||Y<0)&&(Y=0);var ne=d.config.xaxis.crosshairs.width;(!Qe.isNumber(ne)||ne<0)&&(ne=0),Ke.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:Y,width:ne,height:Y,fill:ze,filter:"none","fill-opacity":d.config.xaxis.crosshairs.opacity,stroke:d.config.xaxis.crosshairs.stroke.color,"stroke-width":d.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":d.config.xaxis.crosshairs.stroke.dashArray}),K&&(Ke=y.dropShadow(Ke,{left:ae,top:pe,blur:ge,color:xe,opacity:Me})),d.globals.dom.elGraphical.add(Ke)}}},{key:"drawYCrosshairs",value:function(){var d=this.w,p=new Mt(this.ctx),y=d.config.yaxis[0].crosshairs,C=d.globals.barPadForNumericAxis;if(d.config.yaxis[0].crosshairs.show){var M=p.drawLine(-C,0,d.globals.gridWidth+C,0,y.stroke.color,y.stroke.dashArray,y.stroke.width);M.attr({class:"apexcharts-ycrosshairs"}),d.globals.dom.elGraphical.add(M)}var L=p.drawLine(-C,0,d.globals.gridWidth+C,0,y.stroke.color,0,0);L.attr({class:"apexcharts-ycrosshairs-hidden"}),d.globals.dom.elGraphical.add(L)}}]),ve}(),xr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"checkResponsiveConfig",value:function(d){var p=this,y=this.w,C=y.config;if(0!==C.responsive.length){var M=C.responsive.slice();M.sort(function(G,J){return G.breakpoint>J.breakpoint?1:J.breakpoint>G.breakpoint?-1:0}).reverse();var L=new jn({}),R=function(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},J=M[0].breakpoint,te=window.innerWidth>0?window.innerWidth:screen.width;if(te>J){var K=Vn.extendArrayProps(L,y.globals.initialConfig,y);G=Qe.extend(K,G),G=Qe.extend(y.config,G),p.overrideResponsiveOptions(G)}else for(var ae=0;ae<M.length;ae++)te<M[ae].breakpoint&&(G=Vn.extendArrayProps(L,M[ae].options,y),G=Qe.extend(y.config,G),p.overrideResponsiveOptions(G))};if(d){var H=Vn.extendArrayProps(L,d,y);H=Qe.extend(y.config,H),R(H=Qe.extend(H,d))}else R({})}}},{key:"overrideResponsiveOptions",value:function(d){var p=new jn(d).init({responsiveOverride:!0});this.w.config=p}}]),ve}(),Hr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.colors=[],this.w=d.w;var p=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===p.config.chart.type&&p.config.plotOptions.treemap.distributed||"heatmap"===p.config.chart.type&&p.config.plotOptions.heatmap.distributed,this.isBarDistributed=p.config.plotOptions.bar.distributed&&("bar"===p.config.chart.type||"rangeBar"===p.config.chart.type)}return gt(ve,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var d=this,p=this.w,y=new Qe;if(p.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(p.config.theme.mode)),void 0===p.config.colors?p.globals.colors=this.predefined():(p.globals.colors=p.config.colors,Array.isArray(p.config.colors)&&p.config.colors.length>0&&"function"==typeof p.config.colors[0]&&(p.globals.colors=p.config.series.map(function(ae,pe){var ge=p.config.colors[pe];return ge||(ge=p.config.colors[0]),"function"==typeof ge?(d.isColorFn=!0,ge({value:p.globals.axisCharts?p.globals.series[pe][0]?p.globals.series[pe][0]:0:p.globals.series[pe],seriesIndex:pe,dataPointIndex:pe,w:p})):ge}))),p.globals.seriesColors.map(function(ae,pe){ae&&(p.globals.colors[pe]=ae)}),p.config.theme.monochrome.enabled){var C=[],M=p.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(M=p.globals.series[0].length*p.globals.series.length);for(var L=p.config.theme.monochrome.color,R=1/(M/p.config.theme.monochrome.shadeIntensity),H=p.config.theme.monochrome.shadeTo,G=0,J=0;J<M;J++){var te=void 0;"dark"===H?(te=y.shadeColor(-1*G,L),G+=R):(te=y.shadeColor(G,L),G+=R),C.push(te)}p.globals.colors=C.slice()}var K=p.globals.colors.slice();this.pushExtraColors(p.globals.colors),["fill","stroke"].forEach(function(ae){p.globals[ae].colors=void 0===p.config[ae].colors?d.isColorFn?p.config.colors:K:p.config[ae].colors.slice(),d.pushExtraColors(p.globals[ae].colors)}),p.globals.dataLabels.style.colors=void 0===p.config.dataLabels.style.colors?K:p.config.dataLabels.style.colors.slice(),this.pushExtraColors(p.globals.dataLabels.style.colors,50),p.globals.radarPolygons.fill.colors=void 0===p.config.plotOptions.radar.polygons.fill.colors?["dark"===p.config.theme.mode?"#424242":"none"]:p.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(p.globals.radarPolygons.fill.colors,20),p.globals.markers.colors=void 0===p.config.markers.colors?K:p.config.markers.colors.slice(),this.pushExtraColors(p.globals.markers.colors)}},{key:"pushExtraColors",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=this.w,M=p||C.globals.series.length;if(null===y&&(y=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===C.config.chart.type&&C.config.plotOptions.heatmap.colorScale.inverse),y&&C.globals.series.length&&(M=C.globals.series[C.globals.maxValsInArrayIndex].length*C.globals.series.length),d.length<M)for(var L=M-d.length,R=0;R<L;R++)d.push(d[R])}},{key:"updateThemeOptions",value:function(d){d.chart=d.chart||{},d.tooltip=d.tooltip||{};var p=d.theme.mode||"light",y=d.theme.palette?d.theme.palette:"dark"===p?"palette4":"palette1",C=d.chart.foreColor?d.chart.foreColor:"dark"===p?"#f6f7f8":"#373d3f";return d.tooltip.theme=p,d.chart.foreColor=C,d.theme.palette=y,d}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"];break;default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]}return this.colors}}]),ve}(),wr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(d){var p=this.w,y="title"===d?p.config.title:p.config.subtitle,C=p.globals.svgWidth/2,M=y.offsetY,L="middle";if("left"===y.align?(C=10,L="start"):"right"===y.align&&(C=p.globals.svgWidth-10,L="end"),C+=y.offsetX,M=M+parseInt(y.style.fontSize,10)+y.margin/2,void 0!==y.text){var R=new Mt(this.ctx).drawText({x:C,y:M,text:y.text,textAnchor:L,fontSize:y.style.fontSize,fontFamily:y.style.fontFamily,fontWeight:y.style.fontWeight,foreColor:y.style.color,opacity:1});R.node.setAttribute("class","apexcharts-".concat(d,"-text")),p.globals.dom.Paper.add(R)}}}]),ve}(),is=function(){function ve(d){Ee(this,ve),this.w=d.w,this.dCtx=d}return gt(ve,[{key:"getTitleSubtitleCoords",value:function(d){var p=this.w,y=0,C=0,M="title"===d?p.config.title.floating:p.config.subtitle.floating,L=p.globals.dom.baseEl.querySelector(".apexcharts-".concat(d,"-text"));if(null!==L&&!M){var R=L.getBoundingClientRect();y=R.width,C=p.globals.axisCharts?R.height+5:R.height}return{width:y,height:C}}},{key:"getLegendsRect",value:function(){var d=this.w,p=d.globals.dom.baseEl.querySelector(".apexcharts-legend");d.config.legend.height||"top"!==d.config.legend.position&&"bottom"!==d.config.legend.position||(p.style.maxHeight=d.globals.svgHeight/2+"px");var y=Object.assign({},Qe.getBoundingClientRect(p));return this.dCtx.lgRect=null!==p&&!d.config.legend.floating&&d.config.legend.show?{x:y.x,y:y.y,height:y.height,width:0===y.height?0:y.width}:{x:0,y:0,height:0,width:0},"left"!==d.config.legend.position&&"right"!==d.config.legend.position||1.5*this.dCtx.lgRect.width>d.globals.svgWidth&&(this.dCtx.lgRect.width=d.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(d,p){var y=d;if(this.w.globals.isMultiLineX){var C=p.map(function(L,R){return Array.isArray(L)?L.length:1}),M=Math.max.apply(Math,zt(C));y=p[C.indexOf(M)]}return y}}]),ve}(),vu=function(){function ve(d){Ee(this,ve),this.w=d.w,this.dCtx=d}return gt(ve,[{key:"getxAxisLabelsCoords",value:function(){var d,p=this.w,y=p.globals.labels.slice();if(p.config.xaxis.convertedCatToNumeric&&0===y.length&&(y=p.globals.categoryLabels),p.globals.timescaleLabels.length>0){var C=this.getxAxisTimeScaleLabelsCoords();d={width:C.width,height:C.height},p.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==p.config.legend.position&&"right"!==p.config.legend.position||p.config.legend.floating?0:this.dCtx.lgRect.width;var M=p.globals.xLabelFormatter,L=Qe.getLargestStringFromArr(y),R=this.dCtx.dimHelpers.getLargestStringFromMultiArr(L,y);p.globals.isBarHorizontal&&(R=L=p.globals.yAxisScale[0].result.reduce(function(pe,ge){return pe.length>ge.length?pe:ge},0));var H=new Io(this.dCtx.ctx),G=L;L=H.xLabelFormat(M,L,G,{i:void 0,dateFormatter:new Un(this.dCtx.ctx).formatDate,w:p}),R=H.xLabelFormat(M,R,G,{i:void 0,dateFormatter:new Un(this.dCtx.ctx).formatDate,w:p}),(p.config.xaxis.convertedCatToNumeric&&void 0===L||""===String(L).trim())&&(R=L="1");var J=new Mt(this.dCtx.ctx),te=J.getTextRects(L,p.config.xaxis.labels.style.fontSize),K=te;if(L!==R&&(K=J.getTextRects(R,p.config.xaxis.labels.style.fontSize)),(d={width:te.width>=K.width?te.width:K.width,height:te.height>=K.height?te.height:K.height}).width*y.length>p.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==p.config.xaxis.labels.rotate||p.config.xaxis.labels.rotateAlways){if(!p.globals.isBarHorizontal){p.globals.rotateXLabels=!0;var ae=function(pe){return J.getTextRects(pe,p.config.xaxis.labels.style.fontSize,p.config.xaxis.labels.style.fontFamily,"rotate(".concat(p.config.xaxis.labels.rotate," 0 0)"),!1)};te=ae(L),L!==R&&(K=ae(R)),d.height=(te.height>K.height?te.height:K.height)/1.5,d.width=te.width>K.width?te.width:K.width}}else p.globals.rotateXLabels=!1}return p.config.xaxis.labels.show||(d={width:0,height:0}),{width:d.width,height:d.height}}},{key:"getxAxisTitleCoords",value:function(){var d=this.w,p=0,y=0;if(void 0!==d.config.xaxis.title.text){var C=new Mt(this.dCtx.ctx).getTextRects(d.config.xaxis.title.text,d.config.xaxis.title.style.fontSize);p=C.width,y=C.height}return{width:p,height:y}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var d,p=this.w;this.dCtx.timescaleLabels=p.globals.timescaleLabels.slice();var y=this.dCtx.timescaleLabels.map(function(M){return M.value}),C=y.reduce(function(M,L){return void 0===M?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):M.length>L.length?M:L},0);return 1.05*(d=new Mt(this.dCtx.ctx).getTextRects(C,p.config.xaxis.labels.style.fontSize)).width*y.length>p.globals.gridWidth&&0!==p.config.xaxis.labels.rotate&&(p.globals.overlappingXLabels=!0),d}},{key:"additionalPaddingXLabels",value:function(d){var p=this,y=this.w,C=y.globals,M=y.config,L=M.xaxis.type,R=d.width;C.skipLastTimelinelabel=!1,C.skipFirstTimelinelabel=!1;var H=y.config.yaxis[0].opposite&&y.globals.isBarHorizontal;M.yaxis.forEach(function(J,te){H?(p.dCtx.gridPad.left<R&&(p.dCtx.xPadLeft=R/2+1),p.dCtx.xPadRight=R/2+1):function(J,te){-1!==C.collapsedSeriesIndices.indexOf(te)||function(K){if(p.dCtx.timescaleLabels&&p.dCtx.timescaleLabels.length){var ge=p.dCtx.timescaleLabels[0].position-R/1.75+p.dCtx.yAxisWidthLeft;p.dCtx.timescaleLabels[p.dCtx.timescaleLabels.length-1].position+R/1.75-p.dCtx.yAxisWidthRight>C.svgWidth-C.translateX-("right"===y.config.legend.position&&p.dCtx.lgRect.width>0?p.dCtx.lgRect.width:0)&&(C.skipLastTimelinelabel=!0),ge<-(K.show&&!K.floating||"bar"!==M.chart.type&&"candlestick"!==M.chart.type&&"rangeBar"!==M.chart.type&&"boxPlot"!==M.chart.type?10:R/1.75)&&(C.skipFirstTimelinelabel=!0)}else"datetime"===L?p.dCtx.gridPad.right<R&&!C.rotateXLabels&&(C.skipLastTimelinelabel=!0):"datetime"!==L&&p.dCtx.gridPad.right<R/2-p.dCtx.yAxisWidthRight&&!C.rotateXLabels&&!y.config.xaxis.labels.trim&&("between"!==y.config.xaxis.tickPlacement||y.globals.isBarHorizontal)&&(p.dCtx.xPadRight=R/2+1)}(J)}(J,te)})}}]),ve}(),ho=function(){function ve(d){Ee(this,ve),this.w=d.w,this.dCtx=d}return gt(ve,[{key:"getyAxisLabelsCoords",value:function(){var d=this,p=this.w,y=[],C=10,M=new _r(this.dCtx.ctx);return p.config.yaxis.map(function(L,R){var H=p.globals.yAxisScale[R],G=0;if(!M.isYAxisHidden(R)&&L.labels.show&&void 0!==L.labels.minWidth&&(G=L.labels.minWidth),!M.isYAxisHidden(R)&&L.labels.show&&H.result.length){var J=p.globals.yLabelFormatters[R],te=H.niceMin===Number.MIN_VALUE?0:H.niceMin,K=String(te).length>String(H.niceMax).length?te:H.niceMax,ae=J(K,{seriesIndex:R,dataPointIndex:-1,w:p}),pe=ae;if(void 0!==ae&&0!==ae.length||(ae=K),p.globals.isBarHorizontal){C=0;var ge=p.globals.labels.slice();ae=J(ae=Qe.getLargestStringFromArr(ge),{seriesIndex:R,dataPointIndex:-1,w:p}),pe=d.dCtx.dimHelpers.getLargestStringFromMultiArr(ae,ge)}var xe=new Mt(d.dCtx.ctx),Me="rotate(".concat(L.labels.rotate," 0 0)"),ze=xe.getTextRects(ae,L.labels.style.fontSize,L.labels.style.fontFamily,Me,!1),Ke=ze;ae!==pe&&(Ke=xe.getTextRects(pe,L.labels.style.fontSize,L.labels.style.fontFamily,Me,!1)),y.push({width:(G>Ke.width||G>ze.width?G:Ke.width>ze.width?Ke.width:ze.width)+C,height:Ke.height>ze.height?Ke.height:ze.height})}else y.push({width:0,height:0})}),y}},{key:"getyAxisTitleCoords",value:function(){var d=this,y=[];return this.w.config.yaxis.map(function(C,M){if(C.show&&void 0!==C.title.text){var L=new Mt(d.dCtx.ctx),R="rotate(".concat(C.title.rotate," 0 0)"),H=L.getTextRects(C.title.text,C.title.style.fontSize,C.title.style.fontFamily,R,!1);y.push({width:H.width,height:H.height})}else y.push({width:0,height:0})}),y}},{key:"getTotalYAxisWidth",value:function(){var d=this.w,p=0,y=0,C=0,M=d.globals.yAxisScale.length>1?10:0,L=new _r(this.dCtx.ctx),R=function(H,G){var J=d.config.yaxis[G].floating,te=0;H.width>0&&!J?(te=H.width+M,d.globals.ignoreYAxisIndexes.indexOf(G)>-1&&(te=te-H.width-M)):te=J||L.isYAxisHidden(G)?0:5,d.config.yaxis[G].opposite?C+=te:y+=te,p+=te};return d.globals.yLabelsCoords.map(function(H,G){R(H,G)}),d.globals.yTitleCoords.map(function(H,G){R(H,G)}),d.globals.isBarHorizontal&&!d.config.yaxis[0].floating&&(p=d.globals.yLabelsCoords[0].width+d.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=y,this.dCtx.yAxisWidthRight=C,p}}]),ve}(),Gr=function(){function ve(d){Ee(this,ve),this.w=d.w,this.dCtx=d}return gt(ve,[{key:"gridPadForColumnsInNumericAxis",value:function(d){var p=this.w;if(p.globals.noData||p.globals.allSeriesCollapsed)return 0;var y=function(J){return"bar"===J||"rangeBar"===J||"candlestick"===J||"boxPlot"===J},C=p.config.chart.type,M=0,L=y(C)?p.config.series.length:1;if(p.globals.comboBarCount>0&&(L=p.globals.comboBarCount),p.globals.collapsedSeries.forEach(function(J){y(J.type)&&(L-=1)}),p.config.chart.stacked&&(L=1),(y(C)||p.globals.comboBarCount>0)&&p.globals.isXNumeric&&!p.globals.isBarHorizontal&&L>0){var R,H,G=Math.abs(p.globals.initialMaxX-p.globals.initialMinX);G<=3&&(G=p.globals.dataPoints),R=G/d,p.globals.minXDiff&&p.globals.minXDiff/R>0&&(H=p.globals.minXDiff/R),H>d/2&&(H/=2),(M=H/L*parseInt(p.config.plotOptions.bar.columnWidth,10)/100)<1&&(M=1),p.globals.barPadForNumericAxis=M=M/(L>1?1:1.5)+5}return M}},{key:"gridPadFortitleSubtitle",value:function(){var d=this,p=this.w,y=p.globals,C=this.dCtx.isSparkline||!p.globals.axisCharts?0:10;["title","subtitle"].forEach(function(R){C+=void 0!==p.config[R].text?p.config[R].margin:d.dCtx.isSparkline||!p.globals.axisCharts?0:5}),!p.config.legend.show||"bottom"!==p.config.legend.position||p.config.legend.floating||p.globals.axisCharts||(C+=10);var M=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),L=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");y.gridHeight=y.gridHeight-M.height-L.height-C,y.translateY=y.translateY+M.height+L.height+C}},{key:"setGridXPosForDualYAxis",value:function(d,p){var y=this.w,C=new _r(this.dCtx.ctx);y.config.yaxis.map(function(M,L){-1!==y.globals.ignoreYAxisIndexes.indexOf(L)||M.floating||C.isYAxisHidden(L)||(M.opposite&&(y.globals.translateX=y.globals.translateX-(p[L].width+d[L].width)-parseInt(y.config.yaxis[L].labels.style.fontSize,10)/1.2-12),y.globals.translateX<2&&(y.globals.translateX=2))})}}]),ve}(),rs=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new is(this),this.dimYAxis=new ho(this),this.dimXAxis=new vu(this),this.dimGrid=new Gr(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return gt(ve,[{key:"plotCoords",value:function(){var d=this.w.globals;this.lgRect=this.dimHelpers.getLegendsRect(),d.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),d.gridHeight=d.gridHeight-this.gridPad.top-this.gridPad.bottom,d.gridWidth=d.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var p=this.dimGrid.gridPadForColumnsInNumericAxis(d.gridWidth);d.gridWidth=d.gridWidth-2*p,d.translateX=d.translateX+this.gridPad.left+this.xPadLeft+(p>0?p+4:0),d.translateY=d.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var d=this,p=this.w,y=p.globals,C=this.dimYAxis.getyAxisLabelsCoords(),M=this.dimYAxis.getyAxisTitleCoords();p.globals.yLabelsCoords=[],p.globals.yTitleCoords=[],p.config.yaxis.map(function(K,ae){p.globals.yLabelsCoords.push({width:C[ae].width,index:ae}),p.globals.yTitleCoords.push({width:M[ae].width,index:ae})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var L=this.dimXAxis.getxAxisLabelsCoords(),R=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(L,R),y.translateXAxisY=p.globals.rotateXLabels?this.xAxisHeight/8:-4,y.translateXAxisX=p.globals.rotateXLabels&&p.globals.isXNumeric&&p.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,p.globals.isBarHorizontal&&(y.rotateXLabels=!1,y.translateXAxisY=parseInt(p.config.xaxis.labels.style.fontSize,10)/1.5*-1),y.translateXAxisY=y.translateXAxisY+p.config.xaxis.labels.offsetY,y.translateXAxisX=y.translateXAxisX+p.config.xaxis.labels.offsetX;var H=this.yAxisWidth,G=this.xAxisHeight;y.xAxisLabelsHeight=this.xAxisHeight-R.height,y.xAxisLabelsWidth=this.xAxisWidth,y.xAxisHeight=this.xAxisHeight;var J=10;("radar"===p.config.chart.type||this.isSparkline)&&(H=0,G=y.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===p.config.chart.type)&&(H=0,G=0,J=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(L);var te=function(){y.translateX=H,y.gridHeight=y.svgHeight-d.lgRect.height-G-(d.isSparkline||"treemap"===p.config.chart.type?0:p.globals.rotateXLabels?10:15),y.gridWidth=y.svgWidth-H};switch("top"===p.config.xaxis.position&&(J=y.xAxisHeight-p.config.xaxis.axisTicks.height-5),p.config.legend.position){case"bottom":y.translateY=J,te();break;case"top":y.translateY=this.lgRect.height+J,te();break;case"left":y.translateY=J,y.translateX=this.lgRect.width+H,y.gridHeight=y.svgHeight-G-12,y.gridWidth=y.svgWidth-this.lgRect.width-H;break;case"right":y.translateY=J,y.translateX=H,y.gridHeight=y.svgHeight-G-12,y.gridWidth=y.svgWidth-this.lgRect.width-H-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(M,C),new Ni(this.ctx).setYAxisXPosition(C,M)}},{key:"setDimensionsForNonAxisCharts",value:function(){var d=this.w,p=d.globals,y=d.config,C=0;d.config.legend.show&&!d.config.legend.floating&&(C=20);var M="pie"===y.chart.type||"polarArea"===y.chart.type||"donut"===y.chart.type?"pie":"radialBar",L=y.plotOptions[M].offsetY,R=y.plotOptions[M].offsetX;if(!y.legend.show||y.legend.floating)return p.gridHeight=p.svgHeight-y.grid.padding.left+y.grid.padding.right,p.gridWidth=p.gridHeight,p.translateY=L,void(p.translateX=R+(p.svgWidth-p.gridWidth)/2);switch(y.legend.position){case"bottom":p.gridHeight=p.svgHeight-this.lgRect.height-p.goldenPadding,p.gridWidth=p.svgWidth,p.translateY=L-10,p.translateX=R+(p.svgWidth-p.gridWidth)/2;break;case"top":p.gridHeight=p.svgHeight-this.lgRect.height-p.goldenPadding,p.gridWidth=p.svgWidth,p.translateY=this.lgRect.height+L+10,p.translateX=R+(p.svgWidth-p.gridWidth)/2;break;case"left":p.gridWidth=p.svgWidth-this.lgRect.width-C,p.gridHeight="auto"!==y.chart.height?p.svgHeight:p.gridWidth,p.translateY=L,p.translateX=R+this.lgRect.width+C;break;case"right":p.gridWidth=p.svgWidth-this.lgRect.width-C-5,p.gridHeight="auto"!==y.chart.height?p.svgHeight:p.gridWidth,p.translateY=L,p.translateX=R+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(d,p){var y=this.w;this.xAxisHeight=(d.height+p.height)*(y.globals.isMultiLineX?1.2:y.globals.LINE_HEIGHT_RATIO)+(y.globals.rotateXLabels?22:10),this.xAxisWidth=d.width,this.xAxisHeight-p.height>y.config.xaxis.labels.maxHeight&&(this.xAxisHeight=y.config.xaxis.labels.maxHeight),y.config.xaxis.labels.minHeight&&this.xAxisHeight<y.config.xaxis.labels.minHeight&&(this.xAxisHeight=y.config.xaxis.labels.minHeight),y.config.xaxis.floating&&(this.xAxisHeight=0);var C=0,M=0;y.config.yaxis.forEach(function(L){C+=L.labels.minWidth,M+=L.labels.maxWidth}),this.yAxisWidth<C&&(this.yAxisWidth=C),this.yAxisWidth>M&&(this.yAxisWidth=M)}}]),ve}(),jr=function(){function ve(d){Ee(this,ve),this.w=d.w,this.lgCtx=d}return gt(ve,[{key:"getLegendStyles",value:function(){var d=document.createElement("style");d.setAttribute("type","text/css");var p=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.position-bottom, .apexcharts-legend.position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-left, .apexcharts-legend.position-top.apexcharts-align-left, .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-center, .apexcharts-legend.position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-right, .apexcharts-legend.position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.position-bottom .apexcharts-legend-series, .apexcharts-legend.position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return d.appendChild(p),d}},{key:"getLegendBBox",value:function(){var d=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:d.height,clww:d.width}}},{key:"appendToForeignObject",value:function(){var d=this.w.globals;d.dom.elLegendForeign=document.createElementNS(d.SVGNS,"foreignObject");var p=d.dom.elLegendForeign;p.setAttribute("x",0),p.setAttribute("y",0),p.setAttribute("width",d.svgWidth),p.setAttribute("height",d.svgHeight),d.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),p.appendChild(d.dom.elLegendWrap),p.appendChild(this.getLegendStyles()),d.dom.Paper.node.insertBefore(p,d.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(d,p){var y=this,C=this.w;if(C.globals.axisCharts||"radialBar"===C.config.chart.type){C.globals.resized=!0;var M=null,L=null;C.globals.risingSeries=[],C.globals.axisCharts?(M=C.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(d,"']")),L=parseInt(M.getAttribute("data:realIndex"),10)):(M=C.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(d+1,"']")),L=parseInt(M.getAttribute("rel"),10)-1),p?[{cs:C.globals.collapsedSeries,csi:C.globals.collapsedSeriesIndices},{cs:C.globals.ancillaryCollapsedSeries,csi:C.globals.ancillaryCollapsedSeriesIndices}].forEach(function(J){y.riseCollapsedSeries(J.cs,J.csi,L)}):this.hideSeries({seriesEl:M,realIndex:L})}else{var R=C.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(d+1,"'] path")),H=C.config.chart.type;if("pie"===H||"polarArea"===H||"donut"===H){var G=C.config.plotOptions.pie.donut.labels;new Mt(this.lgCtx.ctx).pathMouseDown(R.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(R.members[0].node,G)}R.fire("click")}}},{key:"hideSeries",value:function(d){var p=d.seriesEl,y=d.realIndex,C=this.w,M=Qe.clone(C.config.series);if(C.globals.axisCharts){var L=!1;if(C.config.yaxis[y]&&C.config.yaxis[y].show&&C.config.yaxis[y].showAlways&&(L=!0,C.globals.ancillaryCollapsedSeriesIndices.indexOf(y)<0&&(C.globals.ancillaryCollapsedSeries.push({index:y,data:M[y].data.slice(),type:p.parentNode.className.baseVal.split("-")[1]}),C.globals.ancillaryCollapsedSeriesIndices.push(y))),!L){C.globals.collapsedSeries.push({index:y,data:M[y].data.slice(),type:p.parentNode.className.baseVal.split("-")[1]}),C.globals.collapsedSeriesIndices.push(y);var R=C.globals.risingSeries.indexOf(y);C.globals.risingSeries.splice(R,1)}}else C.globals.collapsedSeries.push({index:y,data:M[y]}),C.globals.collapsedSeriesIndices.push(y);for(var H=p.childNodes,G=0;G<H.length;G++)H[G].classList.contains("apexcharts-series-markers-wrap")&&(H[G].classList.contains("apexcharts-hide")?H[G].classList.remove("apexcharts-hide"):H[G].classList.add("apexcharts-hide"));C.globals.allSeriesCollapsed=C.globals.collapsedSeries.length===C.config.series.length,M=this._getSeriesBasedOnCollapsedState(M),this.lgCtx.ctx.updateHelpers._updateSeries(M,C.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(d,p,y){var C=this.w,M=Qe.clone(C.config.series);if(d.length>0){for(var L=0;L<d.length;L++)d[L].index===y&&(C.globals.axisCharts?(M[y].data=d[L].data.slice(),d.splice(L,1),p.splice(L,1),C.globals.risingSeries.push(y)):(M[y]=d[L].data,d.splice(L,1),p.splice(L,1),C.globals.risingSeries.push(y)));M=this._getSeriesBasedOnCollapsedState(M),this.lgCtx.ctx.updateHelpers._updateSeries(M,C.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(d){var p=this.w;return d.forEach(p.globals.axisCharts?function(y,C){p.globals.collapsedSeriesIndices.indexOf(C)>-1&&(d[C].data=[])}:function(y,C){p.globals.collapsedSeriesIndices.indexOf(C)>-1&&(d[C]=0)}),d}}]),ve}(),$n=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new jr(this)}return gt(ve,[{key:"init",value:function(){var d=this.w,p=d.globals,y=d.config;if((y.legend.showForSingleSeries&&1===p.series.length||this.isBarsDistributed||p.series.length>1||!p.axisCharts)&&y.legend.show){for(;p.dom.elLegendWrap.firstChild;)p.dom.elLegendWrap.removeChild(p.dom.elLegendWrap.firstChild);this.drawLegends(),Qe.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===y.legend.position||"top"===y.legend.position?this.legendAlignHorizontal():"right"!==y.legend.position&&"left"!==y.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var d=this,p=this.w,y=p.config.legend.fontFamily,C=p.globals.seriesNames,M=p.globals.colors.slice();if("heatmap"===p.config.chart.type){var L=p.config.plotOptions.heatmap.colorScale.ranges;C=L.map(function(gn){return gn.name?gn.name:gn.from+" - "+gn.to}),M=L.map(function(gn){return gn.color})}else this.isBarsDistributed&&(C=p.globals.labels.slice());p.config.legend.customLegendItems.length&&(C=p.config.legend.customLegendItems);for(var R=p.globals.legendFormatter,H=p.config.legend.inverseOrder,G=H?C.length-1:0;H?G>=0:G<=C.length-1;H?G--:G++){var J=R(C[G],{seriesIndex:G,w:p}),te=!1,K=!1;if(p.globals.collapsedSeries.length>0)for(var ae=0;ae<p.globals.collapsedSeries.length;ae++)p.globals.collapsedSeries[ae].index===G&&(te=!0);if(p.globals.ancillaryCollapsedSeriesIndices.length>0)for(var pe=0;pe<p.globals.ancillaryCollapsedSeriesIndices.length;pe++)p.globals.ancillaryCollapsedSeriesIndices[pe]===G&&(K=!0);var ge=document.createElement("span");ge.classList.add("apexcharts-legend-marker");var xe=p.config.legend.markers.offsetX,Me=p.config.legend.markers.offsetY,ze=p.config.legend.markers.height,Ke=p.config.legend.markers.width,Y=p.config.legend.markers.strokeWidth,ne=p.config.legend.markers.strokeColor,be=p.config.legend.markers.radius,Ie=ge.style;Ie.background=M[G],Ie.color=M[G],Ie.setProperty("background",M[G],"important"),p.config.legend.markers.fillColors&&p.config.legend.markers.fillColors[G]&&(Ie.background=p.config.legend.markers.fillColors[G]),void 0!==p.globals.seriesColors[G]&&(Ie.background=p.globals.seriesColors[G],Ie.color=p.globals.seriesColors[G]),Ie.height=Array.isArray(ze)?parseFloat(ze[G])+"px":parseFloat(ze)+"px",Ie.width=Array.isArray(Ke)?parseFloat(Ke[G])+"px":parseFloat(Ke)+"px",Ie.left=(Array.isArray(xe)?parseFloat(xe[G]):parseFloat(xe))+"px",Ie.top=(Array.isArray(Me)?parseFloat(Me[G]):parseFloat(Me))+"px",Ie.borderWidth=Array.isArray(Y)?Y[G]:Y,Ie.borderColor=Array.isArray(ne)?ne[G]:ne,Ie.borderRadius=Array.isArray(be)?parseFloat(be[G])+"px":parseFloat(be)+"px",p.config.legend.markers.customHTML&&(Array.isArray(p.config.legend.markers.customHTML)?p.config.legend.markers.customHTML[G]&&(ge.innerHTML=p.config.legend.markers.customHTML[G]()):ge.innerHTML=p.config.legend.markers.customHTML()),Mt.setAttrs(ge,{rel:G+1,"data:collapsed":te||K}),(te||K)&&ge.classList.add("apexcharts-inactive-legend");var Je=document.createElement("div"),Nt=document.createElement("span");Nt.classList.add("apexcharts-legend-text"),Nt.innerHTML=Array.isArray(J)?Qe.sanitizeDom(J.join(" ")):Qe.sanitizeDom(J);var St=p.config.legend.labels.useSeriesColors?p.globals.colors[G]:p.config.legend.labels.colors;St||(St=p.config.chart.foreColor),Nt.style.color=St,Nt.style.fontSize=parseFloat(p.config.legend.fontSize)+"px",Nt.style.fontWeight=p.config.legend.fontWeight,Nt.style.fontFamily=y||p.config.chart.fontFamily,Mt.setAttrs(Nt,{rel:G+1,i:G,"data:default-text":encodeURIComponent(J),"data:collapsed":te||K}),Je.appendChild(ge),Je.appendChild(Nt);var Xt=new Vn(this.ctx);p.config.legend.showForZeroSeries||0===Xt.getSeriesTotalByIndex(G)&&Xt.seriesHaveSameValues(G)&&!Xt.isSeriesNull(G)&&-1===p.globals.collapsedSeriesIndices.indexOf(G)&&-1===p.globals.ancillaryCollapsedSeriesIndices.indexOf(G)&&Je.classList.add("apexcharts-hidden-zero-series"),p.config.legend.showForNullSeries||Xt.isSeriesNull(G)&&-1===p.globals.collapsedSeriesIndices.indexOf(G)&&-1===p.globals.ancillaryCollapsedSeriesIndices.indexOf(G)&&Je.classList.add("apexcharts-hidden-null-series"),p.globals.dom.elLegendWrap.appendChild(Je),p.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(p.config.legend.horizontalAlign)),p.globals.dom.elLegendWrap.classList.add("position-"+p.config.legend.position),Je.classList.add("apexcharts-legend-series"),Je.style.margin="".concat(p.config.legend.itemMargin.vertical,"px ").concat(p.config.legend.itemMargin.horizontal,"px"),p.globals.dom.elLegendWrap.style.width=p.config.legend.width?p.config.legend.width+"px":"",p.globals.dom.elLegendWrap.style.height=p.config.legend.height?p.config.legend.height+"px":"",Mt.setAttrs(Je,{rel:G+1,seriesName:Qe.escapeString(C[G]),"data:collapsed":te||K}),(te||K)&&Je.classList.add("apexcharts-inactive-legend"),p.config.legend.onItemClick.toggleDataSeries||Je.classList.add("apexcharts-no-click")}p.globals.dom.elWrap.addEventListener("click",d.onLegendClick,!0),p.config.legend.onItemHover.highlightDataSeries&&0===p.config.legend.customLegendItems.length&&(p.globals.dom.elWrap.addEventListener("mousemove",d.onLegendHovered,!0),p.globals.dom.elWrap.addEventListener("mouseout",d.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(d,p){var y=this.w,C=y.globals.dom.baseEl.querySelector(".apexcharts-legend"),M=C.getBoundingClientRect(),L=0,R=0;if("bottom"===y.config.legend.position)R+=y.globals.svgHeight-M.height/2;else if("top"===y.config.legend.position){var H=new rs(this.ctx),G=H.dimHelpers.getTitleSubtitleCoords("title").height,J=H.dimHelpers.getTitleSubtitleCoords("subtitle").height;R=R+(G>0?G-10:0)+(J>0?J-10:0)}C.style.position="absolute",R=R+p+y.config.legend.offsetY,C.style.left=(L=L+d+y.config.legend.offsetX)+"px",C.style.top=R+"px","bottom"===y.config.legend.position?(C.style.top="auto",C.style.bottom=5-y.config.legend.offsetY+"px"):"right"===y.config.legend.position&&(C.style.left="auto",C.style.right=25+y.config.legend.offsetX+"px"),["width","height"].forEach(function(te){C.style[te]&&(C.style[te]=parseInt(y.config.legend[te],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var d=this.w;d.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var p=this.legendHelpers.getLegendBBox(),y=new rs(this.ctx),C=y.dimHelpers.getTitleSubtitleCoords("title"),M=y.dimHelpers.getTitleSubtitleCoords("subtitle"),L=0;"bottom"===d.config.legend.position?L=-p.clwh/1.8:"top"===d.config.legend.position&&(L=C.height+M.height+d.config.title.margin+d.config.subtitle.margin-10),this.setLegendWrapXY(20,L)}},{key:"legendAlignVertical",value:function(){var d=this.w,p=this.legendHelpers.getLegendBBox(),y=0;"left"===d.config.legend.position&&(y=20),"right"===d.config.legend.position&&(y=d.globals.svgWidth-p.clww-10),this.setLegendWrapXY(y,20)}},{key:"onLegendHovered",value:function(d){var p=this.w,y=d.target.classList.contains("apexcharts-legend-text")||d.target.classList.contains("apexcharts-legend-marker");if("heatmap"===p.config.chart.type||this.isBarsDistributed){if(y){var C=parseInt(d.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,C,this.w]),new Fn(this.ctx).highlightRangeInSeries(d,d.target)}}else!d.target.classList.contains("apexcharts-inactive-legend")&&y&&new Fn(this.ctx).toggleSeriesOnHover(d,d.target)}},{key:"onLegendClick",value:function(d){var p=this.w;if(!p.config.legend.customLegendItems.length&&(d.target.classList.contains("apexcharts-legend-text")||d.target.classList.contains("apexcharts-legend-marker"))){var y=parseInt(d.target.getAttribute("rel"),10)-1,C="true"===d.target.getAttribute("data:collapsed"),M=this.w.config.chart.events.legendClick;"function"==typeof M&&M(this.ctx,y,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,y,this.w]);var L=this.w.config.legend.markers.onClick;"function"==typeof L&&d.target.classList.contains("apexcharts-legend-marker")&&(L(this.ctx,y,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,y,this.w])),"treemap"!==p.config.chart.type&&"heatmap"!==p.config.chart.type&&!this.isBarsDistributed&&p.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(y,C)}}}]),ve}(),Ei=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=p.globals.minX,this.maxX=p.globals.maxX}return gt(ve,[{key:"createToolbar",value:function(){var d=this,p=this.w,y=function(){return document.createElement("div")},C=y();if(C.setAttribute("class","apexcharts-toolbar"),C.style.top=p.config.chart.toolbar.offsetY+"px",C.style.right=3-p.config.chart.toolbar.offsetX+"px",p.globals.dom.elWrap.appendChild(C),this.elZoom=y(),this.elZoomIn=y(),this.elZoomOut=y(),this.elPan=y(),this.elSelection=y(),this.elZoomReset=y(),this.elMenuIcon=y(),this.elMenu=y(),this.elCustomIcons=[],this.t=p.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var M=0;M<this.t.customIcons.length;M++)this.elCustomIcons.push(y());var L=[],R=function(te,K,ae){var pe=te.toLowerCase();d.t[pe]&&p.config.chart.zoom.enabled&&L.push({el:K,icon:"string"==typeof d.t[pe]?d.t[pe]:ae,title:d.localeValues[te],class:"apexcharts-".concat(pe,"-icon")})};R("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),R("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var H=function(te){d.t[te]&&p.config.chart[te].enabled&&L.push({el:"zoom"===te?d.elZoom:d.elSelection,icon:"string"==typeof d.t[te]?d.t[te]:"zoom"===te?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:d.localeValues["zoom"===te?"selectionZoom":"selection"],class:p.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(te,"-icon")})};H("zoom"),H("selection"),this.t.pan&&p.config.chart.zoom.enabled&&L.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:p.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),R("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&L.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var G=0;G<this.elCustomIcons.length;G++)L.push({el:this.elCustomIcons[G],icon:this.t.customIcons[G].icon,title:this.t.customIcons[G].title,index:this.t.customIcons[G].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[G].class});L.forEach(function(te,K){te.index&&Qe.moveIndexInArray(L,K,te.index)});for(var J=0;J<L.length;J++)Mt.setAttrs(L[J].el,{class:L[J].class,title:L[J].title}),L[J].el.innerHTML=L[J].icon,C.appendChild(L[J].el);this._createHamburgerMenu(C),p.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):p.globals.panEnabled?this.elPan.classList.add(this.selectedClass):p.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(d){this.elMenuItems=[],d.appendChild(this.elMenu),Mt.setAttrs(this.elMenu,{class:"apexcharts-menu"});var p=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||p.splice(2,1);for(var y=0;y<p.length;y++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[y].innerHTML=p[y].title,Mt.setAttrs(this.elMenuItems[y],{class:"apexcharts-menu-item ".concat(p[y].name),title:p[y].title}),this.elMenu.appendChild(this.elMenuItems[y])}},{key:"addToolbarEventListeners",value:function(){var d=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(y){y.classList.contains("exportSVG")?y.addEventListener("click",d.handleDownload.bind(d,"svg")):y.classList.contains("exportPNG")?y.addEventListener("click",d.handleDownload.bind(d,"png")):y.classList.contains("exportCSV")&&y.addEventListener("click",d.handleDownload.bind(d,"csv"))});for(var p=0;p<this.t.customIcons.length;p++)this.elCustomIcons[p].addEventListener("click",this.t.customIcons[p].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(d){this.ctx.getSyncedCharts().forEach(function(p){p.ctx.toolbar.toggleOtherControls();var y="selection"===d?p.ctx.toolbar.elSelection:p.ctx.toolbar.elZoom,C="selection"===d?"selectionEnabled":"zoomEnabled";p.w.globals[C]=!p.w.globals[C],y.classList.contains(p.ctx.toolbar.selectedClass)?y.classList.remove(p.ctx.toolbar.selectedClass):y.classList.add(p.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var d=this.w;this.elZoom||(this.elZoom=d.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=d.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=d.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(d){this.toggleOtherControls(),"pan"===d?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var p="pan"===d?this.elPan:this.elZoom,y="pan"===d?this.elZoom:this.elPan;p&&p.classList.add(this.selectedClass),y&&y.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(d){d.ctx.toolbar.toggleOtherControls(),d.w.globals.panEnabled=!d.w.globals.panEnabled,d.ctx.toolbar.elPan.classList.contains(d.ctx.toolbar.selectedClass)?d.ctx.toolbar.elPan.classList.remove(d.ctx.toolbar.selectedClass):d.ctx.toolbar.elPan.classList.add(d.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var d=this,p=this.w;p.globals.panEnabled=!1,p.globals.zoomEnabled=!1,p.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(y){y&&y.classList.remove(d.selectedClass)})}},{key:"handleZoomIn",value:function(){var d=this.w;d.globals.isTimelineBar&&(this.minX=d.globals.minY,this.maxX=d.globals.maxY);var p=(this.minX+this.maxX)/2,M=this._getNewMinXMaxX((this.minX+p)/2,(this.maxX+p)/2);d.globals.disableZoomIn||this.zoomUpdateOptions(M.minX,M.maxX)}},{key:"handleZoomOut",value:function(){var d=this.w;if(d.globals.isTimelineBar&&(this.minX=d.globals.minY,this.maxX=d.globals.maxY),!("datetime"===d.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var p=(this.minX+this.maxX)/2,M=this._getNewMinXMaxX(this.minX-(p-this.minX),this.maxX-(p-this.maxX));d.globals.disableZoomOut||this.zoomUpdateOptions(M.minX,M.maxX)}}},{key:"_getNewMinXMaxX",value:function(d,p){var y=this.w.config.xaxis.convertedCatToNumeric;return{minX:y?Math.floor(d):d,maxX:y?Math.floor(p):p}}},{key:"zoomUpdateOptions",value:function(d,p){var y=this.w;if(void 0!==d||void 0!==p){if(!(y.config.xaxis.convertedCatToNumeric&&(d<1&&(d=1,p=y.globals.dataPoints),p-d<2))){var C={min:d,max:p},M=this.getBeforeZoomRange(C);M&&(C=M.xaxis);var L={xaxis:C},R=Qe.clone(y.globals.initialConfig.yaxis);y.config.chart.zoom.autoScaleYaxis&&(R=new Ri(this.ctx).autoScaleY(this.ctx,R,{xaxis:C})),y.config.chart.group||(L.yaxis=R),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(L,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(C,R)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(d,p){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:d,yaxis:p})}},{key:"getBeforeZoomRange",value:function(d,p){var y=null;return"function"==typeof this.ev.beforeZoom&&(y=this.ev.beforeZoom(this,{xaxis:d,yaxis:p})),y}},{key:"toggleMenu",value:function(){var d=this;window.setTimeout(function(){d.elMenu.classList.contains("apexcharts-menu-open")?d.elMenu.classList.remove("apexcharts-menu-open"):d.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(d){var p=this.w,y=new io(this.ctx);switch(d){case"svg":y.exportToSVG(this.ctx);break;case"png":y.exportToPng(this.ctx);break;case"csv":y.exportToCSV({series:p.config.series,columnDelimiter:p.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(d){this.ctx.getSyncedCharts().forEach(function(p){var y=p.w;if(y.globals.lastXAxis.min=void 0,y.globals.lastXAxis.max=void 0,p.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof y.config.chart.events.beforeResetZoom){var C=y.config.chart.events.beforeResetZoom(p,y);C&&p.updateHelpers.revertDefaultAxisMinMax(C)}"function"==typeof y.config.chart.events.zoomed&&p.ctx.toolbar.zoomCallback({min:y.config.xaxis.min,max:y.config.xaxis.max}),y.globals.zoomed=!1;var M=p.ctx.series.emptyCollapsedSeries(Qe.clone(y.globals.initialSeries));p.updateHelpers._updateSeries(M,y.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),ve}(),Bl=function(ve){je(p,Ei);var d=Ct(p);function p(y){var C;return Ee(this,p),(C=d.call(this,y)).ctx=y,C.w=y.w,C.dragged=!1,C.graphics=new Mt(C.ctx),C.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],C.clientX=0,C.clientY=0,C.startX=0,C.endX=0,C.dragX=0,C.startY=0,C.endY=0,C.dragY=0,C.moveDirection="none",C}return gt(p,[{key:"init",value:function(y){var C=this,M=y.xyRatios,L=this.w,R=this;this.xyRatios=M,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=L.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),L.globals.dom.elGraphical.add(this.zoomRect),L.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===L.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:L.globals.gridWidth,maxY:L.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===L.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:L.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=L.globals.dom.baseEl.querySelector("".concat(L.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(H){C.hoverArea.addEventListener(H,R.svgMouseEvents.bind(R,M),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(y,C){var M=this.w,L=this,R=this.ctx.toolbar,H=M.globals.zoomEnabled?M.config.chart.zoom.type:M.config.chart.selection.type,G=M.config.chart.toolbar.autoSelected;C.shiftKey?(this.shiftWasPressed=!0,R.enableZoomPanFromToolbar("pan"===G?"zoom":"pan")):this.shiftWasPressed&&(R.enableZoomPanFromToolbar(G),this.shiftWasPressed=!1);var J=C.target.classList;if(!(J.contains("apexcharts-selection-rect")||J.contains("apexcharts-legend-marker")||J.contains("apexcharts-legend-text")||C.target.parentNode.classList.contains("apexcharts-toolbar"))){if(L.clientX="touchmove"===C.type||"touchstart"===C.type?C.touches[0].clientX:"touchend"===C.type?C.changedTouches[0].clientX:C.clientX,L.clientY="touchmove"===C.type||"touchstart"===C.type?C.touches[0].clientY:"touchend"===C.type?C.changedTouches[0].clientY:C.clientY,"mousedown"===C.type&&1===C.which){var te=L.gridRect.getBoundingClientRect();L.startX=L.clientX-te.left,L.startY=L.clientY-te.top,L.dragged=!1,L.w.globals.mousedown=!0}if(("mousemove"===C.type&&1===C.which||"touchmove"===C.type)&&(L.dragged=!0,M.globals.panEnabled?(M.globals.selection=null,L.w.globals.mousedown&&L.panDragging({context:L,zoomtype:H,xyRatios:y})):(L.w.globals.mousedown&&M.globals.zoomEnabled||L.w.globals.mousedown&&M.globals.selectionEnabled)&&(L.selection=L.selectionDrawing({context:L,zoomtype:H}))),"mouseup"===C.type||"touchend"===C.type||"mouseleave"===C.type){var K=L.gridRect.getBoundingClientRect();L.w.globals.mousedown&&(L.endX=L.clientX-K.left,L.endY=L.clientY-K.top,L.dragX=Math.abs(L.endX-L.startX),L.dragY=Math.abs(L.endY-L.startY),(M.globals.zoomEnabled||M.globals.selectionEnabled)&&L.selectionDrawn({context:L,zoomtype:H}),M.globals.panEnabled&&M.config.xaxis.convertedCatToNumeric&&L.delayedPanScrolled()),M.globals.zoomEnabled&&L.hideSelectionRect(this.selectionRect),L.dragged=!1,L.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}},{key:"makeSelectionRectDraggable",value:function(){var y=this.w;if(this.selectionRect){var C=this.selectionRect.node.getBoundingClientRect();C.width>0&&C.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:y.globals.gridWidth,maxY:y.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var y=this.w,C=this.xyRatios;if(!y.globals.zoomEnabled)if(null!=y.globals.selection)this.drawSelectionRect(y.globals.selection);else if(void 0!==y.config.chart.selection.xaxis.min&&void 0!==y.config.chart.selection.xaxis.max){var M=(y.config.chart.selection.xaxis.min-y.globals.minX)/C.xRatio;this.drawSelectionRect({x:M,y:0,width:y.globals.gridWidth-(y.globals.maxX-y.config.chart.selection.xaxis.max)/C.xRatio-M,height:y.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof y.config.chart.events.selection&&y.config.chart.events.selection(this.ctx,{xaxis:{min:y.config.chart.selection.xaxis.min,max:y.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(y){var C=y.x,M=y.y,L=y.width,R=y.height,H=y.translateX,J=y.translateY,K=this.w,ae=this.zoomRect,pe=this.selectionRect;if(this.dragged||null!==K.globals.selection){var ge={transform:"translate("+(void 0===H?0:H)+", "+(void 0===J?0:J)+")"};K.globals.zoomEnabled&&this.dragged&&(L<0&&(L=1),ae.attr({x:C,y:M,width:L,height:R,fill:K.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":K.config.chart.zoom.zoomedArea.fill.opacity,stroke:K.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":K.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":K.config.chart.zoom.zoomedArea.stroke.opacity}),Mt.setAttrs(ae.node,ge)),K.globals.selectionEnabled&&(pe.attr({x:C,y:M,width:L>0?L:0,height:R>0?R:0,fill:K.config.chart.selection.fill.color,"fill-opacity":K.config.chart.selection.fill.opacity,stroke:K.config.chart.selection.stroke.color,"stroke-width":K.config.chart.selection.stroke.width,"stroke-dasharray":K.config.chart.selection.stroke.dashArray,"stroke-opacity":K.config.chart.selection.stroke.opacity}),Mt.setAttrs(pe.node,ge))}}},{key:"hideSelectionRect",value:function(y){y&&y.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(y){var ge,M=y.zoomtype,L=this.w,R=y.context,H=this.gridRect.getBoundingClientRect(),G=R.startX-1,J=R.startY,te=!1,K=!1,ae=R.clientX-H.left-G,pe=R.clientY-H.top-J;return Math.abs(ae+G)>L.globals.gridWidth?ae=L.globals.gridWidth-G:R.clientX-H.left<0&&(ae=G),G>R.clientX-H.left&&(te=!0,ae=Math.abs(ae)),J>R.clientY-H.top&&(K=!0,pe=Math.abs(pe)),R.drawSelectionRect(ge="x"===M?{x:te?G-ae:G,y:0,width:ae,height:L.globals.gridHeight}:"y"===M?{x:0,y:K?J-pe:J,width:L.globals.gridWidth,height:pe}:{x:te?G-ae:G,y:K?J-pe:J,width:ae,height:pe}),R.selectionDragging("resizing"),ge}},{key:"selectionDragging",value:function(y,C){var M=this,L=this.w,R=this.xyRatios,H=this.selectionRect,G=0;"resizing"===y&&(G=30);var J=function(K){return parseFloat(H.node.getAttribute(K))},te={x:J("x"),y:J("y"),width:J("width"),height:J("height")};L.globals.selection=te,"function"==typeof L.config.chart.events.selection&&L.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var K=M.gridRect.getBoundingClientRect(),ae=H.node.getBoundingClientRect(),pe={xaxis:{min:L.globals.xAxisScale.niceMin+(ae.left-K.left)*R.xRatio,max:L.globals.xAxisScale.niceMin+(ae.right-K.left)*R.xRatio},yaxis:{min:L.globals.yAxisScale[0].niceMin+(K.bottom-ae.bottom)*R.yRatio[0],max:L.globals.yAxisScale[0].niceMax-(ae.top-K.top)*R.yRatio[0]}};L.config.chart.events.selection(M.ctx,pe),L.config.chart.brush.enabled&&void 0!==L.config.chart.events.brushScrolled&&L.config.chart.events.brushScrolled(M.ctx,pe)},G))}},{key:"selectionDrawn",value:function(y){var M=y.zoomtype,L=this.w,R=y.context,H=this.xyRatios,G=this.ctx.toolbar;if(R.startX>R.endX){var J=R.startX;R.startX=R.endX,R.endX=J}if(R.startY>R.endY){var te=R.startY;R.startY=R.endY,R.endY=te}var K=void 0,ae=void 0;L.globals.isTimelineBar?(K=L.globals.yAxisScale[0].niceMin+R.startX*H.invertedYRatio,ae=L.globals.yAxisScale[0].niceMin+R.endX*H.invertedYRatio):(K=L.globals.xAxisScale.niceMin+R.startX*H.xRatio,ae=L.globals.xAxisScale.niceMin+R.endX*H.xRatio);var pe=[],ge=[];if(L.config.yaxis.forEach(function(Ie,Je){pe.push(L.globals.yAxisScale[Je].niceMax-H.yRatio[Je]*R.startY),ge.push(L.globals.yAxisScale[Je].niceMax-H.yRatio[Je]*R.endY)}),R.dragged&&(R.dragX>10||R.dragY>10)&&K!==ae)if(L.globals.zoomEnabled){var xe=Qe.clone(L.globals.initialConfig.yaxis),Me=Qe.clone(L.globals.initialConfig.xaxis);if(L.globals.zoomed=!0,L.config.xaxis.convertedCatToNumeric&&(K=Math.floor(K),ae=Math.floor(ae),K<1&&(K=1,ae=L.globals.dataPoints),ae-K<2&&(ae=K+1)),"xy"!==M&&"x"!==M||(Me={min:K,max:ae}),"xy"!==M&&"y"!==M||xe.forEach(function(Ie,Je){xe[Je].min=ge[Je],xe[Je].max=pe[Je]}),L.config.chart.zoom.autoScaleYaxis){var ze=new Ri(R.ctx);xe=ze.autoScaleY(R.ctx,xe,{xaxis:Me})}if(G){var Ke=G.getBeforeZoomRange(Me,xe);Ke&&(Me=Ke.xaxis?Ke.xaxis:Me,xe=Ke.yaxis?Ke.yaxis:xe)}var Y={xaxis:Me};L.config.chart.group||(Y.yaxis=xe),R.ctx.updateHelpers._updateOptions(Y,!1,R.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof L.config.chart.events.zoomed&&G.zoomCallback(Me,xe)}else if(L.globals.selectionEnabled){var ne,be=null;ne={min:K,max:ae},"xy"!==M&&"y"!==M||(be=Qe.clone(L.config.yaxis)).forEach(function(Ie,Je){be[Je].min=ge[Je],be[Je].max=pe[Je]}),L.globals.selection=R.selection,"function"==typeof L.config.chart.events.selection&&L.config.chart.events.selection(R.ctx,{xaxis:ne,yaxis:be})}}},{key:"panDragging",value:function(y){var M=this.w,L=y.context;if(void 0!==M.globals.lastClientPosition.x){var R=M.globals.lastClientPosition.x-L.clientX,H=M.globals.lastClientPosition.y-L.clientY;Math.abs(R)>Math.abs(H)&&R>0?this.moveDirection="left":Math.abs(R)>Math.abs(H)&&R<0?this.moveDirection="right":Math.abs(H)>Math.abs(R)&&H>0?this.moveDirection="up":Math.abs(H)>Math.abs(R)&&H<0&&(this.moveDirection="down")}M.globals.lastClientPosition={x:L.clientX,y:L.clientY},M.config.xaxis.convertedCatToNumeric||L.panScrolled(M.globals.isTimelineBar?M.globals.minY:M.globals.minX,M.globals.isTimelineBar?M.globals.maxY:M.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var y=this.w,C=y.globals.minX,M=y.globals.maxX,L=(y.globals.maxX-y.globals.minX)/2;"left"===this.moveDirection?(C=y.globals.minX+L,M=y.globals.maxX+L):"right"===this.moveDirection&&(C=y.globals.minX-L,M=y.globals.maxX-L),C=Math.floor(C),M=Math.floor(M),this.updateScrolledChart({xaxis:{min:C,max:M}},C,M)}},{key:"panScrolled",value:function(y,C){var M=this.w,L=this.xyRatios,R=Qe.clone(M.globals.initialConfig.yaxis),H=L.xRatio,G=M.globals.minX,J=M.globals.maxX;M.globals.isTimelineBar&&(H=L.invertedYRatio,G=M.globals.minY,J=M.globals.maxY),"left"===this.moveDirection?(y=G+M.globals.gridWidth/15*H,C=J+M.globals.gridWidth/15*H):"right"===this.moveDirection&&(y=G-M.globals.gridWidth/15*H,C=J-M.globals.gridWidth/15*H),M.globals.isTimelineBar||(y<M.globals.initialMinX||C>M.globals.initialMaxX)&&(y=G,C=J);var te={min:y,max:C};M.config.chart.zoom.autoScaleYaxis&&(R=new Ri(this.ctx).autoScaleY(this.ctx,R,{xaxis:te}));var K={xaxis:{min:y,max:C}};M.config.chart.group||(K.yaxis=R),this.updateScrolledChart(K,y,C)}},{key:"updateScrolledChart",value:function(y,C,M){var L=this.w;this.ctx.updateHelpers._updateOptions(y,!1,!1),"function"==typeof L.config.chart.events.scrolled&&L.config.chart.events.scrolled(this.ctx,{xaxis:{min:C,max:M}})}}]),p}(),Us=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ttCtx=d,this.ctx=d.ctx}return gt(ve,[{key:"getNearestValues",value:function(d){var p=d.hoverArea,C=d.clientX,M=d.clientY,L=this.w,R=L.globals.gridWidth,G=R/(L.globals.dataPoints-1),J=L.globals.gridHeight/L.globals.dataPoints,te=d.elGrid.getBoundingClientRect(),K=this.hasBars();!L.globals.comboCharts&&!K||L.config.xaxis.convertedCatToNumeric||(G=R/L.globals.dataPoints);var ae=C-te.left-L.globals.barPadForNumericAxis,pe=M-te.top;ae<0||pe<0||ae>L.globals.gridWidth||pe>L.globals.gridHeight?(p.classList.remove("hovering-zoom"),p.classList.remove("hovering-pan")):L.globals.zoomEnabled?(p.classList.remove("hovering-pan"),p.classList.add("hovering-zoom")):L.globals.panEnabled&&(p.classList.remove("hovering-zoom"),p.classList.add("hovering-pan"));var ge=Math.round(ae/G),xe=Math.floor(pe/J);K&&!L.config.xaxis.convertedCatToNumeric&&(ge=Math.ceil(ae/G),ge-=1);for(var Me,ze=null,Ke=null,Y=[],ne=0;ne<L.globals.seriesXvalues.length;ne++)Y.push([L.globals.seriesXvalues[ne][0]-1e-6].concat(L.globals.seriesXvalues[ne]));return Y=Y.map(function(be){return be.filter(function(Ie){return Ie})}),Me=L.globals.seriesYvalues.map(function(be){return be.filter(function(Ie){return Qe.isNumber(Ie)})}),L.globals.isXNumeric&&(ze=(Ke=this.closestInMultiArray(ae,pe,Y,Me)).index,ge=Ke.j,null!==ze&&(ge=(Ke=this.closestInArray(ae,Y=L.globals.seriesXvalues[ze])).index)),L.globals.capturedSeriesIndex=null===ze?-1:ze,(!ge||ge<1)&&(ge=0),L.globals.capturedDataPointIndex=ge,{capturedSeries:ze,j:L.globals.isBarHorizontal?xe:ge,hoverX:ae,hoverY:pe}}},{key:"closestInMultiArray",value:function(d,p,y,C){var L=0,R=null,H=-1;this.w.globals.series.length>1?L=this.getFirstActiveXArray(y):R=0;var G=C[L][0],te=Math.abs(d-y[L][0]),K=Math.abs(p-G),ae=K+te;return C.map(function(pe,ge){pe.map(function(xe,Me){var ze=Math.abs(p-C[ge][Me]),Ke=Math.abs(d-y[ge][Me]),Y=Ke+ze;Y<ae&&(ae=Y,te=Ke,K=ze,R=ge,H=Me)})}),{index:R,j:H}}},{key:"getFirstActiveXArray",value:function(d){for(var p=0,y=d.map(function(M,L){return M.length>0?L:-1}),C=0;C<y.length;C++)if(-1!==y[C]){p=y[C];break}return p}},{key:"closestInArray",value:function(d,p){for(var C=null,M=Math.abs(d-p[0]),L=0;L<p.length;L++){var R=Math.abs(d-p[L]);R<M&&(M=R,C=L)}return{index:C}}},{key:"isXoverlap",value:function(d){var p=[],y=this.w.globals.seriesX.filter(function(M){return void 0!==M[0]});if(y.length>0)for(var C=0;C<y.length-1;C++)void 0!==y[C][d]&&void 0!==y[C+1][d]&&y[C][d]!==y[C+1][d]&&p.push("unEqual");return 0===p.length}},{key:"isInitialSeriesSameLen",value:function(){for(var d=!0,p=this.w.globals.initialSeries,y=0;y<p.length-1;y++)if(p[y].data.length!==p[y+1].data.length){d=!1;break}return d}},{key:"getBarsHeight",value:function(d){return zt(d).reduce(function(p,y){return p+y.getBBox().height},0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var d=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(d=zt(d)).sort(function(y,C){return Number(C.getAttribute("data:realIndex"))<Number(y.getAttribute("data:realIndex"))?0:-1});var p=[];return d.forEach(function(y){p.push(y.querySelector(".apexcharts-marker"))}),p}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(d){var p=this.w,y=p.config.markers.hover.size;return void 0===y&&(y=p.globals.markers.size[d]+p.config.markers.hover.sizeOffset),y}},{key:"toggleAllTooltipSeriesGroups",value:function(d){var p=this.w,y=this.ttCtx;0===y.allTooltipSeriesGroups.length&&(y.allTooltipSeriesGroups=p.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var C=y.allTooltipSeriesGroups,M=0;M<C.length;M++)"enable"===d?(C[M].classList.add("apexcharts-active"),C[M].style.display=p.config.tooltip.items.display):(C[M].classList.remove("apexcharts-active"),C[M].style.display="none")}}]),ve}(),ys=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ctx=d.ctx,this.ttCtx=d,this.tooltipUtil=new Us(d)}return gt(ve,[{key:"drawSeriesTexts",value:function(d){var p=d.shared,y=void 0===p||p,C=d.ttItems,M=d.i,L=void 0===M?0:M,R=d.j,H=void 0===R?null:R,te=d.e,K=this.w;void 0!==K.config.tooltip.custom?this.handleCustomTooltip({i:L,j:H,y1:d.y1,y2:d.y2,w:K}):this.toggleActiveInactiveSeries(y);var ae=this.getValuesToPrint({i:L,j:H});this.printLabels({i:L,j:H,values:ae,ttItems:C,shared:y,e:te});var pe=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=pe.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=pe.getBoundingClientRect().height}},{key:"printLabels",value:function(d){var p,y=this,C=d.i,M=d.j,L=d.values,R=d.ttItems,H=d.shared,G=d.e,J=this.w,te=[],K=function(ne){return J.globals.seriesGoals[ne]&&J.globals.seriesGoals[ne][M]&&Array.isArray(J.globals.seriesGoals[ne][M])},ae=L.xVal,pe=L.zVal,ge=L.xAxisTTVal,xe="",Me=J.globals.colors[C];null!==M&&J.config.plotOptions.bar.distributed&&(Me=J.globals.colors[M]);for(var ze=function(ne,be){var Ie=y.getFormatters(C);xe=y.getSeriesName({fn:Ie.yLbTitleFormatter,index:C,seriesIndex:C,j:M}),"treemap"===J.config.chart.type&&(xe=Ie.yLbTitleFormatter(String(J.config.series[C].data[M].x),{series:J.globals.series,seriesIndex:C,dataPointIndex:M,w:J}));var Je=J.config.tooltip.inverseOrder?be:ne;if(J.globals.axisCharts){var Nt=function(St){return Ie.yLbFormatter(J.globals.series[St][M],{series:J.globals.series,seriesIndex:St,dataPointIndex:M,w:J})};H?(Ie=y.getFormatters(Je),xe=y.getSeriesName({fn:Ie.yLbTitleFormatter,index:Je,seriesIndex:C,j:M}),Me=J.globals.colors[Je],p=Nt(Je),K(Je)&&(te=J.globals.seriesGoals[Je][M].map(function(St){return{attrs:St,val:Ie.yLbFormatter(St.value,{seriesIndex:Je,dataPointIndex:M,w:J})}}))):(G&&G.target&&G.target.getAttribute("fill")&&(Me=G.target.getAttribute("fill")),p=Nt(C),K(C)&&Array.isArray(J.globals.seriesGoals[C][M])&&(te=J.globals.seriesGoals[C][M].map(function(St){return{attrs:St,val:Ie.yLbFormatter(St.value,{seriesIndex:C,dataPointIndex:M,w:J})}})))}null===M&&(p=Ie.yLbFormatter(J.globals.series[C],Be(Be({},J),{},{seriesIndex:C,dataPointIndex:C}))),y.DOMHandling({i:C,t:Je,j:M,ttItems:R,values:{val:p,goalVals:te,xVal:ae,xAxisTTVal:ge,zVal:pe},seriesName:xe,shared:H,pColor:Me})},Ke=0,Y=J.globals.series.length-1;Ke<J.globals.series.length;Ke++,Y--)ze(Ke,Y)}},{key:"getFormatters",value:function(d){var p,y=this.w,C=y.globals.yLabelFormatters[d];return void 0!==y.globals.ttVal?Array.isArray(y.globals.ttVal)?(C=y.globals.ttVal[d]&&y.globals.ttVal[d].formatter,p=y.globals.ttVal[d]&&y.globals.ttVal[d].title&&y.globals.ttVal[d].title.formatter):(C=y.globals.ttVal.formatter,"function"==typeof y.globals.ttVal.title.formatter&&(p=y.globals.ttVal.title.formatter)):p=y.config.tooltip.y.title.formatter,"function"!=typeof C&&(C=y.globals.yLabelFormatters[0]?y.globals.yLabelFormatters[0]:function(M){return M}),"function"!=typeof p&&(p=function(M){return M}),{yLbFormatter:C,yLbTitleFormatter:p}}},{key:"getSeriesName",value:function(d){var C=d.seriesIndex,M=d.j,L=this.w;return(0,d.fn)(String(L.globals.seriesNames[d.index]),{series:L.globals.series,seriesIndex:C,dataPointIndex:M,w:L})}},{key:"DOMHandling",value:function(d){var p=d.t,y=d.j,C=d.ttItems,M=d.values,L=d.seriesName,R=d.shared,H=d.pColor,G=this.w,J=this.ttCtx;Object.keys(M).forEach(function(be){"string"==typeof M[be]&&(M[be]=Qe.sanitizeDom(M[be]))});var te=M.val,K=M.goalVals,ae=M.xVal,pe=M.xAxisTTVal,ge=M.zVal,xe=null;xe=C[p].children,G.config.tooltip.fillSeriesColor&&(C[p].style.backgroundColor=H,xe[0].style.display="none"),J.showTooltipTitle&&(null===J.tooltipTitle&&(J.tooltipTitle=G.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),J.tooltipTitle.innerHTML=ae),J.blxaxisTooltip&&(J.xaxisTooltipText.innerHTML=""!==pe?pe:ae);var Me=C[p].querySelector(".apexcharts-tooltip-text-y-label");Me&&(Me.innerHTML=L?Qe.sanitizeDom(L):"");var ze=C[p].querySelector(".apexcharts-tooltip-text-y-value");ze&&(ze.innerHTML=void 0!==te?te:""),xe[0]&&xe[0].classList.contains("apexcharts-tooltip-marker")&&(G.config.tooltip.marker.fillColors&&Array.isArray(G.config.tooltip.marker.fillColors)&&(H=G.config.tooltip.marker.fillColors[p]),xe[0].style.backgroundColor=H),G.config.tooltip.marker.show||(xe[0].style.display="none");var Ke=C[p].querySelector(".apexcharts-tooltip-text-goals-label"),Y=C[p].querySelector(".apexcharts-tooltip-text-goals-value");if(K.length&&G.globals.seriesGoals[p]){var ne=function(){var be="<div >",Ie="<div>";K.forEach(function(Je,Nt){be+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(Je.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(Je.attrs.name,"</div>"),Ie+="<div>".concat(Je.val,"</div>")}),Ke.innerHTML=be+"</div>",Y.innerHTML=Ie+"</div>"};R?G.globals.seriesGoals[p][y]&&Array.isArray(G.globals.seriesGoals[p][y])?ne():(Ke.innerHTML="",Y.innerHTML=""):ne()}else Ke.innerHTML="",Y.innerHTML="";null!==ge&&(C[p].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=G.config.tooltip.z.title,C[p].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==ge?ge:""),R&&xe[0]&&(xe[0].parentNode.style.display=null==te||G.globals.collapsedSeriesIndices.indexOf(p)>-1?"none":G.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(d){var p=this.w;if(d)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var y=p.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");y&&(y.classList.add("apexcharts-active"),y.style.display=p.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(d){var p=d.i,y=d.j,C=this.w,M=this.ctx.series.filteredSeriesX(),L="",R="",H=null,G=null,J={series:C.globals.series,seriesIndex:p,dataPointIndex:y,w:C},te=C.globals.ttZFormatter;null===y?G=C.globals.series[p]:C.globals.isXNumeric&&"treemap"!==C.config.chart.type?(L=M[p][y],0===M[p].length&&(L=M[this.tooltipUtil.getFirstActiveXArray(M)][y])):L=void 0!==C.globals.labels[y]?C.globals.labels[y]:"";var K=L;return L=C.globals.isXNumeric&&"datetime"===C.config.xaxis.type?new Io(this.ctx).xLabelFormat(C.globals.ttKeyFormatter,K,K,{i:void 0,dateFormatter:new Un(this.ctx).formatDate,w:this.w}):C.globals.isBarHorizontal?C.globals.yLabelFormatters[0](K,J):C.globals.xLabelFormatter(K,J),void 0!==C.config.tooltip.x.formatter&&(L=C.globals.ttKeyFormatter(K,J)),C.globals.seriesZ.length>0&&C.globals.seriesZ[p].length>0&&(H=te(C.globals.seriesZ[p][y],C)),R="function"==typeof C.config.xaxis.tooltip.formatter?C.globals.xaxisTooltipFormatter(K,J):L,{val:Array.isArray(G)?G.join(" "):G,xVal:Array.isArray(L)?L.join(" "):L,xAxisTTVal:Array.isArray(R)?R.join(" "):R,zVal:H}}},{key:"handleCustomTooltip",value:function(d){var p=d.i,y=d.j,C=d.y1,M=d.y2,L=d.w,R=this.ttCtx.getElTooltip(),H=L.config.tooltip.custom;Array.isArray(H)&&H[p]&&(H=H[p]),R.innerHTML=H({ctx:this.ctx,series:L.globals.series,seriesIndex:p,dataPointIndex:y,y1:C,y2:M,w:L})}}]),ve}(),Cr=function(){function ve(d){Ee(this,ve),this.ttCtx=d,this.ctx=d.ctx,this.w=d.w}return gt(ve,[{key:"moveXCrosshairs",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=this.ttCtx,C=this.w,M=y.getElXCrosshairs(),L=d-y.xcrosshairsWidth/2,R=C.globals.labels.slice().length;if(null!==p&&(L=C.globals.gridWidth/R*p),null!==M&&(M.setAttribute("x",L),M.setAttribute("x1",L),M.setAttribute("x2",L),M.setAttribute("y2",C.globals.gridHeight),M.classList.add("apexcharts-active")),L<0&&(L=0),L>C.globals.gridWidth&&(L=C.globals.gridWidth),y.blxaxisTooltip){var H=L;"tickWidth"!==C.config.xaxis.crosshairs.width&&"barWidth"!==C.config.xaxis.crosshairs.width||(H=L+y.xcrosshairsWidth/2),this.moveXAxisTooltip(H)}}},{key:"moveYCrosshairs",value:function(d){var p=this.ttCtx;null!==p.ycrosshairs&&Mt.setAttrs(p.ycrosshairs,{y1:d,y2:d}),null!==p.ycrosshairsHidden&&Mt.setAttrs(p.ycrosshairsHidden,{y1:d,y2:d})}},{key:"moveXAxisTooltip",value:function(d){var p=this.w,y=this.ttCtx;if(null!==y.xaxisTooltip){y.xaxisTooltip.classList.add("apexcharts-active");var M,C=y.xaxisOffY+p.config.xaxis.tooltip.offsetY+p.globals.translateY+1+p.config.xaxis.offsetY;d-=y.xaxisTooltip.getBoundingClientRect().width/2,isNaN(d)||(d+=p.globals.translateX,M=new Mt(this.ctx).getTextRects(y.xaxisTooltipText.innerHTML),y.xaxisTooltipText.style.minWidth=M.width+"px",y.xaxisTooltip.style.left=d+"px",y.xaxisTooltip.style.top=C+"px")}}},{key:"moveYAxisTooltip",value:function(d){var p=this.w,y=this.ttCtx;null===y.yaxisTTEls&&(y.yaxisTTEls=p.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var C=parseInt(y.ycrosshairsHidden.getAttribute("y1"),10),M=p.globals.translateY+C,L=y.yaxisTTEls[d].getBoundingClientRect().height,R=p.globals.translateYAxisX[d]-2;p.config.yaxis[d].opposite&&(R-=26),M-=L/2,-1===p.globals.ignoreYAxisIndexes.indexOf(d)?(y.yaxisTTEls[d].classList.add("apexcharts-active"),y.yaxisTTEls[d].style.top=M+"px",y.yaxisTTEls[d].style.left=R+p.config.yaxis[d].tooltip.offsetX+"px"):y.yaxisTTEls[d].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=this.w,M=this.ttCtx,L=M.getElTooltip(),R=M.tooltipRect,H=null!==y?parseFloat(y):1,G=parseFloat(d)+H+5,J=parseFloat(p)+H/2;if(G>C.globals.gridWidth/2&&(G=G-R.ttWidth-H-15),G>C.globals.gridWidth-R.ttWidth-10&&(G=C.globals.gridWidth-R.ttWidth),G<-20&&(G=-20),C.config.tooltip.followCursor){var te=M.getElGrid(),K=te.getBoundingClientRect();J=M.e.clientY+C.globals.translateY-K.top-R.ttHeight/2}else C.globals.isBarHorizontal?J-=R.ttHeight:(R.ttHeight/2+J>C.globals.gridHeight&&(J=C.globals.gridHeight-R.ttHeight+C.globals.translateY),J<0&&(J=0));isNaN(G)||(L.style.left=(G+=C.globals.translateX)+"px",L.style.top=J+"px")}},{key:"moveMarkers",value:function(d,p){var y=this.w,C=this.ttCtx;if(y.globals.markers.size[d]>0)for(var M=y.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(d,"'] .apexcharts-marker")),L=0;L<M.length;L++)parseInt(M[L].getAttribute("rel"),10)===p&&(C.marker.resetPointsSize(),C.marker.enlargeCurrentPoint(p,M[L]));else C.marker.resetPointsSize(),this.moveDynamicPointOnHover(p,d)}},{key:"moveDynamicPointOnHover",value:function(d,p){var y,C,M=this.w,L=this.ttCtx,R=M.globals.pointsArray,H=L.tooltipUtil.getHoverMarkerSize(p),G=M.config.series[p].type;if(!G||"column"!==G&&"candlestick"!==G&&"boxPlot"!==G){y=R[p][d][0],C=R[p][d][1]?R[p][d][1]:0;var J=M.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(p,"'] .apexcharts-series-markers circle"));J&&C<M.globals.gridHeight&&C>0&&(J.setAttribute("r",H),J.setAttribute("cx",y),J.setAttribute("cy",C)),this.moveXCrosshairs(y),L.fixedTooltip||this.moveTooltip(y,C,H)}}},{key:"moveDynamicPointsOnHover",value:function(d){var p,y=this.ttCtx,C=y.w,M=0,L=0,R=C.globals.pointsArray;p=new Fn(this.ctx).getActiveConfigSeriesIndex(!0);var H=y.tooltipUtil.getHoverMarkerSize(p);R[p]&&(M=R[p][d][0],L=R[p][d][1]);var G=y.tooltipUtil.getAllMarkers();if(null!==G)for(var J=0;J<C.globals.series.length;J++){var te=R[J];if(C.globals.comboCharts&&void 0===te&&G.splice(J,0,null),te&&te.length){var K=R[J][d][1];G[J].setAttribute("cx",M),null!==K&&!isNaN(K)&&K<C.globals.gridHeight&&K>0?(G[J]&&G[J].setAttribute("r",H),G[J]&&G[J].setAttribute("cy",K)):G[J]&&G[J].setAttribute("r",0)}}this.moveXCrosshairs(M),y.fixedTooltip||this.moveTooltip(M,L||C.globals.gridHeight,H)}},{key:"moveStickyTooltipOverBars",value:function(d){var p=this.w,y=this.ttCtx,C=p.globals.columnSeries?p.globals.columnSeries.length:p.globals.series.length,M=C>=2&&C%2==0?Math.floor(C/2):Math.floor(C/2)+1;p.globals.isBarHorizontal&&(M=new Fn(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var L=p.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(M,"'] path[j='").concat(d,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(M,"'] path[j='").concat(d,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(M,"'] path[j='").concat(d,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(M,"'] path[j='").concat(d,"']")),R=L?parseFloat(L.getAttribute("cx")):0,H=L?parseFloat(L.getAttribute("cy")):0,G=L?parseFloat(L.getAttribute("barWidth")):0,J=L?parseFloat(L.getAttribute("barHeight")):0,te=y.getElGrid().getBoundingClientRect();p.globals.isXNumeric?(R-=C%2!=0?G/2:0,L&&(L.classList.contains("apexcharts-candlestick-area")||L.classList.contains("apexcharts-boxPlot-area"))&&p.globals.comboCharts&&(R-=G/2)):p.globals.isBarHorizontal||(R=y.xAxisTicksPositions[d-1]+y.dataPointsDividedWidth/2,isNaN(R)&&(R=y.xAxisTicksPositions[d]-y.dataPointsDividedWidth/2)),p.globals.isBarHorizontal?H+=J/3:H=y.e.clientY-te.top-y.tooltipRect.ttHeight/2,p.globals.isBarHorizontal||this.moveXCrosshairs(R),y.fixedTooltip||this.moveTooltip(R,H||p.globals.gridHeight)}}]),ve}(),Wo=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ttCtx=d,this.ctx=d.ctx,this.tooltipPosition=new Cr(d)}return gt(ve,[{key:"drawDynamicPoints",value:function(){var d=this.w,p=new Mt(this.ctx),y=new $t(this.ctx),C=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series");C=zt(C),d.config.chart.stacked&&C.sort(function(te,K){return parseFloat(te.getAttribute("data:realIndex"))-parseFloat(K.getAttribute("data:realIndex"))});for(var M=0;M<C.length;M++){var L=C[M].querySelector(".apexcharts-series-markers-wrap");if(null!==L){var R=void 0,H="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==d.config.chart.type&&"area"!==d.config.chart.type||d.globals.comboCharts||d.config.tooltip.intersect||(H+=" no-pointer-events");var G=y.getMarkerConfig(H,M);(R=p.drawMarker(0,0,G)).node.setAttribute("default-marker-size",0);var J=document.createElementNS(d.globals.SVGNS,"g");J.classList.add("apexcharts-series-markers"),J.appendChild(R.node),L.appendChild(J)}}}},{key:"enlargeCurrentPoint",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,M=this.w;"bubble"!==M.config.chart.type&&this.newPointSize(d,p);var L=p.getAttribute("cx"),R=p.getAttribute("cy");if(null!==y&&null!==C&&(L=y,R=C),this.tooltipPosition.moveXCrosshairs(L),!this.fixedTooltip){if("radar"===M.config.chart.type){var H=this.ttCtx.getElGrid(),G=H.getBoundingClientRect();L=this.ttCtx.e.clientX-G.left}this.tooltipPosition.moveTooltip(L,R,M.config.markers.hover.size)}}},{key:"enlargePoints",value:function(d){for(var p=this.w,y=this,C=this.ttCtx,M=d,L=p.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),R=p.config.markers.hover.size,H=0;H<L.length;H++){var G=L[H].getAttribute("rel"),J=L[H].getAttribute("index");if(void 0===R&&(R=p.globals.markers.size[J]+p.config.markers.hover.sizeOffset),M===parseInt(G,10)){y.newPointSize(M,L[H]);var te=L[H].getAttribute("cx"),K=L[H].getAttribute("cy");y.tooltipPosition.moveXCrosshairs(te),C.fixedTooltip||y.tooltipPosition.moveTooltip(te,K,R)}else y.oldPointSize(L[H])}}},{key:"newPointSize",value:function(d,p){var y=this.w,C=y.config.markers.hover.size,M=0===d?p.parentNode.firstChild:p.parentNode.lastChild;if("0"!==M.getAttribute("default-marker-size")){var L=parseInt(M.getAttribute("index"),10);void 0===C&&(C=y.globals.markers.size[L]+y.config.markers.hover.sizeOffset),C<0&&(C=0),M.setAttribute("r",C)}}},{key:"oldPointSize",value:function(d){var p=parseFloat(d.getAttribute("default-marker-size"));d.setAttribute("r",p)}},{key:"resetPointsSize",value:function(){for(var d=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),p=0;p<d.length;p++){var y=parseFloat(d[p].getAttribute("default-marker-size"));Qe.isNumber(y)&&y>=0?d[p].setAttribute("r",y):d[p].setAttribute("r",0)}}}]),ve}(),cc=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ttCtx=d}return gt(ve,[{key:"getAttr",value:function(d,p){return parseFloat(d.target.getAttribute(p))}},{key:"handleHeatTreeTooltip",value:function(d){var p=d.e,y=d.opt,C=d.x,M=d.y,R=this.ttCtx,H=this.w;if(p.target.classList.contains("apexcharts-".concat(d.type,"-rect"))){var G=this.getAttr(p,"i"),J=this.getAttr(p,"j"),te=this.getAttr(p,"cx"),K=this.getAttr(p,"cy"),ae=this.getAttr(p,"width"),pe=this.getAttr(p,"height");if(R.tooltipLabels.drawSeriesTexts({ttItems:y.ttItems,i:G,j:J,shared:!1,e:p}),H.globals.capturedSeriesIndex=G,H.globals.capturedDataPointIndex=J,C=te+R.tooltipRect.ttWidth/2+ae,M=K+R.tooltipRect.ttHeight/2-pe/2,R.tooltipPosition.moveXCrosshairs(te+ae/2),C>H.globals.gridWidth/2&&(C=te-R.tooltipRect.ttWidth/2+ae),R.w.config.tooltip.followCursor){var ge=H.globals.dom.elWrap.getBoundingClientRect();C=H.globals.clientX-ge.left-R.tooltipRect.ttWidth/2,M=H.globals.clientY-ge.top-R.tooltipRect.ttHeight-5}}return{x:C,y:M}}},{key:"handleMarkerTooltip",value:function(d){var p,y,C=d.e,M=d.opt,L=d.x,R=d.y,H=this.w,G=this.ttCtx;if(C.target.classList.contains("apexcharts-marker")){var J=parseInt(M.paths.getAttribute("cx"),10),te=parseInt(M.paths.getAttribute("cy"),10),K=parseFloat(M.paths.getAttribute("val"));if(y=parseInt(M.paths.getAttribute("rel"),10),p=parseInt(M.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,G.intersect){var ae=Qe.findAncestor(M.paths,"apexcharts-series");ae&&(p=parseInt(ae.getAttribute("data:realIndex"),10))}if(G.tooltipLabels.drawSeriesTexts({ttItems:M.ttItems,i:p,j:y,shared:!G.showOnIntersect&&H.config.tooltip.shared,e:C}),"mouseup"===C.type&&G.markerClick(C,p,y),H.globals.capturedSeriesIndex=p,H.globals.capturedDataPointIndex=y,L=J,R=te+H.globals.translateY-1.4*G.tooltipRect.ttHeight,G.w.config.tooltip.followCursor){var pe=G.getElGrid().getBoundingClientRect();R=G.e.clientY+H.globals.translateY-pe.top}K<0&&(R=te),G.marker.enlargeCurrentPoint(y,M.paths,L,R)}return{x:L,y:R}}},{key:"handleBarTooltip",value:function(d){var p,y,C=d.e,M=d.opt,L=this.w,R=this.ttCtx,H=R.getElTooltip(),G=0,J=0,te=0,K=this.getBarTooltipXY({e:C,opt:M}),ae=K.barHeight,pe=K.j;L.globals.capturedSeriesIndex=p=K.i,L.globals.capturedDataPointIndex=pe,L.globals.isBarHorizontal&&R.tooltipUtil.hasBars()||!L.config.tooltip.shared?(J=K.x,te=K.y,y=Array.isArray(L.config.stroke.width)?L.config.stroke.width[p]:L.config.stroke.width,G=J):L.globals.comboCharts||L.config.tooltip.shared||(G/=2),isNaN(te)?te=L.globals.svgHeight-R.tooltipRect.ttHeight:te<0&&(te=0);var ge=parseInt(M.paths.parentNode.getAttribute("data:realIndex"),10),xe=L.globals.isMultipleYAxis?L.config.yaxis[ge]&&L.config.yaxis[ge].reversed:L.config.yaxis[0].reversed;if(J+R.tooltipRect.ttWidth>L.globals.gridWidth&&!xe?J-=R.tooltipRect.ttWidth:J<0&&(J=0),R.w.config.tooltip.followCursor){var Me=R.getElGrid().getBoundingClientRect();te=R.e.clientY-Me.top}null===R.tooltip&&(R.tooltip=L.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),L.config.tooltip.shared||R.tooltipPosition.moveXCrosshairs(L.globals.comboBarCount>0?G+y/2:G),!R.fixedTooltip&&(!L.config.tooltip.shared||L.globals.isBarHorizontal&&R.tooltipUtil.hasBars())&&(xe&&(J-=R.tooltipRect.ttWidth)<0&&(J=0),H.style.left=J+L.globals.translateX+"px",!xe||L.globals.isBarHorizontal&&R.tooltipUtil.hasBars()||(te=te+ae-2*(L.globals.series[p][pe]<0?ae:0)),H.style.top=R.tooltipRect.ttHeight+te>L.globals.gridHeight?(te=L.globals.gridHeight-R.tooltipRect.ttHeight+L.globals.translateY)+"px":te+L.globals.translateY-R.tooltipRect.ttHeight/2+"px")}},{key:"getBarTooltipXY",value:function(d){var p=d.e,y=d.opt,C=this.w,M=null,L=this.ttCtx,R=0,H=0,G=0,J=0,te=0,K=p.target.classList;if(K.contains("apexcharts-bar-area")||K.contains("apexcharts-candlestick-area")||K.contains("apexcharts-boxPlot-area")||K.contains("apexcharts-rangebar-area")){var ae=p.target,pe=ae.getBoundingClientRect(),ge=y.elGrid.getBoundingClientRect(),xe=pe.height;te=pe.height;var Me=pe.width,ze=parseInt(ae.getAttribute("cx"),10),Ke=parseInt(ae.getAttribute("cy"),10);J=parseFloat(ae.getAttribute("barWidth"));var Y="touchmove"===p.type?p.touches[0].clientX:p.clientX;M=parseInt(ae.getAttribute("j"),10),R=parseInt(ae.parentNode.getAttribute("rel"),10)-1;var ne=ae.getAttribute("data-range-y1"),be=ae.getAttribute("data-range-y2");C.globals.comboCharts&&(R=parseInt(ae.parentNode.getAttribute("data:realIndex"),10)),L.tooltipLabels.drawSeriesTexts({ttItems:y.ttItems,i:R,j:M,y1:ne?parseInt(ne,10):null,y2:be?parseInt(be,10):null,shared:!L.showOnIntersect&&C.config.tooltip.shared,e:p}),C.config.tooltip.followCursor?C.globals.isBarHorizontal?(H=Y-ge.left+15,G=Ke-L.dataPointsDividedHeight+xe/2-L.tooltipRect.ttHeight/2):(H=C.globals.isXNumeric?ze-Me/2:ze-L.dataPointsDividedWidth+Me/2,G=p.clientY-ge.top-L.tooltipRect.ttHeight/2-15):C.globals.isBarHorizontal?((H=ze)<L.xyRatios.baseLineInvertedY&&(H=ze-L.tooltipRect.ttWidth),G=Ke-L.dataPointsDividedHeight+xe/2-L.tooltipRect.ttHeight/2):(H=C.globals.isXNumeric?ze-Me/2:ze-L.dataPointsDividedWidth+Me/2,G=Ke)}return{x:H,y:G,barHeight:te,barWidth:J,i:R,j:M}}}]),ve}(),ft=function(){function ve(d){Ee(this,ve),this.w=d.w,this.ttCtx=d}return gt(ve,[{key:"drawXaxisTooltip",value:function(){var d=this.w,p=this.ttCtx,y="bottom"===d.config.xaxis.position;p.xaxisOffY=y?d.globals.gridHeight+1:-d.globals.xAxisHeight-d.config.xaxis.axisTicks.height+3;var C=y?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",M=d.globals.dom.elWrap;p.blxaxisTooltip&&null===d.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(p.xaxisTooltip=document.createElement("div"),p.xaxisTooltip.setAttribute("class",C+" apexcharts-theme-"+d.config.tooltip.theme),M.appendChild(p.xaxisTooltip),p.xaxisTooltipText=document.createElement("div"),p.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),p.xaxisTooltipText.style.fontFamily=d.config.xaxis.tooltip.style.fontFamily||d.config.chart.fontFamily,p.xaxisTooltipText.style.fontSize=d.config.xaxis.tooltip.style.fontSize,p.xaxisTooltip.appendChild(p.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var d=this.w,p=this.ttCtx,y=function(M){var L=d.config.yaxis[M].opposite||d.config.yaxis[M].crosshairs.opposite;p.yaxisOffX=L?d.globals.gridWidth+1:1;var R="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(M,L?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");d.globals.yAxisSameScaleIndices.map(function(G,J){G.map(function(te,K){K===M&&(R+=d.config.yaxis[K].show?" ":" apexcharts-yaxistooltip-hidden")})});var H=d.globals.dom.elWrap;null===d.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(M))&&(p.yaxisTooltip=document.createElement("div"),p.yaxisTooltip.setAttribute("class",R+" apexcharts-theme-"+d.config.tooltip.theme),H.appendChild(p.yaxisTooltip),0===M&&(p.yaxisTooltipText=[]),p.yaxisTooltipText[M]=document.createElement("div"),p.yaxisTooltipText[M].classList.add("apexcharts-yaxistooltip-text"),p.yaxisTooltip.appendChild(p.yaxisTooltipText[M]))},C=0;C<d.config.yaxis.length;C++)y(C)}},{key:"setXCrosshairWidth",value:function(){var d=this.w,p=this.ttCtx,y=p.getElXCrosshairs();if(p.xcrosshairsWidth=parseInt(d.config.xaxis.crosshairs.width,10),d.globals.comboCharts){var C=d.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==C&&"barWidth"===d.config.xaxis.crosshairs.width){var M=parseFloat(C.getAttribute("barWidth"));p.xcrosshairsWidth=M}else"tickWidth"===d.config.xaxis.crosshairs.width&&(p.xcrosshairsWidth=d.globals.gridWidth/d.globals.labels.length)}else if("tickWidth"===d.config.xaxis.crosshairs.width)p.xcrosshairsWidth=d.globals.gridWidth/d.globals.labels.length;else if("barWidth"===d.config.xaxis.crosshairs.width){var H=d.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==H){var G=parseFloat(H.getAttribute("barWidth"));p.xcrosshairsWidth=G}else p.xcrosshairsWidth=1}d.globals.isBarHorizontal&&(p.xcrosshairsWidth=0),null!==y&&p.xcrosshairsWidth>0&&y.setAttribute("width",p.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var d=this.w,p=this.ttCtx;p.ycrosshairs=d.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),p.ycrosshairsHidden=d.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(d,p,y){var C=this.ttCtx,M=this.w,L=M.globals.yLabelFormatters[d];if(C.yaxisTooltips[d]){var R=C.getElGrid().getBoundingClientRect(),J=M.globals.minYArr[d]+(M.globals.maxYArr[d]-M.globals.minYArr[d]-(p-R.top)*y.yRatio[d]);C.tooltipPosition.moveYCrosshairs(p-R.top),C.yaxisTooltipText[d].innerHTML=L(J),C.tooltipPosition.moveYAxisTooltip(d)}}}]),ve}(),dt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.tConfig=p.config.tooltip,this.tooltipUtil=new Us(this),this.tooltipLabels=new ys(this),this.tooltipPosition=new Cr(this),this.marker=new Wo(this),this.intersect=new cc(this),this.axesTooltip=new ft(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!p.globals.isBarHorizontal&&this.tConfig.shared}return gt(ve,[{key:"getElTooltip",value:function(d){return d||(d=this),d.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip")}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(d){var p=this.w;this.xyRatios=d,this.blxaxisTooltip=p.config.xaxis.tooltip.enabled&&p.globals.axisCharts,this.yaxisTooltips=p.config.yaxis.map(function(L,R){return!!(L.show&&L.tooltip.enabled&&p.globals.axisCharts)}),this.allTooltipSeriesGroups=[],p.globals.axisCharts||(this.showTooltipTitle=!1);var y=document.createElement("div");if(y.classList.add("apexcharts-tooltip"),y.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),p.globals.dom.elWrap.appendChild(y),p.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var C=new Fr(this.ctx);this.xAxisTicksPositions=C.getXAxisTicksPositions()}if(!p.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==p.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==p.config.markers.size&&0!==p.globals.markers.largestSize||this.marker.drawDynamicPoints(this),p.globals.collapsedSeries.length!==p.globals.series.length){this.dataPointsDividedHeight=p.globals.gridHeight/p.globals.dataPoints,this.dataPointsDividedWidth=p.globals.gridWidth/p.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||p.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,y.appendChild(this.tooltipTitle));var M=p.globals.series.length;(p.globals.xyCharts||p.globals.comboCharts)&&this.tConfig.shared&&(M=this.showOnIntersect?1:p.globals.series.length),this.legendLabels=p.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(M),this.addSVGEvents()}}},{key:"createTTElements",value:function(d){for(var p=this,y=this.w,C=[],M=this.getElTooltip(),L=function(H){var G=document.createElement("div");G.classList.add("apexcharts-tooltip-series-group"),G.style.order=y.config.tooltip.inverseOrder?d-H:H+1,p.tConfig.shared&&p.tConfig.enabledOnSeries&&Array.isArray(p.tConfig.enabledOnSeries)&&p.tConfig.enabledOnSeries.indexOf(H)<0&&G.classList.add("apexcharts-tooltip-series-group-hidden");var J=document.createElement("span");J.classList.add("apexcharts-tooltip-marker"),J.style.backgroundColor=y.globals.colors[H],G.appendChild(J);var te=document.createElement("div");te.classList.add("apexcharts-tooltip-text"),te.style.fontFamily=p.tConfig.style.fontFamily||y.config.chart.fontFamily,te.style.fontSize=p.tConfig.style.fontSize,["y","goals","z"].forEach(function(K){var ae=document.createElement("div");ae.classList.add("apexcharts-tooltip-".concat(K,"-group"));var pe=document.createElement("span");pe.classList.add("apexcharts-tooltip-text-".concat(K,"-label")),ae.appendChild(pe);var ge=document.createElement("span");ge.classList.add("apexcharts-tooltip-text-".concat(K,"-value")),ae.appendChild(ge),te.appendChild(ae)}),G.appendChild(te),M.appendChild(G),C.push(G)},R=0;R<d;R++)L(R);return C}},{key:"addSVGEvents",value:function(){var d=this.w,p=d.config.chart.type,y=this.getElTooltip(),C=!("bar"!==p&&"candlestick"!==p&&"boxPlot"!==p&&"rangeBar"!==p),M="area"===p||"line"===p||"scatter"===p||"bubble"===p||"radar"===p,L=d.globals.dom.Paper.node,R=this.getElGrid();R&&(this.seriesBound=R.getBoundingClientRect());var H,G=[],J=[],te={hoverArea:L,elGrid:R,tooltipEl:y,tooltipY:G,tooltipX:J,ttItems:this.ttItems};if(d.globals.axisCharts&&(M?H=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):C?H=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==p&&"treemap"!==p||(H=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),H&&H.length))for(var K=0;K<H.length;K++)G.push(H[K].getAttribute("cy")),J.push(H[K].getAttribute("cx"));if(d.globals.xyCharts&&!this.showOnIntersect||d.globals.comboCharts&&!this.showOnIntersect||C&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([L],te);else if(C&&!d.globals.comboCharts||M&&this.showOnIntersect)this.addDatapointEventsListeners(te);else if(!d.globals.axisCharts||"heatmap"===p||"treemap"===p){var ae=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(ae,te)}if(this.showOnIntersect){var pe=d.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");pe.length>0&&this.addPathsEventListeners(pe,te),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(te)}}},{key:"drawFixedTooltipRect",value:function(){var d=this.w,p=this.getElTooltip(),y=p.getBoundingClientRect(),C=y.width+10,M=y.height+10,L=this.tConfig.fixed.offsetX,R=this.tConfig.fixed.offsetY,H=this.tConfig.fixed.position.toLowerCase();return H.indexOf("right")>-1&&(L=L+d.globals.svgWidth-C+10),H.indexOf("bottom")>-1&&(R=R+d.globals.svgHeight-M-10),p.style.left=L+"px",p.style.top=R+"px",{x:L,y:R,ttWidth:C,ttHeight:M}}},{key:"addDatapointEventsListeners",value:function(d){var p=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(p,d)}},{key:"addPathsEventListeners",value:function(d,p){for(var y=this,C=function(L){var R={paths:d[L],tooltipEl:p.tooltipEl,tooltipY:p.tooltipY,tooltipX:p.tooltipX,elGrid:p.elGrid,hoverArea:p.hoverArea,ttItems:p.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(H){return d[L].addEventListener(H,y.seriesHover.bind(y,R),{capture:!1,passive:!0})})},M=0;M<d.length;M++)C(M)}},{key:"seriesHover",value:function(d,p){var y=this,C=[],M=this.w;M.config.chart.group&&(C=this.ctx.getGroupedCharts()),M.globals.axisCharts&&(M.globals.minX===-1/0&&M.globals.maxX===1/0||0===M.globals.dataPoints)||(C.length?C.forEach(function(L){var R=y.getElTooltip(L);L.w.globals.minX===y.w.globals.minX&&L.w.globals.maxX===y.w.globals.maxX&&L.w.globals.tooltip.seriesHoverByContext({chartCtx:L,ttCtx:L.w.globals.tooltip,opt:{paths:d.paths,tooltipEl:R,tooltipY:d.tooltipY,tooltipX:d.tooltipX,elGrid:d.elGrid,hoverArea:d.hoverArea,ttItems:L.w.globals.tooltip.ttItems},e:p})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:d,e:p}))}},{key:"seriesHoverByContext",value:function(d){var p=d.chartCtx,y=d.ttCtx,C=d.opt,M=d.e,L=p.w,R=this.getElTooltip();y.tooltipRect={x:0,y:0,ttWidth:R.getBoundingClientRect().width,ttHeight:R.getBoundingClientRect().height},y.e=M,!y.tooltipUtil.hasBars()||L.globals.comboCharts||y.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new Fn(p).toggleSeriesOnHover(M,M.target.parentNode),y.fixedTooltip&&y.drawFixedTooltipRect(),L.globals.axisCharts?y.axisChartsTooltips({e:M,opt:C,tooltipRect:y.tooltipRect}):y.nonAxisChartsTooltips({e:M,opt:C,tooltipRect:y.tooltipRect})}},{key:"axisChartsTooltips",value:function(d){var p,y,C=d.e,M=d.opt,L=this.w,R=M.elGrid.getBoundingClientRect(),H="touchmove"===C.type?C.touches[0].clientX:C.clientX,G="touchmove"===C.type?C.touches[0].clientY:C.clientY;if(this.clientY=G,this.clientX=H,L.globals.capturedSeriesIndex=-1,L.globals.capturedDataPointIndex=-1,G<R.top||G>R.top+R.height)this.handleMouseOut(M);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!L.config.tooltip.shared){var J=parseInt(M.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(J)<0)return void this.handleMouseOut(M)}var te=this.getElTooltip(),K=this.getElXCrosshairs(),ae=L.globals.xyCharts||"bar"===L.config.chart.type&&!L.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||L.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===C.type||"touchmove"===C.type||"mouseup"===C.type){null!==K&&K.classList.add("apexcharts-active");var pe=this.yaxisTooltips.filter(function(Me){return!0===Me});if(null!==this.ycrosshairs&&pe.length&&this.ycrosshairs.classList.add("apexcharts-active"),ae&&!this.showOnIntersect)this.handleStickyTooltip(C,H,G,M);else if("heatmap"===L.config.chart.type||"treemap"===L.config.chart.type){var ge=this.intersect.handleHeatTreeTooltip({e:C,opt:M,x:p,y,type:L.config.chart.type});y=ge.y,te.style.left=(p=ge.x)+"px",te.style.top=y+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:C,opt:M}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:C,opt:M,x:p,y});if(this.yaxisTooltips.length)for(var xe=0;xe<L.config.yaxis.length;xe++)this.axesTooltip.drawYaxisTooltipText(xe,G,this.xyRatios);M.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==C.type&&"touchend"!==C.type||this.handleMouseOut(M)}}},{key:"nonAxisChartsTooltips",value:function(d){var p=d.e,y=d.opt,C=d.tooltipRect,M=this.w,L=y.paths.getAttribute("rel"),R=this.getElTooltip(),H=M.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===p.type||"touchmove"===p.type){R.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:y.ttItems,i:parseInt(L,10)-1,shared:!1});var J=M.globals.clientY-H.top-C.ttHeight-10;if(R.style.left=M.globals.clientX-H.left-C.ttWidth/2+"px",R.style.top=J+"px",M.config.legend.tooltipHoverFormatter){var te=L-1,K=(0,M.config.legend.tooltipHoverFormatter)(this.legendLabels[te].getAttribute("data:default-text"),{seriesIndex:te,dataPointIndex:te,w:M});this.legendLabels[te].innerHTML=K}}else"mouseout"!==p.type&&"touchend"!==p.type||(R.classList.remove("apexcharts-active"),M.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(ae){var pe=ae.getAttribute("data:default-text");ae.innerHTML=decodeURIComponent(pe)}))}},{key:"handleStickyTooltip",value:function(d,p,y,C){var M=this.w,L=this.tooltipUtil.getNearestValues({context:this,hoverArea:C.hoverArea,elGrid:C.elGrid,clientX:p,clientY:y}),R=L.j,H=L.capturedSeries;L.hoverX<0||L.hoverX>M.globals.gridWidth?this.handleMouseOut(C):null!==H?this.handleStickyCapturedSeries(d,H,C,R):(this.tooltipUtil.isXoverlap(R)||M.globals.isBarHorizontal)&&this.create(d,this,0,R,C.ttItems)}},{key:"handleStickyCapturedSeries",value:function(d,p,y,C){var M=this.w;null===M.globals.series[p][C]?this.handleMouseOut(y):void 0!==M.globals.series[p][C]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(C)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(d,this,p,C,y.ttItems):this.create(d,this,p,C,y.ttItems,!1):this.tooltipUtil.isXoverlap(C)&&this.create(d,this,0,C,y.ttItems)}},{key:"deactivateHoverFilter",value:function(){for(var d=this.w,p=new Mt(this.ctx),y=d.globals.dom.Paper.select(".apexcharts-bar-area"),C=0;C<y.length;C++)p.pathMouseLeave(y[C])}},{key:"handleMouseOut",value:function(d){var p=this.w,y=this.getElXCrosshairs();if(d.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==p.config.chart.type&&this.marker.resetPointsSize(),null!==y&&y.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.blxaxisTooltip&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=p.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var C=0;C<this.yaxisTTEls.length;C++)this.yaxisTTEls[C].classList.remove("apexcharts-active")}p.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(M){var L=M.getAttribute("data:default-text");M.innerHTML=decodeURIComponent(L)})}},{key:"markerClick",value:function(d,p,y){var C=this.w;"function"==typeof C.config.chart.events.markerClick&&C.config.chart.events.markerClick(d,this.ctx,{seriesIndex:p,dataPointIndex:y,w:C}),this.ctx.events.fireEvent("markerClick",[d,this.ctx,{seriesIndex:p,dataPointIndex:y,w:C}])}},{key:"create",value:function(d,p,y,C,M){var L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,R=this.w,H=p;"mouseup"===d.type&&this.markerClick(d,y,C),null===L&&(L=this.tConfig.shared);var G=this.tooltipUtil.hasMarkers(),J=this.tooltipUtil.getElBars();if(R.config.legend.tooltipHoverFormatter){var te=R.config.legend.tooltipHoverFormatter,K=Array.from(this.legendLabels);K.forEach(function(ne){var be=ne.getAttribute("data:default-text");ne.innerHTML=decodeURIComponent(be)});for(var ae=0;ae<K.length;ae++){var pe=K[ae],ge=parseInt(pe.getAttribute("i"),10),xe=decodeURIComponent(pe.getAttribute("data:default-text")),Me=te(xe,{seriesIndex:L?ge:y,dataPointIndex:C,w:R});if(L)pe.innerHTML=R.globals.collapsedSeriesIndices.indexOf(ge)<0?Me:xe;else if(pe.innerHTML=ge===y?Me:xe,y===ge)break}}if(L){if(H.tooltipLabels.drawSeriesTexts({ttItems:M,i:y,j:C,shared:!this.showOnIntersect&&this.tConfig.shared}),G&&(R.globals.markers.largestSize>0?H.marker.enlargePoints(C):H.tooltipPosition.moveDynamicPointsOnHover(C)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(J),this.barSeriesHeight>0)){var ze=new Mt(this.ctx),Ke=R.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(C,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(C);for(var Y=0;Y<Ke.length;Y++)ze.pathMouseEnter(Ke[Y])}}else H.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:M,i:y,j:C}),this.tooltipUtil.hasBars()&&H.tooltipPosition.moveStickyTooltipOverBars(C),G&&H.tooltipPosition.moveMarkers(y,C)}}]),ve}(),Tt=function(ve){je(p,mi);var d=Ct(p);function p(){return Ee(this,p),d.apply(this,arguments)}return gt(p,[{key:"draw",value:function(y,C){var M=this,L=this.w;this.graphics=new Mt(this.ctx),this.bar=new mi(this.ctx,this.xyRatios);var R=new Vn(this.ctx,L);y=R.getLogSeries(y),this.yRatio=R.getLogYRatios(this.yRatio),this.barHelpers.initVariables(y),"100%"===L.config.chart.stackType&&(y=L.globals.seriesPercent.slice()),this.series=y,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var H=0;H<y.length;H++)y[H].length>0&&(this.totalItems+=y[H].length);for(var G=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),J=0,te=0,K=function(ge,xe){var Me=void 0,ze=void 0,Ke=void 0,Y=void 0,ne=[],be=[],Ie=L.globals.comboCharts?C[ge]:ge;M.yRatio.length>1&&(M.yaxisIndex=Ie),M.isReversed=L.config.yaxis[M.yaxisIndex]&&L.config.yaxis[M.yaxisIndex].reversed;var Je=M.graphics.group({class:"apexcharts-series",seriesName:Qe.escapeString(L.globals.seriesNames[Ie]),rel:ge+1,"data:realIndex":Ie});M.ctx.series.addCollapsedClassToSeries(Je,Ie);var Nt=M.graphics.group({class:"apexcharts-datalabels","data:realIndex":Ie}),St=0,Xt=0,gn=M.initialPositions(J,te,Me,ze,Ke,Y);te=gn.y,St=gn.barHeight,ze=gn.yDivision,Y=gn.zeroW,J=gn.x,Xt=gn.barWidth,Me=gn.xDivision,Ke=gn.zeroH,M.yArrj=[],M.yArrjF=[],M.yArrjVal=[],M.xArrj=[],M.xArrjF=[],M.xArrjVal=[],1===M.prevY.length&&M.prevY[0].every(function(ar){return isNaN(ar)})&&(M.prevY[0]=M.prevY[0].map(function(ar){return Ke}),M.prevYF[0]=M.prevYF[0].map(function(ar){return 0}));for(var hn=0;hn<L.globals.dataPoints;hn++){var Kn=M.barHelpers.getStrokeWidth(ge,hn,Ie),Bi={indexes:{i:ge,j:hn,realIndex:Ie,bc:xe},strokeWidth:Kn,x:J,y:te,elSeries:Je},zn=null;M.isHorizontal?(zn=M.drawStackedBarPaths(Be(Be({},Bi),{},{zeroW:Y,barHeight:St,yDivision:ze})),Xt=M.series[ge][hn]/M.invertedYRatio):(zn=M.drawStackedColumnPaths(Be(Be({},Bi),{},{xDivision:Me,barWidth:Xt,zeroH:Ke})),St=M.series[ge][hn]/M.yRatio[M.yaxisIndex]),te=zn.y,ne.push(J=zn.x),be.push(te);var ti=M.barHelpers.getPathFillColor(y,ge,hn,Ie);Je=M.renderSeries({realIndex:Ie,pathFill:ti,j:hn,i:ge,pathFrom:zn.pathFrom,pathTo:zn.pathTo,strokeWidth:Kn,elSeries:Je,x:J,y:te,series:y,barHeight:St,barWidth:Xt,elDataLabelsWrap:Nt,type:"bar",visibleSeries:0})}L.globals.seriesXvalues[Ie]=ne,L.globals.seriesYvalues[Ie]=be,M.prevY.push(M.yArrj),M.prevYF.push(M.yArrjF),M.prevYVal.push(M.yArrjVal),M.prevX.push(M.xArrj),M.prevXF.push(M.xArrjF),M.prevXVal.push(M.xArrjVal),G.add(Je)},ae=0,pe=0;ae<y.length;ae++,pe++)K(ae,pe);return G}},{key:"initialPositions",value:function(y,C,M,L,R,H){var G,J,te=this.w;return this.isHorizontal?(G=(G=L=te.globals.gridHeight/te.globals.dataPoints)*parseInt(te.config.plotOptions.bar.barHeight,10)/100,H=this.baseLineInvertedY+te.globals.padHorizontal+(this.isReversed?te.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),C=(L-G)/2):(J=M=te.globals.gridWidth/te.globals.dataPoints,J=te.globals.isXNumeric&&te.globals.dataPoints>1?(M=te.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:J*parseInt(te.config.plotOptions.bar.columnWidth,10)/100,R=this.baseLineY[this.yaxisIndex]+(this.isReversed?te.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),y=te.globals.padHorizontal+(M-J)/2),{x:y,y:C,yDivision:L,xDivision:M,barHeight:G,barWidth:J,zeroH:R,zeroW:H}}},{key:"drawStackedBarPaths",value:function(y){for(var C,G,M=y.indexes,L=y.barHeight,R=y.strokeWidth,H=y.zeroW,J=y.y,te=y.yDivision,K=y.elSeries,ae=this.w,pe=J,ge=M.i,xe=M.j,Me=0,ze=0;ze<this.prevXF.length;ze++)Me+=this.prevXF[ze][xe];if(ge>0){var Ke=H;this.prevXVal[ge-1][xe]<0?Ke=this.series[ge][xe]>=0?this.prevX[ge-1][xe]+Me-2*(this.isReversed?Me:0):this.prevX[ge-1][xe]:this.prevXVal[ge-1][xe]>=0&&(Ke=this.series[ge][xe]>=0?this.prevX[ge-1][xe]:this.prevX[ge-1][xe]-Me+2*(this.isReversed?Me:0)),C=Ke}else C=H;var Y=this.barHelpers.getBarpaths({barYPosition:pe,barHeight:L,x1:C,x2:G=null===this.series[ge][xe]?C:C+this.series[ge][xe]/this.invertedYRatio-2*(this.isReversed?this.series[ge][xe]/this.invertedYRatio:0),strokeWidth:R,series:this.series,realIndex:M.realIndex,i:ge,j:xe,w:ae});return this.barHelpers.barBackground({j:xe,i:ge,y1:pe,y2:L,elSeries:K}),{pathTo:Y.pathTo,pathFrom:Y.pathFrom,x:G,y:J+=te}}},{key:"drawStackedColumnPaths",value:function(y){var L,C=y.indexes,M=y.x,R=y.xDivision,H=y.barWidth,G=y.zeroH,J=y.elSeries,te=this.w,K=C.i,ae=C.j,pe=C.bc;if(te.globals.isXNumeric){var ge=te.globals.seriesX[K][ae];ge||(ge=0),M=(ge-te.globals.minX)/this.xRatio-H/2}for(var xe,Me=M,ze=0,Ke=0;Ke<this.prevYF.length;Ke++)ze+=isNaN(this.prevYF[Ke][ae])?0:this.prevYF[Ke][ae];if(K>0&&!te.globals.isXNumeric||K>0&&te.globals.isXNumeric&&te.globals.seriesX[K-1][ae]===te.globals.seriesX[K][ae]){var Y,ne,be=Math.min(this.yRatio.length+1,K+1);if(void 0!==this.prevY[K-1])for(var Ie=1;Ie<be;Ie++)if(!isNaN(this.prevY[K-Ie][ae])){ne=this.prevY[K-Ie][ae];break}for(var Je=1;Je<be;Je++){if(this.prevYVal[K-Je][ae]<0){Y=this.series[K][ae]>=0?ne-ze+2*(this.isReversed?ze:0):ne;break}if(this.prevYVal[K-Je][ae]>=0){Y=this.series[K][ae]>=0?ne:ne+ze-2*(this.isReversed?ze:0);break}}void 0===Y&&(Y=te.globals.gridHeight),xe=this.prevYF[0].every(function(St){return 0===St})&&this.prevYF.slice(1,K).every(function(St){return St.every(function(Xt){return isNaN(Xt)})})?te.globals.gridHeight-G:Y}else xe=te.globals.gridHeight-G;var Nt=this.barHelpers.getColumnPaths({barXPosition:Me,barWidth:H,y1:xe,y2:L=xe-this.series[K][ae]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[K][ae]/this.yRatio[this.yaxisIndex]:0),yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:C.realIndex,i:K,j:ae,w:te});return this.barHelpers.barBackground({bc:pe,j:ae,i:K,x1:Me,x2:H,elSeries:J}),M+=R,{pathTo:Nt.pathTo,pathFrom:Nt.pathFrom,x:te.globals.isXNumeric?M-R:M,y:L}}}]),p}(),Kt=function(ve){je(p,mi);var d=Ct(p);function p(){return Ee(this,p),d.apply(this,arguments)}return gt(p,[{key:"draw",value:function(y,C){var M=this,L=this.w,R=new Mt(this.ctx),H=new Gt(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot;var G=new Vn(this.ctx,L);y=G.getLogSeries(y),this.series=y,this.yRatio=G.getLogYRatios(this.yRatio),this.barHelpers.initVariables(y);for(var J=R.group({class:"apexcharts-".concat(L.config.chart.type,"-series apexcharts-plot-series")}),te=function(ae){M.isBoxPlot="boxPlot"===L.config.chart.type||"boxPlot"===L.config.series[ae].type;var pe,ge,be,Ie,xe=void 0,Me=void 0,ze=[],Ke=[],Y=L.globals.comboCharts?C[ae]:ae,ne=R.group({class:"apexcharts-series",seriesName:Qe.escapeString(L.globals.seriesNames[Y]),rel:ae+1,"data:realIndex":Y});y[ae].length>0&&(M.visibleI=M.visibleI+1),M.yRatio.length>1&&(M.yaxisIndex=Y);var Je=M.barHelpers.initialPositions();Me=Je.y,be=Je.barHeight,pe=Je.xDivision,ge=Je.zeroH,Ke.push((xe=Je.x)+(Ie=Je.barWidth)/2);for(var Nt=R.group({class:"apexcharts-datalabels","data:realIndex":Y}),St=function(gn){var hn=M.barHelpers.getStrokeWidth(ae,gn,Y),Kn=M.drawBoxPaths({indexes:{i:ae,j:gn,realIndex:Y},x:xe,y:Me,xDivision:pe,barWidth:Ie,zeroH:ge,strokeWidth:hn,elSeries:ne});Me=Kn.y,xe=Kn.x,gn>0&&Ke.push(xe+Ie/2),ze.push(Me),Kn.pathTo.forEach(function(Bi,zn){var ti=!M.isBoxPlot&&M.candlestickOptions.wick.useFillColor?Kn.color[zn]:L.globals.stroke.colors[ae],ar=H.fillPath({seriesNumber:Y,dataPointIndex:gn,color:Kn.color[zn],value:y[ae][gn]});M.renderSeries({realIndex:Y,pathFill:ar,lineFill:ti,j:gn,i:ae,pathFrom:Kn.pathFrom,pathTo:Bi,strokeWidth:hn,elSeries:ne,x:xe,y:Me,series:y,barHeight:be,barWidth:Ie,elDataLabelsWrap:Nt,visibleSeries:M.visibleI,type:L.config.chart.type})})},Xt=0;Xt<L.globals.dataPoints;Xt++)St(Xt);L.globals.seriesXvalues[Y]=Ke,L.globals.seriesYvalues[Y]=ze,J.add(ne)},K=0;K<y.length;K++)te(K);return J}},{key:"drawBoxPaths",value:function(y){var C=y.indexes,M=y.x,L=y.xDivision,R=y.barWidth,H=y.zeroH,G=y.strokeWidth,J=this.w,te=new Mt(this.ctx),K=C.i,ae=C.j,pe=!0,ge=J.config.plotOptions.candlestick.colors.upward,xe=J.config.plotOptions.candlestick.colors.downward,Me="";this.isBoxPlot&&(Me=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var ze=this.yRatio[this.yaxisIndex],Ke=C.realIndex,Y=this.getOHLCValue(Ke,ae),ne=H,be=H;Y.o>Y.c&&(pe=!1);var Ie=Math.min(Y.o,Y.c),Je=Math.max(Y.o,Y.c),Nt=Y.m;J.globals.isXNumeric&&(M=(J.globals.seriesX[Ke][ae]-J.globals.minX)/this.xRatio-R/2);var St=M+R*this.visibleI;null==this.series[K][ae]?(Ie=H,Je=H):(Ie=H-Ie/ze,Je=H-Je/ze,ne=H-Y.h/ze,be=H-Y.l/ze,Nt=H-Y.m/ze);var Xt=te.move(St,H),gn=te.move(St+R/2,Ie);return J.globals.previousPaths.length>0&&(gn=this.getPreviousPath(Ke,ae,!0)),Xt=this.isBoxPlot?[te.move(St,Ie)+te.line(St+R/2,Ie)+te.line(St+R/2,ne)+te.line(St+R/4,ne)+te.line(St+R-R/4,ne)+te.line(St+R/2,ne)+te.line(St+R/2,Ie)+te.line(St+R,Ie)+te.line(St+R,Nt)+te.line(St,Nt)+te.line(St,Ie+G/2),te.move(St,Nt)+te.line(St+R,Nt)+te.line(St+R,Je)+te.line(St+R/2,Je)+te.line(St+R/2,be)+te.line(St+R-R/4,be)+te.line(St+R/4,be)+te.line(St+R/2,be)+te.line(St+R/2,Je)+te.line(St,Je)+te.line(St,Nt)+"z"]:[te.move(St,Je)+te.line(St+R/2,Je)+te.line(St+R/2,ne)+te.line(St+R/2,Je)+te.line(St+R,Je)+te.line(St+R,Ie)+te.line(St+R/2,Ie)+te.line(St+R/2,be)+te.line(St+R/2,Ie)+te.line(St,Ie)+te.line(St,Je-G/2)],gn+=te.move(St,Ie),J.globals.isXNumeric||(M+=L),{pathTo:Xt,pathFrom:gn,x:M,y:Je,barXPosition:St,color:this.isBoxPlot?Me:pe?[ge]:[xe]}}},{key:"getOHLCValue",value:function(y,C){var M=this.w;return{o:this.isBoxPlot?M.globals.seriesCandleH[y][C]:M.globals.seriesCandleO[y][C],h:this.isBoxPlot?M.globals.seriesCandleO[y][C]:M.globals.seriesCandleH[y][C],m:M.globals.seriesCandleM[y][C],l:this.isBoxPlot?M.globals.seriesCandleC[y][C]:M.globals.seriesCandleL[y][C],c:this.isBoxPlot?M.globals.seriesCandleL[y][C]:M.globals.seriesCandleC[y][C]}}}]),p}(),Lt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"checkColorRange",value:function(){var d=this.w,p=!1,y=d.config.plotOptions[d.config.chart.type];return y.colorScale.ranges.length>0&&y.colorScale.ranges.map(function(C,M){C.from<=0&&(p=!0)}),p}},{key:"getShadeColor",value:function(d,p,y,C){var M=this.w,L=1,R=M.config.plotOptions[d].shadeIntensity,H=this.determineColor(d,p,y);M.globals.hasNegs||C?L=M.config.plotOptions[d].reverseNegativeShade?H.percent<0?H.percent/100*(1.25*R):1.25*R*(1-H.percent/100):H.percent<=0?1-(1+H.percent/100)*R:(1-H.percent/100)*R:(L=1-H.percent/100,"treemap"===d&&(L=1.25*R*(1-H.percent/100)));var G=H.color,J=new Qe;return M.config.plotOptions[d].enableShades&&(G=Qe.hexToRgba(J.shadeColor("dark"===this.w.config.theme.mode?-1*L:L,H.color),M.config.fill.opacity)),{color:G,colorProps:H}}},{key:"determineColor",value:function(d,p,y){var C=this.w,M=C.globals.series[p][y],L=C.config.plotOptions[d],R=L.colorScale.inverse?y:p;C.config.plotOptions[d].distributed&&(R=y);var H=C.globals.colors[R],G=null,J=Math.min.apply(Math,zt(C.globals.series[p])),te=Math.max.apply(Math,zt(C.globals.series[p]));L.distributed||"heatmap"!==d||(J=C.globals.minY,te=C.globals.maxY),void 0!==L.colorScale.min&&(J=L.colorScale.min<C.globals.minY?L.colorScale.min:C.globals.minY,te=L.colorScale.max>C.globals.maxY?L.colorScale.max:C.globals.maxY);var K=Math.abs(te)+Math.abs(J),ae=100*M/(0===K?K-1e-6:K);return L.colorScale.ranges.length>0&&L.colorScale.ranges.map(function(pe,ge){if(M>=pe.from&&M<=pe.to){H=pe.color,G=pe.foreColor?pe.foreColor:null,J=pe.from,te=pe.to;var xe=Math.abs(te)+Math.abs(J);ae=100*M/(0===xe?xe-1e-6:xe)}}),{color:H,foreColor:G,percent:ae}}},{key:"calculateDataLabels",value:function(d){var p=d.text,y=d.x,C=d.y,M=d.i,L=d.j,R=d.colorProps,H=d.fontSize,G=this.w.config.dataLabels,J=new Mt(this.ctx),te=new fn(this.ctx),K=null;if(G.enabled){K=J.group({class:"apexcharts-data-labels"});var pe=G.offsetY,ge=y+G.offsetX,xe=C+parseFloat(G.style.fontSize)/3+pe;te.plotDataLabelsText({x:ge,y:xe,text:p,i:M,j:L,color:R.foreColor,parent:K,fontSize:H,dataLabelsConfig:G})}return K}},{key:"addListeners",value:function(d){var p=new Mt(this.ctx);d.node.addEventListener("mouseenter",p.pathMouseEnter.bind(this,d)),d.node.addEventListener("mouseleave",p.pathMouseLeave.bind(this,d)),d.node.addEventListener("mousedown",p.pathMouseDown.bind(this,d))}}]),ve}(),Bn=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w,this.xRatio=p.xRatio,this.yRatio=p.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Lt(d),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return gt(ve,[{key:"draw",value:function(d){var p=this.w,y=new Mt(this.ctx),C=y.group({class:"apexcharts-heatmap"});C.attr("clip-path","url(#gridRectMask".concat(p.globals.cuid,")"));var M=p.globals.gridWidth/p.globals.dataPoints,L=p.globals.gridHeight/p.globals.series.length,R=0,H=!1;this.negRange=this.helpers.checkColorRange();var G=d.slice();p.config.yaxis[0].reversed&&(H=!0,G.reverse());for(var J=H?0:G.length-1;H?J<G.length:J>=0;H?J++:J--){var te=y.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:Qe.escapeString(p.globals.seriesNames[J]),rel:J+1,"data:realIndex":J});if(this.ctx.series.addCollapsedClassToSeries(te,J),p.config.chart.dropShadow.enabled){var K=p.config.chart.dropShadow;new dn(this.ctx).dropShadow(te,K,J)}for(var ae=0,pe=p.config.plotOptions.heatmap.shadeIntensity,ge=0;ge<G[J].length;ge++){var xe=this.helpers.getShadeColor(p.config.chart.type,J,ge,this.negRange),Me=xe.color,ze=xe.colorProps;"image"===p.config.fill.type&&(Me=new Gt(this.ctx).fillPath({seriesNumber:J,dataPointIndex:ge,opacity:p.globals.hasNegs?ze.percent<0?1-(1+ze.percent/100):pe+ze.percent/100:ze.percent/100,patternID:Qe.randomId(),width:p.config.fill.image.width?p.config.fill.image.width:M,height:p.config.fill.image.height?p.config.fill.image.height:L}));var Y=y.drawRect(ae,R,M,L,this.rectRadius);if(Y.attr({cx:ae,cy:R}),Y.node.classList.add("apexcharts-heatmap-rect"),te.add(Y),Y.attr({fill:Me,i:J,index:J,j:ge,val:G[J][ge],"stroke-width":this.strokeWidth,stroke:p.config.plotOptions.heatmap.useFillColorAsStroke?Me:p.globals.stroke.colors[0],color:Me}),this.helpers.addListeners(Y),p.config.chart.animations.enabled&&!p.globals.dataChanged){var ne=1;p.globals.resized||(ne=p.config.chart.animations.speed),this.animateHeatMap(Y,ae,R,M,L,ne)}if(p.globals.dataChanged){var be=1;if(this.dynamicAnim.enabled&&p.globals.shouldAnimate){be=this.dynamicAnim.speed;var Ie=p.globals.previousPaths[J]&&p.globals.previousPaths[J][ge]&&p.globals.previousPaths[J][ge].color;Ie||(Ie="rgba(255, 255, 255, 0)"),this.animateHeatColor(Y,Qe.isColorHex(Ie)?Ie:Qe.rgb2hex(Ie),Qe.isColorHex(Me)?Me:Qe.rgb2hex(Me),be)}}var Je=(0,p.config.dataLabels.formatter)(p.globals.series[J][ge],{value:p.globals.series[J][ge],seriesIndex:J,dataPointIndex:ge,w:p}),Nt=this.helpers.calculateDataLabels({text:Je,x:ae+M/2,y:R+L/2,i:J,j:ge,colorProps:ze,series:G});null!==Nt&&te.add(Nt),ae+=M}R+=L,C.add(te)}var St=p.globals.yAxisScale[0].result.slice();return p.config.yaxis[0].reversed?St.unshift(""):St.push(""),p.globals.yAxisScale[0].result=St,p.config.yaxis[0].labels.offsetY=-p.globals.gridHeight/p.globals.series.length/2,C}},{key:"animateHeatMap",value:function(d,p,y,C,M,L){var R=new On(this.ctx);R.animateRect(d,{x:p+C/2,y:y+M/2,width:0,height:0},{x:p,y,width:C,height:M},L,function(){R.animationCompleted(d)})}},{key:"animateHeatColor",value:function(d,p,y,C){d.attr({fill:p}).animate(C).attr({fill:y})}}]),ve}(),di=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"drawYAxisTexts",value:function(d,p,y,C){var M=this.w,L=M.config.yaxis[0],R=M.globals.yLabelFormatters[0];return new Mt(this.ctx).drawText({x:d+L.labels.offsetX,y:p+L.labels.offsetY,text:R(C,y),textAnchor:"middle",fontSize:L.labels.style.fontSize,fontFamily:L.labels.style.fontFamily,foreColor:Array.isArray(L.labels.style.colors)?L.labels.style.colors[y]:L.labels.style.colors})}}]),ve}(),Oi=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w;var p=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==p.globals.stroke.colors?p.globals.stroke.colors:p.globals.colors,this.defaultSize=Math.min(p.globals.gridWidth,p.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=p.globals.gridWidth/2,this.fullAngle="radialBar"===p.config.chart.type?360:Math.abs(p.config.plotOptions.pie.endAngle-p.config.plotOptions.pie.startAngle),this.initialAngle=p.config.plotOptions.pie.startAngle%this.fullAngle,p.globals.radialSize=this.defaultSize/2.05-p.config.stroke.width-(p.config.chart.sparkline.enabled?0:p.config.chart.dropShadow.blur),this.donutSize=p.globals.radialSize*parseInt(p.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return gt(ve,[{key:"draw",value:function(d){var p=this,y=this.w,C=new Mt(this.ctx);if(this.ret=C.group({class:"apexcharts-pie"}),y.globals.noData)return this.ret;for(var M=0,L=0;L<d.length;L++)M+=Qe.negToZero(d[L]);var R=[],H=C.group();0===M&&(M=1e-5),d.forEach(function(Ie){p.maxY=Math.max(p.maxY,Ie)}),y.config.yaxis[0].max&&(this.maxY=y.config.yaxis[0].max),"back"===y.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var G=0;G<d.length;G++){var J=this.fullAngle*Qe.negToZero(d[G])/M;R.push(J),"polarArea"===this.chartType?(R[G]=this.fullAngle/d.length,this.sliceSizes.push(y.globals.radialSize*d[G]/this.maxY)):this.sliceSizes.push(y.globals.radialSize)}if(y.globals.dataChanged){for(var te,K=0,ae=0;ae<y.globals.previousPaths.length;ae++)K+=Qe.negToZero(y.globals.previousPaths[ae]);for(var pe=0;pe<y.globals.previousPaths.length;pe++)te=this.fullAngle*Qe.negToZero(y.globals.previousPaths[pe])/K,this.prevSectorAngleArr.push(te)}this.donutSize<0&&(this.donutSize=0);var ge=y.config.plotOptions.pie.customScale,ze=y.globals.gridWidth/2-y.globals.gridWidth/2*ge,Ke=y.globals.gridHeight/2-y.globals.gridHeight/2*ge;if("donut"===this.chartType){var Y=C.drawCircle(this.donutSize);Y.attr({cx:this.centerX,cy:this.centerY,fill:y.config.plotOptions.pie.donut.background?y.config.plotOptions.pie.donut.background:"transparent"}),H.add(Y)}var ne=this.drawArcs(R,d);if(this.sliceLabels.forEach(function(Ie){ne.add(Ie)}),H.attr({transform:"translate(".concat(ze,", ").concat(Ke,") scale(").concat(ge,")")}),H.add(ne),this.ret.add(H),this.donutDataLabels.show){var be=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:ze,translateY:Ke});this.ret.add(be)}return"front"===y.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(d,p){var y=this.w,C=new dn(this.ctx),M=new Mt(this.ctx),L=new Gt(this.ctx),R=M.group({class:"apexcharts-slices"}),H=this.initialAngle,G=this.initialAngle,J=this.initialAngle,te=this.initialAngle;this.strokeWidth=y.config.stroke.show?y.config.stroke.width:0;for(var K=0;K<d.length;K++){var ae=M.group({class:"apexcharts-series apexcharts-pie-series",seriesName:Qe.escapeString(y.globals.seriesNames[K]),rel:K+1,"data:realIndex":K});R.add(ae),J=(H=J)+d[K],te=(G=te)+this.prevSectorAngleArr[K];var pe=J<H?this.fullAngle+J-H:J-H,ge=L.fillPath({seriesNumber:K,size:this.sliceSizes[K],value:p[K]}),xe=this.getChangedPath(G,te),Me=M.drawPath({d:xe,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[K]:this.lineColorArr,strokeWidth:0,fill:ge,fillOpacity:y.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(K)});Me.attr({index:0,j:K}),C.setSelectionFilter(Me,0,K),y.config.chart.dropShadow.enabled&&C.dropShadow(Me,y.config.chart.dropShadow,K),this.addListeners(Me,this.donutDataLabels),Mt.setAttrs(Me.node,{"data:angle":pe,"data:startAngle":H,"data:strokeWidth":this.strokeWidth,"data:value":p[K]});var Ke={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?Ke=Qe.polarToCartesian(this.centerX,this.centerY,y.globals.radialSize/1.25+y.config.plotOptions.pie.dataLabels.offset,(H+pe/2)%this.fullAngle):"donut"===this.chartType&&(Ke=Qe.polarToCartesian(this.centerX,this.centerY,(y.globals.radialSize+this.donutSize)/2+y.config.plotOptions.pie.dataLabels.offset,(H+pe/2)%this.fullAngle)),ae.add(Me);var Y=0;if(!this.initialAnim||y.globals.resized||y.globals.dataChanged?this.animBeginArr.push(0):(0==(Y=pe/this.fullAngle*y.config.chart.animations.speed)&&(Y=1),this.animDur=Y+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(Me,this.dynamicAnim&&y.globals.dataChanged?{size:this.sliceSizes[K],endAngle:J,startAngle:H,prevStartAngle:G,prevEndAngle:te,animateStartingPos:!0,i:K,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:y.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[K],endAngle:J,startAngle:H,i:K,totalItems:d.length-1,animBeginArr:this.animBeginArr,dur:Y}),y.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&Me.click(this.pieClicked.bind(this,K)),void 0!==y.globals.selectedDataPoints[0]&&y.globals.selectedDataPoints[0].indexOf(K)>-1&&this.pieClicked(K),y.config.dataLabels.enabled){var ne=Ke.x,be=Ke.y,Ie=100*pe/this.fullAngle+"%";if(0!==pe&&y.config.plotOptions.pie.dataLabels.minAngleToShowLabel<d[K]){var Je=y.config.dataLabels.formatter;void 0!==Je&&(Ie=Je(y.globals.seriesPercent[K][0],{seriesIndex:K,w:y}));var Nt=y.globals.dataLabels.style.colors[K],St=M.group({class:"apexcharts-datalabels"}),Xt=M.drawText({x:ne,y:be,text:Ie,textAnchor:"middle",fontSize:y.config.dataLabels.style.fontSize,fontFamily:y.config.dataLabels.style.fontFamily,fontWeight:y.config.dataLabels.style.fontWeight,foreColor:Nt});St.add(Xt),y.config.dataLabels.dropShadow.enabled&&C.dropShadow(Xt,y.config.dataLabels.dropShadow),Xt.node.classList.add("apexcharts-pie-label"),y.config.chart.animations.animate&&!1===y.globals.resized&&(Xt.node.classList.add("apexcharts-pie-label-delay"),Xt.node.style.animationDelay=y.config.chart.animations.speed/940+"s"),this.sliceLabels.push(St)}}}return R}},{key:"addListeners",value:function(d,p){var y=new Mt(this.ctx);d.node.addEventListener("mouseenter",y.pathMouseEnter.bind(this,d)),d.node.addEventListener("mouseleave",y.pathMouseLeave.bind(this,d)),d.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,d.node,p)),d.node.addEventListener("mousedown",y.pathMouseDown.bind(this,d)),this.donutDataLabels.total.showAlways||(d.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,d.node,p)),d.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,d.node,p)))}},{key:"animatePaths",value:function(d,p){var C=p.endAngle<p.startAngle?this.fullAngle+p.endAngle-p.startAngle:p.endAngle-p.startAngle,M=C,L=p.startAngle,R=p.startAngle;void 0!==p.prevStartAngle&&void 0!==p.prevEndAngle&&(L=p.prevEndAngle,M=p.prevEndAngle<p.prevStartAngle?this.fullAngle+p.prevEndAngle-p.prevStartAngle:p.prevEndAngle-p.prevStartAngle),p.i===this.w.config.series.length-1&&(C+R>this.fullAngle?p.endAngle=p.endAngle-(C+R):C+R<this.fullAngle&&(p.endAngle=p.endAngle+(this.fullAngle-(C+R)))),C===this.fullAngle&&(C=this.fullAngle-.01),this.animateArc(d,L,R,C,M,p)}},{key:"animateArc",value:function(d,p,y,C,M,L){var R,H=this,G=this.w,J=new On(this.ctx),te=L.size;(isNaN(p)||isNaN(M))&&(p=y,M=C,L.dur=0);var K=C,ae=y,pe=p<y?this.fullAngle+p-y:p-y;G.globals.dataChanged&&L.shouldSetPrevPaths&&L.prevEndAngle&&(R=H.getPiePath({me:H,startAngle:L.prevStartAngle,angle:L.prevEndAngle<L.prevStartAngle?this.fullAngle+L.prevEndAngle-L.prevStartAngle:L.prevEndAngle-L.prevStartAngle,size:te}),d.attr({d:R})),0!==L.dur?d.animate(L.dur,G.globals.easing,L.animBeginArr[L.i]).afterAll(function(){"pie"!==H.chartType&&"donut"!==H.chartType&&"polarArea"!==H.chartType||this.animate(G.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":H.strokeWidth}),L.i===G.config.series.length-1&&J.animationCompleted(d)}).during(function(ge){K=pe+(C-pe)*ge,L.animateStartingPos&&(K=M+(C-M)*ge,ae=p-M+(y-(p-M))*ge),R=H.getPiePath({me:H,startAngle:ae,angle:K,size:te}),d.node.setAttribute("data:pathOrig",R),d.attr({d:R})}):(R=H.getPiePath({me:H,startAngle:ae,angle:C,size:te}),L.isTrack||(G.globals.animationEnded=!0),d.node.setAttribute("data:pathOrig",R),d.attr({d:R,"stroke-width":H.strokeWidth}))}},{key:"pieClicked",value:function(d){var p,y=this.w,C=this,M=C.sliceSizes[d]+(y.config.plotOptions.pie.expandOnClick?4:0),L=y.globals.dom.Paper.select(".apexcharts-".concat(C.chartType.toLowerCase(),"-slice-").concat(d)).members[0];if("true"!==L.attr("data:pieClicked")){var R=y.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(R,function(te){te.setAttribute("data:pieClicked","false");var K=te.getAttribute("data:pathOrig");te.setAttribute("d",K)}),L.attr("data:pieClicked","true");var H=parseInt(L.attr("data:startAngle"),10),G=parseInt(L.attr("data:angle"),10);p=C.getPiePath({me:C,startAngle:H,angle:G,size:M}),360!==G&&L.plot(p)}else{L.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(L.node,this.donutDataLabels);var J=L.attr("data:pathOrig");L.attr({d:J})}}},{key:"getChangedPath",value:function(d,p){var y="";return this.dynamicAnim&&this.w.globals.dataChanged&&(y=this.getPiePath({me:this,startAngle:d,angle:p-d,size:this.size})),y}},{key:"getPiePath",value:function(d){var p=d.me,y=d.startAngle,C=d.angle,M=d.size,L=y,R=Math.PI*(L-90)/180,H=C+y;Math.ceil(H)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(H=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(H)>this.fullAngle&&(H-=this.fullAngle);var G=Math.PI*(H-90)/180,J=p.centerX+M*Math.cos(R),te=p.centerY+M*Math.sin(R),K=p.centerX+M*Math.cos(G),ae=p.centerY+M*Math.sin(G),pe=Qe.polarToCartesian(p.centerX,p.centerY,p.donutSize,H),ge=Qe.polarToCartesian(p.centerX,p.centerY,p.donutSize,L),xe=C>180?1:0,Me=["M",J,te,"A",M,M,0,xe,1,K,ae];return"donut"===p.chartType?[].concat(Me,["L",pe.x,pe.y,"A",p.donutSize,p.donutSize,0,xe,0,ge.x,ge.y,"L",J,te,"z"]).join(" "):"pie"===p.chartType||"polarArea"===p.chartType?[].concat(Me,["L",p.centerX,p.centerY,"L",J,te]).join(" "):[].concat(Me).join(" ")}},{key:"drawPolarElements",value:function(d){var p=this.w,y=new Ri(this.ctx),C=new Mt(this.ctx),M=new di(this.ctx),L=C.group(),R=C.group(),H=y.niceScale(0,Math.ceil(this.maxY),p.config.yaxis[0].tickAmount,0,!0),G=H.result.reverse(),J=H.result.length;this.maxY=H.niceMax;for(var te=p.globals.radialSize,K=te/(J-1),ae=0;ae<J-1;ae++){var pe=C.drawCircle(te);if(pe.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":p.config.plotOptions.polarArea.rings.strokeWidth,stroke:p.config.plotOptions.polarArea.rings.strokeColor}),p.config.yaxis[0].show){var ge=M.drawYAxisTexts(this.centerX,this.centerY-te+parseInt(p.config.yaxis[0].labels.style.fontSize,10)/2,ae,G[ae]);R.add(ge)}L.add(pe),te-=K}this.drawSpokes(d),d.add(L),d.add(R)}},{key:"renderInnerDataLabels",value:function(d,p){var y=this.w,C=new Mt(this.ctx),M=C.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(p.translateX?p.translateX:0,", ").concat(p.translateY?p.translateY:0,") scale(").concat(y.config.plotOptions.pie.customScale,")")}),L=d.total.show;M.node.style.opacity=p.opacity;var R,H,G=p.centerX,J=p.centerY;R=void 0===d.name.color?y.globals.colors[0]:d.name.color;var te=d.name.fontSize,K=d.name.fontFamily,ae=d.value.fontWeight;H=void 0===d.value.color?y.config.chart.foreColor:d.value.color;var pe=d.value.formatter,ge="",xe="";if(L?(R=d.total.color,te=d.total.fontSize,K=d.total.fontFamily,ae=d.total.fontWeight,xe=d.total.label,ge=d.total.formatter(y)):1===y.globals.series.length&&(ge=pe(y.globals.series[0],y),xe=y.globals.seriesNames[0]),xe&&(xe=d.name.formatter(xe,d.total.show,y)),d.name.show){var Me=C.drawText({x:G,y:J+parseFloat(d.name.offsetY),text:xe,textAnchor:"middle",foreColor:R,fontSize:te,fontWeight:ae,fontFamily:K});Me.node.classList.add("apexcharts-datalabel-label"),M.add(Me)}if(d.value.show){var ze=d.name.show?parseFloat(d.value.offsetY)+16:d.value.offsetY,Ke=C.drawText({x:G,y:J+ze,text:ge,textAnchor:"middle",foreColor:H,fontWeight:d.value.fontWeight,fontSize:d.value.fontSize,fontFamily:d.value.fontFamily});Ke.node.classList.add("apexcharts-datalabel-value"),M.add(Ke)}return M}},{key:"printInnerLabels",value:function(d,p,y,C){var M,L=this.w;C?M=void 0===d.name.color?L.globals.colors[parseInt(C.parentNode.getAttribute("rel"),10)-1]:d.name.color:L.globals.series.length>1&&d.total.show&&(M=d.total.color);var R=L.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),H=L.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");y=(0,d.value.formatter)(y,L),C||"function"!=typeof d.total.formatter||(y=d.total.formatter(L)),p=d.name.formatter(p,p===d.total.label,L),null!==R&&(R.textContent=p),null!==H&&(H.textContent=y),null!==R&&(R.style.fill=M)}},{key:"printDataLabelsInner",value:function(d,p){var y=this.w,C=d.getAttribute("data:value"),M=y.globals.seriesNames[parseInt(d.parentNode.getAttribute("rel"),10)-1];y.globals.series.length>1&&this.printInnerLabels(p,M,C,d);var L=y.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==L&&(L.style.opacity=1)}},{key:"drawSpokes",value:function(d){var p=this,y=this.w,C=new Mt(this.ctx),M=y.config.plotOptions.polarArea.spokes;if(0!==M.strokeWidth){for(var L=[],R=360/y.globals.series.length,H=0;H<y.globals.series.length;H++)L.push(Qe.polarToCartesian(this.centerX,this.centerY,y.globals.radialSize,y.config.plotOptions.pie.startAngle+R*H));L.forEach(function(G,J){var te=C.drawLine(G.x,G.y,p.centerX,p.centerY,Array.isArray(M.connectorColors)?M.connectorColors[J]:M.connectorColors);d.add(te)})}}},{key:"revertDataLabelsInner",value:function(d,p,y){var C=this,M=this.w,L=M.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),R=!1,H=M.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),G=function(K){var ae=K.makeSliceOut,pe=K.printLabel;Array.prototype.forEach.call(H,function(ge){"true"===ge.getAttribute("data:pieClicked")&&(ae&&(R=!0),pe&&C.printDataLabelsInner(ge,p))})};if(G({makeSliceOut:!0,printLabel:!1}),p.total.show&&M.globals.series.length>1)R&&!p.total.showAlways?G({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(p,p.total.label,p.total.formatter(M));else if(G({makeSliceOut:!1,printLabel:!0}),!R)if(M.globals.selectedDataPoints.length&&M.globals.series.length>1)if(M.globals.selectedDataPoints[0].length>0){var J=M.globals.selectedDataPoints[0],te=M.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(J));this.printDataLabelsInner(te,p)}else L&&M.globals.selectedDataPoints.length&&0===M.globals.selectedDataPoints[0].length&&(L.style.opacity=0);else L&&M.globals.series.length>1&&(L.style.opacity=0)}}]),ve}(),sr=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var p=this.w;this.graphics=new Mt(this.ctx),this.lineColorArr=void 0!==p.globals.stroke.colors?p.globals.stroke.colors:p.globals.colors,this.defaultSize=p.globals.svgHeight<p.globals.svgWidth?p.globals.gridHeight+1.5*p.globals.goldenPadding:p.globals.gridWidth,this.isLog=p.config.yaxis[0].logarithmic,this.coreUtils=new Vn(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(p.globals.maxY,0):p.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):p.globals.minY,this.polygons=p.config.plotOptions.radar.polygons,this.strokeWidth=p.config.stroke.show?p.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-p.config.chart.dropShadow.blur,p.config.xaxis.labels.show&&(this.size=this.size-p.globals.xAxisLabelsWidth/1.75),void 0!==p.config.plotOptions.radar.size&&(this.size=p.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return gt(ve,[{key:"draw",value:function(d){var p=this,y=this.w,C=new Gt(this.ctx),M=[],L=new fn(this.ctx);d.length&&(this.dataPointsLen=d[y.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var J=y.globals.gridHeight/2+y.config.plotOptions.radar.offsetY,te=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(y.globals.gridWidth/2+y.config.plotOptions.radar.offsetX||0,", ").concat(J||0,")")}),K=[],ae=null,pe=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),d.forEach(function(xe,Me){var ze=xe.length===y.globals.dataPoints,Ke=p.graphics.group().attr({class:"apexcharts-series","data:longestSeries":ze,seriesName:Qe.escapeString(y.globals.seriesNames[Me]),rel:Me+1,"data:realIndex":Me});p.dataRadiusOfPercent[Me]=[],p.dataRadius[Me]=[],p.angleArr[Me]=[],xe.forEach(function(hn,Kn){var Bi=Math.abs(p.maxValue-p.minValue);hn+=Math.abs(p.minValue),p.isLog&&(hn=p.coreUtils.getLogVal(hn,0)),p.dataRadiusOfPercent[Me][Kn]=hn/Bi,p.dataRadius[Me][Kn]=p.dataRadiusOfPercent[Me][Kn]*p.size,p.angleArr[Me][Kn]=Kn*p.disAngle}),K=p.getDataPointsPos(p.dataRadius[Me],p.angleArr[Me]);var Y=p.createPaths(K,{x:0,y:0});ae=p.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),pe=p.graphics.group({class:"apexcharts-datalabels","data:realIndex":Me}),y.globals.delayedElements.push({el:ae.node,index:Me});var ne={i:Me,realIndex:Me,animationDelay:Me,initialSpeed:y.config.chart.animations.speed,dataChangeSpeed:y.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:y.globals.stroke.colors[Me],strokeLineCap:y.config.stroke.lineCap},be=null;y.globals.previousPaths.length>0&&(be=p.getPreviousPath(Me));for(var Ie=0;Ie<Y.linePathsTo.length;Ie++){var Je=p.graphics.renderPaths(Be(Be({},ne),{},{pathFrom:null===be?Y.linePathsFrom[Ie]:be,pathTo:Y.linePathsTo[Ie],strokeWidth:Array.isArray(p.strokeWidth)?p.strokeWidth[Me]:p.strokeWidth,fill:"none",drawShadow:!1}));Ke.add(Je);var Nt=C.fillPath({seriesNumber:Me}),St=p.graphics.renderPaths(Be(Be({},ne),{},{pathFrom:null===be?Y.areaPathsFrom[Ie]:be,pathTo:Y.areaPathsTo[Ie],strokeWidth:0,fill:Nt,drawShadow:!1}));y.config.chart.dropShadow.enabled&&new dn(p.ctx).dropShadow(St,Object.assign({},y.config.chart.dropShadow,{noUserSpaceOnUse:!0}),Me),Ke.add(St)}xe.forEach(function(hn,Kn){var Bi=new $t(p.ctx).getMarkerConfig("apexcharts-marker",Me,Kn),zn=p.graphics.drawMarker(K[Kn].x,K[Kn].y,Bi);zn.attr("rel",Kn),zn.attr("j",Kn),zn.attr("index",Me),zn.node.setAttribute("default-marker-size",Bi.pSize);var ti=p.graphics.group({class:"apexcharts-series-markers"});ti&&ti.add(zn),ae.add(ti),Ke.add(ae);var ar=y.config.dataLabels;if(ar.enabled){var vo=ar.formatter(y.globals.series[Me][Kn],{seriesIndex:Me,dataPointIndex:Kn,w:y});L.plotDataLabelsText({x:K[Kn].x,y:K[Kn].y,text:vo,textAnchor:"middle",i:Me,j:Me,parent:pe,offsetCorrection:!1,dataLabelsConfig:Be({},ar)})}Ke.add(pe)}),M.push(Ke)}),this.drawPolygons({parent:te}),y.config.xaxis.labels.show){var ge=this.drawXAxisTexts();te.add(ge)}return M.forEach(function(xe){te.add(xe)}),te.add(this.yaxisLabels),te}},{key:"drawPolygons",value:function(d){for(var p=this,y=this.w,C=d.parent,M=new di(this.ctx),L=y.globals.yAxisScale[0].result.reverse(),R=L.length,H=[],G=this.size/(R-1),J=0;J<R;J++)H[J]=G*J;H.reverse();var te=[],K=[];H.forEach(function(ae,pe){var ge=Qe.getPolygonPos(ae,p.dataPointsLen),xe="";ge.forEach(function(Me,ze){if(0===pe){var Ke=p.graphics.drawLine(Me.x,Me.y,0,0,Array.isArray(p.polygons.connectorColors)?p.polygons.connectorColors[ze]:p.polygons.connectorColors);K.push(Ke)}0===ze&&p.yaxisLabelsTextsPos.push({x:Me.x,y:Me.y}),xe+=Me.x+","+Me.y+" "}),te.push(xe)}),te.forEach(function(ae,pe){var ge=p.polygons.strokeColors,xe=p.polygons.strokeWidth,Me=p.graphics.drawPolygon(ae,Array.isArray(ge)?ge[pe]:ge,Array.isArray(xe)?xe[pe]:xe,y.globals.radarPolygons.fill.colors[pe]);C.add(Me)}),K.forEach(function(ae){C.add(ae)}),y.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(ae,pe){var ge=M.drawYAxisTexts(ae.x,ae.y,pe,L[pe]);p.yaxisLabels.add(ge)})}},{key:"drawXAxisTexts",value:function(){var d=this,p=this.w,y=p.config.xaxis.labels,C=this.graphics.group({class:"apexcharts-xaxis"}),M=Qe.getPolygonPos(this.size,this.dataPointsLen);return p.globals.labels.forEach(function(L,R){var H=p.config.xaxis.labels.formatter,G=new fn(d.ctx);if(M[R]){var J=d.getTextPos(M[R],d.size),te=H(L,{seriesIndex:-1,dataPointIndex:R,w:p});G.plotDataLabelsText({x:J.newX,y:J.newY,text:te,textAnchor:J.textAnchor,i:R,j:R,parent:C,color:Array.isArray(y.style.colors)&&y.style.colors[R]?y.style.colors[R]:"#a8a8a8",dataLabelsConfig:Be({textAnchor:J.textAnchor,dropShadow:{enabled:!1}},y),offsetCorrection:!1})}}),C}},{key:"createPaths",value:function(d,p){var y=this,C=[],M=[],L=[],R=[];if(d.length){M=[this.graphics.move(p.x,p.y)],R=[this.graphics.move(p.x,p.y)];var H=this.graphics.move(d[0].x,d[0].y),G=this.graphics.move(d[0].x,d[0].y);d.forEach(function(J,te){H+=y.graphics.line(J.x,J.y),G+=y.graphics.line(J.x,J.y),te===d.length-1&&(H+="Z",G+="Z")}),C.push(H),L.push(G)}return{linePathsFrom:M,linePathsTo:C,areaPathsFrom:R,areaPathsTo:L}}},{key:"getTextPos",value:function(d,p){var y="middle",C=d.x,M=d.y;return Math.abs(d.x)>=10?d.x>0?(y="start",C+=10):d.x<0&&(y="end",C-=10):y="middle",Math.abs(d.y)>=p-10&&(d.y<0?M-=10:d.y>0&&(M+=10)),{textAnchor:y,newX:C,newY:M}}},{key:"getPreviousPath",value:function(d){for(var p=this.w,y=null,C=0;C<p.globals.previousPaths.length;C++){var M=p.globals.previousPaths[C];M.paths.length>0&&parseInt(M.realIndex,10)===parseInt(d,10)&&void 0!==p.globals.previousPaths[C].paths[0]&&(y=p.globals.previousPaths[C].paths[0].d)}return y}},{key:"getDataPointsPos",value:function(d,p){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;d=d||[],p=p||[];for(var C=[],M=0;M<y;M++){var L={};L.x=d[M]*Math.sin(p[M]),L.y=-d[M]*Math.cos(p[M]),C.push(L)}return C}}]),ve}(),ir=function(ve){je(p,Oi);var d=Ct(p);function p(y){var C;Ee(this,p),(C=d.call(this,y)).ctx=y,C.w=y.w,C.animBeginArr=[0],C.animDur=0;var M=C.w;return C.startAngle=M.config.plotOptions.radialBar.startAngle,C.endAngle=M.config.plotOptions.radialBar.endAngle,C.totalAngle=Math.abs(M.config.plotOptions.radialBar.endAngle-M.config.plotOptions.radialBar.startAngle),C.trackStartAngle=M.config.plotOptions.radialBar.track.startAngle,C.trackEndAngle=M.config.plotOptions.radialBar.track.endAngle,C.radialDataLabels=M.config.plotOptions.radialBar.dataLabels,C.trackStartAngle||(C.trackStartAngle=C.startAngle),C.trackEndAngle||(C.trackEndAngle=C.endAngle),360===C.endAngle&&(C.endAngle=359.99),C.margin=parseInt(M.config.plotOptions.radialBar.track.margin,10),C}return gt(p,[{key:"draw",value:function(y){var C=this.w,M=new Mt(this.ctx),L=M.group({class:"apexcharts-radialbar"});if(C.globals.noData)return L;var R=M.group(),H=this.defaultSize/2,G=C.globals.gridWidth/2,J=this.defaultSize/2.05;C.config.chart.sparkline.enabled||(J=J-C.config.stroke.width-C.config.chart.dropShadow.blur);var te=C.globals.fill.colors;if(C.config.plotOptions.radialBar.track.show){var K=this.drawTracks({size:J,centerX:G,centerY:H,colorArr:te,series:y});R.add(K)}var ae=this.drawArcs({size:J,centerX:G,centerY:H,colorArr:te,series:y}),pe=360;C.config.plotOptions.radialBar.startAngle<0&&(pe=this.totalAngle);var ge=(360-pe)/360;if(C.globals.radialSize=J-J*ge,this.radialDataLabels.value.show){var xe=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);C.globals.radialSize+=xe*ge}return R.add(ae.g),"front"===C.config.plotOptions.radialBar.hollow.position&&(ae.g.add(ae.elHollow),ae.dataLabels&&ae.g.add(ae.dataLabels)),L.add(R),L}},{key:"drawTracks",value:function(y){var C=this.w,M=new Mt(this.ctx),L=M.group({class:"apexcharts-tracks"}),R=new dn(this.ctx),H=new Gt(this.ctx),G=this.getStrokeWidth(y);y.size=y.size-G/2;for(var J=0;J<y.series.length;J++){var te=M.group({class:"apexcharts-radialbar-track apexcharts-track"});L.add(te),te.attr({rel:J+1}),y.size=y.size-G-this.margin;var K=C.config.plotOptions.radialBar.track,ae=H.fillPath({seriesNumber:0,size:y.size,fillColors:Array.isArray(K.background)?K.background[J]:K.background,solid:!0}),pe=this.trackStartAngle,ge=this.trackEndAngle;Math.abs(ge)+Math.abs(pe)>=360&&(ge=360-Math.abs(this.startAngle)-.1);var xe=M.drawPath({d:"",stroke:ae,strokeWidth:G*parseInt(K.strokeWidth,10)/100,fill:"none",strokeOpacity:K.opacity,classes:"apexcharts-radialbar-area"});K.dropShadow.enabled&&R.dropShadow(xe,K.dropShadow),te.add(xe),xe.attr("id","apexcharts-radialbarTrack-"+J),this.animatePaths(xe,{centerX:y.centerX,centerY:y.centerY,endAngle:ge,startAngle:pe,size:y.size,i:J,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:C.globals.easing})}return L}},{key:"drawArcs",value:function(y){var C=this.w,M=new Mt(this.ctx),L=new Gt(this.ctx),R=new dn(this.ctx),H=M.group(),G=this.getStrokeWidth(y);y.size=y.size-G/2;var J=C.config.plotOptions.radialBar.hollow.background,te=y.size-G*y.series.length-this.margin*y.series.length-G*parseInt(C.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,K=te-C.config.plotOptions.radialBar.hollow.margin;void 0!==C.config.plotOptions.radialBar.hollow.image&&(J=this.drawHollowImage(y,H,te,J));var ae=this.drawHollow({size:K,centerX:y.centerX,centerY:y.centerY,fill:J||"transparent"});C.config.plotOptions.radialBar.hollow.dropShadow.enabled&&R.dropShadow(ae,C.config.plotOptions.radialBar.hollow.dropShadow);var ge=1;!this.radialDataLabels.total.show&&C.globals.series.length>1&&(ge=0);var xe=null;this.radialDataLabels.show&&(xe=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:te,centerX:y.centerX,centerY:y.centerY,opacity:ge})),"back"===C.config.plotOptions.radialBar.hollow.position&&(H.add(ae),xe&&H.add(xe));var Me=!1;C.config.plotOptions.radialBar.inverseOrder&&(Me=!0);for(var ze=Me?y.series.length-1:0;Me?ze>=0:ze<y.series.length;Me?ze--:ze++){var Ke=M.group({class:"apexcharts-series apexcharts-radial-series",seriesName:Qe.escapeString(C.globals.seriesNames[ze])});H.add(Ke),Ke.attr({rel:ze+1,"data:realIndex":ze}),this.ctx.series.addCollapsedClassToSeries(Ke,ze),y.size=y.size-G-this.margin;var Y=L.fillPath({seriesNumber:ze,size:y.size,value:y.series[ze]}),ne=this.startAngle,be=void 0,Ie=Qe.negToZero(y.series[ze]>100?100:y.series[ze])/100,Je=Math.round(this.totalAngle*Ie)+this.startAngle,Nt=void 0;C.globals.dataChanged&&(be=this.startAngle,Nt=Math.round(this.totalAngle*Qe.negToZero(C.globals.previousPaths[ze])/100)+be),Math.abs(Je)+Math.abs(ne)>=360&&(Je-=.01),Math.abs(Nt)+Math.abs(be)>=360&&(Nt-=.01);var St=Je-ne,Xt=Array.isArray(C.config.stroke.dashArray)?C.config.stroke.dashArray[ze]:C.config.stroke.dashArray,gn=M.drawPath({d:"",stroke:Y,strokeWidth:G,fill:"none",fillOpacity:C.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+ze,strokeDashArray:Xt});Mt.setAttrs(gn.node,{"data:angle":St,"data:value":y.series[ze]}),C.config.chart.dropShadow.enabled&&R.dropShadow(gn,C.config.chart.dropShadow,ze),R.setSelectionFilter(gn,0,ze),this.addListeners(gn,this.radialDataLabels),Ke.add(gn),gn.attr({index:0,j:ze});var Kn=0;!this.initialAnim||C.globals.resized||C.globals.dataChanged||(this.animDur=(Kn=(Je-ne)/360*C.config.chart.animations.speed)/(1.2*y.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),C.globals.dataChanged&&(this.animDur=(Kn=(Je-ne)/360*C.config.chart.animations.dynamicAnimation.speed)/(1.2*y.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(gn,{centerX:y.centerX,centerY:y.centerY,endAngle:Je,startAngle:ne,prevEndAngle:Nt,prevStartAngle:be,size:y.size,i:ze,totalItems:2,animBeginArr:this.animBeginArr,dur:Kn,shouldSetPrevPaths:!0,easing:C.globals.easing})}return{g:H,elHollow:ae,dataLabels:xe}}},{key:"drawHollow",value:function(y){var C=new Mt(this.ctx).drawCircle(2*y.size);return C.attr({class:"apexcharts-radialbar-hollow",cx:y.centerX,cy:y.centerY,r:y.size,fill:y.fill}),C}},{key:"drawHollowImage",value:function(y,C,M,L){var R=this.w,H=new Gt(this.ctx),G=Qe.randomId(),J=R.config.plotOptions.radialBar.hollow.image;if(R.config.plotOptions.radialBar.hollow.imageClipped)H.clippedImgArea({width:M,height:M,image:J,patternID:"pattern".concat(R.globals.cuid).concat(G)}),L="url(#pattern".concat(R.globals.cuid).concat(G,")");else{var te=R.config.plotOptions.radialBar.hollow.imageWidth,K=R.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===te&&void 0===K){var ae=R.globals.dom.Paper.image(J).loaded(function(ge){this.move(y.centerX-ge.width/2+R.config.plotOptions.radialBar.hollow.imageOffsetX,y.centerY-ge.height/2+R.config.plotOptions.radialBar.hollow.imageOffsetY)});C.add(ae)}else{var pe=R.globals.dom.Paper.image(J).loaded(function(ge){this.move(y.centerX-te/2+R.config.plotOptions.radialBar.hollow.imageOffsetX,y.centerY-K/2+R.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(te,K)});C.add(pe)}}return L}},{key:"getStrokeWidth",value:function(y){return y.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(y.series.length+1)-this.margin}}]),p}(),Ge=function(){function ve(d){Ee(this,ve),this.w=d.w,this.lineCtx=d}return gt(ve,[{key:"sameValueSeriesFix",value:function(d,p){var y=this.w;if("line"===y.config.chart.type&&("gradient"===y.config.fill.type||"gradient"===y.config.fill.type[d])&&new Vn(this.lineCtx.ctx,y).seriesHaveSameValues(d)){var C=p[d].slice();C[C.length-1]=C[C.length-1]+1e-6,p[d]=C}return p}},{key:"calculatePoints",value:function(d){var p=d.series,C=d.x,M=d.y,L=d.i,R=d.j,H=d.prevY,G=this.w,J=[],te=[];if(0===R){var K=this.lineCtx.categoryAxisCorrection+G.config.markers.offsetX;G.globals.isXNumeric&&(K=(G.globals.seriesX[d.realIndex][0]-G.globals.minX)/this.lineCtx.xRatio+G.config.markers.offsetX),J.push(K),te.push(Qe.isNumber(p[L][0])?H+G.config.markers.offsetY:null),J.push(C+G.config.markers.offsetX),te.push(Qe.isNumber(p[L][R+1])?M+G.config.markers.offsetY:null)}else J.push(C+G.config.markers.offsetX),te.push(Qe.isNumber(p[L][R+1])?M+G.config.markers.offsetY:null);return{x:J,y:te}}},{key:"checkPreviousPaths",value:function(d){for(var p=d.pathFromLine,y=d.pathFromArea,C=d.realIndex,M=this.w,L=0;L<M.globals.previousPaths.length;L++){var R=M.globals.previousPaths[L];("line"===R.type||"area"===R.type)&&R.paths.length>0&&parseInt(R.realIndex,10)===parseInt(C,10)&&("line"===R.type?(this.lineCtx.appendPathFrom=!1,p=M.globals.previousPaths[L].paths[0].d):"area"===R.type&&(this.lineCtx.appendPathFrom=!1,y=M.globals.previousPaths[L].paths[0].d,M.config.stroke.show&&M.globals.previousPaths[L].paths[1]&&(p=M.globals.previousPaths[L].paths[1].d)))}return{pathFromLine:p,pathFromArea:y}}},{key:"determineFirstPrevY",value:function(d){var p=d.i,y=d.series,C=d.prevY,M=d.lineYPosition,L=this.w;if(void 0!==y[p][0])C=(M=L.config.chart.stacked&&p>0?this.lineCtx.prevSeriesY[p-1][0]:this.lineCtx.zeroY)-y[p][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?y[p][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(L.config.chart.stacked&&p>0&&void 0===y[p][0])for(var R=p-1;R>=0;R--)if(null!=y[R][0]){C=M=this.lineCtx.prevSeriesY[R][0];break}return{prevY:C,lineYPosition:M}}}]),ve}(),we=function(){function ve(d,p,y){Ee(this,ve),this.ctx=d,this.w=d.w,this.xyRatios=p,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||y,this.scatter=new Ht(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Ge(this),this.markers=new $t(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return gt(ve,[{key:"draw",value:function(d,p,y){var C=this.w,M=new Mt(this.ctx),L=C.globals.comboCharts?p:C.config.chart.type,R=M.group({class:"apexcharts-".concat(L,"-series apexcharts-plot-series")}),H=new Vn(this.ctx,C);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,d=H.getLogSeries(d),this.yRatio=H.getLogYRatios(this.yRatio);for(var G=[],J=0;J<d.length;J++){d=this.lineHelpers.sameValueSeriesFix(J,d);var te=C.globals.comboCharts?y[J]:J;this._initSerieVariables(d,J,te);var K=[],ae=[],pe=C.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,te),C.globals.isXNumeric&&C.globals.seriesX.length>0&&(pe=(C.globals.seriesX[te][0]-C.globals.minX)/this.xRatio),ae.push(pe);var ge,xe=pe,Me=xe,ze=this.zeroY;ze=this.lineHelpers.determineFirstPrevY({i:J,series:d,prevY:ze,lineYPosition:0}).prevY,K.push(ze),ge=ze;var Ke=this._calculatePathsFrom({series:d,i:J,realIndex:te,prevX:Me,prevY:ze}),Y=this._iterateOverDataPoints({series:d,realIndex:te,i:J,x:pe,y:1,pX:xe,pY:ge,pathsFrom:Ke,linePaths:[],areaPaths:[],seriesIndex:y,lineYPosition:0,xArrj:ae,yArrj:K});this._handlePaths({type:L,realIndex:te,i:J,paths:Y}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),G.push(this.elSeries)}if(C.config.chart.stacked)for(var ne=G.length;ne>0;ne--)R.add(G[ne-1]);else for(var be=0;be<G.length;be++)R.add(G[be]);return R}},{key:"_initSerieVariables",value:function(d,p,y){var C=this.w,M=new Mt(this.ctx);this.xDivision=C.globals.gridWidth/(C.globals.dataPoints-("on"===C.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(C.config.stroke.width)?C.config.stroke.width[y]:C.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=y),this.isReversed=C.config.yaxis[this.yaxisIndex]&&C.config.yaxis[this.yaxisIndex].reversed,this.zeroY=C.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?C.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>C.globals.gridHeight||"end"===C.config.plotOptions.area.fillTo)&&(this.areaBottomY=C.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=M.group({class:"apexcharts-series",seriesName:Qe.escapeString(C.globals.seriesNames[y])}),this.elPointsMain=M.group({class:"apexcharts-series-markers-wrap","data:realIndex":y}),this.elDataLabelsWrap=M.group({class:"apexcharts-datalabels","data:realIndex":y}),this.elSeries.attr({"data:longestSeries":d[p].length===C.globals.dataPoints,rel:p+1,"data:realIndex":y}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(d){var p,y,C,M,L=d.series,R=d.i,H=d.realIndex,G=d.prevX,J=d.prevY,te=this.w,K=new Mt(this.ctx);if(null===L[R][0]){for(var ae=0;ae<L[R].length;ae++)if(null!==L[R][ae]){p=K.move(G=this.xDivision*ae,J=this.zeroY-L[R][ae]/this.yRatio[this.yaxisIndex]),y=K.move(G,this.areaBottomY);break}}else p=K.move(G,J),y=K.move(G,this.areaBottomY)+K.line(G,J);if(C=K.move(-1,this.zeroY)+K.line(-1,this.zeroY),M=K.move(-1,this.zeroY)+K.line(-1,this.zeroY),te.globals.previousPaths.length>0){var pe=this.lineHelpers.checkPreviousPaths({pathFromLine:C,pathFromArea:M,realIndex:H});C=pe.pathFromLine,M=pe.pathFromArea}return{prevX:G,prevY:J,linePath:p,areaPath:y,pathFromLine:C,pathFromArea:M}}},{key:"_handlePaths",value:function(d){var p=d.type,y=d.realIndex,C=d.i,M=d.paths,L=this.w,R=new Mt(this.ctx),H=new Gt(this.ctx);this.prevSeriesY.push(M.yArrj),L.globals.seriesXvalues[y]=M.xArrj,L.globals.seriesYvalues[y]=M.yArrj;var G=L.config.forecastDataPoints;if(G.count>0){var J=L.globals.seriesXvalues[y][L.globals.seriesXvalues[y].length-G.count-1],te=R.drawRect(J,0,L.globals.gridWidth,L.globals.gridHeight,0);L.globals.dom.elForecastMask.appendChild(te.node);var K=R.drawRect(0,0,J,L.globals.gridHeight,0);L.globals.dom.elNonForecastMask.appendChild(K.node)}this.pointsChart||L.globals.delayedElements.push({el:this.elPointsMain.node,index:y});var ae={i:C,realIndex:y,animationDelay:C,initialSpeed:L.config.chart.animations.speed,dataChangeSpeed:L.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(p)};if("area"===p)for(var pe=H.fillPath({seriesNumber:y}),ge=0;ge<M.areaPaths.length;ge++){var xe=R.renderPaths(Be(Be({},ae),{},{pathFrom:M.pathFromArea,pathTo:M.areaPaths[ge],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:pe}));this.elSeries.add(xe)}if(L.config.stroke.show&&!this.pointsChart){var Me;Me="line"===p?H.fillPath({seriesNumber:y,i:C}):L.globals.stroke.colors[y];for(var ze=0;ze<M.linePaths.length;ze++){var Ke=Be(Be({},ae),{},{pathFrom:M.pathFromLine,pathTo:M.linePaths[ze],stroke:Me,strokeWidth:this.strokeWidth,strokeLineCap:L.config.stroke.lineCap,fill:"none"}),Y=R.renderPaths(Ke);if(this.elSeries.add(Y),G.count>0){var ne=R.renderPaths(Ke);ne.node.setAttribute("stroke-dasharray",G.dashArray),G.strokeWidth&&ne.node.setAttribute("stroke-width",G.strokeWidth),this.elSeries.add(ne),ne.attr("clip-path","url(#forecastMask".concat(L.globals.cuid,")")),Y.attr("clip-path","url(#nonForecastMask".concat(L.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(d){for(var p=d.series,y=d.realIndex,C=d.i,M=d.x,L=d.y,R=d.pX,H=d.pY,G=d.pathsFrom,J=d.linePaths,te=d.areaPaths,K=d.seriesIndex,ae=d.lineYPosition,pe=d.xArrj,ge=d.yArrj,xe=this.w,Me=new Mt(this.ctx),ze=this.yRatio,Ke=G.prevY,Y=G.linePath,ne=G.areaPath,be=G.pathFromLine,Ie=G.pathFromArea,Je=Qe.isNumber(xe.globals.minYArr[y])?xe.globals.minYArr[y]:xe.globals.minY,Nt=xe.globals.dataPoints>1?xe.globals.dataPoints-1:xe.globals.dataPoints,St=0;St<Nt;St++){var Xt=null==p[C][St+1];if(xe.globals.isXNumeric){var gn=xe.globals.seriesX[y][St+1];void 0===xe.globals.seriesX[y][St+1]&&(gn=xe.globals.seriesX[y][Nt-1]),M=(gn-xe.globals.minX)/this.xRatio}else M+=this.xDivision;ae=xe.config.chart.stacked&&C>0&&xe.globals.collapsedSeries.length<xe.config.series.length-1?this.prevSeriesY[function(Bi){for(var zn=Bi,ti=0;ti<xe.globals.series.length;ti++)if(xe.globals.collapsedSeriesIndices.indexOf(Bi)>-1){zn--;break}return zn>=0?zn:0}(C-1)][St+1]:this.zeroY,L=Xt?ae-Je/ze[this.yaxisIndex]+2*(this.isReversed?Je/ze[this.yaxisIndex]:0):ae-p[C][St+1]/ze[this.yaxisIndex]+2*(this.isReversed?p[C][St+1]/ze[this.yaxisIndex]:0),pe.push(M),ge.push(L);var hn=this.lineHelpers.calculatePoints({series:p,x:M,y:L,realIndex:y,i:C,j:St,prevY:Ke}),Kn=this._createPaths({series:p,i:C,realIndex:y,j:St,x:M,y:L,pX:R,pY:H,linePath:Y,areaPath:ne,linePaths:J,areaPaths:te,seriesIndex:K});te=Kn.areaPaths,J=Kn.linePaths,R=Kn.pX,H=Kn.pY,ne=Kn.areaPath,Y=Kn.linePath,this.appendPathFrom&&(be+=Me.line(M,this.zeroY),Ie+=Me.line(M,this.zeroY)),this.handleNullDataPoints(p,hn,C,St,y),this._handleMarkersAndLabels({pointsPos:hn,series:p,x:M,y:L,prevY:Ke,i:C,j:St,realIndex:y})}return{yArrj:ge,xArrj:pe,pathFromArea:Ie,areaPaths:te,pathFromLine:be,linePaths:J}}},{key:"_handleMarkersAndLabels",value:function(d){var p=d.pointsPos,y=d.i,C=d.j,M=d.realIndex,L=this.w,R=new fn(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,C,{realIndex:M,pointsPos:p,zRatio:this.zRatio,elParent:this.elPointsMain});else{L.globals.series[y].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var H=this.markers.plotChartMarkers(p,M,C+1);null!==H&&this.elPointsMain.add(H)}var G=R.drawDataLabel(p,M,C+1,null);null!==G&&this.elDataLabelsWrap.add(G)}},{key:"_createPaths",value:function(d){var p=d.series,y=d.i,C=d.realIndex,M=d.j,L=d.x,R=d.y,H=d.pX,G=d.pY,J=d.linePath,te=d.areaPath,K=d.linePaths,ae=d.areaPaths,pe=d.seriesIndex,ge=this.w,xe=new Mt(this.ctx),Me=ge.config.stroke.curve,ze=this.areaBottomY;if(Array.isArray(ge.config.stroke.curve)&&(Me=Array.isArray(pe)?ge.config.stroke.curve[pe[y]]:ge.config.stroke.curve[y]),"smooth"===Me){var Ke=.35*(L-H);ge.globals.hasNullValues?(null!==p[y][M]&&(null!==p[y][M+1]?(J=xe.move(H,G)+xe.curve(H+Ke,G,L-Ke,R,L+1,R),te=xe.move(H+1,G)+xe.curve(H+Ke,G,L-Ke,R,L+1,R)+xe.line(L,ze)+xe.line(H,ze)+"z"):(J=xe.move(H,G),te=xe.move(H,G)+"z")),K.push(J),ae.push(te)):(J+=xe.curve(H+Ke,G,L-Ke,R,L,R),te+=xe.curve(H+Ke,G,L-Ke,R,L,R)),H=L,G=R,M===p[y].length-2&&(te=te+xe.curve(H,G,L,R,L,ze)+xe.move(L,R)+"z",ge.globals.hasNullValues||(K.push(J),ae.push(te)))}else null===p[y][M+1]&&(J+=xe.move(L,R),te=te+xe.line(ge.globals.isXNumeric?(ge.globals.seriesX[C][M]-ge.globals.minX)/this.xRatio:L-this.xDivision,ze)+xe.move(L,R)+"z"),null===p[y][M]&&(J+=xe.move(L,R),te+=xe.move(L,ze)),"stepline"===Me?(J=J+xe.line(L,null,"H")+xe.line(null,R,"V"),te=te+xe.line(L,null,"H")+xe.line(null,R,"V")):"straight"===Me&&(J+=xe.line(L,R),te+=xe.line(L,R)),M===p[y].length-2&&(te=te+xe.line(L,ze)+xe.move(L,R)+"z",K.push(J),ae.push(te));return{linePaths:K,areaPaths:ae,pX:H,pY:G,linePath:J,areaPath:te}}},{key:"handleNullDataPoints",value:function(d,p,y,C,M){var L=this.w;if(null===d[y][C]&&L.config.markers.showNullDataPoints||1===d[y].length){var R=this.markers.plotChartMarkers(p,M,C+1,this.strokeWidth-L.config.markers.strokeWidth/2,!0);null!==R&&this.elPointsMain.add(R)}}}]),ve}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function ve(R,H,G,J){this.xoffset=R,this.yoffset=H,this.height=J,this.width=G,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(te){var K,ae=[],pe=this.xoffset,ge=this.yoffset,xe=M(te)/this.height,Me=M(te)/this.width;if(this.width>=this.height)for(K=0;K<te.length;K++)ae.push([pe,ge,pe+xe,ge+te[K]/xe]),ge+=te[K]/xe;else for(K=0;K<te.length;K++)ae.push([pe,ge,pe+te[K]/Me,ge+Me]),pe+=te[K]/Me;return ae},this.cutArea=function(te){var K;if(this.width>=this.height){var ae=te/this.height;K=new ve(this.xoffset+ae,this.yoffset,this.width-ae,this.height)}else{var ge=te/this.width;K=new ve(this.xoffset,this.yoffset+ge,this.width,this.height-ge)}return K}}function d(R,H,G,J,te){return J=void 0===J?0:J,te=void 0===te?0:te,function(K){var ae,pe,ge=[];for(ae=0;ae<K.length;ae++)for(pe=0;pe<K[ae].length;pe++)ge.push(K[ae][pe]);return ge}(p(function(K,ae){var pe,ge=[],xe=ae/M(K);for(pe=0;pe<K.length;pe++)ge[pe]=K[pe]*xe;return ge}(R,H*G),[],new ve(J,te,H,G),[]))}function p(R,H,G,J){var te,K,ae,pe,ge,xe,Me;if(0!==R.length)return te=G.shortestEdge(),ge=K=R[0],xe=te,0===(pe=H).length||((Me=pe.slice()).push(ge),y(pe,xe)>=y(Me,xe))?(H.push(K),p(R.slice(1),H,G,J)):(ae=G.cutArea(M(H),J),J.push(G.getCoordinates(H)),p(R,[],ae,J)),J;J.push(G.getCoordinates(H))}function y(R,H){var G=Math.min.apply(Math,R),J=Math.max.apply(Math,R),te=M(R);return Math.max(Math.pow(H,2)*J/Math.pow(te,2),Math.pow(te,2)/(Math.pow(H,2)*G))}function C(R){return R&&R.constructor===Array}function M(R){var H,G=0;for(H=0;H<R.length;H++)G+=R[H];return G}function L(R){var H,G=0;if(C(R[0]))for(H=0;H<R.length;H++)G+=L(R[H]);else G=M(R);return G}return function R(H,G,J,te,K){te=void 0===te?0:te,K=void 0===K?0:K;var ae,pe,ge=[],xe=[];if(C(H[0])){for(pe=0;pe<H.length;pe++)ge[pe]=L(H[pe]);for(ae=d(ge,G,J,te,K),pe=0;pe<H.length;pe++)xe.push(R(H[pe],ae[pe][2]-ae[pe][0],ae[pe][3]-ae[pe][1],ae[pe][0],ae[pe][1]))}else xe=d(H,G,J,te,K);return xe}}();var De,qe,it=function(){function ve(d,p){Ee(this,ve),this.ctx=d,this.w=d.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Lt(d),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return gt(ve,[{key:"draw",value:function(d){var p=this,y=this.w,C=new Mt(this.ctx),M=new Gt(this.ctx),L=C.group({class:"apexcharts-treemap"});if(y.globals.noData)return L;var R=[];return d.forEach(function(H){var G=H.map(function(J){return Math.abs(J)});R.push(G)}),this.negRange=this.helpers.checkColorRange(),y.config.series.forEach(function(H,G){H.data.forEach(function(J){Array.isArray(p.labels[G])||(p.labels[G]=[]),p.labels[G].push(J.x)})}),window.TreemapSquared.generate(R,y.globals.gridWidth,y.globals.gridHeight).forEach(function(H,G){var J=C.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:Qe.escapeString(y.globals.seriesNames[G]),rel:G+1,"data:realIndex":G});if(y.config.chart.dropShadow.enabled){var te=y.config.chart.dropShadow;new dn(p.ctx).dropShadow(L,te,G)}var K=C.group({class:"apexcharts-data-labels"});H.forEach(function(ae,pe){var ge=ae[0],xe=ae[1],Me=ae[2],ze=ae[3],Ke=C.drawRect(ge,xe,Me-ge,ze-xe,0,"#fff",1,p.strokeWidth,y.config.plotOptions.treemap.useFillColorAsStroke?ne:y.globals.stroke.colors[G]);Ke.attr({cx:ge,cy:xe,index:G,i:G,j:pe,width:Me-ge,height:ze-xe});var Y=p.helpers.getShadeColor(y.config.chart.type,G,pe,p.negRange),ne=Y.color;void 0!==y.config.series[G].data[pe]&&y.config.series[G].data[pe].fillColor&&(ne=y.config.series[G].data[pe].fillColor);var be=M.fillPath({color:ne,seriesNumber:G,dataPointIndex:pe});Ke.node.classList.add("apexcharts-treemap-rect"),Ke.attr({fill:be}),p.helpers.addListeners(Ke);var Ie={x:ge+(Me-ge)/2,y:xe+(ze-xe)/2,width:0,height:0},Je={x:ge,y:xe,width:Me-ge,height:ze-xe};if(y.config.chart.animations.enabled&&!y.globals.dataChanged){var Nt=1;y.globals.resized||(Nt=y.config.chart.animations.speed),p.animateTreemap(Ke,Ie,Je,Nt)}y.globals.dataChanged&&p.dynamicAnim.enabled&&y.globals.shouldAnimate&&(y.globals.previousPaths[G]&&y.globals.previousPaths[G][pe]&&y.globals.previousPaths[G][pe].rect&&(Ie=y.globals.previousPaths[G][pe].rect),p.animateTreemap(Ke,Ie,Je,p.dynamicAnim.speed));var Xt=p.getFontSize(ae),gn=y.config.dataLabels.formatter(p.labels[G][pe],{value:y.globals.series[G][pe],seriesIndex:G,dataPointIndex:pe,w:y}),hn=p.helpers.calculateDataLabels({text:gn,x:(ge+Me)/2,y:(xe+ze)/2+p.strokeWidth/2+Xt/3,i:G,j:pe,colorProps:Y,fontSize:Xt,series:d});y.config.dataLabels.enabled&&hn&&p.rotateToFitLabel(hn,gn,ge,xe,Me,ze),J.add(Ke),null!==hn&&J.add(hn)}),J.add(K),L.add(J)}),L}},{key:"getFontSize",value:function(d){var L,p=this.w,R=function H(G){var J,te=0;if(Array.isArray(G[0]))for(J=0;J<G.length;J++)te+=H(G[J]);else for(J=0;J<G.length;J++)te+=G[J].length;return te}(this.labels)/function H(G){var J,te=0;if(Array.isArray(G[0]))for(J=0;J<G.length;J++)te+=H(G[J]);else for(J=0;J<G.length;J++)te+=1;return te}(this.labels);return L=Math.pow((d[2]-d[0])*(d[3]-d[1]),.5),Math.min(L/R,parseInt(p.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(d,p,y,C,M,L){var R=new Mt(this.ctx),H=R.getTextRects(p);if(H.width+5>M-y&&H.width<=L-C){var G=R.rotateAroundCenter(d.node);d.node.setAttribute("transform","rotate(-90 ".concat(G.x," ").concat(G.y,")"))}}},{key:"animateTreemap",value:function(d,p,y,C){var M=new On(this.ctx);M.animateRect(d,{x:p.x,y:p.y,width:p.width,height:p.height},{x:y.x,y:y.y,width:y.width,height:y.height},C,function(){M.animationCompleted(d)})}}]),ve}(),yt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return gt(ve,[{key:"calculateTimeScaleTicks",value:function(d,p){var y=this,C=this.w;if(C.globals.allSeriesCollapsed)return C.globals.labels=[],C.globals.timescaleLabels=[],[];var M=new Un(this.ctx),L=(p-d)/864e5;this.determineInterval(L),C.globals.disableZoomIn=!1,C.globals.disableZoomOut=!1,L<.00011574074074074075?C.globals.disableZoomIn=!0:L>5e4&&(C.globals.disableZoomOut=!0);var R=M.getTimeUnitsfromTimestamp(d,p,this.utc),H=C.globals.gridWidth/L,G=H/24,J=G/60,te=J/60,K=Math.floor(24*L),ae=Math.floor(1440*L),pe=Math.floor(86400*L),ge=Math.floor(L),xe=Math.floor(L/30),Me=Math.floor(L/365),ze={minMillisecond:R.minMillisecond,minSecond:R.minSecond,minMinute:R.minMinute,minHour:R.minHour,minDate:R.minDate,minMonth:R.minMonth,minYear:R.minYear},Ke={firstVal:ze,currentMillisecond:ze.minMillisecond,currentSecond:ze.minSecond,currentMinute:ze.minMinute,currentHour:ze.minHour,currentMonthDate:ze.minDate,currentDate:ze.minDate,currentMonth:ze.minMonth,currentYear:ze.minYear,daysWidthOnXAxis:H,hoursWidthOnXAxis:G,minutesWidthOnXAxis:J,secondsWidthOnXAxis:te,numberOfSeconds:pe,numberOfMinutes:ae,numberOfHours:K,numberOfDays:ge,numberOfMonths:xe,numberOfYears:Me};switch(this.tickInterval){case"years":this.generateYearScale(Ke);break;case"months":case"half_year":this.generateMonthScale(Ke);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(Ke);break;case"hours":this.generateHourScale(Ke);break;case"minutes_fives":case"minutes":this.generateMinuteScale(Ke);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(Ke)}var Y=this.timeScaleArray.map(function(ne){var be={position:ne.position,unit:ne.unit,year:ne.year,day:ne.day?ne.day:1,hour:ne.hour?ne.hour:0,month:ne.month+1};return"month"===ne.unit?Be(Be({},be),{},{day:1,value:ne.value+1}):"day"===ne.unit||"hour"===ne.unit?Be(Be({},be),{},{value:ne.value}):"minute"===ne.unit?Be(Be({},be),{},{value:ne.value,minute:ne.value}):"second"===ne.unit?Be(Be({},be),{},{value:ne.value,minute:ne.minute,second:ne.second}):ne});return Y.filter(function(ne){var be=1,Ie=Math.ceil(C.globals.gridWidth/120),Je=ne.value;void 0!==C.config.xaxis.tickAmount&&(Ie=C.config.xaxis.tickAmount),Y.length>Ie&&(be=Math.floor(Y.length/Ie));var Nt=!1,St=!1;switch(y.tickInterval){case"years":"year"===ne.unit&&(Nt=!0);break;case"half_year":be=7,"year"===ne.unit&&(Nt=!0);break;case"months":be=1,"year"===ne.unit&&(Nt=!0);break;case"months_fortnight":be=15,"year"!==ne.unit&&"month"!==ne.unit||(Nt=!0),30===Je&&(St=!0);break;case"months_days":be=10,"month"===ne.unit&&(Nt=!0),30===Je&&(St=!0);break;case"week_days":be=8,"month"===ne.unit&&(Nt=!0);break;case"days":be=1,"month"===ne.unit&&(Nt=!0);break;case"hours":"day"===ne.unit&&(Nt=!0);break;case"minutes_fives":Je%5!=0&&(St=!0);break;case"seconds_tens":Je%10!=0&&(St=!0);break;case"seconds_fives":Je%5!=0&&(St=!0)}if("hours"===y.tickInterval||"minutes_fives"===y.tickInterval||"seconds_tens"===y.tickInterval||"seconds_fives"===y.tickInterval){if(!St)return!0}else if((Je%be==0||Nt)&&!St)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(d,p){var y=this.w,C=this.formatDates(d),M=this.removeOverlappingTS(C);y.globals.timescaleLabels=M.slice(),new rs(this.ctx).plotCoords()}},{key:"determineInterval",value:function(d){var p=24*d,y=60*p;switch(!0){case d/365>5:this.tickInterval="years";break;case d>800:this.tickInterval="half_year";break;case d>180:this.tickInterval="months";break;case d>90:this.tickInterval="months_fortnight";break;case d>60:this.tickInterval="months_days";break;case d>30:this.tickInterval="week_days";break;case d>2:this.tickInterval="days";break;case p>2.4:this.tickInterval="hours";break;case y>15:this.tickInterval="minutes_fives";break;case y>5:this.tickInterval="minutes";break;case y>1:this.tickInterval="seconds_tens";break;case 60*y>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(d){var p=d.firstVal,y=d.currentMonth,C=d.currentYear,M=d.daysWidthOnXAxis,L=d.numberOfYears,R=p.minYear,H=0,G=new Un(this.ctx),J="year";if(p.minDate>1||p.minMonth>0){var te=G.determineRemainingDaysOfYear(p.minYear,p.minMonth,p.minDate);H=(G.determineDaysOfYear(p.minYear)-te+1)*M,this.timeScaleArray.push({position:H,value:R=p.minYear+1,unit:J,year:R,month:Qe.monthMod(y+1)})}else 1===p.minDate&&0===p.minMonth&&this.timeScaleArray.push({position:H,value:R,unit:J,year:C,month:Qe.monthMod(y+1)});for(var K=R,ae=H,pe=0;pe<L;pe++)K++,ae=G.determineDaysOfYear(K-1)*M+ae,this.timeScaleArray.push({position:ae,value:K,unit:J,year:K,month:1})}},{key:"generateMonthScale",value:function(d){var p=d.firstVal,y=d.currentMonthDate,C=d.currentMonth,M=d.currentYear,L=d.daysWidthOnXAxis,R=d.numberOfMonths,H=C,G=0,J=new Un(this.ctx),te="month",K=0;if(p.minDate>1){G=(J.determineDaysOfMonths(C+1,p.minYear)-y+1)*L,H=Qe.monthMod(C+1);var ae=M+K,pe=Qe.monthMod(H),ge=H;0===H&&(te="year",ge=ae,pe=1,ae+=K+=1),this.timeScaleArray.push({position:G,value:ge,unit:te,year:ae,month:pe})}else this.timeScaleArray.push({position:G,value:H,unit:te,year:M,month:Qe.monthMod(C)});for(var xe=H+1,Me=G,ze=0,Ke=1;ze<R;ze++,Ke++){0===(xe=Qe.monthMod(xe))?(te="year",K+=1):te="month";var Y=this._getYear(M,xe,K);Me=J.determineDaysOfMonths(xe,Y)*L+Me,this.timeScaleArray.push({position:Me,value:0===xe?Y:xe,unit:te,year:Y,month:0===xe?1:xe}),xe++}}},{key:"generateDayScale",value:function(d){var p=d.firstVal,y=d.currentMonth,C=d.currentYear,M=d.hoursWidthOnXAxis,L=d.numberOfDays,R=new Un(this.ctx),H="day",G=p.minDate+1,J=G,te=function(Ke,Y,ne){return Ke>R.determineDaysOfMonths(Y+1,ne)&&(J=1,H="month",ae=Y+=1),Y},K=(24-p.minHour)*M,ae=G,pe=te(J,y,C);0===p.minHour&&1===p.minDate?(K=0,ae=Qe.monthMod(p.minMonth),H="month",J=p.minDate,L++):1!==p.minDate&&0===p.minHour&&0===p.minMinute&&(K=0,ae=G=p.minDate,pe=te(J=G,y,C)),this.timeScaleArray.push({position:K,value:ae,unit:H,year:this._getYear(C,pe,0),month:Qe.monthMod(pe),day:J});for(var ge=K,xe=0;xe<L;xe++){H="day",pe=te(J+=1,pe,this._getYear(C,pe,0));var Me=this._getYear(C,pe,0);ge=24*M+ge;var ze=1===J?Qe.monthMod(pe):J;this.timeScaleArray.push({position:ge,value:ze,unit:H,year:Me,month:Qe.monthMod(pe),day:ze})}}},{key:"generateHourScale",value:function(d){var p=d.firstVal,y=d.currentDate,C=d.currentMonth,M=d.currentYear,L=d.minutesWidthOnXAxis,R=d.numberOfHours,H=new Un(this.ctx),G="hour",te=function(be,Ie){return be>H.determineDaysOfMonths(Ie+1,M)?Ie+=1:Ie},K=60-(p.minMinute+p.minSecond/60),ae=K*L,pe=p.minHour+1,ge=pe+1;60===K&&(ae=0,ge=(pe=p.minHour)+1);var be,Ie,xe=y,Me=te(xe,C);this.timeScaleArray.push({position:ae,value:pe,unit:G,day:xe,hour:ge,year:M,month:Qe.monthMod(Me)});for(var ze=ae,Ke=0;Ke<R;Ke++){G="hour",ge>=24&&(ge=0,G="day",Me=(be=xe+=1,Ie=Me,be>H.determineDaysOfMonths(Ie+1,M)&&(xe=1,Ie+=1),{month:Ie,date:xe}).month,Me=te(xe,Me));var Y=this._getYear(M,Me,0);this.timeScaleArray.push({position:ze=0===ge&&0===Ke?K*L:60*L+ze,value:0===ge?xe:ge,unit:G,hour:ge,day:xe,year:Y,month:Qe.monthMod(Me)}),ge++}}},{key:"generateMinuteScale",value:function(d){for(var G=d.minutesWidthOnXAxis,te=d.numberOfMinutes,K=d.currentMinute+1,ae=d.currentDate,pe=d.currentMonth,ge=d.currentYear,xe=d.currentHour,Me=(60-d.currentSecond-d.currentMillisecond/1e3)*d.secondsWidthOnXAxis,ze=0;ze<te;ze++)K>=60&&(K=0,24===(xe+=1)&&(xe=0)),this.timeScaleArray.push({position:Me,value:K,unit:"minute",hour:xe,minute:K,day:ae,year:this._getYear(ge,pe,0),month:Qe.monthMod(pe)}),Me+=G,K++}},{key:"generateSecondScale",value:function(d){for(var G=d.secondsWidthOnXAxis,J=d.numberOfSeconds,te=d.currentSecond+1,K=d.currentMinute,ae=d.currentDate,pe=d.currentMonth,ge=d.currentYear,xe=d.currentHour,Me=(1e3-d.currentMillisecond)/1e3*G,ze=0;ze<J;ze++)te>=60&&(te=0,++K>=60&&(K=0,24==++xe&&(xe=0))),this.timeScaleArray.push({position:Me,value:te,unit:"second",hour:xe,minute:K,second:te,day:ae,year:this._getYear(ge,pe,0),month:Qe.monthMod(pe)}),Me+=G,te++}},{key:"createRawDateString",value:function(d,p){var y=d.year;return 0===d.month&&(d.month=1),y+="-"+("0"+d.month.toString()).slice(-2),y+="day"===d.unit?"day"===d.unit?"-"+("0"+p).slice(-2):"-01":"-"+("0"+(d.day?d.day:"1")).slice(-2),y+="hour"===d.unit?"hour"===d.unit?"T"+("0"+p).slice(-2):"T00":"T"+("0"+(d.hour?d.hour:"0")).slice(-2),y+="minute"===d.unit?":"+("0"+p).slice(-2):":"+(d.minute?("0"+d.minute).slice(-2):"00"),y+="second"===d.unit?":"+("0"+p).slice(-2):":00",this.utc&&(y+=".000Z"),y}},{key:"formatDates",value:function(d){var p=this,y=this.w;return d.map(function(C){var M=C.value.toString(),L=new Un(p.ctx),R=p.createRawDateString(C,M),H=L.getDate(L.parseDate(R));if(p.utc||(H=L.getDate(L.parseDateWithTimezone(R))),void 0===y.config.xaxis.labels.format){var G="dd MMM",J=y.config.xaxis.labels.datetimeFormatter;"year"===C.unit&&(G=J.year),"month"===C.unit&&(G=J.month),"day"===C.unit&&(G=J.day),"hour"===C.unit&&(G=J.hour),"minute"===C.unit&&(G=J.minute),"second"===C.unit&&(G=J.second),M=L.formatDate(H,G)}else M=L.formatDate(H,y.config.xaxis.labels.format);return{dateString:R,position:C.position,value:M,unit:C.unit,year:C.year,month:C.month}})}},{key:"removeOverlappingTS",value:function(d){var p,y=this,C=new Mt(this.ctx),M=!1;d.length>0&&d[0].value&&d.every(function(H){return H.value.length===d[0].value.length})&&(M=!0,p=C.getTextRects(d[0].value).width);var L=0;return d.map(function(H,G){if(G>0&&y.w.config.xaxis.labels.hideOverlappingLabels){var J=M?p:C.getTextRects(d[L].value).width;return H.position>d[L].position+J+10?(L=G,H):null}return H}).filter(function(H){return null!==H})}},{key:"_getYear",value:function(d,p,y){return d+Math.floor(p/12)+y}}]),ve}(),Ot=function(){function ve(d,p){Ee(this,ve),this.ctx=p,this.w=p.w,this.el=d}return gt(ve,[{key:"setupElements",value:function(){var d=this.w.globals,p=this.w.config,y=p.chart.type;d.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(y)>-1,d.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(y)>-1,d.isBarHorizontal=("bar"===p.chart.type||"rangeBar"===p.chart.type)&&p.plotOptions.bar.horizontal,d.chartClass=".apexcharts"+d.chartID,d.dom.baseEl=this.el,d.dom.elWrap=document.createElement("div"),Mt.setAttrs(d.dom.elWrap,{id:d.chartClass.substring(1),class:"apexcharts-canvas "+d.chartClass.substring(1)}),this.el.appendChild(d.dom.elWrap),d.dom.Paper=new window.SVG.Doc(d.dom.elWrap),d.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(p.chart.offsetX,", ").concat(p.chart.offsetY,")")}),d.dom.Paper.node.style.background=p.chart.background,this.setSVGDimensions(),d.dom.elGraphical=d.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),d.dom.elAnnotations=d.dom.Paper.group().attr({class:"apexcharts-annotations"}),d.dom.elDefs=d.dom.Paper.defs(),d.dom.elLegendWrap=document.createElement("div"),d.dom.elLegendWrap.classList.add("apexcharts-legend"),d.dom.elWrap.appendChild(d.dom.elLegendWrap),d.dom.Paper.add(d.dom.elGraphical),d.dom.elGraphical.add(d.dom.elDefs)}},{key:"plotChartType",value:function(d,p){var y=this.w,C=y.config,M=y.globals,L={series:[],i:[]},R={series:[],i:[]},H={series:[],i:[]},G={series:[],i:[]},J={series:[],i:[]},te={series:[],i:[]},K={series:[],i:[]};M.series.map(function(ne,be){var Ie=0;void 0!==d[be].type?("column"===d[be].type||"bar"===d[be].type?(M.series.length>1&&C.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),J.series.push(ne),J.i.push(be),Ie++,y.globals.columnSeries=J.series):"area"===d[be].type?(R.series.push(ne),R.i.push(be),Ie++):"line"===d[be].type?(L.series.push(ne),L.i.push(be),Ie++):"scatter"===d[be].type?(H.series.push(ne),H.i.push(be)):"bubble"===d[be].type?(G.series.push(ne),G.i.push(be),Ie++):"candlestick"===d[be].type?(te.series.push(ne),te.i.push(be),Ie++):"boxPlot"===d[be].type?(K.series.push(ne),K.i.push(be),Ie++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),Ie>1&&(M.comboCharts=!0)):(L.series.push(ne),L.i.push(be))});var ae=new we(this.ctx,p),pe=new Kt(this.ctx,p);this.ctx.pie=new Oi(this.ctx);var ge=new ir(this.ctx);this.ctx.rangeBar=new ri(this.ctx,p);var xe=new sr(this.ctx),Me=[];if(M.comboCharts){if(R.series.length>0&&Me.push(ae.draw(R.series,"area",R.i)),J.series.length>0)if(y.config.chart.stacked){var ze=new Tt(this.ctx,p);Me.push(ze.draw(J.series,J.i))}else this.ctx.bar=new mi(this.ctx,p),Me.push(this.ctx.bar.draw(J.series,J.i));if(L.series.length>0&&Me.push(ae.draw(L.series,"line",L.i)),te.series.length>0&&Me.push(pe.draw(te.series,te.i)),K.series.length>0&&Me.push(pe.draw(K.series,K.i)),H.series.length>0){var Ke=new we(this.ctx,p,!0);Me.push(Ke.draw(H.series,"scatter",H.i))}if(G.series.length>0){var Y=new we(this.ctx,p,!0);Me.push(Y.draw(G.series,"bubble",G.i))}}else switch(C.chart.type){case"line":Me=ae.draw(M.series,"line");break;case"area":Me=ae.draw(M.series,"area");break;case"bar":C.chart.stacked?Me=new Tt(this.ctx,p).draw(M.series):(this.ctx.bar=new mi(this.ctx,p),Me=this.ctx.bar.draw(M.series));break;case"candlestick":case"boxPlot":Me=new Kt(this.ctx,p).draw(M.series);break;case"rangeBar":Me=this.ctx.rangeBar.draw(M.series);break;case"heatmap":Me=new Bn(this.ctx,p).draw(M.series);break;case"treemap":Me=new it(this.ctx,p).draw(M.series);break;case"pie":case"donut":case"polarArea":Me=this.ctx.pie.draw(M.series);break;case"radialBar":Me=ge.draw(M.series);break;case"radar":Me=xe.draw(M.series);break;default:Me=ae.draw(M.series)}return Me}},{key:"setSVGDimensions",value:function(){var d=this.w.globals,p=this.w.config;d.svgWidth=p.chart.width,d.svgHeight=p.chart.height;var y=Qe.getDimensions(this.el),C=p.chart.width.toString().split(/[0-9]+/g).pop();"%"===C?Qe.isNumber(y[0])&&(0===y[0].width&&(y=Qe.getDimensions(this.el.parentNode)),d.svgWidth=y[0]*parseInt(p.chart.width,10)/100):"px"!==C&&""!==C||(d.svgWidth=parseInt(p.chart.width,10));var M=p.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==d.svgHeight&&""!==d.svgHeight)if("%"===M){var L=Qe.getDimensions(this.el.parentNode);d.svgHeight=L[1]*parseInt(p.chart.height,10)/100}else d.svgHeight=parseInt(p.chart.height,10);else d.svgHeight=d.axisCharts?d.svgWidth/1.61:d.svgWidth/1.2;d.svgWidth<0&&(d.svgWidth=0),d.svgHeight<0&&(d.svgHeight=0),Mt.setAttrs(d.dom.Paper.node,{width:d.svgWidth,height:d.svgHeight}),"%"!==M&&(d.dom.Paper.node.parentNode.parentNode.style.minHeight=d.svgHeight+(p.chart.sparkline.enabled?0:d.axisCharts?p.chart.parentHeightOffset:0)+"px"),d.dom.elWrap.style.width=d.svgWidth+"px",d.dom.elWrap.style.height=d.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var d=this.w.globals;Mt.setAttrs(d.dom.elGraphical.node,{transform:"translate("+d.translateX+", "+d.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var d=this.w,p=d.globals,y=0,C=d.config.chart.sparkline.enabled?1:15;C+=d.config.grid.padding.bottom,"top"!==d.config.legend.position&&"bottom"!==d.config.legend.position||!d.config.legend.show||d.config.legend.floating||(y=new $n(this.ctx).legendHelpers.getLegendBBox().clwh+10);var M=d.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),L=2.05*d.globals.radialSize;if(M&&!d.config.chart.sparkline.enabled){var R=Qe.getBoundingClientRect(M);L=R.bottom,L=Math.max(2.05*d.globals.radialSize,R.bottom-R.top)}var G=L+p.translateY+y+C;p.dom.elLegendForeign&&p.dom.elLegendForeign.setAttribute("height",G),p.dom.elWrap.style.height=G+"px",Mt.setAttrs(p.dom.Paper.node,{height:G}),p.dom.Paper.node.parentNode.parentNode.style.minHeight=G+"px"}},{key:"coreCalculations",value:function(){new ds(this.ctx).init()}},{key:"resetGlobals",value:function(){var d=this,p=function(){return d.w.config.series.map(function(M){return[]})},y=new xi,C=this.w.globals;y.initGlobalVars(C),C.seriesXvalues=p(),C.seriesYvalues=p()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var d=null,p=this.w;if(p.globals.axisCharts){if("back"===p.config.xaxis.crosshairs.position&&new Yn(this.ctx).drawXCrosshairs(),"back"===p.config.yaxis[0].crosshairs.position&&new Yn(this.ctx).drawYCrosshairs(),"datetime"===p.config.xaxis.type&&void 0===p.config.xaxis.labels.formatter){this.ctx.timeScale=new yt(this.ctx);var y=[];isFinite(p.globals.minX)&&isFinite(p.globals.maxX)&&!p.globals.isBarHorizontal?y=this.ctx.timeScale.calculateTimeScaleTicks(p.globals.minX,p.globals.maxX):p.globals.isBarHorizontal&&(y=this.ctx.timeScale.calculateTimeScaleTicks(p.globals.minY,p.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(y)}d=new Vn(this.ctx).getCalculatedRatios()}return d}},{key:"updateSourceChart",value:function(d){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:d.w.globals.minX,max:d.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var d=this,p=this.w;if(p.config.chart.brush.enabled&&"function"!=typeof p.config.chart.events.selection){var y=p.config.chart.brush.targets||[p.config.chart.brush.target];y.forEach(function(C){var M=ApexCharts.getChartByID(C);M.w.globals.brushSource=d.ctx,"function"!=typeof M.w.config.chart.events.zoomed&&(M.w.config.chart.events.zoomed=function(){d.updateSourceChart(M)}),"function"!=typeof M.w.config.chart.events.scrolled&&(M.w.config.chart.events.scrolled=function(){d.updateSourceChart(M)})}),p.config.chart.events.selection=function(C,M){y.forEach(function(L){var R=ApexCharts.getChartByID(L),H=Qe.clone(p.config.yaxis);if(p.config.chart.brush.autoScaleYaxis&&1===R.w.globals.series.length){var G=new Ri(R);H=G.autoScaleY(R,H,M)}var J=R.w.config.yaxis.reduce(function(te,K,ae){return[].concat(zt(te),[Be(Be({},R.w.config.yaxis[ae]),{},{min:H[0].min,max:H[0].max})])},[]);R.ctx.updateHelpers._updateOptions({xaxis:{min:M.xaxis.min,max:M.xaxis.max},yaxis:J},!1,!1,!1,!1)})}}}}]),ve}(),Pt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"_updateOptions",value:function(d){var p=this,y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],M=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],L=arguments.length>4&&void 0!==arguments[4]&&arguments[4],R=[this.ctx];M&&(R=this.ctx.getSyncedCharts()),this.ctx.w.globals.isExecCalled&&(R=[this.ctx],this.ctx.w.globals.isExecCalled=!1),R.forEach(function(H){var G=H.w;return G.globals.shouldAnimate=C,y||(G.globals.resized=!0,G.globals.dataChanged=!0,C&&H.series.getPreviousPaths()),d&&"object"===Vt(d)&&(H.config=new jn(d),d=Vn.extendArrayProps(H.config,d,G),H.w.globals.chartID!==p.ctx.w.globals.chartID&&delete d.series,G.config=Qe.extend(G.config,d),L&&(G.globals.lastXAxis=d.xaxis?Qe.clone(d.xaxis):[],G.globals.lastYAxis=d.yaxis?Qe.clone(d.yaxis):[],G.globals.initialConfig=Qe.extend({},G.config),G.globals.initialSeries=Qe.clone(G.config.series))),H.update(d)})}},{key:"_updateSeries",value:function(d,p){var y,C=this,M=arguments.length>2&&void 0!==arguments[2]&&arguments[2],L=this.w;return L.globals.shouldAnimate=p,L.globals.dataChanged=!0,p&&this.ctx.series.getPreviousPaths(),L.globals.axisCharts?(0===(y=d.map(function(R,H){return C._extendSeries(R,H)})).length&&(y=[{data:[]}]),L.config.series=y):L.config.series=d.slice(),M&&(L.globals.initialSeries=Qe.clone(L.config.series)),this.ctx.update()}},{key:"_extendSeries",value:function(d,p){var y=this.w,C=y.config.series[p];return Be(Be({},y.config.series[p]),{},{name:d.name?d.name:C&&C.name,color:d.color?d.color:C&&C.color,type:d.type?d.type:C&&C.type,data:d.data?d.data:C&&C.data})}},{key:"toggleDataPointSelection",value:function(d,p){var y=this.w,C=null,M=".apexcharts-series[data\\:realIndex='".concat(d,"']");return y.globals.axisCharts?C=y.globals.dom.Paper.select("".concat(M," path[j='").concat(p,"'], ").concat(M," circle[j='").concat(p,"'], ").concat(M," rect[j='").concat(p,"']")).members[0]:void 0===p&&(C=y.globals.dom.Paper.select("".concat(M," path[j='").concat(d,"']")).members[0],"pie"!==y.config.chart.type&&"polarArea"!==y.config.chart.type&&"donut"!==y.config.chart.type||this.ctx.pie.pieClicked(d)),C?(new Mt(this.ctx).pathMouseDown(C,null),C.node?C.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(d){var p=this.w;if(["min","max"].forEach(function(C){void 0!==d.xaxis[C]&&(p.config.xaxis[C]=d.xaxis[C],p.globals.lastXAxis[C]=d.xaxis[C])}),d.xaxis.categories&&d.xaxis.categories.length&&(p.config.xaxis.categories=d.xaxis.categories),p.config.xaxis.convertedCatToNumeric){var y=new Hn(d);d=y.convertCatToNumericXaxis(d,this.ctx)}return d}},{key:"forceYAxisUpdate",value:function(d){var p=this.w;return p.config.chart.stacked&&"100%"===p.config.chart.stackType&&(Array.isArray(d.yaxis)?d.yaxis.forEach(function(y,C){d.yaxis[C].min=0,d.yaxis[C].max=100}):(d.yaxis.min=0,d.yaxis.max=100)),d}},{key:"revertDefaultAxisMinMax",value:function(d){var p=this,y=this.w,C=y.globals.lastXAxis,M=y.globals.lastYAxis;d&&d.xaxis&&(C=d.xaxis),d&&d.yaxis&&(M=d.yaxis),y.config.xaxis.min=C.min,y.config.xaxis.max=C.max,y.config.yaxis.map(function(R,H){y.globals.zoomed||void 0!==M[H]?function(R){void 0!==M[R]&&(y.config.yaxis[R].min=M[R].min,y.config.yaxis[R].max=M[R].max)}(H):void 0!==p.ctx.opts.yaxis[H]&&(R.min=p.ctx.opts.yaxis[H].min,R.max=p.ctx.opts.yaxis[H].max)})}}]),ve}();De="undefined"!=typeof window?window:void 0,qe=function(ve,d){var p=(void 0!==this?this:ve).SVG=function(Y){if(p.supported)return Y=new p.Doc(Y),p.parser.draw||p.prepare(),Y};if(p.ns="http://www.w3.org/2000/svg",p.xmlns="http://www.w3.org/2000/xmlns/",p.xlink="http://www.w3.org/1999/xlink",p.svgjs="http://svgjs.com/svgjs",p.supported=!0,!p.supported)return!1;p.did=1e3,p.eid=function(Y){return"Svgjs"+J(Y)+p.did++},p.create=function(Y){var ne=d.createElementNS(this.ns,Y);return ne.setAttribute("id",this.eid(Y)),ne},p.extend=function(){var Y,ne;ne=(Y=[].slice.call(arguments)).pop();for(var be=Y.length-1;be>=0;be--)if(Y[be])for(var Ie in ne)Y[be].prototype[Ie]=ne[Ie];p.Set&&p.Set.inherit&&p.Set.inherit()},p.invent=function(Y){var ne="function"==typeof Y.create?Y.create:function(){this.constructor.call(this,p.create(Y.create))};return Y.inherit&&(ne.prototype=new Y.inherit),Y.extend&&p.extend(ne,Y.extend),Y.construct&&p.extend(Y.parent||p.Container,Y.construct),ne},p.adopt=function(Y){return Y?Y.instance?Y.instance:((ne="svg"==Y.nodeName?Y.parentNode instanceof ve.SVGElement?new p.Nested:new p.Doc:"linearGradient"==Y.nodeName?new p.Gradient("linear"):"radialGradient"==Y.nodeName?new p.Gradient("radial"):p[J(Y.nodeName)]?new(p[J(Y.nodeName)]):new p.Element(Y)).type=Y.nodeName,ne.node=Y,Y.instance=ne,ne instanceof p.Doc&&ne.namespace().defs(),ne.setData(JSON.parse(Y.getAttribute("svgjs:data"))||{}),ne):null;var ne},p.prepare=function(){var Y=d.getElementsByTagName("body")[0],ne=(Y?new p.Doc(Y):p.adopt(d.documentElement).nested()).size(2,0);p.parser={body:Y||d.documentElement,draw:ne.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:ne.polyline().node,path:ne.path().node,native:p.create("svg")}},p.parser={native:p.create("svg")},d.addEventListener("DOMContentLoaded",function(){p.parser.draw||p.prepare()},!1),p.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},p.utils={map:function(Y,ne){for(var be=Y.length,Ie=[],Je=0;Je<be;Je++)Ie.push(ne(Y[Je]));return Ie},filter:function(Y,ne){for(var be=Y.length,Ie=[],Je=0;Je<be;Je++)ne(Y[Je])&&Ie.push(Y[Je]);return Ie},filterSVGElements:function(Y){return this.filter(Y,function(ne){return ne instanceof ve.SVGElement})}},p.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},p.Color=function(Y){var ne,be;this.r=0,this.g=0,this.b=0,Y&&("string"==typeof Y?p.regex.isRgb.test(Y)?(ne=p.regex.rgb.exec(Y.replace(p.regex.whitespace,"")),this.r=parseInt(ne[1]),this.g=parseInt(ne[2]),this.b=parseInt(ne[3])):p.regex.isHex.test(Y)&&(ne=p.regex.hex.exec(4==(be=Y).length?["#",be.substring(1,2),be.substring(1,2),be.substring(2,3),be.substring(2,3),be.substring(3,4),be.substring(3,4)].join(""):be),this.r=parseInt(ne[1],16),this.g=parseInt(ne[2],16),this.b=parseInt(ne[3],16)):"object"===Vt(Y)&&(this.r=Y.r,this.g=Y.g,this.b=Y.b))},p.extend(p.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+te(this.r)+te(this.g)+te(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(Y){return this.destination=new p.Color(Y),this},at:function(Y){return this.destination?new p.Color({r:~~(this.r+(this.destination.r-this.r)*(Y=Y<0?0:Y>1?1:Y)),g:~~(this.g+(this.destination.g-this.g)*Y),b:~~(this.b+(this.destination.b-this.b)*Y)}):this}}),p.Color.test=function(Y){return p.regex.isHex.test(Y+="")||p.regex.isRgb.test(Y)},p.Color.isRgb=function(Y){return Y&&"number"==typeof Y.r&&"number"==typeof Y.g&&"number"==typeof Y.b},p.Color.isColor=function(Y){return p.Color.isRgb(Y)||p.Color.test(Y)},p.Array=function(Y,ne){0==(Y=(Y||[]).valueOf()).length&&ne&&(Y=ne.valueOf()),this.value=this.parse(Y)},p.extend(p.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(Y){return Y=Y.valueOf(),Array.isArray(Y)?Y:this.split(Y)}}),p.PointArray=function(Y,ne){p.Array.call(this,Y,ne||[[0,0]])},p.PointArray.prototype=new p.Array,p.PointArray.prototype.constructor=p.PointArray;for(var y={M:function(Y,ne,be){return ne.x=be.x=Y[0],ne.y=be.y=Y[1],["M",ne.x,ne.y]},L:function(Y,ne){return ne.x=Y[0],ne.y=Y[1],["L",Y[0],Y[1]]},H:function(Y,ne){return ne.x=Y[0],["H",Y[0]]},V:function(Y,ne){return ne.y=Y[0],["V",Y[0]]},C:function(Y,ne){return ne.x=Y[4],ne.y=Y[5],["C",Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]]},Q:function(Y,ne){return ne.x=Y[2],ne.y=Y[3],["Q",Y[0],Y[1],Y[2],Y[3]]},Z:function(Y,ne,be){return ne.x=be.x,ne.y=be.y,["Z"]}},C="mlhvqtcsaz".split(""),M=0,L=C.length;M<L;++M)y[C[M]]=function(Y){return function(ne,be,Ie){if("H"==Y)ne[0]=ne[0]+be.x;else if("V"==Y)ne[0]=ne[0]+be.y;else if("A"==Y)ne[5]=ne[5]+be.x,ne[6]=ne[6]+be.y;else for(var Je=0,Nt=ne.length;Je<Nt;++Je)ne[Je]=ne[Je]+(Je%2?be.y:be.x);return y[Y](ne,be,Ie)}}(C[M].toUpperCase());p.PathArray=function(Y,ne){p.Array.call(this,Y,ne||[["M",0,0]])},p.PathArray.prototype=new p.Array,p.PathArray.prototype.constructor=p.PathArray,p.extend(p.PathArray,{toString:function(){return function(Y){for(var ne=0,be=Y.length,Ie="";ne<be;ne++)Ie+=Y[ne][0],null!=Y[ne][1]&&(Ie+=Y[ne][1],null!=Y[ne][2]&&(Ie+=" ",Ie+=Y[ne][2],null!=Y[ne][3]&&(Ie+=" ",Ie+=Y[ne][3],Ie+=" ",Ie+=Y[ne][4],null!=Y[ne][5]&&(Ie+=" ",Ie+=Y[ne][5],Ie+=" ",Ie+=Y[ne][6],null!=Y[ne][7]&&(Ie+=" ",Ie+=Y[ne][7])))));return Ie+" "}(this.value)},move:function(Y,ne){return this.bbox(),this},at:function(Y){if(!this.destination)return this;for(var ne=this.value,be=this.destination.value,Ie=[],Je=new p.PathArray,Nt=0,St=ne.length;Nt<St;Nt++){Ie[Nt]=[ne[Nt][0]];for(var Xt=1,gn=ne[Nt].length;Xt<gn;Xt++)Ie[Nt][Xt]=ne[Nt][Xt]+(be[Nt][Xt]-ne[Nt][Xt])*Y;"A"===Ie[Nt][0]&&(Ie[Nt][4]=+(0!=Ie[Nt][4]),Ie[Nt][5]=+(0!=Ie[Nt][5]))}return Je.value=Ie,Je},parse:function(Y){if(Y instanceof p.PathArray)return Y.valueOf();var ne,be={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};Y="string"==typeof Y?Y.replace(p.regex.numbersWithDots,H).replace(p.regex.pathLetters," $& ").replace(p.regex.hyphen,"$1 -").trim().split(p.regex.delimiter):Y.reduce(function(gn,hn){return[].concat.call(gn,hn)},[]);var Ie=[],Je=new p.Point,Nt=new p.Point,St=0,Xt=Y.length;do{p.regex.isPathLetter.test(Y[St])?(ne=Y[St],++St):"M"==ne?ne="L":"m"==ne&&(ne="l"),Ie.push(y[ne].call(null,Y.slice(St,St+=be[ne.toUpperCase()]).map(parseFloat),Je,Nt))}while(Xt>St);return Ie},bbox:function(){return p.parser.draw||p.prepare(),p.parser.path.setAttribute("d",this.toString()),p.parser.path.getBBox()}}),p.Number=p.invent({create:function(Y,ne){this.value=0,this.unit=ne||"","number"==typeof Y?this.value=isNaN(Y)?0:isFinite(Y)?Y:Y<0?-34e37:34e37:"string"==typeof Y?(ne=Y.match(p.regex.numberAndUnit))&&(this.value=parseFloat(ne[1]),"%"==ne[5]?this.value/=100:"s"==ne[5]&&(this.value*=1e3),this.unit=ne[5]):Y instanceof p.Number&&(this.value=Y.valueOf(),this.unit=Y.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(Y){return Y=new p.Number(Y),new p.Number(this+Y,this.unit||Y.unit)},minus:function(Y){return Y=new p.Number(Y),new p.Number(this-Y,this.unit||Y.unit)},times:function(Y){return Y=new p.Number(Y),new p.Number(this*Y,this.unit||Y.unit)},divide:function(Y){return Y=new p.Number(Y),new p.Number(this/Y,this.unit||Y.unit)},to:function(Y){var ne=new p.Number(this);return"string"==typeof Y&&(ne.unit=Y),ne},morph:function(Y){return this.destination=new p.Number(Y),Y.relative&&(this.destination.value+=this.value),this},at:function(Y){return this.destination?new p.Number(this.destination).minus(this).times(Y).plus(this):this}}}),p.Element=p.invent({create:function(Y){this._stroke=p.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=Y)&&(this.type=Y.nodeName,this.node.instance=this,this._stroke=Y.getAttribute("stroke")||this._stroke)},extend:{x:function(Y){return this.attr("x",Y)},y:function(Y){return this.attr("y",Y)},cx:function(Y){return null==Y?this.x()+this.width()/2:this.x(Y-this.width()/2)},cy:function(Y){return null==Y?this.y()+this.height()/2:this.y(Y-this.height()/2)},move:function(Y,ne){return this.x(Y).y(ne)},center:function(Y,ne){return this.cx(Y).cy(ne)},width:function(Y){return this.attr("width",Y)},height:function(Y){return this.attr("height",Y)},size:function(Y,ne){var be=K(this,Y,ne);return this.width(new p.Number(be.width)).height(new p.Number(be.height))},clone:function(Y){this.writeDataToDom();var ne=ge(this.node.cloneNode(!0));return Y?Y.add(ne):this.after(ne),ne},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(Y){return this.after(Y).remove(),Y},addTo:function(Y){return Y.put(this)},putIn:function(Y){return Y.add(this)},id:function(Y){return this.attr("id",Y)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var Y=this.attr("class");return null==Y?[]:Y.trim().split(p.regex.delimiter)},hasClass:function(Y){return-1!=this.classes().indexOf(Y)},addClass:function(Y){if(!this.hasClass(Y)){var ne=this.classes();ne.push(Y),this.attr("class",ne.join(" "))}return this},removeClass:function(Y){return this.hasClass(Y)&&this.attr("class",this.classes().filter(function(ne){return ne!=Y}).join(" ")),this},toggleClass:function(Y){return this.hasClass(Y)?this.removeClass(Y):this.addClass(Y)},reference:function(Y){return p.get(this.attr(Y))},parent:function(Y){var ne=this;if(!ne.node.parentNode)return null;if(ne=p.adopt(ne.node.parentNode),!Y)return ne;for(;ne&&ne.node instanceof ve.SVGElement;){if("string"==typeof Y?ne.matches(Y):ne instanceof Y)return ne;if(!ne.node.parentNode||"#document"==ne.node.parentNode.nodeName)return null;ne=p.adopt(ne.node.parentNode)}},doc:function(){return this instanceof p.Doc?this:this.parent(p.Doc)},parents:function(Y){var ne=[],be=this;do{if(!(be=be.parent(Y))||!be.node)break;ne.push(be)}while(be.parent);return ne},matches:function(Y){return((ne=this.node).matches||ne.matchesSelector||ne.msMatchesSelector||ne.mozMatchesSelector||ne.webkitMatchesSelector||ne.oMatchesSelector).call(ne,Y);var ne},native:function(){return this.node},svg:function(Y){var ne=d.createElement("svg");if(!(Y&&this instanceof p.Parent))return ne.appendChild(Y=d.createElement("svg")),this.writeDataToDom(),Y.appendChild(this.node.cloneNode(!0)),ne.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");ne.innerHTML="<svg>"+Y.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var be=0,Ie=ne.firstChild.childNodes.length;be<Ie;be++)this.node.appendChild(ne.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(Y){return this.dom=Y,this},is:function(Y){return this instanceof Y}}}),p.easing={"-":function(Y){return Y},"<>":function(Y){return-Math.cos(Y*Math.PI)/2+.5},">":function(Y){return Math.sin(Y*Math.PI/2)},"<":function(Y){return 1-Math.cos(Y*Math.PI/2)}},p.morph=function(Y){return function(ne,be){return new p.MorphObj(ne,be).at(Y)}},p.Situation=p.invent({create:function(Y){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new p.Number(Y.duration).valueOf(),this.delay=new p.Number(Y.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=Y.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),p.FX=p.invent({create:function(Y){this._target=Y,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(Y,ne,be){"object"===Vt(Y)&&(ne=Y.ease,be=Y.delay,Y=Y.duration);var Ie=new p.Situation({duration:Y||1e3,delay:be||0,ease:p.easing[ne||"-"]||ne});return this.queue(Ie),this},target:function(Y){return Y&&Y instanceof p.Element?(this._target=Y,this):this._target},timeToAbsPos:function(Y){return(Y-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(Y){return this.situation.duration/this._speed*Y+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=ve.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){ve.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(Y){return("function"==typeof Y||Y instanceof p.Situation)&&this.situations.push(Y),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof p.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var Y,ne=this.situation;if(ne.init)return this;for(var be in ne.animations){Y=this.target()[be](),Array.isArray(Y)||(Y=[Y]),Array.isArray(ne.animations[be])||(ne.animations[be]=[ne.animations[be]]);for(var Ie=Y.length;Ie--;)ne.animations[be][Ie]instanceof p.Number&&(Y[Ie]=new p.Number(Y[Ie])),ne.animations[be][Ie]=Y[Ie].morph(ne.animations[be][Ie])}for(var be in ne.attrs)ne.attrs[be]=new p.MorphObj(this.target().attr(be),ne.attrs[be]);for(var be in ne.styles)ne.styles[be]=new p.MorphObj(this.target().style(be),ne.styles[be]);return ne.initialTransformation=this.target().matrixify(),ne.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(Y,ne){var be=this.active;return this.active=!1,ne&&this.clearQueue(),Y&&this.situation&&(!be&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(Y){var ne=this.last();return this.target().on("finished.fx",function be(Ie){Ie.detail.situation==ne&&(Y.call(this,ne),this.off("finished.fx",be))}),this._callStart()},during:function(Y){var ne=this.last(),be=function(Ie){Ie.detail.situation==ne&&Y.call(this,Ie.detail.pos,p.morph(Ie.detail.pos),Ie.detail.eased,ne)};return this.target().off("during.fx",be).on("during.fx",be),this.after(function(){this.off("during.fx",be)}),this._callStart()},afterAll:function(Y){var ne=function be(Ie){Y.call(this),this.off("allfinished.fx",be)};return this.target().off("allfinished.fx",ne).on("allfinished.fx",ne),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(Y,ne,be){return this.last()[be||"animations"][Y]=ne,this._callStart()},step:function(Y){var ne,be,Ie;Y||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(ne=Math.max(this.absPos,0),be=Math.floor(ne),!0===this.situation.loops||be<this.situation.loops?(this.pos=ne-be,Ie=this.situation.loop,this.situation.loop=be):(this.absPos=this.situation.loops,this.pos=1,Ie=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-Ie)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Je=this.situation.ease(this.pos);for(var Nt in this.situation.once)Nt>this.lastPos&&Nt<=Je&&(this.situation.once[Nt].call(this.target(),this.pos,Je),delete this.situation.once[Nt]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Je,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Je,this):this},eachAt:function(){var Y,ne=this,be=this.target(),Ie=this.situation;for(var Je in Ie.animations)Y=[].concat(Ie.animations[Je]).map(function(Xt){return"string"!=typeof Xt&&Xt.at?Xt.at(Ie.ease(ne.pos),ne.pos):Xt}),be[Je].apply(be,Y);for(var Je in Ie.attrs)Y=[Je].concat(Ie.attrs[Je]).map(function(gn){return"string"!=typeof gn&&gn.at?gn.at(Ie.ease(ne.pos),ne.pos):gn}),be.attr.apply(be,Y);for(var Je in Ie.styles)Y=[Je].concat(Ie.styles[Je]).map(function(gn){return"string"!=typeof gn&&gn.at?gn.at(Ie.ease(ne.pos),ne.pos):gn}),be.style.apply(be,Y);if(Ie.transforms.length){Y=Ie.initialTransformation,Je=0;for(var Nt=Ie.transforms.length;Je<Nt;Je++){var St=Ie.transforms[Je];St instanceof p.Matrix?Y=St.relative?Y.multiply((new p.Matrix).morph(St).at(Ie.ease(this.pos))):Y.morph(St).at(Ie.ease(this.pos)):(St.relative||St.undo(Y.extract()),Y=Y.multiply(St.at(Ie.ease(this.pos))))}be.matrix(Y)}return this},once:function(Y,ne,be){var Ie=this.last();return be||(Y=Ie.ease(Y)),Ie.once[Y]=ne,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:p.Element,construct:{animate:function(Y,ne,be){return(this.fx||(this.fx=new p.FX(this))).animate(Y,ne,be)},delay:function(Y){return(this.fx||(this.fx=new p.FX(this))).delay(Y)},stop:function(Y,ne){return this.fx&&this.fx.stop(Y,ne),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),p.MorphObj=p.invent({create:function(Y,ne){return p.Color.isColor(ne)?new p.Color(Y).morph(ne):p.regex.delimiter.test(Y)?p.regex.pathLetters.test(Y)?new p.PathArray(Y).morph(ne):new p.Array(Y).morph(ne):p.regex.numberAndUnit.test(ne)?new p.Number(Y).morph(ne):(this.value=Y,void(this.destination=ne))},extend:{at:function(Y,ne){return ne<1?this.value:this.destination},valueOf:function(){return this.value}}}),p.extend(p.FX,{attr:function(Y,ne,be){if("object"===Vt(Y))for(var Ie in Y)this.attr(Ie,Y[Ie]);else this.add(Y,ne,"attrs");return this},plot:function(Y,ne,be,Ie){return 4==arguments.length?this.plot([Y,ne,be,Ie]):this.add("plot",new(this.target().morphArray)(Y))}}),p.Box=p.invent({create:function(Y,ne,be,Ie){if(!("object"!==Vt(Y)||Y instanceof p.Element))return p.Box.call(this,null!=Y.left?Y.left:Y.x,null!=Y.top?Y.top:Y.y,Y.width,Y.height);4==arguments.length&&(this.x=Y,this.y=ne,this.width=be,this.height=Ie),xe(this)}}),p.BBox=p.invent({create:function(Y){if(p.Box.apply(this,[].slice.call(arguments)),Y instanceof p.Element){var ne;try{if(!d.documentElement.contains){for(var be=Y.node;be.parentNode;)be=be.parentNode;if(be!=d)throw new Error("Element not in the dom")}ne=Y.node.getBBox()}catch(Je){if(Y instanceof p.Shape){p.parser.draw||p.prepare();var Ie=Y.clone(p.parser.draw.instance).show();ne=Ie.node.getBBox(),Ie.remove()}else ne={x:Y.node.clientLeft,y:Y.node.clientTop,width:Y.node.clientWidth,height:Y.node.clientHeight}}p.Box.call(this,ne)}},inherit:p.Box,parent:p.Element,construct:{bbox:function(){return new p.BBox(this)}}}),p.BBox.prototype.constructor=p.BBox,p.Matrix=p.invent({create:function(Y){var ne=pe([1,0,0,1,0,0]);Y=null===Y?ne:Y instanceof p.Element?Y.matrixify():"string"==typeof Y?pe(Y.split(p.regex.delimiter).map(parseFloat)):6==arguments.length?pe([].slice.call(arguments)):Array.isArray(Y)?pe(Y):Y&&"object"===Vt(Y)?Y:ne;for(var be=ze.length-1;be>=0;--be)this[ze[be]]=null!=Y[ze[be]]?Y[ze[be]]:ne[ze[be]]},extend:{extract:function(){var Y=ae(this,0,1);ae(this,1,0);var ne=180/Math.PI*Math.atan2(Y.y,Y.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(ne*Math.PI/180)+this.f*Math.sin(ne*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(ne*Math.PI/180)+this.e*Math.sin(-ne*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:ne,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new p.Matrix(this)}},clone:function(){return new p.Matrix(this)},morph:function(Y){return this.destination=new p.Matrix(Y),this},multiply:function(Y){return new p.Matrix(this.native().multiply((ne=Y,ne instanceof p.Matrix||(ne=new p.Matrix(ne)),ne).native()));var ne},inverse:function(){return new p.Matrix(this.native().inverse())},translate:function(Y,ne){return new p.Matrix(this.native().translate(Y||0,ne||0))},native:function(){for(var Y=p.parser.native.createSVGMatrix(),ne=ze.length-1;ne>=0;ne--)Y[ze[ne]]=this[ze[ne]];return Y},toString:function(){return"matrix("+Me(this.a)+","+Me(this.b)+","+Me(this.c)+","+Me(this.d)+","+Me(this.e)+","+Me(this.f)+")"}},parent:p.Element,construct:{ctm:function(){return new p.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof p.Nested){var Y=this.rect(1,1),ne=Y.node.getScreenCTM();return Y.remove(),new p.Matrix(ne)}return new p.Matrix(this.node.getScreenCTM())}}}),p.Point=p.invent({create:function(Y,ne){var be;be=Array.isArray(Y)?{x:Y[0],y:Y[1]}:"object"===Vt(Y)?{x:Y.x,y:Y.y}:null!=Y?{x:Y,y:null!=ne?ne:Y}:{x:0,y:0},this.x=be.x,this.y=be.y},extend:{clone:function(){return new p.Point(this)},morph:function(Y,ne){return this.destination=new p.Point(Y,ne),this}}}),p.extend(p.Element,{point:function(Y,ne){return new p.Point(Y,ne).transform(this.screenCTM().inverse())}}),p.extend(p.Element,{attr:function(Y,ne,be){if(null==Y){for(Y={},be=(ne=this.node.attributes).length-1;be>=0;be--)Y[ne[be].nodeName]=p.regex.isNumber.test(ne[be].nodeValue)?parseFloat(ne[be].nodeValue):ne[be].nodeValue;return Y}if("object"===Vt(Y))for(var Ie in Y)this.attr(Ie,Y[Ie]);else if(null===ne)this.node.removeAttribute(Y);else{if(null==ne)return null==(ne=this.node.getAttribute(Y))?p.defaults.attrs[Y]:p.regex.isNumber.test(ne)?parseFloat(ne):ne;"stroke-width"==Y?this.attr("stroke",parseFloat(ne)>0?this._stroke:null):"stroke"==Y&&(this._stroke=ne),"fill"!=Y&&"stroke"!=Y||(p.regex.isImage.test(ne)&&(ne=this.doc().defs().image(ne,0,0)),ne instanceof p.Image&&(ne=this.doc().defs().pattern(0,0,function(){this.add(ne)}))),"number"==typeof ne?ne=new p.Number(ne):p.Color.isColor(ne)?ne=new p.Color(ne):Array.isArray(ne)&&(ne=new p.Array(ne)),"leading"==Y?this.leading&&this.leading(ne):"string"==typeof be?this.node.setAttributeNS(be,Y,ne.toString()):this.node.setAttribute(Y,ne.toString()),!this.rebuild||"font-size"!=Y&&"x"!=Y||this.rebuild(Y,ne)}return this}}),p.extend(p.Element,{transform:function(Y,ne){var be;return"object"!==Vt(Y)?(be=new p.Matrix(this).extract(),"string"==typeof Y?be[Y]:be):(be=new p.Matrix(this),ne=!!ne||!!Y.relative,null!=Y.a&&(be=ne?be.multiply(new p.Matrix(Y)):new p.Matrix(Y)),this.attr("transform",be))}}),p.extend(p.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(p.regex.transforms).slice(0,-1).map(function(Y){var ne=Y.trim().split("(");return[ne[0],ne[1].split(p.regex.delimiter).map(function(be){return parseFloat(be)})]}).reduce(function(Y,ne){return"matrix"==ne[0]?Y.multiply(pe(ne[1])):Y[ne[0]].apply(Y,ne[1])},new p.Matrix)},toParent:function(Y){if(this==Y)return this;var ne=this.screenCTM(),be=Y.screenCTM().inverse();return this.addTo(Y).untransform().transform(be.multiply(ne)),this},toDoc:function(){return this.toParent(this.doc())}}),p.Transformation=p.invent({create:function(Y,ne){if(arguments.length>1&&"boolean"!=typeof ne)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(Y))for(var be=0,Ie=this.arguments.length;be<Ie;++be)this[this.arguments[be]]=Y[be];else if(Y&&"object"===Vt(Y))for(be=0,Ie=this.arguments.length;be<Ie;++be)this[this.arguments[be]]=Y[this.arguments[be]];this.inversed=!1,!0===ne&&(this.inversed=!0)}}),p.Translate=p.invent({parent:p.Matrix,inherit:p.Transformation,create:function(Y,ne){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),p.extend(p.Element,{style:function(Y,ne){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===Vt(Y))for(var be in Y)this.style(be,Y[be]);else{if(!p.regex.isCss.test(Y))return this.node.style[G(Y)];for(Y=Y.split(/\s*;\s*/).filter(function(Ie){return!!Ie}).map(function(Ie){return Ie.split(/\s*:\s*/)});ne=Y.pop();)this.style(ne[0],ne[1])}else this.node.style[G(Y)]=null===ne||p.regex.isBlank.test(ne)?"":ne;return this}}),p.Parent=p.invent({create:function(Y){this.constructor.call(this,Y)},inherit:p.Element,extend:{children:function(){return p.utils.map(p.utils.filterSVGElements(this.node.childNodes),function(Y){return p.adopt(Y)})},add:function(Y,ne){return null==ne?this.node.appendChild(Y.node):Y.node!=this.node.childNodes[ne]&&this.node.insertBefore(Y.node,this.node.childNodes[ne]),this},put:function(Y,ne){return this.add(Y,ne),Y},has:function(Y){return this.index(Y)>=0},index:function(Y){return[].slice.call(this.node.childNodes).indexOf(Y.node)},get:function(Y){return p.adopt(this.node.childNodes[Y])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(Y,ne){for(var be=this.children(),Ie=0,Je=be.length;Ie<Je;Ie++)be[Ie]instanceof p.Element&&Y.apply(be[Ie],[Ie,be]),ne&&be[Ie]instanceof p.Container&&be[Ie].each(Y,ne);return this},removeElement:function(Y){return this.node.removeChild(Y.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),p.extend(p.Parent,{ungroup:function(Y,ne){return 0===ne||this instanceof p.Defs||this.node==p.parser.draw||(Y=Y||(this instanceof p.Doc?this:this.parent(p.Parent)),ne=ne||1/0,this.each(function(){return this instanceof p.Defs?this:this instanceof p.Parent?this.ungroup(Y,ne-1):this.toParent(Y)}),this.node.firstChild||this.remove()),this},flatten:function(Y,ne){return this.ungroup(Y,ne)}}),p.Container=p.invent({create:function(Y){this.constructor.call(this,Y)},inherit:p.Parent}),p.ViewBox=p.invent({parent:p.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(Y){p.Element.prototype[Y]=function(ne){return p.on(this.node,Y,ne),this}}),p.listeners=[],p.handlerMap=[],p.listenerId=0,p.on=function(Y,ne,be,Ie,Je){var Nt=be.bind(Ie||Y.instance||Y),St=(p.handlerMap.indexOf(Y)+1||p.handlerMap.push(Y))-1,Xt=ne.split(".")[0],gn=ne.split(".")[1]||"*";p.listeners[St]=p.listeners[St]||{},p.listeners[St][Xt]=p.listeners[St][Xt]||{},p.listeners[St][Xt][gn]=p.listeners[St][Xt][gn]||{},be._svgjsListenerId||(be._svgjsListenerId=++p.listenerId),p.listeners[St][Xt][gn][be._svgjsListenerId]=Nt,Y.addEventListener(Xt,Nt,Je||{passive:!0})},p.off=function(Y,ne,be){var Ie=p.handlerMap.indexOf(Y),Je=ne&&ne.split(".")[0],Nt=ne&&ne.split(".")[1],St="";if(-1!=Ie)if(be){if("function"==typeof be&&(be=be._svgjsListenerId),!be)return;p.listeners[Ie][Je]&&p.listeners[Ie][Je][Nt||"*"]&&(Y.removeEventListener(Je,p.listeners[Ie][Je][Nt||"*"][be],!1),delete p.listeners[Ie][Je][Nt||"*"][be])}else if(Nt&&Je){if(p.listeners[Ie][Je]&&p.listeners[Ie][Je][Nt]){for(var Xt in p.listeners[Ie][Je][Nt])p.off(Y,[Je,Nt].join("."),Xt);delete p.listeners[Ie][Je][Nt]}}else if(Nt)for(var gn in p.listeners[Ie])for(var St in p.listeners[Ie][gn])Nt===St&&p.off(Y,[gn,Nt].join("."));else if(Je){if(p.listeners[Ie][Je]){for(var St in p.listeners[Ie][Je])p.off(Y,[Je,St].join("."));delete p.listeners[Ie][Je]}}else{for(var gn in p.listeners[Ie])p.off(Y,gn);delete p.listeners[Ie],delete p.handlerMap[Ie]}},p.extend(p.Element,{on:function(Y,ne,be,Ie){return p.on(this.node,Y,ne,be,Ie),this},off:function(Y,ne){return p.off(this.node,Y,ne),this},fire:function(Y,ne){return this.node.dispatchEvent(Y instanceof ve.Event?Y:Y=new p.CustomEvent(Y,{detail:ne,cancelable:!0})),this._event=Y,this},event:function(){return this._event}}),p.Defs=p.invent({create:"defs",inherit:p.Container}),p.G=p.invent({create:"g",inherit:p.Container,extend:{x:function(Y){return null==Y?this.transform("x"):this.transform({x:Y-this.x()},!0)}},construct:{group:function(){return this.put(new p.G)}}}),p.Doc=p.invent({create:function(Y){Y&&("svg"==(Y="string"==typeof Y?d.getElementById(Y):Y).nodeName?this.constructor.call(this,Y):(this.constructor.call(this,p.create("svg")),Y.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:p.Container,extend:{namespace:function(){return this.attr({xmlns:p.ns,version:"1.1"}).attr("xmlns:xlink",p.xlink,p.xmlns).attr("xmlns:svgjs",p.svgjs,p.xmlns)},defs:function(){var Y;return this._defs||(this._defs=(Y=this.node.getElementsByTagName("defs")[0])?p.adopt(Y):new p.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,p.parser.draw&&!p.parser.draw.parentNode&&this.node.appendChild(p.parser.draw),this},clone:function(Y){this.writeDataToDom();var ne=this.node,be=ge(ne.cloneNode(!0));return Y?(Y.node||Y).appendChild(be.node):ne.parentNode.insertBefore(be.node,ne.nextSibling),be}}}),p.extend(p.Element,{}),p.Gradient=p.invent({create:function(Y){this.constructor.call(this,p.create(Y+"Gradient")),this.type=Y},inherit:p.Container,extend:{at:function(Y,ne,be){return this.put(new p.Stop).update(Y,ne,be)},update:function(Y){return this.clear(),"function"==typeof Y&&Y.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(Y,ne,be){return"transform"==Y&&(Y="gradientTransform"),p.Container.prototype.attr.call(this,Y,ne,be)}},construct:{gradient:function(Y,ne){return this.defs().gradient(Y,ne)}}}),p.extend(p.Gradient,p.FX,{from:function(Y,ne){return this.attr("radial"==(this._target||this).type?{fx:new p.Number(Y),fy:new p.Number(ne)}:{x1:new p.Number(Y),y1:new p.Number(ne)})},to:function(Y,ne){return this.attr("radial"==(this._target||this).type?{cx:new p.Number(Y),cy:new p.Number(ne)}:{x2:new p.Number(Y),y2:new p.Number(ne)})}}),p.extend(p.Defs,{gradient:function(Y,ne){return this.put(new p.Gradient(Y)).update(ne)}}),p.Stop=p.invent({create:"stop",inherit:p.Element,extend:{update:function(Y){return("number"==typeof Y||Y instanceof p.Number)&&(Y={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=Y.opacity&&this.attr("stop-opacity",Y.opacity),null!=Y.color&&this.attr("stop-color",Y.color),null!=Y.offset&&this.attr("offset",new p.Number(Y.offset)),this}}}),p.Pattern=p.invent({create:"pattern",inherit:p.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(Y){return this.clear(),"function"==typeof Y&&Y.call(this,this),this},toString:function(){return this.fill()},attr:function(Y,ne,be){return"transform"==Y&&(Y="patternTransform"),p.Container.prototype.attr.call(this,Y,ne,be)}},construct:{pattern:function(Y,ne,be){return this.defs().pattern(Y,ne,be)}}}),p.extend(p.Defs,{pattern:function(Y,ne,be){return this.put(new p.Pattern).update(be).attr({x:0,y:0,width:Y,height:ne,patternUnits:"userSpaceOnUse"})}}),p.Shape=p.invent({create:function(Y){this.constructor.call(this,Y)},inherit:p.Element}),p.Symbol=p.invent({create:"symbol",inherit:p.Container,construct:{symbol:function(){return this.put(new p.Symbol)}}}),p.Use=p.invent({create:"use",inherit:p.Shape,extend:{element:function(Y,ne){return this.attr("href",(ne||"")+"#"+Y,p.xlink)}},construct:{use:function(Y,ne){return this.put(new p.Use).element(Y,ne)}}}),p.Rect=p.invent({create:"rect",inherit:p.Shape,construct:{rect:function(Y,ne){return this.put(new p.Rect).size(Y,ne)}}}),p.Circle=p.invent({create:"circle",inherit:p.Shape,construct:{circle:function(Y){return this.put(new p.Circle).rx(new p.Number(Y).divide(2)).move(0,0)}}}),p.extend(p.Circle,p.FX,{rx:function(Y){return this.attr("r",Y)},ry:function(Y){return this.rx(Y)}}),p.Ellipse=p.invent({create:"ellipse",inherit:p.Shape,construct:{ellipse:function(Y,ne){return this.put(new p.Ellipse).size(Y,ne).move(0,0)}}}),p.extend(p.Ellipse,p.Rect,p.FX,{rx:function(Y){return this.attr("rx",Y)},ry:function(Y){return this.attr("ry",Y)}}),p.extend(p.Circle,p.Ellipse,{x:function(Y){return null==Y?this.cx()-this.rx():this.cx(Y+this.rx())},y:function(Y){return null==Y?this.cy()-this.ry():this.cy(Y+this.ry())},cx:function(Y){return null==Y?this.attr("cx"):this.attr("cx",Y)},cy:function(Y){return null==Y?this.attr("cy"):this.attr("cy",Y)},width:function(Y){return null==Y?2*this.rx():this.rx(new p.Number(Y).divide(2))},height:function(Y){return null==Y?2*this.ry():this.ry(new p.Number(Y).divide(2))},size:function(Y,ne){var be=K(this,Y,ne);return this.rx(new p.Number(be.width).divide(2)).ry(new p.Number(be.height).divide(2))}}),p.Line=p.invent({create:"line",inherit:p.Shape,extend:{array:function(){return new p.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(Y,ne,be,Ie){return null==Y?this.array():(Y=void 0!==ne?{x1:Y,y1:ne,x2:be,y2:Ie}:new p.PointArray(Y).toLine(),this.attr(Y))},move:function(Y,ne){return this.attr(this.array().move(Y,ne).toLine())},size:function(Y,ne){var be=K(this,Y,ne);return this.attr(this.array().size(be.width,be.height).toLine())}},construct:{line:function(Y,ne,be,Ie){return p.Line.prototype.plot.apply(this.put(new p.Line),null!=Y?[Y,ne,be,Ie]:[0,0,0,0])}}}),p.Polyline=p.invent({create:"polyline",inherit:p.Shape,construct:{polyline:function(Y){return this.put(new p.Polyline).plot(Y||new p.PointArray)}}}),p.Polygon=p.invent({create:"polygon",inherit:p.Shape,construct:{polygon:function(Y){return this.put(new p.Polygon).plot(Y||new p.PointArray)}}}),p.extend(p.Polyline,p.Polygon,{array:function(){return this._array||(this._array=new p.PointArray(this.attr("points")))},plot:function(Y){return null==Y?this.array():this.clear().attr("points","string"==typeof Y?Y:this._array=new p.PointArray(Y))},clear:function(){return delete this._array,this},move:function(Y,ne){return this.attr("points",this.array().move(Y,ne))},size:function(Y,ne){var be=K(this,Y,ne);return this.attr("points",this.array().size(be.width,be.height))}}),p.extend(p.Line,p.Polyline,p.Polygon,{morphArray:p.PointArray,x:function(Y){return null==Y?this.bbox().x:this.move(Y,this.bbox().y)},y:function(Y){return null==Y?this.bbox().y:this.move(this.bbox().x,Y)},width:function(Y){var ne=this.bbox();return null==Y?ne.width:this.size(Y,ne.height)},height:function(Y){var ne=this.bbox();return null==Y?ne.height:this.size(ne.width,Y)}}),p.Path=p.invent({create:"path",inherit:p.Shape,extend:{morphArray:p.PathArray,array:function(){return this._array||(this._array=new p.PathArray(this.attr("d")))},plot:function(Y){return null==Y?this.array():this.clear().attr("d","string"==typeof Y?Y:this._array=new p.PathArray(Y))},clear:function(){return delete this._array,this}},construct:{path:function(Y){return this.put(new p.Path).plot(Y||new p.PathArray)}}}),p.Image=p.invent({create:"image",inherit:p.Shape,extend:{load:function(Y){if(!Y)return this;var ne=this,be=new ve.Image;return p.on(be,"load",function(){p.off(be);var Ie=ne.parent(p.Pattern);null!==Ie&&(0==ne.width()&&0==ne.height()&&ne.size(be.width,be.height),Ie&&0==Ie.width()&&0==Ie.height()&&Ie.size(ne.width(),ne.height()),"function"==typeof ne._loaded&&ne._loaded.call(ne,{width:be.width,height:be.height,ratio:be.width/be.height,url:Y}))}),p.on(be,"error",function(Ie){p.off(be),"function"==typeof ne._error&&ne._error.call(ne,Ie)}),this.attr("href",be.src=this.src=Y,p.xlink)},loaded:function(Y){return this._loaded=Y,this},error:function(Y){return this._error=Y,this}},construct:{image:function(Y,ne,be){return this.put(new p.Image).load(Y).size(ne||0,be||ne||0)}}}),p.Text=p.invent({create:function(){this.constructor.call(this,p.create("text")),this.dom.leading=new p.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",p.defaults.attrs["font-family"])},inherit:p.Shape,extend:{x:function(Y){return null==Y?this.attr("x"):this.attr("x",Y)},text:function(Y){if(void 0===Y){Y="";for(var ne=this.node.childNodes,be=0,Ie=ne.length;be<Ie;++be)0!=be&&3!=ne[be].nodeType&&1==p.adopt(ne[be]).dom.newLined&&(Y+="\n"),Y+=ne[be].textContent;return Y}if(this.clear().build(!0),"function"==typeof Y)Y.call(this,this);else{be=0;for(var Je=(Y=Y.split("\n")).length;be<Je;be++)this.tspan(Y[be]).newLine()}return this.build(!1).rebuild()},size:function(Y){return this.attr("font-size",Y).rebuild()},leading:function(Y){return null==Y?this.dom.leading:(this.dom.leading=new p.Number(Y),this.rebuild())},lines:function(){var Y=(this.textPath&&this.textPath()||this).node,ne=p.utils.map(p.utils.filterSVGElements(Y.childNodes),function(be){return p.adopt(be)});return new p.Set(ne)},rebuild:function(Y){if("boolean"==typeof Y&&(this._rebuild=Y),this._rebuild){var ne=this,be=0,Ie=this.dom.leading*new p.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(ne.textPath()||this.attr("x",ne.attr("x")),"\n"==this.text()?be+=Ie:(this.attr("dy",Ie+be),be=0))}),this.fire("rebuild")}return this},build:function(Y){return this._build=!!Y,this},setData:function(Y){return this.dom=Y,this.dom.leading=new p.Number(Y.leading||1.3),this}},construct:{text:function(Y){return this.put(new p.Text).text(Y)},plain:function(Y){return this.put(new p.Text).plain(Y)}}}),p.Tspan=p.invent({create:"tspan",inherit:p.Shape,extend:{text:function(Y){return null==Y?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof Y?Y.call(this,this):this.plain(Y),this)},dx:function(Y){return this.attr("dx",Y)},dy:function(Y){return this.attr("dy",Y)},newLine:function(){var Y=this.parent(p.Text);return this.dom.newLined=!0,this.dy(Y.dom.leading*Y.attr("font-size")).attr("x",Y.x())}}}),p.extend(p.Text,p.Tspan,{plain:function(Y){return!1===this._build&&this.clear(),this.node.appendChild(d.createTextNode(Y)),this},tspan:function(Y){var ne=(this.textPath&&this.textPath()||this).node,be=new p.Tspan;return!1===this._build&&this.clear(),ne.appendChild(be.node),be.text(Y)},clear:function(){for(var Y=(this.textPath&&this.textPath()||this).node;Y.hasChildNodes();)Y.removeChild(Y.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),p.TextPath=p.invent({create:"textPath",inherit:p.Parent,parent:p.Text,construct:{morphArray:p.PathArray,array:function(){var Y=this.track();return Y?Y.array():null},plot:function(Y){var ne=this.track(),be=null;return ne&&(be=ne.plot(Y)),null==Y?be:this},track:function(){var Y=this.textPath();if(Y)return Y.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return p.adopt(this.node.firstChild)}}}),p.Nested=p.invent({create:function(){this.constructor.call(this,p.create("svg")),this.style("overflow","visible")},inherit:p.Container,construct:{nested:function(){return this.put(new p.Nested)}}});var R={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(Y,ne){return"color"==ne?Y:Y+"-"+ne}};function H(Y,ne,be,Ie){return be+Ie.replace(p.regex.dots," .")}function G(Y){return Y.toLowerCase().replace(/-(.)/g,function(ne,be){return be.toUpperCase()})}function J(Y){return Y.charAt(0).toUpperCase()+Y.slice(1)}function te(Y){var ne=Y.toString(16);return 1==ne.length?"0"+ne:ne}function K(Y,ne,be){if(null==ne||null==be){var Ie=Y.bbox();null==ne?ne=Ie.width/Ie.height*be:null==be&&(be=Ie.height/Ie.width*ne)}return{width:ne,height:be}}function ae(Y,ne,be){return{x:ne*Y.a+be*Y.c+0,y:ne*Y.b+be*Y.d+0}}function pe(Y){return{a:Y[0],b:Y[1],c:Y[2],d:Y[3],e:Y[4],f:Y[5]}}function ge(Y){for(var ne=Y.childNodes.length-1;ne>=0;ne--)Y.childNodes[ne]instanceof ve.SVGElement&&ge(Y.childNodes[ne]);return p.adopt(Y).id(p.eid(Y.nodeName))}function xe(Y){return null==Y.x&&(Y.x=0,Y.y=0,Y.width=0,Y.height=0),Y.w=Y.width,Y.h=Y.height,Y.x2=Y.x+Y.width,Y.y2=Y.y+Y.height,Y.cx=Y.x+Y.width/2,Y.cy=Y.y+Y.height/2,Y}function Me(Y){return Math.abs(Y)>1e-37?Y:0}["fill","stroke"].forEach(function(Y){var ne={};ne[Y]=function(be){if(void 0===be)return this;if("string"==typeof be||p.Color.isRgb(be)||be&&"function"==typeof be.fill)this.attr(Y,be);else for(var Ie=R[Y].length-1;Ie>=0;Ie--)null!=be[R[Y][Ie]]&&this.attr(R.prefix(Y,R[Y][Ie]),be[R[Y][Ie]]);return this},p.extend(p.Element,p.FX,ne)}),p.extend(p.Element,p.FX,{translate:function(Y,ne){return this.transform({x:Y,y:ne})},matrix:function(Y){return this.attr("transform",new p.Matrix(6==arguments.length?[].slice.call(arguments):Y))},opacity:function(Y){return this.attr("opacity",Y)},dx:function(Y){return this.x(new p.Number(Y).plus(this instanceof p.FX?0:this.x()),!0)},dy:function(Y){return this.y(new p.Number(Y).plus(this instanceof p.FX?0:this.y()),!0)}}),p.extend(p.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(Y){return this.node.getPointAtLength(Y)}}),p.Set=p.invent({create:function(Y){Array.isArray(Y)?this.members=Y:this.clear()},extend:{add:function(){for(var Y=[].slice.call(arguments),ne=0,be=Y.length;ne<be;ne++)this.members.push(Y[ne]);return this},remove:function(Y){var ne=this.index(Y);return ne>-1&&this.members.splice(ne,1),this},each:function(Y){for(var ne=0,be=this.members.length;ne<be;ne++)Y.apply(this.members[ne],[ne,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(Y){return this.index(Y)>=0},index:function(Y){return this.members.indexOf(Y)},get:function(Y){return this.members[Y]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(Y){return new p.Set(Y)}}}),p.FX.Set=p.invent({create:function(Y){this.set=Y}}),p.Set.inherit=function(){var Y=[];for(var ne in p.Shape.prototype)"function"==typeof p.Shape.prototype[ne]&&"function"!=typeof p.Set.prototype[ne]&&Y.push(ne);for(var ne in Y.forEach(function(Ie){p.Set.prototype[Ie]=function(){for(var Je=0,Nt=this.members.length;Je<Nt;Je++)this.members[Je]&&"function"==typeof this.members[Je][Ie]&&this.members[Je][Ie].apply(this.members[Je],arguments);return"animate"==Ie?this.fx||(this.fx=new p.FX.Set(this)):this}}),Y=[],p.FX.prototype)"function"==typeof p.FX.prototype[ne]&&"function"!=typeof p.FX.Set.prototype[ne]&&Y.push(ne);Y.forEach(function(be){p.FX.Set.prototype[be]=function(){for(var Ie=0,Je=this.set.members.length;Ie<Je;Ie++)this.set.members[Ie].fx[be].apply(this.set.members[Ie].fx,arguments);return this}})},p.extend(p.Element,{}),p.extend(p.Element,{remember:function(Y,ne){if("object"===Vt(arguments[0]))for(var be in Y)this.remember(be,Y[be]);else{if(1==arguments.length)return this.memory()[Y];this.memory()[Y]=ne}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var Y=arguments.length-1;Y>=0;Y--)delete this.memory()[arguments[Y]];return this},memory:function(){return this._memory||(this._memory={})}}),p.get=function(Y){var ne=d.getElementById(function(be){var Ie=(be||"").toString().match(p.regex.reference);if(Ie)return Ie[1]}(Y)||Y);return p.adopt(ne)},p.select=function(Y,ne){return new p.Set(p.utils.map((ne||d).querySelectorAll(Y),function(be){return p.adopt(be)}))},p.extend(p.Parent,{select:function(Y){return p.select(Y,this.node)}});var ze="abcdef".split("");if("function"!=typeof ve.CustomEvent){var Ke=function(Y,ne){ne=ne||{bubbles:!1,cancelable:!1,detail:void 0};var be=d.createEvent("CustomEvent");return be.initCustomEvent(Y,ne.bubbles,ne.cancelable,ne.detail),be};Ke.prototype=ve.Event.prototype,p.CustomEvent=Ke}else p.CustomEvent=ve.CustomEvent;return p},void 0!==(s=function(){return qe(De,De.document)}.call(_n,nt,_n,ai))&&(ai.exports=s),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(R,H){return this.add(R,H),!R.attr("in")&&this.autoSetIn&&R.attr("in",this.source),R.attr("result")||R.attr("result",R),R},blend:function(R,H,G){return this.put(new SVG.BlendEffect(R,H,G))},colorMatrix:function(R,H){return this.put(new SVG.ColorMatrixEffect(R,H))},convolveMatrix:function(R){return this.put(new SVG.ConvolveMatrixEffect(R))},componentTransfer:function(R){return this.put(new SVG.ComponentTransferEffect(R))},composite:function(R,H,G){return this.put(new SVG.CompositeEffect(R,H,G))},flood:function(R,H){return this.put(new SVG.FloodEffect(R,H))},offset:function(R,H){return this.put(new SVG.OffsetEffect(R,H))},image:function(R){return this.put(new SVG.ImageEffect(R))},merge:function(){var R=[void 0];for(var H in arguments)R.push(arguments[H]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,R)))},gaussianBlur:function(R,H){return this.put(new SVG.GaussianBlurEffect(R,H))},morphology:function(R,H){return this.put(new SVG.MorphologyEffect(R,H))},diffuseLighting:function(R,H,G){return this.put(new SVG.DiffuseLightingEffect(R,H,G))},displacementMap:function(R,H,G,J,te){return this.put(new SVG.DisplacementMapEffect(R,H,G,J,te))},specularLighting:function(R,H,G,J){return this.put(new SVG.SpecularLightingEffect(R,H,G,J))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(R,H,G,J,te){return this.put(new SVG.TurbulenceEffect(R,H,G,J,te))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(R){var H=this.put(new SVG.Filter);return"function"==typeof R&&R.call(H,H),H}}),SVG.extend(SVG.Container,{filter:function(R){return this.defs().filter(R)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(R){return this.filterer=R instanceof SVG.Element?R:this.doc().filter(R),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(R){return this.filterer&&!0===R&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(R){return null==R?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",R)},result:function(R){return null==R?this.attr("result"):this.attr("result",R)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(R){return null==R?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",R)},result:function(R){return null==R?this.attr("result"):this.attr("result",R)},toString:function(){return this.result()}}});var ve={blend:function(R,H){return this.parent()&&this.parent().blend(this,R,H)},colorMatrix:function(R,H){return this.parent()&&this.parent().colorMatrix(R,H).in(this)},convolveMatrix:function(R){return this.parent()&&this.parent().convolveMatrix(R).in(this)},componentTransfer:function(R){return this.parent()&&this.parent().componentTransfer(R).in(this)},composite:function(R,H){return this.parent()&&this.parent().composite(this,R,H)},flood:function(R,H){return this.parent()&&this.parent().flood(R,H)},offset:function(R,H){return this.parent()&&this.parent().offset(R,H).in(this)},image:function(R){return this.parent()&&this.parent().image(R)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(R,H){return this.parent()&&this.parent().gaussianBlur(R,H).in(this)},morphology:function(R,H){return this.parent()&&this.parent().morphology(R,H).in(this)},diffuseLighting:function(R,H,G){return this.parent()&&this.parent().diffuseLighting(R,H,G).in(this)},displacementMap:function(R,H,G,J){return this.parent()&&this.parent().displacementMap(this,R,H,G,J)},specularLighting:function(R,H,G,J){return this.parent()&&this.parent().specularLighting(R,H,G,J).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(R,H,G,J,te){return this.parent()&&this.parent().turbulence(R,H,G,J,te).in(this)}};SVG.extend(SVG.Effect,ve),SVG.extend(SVG.ParentEffect,ve),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(R){this.attr("in",R)}}});var d={blend:function(R,H,G){this.attr({in:R,in2:H,mode:G||"normal"})},colorMatrix:function(R,H){"matrix"==R&&(H=C(H)),this.attr({type:R,values:void 0===H?null:H})},convolveMatrix:function(R){R=C(R),this.attr({order:Math.sqrt(R.split(" ").length),kernelMatrix:R})},composite:function(R,H,G){this.attr({in:R,in2:H,operator:G})},flood:function(R,H){this.attr("flood-color",R),null!=H&&this.attr("flood-opacity",H)},offset:function(R,H){this.attr({dx:R,dy:H})},image:function(R){this.attr("href",R,SVG.xlink)},displacementMap:function(R,H,G,J,te){this.attr({in:R,in2:H,scale:G,xChannelSelector:J,yChannelSelector:te})},gaussianBlur:function(R,H){this.attr("stdDeviation",null!=R||null!=H?M(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(R,H){this.attr({operator:R,radius:H})},tile:function(){},turbulence:function(R,H,G,J,te){this.attr({numOctaves:H,seed:G,stitchTiles:J,baseFrequency:R,type:te})}},p={merge:function(){var R;if(arguments[0]instanceof SVG.Set){var H=this;arguments[0].each(function(J){this instanceof SVG.MergeNode?H.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&H.put(new SVG.MergeNode(this))})}else{R=Array.isArray(arguments[0])?arguments[0]:arguments;for(var G=0;G<R.length;G++)R[G]instanceof SVG.MergeNode?this.put(R[G]):this.put(new SVG.MergeNode(R[G]))}},componentTransfer:function(R){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(G){this[G]=new(SVG["Func"+G.toUpperCase()])("identity"),this.rgb.add(this[G]),this.node.appendChild(this[G].node)}.bind(this)),R)for(var H in R.rgb&&(["r","g","b"].forEach(function(G){this[G].attr(R.rgb)}.bind(this)),delete R.rgb),R)this[H].attr(R[H])},diffuseLighting:function(R,H,G){this.attr({surfaceScale:R,diffuseConstant:H,kernelUnitLength:G})},specularLighting:function(R,H,G,J){this.attr({surfaceScale:R,diffuseConstant:H,specularExponent:G,kernelUnitLength:J})}},y={distantLight:function(R,H){this.attr({azimuth:R,elevation:H})},pointLight:function(R,H,G){this.attr({x:R,y:H,z:G})},spotLight:function(R,H,G,J,te,K){this.attr({x:R,y:H,z:G,pointsAtX:J,pointsAtY:te,pointsAtZ:K})},mergeNode:function(R){this.attr("in",R)}};function C(R){return Array.isArray(R)&&(R=new SVG.Array(R)),R.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function M(R){if(!Array.isArray(R))return R;for(var H=0,G=R.length,J=[];H<G;H++)J.push(R[H]);return J.join(" ")}function L(){var R=function(){};for(var H in"function"==typeof arguments[arguments.length-1]&&(R=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var G in arguments[H])R(arguments[H][G],G,arguments[H])}["r","g","b","a"].forEach(function(R){y["Func"+R.toUpperCase()]=function(H){switch(this.attr("type",H),H){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),L(d,function(R,H){var G=H.charAt(0).toUpperCase()+H.slice(1);SVG[G+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+G)),R.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),L(p,function(R,H){var G=H.charAt(0).toUpperCase()+H.slice(1);SVG[G+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+G)),R.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),L(y,function(R,H){var G=H.charAt(0).toUpperCase()+H.slice(1);SVG[G]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+G)),R.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(R){return R instanceof SVG.MergeNode?this.add(R,0):this.add(new SVG.MergeNode(R),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(R){return null==R?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",R)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function ve(M,L,R,H,G,J,te){for(var K=M.slice(L,R||te),ae=H.slice(G,J||te),pe=0,ge={pos:[0,0],start:[0,0]},xe={pos:[0,0],start:[0,0]};K[pe]=d.call(ge,K[pe]),ae[pe]=d.call(xe,ae[pe]),K[pe][0]!=ae[pe][0]||"M"==K[pe][0]||"A"==K[pe][0]&&(K[pe][4]!=ae[pe][4]||K[pe][5]!=ae[pe][5])?(Array.prototype.splice.apply(K,[pe,1].concat(y.call(ge,K[pe]))),Array.prototype.splice.apply(ae,[pe,1].concat(y.call(xe,ae[pe])))):(K[pe]=p.call(ge,K[pe]),ae[pe]=p.call(xe,ae[pe])),++pe!=K.length||pe!=ae.length;)pe==K.length&&K.push(["C",ge.pos[0],ge.pos[1],ge.pos[0],ge.pos[1],ge.pos[0],ge.pos[1]]),pe==ae.length&&ae.push(["C",xe.pos[0],xe.pos[1],xe.pos[0],xe.pos[1],xe.pos[0],xe.pos[1]]);return{start:K,dest:ae}}function d(M){switch(M[0]){case"z":case"Z":M[0]="L",M[1]=this.start[0],M[2]=this.start[1];break;case"H":M[0]="L",M[2]=this.pos[1];break;case"V":M[0]="L",M[2]=M[1],M[1]=this.pos[0];break;case"T":M[0]="Q",M[3]=M[1],M[4]=M[2],M[1]=this.reflection[1],M[2]=this.reflection[0];break;case"S":M[0]="C",M[6]=M[4],M[5]=M[3],M[4]=M[2],M[3]=M[1],M[2]=this.reflection[1],M[1]=this.reflection[0]}return M}function p(M){var L=M.length;return this.pos=[M[L-2],M[L-1]],-1!="SCQT".indexOf(M[0])&&(this.reflection=[2*this.pos[0]-M[L-4],2*this.pos[1]-M[L-3]]),M}function y(M){var L=[M];switch(M[0]){case"M":return this.pos=this.start=[M[1],M[2]],L;case"L":M[5]=M[3]=M[1],M[6]=M[4]=M[2],M[1]=this.pos[0],M[2]=this.pos[1];break;case"Q":M[6]=M[4],M[5]=M[3],M[4]=1*M[4]/3+2*M[2]/3,M[3]=1*M[3]/3+2*M[1]/3,M[2]=1*this.pos[1]/3+2*M[2]/3,M[1]=1*this.pos[0]/3+2*M[1]/3;break;case"A":M=(L=function(R,H){var G,J,te,K,ae,pe,ge,xe,Me,ze,Ke,Y,ne,be,Ie,Je,Nt,St,Xt,gn,hn,Kn,Bi,zn,ti,ar,vo=Math.abs(H[1]),Mr=Math.abs(H[2]),Wi=H[3]%360,Ro=H[4],Sr=H[5],vs=H[6],Hs=H[7],ro=new SVG.Point(R),Vo=new SVG.Point(vs,Hs),bu=[];if(0===vo||0===Mr||ro.x===Vo.x&&ro.y===Vo.y)return[["C",ro.x,ro.y,Vo.x,Vo.y,Vo.x,Vo.y]];for((J=(G=new SVG.Point((ro.x-Vo.x)/2,(ro.y-Vo.y)/2).transform((new SVG.Matrix).rotate(Wi))).x*G.x/(vo*vo)+G.y*G.y/(Mr*Mr))>1&&(vo*=J=Math.sqrt(J),Mr*=J),te=(new SVG.Matrix).rotate(Wi).scale(1/vo,1/Mr).rotate(-Wi),ro=ro.transform(te),pe=(K=[(Vo=Vo.transform(te)).x-ro.x,Vo.y-ro.y])[0]*K[0]+K[1]*K[1],ae=Math.sqrt(pe),K[0]/=ae,K[1]/=ae,ge=pe<4?Math.sqrt(1-pe/4):0,Ro===Sr&&(ge*=-1),xe=new SVG.Point((Vo.x+ro.x)/2+ge*-K[1],(Vo.y+ro.y)/2+ge*K[0]),Me=new SVG.Point(ro.x-xe.x,ro.y-xe.y),ze=new SVG.Point(Vo.x-xe.x,Vo.y-xe.y),Ke=Math.acos(Me.x/Math.sqrt(Me.x*Me.x+Me.y*Me.y)),Me.y<0&&(Ke*=-1),Y=Math.acos(ze.x/Math.sqrt(ze.x*ze.x+ze.y*ze.y)),ze.y<0&&(Y*=-1),Sr&&Ke>Y&&(Y+=2*Math.PI),!Sr&&Ke<Y&&(Y-=2*Math.PI),Je=[],Nt=Ke,ne=(Y-Ke)/(be=Math.ceil(2*Math.abs(Ke-Y)/Math.PI)),Ie=4*Math.tan(ne/4)/3,hn=0;hn<=be;hn++)Xt=Math.cos(Nt),St=Math.sin(Nt),gn=new SVG.Point(xe.x+Xt,xe.y+St),Je[hn]=[new SVG.Point(gn.x+Ie*St,gn.y-Ie*Xt),gn,new SVG.Point(gn.x-Ie*St,gn.y+Ie*Xt)],Nt+=ne;for(Je[0][0]=Je[0][1].clone(),Je[Je.length-1][2]=Je[Je.length-1][1].clone(),te=(new SVG.Matrix).rotate(Wi).scale(vo,Mr).rotate(-Wi),hn=0,Kn=Je.length;hn<Kn;hn++)Je[hn][0]=Je[hn][0].transform(te),Je[hn][1]=Je[hn][1].transform(te),Je[hn][2]=Je[hn][2].transform(te);for(hn=1,Kn=Je.length;hn<Kn;hn++)Bi=(gn=Je[hn-1][2]).x,zn=gn.y,ti=(gn=Je[hn][0]).x,ar=gn.y,vs=(gn=Je[hn][1]).x,bu.push(["C",Bi,zn,ti,ar,vs,Hs=gn.y]);return bu}(this.pos,M))[0]}return M[0]="C",this.pos=[M[5],M[6]],this.reflection=[2*M[5]-M[3],2*M[6]-M[4]],L}function C(M,L){if(!1===L)return!1;for(var R=L,H=M.length;R<H;++R)if("M"==M[R][0])return R;return!1}SVG.extend(SVG.PathArray,{morph:function(M){for(var L=this.value,R=this.parse(M),H=0,G=0,J=!1,te=!1;!1!==H||!1!==G;){var K;J=C(L,!1!==H&&H+1),te=C(R,!1!==G&&G+1),!1===H&&(H=0==(K=new SVG.PathArray(ae.start).bbox()).height||0==K.width?L.push(L[0])-1:L.push(["M",K.x+K.width/2,K.y+K.height/2])-1),!1===G&&(G=0==(K=new SVG.PathArray(ae.dest).bbox()).height||0==K.width?R.push(R[0])-1:R.push(["M",K.x+K.width/2,K.y+K.height/2])-1);var ae=ve(L,H,J,R,G,te);L=L.slice(0,H).concat(ae.start,!1===J?[]:L.slice(J)),R=R.slice(0,G).concat(ae.dest,!1===te?[]:R.slice(te)),H=!1!==J&&H+ae.start.length,G=!1!==te&&G+ae.dest.length}return this.value=L,this.destination=new SVG.PathArray,this.destination.value=R,this}})}(),function(){function ve(d){d.remember("_draggable",this),this.el=d}ve.prototype.init=function(d,p){var y=this;this.constraint=d,this.value=p,this.el.on("mousedown.drag",function(C){y.start(C)}),this.el.on("touchstart.drag",function(C){y.start(C)})},ve.prototype.transformPoint=function(d,p){var y=(d=d||window.event).changedTouches&&d.changedTouches[0]||d;return this.p.x=y.clientX-(p||0),this.p.y=y.clientY,this.p.matrixTransform(this.m)},ve.prototype.getBBox=function(){var d=this.el.bbox();return this.el instanceof SVG.Nested&&(d=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(d.x=this.el.x(),d.y=this.el.y()),d},ve.prototype.start=function(d){if("click"!=d.type&&"mousedown"!=d.type&&"mousemove"!=d.type||1==(d.which||d.buttons)){var p=this;if(this.el.fire("beforedrag",{event:d,handler:this}),!this.el.event().defaultPrevented){d.preventDefault(),d.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var y,C=this.getBBox();if(this.el instanceof SVG.Text)switch(y=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":y/=2;break;case"start":y=0}this.startPoints={point:this.transformPoint(d,y),box:C,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(M){p.drag(M)}),SVG.on(window,"touchmove.drag",function(M){p.drag(M)}),SVG.on(window,"mouseup.drag",function(M){p.end(M)}),SVG.on(window,"touchend.drag",function(M){p.end(M)}),this.el.fire("dragstart",{event:d,p:this.startPoints.point,m:this.m,handler:this})}}},ve.prototype.drag=function(d){var p=this.getBBox(),y=this.transformPoint(d),C=this.startPoints.box.x+y.x-this.startPoints.point.x,M=this.startPoints.box.y+y.y-this.startPoints.point.y,L=this.constraint,R=y.x-this.startPoints.point.x,H=y.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:d,p:y,m:this.m,handler:this}),this.el.event().defaultPrevented)return y;if("function"==typeof L){var G=L.call(this.el,C,M,this.m);"boolean"==typeof G&&(G={x:G,y:G}),!0===G.x?this.el.x(C):!1!==G.x&&this.el.x(G.x),!0===G.y?this.el.y(M):!1!==G.y&&this.el.y(G.y)}else"object"==typeof L&&(null!=L.minX&&C<L.minX?R=(C=L.minX)-this.startPoints.box.x:null!=L.maxX&&C>L.maxX-p.width&&(R=(C=L.maxX-p.width)-this.startPoints.box.x),null!=L.minY&&M<L.minY?H=(M=L.minY)-this.startPoints.box.y:null!=L.maxY&&M>L.maxY-p.height&&(H=(M=L.maxY-p.height)-this.startPoints.box.y),null!=L.snapToGrid&&(C-=C%L.snapToGrid,M-=M%L.snapToGrid,R-=R%L.snapToGrid,H-=H%L.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:R,y:H},!0):this.el.move(C,M));return y},ve.prototype.end=function(d){var p=this.drag(d);this.el.fire("dragend",{event:d,p,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(d,p){"function"!=typeof d&&"object"!=typeof d||(p=d,d=!0);var y=this.remember("_draggable")||new ve(this);return(d=void 0===d||d)?y.init(p||{},d):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function ve(d){this.el=d,d.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(p,y,C){var M="string"!=typeof p?p:y[p];return C?M/2:M},this.pointCoords=function(p,y){var C=this.pointsList[p];return{x:this.pointCoord(C[0],y,"t"===p||"b"===p),y:this.pointCoord(C[1],y,"r"===p||"l"===p)}}}ve.prototype.init=function(d,p){var y=this.el.bbox();this.options={};var C=this.el.selectize.defaults.points;for(var M in this.el.selectize.defaults)this.options[M]=this.el.selectize.defaults[M],void 0!==p[M]&&(this.options[M]=p[M]);var L=["points","pointsExclude"];for(var M in L){var R=this.options[L[M]];"string"==typeof R?R=R.length>0?R.split(/\s*,\s*/i):[]:"boolean"==typeof R&&"points"===L[M]&&(R=R?C:[]),this.options[L[M]]=R}this.options.points=[C,this.options.points].reduce(function(H,G){return H.filter(function(J){return G.indexOf(J)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(H,G){return H.filter(function(J){return G.indexOf(J)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(y.x,y.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(d):this.selectRect(d),this.observe(),this.cleanup()},ve.prototype.selectPoints=function(d){return this.pointSelection.isSelected=d,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},ve.prototype.getPointArray=function(){var d=this.el.bbox();return this.el.array().valueOf().map(function(p){return[p[0]-d.x,p[1]-d.y]})},ve.prototype.drawPoints=function(){for(var d=this,p=this.getPointArray(),y=0,C=p.length;y<C;++y){var M=function(R){return function(H){(H=H||window.event).preventDefault?H.preventDefault():H.returnValue=!1,H.stopPropagation(),d.el.fire("point",{x:H.pageX||H.touches[0].pageX,y:H.pageY||H.touches[0].pageY,i:R,event:H})}}(y),L=this.drawPoint(p[y][0],p[y][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",M).on("mousedown",M);this.pointSelection.set.add(L)}},ve.prototype.drawPoint=function(d,p){var y=this.options.pointType;switch(y){case"circle":return this.drawCircle(d,p);case"rect":return this.drawRect(d,p);default:if("function"==typeof y)return y.call(this,d,p);throw new Error("Unknown "+y+" point type!")}},ve.prototype.drawCircle=function(d,p){return this.nested.circle(this.options.pointSize).center(d,p)},ve.prototype.drawRect=function(d,p){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(d,p)},ve.prototype.updatePointSelection=function(){var d=this.getPointArray();this.pointSelection.set.each(function(p){this.cx()===d[p][0]&&this.cy()===d[p][1]||this.center(d[p][0],d[p][1])})},ve.prototype.updateRectSelection=function(){var d=this,p=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:p.width,height:p.height}),this.options.points.length&&this.options.points.map(function(C,M){var L=d.pointCoords(C,p);d.rectSelection.set.get(M+1).center(L.x,L.y)}),this.options.rotationPoint){var y=this.rectSelection.set.length();this.rectSelection.set.get(y-1).center(p.width/2,20)}},ve.prototype.selectRect=function(d){var p=this,y=this.el.bbox();function C(R){return function(H){(H=H||window.event).preventDefault?H.preventDefault():H.returnValue=!1,H.stopPropagation(),p.el.fire(R,{x:H.pageX||H.touches[0].pageX,y:H.pageY||H.touches[0].pageY,event:H})}}if(this.rectSelection.isSelected=d,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(y.width,y.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(R,H){var G=p.pointCoords(R,y),J=p.drawPoint(G.x,G.y).attr("class",p.options.classPoints+"_"+R).on("mousedown",C(R)).on("touchstart",C(R));p.rectSelection.set.add(J)}),this.rectSelection.set.each(function(){this.addClass(p.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var M=function(R){(R=R||window.event).preventDefault?R.preventDefault():R.returnValue=!1,R.stopPropagation(),p.el.fire("rot",{x:R.pageX||R.touches[0].pageX,y:R.pageY||R.touches[0].pageY,event:R})},L=this.drawPoint(y.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",M).on("mousedown",M);this.rectSelection.set.add(L)}},ve.prototype.handler=function(){var d=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(d.x,d.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},ve.prototype.observe=function(){var d=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){d.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(p){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){d.handler()})},ve.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(d,p){return"object"==typeof d&&(p=d,d=!0),(this.remember("_selectHandler")||new ve(this)).init(void 0===d||d,p||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function ve(d){d.remember("_resizeHandler",this),this.el=d,this.parameters={},this.lastUpdateCall=null,this.p=d.doc().node.createSVGPoint()}ve.prototype.transformPoint=function(d,p,y){return this.p.x=d-(this.offset.x-window.pageXOffset),this.p.y=p-(this.offset.y-window.pageYOffset),this.p.matrixTransform(y||this.m)},ve.prototype._extractPosition=function(d){return{x:null!=d.clientX?d.clientX:d.touches[0].clientX,y:null!=d.clientY?d.clientY:d.touches[0].clientY}},ve.prototype.init=function(d){var p=this;if(this.stop(),"stop"!==d){for(var y in this.options={},this.el.resize.defaults)this.options[y]=this.el.resize.defaults[y],void 0!==d[y]&&(this.options[y]=d[y]);this.el.on("lt.resize",function(C){p.resize(C||window.event)}),this.el.on("rt.resize",function(C){p.resize(C||window.event)}),this.el.on("rb.resize",function(C){p.resize(C||window.event)}),this.el.on("lb.resize",function(C){p.resize(C||window.event)}),this.el.on("t.resize",function(C){p.resize(C||window.event)}),this.el.on("r.resize",function(C){p.resize(C||window.event)}),this.el.on("b.resize",function(C){p.resize(C||window.event)}),this.el.on("l.resize",function(C){p.resize(C||window.event)}),this.el.on("rot.resize",function(C){p.resize(C||window.event)}),this.el.on("point.resize",function(C){p.resize(C||window.event)}),this.update()}},ve.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},ve.prototype.resize=function(d){var p=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var y=this._extractPosition(d.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(y.x,y.y),x:d.detail.x,y:d.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==d.detail.i){var C=this.el.array().valueOf();this.parameters.i=d.detail.i,this.parameters.pointCoords=[C[d.detail.i][0],C[d.detail.i][1]]}switch(d.type){case"lt":this.calc=function(M,L){var R=this.snapToGrid(M,L);if(this.parameters.box.width-R[0]>0&&this.parameters.box.height-R[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+R[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-R[0]);R=this.checkAspectRatio(R),this.el.move(this.parameters.box.x+R[0],this.parameters.box.y+R[1]).size(this.parameters.box.width-R[0],this.parameters.box.height-R[1])}};break;case"rt":this.calc=function(M,L){var R=this.snapToGrid(M,L,2);if(this.parameters.box.width+R[0]>0&&this.parameters.box.height-R[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-R[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+R[0]);R=this.checkAspectRatio(R,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+R[1]).size(this.parameters.box.width+R[0],this.parameters.box.height-R[1])}};break;case"rb":this.calc=function(M,L){var R=this.snapToGrid(M,L,0);if(this.parameters.box.width+R[0]>0&&this.parameters.box.height+R[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-R[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+R[0]);R=this.checkAspectRatio(R),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+R[0],this.parameters.box.height+R[1])}};break;case"lb":this.calc=function(M,L){var R=this.snapToGrid(M,L,1);if(this.parameters.box.width-R[0]>0&&this.parameters.box.height+R[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+R[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-R[0]);R=this.checkAspectRatio(R,!0),this.el.move(this.parameters.box.x+R[0],this.parameters.box.y).size(this.parameters.box.width-R[0],this.parameters.box.height+R[1])}};break;case"t":this.calc=function(M,L){var R=this.snapToGrid(M,L,2);if(this.parameters.box.height-R[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+R[1]).height(this.parameters.box.height-R[1])}};break;case"r":this.calc=function(M,L){var R=this.snapToGrid(M,L,0);if(this.parameters.box.width+R[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+R[0])}};break;case"b":this.calc=function(M,L){var R=this.snapToGrid(M,L,0);if(this.parameters.box.height+R[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+R[1])}};break;case"l":this.calc=function(M,L){var R=this.snapToGrid(M,L,1);if(this.parameters.box.width-R[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+R[0],this.parameters.box.y).width(this.parameters.box.width-R[0])}};break;case"rot":this.calc=function(M,L){var R=M+this.parameters.p.x,H=L+this.parameters.p.y,G=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),J=Math.atan2(H-this.parameters.box.y-this.parameters.box.height/2,R-this.parameters.box.x-this.parameters.box.width/2),te=this.parameters.rotation+180*(J-G)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(te-te%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(M,L){var R=this.snapToGrid(M,L,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),H=this.el.array().valueOf();H[this.parameters.i][0]=this.parameters.pointCoords[0]+R[0],H[this.parameters.i][1]=this.parameters.pointCoords[1]+R[1],this.el.plot(H)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:d}),SVG.on(window,"touchmove.resize",function(M){p.update(M||window.event)}),SVG.on(window,"touchend.resize",function(){p.done()}),SVG.on(window,"mousemove.resize",function(M){p.update(M||window.event)}),SVG.on(window,"mouseup.resize",function(){p.done()})},ve.prototype.update=function(d){if(d){var p=this._extractPosition(d),y=this.transformPoint(p.x,p.y),C=y.x-this.parameters.p.x,M=y.y-this.parameters.p.y;this.lastUpdateCall=[C,M],this.calc(C,M),this.el.fire("resizing",{dx:C,dy:M,event:d})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},ve.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},ve.prototype.snapToGrid=function(d,p,y,C){var M;return M=void 0!==C?[(y+d)%this.options.snapToGrid,(C+p)%this.options.snapToGrid]:[(this.parameters.box.x+d+(1&(y=null==y?3:y)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+p+(2&y?0:this.parameters.box.height))%this.options.snapToGrid],d<0&&(M[0]-=this.options.snapToGrid),p<0&&(M[1]-=this.options.snapToGrid),d-=Math.abs(M[0])<this.options.snapToGrid/2?M[0]:M[0]-(d<0?-this.options.snapToGrid:this.options.snapToGrid),p-=Math.abs(M[1])<this.options.snapToGrid/2?M[1]:M[1]-(p<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(d,p,y,C)},ve.prototype.constraintToBox=function(d,p,y,C){var M,L,R=this.options.constraint||{};return void 0!==C?(M=y,L=C):(M=this.parameters.box.x+(1&y?0:this.parameters.box.width),L=this.parameters.box.y+(2&y?0:this.parameters.box.height)),void 0!==R.minX&&M+d<R.minX&&(d=R.minX-M),void 0!==R.maxX&&M+d>R.maxX&&(d=R.maxX-M),void 0!==R.minY&&L+p<R.minY&&(p=R.minY-L),void 0!==R.maxY&&L+p>R.maxY&&(p=R.maxY-L),[d,p]},ve.prototype.checkAspectRatio=function(d,p){if(!this.options.saveAspectRatio)return d;var y=d.slice(),C=this.parameters.box.width/this.parameters.box.height,M=this.parameters.box.width+d[0],L=this.parameters.box.height-d[1],R=M/L;return R<C?(y[1]=M/C-this.parameters.box.height,p&&(y[1]=-y[1])):R>C&&(y[0]=this.parameters.box.width-L*C,p&&(y[0]=-y[0])),y},SVG.extend(SVG.Element,{resize:function(d){return(this.remember("_resizeHandler")||new ve(this)).init(d||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),function(ve,d){void 0===d&&(d={});var p=d.insertAt;if("undefined"!=typeof document){var y=document.head||document.getElementsByTagName("head")[0],C=document.createElement("style");C.type="text/css","top"===p&&y.firstChild?y.insertBefore(C,y.firstChild):y.appendChild(C),C.styleSheet?C.styleSheet.cssText=ve:C.appendChild(document.createTextNode(ve))}}('.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}'),function(){function ve(K){var ae=K.__resizeTriggers__,pe=ae.firstElementChild,ge=ae.lastElementChild,xe=pe?pe.firstElementChild:null;ge&&(ge.scrollLeft=ge.scrollWidth,ge.scrollTop=ge.scrollHeight),xe&&(xe.style.width=pe.offsetWidth+1+"px",xe.style.height=pe.offsetHeight+1+"px"),pe&&(pe.scrollLeft=pe.scrollWidth,pe.scrollTop=pe.scrollHeight)}function d(K){var ae=this;ve(this),this.__resizeRAF__&&M(this.__resizeRAF__),this.__resizeRAF__=C(function(){var pe;((pe=ae).offsetWidth!=pe.__resizeLast__.width||pe.offsetHeight!=pe.__resizeLast__.height)&&(ae.__resizeLast__.width=ae.offsetWidth,ae.__resizeLast__.height=ae.offsetHeight,ae.__resizeListeners__.forEach(function(pe){pe.call(K)}))})}var p,y,C=(p=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(K){return window.setTimeout(K,20)},function(K){return p(K)}),M=(y=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(K){return y(K)}),L=!1,R="animationstart",H="Webkit Moz O ms".split(" "),G="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),J=document.createElement("fakeelement");if(void 0!==J.style.animationName&&(L=!0),!1===L)for(var te=0;te<H.length;te++)if(void 0!==J.style[H[te]+"AnimationName"]){R=G[te];break}window.addResizeListener=function(K,ae){K.__resizeTriggers__||("static"==getComputedStyle(K).position&&(K.style.position="relative"),K.__resizeLast__={},K.__resizeListeners__=[],(K.__resizeTriggers__=document.createElement("div")).className="resize-triggers",K.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',K.appendChild(K.__resizeTriggers__),ve(K),K.addEventListener("scroll",d,!0),R&&K.__resizeTriggers__.addEventListener(R,function(pe){"resizeanim"==pe.animationName&&ve(K)})),K.__resizeListeners__.push(ae)},window.removeResizeListener=function(K,ae){K&&(K.__resizeListeners__.splice(K.__resizeListeners__.indexOf(ae),1),K.__resizeListeners__.length||(K.removeEventListener("scroll",d),K.__resizeTriggers__.parentNode&&(K.__resizeTriggers__=!K.removeChild(K.__resizeTriggers__))))}}(),void 0===window.Apex&&(window.Apex={});var xt=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new On(this.ctx),this.ctx.axes=new Po(this.ctx),this.ctx.core=new Ot(this.ctx.el,this.ctx),this.ctx.config=new jn({}),this.ctx.data=new qi(this.ctx),this.ctx.grid=new As(this.ctx),this.ctx.graphics=new Mt(this.ctx),this.ctx.coreUtils=new Vn(this.ctx),this.ctx.crosshairs=new Yn(this.ctx),this.ctx.events=new Si(this.ctx),this.ctx.exports=new io(this.ctx),this.ctx.localization=new uo(this.ctx),this.ctx.options=new nr,this.ctx.responsive=new xr(this.ctx),this.ctx.series=new Fn(this.ctx),this.ctx.theme=new Hr(this.ctx),this.ctx.formatters=new Io(this.ctx),this.ctx.titleSubtitle=new wr(this.ctx),this.ctx.legend=new $n(this.ctx),this.ctx.toolbar=new Ei(this.ctx),this.ctx.dimensions=new rs(this.ctx),this.ctx.updateHelpers=new Pt(this.ctx),this.ctx.zoomPanSelection=new Bl(this.ctx),this.ctx.w.globals.tooltip=new dt(this.ctx)}}]),ve}(),Ft=function(){function ve(d){Ee(this,ve),this.ctx=d,this.w=d.w}return gt(ve,[{key:"clear",value:function(d){var p=d.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:p})}},{key:"killSVG",value:function(d){d.each(function(p,y){this.removeClass("*"),this.off(),this.stop()},!0),d.ungroup(),d.clear()}},{key:"clearDomElements",value:function(d){var p=this,C=this.w.globals.dom.Paper.node;C.parentNode&&C.parentNode.parentNode&&!d.isUpdating&&(C.parentNode.parentNode.style.minHeight="unset");var M=this.w.globals.dom.baseEl;M&&this.ctx.eventList.forEach(function(R){M.removeEventListener(R,p.ctx.events.documentEvent)});var L=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(L.Paper),L.Paper.remove(),L.elWrap=null,L.elGraphical=null,L.elAnnotations=null,L.elLegendWrap=null,L.baseEl=null,L.elGridRect=null,L.elGridRectMask=null,L.elGridRectMarkerMask=null,L.elForecastMask=null,L.elNonForecastMask=null,L.elDefs=null}}]),ve}(),tn=function(){function ve(d,p){Ee(this,ve),this.opts=p,this.ctx=this,this.w=new li(p).init(),this.el=d,this.w.globals.cuid=Qe.randomId(),this.w.globals.chartID=this.w.config.chart.id?Qe.escapeString(this.w.config.chart.id):this.w.globals.cuid,new xt(this).initModules(),this.create=Qe.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return gt(ve,[{key:"render",value:function(){var d=this;return new Promise(function(p,y){if(null!==d.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),d.w.config.chart.id&&Apex._chartInstances.push({id:d.w.globals.chartID,group:d.w.config.chart.group,chart:d}),d.setLocale(d.w.config.chart.defaultLocale);var C=d.w.config.chart.events.beforeMount;"function"==typeof C&&C(d,d.w),d.events.fireEvent("beforeMount",[d,d.w]),window.addEventListener("resize",d.windowResizeHandler),window.addResizeListener(d.el.parentNode,d.parentResizeHandler);var M=d.create(d.w.config.series,{});if(!M)return p(d);d.mount(M).then(function(){"function"==typeof d.w.config.chart.events.mounted&&d.w.config.chart.events.mounted(d,d.w),d.events.fireEvent("mounted",[d,d.w]),p(M)}).catch(function(L){y(L)})}else y(new Error("Element not found"))})}},{key:"create",value:function(d,p){var y=this.w;new xt(this).initModules();var C=this.w.globals;if(C.noData=!1,C.animationEnded=!1,this.responsive.checkResponsiveConfig(p),y.config.xaxis.convertedCatToNumeric&&new Hn(y.config).convertCatToNumericXaxis(y.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===y.config.chart.type&&(y.config.grid.show=!1,y.config.yaxis[0].show=!1),0===C.svgWidth))return C.animationEnded=!0,null;var M=Vn.checkComboSeries(d);C.comboCharts=M.comboCharts,C.comboBarCount=M.comboBarCount;var L=d.every(function(te){return te.data&&0===te.data.length});(0===d.length||L)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(d),this.theme.init(),new $t(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),C.noData&&C.collapsedSeries.length!==C.series.length&&!y.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),C.axisCharts&&(this.core.coreCalculations(),"category"!==y.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=y.globals.minX,this.ctx.toolbar.maxX=y.globals.maxX),this.formatters.heatmapLabelFormatters(),this.dimensions.plotCoords();var R=this.core.xySettings();this.grid.createGridMask();var H=this.core.plotChartType(d,R),G=new fn(this);return G.bringForward(),y.config.dataLabels.background.enabled&&G.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:H,xyRatios:R,elInner:y.globals.dom.elGraphical,dimensions:{plot:{left:y.globals.translateX,top:y.globals.translateY,width:y.globals.gridWidth,height:y.globals.gridHeight}}}}},{key:"mount",value:function(){var d=this,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,y=this,C=y.w;return new Promise(function(M,L){if(null===y.el)return L(new Error("Not enough data to display or target element not found"));(null===p||C.globals.allSeriesCollapsed)&&y.series.handleNoData(),"treemap"!==C.config.chart.type&&y.axes.drawAxis(C.config.chart.type,p.xyRatios),y.grid=new As(y);var R=y.grid.drawGrid();y.annotations=new Zt(y),y.annotations.drawImageAnnos(),y.annotations.drawTextAnnos(),"back"===C.config.grid.position&&R&&C.globals.dom.elGraphical.add(R.el);var H=new Fr(d.ctx),G=new Ni(d.ctx);if(null!==R&&(H.xAxisLabelCorrections(R.xAxisTickWidth),G.setYAxisTextAlignments(),C.config.yaxis.map(function(K,ae){-1===C.globals.ignoreYAxisIndexes.indexOf(ae)&&G.yAxisTitleRotate(ae,K.opposite)})),"back"===C.config.annotations.position&&(C.globals.dom.Paper.add(C.globals.dom.elAnnotations),y.annotations.drawAxesAnnotations()),Array.isArray(p.elGraph))for(var J=0;J<p.elGraph.length;J++)C.globals.dom.elGraphical.add(p.elGraph[J]);else C.globals.dom.elGraphical.add(p.elGraph);if("front"===C.config.grid.position&&R&&C.globals.dom.elGraphical.add(R.el),"front"===C.config.xaxis.crosshairs.position&&y.crosshairs.drawXCrosshairs(),"front"===C.config.yaxis[0].crosshairs.position&&y.crosshairs.drawYCrosshairs(),"front"===C.config.annotations.position&&(C.globals.dom.Paper.add(C.globals.dom.elAnnotations),y.annotations.drawAxesAnnotations()),!C.globals.noData){if(C.config.tooltip.enabled&&!C.globals.noData&&y.w.globals.tooltip.drawTooltip(p.xyRatios),C.globals.axisCharts&&(C.globals.isXNumeric||C.config.xaxis.convertedCatToNumeric||C.globals.isTimelineBar))(C.config.chart.zoom.enabled||C.config.chart.selection&&C.config.chart.selection.enabled||C.config.chart.pan&&C.config.chart.pan.enabled)&&y.zoomPanSelection.init({xyRatios:p.xyRatios});else{var te=C.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(K){te[K]=!1})}C.config.chart.toolbar.show&&!C.globals.allSeriesCollapsed&&y.toolbar.createToolbar()}C.globals.memory.methodsToExec.length>0&&C.globals.memory.methodsToExec.forEach(function(K){K.method(K.params,!1,K.context)}),C.globals.axisCharts||C.globals.noData||y.core.resizeNonAxisCharts(),M(y)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),window.removeResizeListener(this.el.parentNode,this.parentResizeHandler);var d=this.w.config.chart.id;d&&Apex._chartInstances.forEach(function(p,y){p.id===Qe.escapeString(d)&&Apex._chartInstances.splice(y,1)}),new Ft(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(d){var p=this,y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],M=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],L=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],R=this.w;return R.globals.selection=void 0,d.series&&(this.series.resetSeries(!1,!0,!1),d.series.length&&d.series[0].data&&(d.series=d.series.map(function(H,G){return p.updateHelpers._extendSeries(H,G)})),this.updateHelpers.revertDefaultAxisMinMax()),d.xaxis&&(d=this.updateHelpers.forceXAxisUpdate(d)),d.yaxis&&(d=this.updateHelpers.forceYAxisUpdate(d)),R.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),d.theme&&(d=this.theme.updateThemeOptions(d)),this.updateHelpers._updateOptions(d,y,C,M,L)}},{key:"updateSeries",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(d,p,y)}},{key:"appendSeries",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=this.w.config.series.slice();return C.push(d),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(C,p,y)}},{key:"appendData",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=this;y.w.globals.dataChanged=!0,y.series.getPreviousPaths();for(var C=y.w.config.series.slice(),M=0;M<C.length;M++)if(null!=d[M])for(var L=0;L<d[M].data.length;L++)C[M].data.push(d[M].data[L]);return y.w.config.series=C,p&&(y.w.globals.initialSeries=Qe.clone(y.w.config.series)),this.update()}},{key:"update",value:function(d){var p=this;return new Promise(function(y,C){new Ft(p.ctx).clear({isUpdating:!0});var M=p.create(p.w.config.series,d);if(!M)return y(p);p.mount(M).then(function(){"function"==typeof p.w.config.chart.events.updated&&p.w.config.chart.events.updated(p,p.w),p.events.fireEvent("updated",[p,p.w]),p.w.globals.isDirty=!0,y(p)}).catch(function(L){C(L)})})}},{key:"getSyncedCharts",value:function(){var d=this.getGroupedCharts(),p=[this];return d.length&&(p=[],d.forEach(function(y){p.push(y)})),p}},{key:"getGroupedCharts",value:function(){var d=this;return Apex._chartInstances.filter(function(p){if(p.group)return!0}).map(function(p){return d.w.config.chart.group===p.group?p.chart:d})}},{key:"toggleSeries",value:function(d){return this.series.toggleSeries(d)}},{key:"showSeries",value:function(d){this.series.showSeries(d)}},{key:"hideSeries",value:function(d){this.series.hideSeries(d)}},{key:"resetSeries",value:function(){var d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(d,p)}},{key:"addEventListener",value:function(d,p){this.events.addEventListener(d,p)}},{key:"removeEventListener",value:function(d,p){this.events.removeEventListener(d,p)}},{key:"addXaxisAnnotation",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,C=this;y&&(C=y),C.annotations.addXaxisAnnotationExternal(d,p,C)}},{key:"addYaxisAnnotation",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,C=this;y&&(C=y),C.annotations.addYaxisAnnotationExternal(d,p,C)}},{key:"addPointAnnotation",value:function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,C=this;y&&(C=y),C.annotations.addPointAnnotationExternal(d,p,C)}},{key:"clearAnnotations",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,p=this;d&&(p=d),p.annotations.clearAnnotations(p)}},{key:"removeAnnotation",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,y=this;p&&(y=p),y.annotations.removeAnnotation(y,d)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(d,p){return this.coreUtils.getSeriesTotalsXRange(d,p)}},{key:"getHighestValueInSeries",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=new ds(this.ctx);return p.getMinYMaxY(d).highestY}},{key:"getLowestValueInSeries",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=new ds(this.ctx);return p.getMinYMaxY(d).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(d,p){return this.updateHelpers.toggleDataPointSelection(d,p)}},{key:"zoomX",value:function(d,p){this.ctx.toolbar.zoomUpdateOptions(d,p)}},{key:"setLocale",value:function(d){this.localization.setCurrentLocaleValues(d)}},{key:"dataURI",value:function(d){return new io(this.ctx).dataURI(d)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var d=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){d.w.globals.resized=!0,d.w.globals.dataChanged=!1,d.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var d=this.w.config.chart.redrawOnWindowResize;"function"==typeof d&&(d=d()),d&&this._windowResize()}}],[{key:"getChartByID",value:function(d){var p=Qe.escapeString(d),y=Apex._chartInstances.filter(function(C){return C.id===p})[0];return y&&y.chart}},{key:"initOnLoad",value:function(){for(var d=document.querySelectorAll("[data-apexcharts]"),p=0;p<d.length;p++)new ve(d[p],JSON.parse(d[p].getAttribute("data-options"))).render()}},{key:"exec",value:function(d,p){var y=this.getChartByID(d);if(y){y.w.globals.isExecCalled=!0;var C=null;if(-1!==y.publicMethods.indexOf(p)){for(var M=arguments.length,L=new Array(M>2?M-2:0),R=2;R<M;R++)L[R-2]=arguments[R];C=y[p].apply(y,L)}return C}}},{key:"merge",value:function(d,p){return Qe.extend(d,p)}}]),ve}();ai.exports=tn},2329:(ai,_n,nt)=>{"use strict";nt.d(_n,{Z:()=>s.Z});var s=nt(9759);s.Z.registerVersion("firebase","8.9.1","app"),s.Z.SDK_VERSION="8.9.1"},2958:function(ai){ai.exports=function(){"use strict";var _n,nt,s;function Vt(k,gt){if(_n)if(nt){var Dt="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+_n+")(sharedChunk); ("+nt+")(sharedChunk); self.onerror = null;",wt={};_n(wt),s=gt(wt),"undefined"!=typeof window&&(s.workerUrl=window.URL.createObjectURL(new Blob([Dt],{type:"text/javascript"})))}else nt=gt;else _n=gt}return Vt(0,function(k){var Dt=wt;function wt(g,l,_,x){this.cx=3*g,this.bx=3*(_-g)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(x-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=g,this.p1y=x,this.p2x=_,this.p2y=x}wt.prototype.sampleCurveX=function(g){return((this.ax*g+this.bx)*g+this.cx)*g},wt.prototype.sampleCurveY=function(g){return((this.ay*g+this.by)*g+this.cy)*g},wt.prototype.sampleCurveDerivativeX=function(g){return(3*this.ax*g+2*this.bx)*g+this.cx},wt.prototype.solveCurveX=function(g,l){var _,x,D,F,B;for(void 0===l&&(l=1e-6),D=g,B=0;B<8;B++){if(F=this.sampleCurveX(D)-g,Math.abs(F)<l)return D;var Z=this.sampleCurveDerivativeX(D);if(Math.abs(Z)<1e-6)break;D-=F/Z}if((D=g)<(_=0))return _;if(D>(x=1))return x;for(;_<x;){if(F=this.sampleCurveX(D),Math.abs(F-g)<l)return D;g>F?_=D:x=D,D=.5*(x-_)+_}return D},wt.prototype.solve=function(g,l){return this.sampleCurveY(this.solveCurveX(g,l))};var Be=je;function je(g,l){this.x=g,this.y=l}je.prototype={clone:function(){return new je(this.x,this.y)},add:function(g){return this.clone()._add(g)},sub:function(g){return this.clone()._sub(g)},multByPoint:function(g){return this.clone()._multByPoint(g)},divByPoint:function(g){return this.clone()._divByPoint(g)},mult:function(g){return this.clone()._mult(g)},div:function(g){return this.clone()._div(g)},rotate:function(g){return this.clone()._rotate(g)},rotateAround:function(g,l){return this.clone()._rotateAround(g,l)},matMult:function(g){return this.clone()._matMult(g)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(g){return this.x===g.x&&this.y===g.y},dist:function(g){return Math.sqrt(this.distSqr(g))},distSqr:function(g){var l=g.x-this.x,_=g.y-this.y;return l*l+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(g){return Math.atan2(this.y-g.y,this.x-g.x)},angleWith:function(g){return this.angleWithSep(g.x,g.y)},angleWithSep:function(g,l){return Math.atan2(this.x*l-this.y*g,this.x*g+this.y*l)},_matMult:function(g){var l=g[2]*this.x+g[3]*this.y;return this.x=g[0]*this.x+g[1]*this.y,this.y=l,this},_add:function(g){return this.x+=g.x,this.y+=g.y,this},_sub:function(g){return this.x-=g.x,this.y-=g.y,this},_mult:function(g){return this.x*=g,this.y*=g,this},_div:function(g){return this.x/=g,this.y/=g,this},_multByPoint:function(g){return this.x*=g.x,this.y*=g.y,this},_divByPoint:function(g){return this.x/=g.x,this.y/=g.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var g=this.y;return this.y=this.x,this.x=-g,this},_rotate:function(g){var l=Math.cos(g),_=Math.sin(g),x=_*this.x+l*this.y;return this.x=l*this.x-_*this.y,this.y=x,this},_rotateAround:function(g,l){var _=Math.cos(g),x=Math.sin(g),D=l.y+x*(this.x-l.x)+_*(this.y-l.y);return this.x=l.x+_*(this.x-l.x)-x*(this.y-l.y),this.y=D,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},je.convert=function(g){return g instanceof je?g:Array.isArray(g)?new je(g[0],g[1]):g};var Ve="undefined"!=typeof self?self:{};const Et=Math.pow(2,53)-1,lt=Math.PI/180,Ct=180/Math.PI;function zt(g){return g*lt}const an=[[0,0],[1,0],[1,1],[0,1]];function Qe(g){if(g<=0)return 0;if(g>=1)return 1;const l=g*g,_=l*g;return 4*(g<.5?_:3*(g-l)+_-.75)}function On(g,l,_,x){const D=new Dt(g,l,_,x);return function(F){return D.solve(F)}}const dn=On(.25,.1,.25,1);function Mt(g,l,_){return Math.min(_,Math.max(l,g))}function Ui(g,l,_){const x=_-l,D=((g-l)%x+x)%x+l;return D===l?_:D}function $r(g,l,_){if(!g.length)return _(null,[]);let x=g.length;const D=new Array(g.length);let F=null;g.forEach((B,Z)=>{l(B,(X,re)=>{X&&(F=X),D[Z]=re,0==--x&&_(F,D)})})}function Vn(g){const l=[];for(const _ in g)l.push(g[_]);return l}function Di(g,...l){for(const _ of l)for(const x in _)g[x]=_[x];return g}let Ur=1;function tr(){return Ur++}function nr(){return function g(l){return l?(l^16*Math.random()>>l/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,g)}()}function Zt(g){return g<=1?1:Math.pow(2,Math.ceil(Math.log(g)/Math.LN2))}function Gt(g){return!!g&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(g)}function $t(g,l){g.forEach(_=>{l[_]&&(l[_]=l[_].bind(l))})}function Ht(g,l){return-1!==g.indexOf(l,g.length-l.length)}function fn(g,l,_){const x={};for(const D in g)x[D]=l.call(_||this,g[D],D,g);return x}function Yt(g,l,_){const x={};for(const D in g)l.call(_||this,g[D],D,g)&&(x[D]=g[D]);return x}function Fn(g){return Array.isArray(g)?g.map(Fn):"object"==typeof g&&g?fn(g,Fn):g}const hi={};function mi(g){hi[g]||("undefined"!=typeof console&&console.warn(g),hi[g]=!0)}function Un(g,l,_){return(_.y-g.y)*(l.x-g.x)>(l.y-g.y)*(_.x-g.x)}function ri(g){let l=0;for(let _,x,D=0,F=g.length,B=F-1;D<F;B=D++)_=g[D],x=g[B],l+=(x.x-_.x)*(_.y+x.y);return l}function Hn(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function jn(g){const l={};if(g.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(_,x,D,F)=>{const B=D||F;return l[x]=!B||B.toLowerCase(),""}),l["max-age"]){const _=parseInt(l["max-age"],10);isNaN(_)?delete l["max-age"]:l["max-age"]=_}return l}let xi,li,qi,Io=null;function _r(g){if(null==Io){const l=g.navigator?g.navigator.userAgent:null;Io=!!g.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Io}function io(g){try{const l=Ve[g];return l.setItem("_mapbox_test_",1),l.removeItem("_mapbox_test_"),!0}catch(l){return!1}}const Fr={now:()=>void 0!==qi?qi:Ve.performance.now(),setNow(g){qi=g},restoreNow(){qi=void 0},frame(g){const l=Ve.requestAnimationFrame(g);return{cancel:()=>Ve.cancelAnimationFrame(l)}},getImageData(g,l=0){const _=Ve.document.createElement("canvas"),x=_.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return _.width=g.width,_.height=g.height,x.drawImage(g,0,0,g.width,g.height),x.getImageData(-l,-l,g.width+2*l,g.height+2*l)},resolveURL:g=>(xi||(xi=Ve.document.createElement("a")),xi.href=g,xi.href),get devicePixelRatio(){return Ve.devicePixelRatio},get prefersReducedMotion(){return!!Ve.matchMedia&&(null==li&&(li=Ve.matchMedia("(prefers-reduced-motion: reduce)")),li.matches)}};let As;const Ri={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==As){const g=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{As=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):g}catch(l){As=g}}return As},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ds={supported:!1,testSupport:function(g){!uo&&Si&&(Po?Yn(g):Ni=g)}};let Ni,Si,uo=!1,Po=!1;function Yn(g){const l=g.createTexture();g.bindTexture(g.TEXTURE_2D,l);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,Si),g.isContextLost())return;ds.supported=!0}catch(_){}g.deleteTexture(l),uo=!0}Ve.document&&(Si=Ve.document.createElement("img"),Si.onload=function(){Ni&&Yn(Ni),Ni=null,Po=!0},Si.onerror=function(){uo=!0,Ni=null},Si.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const xr="01",Hr="NO_ACCESS_TOKEN";function wr(g){return 0===g.indexOf("mapbox:")}function is(g){return Ri.API_URL_REGEX.test(g)}const vu=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ho(g){const l=g.match(vu);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function Gr(g){const l=g.params.length?`?${g.params.join("&")}`:"";return`${g.protocol}://${g.authority}${g.path}${l}`}function rs(g){if(!g)return null;const l=g.split(".");if(!l||3!==l.length)return null;try{return JSON.parse(decodeURIComponent(Ve.atob(l[1]).split("").map(_=>"%"+("00"+_.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(_){return null}}class jr{constructor(l){this.type=l,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(l){const _=rs(Ri.ACCESS_TOKEN);let x="";return x=_&&_.u?Ve.btoa(encodeURIComponent(_.u).replace(/%([0-9A-F]{2})/g,(D,F)=>String.fromCharCode(Number("0x"+F)))):Ri.ACCESS_TOKEN||"",l?`mapbox.eventData.${l}:${x}`:`mapbox.eventData:${x}`}fetchEventData(){const l=io("localStorage"),_=this.getStorageKey(),x=this.getStorageKey("uuid");if(l)try{const D=Ve.localStorage.getItem(_);D&&(this.eventData=JSON.parse(D));const F=Ve.localStorage.getItem(x);F&&(this.anonId=F)}catch(D){mi("Unable to read from LocalStorage")}}saveEventData(){const l=io("localStorage"),_=this.getStorageKey(),x=this.getStorageKey("uuid");if(l)try{Ve.localStorage.setItem(x,this.anonId),Object.keys(this.eventData).length>=1&&Ve.localStorage.setItem(_,JSON.stringify(this.eventData))}catch(D){mi("Unable to write to LocalStorage")}}processRequests(l){}postEvent(l,_,x,D){if(!Ri.EVENTS_URL)return;const F=ho(Ri.EVENTS_URL);F.params.push(`access_token=${D||Ri.ACCESS_TOKEN||""}`);const B={event:this.type,created:new Date(l).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.4.1",skuId:xr,userId:this.anonId},Z=_?Di(B,_):B,X={url:Gr(F),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Z])};this.pendingRequest=De(X,re=>{this.pendingRequest=null,x(re),this.saveEventData(),this.processRequests(D)})}queueRequest(l,_){this.queue.push(l),this.processRequests(_)}}const $n=new class extends jr{constructor(g){super("appUserTurnstile"),this._customAccessToken=g}postTurnstileEvent(g,l){Ri.EVENTS_URL&&Ri.ACCESS_TOKEN&&Array.isArray(g)&&g.some(_=>wr(_)||is(_))&&this.queueRequest(Date.now(),l)}processRequests(g){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const l=rs(Ri.ACCESS_TOKEN),_=l?l.u:Ri.ACCESS_TOKEN;let x=_!==this.eventData.tokenU;Gt(this.anonId)||(this.anonId=nr(),x=!0);const D=this.queue.shift();if(this.eventData.lastSuccess){const F=new Date(this.eventData.lastSuccess),B=new Date(D),Z=(D-this.eventData.lastSuccess)/864e5;x=x||Z>=1||Z<-1||F.getDate()!==B.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(D,{"enabled.telemetry":!1},F=>{F||(this.eventData.lastSuccess=D,this.eventData.tokenU=_)},g)}},Ei=$n.postTurnstileEvent.bind($n),Bl=new class extends jr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(g,l,_,x){this.skuToken=l,this.errorCb=x,Ri.EVENTS_URL&&(_||Ri.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},_):this.errorCb(new Error(Hr)))}processRequests(g){if(this.pendingRequest||0===this.queue.length)return;const{id:l,timestamp:_}=this.queue.shift();l&&this.success[l]||(this.anonId||this.fetchEventData(),Gt(this.anonId)||(this.anonId=nr()),this.postEvent(_,{skuToken:this.skuToken},x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},g))}},Us=Bl.postMapLoadEvent.bind(Bl),ys=new class extends jr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(g,l,_,x){if(!Ri.API_URL||!Ri.SESSION_PATH)return;const D=ho(Ri.API_URL+Ri.SESSION_PATH);D.params.push(`sku=${l||""}`),D.params.push(`access_token=${x||Ri.ACCESS_TOKEN||""}`);const F={url:Gr(D),headers:{"Content-Type":"text/plain"}};this.pendingRequest=qe(F,B=>{this.pendingRequest=null,_(B),this.saveEventData(),this.processRequests(x)})}getSessionAPI(g,l,_,x){this.skuToken=l,this.errorCb=x,Ri.SESSION_PATH&&Ri.API_URL&&(_||Ri.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},_):this.errorCb(new Error(Hr)))}processRequests(g){if(this.pendingRequest||0===this.queue.length)return;const{id:l,timestamp:_}=this.queue.shift();l&&this.success[l]||this.getSession(_,this.skuToken,x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},g)}},Cr=ys.getSessionAPI.bind(ys),Wo=new Set,cc="mapbox-tiles";let ft,dt,Tt=500,Kt=50;function Lt(){Ve.caches&&!ft&&(ft=Ve.caches.open(cc))}function Bn(g){const l=g.indexOf("?");return l<0?g:g.slice(0,l)}let di=1/0;const Oi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Oi);class sr extends Error{constructor(l,_,x){401===_&&is(x)&&(l+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(l),this.status=_,this.url=x}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ir=Hn()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Ve.location.protocol?Ve.parent:Ve).location.href,Ge=function(g,l){if(!(/^file:/.test(_=g.url)||/^file:/.test(ir())&&!/^\w+:/.test(_))){if(Ve.fetch&&Ve.Request&&Ve.AbortController&&Ve.Request.prototype.hasOwnProperty("signal"))return function(x,D){const F=new Ve.AbortController,B=new Ve.Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,referrer:ir(),signal:F.signal});let Z=!1,X=!1;const re=(ce=B.url).indexOf("sku=")>0&&is(ce);var ce;"json"===x.type&&B.headers.set("Accept","application/json");const de=(Se,Re,Xe)=>{if(X)return;if(Se&&"SecurityError"!==Se.message&&mi(Se),Re&&Xe)return _e(Re);const at=Date.now();Ve.fetch(B).then(bt=>{if(bt.ok){const It=re?bt.clone():null;return _e(bt,It,at)}return D(new sr(bt.statusText,bt.status,x.url))}).catch(bt=>{20!==bt.code&&D(new Error(bt.message))})},_e=(Se,Re,Xe)=>{("arrayBuffer"===x.type?Se.arrayBuffer():"json"===x.type?Se.json():Se.text()).then(at=>{X||(Re&&Xe&&function(bt,It,Rt){if(Lt(),!ft)return;const Bt={status:It.status,statusText:It.statusText,headers:new Ve.Headers};It.headers.forEach((Ut,mn)=>Bt.headers.set(mn,Ut));const jt=jn(It.headers.get("Cache-Control")||"");jt["no-store"]||(jt["max-age"]&&Bt.headers.set("Expires",new Date(Rt+1e3*jt["max-age"]).toUTCString()),new Date(Bt.headers.get("Expires")).getTime()-Rt<42e4||function(Ut,mn){if(void 0===dt)try{new Response(new ReadableStream),dt=!0}catch(Cn){dt=!1}dt?mn(Ut.body):Ut.blob().then(mn)}(It,Ut=>{const mn=new Ve.Response(Ut,Bt);Lt(),ft&&ft.then(Cn=>Cn.put(Bn(bt.url),mn)).catch(Cn=>mi(Cn.message))}))}(B,Re,Xe),Z=!0,D(null,at,Se.headers.get("Cache-Control"),Se.headers.get("Expires")))}).catch(at=>{X||D(new Error(at.message))})};return re?function(Se,Re){if(Lt(),!ft)return Re(null);const Xe=Bn(Se.url);ft.then(at=>{at.match(Xe).then(bt=>{const It=function(Rt){if(!Rt)return!1;const Bt=new Date(Rt.headers.get("Expires")||0),jt=jn(Rt.headers.get("Cache-Control")||"");return Bt>Date.now()&&!jt["no-cache"]}(bt);at.delete(Xe),It&&at.put(Xe,bt.clone()),Re(null,bt,It)}).catch(Re)}).catch(Re)}(B,de):de(null,null),{cancel:()=>{X=!0,Z||F.abort()}}}(g,l);if(Hn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",g,l,void 0,!0)}var _;return function(x,D){const F=new Ve.XMLHttpRequest;F.open(x.method||"GET",x.url,!0),"arrayBuffer"===x.type&&(F.responseType="arraybuffer");for(const B in x.headers)F.setRequestHeader(B,x.headers[B]);return"json"===x.type&&(F.responseType="text",F.setRequestHeader("Accept","application/json")),F.withCredentials="include"===x.credentials,F.onerror=()=>{D(new Error(F.statusText))},F.onload=()=>{if((F.status>=200&&F.status<300||0===F.status)&&null!==F.response){let B=F.response;if("json"===x.type)try{B=JSON.parse(F.response)}catch(Z){return D(Z)}D(null,B,F.getResponseHeader("Cache-Control"),F.getResponseHeader("Expires"))}else D(new sr(F.statusText,F.status,x.url))},F.send(x.body),{cancel:()=>F.abort()}}(g,l)},we=function(g,l){return Ge(Di(g,{type:"arrayBuffer"}),l)},De=function(g,l){return Ge(Di(g,{method:"POST"}),l)},qe=function(g,l){return Ge(Di(g,{method:"GET"}),l)};function it(g){const l=Ve.document.createElement("a");return l.href=g,l.protocol===Ve.document.location.protocol&&l.host===Ve.document.location.host}const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ot,Pt;Ot=[],Pt=0;const xt=function(g,l){if(ds.supported&&(g.headers||(g.headers={}),g.headers.accept="image/webp,*/*"),Pt>=Ri.MAX_PARALLEL_IMAGE_REQUESTS){const F={requestParameters:g,callback:l,cancelled:!1,cancel(){this.cancelled=!0}};return Ot.push(F),F}Pt++;let _=!1;const x=()=>{if(!_)for(_=!0,Pt--;Ot.length&&Pt<Ri.MAX_PARALLEL_IMAGE_REQUESTS;){const F=Ot.shift(),{requestParameters:B,callback:Z,cancelled:X}=F;X||(F.cancel=xt(B,Z).cancel)}},D=we(g,(F,B,Z,X)=>{x(),F?l(F):B&&(Ve.createImageBitmap?function(re,ce){const de=new Ve.Blob([new Uint8Array(re)],{type:"image/png"});Ve.createImageBitmap(de).then(_e=>{ce(null,_e)}).catch(_e=>{ce(new Error(`Could not load image because of ${_e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(B,(re,ce)=>l(re,ce,Z,X)):function(re,ce){const de=new Ve.Image,_e=Ve.URL;de.onload=()=>{ce(null,de),_e.revokeObjectURL(de.src),de.onload=null,Ve.requestAnimationFrame(()=>{de.src=yt})},de.onerror=()=>ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Se=new Ve.Blob([new Uint8Array(re)],{type:"image/png"});de.src=re.byteLength?_e.createObjectURL(Se):yt}(B,(re,ce)=>l(re,ce,Z,X)))});return{cancel:()=>{D.cancel(),x()}}};function Ft(g,l,_){_[g]&&-1!==_[g].indexOf(l)||(_[g]=_[g]||[],_[g].push(l))}function tn(g,l,_){if(_&&_[g]){const x=_[g].indexOf(l);-1!==x&&_[g].splice(x,1)}}class ve{constructor(l,_={}){Di(this,_),this.type=l}}class d extends ve{constructor(l,_={}){super("error",Di({error:l},_))}}class p{on(l,_){return this._listeners=this._listeners||{},Ft(l,_,this._listeners),this}off(l,_){return tn(l,_,this._listeners),tn(l,_,this._oneTimeListeners),this}once(l,_){return _?(this._oneTimeListeners=this._oneTimeListeners||{},Ft(l,_,this._oneTimeListeners),this):new Promise(x=>this.once(l,x))}fire(l,_){"string"==typeof l&&(l=new ve(l,_||{}));const x=l.type;if(this.listens(x)){l.target=this;const D=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const Z of D)Z.call(this,l);const F=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const Z of F)tn(x,Z,this._oneTimeListeners),Z.call(this,l);const B=this._eventedParent;B&&(Di(l,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),B.fire(l))}else l instanceof d&&console.error(l.error);return this}listens(l){return!!(this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l))}setEventedParent(l,_){return this._eventedParent=l,this._eventedParentData=_,this}}var y={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class C{constructor(l,_,x,D){this.message=(l?`${l}: `:"")+x,D&&(this.identifier=D),null!=_&&_.__line__&&(this.line=_.__line__)}}function M(g){const l=g.value;return l?[new C(g.key,l,"constants have been deprecated as of v8")]:[]}function L(g,...l){for(const _ of l)for(const x in _)g[x]=_[x];return g}function R(g){return g instanceof Number||g instanceof String||g instanceof Boolean?g.valueOf():g}function H(g){if(Array.isArray(g))return g.map(H);if(g instanceof Object&&!(g instanceof Number||g instanceof String||g instanceof Boolean)){const l={};for(const _ in g)l[_]=H(g[_]);return l}return R(g)}class G extends Error{constructor(l,_){super(_),this.message=_,this.key=l}}class J{constructor(l,_=[]){this.parent=l,this.bindings={};for(const[x,D]of _)this.bindings[x]=D}concat(l){return new J(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const te={kind:"null"},K={kind:"number"},ae={kind:"string"},pe={kind:"boolean"},ge={kind:"color"},xe={kind:"object"},Me={kind:"value"},ze={kind:"collator"},Ke={kind:"formatted"},Y={kind:"resolvedImage"};function ne(g,l){return{kind:"array",itemType:g,N:l}}function be(g){if("array"===g.kind){const l=be(g.itemType);return"number"==typeof g.N?`array<${l}, ${g.N}>`:"value"===g.itemType.kind?"array":`array<${l}>`}return g.kind}const Ie=[te,K,ae,pe,ge,Ke,xe,ne(Me),Y];function Je(g,l){if("error"===l.kind)return null;if("array"===g.kind){if("array"===l.kind&&(0===l.N&&"value"===l.itemType.kind||!Je(g.itemType,l.itemType))&&("number"!=typeof g.N||g.N===l.N))return null}else{if(g.kind===l.kind)return null;if("value"===g.kind)for(const _ of Ie)if(!Je(_,l))return null}return`Expected ${be(g)} but found ${be(l)} instead.`}function Nt(g,l){return l.some(_=>_.kind===g.kind)}function St(g,l){return l.some(_=>"null"===_?null===g:"array"===_?Array.isArray(g):"object"===_?g&&!Array.isArray(g)&&"object"==typeof g:_===typeof g)}function Xt(g){var l={exports:{}};return g(l,l.exports),l.exports}var gn=Xt(function(g,l){var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function x(Z){return(Z=Math.round(Z))<0?0:Z>255?255:Z}function D(Z){return x("%"===Z[Z.length-1]?parseFloat(Z)/100*255:parseInt(Z))}function F(Z){return(X="%"===Z[Z.length-1]?parseFloat(Z)/100:parseFloat(Z))<0?0:X>1?1:X;var X}function B(Z,X,re){return re<0?re+=1:re>1&&(re-=1),6*re<1?Z+(X-Z)*re*6:2*re<1?X:3*re<2?Z+(X-Z)*(2/3-re)*6:Z}try{l.parseCSSColor=function(Z){var X,re=Z.replace(/ /g,"").toLowerCase();if(re in _)return _[re].slice();if("#"===re[0])return 4===re.length?(X=parseInt(re.substr(1),16))>=0&&X<=4095?[(3840&X)>>4|(3840&X)>>8,240&X|(240&X)>>4,15&X|(15&X)<<4,1]:null:7===re.length&&(X=parseInt(re.substr(1),16))>=0&&X<=16777215?[(16711680&X)>>16,(65280&X)>>8,255&X,1]:null;var ce=re.indexOf("("),de=re.indexOf(")");if(-1!==ce&&de+1===re.length){var _e=re.substr(0,ce),Se=re.substr(ce+1,de-(ce+1)).split(","),Re=1;switch(_e){case"rgba":if(4!==Se.length)return null;Re=F(Se.pop());case"rgb":return 3!==Se.length?null:[D(Se[0]),D(Se[1]),D(Se[2]),Re];case"hsla":if(4!==Se.length)return null;Re=F(Se.pop());case"hsl":if(3!==Se.length)return null;var Xe=(parseFloat(Se[0])%360+360)%360/360,at=F(Se[1]),bt=F(Se[2]),It=bt<=.5?bt*(at+1):bt+at-bt*at,Rt=2*bt-It;return[x(255*B(Rt,It,Xe+1/3)),x(255*B(Rt,It,Xe)),x(255*B(Rt,It,Xe-1/3)),Re];default:return null}}return null}}catch(Z){}});class hn{constructor(l,_,x,D=1){this.r=l,this.g=_,this.b=x,this.a=D}static parse(l){if(!l)return;if(l instanceof hn)return l;if("string"!=typeof l)return;const _=gn.parseCSSColor(l);return _?new hn(_[0]/255*_[3],_[1]/255*_[3],_[2]/255*_[3],_[3]):void 0}toString(){const[l,_,x,D]=this.toArray();return`rgba(${Math.round(l)},${Math.round(_)},${Math.round(x)},${D})`}toArray(){const{r:l,g:_,b:x,a:D}=this;return 0===D?[0,0,0,0]:[255*l/D,255*_/D,255*x/D,D]}}hn.black=new hn(0,0,0,1),hn.white=new hn(1,1,1,1),hn.transparent=new hn(0,0,0,0),hn.red=new hn(1,0,0,1),hn.blue=new hn(0,0,1,1);class Kn{constructor(l,_,x){this.sensitivity=l?_?"variant":"case":_?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,_){return this.collator.compare(l,_)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Bi{constructor(l,_,x,D,F){this.text=l,this.image=_,this.scale=x,this.fontStack=D,this.textColor=F}}class zn{constructor(l){this.sections=l}static fromString(l){return new zn([new Bi(l,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(l=>0!==l.text.length||l.image&&0!==l.image.name.length)}static factory(l){return l instanceof zn?l:zn.fromString(l)}toString(){return 0===this.sections.length?"":this.sections.map(l=>l.text).join("")}serialize(){const l=["format"];for(const _ of this.sections){if(_.image){l.push(["image",_.image.name]);continue}l.push(_.text);const x={};_.fontStack&&(x["text-font"]=["literal",_.fontStack.split(",")]),_.scale&&(x["font-scale"]=_.scale),_.textColor&&(x["text-color"]=["rgba"].concat(_.textColor.toArray())),l.push(x)}return l}}class ti{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new ti({name:l,available:!1}):null}serialize(){return["image",this.name]}}function ar(g,l,_,x){return"number"==typeof g&&g>=0&&g<=255&&"number"==typeof l&&l>=0&&l<=255&&"number"==typeof _&&_>=0&&_<=255?void 0===x||"number"==typeof x&&x>=0&&x<=1?null:`Invalid rgba value [${[g,l,_,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof x?[g,l,_,x]:[g,l,_]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vo(g){if(null===g||"string"==typeof g||"boolean"==typeof g||"number"==typeof g||g instanceof hn||g instanceof Kn||g instanceof zn||g instanceof ti)return!0;if(Array.isArray(g)){for(const l of g)if(!vo(l))return!1;return!0}if("object"==typeof g){for(const l in g)if(!vo(g[l]))return!1;return!0}return!1}function Mr(g){if(null===g)return te;if("string"==typeof g)return ae;if("boolean"==typeof g)return pe;if("number"==typeof g)return K;if(g instanceof hn)return ge;if(g instanceof Kn)return ze;if(g instanceof zn)return Ke;if(g instanceof ti)return Y;if(Array.isArray(g)){const l=g.length;let _;for(const x of g){const D=Mr(x);if(_){if(_===D)continue;_=Me;break}_=D}return ne(_||Me,l)}return xe}function Wi(g){const l=typeof g;return null===g?"":"string"===l||"number"===l||"boolean"===l?String(g):g instanceof hn||g instanceof zn||g instanceof ti?g.toString():JSON.stringify(g)}class Ro{constructor(l,_){this.type=l,this.value=_}static parse(l,_){if(2!==l.length)return _.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!vo(l[1]))return _.error("invalid value");const x=l[1];let D=Mr(x);const F=_.expectedType;return"array"!==D.kind||0!==D.N||!F||"array"!==F.kind||"number"==typeof F.N&&0!==F.N||(D=F),new Ro(D,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof hn?["rgba"].concat(this.value.toArray()):this.value instanceof zn?this.value.serialize():this.value}}class Sr{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}const vs={string:ae,number:K,boolean:pe,object:xe};class Hs{constructor(l,_){this.type=l,this.args=_}static parse(l,_){if(l.length<2)return _.error("Expected at least one argument.");let x,D=1;const F=l[0];if("array"===F){let Z,X;if(l.length>2){const re=l[1];if("string"!=typeof re||!(re in vs)||"object"===re)return _.error('The item type argument of "array" must be one of string, number, boolean',1);Z=vs[re],D++}else Z=Me;if(l.length>3){if(null!==l[2]&&("number"!=typeof l[2]||l[2]<0||l[2]!==Math.floor(l[2])))return _.error('The length argument to "array" must be a positive integer literal',2);X=l[2],D++}x=ne(Z,X)}else x=vs[F];const B=[];for(;D<l.length;D++){const Z=_.parse(l[D],D,Me);if(!Z)return null;B.push(Z)}return new Hs(x,B)}evaluate(l){for(let _=0;_<this.args.length;_++){const x=this.args[_].evaluate(l);if(!Je(this.type,Mr(x)))return x;if(_===this.args.length-1)throw new Sr(`Expected value to be of type ${be(this.type)}, but found ${be(Mr(x))} instead.`)}return null}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}serialize(){const l=this.type,_=[l.kind];if("array"===l.kind){const x=l.itemType;if("string"===x.kind||"number"===x.kind||"boolean"===x.kind){_.push(x.kind);const D=l.N;("number"==typeof D||this.args.length>1)&&_.push(D)}}return _.concat(this.args.map(x=>x.serialize()))}}class ro{constructor(l){this.type=Ke,this.sections=l}static parse(l,_){if(l.length<2)return _.error("Expected at least one argument.");const x=l[1];if(!Array.isArray(x)&&"object"==typeof x)return _.error("First argument must be an image or text section.");const D=[];let F=!1;for(let B=1;B<=l.length-1;++B){const Z=l[B];if(F&&"object"==typeof Z&&!Array.isArray(Z)){F=!1;let X=null;if(Z["font-scale"]&&(X=_.parse(Z["font-scale"],1,K),!X))return null;let re=null;if(Z["text-font"]&&(re=_.parse(Z["text-font"],1,ne(ae)),!re))return null;let ce=null;if(Z["text-color"]&&(ce=_.parse(Z["text-color"],1,ge),!ce))return null;const de=D[D.length-1];de.scale=X,de.font=re,de.textColor=ce}else{const X=_.parse(l[B],1,Me);if(!X)return null;const re=X.type.kind;if("string"!==re&&"value"!==re&&"null"!==re&&"resolvedImage"!==re)return _.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,D.push({content:X,scale:null,font:null,textColor:null})}}return new ro(D)}evaluate(l){return new zn(this.sections.map(_=>{const x=_.content.evaluate(l);return Mr(x)===Y?new Bi("",x,null,null,null):new Bi(Wi(x),null,_.scale?_.scale.evaluate(l):null,_.font?_.font.evaluate(l).join(","):null,_.textColor?_.textColor.evaluate(l):null)}))}eachChild(l){for(const _ of this.sections)l(_.content),_.scale&&l(_.scale),_.font&&l(_.font),_.textColor&&l(_.textColor)}outputDefined(){return!1}serialize(){const l=["format"];for(const _ of this.sections){l.push(_.content.serialize());const x={};_.scale&&(x["font-scale"]=_.scale.serialize()),_.font&&(x["text-font"]=_.font.serialize()),_.textColor&&(x["text-color"]=_.textColor.serialize()),l.push(x)}return l}}class Vo{constructor(l){this.type=Y,this.input=l}static parse(l,_){if(2!==l.length)return _.error("Expected two arguments.");const x=_.parse(l[1],1,ae);return x?new Vo(x):_.error("No image name provided.")}evaluate(l){const _=this.input.evaluate(l),x=ti.fromString(_);return x&&l.availableImages&&(x.available=l.availableImages.indexOf(_)>-1),x}eachChild(l){l(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const bu={"to-boolean":pe,"to-color":ge,"to-number":K,"to-string":ae};class hl{constructor(l,_){this.type=l,this.args=_}static parse(l,_){if(l.length<2)return _.error("Expected at least one argument.");const x=l[0];if(("to-boolean"===x||"to-string"===x)&&2!==l.length)return _.error("Expected one argument.");const D=bu[x],F=[];for(let B=1;B<l.length;B++){const Z=_.parse(l[B],B,Me);if(!Z)return null;F.push(Z)}return new hl(D,F)}evaluate(l){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(l));if("color"===this.type.kind){let _,x;for(const D of this.args){if(_=D.evaluate(l),x=null,_ instanceof hn)return _;if("string"==typeof _){const F=l.parseColor(_);if(F)return F}else if(Array.isArray(_)&&(x=_.length<3||_.length>4?`Invalid rbga value ${JSON.stringify(_)}: expected an array containing either three or four numeric values.`:ar(_[0],_[1],_[2],_[3]),!x))return new hn(_[0]/255,_[1]/255,_[2]/255,_[3])}throw new Sr(x||`Could not parse color from value '${"string"==typeof _?_:String(JSON.stringify(_))}'`)}if("number"===this.type.kind){let _=null;for(const x of this.args){if(_=x.evaluate(l),null===_)return 0;const D=Number(_);if(!isNaN(D))return D}throw new Sr(`Could not convert ${JSON.stringify(_)} to number.`)}return"formatted"===this.type.kind?zn.fromString(Wi(this.args[0].evaluate(l))):"resolvedImage"===this.type.kind?ti.fromString(Wi(this.args[0].evaluate(l))):Wi(this.args[0].evaluate(l))}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}serialize(){if("formatted"===this.type.kind)return new ro([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Vo(this.args[0]).serialize();const l=[`to-${this.type.kind}`];return this.eachChild(_=>{l.push(_.serialize())}),l}}const A_=["Unknown","Point","LineString","Polygon"];class Lp{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?A_[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let _=this._parseColorCache[l];return _||(_=this._parseColorCache[l]=hn.parse(l)),_}}class ia{constructor(l,_,x,D){this.name=l,this.type=_,this._evaluate=x,this.args=D}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(l=>l.serialize()))}static parse(l,_){const x=l[0],D=ia.definitions[x];if(!D)return _.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const F=Array.isArray(D)?D[0]:D.type,B=Array.isArray(D)?[[D[1],D[2]]]:D.overloads,Z=B.filter(([re])=>!Array.isArray(re)||re.length===l.length-1);let X=null;for(const[re,ce]of Z){X=new ch(_.registry,_.path,null,_.scope);const de=[];let _e=!1;for(let Se=1;Se<l.length;Se++){const Re=l[Se],Xe=Array.isArray(re)?re[Se-1]:re.type,at=X.parse(Re,1+de.length,Xe);if(!at){_e=!0;break}de.push(at)}if(!_e)if(Array.isArray(re)&&re.length!==de.length)X.error(`Expected ${re.length} arguments, but found ${de.length} instead.`);else{for(let Se=0;Se<de.length;Se++){const Re=Array.isArray(re)?re[Se]:re.type,Xe=de[Se];X.concat(Se+1).checkSubtype(Re,Xe.type)}if(0===X.errors.length)return new ia(x,F,ce,de)}}if(1===Z.length)_.errors.push(...X.errors);else{const re=(Z.length?Z:B).map(([de])=>{return _e=de,Array.isArray(_e)?`(${_e.map(be).join(", ")})`:`(${be(_e.type)}...)`;var _e}).join(" | "),ce=[];for(let de=1;de<l.length;de++){const _e=_.parse(l[de],1+ce.length);if(!_e)return null;ce.push(be(_e.type))}_.error(`Expected arguments of type ${re}, but found (${ce.join(", ")}) instead.`)}return null}static register(l,_){ia.definitions=_;for(const x in _)l[x]=ia}}class Np{constructor(l,_,x){this.type=ze,this.locale=x,this.caseSensitive=l,this.diacriticSensitive=_}static parse(l,_){if(2!==l.length)return _.error("Expected one argument.");const x=l[1];if("object"!=typeof x||Array.isArray(x))return _.error("Collator options argument must be an object.");const D=_.parse(void 0!==x["case-sensitive"]&&x["case-sensitive"],1,pe);if(!D)return null;const F=_.parse(void 0!==x["diacritic-sensitive"]&&x["diacritic-sensitive"],1,pe);if(!F)return null;let B=null;return x.locale&&(B=_.parse(x.locale,1,ae),!B)?null:new Np(D,F,B)}evaluate(l){return new Kn(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}serialize(){const l={};return l["case-sensitive"]=this.caseSensitive.serialize(),l["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(l.locale=this.locale.serialize()),["collator",l]}}const xu=8192;function Bp(g,l){g[0]=Math.min(g[0],l[0]),g[1]=Math.min(g[1],l[1]),g[2]=Math.max(g[2],l[0]),g[3]=Math.max(g[3],l[1])}function uc(g,l){return!(g[0]<=l[0]||g[2]>=l[2]||g[1]<=l[1]||g[3]>=l[3])}function mr(g,l){const _=(180+g[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g[1]*Math.PI/360)))/360,D=Math.pow(2,l.z);return[Math.round(_*D*xu),Math.round(x*D*xu)]}function Gd(g,l,_){const x=g[0]-l[0],D=g[1]-l[1],F=g[0]-_[0],B=g[1]-_[1];return x*B-F*D==0&&x*F<=0&&D*B<=0}function oh(g,l){let _=!1;for(let B=0,Z=l.length;B<Z;B++){const X=l[B];for(let re=0,ce=X.length;re<ce-1;re++){if(Gd(g,X[re],X[re+1]))return!1;(D=X[re])[1]>(x=g)[1]!=(F=X[re+1])[1]>x[1]&&x[0]<(F[0]-D[0])*(x[1]-D[1])/(F[1]-D[1])+D[0]&&(_=!_)}}var x,D,F;return _}function jd(g,l){for(let _=0;_<l.length;_++)if(oh(g,l[_]))return!0;return!1}function dl(g,l,_,x){const D=x[0]-_[0],F=x[1]-_[1],B=(g[0]-_[0])*F-D*(g[1]-_[1]),Z=(l[0]-_[0])*F-D*(l[1]-_[1]);return B>0&&Z<0||B<0&&Z>0}function ed(g,l,_){for(const re of _)for(let ce=0;ce<re.length-1;++ce)if((Z=[(B=re[ce+1])[0]-(F=re[ce])[0],B[1]-F[1]])[0]*(X=[(D=l)[0]-(x=g)[0],D[1]-x[1]])[1]-Z[1]*X[0]!=0&&dl(x,D,F,B)&&dl(F,B,x,D))return!0;var x,D,F,B,Z,X;return!1}function ra(g,l){for(let _=0;_<g.length;++_)if(!oh(g[_],l))return!1;for(let _=0;_<g.length-1;++_)if(ed(g[_],g[_+1],l))return!1;return!0}function D_(g,l){for(let _=0;_<l.length;_++)if(ra(g,l[_]))return!0;return!1}function Uo(g,l,_){const x=[];for(let D=0;D<g.length;D++){const F=[];for(let B=0;B<g[D].length;B++){const Z=mr(g[D][B],_);Bp(l,Z),F.push(Z)}x.push(F)}return x}function Yd(g,l,_){const x=[];for(let D=0;D<g.length;D++){const F=Uo(g[D],l,_);x.push(F)}return x}function pl(g,l,_,x){if(g[0]<_[0]||g[0]>_[2]){const D=.5*x;let F=g[0]-_[0]>D?-x:_[0]-g[0]>D?x:0;0===F&&(F=g[0]-_[2]>D?-x:_[2]-g[0]>D?x:0),g[0]+=F}Bp(l,g)}function wu(g,l,_,x){const D=Math.pow(2,x.z)*xu,F=[x.x*xu,x.y*xu],B=[];for(const Z of g)for(const X of Z){const re=[X.x+F[0],X.y+F[1]];pl(re,l,_,D),B.push(re)}return B}function Fi(g,l,_,x){const D=Math.pow(2,x.z)*xu,F=[x.x*xu,x.y*xu],B=[];for(const X of g){const re=[];for(const ce of X){const de=[ce.x+F[0],ce.y+F[1]];Bp(l,de),re.push(de)}B.push(re)}if(l[2]-l[0]<=D/2){(Z=l)[0]=Z[1]=1/0,Z[2]=Z[3]=-1/0;for(const X of B)for(const re of X)pl(re,l,_,D)}var Z;return B}class fl{constructor(l,_){this.type=pe,this.geojson=l,this.geometries=_}static parse(l,_){if(2!==l.length)return _.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(vo(l[1])){const x=l[1];if("FeatureCollection"===x.type)for(let D=0;D<x.features.length;++D){const F=x.features[D].geometry.type;if("Polygon"===F||"MultiPolygon"===F)return new fl(x,x.features[D].geometry)}else if("Feature"===x.type){const D=x.geometry.type;if("Polygon"===D||"MultiPolygon"===D)return new fl(x,x.geometry)}else if("Polygon"===x.type||"MultiPolygon"===x.type)return new fl(x,x)}return _.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(null!=l.geometry()&&null!=l.canonicalID()){if("Point"===l.geometryType())return function(_,x){const D=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],B=_.canonicalID();if("Polygon"===x.type){const Z=Uo(x.coordinates,F,B),X=wu(_.geometry(),D,F,B);if(!uc(D,F))return!1;for(const re of X)if(!oh(re,Z))return!1}if("MultiPolygon"===x.type){const Z=Yd(x.coordinates,F,B),X=wu(_.geometry(),D,F,B);if(!uc(D,F))return!1;for(const re of X)if(!jd(re,Z))return!1}return!0}(l,this.geometries);if("LineString"===l.geometryType())return function(_,x){const D=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],B=_.canonicalID();if("Polygon"===x.type){const Z=Uo(x.coordinates,F,B),X=Fi(_.geometry(),D,F,B);if(!uc(D,F))return!1;for(const re of X)if(!ra(re,Z))return!1}if("MultiPolygon"===x.type){const Z=Yd(x.coordinates,F,B),X=Fi(_.geometry(),D,F,B);if(!uc(D,F))return!1;for(const re of X)if(!D_(re,Z))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function sh(g){if(g instanceof ia&&("get"===g.name&&1===g.args.length||"feature-state"===g.name||"has"===g.name&&1===g.args.length||"properties"===g.name||"geometry-type"===g.name||"id"===g.name||/^filter-/.test(g.name))||g instanceof fl)return!1;let l=!0;return g.eachChild(_=>{l&&!sh(_)&&(l=!1)}),l}function ah(g){if(g instanceof ia&&"feature-state"===g.name)return!1;let l=!0;return g.eachChild(_=>{l&&!ah(_)&&(l=!1)}),l}function $i(g,l){if(g instanceof ia&&l.indexOf(g.name)>=0)return!1;let _=!0;return g.eachChild(x=>{_&&!$i(x,l)&&(_=!1)}),_}class lh{constructor(l,_){this.type=_.type,this.name=l,this.boundExpression=_}static parse(l,_){if(2!==l.length||"string"!=typeof l[1])return _.error("'var' expression requires exactly one string literal argument.");const x=l[1];return _.scope.has(x)?new lh(x,_.scope.get(x)):_.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ch{constructor(l,_=[],x,D=new J,F=[]){this.registry=l,this.path=_,this.key=_.map(B=>`[${B}]`).join(""),this.scope=D,this.errors=F,this.expectedType=x}parse(l,_,x,D,F={}){return _?this.concat(_,x,D)._parse(l,F):this._parse(l,F)}_parse(l,_){function x(D,F,B){return"assert"===B?new Hs(F,[D]):"coerce"===B?new hl(F,[D]):D}if(null!==l&&"string"!=typeof l&&"boolean"!=typeof l&&"number"!=typeof l||(l=["literal",l]),Array.isArray(l)){if(0===l.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const D=l[0];if("string"!=typeof D)return this.error(`Expression name must be a string, but found ${typeof D} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const F=this.registry[D];if(F){let B=F.parse(l,this);if(!B)return null;if(this.expectedType){const Z=this.expectedType,X=B.type;if("string"!==Z.kind&&"number"!==Z.kind&&"boolean"!==Z.kind&&"object"!==Z.kind&&"array"!==Z.kind||"value"!==X.kind)if("color"!==Z.kind&&"formatted"!==Z.kind&&"resolvedImage"!==Z.kind||"value"!==X.kind&&"string"!==X.kind){if(this.checkSubtype(Z,X))return null}else B=x(B,Z,_.typeAnnotation||"coerce");else B=x(B,Z,_.typeAnnotation||"assert")}if(!(B instanceof Ro)&&"resolvedImage"!==B.type.kind&&qd(B)){const Z=new Lp;try{B=new Ro(B.type,B.evaluate(Z))}catch(X){return this.error(X.message),null}}return B}return this.error(`Unknown expression "${D}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===l?"'undefined' value invalid. Use null instead.":"object"==typeof l?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,_,x){const D="number"==typeof l?this.path.concat(l):this.path,F=x?this.scope.concat(x):this.scope;return new ch(this.registry,D,_||null,F,this.errors)}error(l,..._){const x=`${this.key}${_.map(D=>`[${D}]`).join("")}`;this.errors.push(new G(x,l))}checkSubtype(l,_){const x=Je(l,_);return x&&this.error(x),x}}function qd(g){if(g instanceof lh)return qd(g.boundExpression);if(g instanceof ia&&"error"===g.name||g instanceof Np||g instanceof fl)return!1;const l=g instanceof hl||g instanceof Hs;let _=!0;return g.eachChild(x=>{_=l?_&&qd(x):_&&x instanceof Ro}),!!_&&sh(g)&&$i(g,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function Zd(g,l){const _=g.length-1;let x,D,F=0,B=_,Z=0;for(;F<=B;)if(Z=Math.floor((F+B)/2),x=g[Z],D=g[Z+1],x<=l){if(Z===_||l<D)return Z;F=Z+1}else{if(!(x>l))throw new Sr("Input is not a number.");B=Z-1}return 0}class Gs{constructor(l,_,x){this.type=l,this.input=_,this.labels=[],this.outputs=[];for(const[D,F]of x)this.labels.push(D),this.outputs.push(F)}static parse(l,_){if(l.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return _.error("Expected an even number of arguments.");const x=_.parse(l[1],1,K);if(!x)return null;const D=[];let F=null;_.expectedType&&"value"!==_.expectedType.kind&&(F=_.expectedType);for(let B=1;B<l.length;B+=2){const Z=1===B?-1/0:l[B],X=l[B+1],re=B,ce=B+1;if("number"!=typeof Z)return _.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(D.length&&D[D.length-1][0]>=Z)return _.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);const de=_.parse(X,ce,F);if(!de)return null;F=F||de.type,D.push([Z,de])}return new Gs(F,x,D)}evaluate(l){const _=this.labels,x=this.outputs;if(1===_.length)return x[0].evaluate(l);const D=this.input.evaluate(l);if(D<=_[0])return x[0].evaluate(l);const F=_.length;return D>=_[F-1]?x[F-1].evaluate(l):x[Zd(_,D)].evaluate(l)}eachChild(l){l(this.input);for(const _ of this.outputs)l(_)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}serialize(){const l=["step",this.input.serialize()];for(let _=0;_<this.labels.length;_++)_>0&&l.push(this.labels[_]),l.push(this.outputs[_].serialize());return l}}function ui(g,l,_){return g*(1-_)+l*_}var uh=Object.freeze({__proto__:null,number:ui,color:function(g,l,_){return new hn(ui(g.r,l.r,_),ui(g.g,l.g,_),ui(g.b,l.b,_),ui(g.a,l.a,_))},array:function(g,l,_){return g.map((x,D)=>ui(x,l[D],_))}});const td=4/29,zl=6/29,Xr=3*zl*zl,dh=Math.PI/180,Ii=180/Math.PI;function zp(g){return g>.008856451679035631?Math.pow(g,1/3):g/Xr+td}function Pr(g){return g>zl?g*g*g:Xr*(g-td)}function Wd(g){return 255*(g<=.0031308?12.92*g:1.055*Math.pow(g,1/2.4)-.055)}function oo(g){return(g/=255)<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function Lc(g){const l=oo(g.r),_=oo(g.g),x=oo(g.b),D=zp((.4124564*l+.3575761*_+.1804375*x)/.95047),F=zp((.2126729*l+.7151522*_+.072175*x)/1);return{l:116*F-16,a:500*(D-F),b:200*(F-zp((.0193339*l+.119192*_+.9503041*x)/1.08883)),alpha:g.a}}function Ma(g){let l=(g.l+16)/116,_=isNaN(g.a)?l:l+g.a/500,x=isNaN(g.b)?l:l-g.b/200;return l=1*Pr(l),_=.95047*Pr(_),x=1.08883*Pr(x),new hn(Wd(3.2404542*_-1.5371385*l-.4985314*x),Wd(-.969266*_+1.8760108*l+.041556*x),Wd(.0556434*_-.2040259*l+1.0572252*x),g.alpha)}function ph(g,l,_){const x=l-g;return g+_*(x>180||x<-180?x-360*Math.round(x/360):x)}const ka={forward:Lc,reverse:Ma,interpolate:function(g,l,_){return{l:ui(g.l,l.l,_),a:ui(g.a,l.a,_),b:ui(g.b,l.b,_),alpha:ui(g.alpha,l.alpha,_)}}},za={forward:function(g){const{l,a:_,b:x}=Lc(g),D=Math.atan2(x,_)*Ii;return{h:D<0?D+360:D,c:Math.sqrt(_*_+x*x),l,alpha:g.a}},reverse:function(g){const l=g.h*dh,_=g.c;return Ma({l:g.l,a:Math.cos(l)*_,b:Math.sin(l)*_,alpha:g.alpha})},interpolate:function(g,l,_){return{h:ph(g.h,l.h,_),c:ui(g.c,l.c,_),l:ui(g.l,l.l,_),alpha:ui(g.alpha,l.alpha,_)}}};var js=Object.freeze({__proto__:null,lab:ka,hcl:za});class oa{constructor(l,_,x,D,F){this.type=l,this.operator=_,this.interpolation=x,this.input=D,this.labels=[],this.outputs=[];for(const[B,Z]of F)this.labels.push(B),this.outputs.push(Z)}static interpolationFactor(l,_,x,D){let F=0;if("exponential"===l.name)F=$d(_,l.base,x,D);else if("linear"===l.name)F=$d(_,1,x,D);else if("cubic-bezier"===l.name){const B=l.controlPoints;F=new Dt(B[0],B[1],B[2],B[3]).solve($d(_,1,x,D))}return F}static parse(l,_){let[x,D,F,...B]=l;if(!Array.isArray(D)||0===D.length)return _.error("Expected an interpolation type expression.",1);if("linear"===D[0])D={name:"linear"};else if("exponential"===D[0]){const re=D[1];if("number"!=typeof re)return _.error("Exponential interpolation requires a numeric base.",1,1);D={name:"exponential",base:re}}else{if("cubic-bezier"!==D[0])return _.error(`Unknown interpolation type ${String(D[0])}`,1,0);{const re=D.slice(1);if(4!==re.length||re.some(ce=>"number"!=typeof ce||ce<0||ce>1))return _.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);D={name:"cubic-bezier",controlPoints:re}}}if(l.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return _.error("Expected an even number of arguments.");if(F=_.parse(F,2,K),!F)return null;const Z=[];let X=null;"interpolate-hcl"===x||"interpolate-lab"===x?X=ge:_.expectedType&&"value"!==_.expectedType.kind&&(X=_.expectedType);for(let re=0;re<B.length;re+=2){const ce=B[re],de=B[re+1],_e=re+3,Se=re+4;if("number"!=typeof ce)return _.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(Z.length&&Z[Z.length-1][0]>=ce)return _.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);const Re=_.parse(de,Se,X);if(!Re)return null;X=X||Re.type,Z.push([ce,Re])}return"number"===X.kind||"color"===X.kind||"array"===X.kind&&"number"===X.itemType.kind&&"number"==typeof X.N?new oa(X,x,D,F,Z):_.error(`Type ${be(X)} is not interpolatable.`)}evaluate(l){const _=this.labels,x=this.outputs;if(1===_.length)return x[0].evaluate(l);const D=this.input.evaluate(l);if(D<=_[0])return x[0].evaluate(l);const F=_.length;if(D>=_[F-1])return x[F-1].evaluate(l);const B=Zd(_,D),Z=oa.interpolationFactor(this.interpolation,D,_[B],_[B+1]),X=x[B].evaluate(l),re=x[B+1].evaluate(l);return"interpolate"===this.operator?uh[this.type.kind.toLowerCase()](X,re,Z):"interpolate-hcl"===this.operator?za.reverse(za.interpolate(za.forward(X),za.forward(re),Z)):ka.reverse(ka.interpolate(ka.forward(X),ka.forward(re),Z))}eachChild(l){l(this.input);for(const _ of this.outputs)l(_)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}serialize(){let l;l="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const _=[this.operator,l,this.input.serialize()];for(let x=0;x<this.labels.length;x++)_.push(this.labels[x],this.outputs[x].serialize());return _}}function $d(g,l,_,x){const D=x-_,F=g-_;return 0===D?0:1===l?F/D:(Math.pow(l,F)-1)/(Math.pow(l,D)-1)}class Nc{constructor(l,_){this.type=l,this.args=_}static parse(l,_){if(l.length<2)return _.error("Expectected at least one argument.");let x=null;const D=_.expectedType;D&&"value"!==D.kind&&(x=D);const F=[];for(const Z of l.slice(1)){const X=_.parse(Z,1+F.length,x,void 0,{typeAnnotation:"omit"});if(!X)return null;x=x||X.type,F.push(X)}const B=D&&F.some(Z=>Je(D,Z.type));return new Nc(B?Me:x,F)}evaluate(l){let _,x=null,D=0;for(const F of this.args)if(D++,x=F.evaluate(l),x&&x instanceof ti&&!x.available&&(_||(_=x.name),x=null,D===this.args.length&&(x=_)),null!==x)break;return x}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}serialize(){const l=["coalesce"];return this.eachChild(_=>{l.push(_.serialize())}),l}}class Va{constructor(l,_){this.type=_.type,this.bindings=[].concat(l),this.result=_}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const _ of this.bindings)l(_[1]);l(this.result)}static parse(l,_){if(l.length<4)return _.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const x=[];for(let F=1;F<l.length-1;F+=2){const B=l[F];if("string"!=typeof B)return _.error(`Expected string, but found ${typeof B} instead.`,F);if(/[^a-zA-Z0-9_]/.test(B))return _.error("Variable names must contain only alphanumeric characters or '_'.",F);const Z=_.parse(l[F+1],F+1);if(!Z)return null;x.push([B,Z])}const D=_.parse(l[l.length-1],l.length-1,_.expectedType,x);return D?new Va(x,D):null}outputDefined(){return this.result.outputDefined()}serialize(){const l=["let"];for(const[_,x]of this.bindings)l.push(_,x.serialize());return l.push(this.result.serialize()),l}}class nd{constructor(l,_,x){this.type=l,this.index=_,this.input=x}static parse(l,_){if(3!==l.length)return _.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const x=_.parse(l[1],1,K),D=_.parse(l[2],2,ne(_.expectedType||Me));return x&&D?new nd(D.type.itemType,x,D):null}evaluate(l){const _=this.index.evaluate(l),x=this.input.evaluate(l);if(_<0)throw new Sr(`Array index out of bounds: ${_} < 0.`);if(_>=x.length)throw new Sr(`Array index out of bounds: ${_} > ${x.length-1}.`);if(_!==Math.floor(_))throw new Sr(`Array index must be an integer, but found ${_} instead.`);return x[_]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Ua{constructor(l,_){this.type=pe,this.needle=l,this.haystack=_}static parse(l,_){if(3!==l.length)return _.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const x=_.parse(l[1],1,Me),D=_.parse(l[2],2,Me);return x&&D?Nt(x.type,[pe,ae,K,te,Me])?new Ua(x,D):_.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(x.type)} instead`):null}evaluate(l){const _=this.needle.evaluate(l),x=this.haystack.evaluate(l);if(!x)return!1;if(!St(_,["boolean","string","number","null"]))throw new Sr(`Expected first argument to be of type boolean, string, number or null, but found ${be(Mr(_))} instead.`);if(!St(x,["string","array"]))throw new Sr(`Expected second argument to be of type array or string, but found ${be(Mr(x))} instead.`);return x.indexOf(_)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class bi{constructor(l,_,x){this.type=K,this.needle=l,this.haystack=_,this.fromIndex=x}static parse(l,_){if(l.length<=2||l.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const x=_.parse(l[1],1,Me),D=_.parse(l[2],2,Me);if(!x||!D)return null;if(!Nt(x.type,[pe,ae,K,te,Me]))return _.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(x.type)} instead`);if(4===l.length){const F=_.parse(l[3],3,K);return F?new bi(x,D,F):null}return new bi(x,D)}evaluate(l){const _=this.needle.evaluate(l),x=this.haystack.evaluate(l);if(!St(_,["boolean","string","number","null"]))throw new Sr(`Expected first argument to be of type boolean, string, number or null, but found ${be(Mr(_))} instead.`);if(!St(x,["string","array"]))throw new Sr(`Expected second argument to be of type array or string, but found ${be(Mr(x))} instead.`);if(this.fromIndex){const D=this.fromIndex.evaluate(l);return x.indexOf(_,D)}return x.indexOf(_)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const l=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),l]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Su{constructor(l,_,x,D,F,B){this.inputType=l,this.type=_,this.input=x,this.cases=D,this.outputs=F,this.otherwise=B}static parse(l,_){if(l.length<5)return _.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return _.error("Expected an even number of arguments.");let x,D;_.expectedType&&"value"!==_.expectedType.kind&&(D=_.expectedType);const F={},B=[];for(let re=2;re<l.length-1;re+=2){let ce=l[re];const de=l[re+1];Array.isArray(ce)||(ce=[ce]);const _e=_.concat(re);if(0===ce.length)return _e.error("Expected at least one branch label.");for(const Re of ce){if("number"!=typeof Re&&"string"!=typeof Re)return _e.error("Branch labels must be numbers or strings.");if("number"==typeof Re&&Math.abs(Re)>Number.MAX_SAFE_INTEGER)return _e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Re&&Math.floor(Re)!==Re)return _e.error("Numeric branch labels must be integer values.");if(x){if(_e.checkSubtype(x,Mr(Re)))return null}else x=Mr(Re);if(void 0!==F[String(Re)])return _e.error("Branch labels must be unique.");F[String(Re)]=B.length}const Se=_.parse(de,re,D);if(!Se)return null;D=D||Se.type,B.push(Se)}const Z=_.parse(l[1],1,Me);if(!Z)return null;const X=_.parse(l[l.length-1],l.length-1,D);return X?"value"!==Z.type.kind&&_.concat(1).checkSubtype(x,Z.type)?null:new Su(x,D,Z,F,B,X):null}evaluate(l){const _=this.input.evaluate(l);return(Mr(_)===this.inputType&&this.outputs[this.cases[_]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const l=["match",this.input.serialize()],_=Object.keys(this.cases).sort(),x=[],D={};for(const B of _){const Z=D[this.cases[B]];void 0===Z?(D[this.cases[B]]=x.length,x.push([this.cases[B],[B]])):x[Z][1].push(B)}const F=B=>"number"===this.inputType.kind?Number(B):B;for(const[B,Z]of x)l.push(1===Z.length?F(Z[0]):Z.map(F)),l.push(this.outputs[B].serialize());return l.push(this.otherwise.serialize()),l}}class Vp{constructor(l,_,x){this.type=l,this.branches=_,this.otherwise=x}static parse(l,_){if(l.length<4)return _.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return _.error("Expected an odd number of arguments.");let x;_.expectedType&&"value"!==_.expectedType.kind&&(x=_.expectedType);const D=[];for(let B=1;B<l.length-1;B+=2){const Z=_.parse(l[B],B,pe);if(!Z)return null;const X=_.parse(l[B+1],B+1,x);if(!X)return null;D.push([Z,X]),x=x||X.type}const F=_.parse(l[l.length-1],l.length-1,x);return F?new Vp(x,D,F):null}evaluate(l){for(const[_,x]of this.branches)if(_.evaluate(l))return x.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[_,x]of this.branches)l(_),l(x);l(this.otherwise)}outputDefined(){return this.branches.every(([l,_])=>_.outputDefined())&&this.otherwise.outputDefined()}serialize(){const l=["case"];return this.eachChild(_=>{l.push(_.serialize())}),l}}class Eu{constructor(l,_,x,D){this.type=l,this.input=_,this.beginIndex=x,this.endIndex=D}static parse(l,_){if(l.length<=2||l.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const x=_.parse(l[1],1,Me),D=_.parse(l[2],2,K);if(!x||!D)return null;if(!Nt(x.type,[ne(Me),ae,Me]))return _.error(`Expected first argument to be of type array or string, but found ${be(x.type)} instead`);if(4===l.length){const F=_.parse(l[3],3,K);return F?new Eu(x.type,x,D,F):null}return new Eu(x.type,x,D)}evaluate(l){const _=this.input.evaluate(l),x=this.beginIndex.evaluate(l);if(!St(_,["string","array"]))throw new Sr(`Expected first argument to be of type array or string, but found ${be(Mr(_))} instead.`);if(this.endIndex){const D=this.endIndex.evaluate(l);return _.slice(x,D)}return _.slice(x)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const l=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),l]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Xd(g,l){return"=="===g||"!="===g?"boolean"===l.kind||"string"===l.kind||"number"===l.kind||"null"===l.kind||"value"===l.kind:"string"===l.kind||"number"===l.kind||"value"===l.kind}function Rf(g,l,_,x){return 0===x.compare(l,_)}function Tu(g,l,_){const x="=="!==g&&"!="!==g;return class V3{constructor(F,B,Z){this.type=pe,this.lhs=F,this.rhs=B,this.collator=Z,this.hasUntypedArgument="value"===F.type.kind||"value"===B.type.kind}static parse(F,B){if(3!==F.length&&4!==F.length)return B.error("Expected two or three arguments.");const Z=F[0];let X=B.parse(F[1],1,Me);if(!X)return null;if(!Xd(Z,X.type))return B.concat(1).error(`"${Z}" comparisons are not supported for type '${be(X.type)}'.`);let re=B.parse(F[2],2,Me);if(!re)return null;if(!Xd(Z,re.type))return B.concat(2).error(`"${Z}" comparisons are not supported for type '${be(re.type)}'.`);if(X.type.kind!==re.type.kind&&"value"!==X.type.kind&&"value"!==re.type.kind)return B.error(`Cannot compare types '${be(X.type)}' and '${be(re.type)}'.`);x&&("value"===X.type.kind&&"value"!==re.type.kind?X=new Hs(re.type,[X]):"value"!==X.type.kind&&"value"===re.type.kind&&(re=new Hs(X.type,[re])));let ce=null;if(4===F.length){if("string"!==X.type.kind&&"string"!==re.type.kind&&"value"!==X.type.kind&&"value"!==re.type.kind)return B.error("Cannot use collator to compare non-string types.");if(ce=B.parse(F[3],3,ze),!ce)return null}return new V3(X,re,ce)}evaluate(F){const B=this.lhs.evaluate(F),Z=this.rhs.evaluate(F);if(x&&this.hasUntypedArgument){const X=Mr(B),re=Mr(Z);if(X.kind!==re.kind||"string"!==X.kind&&"number"!==X.kind)throw new Sr(`Expected arguments for "${g}" to be (string, string) or (number, number), but found (${X.kind}, ${re.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const X=Mr(B),re=Mr(Z);if("string"!==X.kind||"string"!==re.kind)return l(F,B,Z)}return this.collator?_(F,B,Z,this.collator.evaluate(F)):l(F,B,Z)}eachChild(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)}outputDefined(){return!0}serialize(){const F=[g];return this.eachChild(B=>{F.push(B.serialize())}),F}}}const fh=Tu("==",function(g,l,_){return l===_},Rf),wn=Tu("!=",function(g,l,_){return l!==_},function(g,l,_,x){return!Rf(0,l,_,x)}),fr=Tu("<",function(g,l,_){return l<_},function(g,l,_,x){return x.compare(l,_)<0}),id=Tu(">",function(g,l,_){return l>_},function(g,l,_,x){return x.compare(l,_)>0}),So=Tu("<=",function(g,l,_){return l<=_},function(g,l,_,x){return x.compare(l,_)<=0}),rd=Tu(">=",function(g,l,_){return l>=_},function(g,l,_,x){return x.compare(l,_)>=0});class Ha{constructor(l,_,x,D,F){this.type=ae,this.number=l,this.locale=_,this.currency=x,this.minFractionDigits=D,this.maxFractionDigits=F}static parse(l,_){if(3!==l.length)return _.error("Expected two arguments.");const x=_.parse(l[1],1,K);if(!x)return null;const D=l[2];if("object"!=typeof D||Array.isArray(D))return _.error("NumberFormat options argument must be an object.");let F=null;if(D.locale&&(F=_.parse(D.locale,1,ae),!F))return null;let B=null;if(D.currency&&(B=_.parse(D.currency,1,ae),!B))return null;let Z=null;if(D["min-fraction-digits"]&&(Z=_.parse(D["min-fraction-digits"],1,K),!Z))return null;let X=null;return D["max-fraction-digits"]&&(X=_.parse(D["max-fraction-digits"],1,K),!X)?null:new Ha(x,F,B,Z,X)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const l={};return this.locale&&(l.locale=this.locale.serialize()),this.currency&&(l.currency=this.currency.serialize()),this.minFractionDigits&&(l["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(l["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),l]}}class ps{constructor(l){this.type=K,this.input=l}static parse(l,_){if(2!==l.length)return _.error(`Expected 1 argument, but found ${l.length-1} instead.`);const x=_.parse(l[1],1);return x?"array"!==x.type.kind&&"string"!==x.type.kind&&"value"!==x.type.kind?_.error(`Expected argument of type string or array, but found ${be(x.type)} instead.`):new ps(x):null}evaluate(l){const _=this.input.evaluate(l);if("string"==typeof _||Array.isArray(_))return _.length;throw new Sr(`Expected value to be of type string or array, but found ${be(Mr(_))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}serialize(){const l=["length"];return this.eachChild(_=>{l.push(_.serialize())}),l}}const ml={"==":fh,"!=":wn,">":id,"<":fr,">=":rd,"<=":So,array:Hs,at:nd,boolean:Hs,case:Vp,coalesce:Nc,collator:Np,format:ro,image:Vo,in:Ua,"index-of":bi,interpolate:oa,"interpolate-hcl":oa,"interpolate-lab":oa,length:ps,let:Va,literal:Ro,match:Su,number:Hs,"number-format":Ha,object:Hs,slice:Eu,step:Gs,string:Hs,"to-boolean":hl,"to-color":hl,"to-number":hl,"to-string":hl,var:lh,within:fl};function mh(g,[l,_,x,D]){l=l.evaluate(g),_=_.evaluate(g),x=x.evaluate(g);const F=D?D.evaluate(g):1,B=ar(l,_,x,F);if(B)throw new Sr(B);return new hn(l/255*F,_/255*F,x/255*F,F)}function ng(g,l){return g in l}function Up(g,l){const _=l[g];return void 0===_?null:_}function sa(g){return{type:g}}function gl(g){return{result:"success",value:g}}function so(g){return{result:"error",value:g}}function $o(g){return"data-driven"===g["property-type"]||"cross-faded-data-driven"===g["property-type"]}function Of(g){return!!g.expression&&g.expression.parameters.indexOf("zoom")>-1}function Ga(g){return!!g.expression&&g.expression.interpolated}function Hi(g){return g instanceof Number?"number":g instanceof String?"string":g instanceof Boolean?"boolean":Array.isArray(g)?"array":null===g?"null":typeof g}function Hp(g){return"object"==typeof g&&null!==g&&!Array.isArray(g)}function Ff(g){return g}function Gp(g,l){const _="color"===l.type,x=g.stops&&"object"==typeof g.stops[0][0],D=x||!(x||void 0!==g.property),F=g.type||(Ga(l)?"exponential":"interval");if(_&&((g=L({},g)).stops&&(g.stops=g.stops.map(re=>[re[0],hn.parse(re[1])])),g.default=hn.parse(g.default?g.default:l.default)),g.colorSpace&&"rgb"!==g.colorSpace&&!js[g.colorSpace])throw new Error(`Unknown color space: ${g.colorSpace}`);let B,Z,X;if("exponential"===F)B=od;else if("interval"===F)B=Bc;else if("categorical"===F){B=Ys,Z=Object.create(null);for(const re of g.stops)Z[re[0]]=re[1];X=typeof g.stops[0][0]}else{if("identity"!==F)throw new Error(`Unknown function type "${F}"`);B=Mu}if(x){const re={},ce=[];for(let Se=0;Se<g.stops.length;Se++){const Re=g.stops[Se],Xe=Re[0].zoom;void 0===re[Xe]&&(re[Xe]={zoom:Xe,type:g.type,property:g.property,default:g.default,stops:[]},ce.push(Xe)),re[Xe].stops.push([Re[0].value,Re[1]])}const de=[];for(const Se of ce)de.push([re[Se].zoom,Gp(re[Se],l)]);const _e={name:"linear"};return{kind:"composite",interpolationType:_e,interpolationFactor:oa.interpolationFactor.bind(void 0,_e),zoomStops:de.map(Se=>Se[0]),evaluate:({zoom:Se},Re)=>od({stops:de,base:g.base},l,Se).evaluate(Se,Re)}}if(D){const re="exponential"===F?{name:"exponential",base:void 0!==g.base?g.base:1}:null;return{kind:"camera",interpolationType:re,interpolationFactor:oa.interpolationFactor.bind(void 0,re),zoomStops:g.stops.map(ce=>ce[0]),evaluate:({zoom:ce})=>B(g,l,ce,Z,X)}}return{kind:"source",evaluate(re,ce){const de=ce&&ce.properties?ce.properties[g.property]:void 0;return void 0===de?gh(g.default,l.default):B(g,l,de,Z,X)}}}function gh(g,l,_){return void 0!==g?g:void 0!==l?l:void 0!==_?_:void 0}function Ys(g,l,_,x,D){return gh(typeof _===D?x[_]:void 0,g.default,l.default)}function Bc(g,l,_){if("number"!==Hi(_))return gh(g.default,l.default);const x=g.stops.length;if(1===x||_<=g.stops[0][0])return g.stops[0][1];if(_>=g.stops[x-1][0])return g.stops[x-1][1];const D=Zd(g.stops.map(F=>F[0]),_);return g.stops[D][1]}function od(g,l,_){const x=void 0!==g.base?g.base:1;if("number"!==Hi(_))return gh(g.default,l.default);const D=g.stops.length;if(1===D||_<=g.stops[0][0])return g.stops[0][1];if(_>=g.stops[D-1][0])return g.stops[D-1][1];const F=Zd(g.stops.map(ce=>ce[0]),_),B=function(ce,de,_e,Se){const Re=Se-_e,Xe=ce-_e;return 0===Re?0:1===de?Xe/Re:(Math.pow(de,Xe)-1)/(Math.pow(de,Re)-1)}(_,x,g.stops[F][0],g.stops[F+1][0]),Z=g.stops[F][1],X=g.stops[F+1][1];let re=uh[l.type]||Ff;if(g.colorSpace&&"rgb"!==g.colorSpace){const ce=js[g.colorSpace];re=(de,_e)=>ce.reverse(ce.interpolate(ce.forward(de),ce.forward(_e),B))}return"function"==typeof Z.evaluate?{evaluate(...ce){const de=Z.evaluate.apply(void 0,ce),_e=X.evaluate.apply(void 0,ce);if(void 0!==de&&void 0!==_e)return re(de,_e,B)}}:re(Z,X,B)}function Mu(g,l,_){return"color"===l.type?_=hn.parse(_):"formatted"===l.type?_=zn.fromString(_.toString()):"resolvedImage"===l.type?_=ti.fromString(_.toString()):Hi(_)===l.type||"enum"===l.type&&l.values[_]||(_=void 0),gh(_,g.default,l.default)}ia.register(ml,{error:[{kind:"error"},[ae],(g,[l])=>{throw new Sr(l.evaluate(g))}],typeof:[ae,[Me],(g,[l])=>be(Mr(l.evaluate(g)))],"to-rgba":[ne(K,4),[ge],(g,[l])=>l.evaluate(g).toArray()],rgb:[ge,[K,K,K],mh],rgba:[ge,[K,K,K,K],mh],has:{type:pe,overloads:[[[ae],(g,[l])=>ng(l.evaluate(g),g.properties())],[[ae,xe],(g,[l,_])=>ng(l.evaluate(g),_.evaluate(g))]]},get:{type:Me,overloads:[[[ae],(g,[l])=>Up(l.evaluate(g),g.properties())],[[ae,xe],(g,[l,_])=>Up(l.evaluate(g),_.evaluate(g))]]},"feature-state":[Me,[ae],(g,[l])=>Up(l.evaluate(g),g.featureState||{})],properties:[xe,[],g=>g.properties()],"geometry-type":[ae,[],g=>g.geometryType()],id:[Me,[],g=>g.id()],zoom:[K,[],g=>g.globals.zoom],"heatmap-density":[K,[],g=>g.globals.heatmapDensity||0],"line-progress":[K,[],g=>g.globals.lineProgress||0],"sky-radial-progress":[K,[],g=>g.globals.skyRadialProgress||0],accumulated:[Me,[],g=>void 0===g.globals.accumulated?null:g.globals.accumulated],"+":[K,sa(K),(g,l)=>{let _=0;for(const x of l)_+=x.evaluate(g);return _}],"*":[K,sa(K),(g,l)=>{let _=1;for(const x of l)_*=x.evaluate(g);return _}],"-":{type:K,overloads:[[[K,K],(g,[l,_])=>l.evaluate(g)-_.evaluate(g)],[[K],(g,[l])=>-l.evaluate(g)]]},"/":[K,[K,K],(g,[l,_])=>l.evaluate(g)/_.evaluate(g)],"%":[K,[K,K],(g,[l,_])=>l.evaluate(g)%_.evaluate(g)],ln2:[K,[],()=>Math.LN2],pi:[K,[],()=>Math.PI],e:[K,[],()=>Math.E],"^":[K,[K,K],(g,[l,_])=>Math.pow(l.evaluate(g),_.evaluate(g))],sqrt:[K,[K],(g,[l])=>Math.sqrt(l.evaluate(g))],log10:[K,[K],(g,[l])=>Math.log(l.evaluate(g))/Math.LN10],ln:[K,[K],(g,[l])=>Math.log(l.evaluate(g))],log2:[K,[K],(g,[l])=>Math.log(l.evaluate(g))/Math.LN2],sin:[K,[K],(g,[l])=>Math.sin(l.evaluate(g))],cos:[K,[K],(g,[l])=>Math.cos(l.evaluate(g))],tan:[K,[K],(g,[l])=>Math.tan(l.evaluate(g))],asin:[K,[K],(g,[l])=>Math.asin(l.evaluate(g))],acos:[K,[K],(g,[l])=>Math.acos(l.evaluate(g))],atan:[K,[K],(g,[l])=>Math.atan(l.evaluate(g))],min:[K,sa(K),(g,l)=>Math.min(...l.map(_=>_.evaluate(g)))],max:[K,sa(K),(g,l)=>Math.max(...l.map(_=>_.evaluate(g)))],abs:[K,[K],(g,[l])=>Math.abs(l.evaluate(g))],round:[K,[K],(g,[l])=>{const _=l.evaluate(g);return _<0?-Math.round(-_):Math.round(_)}],floor:[K,[K],(g,[l])=>Math.floor(l.evaluate(g))],ceil:[K,[K],(g,[l])=>Math.ceil(l.evaluate(g))],"filter-==":[pe,[ae,Me],(g,[l,_])=>g.properties()[l.value]===_.value],"filter-id-==":[pe,[Me],(g,[l])=>g.id()===l.value],"filter-type-==":[pe,[ae],(g,[l])=>g.geometryType()===l.value],"filter-<":[pe,[ae,Me],(g,[l,_])=>{const x=g.properties()[l.value],D=_.value;return typeof x==typeof D&&x<D}],"filter-id-<":[pe,[Me],(g,[l])=>{const _=g.id(),x=l.value;return typeof _==typeof x&&_<x}],"filter->":[pe,[ae,Me],(g,[l,_])=>{const x=g.properties()[l.value],D=_.value;return typeof x==typeof D&&x>D}],"filter-id->":[pe,[Me],(g,[l])=>{const _=g.id(),x=l.value;return typeof _==typeof x&&_>x}],"filter-<=":[pe,[ae,Me],(g,[l,_])=>{const x=g.properties()[l.value],D=_.value;return typeof x==typeof D&&x<=D}],"filter-id-<=":[pe,[Me],(g,[l])=>{const _=g.id(),x=l.value;return typeof _==typeof x&&_<=x}],"filter->=":[pe,[ae,Me],(g,[l,_])=>{const x=g.properties()[l.value],D=_.value;return typeof x==typeof D&&x>=D}],"filter-id->=":[pe,[Me],(g,[l])=>{const _=g.id(),x=l.value;return typeof _==typeof x&&_>=x}],"filter-has":[pe,[Me],(g,[l])=>l.value in g.properties()],"filter-has-id":[pe,[],g=>null!==g.id()&&void 0!==g.id()],"filter-type-in":[pe,[ne(ae)],(g,[l])=>l.value.indexOf(g.geometryType())>=0],"filter-id-in":[pe,[ne(Me)],(g,[l])=>l.value.indexOf(g.id())>=0],"filter-in-small":[pe,[ae,ne(Me)],(g,[l,_])=>_.value.indexOf(g.properties()[l.value])>=0],"filter-in-large":[pe,[ae,ne(Me)],(g,[l,_])=>function(x,D,F,B){for(;F<=B;){const Z=F+B>>1;if(D[Z]===x)return!0;D[Z]>x?B=Z-1:F=Z+1}return!1}(g.properties()[l.value],_.value,0,_.value.length-1)],all:{type:pe,overloads:[[[pe,pe],(g,[l,_])=>l.evaluate(g)&&_.evaluate(g)],[sa(pe),(g,l)=>{for(const _ of l)if(!_.evaluate(g))return!1;return!0}]]},any:{type:pe,overloads:[[[pe,pe],(g,[l,_])=>l.evaluate(g)||_.evaluate(g)],[sa(pe),(g,l)=>{for(const _ of l)if(_.evaluate(g))return!0;return!1}]]},"!":[pe,[pe],(g,[l])=>!l.evaluate(g)],"is-supported-script":[pe,[ae],(g,[l])=>{const _=g.globals&&g.globals.isSupportedScript;return!_||_(l.evaluate(g))}],upcase:[ae,[ae],(g,[l])=>l.evaluate(g).toUpperCase()],downcase:[ae,[ae],(g,[l])=>l.evaluate(g).toLowerCase()],concat:[ae,sa(Me),(g,l)=>l.map(_=>Wi(_.evaluate(g))).join("")],"resolved-locale":[ae,[ze],(g,[l])=>l.evaluate(g).resolvedLocale()]});class Qd{constructor(l,_){var x;this.expression=l,this._warningHistory={},this._evaluator=new Lp,this._defaultValue=_?"color"===(x=_).type&&Hp(x.default)?new hn(0,0,0,0):"color"===x.type?hn.parse(x.default)||null:void 0===x.default?null:x.default:null,this._enumValues=_&&"enum"===_.type?_.values:null}evaluateWithoutErrorHandling(l,_,x,D,F,B){return this._evaluator.globals=l,this._evaluator.feature=_,this._evaluator.featureState=x,this._evaluator.canonical=D,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)}evaluate(l,_,x,D,F,B){this._evaluator.globals=l,this._evaluator.feature=_||null,this._evaluator.featureState=x||null,this._evaluator.canonical=D,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=B||null;try{const Z=this.expression.evaluate(this._evaluator);if(null==Z||"number"==typeof Z&&Z!=Z)return this._defaultValue;if(this._enumValues&&!(Z in this._enumValues))throw new Sr(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(Z)} instead.`);return Z}catch(Z){return this._warningHistory[Z.message]||(this._warningHistory[Z.message]=!0,"undefined"!=typeof console&&console.warn(Z.message)),this._defaultValue}}}function Aa(g){return Array.isArray(g)&&g.length>0&&"string"==typeof g[0]&&g[0]in ml}function _l(g,l){const _=new ch(ml,[],l?function(D){const F={color:ge,string:ae,number:K,enum:ae,boolean:pe,formatted:Ke,resolvedImage:Y};return"array"===D.type?ne(F[D.value]||Me,D.length):F[D.type]}(l):void 0),x=_.parse(g,void 0,void 0,void 0,l&&"string"===l.type?{typeAnnotation:"coerce"}:void 0);return x?gl(new Qd(x,l)):so(_.errors)}class yl{constructor(l,_){this.kind=l,this._styleExpression=_,this.isStateDependent="constant"!==l&&!ah(_.expression)}evaluateWithoutErrorHandling(l,_,x,D,F,B){return this._styleExpression.evaluateWithoutErrorHandling(l,_,x,D,F,B)}evaluate(l,_,x,D,F,B){return this._styleExpression.evaluate(l,_,x,D,F,B)}}class vl{constructor(l,_,x,D){this.kind=l,this.zoomStops=x,this._styleExpression=_,this.isStateDependent="camera"!==l&&!ah(_.expression),this.interpolationType=D}evaluateWithoutErrorHandling(l,_,x,D,F,B){return this._styleExpression.evaluateWithoutErrorHandling(l,_,x,D,F,B)}evaluate(l,_,x,D,F,B){return this._styleExpression.evaluate(l,_,x,D,F,B)}interpolationFactor(l,_,x){return this.interpolationType?oa.interpolationFactor(this.interpolationType,l,_,x):0}}function jp(g,l){if("error"===(g=_l(g,l)).result)return g;const _=g.value.expression,x=sh(_);if(!x&&!$o(l))return so([new G("","data expressions not supported")]);const D=$i(_,["zoom"]);if(!D&&!Of(l))return so([new G("","zoom expressions not supported")]);const F=Ds(_);return F||D?F instanceof G?so([F]):F instanceof oa&&!Ga(l)?so([new G("",'"interpolate" expressions cannot be used with this property')]):gl(F?new vl(x?"camera":"composite",g.value,F.labels,F instanceof oa?F.interpolation:void 0):new yl(x?"constant":"source",g.value)):so([new G("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class _h{constructor(l,_){this._parameters=l,this._specification=_,L(this,Gp(this._parameters,this._specification))}static deserialize(l){return new _h(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Ds(g){let l=null;if(g instanceof Va)l=Ds(g.result);else if(g instanceof Nc){for(const _ of g.args)if(l=Ds(_),l)break}else(g instanceof Gs||g instanceof oa)&&g.input instanceof ia&&"zoom"===g.input.name&&(l=g);return l instanceof G||g.eachChild(_=>{const x=Ds(_);x instanceof G?l=x:!l&&x?l=new G("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&x&&l!==x&&(l=new G("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function ja(g){const l=g.key,_=g.value,x=g.valueSpec||{},D=g.objectElementValidators||{},F=g.style,B=g.styleSpec;let Z=[];const X=Hi(_);if("object"!==X)return[new C(l,_,`object expected, ${X} found`)];for(const re in _){const ce=re.split(".")[0],de=x[ce]||x["*"];let _e;if(D[ce])_e=D[ce];else if(x[ce])_e=Qr;else if(D["*"])_e=D["*"];else{if(!x["*"]){Z.push(new C(l,_[re],`unknown property "${re}"`));continue}_e=Qr}Z=Z.concat(_e({key:(l&&`${l}.`)+re,value:_[re],valueSpec:de,style:F,styleSpec:B,object:_,objectKey:re},_))}for(const re in x)D[re]||x[re].required&&void 0===x[re].default&&void 0===_[re]&&Z.push(new C(l,_,`missing required property "${re}"`));return Z}function Jd(g){const l=g.value,_=g.valueSpec,x=g.style,D=g.styleSpec,F=g.key,B=g.arrayElementValidator||Qr;if("array"!==Hi(l))return[new C(F,l,`array expected, ${Hi(l)} found`)];if(_.length&&l.length!==_.length)return[new C(F,l,`array length ${_.length} expected, length ${l.length} found`)];if(_["min-length"]&&l.length<_["min-length"])return[new C(F,l,`array length at least ${_["min-length"]} expected, length ${l.length} found`)];let Z={type:_.value,values:_.values,minimum:_.minimum,maximum:_.maximum};D.$version<7&&(Z.function=_.function),"object"===Hi(_.value)&&(Z=_.value);let X=[];for(let re=0;re<l.length;re++)X=X.concat(B({array:l,arrayIndex:re,value:l[re],valueSpec:Z,style:x,styleSpec:D,key:`${F}[${re}]`}));return X}function Ho(g){const l=g.key,_=g.value,x=g.valueSpec;let D=Hi(_);if("number"===D&&_!=_&&(D="NaN"),"number"!==D)return[new C(l,_,`number expected, ${D} found`)];if("minimum"in x){let F=x.minimum;if("array"===Hi(x.minimum)&&(F=x.minimum[g.arrayIndex]),_<F)return[new C(l,_,`${_} is less than the minimum value ${F}`)]}if("maximum"in x){let F=x.maximum;if("array"===Hi(x.maximum)&&(F=x.maximum[g.arrayIndex]),_>F)return[new C(l,_,`${_} is greater than the maximum value ${F}`)]}return[]}function aa(g){const l=g.valueSpec,_=R(g.value.type);let x,D,F,B={};const Z="categorical"!==_&&void 0===g.value.property,X=!Z,re="array"===Hi(g.value.stops)&&"array"===Hi(g.value.stops[0])&&"object"===Hi(g.value.stops[0][0]),ce=ja({key:g.key,value:g.value,valueSpec:g.styleSpec.function,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(Se){if("identity"===_)return[new C(Se.key,Se.value,'identity function may not have a "stops" property')];let Re=[];const Xe=Se.value;return Re=Re.concat(Jd({key:Se.key,value:Xe,valueSpec:Se.valueSpec,style:Se.style,styleSpec:Se.styleSpec,arrayElementValidator:de})),"array"===Hi(Xe)&&0===Xe.length&&Re.push(new C(Se.key,Xe,"array must have at least one stop")),Re},default:function(Se){return Qr({key:Se.key,value:Se.value,valueSpec:l,style:Se.style,styleSpec:Se.styleSpec})}}});return"identity"===_&&Z&&ce.push(new C(g.key,g.value,'missing required property "property"')),"identity"===_||g.value.stops||ce.push(new C(g.key,g.value,'missing required property "stops"')),"exponential"===_&&g.valueSpec.expression&&!Ga(g.valueSpec)&&ce.push(new C(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(X&&!$o(g.valueSpec)?ce.push(new C(g.key,g.value,"property functions not supported")):Z&&!Of(g.valueSpec)&&ce.push(new C(g.key,g.value,"zoom functions not supported"))),"categorical"!==_&&!re||void 0!==g.value.property||ce.push(new C(g.key,g.value,'"property" property is required')),ce;function de(Se){let Re=[];const Xe=Se.value,at=Se.key;if("array"!==Hi(Xe))return[new C(at,Xe,`array expected, ${Hi(Xe)} found`)];if(2!==Xe.length)return[new C(at,Xe,`array length 2 expected, length ${Xe.length} found`)];if(re){if("object"!==Hi(Xe[0]))return[new C(at,Xe,`object expected, ${Hi(Xe[0])} found`)];if(void 0===Xe[0].zoom)return[new C(at,Xe,"object stop key must have zoom")];if(void 0===Xe[0].value)return[new C(at,Xe,"object stop key must have value")];if(F&&F>R(Xe[0].zoom))return[new C(at,Xe[0].zoom,"stop zoom values must appear in ascending order")];R(Xe[0].zoom)!==F&&(F=R(Xe[0].zoom),D=void 0,B={}),Re=Re.concat(ja({key:`${at}[0]`,value:Xe[0],valueSpec:{zoom:{}},style:Se.style,styleSpec:Se.styleSpec,objectElementValidators:{zoom:Ho,value:_e}}))}else Re=Re.concat(_e({key:`${at}[0]`,value:Xe[0],valueSpec:{},style:Se.style,styleSpec:Se.styleSpec},Xe));return Aa(H(Xe[1]))?Re.concat([new C(`${at}[1]`,Xe[1],"expressions are not allowed in function stops.")]):Re.concat(Qr({key:`${at}[1]`,value:Xe[1],valueSpec:l,style:Se.style,styleSpec:Se.styleSpec}))}function _e(Se,Re){const Xe=Hi(Se.value),at=R(Se.value),bt=null!==Se.value?Se.value:Re;if(x){if(Xe!==x)return[new C(Se.key,bt,`${Xe} stop domain type must match previous stop domain type ${x}`)]}else x=Xe;if("number"!==Xe&&"string"!==Xe&&"boolean"!==Xe)return[new C(Se.key,bt,"stop domain value must be a number, string, or boolean")];if("number"!==Xe&&"categorical"!==_){let It=`number expected, ${Xe} found`;return $o(l)&&void 0===_&&(It+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new C(Se.key,bt,It)]}return"categorical"!==_||"number"!==Xe||isFinite(at)&&Math.floor(at)===at?"categorical"!==_&&"number"===Xe&&void 0!==D&&at<D?[new C(Se.key,bt,"stop domain values must appear in ascending order")]:(D=at,"categorical"===_&&at in B?[new C(Se.key,bt,"stop domain values must be unique")]:(B[at]=!0,[])):[new C(Se.key,bt,`integer expected, found ${at}`)]}}function Lr(g){const l=("property"===g.expressionContext?jp:_l)(H(g.value),g.valueSpec);if("error"===l.result)return l.value.map(x=>new C(`${g.key}${x.key}`,g.value,x.message));const _=l.value.expression||l.value._styleExpression.expression;if("property"===g.expressionContext&&"text-font"===g.propertyKey&&!_.outputDefined())return[new C(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===g.expressionContext&&"layout"===g.propertyType&&!ah(_))return[new C(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===g.expressionContext&&!ah(_))return[new C(g.key,g.value,'"feature-state" data expressions are not supported with filters.')];if(g.expressionContext&&0===g.expressionContext.indexOf("cluster")){if(!$i(_,["zoom","feature-state"]))return[new C(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===g.expressionContext&&!sh(_))return[new C(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zc(g){const l=g.key,_=g.value,x=g.valueSpec,D=[];return Array.isArray(x.values)?-1===x.values.indexOf(R(_))&&D.push(new C(l,_,`expected one of [${x.values.join(", ")}], ${JSON.stringify(_)} found`)):-1===Object.keys(x.values).indexOf(R(_))&&D.push(new C(l,_,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(_)} found`)),D}function Vl(g){if(!0===g||!1===g)return!0;if(!Array.isArray(g)||0===g.length)return!1;switch(g[0]){case"has":return g.length>=2&&"$id"!==g[1]&&"$type"!==g[1];case"in":return g.length>=3&&("string"!=typeof g[1]||Array.isArray(g[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==g.length||Array.isArray(g[1])||Array.isArray(g[2]);case"any":case"all":for(const l of g.slice(1))if(!Vl(l)&&"boolean"!=typeof l)return!1;return!0;default:return!0}}const yh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sd(g){if(null==g)return{filter:()=>!0,needGeometry:!1};Vl(g)||(g=bl(g));const l=_l(g,yh);if("error"===l.result)throw new Error(l.value.map(_=>`${_.key}: ${_.message}`).join(", "));return{filter:(_,x,D)=>l.value.evaluate(_,x,{},D),needGeometry:fs(g)}}function Da(g,l){return g<l?-1:g>l?1:0}function fs(g){if(!Array.isArray(g))return!1;if("within"===g[0])return!0;for(let l=1;l<g.length;l++)if(fs(g[l]))return!0;return!1}function bl(g){if(!g)return!0;const l=g[0];return g.length<=1?"any"!==l:"=="===l?Ul(g[1],g[2],"=="):"!="===l?xl(Ul(g[1],g[2],"==")):"<"===l||">"===l||"<="===l||">="===l?Ul(g[1],g[2],l):"any"===l?(_=g.slice(1),["any"].concat(_.map(bl))):"all"===l?["all"].concat(g.slice(1).map(bl)):"none"===l?["all"].concat(g.slice(1).map(bl).map(xl)):"in"===l?vh(g[1],g.slice(2)):"!in"===l?xl(vh(g[1],g.slice(2))):"has"===l?bh(g[1]):"!has"===l?xl(bh(g[1])):"within"!==l||g;var _}function Ul(g,l,_){switch(g){case"$type":return[`filter-type-${_}`,l];case"$id":return[`filter-id-${_}`,l];default:return[`filter-${_}`,g,l]}}function vh(g,l){if(0===l.length)return!1;switch(g){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(_=>typeof _!=typeof l[0])?["filter-in-large",g,["literal",l.sort(Da)]]:["filter-in-small",g,["literal",l]]}}function bh(g){switch(g){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",g]}}function xl(g){return["!",g]}function ku(g){return Vl(H(g.value))?Lr(L({},g,{expressionContext:"filter",valueSpec:{value:"boolean"}})):os(g)}function os(g){const l=g.value,_=g.key;if("array"!==Hi(l))return[new C(_,l,`array expected, ${Hi(l)} found`)];const x=g.styleSpec;let D,F=[];if(l.length<1)return[new C(_,l,"filter array must have at least 1 element")];switch(F=F.concat(zc({key:`${_}[0]`,value:l[0],valueSpec:x.filter_operator,style:g.style,styleSpec:g.styleSpec})),R(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&"$type"===R(l[1])&&F.push(new C(_,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":3!==l.length&&F.push(new C(_,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(D=Hi(l[1]),"string"!==D&&F.push(new C(`${_}[1]`,l[1],`string expected, ${D} found`)));for(let B=2;B<l.length;B++)D=Hi(l[B]),"$type"===R(l[1])?F=F.concat(zc({key:`${_}[${B}]`,value:l[B],valueSpec:x.geometry_type,style:g.style,styleSpec:g.styleSpec})):"string"!==D&&"number"!==D&&"boolean"!==D&&F.push(new C(`${_}[${B}]`,l[B],`string, number, or boolean expected, ${D} found`));break;case"any":case"all":case"none":for(let B=1;B<l.length;B++)F=F.concat(os({key:`${_}[${B}]`,value:l[B],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":D=Hi(l[1]),2!==l.length?F.push(new C(_,l,`filter array for "${l[0]}" operator must have 2 elements`)):"string"!==D&&F.push(new C(`${_}[1]`,l[1],`string expected, ${D} found`));break;case"within":D=Hi(l[1]),2!==l.length?F.push(new C(_,l,`filter array for "${l[0]}" operator must have 2 elements`)):"object"!==D&&F.push(new C(`${_}[1]`,l[1],`object expected, ${D} found`))}return F}function ms(g,l){const _=g.key,x=g.style,D=g.styleSpec,F=g.value,B=g.objectKey,Z=D[`${l}_${g.layerType}`];if(!Z)return[];const X=B.match(/^(.*)-transition$/);if("paint"===l&&X&&Z[X[1]]&&Z[X[1]].transition)return Qr({key:_,value:F,valueSpec:D.transition,style:x,styleSpec:D});const re=g.valueSpec||Z[B];if(!re)return[new C(_,F,`unknown property "${B}"`)];let ce;if("string"===Hi(F)&&$o(re)&&!re.tokens&&(ce=/^{([^}]+)}$/.exec(F)))return[new C(_,F,`"${B}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ce[1])} }\`.`)];const de=[];return"symbol"===g.layerType&&("text-field"===B&&x&&!x.glyphs&&de.push(new C(_,F,'use of "text-field" requires a style "glyphs" property')),"text-font"===B&&Hp(H(F))&&"identity"===R(F.type)&&de.push(new C(_,F,'"text-font" does not support identity functions'))),de.concat(Qr({key:g.key,value:F,valueSpec:re,style:x,styleSpec:D,expressionContext:"property",propertyType:l,propertyKey:B}))}function hc(g){return ms(g,"paint")}function Yp(g){return ms(g,"layout")}function dc(g){let l=[];const _=g.value,x=g.key,D=g.style,F=g.styleSpec;_.type||_.ref||l.push(new C(x,_,'either "type" or "ref" is required'));let B=R(_.type);const Z=R(_.ref);if(_.id){const X=R(_.id);for(let re=0;re<g.arrayIndex;re++){const ce=D.layers[re];R(ce.id)===X&&l.push(new C(x,_.id,`duplicate layer id "${_.id}", previously used at line ${ce.id.__line__}`))}}if("ref"in _){let X;["type","source","source-layer","filter","layout"].forEach(re=>{re in _&&l.push(new C(x,_[re],`"${re}" is prohibited for ref layers`))}),D.layers.forEach(re=>{R(re.id)===Z&&(X=re)}),X?X.ref?l.push(new C(x,_.ref,"ref cannot reference another ref layer")):B=R(X.type):l.push(new C(x,_.ref,`ref layer "${Z}" not found`))}else if("background"!==B&&"sky"!==B)if(_.source){const X=D.sources&&D.sources[_.source],re=X&&R(X.type);X?"vector"===re&&"raster"===B?l.push(new C(x,_.source,`layer "${_.id}" requires a raster source`)):"raster"===re&&"raster"!==B?l.push(new C(x,_.source,`layer "${_.id}" requires a vector source`)):"vector"!==re||_["source-layer"]?"raster-dem"===re&&"hillshade"!==B?l.push(new C(x,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==B||!_.paint||!_.paint["line-gradient"]||"geojson"===re&&X.lineMetrics||l.push(new C(x,_,`layer "${_.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new C(x,_,`layer "${_.id}" must specify a "source-layer"`)):l.push(new C(x,_.source,`source "${_.source}" not found`))}else l.push(new C(x,_,'missing required property "source"'));return l=l.concat(ja({key:x,value:_,valueSpec:F.layer,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Qr({key:`${x}.type`,value:_.type,valueSpec:F.layer.type,style:g.style,styleSpec:g.styleSpec,object:_,objectKey:"type"}),filter:ku,layout:X=>ja({layer:_,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":re=>Yp(L({layerType:B},re))}}),paint:X=>ja({layer:_,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":re=>hc(L({layerType:B},re))}})}})),l}function Vc(g){const l=g.value,_=g.key,x=Hi(l);return"string"!==x?[new C(_,l,`string expected, ${x} found`)]:[]}const Kd={promoteId:function({key:g,value:l}){if("string"===Hi(l))return Vc({key:g,value:l});{const _=[];for(const x in l)_.push(...Vc({key:`${g}.${x}`,value:l[x]}));return _}}};function qp(g){const l=g.value,_=g.key,x=g.styleSpec,D=g.style;if(!l.type)return[new C(_,l,'"type" is required')];const F=R(l.type);let B;switch(F){case"vector":case"raster":case"raster-dem":return B=ja({key:_,value:l,valueSpec:x[`source_${F.replace("-","_")}`],style:g.style,styleSpec:x,objectElementValidators:Kd}),B;case"geojson":if(B=ja({key:_,value:l,valueSpec:x.source_geojson,style:D,styleSpec:x,objectElementValidators:Kd}),l.cluster)for(const Z in l.clusterProperties){const[X,re]=l.clusterProperties[Z],ce="string"==typeof X?[X,["accumulated"],["get",Z]]:X;B.push(...Lr({key:`${_}.${Z}.map`,value:re,expressionContext:"cluster-map"})),B.push(...Lr({key:`${_}.${Z}.reduce`,value:ce,expressionContext:"cluster-reduce"}))}return B;case"video":return ja({key:_,value:l,valueSpec:x.source_video,style:D,styleSpec:x});case"image":return ja({key:_,value:l,valueSpec:x.source_image,style:D,styleSpec:x});case"canvas":return[new C(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zc({key:`${_}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:D,styleSpec:x})}}function ig(g){const l=g.value,_=g.styleSpec,x=_.light,D=g.style;let F=[];const B=Hi(l);if(void 0===l)return F;if("object"!==B)return F=F.concat([new C("light",l,`object expected, ${B} found`)]),F;for(const Z in l){const X=Z.match(/^(.*)-transition$/);F=F.concat(X&&x[X[1]]&&x[X[1]].transition?Qr({key:Z,value:l[Z],valueSpec:_.transition,style:D,styleSpec:_}):x[Z]?Qr({key:Z,value:l[Z],valueSpec:x[Z],style:D,styleSpec:_}):[new C(Z,l[Z],`unknown property "${Z}"`)])}return F}function Lf(g){const l=g.value,_=g.key,x=g.style,D=g.styleSpec,F=D.terrain;let B=[];const Z=Hi(l);if(void 0===l)return B;if("object"!==Z)return B=B.concat([new C("terrain",l,`object expected, ${Z} found`)]),B;for(const X in l){const re=X.match(/^(.*)-transition$/);B=B.concat(re&&F[re[1]]&&F[re[1]].transition?Qr({key:X,value:l[X],valueSpec:D.transition,style:x,styleSpec:D}):F[X]?Qr({key:X,value:l[X],valueSpec:F[X],style:x,styleSpec:D}):[new C(X,l[X],`unknown property "${X}"`)])}if(l.source){const X=x.sources&&x.sources[l.source],re=X&&R(X.type);X?"raster-dem"!==re&&B.push(new C(_,l.source,`terrain cannot be used with a source of type ${re}, it only be used with a "raster-dem" source type`)):B.push(new C(_,l.source,`source "${l.source}" not found`))}else B.push(new C(_,l,'terrain is missing required property "source"'));return B}function ep(g){const l=g.value,_=g.style,x=g.styleSpec,D=x.fog;let F=[];const B=Hi(l);if(void 0===l)return F;if("object"!==B)return F=F.concat([new C("fog",l,`object expected, ${B} found`)]),F;for(const Z in l){const X=Z.match(/^(.*)-transition$/);F=F.concat(X&&D[X[1]]&&D[X[1]].transition?Qr({key:Z,value:l[Z],valueSpec:x.transition,style:_,styleSpec:x}):D[Z]?Qr({key:Z,value:l[Z],valueSpec:D[Z],style:_,styleSpec:x}):[new C(Z,l[Z],`unknown property "${Z}"`)])}return F}const Zp={"*":()=>[],array:Jd,boolean:function(g){const l=g.value,_=g.key,x=Hi(l);return"boolean"!==x?[new C(_,l,`boolean expected, ${x} found`)]:[]},number:Ho,color:function(g){const l=g.key,_=g.value,x=Hi(_);return"string"!==x?[new C(l,_,`color expected, ${x} found`)]:null===gn.parseCSSColor(_)?[new C(l,_,`color expected, "${_}" found`)]:[]},constants:M,enum:zc,filter:ku,function:aa,layer:dc,object:ja,source:qp,light:ig,terrain:Lf,fog:ep,string:Vc,formatted:function(g){return 0===Vc(g).length?[]:Lr(g)},resolvedImage:function(g){return 0===Vc(g).length?[]:Lr(g)}};function Qr(g){const l=g.value,_=g.valueSpec,x=g.styleSpec;return _.expression&&Hp(R(l))?aa(g):_.expression&&Aa(H(l))?Lr(g):_.type&&Zp[_.type]?Zp[_.type](g):ja(L({},g,{valueSpec:_.type?x[_.type]:_}))}function ad(g){const l=g.value,_=g.key,x=Vc(g);return x.length||(-1===l.indexOf("{fontstack}")&&x.push(new C(_,l,'"glyphs" url must include a "{fontstack}" token')),-1===l.indexOf("{range}")&&x.push(new C(_,l,'"glyphs" url must include a "{range}" token'))),x}function wl(g,l=y){let _=[];return _=_.concat(Qr({key:"",value:g,valueSpec:l.$root,styleSpec:l,style:g,objectElementValidators:{glyphs:ad,"*":()=>[]}})),g.constants&&(_=_.concat(M({key:"constants",value:g.constants,style:g,styleSpec:l}))),xh(_)}function xh(g){return[].concat(g).sort((l,_)=>l.line-_.line)}function la(g){return function(...l){return xh(g.apply(this,l))}}wl.source=la(qp),wl.light=la(ig),wl.terrain=la(Lf),wl.fog=la(ep),wl.layer=la(dc),wl.filter=la(ku),wl.paintProperty=la(hc),wl.layoutProperty=la(Yp);const Au=wl,Uc=Au.light,Wp=Au.fog,Du=Au.paintProperty,Nf=Au.layoutProperty;function tp(g,l){let _=!1;if(l&&l.length)for(const x of l)g.fire(new d(new Error(x.message))),_=!0;return _}var Hl=pc;function pc(g,l,_){var x=this.cells=[];if(g instanceof ArrayBuffer){this.arrayBuffer=g;var D=new Int32Array(this.arrayBuffer);g=D[0],this.d=(l=D[1])+2*(_=D[2]);for(var F=0;F<this.d*this.d;F++){var B=D[3+F],Z=D[3+F+1];x.push(B===Z?null:D.subarray(B,Z))}var X=D[3+x.length+1];this.keys=D.subarray(D[3+x.length],X),this.bboxes=D.subarray(X),this.insert=this._insertReadonly}else{this.d=l+2*_;for(var re=0;re<this.d*this.d;re++)x.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=g,this.padding=_,this.scale=l/g,this.uid=0;var ce=_/l*g;this.min=-ce,this.max=g+ce}pc.prototype.insert=function(g,l,_,x,D){this._forEachCell(l,_,x,D,this._insertCell,this.uid++),this.keys.push(g),this.bboxes.push(l),this.bboxes.push(_),this.bboxes.push(x),this.bboxes.push(D)},pc.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},pc.prototype._insertCell=function(g,l,_,x,D,F){this.cells[D].push(F)},pc.prototype.query=function(g,l,_,x,D){var F=this.min,B=this.max;if(g<=F&&l<=F&&B<=_&&B<=x&&!D)return Array.prototype.slice.call(this.keys);var Z=[];return this._forEachCell(g,l,_,x,this._queryCell,Z,{},D),Z},pc.prototype._queryCell=function(g,l,_,x,D,F,B,Z){var X=this.cells[D];if(null!==X)for(var re=this.keys,ce=this.bboxes,de=0;de<X.length;de++){var _e=X[de];if(void 0===B[_e]){var Se=4*_e;(Z?Z(ce[Se+0],ce[Se+1],ce[Se+2],ce[Se+3]):g<=ce[Se+2]&&l<=ce[Se+3]&&_>=ce[Se+0]&&x>=ce[Se+1])?(B[_e]=!0,F.push(re[_e])):B[_e]=!1}}},pc.prototype._forEachCell=function(g,l,_,x,D,F,B,Z){for(var X=this._convertToCellCoord(g),re=this._convertToCellCoord(l),ce=this._convertToCellCoord(_),de=this._convertToCellCoord(x),_e=X;_e<=ce;_e++)for(var Se=re;Se<=de;Se++){var Re=this.d*Se+_e;if((!Z||Z(this._convertFromCellCoord(_e),this._convertFromCellCoord(Se),this._convertFromCellCoord(_e+1),this._convertFromCellCoord(Se+1)))&&D.call(this,g,l,_,x,Re,F,B,Z))return}},pc.prototype._convertFromCellCoord=function(g){return(g-this.padding)/this.scale},pc.prototype._convertToCellCoord=function(g){return Math.max(0,Math.min(this.d-1,Math.floor(g*this.scale)+this.padding))},pc.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var g=this.cells,l=3+this.cells.length+1+1,_=0,x=0;x<this.cells.length;x++)_+=this.cells[x].length;var D=new Int32Array(l+_+this.keys.length+this.bboxes.length);D[0]=this.extent,D[1]=this.n,D[2]=this.padding;for(var F=l,B=0;B<g.length;B++){var Z=g[B];D[3+B]=F,D.set(Z,F),F+=Z.length}return D[3+g.length]=F,D.set(this.keys,F),D[3+g.length+1]=F+=this.keys.length,D.set(this.bboxes,F),F+=this.bboxes.length,D.buffer};const{ImageData:$p,ImageBitmap:Iu}=Ve,Pu={};function qn(g,l,_={}){Object.defineProperty(l,"_classRegistryKey",{value:g,writeable:!1}),Pu[g]={klass:l,omit:_.omit||[],shallow:_.shallow||[]}}qn("Object",Object),Hl.serialize=function(g,l){const _=g.toArrayBuffer();return l&&l.push(_),{buffer:_}},Hl.deserialize=function(g){return new Hl(g.buffer)},qn("Grid",Hl),qn("Color",hn),qn("Error",Error),qn("ResolvedImage",ti),qn("StylePropertyFunction",_h),qn("StyleExpression",Qd,{omit:["_evaluator"]}),qn("ZoomDependentExpression",vl),qn("ZoomConstantExpression",yl),qn("CompoundExpression",ia,{omit:["_evaluate"]});for(const g in ml)ml[g]._classRegistryKey||qn(`Expression_${g}`,ml[g]);function Xi(g){return g&&"undefined"!=typeof ArrayBuffer&&(g instanceof ArrayBuffer||g.constructor&&"ArrayBuffer"===g.constructor.name)}function Cl(g){return Iu&&g instanceof Iu}function Yr(g,l){if(null==g||"boolean"==typeof g||"number"==typeof g||"string"==typeof g||g instanceof Boolean||g instanceof Number||g instanceof String||g instanceof Date||g instanceof RegExp)return g;if(Xi(g)||Cl(g))return l&&l.push(g),g;if(ArrayBuffer.isView(g)){const _=g;return l&&l.push(_.buffer),_}if(g instanceof $p)return l&&l.push(g.data.buffer),g;if(Array.isArray(g)){const _=[];for(const x of g)_.push(Yr(x,l));return _}if("object"==typeof g){const _=g.constructor,x=_._classRegistryKey;if(!x)throw new Error("can't serialize object of unregistered class");const D=_.serialize?_.serialize(g,l):{};if(!_.serialize){for(const F in g){if(!g.hasOwnProperty(F)||Pu[x].omit.indexOf(F)>=0)continue;const B=g[F];D[F]=Pu[x].shallow.indexOf(F)>=0?B:Yr(B,l)}g instanceof Error&&(D.message=g.message)}if(D.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==x&&(D.$name=x),D}throw new Error("can't serialize object of type "+typeof g)}function Xn(g){if(null==g||"boolean"==typeof g||"number"==typeof g||"string"==typeof g||g instanceof Boolean||g instanceof Number||g instanceof String||g instanceof Date||g instanceof RegExp||Xi(g)||Cl(g)||ArrayBuffer.isView(g)||g instanceof $p)return g;if(Array.isArray(g))return g.map(Xn);if("object"==typeof g){const l=g.$name||"Object",{klass:_}=Pu[l];if(!_)throw new Error(`can't deserialize unregistered class ${l}`);if(_.deserialize)return _.deserialize(g);const x=Object.create(_.prototype);for(const D of Object.keys(g)){if("$name"===D)continue;const F=g[D];x[D]=Pu[l].shallow.indexOf(D)>=0?F:Xn(F)}return x}throw new Error("can't deserialize object of type "+typeof g)}class bs{constructor(){this.first=!0}update(l,_){const x=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=_):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=_),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=x,!0))}}const ei=g=>g>=1536&&g<=1791,np=g=>g>=1872&&g<=1919,Nr=g=>g>=2208&&g<=2303,Is=g=>g>=11904&&g<=12031,Rr=g=>g>=12032&&g<=12255,Gl=g=>g>=12272&&g<=12287,ip=g=>g>=12288&&g<=12351,Xo=g=>g>=12352&&g<=12447,ca=g=>g>=12448&&g<=12543,Hc=g=>g>=12544&&g<=12591,rp=g=>g>=12704&&g<=12735,fc=g=>g>=12736&&g<=12783,wh=g=>g>=12784&&g<=12799,Gc=g=>g>=12800&&g<=13055,jl=g=>g>=13056&&g<=13311,Ru=g=>g>=13312&&g<=19903,jc=g=>g>=19968&&g<=40959,Yc=g=>g>=40960&&g<=42127,mc=g=>g>=42128&&g<=42191,Ou=g=>g>=44032&&g<=55215,rg=g=>g>=63744&&g<=64255,Ch=g=>g>=64336&&g<=65023,op=g=>g>=65040&&g<=65055,sp=g=>g>=65072&&g<=65103,Oo=g=>g>=65104&&g<=65135,Nn=g=>g>=65136&&g<=65279,Ps=g=>g>=65280&&g<=65519;function qc(g){for(const l of g)if(Sh(l.charCodeAt(0)))return!0;return!1}function gs(g){for(const l of g)if(!Bf(l.charCodeAt(0)))return!1;return!0}function Bf(g){return!(ei(g)||np(g)||Nr(g)||Ch(g)||Nn(g))}function Sh(g){return!(746!==g&&747!==g&&(g<4352||!(rp(g)||Hc(g)||sp(g)&&!(g>=65097&&g<=65103)||rg(g)||jl(g)||Is(g)||fc(g)||!(!ip(g)||g>=12296&&g<=12305||g>=12308&&g<=12319||12336===g)||Ru(g)||jc(g)||Gc(g)||(l=g,l>=12592&&l<=12687)||(l=>l>=43360&&l<=43391)(g)||(l=>l>=55216&&l<=55295)(g)||(l=>l>=4352&&l<=4607)(g)||Ou(g)||Xo(g)||Gl(g)||(l=>l>=12688&&l<=12703)(g)||Rr(g)||wh(g)||ca(g)&&12540!==g||!(!Ps(g)||65288===g||65289===g||65293===g||g>=65306&&g<=65310||65339===g||65341===g||65343===g||g>=65371&&g<=65503||65507===g||g>=65512&&g<=65519)||!(!Oo(g)||g>=65112&&g<=65118||g>=65123&&g<=65126)||(l=>l>=5120&&l<=5759)(g)||(l=>l>=6320&&l<=6399)(g)||op(g)||(l=>l>=19904&&l<=19967)(g)||Yc(g)||mc(g))));var l}function zf(g){return!(Sh(g)||(l=g,(_=l)>=128&&_<=255&&(167===l||169===l||174===l||177===l||188===l||189===l||190===l||215===l||247===l)||(_=>_>=8192&&_<=8303)(l)&&(8214===l||8224===l||8225===l||8240===l||8241===l||8251===l||8252===l||8258===l||8263===l||8264===l||8265===l||8273===l)||(_=>_>=8448&&_<=8527)(l)||(_=>_>=8528&&_<=8591)(l)||(_=>_>=8960&&_<=9215)(l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||9003===l||l>=9085&&l<=9114||l>=9150&&l<=9165||9167===l||l>=9169&&l<=9179||l>=9186&&l<=9215)||(_=>_>=9216&&_<=9279)(l)&&9251!==l||(_=>_>=9280&&_<=9311)(l)||(_=>_>=9312&&_<=9471)(l)||(_=>_>=9632&&_<=9727)(l)||(_=>_>=9728&&_<=9983)(l)&&!(l>=9754&&l<=9759)||(_=>_>=11008&&_<=11263)(l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||ip(l)||ca(l)||(_=>_>=57344&&_<=63743)(l)||sp(l)||Oo(l)||Ps(l)||8734===l||8756===l||8757===l||l>=9984&&l<=10087||l>=10102&&l<=10131||65532===l||65533===l));var l,_}function Zc(g){return g>=1424&&g<=2303||Ch(g)||Nn(g)}function ld(g,l){return!(!l&&Zc(g)||g>=2304&&g<=3583||g>=3840&&g<=4255||(_=g,_>=6016&&_<=6143));var _}function ap(g){for(const l of g)if(Zc(l.charCodeAt(0)))return!0;return!1}const P="deferred",f="loading",w="loaded";let O=null,U="unavailable",q=null;const ee=function(g){g&&"string"==typeof g&&g.indexOf("NetworkError")>-1&&(U="error"),O&&O(g)};function se(){ue.fire(new ve("pluginStateChange",{pluginStatus:U,pluginURL:q}))}const ue=new p,me=function(){return U},Ce=function(){if(U!==P||!q)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");U=f,se(),q&&we({url:q},g=>{g?ee(g):(U=w,se())})},Ae={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>U===w||null!=Ae.applyArabicShaping,isLoading:()=>U===f,setState(g){U=g.pluginStatus,q=g.pluginURL},isParsed:()=>null!=Ae.applyArabicShaping&&null!=Ae.processBidirectionalText&&null!=Ae.processStyledBidirectionalText,getPluginURL:()=>q};class Pe{constructor(l,_){this.zoom=l,_?(this.now=_.now,this.fadeDuration=_.fadeDuration,this.zoomHistory=_.zoomHistory,this.transition=_.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bs,this.transition={})}isSupportedScript(l){return function(_,x){for(const D of _)if(!ld(D.charCodeAt(0),x))return!1;return!0}(l,Ae.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,_=l-Math.floor(l),x=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:_+(1-_)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*_}}}class Ne{constructor(l,_){this.property=l,this.value=_,this.expression=function(x,D){if(Hp(x))return new _h(x,D);if(Aa(x)){const F=jp(x,D);if("error"===F.result)throw new Error(F.value.map(B=>`${B.key}: ${B.message}`).join(", "));return F.value}{let F=x;return"string"==typeof x&&"color"===D.type&&(F=hn.parse(x)),{kind:"constant",evaluate:()=>F}}}(void 0===_?l.specification.default:_,l.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(l,_,x){return this.property.possiblyEvaluate(this,l,_,x)}}class $e{constructor(l){this.property=l,this.value=new Ne(l,void 0)}transitioned(l,_){return new mt(this.property,this.value,_,Di({},l.transition,this.transition),l.now)}untransitioned(){return new mt(this.property,this.value,null,{},0)}}class et{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return Fn(this._values[l].value.value)}setValue(l,_){this._values.hasOwnProperty(l)||(this._values[l]=new $e(this._values[l].property)),this._values[l].value=new Ne(this._values[l].property,null===_?void 0:Fn(_))}getTransition(l){return Fn(this._values[l].transition)}setTransition(l,_){this._values.hasOwnProperty(l)||(this._values[l]=new $e(this._values[l].property)),this._values[l].transition=Fn(_)||void 0}serialize(){const l={};for(const _ of Object.keys(this._values)){const x=this.getValue(_);void 0!==x&&(l[_]=x);const D=this.getTransition(_);void 0!==D&&(l[`${_}-transition`]=D)}return l}transitioned(l,_){const x=new Ue(this._properties);for(const D of Object.keys(this._values))x._values[D]=this._values[D].transitioned(l,_._values[D]);return x}untransitioned(){const l=new Ue(this._properties);for(const _ of Object.keys(this._values))l._values[_]=this._values[_].untransitioned();return l}}class mt{constructor(l,_,x,D,F){const B=D.delay||0,Z=D.duration||0;F=F||0,this.property=l,this.value=_,this.begin=F+B,this.end=this.begin+Z,l.specification.transition&&(D.delay||D.duration)&&(this.prior=x)}possiblyEvaluate(l,_,x){const D=l.now||0,F=this.value.possiblyEvaluate(l,_,x),B=this.prior;if(B){if(D>this.end)return this.prior=null,F;if(this.value.isDataDriven())return this.prior=null,F;if(D<this.begin)return B.possiblyEvaluate(l,_,x);{const Z=(D-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(l,_,x),F,Qe(Z))}}return F}}class Ue{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,_,x){const D=new vt(this._properties);for(const F of Object.keys(this._values))D._values[F]=this._values[F].possiblyEvaluate(l,_,x);return D}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class tt{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}getValue(l){return Fn(this._values[l].value)}setValue(l,_){this._values[l]=new Ne(this._values[l].property,null===_?void 0:Fn(_))}serialize(){const l={};for(const _ of Object.keys(this._values)){const x=this.getValue(_);void 0!==x&&(l[_]=x)}return l}possiblyEvaluate(l,_,x){const D=new vt(this._properties);for(const F of Object.keys(this._values))D._values[F]=this._values[F].possiblyEvaluate(l,_,x);return D}}class ot{constructor(l,_,x){this.property=l,this.value=_,this.parameters=x}isConstant(){return"constant"===this.value.kind}constantOr(l){return"constant"===this.value.kind?this.value.value:l}evaluate(l,_,x,D){return this.property.evaluate(this.value,this.parameters,l,_,x,D)}}class vt{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class rt{constructor(l){this.specification=l}possiblyEvaluate(l,_){return l.expression.evaluate(_)}interpolate(l,_,x){const D=uh[this.specification.type];return D?D(l,_,x):l}}class ht{constructor(l,_){this.specification=l,this.overrides=_}possiblyEvaluate(l,_,x,D){return new ot(this,"constant"===l.expression.kind||"camera"===l.expression.kind?{kind:"constant",value:l.expression.evaluate(_,null,{},x,D)}:l.expression,_)}interpolate(l,_,x){if("constant"!==l.value.kind||"constant"!==_.value.kind)return l;if(void 0===l.value.value||void 0===_.value.value)return new ot(this,{kind:"constant",value:void 0},l.parameters);const D=uh[this.specification.type];return D?new ot(this,{kind:"constant",value:D(l.value.value,_.value.value,x)},l.parameters):l}evaluate(l,_,x,D,F,B){return"constant"===l.kind?l.value:l.evaluate(_,x,D,F,B)}}class en extends ht{possiblyEvaluate(l,_,x,D){if(void 0===l.value)return new ot(this,{kind:"constant",value:void 0},_);if("constant"===l.expression.kind){const F=l.expression.evaluate(_,null,{},x,D),B="resolvedImage"===l.property.specification.type&&"string"!=typeof F?F.name:F,Z=this._calculate(B,B,B,_);return new ot(this,{kind:"constant",value:Z},_)}if("camera"===l.expression.kind){const F=this._calculate(l.expression.evaluate({zoom:_.zoom-1}),l.expression.evaluate({zoom:_.zoom}),l.expression.evaluate({zoom:_.zoom+1}),_);return new ot(this,{kind:"constant",value:F},_)}return new ot(this,l.expression,_)}evaluate(l,_,x,D,F,B){if("source"===l.kind){const Z=l.evaluate(_,x,D,F,B);return this._calculate(Z,Z,Z,_)}return"composite"===l.kind?this._calculate(l.evaluate({zoom:Math.floor(_.zoom)-1},x,D),l.evaluate({zoom:Math.floor(_.zoom)},x,D),l.evaluate({zoom:Math.floor(_.zoom)+1},x,D),_):l.value}_calculate(l,_,x,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:l,to:_,other:x}:{from:x,to:_,other:l}}interpolate(l){return l}}class sn{constructor(l){this.specification=l}possiblyEvaluate(l,_,x,D){if(void 0!==l.value){if("constant"===l.expression.kind){const F=l.expression.evaluate(_,null,{},x,D);return this._calculate(F,F,F,_)}return this._calculate(l.expression.evaluate(new Pe(Math.floor(_.zoom-1),_)),l.expression.evaluate(new Pe(Math.floor(_.zoom),_)),l.expression.evaluate(new Pe(Math.floor(_.zoom+1),_)),_)}}_calculate(l,_,x,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:l,to:_}:{from:x,to:_}}interpolate(l){return l}}class un{constructor(l){this.specification=l}possiblyEvaluate(l,_,x,D){return!!l.expression.evaluate(_,null,{},x,D)}interpolate(){return!1}}class ut{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const _ in l){const x=l[_];x.specification.overridable&&this.overridableProperties.push(_);const D=this.defaultPropertyValues[_]=new Ne(x,void 0),F=this.defaultTransitionablePropertyValues[_]=new $e(x);this.defaultTransitioningPropertyValues[_]=F.untransitioned(),this.defaultPossiblyEvaluatedValues[_]=D.possiblyEvaluate({})}}}function En(g,l){return 256*(g=Mt(Math.floor(g),0,255))+Mt(Math.floor(l),0,255)}qn("DataDrivenProperty",ht),qn("DataConstantProperty",rt),qn("CrossFadedDataDrivenProperty",en),qn("CrossFadedProperty",sn),qn("ColorRampProperty",un);const bn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zn{constructor(l,_){this._structArray=l,this._pos1=_*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class kn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,_){return l._trim(),_&&(l.isTransferred=!0,_.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const _=Object.create(this.prototype);return _.arrayBuffer=l.arrayBuffer,_.length=l.length,_.capacity=l.arrayBuffer.byteLength/_.bytesPerElement,_._refreshViews(),_}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const _=this.uint8;this._refreshViews(),_&&this.uint8.set(_)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function An(g,l=1){let _=0,x=0;return{members:g.map(D=>{const F=bn[D.type].BYTES_PER_ELEMENT,B=_=Ti(_,Math.max(l,F)),Z=D.components||1;return x=Math.max(x,F),_+=F*Z,{name:D.name,type:D.type,components:Z,offset:B}}),size:Ti(_,Math.max(x,l)),alignment:l}}function Ti(g,l){return Math.ceil(g/l)*l}class ci extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_){const x=this.length;return this.resize(x+1),this.emplace(x,l,_)}emplace(l,_,x){const D=2*l;return this.int16[D+0]=_,this.int16[D+1]=x,l}}ci.prototype.bytesPerElement=4,qn("StructArrayLayout2i4",ci);class lr extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x,D){const F=this.length;return this.resize(F+1),this.emplace(F,l,_,x,D)}emplace(l,_,x,D,F){const B=4*l;return this.int16[B+0]=_,this.int16[B+1]=x,this.int16[B+2]=D,this.int16[B+3]=F,l}}lr.prototype.bytesPerElement=8,qn("StructArrayLayout4i8",lr);class yr extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z){const X=this.length;return this.resize(X+1),this.emplace(X,l,_,x,D,F,B,Z)}emplace(l,_,x,D,F,B,Z,X){const re=6*l,ce=12*l,de=3*l;return this.int16[re+0]=_,this.int16[re+1]=x,this.uint8[ce+4]=D,this.uint8[ce+5]=F,this.uint8[ce+6]=B,this.uint8[ce+7]=Z,this.float32[de+2]=X,l}}yr.prototype.bytesPerElement=12,qn("StructArrayLayout2i4ub1f12",yr);class Br extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_){const x=this.length;return this.resize(x+1),this.emplace(x,l,_)}emplace(l,_,x){const D=2*l;return this.float32[D+0]=_,this.float32[D+1]=x,l}}Br.prototype.bytesPerElement=8,qn("StructArrayLayout2f8",Br);class zi extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce){const de=this.length;return this.resize(de+1),this.emplace(de,l,_,x,D,F,B,Z,X,re,ce)}emplace(l,_,x,D,F,B,Z,X,re,ce,de){const _e=10*l;return this.uint16[_e+0]=_,this.uint16[_e+1]=x,this.uint16[_e+2]=D,this.uint16[_e+3]=F,this.uint16[_e+4]=B,this.uint16[_e+5]=Z,this.uint16[_e+6]=X,this.uint16[_e+7]=re,this.uint16[_e+8]=ce,this.uint16[_e+9]=de,l}}zi.prototype.bytesPerElement=20,qn("StructArrayLayout10ui20",zi);class gr extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X){const re=this.length;return this.resize(re+1),this.emplace(re,l,_,x,D,F,B,Z,X)}emplace(l,_,x,D,F,B,Z,X,re){const ce=8*l;return this.uint16[ce+0]=_,this.uint16[ce+1]=x,this.uint16[ce+2]=D,this.uint16[ce+3]=F,this.uint16[ce+4]=B,this.uint16[ce+5]=Z,this.uint16[ce+6]=X,this.uint16[ce+7]=re,l}}gr.prototype.bytesPerElement=16,qn("StructArrayLayout8ui16",gr);class po extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce,de,_e){const Se=this.length;return this.resize(Se+1),this.emplace(Se,l,_,x,D,F,B,Z,X,re,ce,de,_e)}emplace(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se){const Re=12*l;return this.int16[Re+0]=_,this.int16[Re+1]=x,this.int16[Re+2]=D,this.int16[Re+3]=F,this.uint16[Re+4]=B,this.uint16[Re+5]=Z,this.uint16[Re+6]=X,this.uint16[Re+7]=re,this.int16[Re+8]=ce,this.int16[Re+9]=de,this.int16[Re+10]=_e,this.int16[Re+11]=Se,l}}po.prototype.bytesPerElement=24,qn("StructArrayLayout4i4ui4i24",po);class ua extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_,x){const D=this.length;return this.resize(D+1),this.emplace(D,l,_,x)}emplace(l,_,x,D){const F=3*l;return this.float32[F+0]=_,this.float32[F+1]=x,this.float32[F+2]=D,l}}ua.prototype.bytesPerElement=12,qn("StructArrayLayout3f12",ua);class xs extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const _=this.length;return this.resize(_+1),this.emplace(_,l)}emplace(l,_){return this.uint32[1*l+0]=_,l}}xs.prototype.bytesPerElement=4,qn("StructArrayLayout1ul4",xs);class Go extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce){const de=this.length;return this.resize(de+1),this.emplace(de,l,_,x,D,F,B,Z,X,re,ce)}emplace(l,_,x,D,F,B,Z,X,re,ce,de){const _e=16*l,Se=8*l;return this.int16[_e+0]=_,this.int16[_e+1]=x,this.float32[Se+1]=D,this.float32[Se+2]=F,this.float32[Se+3]=B,this.float32[Se+4]=Z,this.int16[_e+10]=X,this.uint32[Se+6]=re,this.uint16[_e+14]=ce,this.uint16[_e+15]=de,l}}Go.prototype.bytesPerElement=32,qn("StructArrayLayout2i4f1i1ul2ui32",Go);class Qo extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B){const Z=this.length;return this.resize(Z+1),this.emplace(Z,l,_,x,D,F,B)}emplace(l,_,x,D,F,B,Z){const X=6*l;return this.int16[X+0]=_,this.int16[X+1]=x,this.int16[X+2]=D,this.int16[X+3]=F,this.int16[X+4]=B,this.int16[X+5]=Z,l}}Qo.prototype.bytesPerElement=12,qn("StructArrayLayout2i2i2i12",Qo);class ha extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F){const B=this.length;return this.resize(B+1),this.emplace(B,l,_,x,D,F)}emplace(l,_,x,D,F,B){const Z=4*l,X=8*l;return this.float32[Z+0]=_,this.float32[Z+1]=x,this.float32[Z+2]=D,this.int16[X+6]=F,this.int16[X+7]=B,l}}ha.prototype.bytesPerElement=16,qn("StructArrayLayout2f1f2i16",ha);class wi extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_,x,D){const F=this.length;return this.resize(F+1),this.emplace(F,l,_,x,D)}emplace(l,_,x,D,F){const B=12*l,Z=3*l;return this.uint8[B+0]=_,this.uint8[B+1]=x,this.float32[Z+1]=D,this.float32[Z+2]=F,l}}wi.prototype.bytesPerElement=12,qn("StructArrayLayout2ub2f12",wi);class zr extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x){const D=this.length;return this.resize(D+1),this.emplace(D,l,_,x)}emplace(l,_,x,D){const F=3*l;return this.uint16[F+0]=_,this.uint16[F+1]=x,this.uint16[F+2]=D,l}}zr.prototype.bytesPerElement=6,qn("StructArrayLayout3ui6",zr);class hr extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It){const Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It)}emplace(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It,Rt){const Bt=13*l,jt=26*l,Ut=52*l;return this.float32[Bt+0]=_,this.float32[Bt+1]=x,this.uint16[jt+4]=D,this.uint16[jt+5]=F,this.uint32[Bt+3]=B,this.uint32[Bt+4]=Z,this.uint32[Bt+5]=X,this.uint16[jt+12]=re,this.uint16[jt+13]=ce,this.uint16[jt+14]=de,this.float32[Bt+8]=_e,this.float32[Bt+9]=Se,this.uint8[Ut+40]=Re,this.uint8[Ut+41]=Xe,this.uint8[Ut+42]=at,this.uint32[Bt+11]=bt,this.int16[jt+24]=It,this.uint8[Ut+50]=Rt,l}}hr.prototype.bytesPerElement=52,qn("StructArrayLayout2f2ui3ul3ui2f3ub1ul1i1ub52",hr);class qr extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It,Rt,Bt,jt,Ut,mn,Cn,vn,Tn,ln){const pn=this.length;return this.resize(pn+1),this.emplace(pn,l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It,Rt,Bt,jt,Ut,mn,Cn,vn,Tn,ln)}emplace(l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe,at,bt,It,Rt,Bt,jt,Ut,mn,Cn,vn,Tn,ln,pn){const In=17*l,on=34*l;return this.float32[In+0]=_,this.float32[In+1]=x,this.int16[on+4]=D,this.int16[on+5]=F,this.int16[on+6]=B,this.int16[on+7]=Z,this.int16[on+8]=X,this.int16[on+9]=re,this.uint16[on+10]=ce,this.uint16[on+11]=de,this.uint16[on+12]=_e,this.uint16[on+13]=Se,this.uint16[on+14]=Re,this.uint16[on+15]=Xe,this.uint16[on+16]=at,this.uint16[on+17]=bt,this.uint16[on+18]=It,this.uint16[on+19]=Rt,this.uint16[on+20]=Bt,this.uint16[on+21]=jt,this.uint16[on+22]=Ut,this.uint16[on+23]=mn,this.uint16[on+24]=Cn,this.uint32[In+13]=vn,this.float32[In+14]=Tn,this.float32[In+15]=ln,this.float32[In+16]=pn,l}}qr.prototype.bytesPerElement=68,qn("StructArrayLayout2f6i15ui1ul3f68",qr);class fo extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const _=this.length;return this.resize(_+1),this.emplace(_,l)}emplace(l,_){return this.float32[1*l+0]=_,l}}fo.prototype.bytesPerElement=4,qn("StructArrayLayout1f4",fo);class Jr extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,_,x){const D=this.length;return this.resize(D+1),this.emplace(D,l,_,x)}emplace(l,_,x,D){const F=3*l;return this.int16[F+0]=_,this.int16[F+1]=x,this.int16[F+2]=D,l}}Jr.prototype.bytesPerElement=6,qn("StructArrayLayout3i6",Jr);class da extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_,x,D){const F=this.length;return this.resize(F+1),this.emplace(F,l,_,x,D)}emplace(l,_,x,D,F){const B=6*l;return this.uint32[3*l+0]=_,this.uint16[B+2]=x,this.uint16[B+3]=D,this.uint16[B+4]=F,l}}da.prototype.bytesPerElement=12,qn("StructArrayLayout1ul3ui12",da);class Rs extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,_){const x=this.length;return this.resize(x+1),this.emplace(x,l,_)}emplace(l,_,x){const D=2*l;return this.uint16[D+0]=_,this.uint16[D+1]=x,l}}Rs.prototype.bytesPerElement=4,qn("StructArrayLayout2ui4",Rs);class qs extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const _=this.length;return this.resize(_+1),this.emplace(_,l)}emplace(l,_){return this.uint16[1*l+0]=_,l}}qs.prototype.bytesPerElement=2,qn("StructArrayLayout1ui2",qs);class Zs extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,_,x,D){const F=this.length;return this.resize(F+1),this.emplace(F,l,_,x,D)}emplace(l,_,x,D,F){const B=4*l;return this.float32[B+0]=_,this.float32[B+1]=x,this.float32[B+2]=D,this.float32[B+3]=F,l}}Zs.prototype.bytesPerElement=16,qn("StructArrayLayout4f16",Zs);class Sl extends Zn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new Be(this.anchorPointX,this.anchorPointY)}}Sl.prototype.size=32;class Wc extends Go{get(l){return new Sl(this,l)}}qn("CollisionBoxArray",Wc);class Ws extends Zn{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+4]}get numGlyphs(){return this._structArray.uint16[this._pos2+5]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineStartIndex(){return this._structArray.uint32[this._pos4+4]}get lineLength(){return this._structArray.uint32[this._pos4+5]}get segment(){return this._structArray.uint16[this._pos2+12]}get lowerSize(){return this._structArray.uint16[this._pos2+13]}get upperSize(){return this._structArray.uint16[this._pos2+14]}get lineOffsetX(){return this._structArray.float32[this._pos4+8]}get lineOffsetY(){return this._structArray.float32[this._pos4+9]}get writingMode(){return this._structArray.uint8[this._pos1+40]}get placedOrientation(){return this._structArray.uint8[this._pos1+41]}set placedOrientation(l){this._structArray.uint8[this._pos1+41]=l}get hidden(){return this._structArray.uint8[this._pos1+42]}set hidden(l){this._structArray.uint8[this._pos1+42]=l}get crossTileID(){return this._structArray.uint32[this._pos4+11]}set crossTileID(l){this._structArray.uint32[this._pos4+11]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+24]}get flipState(){return this._structArray.uint8[this._pos1+50]}set flipState(l){this._structArray.uint8[this._pos1+50]=l}}Ws.prototype.size=52;class cd extends hr{get(l){return new Ws(this,l)}}qn("PlacedSymbolArray",cd);class $c extends Zn{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+8]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+9]}get key(){return this._structArray.uint16[this._pos2+10]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get featureIndex(){return this._structArray.uint16[this._pos2+19]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+21]}get numIconVertices(){return this._structArray.uint16[this._pos2+22]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+23]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+24]}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(l){this._structArray.uint32[this._pos4+13]=l}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}$c.prototype.size=68;class bo extends qr{get(l){return new $c(this,l)}}qn("SymbolInstanceArray",bo);class mo extends fo{getoffsetX(l){return this.float32[1*l+0]}}qn("GlyphOffsetArray",mo);class Ia extends Jr{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}qn("SymbolLineVertexArray",Ia);class Fu extends Zn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Fu.prototype.size=12;class I_ extends da{get(l){return new Fu(this,l)}}qn("FeatureIndexArray",I_);class Lu extends Zn{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Lu.prototype.size=4;class Yl extends Rs{get(l){return new Lu(this,l)}}qn("FillExtrusionCentroidArray",Yl);const Av=An([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Vf=An([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Xc=Xt(function(g){g.exports=function(l,_){var x,D,F,B,Z,X,re,ce;for(D=l.length-(x=3&l.length),F=_,Z=3432918353,X=461845907,ce=0;ce<D;)re=255&l.charCodeAt(ce)|(255&l.charCodeAt(++ce))<<8|(255&l.charCodeAt(++ce))<<16|(255&l.charCodeAt(++ce))<<24,++ce,F=27492+(65535&(B=5*(65535&(F=(F^=re=(65535&(re=(re=(65535&re)*Z+(((re>>>16)*Z&65535)<<16)&4294967295)<<15|re>>>17))*X+(((re>>>16)*X&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(re=0,x){case 3:re^=(255&l.charCodeAt(ce+2))<<16;case 2:re^=(255&l.charCodeAt(ce+1))<<8;case 1:F^=re=(65535&(re=(re=(65535&(re^=255&l.charCodeAt(ce)))*Z+(((re>>>16)*Z&65535)<<16)&4294967295)<<15|re>>>17))*X+(((re>>>16)*X&65535)<<16)&4294967295}return F^=l.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}}),Dv=Xt(function(g){g.exports=function(l,_){for(var x,D=l.length,F=_^D,B=0;D>=4;)x=1540483477*(65535&(x=255&l.charCodeAt(B)|(255&l.charCodeAt(++B))<<8|(255&l.charCodeAt(++B))<<16|(255&l.charCodeAt(++B))<<24))+((1540483477*(x>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(x=1540483477*(65535&(x^=x>>>24))+((1540483477*(x>>>16)&65535)<<16)),D-=4,++B;switch(D){case 3:F^=(255&l.charCodeAt(B+2))<<16;case 2:F^=(255&l.charCodeAt(B+1))<<8;case 1:F=1540483477*(65535&(F^=255&l.charCodeAt(B)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}}),Os=Xc,Xp=Dv;Os.murmur3=Xc,Os.murmur2=Xp;class Uf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,_,x,D){this.ids.push(ws(l)),this.positions.push(_,x,D)}getPositions(l){const _=ws(l);let x=0,D=this.ids.length-1;for(;x<D;){const B=x+D>>1;this.ids[B]>=_?D=B:x=B+1}const F=[];for(;this.ids[x]===_;)F.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return F}static serialize(l,_){const x=new Float64Array(l.ids),D=new Uint32Array(l.positions);return pa(x,D,0,x.length-1),_&&_.push(x.buffer,D.buffer),{ids:x,positions:D}}static deserialize(l){const _=new Uf;return _.ids=l.ids,_.positions=l.positions,_.indexed=!0,_}}function ws(g){const l=+g;return!isNaN(l)&&l<=Et?l:Os(String(g))}function pa(g,l,_,x){for(;_<x;){const D=g[_+x>>1];let F=_-1,B=x+1;for(;;){do{F++}while(g[F]<D);do{B--}while(g[B]>D);if(F>=B)break;Eh(g,F,B),Eh(l,3*F,3*B),Eh(l,3*F+1,3*B+1),Eh(l,3*F+2,3*B+2)}B-_<x-B?(pa(g,l,_,B),_=B+1):(pa(g,l,B+1,x),x=B)}}function Eh(g,l,_){const x=g[l];g[l]=g[_],g[_]=x}qn("FeaturePositionMap",Uf);class Fo{constructor(l,_){this.gl=l.gl,this.location=_}}class Cs extends Fo{constructor(l,_){super(l,_),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class ud extends Fo{constructor(l,_){super(l,_),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Hf extends Fo{constructor(l,_){super(l,_),this.current=hn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Gf=new Float32Array(16),og=new Float32Array(9);function jf(g){return[En(255*g.r,255*g.g),En(255*g.b,255*g.a)]}class jo{constructor(l,_,x){this.value=l,this.uniformNames=_.map(D=>`u_${D}`),this.type=x}setUniform(l,_,x){l.set(x.constantOr(this.value))}getBinding(l,_,x){return"color"===this.type?new Hf(l,_):new Cs(l,_)}}class gc{constructor(l,_){this.uniformNames=_.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,_){this.pixelRatioFrom=_.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=_.tl.concat(_.br),this.patternTo=l.tl.concat(l.br)}setUniform(l,_,x,D){const F="u_pattern_to"===D||"u_dash_to"===D?this.patternTo:"u_pattern_from"===D||"u_dash_from"===D?this.patternFrom:"u_pixel_ratio_to"===D?this.pixelRatioTo:"u_pixel_ratio_from"===D?this.pixelRatioFrom:null;F&&l.set(F)}getBinding(l,_,x){return"u_pattern_from"===x||"u_pattern_to"===x||"u_dash_from"===x||"u_dash_to"===x?new ud(l,_):new Cs(l,_)}}class Fs{constructor(l,_,x,D){this.expression=l,this.type=x,this.maxValue=0,this.paintVertexAttributes=_.map(F=>({name:`a_${F}`,type:"Float32",components:"color"===x?2:1,offset:0})),this.paintVertexArray=new D}populatePaintArray(l,_,x,D,F){const B=this.paintVertexArray.length,Z=this.expression.evaluate(new Pe(0),_,{},D,[],F);this.paintVertexArray.resize(l),this._setPaintValue(B,l,Z)}updatePaintArray(l,_,x,D){const F=this.expression.evaluate({zoom:0},x,D);this._setPaintValue(l,_,F)}_setPaintValue(l,_,x){if("color"===this.type){const D=jf(x);for(let F=l;F<_;F++)this.paintVertexArray.emplace(F,D[0],D[1])}else{for(let D=l;D<_;D++)this.paintVertexArray.emplace(D,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _c{constructor(l,_,x,D,F,B){this.expression=l,this.uniformNames=_.map(Z=>`u_${Z}_t`),this.type=x,this.useIntegerZoom=D,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=_.map(Z=>({name:`a_${Z}`,type:"Float32",components:"color"===x?4:2,offset:0})),this.paintVertexArray=new B}populatePaintArray(l,_,x,D,F){const B=this.expression.evaluate(new Pe(this.zoom),_,{},D,[],F),Z=this.expression.evaluate(new Pe(this.zoom+1),_,{},D,[],F),X=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(X,l,B,Z)}updatePaintArray(l,_,x,D){const F=this.expression.evaluate({zoom:this.zoom},x,D),B=this.expression.evaluate({zoom:this.zoom+1},x,D);this._setPaintValue(l,_,F,B)}_setPaintValue(l,_,x,D){if("color"===this.type){const F=jf(x),B=jf(D);for(let Z=l;Z<_;Z++)this.paintVertexArray.emplace(Z,F[0],F[1],B[0],B[1])}else{for(let F=l;F<_;F++)this.paintVertexArray.emplace(F,x,D);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(D))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,_){const x=this.useIntegerZoom?Math.floor(_.zoom):_.zoom,D=Mt(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(D)}getBinding(l,_,x){return new Cs(l,_)}}class Nu{constructor(l,_,x,D,F,B,Z){this.expression=l,this.type=x,this.useIntegerZoom=D,this.zoom=F,this.layerId=Z,this.paintVertexAttributes=("array"===x?Vf:Av).members;for(let X=0;X<_.length;++X);this.zoomInPaintVertexArray=new B,this.zoomOutPaintVertexArray=new B}populatePaintArray(l,_,x){const D=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(D,l,_.patterns&&_.patterns[this.layerId],x)}updatePaintArray(l,_,x,D,F){this._setPaintValues(l,_,x.patterns&&x.patterns[this.layerId],F)}_setPaintValues(l,_,x,D){if(!D||!x)return;const{min:F,mid:B,max:Z}=x,X=D[F],re=D[B],ce=D[Z];if(X&&re&&ce)for(let de=l;de<_;de++)this._setPaintValue(this.zoomInPaintVertexArray,de,re,X),this._setPaintValue(this.zoomOutPaintVertexArray,de,re,ce)}_setPaintValue(l,_,x,D){l.emplace(_,x.tl[0],x.tl[1],x.br[0],x.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],x.pixelRatio,D.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $s{constructor(l,_,x=(()=>!0)){this.binders={},this._buffers=[];const D=[];for(const F in l.paint._values){if(!x(F))continue;const B=l.paint.get(F);if(!(B instanceof ot&&$o(B.property.specification)))continue;const Z=Qc(F,l.type),X=B.value,re=B.property.specification.type,ce=B.property.useIntegerZoom,de=B.property.specification["property-type"],_e="cross-faded"===de||"cross-faded-data-driven"===de,Se="line-dasharray"===String(F)&&"constant"!==l.layout.get("line-cap").value.kind;if("constant"!==X.kind||Se)if("source"===X.kind||Se||_e){const Re=R_(F,re,"source");this.binders[F]=_e?new Nu(X,Z,re,ce,_,Re,l.id):new Fs(X,Z,re,Re),D.push(`/a_${F}`)}else{const Re=R_(F,re,"composite");this.binders[F]=new _c(X,Z,re,ce,_,Re),D.push(`/z_${F}`)}else this.binders[F]=_e?new gc(X.value,Z):new jo(X.value,Z,re),D.push(`/u_${F}`)}this.cacheKey=D.sort().join("")}getMaxValue(l){const _=this.binders[l];return _ instanceof Fs||_ instanceof _c?_.maxValue:0}populatePaintArrays(l,_,x,D,F){for(const B in this.binders){const Z=this.binders[B];(Z instanceof Fs||Z instanceof _c||Z instanceof Nu)&&Z.populatePaintArray(l,_,x,D,F)}}setConstantPatternPositions(l,_){for(const x in this.binders){const D=this.binders[x];D instanceof gc&&D.setConstantPatternPositions(l,_)}}updatePaintArrays(l,_,x,D,F){let B=!1;for(const Z in l){const X=_.getPositions(Z);for(const re of X){const ce=x.feature(re.index);for(const de in this.binders){const _e=this.binders[de];if((_e instanceof Fs||_e instanceof _c||_e instanceof Nu)&&!0===_e.expression.isStateDependent){const Se=D.paint.get(de);_e.expression=Se.value,_e.updatePaintArray(re.start,re.end,ce,l[Z],F),B=!0}}}}return B}defines(){const l=[];for(const _ in this.binders){const x=this.binders[_];(x instanceof jo||x instanceof gc)&&l.push(...x.uniformNames.map(D=>`#define HAS_UNIFORM_${D}`))}return l}getBinderAttributes(){const l=[];for(const _ in this.binders){const x=this.binders[_];if(x instanceof Fs||x instanceof _c||x instanceof Nu)for(let D=0;D<x.paintVertexAttributes.length;D++)l.push(x.paintVertexAttributes[D].name)}return l}getBinderUniforms(){const l=[];for(const _ in this.binders){const x=this.binders[_];if(x instanceof jo||x instanceof gc||x instanceof _c)for(const D of x.uniformNames)l.push(D)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,_){const x=[];for(const D in this.binders){const F=this.binders[D];if(F instanceof jo||F instanceof gc||F instanceof _c)for(const B of F.uniformNames)if(_[B]){const Z=F.getBinding(l,_[B],B);x.push({name:B,property:D,binding:Z})}}return x}setUniforms(l,_,x,D){for(const{name:F,property:B,binding:Z}of _)this.binders[B].setUniform(Z,D,x.get(B),F)}updatePaintBuffers(l){this._buffers=[];for(const _ in this.binders){const x=this.binders[_];if(l&&x instanceof Nu){const D=2===l.fromScale?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;D&&this._buffers.push(D)}else(x instanceof Fs||x instanceof _c)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(l){for(const _ in this.binders){const x=this.binders[_];(x instanceof Fs||x instanceof _c||x instanceof Nu)&&x.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const _=this.binders[l];(_ instanceof Fs||_ instanceof _c||_ instanceof Nu)&&_.destroy()}}}class yc{constructor(l,_,x=(()=>!0)){this.programConfigurations={};for(const D of l)this.programConfigurations[D.id]=new $s(D,_,x);this.needsUpload=!1,this._featureMap=new Uf,this._bufferOffset=0}populatePaintArrays(l,_,x,D,F,B){for(const Z in this.programConfigurations)this.programConfigurations[Z].populatePaintArrays(l,_,D,F,B);void 0!==_.id&&this._featureMap.add(_.id,x,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,_,x,D){for(const F of x)this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(l,this._featureMap,_,F,D)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const _ in this.programConfigurations)this.programConfigurations[_].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}const Th={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Qc(g,l){return Th[g]||[g.replace(`${l}-`,"").replace(/-/g,"_")]}const Mh={"line-pattern":{source:zi,composite:zi},"fill-pattern":{source:zi,composite:zi},"fill-extrusion-pattern":{source:zi,composite:zi},"line-dasharray":{source:gr,composite:gr}},P_={color:{source:Br,composite:Zs},number:{source:fo,composite:Br}};function R_(g,l,_){const x=Mh[g];return x&&x[_]||P_[l][_]}qn("ConstantBinder",jo),qn("CrossFadedConstantBinder",gc),qn("SourceExpressionBinder",Fs),qn("CrossFadedCompositeBinder",Nu),qn("CompositeExpressionBinder",_c),qn("ProgramConfiguration",$s,{omit:["_buffers"]}),qn("ProgramConfigurationSet",yc);const Yf="-transition";class ql extends p{constructor(l,_){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==l.type&&(this.metadata=(l=l).metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,"background"!==l.type&&"sky"!==l.type&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),_.layout&&(this._unevaluatedLayout=new tt(_.layout)),_.paint)){this._transitionablePaint=new et(_.paint);for(const x in l.paint)this.setPaintProperty(x,l.paint[x],{validate:!1});for(const x in l.layout)this.setLayoutProperty(x,l.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vt(_.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return"visibility"===l?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,_,x={}){null!=_&&this._validate(Nf,`layers.${this.id}.layout.${l}`,l,_,x)||("visibility"!==l?this._unevaluatedLayout.setValue(l,_):this.visibility=_)}getPaintProperty(l){return Ht(l,Yf)?this._transitionablePaint.getTransition(l.slice(0,-Yf.length)):this._transitionablePaint.getValue(l)}setPaintProperty(l,_,x={}){if(null!=_&&this._validate(Du,`layers.${this.id}.paint.${l}`,l,_,x))return!1;if(Ht(l,Yf))return this._transitionablePaint.setTransition(l.slice(0,-Yf.length),_||void 0),!1;{const D=this._transitionablePaint._values[l],F="cross-faded-data-driven"===D.property.specification["property-type"],B=D.value.isDataDriven(),Z=D.value;this._transitionablePaint.setValue(l,_),this._handleSpecialPaintPropertyUpdate(l);const X=this._transitionablePaint._values[l].value;return X.isDataDriven()||B||F||this._handleOverridablePaintPropertyUpdate(l,Z,X)}}_handleSpecialPaintPropertyUpdate(l){}getProgramIds(){return null}getProgramConfiguration(l){return null}_handleOverridablePaintPropertyUpdate(l,_,x){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||"none"===this.visibility}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,_){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,_)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Yt(l,(_,x)=>!(void 0===_||"layout"===x&&!Object.keys(_).length||"paint"===x&&!Object.keys(_).length))}_validate(l,_,x,D,F={}){return(!F||!1!==F.validate)&&tp(this,l.call(Au,{key:_,layerType:this.type,objectKey:x,value:D,styleSpec:y,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const _=this.paint.get(l);if(_ instanceof ot&&$o(_.property.specification)&&("source"===_.value.kind||"composite"===_.value.kind)&&_.value.isStateDependent)return!0}return!1}}const Iv=An([{name:"a_pos",components:2,type:"Int16"}],4),{members:O_}=Iv;class Ss{constructor(l=[]){this.segments=l}prepareSegment(l,_,x,D){let F=this.segments[this.segments.length-1];return l>Ss.MAX_VERTEX_ARRAY_LENGTH&&mi(`Max vertices per segment is ${Ss.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!F||F.vertexLength+l>Ss.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==D)&&(F={vertexOffset:_.length,primitiveOffset:x.length,vertexLength:0,primitiveLength:0},void 0!==D&&(F.sortKey=D),this.segments.push(F)),F}get(){return this.segments}destroy(){for(const l of this.segments)for(const _ in l.vaos)l.vaos[_].destroy()}static simpleSegment(l,_,x,D){return new Ss([{vertexOffset:l,primitiveOffset:_,vertexLength:x,primitiveLength:D,vaos:{},sortKey:0}])}}Ss.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qn("SegmentVector",Ss);var Er=8192;const qf=Math.pow(2,14)-1,F_=-qf-1;function hd(g){const l=Er/g.extent,_=g.loadGeometry();for(let x=0;x<_.length;x++){const D=_[x];for(let F=0;F<D.length;F++){const B=D[F],Z=Math.round(B.x*l),X=Math.round(B.y*l);B.x=Mt(Z,F_,qf),B.y=Mt(X,F_,qf),(Z<B.x||Z>B.x+1||X<B.y||X>B.y+1)&&mi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return _}function dd(g,l){return{type:g.type,id:g.id,properties:g.properties,geometry:l?hd(g):[]}}function Gi(g,l,_,x,D){g.emplaceBack(2*l+(x+1)/2,2*_+(D+1)/2)}class Ya{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(_=>_.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new ci,this.indexArray=new zr,this.segments=new Ss,this.programConfigurations=new yc(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(l,_,x){const D=this.layers[0],F=[];let B=null;"circle"===D.type&&(B=D.layout.get("circle-sort-key"));for(const{feature:Z,id:X,index:re,sourceLayerIndex:ce}of l){const de=this.layers[0]._featureFilter.needGeometry,_e=dd(Z,de);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),_e,x))continue;const Se=B?B.evaluate(_e,{},x):void 0,Re={id:X,properties:Z.properties,type:Z.type,sourceLayerIndex:ce,index:re,geometry:de?_e.geometry:hd(Z),patterns:{},sortKey:Se};F.push(Re)}B&&F.sort((Z,X)=>Z.sortKey-X.sortKey);for(const Z of F){const{geometry:X,index:re,sourceLayerIndex:ce}=Z,de=l[re].feature;this.addFeature(Z,X,re,x),_.featureIndex.insert(de,X,re,ce,this.index)}}update(l,_,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,_,this.stateDependentLayers,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,O_),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,_,x,D){for(const F of _)for(const B of F){const Z=B.x,X=B.y;if(Z<0||Z>=Er||X<0||X>=Er)continue;const re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),ce=re.vertexLength;Gi(this.layoutVertexArray,Z,X,-1,-1),Gi(this.layoutVertexArray,Z,X,1,-1),Gi(this.layoutVertexArray,Z,X,1,1),Gi(this.layoutVertexArray,Z,X,-1,1),this.indexArray.emplaceBack(ce,ce+1,ce+2),this.indexArray.emplaceBack(ce,ce+3,ce+2),re.vertexLength+=4,re.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{},D)}}function kh(g,l){for(let _=0;_<g.length;_++)if(Wl(l,g[_]))return!0;for(let _=0;_<l.length;_++)if(Wl(g,l[_]))return!0;return!!Bu(g,l)}function El(g,l,_){return!!Wl(g,l)||!!Zl(l,g,_)}function vc(g,l){if(1===g.length)return ag(l,g[0]);for(let _=0;_<l.length;_++){const x=l[_];for(let D=0;D<x.length;D++)if(Wl(g,x[D]))return!0}for(let _=0;_<g.length;_++)if(ag(l,g[_]))return!0;for(let _=0;_<l.length;_++)if(Bu(g,l[_]))return!0;return!1}function L_(g,l,_){if(g.length>1){if(Bu(g,l))return!0;for(let x=0;x<l.length;x++)if(Zl(l[x],g,_))return!0}for(let x=0;x<g.length;x++)if(Zl(g[x],l,_))return!0;return!1}function Bu(g,l){if(0===g.length||0===l.length)return!1;for(let _=0;_<g.length-1;_++){const x=g[_],D=g[_+1];for(let F=0;F<l.length-1;F++)if(N_(x,D,l[F],l[F+1]))return!0}return!1}function N_(g,l,_,x){return Un(g,_,x)!==Un(l,_,x)&&Un(g,l,_)!==Un(g,l,x)}function Zl(g,l,_){const x=_*_;if(1===l.length)return g.distSqr(l[0])<x;for(let D=1;D<l.length;D++)if(sg(g,l[D-1],l[D])<x)return!0;return!1}function sg(g,l,_){const x=l.distSqr(_);if(0===x)return g.distSqr(l);const D=((g.x-l.x)*(_.x-l.x)+(g.y-l.y)*(_.y-l.y))/x;return g.distSqr(D<0?l:D>1?_:_.sub(l)._mult(D)._add(l))}function ag(g,l){let _,x,D,F=!1;for(let B=0;B<g.length;B++){_=g[B];for(let Z=0,X=_.length-1;Z<_.length;X=Z++)x=_[Z],D=_[X],x.y>l.y!=D.y>l.y&&l.x<(D.x-x.x)*(l.y-x.y)/(D.y-x.y)+x.x&&(F=!F)}return F}function Wl(g,l){let _=!1;for(let x=0,D=g.length-1;x<g.length;D=x++){const F=g[x],B=g[D];F.y>l.y!=B.y>l.y&&l.x<(B.x-F.x)*(l.y-F.y)/(B.y-F.y)+F.x&&(_=!_)}return _}function Qp(g,l,_,x,D){for(const B of g)if(l<=B.x&&_<=B.y&&x>=B.x&&D>=B.y)return!0;const F=[new Be(l,_),new Be(l,D),new Be(x,D),new Be(x,_)];if(g.length>2)for(const B of F)if(Wl(g,B))return!0;for(let B=0;B<g.length-1;B++)if(ss(g[B],g[B+1],F))return!0;return!1}function ss(g,l,_){const x=_[0],D=_[2];if(g.x<x.x&&l.x<x.x||g.x>D.x&&l.x>D.x||g.y<x.y&&l.y<x.y||g.y>D.y&&l.y>D.y)return!1;const F=Un(g,l,_[0]);return F!==Un(g,l,_[1])||F!==Un(g,l,_[2])||F!==Un(g,l,_[3])}function Tl(g,l,_){const x=l.paint.get(g).value;return"constant"===x.kind?x.value:_.programConfigurations.get(l.id).getMaxValue(g)}function lg(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1])}function Jp(g,l,_,x,D){if(!l[0]&&!l[1])return g;const F=Be.convert(l)._mult(D);"viewport"===_&&F._rotate(-x);const B=[];for(let Z=0;Z<g.length;Z++)B.push(g[Z].sub(F));return B}function cg(g,l,_,x){const D=Be.convert(g)._mult(x);return"viewport"===l&&D._rotate(-_),D}qn("CircleBucket",Ya,{omit:["layers"]});const ug=new ut({"circle-sort-key":new ht(y.layout_circle["circle-sort-key"])});var B_={paint:new ut({"circle-radius":new ht(y.paint_circle["circle-radius"]),"circle-color":new ht(y.paint_circle["circle-color"]),"circle-blur":new ht(y.paint_circle["circle-blur"]),"circle-opacity":new ht(y.paint_circle["circle-opacity"]),"circle-translate":new rt(y.paint_circle["circle-translate"]),"circle-translate-anchor":new rt(y.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new rt(y.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new rt(y.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ht(y.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ht(y.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ht(y.paint_circle["circle-stroke-opacity"])}),layout:ug},fa="undefined"!=typeof Float32Array?Float32Array:Array;function hg(){var g=new fa(9);return fa!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[5]=0,g[6]=0,g[7]=0),g[0]=1,g[4]=1,g[8]=1,g}function Ls(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}function pd(g,l,_){var x=l[0],D=l[1],F=l[2],B=l[3],Z=l[4],X=l[5],re=l[6],ce=l[7],de=l[8],_e=l[9],Se=l[10],Re=l[11],Xe=l[12],at=l[13],bt=l[14],It=l[15],Rt=_[0],Bt=_[1],jt=_[2],Ut=_[3];return g[0]=Rt*x+Bt*Z+jt*de+Ut*Xe,g[1]=Rt*D+Bt*X+jt*_e+Ut*at,g[2]=Rt*F+Bt*re+jt*Se+Ut*bt,g[3]=Rt*B+Bt*ce+jt*Re+Ut*It,g[4]=(Rt=_[4])*x+(Bt=_[5])*Z+(jt=_[6])*de+(Ut=_[7])*Xe,g[5]=Rt*D+Bt*X+jt*_e+Ut*at,g[6]=Rt*F+Bt*re+jt*Se+Ut*bt,g[7]=Rt*B+Bt*ce+jt*Re+Ut*It,g[8]=(Rt=_[8])*x+(Bt=_[9])*Z+(jt=_[10])*de+(Ut=_[11])*Xe,g[9]=Rt*D+Bt*X+jt*_e+Ut*at,g[10]=Rt*F+Bt*re+jt*Se+Ut*bt,g[11]=Rt*B+Bt*ce+jt*Re+Ut*It,g[12]=(Rt=_[12])*x+(Bt=_[13])*Z+(jt=_[14])*de+(Ut=_[15])*Xe,g[13]=Rt*D+Bt*X+jt*_e+Ut*at,g[14]=Rt*F+Bt*re+jt*Se+Ut*bt,g[15]=Rt*B+Bt*ce+jt*Re+Ut*It,g}Math.hypot||(Math.hypot=function(){for(var g=0,l=arguments.length;l--;)g+=arguments[l]*arguments[l];return Math.sqrt(g)});var Ml=pd;function kl(){var g=new fa(3);return fa!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function oi(g){return Math.hypot(g[0],g[1],g[2])}function qa(g,l,_){var x=new fa(3);return x[0]=g,x[1]=l,x[2]=_,x}function dg(g,l,_){return g[0]=l[0]-_[0],g[1]=l[1]-_[1],g[2]=l[2]-_[2],g}function bc(g,l,_){return g[0]=l[0]*_[0],g[1]=l[1]*_[1],g[2]=l[2]*_[2],g}function zu(g,l,_,x){return g[0]=l[0]+_[0]*x,g[1]=l[1]+_[1]*x,g[2]=l[2]+_[2]*x,g}function Zf(g,l){var _=l[0],x=l[1],D=l[2],F=_*_+x*x+D*D;return F>0&&(F=1/Math.sqrt(F)),g[0]=l[0]*F,g[1]=l[1]*F,g[2]=l[2]*F,g}function pg(g,l,_){var x=_[0],D=_[1],F=_[2],B=l[0],Z=l[1],X=l[2],re=D*X-F*Z,ce=F*B-x*X,de=x*Z-D*B,_e=D*de-F*ce,Se=F*re-x*de,Re=x*ce-D*re,Xe=2*_[3];return ce*=Xe,de*=Xe,Se*=2,Re*=2,g[0]=B+(re*=Xe)+(_e*=2),g[1]=Z+ce+Se,g[2]=X+de+Re,g}var fd,Wf=dg,Kp=bc,Pv=oi;function md(g,l,_){var x=l[0],D=l[1],F=l[2],B=l[3];return g[0]=_[0]*x+_[4]*D+_[8]*F+_[12]*B,g[1]=_[1]*x+_[5]*D+_[9]*F+_[13]*B,g[2]=_[2]*x+_[6]*D+_[10]*F+_[14]*B,g[3]=_[3]*x+_[7]*D+_[11]*F+_[15]*B,g}function Ah(){var g=new fa(4);return fa!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g[3]=1,g}function Es(g){return g[0]=0,g[1]=0,g[2]=0,g[3]=1,g}function xc(g,l,_){_*=.5;var x=l[0],D=l[1],F=l[2],B=l[3],Z=Math.sin(_),X=Math.cos(_);return g[0]=x*X+B*Z,g[1]=D*X+F*Z,g[2]=F*X-D*Z,g[3]=B*X-x*Z,g}function ef(g,l,_){const x=md([],[g.x,g.y,l,1],_);return new Be(x[0]/x[3],x[1]/x[3])}kl(),fd=new fa(4),fa!=Float32Array&&(fd[0]=0,fd[1]=0,fd[2]=0,fd[3]=0),kl(),qa(1,0,0),qa(0,1,0),Ah(),Ah(),hg();const tf=qa(0,0,0),Xs=qa(0,0,1);function lp(g,l){const _=kl();return tf[2]=l,g.intersectsPlane(tf,Xs,_),new Be(_[0],_[1])}class nf extends Ya{}function gd(g,{width:l,height:_},x,D){if(D){if(D instanceof Uint8ClampedArray)D=new Uint8Array(D.buffer);else if(D.length!==l*_*x)throw new RangeError("mismatched image size")}else D=new Uint8Array(l*_*x);return g.width=l,g.height=_,g.data=D,g}function $l(g,{width:l,height:_},x){if(l===g.width&&_===g.height)return;const D=gd({},{width:l,height:_},x);rf(g,D,{x:0,y:0},{x:0,y:0},{width:Math.min(g.width,l),height:Math.min(g.height,_)},x),g.width=l,g.height=_,g.data=D.data}function rf(g,l,_,x,D,F){if(0===D.width||0===D.height)return l;if(D.width>g.width||D.height>g.height||_.x>g.width-D.width||_.y>g.height-D.height)throw new RangeError("out of range source coordinates for image copy");if(D.width>l.width||D.height>l.height||x.x>l.width-D.width||x.y>l.height-D.height)throw new RangeError("out of range destination coordinates for image copy");const B=g.data,Z=l.data;for(let X=0;X<D.height;X++){const re=((_.y+X)*g.width+_.x)*F,ce=((x.y+X)*l.width+x.x)*F;for(let de=0;de<D.width*F;de++)Z[ce+de]=B[re+de]}return l}qn("HeatmapBucket",nf,{omit:["layers"]});class Dh{constructor(l,_){gd(this,l,1,_)}resize(l){$l(this,l,1)}clone(){return new Dh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,_,x,D,F){rf(l,_,x,D,F,1)}}class Za{constructor(l,_){gd(this,l,4,_)}resize(l){$l(this,l,4)}replace(l,_){_?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Za({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,_,x,D,F){rf(l,_,x,D,F,4)}}qn("AlphaImage",Dh),qn("RGBAImage",Za);var Rv={paint:new ut({"heatmap-radius":new ht(y.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ht(y.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new rt(y.paint_heatmap["heatmap-intensity"]),"heatmap-color":new un(y.paint_heatmap["heatmap-color"]),"heatmap-opacity":new rt(y.paint_heatmap["heatmap-opacity"])})};function cp(g){const l={},_=g.resolution||256,x=g.clips?g.clips.length:1,D=g.image||new Za({width:_,height:x}),F=(B,Z,X)=>{l[g.evaluationKey]=X;const re=g.expression.evaluate(l);D.data[B+Z+0]=Math.floor(255*re.r/re.a),D.data[B+Z+1]=Math.floor(255*re.g/re.a),D.data[B+Z+2]=Math.floor(255*re.b/re.a),D.data[B+Z+3]=Math.floor(255*re.a)};if(g.clips)for(let B=0,Z=0;B<x;++B,Z+=4*_)for(let X=0,re=0;X<_;X++,re+=4){const ce=X/(_-1),{start:de,end:_e}=g.clips[B];F(Z,re,de*(1-ce)+_e*ce)}else for(let B=0,Z=0;B<_;B++,Z+=4)F(0,Z,B/(_-1));return D}var fg={paint:new ut({"hillshade-illumination-direction":new rt(y.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new rt(y.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new rt(y.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new rt(y.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new rt(y.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new rt(y.paint_hillshade["hillshade-accent-color"])})};const mg=An([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vu}=mg;var Ih=up,$f=up;function up(g,l,_){_=_||2;var x,D,F,B,Z,X,re,ce=l&&l.length,de=ce?l[0]*_:g.length,_e=z_(g,0,de,_,!0),Se=[];if(!_e||_e.next===_e.prev)return Se;if(ce&&(_e=function(Xe,at,bt,It){var Rt,Bt,jt,Ut=[];for(Rt=0,Bt=at.length;Rt<Bt;Rt++)(jt=z_(Xe,at[Rt]*It,Rt<Bt-1?at[Rt+1]*It:Xe.length,It,!1))===jt.next&&(jt.steiner=!0),Ut.push(Wa(jt));for(Ut.sort(U_),Rt=0;Rt<Ut.length;Rt++)gg(Ut[Rt],bt),bt=Pa(bt,bt.next);return bt}(g,l,_e,_)),g.length>80*_){x=F=g[0],D=B=g[1];for(var Re=_;Re<de;Re+=_)(Z=g[Re])<x&&(x=Z),(X=g[Re+1])<D&&(D=X),Z>F&&(F=Z),X>B&&(B=X);re=0!==(re=Math.max(F-x,B-D))?1/re:0}return _d(_e,Se,_,x,D,re),Se}function z_(g,l,_,x,D){var F,B;if(D===Xl(g,l,_,x)>0)for(F=l;F<_;F+=x)B=H_(F,g[F],g[F+1],B);else for(F=_-x;F>=l;F-=x)B=H_(F,g[F],g[F+1],B);return B&&Jf(B,B.next)&&(Rh(B),B=B.next),B}function Pa(g,l){if(!g)return g;l||(l=g);var _,x=g;do{if(_=!1,x.steiner||!Jf(x,x.next)&&0!==Eo(x.prev,x,x.next))x=x.next;else{if(Rh(x),(x=l=x.prev)===x.next)break;_=!0}}while(_||x!==l);return l}function _d(g,l,_,x,D,F,B){if(g){!B&&F&&function(ce,de,_e,Se){var Re=ce;do{null===Re.z&&(Re.z=yg(Re.x,Re.y,de,_e,Se)),Re.prevZ=Re.prev,Re.nextZ=Re.next,Re=Re.next}while(Re!==ce);Re.prevZ.nextZ=null,Re.prevZ=null,function(Xe){var at,bt,It,Rt,Bt,jt,Ut,mn,Cn=1;do{for(bt=Xe,Xe=null,Bt=null,jt=0;bt;){for(jt++,It=bt,Ut=0,at=0;at<Cn&&(Ut++,It=It.nextZ);at++);for(mn=Cn;Ut>0||mn>0&&It;)0!==Ut&&(0===mn||!It||bt.z<=It.z)?(Rt=bt,bt=bt.nextZ,Ut--):(Rt=It,It=It.nextZ,mn--),Bt?Bt.nextZ=Rt:Xe=Rt,Rt.prevZ=Bt,Bt=Rt;bt=It}Bt.nextZ=null,Cn*=2}while(jt>1)}(Re)}(g,x,D,F);for(var Z,X,re=g;g.prev!==g.next;)if(Z=g.prev,X=g.next,F?Qf(g,x,D,F):Xf(g))l.push(Z.i/_),l.push(g.i/_),l.push(X.i/_),Rh(g),g=X.next,re=X.next;else if((g=X)===re){B?1===B?_d(g=V_(Pa(g),l,_),l,_,x,D,F,2):2===B&&Ph(g,l,_,x,D,F):_d(Pa(g),l,_,x,D,F,1);break}}}function Xf(g){var l=g.prev,_=g,x=g.next;if(Eo(l,_,x)>=0)return!1;for(var D=g.next.next;D!==g.prev;){if(Jc(l.x,l.y,_.x,_.y,x.x,x.y,D.x,D.y)&&Eo(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function Qf(g,l,_,x){var D=g.prev,F=g,B=g.next;if(Eo(D,F,B)>=0)return!1;for(var Z=D.x>F.x?D.x>B.x?D.x:B.x:F.x>B.x?F.x:B.x,X=D.y>F.y?D.y>B.y?D.y:B.y:F.y>B.y?F.y:B.y,re=yg(D.x<F.x?D.x<B.x?D.x:B.x:F.x<B.x?F.x:B.x,D.y<F.y?D.y<B.y?D.y:B.y:F.y<B.y?F.y:B.y,l,_,x),ce=yg(Z,X,l,_,x),de=g.prevZ,_e=g.nextZ;de&&de.z>=re&&_e&&_e.z<=ce;){if(de!==g.prev&&de!==g.next&&Jc(D.x,D.y,F.x,F.y,B.x,B.y,de.x,de.y)&&Eo(de.prev,de,de.next)>=0||(de=de.prevZ,_e!==g.prev&&_e!==g.next&&Jc(D.x,D.y,F.x,F.y,B.x,B.y,_e.x,_e.y)&&Eo(_e.prev,_e,_e.next)>=0))return!1;_e=_e.nextZ}for(;de&&de.z>=re;){if(de!==g.prev&&de!==g.next&&Jc(D.x,D.y,F.x,F.y,B.x,B.y,de.x,de.y)&&Eo(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;_e&&_e.z<=ce;){if(_e!==g.prev&&_e!==g.next&&Jc(D.x,D.y,F.x,F.y,B.x,B.y,_e.x,_e.y)&&Eo(_e.prev,_e,_e.next)>=0)return!1;_e=_e.nextZ}return!0}function V_(g,l,_){var x=g;do{var D=x.prev,F=x.next.next;!Jf(D,F)&&hp(D,x,x.next,F)&&yd(D,F)&&yd(F,D)&&(l.push(D.i/_),l.push(x.i/_),l.push(F.i/_),Rh(x),Rh(x.next),x=g=F),x=x.next}while(x!==g);return Pa(x)}function Ph(g,l,_,x,D,F){var B=g;do{for(var Z=B.next.next;Z!==B.prev;){if(B.i!==Z.i&&$a(B,Z)){var X=vg(B,Z);return B=Pa(B,B.next),X=Pa(X,X.next),_d(B,l,_,x,D,F),void _d(X,l,_,x,D,F)}Z=Z.next}B=B.next}while(B!==g)}function U_(g,l){return g.x-l.x}function gg(g,l){if(l=function(x,D){var F,B=D,Z=x.x,X=x.y,re=-1/0;do{if(X<=B.y&&X>=B.next.y&&B.next.y!==B.y){var ce=B.x+(X-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(ce<=Z&&ce>re){if(re=ce,ce===Z){if(X===B.y)return B;if(X===B.next.y)return B.next}F=B.x<B.next.x?B:B.next}}B=B.next}while(B!==D);if(!F)return null;if(Z===re)return F;var de,_e=F,Se=F.x,Re=F.y,Xe=1/0;B=F;do{Z>=B.x&&B.x>=Se&&Z!==B.x&&Jc(X<Re?Z:re,X,Se,Re,X<Re?re:Z,X,B.x,B.y)&&(de=Math.abs(X-B.y)/(Z-B.x),yd(B,x)&&(de<Xe||de===Xe&&(B.x>F.x||B.x===F.x&&_g(F,B)))&&(F=B,Xe=de)),B=B.next}while(B!==_e);return F}(g,l)){var _=vg(l,g);Pa(l,l.next),Pa(_,_.next)}}function _g(g,l){return Eo(g.prev,g,l.prev)<0&&Eo(l.next,g,g.next)<0}function yg(g,l,_,x,D){return(g=1431655765&((g=858993459&((g=252645135&((g=16711935&((g=32767*(g-_)*D)|g<<8))|g<<4))|g<<2))|g<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-x)*D)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Wa(g){var l=g,_=g;do{(l.x<_.x||l.x===_.x&&l.y<_.y)&&(_=l),l=l.next}while(l!==g);return _}function Jc(g,l,_,x,D,F,B,Z){return(D-B)*(l-Z)-(g-B)*(F-Z)>=0&&(g-B)*(x-Z)-(_-B)*(l-Z)>=0&&(_-B)*(F-Z)-(D-B)*(x-Z)>=0}function $a(g,l){return g.next.i!==l.i&&g.prev.i!==l.i&&!function(_,x){var D=_;do{if(D.i!==_.i&&D.next.i!==_.i&&D.i!==x.i&&D.next.i!==x.i&&hp(D,D.next,_,x))return!0;D=D.next}while(D!==_);return!1}(g,l)&&(yd(g,l)&&yd(l,g)&&function(_,x){var D=_,F=!1,B=(_.x+x.x)/2,Z=(_.y+x.y)/2;do{D.y>Z!=D.next.y>Z&&D.next.y!==D.y&&B<(D.next.x-D.x)*(Z-D.y)/(D.next.y-D.y)+D.x&&(F=!F),D=D.next}while(D!==_);return F}(g,l)&&(Eo(g.prev,g,l.prev)||Eo(g,l.prev,l))||Jf(g,l)&&Eo(g.prev,g,g.next)>0&&Eo(l.prev,l,l.next)>0)}function Eo(g,l,_){return(l.y-g.y)*(_.x-l.x)-(l.x-g.x)*(_.y-l.y)}function Jf(g,l){return g.x===l.x&&g.y===l.y}function hp(g,l,_,x){var D=of(Eo(g,l,_)),F=of(Eo(g,l,x)),B=of(Eo(_,x,g)),Z=of(Eo(_,x,l));return D!==F&&B!==Z||!(0!==D||!Uu(g,_,l))||!(0!==F||!Uu(g,x,l))||!(0!==B||!Uu(_,g,x))||!(0!==Z||!Uu(_,l,x))}function Uu(g,l,_){return l.x<=Math.max(g.x,_.x)&&l.x>=Math.min(g.x,_.x)&&l.y<=Math.max(g.y,_.y)&&l.y>=Math.min(g.y,_.y)}function of(g){return g>0?1:g<0?-1:0}function yd(g,l){return Eo(g.prev,g,g.next)<0?Eo(g,l,g.next)>=0&&Eo(g,g.prev,l)>=0:Eo(g,l,g.prev)<0||Eo(g,g.next,l)<0}function vg(g,l){var _=new Oh(g.i,g.x,g.y),x=new Oh(l.i,l.x,l.y),D=g.next,F=l.prev;return g.next=l,l.prev=g,_.next=D,D.prev=_,x.next=_,_.prev=x,F.next=x,x.prev=F,x}function H_(g,l,_,x){var D=new Oh(g,l,_);return x?(D.next=x.next,D.prev=x,x.next.prev=D,x.next=D):(D.prev=D,D.next=D),D}function Rh(g){g.next.prev=g.prev,g.prev.next=g.next,g.prevZ&&(g.prevZ.nextZ=g.nextZ),g.nextZ&&(g.nextZ.prevZ=g.prevZ)}function Oh(g,l,_){this.i=g,this.x=l,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xl(g,l,_,x){for(var D=0,F=l,B=_-x;F<_;F+=x)D+=(g[B]-g[F])*(g[F+1]+g[B+1]),B=F;return D}function Dx(g,l,_,x,D){G_(g,l,_||0,x||g.length-1,D||Ix)}function G_(g,l,_,x,D){for(;x>_;){if(x-_>600){var F=x-_+1,B=l-_+1,Z=Math.log(F),X=.5*Math.exp(2*Z/3),re=.5*Math.sqrt(Z*X*(F-X)/F)*(B-F/2<0?-1:1);G_(g,l,Math.max(_,Math.floor(l-B*X/F+re)),Math.min(x,Math.floor(l+(F-B)*X/F+re)),D)}var ce=g[l],de=_,_e=x;for(Hu(g,_,l),D(g[x],ce)>0&&Hu(g,_,x);de<_e;){for(Hu(g,de,_e),de++,_e--;D(g[de],ce)<0;)de++;for(;D(g[_e],ce)>0;)_e--}0===D(g[_],ce)?Hu(g,_,_e):Hu(g,++_e,x),_e<=l&&(_=_e+1),l<=_e&&(x=_e-1)}}function Hu(g,l,_){var x=g[l];g[l]=g[_],g[_]=x}function Ix(g,l){return g<l?-1:g>l?1:0}function Xa(g,l){const _=g.length;if(_<=1)return[g];const x=[];let D,F;for(let B=0;B<_;B++){const Z=ri(g[B]);0!==Z&&(g[B].area=Math.abs(Z),void 0===F&&(F=Z<0),F===Z<0?(D&&x.push(D),D=[g[B]]):D.push(g[B]))}if(D&&x.push(D),l>1)for(let B=0;B<x.length;B++)x[B].length<=l||(Dx(x[B],l,1,x[B].length-1,bg),x[B]=x[B].slice(0,l));return x}function bg(g,l){return l.area-g.area}function Kc(g,l,_){const x=_.patternDependencies;let D=!1;for(const F of l){const B=F.paint.get(`${g}-pattern`);B.isConstant()||(D=!0);const Z=B.constantOr(null);Z&&(D=!0,x[Z.to]=!0,x[Z.from]=!0)}return D}function sf(g,l,_,x,D){const F=D.patternDependencies;for(const B of l){const Z=B.paint.get(`${g}-pattern`).value;if("constant"!==Z.kind){let X=Z.evaluate({zoom:x-1},_,{},D.availableImages),re=Z.evaluate({zoom:x},_,{},D.availableImages),ce=Z.evaluate({zoom:x+1},_,{},D.availableImages);X=X&&X.name?X.name:X,re=re&&re.name?re.name:re,ce=ce&&ce.name?ce.name:ce,F[X]=!0,F[re]=!0,F[ce]=!0,_.patterns[B.id]={min:X,mid:re,max:ce}}}return _}up.deviation=function(g,l,_,x){var D=l&&l.length,F=Math.abs(Xl(g,0,D?l[0]*_:g.length,_));if(D)for(var B=0,Z=l.length;B<Z;B++)F-=Math.abs(Xl(g,l[B]*_,B<Z-1?l[B+1]*_:g.length,_));var X=0;for(B=0;B<x.length;B+=3){var re=x[B]*_,ce=x[B+1]*_,de=x[B+2]*_;X+=Math.abs((g[re]-g[de])*(g[ce+1]-g[re+1])-(g[re]-g[ce])*(g[de+1]-g[re+1]))}return 0===F&&0===X?0:Math.abs((X-F)/F)},up.flatten=function(g){for(var l=g[0][0].length,_={vertices:[],holes:[],dimensions:l},x=0,D=0;D<g.length;D++){for(var F=0;F<g[D].length;F++)for(var B=0;B<l;B++)_.vertices.push(g[D][F][B]);D>0&&_.holes.push(x+=g[D-1].length)}return _},Ih.default=$f;class eu{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(_=>_.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ci,this.indexArray=new zr,this.indexArray2=new Rs,this.programConfigurations=new yc(l.layers,l.zoom),this.segments=new Ss,this.segments2=new Ss,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(l,_,x){this.hasPattern=Kc("fill",this.layers,_);const D=this.layers[0].layout.get("fill-sort-key"),F=[];for(const{feature:B,id:Z,index:X,sourceLayerIndex:re}of l){const ce=this.layers[0]._featureFilter.needGeometry,de=dd(B,ce);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),de,x))continue;const _e=D?D.evaluate(de,{},x,_.availableImages):void 0,Se={id:Z,properties:B.properties,type:B.type,sourceLayerIndex:re,index:X,geometry:ce?de.geometry:hd(B),patterns:{},sortKey:_e};F.push(Se)}D&&F.sort((B,Z)=>B.sortKey-Z.sortKey);for(const B of F){const{geometry:Z,index:X,sourceLayerIndex:re}=B;if(this.hasPattern){const ce=sf("fill",this.layers,B,this.zoom,_);this.patternFeatures.push(ce)}else this.addFeature(B,Z,X,x,{});_.featureIndex.insert(l[X].feature,Z,X,re,this.index)}}update(l,_,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,_,this.stateDependentLayers,x)}addFeatures(l,_,x){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,_,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Vu),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,_,x,D,F){for(const B of Xa(_,500)){let Z=0;for(const Se of B)Z+=Se.length;const X=this.segments.prepareSegment(Z,this.layoutVertexArray,this.indexArray),re=X.vertexLength,ce=[],de=[];for(const Se of B){if(0===Se.length)continue;Se!==B[0]&&de.push(ce.length/2);const Re=this.segments2.prepareSegment(Se.length,this.layoutVertexArray,this.indexArray2),Xe=Re.vertexLength;this.layoutVertexArray.emplaceBack(Se[0].x,Se[0].y),this.indexArray2.emplaceBack(Xe+Se.length-1,Xe),ce.push(Se[0].x),ce.push(Se[0].y);for(let at=1;at<Se.length;at++)this.layoutVertexArray.emplaceBack(Se[at].x,Se[at].y),this.indexArray2.emplaceBack(Xe+at-1,Xe+at),ce.push(Se[at].x),ce.push(Se[at].y);Re.vertexLength+=Se.length,Re.primitiveLength+=Se.length}const _e=Ih(ce,de);for(let Se=0;Se<_e.length;Se+=3)this.indexArray.emplaceBack(re+_e[Se],re+_e[Se+1],re+_e[Se+2]);X.vertexLength+=Z,X.primitiveLength+=_e.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,F,D)}}qn("FillBucket",eu,{omit:["layers","patternFeatures"]});const Fh=new ut({"fill-sort-key":new ht(y.layout_fill["fill-sort-key"])});var xg={paint:new ut({"fill-antialias":new rt(y.paint_fill["fill-antialias"]),"fill-opacity":new ht(y.paint_fill["fill-opacity"]),"fill-color":new ht(y.paint_fill["fill-color"]),"fill-outline-color":new ht(y.paint_fill["fill-outline-color"]),"fill-translate":new rt(y.paint_fill["fill-translate"]),"fill-translate-anchor":new rt(y.paint_fill["fill-translate-anchor"]),"fill-pattern":new en(y.paint_fill["fill-pattern"])}),layout:Fh};const j_=An([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),af=An([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:tu}=j_;var wg=wc;function wc(g,l,_,x,D){this.properties={},this.extent=_,this.type=0,this._pbf=g,this._geometry=-1,this._keys=x,this._values=D,g.readFields(dp,this,l)}function dp(g,l,_){1==g?l.id=_.readVarint():2==g?function(x,D){for(var F=x.readVarint()+x.pos;x.pos<F;){var B=D._keys[x.readVarint()],Z=D._values[x.readVarint()];D.properties[B]=Z}}(_,l):3==g?l.type=_.readVarint():4==g&&(l._geometry=_.pos)}function Cg(g){for(var l,_,x=0,D=0,F=g.length,B=F-1;D<F;B=D++)x+=((_=g[B]).x-(l=g[D]).x)*(l.y+_.y);return x}wc.types=["Unknown","Point","LineString","Polygon"],wc.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var l,_=g.readVarint()+g.pos,x=1,D=0,F=0,B=0,Z=[];g.pos<_;){if(D<=0){var X=g.readVarint();x=7&X,D=X>>3}if(D--,1===x||2===x)F+=g.readSVarint(),B+=g.readSVarint(),1===x&&(l&&Z.push(l),l=[]),l.push(new Be(F,B));else{if(7!==x)throw new Error("unknown command "+x);l&&l.push(l[0].clone())}}return l&&Z.push(l),Z},wc.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var l=g.readVarint()+g.pos,_=1,x=0,D=0,F=0,B=1/0,Z=-1/0,X=1/0,re=-1/0;g.pos<l;){if(x<=0){var ce=g.readVarint();_=7&ce,x=ce>>3}if(x--,1===_||2===_)(D+=g.readSVarint())<B&&(B=D),D>Z&&(Z=D),(F+=g.readSVarint())<X&&(X=F),F>re&&(re=F);else if(7!==_)throw new Error("unknown command "+_)}return[B,X,Z,re]},wc.prototype.toGeoJSON=function(g,l,_){var x,D,F=this.extent*Math.pow(2,_),B=this.extent*g,Z=this.extent*l,X=this.loadGeometry(),re=wc.types[this.type];function ce(Se){for(var Re=0;Re<Se.length;Re++){var Xe=Se[Re];Se[Re]=[360*(Xe.x+B)/F-180,360/Math.PI*Math.atan(Math.exp((180-360*(Xe.y+Z)/F)*Math.PI/180))-90]}}switch(this.type){case 1:var de=[];for(x=0;x<X.length;x++)de[x]=X[x][0];ce(X=de);break;case 2:for(x=0;x<X.length;x++)ce(X[x]);break;case 3:for(X=function(Se){var Re=Se.length;if(Re<=1)return[Se];for(var Xe,at,bt=[],It=0;It<Re;It++){var Rt=Cg(Se[It]);0!==Rt&&(void 0===at&&(at=Rt<0),at===Rt<0?(Xe&&bt.push(Xe),Xe=[Se[It]]):Xe.push(Se[It]))}return Xe&&bt.push(Xe),bt}(X),x=0;x<X.length;x++)for(D=0;D<X[x].length;D++)ce(X[x][D])}1===X.length?X=X[0]:re="Multi"+re;var _e={type:"Feature",geometry:{type:re,coordinates:X},properties:this.properties};return"id"in this&&(_e.id=this.id),_e};var Sg=Y_;function Y_(g,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=g,this._keys=[],this._values=[],this._features=[],g.readFields(vd,this,l),this.length=this._features.length}function vd(g,l,_){15===g?l.version=_.readVarint():1===g?l.name=_.readString():5===g?l.extent=_.readVarint():2===g?l._features.push(_.pos):3===g?l._keys.push(_.readString()):4===g&&l._values.push(function(x){for(var D=null,F=x.readVarint()+x.pos;x.pos<F;){var B=x.readVarint()>>3;D=1===B?x.readString():2===B?x.readFloat():3===B?x.readDouble():4===B?x.readVarint64():5===B?x.readVarint():6===B?x.readSVarint():7===B?x.readBoolean():null}return D}(_))}function lf(g,l,_){if(3===g){var x=new Sg(_,_.readVarint()+_.pos);x.length&&(l[x.name]=x)}}Y_.prototype.feature=function(g){if(g<0||g>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[g];var l=this._pbf.readVarint()+this._pbf.pos;return new wg(this._pbf,l,this.extent,this._keys,this._values)};var Lh={VectorTile:function(g,l){this.layers=g.readFields(lf,{},l)},VectorTileFeature:wg,VectorTileLayer:Sg};const q_=Lh.VectorTileFeature.types,Ov=Math.pow(2,13);function cf(g,l,_,x,D,F,B,Z){g.emplaceBack((l<<1)+B,(_<<1)+F,(Math.floor(x*Ov)<<1)+D,Math.round(Z))}class Kf{constructor(){this.acc=new Be(0,0),this.polyCount=[]}startRing(l){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Be(l.x,l.y),this.max=new Be(l.x,l.y))}append(l,_){this.currentPolyCount.edges++,this.acc._add(l);let x=!!this.borders;const D=this.min,F=this.max;l.x<D.x?(D.x=l.x,x=!0):l.x>F.x&&(F.x=l.x,x=!0),l.y<D.y?(D.y=l.y,x=!0):l.y>F.y&&(F.y=l.y,x=!0),((0===l.x||l.x===Er)&&l.x===_.x)!=((0===l.y||l.y===Er)&&l.y===_.y)&&this.processBorderOverlap(l,_),x&&this.checkBorderIntersection(l,_)}checkBorderIntersection(l,_){_.x<0!=l.x<0&&this.addBorderIntersection(0,ui(_.y,l.y,(0-_.x)/(l.x-_.x))),_.x>Er!=l.x>Er&&this.addBorderIntersection(1,ui(_.y,l.y,(Er-_.x)/(l.x-_.x))),_.y<0!=l.y<0&&this.addBorderIntersection(2,ui(_.x,l.x,(0-_.y)/(l.y-_.y))),_.y>Er!=l.y>Er&&this.addBorderIntersection(3,ui(_.x,l.x,(Er-_.y)/(l.y-_.y)))}addBorderIntersection(l,_){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const x=this.borders[l];_<x[0]&&(x[0]=_),_>x[1]&&(x[1]=_)}processBorderOverlap(l,_){if(l.x===_.x){if(l.y===_.y)return;const x=0===l.x?0:1;this.addBorderIntersection(x,_.y),this.addBorderIntersection(x,l.y)}else{const x=0===l.y?2:3;this.addBorderIntersection(x,_.x),this.addBorderIntersection(x,l.x)}}centroid(){const l=this.polyCount.reduce((_,x)=>_+x.edges,0);return 0!==l?this.acc.div(l)._round():new Be(0,0)}span(){return new Be(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((l,_)=>l+ +(_[0]!==Number.MAX_VALUE),0)}}class Ra{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(_=>_.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new lr,this.centroidVertexArray=new Yl,this.indexArray=new zr,this.programConfigurations=new yc(l.layers,l.zoom),this.segments=new Ss,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.enableTerrain=l.enableTerrain}populate(l,_,x){this.features=[],this.hasPattern=Kc("fill-extrusion",this.layers,_),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(D){const F=Math.exp(Math.PI*(1-D.y/(1<<D.z)*2));return 80150034*F/(F*F+1)/Er/(1<<D.z)}(x);for(const{feature:D,id:F,index:B,sourceLayerIndex:Z}of l){const X=this.layers[0]._featureFilter.needGeometry,re=dd(D,X);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),re,x))continue;const ce={id:F,sourceLayerIndex:Z,index:B,geometry:X?re.geometry:hd(D),properties:D.properties,type:D.type,patterns:{}},de=this.layoutVertexArray.length;this.hasPattern?this.features.push(sf("fill-extrusion",this.layers,ce,this.zoom,_)):this.addFeature(ce,ce.geometry,B,x,{}),_.featureIndex.insert(D,ce.geometry,B,Z,this.index,de)}this.sortBorders()}addFeatures(l,_,x){for(const D of this.features){const{geometry:F}=D;this.addFeature(D,F,D.index,_,x)}this.sortBorders()}update(l,_,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,_,this.stateDependentLayers,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,tu),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}uploadCentroid(l){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,af.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,_,x,D,F){const B=this.enableTerrain?new Kf:null;for(const X of Xa(_,500)){let re=0,ce=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===X.length||(Z=X[0]).every(Xe=>Xe.x<=0)||Z.every(Xe=>Xe.x>=Er)||Z.every(Xe=>Xe.y<=0)||Z.every(Xe=>Xe.y>=Er))continue;for(let Xe=0;Xe<X.length;Xe++){const at=X[Xe];if(0===at.length)continue;re+=at.length;let bt=0;B&&B.startRing(at[0]);for(let It=0;It<at.length;It++){const Rt=at[It];if(It>=1){const Bt=at[It-1];if(!em(Rt,Bt)){B&&B.append(Rt,Bt),ce.vertexLength+4>Ss.MAX_VERTEX_ARRAY_LENGTH&&(ce=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const jt=Rt.sub(Bt)._perp(),Ut=jt.x/(Math.abs(jt.x)+Math.abs(jt.y)),mn=jt.y>0?1:0,Cn=Bt.dist(Rt);bt+Cn>32768&&(bt=0),cf(this.layoutVertexArray,Rt.x,Rt.y,Ut,mn,0,0,bt),cf(this.layoutVertexArray,Rt.x,Rt.y,Ut,mn,0,1,bt),bt+=Cn,cf(this.layoutVertexArray,Bt.x,Bt.y,Ut,mn,0,0,bt),cf(this.layoutVertexArray,Bt.x,Bt.y,Ut,mn,0,1,bt);const vn=ce.vertexLength;this.indexArray.emplaceBack(vn,vn+2,vn+1),this.indexArray.emplaceBack(vn+1,vn+2,vn+3),ce.vertexLength+=4,ce.primitiveLength+=2}}}}if(ce.vertexLength+re>Ss.MAX_VERTEX_ARRAY_LENGTH&&(ce=this.segments.prepareSegment(re,this.layoutVertexArray,this.indexArray)),"Polygon"!==q_[l.type])continue;const de=[],_e=[],Se=ce.vertexLength;for(let Xe=0;Xe<X.length;Xe++){const at=X[Xe];if(0!==at.length){at!==X[0]&&_e.push(de.length/2);for(let bt=0;bt<at.length;bt++){const It=at[bt];cf(this.layoutVertexArray,It.x,It.y,0,0,1,1,0),de.push(It.x),de.push(It.y),B&&B.currentPolyCount.top++}}}const Re=Ih(de,_e);for(let Xe=0;Xe<Re.length;Xe+=3)this.indexArray.emplaceBack(Se+Re[Xe],Se+Re[Xe+2],Se+Re[Xe+1]);ce.primitiveLength+=Re.length/3,ce.vertexLength+=re}var Z;if(B&&B.polyCount.length>0){if(B.borders){B.vertexArrayOffset=this.centroidVertexArray.length;const X=B.borders,re=this.featuresOnBorder.push(B)-1;for(let ce=0;ce<4;ce++)X[ce][0]!==Number.MAX_VALUE&&this.borders[ce].push(re)}this.encodeCentroid(B.borders?void 0:B.centroid(),B)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,F,D)}sortBorders(){for(let l=0;l<4;l++)this.borders[l].sort((_,x)=>this.featuresOnBorder[_].borders[l][0]-this.featuresOnBorder[x].borders[l][0])}encodeCentroid(l,_,x=!0){let D,F;if(l)if(0!==l.y){const Z=_.span()._mult(this.tileToMeter);D=(Math.max(l.x,1)<<3)+Math.min(7,Math.round(Z.x/10)),F=(Math.max(l.y,1)<<3)+Math.min(7,Math.round(Z.y/10))}else D=Math.ceil(7*(l.x+450)),F=0;else D=0,F=+x;let B=x?this.centroidVertexArray.length:_.vertexArrayOffset;for(const Z of _.polyCount){x&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*Z.edges+Z.top);for(let X=0;X<2*Z.edges;X++)this.centroidVertexArray.emplace(B++,0,F),this.centroidVertexArray.emplace(B++,D,F);for(let X=0;X<Z.top;X++)this.centroidVertexArray.emplace(B++,D,F)}}}function em(g,l){return g.x===l.x&&(g.x<0||g.x>Er)||g.y===l.y&&(g.y<0||g.y>Er)}qn("FillExtrusionBucket",Ra,{omit:["layers","features"]}),qn("PartMetadata",Kf);var E={paint:new ut({"fill-extrusion-opacity":new rt(y["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ht(y["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new rt(y["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new rt(y["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new en(y["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ht(y["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ht(y["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new rt(y["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function S(g,l){return g.x*l.x+g.y*l.y}function I(g,l){if(1===g.length){let _=0;const x=l[_++];let D;for(;!D||x.equals(D);)if(D=l[_++],!D)return 1/0;for(;_<l.length;_++){const F=l[_],B=g[0],Z=D.sub(x),X=F.sub(x),re=B.sub(x),ce=S(Z,Z),de=S(Z,X),_e=S(X,X),Se=S(re,Z),Re=S(re,X),Xe=ce*_e-de*de,at=(_e*Se-de*Re)/Xe,bt=(ce*Re-de*Se)/Xe,It=x.z*(1-at-bt)+D.z*at+F.z*bt;if(isFinite(It))return It}return 1/0}{let _=1/0;for(const x of l)_=Math.min(_,x.z);return _}}function V(g){const l=new Be(g[0],g[1]);return l.z=g[2],l}function Q(g,l,_,x,D,F,B,Z){const X=B*D.getElevationAt(g,l,!0,!0),re=0!==F[0],ce=re?0===F[1]?B*(F[0]/7-450):B*function(de,_e,Se){const Re=Math.floor(_e[0]/8),Xe=Math.floor(_e[1]/8),at=10*(_e[0]-8*Re),bt=10*(_e[1]-8*Xe),It=de.getElevationAt(Re,Xe,!0,!0),Rt=de.getMeterToDEM(Se),Bt=Math.floor(.5*(at*Rt-1)),jt=Math.floor(.5*(bt*Rt-1)),Ut=de.tileCoordToPixel(Re,Xe),mn=2*Bt+1,Cn=2*jt+1,vn=(Li=mn,ni=Cn,[(Mi=de).getElevationAtPixel(gi=Ut.x-Bt,Ki=Ut.y-jt,!0),Mi.getElevationAtPixel(gi+ni,Ki,!0),Mi.getElevationAtPixel(gi,Ki+ni,!0),Mi.getElevationAtPixel(gi+Li,Ki+ni,!0)]),Tn=Math.abs(vn[0]-vn[1]),ln=Math.abs(vn[2]-vn[3]),pn=Math.abs(vn[0]-vn[2])+Math.abs(vn[1]-vn[3]),In=Math.min(.25,.5*Rt*(Tn+ln)/mn),on=Math.min(.25,.5*Rt*pn/Cn);var Mi,gi,Ki,Li,ni;return It+Math.max(In*at,on*bt)}(D,F,Z):X;return{base:X+(0===_)?-1:_,top:re?Math.max(ce+x,X+_+2):X+x}}const le=An([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:ye}=le,Fe=An([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ye}=Fe,st=Lh.VectorTileFeature.types,pt=Math.cos(Math.PI/180*37.5);class Wt{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(_=>_.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(_=>{this.gradients[_.id]={}}),this.layoutVertexArray=new yr,this.layoutVertexArray2=new Br,this.indexArray=new zr,this.programConfigurations=new yc(l.layers,l.zoom),this.segments=new Ss,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(l,_,x){this.hasPattern=Kc("line",this.layers,_);const D=this.layers[0].layout.get("line-sort-key"),F=[];for(const{feature:re,id:ce,index:de,sourceLayerIndex:_e}of l){const Se=this.layers[0]._featureFilter.needGeometry,Re=dd(re,Se);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),Re,x))continue;const Xe=D?D.evaluate(Re,{},x):void 0,at={id:ce,properties:re.properties,type:re.type,sourceLayerIndex:_e,index:de,geometry:Se?Re.geometry:hd(re),patterns:{},sortKey:Xe};F.push(at)}D&&F.sort((re,ce)=>re.sortKey-ce.sortKey);const{lineAtlas:B,featureIndex:Z}=_,X=this.addConstantDashes(B);for(const re of F){const{geometry:ce,index:de,sourceLayerIndex:_e}=re;if(X&&this.addFeatureDashes(re,B),this.hasPattern){const Se=sf("line",this.layers,re,this.zoom,_);this.patternFeatures.push(Se)}else this.addFeature(re,ce,de,x,B.positions);Z.insert(l[de].feature,ce,de,_e,this.index)}}addConstantDashes(l){let _=!1;for(const x of this.layers){const D=x.paint.get("line-dasharray").value,F=x.layout.get("line-cap").value;if("constant"!==D.kind||"constant"!==F.kind)_=!0;else{const B=F.value,Z=D.value;if(!Z)continue;l.addDash(Z.from,B),l.addDash(Z.to,B),Z.other&&l.addDash(Z.other,B)}}return _}addFeatureDashes(l,_){const x=this.zoom;for(const D of this.layers){const F=D.paint.get("line-dasharray").value,B=D.layout.get("line-cap").value;if("constant"===F.kind&&"constant"===B.kind)continue;let Z,X,re,ce,de,_e;if("constant"===F.kind){const at=F.value;if(!at)continue;Z=at.other||at.to,X=at.to,re=at.from}else Z=F.evaluate({zoom:x-1},l),X=F.evaluate({zoom:x},l),re=F.evaluate({zoom:x+1},l);"constant"===B.kind?ce=de=_e=B.value:(ce=B.evaluate({zoom:x-1},l),de=B.evaluate({zoom:x},l),_e=B.evaluate({zoom:x+1},l)),_.addDash(Z,ce),_.addDash(X,de),_.addDash(re,_e);const Se=_.getKey(Z,ce),Re=_.getKey(X,de),Xe=_.getKey(re,_e);l.patterns[D.id]={min:Se,mid:Re,max:Xe}}}update(l,_,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,_,this.stateDependentLayers,x)}addFeatures(l,_,x){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,_,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Ye)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ye),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&l.properties.hasOwnProperty("mapbox_clip_start")&&l.properties.hasOwnProperty("mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,_,x,D,F){const B=this.layers[0].layout,Z=B.get("line-join").evaluate(l,{}),X=B.get("line-cap").evaluate(l,{}),re=B.get("line-miter-limit"),ce=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const de of _)this.addLine(de,l,Z,X,re,ce);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,F,D)}addLine(l,_,x,D,F,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let bt=0;bt<l.length-1;bt++)this.totalDistance+=l[bt].dist(l[bt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Z="Polygon"===st[_.type];let X=l.length;for(;X>=2&&l[X-1].equals(l[X-2]);)X--;let re=0;for(;re<X-1&&l[re].equals(l[re+1]);)re++;if(X<(Z?3:2))return;"bevel"===x&&(F=1.05);const ce=this.overscaling<=16?122880/(512*this.overscaling):0,de=this.segments.prepareSegment(10*X,this.layoutVertexArray,this.indexArray);let _e,Se,Re,Xe,at;this.e1=this.e2=-1,Z&&(_e=l[X-2],at=l[re].sub(_e)._unit()._perp());for(let bt=re;bt<X;bt++){if(Re=bt===X-1?Z?l[re+1]:void 0:l[bt+1],Re&&l[bt].equals(Re))continue;at&&(Xe=at),_e&&(Se=_e),_e=l[bt],at=Re?Re.sub(_e)._unit()._perp():Xe,Xe=Xe||at;let It=Xe.add(at);0===It.x&&0===It.y||It._unit();const Rt=Xe.x*at.x+Xe.y*at.y,Bt=It.x*at.x+It.y*at.y,jt=0!==Bt?1/Bt:1/0,Ut=2*Math.sqrt(2-2*Bt),mn=Bt<pt&&Se&&Re,Cn=Xe.x*at.y-Xe.y*at.x>0;if(mn&&bt>re){const ln=_e.dist(Se);if(ln>2*ce){const pn=_e.sub(_e.sub(Se)._mult(ce/ln)._round());this.updateDistance(Se,pn),this.addCurrentVertex(pn,Xe,0,0,de),Se=pn}}const vn=Se&&Re;let Tn=vn?x:Z?"butt":D;if(vn&&"round"===Tn&&(jt<B?Tn="miter":jt<=2&&(Tn="fakeround")),"miter"===Tn&&jt>F&&(Tn="bevel"),"bevel"===Tn&&(jt>2&&(Tn="flipbevel"),jt<F&&(Tn="miter")),Se&&this.updateDistance(Se,_e),"miter"===Tn)It._mult(jt),this.addCurrentVertex(_e,It,0,0,de);else if("flipbevel"===Tn){if(jt>100)It=at.mult(-1);else{const ln=jt*Xe.add(at).mag()/Xe.sub(at).mag();It._perp()._mult(ln*(Cn?-1:1))}this.addCurrentVertex(_e,It,0,0,de),this.addCurrentVertex(_e,It.mult(-1),0,0,de)}else if("bevel"===Tn||"fakeround"===Tn){const ln=-Math.sqrt(jt*jt-1),pn=Cn?ln:0,In=Cn?0:ln;if(Se&&this.addCurrentVertex(_e,Xe,pn,In,de),"fakeround"===Tn){const on=Math.round(180*Ut/Math.PI/20);for(let Mi=1;Mi<on;Mi++){let gi=Mi/on;if(.5!==gi){const Li=gi-.5;gi+=gi*Li*(gi-1)*((1.0904+Rt*(Rt*(3.55645-1.43519*Rt)-3.2452))*Li*Li+(.848013+Rt*(.215638*Rt-1.06021)))}const Ki=at.sub(Xe)._mult(gi)._add(Xe)._unit()._mult(Cn?-1:1);this.addHalfVertex(_e,Ki.x,Ki.y,!1,Cn,0,de)}}Re&&this.addCurrentVertex(_e,at,-pn,-In,de)}else if("butt"===Tn)this.addCurrentVertex(_e,It,0,0,de);else if("square"===Tn){const ln=Se?1:-1;Se||this.addCurrentVertex(_e,It,ln,ln,de),this.addCurrentVertex(_e,It,0,0,de),Se&&this.addCurrentVertex(_e,It,ln,ln,de)}else"round"===Tn&&(Se&&(this.addCurrentVertex(_e,Xe,0,0,de),this.addCurrentVertex(_e,Xe,1,1,de,!0)),Re&&(this.addCurrentVertex(_e,at,-1,-1,de,!0),this.addCurrentVertex(_e,at,0,0,de)));if(mn&&bt<X-1){const ln=_e.dist(Re);if(ln>2*ce){const pn=_e.add(Re.sub(_e)._mult(ce/ln)._round());this.updateDistance(_e,pn),this.addCurrentVertex(pn,at,0,0,de),_e=pn}}}}addCurrentVertex(l,_,x,D,F,B=!1){const Z=_.y*D-_.x,X=-_.y-_.x*D;this.addHalfVertex(l,_.x+_.y*x,_.y-_.x*x,B,!1,x,F),this.addHalfVertex(l,Z,X,B,!0,-D,F)}addHalfVertex({x:l,y:_},x,D,F,B,Z,X){this.layoutVertexArray.emplaceBack((l<<1)+(F?1:0),(_<<1)+(B?1:0),Math.round(63*x)+128,Math.round(63*D)+128,1+(0===Z?0:Z<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const re=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,re),X.primitiveLength++),B?this.e2=re:this.e1=re}updateScaledDistance(){if(this.lineClips){const l=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=l*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(l,_){this.distance+=l.dist(_),this.updateScaledDistance()}}qn("LineBucket",Wt,{omit:["layers","patternFeatures"]});const cn=new ut({"line-cap":new ht(y.layout_line["line-cap"]),"line-join":new ht(y.layout_line["line-join"]),"line-miter-limit":new rt(y.layout_line["line-miter-limit"]),"line-round-limit":new rt(y.layout_line["line-round-limit"]),"line-sort-key":new ht(y.layout_line["line-sort-key"])});var Mn={paint:new ut({"line-opacity":new ht(y.paint_line["line-opacity"]),"line-color":new ht(y.paint_line["line-color"]),"line-translate":new rt(y.paint_line["line-translate"]),"line-translate-anchor":new rt(y.paint_line["line-translate-anchor"]),"line-width":new ht(y.paint_line["line-width"]),"line-gap-width":new ht(y.paint_line["line-gap-width"]),"line-offset":new ht(y.paint_line["line-offset"]),"line-blur":new ht(y.paint_line["line-blur"]),"line-dasharray":new en(y.paint_line["line-dasharray"]),"line-pattern":new en(y.paint_line["line-pattern"]),"line-gradient":new un(y.paint_line["line-gradient"])}),layout:cn};const Wn=new class extends ht{possiblyEvaluate(g,l){return l=new Pe(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(g,l)}evaluate(g,l,_,x){return l=Di({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(g,l,_,x)}}(Mn.paint.properties["line-width"].specification);function Pi(g,l){return l>0?l+2*g:g}Wn.useIntegerZoom=!0;const yi=An([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qi=An([{name:"a_projected_pos",components:3,type:"Float32"}],4);An([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Jo=An([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Al=An([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);An([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bd=An([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),uf=An([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);An([{name:"triangle",components:3,type:"Uint16"}]),An([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),An([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),An([{type:"Float32",name:"offsetX"}]),An([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Qa=128;function Fv(g,l){const{expression:_}=l;if("constant"===_.kind)return{kind:"constant",layoutSize:_.evaluate(new Pe(g+1))};if("source"===_.kind)return{kind:"source"};{const{zoomStops:x,interpolationType:D}=_;let F=0;for(;F<x.length&&x[F]<=g;)F++;F=Math.max(0,F-1);let B=F;for(;B<x.length&&x[B]<g+1;)B++;B=Math.min(x.length-1,B);const Z=x[F],X=x[B];return"composite"===_.kind?{kind:"composite",minZoom:Z,maxZoom:X,interpolationType:D}:{kind:"camera",minZoom:Z,maxZoom:X,minSize:_.evaluate(new Pe(Z)),maxSize:_.evaluate(new Pe(X)),interpolationType:D}}}function pp(g,{uSize:l,uSizeT:_},{lowerSize:x,upperSize:D}){return"source"===g.kind?x/Qa:"composite"===g.kind?ui(x/Qa,D/Qa,_):l}function tm(g,l){let _=0,x=0;if("constant"===g.kind)x=g.layoutSize;else if("source"!==g.kind){const{interpolationType:D,minZoom:F,maxZoom:B}=g,Z=D?Mt(oa.interpolationFactor(D,l,F,B),0,1):0;"camera"===g.kind?x=ui(g.minSize,g.maxSize,Z):_=Z}return{uSizeT:_,uSize:x}}var Eg=Object.freeze({__proto__:null,getSizeData:Fv,evaluateSizeForFeature:pp,evaluateSizeForZoom:tm,SIZE_PACK_FACTOR:Qa});function Px(g,l,_){return g.sections.forEach(x=>{x.text=function(D,F,B){const Z=F.layout.get("text-transform").evaluate(B,{});return"uppercase"===Z?D=D.toLocaleUpperCase():"lowercase"===Z&&(D=D.toLocaleLowerCase()),Ae.applyArabicShaping&&(D=Ae.applyArabicShaping(D)),D}(x.text,l,_)}),g}const hf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function nm(g){return"\ufe36"===g||"\ufe48"===g||"\ufe38"===g||"\ufe44"===g||"\ufe42"===g||"\ufe3e"===g||"\ufe3c"===g||"\ufe3a"===g||"\ufe18"===g||"\ufe40"===g||"\ufe10"===g||"\ufe13"===g||"\ufe14"===g||"\uff40"===g||"\uffe3"===g||"\ufe11"===g||"\ufe12"===g}function pE(g){return"\ufe35"===g||"\ufe47"===g||"\ufe37"===g||"\ufe43"===g||"\ufe41"===g||"\ufe3d"===g||"\ufe3b"===g||"\ufe39"===g||"\ufe17"===g||"\ufe3f"===g}var Lv=function(g,l,_,x,D){var F,B,Z=8*D-x-1,X=(1<<Z)-1,re=X>>1,ce=-7,de=_?D-1:0,_e=_?-1:1,Se=g[l+de];for(de+=_e,F=Se&(1<<-ce)-1,Se>>=-ce,ce+=Z;ce>0;F=256*F+g[l+de],de+=_e,ce-=8);for(B=F&(1<<-ce)-1,F>>=-ce,ce+=x;ce>0;B=256*B+g[l+de],de+=_e,ce-=8);if(0===F)F=1-re;else{if(F===X)return B?NaN:1/0*(Se?-1:1);B+=Math.pow(2,x),F-=re}return(Se?-1:1)*B*Math.pow(2,F-x)},Rx=function(g,l,_,x,D,F){var B,Z,X,re=8*F-D-1,ce=(1<<re)-1,de=ce>>1,_e=23===D?Math.pow(2,-24)-Math.pow(2,-77):0,Se=x?0:F-1,Re=x?1:-1,Xe=l<0||0===l&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(Z=isNaN(l)?1:0,B=ce):(B=Math.floor(Math.log(l)/Math.LN2),l*(X=Math.pow(2,-B))<1&&(B--,X*=2),(l+=B+de>=1?_e/X:_e*Math.pow(2,1-de))*X>=2&&(B++,X/=2),B+de>=ce?(Z=0,B=ce):B+de>=1?(Z=(l*X-1)*Math.pow(2,D),B+=de):(Z=l*Math.pow(2,de-1)*Math.pow(2,D),B=0));D>=8;g[_+Se]=255&Z,Se+=Re,Z/=256,D-=8);for(B=B<<D|Z,re+=D;re>0;g[_+Se]=255&B,Se+=Re,B/=256,re-=8);g[_+Se-Re]|=128*Xe},im=Kr;function Kr(g){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(g)?g:new Uint8Array(g||0),this.pos=0,this.type=0,this.length=this.buf.length}Kr.Varint=0,Kr.Fixed64=1,Kr.Bytes=2,Kr.Fixed32=5;var Nv=4294967296,nu=1/Nv,Ox="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Nh(g){return g.type===Kr.Bytes?g.readVarint()+g.pos:g.pos+1}function Fx(g,l,_){var x=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));_.realloc(x);for(var D=_.pos-1;D>=g;D--)_.buf[D+x]=_.buf[D]}function Ww(g,l){for(var _=0;_<g.length;_++)l.writeVarint(g[_])}function $w(g,l){for(var _=0;_<g.length;_++)l.writeSVarint(g[_])}function Lx(g,l){for(var _=0;_<g.length;_++)l.writeFloat(g[_])}function Xw(g,l){for(var _=0;_<g.length;_++)l.writeDouble(g[_])}function Nx(g,l){for(var _=0;_<g.length;_++)l.writeBoolean(g[_])}function fE(g,l){for(var _=0;_<g.length;_++)l.writeFixed32(g[_])}function Ji(g,l){for(var _=0;_<g.length;_++)l.writeSFixed32(g[_])}function Bv(g,l){for(var _=0;_<g.length;_++)l.writeFixed64(g[_])}function zv(g,l){for(var _=0;_<g.length;_++)l.writeSFixed64(g[_])}function fp(g,l){return(g[l]|g[l+1]<<8|g[l+2]<<16)+16777216*g[l+3]}function Ja(g,l,_){g[_]=l,g[_+1]=l>>>8,g[_+2]=l>>>16,g[_+3]=l>>>24}function Vv(g,l){return(g[l]|g[l+1]<<8|g[l+2]<<16)+(g[l+3]<<24)}function Qw(g,l,_){l.glyphs=[],1===g&&_.readMessage(Uv,l)}function Uv(g,l,_){if(3===g){const{id:x,bitmap:D,width:F,height:B,left:Z,top:X,advance:re}=_.readMessage(xd,{});l.glyphs.push({id:x,bitmap:new Dh({width:F+6,height:B+6},D),metrics:{width:F,height:B,left:Z,top:X,advance:re}})}else 4===g?l.ascender=_.readSVarint():5===g&&(l.descender=_.readSVarint())}function xd(g,l,_){1===g?l.id=_.readVarint():2===g?l.bitmap=_.readBytes():3===g?l.width=_.readVarint():4===g?l.height=_.readVarint():5===g?l.left=_.readSVarint():6===g?l.top=_.readSVarint():7===g&&(l.advance=_.readVarint())}function pf(g){let l=0,_=0;for(const B of g)l+=B.w*B.h,_=Math.max(_,B.w);g.sort((B,Z)=>Z.h-B.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),_),h:1/0}];let D=0,F=0;for(const B of g)for(let Z=x.length-1;Z>=0;Z--){const X=x[Z];if(!(B.w>X.w||B.h>X.h)){if(B.x=X.x,B.y=X.y,F=Math.max(F,B.y+B.h),D=Math.max(D,B.x+B.w),B.w===X.w&&B.h===X.h){const re=x.pop();Z<x.length&&(x[Z]=re)}else B.h===X.h?(X.x+=B.w,X.w-=B.w):B.w===X.w?(X.y+=B.h,X.h-=B.h):(x.push({x:X.x+B.w,y:X.y,w:X.w-B.w,h:B.h}),X.y+=B.h,X.h-=B.h);break}}return{w:D,h:F,fill:l/(D*F)||0}}Kr.prototype={destroy:function(){this.buf=null},readFields:function(g,l,_){for(_=_||this.length;this.pos<_;){var x=this.readVarint(),D=x>>3,F=this.pos;this.type=7&x,g(D,l,this),this.pos===F&&this.skip(x)}return l},readMessage:function(g,l){return this.readFields(g,l,this.readVarint()+this.pos)},readFixed32:function(){var g=fp(this.buf,this.pos);return this.pos+=4,g},readSFixed32:function(){var g=Vv(this.buf,this.pos);return this.pos+=4,g},readFixed64:function(){var g=fp(this.buf,this.pos)+fp(this.buf,this.pos+4)*Nv;return this.pos+=8,g},readSFixed64:function(){var g=fp(this.buf,this.pos)+Vv(this.buf,this.pos+4)*Nv;return this.pos+=8,g},readFloat:function(){var g=Lv(this.buf,this.pos,!0,23,4);return this.pos+=4,g},readDouble:function(){var g=Lv(this.buf,this.pos,!0,52,8);return this.pos+=8,g},readVarint:function(g){var l,_,x=this.buf;return l=127&(_=x[this.pos++]),_<128?l:(l|=(127&(_=x[this.pos++]))<<7,_<128?l:(l|=(127&(_=x[this.pos++]))<<14,_<128?l:(l|=(127&(_=x[this.pos++]))<<21,_<128?l:function(D,F,B){var Z,X,re=B.buf;if(Z=(112&(X=re[B.pos++]))>>4,X<128||(Z|=(127&(X=re[B.pos++]))<<3,X<128)||(Z|=(127&(X=re[B.pos++]))<<10,X<128)||(Z|=(127&(X=re[B.pos++]))<<17,X<128)||(Z|=(127&(X=re[B.pos++]))<<24,X<128)||(Z|=(1&(X=re[B.pos++]))<<31,X<128))return function(g,l,_){return _?4294967296*l+(g>>>0):4294967296*(l>>>0)+(g>>>0)}(D,Z,F);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(_=x[this.pos]))<<28,g,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var g=this.readVarint();return g%2==1?(g+1)/-2:g/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var g=this.readVarint()+this.pos,l=this.pos;return this.pos=g,g-l>=12&&Ox?Ox.decode(this.buf.subarray(l,g)):function(_,x,D){for(var F="",B=x;B<D;){var Z,X,re,ce=_[B],de=null,_e=ce>239?4:ce>223?3:ce>191?2:1;if(B+_e>D)break;1===_e?ce<128&&(de=ce):2===_e?128==(192&(Z=_[B+1]))&&(de=(31&ce)<<6|63&Z)<=127&&(de=null):3===_e?(X=_[B+2],128==(192&(Z=_[B+1]))&&128==(192&X)&&((de=(15&ce)<<12|(63&Z)<<6|63&X)<=2047||de>=55296&&de<=57343)&&(de=null)):4===_e&&(X=_[B+2],re=_[B+3],128==(192&(Z=_[B+1]))&&128==(192&X)&&128==(192&re)&&((de=(15&ce)<<18|(63&Z)<<12|(63&X)<<6|63&re)<=65535||de>=1114112)&&(de=null)),null===de?(de=65533,_e=1):de>65535&&(de-=65536,F+=String.fromCharCode(de>>>10&1023|55296),de=56320|1023&de),F+=String.fromCharCode(de),B+=_e}return F}(this.buf,l,g)},readBytes:function(){var g=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,g);return this.pos=g,l},readPackedVarint:function(g,l){if(this.type!==Kr.Bytes)return g.push(this.readVarint(l));var _=Nh(this);for(g=g||[];this.pos<_;)g.push(this.readVarint(l));return g},readPackedSVarint:function(g){if(this.type!==Kr.Bytes)return g.push(this.readSVarint());var l=Nh(this);for(g=g||[];this.pos<l;)g.push(this.readSVarint());return g},readPackedBoolean:function(g){if(this.type!==Kr.Bytes)return g.push(this.readBoolean());var l=Nh(this);for(g=g||[];this.pos<l;)g.push(this.readBoolean());return g},readPackedFloat:function(g){if(this.type!==Kr.Bytes)return g.push(this.readFloat());var l=Nh(this);for(g=g||[];this.pos<l;)g.push(this.readFloat());return g},readPackedDouble:function(g){if(this.type!==Kr.Bytes)return g.push(this.readDouble());var l=Nh(this);for(g=g||[];this.pos<l;)g.push(this.readDouble());return g},readPackedFixed32:function(g){if(this.type!==Kr.Bytes)return g.push(this.readFixed32());var l=Nh(this);for(g=g||[];this.pos<l;)g.push(this.readFixed32());return g},readPackedSFixed32:function(g){if(this.type!==Kr.Bytes)return g.push(this.readSFixed32());var l=Nh(this);for(g=g||[];this.pos<l;)g.push(this.readSFixed32());return g},readPackedFixed64:function(g){if(this.type!==Kr.Bytes)return g.push(this.readFixed64());var l=Nh(this);for(g=g||[];this.pos<l;)g.push(this.readFixed64());return g},readPackedSFixed64:function(g){if(this.type!==Kr.Bytes)return g.push(this.readSFixed64());var l=Nh(this);for(g=g||[];this.pos<l;)g.push(this.readSFixed64());return g},skip:function(g){var l=7&g;if(l===Kr.Varint)for(;this.buf[this.pos++]>127;);else if(l===Kr.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Kr.Fixed32)this.pos+=4;else{if(l!==Kr.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(g,l){this.writeVarint(g<<3|l)},realloc:function(g){for(var l=this.length||16;l<this.pos+g;)l*=2;if(l!==this.length){var _=new Uint8Array(l);_.set(this.buf),this.buf=_,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(g){this.realloc(4),Ja(this.buf,g,this.pos),this.pos+=4},writeSFixed32:function(g){this.realloc(4),Ja(this.buf,g,this.pos),this.pos+=4},writeFixed64:function(g){this.realloc(8),Ja(this.buf,-1&g,this.pos),Ja(this.buf,Math.floor(g*nu),this.pos+4),this.pos+=8},writeSFixed64:function(g){this.realloc(8),Ja(this.buf,-1&g,this.pos),Ja(this.buf,Math.floor(g*nu),this.pos+4),this.pos+=8},writeVarint:function(g){(g=+g||0)>268435455||g<0?function(l,_){var x,D,F,Z;if(l>=0?(x=l%4294967296|0,D=l/4294967296|0):(D=~(-l/4294967296),4294967295^(x=~(-l%4294967296))?x=x+1|0:(x=0,D=D+1|0)),l>=0x10000000000000000||l<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),F=x,(Z=_).buf[Z.pos++]=127&F|128,F>>>=7,Z.buf[Z.pos++]=127&F|128,F>>>=7,Z.buf[Z.pos++]=127&F|128,F>>>=7,Z.buf[Z.pos++]=127&F|128,Z.buf[Z.pos]=127&(F>>>=7),function(F,B){var Z=(7&F)<<4;B.buf[B.pos++]|=Z|((F>>>=3)?128:0),F&&(B.buf[B.pos++]=127&F|((F>>>=7)?128:0),F&&(B.buf[B.pos++]=127&F|((F>>>=7)?128:0),F&&(B.buf[B.pos++]=127&F|((F>>>=7)?128:0),F&&(B.buf[B.pos++]=127&F|((F>>>=7)?128:0),F&&(B.buf[B.pos++]=127&F)))))}(D,_)}(g,this):(this.realloc(4),this.buf[this.pos++]=127&g|(g>127?128:0),g<=127||(this.buf[this.pos++]=127&(g>>>=7)|(g>127?128:0),g<=127||(this.buf[this.pos++]=127&(g>>>=7)|(g>127?128:0),g<=127||(this.buf[this.pos++]=g>>>7&127))))},writeSVarint:function(g){this.writeVarint(g<0?2*-g-1:2*g)},writeBoolean:function(g){this.writeVarint(Boolean(g))},writeString:function(g){g=String(g),this.realloc(4*g.length),this.pos++;var l=this.pos;this.pos=function(x,D,F){for(var B,Z,X=0;X<D.length;X++){if((B=D.charCodeAt(X))>55295&&B<57344){if(!Z){B>56319||X+1===D.length?(x[F++]=239,x[F++]=191,x[F++]=189):Z=B;continue}if(B<56320){x[F++]=239,x[F++]=191,x[F++]=189,Z=B;continue}B=Z-55296<<10|B-56320|65536,Z=null}else Z&&(x[F++]=239,x[F++]=191,x[F++]=189,Z=null);B<128?x[F++]=B:(B<2048?x[F++]=B>>6|192:(B<65536?x[F++]=B>>12|224:(x[F++]=B>>18|240,x[F++]=B>>12&63|128),x[F++]=B>>6&63|128),x[F++]=63&B|128)}return F}(this.buf,g,this.pos);var _=this.pos-l;_>=128&&Fx(l,_,this),this.pos=l-1,this.writeVarint(_),this.pos+=_},writeFloat:function(g){this.realloc(4),Rx(this.buf,g,this.pos,!0,23,4),this.pos+=4},writeDouble:function(g){this.realloc(8),Rx(this.buf,g,this.pos,!0,52,8),this.pos+=8},writeBytes:function(g){var l=g.length;this.writeVarint(l),this.realloc(l);for(var _=0;_<l;_++)this.buf[this.pos++]=g[_]},writeRawMessage:function(g,l){this.pos++;var _=this.pos;g(l,this);var x=this.pos-_;x>=128&&Fx(_,x,this),this.pos=_-1,this.writeVarint(x),this.pos+=x},writeMessage:function(g,l,_){this.writeTag(g,Kr.Bytes),this.writeRawMessage(l,_)},writePackedVarint:function(g,l){l.length&&this.writeMessage(g,Ww,l)},writePackedSVarint:function(g,l){l.length&&this.writeMessage(g,$w,l)},writePackedBoolean:function(g,l){l.length&&this.writeMessage(g,Nx,l)},writePackedFloat:function(g,l){l.length&&this.writeMessage(g,Lx,l)},writePackedDouble:function(g,l){l.length&&this.writeMessage(g,Xw,l)},writePackedFixed32:function(g,l){l.length&&this.writeMessage(g,fE,l)},writePackedSFixed32:function(g,l){l.length&&this.writeMessage(g,Ji,l)},writePackedFixed64:function(g,l){l.length&&this.writeMessage(g,Bv,l)},writePackedSFixed64:function(g,l){l.length&&this.writeMessage(g,zv,l)},writeBytesField:function(g,l){this.writeTag(g,Kr.Bytes),this.writeBytes(l)},writeFixed32Field:function(g,l){this.writeTag(g,Kr.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(g,l){this.writeTag(g,Kr.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(g,l){this.writeTag(g,Kr.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(g,l){this.writeTag(g,Kr.Fixed64),this.writeSFixed64(l)},writeVarintField:function(g,l){this.writeTag(g,Kr.Varint),this.writeVarint(l)},writeSVarintField:function(g,l){this.writeTag(g,Kr.Varint),this.writeSVarint(l)},writeStringField:function(g,l){this.writeTag(g,Kr.Bytes),this.writeString(l)},writeFloatField:function(g,l){this.writeTag(g,Kr.Fixed32),this.writeFloat(l)},writeDoubleField:function(g,l){this.writeTag(g,Kr.Fixed64),this.writeDouble(l)},writeBooleanField:function(g,l){this.writeVarintField(g,Boolean(l))}};class Z_{constructor(l,{pixelRatio:_,version:x,stretchX:D,stretchY:F,content:B}){this.paddedRect=l,this.pixelRatio=_,this.stretchX=D,this.stretchY=F,this.content=B,this.version=x}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class W_{constructor(l,_){const x={},D={};this.haveRenderCallbacks=[];const F=[];this.addImages(l,x,F),this.addImages(_,D,F);const{w:B,h:Z}=pf(F),X=new Za({width:B||1,height:Z||1});for(const re in l){const ce=l[re],de=x[re].paddedRect;Za.copy(ce.data,X,{x:0,y:0},{x:de.x+1,y:de.y+1},ce.data)}for(const re in _){const ce=_[re],de=D[re].paddedRect,_e=de.x+1,Se=de.y+1,Re=ce.data.width,Xe=ce.data.height;Za.copy(ce.data,X,{x:0,y:0},{x:_e,y:Se},ce.data),Za.copy(ce.data,X,{x:0,y:Xe-1},{x:_e,y:Se-1},{width:Re,height:1}),Za.copy(ce.data,X,{x:0,y:0},{x:_e,y:Se+Xe},{width:Re,height:1}),Za.copy(ce.data,X,{x:Re-1,y:0},{x:_e-1,y:Se},{width:1,height:Xe}),Za.copy(ce.data,X,{x:0,y:0},{x:_e+Re,y:Se},{width:1,height:Xe})}this.image=X,this.iconPositions=x,this.patternPositions=D}addImages(l,_,x){for(const D in l){const F=l[D],B={x:0,y:0,w:F.data.width+2,h:F.data.height+2};x.push(B),_[D]=new Z_(B,F),F.hasRenderCallback&&this.haveRenderCallbacks.push(D)}}patchUpdatedImages(l,_){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in l.updatedImages)this.patchUpdatedImage(this.iconPositions[x],l.getImage(x),_),this.patchUpdatedImage(this.patternPositions[x],l.getImage(x),_)}patchUpdatedImage(l,_,x){if(!l||!_||l.version===_.version)return;l.version=_.version;const[D,F]=l.tl;x.update(_.data,void 0,{x:D,y:F})}}qn("ImagePosition",Z_),qn("ImageAtlas",W_);const iu={horizontal:1,vertical:2,horizontalOnly:3};class mp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,_){const x=new mp;return x.scale=l||1,x.fontStack=_,x}static forImage(l){const _=new mp;return _.imageName=l,_}}class rm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,_){const x=new rm;for(let D=0;D<l.sections.length;D++){const F=l.sections[D];F.image?x.addImageSection(F):x.addTextSection(F,_)}return x}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSections(){return this.sections}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(l){this.text=function(_,x){let D="";for(let F=0;F<_.length;F++){const B=_.charCodeAt(F+1)||null,Z=_.charCodeAt(F-1)||null;D+=!x&&(B&&zf(B)&&!hf[_[F+1]]||Z&&zf(Z)&&!hf[_[F-1]])||!hf[_[F]]?_[F]:hf[_[F]]}return D}(this.text,l)}trim(){let l=0;for(let x=0;x<this.text.length&&ru[this.text.charCodeAt(x)];x++)l++;let _=this.text.length;for(let x=this.text.length-1;x>=0&&x>=l&&ru[this.text.charCodeAt(x)];x--)_--;this.text=this.text.substring(l,_),this.sectionIndex=this.sectionIndex.slice(l,_)}substring(l,_){const x=new rm;return x.text=this.text.substring(l,_),x.sectionIndex=this.sectionIndex.slice(l,_),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,_)=>Math.max(l,this.sections[_].scale),0)}addTextSection(l,_){this.text+=l.text,this.sections.push(mp.forText(l.scale,l.fontStack||_));const x=this.sections.length-1;for(let D=0;D<l.text.length;++D)this.sectionIndex.push(x)}addImageSection(l){const _=l.image?l.image.name:"";if(0===_.length)return void mi("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(mp.forImage(_)),this.sectionIndex.push(this.sections.length-1)):mi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Gu(g,l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe){const at=rm.fromFeature(g,D);let bt;de===iu.vertical&&at.verticalizePunctuation(_e);const{processBidirectionalText:It,processStyledBidirectionalText:Rt}=Ae;if(It&&1===at.sections.length){bt=[];const Ut=It(at.toString(),Hv(at,re,F,l,x,Se,Re));for(const mn of Ut){const Cn=new rm;Cn.text=mn,Cn.sections=at.sections;for(let vn=0;vn<mn.length;vn++)Cn.sectionIndex.push(0);bt.push(Cn)}}else if(Rt){bt=[];const Ut=Rt(at.text,at.sectionIndex,Hv(at,re,F,l,x,Se,Re));for(const mn of Ut){const Cn=new rm;Cn.text=mn[0],Cn.sectionIndex=mn[1],Cn.sections=at.sections,bt.push(Cn)}}else bt=function(Ut,mn){const Cn=[],vn=Ut.text;let Tn=0;for(const ln of mn)Cn.push(Ut.substring(Tn,ln)),Tn=ln;return Tn<vn.length&&Cn.push(Ut.substring(Tn,vn.length)),Cn}(at,Hv(at,re,F,l,x,Se,Re));const Bt=[],jt={positionedLines:Bt,text:at.toString(),top:ce[1],bottom:ce[1],left:ce[0],right:ce[0],writingMode:de,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ut,mn,Cn,vn,Tn,ln,pn,In,on,Mi,gi,Ki){let Li=0,ni=0,Wr=0;const pi="right"===In?1:"left"===In?0:.5;let Mo=!1;for(const Vr of Tn){const _o=Vr.getSections();for(const Ao of _o){if(Ao.imageName)continue;const Bs=mn[Ao.fontStack];if(Bs&&(Mo=void 0!==Bs.ascender&&void 0!==Bs.descender,!Mo))break}if(!Mo)break}let as=0;for(const Vr of Tn){Vr.trim();const _o=Vr.getMaxScale(),Ao=24*(_o-1),Bs={positionedGlyphs:[],lineOffset:0};Ut.positionedLines[as]=Bs;const eo=Bs.positionedGlyphs;let Ar=0;if(!Vr.length()){ni+=ln,++as;continue}let ls=0,Bo=0;for(let Js=0;Js<Vr.length();Js++){const qo=Vr.getSection(Js),Fa=Vr.getSectionIndex(Js),Ks=Vr.getCharCode(Js);let cr=qo.scale,ao=null,Ts=null,_a=null,Vh=24,Sc=0;const Ec=!(on===iu.horizontal||!gi&&!Sh(Ks)||gi&&(ru[Ks]||(ko=Ks,ei(ko)||np(ko)||Nr(ko)||Ch(ko)||Nn(ko))));if(qo.imageName){const lu=vn[qo.imageName];if(!lu)continue;_a=qo.imageName,Ut.iconsInText=Ut.iconsInText||!0,Ts=lu.paddedRect;const cs=lu.displaySize;cr=24*cr/Ki,ao={width:cs[0],height:cs[1],left:1,top:-3,advance:Ec?cs[1]:cs[0],localGlyph:!1},Sc=Mo?-ao.height*cr:24*_o-17-cs[1]*cr,Vh=ao.advance;const Zu=(Ec?cs[0]:cs[1])*cr-24*_o;Zu>0&&Zu>Ar&&(Ar=Zu)}else{const lu=Cn[qo.fontStack];if(!lu)continue;lu[Ks]&&(Ts=lu[Ks]);const cs=mn[qo.fontStack];if(!cs)continue;const Zu=cs.glyphs[Ks];if(!Zu)continue;if(ao=Zu.metrics,Vh=8203!==Ks?24:0,Mo){const Uh=void 0!==cs.ascender?Math.abs(cs.ascender):0,Ko=void 0!==cs.descender?Math.abs(cs.descender):0,Jl=(Uh+Ko)*cr;ls<Jl&&(ls=Jl,Bo=(Uh-Ko)/2*cr),Sc=-Uh*cr}else Sc=24*(_o-cr)-17}Ec?(Ut.verticalizable=!0,eo.push({glyph:Ks,imageName:_a,x:Li,y:ni+Sc,vertical:Ec,scale:cr,localGlyph:ao.localGlyph,fontStack:qo.fontStack,sectionIndex:Fa,metrics:ao,rect:Ts}),Li+=Vh*cr+Mi):(eo.push({glyph:Ks,imageName:_a,x:Li,y:ni+Sc,vertical:Ec,scale:cr,localGlyph:ao.localGlyph,fontStack:qo.fontStack,sectionIndex:Fa,metrics:ao,rect:Ts}),Li+=ao.advance*cr+Mi)}0!==eo.length&&(Wr=Math.max(Li-Mi,Wr),Mo?Gv(eo,pi,Ar,Bo,ln*_o/2):Gv(eo,pi,Ar,0,ln/2)),Li=0;const Yo=ln*_o+Ar;Bs.lineOffset=Math.max(Ar,Ao),ni+=Yo,++as}var ko;const Ns=ni,{horizontalAlign:No,verticalAlign:go}=Lo(pn);(function(Vr,_o,Ao,Bs,eo,Ar){const ls=(_o-Ao)*eo,Bo=-Ar*Bs;for(const Yo of Vr)for(const Js of Yo.positionedGlyphs)Js.x+=ls,Js.y+=Bo})(Ut.positionedLines,pi,No,go,Wr,Ns),Ut.top+=-go*Ns,Ut.bottom=Ut.top+Ns,Ut.left+=-No*Wr,Ut.right=Ut.left+Wr,Ut.hasBaseline=Mo}(jt,l,_,x,bt,B,Z,X,de,re,_e,Xe),!function(Ut){for(const mn of Ut)if(0!==mn.positionedGlyphs.length)return!1;return!0}(Bt)&&jt}const ru={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$_={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function X_(g,l,_,x,D,F){if(l.imageName){const B=x[l.imageName];return B?B.displaySize[0]*l.scale*24/F+D:0}{const B=_[l.fontStack],Z=B&&B.glyphs[g];return Z?Z.metrics.advance*l.scale+D:0}}function Jw(g,l,_,x){const D=Math.pow(g-l,2);return x?g<l?D/2:2*D:D+Math.abs(_)*_}function Kw(g,l,_){let x=0;return 10===g&&(x-=1e4),_&&(x+=150),40!==g&&65288!==g||(x+=50),41!==l&&65289!==l||(x+=50),x}function Q_(g,l,_,x,D,F){let B=null,Z=Jw(l,_,D,F);for(const X of x){const re=Jw(l-X.x,_,D,F)+X.badness;re<=Z&&(B=X,Z=re)}return{index:g,x:l,priorBreak:B,badness:Z}}function e1(g){return g?e1(g.priorBreak).concat(g.index):[]}function Hv(g,l,_,x,D,F,B){if("point"!==F)return[];if(!g)return[];const Z=[],X=function(_e,Se,Re,Xe,at,bt){let It=0;for(let Rt=0;Rt<_e.length();Rt++){const Bt=_e.getSection(Rt);It+=X_(_e.getCharCode(Rt),Bt,Xe,at,Se,bt)}return It/Math.max(1,Math.ceil(It/Re))}(g,l,_,x,D,B),re=g.text.indexOf("\u200b")>=0;let ce=0;for(let _e=0;_e<g.length();_e++){const Se=g.getSection(_e),Re=g.getCharCode(_e);if(ru[Re]||(ce+=X_(Re,Se,x,D,l,B)),_e<g.length()-1){const Xe=!((de=Re)<11904||!(rp(de)||Hc(de)||sp(de)||rg(de)||jl(de)||Is(de)||fc(de)||ip(de)||Ru(de)||jc(de)||Gc(de)||Ps(de)||Xo(de)||Gl(de)||Rr(de)||wh(de)||ca(de)||op(de)||mc(de)||Yc(de)));($_[Re]||Xe||Se.imageName)&&Z.push(Q_(_e+1,ce,X,Z,Kw(Re,g.getCharCode(_e+1),Xe&&re),!1))}}var de;return e1(Q_(g.length(),ce,X,Z,0,!0))}function Lo(g){let l=.5,_=.5;switch(g){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(g){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:l,verticalAlign:_}}function Gv(g,l,_,x,D){if(!(l||_||x||D))return;const F=g.length-1,B=g[F],Z=(B.x+B.metrics.advance*B.scale)*l;for(let X=0;X<=F;X++)g[X].x-=Z,g[X].y+=_+x+D}function ff(g,l,_){const{horizontalAlign:x,verticalAlign:D}=Lo(_),F=l[0]-g.displaySize[0]*x,B=l[1]-g.displaySize[1]*D;return{image:g,top:B,bottom:B+g.displaySize[1],left:F,right:F+g.displaySize[0]}}function gp(g,l,_,x,D,F){const B=g.image;let Z;if(B.content){const at=B.content,bt=B.pixelRatio||1;Z=[at[0]/bt,at[1]/bt,B.displaySize[0]-at[2]/bt,B.displaySize[1]-at[3]/bt]}const X=l.left*F,re=l.right*F;let ce,de,_e,Se;"width"===_||"both"===_?(Se=D[0]+X-x[3],de=D[0]+re+x[1]):(Se=D[0]+(X+re-B.displaySize[0])/2,de=Se+B.displaySize[0]);const Re=l.top*F,Xe=l.bottom*F;return"height"===_||"both"===_?(ce=D[1]+Re-x[0],_e=D[1]+Xe+x[2]):(ce=D[1]+(Re+Xe-B.displaySize[1])/2,_e=ce+B.displaySize[1]),{image:B,top:ce,right:de,bottom:_e,left:Se,collisionPadding:Z}}class Dl extends Be{constructor(l,_,x,D){super(l,_),this.angle=x,void 0!==D&&(this.segment=D)}clone(){return new Dl(this.x,this.y,this.angle,this.segment)}}function Bx(g,l,_,x,D){if(void 0===l.segment)return!0;let F=l,B=l.segment+1,Z=0;for(;Z>-_/2;){if(B--,B<0)return!1;Z-=g[B].dist(F),F=g[B]}Z+=g[B].dist(g[B+1]),B++;const X=[];let re=0;for(;Z<_/2;){const ce=g[B],de=g[B+1];if(!de)return!1;let _e=g[B-1].angleTo(ce)-ce.angleTo(de);for(_e=Math.abs((_e+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:Z,angleDelta:_e}),re+=_e;Z-X[0].distance>x;)re-=X.shift().angleDelta;if(re>D)return!1;B++,Z+=ce.dist(de)}return!0}function t1(g){let l=0;for(let _=0;_<g.length-1;_++)l+=g[_].dist(g[_+1]);return l}function jv(g,l,_){return g?.6*l*_:0}function n1(g,l){return Math.max(g?g.right-g.left:0,l?l.right-l.left:0)}function r1(g,l,_,x,D,F){const B=jv(_,D,F),Z=n1(_,x)*F;let X=0;const re=t1(g)/2;for(let ce=0;ce<g.length-1;ce++){const de=g[ce],_e=g[ce+1],Se=de.dist(_e);if(X+Se>re){const Re=(re-X)/Se,Xe=ui(de.x,_e.x,Re),at=ui(de.y,_e.y,Re),bt=new Dl(Xe,at,_e.angleTo(de),ce);return!B||Bx(g,bt,Z,B,l)?bt:void 0}X+=Se}}function mE(g,l,_,x,D,F,B,Z,X){const re=jv(x,F,B),ce=n1(x,D),de=ce*B,_e=0===g[0].x||g[0].x===X||0===g[0].y||g[0].y===X;return l-de<l/4&&(l=de+l/4),zx(g,_e?l/2*Z%l:(ce/2+2*F)*B*Z%l,l,re,_,de,_e,!1,X)}function zx(g,l,_,x,D,F,B,Z,X){const re=F/2,ce=t1(g);let de=0,_e=l-_,Se=[];for(let Re=0;Re<g.length-1;Re++){const Xe=g[Re],at=g[Re+1],bt=Xe.dist(at),It=at.angleTo(Xe);for(;_e+_<de+bt;){_e+=_;const Rt=(_e-de)/bt,Bt=ui(Xe.x,at.x,Rt),jt=ui(Xe.y,at.y,Rt);if(Bt>=0&&Bt<X&&jt>=0&&jt<X&&_e-re>=0&&_e+re<=ce){const Ut=new Dl(Bt,jt,It,Re);Ut._round(),x&&!Bx(g,Ut,F,x,D)||Se.push(Ut)}}de+=bt}return Z||Se.length||B||(Se=zx(g,de/2,_,x,D,F,B,!0,X)),Se}function Vx(g,l,_,x,D){const F=[];for(let B=0;B<g.length;B++){const Z=g[B];let X;for(let re=0;re<Z.length-1;re++){let ce=Z[re],de=Z[re+1];ce.x<l&&de.x<l||(ce.x<l?ce=new Be(l,ce.y+(l-ce.x)/(de.x-ce.x)*(de.y-ce.y))._round():de.x<l&&(de=new Be(l,ce.y+(l-ce.x)/(de.x-ce.x)*(de.y-ce.y))._round()),ce.y<_&&de.y<_||(ce.y<_?ce=new Be(ce.x+(_-ce.y)/(de.y-ce.y)*(de.x-ce.x),_)._round():de.y<_&&(de=new Be(ce.x+(_-ce.y)/(de.y-ce.y)*(de.x-ce.x),_)._round()),ce.x>=x&&de.x>=x||(ce.x>=x?ce=new Be(x,ce.y+(x-ce.x)/(de.x-ce.x)*(de.y-ce.y))._round():de.x>=x&&(de=new Be(x,ce.y+(x-ce.x)/(de.x-ce.x)*(de.y-ce.y))._round()),ce.y>=D&&de.y>=D||(ce.y>=D?ce=new Be(ce.x+(D-ce.y)/(de.y-ce.y)*(de.x-ce.x),D)._round():de.y>=D&&(de=new Be(ce.x+(D-ce.y)/(de.y-ce.y)*(de.x-ce.x),D)._round()),X&&ce.equals(X[X.length-1])||(X=[ce],F.push(X)),X.push(de)))))}}return F}qn("Anchor",Dl);var Yv=Cc,EA=Cc,ju=1e20;function Cc(g,l,_,x,D,F){this.fontSize=g||24,this.buffer=void 0===l?3:l,this.cutoff=x||.25,this.fontFamily=D||"sans-serif",this.fontWeight=F||"normal",this.radius=_||8;var B=this.size=this.fontSize+2*this.buffer,Z=B+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=B,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Z*Z),this.gridInner=new Float64Array(Z*Z),this.f=new Float64Array(Z),this.z=new Float64Array(Z+1),this.v=new Uint16Array(Z),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(B/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function J_(g,l,_,x,D,F){for(var B=0;B<l;B++)Ux(g,B,l,_,x,D,F);for(var Z=0;Z<_;Z++)Ux(g,Z*l,1,l,x,D,F)}function Ux(g,l,_,x,D,F,B){var Z,X,re,ce;for(F[0]=0,B[0]=-ju,B[1]=ju,Z=0;Z<x;Z++)D[Z]=g[l+Z*_];for(Z=1,X=0,re=0;Z<x;Z++){do{re=(D[Z]-D[ce=F[X]]+Z*Z-ce*ce)/(Z-ce)/2}while(re<=B[X]&&--X>-1);F[++X]=Z,B[X]=re,B[X+1]=ju}for(Z=0,X=0;Z<x;Z++){for(;B[X+1]<Z;)X++;g[l+Z*_]=D[ce=F[X]]+(Z-ce)*(Z-ce)}}Cc.prototype._draw=function(g,l){var _,x,D,F,B,Z,X,re,ce,de=this.ctx.measureText(g),_e=de.width,Se=2*this.buffer;l&&this.useMetrics?(B=Math.floor(de.actualBoundingBoxAscent),re=this.buffer+Math.ceil(de.actualBoundingBoxAscent),Z=this.buffer,X=this.buffer,_=(x=Math.min(this.size,Math.ceil(de.actualBoundingBoxRight-de.actualBoundingBoxLeft)))+Se,D=(F=Math.min(this.size-Z,Math.ceil(de.actualBoundingBoxAscent+de.actualBoundingBoxDescent)))+Se,this.ctx.textBaseline="alphabetic"):(_=x=this.size,D=F=this.size,B=19*this.fontSize/24,Z=X=0,re=this.middle,this.ctx.textBaseline="middle"),x&&F&&(this.ctx.clearRect(X,Z,x,F),this.ctx.fillText(g,this.buffer,re),ce=this.ctx.getImageData(X,Z,x,F));var Re=new Uint8ClampedArray(_*D);return function(Xe,at,bt,It,Rt,Bt,jt){Bt.fill(ju,0,at*bt),jt.fill(0,0,at*bt);for(var Ut=(at-It)/2,mn=0;mn<Rt;mn++)for(var Cn=0;Cn<It;Cn++){var vn=(mn+Ut)*at+Cn+Ut,Tn=Xe.data[4*(mn*It+Cn)+3]/255;if(1===Tn)Bt[vn]=0,jt[vn]=ju;else if(0===Tn)Bt[vn]=ju,jt[vn]=0;else{var ln=Math.max(0,.5-Tn),pn=Math.max(0,Tn-.5);Bt[vn]=ln*ln,jt[vn]=pn*pn}}}(ce,_,D,x,F,this.gridOuter,this.gridInner),J_(this.gridOuter,_,D,this.f,this.v,this.z),J_(this.gridInner,_,D,this.f,this.v,this.z),function(Xe,at,bt,It,Rt,Bt,jt){for(var Ut=0;Ut<at*bt;Ut++){var mn=Math.sqrt(It[Ut])-Math.sqrt(Rt[Ut]);Xe[Ut]=Math.round(255-255*(mn/Bt+jt))}}(Re,_,D,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Re,metrics:{width:x,height:F,sdfWidth:_,sdfHeight:D,top:B,left:0,advance:_e}}},Cc.prototype.draw=function(g){return this._draw(g,!1).data},Cc.prototype.drawWithMetrics=function(g){return this._draw(g,!0)},Yv.default=EA;const K_={none:0,ideographs:1,all:2};class wd{constructor(l,_,x){this.requestManager=l,this.localGlyphMode=_,this.localFontFamily=x,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(l){this.url=l}getGlyphs(l,_){const x=[];for(const D in l)for(const F of l[D])x.push({stack:D,id:F});$r(x,({stack:D,id:F},B)=>{let Z=this.entries[D];Z||(Z=this.entries[D]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let X=Z.glyphs[F];if(void 0!==X)return void B(null,{stack:D,id:F,glyph:X});if(X=this._tinySDF(Z,D,F),X)return Z.glyphs[F]=X,void B(null,{stack:D,id:F,glyph:X});const re=Math.floor(F/256);if(256*re>65535)return void B(new Error("glyphs > 65535 not supported"));if(Z.ranges[re])return void B(null,{stack:D,id:F,glyph:X});let ce=Z.requests[re];ce||(ce=Z.requests[re]=[],wd.loadGlyphRange(D,re,this.url,this.requestManager,(de,_e)=>{if(_e){Z.ascender=_e.ascender,Z.descender=_e.descender;for(const Se in _e.glyphs)this._doesCharSupportLocalGlyph(+Se)||(Z.glyphs[+Se]=_e.glyphs[+Se]);Z.ranges[re]=!0}for(const Se of ce)Se(de,_e);delete Z.requests[re]})),ce.push((de,_e)=>{de?B(de):_e&&B(null,{stack:D,id:F,glyph:_e.glyphs[F]||null})})},(D,F)=>{if(D)_(D);else if(F){const B={};for(const{stack:Z,id:X,glyph:re}of F)void 0===B[Z]&&(B[Z]={}),void 0===B[Z].glyphs&&(B[Z].glyphs={}),B[Z].glyphs[X]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics},B[Z].ascender=this.entries[Z].ascender,B[Z].descender=this.entries[Z].descender;_(null,B)}})}_doesCharSupportLocalGlyph(l){return this.localGlyphMode!==K_.none&&(this.localGlyphMode===K_.all?!!this.localFontFamily:!!this.localFontFamily&&(jc(l)||Ou(l)||Xo(l)||ca(l))||ip(l))}_tinySDF(l,_,x){const D=this.localFontFamily;if(!D||!this._doesCharSupportLocalGlyph(x))return;let F=l.tinySDF;if(!F){let Xe="400";/bold/i.test(_)?Xe="900":/medium/i.test(_)?Xe="500":/light/i.test(_)&&(Xe="200"),F=l.tinySDF=new wd.TinySDF(48,6,16,.25,D,Xe)}if(this.localGlyphs[F.fontWeight][x])return this.localGlyphs[F.fontWeight][x];const{data:B,metrics:Z}=F.drawWithMetrics(String.fromCharCode(x)),{sdfWidth:X,sdfHeight:re,width:ce,height:de,left:_e,top:Se,advance:Re}=Z;return this.localGlyphs[F.fontWeight][x]={id:x,bitmap:new Dh({width:X,height:re},B),metrics:{width:ce/2,height:de/2,left:_e/2,top:Se/2-27,advance:Re/2,localGlyph:!0}}}}function qv(g,l,_,x){const D=[],F=g.image,B=F.pixelRatio,Z=F.paddedRect.w-2,X=F.paddedRect.h-2,re=g.right-g.left,ce=g.bottom-g.top,de=F.stretchX||[[0,Z]],_e=F.stretchY||[[0,X]],Se=(ln,pn)=>ln+pn[1]-pn[0],Re=de.reduce(Se,0),Xe=_e.reduce(Se,0),at=Z-Re,bt=X-Xe;let It=0,Rt=Re,Bt=0,jt=Xe,Ut=0,mn=at,Cn=0,vn=bt;if(F.content&&x){const ln=F.content;It=om(de,0,ln[0]),Bt=om(_e,0,ln[1]),Rt=om(de,ln[0],ln[2]),jt=om(_e,ln[1],ln[3]),Ut=ln[0]-It,Cn=ln[1]-Bt,mn=ln[2]-ln[0]-Rt,vn=ln[3]-ln[1]-jt}const Tn=(ln,pn,In,on)=>{const Mi=ou(ln.stretch-It,Rt,re,g.left),gi=Tg(ln.fixed-Ut,mn,ln.stretch,Re),Ki=ou(pn.stretch-Bt,jt,ce,g.top),Li=Tg(pn.fixed-Cn,vn,pn.stretch,Xe),ni=ou(In.stretch-It,Rt,re,g.left),Wr=Tg(In.fixed-Ut,mn,In.stretch,Re),pi=ou(on.stretch-Bt,jt,ce,g.top),Mo=Tg(on.fixed-Cn,vn,on.stretch,Xe),as=new Be(Mi,Ki),ko=new Be(ni,Ki),Ns=new Be(ni,pi),No=new Be(Mi,pi),go=new Be(gi/B,Li/B),Vr=new Be(Wr/B,Mo/B),_o=l*Math.PI/180;if(_o){const eo=Math.sin(_o),Ar=Math.cos(_o),ls=[Ar,-eo,eo,Ar];as._matMult(ls),ko._matMult(ls),No._matMult(ls),Ns._matMult(ls)}const Ao=ln.stretch+ln.fixed,Bs=pn.stretch+pn.fixed;return{tl:as,tr:ko,bl:No,br:Ns,tex:{x:F.paddedRect.x+1+Ao,y:F.paddedRect.y+1+Bs,w:In.stretch+In.fixed-Ao,h:on.stretch+on.fixed-Bs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:go,pixelOffsetBR:Vr,minFontScaleX:mn/B/re,minFontScaleY:vn/B/ce,isSDF:_}};if(x&&(F.stretchX||F.stretchY)){const ln=Hx(de,at,Re),pn=Hx(_e,bt,Xe);for(let In=0;In<ln.length-1;In++){const on=ln[In],Mi=ln[In+1];for(let gi=0;gi<pn.length-1;gi++)D.push(Tn(on,pn[gi],Mi,pn[gi+1]))}}else D.push(Tn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Z+1},{fixed:0,stretch:X+1}));return D}function om(g,l,_){let x=0;for(const D of g)x+=Math.max(l,Math.min(_,D[1]))-Math.max(l,Math.min(_,D[0]));return x}function Hx(g,l,_){const x=[{fixed:-1,stretch:0}];for(const[D,F]of g){const B=x[x.length-1];x.push({fixed:D-B.stretch,stretch:B.stretch}),x.push({fixed:D-B.stretch,stretch:B.stretch+(F-D)})}return x.push({fixed:l+1,stretch:_}),x}function ou(g,l,_,x){return g/l*_+x}function Tg(g,l,_,x){return g-l*_/x}function o1(g,l,_,x){const D=l+g.positionedLines[x].lineOffset;return 0===x?_+D/2:_+(D+(l+g.positionedLines[x-1].lineOffset))/2}wd.loadGlyphRange=function(g,l,_,x,D){const F=256*l,B=F+255,Z=x.transformRequest(x.normalizeGlyphsURL(_).replace("{fontstack}",g).replace("{range}",`${F}-${B}`),Oi.Glyphs);we(Z,(X,re)=>{if(X)D(X);else if(re){const ce={},de=new im(re).readFields(Qw,{});for(const _e of de.glyphs)ce[_e.id]=_e;D(null,{glyphs:ce,ascender:de.ascender,descender:de.descender})}})},wd.TinySDF=Yv;class gE{constructor(l=[],_=Mg){if(this.data=l,this.length=this.data.length,this.compare=_,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const l=this.data[0],_=this.data.pop();return this.length--,this.length>0&&(this.data[0]=_,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:_,compare:x}=this,D=_[l];for(;l>0;){const F=l-1>>1,B=_[F];if(x(D,B)>=0)break;_[l]=B,l=F}_[l]=D}_down(l){const{data:_,compare:x}=this,D=this.length>>1,F=_[l];for(;l<D;){let B=1+(l<<1),Z=_[B];const X=B+1;if(X<this.length&&x(_[X],Z)<0&&(B=X,Z=_[X]),x(Z,F)>=0)break;_[l]=Z,l=B}_[l]=F}}function Mg(g,l){return g<l?-1:g>l?1:0}function s1(g,l=1,_=!1){let x=1/0,D=1/0,F=-1/0,B=-1/0;const Z=g[0];for(let Se=0;Se<Z.length;Se++){const Re=Z[Se];(!Se||Re.x<x)&&(x=Re.x),(!Se||Re.y<D)&&(D=Re.y),(!Se||Re.x>F)&&(F=Re.x),(!Se||Re.y>B)&&(B=Re.y)}const X=Math.min(F-x,B-D);let re=X/2;const ce=new gE([],Gx);if(0===X)return new Be(x,D);for(let Se=x;Se<F;Se+=X)for(let Re=D;Re<B;Re+=X)ce.push(new mf(Se+re,Re+re,re,g));let de=function(Se){let Re=0,Xe=0,at=0;const bt=Se[0];for(let It=0,Rt=bt.length,Bt=Rt-1;It<Rt;Bt=It++){const jt=bt[It],Ut=bt[Bt],mn=jt.x*Ut.y-Ut.x*jt.y;Xe+=(jt.x+Ut.x)*mn,at+=(jt.y+Ut.y)*mn,Re+=3*mn}return new mf(Xe/Re,at/Re,0,Se)}(g),_e=ce.length;for(;ce.length;){const Se=ce.pop();(Se.d>de.d||!de.d)&&(de=Se,_&&console.log("found best %d after %d probes",Math.round(1e4*Se.d)/1e4,_e)),Se.max-de.d<=l||(re=Se.h/2,ce.push(new mf(Se.p.x-re,Se.p.y-re,re,g)),ce.push(new mf(Se.p.x+re,Se.p.y-re,re,g)),ce.push(new mf(Se.p.x-re,Se.p.y+re,re,g)),ce.push(new mf(Se.p.x+re,Se.p.y+re,re,g)),_e+=4)}return _&&(console.log(`num probes: ${_e}`),console.log(`best distance: ${de.d}`)),de.p}function Gx(g,l){return l.max-g.max}function mf(g,l,_,x){this.p=new Be(g,l),this.h=_,this.d=function(D,F){let B=!1,Z=1/0;for(let X=0;X<F.length;X++){const re=F[X];for(let ce=0,de=re.length,_e=de-1;ce<de;_e=ce++){const Se=re[ce],Re=re[_e];Se.y>D.y!=Re.y>D.y&&D.x<(Re.x-Se.x)*(D.y-Se.y)/(Re.y-Se.y)+Se.x&&(B=!B),Z=Math.min(Z,sg(D,Se,Re))}}return(B?1:-1)*Math.sqrt(Z)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}const Zv=Number.POSITIVE_INFINITY,ey=Math.sqrt(2);function Bh(g,l){return l[1]!==Zv?function(_,x,D){let F=0,B=0;switch(x=Math.abs(x),D=Math.abs(D),_){case"top-right":case"top-left":case"top":B=D-7;break;case"bottom-right":case"bottom-left":case"bottom":B=7-D}switch(_){case"top-right":case"bottom-right":case"right":F=-x;break;case"top-left":case"bottom-left":case"left":F=x}return[F,B]}(g,l[0],l[1]):function(_,x){let D=0,F=0;x<0&&(x=0);const B=x/ey;switch(_){case"top-right":case"top-left":F=B-7;break;case"bottom-right":case"bottom-left":F=7-B;break;case"bottom":F=7-x;break;case"top":F=x-7}switch(_){case"top-right":case"bottom-right":D=-B;break;case"top-left":case"bottom-left":D=B;break;case"left":D=x;break;case"right":D=-x}return[D,F]}(g,l[0])}function Wv(g,l,_,x,D,F,B,Z){g.createArrays(),g.tilePixelRatio=Er/(512*g.overscaling),g.compareText={},g.iconsNeedLinear=!1;const X=g.layers[0].layout,re=g.layers[0]._unevaluatedLayout._values,ce={};if("composite"===g.textSizeData.kind){const{minZoom:Se,maxZoom:Re}=g.textSizeData;ce.compositeTextSizes=[re["text-size"].possiblyEvaluate(new Pe(Se),B),re["text-size"].possiblyEvaluate(new Pe(Re),B)]}if("composite"===g.iconSizeData.kind){const{minZoom:Se,maxZoom:Re}=g.iconSizeData;ce.compositeIconSizes=[re["icon-size"].possiblyEvaluate(new Pe(Se),B),re["icon-size"].possiblyEvaluate(new Pe(Re),B)]}ce.layoutTextSize=re["text-size"].possiblyEvaluate(new Pe(Z+1),B),ce.layoutIconSize=re["icon-size"].possiblyEvaluate(new Pe(Z+1),B),ce.textMaxSize=re["text-size"].possiblyEvaluate(new Pe(18),B);const de="map"===X.get("text-rotation-alignment")&&"point"!==X.get("symbol-placement"),_e=X.get("text-size");for(const Se of g.features){const Re=X.get("text-font").evaluate(Se,{},B).join(","),Xe=_e.evaluate(Se,{},B),at=ce.layoutTextSize.evaluate(Se,{},B),bt=(ce.layoutIconSize.evaluate(Se,{},B),{horizontal:{},vertical:void 0}),It=Se.text;let Rt,Bt=[0,0];if(It){const mn=It.toString(),Cn=24*X.get("text-letter-spacing").evaluate(Se,{},B),vn=24*X.get("text-line-height").evaluate(Se,{},B),Tn=gs(mn)?Cn:0,ln=X.get("text-anchor").evaluate(Se,{},B),pn=X.get("text-variable-anchor");if(!pn){const Li=X.get("text-radial-offset").evaluate(Se,{},B);Bt=Li?Bh(ln,[24*Li,Zv]):X.get("text-offset").evaluate(Se,{},B).map(ni=>24*ni)}let In=de?"center":X.get("text-justify").evaluate(Se,{},B);const on=X.get("symbol-placement"),Mi="point"===on,gi="point"===on?24*X.get("text-max-width").evaluate(Se,{},B):0,Ki=Li=>{g.allowVerticalPlacement&&qc(mn)&&(bt.vertical=Gu(It,l,_,D,Re,gi,vn,ln,Li,Tn,Bt,iu.vertical,!0,on,at,Xe))};if(!de&&pn){const Li="auto"===In?pn.map(Wr=>_p(Wr)):[In];let ni=!1;for(let Wr=0;Wr<Li.length;Wr++){const pi=Li[Wr];if(!bt.horizontal[pi])if(ni)bt.horizontal[pi]=bt.horizontal[0];else{const Mo=Gu(It,l,_,D,Re,gi,vn,"center",pi,Tn,Bt,iu.horizontal,!1,on,at,Xe);Mo&&(bt.horizontal[pi]=Mo,ni=1===Mo.positionedLines.length)}}Ki("left")}else{if("auto"===In&&(In=_p(ln)),Mi||X.get("text-writing-mode").indexOf("horizontal")>=0||!qc(mn)){const Li=Gu(It,l,_,D,Re,gi,vn,ln,In,Tn,Bt,iu.horizontal,!1,on,at,Xe);Li&&(bt.horizontal[In]=Li)}Ki("point"===on?"left":In)}}let jt=!1;if(Se.icon&&Se.icon.name){const mn=x[Se.icon.name];mn&&(Rt=ff(D[Se.icon.name],X.get("icon-offset").evaluate(Se,{},B),X.get("icon-anchor").evaluate(Se,{},B)),jt=mn.sdf,void 0===g.sdfIcons?g.sdfIcons=mn.sdf:g.sdfIcons!==mn.sdf&&mi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(mn.pixelRatio!==g.pixelRatio||0!==X.get("icon-rotate").constantOr(1))&&(g.iconsNeedLinear=!0))}const Ut=Cd(bt.horizontal)||bt.vertical;g.iconsInText||(g.iconsInText=!!Ut&&Ut.iconsInText),(Ut||Rt)&&kg(g,Se,bt,Rt,x,ce,at,0,Bt,jt,B)}F&&g.generateCollisionDebugBuffers(Z,g.collisionBoxArray)}function _p(g){switch(g){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kg(g,l,_,x,D,F,B,Z,X,re,ce){let de=F.textMaxSize.evaluate(l,{},ce);void 0===de&&(de=B);const _e=g.layers[0].layout,Se=_e.get("icon-offset").evaluate(l,{},ce),Re=Cd(_.horizontal)||_.vertical,Xe=B/24,at=g.tilePixelRatio*de/24,bt=g.tilePixelRatio*_e.get("symbol-spacing"),It=_e.get("text-padding")*g.tilePixelRatio,Rt=_e.get("icon-padding")*g.tilePixelRatio,Bt=zt(_e.get("text-max-angle")),jt="map"===_e.get("text-rotation-alignment")&&"point"!==_e.get("symbol-placement"),Ut="map"===_e.get("icon-rotation-alignment")&&"point"!==_e.get("symbol-placement"),mn=_e.get("symbol-placement"),Cn=bt/2,vn=_e.get("icon-text-fit");let Tn;x&&"none"!==vn&&(g.allowVerticalPlacement&&_.vertical&&(Tn=gp(x,_.vertical,vn,_e.get("icon-text-fit-padding"),Se,Xe)),Re&&(x=gp(x,Re,vn,_e.get("icon-text-fit-padding"),Se,Xe)));const ln=(pn,In)=>{In.x<0||In.x>=Er||In.y<0||In.y>=Er||function(on,Mi,gi,Ki,Li,ni,Wr,pi,Mo,as,ko,Ns,No,go,Vr,_o,Ao,Bs,eo,Ar,ls,Bo,Yo,Js){const qo=on.addToLineVertexArray(Mi,gi);let Fa,Ks,cr,ao,Ts,_a,Vh,Sc=0,Ec=0,lu=0,cs=0,Zu=-1,Uh=-1;const Ko={};let Jl=Os(""),rl=0,Hh=0;if(void 0===pi._unevaluatedLayout.getValue("text-radial-offset")?[rl,Hh]=pi.layout.get("text-offset").evaluate(Ar,{},Yo).map(zo=>24*zo):(rl=24*pi.layout.get("text-radial-offset").evaluate(Ar,{},Yo),Hh=Zv),on.allowVerticalPlacement&&Ki.vertical){const zo=Ki.vertical;if(go)_a=Ag(zo),Wr&&(Vh=Ag(Wr));else{const ya=pi.layout.get("text-rotate").evaluate(Ar,{},Yo)+90;cr=gf(Mo,Mi,as,ko,Ns,zo,No,ya,Vr),Wr&&(ao=gf(Mo,Mi,as,ko,Ns,Wr,Ao,ya))}}if(Li){const zo=pi.layout.get("icon-rotate").evaluate(Ar,{},Yo),ya="none"!==pi.layout.get("icon-text-fit"),zs=qv(Li,zo,Bo,ya),Tc=Wr?qv(Wr,zo,Bo,ya):void 0;Ks=gf(Mo,Mi,as,ko,Ns,Li,Ao,zo),Sc=4*zs.length;const kd=on.iconSizeData;let va=null;"source"===kd.kind?(va=[Qa*pi.layout.get("icon-size").evaluate(Ar,{},Yo)],va[0]>We&&mi(`${on.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===kd.kind&&(va=[Qa*ls.compositeIconSizes[0].evaluate(Ar,{},Yo),Qa*ls.compositeIconSizes[1].evaluate(Ar,{},Yo)],(va[0]>We||va[1]>We)&&mi(`${on.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),on.addSymbols(on.icon,zs,va,eo,Bs,Ar,!1,Mi,qo.lineStartIndex,qo.lineLength,-1,Yo),Zu=on.icon.placedSymbolArray.length-1,Tc&&(Ec=4*Tc.length,on.addSymbols(on.icon,Tc,va,eo,Bs,Ar,iu.vertical,Mi,qo.lineStartIndex,qo.lineLength,-1,Yo),Uh=on.icon.placedSymbolArray.length-1)}for(const zo in Ki.horizontal){const ya=Ki.horizontal[zo];Fa||(Jl=Os(ya.text),go?Ts=Ag(ya):Fa=gf(Mo,Mi,as,ko,Ns,ya,No,pi.layout.get("text-rotate").evaluate(Ar,{},Yo),Vr));const zs=1===ya.positionedLines.length;if(lu+=Zr(on,Mi,ya,ni,pi,go,Ar,Vr,qo,Ki.vertical?iu.horizontal:iu.horizontalOnly,zs?Object.keys(Ki.horizontal):[zo],Ko,Zu,ls,Yo),zs)break}Ki.vertical&&(cs+=Zr(on,Mi,Ki.vertical,ni,pi,go,Ar,Vr,qo,iu.vertical,["vertical"],Ko,Uh,ls,Yo));let cu=-1;const hy=(zo,ya)=>zo?Math.max(zo,ya):ya;cu=hy(Ts,cu),cu=hy(_a,cu),cu=hy(Vh,cu);const Do=cu>-1?1:0;Do&&(cu*=Js/24),on.glyphOffsetArray.length>=vp.MAX_GLYPHS&&mi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ar.sortKey&&on.addToSortKeyRanges(on.symbolInstances.length,Ar.sortKey),on.symbolInstances.emplaceBack(Mi.x,Mi.y,Ko.right>=0?Ko.right:-1,Ko.center>=0?Ko.center:-1,Ko.left>=0?Ko.left:-1,Ko.vertical>=0?Ko.vertical:-1,Zu,Uh,Jl,void 0!==Fa?Fa:on.collisionBoxArray.length,void 0!==Fa?Fa+1:on.collisionBoxArray.length,void 0!==cr?cr:on.collisionBoxArray.length,void 0!==cr?cr+1:on.collisionBoxArray.length,void 0!==Ks?Ks:on.collisionBoxArray.length,void 0!==Ks?Ks+1:on.collisionBoxArray.length,ao||on.collisionBoxArray.length,ao?ao+1:on.collisionBoxArray.length,as,lu,cs,Sc,Ec,Do,0,rl,Hh,cu)}(g,In,pn,_,x,D,Tn,g.layers[0],g.collisionBoxArray,l.index,l.sourceLayerIndex,g.index,It,jt,X,0,Rt,Ut,Se,l,F,re,ce,B)};if("line"===mn)for(const pn of Vx(l.geometry,0,0,Er,Er)){const In=mE(pn,bt,Bt,_.vertical||Re,x,24,at,g.overscaling,Er);for(const on of In){const Mi=Re;Mi&&ty(g,Mi.text,Cn,on)||ln(pn,on)}}else if("line-center"===mn){for(const pn of l.geometry)if(pn.length>1){const In=r1(pn,Bt,_.vertical||Re,x,24,at);In&&ln(pn,In)}}else if("Polygon"===l.type)for(const pn of Xa(l.geometry,0)){const In=s1(pn,16);ln(pn[0],new Dl(In.x,In.y,0))}else if("LineString"===l.type)for(const pn of l.geometry)ln(pn,new Dl(pn[0].x,pn[0].y,0));else if("Point"===l.type)for(const pn of l.geometry)for(const In of pn)ln([In],new Dl(In.x,In.y,0))}const We=32640;function Zr(g,l,_,x,D,F,B,Z,X,re,ce,de,_e,Se,Re){const Xe=function(It,Rt,Bt,jt,Ut,mn,Cn,vn){const Tn=[];if(0===Rt.positionedLines.length)return Tn;const ln=jt.layout.get("text-rotate").evaluate(mn,{})*Math.PI/180,pn=function(Ki){const Li=Ki[0],ni=Ki[1],Wr=Li*ni;return Wr>0?[Li,-ni]:Wr<0?[-Li,ni]:0===Li?[ni,Li]:[ni,-Li]}(Bt);let In=Math.abs(Rt.top-Rt.bottom);for(const Ki of Rt.positionedLines)In-=Ki.lineOffset;const on=Rt.positionedLines.length,Mi=In/on;let gi=Rt.top-Bt[1];for(let Ki=0;Ki<on;++Ki){const Li=Rt.positionedLines[Ki];gi=o1(Rt,Mi,gi,Ki);for(const ni of Li.positionedGlyphs){if(!ni.rect)continue;const Wr=ni.rect||{};let pi=4,Mo=!0,as=1,ko=0;const Ns=(Ut||vn)&&ni.vertical,No=ni.metrics.advance*ni.scale/2,go=ni.metrics,Vr=ni.rect;if(null===Vr)continue;if(vn&&Rt.verticalizable&&(ko=ni.imageName?No-ni.metrics.width*ni.scale/2:0),ni.imageName){const cr=Cn[ni.imageName];if(!cr)continue;Mo=cr.sdf,as=cr.pixelRatio,pi=1/as}const _o=Ut?[ni.x+No,ni.y]:[0,0];let Ao=[0,0],Bs=[0,0],eo=!1;Ut||(Ns?(Bs=[ni.x+No+pn[0],ni.y+pn[1]-ko],eo=!0):Ao=[ni.x+No+Bt[0],ni.y+Bt[1]-ko]);const Ar=Vr.w*ni.scale/(as*(ni.localGlyph?2:1)),ls=Vr.h*ni.scale/(as*(ni.localGlyph?2:1));let Bo,Yo,Js,qo;if(Ns){const cr=ni.y-gi,ao=new Be(-No,No-cr),Ts=-Math.PI/2,_a=new Be(...Bs);Bo=new Be(-No+Ao[0],Ao[1]),Bo._rotateAround(Ts,ao)._add(_a),Bo.x+=-cr+No,Bo.y-=(go.left-pi)*ni.scale;const Vh=ni.imageName?go.advance*ni.scale:24*ni.scale,Sc=String.fromCharCode(ni.glyph);nm(Sc)?Bo.x+=(1-pi)*ni.scale:pE(Sc)?Bo.x+=Vh-go.height*ni.scale+(-pi-1)*ni.scale:Bo.x+=ni.imageName||go.width+2*pi===Vr.w&&go.height+2*pi===Vr.h?(Vh-ls)/2:(Vh-(go.height+2*pi)*ni.scale)/2,Yo=new Be(Bo.x,Bo.y-Ar),Js=new Be(Bo.x+ls,Bo.y),qo=new Be(Bo.x+ls,Bo.y-Ar)}else{const cr=(go.left-pi)*ni.scale-No+Ao[0],ao=(-go.top-pi)*ni.scale+Ao[1],Ts=cr+Ar,_a=ao+ls;Bo=new Be(cr,ao),Yo=new Be(Ts,ao),Js=new Be(cr,_a),qo=new Be(Ts,_a)}if(ln){let cr;cr=Ut?new Be(0,0):eo?new Be(pn[0],pn[1]):new Be(Bt[0],Bt[1]),Bo._rotateAround(ln,cr),Yo._rotateAround(ln,cr),Js._rotateAround(ln,cr),qo._rotateAround(ln,cr)}const Fa=new Be(0,0),Ks=new Be(0,0);Tn.push({tl:Bo,tr:Yo,bl:Js,br:qo,tex:Wr,writingMode:Rt.writingMode,glyphOffset:_o,sectionIndex:ni.sectionIndex,isSDF:Mo,pixelOffsetTL:Fa,pixelOffsetBR:Ks,minFontScaleX:0,minFontScaleY:0})}}return Tn}(0,_,Z,D,F,B,x,g.allowVerticalPlacement),at=g.textSizeData;let bt=null;"source"===at.kind?(bt=[Qa*D.layout.get("text-size").evaluate(B,{},Re)],bt[0]>We&&mi(`${g.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===at.kind&&(bt=[Qa*Se.compositeTextSizes[0].evaluate(B,{},Re),Qa*Se.compositeTextSizes[1].evaluate(B,{},Re)],(bt[0]>We||bt[1]>We)&&mi(`${g.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),g.addSymbols(g.text,Xe,bt,Z,F,B,re,l,X.lineStartIndex,X.lineLength,_e,Re);for(const It of ce)de[It]=g.text.placedSymbolArray.length-1;return 4*Xe.length}function Cd(g){for(const l in g)return g[l];return null}function gf(g,l,_,x,D,F,B,Z,X){let re=F.top,ce=F.bottom,de=F.left,_e=F.right;const Se=F.collisionPadding;if(Se&&(de-=Se[0],re-=Se[1],_e+=Se[2],ce+=Se[3]),Z){const Re=new Be(de,re),Xe=new Be(_e,re),at=new Be(de,ce),bt=new Be(_e,ce),It=zt(Z);let Rt=new Be(0,0);X&&(Rt=new Be(X[0],X[1])),Re._rotateAround(It,Rt),Xe._rotateAround(It,Rt),at._rotateAround(It,Rt),bt._rotateAround(It,Rt),de=Math.min(Re.x,Xe.x,at.x,bt.x),_e=Math.max(Re.x,Xe.x,at.x,bt.x),re=Math.min(Re.y,Xe.y,at.y,bt.y),ce=Math.max(Re.y,Xe.y,at.y,bt.y)}return g.emplaceBack(l.x,l.y,de,re,_e,ce,B,_,x,D),g.length-1}function Ag(g){g.collisionPadding&&(g.top-=g.collisionPadding[1],g.bottom+=g.collisionPadding[3]);const l=g.bottom-g.top;return l>0?Math.max(10,l):null}function ty(g,l,_,x){const D=g.compareText;if(l in D){const F=D[l];for(let B=F.length-1;B>=0;B--)if(x.dist(F[B])<_)return!0}else D[l]=[];return D[l].push(x),!1}const jx=Lh.VectorTileFeature.types,si=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sm(g,l,_,x,D,F,B,Z,X,re,ce,de,_e){const Se=Z?Math.min(We,Math.round(Z[0])):0,Re=Z?Math.min(We,Math.round(Z[1])):0;g.emplaceBack(l,_,Math.round(32*x),Math.round(32*D),F,B,(Se<<1)+(X?1:0),Re,16*re,16*ce,256*de,256*_e)}function ji(g,l,_){g.emplaceBack(l.x,l.y,_),g.emplaceBack(l.x,l.y,_),g.emplaceBack(l.x,l.y,_),g.emplaceBack(l.x,l.y,_)}function $v(g){for(const l of g.sections)if(ap(l.text))return!0;return!1}class am{constructor(l){this.layoutVertexArray=new po,this.indexArray=new zr,this.programConfigurations=l,this.segments=new Ss,this.dynamicLayoutVertexArray=new ua,this.opacityVertexArray=new xs,this.placedSymbolArray=new cd}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(l,_,x,D){this.isEmpty()||(x&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,yi.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,_),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,Qi.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,si,!0),this.opacityVertexBuffer.itemSize=1),(x||D)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qn("SymbolBuffers",am);class yp{constructor(l,_,x){this.layoutVertexArray=new l,this.layoutAttributes=_,this.indexArray=new x,this.segments=new Ss,this.collisionVertexArray=new wi,this.collisionVertexArrayExt=new ua}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,Jo.members,!0),this.collisionVertexBufferExt=l.createVertexBuffer(this.collisionVertexArrayExt,Al.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}qn("CollisionBuffers",yp);class vp{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(B=>B.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ls([]),this.placementViewportMatrix=Ls([]);const _=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fv(this.zoom,_["text-size"]),this.iconSizeData=Fv(this.zoom,_["icon-size"]);const x=this.layers[0].layout,D=x.get("symbol-sort-key"),F=x.get("symbol-z-order");this.canOverlap=x.get("text-allow-overlap")||x.get("icon-allow-overlap")||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==F&&void 0!==D.constantOr(1),this.sortFeaturesByY=("viewport-y"===F||"auto"===F&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=x.get("text-writing-mode").map(B=>iu[B]),this.stateDependentLayerIds=this.layers.filter(B=>B.isStateDependent()).map(B=>B.id),this.sourceID=l.sourceID}createArrays(){this.text=new am(new yc(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new am(new yc(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new mo,this.lineVertexArray=new Ia,this.symbolInstances=new bo}calculateGlyphDependencies(l,_,x,D,F){for(let B=0;B<l.length;B++)if(_[l.charCodeAt(B)]=!0,D&&F){const Z=hf[l.charAt(B)];Z&&(_[Z.charCodeAt(0)]=!0)}}populate(l,_,x){const D=this.layers[0],F=D.layout,B=F.get("text-font"),Z=F.get("text-field"),X=F.get("icon-image"),re=("constant"!==Z.value.kind||Z.value.value instanceof zn&&!Z.value.value.isEmpty()||Z.value.value.toString().length>0)&&("constant"!==B.value.kind||B.value.value.length>0),ce="constant"!==X.value.kind||!!X.value.value||Object.keys(X.parameters).length>0,de=F.get("symbol-sort-key");if(this.features=[],!re&&!ce)return;const _e=_.iconDependencies,Se=_.glyphDependencies,Re=_.availableImages,Xe=new Pe(this.zoom);for(const{feature:at,id:bt,index:It,sourceLayerIndex:Rt}of l){const Bt=D._featureFilter.needGeometry,jt=dd(at,Bt);if(!D._featureFilter.filter(Xe,jt,x))continue;let Ut,mn;if(Bt||(jt.geometry=hd(at)),re){const vn=D.getValueAndResolveTokens("text-field",jt,x,Re),Tn=zn.factory(vn);$v(Tn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===me()||this.hasRTLText&&Ae.isParsed())&&(Ut=Px(Tn,D,jt))}if(ce){const vn=D.getValueAndResolveTokens("icon-image",jt,x,Re);mn=vn instanceof ti?vn:ti.fromString(vn)}if(!Ut&&!mn)continue;const Cn=this.sortFeaturesByKey?de.evaluate(jt,{},x):void 0;if(this.features.push({id:bt,text:Ut,icon:mn,index:It,sourceLayerIndex:Rt,geometry:jt.geometry,properties:at.properties,type:jx[at.type],sortKey:Cn}),mn&&(_e[mn.name]=!0),Ut){const vn=B.evaluate(jt,{},x).join(","),Tn="map"===F.get("text-rotation-alignment")&&"point"!==F.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(iu.vertical)>=0;for(const ln of Ut.sections)if(ln.image)_e[ln.image.name]=!0;else{const pn=qc(Ut.toString()),In=ln.fontStack||vn,on=Se[In]=Se[In]||{};this.calculateGlyphDependencies(ln.text,on,Tn,this.allowVerticalPlacement,pn)}}}"line"===F.get("symbol-placement")&&(this.features=function(at){const bt={},It={},Rt=[];let Bt=0;function jt(vn){Rt.push(at[vn]),Bt++}function Ut(vn,Tn,ln){const pn=It[vn];return delete It[vn],It[Tn]=pn,Rt[pn].geometry[0].pop(),Rt[pn].geometry[0]=Rt[pn].geometry[0].concat(ln[0]),pn}function mn(vn,Tn,ln){const pn=bt[Tn];return delete bt[Tn],bt[vn]=pn,Rt[pn].geometry[0].shift(),Rt[pn].geometry[0]=ln[0].concat(Rt[pn].geometry[0]),pn}function Cn(vn,Tn,ln){const pn=ln?Tn[0][Tn[0].length-1]:Tn[0][0];return`${vn}:${pn.x}:${pn.y}`}for(let vn=0;vn<at.length;vn++){const Tn=at[vn],ln=Tn.geometry,pn=Tn.text?Tn.text.toString():null;if(!pn){jt(vn);continue}const In=Cn(pn,ln),on=Cn(pn,ln,!0);if(In in It&&on in bt&&It[In]!==bt[on]){const Mi=mn(In,on,ln),gi=Ut(In,on,Rt[Mi].geometry);delete bt[In],delete It[on],It[Cn(pn,Rt[gi].geometry,!0)]=gi,Rt[Mi].geometry=null}else In in It?Ut(In,on,ln):on in bt?mn(In,on,ln):(jt(vn),bt[In]=Bt-1,It[on]=Bt-1)}return Rt.filter(vn=>vn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((at,bt)=>at.sortKey-bt.sortKey)}update(l,_,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,_,this.layers,x),this.icon.programConfigurations.updatePaintArrays(l,_,this.layers,x))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,_){const x=this.lineVertexArray.length;if(void 0!==l.segment){let D=l.dist(_[l.segment+1]),F=l.dist(_[l.segment]);const B={};for(let Z=l.segment+1;Z<_.length;Z++)B[Z]={x:_[Z].x,y:_[Z].y,tileUnitDistanceFromAnchor:D},Z<_.length-1&&(D+=_[Z+1].dist(_[Z]));for(let Z=l.segment||0;Z>=0;Z--)B[Z]={x:_[Z].x,y:_[Z].y,tileUnitDistanceFromAnchor:F},Z>0&&(F+=_[Z-1].dist(_[Z]));for(let Z=0;Z<_.length;Z++){const X=B[Z];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(l,_,x,D,F,B,Z,X,re,ce,de,_e){const Se=l.indexArray,Re=l.layoutVertexArray,Xe=l.segments.prepareSegment(4*_.length,Re,Se,this.canOverlap?B.sortKey:void 0),at=this.glyphOffsetArray.length,bt=Xe.vertexLength,It=this.allowVerticalPlacement&&Z===iu.vertical?Math.PI/2:0,Rt=B.text&&B.text.sections;for(let Bt=0;Bt<_.length;Bt++){const{tl:jt,tr:Ut,bl:mn,br:Cn,tex:vn,pixelOffsetTL:Tn,pixelOffsetBR:ln,minFontScaleX:pn,minFontScaleY:In,glyphOffset:on,isSDF:Mi,sectionIndex:gi}=_[Bt],Ki=Xe.vertexLength,Li=on[1];sm(Re,X.x,X.y,jt.x,Li+jt.y,vn.x,vn.y,x,Mi,Tn.x,Tn.y,pn,In),sm(Re,X.x,X.y,Ut.x,Li+Ut.y,vn.x+vn.w,vn.y,x,Mi,ln.x,Tn.y,pn,In),sm(Re,X.x,X.y,mn.x,Li+mn.y,vn.x,vn.y+vn.h,x,Mi,Tn.x,ln.y,pn,In),sm(Re,X.x,X.y,Cn.x,Li+Cn.y,vn.x+vn.w,vn.y+vn.h,x,Mi,ln.x,ln.y,pn,In),ji(l.dynamicLayoutVertexArray,X,It),Se.emplaceBack(Ki,Ki+1,Ki+2),Se.emplaceBack(Ki+1,Ki+2,Ki+3),Xe.vertexLength+=4,Xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(on[0]),Bt!==_.length-1&&gi===_[Bt+1].sectionIndex||l.programConfigurations.populatePaintArrays(Re.length,B,B.index,{},_e,Rt&&Rt[gi])}l.placedSymbolArray.emplaceBack(X.x,X.y,at,this.glyphOffsetArray.length-at,bt,re,ce,X.segment,x?x[0]:0,x?x[1]:0,D[0],D[1],Z,0,!1,0,de,0)}_commitLayoutVertex(l,_,x,D,F){l.emplaceBack(_.x,_.y,x,D,Math.round(F.x),Math.round(F.y))}_addCollisionDebugVertices(l,_,x,D,F){const B=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),Z=B.vertexLength,X=F.anchorX,re=F.anchorY;for(let de=0;de<4;de++)x.collisionVertexArray.emplaceBack(0,0,0,0);x.collisionVertexArrayExt.emplaceBack(_,-l.padding,-l.padding),x.collisionVertexArrayExt.emplaceBack(_,l.padding,-l.padding),x.collisionVertexArrayExt.emplaceBack(_,l.padding,l.padding),x.collisionVertexArrayExt.emplaceBack(_,-l.padding,l.padding),this._commitLayoutVertex(x.layoutVertexArray,D,X,re,new Be(l.x1,l.y1)),this._commitLayoutVertex(x.layoutVertexArray,D,X,re,new Be(l.x2,l.y1)),this._commitLayoutVertex(x.layoutVertexArray,D,X,re,new Be(l.x2,l.y2)),this._commitLayoutVertex(x.layoutVertexArray,D,X,re,new Be(l.x1,l.y2)),B.vertexLength+=4;const ce=x.indexArray;ce.emplaceBack(Z,Z+1),ce.emplaceBack(Z+1,Z+2),ce.emplaceBack(Z+2,Z+3),ce.emplaceBack(Z+3,Z),B.primitiveLength+=4}_addTextDebugCollisionBoxes(l,_,x,D,F,B){for(let Z=D;Z<F;Z++){const X=x.get(Z),re=this.getSymbolInstanceTextSize(l,B,_,Z);this._addCollisionDebugVertices(X,re,this.textCollisionBox,X.anchorPoint,B)}}_addIconDebugCollisionBoxes(l,_,x,D,F,B){for(let Z=D;Z<F;Z++){const X=x.get(Z),re=this.getSymbolInstanceIconSize(l,_,Z);this._addCollisionDebugVertices(X,re,this.iconCollisionBox,X.anchorPoint,B)}}generateCollisionDebugBuffers(l,_){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new yp(Qo,bd.members,Rs),this.iconCollisionBox=new yp(Qo,bd.members,Rs);const x=tm(this.iconSizeData,l),D=tm(this.textSizeData,l);for(let F=0;F<this.symbolInstances.length;F++){const B=this.symbolInstances.get(F);this._addTextDebugCollisionBoxes(D,l,_,B.textBoxStartIndex,B.textBoxEndIndex,B),this._addTextDebugCollisionBoxes(D,l,_,B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B),this._addIconDebugCollisionBoxes(x,l,_,B.iconBoxStartIndex,B.iconBoxEndIndex,B),this._addIconDebugCollisionBoxes(x,l,_,B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex,B)}}getSymbolInstanceTextSize(l,_,x,D){const F=this.text.placedSymbolArray.get(_.rightJustifiedTextSymbolIndex>=0?_.rightJustifiedTextSymbolIndex:_.centerJustifiedTextSymbolIndex>=0?_.centerJustifiedTextSymbolIndex:_.leftJustifiedTextSymbolIndex>=0?_.leftJustifiedTextSymbolIndex:_.verticalPlacedTextSymbolIndex>=0?_.verticalPlacedTextSymbolIndex:D),B=pp(this.textSizeData,l,F)/24;return this.tilePixelRatio*B}getSymbolInstanceIconSize(l,_,x){const D=this.icon.placedSymbolArray.get(x),F=pp(this.iconSizeData,l,D);return this.tilePixelRatio*F}_commitDebugCollisionVertexUpdate(l,_,x){l.emplaceBack(_,-x,-x),l.emplaceBack(_,x,-x),l.emplaceBack(_,x,x),l.emplaceBack(_,-x,x)}_updateTextDebugCollisionBoxes(l,_,x,D,F,B){for(let Z=D;Z<F;Z++){const X=x.get(Z),re=this.getSymbolInstanceTextSize(l,B,_,Z);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,re,X.padding)}}_updateIconDebugCollisionBoxes(l,_,x,D,F){for(let B=D;B<F;B++){const Z=x.get(B),X=this.getSymbolInstanceIconSize(l,_,B);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,X,Z.padding)}}updateCollisionDebugBuffers(l,_){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const x=tm(this.iconSizeData,l),D=tm(this.textSizeData,l);for(let F=0;F<this.symbolInstances.length;F++){const B=this.symbolInstances.get(F);this._updateTextDebugCollisionBoxes(D,l,_,B.textBoxStartIndex,B.textBoxEndIndex,B),this._updateTextDebugCollisionBoxes(D,l,_,B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B),this._updateIconDebugCollisionBoxes(x,l,_,B.iconBoxStartIndex,B.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(x,l,_,B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(l,_,x,D,F,B,Z,X,re){const ce={};for(let de=_;de<x;de++){const _e=l.get(de);ce.textBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,padding:_e.padding,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ce.textFeatureIndex=_e.featureIndex;break}for(let de=D;de<F;de++){const _e=l.get(de);ce.verticalTextBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,padding:_e.padding,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ce.verticalTextFeatureIndex=_e.featureIndex;break}for(let de=B;de<Z;de++){const _e=l.get(de);ce.iconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,padding:_e.padding,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ce.iconFeatureIndex=_e.featureIndex;break}for(let de=X;de<re;de++){const _e=l.get(de);ce.verticalIconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,padding:_e.padding,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ce.verticalIconFeatureIndex=_e.featureIndex;break}return ce}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let _=0;_<this.symbolInstances.length;_++){const x=this.symbolInstances.get(_);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,_){const x=l.placedSymbolArray.get(_),D=x.vertexStartIndex+4*x.numGlyphs;for(let F=x.vertexStartIndex;F<D;F+=4)l.indexArray.emplaceBack(F,F+1,F+2),l.indexArray.emplaceBack(F+1,F+2,F+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const _=Math.sin(l),x=Math.cos(l),D=[],F=[],B=[];for(let Z=0;Z<this.symbolInstances.length;++Z){B.push(Z);const X=this.symbolInstances.get(Z);D.push(0|Math.round(_*X.anchorX+x*X.anchorY)),F.push(X.featureIndex)}return B.sort((Z,X)=>D[Z]-D[X]||F[X]-F[Z]),B}addToSortKeyRanges(l,_){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===_?x.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:_,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const _ of this.symbolInstanceIndexes){const x=this.symbolInstances.get(_);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((D,F,B)=>{D>=0&&B.indexOf(D)===F&&this.addIndicesForPlacedSymbol(this.text,D)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}qn("SymbolBucket",vp,{omit:["layers","collisionBoxArray","features","compareText"]}),vp.MAX_GLYPHS=65535,vp.addDynamicAttributes=ji;const ny=new ut({"symbol-placement":new rt(y.layout_symbol["symbol-placement"]),"symbol-spacing":new rt(y.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new rt(y.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ht(y.layout_symbol["symbol-sort-key"]),"symbol-z-order":new rt(y.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new rt(y.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new rt(y.layout_symbol["icon-ignore-placement"]),"icon-optional":new rt(y.layout_symbol["icon-optional"]),"icon-rotation-alignment":new rt(y.layout_symbol["icon-rotation-alignment"]),"icon-size":new ht(y.layout_symbol["icon-size"]),"icon-text-fit":new rt(y.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new rt(y.layout_symbol["icon-text-fit-padding"]),"icon-image":new ht(y.layout_symbol["icon-image"]),"icon-rotate":new ht(y.layout_symbol["icon-rotate"]),"icon-padding":new rt(y.layout_symbol["icon-padding"]),"icon-keep-upright":new rt(y.layout_symbol["icon-keep-upright"]),"icon-offset":new ht(y.layout_symbol["icon-offset"]),"icon-anchor":new ht(y.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new rt(y.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new rt(y.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new rt(y.layout_symbol["text-rotation-alignment"]),"text-field":new ht(y.layout_symbol["text-field"]),"text-font":new ht(y.layout_symbol["text-font"]),"text-size":new ht(y.layout_symbol["text-size"]),"text-max-width":new ht(y.layout_symbol["text-max-width"]),"text-line-height":new ht(y.layout_symbol["text-line-height"]),"text-letter-spacing":new ht(y.layout_symbol["text-letter-spacing"]),"text-justify":new ht(y.layout_symbol["text-justify"]),"text-radial-offset":new ht(y.layout_symbol["text-radial-offset"]),"text-variable-anchor":new rt(y.layout_symbol["text-variable-anchor"]),"text-anchor":new ht(y.layout_symbol["text-anchor"]),"text-max-angle":new rt(y.layout_symbol["text-max-angle"]),"text-writing-mode":new rt(y.layout_symbol["text-writing-mode"]),"text-rotate":new ht(y.layout_symbol["text-rotate"]),"text-padding":new rt(y.layout_symbol["text-padding"]),"text-keep-upright":new rt(y.layout_symbol["text-keep-upright"]),"text-transform":new ht(y.layout_symbol["text-transform"]),"text-offset":new ht(y.layout_symbol["text-offset"]),"text-allow-overlap":new rt(y.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new rt(y.layout_symbol["text-ignore-placement"]),"text-optional":new rt(y.layout_symbol["text-optional"])});var Xv={paint:new ut({"icon-opacity":new ht(y.paint_symbol["icon-opacity"]),"icon-color":new ht(y.paint_symbol["icon-color"]),"icon-halo-color":new ht(y.paint_symbol["icon-halo-color"]),"icon-halo-width":new ht(y.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ht(y.paint_symbol["icon-halo-blur"]),"icon-translate":new rt(y.paint_symbol["icon-translate"]),"icon-translate-anchor":new rt(y.paint_symbol["icon-translate-anchor"]),"text-opacity":new ht(y.paint_symbol["text-opacity"]),"text-color":new ht(y.paint_symbol["text-color"],{runtimeType:ge,getOverride:g=>g.textColor,hasOverride:g=>!!g.textColor}),"text-halo-color":new ht(y.paint_symbol["text-halo-color"]),"text-halo-width":new ht(y.paint_symbol["text-halo-width"]),"text-halo-blur":new ht(y.paint_symbol["text-halo-blur"]),"text-translate":new rt(y.paint_symbol["text-translate"]),"text-translate-anchor":new rt(y.paint_symbol["text-translate-anchor"])}),layout:ny};class Yx{constructor(l){this.type=l.property.overrides?l.property.overrides.runtimeType:te,this.defaultValue=l}evaluate(l){if(l.formattedSection){const _=this.defaultValue.property.overrides;if(_&&_.hasOverride(l.formattedSection))return _.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qn("FormatSectionOverride",Yx,{omit:["defaultValue"]});class Ka extends ql{constructor(l){super(l,Xv)}recalculate(l,_){super.recalculate(l,_),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const x=this.layout.get("text-writing-mode");if(x){const D=[];for(const F of x)D.indexOf(F)<0&&D.push(F);this.layout._values["text-writing-mode"]=D}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(l,_,x,D){const F=this.layout.get(l).evaluate(_,{},x,D),B=this._unevaluatedLayout._values[l];return B.isDataDriven()||Aa(B.value)||!F?F:(Z=_.properties,F.replace(/{([^{}]+)}/g,(re,ce)=>ce in Z?String(Z[ce]):""));var Z}createBucket(l){return new vp(l)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const l of Xv.paint.overridableProperties){if(!Ka.hasPaintOverride(this.layout,l))continue;const _=this.paint.get(l),x=new Yx(_),D=new Qd(x,_.property.specification);let F=null;F="constant"===_.value.kind||"source"===_.value.kind?new yl("source",D):new vl("composite",D,_.value.zoomStops,_.value._interpolationType),this.paint._values[l]=new ot(_.property,F,_.parameters)}}_handleOverridablePaintPropertyUpdate(l,_,x){return!(!this.layout||_.isDataDriven()||x.isDataDriven())&&Ka.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,_){const x=l.get("text-field"),D=Xv.paint.properties[_];let F=!1;const B=Z=>{for(const X of Z)if(D.overrides&&D.overrides.hasOverride(X))return void(F=!0)};if("constant"===x.value.kind&&x.value.value instanceof zn)B(x.value.value.sections);else if("source"===x.value.kind){const Z=re=>{F||(re instanceof Ro&&Mr(re.value)===Ke?B(re.value.sections):re instanceof ro?B(re.sections):re.eachChild(Z))},X=x.value;X._styleExpression&&Z(X._styleExpression.expression)}return F}getProgramConfiguration(l){return new $s(this,l)}}var Oa={paint:new ut({"background-color":new rt(y.paint_background["background-color"]),"background-pattern":new sn(y.paint_background["background-pattern"]),"background-opacity":new rt(y.paint_background["background-opacity"])})},iy={paint:new ut({"raster-opacity":new rt(y.paint_raster["raster-opacity"]),"raster-hue-rotate":new rt(y.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new rt(y.paint_raster["raster-brightness-min"]),"raster-brightness-max":new rt(y.paint_raster["raster-brightness-max"]),"raster-saturation":new rt(y.paint_raster["raster-saturation"]),"raster-contrast":new rt(y.paint_raster["raster-contrast"]),"raster-resampling":new rt(y.paint_raster["raster-resampling"]),"raster-fade-duration":new rt(y.paint_raster["raster-fade-duration"])})};class el extends ql{constructor(l){super(l,{}),this.implementation=l}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(l){this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)}onRemove(l){this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)}}var _f={paint:new ut({"sky-type":new rt(y.paint_sky["sky-type"]),"sky-atmosphere-sun":new rt(y.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new rt(y.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new rt(y.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new rt(y.paint_sky["sky-gradient-radius"]),"sky-gradient":new un(y.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new rt(y.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new rt(y.paint_sky["sky-atmosphere-color"]),"sky-opacity":new rt(y.paint_sky["sky-opacity"])})};function ry(g,l,_){const x=qa(0,0,1),D=Es(Ah());return function(F,B,Z){Z*=.5;var X=B[0],re=B[1],ce=B[2],de=B[3],_e=Math.sin(Z),Se=Math.cos(Z);F[0]=X*Se-ce*_e,F[1]=re*Se+de*_e,F[2]=ce*Se+X*_e,F[3]=de*Se-re*_e}(D,D,_?-zt(g)+Math.PI:zt(g)),xc(D,D,-zt(l)),pg(x,x,D),Zf(x,x)}const _E={circle:class extends ql{constructor(g){super(g,B_)}createBucket(g){return new Ya(g)}queryRadius(g){const l=g;return Tl("circle-radius",this,l)+Tl("circle-stroke-width",this,l)+lg(this.paint.get("circle-translate"))}queryIntersectsFeature(g,l,_,x,D,F,B,Z){const X="map"===this.paint.get("circle-pitch-alignment");if(X&&g.queryGeometry.isAboveHorizon)return!1;const re=cg(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),F.angle,g.pixelToTileUnitsFactor),ce=this.paint.get("circle-radius").evaluate(l,_)+this.paint.get("circle-stroke-width").evaluate(l,_),de=X?ce*g.pixelToTileUnitsFactor:ce;for(const _e of x)for(const Se of _e){const Re=Se.add(re),Xe=Z&&F.elevation?F.elevation.exaggeration()*Z.getElevationAt(Re.x,Re.y,!0):0,at=X?Re:ef(Re,Xe,B),bt=X?g.tilespaceRays.map(Bt=>lp(Bt,Xe)):g.queryGeometry.screenGeometry;let It=de;const Rt=md([],[Se.x,Se.y,Xe,1],B);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?It*=Rt[3]/F.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(It*=F.cameraToCenterDistance/Rt[3]),El(bt,at,It))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(g){return new $s(this,g)}},heatmap:class extends ql{createBucket(g){return new nf(g)}constructor(g){super(g,Rv),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(g){"heatmap-color"===g&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=cp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(g){return new $s(this,g)}},hillshade:class extends ql{constructor(g){super(g,fg)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(g){return new $s(this,g)}},fill:class extends ql{constructor(g){super(g,xg)}getProgramIds(){const g=this.paint.get("fill-pattern"),l=g&&g.constantOr(1),_=[l?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&_.push(l&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),_}getProgramConfiguration(g){return new $s(this,g)}recalculate(g,l){super.recalculate(g,l);const _=this.paint._values["fill-outline-color"];"constant"===_.value.kind&&void 0===_.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(g){return new eu(g)}queryRadius(){return lg(this.paint.get("fill-translate"))}queryIntersectsFeature(g,l,_,x,D,F){return!g.queryGeometry.isAboveHorizon&&vc(Jp(g.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),F.angle,g.pixelToTileUnitsFactor),x)}isTileClipped(){return!0}},"fill-extrusion":class extends ql{constructor(g){super(g,E)}createBucket(g){return new Ra(g)}queryRadius(){return lg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(g){return new $s(this,g)}queryIntersectsFeature(g,l,_,x,D,F,B,Z,X){const re=cg(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),F.angle,g.pixelToTileUnitsFactor),ce=this.paint.get("fill-extrusion-height").evaluate(l,_),de=this.paint.get("fill-extrusion-base").evaluate(l,_),_e=[0,0],Se=Z&&F.elevation,Re=F.elevation?F.elevation.exaggeration():1;if(Se){const bt=g.tile.getBucket(this).centroidVertexArray,It=X+1;if(It<bt.length){const Rt=bt.get(It);_e[0]=Rt.a_centroid_pos0,_e[1]=Rt.a_centroid_pos1}}if(0===_e[0]&&1===_e[1])return!1;const Xe=(bt=x,It=de,Rt=ce,Bt=re,jt=B,(Ut=Se?Z:null)?function(Tn,ln,pn,In,on,Mi,gi,Ki,Li){const ni=[],Wr=[],pi=[0,0,0,1];for(const Mo of Tn){const as=[],ko=[];for(const Ns of Mo){const No=Ns.x+In.x,go=Ns.y+In.y,Vr=Q(No,go,ln,pn,Mi,gi,Ki,Li);pi[0]=No,pi[1]=go,pi[2]=Vr.base,pi[3]=1,md(pi,pi,on),pi[3]=Math.max(pi[3],1e-5);const _o=V([pi[0]/pi[3],pi[1]/pi[3],pi[2]/pi[3]]);pi[0]=No,pi[1]=go,pi[2]=Vr.top,pi[3]=1,md(pi,pi,on),pi[3]=Math.max(pi[3],1e-5);const Ao=V([pi[0]/pi[3],pi[1]/pi[3],pi[2]/pi[3]]);as.push(_o),ko.push(Ao)}ni.push(as),Wr.push(ko)}return[ni,Wr]}(bt,It,Rt,Bt,jt,Ut,_e,Re,F.center.lat):function(Tn,ln,pn,In,on){const Mi=[],gi=[],Ki=on[8]*ln,Li=on[9]*ln,ni=on[10]*ln,Wr=on[11]*ln,pi=on[8]*pn,Mo=on[9]*pn,as=on[10]*pn,ko=on[11]*pn;for(const Ns of Tn){const No=[],go=[];for(const Vr of Ns){const _o=Vr.x+In.x,Ao=Vr.y+In.y,Bs=on[0]*_o+on[4]*Ao+on[12],eo=on[1]*_o+on[5]*Ao+on[13],Ar=on[2]*_o+on[6]*Ao+on[14],ls=on[3]*_o+on[7]*Ao+on[15],Bo=Bs+Ki,Yo=eo+Li,Js=Ar+ni,qo=Math.max(ls+Wr,1e-5),Fa=Bs+pi,Ks=eo+Mo,cr=Ar+as,ao=Math.max(ls+ko,1e-5),Ts=new Be(Bo/qo,Yo/qo);Ts.z=Js/qo,No.push(Ts);const _a=new Be(Fa/ao,Ks/ao);_a.z=cr/ao,go.push(_a)}Mi.push(No),gi.push(go)}return[Mi,gi]}(bt,It,Rt,Bt,jt)),at=g.queryGeometry;var bt,It,Rt,Bt,jt,Ut;return function(bt,It,Rt){let Bt=1/0;vc(Rt,It)&&(Bt=I(Rt,It[0]));for(let jt=0;jt<It.length;jt++){const Ut=It[jt],mn=bt[jt];for(let Cn=0;Cn<Ut.length-1;Cn++){const vn=Ut[Cn],Tn=[vn,Ut[Cn+1],mn[Cn+1],mn[Cn],vn];kh(Rt,Tn)&&(Bt=Math.min(Bt,I(Rt,Tn)))}}return Bt!==1/0&&Bt}(Xe[0],Xe[1],at.isPointQuery()?at.screenBounds:at.screenGeometry)}},line:class extends ql{constructor(g){super(g,Mn),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(g){if("line-gradient"===g){const l=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=l._styleExpression&&l._styleExpression.expression instanceof Gs,this.gradientVersion=(this.gradientVersion+1)%Et}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(g,l){super.recalculate(g,l),this.paint._values["line-floorwidth"]=Wn.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,g)}createBucket(g){return new Wt(g)}getProgramIds(){const g=this.paint.get("line-dasharray"),l=this.paint.get("line-pattern").constantOr(1),_=this.paint.get("line-gradient");return[l?"linePattern":g?"lineSDF":_?"lineGradient":"line"]}getProgramConfiguration(g){return new $s(this,g)}queryRadius(g){const l=g,_=Pi(Tl("line-width",this,l),Tl("line-gap-width",this,l)),x=Tl("line-offset",this,l);return _/2+Math.abs(x)+lg(this.paint.get("line-translate"))}queryIntersectsFeature(g,l,_,x,D,F){if(g.queryGeometry.isAboveHorizon)return!1;const B=Jp(g.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),F.angle,g.pixelToTileUnitsFactor),Z=g.pixelToTileUnitsFactor/2*Pi(this.paint.get("line-width").evaluate(l,_),this.paint.get("line-gap-width").evaluate(l,_)),X=this.paint.get("line-offset").evaluate(l,_);return X&&(x=function(re,ce){const de=[],_e=new Be(0,0);for(let Se=0;Se<re.length;Se++){const Re=re[Se],Xe=[];for(let at=0;at<Re.length;at++){const bt=Re[at-1],It=Re[at],Rt=Re[at+1],Bt=0===at?_e:It.sub(bt)._unit()._perp(),jt=at===Re.length-1?_e:Rt.sub(It)._unit()._perp(),Ut=Bt._add(jt)._unit();Ut._mult(1/(Ut.x*jt.x+Ut.y*jt.y)),Xe.push(Ut._mult(ce)._add(It))}de.push(Xe)}return de}(x,X*g.pixelToTileUnitsFactor)),function(re,ce,de){for(let _e=0;_e<ce.length;_e++){const Se=ce[_e];if(re.length>=3)for(let Re=0;Re<Se.length;Re++)if(Wl(re,Se[Re]))return!0;if(L_(re,Se,de))return!0}return!1}(B,x,Z)}isTileClipped(){return!0}},symbol:Ka,background:class extends ql{constructor(g){super(g,Oa)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ql{constructor(g){super(g,iy)}getProgramIds(){return["raster"]}},sky:class extends ql{constructor(g){super(g,_f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(g){"sky-gradient"===g?this._updateColorRamp():"sky-atmosphere-sun"!==g&&"sky-atmosphere-halo-color"!==g&&"sky-atmosphere-color"!==g&&"sky-atmosphere-sun-intensity"!==g||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=cp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(g){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const l=g.style.light.properties.get("position");return this._lightPosition.azimuthal!==l.azimuthal||this._lightPosition.polar!==l.polar}}getCenter(g,l){const _=this.paint.get("sky-type");if("atmosphere"===_){const x=this.paint.get("sky-atmosphere-sun"),D=!x,F=g.style.light,B=F.properties.get("position");return D&&"viewport"===F.properties.get("anchor")&&mi("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),D?ry(B.azimuthal,90-B.polar,l):ry(x[0],90-x[1],l)}if("gradient"===_){const x=this.paint.get("sky-gradient-center");return ry(x[0],90-x[1],l)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(g){this._skyboxInvalidated=!1,this._lightPosition=g.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const g=this.paint.get("sky-type");return"atmosphere"===g?["skyboxCapture","skybox"]:"gradient"===g?["skyboxGradient"]:null}}},{HTMLImageElement:Qv,HTMLCanvasElement:Dg,HTMLVideoElement:Jv,ImageData:Kv,ImageBitmap:lm}=Ve;class yf{constructor(l,_,x,D){this.context=l,this.format=x,this.texture=l.gl.createTexture(),this.update(_,D)}update(l,_,x){const{width:D,height:F}=l,B=!(this.size&&this.size[0]===D&&this.size[1]===F||x),{context:Z}=this,{gl:X}=Z;if(this.useMipmap=Boolean(_&&_.useMipmap),X.bindTexture(X.TEXTURE_2D,this.texture),Z.pixelStoreUnpackFlipY.set(!1),Z.pixelStoreUnpack.set(1),Z.pixelStoreUnpackPremultiplyAlpha.set(this.format===X.RGBA&&(!_||!1!==_.premultiply)),B)this.size=[D,F],l instanceof Qv||l instanceof Dg||l instanceof Jv||l instanceof Kv||lm&&l instanceof lm?X.texImage2D(X.TEXTURE_2D,0,this.format,this.format,X.UNSIGNED_BYTE,l):X.texImage2D(X.TEXTURE_2D,0,this.format,D,F,0,this.format,X.UNSIGNED_BYTE,l.data);else{const{x:re,y:ce}=x||{x:0,y:0};l instanceof Qv||l instanceof Dg||l instanceof Jv||l instanceof Kv||lm&&l instanceof lm?X.texSubImage2D(X.TEXTURE_2D,0,re,ce,X.RGBA,X.UNSIGNED_BYTE,l):X.texSubImage2D(X.TEXTURE_2D,0,re,ce,D,F,X.RGBA,X.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&X.generateMipmap(X.TEXTURE_2D)}bind(l,_,x){const{context:D}=this,{gl:F}=D;F.bindTexture(F.TEXTURE_2D,this.texture),x!==F.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(x=F.LINEAR),l!==this.filter&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,l),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,x||l),this.filter=l),_!==this.wrap&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,_),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,_),this.wrap=_)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class Sd{constructor(l,_){l&&(_?this.setSouthWest(l).setNorthEast(_):4===l.length?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1]))}setNorthEast(l){return this._ne=l instanceof To?new To(l.lng,l.lat):To.convert(l),this}setSouthWest(l){return this._sw=l instanceof To?new To(l.lng,l.lat):To.convert(l),this}extend(l){const _=this._sw,x=this._ne;let D,F;if(l instanceof To)D=l,F=l;else{if(!(l instanceof Sd))return Array.isArray(l)?4===l.length||l.every(Array.isArray)?this.extend(Sd.convert(l)):this.extend(To.convert(l)):this;if(D=l._sw,F=l._ne,!D||!F)return this}return _||x?(_.lng=Math.min(D.lng,_.lng),_.lat=Math.min(D.lat,_.lat),x.lng=Math.max(F.lng,x.lng),x.lat=Math.max(F.lat,x.lat)):(this._sw=new To(D.lng,D.lat),this._ne=new To(F.lng,F.lat)),this}getCenter(){return new To((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new To(this.getWest(),this.getNorth())}getSouthEast(){return new To(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:_,lat:x}=To.convert(l);let D=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(D=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&D}static convert(l){return!l||l instanceof Sd?l:new Sd(l)}}const tl=6371008.8;class To{constructor(l,_){if(isNaN(l)||isNaN(_))throw new Error(`Invalid LngLat object: (${l}, ${_})`);if(this.lng=+l,this.lat=+_,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new To(Ui(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const _=Math.PI/180,x=this.lat*_,D=l.lat*_,F=Math.sin(x)*Math.sin(D)+Math.cos(x)*Math.cos(D)*Math.cos((l.lng-this.lng)*_);return tl*Math.acos(Math.min(F,1))}toBounds(l=0){const _=360*l/40075017,x=_/Math.cos(Math.PI/180*this.lat);return new Sd(new To(this.lng-x,this.lat-_),new To(this.lng+x,this.lat+_))}static convert(l){if(l instanceof To)return l;if(Array.isArray(l)&&(2===l.length||3===l.length))return new To(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&"object"==typeof l&&null!==l)return new To(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const nl=2*Math.PI*tl;function eb(g){return nl*Math.cos(g*Math.PI/180)}function oy(g){return(180+g)/360}function Ig(g){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g*Math.PI/360)))/360}function sy(g,l){return g/eb(l)}function Ql(g){return 360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90}function cm(g,l){return g*eb(Ql(l))}class bp{constructor(l,_,x=0){this.x=+l,this.y=+_,this.z=+x}static fromLngLat(l,_=0){const x=To.convert(l);return new bp(oy(x.lng),Ig(x.lat),sy(_,x.lat))}toLngLat(){return new To(360*this.x-180,Ql(this.y))}toAltitude(){return cm(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/nl*(l=Ql(this.y),1/Math.cos(l*Math.PI/180));var l}}class tb{constructor(l,_){this.width=l,this.height=_,this.nextRow=0,this.image=new Dh({width:l,height:_}),this.positions={},this.uploaded=!1}getDash(l,_){const x=this.getKey(l,_);return this.positions[x]}trim(){const l=this.width,_=this.height=Zt(this.nextRow);this.image.resize({width:l,height:_})}getKey(l,_){return l.join(",")+_}getDashRanges(l,_,x){const D=[];let F=l.length%2==1?-l[l.length-1]*x:0,B=l[0]*x,Z=!0;D.push({left:F,right:B,isDash:Z,zeroLength:0===l[0]});let X=l[0];for(let re=1;re<l.length;re++){Z=!Z;const ce=l[re];F=X*x,X+=ce,B=X*x,D.push({left:F,right:B,isDash:Z,zeroLength:0===ce})}return D}addRoundDash(l,_,x){const D=_/2;for(let F=-x;F<=x;F++){const B=this.width*(this.nextRow+x+F);let Z=0,X=l[Z];for(let re=0;re<this.width;re++){re/X.right>1&&(X=l[++Z]);const ce=Math.abs(re-X.left),de=Math.abs(re-X.right),_e=Math.min(ce,de);let Se;const Re=F/x*(D+1);if(X.isDash){const Xe=D-Math.abs(Re);Se=Math.sqrt(_e*_e+Xe*Xe)}else Se=D-Math.sqrt(_e*_e+Re*Re);this.image.data[B+re]=Math.max(0,Math.min(255,Se+128))}}}addRegularDash(l,_){for(let X=l.length-1;X>=0;--X){const re=l[X],ce=l[X+1];re.zeroLength?l.splice(X,1):ce&&ce.isDash===re.isDash&&(ce.left=re.left,l.splice(X,1))}const x=l[0],D=l[l.length-1];x.isDash===D.isDash&&(x.left=D.left-this.width,D.right=x.right+this.width);const F=this.width*this.nextRow;let B=0,Z=l[B];for(let X=0;X<this.width;X++){X/Z.right>1&&(Z=l[++B]);const re=Math.abs(X-Z.left),ce=Math.abs(X-Z.right),de=Math.min(re,ce);this.image.data[F+X]=Math.max(0,Math.min(255,(Z.isDash?de:-de)+_+128))}}addDash(l,_){const x=this.getKey(l,_);if(this.positions[x])return this.positions[x];const D="round"===_,F=D?7:0,B=2*F+1;if(this.nextRow+B>this.height)return mi("LineAtlas out of space"),null;0===l.length&&l.push(1);let Z=0;for(let ce=0;ce<l.length;ce++)l[ce]<0&&(mi("Negative value is found in line dasharray, replacing values with 0"),l[ce]=0),Z+=l[ce];if(0!==Z){const ce=this.width/Z,de=this.getDashRanges(l,this.width,ce);D?this.addRoundDash(de,ce,F):this.addRegularDash(de,"square"===_?.5*ce:0)}const X=this.nextRow+F;this.nextRow+=B;const re={tl:[X,F],br:[Z,0]};return this.positions[x]=re,re}}qn("LineAtlas",tb);class yE{constructor(l){this._callback=l,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const vf=Ve.performance;function nb(g){const l=g?g.url.toString():void 0;return vf.getEntriesByName(l)}class ib{constructor(){this.tasks={},this.taskQueue=[],$t(["process"],this),this.invoker=new yE(this.process),this.nextId=0}add(l,_){const x=this.nextId++,D=function({type:F,isSymbolTile:B,zoom:Z}){return Z=Z||0,"message"===F?0:"maybePrepare"!==F||B?"parseTile"!==F||B?"parseTile"===F&&B?300-Z:"maybePrepare"===F&&B?400-Z:500:200-Z:100-Z}(_);if(0===D){Hn();try{l()}finally{}return{cancel:()=>{}}}return this.tasks[x]={fn:l,metadata:_,priority:D,id:x},this.taskQueue.push(x),this.invoker.trigger(),{cancel:()=>{delete this.tasks[x]}}}process(){Hn();try{if(this.taskQueue=this.taskQueue.filter(x=>!!this.tasks[x]),!this.taskQueue.length)return;const l=this.pick();if(null===l)return;const _=this.tasks[l];if(delete this.tasks[l],this.taskQueue.length&&this.invoker.trigger(),!_)return;_.fn()}finally{}}pick(){let l=null,_=1/0;for(let D=0;D<this.taskQueue.length;D++){const F=this.tasks[this.taskQueue[D]];F.priority<_&&(_=F.priority,l=D)}if(null===l)return null;const x=this.taskQueue[l];return this.taskQueue.splice(l,1),x}remove(){this.invoker.remove()}}function rb(g,l,_){var x=2*Math.PI*6378137/256/Math.pow(2,_);return[g*x-2*Math.PI*6378137/2,l*x-2*Math.PI*6378137/2]}class Pg{constructor(l,_,x){this.z=l,this.x=_,this.y=x,this.key=zh(0,l,l,_,x)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,_){const x=(F=this.y,B=this.z,Z=rb(256*(D=this.x),256*(F=Math.pow(2,B)-F-1),B),X=rb(256*(D+1),256*(F+1),B),Z[0]+","+Z[1]+","+X[0]+","+X[1]);var D,F,B,Z,X;const re=function(ce,de,_e){let Se,Re="";for(let Xe=ce;Xe>0;Xe--)Se=1<<Xe-1,Re+=(de&Se?1:0)+(_e&Se?2:0);return Re}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===_?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",re).replace("{bbox-epsg-3857}",x)}getTilePoint(l){const _=Math.pow(2,this.z);return new Be((l.x*_-this.x)*Er,(l.y*_-this.y)*Er)}getTileVec3(l){const _=Math.pow(2,this.z);return qa((l.x*_-this.x)*Er,(l.y*_-this.y)*Er,cm(l.z,l.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class ob{constructor(l,_){this.wrap=l,this.canonical=_,this.key=zh(l,_.z,_.z,_.x,_.y)}}class ma{constructor(l,_,x,D,F){this.overscaledZ=l,this.wrap=_,this.canonical=new Pg(x,+D,+F),this.key=0===_&&l===x?this.canonical.key:zh(_,l,x,D,F)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){const _=this.canonical.z-l;return l>this.canonical.z?new ma(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ma(l,this.wrap,l,this.canonical.x>>_,this.canonical.y>>_)}calculateScaledKey(l,_=!0){if(this.overscaledZ===l&&_)return this.key;if(l>this.canonical.z)return zh(this.wrap*+_,l,this.canonical.z,this.canonical.x,this.canonical.y);{const x=this.canonical.z-l;return zh(this.wrap*+_,l,l,this.canonical.x>>x,this.canonical.y>>x)}}isChildOf(l){if(l.wrap!==this.wrap)return!1;const _=this.canonical.z-l.canonical.z;return 0===l.overscaledZ||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>_&&l.canonical.y===this.canonical.y>>_}children(l){if(this.overscaledZ>=l)return[new ma(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const _=this.canonical.z+1,x=2*this.canonical.x,D=2*this.canonical.y;return[new ma(_,this.wrap,_,x,D),new ma(_,this.wrap,_,x+1,D),new ma(_,this.wrap,_,x,D+1),new ma(_,this.wrap,_,x+1,D+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new ma(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new ma(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ob(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new bp(l.x-this.wrap,l.y))}getTileVec3(l){return this.canonical.getTileVec3(new bp(l.x-this.wrap,l.y,l.z))}}function zh(g,l,_,x,D){const F=1<<Math.min(_,22);let B=F*(D%F)+x%F;return g&&_<22&&(B+=F*F*((g<0?-2*g-1:2*g)%(1<<2*(22-_)))),16*(32*B+_)+(l-_)}qn("CanonicalTileID",Pg),qn("OverscaledTileID",ma,{omit:["projMatrix"]});class um{constructor(l){this._stringToNumber={},this._numberToString=[];for(let _=0;_<l.length;_++){const x=l[_];this._stringToNumber[x]=_,this._numberToString[_]=x}}encode(l){return this._stringToNumber[l]}decode(l){return this._numberToString[l]}}class ay{constructor(l,_,x,D,F){this.type="Feature",this._vectorTileFeature=l,l._z=_,l._x=x,l._y=D,this.properties=l.properties,this.id=F}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const _ in this)"_geometry"!==_&&"_vectorTileFeature"!==_&&(l[_]=this[_]);return l}}var sb=An([{name:"a_pos",type:"Int16",components:2}]);class ly{constructor(l,_,x){this.tileID=l,this.uid=tr(),this.uses=0,this.tileSize=_,this.tileZoom=x,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const _=l+this.timeAdded;_<Fr.now()||this.fadeEndTime&&_<this.fadeEndTime||(this.fadeEndTime=_)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(l,_,x){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(D,F){const B={};if(!F)return B;for(const Z of D){const X=Z.layerIds.map(re=>F.getLayer(re)).filter(Boolean);if(0!==X.length){Z.layers=X,Z.stateDependentLayerIds&&(Z.stateDependentLayers=Z.stateDependentLayerIds.map(re=>X.filter(ce=>ce.id===re)[0]));for(const re of X)B[re.id]=Z}}return B}(l.buckets,_.style),this.hasSymbolBuckets=!1;for(const D in this.buckets){const F=this.buckets[D];if(F instanceof vp){if(this.hasSymbolBuckets=!0,!x)break;F.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const D in this.buckets){const F=this.buckets[D];if(F instanceof vp&&F.hasRTLText){this.hasRTLText=!0,Ae.isLoading()||Ae.isLoaded()||"deferred"!==me()||Ce();break}}this.queryPadding=0;for(const D in this.buckets){const F=this.buckets[D];this.queryPadding=Math.max(this.queryPadding,_.style.getLayer(D).queryRadius(F))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas)}else this.collisionBoxArray=new Wc}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const x in this.buckets){const D=this.buckets[x];D.uploadPending()&&D.upload(l)}const _=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new yf(l,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new yf(l,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new yf(l,this.lineAtlas.image,_.ALPHA),this.lineAtlas.uploaded=!0)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,_,x,D,F,B,Z,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:D,pixelPosMatrix:Z,transform:B,params:F},l,_,x):{}}querySourceFeatures(l,_){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const D=x.loadVTLayers(),F=_?_.sourceLayer:"",B=D._geojsonTileLayer||D[F];if(!B)return;const Z=sd(_&&_.filter),{z:X,x:re,y:ce}=this.tileID.canonical,de={z:X,x:re,y:ce};for(let _e=0;_e<B.length;_e++){const Se=B.feature(_e);if(Z.needGeometry){const at=dd(Se,!0);if(!Z.filter(new Pe(this.tileID.overscaledZ),at,this.tileID.canonical))continue}else if(!Z.filter(new Pe(this.tileID.overscaledZ),Se))continue;const Re=x.getId(Se,F),Xe=new ay(Se,X,re,ce,Re);Xe.tile=de,l.push(Xe)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const _=this.expirationTime;if(l.cacheControl){const x=jn(l.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const x=Date.now();let D=!1;if(this.expirationTime>x)D=!1;else if(_)if(this.expirationTime<_)D=!0;else{const F=this.expirationTime-_;F?this.expirationTime=x+Math.max(F,3e4):D=!0}else D=!0;D?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(l,_){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(l).length)return;const x=this.latestFeatureIndex.loadVTLayers();for(const D in this.buckets){if(!_.style.hasLayer(D))continue;const F=this.buckets[D],B=F.layers[0].sourceLayer||"_geojsonTileLayer",Z=x[B],X=l[B];if(!Z||!X||0===Object.keys(X).length)continue;F.update(X,Z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const re=_&&_.style&&_.style.getLayer(D);re&&(this.queryPadding=Math.max(this.queryPadding,re.queryRadius(F)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Fr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=Fr.now()+l}setDependencies(l,_){const x={};for(const D of _)x[D]=!0;this.dependencies[l]=x}hasDependency(l,_){for(const x of l){const D=this.dependencies[x];if(D)for(const F of _)if(D[F])return!0}return!1}clearQueryDebugViz(){}}class cy{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,_,x){const D=String(_);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][D]=this.stateChanges[l][D]||{},Di(this.stateChanges[l][D],x),null===this.deletedStates[l]){this.deletedStates[l]={};for(const F in this.state[l])F!==D&&(this.deletedStates[l][F]=null)}else if(this.deletedStates[l]&&null===this.deletedStates[l][D]){this.deletedStates[l][D]={};for(const F in this.state[l][D])x[F]||(this.deletedStates[l][D][F]=null)}else for(const F in x)this.deletedStates[l]&&this.deletedStates[l][D]&&null===this.deletedStates[l][D][F]&&delete this.deletedStates[l][D][F]}removeFeatureState(l,_,x){if(null===this.deletedStates[l])return;const D=String(_);if(this.deletedStates[l]=this.deletedStates[l]||{},x&&void 0!==_)null!==this.deletedStates[l][D]&&(this.deletedStates[l][D]=this.deletedStates[l][D]||{},this.deletedStates[l][D][x]=null);else if(void 0!==_)if(this.stateChanges[l]&&this.stateChanges[l][D])for(x in this.deletedStates[l][D]={},this.stateChanges[l][D])this.deletedStates[l][D][x]=null;else this.deletedStates[l][D]=null;else this.deletedStates[l]=null}getState(l,_){const x=String(_),D=Di({},(this.state[l]||{})[x],(this.stateChanges[l]||{})[x]);if(null===this.deletedStates[l])return{};if(this.deletedStates[l]){const F=this.deletedStates[l][_];if(null===F)return{};for(const B in F)delete D[B]}return D}initializeTileState(l,_){l.setFeatureState(this.state,_)}coalesceChanges(l,_){const x={};for(const D in this.stateChanges){this.state[D]=this.state[D]||{};const F={};for(const B in this.stateChanges[D])this.state[D][B]||(this.state[D][B]={}),Di(this.state[D][B],this.stateChanges[D][B]),F[B]=this.state[D][B];x[D]=F}for(const D in this.deletedStates){this.state[D]=this.state[D]||{};const F={};if(null===this.deletedStates[D])for(const B in this.state[D])F[B]={},this.state[D][B]={};else for(const B in this.deletedStates[D]){if(null===this.deletedStates[D][B])this.state[D][B]={};else for(const Z of Object.keys(this.deletedStates[D][B]))delete this.state[D][B][Z];F[B]=this.state[D][B]}x[D]=x[D]||{},Di(x[D],F)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(x).length)for(const D in l)l[D].setFeatureState(x,_)}}class ab{constructor(l){this.size=l,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(l,_){const x=this.toIdx(l,_);return{min:this.minimums[x],max:this.maximums[x]}}isLeaf(l,_){return this.leaves[this.toIdx(l,_)]}toIdx(l,_){return _*this.size+l}}function qx(g,l,_,x){let D=0,F=Number.MAX_VALUE;for(let B=0;B<3;B++)if(Math.abs(x[B])<1e-15){if(_[B]<g[B]||_[B]>l[B])return null}else{const Z=1/x[B];let X=(g[B]-_[B])*Z,re=(l[B]-_[B])*Z;if(X>re){const ce=X;X=re,re=ce}if(X>D&&(D=X),re<F&&(F=re),D>F)return null}return D}function uy(g,l,_,x,D,F,B,Z,X,re,ce){const de=x-g,_e=D-l,Se=F-_,Re=B-g,Xe=Z-l,at=X-_,bt=ce[1]*at-ce[2]*Xe,It=ce[2]*Re-ce[0]*at,Rt=ce[0]*Xe-ce[1]*Re,Bt=de*bt+_e*It+Se*Rt;if(Math.abs(Bt)<1e-15)return null;const jt=1/Bt,Ut=re[0]-g,mn=re[1]-l,Cn=re[2]-_,vn=(Ut*bt+mn*It+Cn*Rt)*jt;if(vn<0||vn>1)return null;const Tn=mn*Se-Cn*_e,ln=Cn*de-Ut*Se,pn=Ut*_e-mn*de,In=(ce[0]*Tn+ce[1]*ln+ce[2]*pn)*jt;return In<0||vn+In>1?null:(Re*Tn+Xe*ln+at*pn)*jt}function il(g,l,_){return(g-l)/(_-l)}function hm(g,l,_,x,D,F,B,Z,X){const re=1<<_,ce=F-x,de=B-D,_e=(g+1)/re*ce+x,Se=(l+0)/re*de+D,Re=(l+1)/re*de+D;Z[0]=(g+0)/re*ce+x,Z[1]=Se,X[0]=_e,X[1]=Re}class lb{constructor(l){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=l,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const _=function(F){const B=Math.ceil(Math.log2(F.dim/8)),Z=[];let X=Math.ceil(Math.pow(2,B));const re=1/X,ce=(Se,Re,Xe,at,bt)=>{const It=at?1:0,Rt=(Se+1)*Xe-It,Bt=Re*Xe,jt=(Re+1)*Xe-It;bt[0]=Se*Xe,bt[1]=Bt,bt[2]=Rt,bt[3]=jt};let de=new ab(X);const _e=[];for(let Se=0;Se<X*X;Se++){ce(Se%X,Math.floor(Se/X),re,!1,_e);const Re=Ed(_e[0],_e[1],F),Xe=Ed(_e[2],_e[1],F),at=Ed(_e[2],_e[3],F),bt=Ed(_e[0],_e[3],F);de.minimums.push(Math.min(Re,Xe,at,bt)),de.maximums.push(Math.max(Re,Xe,at,bt)),de.leaves.push(1)}for(Z.push(de),X/=2;X>=1;X/=2){const Se=Z[Z.length-1];de=new ab(X);for(let Re=0;Re<X*X;Re++){ce(Re%X,Math.floor(Re/X),2,!0,_e);const Xe=Se.getElevation(_e[0],_e[1]),at=Se.getElevation(_e[2],_e[1]),bt=Se.getElevation(_e[2],_e[3]),It=Se.getElevation(_e[0],_e[3]),Rt=Se.isLeaf(_e[0],_e[1]),Bt=Se.isLeaf(_e[2],_e[1]),jt=Se.isLeaf(_e[2],_e[3]),Ut=Se.isLeaf(_e[0],_e[3]),mn=Math.min(Xe.min,at.min,bt.min,It.min),Cn=Math.max(Xe.max,at.max,bt.max,It.max),vn=Rt&&Bt&&jt&&Ut;de.maximums.push(Cn),de.minimums.push(mn),de.leaves.push(Cn-mn<=5&&vn?1:0)}Z.push(de)}return Z}(this.dem),x=_.length-1,D=_[x];this._addNode(D.minimums[0],D.maximums[0],D.leaves[0]),this._construct(_,0,0,x,0)}raycastRoot(l,_,x,D,F,B,Z=1){return qx([l,_,-100],[x,D,this.maximums[0]*Z],F,B)}raycast(l,_,x,D,F,B,Z=1){if(!this.nodeCount)return null;const X=this.raycastRoot(l,_,x,D,F,B,Z);if(null==X)return null;const re=[],ce=[],de=[],_e=[],Se=[{idx:0,t:X,nodex:0,nodey:0,depth:0}];for(;Se.length>0;){const{idx:Re,t:Xe,nodex:at,nodey:bt,depth:It}=Se.pop();if(this.leaves[Re]){hm(at,bt,It,l,_,x,D,de,_e);const Bt=1<<It,jt=(at+0)/Bt,Ut=(at+1)/Bt,mn=(bt+0)/Bt,Cn=(bt+1)/Bt,vn=Ed(jt,mn,this.dem)*Z,Tn=Ed(Ut,mn,this.dem)*Z,ln=Ed(Ut,Cn,this.dem)*Z,pn=Ed(jt,Cn,this.dem)*Z,In=uy(de[0],de[1],vn,_e[0],de[1],Tn,_e[0],_e[1],ln,F,B),on=uy(_e[0],_e[1],ln,de[0],_e[1],pn,de[0],de[1],vn,F,B),Mi=Math.min(null!==In?In:Number.MAX_VALUE,null!==on?on:Number.MAX_VALUE);if(Mi!==Number.MAX_VALUE)return Mi;{const gi=zu([],F,B,Xe);if(bf(vn,Tn,pn,ln,il(gi[0],de[0],_e[0]),il(gi[1],de[1],_e[1]))>=gi[2])return Xe}continue}let Rt=0;for(let Bt=0;Bt<this._siblingOffset.length;Bt++){hm((at<<1)+this._siblingOffset[Bt][0],(bt<<1)+this._siblingOffset[Bt][1],It+1,l,_,x,D,de,_e),de[2]=-100,_e[2]=this.maximums[this.childOffsets[Re]+Bt]*Z;const jt=qx(de,_e,F,B);if(null!=jt){const Ut=jt;re[Bt]=Ut;let mn=!1;for(let Cn=0;Cn<Rt&&!mn;Cn++)Ut>=re[ce[Cn]]&&(ce.splice(Cn,0,Bt),mn=!0);mn||(ce[Rt]=Bt),Rt++}}for(let Bt=0;Bt<Rt;Bt++){const jt=ce[Bt];Se.push({idx:this.childOffsets[Re]+jt,t:re[jt],nodex:(at<<1)+this._siblingOffset[jt][0],nodey:(bt<<1)+this._siblingOffset[jt][1],depth:It+1})}}return null}_addNode(l,_,x){return this.minimums.push(l),this.maximums.push(_),this.leaves.push(x),this.childOffsets.push(0),this.nodeCount++}_construct(l,_,x,D,F){if(1===l[D].isLeaf(_,x))return;this.childOffsets[F]||(this.childOffsets[F]=this.nodeCount);const B=D-1,Z=l[B];let X,re=0;for(let ce=0;ce<this._siblingOffset.length;ce++){const de=2*_+this._siblingOffset[ce][0],_e=2*x+this._siblingOffset[ce][1],Se=Z.getElevation(de,_e),Re=Z.isLeaf(de,_e),Xe=this._addNode(Se.min,Se.max,Re);Re&&(re|=1<<ce),X||(X=Xe)}for(let ce=0;ce<this._siblingOffset.length;ce++)re&1<<ce||this._construct(l,2*_+this._siblingOffset[ce][0],2*x+this._siblingOffset[ce][1],B,X+ce)}}function bf(g,l,_,x,D,F){return ui(ui(g,_,F),ui(l,x,F),D)}function Ed(g,l,_){const x=_.dim,D=Mt(g*x-.5,0,x-1),F=Mt(l*x-.5,0,x-1),B=Math.floor(D),Z=Math.floor(F),X=Math.min(B+1,x-1),re=Math.min(Z+1,x-1);return bf(_.get(B,Z),_.get(X,Z),_.get(B,re),_.get(X,re),D-B,F-Z)}const cb={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class xp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(l,_,x,D=!1,F=!1){if(this.uid=l,_.height!==_.width)throw new RangeError("DEM tiles must be square");if(x&&"mapbox"!==x&&"terrarium"!==x)return mi(`"${x}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=_.height;const B=this.dim=_.height-2;if(this.data=new Uint32Array(_.data.buffer),this.encoding=x||"mapbox",this.borderReady=D,!D){for(let Z=0;Z<B;Z++)this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z)],this.data[this._idx(B,Z)]=this.data[this._idx(B-1,Z)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z,0)],this.data[this._idx(Z,B)]=this.data[this._idx(Z,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],F&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new lb(this)}get(l,_,x=!1){const D=new Uint8Array(this.data.buffer);x&&(l=Mt(l,-1,this.dim),_=Mt(_,-1,this.dim));const F=4*this._idx(l,_);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(D[F],D[F+1],D[F+2])}static getUnpackVector(l){return cb[l]}get unpackVector(){return cb[this.encoding]}_idx(l,_){if(l<-1||l>=this.dim+1||_<-1||_>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(_+1)*this.stride+(l+1)}_unpackMapbox(l,_,x){return(256*l*256+256*_+x)/10-1e4}_unpackTerrarium(l,_,x){return 256*l+_+x/256-32768}static pack(l,_){const x=[0,0,0,0],D=xp.getUnpackVector(_);let F=Math.floor((l+D[3])/D[2]);return x[2]=F%256,F=Math.floor(F/256),x[1]=F%256,F=Math.floor(F/256),x[0]=F,x}getPixels(){return new Za({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,_,x){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let D=_*this.dim,F=_*this.dim+this.dim,B=x*this.dim,Z=x*this.dim+this.dim;switch(_){case-1:D=F-1;break;case 1:F=D+1}switch(x){case-1:B=Z-1;break;case 1:Z=B+1}const X=-_*this.dim,re=-x*this.dim;for(let ce=B;ce<Z;ce++)for(let de=D;de<F;de++)this.data[this._idx(de,ce)]=l.data[this._idx(de+X,ce+re)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}qn("DEMData",xp),qn("DemMinMaxQuadTree",lb,{omit:["dem"]});class su{constructor(l,_){this.max=l,this.onRemove=_,this.reset()}reset(){for(const l in this.data)for(const _ of this.data[l])_.timeout&&clearTimeout(_.timeout),this.onRemove(_.value);return this.data={},this.order=[],this}add(l,_,x){const D=l.wrapped().key;void 0===this.data[D]&&(this.data[D]=[]);const F={value:_,timeout:void 0};if(void 0!==x&&(F.timeout=setTimeout(()=>{this.remove(l,F)},x)),this.data[D].push(F),this.order.push(D),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const _=this.data[l].shift();return _.timeout&&clearTimeout(_.timeout),0===this.data[l].length&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),_.value}getByKey(l){const _=this.data[l];return _?_[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,_){if(!this.has(l))return this;const x=l.wrapped().key,D=void 0===_?0:this.data[x].indexOf(_),F=this.data[x][D];return this.data[x].splice(D,1),F.timeout&&clearTimeout(F.timeout),0===this.data[x].length&&delete this.data[x],this.onRemove(F.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}filter(l){const _=[];for(const x in this.data)for(const D of this.data[x])l(D.value)||_.push(D);for(const x of _)this.remove(x.value.tileID,x)}}class Yu{constructor(l,_,x){this.func=l,this.mask=_,this.range=x}}Yu.ReadOnly=!1,Yu.ReadWrite=!0,Yu.disabled=new Yu(519,Yu.ReadOnly,[0,1]);class Og{constructor(l,_,x,D,F,B){this.test=l,this.ref=_,this.mask=x,this.fail=D,this.depthFail=F,this.pass=B}}Og.disabled=new Og({func:519,mask:0},0,0,7680,7680,7680);class qu{constructor(l,_,x){this.blendFunction=l,this.blendColor=_,this.mask=x}}qu.Replace=[1,0],qu.disabled=new qu(qu.Replace,hn.transparent,[!1,!1,!1,!1]),qu.unblended=new qu(qu.Replace,hn.transparent,[!0,!0,!0,!0]),qu.alphaBlended=new qu([1,771],hn.transparent,[!0,!0,!0,!0]);class Il{constructor(l,_,x){this.enable=l,this.mode=_,this.frontFace=x}}Il.disabled=new Il(!1,1029,2305),Il.backCCW=new Il(!0,1029,2305),Il.backCW=new Il(!0,1029,2304),Il.frontCW=new Il(!0,1028,2304),Il.frontCCW=new Il(!0,1028,2305);class au extends p{constructor(l,_,x){super(),this.id=l,this._onlySymbols=x,_.on("data",D=>{"source"===D.dataType&&"metadata"===D.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===D.dataType&&"content"===D.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),_.on("error",()=>{this._sourceErrored=!0}),this._source=_,this._tiles={},this._cache=new su(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new cy}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const _=this._tiles[l];if("loaded"!==_.state&&"errored"!==_.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,_){return l.isSymbolTile=this._onlySymbols,this._source.loadTile(l,_)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l,()=>{})}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const _ in this._tiles){const x=this._tiles[_];x.upload(l),x.prepare(this.map.style.imageManager)}}getIds(){return Vn(this._tiles).map(l=>l.tileID).sort(ub).map(l=>l.key)}getRenderableIds(l){const _=[];for(const x in this._tiles)this._isIdRenderable(+x,l)&&_.push(this._tiles[x]);return l?_.sort((x,D)=>{const F=x.tileID,B=D.tileID,Z=new Be(F.canonical.x,F.canonical.y)._rotate(this.transform.angle),X=new Be(B.canonical.x,B.canonical.y)._rotate(this.transform.angle);return F.overscaledZ-B.overscaledZ||X.y-Z.y||X.x-Z.x}).map(x=>x.tileID.key):_.map(x=>x.tileID).sort(ub).map(x=>x.key)}hasRenderableParent(l){const _=this.findLoadedParent(l,0);return!!_&&this._isIdRenderable(_.tileID.key)}_isIdRenderable(l,_){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(_||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)"errored"!==this._tiles[l].state&&this._reloadTile(+l,"reloading")}}_reloadTile(l,_){const x=this._tiles[l];x&&("loading"!==x.state&&(x.state=_),this._loadTile(x,this._tileLoaded.bind(this,x,l,_)))}_tileLoaded(l,_,x,D){if(D)return l.state="errored",void(404!==D.status?this._source.fire(new d(D,{tile:l})):this.update(this.transform));l.timeAdded=Fr.now(),"expired"===x&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(_,l),"raster-dem"===this.getSource().type&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),this._source.fire(new ve("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id}))}_backfillDEM(l){const _=this.getRenderableIds();for(let D=0;D<_.length;D++){const F=_[D];if(l.neighboringTiles&&l.neighboringTiles[F]){const B=this.getTileByID(F);x(l,B),x(B,l)}}function x(D,F){if(!D.dem||D.dem.borderReady)return;D.needsHillshadePrepare=!0,D.needsDEMTextureUpload=!0;let B=F.tileID.canonical.x-D.tileID.canonical.x;const Z=F.tileID.canonical.y-D.tileID.canonical.y,X=Math.pow(2,D.tileID.canonical.z),re=F.tileID.key;0===B&&0===Z||Math.abs(Z)>1||(Math.abs(B)>1&&(1===Math.abs(B+X)?B+=X:1===Math.abs(B-X)&&(B-=X)),F.dem&&D.dem&&(D.dem.backfillBorder(F.dem,B,Z),D.neighboringTiles&&D.neighboringTiles[re]&&(D.neighboringTiles[re].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,_,x,D){for(const F in this._tiles){let B=this._tiles[F];if(D[F]||!B.hasData()||B.tileID.overscaledZ<=_||B.tileID.overscaledZ>x)continue;let Z=B.tileID;for(;B&&B.tileID.overscaledZ>_+1;){const re=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[re.key],B&&B.hasData()&&(Z=re)}let X=Z;for(;X.overscaledZ>_;)if(X=X.scaledTo(X.overscaledZ-1),l[X.key]){D[Z.key]=Z;break}}}findLoadedParent(l,_){if(l.key in this._loadedParentTiles){const x=this._loadedParentTiles[l.key];return x&&x.tileID.overscaledZ>=_?x:null}for(let x=l.overscaledZ-1;x>=_;x--){const D=l.scaledTo(x),F=this._getLoadedTile(D);if(F)return F}}_getLoadedTile(l){const _=this._tiles[l.key];return _&&_.hasData()?_:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,_){_=_||this._source.tileSize;const x=Math.ceil(l.width/_)+1,D=Math.ceil(l.height/_)+1,F=Math.floor(x*D*5),B="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,F):F;this._cache.setMaxSize(B)}handleWrapJump(l){const _=Math.round((l-(void 0===this._prevLng?l:this._prevLng))/360);if(this._prevLng=l,_){const x={};for(const D in this._tiles){const F=this._tiles[D];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+_),x[F.tileID.key]=F}this._tiles=x;for(const D in this._timers)clearTimeout(this._timers[D]),delete this._timers[D];for(const D in this._tiles)this._setTileReloadTimer(+D,this._tiles[D])}}update(l,_,x){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!x)return;let D;this.updateCacheSize(l,_),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?D=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(Z=>new ma(Z.canonical.z,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y)):(D=l.coveringTiles({tileSize:_||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!x,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(D=D.filter(Z=>this._source.hasTile(Z)))):D=[];const F=this._updateRetainedTiles(D);if(dm(this._source.type)&&0!==D.length){const Z={},X={},re=Object.keys(F);for(const de of re){const _e=F[de],Se=this._tiles[de];if(!Se||Se.fadeEndTime&&Se.fadeEndTime<=Fr.now())continue;const Re=this.findLoadedParent(_e,Math.max(_e.overscaledZ-au.maxOverzooming,this._source.minzoom));Re&&(this._addTile(Re.tileID),Z[Re.tileID.key]=Re.tileID),X[de]=_e}const ce=D[D.length-1].overscaledZ;for(const de in this._tiles){const _e=this._tiles[de];if(F[de]||!_e.hasData())continue;let Se=_e.tileID;for(;Se.overscaledZ>ce;){Se=Se.scaledTo(Se.overscaledZ-1);const Re=this._tiles[Se.key];if(Re&&Re.hasData()&&X[Se.key]){F[de]=_e.tileID;break}}}for(const de in Z)F[de]||(this._coveredTiles[de]=!0,F[de]=Z[de])}for(const Z in F)this._tiles[Z].clearFadeHold();const B=function(Z,X){const re=[];for(const ce in Z)ce in X||re.push(ce);return re}(this._tiles,F);for(const Z of B){const X=this._tiles[Z];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(+Z)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const _={};if(0===l.length)return _;const x={},D=l[l.length-1].overscaledZ,F=l[0].overscaledZ,B=Math.max(F-au.maxOverzooming,this._source.minzoom),Z=Math.max(F+au.maxUnderzooming,this._source.minzoom),X={};for(const re of l){const ce=this._addTile(re);_[re.key]=re,ce.hasData()||D<this._source.maxzoom&&(X[re.key]=re)}this._retainLoadedChildren(X,D,Z,_);for(const re of l){let ce=this._tiles[re.key];if(ce.hasData())continue;if(re.canonical.z>=this._source.maxzoom){const _e=re.children(this._source.maxzoom)[0],Se=this.getTile(_e);if(Se&&Se.hasData()){_[_e.key]=_e;continue}}else{const _e=re.children(this._source.maxzoom);if(_[_e[0].key]&&_[_e[1].key]&&_[_e[2].key]&&_[_e[3].key])continue}let de=ce.wasRequested();for(let _e=re.overscaledZ-1;_e>=B;--_e){const Se=re.scaledTo(_e);if(x[Se.key]||(x[Se.key]=!0,ce=this.getTile(Se),!ce&&de&&(ce=this._addTile(Se)),ce&&(_[Se.key]=Se,de=ce.wasRequested(),ce.hasData())))break}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const _=[];let x,D=this._tiles[l].tileID;for(;D.overscaledZ>0;){if(D.key in this._loadedParentTiles){x=this._loadedParentTiles[D.key];break}_.push(D.key);const F=D.scaledTo(D.overscaledZ-1);if(x=this._getLoadedTile(F),x)break;D=F}for(const F of _)this._loadedParentTiles[F]=x}}_addTile(l){let _=this._tiles[l.key];if(_)return _;_=this._cache.getAndRemove(l),_&&(this._setTileReloadTimer(l.key,_),_.tileID=l,this._state.initializeTileState(_,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,_)));const x=Boolean(_);return x||(_=new ly(l,this._source.tileSize*l.overscaleFactor(),this.transform.tileZoom),this._loadTile(_,this._tileLoaded.bind(this,_,l.key,_.state))),_?(_.uses++,this._tiles[l.key]=_,x||this._source.fire(new ve("dataloading",{tile:_,coord:_.tileID,dataType:"source"})),_):null}_setTileReloadTimer(l,_){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const x=_.getExpiryTimeout();x&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},x))}_removeTile(l){const _=this._tiles[l];_&&(_.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),_.uses>0||(_.hasData()&&"reloading"!==_.state?this._cache.add(_.tileID,_,_.getExpiryTimeout()):(_.aborted=!0,this._abortTile(_),this._unloadTile(_))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._cache.reset()}tilesIn(l,_,x){const D=[],F=this.transform;if(!F)return D;for(const B in this._tiles){const Z=this._tiles[B];if(x&&Z.clearQueryDebugViz(),Z.holdingForFade())continue;const X=l.containsTile(Z,F,_);X&&D.push(X)}return D}getVisibleCoordinates(l){const _=this.getRenderableIds(l).map(x=>this._tiles[x].tileID);for(const x of _)x.projMatrix=this.transform.calculateProjMatrix(x.toUnwrapped());return _}hasTransition(){if(this._source.hasTransition())return!0;if(dm(this._source.type))for(const l in this._tiles){const _=this._tiles[l];if(void 0!==_.fadeEndTime&&_.fadeEndTime>=Fr.now())return!0}return!1}setFeatureState(l,_,x){this._state.updateState(l=l||"_geojsonTileLayer",_,x)}removeFeatureState(l,_,x){this._state.removeFeatureState(l=l||"_geojsonTileLayer",_,x)}getFeatureState(l,_){return this._state.getState(l=l||"_geojsonTileLayer",_)}setDependencies(l,_,x){const D=this._tiles[l];D&&D.setDependencies(_,x)}reloadTilesForDependencies(l,_){for(const x in this._tiles)this._tiles[x].hasDependency(l,_)&&this._reloadTile(+x,"reloading");this._cache.filter(x=>!x.hasDependency(l,_))}}function ub(g,l){const _=Math.abs(2*g.wrap)-+(g.wrap<0),x=Math.abs(2*l.wrap)-+(l.wrap<0);return g.overscaledZ-l.overscaledZ||x-_||l.canonical.y-g.canonical.y||l.canonical.x-g.canonical.x}function dm(g){return"raster"===g||"image"===g||"video"===g}au.maxOverzooming=10,au.maxUnderzooming=3;class pm{constructor(l,_,x){this._demTile=l,this._dem=this._demTile.dem,this._scale=_,this._offset=x}static create(l,_,x){const D=x||l.findDEMTileFor(_);if(!D||!D.dem)return;const F=D.dem,B=D.tileID,Z=1<<_.canonical.z-B.canonical.z;return new pm(D,D.tileSize/Er/Z,[(_.canonical.x/Z-B.canonical.x)*F.dim,(_.canonical.y/Z-B.canonical.y)*F.dim])}tileCoordToPixel(l,_){const x=_*this._scale+this._offset[1],D=Math.floor(l*this._scale+this._offset[0]),F=Math.floor(x);return new Be(D,F)}getElevationAt(l,_,x,D){const F=l*this._scale+this._offset[0],B=_*this._scale+this._offset[1],Z=Math.floor(F),X=Math.floor(B),re=this._dem;return D=!!D,x?ui(ui(re.get(Z,X,D),re.get(Z,X+1,D),B-X),ui(re.get(Z+1,X,D),re.get(Z+1,X+1,D),B-X),F-Z):re.get(Z,X,D)}getElevationAtPixel(l,_,x){return this._dem.get(l,_,!!x)}getMeterToDEM(l){return(1<<this._demTile.tileID.canonical.z)*sy(1,l)*this._dem.stride}}class Zx{constructor(l,_){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Hl(Er,16,0),this.featureIndexArray=new I_,this.promoteId=_}insert(l,_,x,D,F,B=0){const Z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,D,F,B);const X=this.grid;for(let re=0;re<_.length;re++){const ce=_[re],de=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<ce.length;_e++){const Se=ce[_e];de[0]=Math.min(de[0],Se.x),de[1]=Math.min(de[1],Se.y),de[2]=Math.max(de[2],Se.x),de[3]=Math.max(de[3],Se.y)}de[0]<Er&&de[1]<Er&&de[2]>=0&&de[3]>=0&&X.insert(Z,de[0],de[1],de[2],de[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Lh.VectorTile(new im(this.rawTileData)).layers,this.sourceLayerCoder=new um(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,_,x,D){this.loadVTLayers();const F=l.params||{},B=sd(F.filter),Z=l.tileResult,X=l.transform,re=Z.bufferedTilespaceBounds,ce=this.grid.query(re.min.x,re.min.y,re.max.x,re.max.y,(Re,Xe,at,bt)=>Qp(Z.bufferedTilespaceGeometry,Re,Xe,at,bt));ce.sort(hb);let de=null;X.elevation&&ce.length>0&&(de=pm.create(X.elevation,this.tileID));const _e={};let Se;for(let Re=0;Re<ce.length;Re++){const Xe=ce[Re];if(Xe===Se)continue;Se=Xe;const at=this.featureIndexArray.get(Xe);let bt=null;this.loadMatchingFeature(_e,at,B,F.layers,F.availableImages,_,x,D,(It,Rt,Bt,jt=0)=>(bt||(bt=hd(It)),Rt.queryIntersectsFeature(Z,It,Bt,bt,this.z,l.transform,l.pixelPosMatrix,de,jt)))}return _e}loadMatchingFeature(l,_,x,D,F,B,Z,X,re){const{featureIndex:ce,bucketIndex:de,sourceLayerIndex:_e,layoutVertexArrayOffset:Se}=_,Re=this.bucketLayerIDs[de];if(D&&!function(It,Rt){for(let Bt=0;Bt<It.length;Bt++)if(Rt.indexOf(It[Bt])>=0)return!0;return!1}(D,Re))return;const Xe=this.sourceLayerCoder.decode(_e),at=this.vtLayers[Xe].feature(ce);if(x.needGeometry){const It=dd(at,!0);if(!x.filter(new Pe(this.tileID.overscaledZ),It,this.tileID.canonical))return}else if(!x.filter(new Pe(this.tileID.overscaledZ),at))return;const bt=this.getId(at,Xe);for(let It=0;It<Re.length;It++){const Rt=Re[It];if(D&&D.indexOf(Rt)<0)continue;const Bt=B[Rt];if(!Bt)continue;let jt={};void 0!==bt&&X&&(jt=X.getState(Bt.sourceLayer||"_geojsonTileLayer",bt));const Ut=Di({},Z[Rt]);Ut.paint=Lg(Ut.paint,Bt.paint,at,jt,F),Ut.layout=Lg(Ut.layout,Bt.layout,at,jt,F);const mn=!re||re(at,Bt,jt,Se);if(!mn)continue;const Cn=new ay(at,this.z,this.x,this.y,bt);Cn.layer=Ut;let vn=l[Rt];void 0===vn&&(vn=l[Rt]=[]),vn.push({featureIndex:ce,feature:Cn,intersectionZ:mn})}}lookupSymbolFeatures(l,_,x,D,F,B,Z,X){const re={};this.loadVTLayers();const ce=sd(F);for(const de of l)this.loadMatchingFeature(re,{bucketIndex:x,sourceLayerIndex:D,featureIndex:de,layoutVertexArrayOffset:0},ce,B,Z,X,_);return re}hasLayer(l){for(const _ of this.bucketLayerIDs)for(const x of _)if(l===x)return!0;return!1}getId(l,_){let x=l.id;return this.promoteId&&(x=l.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[_]],"boolean"==typeof x&&(x=Number(x))),x}}function Lg(g,l,_,x,D){return fn(g,(F,B)=>{const Z=l instanceof vt?l.get(B):null;return Z&&Z.evaluate?Z.evaluate(_,x,D):Z})}function hb(g,l){return l-g}qn("FeatureIndex",Zx,{omit:["rawTileData","sourceLayerCoder"]});class fm{constructor(l){const _={},x=[];for(const Z in l){const X=l[Z],re=_[Z]={};for(const ce in X.glyphs){const de=X.glyphs[+ce];if(!de||0===de.bitmap.width||0===de.bitmap.height)continue;const _e=de.metrics.localGlyph?2:1,Se={x:0,y:0,w:de.bitmap.width+2*_e,h:de.bitmap.height+2*_e};x.push(Se),re[ce]=Se}}const{w:D,h:F}=pf(x),B=new Dh({width:D||1,height:F||1});for(const Z in l){const X=l[Z];for(const re in X.glyphs){const ce=X.glyphs[+re];if(!ce||0===ce.bitmap.width||0===ce.bitmap.height)continue;const de=_[Z][re],_e=ce.metrics.localGlyph?2:1;Dh.copy(ce.bitmap,B,{x:0,y:0},{x:de.x+_e,y:de.y+_e},ce.bitmap)}}this.image=B,this.positions=_}}qn("GlyphAtlas",fm);class ga{constructor(l){this.tileID=new ma(l.tileID.overscaledZ,l.tileID.wrap,l.tileID.canonical.z,l.tileID.canonical.x,l.tileID.canonical.y),this.tileZoom=l.tileZoom,this.uid=l.uid,this.zoom=l.zoom,this.pixelRatio=l.pixelRatio,this.tileSize=l.tileSize,this.source=l.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=l.showCollisionBoxes,this.collectResourceTiming=!!l.collectResourceTiming,this.returnDependencies=!!l.returnDependencies,this.promoteId=l.promoteId,this.enableTerrain=!!l.enableTerrain,this.isSymbolTile=l.isSymbolTile}parse(l,_,x,D,F){this.status="parsing",this.data=l,this.collisionBoxArray=new Wc;const B=new um(Object.keys(l.layers).sort()),Z=new Zx(this.tileID,this.promoteId);Z.bucketLayerIDs=[];const X={},re=new tb(256,256),ce={featureIndex:Z,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:re,availableImages:x},de=_.familiesBySource[this.source];for(const jt in de){const Ut=l.layers[jt];if(!Ut)continue;let mn=!1,Cn=!1;for(const ln of de[jt])"symbol"===ln[0].type?mn=!0:Cn=!0;if(!0===this.isSymbolTile&&!mn||!1===this.isSymbolTile&&!Cn)continue;1===Ut.version&&mi(`Vector tile source "${this.source}" layer "${jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const vn=B.encode(jt),Tn=[];for(let ln=0;ln<Ut.length;ln++){const pn=Ut.feature(ln),In=Z.getId(pn,jt);Tn.push({feature:pn,id:In,index:ln,sourceLayerIndex:vn})}for(const ln of de[jt]){const pn=ln[0];void 0!==this.isSymbolTile&&"symbol"===pn.type!==this.isSymbolTile||pn.minzoom&&this.zoom<Math.floor(pn.minzoom)||pn.maxzoom&&this.zoom>=pn.maxzoom||"none"!==pn.visibility&&(Qs(ln,this.zoom,x),(X[pn.id]=pn.createBucket({index:Z.bucketLayerIDs.length,layers:ln,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vn,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(Tn,ce,this.tileID.canonical),Z.bucketLayerIDs.push(ln.map(In=>In.id)))}}let _e,Se,Re,Xe;re.trim();const at={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},bt=fn(ce.glyphDependencies,jt=>Object.keys(jt).map(Number));Object.keys(bt).length?D.send("getGlyphs",{uid:this.uid,stacks:bt},(jt,Ut)=>{_e||(_e=jt,Se=Ut,Bt.call(this))},void 0,!1,at):Se={};const It=Object.keys(ce.iconDependencies);It.length?D.send("getImages",{icons:It,source:this.source,tileID:this.tileID,type:"icons"},(jt,Ut)=>{_e||(_e=jt,Re=Ut,Bt.call(this))},void 0,!1,at):Re={};const Rt=Object.keys(ce.patternDependencies);function Bt(){if(_e)return F(_e);if(Se&&Re&&Xe){const jt=new fm(Se),Ut=new W_(Re,Xe);for(const mn in X){const Cn=X[mn];Cn instanceof vp?(Qs(Cn.layers,this.zoom,x),Wv(Cn,Se,jt.positions,Re,Ut.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):Cn.hasPattern&&(Cn instanceof Wt||Cn instanceof eu||Cn instanceof Ra)&&(Qs(Cn.layers,this.zoom,x),Cn.addFeatures(ce,this.tileID.canonical,Ut.patternPositions))}this.status="done",F(null,{buckets:Vn(X).filter(mn=>!mn.isEmpty()),featureIndex:Z,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jt.image,lineAtlas:re,imageAtlas:Ut,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?Re:null,glyphPositions:this.returnDependencies?jt.positions:null})}}Rt.length?D.send("getImages",{icons:Rt,source:this.source,tileID:this.tileID,type:"patterns"},(jt,Ut)=>{_e||(_e=jt,Xe=Ut,Bt.call(this))},void 0,!1,at):Xe={},Bt.call(this)}}function Qs(g,l,_){const x=new Pe(l);for(const D of g)D.recalculate(x,_)}class mm{constructor(l){this.entries={},this.scheduler=l}request(l,_,x,D){const F=this.entries[l]=this.entries[l]||{callbacks:[]};if(F.result){const[B,Z]=F.result;return this.scheduler?this.scheduler.add(()=>{D(B,Z)},_):D(B,Z),()=>{}}return F.callbacks.push(D),F.cancel||(F.cancel=x((B,Z)=>{F.result=[B,Z];for(const X of F.callbacks)this.scheduler?this.scheduler.add(()=>{X(B,Z)},_):X(B,Z);setTimeout(()=>delete this.entries[l],3e3)})),()=>{F.result||(F.callbacks=F.callbacks.filter(B=>B!==D),F.callbacks.length||(F.cancel(),delete this.entries[l]))}}}function Md(g,l,_){const x=JSON.stringify(g.request);return g.data&&(this.deduped.entries[x]={result:[null,g.data]}),this.deduped.request(x,{type:"parseTile",isSymbolTile:g.isSymbolTile,zoom:g.tileZoom},D=>{const F=we(g.request,(B,Z,X,re)=>{B?D(B):Z&&D(null,{vectorTile:_?void 0:new Lh.VectorTile(new im(Z)),rawData:Z,cacheControl:X,expires:re})});return()=>{F.cancel(),D()}},l)}k.ARRAY_TYPE=fa,k.AUTH_ERR_MSG=Hr,k.Actor=class{constructor(g,l,_){this.target=g,this.parent=l,this.mapId=_,this.callbacks={},this.cancelCallbacks={},$t(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Hn()?g:Ve,this.scheduler=new ib}send(g,l,_,x,D=!1,F){const B=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(_.metadata=F,this.callbacks[B]=_);const Z=_r(this.globalScope)?void 0:[];return this.target.postMessage({id:B,type:g,hasCallback:!!_,targetMapId:x,mustQueue:D,sourceMapId:this.mapId,data:Yr(l,Z)},Z),{cancel:()=>{_&&delete this.callbacks[B],this.target.postMessage({id:B,type:"<cancel>",targetMapId:x,sourceMapId:this.mapId})}}}receive(g){const l=g.data,_=l.id;if(_&&(!l.targetMapId||this.mapId===l.targetMapId))if("<cancel>"===l.type){const x=this.cancelCallbacks[_];delete this.cancelCallbacks[_],x&&x.cancel()}else if(l.mustQueue||Hn()){const x=this.callbacks[_];this.cancelCallbacks[_]=this.scheduler.add(()=>this.processTask(_,l),x&&x.metadata||{type:"message"})}else this.processTask(_,l)}processTask(g,l){if("<response>"===l.type){const _=this.callbacks[g];delete this.callbacks[g],_&&(l.error?_(Xn(l.error)):_(null,Xn(l.data)))}else{const _=_r(this.globalScope)?void 0:[],x=l.hasCallback?(F,B)=>{delete this.cancelCallbacks[g],this.target.postMessage({id:g,type:"<response>",sourceMapId:this.mapId,error:F?Yr(F):null,data:Yr(B,_)},_)}:F=>{},D=Xn(l.data);if(this.parent[l.type])this.parent[l.type](l.sourceMapId,D,x);else if(this.parent.getWorkerSource){const F=l.type.split(".");this.parent.getWorkerSource(l.sourceMapId,F[0],D.source)[F[1]](D,x)}else x(new Error(`Could not find function ${l.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},k.CanonicalTileID=Pg,k.Color=hn,k.ColorMode=qu,k.CullFaceMode=Il,k.DEMData=xp,k.DataConstantProperty=rt,k.DedupedRequest=mm,k.DepthMode=Yu,k.EXTENT=Er,k.Elevation=class{getAtPointOrZero(g,l=0){return this.getAtPoint(g,l)||0}getAtPoint(g,l,_=!0){null==l&&(l=null);const x=this._source();if(!x||g.y<0||g.y>1)return l;const D=x.getSource().maxzoom,F=1<<D,B=Math.floor(g.x),Z=g.x-B,X=new ma(D,B,D,Math.floor(Z*F),Math.floor(g.y*F)),re=this.findDEMTileFor(X);if(!re||!re.dem)return l;const ce=re.dem,de=1<<re.tileID.canonical.z,_e=(Z*de-re.tileID.canonical.x)*ce.dim,Se=(g.y*de-re.tileID.canonical.y)*ce.dim,Re=Math.floor(_e),Xe=Math.floor(Se);return(_?this.exaggeration():1)*ui(ui(ce.get(Re,Xe),ce.get(Re,Xe+1),Se-Xe),ui(ce.get(Re+1,Xe),ce.get(Re+1,Xe+1),Se-Xe),_e-Re)}getAtTileOffset(g,l,_){const x=1<<g.canonical.z;return this.getAtPointOrZero(new bp(g.wrap+(g.canonical.x+l/Er)/x,(g.canonical.y+_/Er)/x))}getForTilePoints(g,l,_,x){const D=pm.create(this,g,x);return!!D&&(l.forEach(F=>{F[2]=this.exaggeration()*D.getElevationAt(F[0],F[1],_)}),!0)}getMinMaxForTile(g){const l=this.findDEMTileFor(g);if(!l||!l.dem)return null;const _=l.dem.tree,x=l.tileID,D=1<<g.canonical.z-x.canonical.z;let F=g.canonical.x/D-x.canonical.x,B=g.canonical.y/D-x.canonical.y,Z=0;for(let X=0;X<g.canonical.z-x.canonical.z&&!_.leaves[Z];X++){F*=2,B*=2;const re=2*Math.floor(B)+Math.floor(F);Z=_.childOffsets[Z]+re,F%=1,B%=1}return{min:this.exaggeration()*_.minimums[Z],max:this.exaggeration()*_.maximums[Z]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(g,l,_){throw new Error("Pure virtual method called.")}pointCoordinate(g){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(g){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},k.ErrorEvent=d,k.EvaluationParameters=Pe,k.Event=ve,k.Evented=p,k.GlyphManager=wd,k.ImagePosition=Z_,k.LineAtlas=tb,k.LngLat=To,k.LngLatBounds=Sd,k.LocalGlyphMode=K_,k.MAX_SAFE_INTEGER=Et,k.MercatorCoordinate=bp,k.ONE_EM=24,k.OverscaledTileID=ma,k.Properties=ut,k.RGBAImage=Za,k.RequestManager=class{constructor(g,l,_){this._transformRequestFn=g,this._customAccessToken=l,this._silenceAuthErrors=!!_,this._createSkuToken()}_createSkuToken(){const g=function(){let l="";for(let _=0;_<10;_++)l+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",xr,l].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=g.token,this._skuTokenExpiresAt=g.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(g,l){return this._transformRequestFn&&this._transformRequestFn(g,l)||{url:g}}normalizeStyleURL(g,l){if(!wr(g))return g;const _=ho(g);return _.path=`/styles/v1${_.path}`,this._makeAPIURL(_,this._customAccessToken||l)}normalizeGlyphsURL(g,l){if(!wr(g))return g;const _=ho(g);return _.path=`/fonts/v1${_.path}`,this._makeAPIURL(_,this._customAccessToken||l)}normalizeSourceURL(g,l){if(!wr(g))return g;const _=ho(g);return _.path=`/v4/${_.authority}.json`,_.params.push("secure"),this._makeAPIURL(_,this._customAccessToken||l)}normalizeSpriteURL(g,l,_,x){const D=ho(g);return wr(g)?(D.path=`/styles/v1${D.path}/sprite${l}${_}`,this._makeAPIURL(D,this._customAccessToken||x)):(D.path+=`${l}${_}`,Gr(D))}normalizeTileURL(g,l,_){if(this._isSkuTokenExpired()&&this._createSkuToken(),g&&!wr(g))return g;const x=ho(g);x.path=x.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${l||_&&"raster"!==x.authority&&512===_?"@2x":""}${ds.supported?".webp":"$1"}`),"raster"===x.authority?x.path=`/${Ri.RASTER_URL_PREFIX}${x.path}`:(x.path=x.path.replace(/^.+\/v4\//,"/"),x.path=`/${Ri.TILE_URL_VERSION}${x.path}`);const D=this._customAccessToken||function(F){for(const B of F){const Z=B.match(/^access_token=(.*)$/);if(Z)return Z[1]}return null}(x.params)||Ri.ACCESS_TOKEN;return Ri.REQUIRE_ACCESS_TOKEN&&D&&this._skuToken&&x.params.push(`sku=${this._skuToken}`),this._makeAPIURL(x,D)}canonicalizeTileURL(g,l){const _=ho(g);if(!_.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!_.path.match(/\.[\w]+$/))return g;let x="mapbox://";_.path.match(/^\/raster\/v1\//)?x+=`raster/${_.path.replace(`/${Ri.RASTER_URL_PREFIX}/`,"")}`:x+=`tiles/${_.path.replace(`/${Ri.TILE_URL_VERSION}/`,"")}`;let D=_.params;return l&&(D=D.filter(F=>!F.match(/^access_token=/))),D.length&&(x+=`?${D.join("&")}`),x}canonicalizeTileset(g,l){const _=!!l&&wr(l),x=[];for(const D of g.tiles||[])is(D)?x.push(this.canonicalizeTileURL(D,_)):x.push(D);return x}_makeAPIURL(g,l){const _="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",x=ho(Ri.API_URL);if(g.protocol=x.protocol,g.authority=x.authority,"http"===g.protocol){const D=g.params.indexOf("secure");D>=0&&g.params.splice(D,1)}if("/"!==x.path&&(g.path=`${x.path}${g.path}`),!Ri.REQUIRE_ACCESS_TOKEN)return Gr(g);if(l=l||Ri.ACCESS_TOKEN,!this._silenceAuthErrors){if(!l)throw new Error(`An API access token is required to use Mapbox GL. ${_}`);if("s"===l[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${_}`)}return g.params=g.params.filter(D=>-1===D.indexOf("access_token")),g.params.push(`access_token=${l||""}`),Gr(g)}},k.ResourceType=Oi,k.SegmentVector=Ss,k.SourceCache=au,k.StencilMode=Og,k.StructArrayLayout1ui2=qs,k.StructArrayLayout2f1f2i16=ha,k.StructArrayLayout2i4=ci,k.StructArrayLayout2ui4=Rs,k.StructArrayLayout3f12=ua,k.StructArrayLayout3ui6=zr,k.StructArrayLayout4i8=lr,k.Texture=yf,k.Tile=ly,k.Transitionable=et,k.Uniform1f=Cs,k.Uniform1i=class extends Fo{constructor(g,l){super(g,l),this.current=0}set(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))}},k.Uniform2f=class extends Fo{constructor(g,l){super(g,l),this.current=[0,0]}set(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))}},k.Uniform3f=class extends Fo{constructor(g,l){super(g,l),this.current=[0,0,0]}set(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))}},k.Uniform4f=ud,k.UniformColor=Hf,k.UniformMatrix3f=class extends Fo{constructor(g,l){super(g,l),this.current=og}set(g){for(let l=0;l<9;l++)if(g[l]!==this.current[l]){this.current=g,this.gl.uniformMatrix3fv(this.location,!1,g);break}}},k.UniformMatrix4f=class extends Fo{constructor(g,l){super(g,l),this.current=Gf}set(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(let l=1;l<16;l++)if(g[l]!==this.current[l]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}}},k.UnwrappedTileID=ob,k.ValidationError=C,k.VectorTileWorkerSource=class extends p{constructor(g,l,_,x,D){super(),this.actor=g,this.layerIndex=l,this.availableImages=_,this.loadVectorData=D||Md,this.loading={},this.loaded={},this.deduped=new mm(g.scheduler),this.isSpriteLoaded=x,this.scheduler=g.scheduler}loadTile(g,l){const _=g.uid,x=g&&g.request,D=x&&x.collectResourceTiming,F=this.loading[_]=new ga(g);F.abort=this.loadVectorData(g,(B,Z)=>{const X=!this.loading[_];if(delete this.loading[_],X||B||!Z)return F.status="done",X||(this.loaded[_]=F),l(B);const re=Z.rawData,ce={};Z.expires&&(ce.expires=Z.expires),Z.cacheControl&&(ce.cacheControl=Z.cacheControl),F.vectorTile=Z.vectorTile||new Lh.VectorTile(new im(re));const de=()=>{F.parse(F.vectorTile,this.layerIndex,this.availableImages,this.actor,(_e,Se)=>{if(_e||!Se)return l(_e);const Re={};if(D){const Xe=nb(x);Xe.length>0&&(Re.resourceTiming=JSON.parse(JSON.stringify(Xe)))}l(null,Di({rawTileData:re.slice(0)},Se,ce,Re))})};this.isSpriteLoaded?de():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(de,{type:"parseTile",isSymbolTile:g.isSymbolTile,zoom:g.tileZoom}):de()}),this.loaded=this.loaded||{},this.loaded[_]=F})}reloadTile(g,l){const _=this.loaded,x=g.uid,D=this;if(_&&_[x]){const F=_[x];F.showCollisionBoxes=g.showCollisionBoxes,F.enableTerrain=!!g.enableTerrain;const B=(Z,X)=>{const re=F.reloadCallback;re&&(delete F.reloadCallback,F.parse(F.vectorTile,D.layerIndex,this.availableImages,D.actor,re)),l(Z,X)};"parsing"===F.status?F.reloadCallback=B:"done"===F.status&&(F.vectorTile?F.parse(F.vectorTile,this.layerIndex,this.availableImages,this.actor,B):B())}}abortTile(g,l){const _=g.uid,x=this.loading[_];x&&(x.abort&&x.abort(),delete this.loading[_]),l()}removeTile(g,l){const _=this.loaded,x=g.uid;_&&_[x]&&delete _[x],l()}},k.WritingMode=iu,k.ZoomHistory=bs,k.add=function(g,l,_){return g[0]=l[0]+_[0],g[1]=l[1]+_[1],g[2]=l[2]+_[2],g},k.addDynamicAttributes=ji,k.altitudeFromMercatorZ=cm,k.asyncAll=$r,k.bezier=On,k.bindAll=$t,k.bufferConvexPolygon=function(g,l){const _=[];for(let x=0;x<g.length;x++){const D=Ui(x-1,-1,g.length-1),F=Ui(x+1,-1,g.length-1),B=g[x],Z=g[F],X=g[D].sub(B).unit(),re=Z.sub(B).unit(),ce=re.angleWithSep(X.x,X.y),de=X.add(re).unit().mult(-1*l/Math.sin(ce/2));_.push(B.add(de))}return _},k.cacheEntryPossiblyAdded=function(g){di++,di>Kt&&(g.getActor().send("enforceCacheSizeLimit",Tt),di=0)},k.clamp=Mt,k.clearTileCache=function(g){const l=Ve.caches.delete(cc);g&&l.catch(g).then(()=>g())},k.clipLine=Vx,k.clone=function(g){var l=new fa(3);return l[0]=g[0],l[1]=g[1],l[2]=g[2],l},k.clone$1=function(g){var l=new fa(16);return l[0]=g[0],l[1]=g[1],l[2]=g[2],l[3]=g[3],l[4]=g[4],l[5]=g[5],l[6]=g[6],l[7]=g[7],l[8]=g[8],l[9]=g[9],l[10]=g[10],l[11]=g[11],l[12]=g[12],l[13]=g[13],l[14]=g[14],l[15]=g[15],l},k.clone$2=Fn,k.collisionCircleLayout=uf,k.config=Ri,k.conjugate=function(g,l){return g[0]=-l[0],g[1]=-l[1],g[2]=-l[2],g[3]=l[3],g},k.copy=function(g,l){return g[0]=l[0],g[1]=l[1],g[2]=l[2],g},k.create=kl,k.create$1=function(){var g=new fa(16);return fa!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=0,g[12]=0,g[13]=0,g[14]=0),g[0]=1,g[5]=1,g[10]=1,g[15]=1,g},k.create$2=hg,k.createExpression=_l,k.createFilter=sd,k.createLayout=An,k.createStyleLayer=function(g){return"custom"===g.type?new el(g):new _E[g.type](g)},k.cross=function(g,l,_){var x=l[0],D=l[1],F=l[2],B=_[0],Z=_[1],X=_[2];return g[0]=D*X-F*Z,g[1]=F*B-x*X,g[2]=x*Z-D*B,g},k.degToRad=zt,k.div=function(g,l,_){return g[0]=l[0]/_[0],g[1]=l[1]/_[1],g[2]=l[2]/_[2],g},k.dot=function(g,l){return g[0]*l[0]+g[1]*l[1]+g[2]*l[2]},k.dot$1=function(g,l){return g[0]*l[0]+g[1]*l[1]+g[2]*l[2]+g[3]*l[3]},k.ease=dn,k.easeCubicInOut=Qe,k.emitValidationErrors=tp,k.endsWith=Ht,k.enforceCacheSizeLimit=function(g){Lt(),ft&&ft.then(l=>{l.keys().then(_=>{for(let x=0;x<_.length-g;x++)l.delete(_[x])})})},k.evaluateSizeForFeature=pp,k.evaluateSizeForZoom=tm,k.evaluateVariableOffset=Bh,k.evented=ue,k.exactEquals=function(g,l){return g[0]===l[0]&&g[1]===l[1]&&g[2]===l[2]&&g[3]===l[3]},k.exactEquals$1=function(g,l){return g[0]===l[0]&&g[1]===l[1]&&g[2]===l[2]},k.exported=Fr,k.exported$1=ds,k.extend=Di,k.filterObject=Yt,k.fromMat4=function(g,l){return g[0]=l[0],g[1]=l[1],g[2]=l[2],g[3]=l[4],g[4]=l[5],g[5]=l[6],g[6]=l[8],g[7]=l[9],g[8]=l[10],g},k.fromQuat=function(g,l){var _=l[0],x=l[1],D=l[2],F=l[3],B=_+_,Z=x+x,X=D+D,re=_*B,ce=x*B,de=x*Z,_e=D*B,Se=D*Z,Re=D*X,Xe=F*B,at=F*Z,bt=F*X;return g[0]=1-de-Re,g[1]=ce+bt,g[2]=_e-at,g[3]=0,g[4]=ce-bt,g[5]=1-re-Re,g[6]=Se+Xe,g[7]=0,g[8]=_e+at,g[9]=Se-Xe,g[10]=1-re-de,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},k.fromRotation=function(g,l){var _=Math.sin(l),x=Math.cos(l);return g[0]=x,g[1]=_,g[2]=0,g[3]=-_,g[4]=x,g[5]=0,g[6]=0,g[7]=0,g[8]=1,g},k.fromScaling=function(g,l){return g[0]=l[0],g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=l[1],g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=l[2],g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},k.furthestTileCorner=function(g){const l=Math.round((g+45+360)%360/90)%4;return an[l]},k.getAABBPointSquareDist=function(g,l,_){let x=0;for(let D=0;D<2;++D){const F=_?_[D]:0;g[D]>F&&(x+=(g[D]-F)*(g[D]-F)),l[D]<F&&(x+=(F-l[D])*(F-l[D]))}return x},k.getAnchorAlignment=Lo,k.getAnchorJustification=_p,k.getBounds=function(g){let l=1/0,_=1/0,x=-1/0,D=-1/0;for(const F of g)l=Math.min(l,F.x),_=Math.min(_,F.y),x=Math.max(x,F.x),D=Math.max(D,F.y);return{min:new Be(l,_),max:new Be(x,D)}},k.getImage=xt,k.getJSON=function(g,l){return Ge(Di(g,{type:"json"}),l)},k.getMapSessionAPI=Cr,k.getPerformanceMeasurement=nb,k.getRTLTextPluginStatus=me,k.getReferrer=ir,k.getVideo=function(g,l){const _=Ve.document.createElement("video");_.muted=!0,_.onloadstart=function(){l(null,_)};for(let x=0;x<g.length;x++){const D=Ve.document.createElement("source");it(g[x])||(_.crossOrigin="Anonymous"),D.src=g[x],_.appendChild(D)}return{cancel:()=>{}}},k.identity=Ls,k.identity$1=Es,k.invert=function(g,l){var _=l[0],x=l[1],D=l[2],F=l[3],B=l[4],Z=l[5],X=l[6],re=l[7],ce=l[8],de=l[9],_e=l[10],Se=l[11],Re=l[12],Xe=l[13],at=l[14],bt=l[15],It=_*Z-x*B,Rt=_*X-D*B,Bt=_*re-F*B,jt=x*X-D*Z,Ut=x*re-F*Z,mn=D*re-F*X,Cn=ce*Xe-de*Re,vn=ce*at-_e*Re,Tn=ce*bt-Se*Re,ln=de*at-_e*Xe,pn=de*bt-Se*Xe,In=_e*bt-Se*at,on=It*In-Rt*pn+Bt*ln+jt*Tn-Ut*vn+mn*Cn;return on?(g[0]=(Z*In-X*pn+re*ln)*(on=1/on),g[1]=(D*pn-x*In-F*ln)*on,g[2]=(Xe*mn-at*Ut+bt*jt)*on,g[3]=(_e*Ut-de*mn-Se*jt)*on,g[4]=(X*Tn-B*In-re*vn)*on,g[5]=(_*In-D*Tn+F*vn)*on,g[6]=(at*Bt-Re*mn-bt*Rt)*on,g[7]=(ce*mn-_e*Bt+Se*Rt)*on,g[8]=(B*pn-Z*Tn+re*Cn)*on,g[9]=(x*Tn-_*pn-F*Cn)*on,g[10]=(Re*Ut-Xe*Bt+bt*It)*on,g[11]=(de*Bt-ce*Ut-Se*It)*on,g[12]=(Z*vn-B*ln-X*Cn)*on,g[13]=(_*ln-x*vn+D*Cn)*on,g[14]=(Xe*Rt-Re*jt-at*It)*on,g[15]=(ce*jt-de*Rt+_e*It)*on,g):null},k.isMapAuthenticated=function(g){return Wo.has(g)},k.isMapboxURL=wr,k.latFromMercatorY=Ql,k.len=Pv,k.length=oi,k.length$1=function(g){return Math.hypot(g[0],g[1],g[2],g[3])},k.loadVectorTile=Md,k.makeRequest=Ge,k.mercatorXfromLng=oy,k.mercatorYfromLat=Ig,k.mercatorZfromAltitude=sy,k.mul=function(g,l,_){return g[0]=l[0]*_[0],g[1]=l[1]*_[1],g[2]=l[2]*_[2],g[3]=l[3]*_[3],g},k.mul$1=Ml,k.mul$2=Kp,k.multiply=pd,k.multiply$1=bc,k.nextPowerOfTwo=Zt,k.normalize=Zf,k.normalize$1=function(g,l){var _=l[0],x=l[1],D=l[2],F=l[3],B=_*_+x*x+D*D+F*F;return B>0&&(B=1/Math.sqrt(B)),g[0]=_*B,g[1]=x*B,g[2]=D*B,g[3]=F*B,g},k.number=ui,k.ortho=function(g,l,_,x,D,F,B){var Z=1/(l-_),X=1/(x-D),re=1/(F-B);return g[0]=-2*Z,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*X,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*re,g[11]=0,g[12]=(l+_)*Z,g[13]=(D+x)*X,g[14]=(B+F)*re,g[15]=1,g},k.pbf=im,k.perspective=function(g,l,_,x,D){var F,B=1/Math.tan(l/2);return g[0]=B/_,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=B,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=-1,g[12]=0,g[13]=0,g[15]=0,null!=D&&D!==1/0?(g[10]=(D+x)*(F=1/(x-D)),g[14]=2*D*x*F):(g[10]=-1,g[14]=-2*x),g},k.pick=function(g,l){const _={};for(let x=0;x<l.length;x++){const D=l[x];D in g&&(_[D]=g[D])}return _},k.plugin=Ae,k.pointGeometry=Be,k.polygonIntersectsBox=Qp,k.polygonIntersectsPolygon=kh,k.polygonizeBounds=function(g,l,_=0,x=!0){const D=new Be(_,_),F=g.sub(D),B=l.add(D),Z=[F,new Be(B.x,F.y),B,new Be(F.x,B.y)];return x&&Z.push(F),Z},k.posAttributes=sb,k.postMapLoadEvent=Us,k.postTurnstileEvent=Ei,k.potpack=pf,k.prevPowerOfTwo=function(g){return g<=1?1:Math.pow(2,Math.floor(Math.log(g)/Math.LN2))},k.radToDeg=function(g){return g*Ct},k.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],k.registerForPluginStateChange=function(g){return g({pluginStatus:U,pluginURL:q}),ue.on("pluginStateChange",g),g},k.removeAuthState=function(g){Wo.delete(g)},k.renderColorRamp=cp,k.rotateX=function(g,l,_){var x=Math.sin(_),D=Math.cos(_),F=l[4],B=l[5],Z=l[6],X=l[7],re=l[8],ce=l[9],de=l[10],_e=l[11];return l!==g&&(g[0]=l[0],g[1]=l[1],g[2]=l[2],g[3]=l[3],g[12]=l[12],g[13]=l[13],g[14]=l[14],g[15]=l[15]),g[4]=F*D+re*x,g[5]=B*D+ce*x,g[6]=Z*D+de*x,g[7]=X*D+_e*x,g[8]=re*D-F*x,g[9]=ce*D-B*x,g[10]=de*D-Z*x,g[11]=_e*D-X*x,g},k.rotateX$1=xc,k.rotateY=function(g,l,_){var x=Math.sin(_),D=Math.cos(_),F=l[0],B=l[1],Z=l[2],X=l[3],re=l[8],ce=l[9],de=l[10],_e=l[11];return l!==g&&(g[4]=l[4],g[5]=l[5],g[6]=l[6],g[7]=l[7],g[12]=l[12],g[13]=l[13],g[14]=l[14],g[15]=l[15]),g[0]=F*D-re*x,g[1]=B*D-ce*x,g[2]=Z*D-de*x,g[3]=X*D-_e*x,g[8]=F*x+re*D,g[9]=B*x+ce*D,g[10]=Z*x+de*D,g[11]=X*x+_e*D,g},k.rotateZ=function(g,l,_){var x=Math.sin(_),D=Math.cos(_),F=l[0],B=l[1],Z=l[2],X=l[3],re=l[4],ce=l[5],de=l[6],_e=l[7];return l!==g&&(g[8]=l[8],g[9]=l[9],g[10]=l[10],g[11]=l[11],g[12]=l[12],g[13]=l[13],g[14]=l[14],g[15]=l[15]),g[0]=F*D+re*x,g[1]=B*D+ce*x,g[2]=Z*D+de*x,g[3]=X*D+_e*x,g[4]=re*D-F*x,g[5]=ce*D-B*x,g[6]=de*D-Z*x,g[7]=_e*D-X*x,g},k.rotateZ$1=function(g,l,_){_*=.5;var x=l[0],D=l[1],F=l[2],B=l[3],Z=Math.sin(_),X=Math.cos(_);return g[0]=x*X+D*Z,g[1]=D*X-x*Z,g[2]=F*X+B*Z,g[3]=B*X-F*Z,g},k.scale=function(g,l,_){return g[0]=l[0]*_,g[1]=l[1]*_,g[2]=l[2]*_,g},k.scale$1=function(g,l,_){var x=_[0],D=_[1],F=_[2];return g[0]=l[0]*x,g[1]=l[1]*x,g[2]=l[2]*x,g[3]=l[3]*x,g[4]=l[4]*D,g[5]=l[5]*D,g[6]=l[6]*D,g[7]=l[7]*D,g[8]=l[8]*F,g[9]=l[9]*F,g[10]=l[10]*F,g[11]=l[11]*F,g[12]=l[12],g[13]=l[13],g[14]=l[14],g[15]=l[15],g},k.scale$2=function(g,l,_){return g[0]=l[0]*_,g[1]=l[1]*_,g[2]=l[2]*_,g[3]=l[3]*_,g},k.scaleAndAdd=zu,k.setCacheLimits=function(g,l){Tt=g,Kt=l},k.setRTLTextPlugin=function(g,l,_=!1){if(U===P||U===f||U===w)throw new Error("setRTLTextPlugin cannot be called multiple times.");q=Fr.resolveURL(g),U=P,O=l,se(),_||Ce()},k.smoothstep=function(g,l,_){return(_=Mt((_-g)/(l-g),0,1))*_*(3-2*_)},k.spec=y,k.storeAuthState=function(g,l){l?Wo.add(g):Wo.delete(g)},k.sub=Wf,k.subtract=dg,k.symbolSize=Eg,k.transformMat3=function(g,l,_){var x=l[0],D=l[1],F=l[2];return g[0]=x*_[0]+D*_[3]+F*_[6],g[1]=x*_[1]+D*_[4]+F*_[7],g[2]=x*_[2]+D*_[5]+F*_[8],g},k.transformMat4=md,k.transformMat4$1=function(g,l,_){var x=l[0],D=l[1],F=l[2],B=_[3]*x+_[7]*D+_[11]*F+_[15];return g[0]=(_[0]*x+_[4]*D+_[8]*F+_[12])/(B=B||1),g[1]=(_[1]*x+_[5]*D+_[9]*F+_[13])/B,g[2]=(_[2]*x+_[6]*D+_[10]*F+_[14])/B,g},k.transformQuat=pg,k.translate=function(g,l,_){var x,D,F,B,Z,X,re,ce,de,_e,Se,Re,Xe=_[0],at=_[1],bt=_[2];return l===g?(g[12]=l[0]*Xe+l[4]*at+l[8]*bt+l[12],g[13]=l[1]*Xe+l[5]*at+l[9]*bt+l[13],g[14]=l[2]*Xe+l[6]*at+l[10]*bt+l[14],g[15]=l[3]*Xe+l[7]*at+l[11]*bt+l[15]):(D=l[1],F=l[2],B=l[3],Z=l[4],X=l[5],re=l[6],ce=l[7],de=l[8],_e=l[9],Se=l[10],Re=l[11],g[0]=x=l[0],g[1]=D,g[2]=F,g[3]=B,g[4]=Z,g[5]=X,g[6]=re,g[7]=ce,g[8]=de,g[9]=_e,g[10]=Se,g[11]=Re,g[12]=x*Xe+Z*at+de*bt+l[12],g[13]=D*Xe+X*at+_e*bt+l[13],g[14]=F*Xe+re*at+Se*bt+l[14],g[15]=B*Xe+ce*at+Re*bt+l[15]),g},k.triggerPluginCompletionEvent=ee,k.uniqueId=tr,k.validateCustomStyleLayer=function(g){const l=[],_=g.id;return void 0===_&&l.push({message:`layers.${_}: missing required property "id"`}),void 0===g.render&&l.push({message:`layers.${_}: missing required method "render"`}),g.renderingMode&&"2d"!==g.renderingMode&&"3d"!==g.renderingMode&&l.push({message:`layers.${_}: property "renderingMode" must be either "2d" or "3d"`}),l},k.validateFog=Wp,k.validateLight=Uc,k.validateStyle=Au,k.values=Vn,k.vectorTile=Lh,k.version="2.4.1",k.warnOnce=mi,k.window=Ve,k.wrap=Ui}),Vt(0,function(k){function gt(Ge){const we=typeof Ge;if("number"===we||"boolean"===we||"string"===we||null==Ge)return JSON.stringify(Ge);if(Array.isArray(Ge)){let it="[";for(const yt of Ge)it+=`${gt(yt)},`;return`${it}]`}const De=Object.keys(Ge).sort();let qe="{";for(let it=0;it<De.length;it++)qe+=`${JSON.stringify(De[it])}:${gt(Ge[De[it]])},`;return`${qe}}`}function Dt(Ge){let we="";for(const De of k.refProperties)we+=`/${gt(Ge[De])}`;return we}class wt{constructor(we){this.keyCache={},we&&this.replace(we)}replace(we){this._layerConfigs={},this._layers={},this.update(we,[])}update(we,De){for(const it of we){this._layerConfigs[it.id]=it;const yt=this._layers[it.id]=k.createStyleLayer(it);yt._featureFilter=k.createFilter(yt.filter),this.keyCache[it.id]&&delete this.keyCache[it.id]}for(const it of De)delete this.keyCache[it],delete this._layerConfigs[it],delete this._layers[it];this.familiesBySource={};const qe=function(it,yt){const Ot={};for(let xt=0;xt<it.length;xt++){const Ft=yt&&yt[it[xt].id]||Dt(it[xt]);yt&&(yt[it[xt].id]=Ft);let tn=Ot[Ft];tn||(tn=Ot[Ft]=[]),tn.push(it[xt])}const Pt=[];for(const xt in Ot)Pt.push(Ot[xt]);return Pt}(k.values(this._layerConfigs),this.keyCache);for(const it of qe){const yt=it.map(ve=>this._layers[ve.id]),Ot=yt[0];if("none"===Ot.visibility)continue;const Pt=Ot.source||"";let xt=this.familiesBySource[Pt];xt||(xt=this.familiesBySource[Pt]={});const Ft=Ot.sourceLayer||"_geojsonTileLayer";let tn=xt[Ft];tn||(tn=xt[Ft]=[]),tn.push(yt)}}}const{ImageBitmap:Be}=k.window;class je{loadTile(we,De){const{uid:qe,encoding:it,rawImageData:yt,padding:Ot,buildQuadTree:Pt}=we,xt=Be&&yt instanceof Be?this.getImageData(yt,Ot):yt;De(null,new k.DEMData(qe,xt,it,Ot<1,Pt))}getImageData(we,De){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(we.width,we.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=we.width,this.offscreenCanvas.height=we.height,this.offscreenCanvasContext.drawImage(we,0,0,we.width,we.height);const qe=this.offscreenCanvasContext.getImageData(-De,-De,we.width+2*De,we.height+2*De);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new k.RGBAImage({width:qe.width,height:qe.height},qe.data)}}var Ve=function Ge(we,De){var qe,it=we&&we.type;if("FeatureCollection"===it)for(qe=0;qe<we.features.length;qe++)Ge(we.features[qe],De);else if("GeometryCollection"===it)for(qe=0;qe<we.geometries.length;qe++)Ge(we.geometries[qe],De);else if("Feature"===it)Ge(we.geometry,De);else if("Polygon"===it)Et(we.coordinates,De);else if("MultiPolygon"===it)for(qe=0;qe<we.coordinates.length;qe++)Et(we.coordinates[qe],De);return we};function Et(Ge,we){if(0!==Ge.length){lt(Ge[0],we);for(var De=1;De<Ge.length;De++)lt(Ge[De],!we)}}function lt(Ge,we){for(var De=0,qe=0,it=Ge.length,yt=it-1;qe<it;yt=qe++)De+=(Ge[qe][0]-Ge[yt][0])*(Ge[yt][1]+Ge[qe][1]);De>=0!=!!we&&Ge.reverse()}const Ct=k.vectorTile.VectorTileFeature.prototype.toGeoJSON;class zt{constructor(we){this._feature=we,this.extent=k.EXTENT,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))}loadGeometry(){if(1===this._feature.type){const we=[];for(const De of this._feature.geometry)we.push([new k.pointGeometry(De[0],De[1])]);return we}{const we=[];for(const De of this._feature.geometry){const qe=[];for(const it of De)qe.push(new k.pointGeometry(it[0],it[1]));we.push(qe)}return we}}toGeoJSON(we,De,qe){return Ct.call(this,we,De,qe)}}class an{constructor(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=k.EXTENT,this.length=we.length,this._features=we}feature(we){return new zt(this._features[we])}}var Qe=k.vectorTile.VectorTileFeature,On=dn;function dn(Ge,we){this.options=we||{},this.features=Ge,this.length=Ge.length}function Mt(Ge,we){this.id="number"==typeof Ge.id?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=1===Ge.type?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=we||4096}dn.prototype.feature=function(Ge){return new Mt(this.features[Ge],this.options.extent)},Mt.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var we=0;we<Ge.length;we++){for(var De=Ge[we],qe=[],it=0;it<De.length;it++)qe.push(new k.pointGeometry(De[it][0],De[it][1]));this.geometry.push(qe)}return this.geometry},Mt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,we=1/0,De=-1/0,qe=1/0,it=-1/0,yt=0;yt<Ge.length;yt++)for(var Ot=Ge[yt],Pt=0;Pt<Ot.length;Pt++){var xt=Ot[Pt];we=Math.min(we,xt.x),De=Math.max(De,xt.x),qe=Math.min(qe,xt.y),it=Math.max(it,xt.y)}return[we,qe,De,it]},Mt.prototype.toGeoJSON=Qe.prototype.toGeoJSON;var Ui=Vn,$r=On;function Vn(Ge){var we=new k.pbf;return function(De,qe){for(var it in De.layers)qe.writeMessage(3,Di,De.layers[it])}(Ge,we),we.finish()}function Di(Ge,we){var De;we.writeVarintField(15,Ge.version||1),we.writeStringField(1,Ge.name||""),we.writeVarintField(5,Ge.extent||4096);var qe={keys:[],values:[],keycache:{},valuecache:{}};for(De=0;De<Ge.length;De++)qe.feature=Ge.feature(De),we.writeMessage(2,Ur,qe);var it=qe.keys;for(De=0;De<it.length;De++)we.writeStringField(3,it[De]);var yt=qe.values;for(De=0;De<yt.length;De++)we.writeMessage(4,$t,yt[De])}function Ur(Ge,we){var De=Ge.feature;void 0!==De.id&&we.writeVarintField(1,De.id),we.writeMessage(2,tr,Ge),we.writeVarintField(3,De.type),we.writeMessage(4,Gt,De)}function tr(Ge,we){var De=Ge.feature,qe=Ge.keys,it=Ge.values,yt=Ge.keycache,Ot=Ge.valuecache;for(var Pt in De.properties){var xt=yt[Pt];void 0===xt&&(qe.push(Pt),yt[Pt]=xt=qe.length-1),we.writeVarint(xt);var Ft=De.properties[Pt],tn=typeof Ft;"string"!==tn&&"boolean"!==tn&&"number"!==tn&&(Ft=JSON.stringify(Ft));var ve=tn+":"+Ft,d=Ot[ve];void 0===d&&(it.push(Ft),Ot[ve]=d=it.length-1),we.writeVarint(d)}}function nr(Ge,we){return(we<<3)+(7&Ge)}function Zt(Ge){return Ge<<1^Ge>>31}function Gt(Ge,we){for(var De=Ge.loadGeometry(),qe=Ge.type,it=0,yt=0,Ot=De.length,Pt=0;Pt<Ot;Pt++){var xt=De[Pt],Ft=1;1===qe&&(Ft=xt.length),we.writeVarint(nr(1,Ft));for(var tn=3===qe?xt.length-1:xt.length,ve=0;ve<tn;ve++){1===ve&&1!==qe&&we.writeVarint(nr(2,tn-1));var d=xt[ve].x-it,p=xt[ve].y-yt;we.writeVarint(Zt(d)),we.writeVarint(Zt(p)),it+=d,yt+=p}3===qe&&we.writeVarint(nr(7,1))}}function $t(Ge,we){var De=typeof Ge;"string"===De?we.writeStringField(1,Ge):"boolean"===De?we.writeBooleanField(7,Ge):"number"===De&&(Ge%1!=0?we.writeDoubleField(3,Ge):Ge<0?we.writeSVarintField(6,Ge):we.writeVarintField(5,Ge))}function Ht(Ge,we,De,qe,it,yt){if(it-qe<=De)return;const Ot=qe+it>>1;fn(Ge,we,Ot,qe,it,yt%2),Ht(Ge,we,De,qe,Ot-1,yt+1),Ht(Ge,we,De,Ot+1,it,yt+1)}function fn(Ge,we,De,qe,it,yt){for(;it>qe;){if(it-qe>600){const Ft=it-qe+1,tn=De-qe+1,ve=Math.log(Ft),d=.5*Math.exp(2*ve/3),p=.5*Math.sqrt(ve*d*(Ft-d)/Ft)*(tn-Ft/2<0?-1:1);fn(Ge,we,De,Math.max(qe,Math.floor(De-tn*d/Ft+p)),Math.min(it,Math.floor(De+(Ft-tn)*d/Ft+p)),yt)}const Ot=we[2*De+yt];let Pt=qe,xt=it;for(Yt(Ge,we,qe,De),we[2*it+yt]>Ot&&Yt(Ge,we,qe,it);Pt<xt;){for(Yt(Ge,we,Pt,xt),Pt++,xt--;we[2*Pt+yt]<Ot;)Pt++;for(;we[2*xt+yt]>Ot;)xt--}we[2*qe+yt]===Ot?Yt(Ge,we,qe,xt):(xt++,Yt(Ge,we,xt,it)),xt<=De&&(qe=xt+1),De<=xt&&(it=xt-1)}}function Yt(Ge,we,De,qe){Fn(Ge,De,qe),Fn(we,2*De,2*qe),Fn(we,2*De+1,2*qe+1)}function Fn(Ge,we,De){const qe=Ge[we];Ge[we]=Ge[De],Ge[De]=qe}function hi(Ge,we,De,qe){const it=Ge-De,yt=we-qe;return it*it+yt*yt}Ui.fromVectorTileJs=Vn,Ui.fromGeojsonVt=function(Ge,we){we=we||{};var De={};for(var qe in Ge)De[qe]=new On(Ge[qe].features,we),De[qe].name=qe,De[qe].version=we.version,De[qe].extent=we.extent;return Vn({layers:De})},Ui.GeoJSONWrapper=$r;const mi=Ge=>Ge[0],Un=Ge=>Ge[1];class ri{constructor(we,De=mi,qe=Un,it=64,yt=Float64Array){this.nodeSize=it,this.points=we;const Ot=we.length<65536?Uint16Array:Uint32Array,Pt=this.ids=new Ot(we.length),xt=this.coords=new yt(2*we.length);for(let Ft=0;Ft<we.length;Ft++)Pt[Ft]=Ft,xt[2*Ft]=De(we[Ft]),xt[2*Ft+1]=qe(we[Ft]);Ht(Pt,xt,it,0,Pt.length-1,0)}range(we,De,qe,it){return function(yt,Ot,Pt,xt,Ft,tn,ve){const d=[0,yt.length-1,0],p=[];let y,C;for(;d.length;){const M=d.pop(),L=d.pop(),R=d.pop();if(L-R<=ve){for(let J=R;J<=L;J++)y=Ot[2*J],C=Ot[2*J+1],y>=Pt&&y<=Ft&&C>=xt&&C<=tn&&p.push(yt[J]);continue}const H=Math.floor((R+L)/2);y=Ot[2*H],C=Ot[2*H+1],y>=Pt&&y<=Ft&&C>=xt&&C<=tn&&p.push(yt[H]);const G=(M+1)%2;(0===M?Pt<=y:xt<=C)&&(d.push(R),d.push(H-1),d.push(G)),(0===M?Ft>=y:tn>=C)&&(d.push(H+1),d.push(L),d.push(G))}return p}(this.ids,this.coords,we,De,qe,it,this.nodeSize)}within(we,De,qe){return function(it,yt,Ot,Pt,xt,Ft){const tn=[0,it.length-1,0],ve=[],d=xt*xt;for(;tn.length;){const p=tn.pop(),y=tn.pop(),C=tn.pop();if(y-C<=Ft){for(let G=C;G<=y;G++)hi(yt[2*G],yt[2*G+1],Ot,Pt)<=d&&ve.push(it[G]);continue}const M=Math.floor((C+y)/2),L=yt[2*M],R=yt[2*M+1];hi(L,R,Ot,Pt)<=d&&ve.push(it[M]);const H=(p+1)%2;(0===p?Ot-xt<=L:Pt-xt<=R)&&(tn.push(C),tn.push(M-1),tn.push(H)),(0===p?Ot+xt>=L:Pt+xt>=R)&&(tn.push(M+1),tn.push(y),tn.push(H))}return ve}(this.ids,this.coords,we,De,qe,this.nodeSize)}}const Hn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ge=>Ge},jn=Math.fround||(xi=new Float32Array(1),Ge=>(xi[0]=+Ge,xi[0]));var xi;class li{constructor(we){this.options=ds(Object.create(Hn),we),this.trees=new Array(this.options.maxZoom+1)}load(we){const{log:De,minZoom:qe,maxZoom:it,nodeSize:yt}=this.options;De&&console.time("total time");const Ot=`prepare ${we.length} points`;De&&console.time(Ot),this.points=we;let Pt=[];for(let xt=0;xt<we.length;xt++)we[xt].geometry&&Pt.push(Io(we[xt],xt));this.trees[it+1]=new ri(Pt,Ni,Si,yt,Float32Array),De&&console.timeEnd(Ot);for(let xt=it;xt>=qe;xt--){const Ft=+Date.now();Pt=this._cluster(Pt,xt),this.trees[xt]=new ri(Pt,Ni,Si,yt,Float32Array),De&&console.log("z%d: %d clusters in %dms",xt,Pt.length,+Date.now()-Ft)}return De&&console.timeEnd("total time"),this}getClusters(we,De){let qe=((we[0]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,we[1]));let yt=180===we[2]?180:((we[2]+180)%360+360)%360-180;const Ot=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)qe=-180,yt=180;else if(qe>yt){const tn=this.getClusters([qe,it,180,Ot],De),ve=this.getClusters([-180,it,yt,Ot],De);return tn.concat(ve)}const Pt=this.trees[this._limitZoom(De)],xt=Pt.range(Fr(qe),As(Ot),Fr(yt),As(it)),Ft=[];for(const tn of xt){const ve=Pt.points[tn];Ft.push(ve.numPoints?_r(ve):this.points[ve.index])}return Ft}getChildren(we){const De=this._getOriginId(we),qe=this._getOriginZoom(we),it="No cluster with the specified id.",yt=this.trees[qe];if(!yt)throw new Error(it);const Ot=yt.points[De];if(!Ot)throw new Error(it);const Pt=this.options.radius/(this.options.extent*Math.pow(2,qe-1)),xt=yt.within(Ot.x,Ot.y,Pt),Ft=[];for(const tn of xt){const ve=yt.points[tn];ve.parentId===we&&Ft.push(ve.numPoints?_r(ve):this.points[ve.index])}if(0===Ft.length)throw new Error(it);return Ft}getLeaves(we,De,qe){const it=[];return this._appendLeaves(it,we,De=De||10,qe=qe||0,0),it}getTile(we,De,qe){const it=this.trees[this._limitZoom(we)],yt=Math.pow(2,we),{extent:Ot,radius:Pt}=this.options,xt=Pt/Ot,Ft=(qe-xt)/yt,tn=(qe+1+xt)/yt,ve={features:[]};return this._addTileFeatures(it.range((De-xt)/yt,Ft,(De+1+xt)/yt,tn),it.points,De,qe,yt,ve),0===De&&this._addTileFeatures(it.range(1-xt/yt,Ft,1,tn),it.points,yt,qe,yt,ve),De===yt-1&&this._addTileFeatures(it.range(0,Ft,xt/yt,tn),it.points,-1,qe,yt,ve),ve.features.length?ve:null}getClusterExpansionZoom(we){let De=this._getOriginZoom(we)-1;for(;De<=this.options.maxZoom;){const qe=this.getChildren(we);if(De++,1!==qe.length)break;we=qe[0].properties.cluster_id}return De}_appendLeaves(we,De,qe,it,yt){const Ot=this.getChildren(De);for(const Pt of Ot){const xt=Pt.properties;if(xt&&xt.cluster?yt+xt.point_count<=it?yt+=xt.point_count:yt=this._appendLeaves(we,xt.cluster_id,qe,it,yt):yt<it?yt++:we.push(Pt),we.length===qe)break}return yt}_addTileFeatures(we,De,qe,it,yt,Ot){for(const Pt of we){const xt=De[Pt],Ft=xt.numPoints;let tn,ve,d;if(Ft)tn=io(xt),ve=xt.x,d=xt.y;else{const C=this.points[xt.index];tn=C.properties,ve=Fr(C.geometry.coordinates[0]),d=As(C.geometry.coordinates[1])}const p={type:1,geometry:[[Math.round(this.options.extent*(ve*yt-qe)),Math.round(this.options.extent*(d*yt-it))]],tags:tn};let y;Ft?y=xt.id:this.options.generateId?y=xt.index:this.points[xt.index].id&&(y=this.points[xt.index].id),void 0!==y&&(p.id=y),Ot.features.push(p)}}_limitZoom(we){return Math.max(this.options.minZoom,Math.min(+we,this.options.maxZoom+1))}_cluster(we,De){const qe=[],{radius:it,extent:yt,reduce:Ot,minPoints:Pt}=this.options,xt=it/(yt*Math.pow(2,De));for(let Ft=0;Ft<we.length;Ft++){const tn=we[Ft];if(tn.zoom<=De)continue;tn.zoom=De;const ve=this.trees[De+1],d=ve.within(tn.x,tn.y,xt),p=tn.numPoints||1;let y=p;for(const C of d){const M=ve.points[C];M.zoom>De&&(y+=M.numPoints||1)}if(y>=Pt){let C=tn.x*p,M=tn.y*p,L=Ot&&p>1?this._map(tn,!0):null;const R=(Ft<<5)+(De+1)+this.points.length;for(const H of d){const G=ve.points[H];if(G.zoom<=De)continue;G.zoom=De;const J=G.numPoints||1;C+=G.x*J,M+=G.y*J,G.parentId=R,Ot&&(L||(L=this._map(tn,!0)),Ot(L,this._map(G)))}tn.parentId=R,qe.push(qi(C/y,M/y,R,y,L))}else if(qe.push(tn),y>1)for(const C of d){const M=ve.points[C];M.zoom<=De||(M.zoom=De,qe.push(M))}}return qe}_getOriginId(we){return we-this.points.length>>5}_getOriginZoom(we){return(we-this.points.length)%32}_map(we,De){if(we.numPoints)return De?ds({},we.properties):we.properties;const qe=this.points[we.index].properties,it=this.options.map(qe);return De&&it===qe?ds({},it):it}}function qi(Ge,we,De,qe,it){return{x:jn(Ge),y:jn(we),zoom:1/0,id:De,parentId:-1,numPoints:qe,properties:it}}function Io(Ge,we){const[De,qe]=Ge.geometry.coordinates;return{x:jn(Fr(De)),y:jn(As(qe)),zoom:1/0,index:we,parentId:-1}}function _r(Ge){return{type:"Feature",id:Ge.id,properties:io(Ge),geometry:{type:"Point",coordinates:[(we=Ge.x,360*(we-.5)),Ri(Ge.y)]}};var we}function io(Ge){const we=Ge.numPoints,De=we>=1e4?`${Math.round(we/1e3)}k`:we>=1e3?Math.round(we/100)/10+"k":we;return ds(ds({},Ge.properties),{cluster:!0,cluster_id:Ge.id,point_count:we,point_count_abbreviated:De})}function Fr(Ge){return Ge/360+.5}function As(Ge){const we=Math.sin(Ge*Math.PI/180),De=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return De<0?0:De>1?1:De}function Ri(Ge){const we=(180-360*Ge)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function ds(Ge,we){for(const De in we)Ge[De]=we[De];return Ge}function Ni(Ge){return Ge.x}function Si(Ge){return Ge.y}function uo(Ge,we,De,qe){for(var it,yt=qe,Ot=De-we>>1,Pt=De-we,xt=Ge[we],Ft=Ge[we+1],tn=Ge[De],ve=Ge[De+1],d=we+3;d<De;d+=3){var p=Po(Ge[d],Ge[d+1],xt,Ft,tn,ve);if(p>yt)it=d,yt=p;else if(p===yt){var y=Math.abs(d-Ot);y<Pt&&(it=d,Pt=y)}}yt>qe&&(it-we>3&&uo(Ge,we,it,qe),Ge[it+2]=yt,De-it>3&&uo(Ge,it,De,qe))}function Po(Ge,we,De,qe,it,yt){var Ot=it-De,Pt=yt-qe;if(0!==Ot||0!==Pt){var xt=((Ge-De)*Ot+(we-qe)*Pt)/(Ot*Ot+Pt*Pt);xt>1?(De=it,qe=yt):xt>0&&(De+=Ot*xt,qe+=Pt*xt)}return(Ot=Ge-De)*Ot+(Pt=we-qe)*Pt}function Yn(Ge,we,De,qe){var it={id:void 0===Ge?null:Ge,type:we,geometry:De,tags:qe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(yt){var Ot=yt.geometry,Pt=yt.type;if("Point"===Pt||"MultiPoint"===Pt||"LineString"===Pt)xr(yt,Ot);else if("Polygon"===Pt||"MultiLineString"===Pt)for(var xt=0;xt<Ot.length;xt++)xr(yt,Ot[xt]);else if("MultiPolygon"===Pt)for(xt=0;xt<Ot.length;xt++)for(var Ft=0;Ft<Ot[xt].length;Ft++)xr(yt,Ot[xt][Ft])}(it),it}function xr(Ge,we){for(var De=0;De<we.length;De+=3)Ge.minX=Math.min(Ge.minX,we[De]),Ge.minY=Math.min(Ge.minY,we[De+1]),Ge.maxX=Math.max(Ge.maxX,we[De]),Ge.maxY=Math.max(Ge.maxY,we[De+1])}function Hr(Ge,we,De,qe){if(we.geometry){var it=we.geometry.coordinates,yt=we.geometry.type,Ot=Math.pow(De.tolerance/((1<<De.maxZoom)*De.extent),2),Pt=[],xt=we.id;if(De.promoteId?xt=we.properties[De.promoteId]:De.generateId&&(xt=qe||0),"Point"===yt)wr(it,Pt);else if("MultiPoint"===yt)for(var Ft=0;Ft<it.length;Ft++)wr(it[Ft],Pt);else if("LineString"===yt)is(it,Pt,Ot,!1);else if("MultiLineString"===yt){if(De.lineMetrics){for(Ft=0;Ft<it.length;Ft++)is(it[Ft],Pt=[],Ot,!1),Ge.push(Yn(xt,"LineString",Pt,we.properties));return}vu(it,Pt,Ot,!1)}else if("Polygon"===yt)vu(it,Pt,Ot,!0);else{if("MultiPolygon"!==yt){if("GeometryCollection"===yt){for(Ft=0;Ft<we.geometry.geometries.length;Ft++)Hr(Ge,{id:xt,geometry:we.geometry.geometries[Ft],properties:we.properties},De,qe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ft=0;Ft<it.length;Ft++){var tn=[];vu(it[Ft],tn,Ot,!0),Pt.push(tn)}}Ge.push(Yn(xt,yt,Pt,we.properties))}}function wr(Ge,we){we.push(ho(Ge[0])),we.push(Gr(Ge[1])),we.push(0)}function is(Ge,we,De,qe){for(var it,yt,Ot=0,Pt=0;Pt<Ge.length;Pt++){var xt=ho(Ge[Pt][0]),Ft=Gr(Ge[Pt][1]);we.push(xt),we.push(Ft),we.push(0),Pt>0&&(Ot+=qe?(it*Ft-xt*yt)/2:Math.sqrt(Math.pow(xt-it,2)+Math.pow(Ft-yt,2))),it=xt,yt=Ft}var tn=we.length-3;we[2]=1,uo(we,0,tn,De),we[tn+2]=1,we.size=Math.abs(Ot),we.start=0,we.end=we.size}function vu(Ge,we,De,qe){for(var it=0;it<Ge.length;it++){var yt=[];is(Ge[it],yt,De,qe),we.push(yt)}}function ho(Ge){return Ge/360+.5}function Gr(Ge){var we=Math.sin(Ge*Math.PI/180),De=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return De<0?0:De>1?1:De}function rs(Ge,we,De,qe,it,yt,Ot,Pt){if(qe/=we,yt>=(De/=we)&&Ot<qe)return Ge;if(Ot<De||yt>=qe)return null;for(var xt=[],Ft=0;Ft<Ge.length;Ft++){var tn=Ge[Ft],ve=tn.geometry,d=tn.type,p=0===it?tn.minX:tn.minY,y=0===it?tn.maxX:tn.maxY;if(p>=De&&y<qe)xt.push(tn);else if(!(y<De||p>=qe)){var C=[];if("Point"===d||"MultiPoint"===d)jr(ve,C,De,qe,it);else if("LineString"===d)$n(ve,C,De,qe,it,!1,Pt.lineMetrics);else if("MultiLineString"===d)Bl(ve,C,De,qe,it,!1);else if("Polygon"===d)Bl(ve,C,De,qe,it,!0);else if("MultiPolygon"===d)for(var M=0;M<ve.length;M++){var L=[];Bl(ve[M],L,De,qe,it,!0),L.length&&C.push(L)}if(C.length){if(Pt.lineMetrics&&"LineString"===d){for(M=0;M<C.length;M++)xt.push(Yn(tn.id,d,C[M],tn.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===C.length?(d="LineString",C=C[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===C.length?"Point":"MultiPoint"),xt.push(Yn(tn.id,d,C,tn.tags))}}}return xt.length?xt:null}function jr(Ge,we,De,qe,it){for(var yt=0;yt<Ge.length;yt+=3){var Ot=Ge[yt+it];Ot>=De&&Ot<=qe&&(we.push(Ge[yt]),we.push(Ge[yt+1]),we.push(Ge[yt+2]))}}function $n(Ge,we,De,qe,it,yt,Ot){for(var Pt,xt,Ft=Ei(Ge),tn=0===it?ys:Cr,ve=Ge.start,d=0;d<Ge.length-3;d+=3){var p=Ge[d],y=Ge[d+1],C=Ge[d+2],M=Ge[d+3],L=Ge[d+4],R=0===it?p:y,H=0===it?M:L,G=!1;Ot&&(Pt=Math.sqrt(Math.pow(p-M,2)+Math.pow(y-L,2))),R<De?H>De&&(xt=tn(Ft,p,y,M,L,De),Ot&&(Ft.start=ve+Pt*xt)):R>qe?H<qe&&(xt=tn(Ft,p,y,M,L,qe),Ot&&(Ft.start=ve+Pt*xt)):Us(Ft,p,y,C),H<De&&R>=De&&(xt=tn(Ft,p,y,M,L,De),G=!0),H>qe&&R<=qe&&(xt=tn(Ft,p,y,M,L,qe),G=!0),!yt&&G&&(Ot&&(Ft.end=ve+Pt*xt),we.push(Ft),Ft=Ei(Ge)),Ot&&(ve+=Pt)}var J=Ge.length-3;p=Ge[J],y=Ge[J+1],C=Ge[J+2],(R=0===it?p:y)>=De&&R<=qe&&Us(Ft,p,y,C),J=Ft.length-3,yt&&J>=3&&(Ft[J]!==Ft[0]||Ft[J+1]!==Ft[1])&&Us(Ft,Ft[0],Ft[1],Ft[2]),Ft.length&&we.push(Ft)}function Ei(Ge){var we=[];return we.size=Ge.size,we.start=Ge.start,we.end=Ge.end,we}function Bl(Ge,we,De,qe,it,yt){for(var Ot=0;Ot<Ge.length;Ot++)$n(Ge[Ot],we,De,qe,it,yt,!1)}function Us(Ge,we,De,qe){Ge.push(we),Ge.push(De),Ge.push(qe)}function ys(Ge,we,De,qe,it,yt){var Ot=(yt-we)/(qe-we);return Ge.push(yt),Ge.push(De+(it-De)*Ot),Ge.push(1),Ot}function Cr(Ge,we,De,qe,it,yt){var Ot=(yt-De)/(it-De);return Ge.push(we+(qe-we)*Ot),Ge.push(yt),Ge.push(1),Ot}function Wo(Ge,we){for(var De=[],qe=0;qe<Ge.length;qe++){var it,yt=Ge[qe],Ot=yt.type;if("Point"===Ot||"MultiPoint"===Ot||"LineString"===Ot)it=cc(yt.geometry,we);else if("MultiLineString"===Ot||"Polygon"===Ot){it=[];for(var Pt=0;Pt<yt.geometry.length;Pt++)it.push(cc(yt.geometry[Pt],we))}else if("MultiPolygon"===Ot)for(it=[],Pt=0;Pt<yt.geometry.length;Pt++){for(var xt=[],Ft=0;Ft<yt.geometry[Pt].length;Ft++)xt.push(cc(yt.geometry[Pt][Ft],we));it.push(xt)}De.push(Yn(yt.id,Ot,it,yt.tags))}return De}function cc(Ge,we){var De=[];De.size=Ge.size,void 0!==Ge.start&&(De.start=Ge.start,De.end=Ge.end);for(var qe=0;qe<Ge.length;qe+=3)De.push(Ge[qe]+we,Ge[qe+1],Ge[qe+2]);return De}function ft(Ge,we){if(Ge.transformed)return Ge;var De,qe,it,yt=1<<Ge.z,Ot=Ge.x,Pt=Ge.y;for(De=0;De<Ge.features.length;De++){var xt=Ge.features[De],Ft=xt.geometry,tn=xt.type;if(xt.geometry=[],1===tn)for(qe=0;qe<Ft.length;qe+=2)xt.geometry.push(dt(Ft[qe],Ft[qe+1],we,yt,Ot,Pt));else for(qe=0;qe<Ft.length;qe++){var ve=[];for(it=0;it<Ft[qe].length;it+=2)ve.push(dt(Ft[qe][it],Ft[qe][it+1],we,yt,Ot,Pt));xt.geometry.push(ve)}}return Ge.transformed=!0,Ge}function dt(Ge,we,De,qe,it,yt){return[Math.round(De*(Ge*qe-it)),Math.round(De*(we*qe-yt))]}function Tt(Ge,we,De,qe,it){for(var yt=we===it.maxZoom?0:it.tolerance/((1<<we)*it.extent),Ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:De,y:qe,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Pt=0;Pt<Ge.length;Pt++){Ot.numFeatures++,Kt(Ot,Ge[Pt],yt,it);var xt=Ge[Pt].minX,Ft=Ge[Pt].minY,tn=Ge[Pt].maxX,ve=Ge[Pt].maxY;xt<Ot.minX&&(Ot.minX=xt),Ft<Ot.minY&&(Ot.minY=Ft),tn>Ot.maxX&&(Ot.maxX=tn),ve>Ot.maxY&&(Ot.maxY=ve)}return Ot}function Kt(Ge,we,De,qe){var it=we.geometry,yt=we.type,Ot=[];if("Point"===yt||"MultiPoint"===yt)for(var Pt=0;Pt<it.length;Pt+=3)Ot.push(it[Pt]),Ot.push(it[Pt+1]),Ge.numPoints++,Ge.numSimplified++;else if("LineString"===yt)Lt(Ot,it,Ge,De,!1,!1);else if("MultiLineString"===yt||"Polygon"===yt)for(Pt=0;Pt<it.length;Pt++)Lt(Ot,it[Pt],Ge,De,"Polygon"===yt,0===Pt);else if("MultiPolygon"===yt)for(var xt=0;xt<it.length;xt++){var Ft=it[xt];for(Pt=0;Pt<Ft.length;Pt++)Lt(Ot,Ft[Pt],Ge,De,!0,0===Pt)}if(Ot.length){var tn=we.tags||null;if("LineString"===yt&&qe.lineMetrics){for(var ve in tn={},we.tags)tn[ve]=we.tags[ve];tn.mapbox_clip_start=it.start/it.size,tn.mapbox_clip_end=it.end/it.size}var d={geometry:Ot,type:"Polygon"===yt||"MultiPolygon"===yt?3:"LineString"===yt||"MultiLineString"===yt?2:1,tags:tn};null!==we.id&&(d.id=we.id),Ge.features.push(d)}}function Lt(Ge,we,De,qe,it,yt){var Ot=qe*qe;if(qe>0&&we.size<(it?Ot:qe))De.numPoints+=we.length/3;else{for(var Pt=[],xt=0;xt<we.length;xt+=3)(0===qe||we[xt+2]>Ot)&&(De.numSimplified++,Pt.push(we[xt]),Pt.push(we[xt+1])),De.numPoints++;it&&function(Ft,tn){for(var ve=0,d=0,p=Ft.length,y=p-2;d<p;y=d,d+=2)ve+=(Ft[d]-Ft[y])*(Ft[d+1]+Ft[y+1]);if(ve>0===tn)for(d=0,p=Ft.length;d<p/2;d+=2){var C=Ft[d],M=Ft[d+1];Ft[d]=Ft[p-2-d],Ft[d+1]=Ft[p-1-d],Ft[p-2-d]=C,Ft[p-1-d]=M}}(Pt,yt),Ge.push(Pt)}}function Bn(Ge,we){var De=(we=this.options=function(it,yt){for(var Ot in yt)it[Ot]=yt[Ot];return it}(Object.create(this.options),we)).debug;if(De&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");var it,yt,Ot,Pt,xt,Ft,qe=function(it,yt){var Ot=[];if("FeatureCollection"===it.type)for(var Pt=0;Pt<it.features.length;Pt++)Hr(Ot,it.features[Pt],yt,Pt);else Hr(Ot,"Feature"===it.type?it:{geometry:it},yt);return Ot}(Ge,we);this.tiles={},this.tileCoords=[],De&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(it=qe,yt=we,Ot=yt.buffer/yt.extent,Pt=it,xt=rs(it,1,-1-Ot,Ot,0,-1,2,yt),Ft=rs(it,1,1-Ot,2+Ot,0,-1,2,yt),(xt||Ft)&&(Pt=rs(it,1,-Ot,1+Ot,0,-1,2,yt)||[],xt&&(Pt=Wo(xt,1).concat(Pt)),Ft&&(Pt=Pt.concat(Wo(Ft,-1)))),qe=Pt).length&&this.splitTile(qe,0,0,0),De&&(qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function di(Ge,we,De){return 32*((1<<Ge)*De+we)+Ge}function Oi(Ge,we){const De=Ge.tileID.canonical;if(!this._geoJSONIndex)return we(null,null);const qe=this._geoJSONIndex.getTile(De.z,De.x,De.y);if(!qe)return we(null,null);const it=new an(qe.features);let yt=Ui(it);0===yt.byteOffset&&yt.byteLength===yt.buffer.byteLength||(yt=new Uint8Array(yt)),we(null,{vectorTile:it,rawData:yt.buffer})}Bn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Bn.prototype.splitTile=function(Ge,we,De,qe,it,yt,Ot){for(var Pt=[Ge,we,De,qe],xt=this.options,Ft=xt.debug;Pt.length;){qe=Pt.pop(),De=Pt.pop(),we=Pt.pop(),Ge=Pt.pop();var tn=1<<we,ve=di(we,De,qe),d=this.tiles[ve];if(!d&&(Ft>1&&console.time("creation"),d=this.tiles[ve]=Tt(Ge,we,De,qe,xt),this.tileCoords.push({z:we,x:De,y:qe}),Ft)){Ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,De,qe,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+we;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=Ge,it){if(we===xt.maxZoom||we===it)continue;var y=1<<it-we;if(De!==Math.floor(yt/y)||qe!==Math.floor(Ot/y))continue}else if(we===xt.indexMaxZoom||d.numPoints<=xt.indexMaxPoints)continue;if(d.source=null,0!==Ge.length){Ft>1&&console.time("clipping");var C,M,L,R,H,G,J=.5*xt.buffer/xt.extent,te=.5-J,K=.5+J,ae=1+J;C=M=L=R=null,H=rs(Ge,tn,De-J,De+K,0,d.minX,d.maxX,xt),G=rs(Ge,tn,De+te,De+ae,0,d.minX,d.maxX,xt),Ge=null,H&&(C=rs(H,tn,qe-J,qe+K,1,d.minY,d.maxY,xt),M=rs(H,tn,qe+te,qe+ae,1,d.minY,d.maxY,xt),H=null),G&&(L=rs(G,tn,qe-J,qe+K,1,d.minY,d.maxY,xt),R=rs(G,tn,qe+te,qe+ae,1,d.minY,d.maxY,xt),G=null),Ft>1&&console.timeEnd("clipping"),Pt.push(C||[],we+1,2*De,2*qe),Pt.push(M||[],we+1,2*De,2*qe+1),Pt.push(L||[],we+1,2*De+1,2*qe),Pt.push(R||[],we+1,2*De+1,2*qe+1)}}},Bn.prototype.getTile=function(Ge,we,De){var qe=this.options,it=qe.extent,yt=qe.debug;if(Ge<0||Ge>24)return null;var Ot=1<<Ge,Pt=di(Ge,we=(we%Ot+Ot)%Ot,De);if(this.tiles[Pt])return ft(this.tiles[Pt],it);yt>1&&console.log("drilling down to z%d-%d-%d",Ge,we,De);for(var xt,Ft=Ge,tn=we,ve=De;!xt&&Ft>0;)Ft--,tn=Math.floor(tn/2),ve=Math.floor(ve/2),xt=this.tiles[di(Ft,tn,ve)];return xt&&xt.source?(yt>1&&console.log("found parent tile z%d-%d-%d",Ft,tn,ve),yt>1&&console.time("drilling down"),this.splitTile(xt.source,Ft,tn,ve,Ge,we,De),yt>1&&console.timeEnd("drilling down"),this.tiles[Pt]?ft(this.tiles[Pt],it):null):null};class sr extends k.VectorTileWorkerSource{constructor(we,De,qe,it,yt){super(we,De,qe,it,Oi),yt&&(this.loadGeoJSON=yt)}loadData(we,De){const qe=we&&we.request,it=qe&&qe.collectResourceTiming;this.loadGeoJSON(we,(yt,Ot)=>{if(yt||!Ot)return De(yt);if("object"!=typeof Ot)return De(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`));{Ve(Ot,!0);try{if(we.filter){const xt=k.createExpression(we.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===xt.result)throw new Error(xt.value.map(tn=>`${tn.key}: ${tn.message}`).join(", "));const Ft=Ot.features.filter(tn=>xt.value.evaluate({zoom:0},tn));Ot={type:"FeatureCollection",features:Ft}}this._geoJSONIndex=we.cluster?new li(function({superclusterOptions:xt,clusterProperties:Ft}){if(!Ft||!xt)return xt;const tn={},ve={},d={accumulated:null,zoom:0},p={properties:null},y=Object.keys(Ft);for(const C of y){const[M,L]=Ft[C],R=k.createExpression(L),H=k.createExpression("string"==typeof M?[M,["accumulated"],["get",C]]:M);tn[C]=R.value,ve[C]=H.value}return xt.map=C=>{p.properties=C;const M={};for(const L of y)M[L]=tn[L].evaluate(d,p);return M},xt.reduce=(C,M)=>{p.properties=M;for(const L of y)d.accumulated=C[L],C[L]=ve[L].evaluate(d,p)},xt}(we)).load(Ot.features):new Bn(xt=Ot,we.geojsonVtOptions)}catch(xt){return De(xt)}this.loaded={};const Pt={};if(it){const xt=k.getPerformanceMeasurement(qe);xt&&(Pt.resourceTiming={},Pt.resourceTiming[we.source]=JSON.parse(JSON.stringify(xt)))}De(null,Pt)}var xt})}reloadTile(we,De){const qe=this.loaded;return qe&&qe[we.uid]?super.reloadTile(we,De):this.loadTile(we,De)}loadGeoJSON(we,De){if(we.request)k.getJSON(we.request,De);else{if("string"!=typeof we.data)return De(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`));try{return De(null,JSON.parse(we.data))}catch(qe){return De(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(we,De){try{De(null,this._geoJSONIndex.getClusterExpansionZoom(we.clusterId))}catch(qe){De(qe)}}getClusterChildren(we,De){try{De(null,this._geoJSONIndex.getChildren(we.clusterId))}catch(qe){De(qe)}}getClusterLeaves(we,De){try{De(null,this._geoJSONIndex.getLeaves(we.clusterId,we.limit,we.offset))}catch(qe){De(qe)}}}class ir{constructor(we){this.self=we,this.actor=new k.Actor(we,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:k.VectorTileWorkerSource,geojson:sr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(De,qe)=>{if(this.workerSourceTypes[De])throw new Error(`Worker source with name "${De}" already registered.`);this.workerSourceTypes[De]=qe},this.self.registerRTLTextPlugin=De=>{if(k.plugin.isParsed())throw new Error("RTL text plugin already registered.");k.plugin.applyArabicShaping=De.applyArabicShaping,k.plugin.processBidirectionalText=De.processBidirectionalText,k.plugin.processStyledBidirectionalText=De.processStyledBidirectionalText}}checkIfReady(we,De,qe){qe()}setReferrer(we,De){this.referrer=De}spriteLoaded(we,De){this.isSpriteLoaded=De;for(const qe in this.workerSources[we]){const it=this.workerSources[we][qe];for(const yt in it)it[yt]instanceof k.VectorTileWorkerSource&&(it[yt].isSpriteLoaded=De,it[yt].fire(new k.Event("isSpriteLoaded")))}}setImages(we,De,qe){this.availableImages[we]=De;for(const it in this.workerSources[we]){const yt=this.workerSources[we][it];for(const Ot in yt)yt[Ot].availableImages=De}qe()}enableTerrain(we,De,qe){this.terrain=De,qe()}setLayers(we,De,qe){this.getLayerIndex(we).replace(De),qe()}updateLayers(we,De,qe){this.getLayerIndex(we).update(De.layers,De.removedIds),qe()}loadTile(we,De,qe){const it=this.enableTerrain?k.extend({enableTerrain:this.terrain},De):De;this.getWorkerSource(we,De.type,De.source).loadTile(it,qe)}loadDEMTile(we,De,qe){const it=this.enableTerrain?k.extend({buildQuadTree:this.terrain},De):De;this.getDEMWorkerSource(we,De.source).loadTile(it,qe)}reloadTile(we,De,qe){const it=this.enableTerrain?k.extend({enableTerrain:this.terrain},De):De;this.getWorkerSource(we,De.type,De.source).reloadTile(it,qe)}abortTile(we,De,qe){this.getWorkerSource(we,De.type,De.source).abortTile(De,qe)}removeTile(we,De,qe){this.getWorkerSource(we,De.type,De.source).removeTile(De,qe)}removeSource(we,De,qe){if(!this.workerSources[we]||!this.workerSources[we][De.type]||!this.workerSources[we][De.type][De.source])return;const it=this.workerSources[we][De.type][De.source];delete this.workerSources[we][De.type][De.source],void 0!==it.removeSource?it.removeSource(De,qe):qe()}loadWorkerSource(we,De,qe){try{this.self.importScripts(De.url),qe()}catch(it){qe(it.toString())}}syncRTLPluginState(we,De,qe){try{k.plugin.setState(De);const it=k.plugin.getPluginURL();if(k.plugin.isLoaded()&&!k.plugin.isParsed()&&null!=it){this.self.importScripts(it);const yt=k.plugin.isParsed();qe(yt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${it}`),yt)}}catch(it){qe(it.toString())}}getAvailableImages(we){let De=this.availableImages[we];return De||(De=[]),De}getLayerIndex(we){let De=this.layerIndexes[we];return De||(De=this.layerIndexes[we]=new wt),De}getWorkerSource(we,De,qe){return this.workerSources[we]||(this.workerSources[we]={}),this.workerSources[we][De]||(this.workerSources[we][De]={}),this.workerSources[we][De][qe]||(this.workerSources[we][De][qe]=new this.workerSourceTypes[De]({send:(it,yt,Ot,Pt,xt,Ft)=>{this.actor.send(it,yt,Ot,we,xt,Ft)},scheduler:this.actor.scheduler},this.getLayerIndex(we),this.getAvailableImages(we),this.isSpriteLoaded)),this.workerSources[we][De][qe]}getDEMWorkerSource(we,De){return this.demWorkerSources[we]||(this.demWorkerSources[we]={}),this.demWorkerSources[we][De]||(this.demWorkerSources[we][De]=new je),this.demWorkerSources[we][De]}enforceCacheSizeLimit(we,De){k.enforceCacheSizeLimit(De)}getWorkerPerformanceMetrics(we,De,qe){qe(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ir(self)),ir}),Vt(0,function(k){var gt=Dt;function Dt(P){return f=P,!("undefined"==typeof window||"undefined"==typeof document||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var O,U,q=new Blob([""],{type:"text/javascript"}),ee=URL.createObjectURL(q);try{U=new Worker(ee),O=!0}catch(se){O=!1}return U&&U.terminate(),URL.revokeObjectURL(ee),O}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var O=document.createElement("canvas");O.width=O.height=1;var U=O.getContext("2d");if(!U)return!1;var q=U.getImageData(0,0,1,1);return q&&q.width===O.width}()||(void 0===wt[w=f&&f.failIfMajorPerformanceCaveat]&&(wt[w]=function(O){var U,ee,se,ue,q=(ee=O,se=document.createElement("canvas"),(ue=Object.create(Dt.webGLContextAttributes)).failIfMajorPerformanceCaveat=ee,se.getContext("webgl",ue)||se.getContext("experimental-webgl",ue));if(!q)return!1;try{U=q.createShader(q.VERTEX_SHADER)}catch(ee){return!1}return!(!U||q.isContextLost())&&(q.shaderSource(U,"void main() {}"),q.compileShader(U),!0===q.getShaderParameter(U,q.COMPILE_STATUS))}(w)),!wt[w]||document.documentMode));var f,w}var wt={};function Be(P,f){if(Array.isArray(P)){if(!Array.isArray(f)||P.length!==f.length)return!1;for(let w=0;w<P.length;w++)if(!Be(P[w],f[w]))return!1;return!0}if("object"==typeof P&&null!==P&&null!==f){if("object"!=typeof f||Object.keys(P).length!==Object.keys(f).length)return!1;for(const w in P)if(!Be(P[w],f[w]))return!1;return!0}return P===f}Dt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const je={create:function(P,f,w){const O=k.window.document.createElement(P);return void 0!==f&&(O.className=f),w&&w.appendChild(O),O},createNS:function(P,f){return k.window.document.createElementNS(P,f)}},Ve=k.window.document&&k.window.document.documentElement.style,Et=Ve&&void 0!==Ve.userSelect?"userSelect":"WebkitUserSelect";let lt;je.disableDrag=function(){Ve&&Et&&(lt=Ve[Et],Ve[Et]="none")},je.enableDrag=function(){Ve&&Et&&(Ve[Et]=lt)},je.setTransform=function(P,f){P.style.transform=f};let Ct=!1;try{const P=Object.defineProperty({},"passive",{get(){Ct=!0}});k.window.addEventListener("test",P,P),k.window.removeEventListener("test",P,P)}catch(P){Ct=!1}je.addEventListener=function(P,f,w,O={}){P.addEventListener(f,w,"passive"in O&&Ct?O:O.capture)},je.removeEventListener=function(P,f,w,O={}){P.removeEventListener(f,w,"passive"in O&&Ct?O:O.capture)};const zt=function(P){P.preventDefault(),P.stopPropagation(),k.window.removeEventListener("click",zt,!0)};function an(P,f,w){const O=P.offsetWidth===f.width?1:P.offsetWidth/f.width;return new k.pointGeometry((w.clientX-f.left)*O,(w.clientY-f.top)*O)}je.suppressClick=function(){k.window.addEventListener("click",zt,!0),k.window.setTimeout(()=>{k.window.removeEventListener("click",zt,!0)},0)},je.mousePos=function(P,f){const w=P.getBoundingClientRect();return an(P,w,f)},je.touchPos=function(P,f){const w=P.getBoundingClientRect(),O=[];for(let U=0;U<f.length;U++)O.push(an(P,w,f[U]));return O},je.mouseButton=function(P){return void 0!==k.window.InstallTrigger&&2===P.button&&P.ctrlKey&&k.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:P.button},je.remove=function(P){P.parentNode&&P.parentNode.removeChild(P)};class Qe{constructor(f,w){this.pos=f,this.dir=w}intersectsPlane(f,w,O){const U=k.dot(w,this.dir);if(Math.abs(U)<1e-6)return!1;const q=k.dot(k.sub(k.create(),f,this.pos),w)/U,ee=k.scaleAndAdd(k.create(),this.pos,this.dir,q);return k.copy(O,ee),!0}}class On{constructor(f,w){this.points=f,this.planes=w}static fromInvProjectionMatrix(f,w,O){const U=Math.pow(2,O),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(se=>{const ue=k.transformMat4([],se,f),me=1/ue[3]/w*U;return k.mul(ue,ue,[me,me,1/ue[3],me])}),ee=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(se=>{const ue=k.sub([],q[se[0]],q[se[1]]),me=k.sub([],q[se[2]],q[se[1]]),Ce=k.normalize([],k.cross([],ue,me)),Ae=-k.dot(Ce,q[se[1]]);return Ce.concat(Ae)});return new On(q,ee)}}class dn{constructor(f,w){this.min=f,this.max=w,this.center=k.scale([],k.add([],this.min,this.max),.5)}quadrant(f){const w=[f%2==0,f<2],O=k.clone(this.min),U=k.clone(this.max);for(let q=0;q<w.length;q++)O[q]=w[q]?this.min[q]:this.center[q],U[q]=w[q]?this.center[q]:this.max[q];return U[2]=this.max[2],new dn(O,U)}distanceX(f){return Math.max(Math.min(this.max[0],f[0]),this.min[0])-f[0]}distanceY(f){return Math.max(Math.min(this.max[1],f[1]),this.min[1])-f[1]}distanceZ(f){return Math.max(Math.min(this.max[2],f[2]),this.min[2])-f[2]}intersects(f){const w=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let O=!0;for(let U=0;U<f.planes.length;U++){const q=f.planes[U];let ee=0;for(let se=0;se<w.length;se++)ee+=k.dot$1(q,w[se])>=0;if(0===ee)return 0;ee!==w.length&&(O=!1)}if(O)return 2;for(let U=0;U<3;U++){let q=Number.MAX_VALUE,ee=-Number.MAX_VALUE;for(let se=0;se<f.points.length;se++){const ue=f.points[se][U]-this.min[U];q=Math.min(q,ue),ee=Math.max(ee,ue)}if(ee<0||q>this.max[U]-this.min[U])return 0}return 1}}function Mt(P){const{userImage:f}=P;return!!(f&&f.render&&f.render())&&(P.data.replace(new Uint8Array(f.data.buffer)),!0)}class Ui extends k.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new k.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(f){if(this.loaded!==f&&(this.loaded=f,f)){for(const{ids:w,callback:O}of this.requestors)this._notify(w,O);this.requestors=[]}}getImage(f){return this.images[f]}addImage(f,w){this._validate(f,w)&&(this.images[f]=w)}_validate(f,w){let O=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new k.ErrorEvent(new Error(`Image "${f}" has invalid "stretchX" value`))),O=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new k.ErrorEvent(new Error(`Image "${f}" has invalid "stretchY" value`))),O=!1),this._validateContent(w.content,w)||(this.fire(new k.ErrorEvent(new Error(`Image "${f}" has invalid "content" value`))),O=!1),O}_validateStretch(f,w){if(!f)return!0;let O=0;for(const U of f){if(U[0]<O||U[1]<U[0]||w<U[1])return!1;O=U[1]}return!0}_validateContent(f,w){return!(f&&(4!==f.length||f[0]<0||w.data.width<f[0]||f[1]<0||w.data.height<f[1]||f[2]<0||w.data.width<f[2]||f[3]<0||w.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))}updateImage(f,w){w.version=this.images[f].version+1,this.images[f]=w,this.updatedImages[f]=!0}removeImage(f){const w=this.images[f];delete this.images[f],delete this.patterns[f],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(f,w){let O=!0;if(!this.isLoaded())for(const U of f)this.images[U]||(O=!1);this.isLoaded()||O?this._notify(f,w):this.requestors.push({ids:f,callback:w})}_notify(f,w){const O={};for(const U of f){this.images[U]||this.fire(new k.Event("styleimagemissing",{id:U}));const q=this.images[U];q?O[U]={data:q.data.clone(),pixelRatio:q.pixelRatio,sdf:q.sdf,version:q.version,stretchX:q.stretchX,stretchY:q.stretchY,content:q.content,hasRenderCallback:Boolean(q.userImage&&q.userImage.render)}:k.warnOnce(`Image "${U}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}w(null,O)}getPixelSize(){const{width:f,height:w}=this.atlasImage;return{width:f,height:w}}getPattern(f){const w=this.patterns[f],O=this.getImage(f);if(!O)return null;if(w&&w.position.version===O.version)return w.position;if(w)w.position.version=O.version;else{const U={w:O.data.width+2,h:O.data.height+2,x:0,y:0},q=new k.ImagePosition(U,O);this.patterns[f]={bin:U,position:q}}return this._updatePatternAtlas(),this.patterns[f].position}bind(f){const w=f.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new k.Texture(f,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)}_updatePatternAtlas(){const f=[];for(const q in this.patterns)f.push(this.patterns[q].bin);const{w,h:O}=k.potpack(f),U=this.atlasImage;U.resize({width:w||1,height:O||1});for(const q in this.patterns){const{bin:ee}=this.patterns[q],se=ee.x+1,ue=ee.y+1,me=this.images[q].data,Ce=me.width,Ae=me.height;k.RGBAImage.copy(me,U,{x:0,y:0},{x:se,y:ue},{width:Ce,height:Ae}),k.RGBAImage.copy(me,U,{x:0,y:Ae-1},{x:se,y:ue-1},{width:Ce,height:1}),k.RGBAImage.copy(me,U,{x:0,y:0},{x:se,y:ue+Ae},{width:Ce,height:1}),k.RGBAImage.copy(me,U,{x:Ce-1,y:0},{x:se-1,y:ue},{width:1,height:Ae}),k.RGBAImage.copy(me,U,{x:0,y:0},{x:se+Ce,y:ue},{width:1,height:Ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(f){for(const w of f){if(this.callbackDispatchedThisFrame[w])continue;this.callbackDispatchedThisFrame[w]=!0;const O=this.images[w];Mt(O)&&this.updateImage(w,O)}}}const $r=new k.Properties({anchor:new k.DataConstantProperty(k.spec.light.anchor),position:new class{constructor(){this.specification=k.spec.light.position}possiblyEvaluate(P,f){return function([w,O,U]){const q=k.degToRad(O+90),ee=k.degToRad(U);return{x:w*Math.cos(q)*Math.sin(ee),y:w*Math.sin(q)*Math.sin(ee),z:w*Math.cos(ee),azimuthal:O,polar:U}}(P.expression.evaluate(f))}interpolate(P,f,w){return{x:k.number(P.x,f.x,w),y:k.number(P.y,f.y,w),z:k.number(P.z,f.z,w),azimuthal:k.number(P.azimuthal,f.azimuthal,w),polar:k.number(P.polar,f.polar,w)}}},color:new k.DataConstantProperty(k.spec.light.color),intensity:new k.DataConstantProperty(k.spec.light.intensity)}),Vn="-transition";class Di extends k.Evented{constructor(f){super(),this._transitionable=new k.Transitionable($r),this.setLight(f),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(f,w={}){if(!this._validate(k.validateLight,f,w))for(const O in f){const U=f[O];k.endsWith(O,Vn)?this._transitionable.setTransition(O.slice(0,-Vn.length),U):this._transitionable.setValue(O,U)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,w,O){return(!O||!1!==O.validate)&&k.emitValidationErrors(this,f.call(k.validateStyle,k.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:k.spec})))}}const Ur=new k.Properties({source:new k.DataConstantProperty(k.spec.terrain.source),exaggeration:new k.DataConstantProperty(k.spec.terrain.exaggeration)}),tr="-transition";class nr extends k.Evented{constructor(f){super(),this._transitionable=new k.Transitionable(Ur),this.set(f),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(f){for(const w in f){const O=f[w];k.endsWith(w,tr)?this._transitionable.setTransition(w.slice(0,-tr.length),O):this._transitionable.setValue(w,O)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}}function Zt(P,f,w,O){const U=k.smoothstep(45,65,w),[q,ee]=Gt(P,O),se=k.length(f);let ue=1-Math.min(1,Math.exp((se-q)/(ee-q)*-6));return ue*=ue*ue,ue=Math.min(1,1.00747*ue),ue*U*P.alpha}function Gt(P,f){const w=.5/Math.tan(.5*f);return[P.range[0]+w,P.range[1]+w]}const $t=new k.Properties({range:new k.DataConstantProperty(k.spec.fog.range),color:new k.DataConstantProperty(k.spec.fog.color),"horizon-blend":new k.DataConstantProperty(k.spec.fog["horizon-blend"])}),Ht="-transition";class fn extends k.Evented{constructor(f){super(),this._transitionable=new k.Transitionable($t),this.set(f),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(f,w={}){if(!this._validate(k.validateFog,f,w))for(const O in f){const U=f[O];k.endsWith(O,Ht)?this._transitionable.setTransition(O.slice(0,-Ht.length),U):this._transitionable.setValue(O,U)}}getOpacity(f){const w=this.properties&&this.properties.get("color")||1;return k.smoothstep(45,65,f)*w.a}getOpacityAtLatLng(f,w){return function(O,U,q){const ee=k.MercatorCoordinate.fromLngLat(U),se=q.elevation?q.elevation.getAtPointOrZero(ee):0,ue=[ee.x,ee.y,se];return k.transformMat4$1(ue,ue,q.mercatorFogMatrix),Zt(O,ue,q.pitch,q._fov)}(this.state,f,w)}getFovAdjustedRange(f){return Gt(this.state,f)}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,w,O){return(!O||!1!==O.validate)&&k.emitValidationErrors(this,f.call(k.validateStyle,k.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:k.spec})))}}class Yt{constructor(f,w){this.workerPool=f,this.actors=[],this.currentActor=0,this.id=k.uniqueId();const O=this.workerPool.acquire(this.id);for(let U=0;U<O.length;U++){const q=new Yt.Actor(O[U],w,this.id);q.name=`Worker ${U}`,this.actors.push(q)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(f,w,O){k.asyncAll(this.actors,(U,q)=>{U.send(f,w,q)},O=O||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(f=>{f.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Fn(P,f,w){return f*(k.EXTENT/(P.tileSize*Math.pow(2,w-P.tileID.overscaledZ)))}Yt.Actor=k.Actor;class hi{constructor(f,w,O,U){this.screenBounds=f,this.cameraPoint=w,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=O,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(q=>U.pointCoordinate3D(q)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(f,w){let O,U;if(f instanceof k.pointGeometry||"number"==typeof f[0]){const q=k.pointGeometry.convert(f);O=[k.pointGeometry.convert(f)],U=w.isPointAboveHorizon(q)}else{const q=k.pointGeometry.convert(f[0]),ee=k.pointGeometry.convert(f[1]);O=[q,ee],U=k.polygonizeBounds(q,ee).every(se=>w.isPointAboveHorizon(se))}return new hi(O,w.getCameraPoint(),U,w)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(f){return k.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],f)}bufferedCameraGeometry(f){const w=this.screenBounds[0],O=1===this.screenBounds.length?this.screenBounds[0].add(new k.pointGeometry(1,1)):this.screenBounds[1],U=k.polygonizeBounds(w,O,0,!1);return this.cameraPoint.y>O.y&&(this.cameraPoint.x>w.x&&this.cameraPoint.x<O.x?U.splice(3,0,this.cameraPoint):this.cameraPoint.x>=O.x?U[2]=this.cameraPoint:this.cameraPoint.x<=w.x&&(U[3]=this.cameraPoint)),k.bufferConvexPolygon(U,f)}containsTile(f,w,O){const U=f.queryPadding+1,q=O?this._bufferedCameraMercator(U,w).map(Ne=>f.tileID.getTilePoint(Ne)):this._bufferedScreenMercator(U,w).map(Ne=>f.tileID.getTilePoint(Ne)),ee=this.screenGeometryMercator.map(Ne=>f.tileID.getTileVec3(Ne)),se=ee.map(Ne=>new k.pointGeometry(Ne[0],Ne[1])),ue=w.getFreeCameraOptions().position||new k.MercatorCoordinate(0,0,0),me=f.tileID.getTileVec3(ue),Ce=ee.map(Ne=>{const $e=k.sub(Ne,Ne,me);return k.normalize($e,$e),new Qe(me,$e)}),Ae=Fn(f,1,w.zoom);if(k.polygonIntersectsBox(q,0,0,k.EXTENT,k.EXTENT))return{queryGeometry:this,tilespaceGeometry:se,tilespaceRays:Ce,bufferedTilespaceGeometry:q,bufferedTilespaceBounds:(Pe=k.getBounds(q),Pe.min.x=k.clamp(Pe.min.x,0,k.EXTENT),Pe.min.y=k.clamp(Pe.min.y,0,k.EXTENT),Pe.max.x=k.clamp(Pe.max.x,0,k.EXTENT),Pe.max.y=k.clamp(Pe.max.y,0,k.EXTENT),Pe),tile:f,tileID:f.tileID,pixelToTileUnitsFactor:Ae};var Pe}_bufferedScreenMercator(f,w){const O=mi(f);if(this._screenRaycastCache[O])return this._screenRaycastCache[O];{const U=this.bufferedScreenGeometry(f).map(q=>w.pointCoordinate3D(q));return this._screenRaycastCache[O]=U,U}}_bufferedCameraMercator(f,w){const O=mi(f);if(this._cameraRaycastCache[O])return this._cameraRaycastCache[O];{const U=this.bufferedCameraGeometry(f).map(q=>w.pointCoordinate3D(q));return this._cameraRaycastCache[O]=U,U}}}function mi(P){return 100*P|0}function Un(P,f,w){const O=function(U,q){if(U)return w(U);if(q){const ee=k.pick(k.extend(q,P),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);q.vector_layers&&(ee.vectorLayers=q.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(se=>se.id)),ee.tiles=f.canonicalizeTileset(ee,P.url),w(null,ee)}};return P.url?k.getJSON(f.transformRequest(f.normalizeSourceURL(P.url),k.ResourceType.Source),O):k.exported.frame(()=>O(null,P))}class ri{constructor(f,w,O){this.bounds=k.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=w||0,this.maxzoom=O||24}validateBounds(f){return Array.isArray(f)&&4===f.length?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]}contains(f){const w=Math.pow(2,f.z),O=Math.floor(k.mercatorXfromLng(this.bounds.getWest())*w),U=Math.floor(k.mercatorYfromLat(this.bounds.getNorth())*w),q=Math.ceil(k.mercatorXfromLng(this.bounds.getEast())*w),ee=Math.ceil(k.mercatorYfromLat(this.bounds.getSouth())*w);return f.x>=O&&f.x<q&&f.y>=U&&f.y<ee}}class Hn{constructor(f,w,O){this.context=f;const U=f.gl;this.buffer=U.createBuffer(),this.dynamicDraw=Boolean(O),this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),U.bufferData(U.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?U.DYNAMIC_DRAW:U.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(f){const w=this.context.gl;this.context.unbindVAO(),this.bind(),w.bufferSubData(w.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const jn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xi{constructor(f,w,O,U){this.length=w.length,this.attributes=O,this.itemSize=w.bytesPerElement,this.dynamicDraw=U,this.context=f;const q=f.gl;this.buffer=q.createBuffer(),f.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(f){const w=this.context.gl;this.bind(),w.bufferSubData(w.ARRAY_BUFFER,0,f.arrayBuffer)}enableAttributes(f,w){for(let O=0;O<this.attributes.length;O++){const U=w.attributes[this.attributes[O].name];void 0!==U&&f.enableVertexAttribArray(U)}}setVertexAttribPointers(f,w,O){for(let U=0;U<this.attributes.length;U++){const q=this.attributes[U],ee=w.attributes[q.name];void 0!==ee&&f.vertexAttribPointer(ee,q.components,f[jn[q.type]],!1,this.itemSize,q.offset+this.itemSize*(O||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class li{constructor(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(f){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qi extends li{getDefault(){return k.Color.transparent}set(f){const w=this.current;(f.r!==w.r||f.g!==w.g||f.b!==w.b||f.a!==w.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class Io extends li{getDefault(){return 1}set(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)}}class _r extends li{getDefault(){return 0}set(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)}}class io extends li{getDefault(){return[!0,!0,!0,!0]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||f[3]!==w[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Fr extends li{getDefault(){return!0}set(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)}}class As extends li{getDefault(){return 255}set(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)}}class Ri extends li{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(f){const w=this.current;(f.func!==w.func||f.ref!==w.ref||f.mask!==w.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)}}class ds extends li{getDefault(){const f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)}}class Ni extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=f,this.dirty=!1}}class Si extends li{getDefault(){return[0,1]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)}}class uo extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=f,this.dirty=!1}}class Po extends li{getDefault(){return this.gl.LESS}set(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)}}class Yn extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.BLEND):w.disable(w.BLEND),this.current=f,this.dirty=!1}}class xr extends li{getDefault(){const f=this.gl;return[f.ONE,f.ZERO]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||this.dirty)&&(this.gl.blendFunc(f[0],f[1]),this.current=f,this.dirty=!1)}}class Hr extends li{getDefault(){return k.Color.transparent}set(f){const w=this.current;(f.r!==w.r||f.g!==w.g||f.b!==w.b||f.a!==w.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class wr extends li{getDefault(){return this.gl.FUNC_ADD}set(f){(f!==this.current||this.dirty)&&(this.gl.blendEquation(f),this.current=f,this.dirty=!1)}}class is extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;f?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=f,this.dirty=!1}}class vu extends li{getDefault(){return this.gl.BACK}set(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)}}class ho extends li{getDefault(){return this.gl.CCW}set(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)}}class Gr extends li{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}}class rs extends li{getDefault(){return this.gl.TEXTURE0}set(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)}}class jr extends li{getDefault(){const f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]}set(f){const w=this.current;(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||f[3]!==w[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class $n extends li{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,f),this.current=f,this.dirty=!1}}class Ei extends li{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class Bl extends li{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindTexture(w.TEXTURE_2D,f),this.current=f,this.dirty=!1}}class Us extends li{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class ys extends li{getDefault(){return null}set(f){const w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class Cr extends li{constructor(f){super(f),this.vao=f.extVertexArrayObject}getDefault(){return null}set(f){this.vao&&(f!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(f),this.current=f,this.dirty=!1)}}class Wo extends li{getDefault(){return 4}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}}class cc extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}}class ft extends li{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}}class dt extends li{constructor(f,w){super(f),this.context=f,this.parent=w}getDefault(){return null}}class Tt extends dt{setDirty(){this.dirty=!0}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}}class Kt extends dt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,this.attachment(),w.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class Lt extends Kt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Bn{constructor(f,w,O,U){this.context=f,this.width=w,this.height=O;const q=this.framebuffer=f.gl.createFramebuffer();this.colorAttachment=new Tt(f,q),U&&(this.depthAttachment=new Kt(f,q))}destroy(){const f=this.context.gl,w=this.colorAttachment.get();if(w&&f.deleteTexture(w),this.depthAttachment){const O=this.depthAttachment.get();O&&f.deleteRenderbuffer(O)}f.deleteFramebuffer(this.framebuffer)}}class di{constructor(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new qi(this),this.clearDepth=new Io(this),this.clearStencil=new _r(this),this.colorMask=new io(this),this.depthMask=new Fr(this),this.stencilMask=new As(this),this.stencilFunc=new Ri(this),this.stencilOp=new ds(this),this.stencilTest=new Ni(this),this.depthRange=new Si(this),this.depthTest=new uo(this),this.depthFunc=new Po(this),this.blend=new Yn(this),this.blendFunc=new xr(this),this.blendColor=new Hr(this),this.blendEquation=new wr(this),this.cullFace=new is(this),this.cullFaceSide=new vu(this),this.frontFace=new ho(this),this.program=new Gr(this),this.activeTexture=new rs(this),this.viewport=new jr(this),this.bindFramebuffer=new $n(this),this.bindRenderbuffer=new Ei(this),this.bindTexture=new Bl(this),this.bindVertexBuffer=new Us(this),this.bindElementBuffer=new ys(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Cr(this),this.pixelStoreUnpack=new Wo(this),this.pixelStoreUnpackPremultiplyAlpha=new cc(this),this.pixelStoreUnpackFlipY=new ft(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(f.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(f,w){return new Hn(this,f,w)}createVertexBuffer(f,w,O){return new xi(this,f,w,O)}createRenderbuffer(f,w,O){const U=this.gl,q=U.createRenderbuffer();return this.bindRenderbuffer.set(q),U.renderbufferStorage(U.RENDERBUFFER,f,w,O),this.bindRenderbuffer.set(null),q}createFramebuffer(f,w,O){return new Bn(this,f,w,O)}clear({color:f,depth:w,stencil:O}){const U=this.gl;let q=0;f&&(q|=U.COLOR_BUFFER_BIT,this.clearColor.set(f),this.colorMask.set([!0,!0,!0,!0])),void 0!==w&&(q|=U.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),void 0!==O&&(q|=U.STENCIL_BUFFER_BIT,this.clearStencil.set(O),this.stencilMask.set(255)),U.clear(q)}setCullFace(f){!1===f.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))}setDepthMode(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)}setStencilMode(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)}setColorMode(f){Be(f.blendFunction,k.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Oi extends k.Evented{constructor(f,w,O,U){super(),this.id=f,this.dispatcher=O,this.setEventedParent(U),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=k.extend({type:"raster"},w),k.extend(this,k.pick(w,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new k.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Un(this._options,this.map._requestManager,(f,w)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new k.ErrorEvent(f)):w&&(k.extend(this,w),w.bounds&&(this.tileBounds=new ri(w.bounds,this.minzoom,this.maxzoom)),k.postTurnstileEvent(w.tiles),this.fire(new k.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new k.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(f){this.map=f,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return k.extend({},this._options)}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,w){const O=k.exported.devicePixelRatio>=2,U=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),O,this.tileSize);f.request=k.getImage(this.map._requestManager.transformRequest(U,k.ResourceType.Tile),(q,ee,se,ue)=>{if(delete f.request,f.aborted)f.state="unloaded",w(null);else if(q)f.state="errored",w(q);else if(ee){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:se,expires:ue});const me=this.map.painter.context,Ce=me.gl;f.texture=this.map.painter.getTileTexture(ee.width),f.texture?f.texture.update(ee,{useMipmap:!0}):(f.texture=new k.Texture(me,ee,Ce.RGBA,{useMipmap:!0}),f.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),me.extTextureFilterAnisotropic&&Ce.texParameterf(Ce.TEXTURE_2D,me.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,me.extTextureFilterAnisotropicMax)),f.state="loaded",k.cacheEntryPossiblyAdded(this.dispatcher),w(null)}})}abortTile(f,w){f.request&&(f.request.cancel(),delete f.request),w()}unloadTile(f,w){f.texture&&this.map.painter.saveTileTexture(f.texture),w()}hasTransition(){return!1}}let sr;var ir=k.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ge extends k.Evented{constructor(f,w,O,U){super(),this.id=f,this.dispatcher=O,this.coordinates=w.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(U),this.options=w}load(f,w){this._loaded=!1,this.fire(new k.Event("dataloading",{dataType:"source"})),this.url=this.options.url,k.getImage(this.map._requestManager.transformRequest(this.url,k.ResourceType.Image),(O,U)=>{this._loaded=!0,O?this.fire(new k.ErrorEvent(O)):U&&(this.image=k.exported.getImageData(U),f&&(this.coordinates=f),w&&w(),this._finishLoading())})}loaded(){return this._loaded}updateImage(f){return this.image&&f.url?(this.options.url=f.url,this.load(f.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new k.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(f){this.map=f,this.load()}setCoordinates(f){this.coordinates=f;const w=f.map(k.MercatorCoordinate.fromLngLat);this.tileID=function(U){let q=1/0,ee=1/0,se=-1/0,ue=-1/0;for(const Pe of U)q=Math.min(q,Pe.x),ee=Math.min(ee,Pe.y),se=Math.max(se,Pe.x),ue=Math.max(ue,Pe.y);const me=Math.max(se-q,ue-ee),Ce=Math.max(0,Math.floor(-Math.log(me)/Math.LN2)),Ae=Math.pow(2,Ce);return new k.CanonicalTileID(Ce,Math.floor((q+se)/2*Ae),Math.floor((ee+ue)/2*Ae))}(w),this.minzoom=this.maxzoom=this.tileID.z;const O=w.map(U=>this.tileID.getTilePoint(U)._round());return this._boundsArray=new k.StructArrayLayout4i8,this._boundsArray.emplaceBack(O[0].x,O[0].y,0,0),this._boundsArray.emplaceBack(O[1].x,O[1].y,k.EXTENT,0),this._boundsArray.emplaceBack(O[3].x,O[3].y,0,k.EXTENT),this._boundsArray.emplaceBack(O[2].x,O[2].y,k.EXTENT,k.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new k.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const f=this.map.painter.context,w=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=k.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new k.Texture(f,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(const O in this.tiles){const U=this.tiles[O];"loaded"!==U.state&&(U.state="loaded",U.texture=this.texture)}}loadTile(f,w){this.tileID&&this.tileID.equals(f.tileID.canonical)?(this.tiles[String(f.tileID.wrap)]=f,f.buckets={},w(null)):(f.state="errored",w(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const we={vector:class extends k.Evented{constructor(P,f,w,O){if(super(),this.id=P,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,k.extend(this,k.pick(f,["url","scheme","tileSize","promoteId"])),this._options=k.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(O),this._tileWorkers={},this._deduped=new k.DedupedRequest}load(){this._loaded=!1,this.fire(new k.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Un(this._options,this.map._requestManager,(P,f)=>{this._tileJSONRequest=null,this._loaded=!0,P?this.fire(new k.ErrorEvent(P)):f&&(k.extend(this,f),f.bounds&&(this.tileBounds=new ri(f.bounds,this.minzoom,this.maxzoom)),k.postTurnstileEvent(f.tiles,this.map._requestManager._customAccessToken),this.fire(new k.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new k.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(P){return!this.tileBounds||this.tileBounds.contains(P.canonical)}onAdd(P){this.map=P,this.load()}setSourceProperty(P){this._tileJSONRequest&&this._tileJSONRequest.cancel(),P();const f=this.map.style._getSourceCaches(this.id);for(const w of f)w.clearTiles();this.load()}setTiles(P){return this.setSourceProperty(()=>{this._options.tiles=P}),this}setUrl(P){return this.setSourceProperty(()=>{this.url=P,this._options.url=P}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return k.extend({},this._options)}loadTile(P,f){const w=this.map._requestManager.normalizeTileURL(P.tileID.canonical.url(this.tiles,this.scheme)),O={request:this.map._requestManager.transformRequest(w,k.ResourceType.Tile),data:void 0,uid:P.uid,tileID:P.tileID,tileZoom:P.tileZoom,zoom:P.tileID.overscaledZ,tileSize:this.tileSize*P.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:k.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:P.isSymbolTile};if(O.request.collectResourceTiming=this._collectResourceTiming,P.actor&&"expired"!==P.state)"loading"===P.state?P.reloadCallback=f:P.request=P.actor.send("reloadTile",O,U.bind(this));else if(P.actor=this._tileWorkers[w]=this._tileWorkers[w]||this.dispatcher.getActor(),this.dispatcher.ready)P.request=P.actor.send("loadTile",O,U.bind(this),void 0,!0);else{const q=k.loadVectorTile.call({deduped:this._deduped},O,(ee,se)=>{ee||!se?U.call(this,ee):(O.data={cacheControl:se.cacheControl,expires:se.expires,rawData:se.rawData.slice(0)},P.actor&&P.actor.send("loadTile",O,U.bind(this),void 0,!0))},!0);P.request={cancel:q}}function U(q,ee){return delete P.request,P.aborted?f(null):q&&404!==q.status?f(q):(ee&&ee.resourceTiming&&(P.resourceTiming=ee.resourceTiming),this.map._refreshExpiredTiles&&ee&&P.setExpiryData(ee),P.loadVectorData(ee,this.map.painter),k.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(P.reloadCallback&&(this.loadTile(P,P.reloadCallback),P.reloadCallback=null)))}}abortTile(P){P.request&&(P.request.cancel(),delete P.request),P.actor&&P.actor.send("abortTile",{uid:P.uid,type:this.type,source:this.id})}unloadTile(P){P.unloadVectorData(),P.actor&&P.actor.send("removeTile",{uid:P.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Oi,"raster-dem":class extends Oi{constructor(P,f,w,O){super(P,f,w,O),this.type="raster-dem",this.maxzoom=22,this._options=k.extend({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}loadTile(P,f){const w=this.map._requestManager.normalizeTileURL(P.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function O(U,q){U&&(P.state="errored",f(U)),q&&(P.dem=q,P.dem.onDeserialize(),P.needsHillshadePrepare=!0,P.needsDEMTextureUpload=!0,P.state="loaded",f(null))}P.request=k.getImage(this.map._requestManager.transformRequest(w,k.ResourceType.Tile),function(U,q,ee,se){if(delete P.request,P.aborted)P.state="unloaded",f(null);else if(U)P.state="errored",f(U);else if(q){this.map._refreshExpiredTiles&&P.setExpiryData({cacheControl:ee,expires:se});const ue=k.window.ImageBitmap&&q instanceof k.window.ImageBitmap&&(null==sr&&(sr=k.window.OffscreenCanvas&&new k.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof k.window.createImageBitmap),sr),me=1-(q.width-k.prevPowerOfTwo(q.width))/2;me<1||P.neighboringTiles||(P.neighboringTiles=this._getNeighboringTiles(P.tileID));const Ce=ue?q:k.exported.getImageData(q,me),Ae={uid:P.uid,coord:P.tileID,source:this.id,rawImageData:Ce,encoding:this.encoding,padding:me};P.actor&&"expired"!==P.state||(P.actor=this.dispatcher.getActor(),P.actor.send("loadDEMTile",Ae,O.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(P){const f=P.canonical,w=Math.pow(2,f.z),O=(f.x-1+w)%w,U=0===f.x?P.wrap-1:P.wrap,q=(f.x+1+w)%w,ee=f.x+1===w?P.wrap+1:P.wrap,se={};return se[new k.OverscaledTileID(P.overscaledZ,U,f.z,O,f.y).key]={backfilled:!1},se[new k.OverscaledTileID(P.overscaledZ,ee,f.z,q,f.y).key]={backfilled:!1},f.y>0&&(se[new k.OverscaledTileID(P.overscaledZ,U,f.z,O,f.y-1).key]={backfilled:!1},se[new k.OverscaledTileID(P.overscaledZ,P.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},se[new k.OverscaledTileID(P.overscaledZ,ee,f.z,q,f.y-1).key]={backfilled:!1}),f.y+1<w&&(se[new k.OverscaledTileID(P.overscaledZ,U,f.z,O,f.y+1).key]={backfilled:!1},se[new k.OverscaledTileID(P.overscaledZ,P.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},se[new k.OverscaledTileID(P.overscaledZ,ee,f.z,q,f.y+1).key]={backfilled:!1}),se}unloadTile(P){P.demTexture&&this.map.painter.saveTileTexture(P.demTexture),P.fbo&&(P.fbo.destroy(),delete P.fbo),P.dem&&delete P.dem,delete P.neighboringTiles,P.state="unloaded"}},geojson:class extends k.Evented{constructor(P,f,w,O){super(),this.id=P,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=w.getActor(),this.setEventedParent(O),this._data=f.data,this._options=k.extend({},f),this._collectResourceTiming=f.collectResourceTiming,void 0!==f.maxzoom&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const U=k.EXTENT/this.tileSize;this.workerOptions=k.extend({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(void 0!==f.buffer?f.buffer:128)*U,tolerance:(void 0!==f.tolerance?f.tolerance:.375)*U,extent:k.EXTENT,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:void 0!==f.clusterMaxZoom?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:k.EXTENT,radius:(void 0!==f.clusterRadius?f.clusterRadius:50)*U,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions)}onAdd(P){this.map=P,this.setData(this._data)}setData(P){return this._data=P,this._updateWorkerData(),this}getClusterExpansionZoom(P,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:P,source:this.id},f),this}getClusterChildren(P,f){return this.actor.send("geojson.getClusterChildren",{clusterId:P,source:this.id},f),this}getClusterLeaves(P,f,w,O){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:P,limit:f,offset:w},O),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new k.Event("dataloading",{dataType:"source"})),this._loaded=!1;const P=k.extend({},this.workerOptions),f=this._data;"string"==typeof f?(P.request=this.map._requestManager.transformRequest(k.exported.resolveURL(f),k.ResourceType.Source),P.request.collectResourceTiming=this._collectResourceTiming):P.data=JSON.stringify(f),this._pendingLoad=this.actor.send(`${this.type}.loadData`,P,(w,O)=>{if(this._loaded=!0,this._pendingLoad=null,w)this.fire(new k.ErrorEvent(w));else{const U={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&O&&O.resourceTiming&&O.resourceTiming[this.id]&&(U.resourceTiming=O.resourceTiming[this.id]),this.fire(new k.Event("data",U)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(P,f){const w=P.actor?"reloadTile":"loadTile";P.actor=this.actor,P.request=this.actor.send(w,{type:this.type,uid:P.uid,tileID:P.tileID,tileZoom:P.tileZoom,zoom:P.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:k.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(O,U)=>(delete P.request,P.unloadVectorData(),P.aborted?f(null):O?f(O):(P.loadVectorData(U,this.map.painter,"reloadTile"===w),f(null))),void 0,"loadTile"===w)}abortTile(P){P.request&&(P.request.cancel(),delete P.request),P.aborted=!0}unloadTile(P){P.unloadVectorData(),this.actor.send("removeTile",{uid:P.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return k.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ge{constructor(P,f,w,O){super(P,f,w,O),this.roundZoom=!0,this.type="video",this.options=f}load(){this._loaded=!1;const P=this.options;this.urls=[];for(const f of P.urls)this.urls.push(this.map._requestManager.transformRequest(f,k.ResourceType.Source).url);k.getVideo(this.urls,(f,w)=>{this._loaded=!0,f?this.fire(new k.ErrorEvent(f)):w&&(this.video=w,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(P){if(this.video){const f=this.video.seekable;P<f.start(0)||P>f.end(0)?this.fire(new k.ErrorEvent(new k.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=P}}getVideo(){return this.video}onAdd(P){this.map||(this.map=P,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const P=this.map.painter.context,f=P.gl;this.boundsBuffer||(this.boundsBuffer=P.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=k.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new k.Texture(P,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));for(const w in this.tiles){const O=this.tiles[w];"loaded"!==O.state&&(O.state="loaded",O.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ge,canvas:class extends Ge{constructor(P,f,w,O){super(P,f,w,O),f.coordinates?Array.isArray(f.coordinates)&&4===f.coordinates.length&&!f.coordinates.some(U=>!Array.isArray(U)||2!==U.length||U.some(q=>"number"!=typeof q))||this.fire(new k.ErrorEvent(new k.ValidationError(`sources.${P}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new k.ErrorEvent(new k.ValidationError(`sources.${P}`,null,'missing required property "coordinates"'))),f.animate&&"boolean"!=typeof f.animate&&this.fire(new k.ErrorEvent(new k.ValidationError(`sources.${P}`,null,'optional "animate" property must be a boolean value'))),f.canvas?"string"==typeof f.canvas||f.canvas instanceof k.window.HTMLCanvasElement||this.fire(new k.ErrorEvent(new k.ValidationError(`sources.${P}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new k.ErrorEvent(new k.ValidationError(`sources.${P}`,null,'missing required property "canvas"'))),this.options=f,this.animate=void 0===f.animate||f.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof k.window.HTMLCanvasElement?this.options.canvas:k.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new k.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(P){this.map=P,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let P=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,P=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,P=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const f=this.map.painter.context,w=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=k.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(P||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new k.Texture(f,this.canvas,w.RGBA,{premultiply:!0});for(const O in this.tiles){const U=this.tiles[O];"loaded"!==U.state&&(U.state="loaded",U.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const P of[this.canvas.width,this.canvas.height])if(isNaN(P)||P<=0)return!0;return!1}}},De=function(P,f,w,O){const U=new we[f.type](P,f,w,O);if(U.id!==P)throw new Error(`Expected Source id to be ${P} instead of ${U.id}`);return k.bindAll(["load","abort","unload","serialize","prepare"],U),U};function qe(P,f){const w=k.identity([]);return k.scale$1(w,w,[.5*P.width,.5*-P.height,1]),k.translate(w,w,[1,-1,0]),k.multiply(w,w,P.calculateProjMatrix(f.toUnwrapped()))}function it(P,f,w,O,U,q,ee,se=!1){const ue=P.tilesIn(O,ee,se);ue.sort(Ot);const me=[];for(const Ae of ue)me.push({wrappedTileID:Ae.tile.tileID.wrapped().key,queryResults:Ae.tile.queryRenderedFeatures(f,w,P._state,Ae,U,q,qe(P.transform,Ae.tile.tileID),se)});const Ce=function(Ae){const Pe={},Ne={};for(const $e of Ae){const et=$e.queryResults,mt=$e.wrappedTileID,Ue=Ne[mt]=Ne[mt]||{};for(const tt in et){const ot=et[tt],vt=Ue[tt]=Ue[tt]||{},rt=Pe[tt]=Pe[tt]||[];for(const ht of ot)vt[ht.featureIndex]||(vt[ht.featureIndex]=!0,rt.push(ht))}}return Pe}(me);for(const Ae in Ce)Ce[Ae].forEach(Pe=>{const Ne=Pe.feature,$e=P.getFeatureState(Ne.layer["source-layer"],Ne.id);Ne.source=Ne.layer.source,Ne.layer["source-layer"]&&(Ne.sourceLayer=Ne.layer["source-layer"]),Ne.state=$e});return Ce}function yt(P,f){const w=P.getRenderableIds().map(q=>P.getTileByID(q)),O=[],U={};for(let q=0;q<w.length;q++){const ee=w[q],se=ee.tileID.canonical.key;U[se]||(U[se]=!0,ee.querySourceFeatures(O,f))}return O}function Ot(P,f){const w=P.tileID,O=f.tileID;return w.overscaledZ-O.overscaledZ||w.canonical.y-O.canonical.y||w.wrap-O.wrap||w.canonical.x-O.canonical.x}function Pt(){return null!=ap.workerClass?new ap.workerClass:new k.window.Worker(ap.workerUrl)}const xt="mapboxgl_preloaded_worker_pool";class Ft{constructor(){this.active={}}acquire(f){if(!this.workers)for(this.workers=[];this.workers.length<Ft.workerCount;)this.workers.push(new Pt);return this.active[f]=!0,this.workers.slice()}release(f){delete this.active[f],0===this.numActive()&&(this.workers.forEach(w=>{w.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xt]}numActive(){return Object.keys(this.active).length}}let tn;function ve(){return tn||(tn=new Ft),tn}function d(P,f){const w={};for(const O in P)"ref"!==O&&(w[O]=P[O]);return k.refProperties.forEach(O=>{O in f&&(w[O]=f[O])}),w}function p(P){P=P.slice();const f=Object.create(null);for(let w=0;w<P.length;w++)f[P[w].id]=P[w];for(let w=0;w<P.length;w++)"ref"in P[w]&&(P[w]=d(P[w],f[P[w].ref]));return P}Ft.workerCount=2;const y={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function C(P,f,w){w.push({command:y.addSource,args:[P,f[P]]})}function M(P,f,w){f.push({command:y.removeSource,args:[P]}),w[P]=!0}function L(P,f,w,O){M(P,w,O),C(P,f,w)}function R(P,f,w){let O;for(O in P[w])if(P[w].hasOwnProperty(O)&&"data"!==O&&!Be(P[w][O],f[w][O]))return!1;for(O in f[w])if(f[w].hasOwnProperty(O)&&"data"!==O&&!Be(P[w][O],f[w][O]))return!1;return!0}function H(P,f,w,O,U,q){let ee;for(ee in f=f||{},P=P||{})P.hasOwnProperty(ee)&&(Be(P[ee],f[ee])||w.push({command:q,args:[O,ee,f[ee],U]}));for(ee in f)f.hasOwnProperty(ee)&&!P.hasOwnProperty(ee)&&(Be(P[ee],f[ee])||w.push({command:q,args:[O,ee,f[ee],U]}))}function G(P){return P.id}function J(P,f){return P[f.id]=f,P}class te{constructor(f,w){this.reset(f,w)}reset(f,w){this.points=f||[],this._distances=[0];for(let O=1;O<this.points.length;O++)this._distances[O]=this._distances[O-1]+this.points[O].dist(this.points[O-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(w||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(f){if(1===this.points.length)return this.points[0];f=k.clamp(f,0,1);let w=1,O=this._distances[w];const U=f*this.paddedLength+this.padding;for(;O<U&&w<this._distances.length;)O=this._distances[++w];const q=w-1,ee=this._distances[q],se=O-ee,ue=se>0?(U-ee)/se:0;return this.points[q].mult(1-ue).add(this.points[w].mult(ue))}}class K{constructor(f,w,O){const U=this.boxCells=[],q=this.circleCells=[];this.xCellCount=Math.ceil(f/O),this.yCellCount=Math.ceil(w/O);for(let ee=0;ee<this.xCellCount*this.yCellCount;ee++)U.push([]),q.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=w,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(f,w,O,U,q){this._forEachCell(w,O,U,q,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(w),this.bboxes.push(O),this.bboxes.push(U),this.bboxes.push(q)}insertCircle(f,w,O,U){this._forEachCell(w-U,O-U,w+U,O+U,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(w),this.circles.push(O),this.circles.push(U)}_insertBoxCell(f,w,O,U,q,ee){this.boxCells[q].push(ee)}_insertCircleCell(f,w,O,U,q,ee){this.circleCells[q].push(ee)}_query(f,w,O,U,q,ee){if(O<0||f>this.width||U<0||w>this.height)return!q&&[];const se=[];if(f<=0&&w<=0&&this.width<=O&&this.height<=U){if(q)return!0;for(let ue=0;ue<this.boxKeys.length;ue++)se.push({key:this.boxKeys[ue],x1:this.bboxes[4*ue],y1:this.bboxes[4*ue+1],x2:this.bboxes[4*ue+2],y2:this.bboxes[4*ue+3]});for(let ue=0;ue<this.circleKeys.length;ue++){const me=this.circles[3*ue],Ce=this.circles[3*ue+1],Ae=this.circles[3*ue+2];se.push({key:this.circleKeys[ue],x1:me-Ae,y1:Ce-Ae,x2:me+Ae,y2:Ce+Ae})}return ee?se.filter(ee):se}return this._forEachCell(f,w,O,U,this._queryCell,se,{hitTest:q,seenUids:{box:{},circle:{}}},ee),q?se.length>0:se}_queryCircle(f,w,O,U,q){const ee=f-O,se=f+O,ue=w-O,me=w+O;if(se<0||ee>this.width||me<0||ue>this.height)return!U&&[];const Ce=[];return this._forEachCell(ee,ue,se,me,this._queryCellCircle,Ce,{hitTest:U,circle:{x:f,y:w,radius:O},seenUids:{box:{},circle:{}}},q),U?Ce.length>0:Ce}query(f,w,O,U,q){return this._query(f,w,O,U,!1,q)}hitTest(f,w,O,U,q){return this._query(f,w,O,U,!0,q)}hitTestCircle(f,w,O,U){return this._queryCircle(f,w,O,!0,U)}_queryCell(f,w,O,U,q,ee,se,ue){const me=se.seenUids,Ce=this.boxCells[q];if(null!==Ce){const Pe=this.bboxes;for(const Ne of Ce)if(!me.box[Ne]){me.box[Ne]=!0;const $e=4*Ne;if(f<=Pe[$e+2]&&w<=Pe[$e+3]&&O>=Pe[$e+0]&&U>=Pe[$e+1]&&(!ue||ue(this.boxKeys[Ne]))){if(se.hitTest)return ee.push(!0),!0;ee.push({key:this.boxKeys[Ne],x1:Pe[$e],y1:Pe[$e+1],x2:Pe[$e+2],y2:Pe[$e+3]})}}}const Ae=this.circleCells[q];if(null!==Ae){const Pe=this.circles;for(const Ne of Ae)if(!me.circle[Ne]){me.circle[Ne]=!0;const $e=3*Ne;if(this._circleAndRectCollide(Pe[$e],Pe[$e+1],Pe[$e+2],f,w,O,U)&&(!ue||ue(this.circleKeys[Ne]))){if(se.hitTest)return ee.push(!0),!0;{const et=Pe[$e],mt=Pe[$e+1],Ue=Pe[$e+2];ee.push({key:this.circleKeys[Ne],x1:et-Ue,y1:mt-Ue,x2:et+Ue,y2:mt+Ue})}}}}}_queryCellCircle(f,w,O,U,q,ee,se,ue){const me=se.circle,Ce=se.seenUids,Ae=this.boxCells[q];if(null!==Ae){const Ne=this.bboxes;for(const $e of Ae)if(!Ce.box[$e]){Ce.box[$e]=!0;const et=4*$e;if(this._circleAndRectCollide(me.x,me.y,me.radius,Ne[et+0],Ne[et+1],Ne[et+2],Ne[et+3])&&(!ue||ue(this.boxKeys[$e])))return ee.push(!0),!0}}const Pe=this.circleCells[q];if(null!==Pe){const Ne=this.circles;for(const $e of Pe)if(!Ce.circle[$e]){Ce.circle[$e]=!0;const et=3*$e;if(this._circlesCollide(Ne[et],Ne[et+1],Ne[et+2],me.x,me.y,me.radius)&&(!ue||ue(this.circleKeys[$e])))return ee.push(!0),!0}}}_forEachCell(f,w,O,U,q,ee,se,ue){const me=this._convertToXCellCoord(f),Ce=this._convertToYCellCoord(w),Ae=this._convertToXCellCoord(O),Pe=this._convertToYCellCoord(U);for(let Ne=me;Ne<=Ae;Ne++)for(let $e=Ce;$e<=Pe;$e++)if(q.call(this,f,w,O,U,this.xCellCount*$e+Ne,ee,se,ue))return}_convertToXCellCoord(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))}_convertToYCellCoord(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))}_circlesCollide(f,w,O,U,q,ee){const se=U-f,ue=q-w,me=O+ee;return me*me>se*se+ue*ue}_circleAndRectCollide(f,w,O,U,q,ee,se){const ue=(ee-U)/2,me=Math.abs(f-(U+ue));if(me>ue+O)return!1;const Ce=(se-q)/2,Ae=Math.abs(w-(q+Ce));if(Ae>Ce+O)return!1;if(me<=ue||Ae<=Ce)return!0;const Pe=me-ue,Ne=Ae-Ce;return Pe*Pe+Ne*Ne<=O*O}}const ae=Math.tan(85*Math.PI/180);function pe(P,f,w,O,U){const q=k.create$1();return f?(k.scale$1(q,q,[1/U,1/U,1]),w||k.rotateZ(q,q,O.angle)):k.multiply(q,O.labelPlaneMatrix,P),q}function ge(P,f,w,O,U){if(f){const q=k.clone$1(P);return k.scale$1(q,q,[U,U,1]),w||k.rotateZ(q,q,-O.angle),q}return O.glCoordMatrix}function xe(P,f,w=0){const O=[P.x,P.y,w,1];w?k.transformMat4(O,O,f):Xt(O,O,f);const U=O[3];return{point:new k.pointGeometry(O[0]/U,O[1]/U),signedDistanceFromCamera:U}}function Me(P,f){return Math.min(.5+P/f*.5,1.5)}function ze(P,f){const w=P[0]/P[3],O=P[1]/P[3];return w>=-f[0]&&w<=f[0]&&O>=-f[1]&&O<=f[1]}function Ke(P,f,w,O,U,q,ee,se,ue){const me=O?P.textSizeData:P.iconSizeData,Ce=k.evaluateSizeForZoom(me,w.transform.zoom),Ae=[256/w.width*2+1,256/w.height*2+1],Pe=O?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;Pe.clear();const Ne=P.lineVertexArray,$e=O?P.text.placedSymbolArray:P.icon.placedSymbolArray,et=w.transform.width/w.transform.height;let mt=!1;for(let Ue=0;Ue<$e.length;Ue++){const tt=$e.get(Ue);if(tt.writingMode!==k.WritingMode.vertical||mt||0!==Ue&&$e.get(Ue-1).writingMode===k.WritingMode.horizontal||(mt=!0),tt.hidden||tt.writingMode===k.WritingMode.vertical&&!mt){St(tt.numGlyphs,Pe);continue}mt=!1;const ot=ue?ue({x:tt.anchorX,y:tt.anchorY}):0,vt=[tt.anchorX,tt.anchorY,ot,1];if(k.transformMat4(vt,vt,f),!ze(vt,Ae)){St(tt.numGlyphs,Pe);continue}const rt=Me(w.transform.cameraToCenterDistance,vt[3]),ht=k.evaluateSizeForFeature(me,Ce,tt),en=ee?ht/rt:ht*rt,sn=new k.pointGeometry(tt.anchorX,tt.anchorY),un=xe(sn,U,ot);if(un.signedDistanceFromCamera<=0){St(tt.numGlyphs,Pe);continue}const ut=un.point;let En={};const bn=ee?null:ue,Zn=be(tt,en,!1,se,f,U,q,P.glyphOffsetArray,Ne,Pe,ut,sn,En,et,bn);mt=Zn.useVertical,bn&&Zn.needsFlipping&&(En={}),(Zn.notEnoughRoom||mt||Zn.needsFlipping&&be(tt,en,!0,se,f,U,q,P.glyphOffsetArray,Ne,Pe,ut,sn,En,et,bn).notEnoughRoom)&&St(tt.numGlyphs,Pe)}O?P.text.dynamicLayoutVertexBuffer.updateData(Pe):P.icon.dynamicLayoutVertexBuffer.updateData(Pe)}function Y(P,f,w,O,U,q,ee,se,ue,me,Ce,Ae,Pe){const Ne=se.glyphStartIndex+se.numGlyphs,$e=se.lineStartIndex,et=se.lineStartIndex+se.lineLength,mt=f.getoffsetX(se.glyphStartIndex),Ue=f.getoffsetX(Ne-1),tt=Je(P*mt,w,O,U,q,ee,se.segment,$e,et,ue,me,Ce,Ae,Pe,!0);if(!tt)return null;const ot=Je(P*Ue,w,O,U,q,ee,se.segment,$e,et,ue,me,Ce,Ae,Pe,!0);return ot?{first:tt,last:ot}:null}function ne(P,f,w,O){return P.writingMode===k.WritingMode.horizontal&&Math.abs(w.y-f.y)>Math.abs(w.x-f.x)*O?{useVertical:!0}:P.writingMode===k.WritingMode.vertical?f.y<w.y?{needsFlipping:!0}:null:0!==P.flipState&&function(U,q,ee){const se=(q.x-U.x)*ee;return 0===se||Math.abs((q.y-U.y)/se)>ae}(f,w,O)?1===P.flipState?{needsFlipping:!0}:null:f.x>w.x?{needsFlipping:!0}:null}function be(P,f,w,O,U,q,ee,se,ue,me,Ce,Ae,Pe,Ne,$e){const et=f/24,mt=P.lineOffsetX*et,Ue=P.lineOffsetY*et;let tt;if(P.numGlyphs>1){const ot=P.glyphStartIndex+P.numGlyphs,vt=P.lineStartIndex,rt=P.lineStartIndex+P.lineLength,ht=Y(et,se,mt,Ue,w,Ce,Ae,P,ue,q,Pe,$e);if(!ht)return{notEnoughRoom:!0};const en=xe(ht.first.point,ee).point,sn=xe(ht.last.point,ee).point;if(O&&!w){const un=ne(P,en,sn,Ne);if(P.flipState=un&&un.needsFlipping?1:2,un)return un}tt=[ht.first];for(let un=P.glyphStartIndex+1;un<ot-1;un++)tt.push(Je(et*se.getoffsetX(un),mt,Ue,w,Ce,Ae,P.segment,vt,rt,ue,q,Pe,$e));tt.push(ht.last)}else{if(O&&!w){const vt=xe(Ae,U).point,rt=P.lineStartIndex+P.segment+1,ht=new k.pointGeometry(ue.getx(rt),ue.gety(rt)),en=xe(ht,U),sn=ne(P,vt,en.signedDistanceFromCamera>0?en.point:Ie(Ae,ht,vt,1,U),Ne);if(P.flipState=sn&&sn.needsFlipping?1:2,sn)return sn}const ot=Je(et*se.getoffsetX(P.glyphStartIndex),mt,Ue,w,Ce,Ae,P.segment,P.lineStartIndex,P.lineStartIndex+P.lineLength,ue,q,Pe,$e);if(!ot)return{notEnoughRoom:!0};tt=[ot]}for(const ot of tt)k.addDynamicAttributes(me,ot.point,ot.angle);return{}}function Ie(P,f,w,O,U,q){const ee=P.add(P.sub(f)._unit()),se=xe(ee,U,q?q(ee):0).point,ue=w.sub(se);return w.add(ue._mult(O/ue.mag()))}function Je(P,f,w,O,U,q,ee,se,ue,me,Ce,Ae,Pe,Ne,$e){const et=O?P-f:P+f;let mt=et>0?1:-1,Ue=0;O&&(mt*=-1,Ue=Math.PI),mt<0&&(Ue+=Math.PI);let tt=mt>0?se+ee:se+ee+1,ot=U,vt=U,rt=0,ht=0;const en=Math.abs(et),sn=[],un=[];let ut=q;const En=()=>{const ci=tt-mt;return 0===rt?q:new k.pointGeometry(me.getx(ci),me.gety(ci))},bn=()=>Ie(En(),ut,vt,en-rt+1,Ce,Pe);for(;rt+ht<=en;){if(tt+=mt,tt<se||tt>=ue)return null;if(vt=ot,sn.push(ot),Ne&&un.push(ut||En()),ot=Ae[tt],void 0===ot){ut=new k.pointGeometry(me.getx(tt),me.gety(tt));const ci=xe(ut,Ce,Pe?Pe(ut):0);ot=ci.signedDistanceFromCamera>0?Ae[tt]=ci.point:bn()}else ut=null;rt+=ht,ht=vt.dist(ot)}$e&&Pe&&(ut=ut||new k.pointGeometry(me.getx(tt),me.gety(tt)),Ae[tt]=ot=void 0===Ae[tt]?ot:bn(),ht=vt.dist(ot));const Zn=(en-rt)/ht,kn=ot.sub(vt),An=kn.mult(Zn)._add(vt);w&&An._add(kn._unit()._perp()._mult(w*mt));const Ti=Ue+Math.atan2(ot.y-vt.y,ot.x-vt.x);return sn.push(An),Ne&&(ut=ut||new k.pointGeometry(me.getx(tt),me.gety(tt)),un.push(function(ci,lr,yr){const Br=1-yr;return new k.pointGeometry(ci.x*Br+lr.x*yr,ci.y*Br+lr.y*yr)}(un.length>0?un[un.length-1]:ut,ut,Zn))),{point:An,angle:Ti,path:sn,tilePath:un}}const Nt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function St(P,f){for(let w=0;w<P;w++){const O=f.length;f.resize(O+4),f.float32.set(Nt,3*O)}}function Xt(P,f,w){const O=f[0],U=f[1];return P[0]=w[0]*O+w[4]*U+w[12],P[1]=w[1]*O+w[5]*U+w[13],P[3]=w[3]*O+w[7]*U+w[15],P}const gn=100;class hn{constructor(f,w,O=new K(f.width+200,f.height+200,25),U=new K(f.width+200,f.height+200,25)){this.transform=f,this.grid=O,this.ignoredGrid=U,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+gn,this.screenBottomBoundary=f.height+gn,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200,this.fogState=w}placeCollisionBox(f,w,O,U,q,ee,se){const ue=this.projectAndGetPerspectiveRatio(ee,w.anchorPointX,w.anchorPointY,w.elevation,w.tileID),me=q*ue.perspectiveRatio,Ce=(w.x1*f+O.x-w.padding)*me+ue.point.x,Ae=(w.y1*f+O.y-w.padding)*me+ue.point.y,Pe=(w.x2*f+O.x+w.padding)*me+ue.point.x,Ne=(w.y2*f+O.y+w.padding)*me+ue.point.y,$e=ue.perspectiveRatio<=.55||ue.aboveHorizon;return!this.isInsideGrid(Ce,Ae,Pe,Ne)||!U&&this.grid.hitTest(Ce,Ae,Pe,Ne,se)||$e?{box:[],offscreen:!1}:{box:[Ce,Ae,Pe,Ne],offscreen:this.isOffscreen(Ce,Ae,Pe,Ne)}}placeCollisionCircles(f,w,O,U,q,ee,se,ue,me,Ce,Ae,Pe,Ne,$e){const et=[],mt=this.transform.elevation,Ue=mt?bn=>mt.getAtTileOffset($e,bn.x,bn.y):bn=>0,tt=new k.pointGeometry(w.anchorX,w.anchorY),ot=Ue(tt),vt=this.projectAndGetPerspectiveRatio(ee,tt.x,tt.y,ot,$e),{perspectiveRatio:rt}=vt,ht=(Ce?q/rt:q*rt)/k.ONE_EM,en=xe(tt,se,ot).point,sn=vt.signedDistanceFromCamera>0?Y(ht,U,w.lineOffsetX*ht,w.lineOffsetY*ht,!1,en,tt,w,O,se,{},mt&&!Ce?Ue:null,Ce&&!!mt):null;let un=!1,ut=!1,En=!0;if(sn&&!vt.aboveHorizon){const bn=.5*Pe*rt+Ne,Zn=new k.pointGeometry(-100,-100),kn=new k.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),An=new te,Ti=sn.first,ci=sn.last;let lr=[];for(let zi=Ti.path.length-1;zi>=1;zi--)lr.push(Ti.path[zi]);for(let zi=1;zi<ci.path.length;zi++)lr.push(ci.path[zi]);const yr=2.5*bn;if(ue){const zi=lr.map(mt?(gr,po)=>{const ua=Ue(po<Ti.path.length-1?Ti.tilePath[Ti.path.length-1-po]:ci.tilePath[po-Ti.path.length+2]);return xe(gr,ue,ua)}:gr=>xe(gr,ue));lr=zi.some(gr=>gr.signedDistanceFromCamera<=0)?[]:zi.map(gr=>gr.point)}let Br=[];if(lr.length>0){const zi=lr[0].clone(),gr=lr[0].clone();for(let po=1;po<lr.length;po++)zi.x=Math.min(zi.x,lr[po].x),zi.y=Math.min(zi.y,lr[po].y),gr.x=Math.max(gr.x,lr[po].x),gr.y=Math.max(gr.y,lr[po].y);Br=zi.x>=Zn.x&&gr.x<=kn.x&&zi.y>=Zn.y&&gr.y<=kn.y?[lr]:gr.x<Zn.x||zi.x>kn.x||gr.y<Zn.y||zi.y>kn.y?[]:k.clipLine([lr],Zn.x,Zn.y,kn.x,kn.y)}for(const zi of Br){An.reset(zi,.25*bn);let gr=0;gr=An.length<=.5*bn?1:Math.ceil(An.paddedLength/yr)+1;for(let po=0;po<gr;po++){const ua=po/Math.max(gr-1,1),xs=An.lerp(ua),Go=xs.x+gn,Qo=xs.y+gn;et.push(Go,Qo,bn,0);const ha=Go-bn,wi=Qo-bn,zr=Go+bn,hr=Qo+bn;if(En=En&&this.isOffscreen(ha,wi,zr,hr),ut=ut||this.isInsideGrid(ha,wi,zr,hr),!f&&this.grid.hitTestCircle(Go,Qo,bn,Ae)&&(un=!0,!me))return{circles:[],offscreen:!1,collisionDetected:un}}}}return{circles:!me&&un||!ut?[]:et,offscreen:En,collisionDetected:un}}queryRenderedSymbols(f){if(0===f.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const w=[];let O=1/0,U=1/0,q=-1/0,ee=-1/0;for(const Ce of f){const Ae=new k.pointGeometry(Ce.x+gn,Ce.y+gn);O=Math.min(O,Ae.x),U=Math.min(U,Ae.y),q=Math.max(q,Ae.x),ee=Math.max(ee,Ae.y),w.push(Ae)}const se=this.grid.query(O,U,q,ee).concat(this.ignoredGrid.query(O,U,q,ee)),ue={},me={};for(const Ce of se){const Ae=Ce.key;if(void 0===ue[Ae.bucketInstanceId]&&(ue[Ae.bucketInstanceId]={}),ue[Ae.bucketInstanceId][Ae.featureIndex])continue;const Pe=[new k.pointGeometry(Ce.x1,Ce.y1),new k.pointGeometry(Ce.x2,Ce.y1),new k.pointGeometry(Ce.x2,Ce.y2),new k.pointGeometry(Ce.x1,Ce.y2)];k.polygonIntersectsPolygon(w,Pe)&&(ue[Ae.bucketInstanceId][Ae.featureIndex]=!0,void 0===me[Ae.bucketInstanceId]&&(me[Ae.bucketInstanceId]=[]),me[Ae.bucketInstanceId].push(Ae.featureIndex))}return me}insertCollisionBox(f,w,O,U,q){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:O,featureIndex:U,collisionGroupID:q},f[0],f[1],f[2],f[3])}insertCollisionCircles(f,w,O,U,q){const ee=w?this.ignoredGrid:this.grid,se={bucketInstanceId:O,featureIndex:U,collisionGroupID:q};for(let ue=0;ue<f.length;ue+=4)ee.insertCircle(se,f[ue],f[ue+1],f[ue+2])}projectAndGetPerspectiveRatio(f,w,O,U,q){const ee=[w,O,U||0,1];let se=!1;if(U||this.transform.pitch>0){k.transformMat4(ee,ee,f);let ue=!1;this.fogState&&q&&(ue=function(me,Ce,Ae,Pe,Ne,$e){const et=$e.calculateFogTileMatrix(Ne),mt=[Ce,Ae,Pe];return k.transformMat4$1(mt,mt,et),Zt(me,mt,$e.pitch,$e._fov)}(this.fogState,w,O,U||0,q.toUnwrapped(),this.transform)>.9),se=ee[2]>ee[3]||ue}else Xt(ee,ee,f);return{point:new k.pointGeometry((ee[0]/ee[3]+1)/2*this.transform.width+gn,(-ee[1]/ee[3]+1)/2*this.transform.height+gn),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/ee[3]*.5,1.5),signedDistanceFromCamera:ee[3],aboveHorizon:se}}isOffscreen(f,w,O,U){return O<gn||f>=this.screenRightBoundary||U<gn||w>this.screenBottomBoundary}isInsideGrid(f,w,O,U){return O>=0&&f<this.gridRightBoundary&&U>=0&&w<this.gridBottomBoundary}getViewportMatrix(){const f=k.identity([]);return k.translate(f,f,[-100,-100,0]),f}}class Kn{constructor(f,w,O,U){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?w:-w))):U&&O?1:0,this.placed=O}isHidden(){return 0===this.opacity&&!this.placed}}class Bi{constructor(f,w,O,U,q){this.text=new Kn(f?f.text:null,w,O,q),this.icon=new Kn(f?f.icon:null,w,U,q)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zn{constructor(f,w,O){this.text=f,this.icon=w,this.skipFade=O}}class ti{constructor(){this.invProjMatrix=k.create$1(),this.viewportMatrix=k.create$1(),this.circles=[]}}class ar{constructor(f,w,O,U,q){this.bucketInstanceId=f,this.featureIndex=w,this.sourceLayerIndex=O,this.bucketIndex=U,this.tileID=q}}class vo{constructor(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}}get(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){const w=++this.maxGroupID;this.collisionGroups[f]={ID:w,predicate:O=>O.collisionGroupID===w}}return this.collisionGroups[f]}}function Mr(P,f,w,O,U){const{horizontalAlign:q,verticalAlign:ee}=k.getAnchorAlignment(P),se=-(q-.5)*f,ue=-(ee-.5)*w,me=k.evaluateVariableOffset(P,O);return new k.pointGeometry(se+me[0]*U,ue+me[1]*U)}function Wi(P,f,w,O,U){const q=new k.pointGeometry(P,f);return w&&q._rotate(O?U:-U),q}class Ro{constructor(f,w,O,U,q){this.transform=f.clone(),this.collisionIndex=new hn(this.transform,q),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new vo(O),this.collisionCircleArrays={},this.prevPlacement=U,U&&(U.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(f,w,O,U){const q=O.getBucket(w),ee=O.latestFeatureIndex;if(!q||!ee||w.id!==q.layerIds[0])return;const se=O.collisionBoxArray,ue=q.layers[0].layout,me=Math.pow(2,this.transform.zoom-O.tileID.overscaledZ),Ce=O.tileSize/k.EXTENT,Ae=this.transform.calculateProjMatrix(O.tileID.toUnwrapped()),Pe="map"===ue.get("text-pitch-alignment"),Ne="map"===ue.get("text-rotation-alignment"),$e=Fn(O,1,this.transform.zoom),et=pe(Ae,Pe,Ne,this.transform,$e);let mt=null;if(Pe){const tt=ge(Ae,Pe,Ne,this.transform,$e);mt=k.multiply([],this.transform.labelPlaneMatrix,tt)}this.retainedQueryData[q.bucketInstanceId]=new ar(q.bucketInstanceId,ee,q.sourceLayerIndex,q.index,O.tileID);const Ue={bucket:q,layout:ue,posMatrix:Ae,textLabelPlaneMatrix:et,labelToScreenMatrix:mt,scale:me,textPixelRatio:Ce,holdingForFade:O.holdingForFade(),collisionBoxArray:se,partiallyEvaluatedTextSize:k.evaluateSizeForZoom(q.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:k.evaluateSizeForZoom(q.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(q.sourceID)};if(U)for(const tt of q.sortKeyRanges){const{sortKey:ot,symbolInstanceStart:vt,symbolInstanceEnd:rt}=tt;f.push({sortKey:ot,symbolInstanceStart:vt,symbolInstanceEnd:rt,parameters:Ue})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:q.symbolInstances.length,parameters:Ue})}attemptAnchorPlacement(f,w,O,U,q,ee,se,ue,me,Ce,Ae,Pe,Ne,$e,et,mt,Ue,tt){const ot=[Pe.textOffset0,Pe.textOffset1],vt=Mr(f,O,U,ot,q),rt=this.collisionIndex.placeCollisionBox(q,w,Wi(vt.x,vt.y,ee,se,this.transform.angle),Ae,ue,me,Ce.predicate);if((!mt||0!==this.collisionIndex.placeCollisionBox($e.getSymbolInstanceIconSize(tt,this.transform.zoom,Ne),mt,Wi(vt.x,vt.y,ee,se,this.transform.angle),Ae,ue,me,Ce.predicate).box.length)&&rt.box.length>0){let ht;return this.prevPlacement&&this.prevPlacement.variableOffsets[Pe.crossTileID]&&this.prevPlacement.placements[Pe.crossTileID]&&this.prevPlacement.placements[Pe.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[Pe.crossTileID].anchor),this.variableOffsets[Pe.crossTileID]={textOffset:ot,width:O,height:U,anchor:f,textScale:q,prevAnchor:ht},this.markUsedJustification($e,f,Pe,et),$e.allowVerticalPlacement&&(this.markUsedOrientation($e,et,Pe),this.placedOrientations[Pe.crossTileID]=et),{shift:vt,placedGlyphBoxes:rt}}}placeLayerBucketPart(f,w,O){const{bucket:U,layout:q,posMatrix:ee,textLabelPlaneMatrix:se,labelToScreenMatrix:ue,textPixelRatio:me,holdingForFade:Ce,collisionBoxArray:Ae,partiallyEvaluatedTextSize:Pe,partiallyEvaluatedIconSize:Ne,collisionGroup:$e}=f.parameters,et=q.get("text-optional"),mt=q.get("icon-optional"),Ue=q.get("text-allow-overlap"),tt=q.get("icon-allow-overlap"),ot="map"===q.get("text-rotation-alignment"),vt="map"===q.get("text-pitch-alignment"),rt="none"!==q.get("icon-text-fit"),ht="viewport-y"===q.get("symbol-z-order"),en=Ue&&(tt||!U.hasIconData()||mt),sn=tt&&(Ue||!U.hasTextData()||et);!U.collisionArrays&&Ae&&U.deserializeCollisionBoxes(Ae),O&&U.updateCollisionDebugBuffers(this.transform.zoom,Ae);const un=(ut,En,bn)=>{if(w[ut.crossTileID])return;if(Ce)return void(this.placements[ut.crossTileID]=new zn(!1,!1,!1));let Zn=!1,kn=!1,An=!0,Ti=null,ci={box:null,offscreen:null},lr={box:null,offscreen:null},yr=null,Br=null,zi=null,gr=0,po=0,ua=0;bn.textFeatureIndex?gr=bn.textFeatureIndex:ut.useRuntimeCollisionCircles&&(gr=ut.featureIndex),bn.verticalTextFeatureIndex&&(po=bn.verticalTextFeatureIndex);const xs=wi=>{wi.tileID=this.retainedQueryData[U.bucketInstanceId].tileID,(this.transform.elevation||wi.elevation)&&(wi.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[U.bucketInstanceId].tileID,wi.anchorPointX,wi.anchorPointY):0)},Go=bn.textBox;if(Go){xs(Go);const wi=hr=>{let qr=k.WritingMode.horizontal;if(U.allowVerticalPlacement&&!hr&&this.prevPlacement){const fo=this.prevPlacement.placedOrientations[ut.crossTileID];fo&&(this.placedOrientations[ut.crossTileID]=fo,qr=fo,this.markUsedOrientation(U,qr,ut))}return qr},zr=(hr,qr)=>{if(U.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&bn.verticalTextBox){for(const fo of U.writingModes)if(fo===k.WritingMode.vertical?(ci=qr(),lr=ci):ci=hr(),ci&&ci.box&&ci.box.length)break}else ci=hr()};if(q.get("text-variable-anchor")){let hr=q.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ut.crossTileID]){const Jr=this.prevPlacement.variableOffsets[ut.crossTileID];hr.indexOf(Jr.anchor)>0&&(hr=hr.filter(da=>da!==Jr.anchor),hr.unshift(Jr.anchor))}const qr=(Jr,da,Rs)=>{const qs=U.getSymbolInstanceTextSize(Pe,ut,this.transform.zoom,En),Zs=(Jr.x2-Jr.x1)*qs+2*Jr.padding,Sl=(Jr.y2-Jr.y1)*qs+2*Jr.padding,Wc=rt&&!tt?da:null;Wc&&xs(Wc);let Ws={box:[],offscreen:!1};const cd=Ue?2*hr.length:hr.length;for(let $c=0;$c<cd;++$c){const bo=this.attemptAnchorPlacement(hr[$c%hr.length],Jr,Zs,Sl,qs,ot,vt,me,ee,$e,$c>=hr.length,ut,En,U,Rs,Wc,Pe,Ne);if(bo&&(Ws=bo.placedGlyphBoxes,Ws&&Ws.box&&Ws.box.length)){Zn=!0,Ti=bo.shift;break}}return Ws};zr(()=>qr(Go,bn.iconBox,k.WritingMode.horizontal),()=>{const Jr=bn.verticalTextBox;return Jr&&xs(Jr),U.allowVerticalPlacement&&!(ci&&ci.box&&ci.box.length)&&ut.numVerticalGlyphVertices>0&&Jr?qr(Jr,bn.verticalIconBox,k.WritingMode.vertical):{box:null,offscreen:null}}),ci&&(Zn=ci.box,An=ci.offscreen);const fo=wi(ci&&ci.box);if(!Zn&&this.prevPlacement){const Jr=this.prevPlacement.variableOffsets[ut.crossTileID];Jr&&(this.variableOffsets[ut.crossTileID]=Jr,this.markUsedJustification(U,Jr.anchor,ut,fo))}}else{const hr=(qr,fo)=>{const Jr=U.getSymbolInstanceTextSize(Pe,ut,this.transform.zoom,En),da=this.collisionIndex.placeCollisionBox(Jr,qr,new k.pointGeometry(0,0),Ue,me,ee,$e.predicate);return da&&da.box&&da.box.length&&(this.markUsedOrientation(U,fo,ut),this.placedOrientations[ut.crossTileID]=fo),da};zr(()=>hr(Go,k.WritingMode.horizontal),()=>{const qr=bn.verticalTextBox;return U.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&qr?(xs(qr),hr(qr,k.WritingMode.vertical)):{box:null,offscreen:null}}),wi(ci&&ci.box&&ci.box.length)}}if(yr=ci,Zn=yr&&yr.box&&yr.box.length>0,An=yr&&yr.offscreen,ut.useRuntimeCollisionCircles){const wi=U.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex>=0?ut.centerJustifiedTextSymbolIndex:ut.verticalPlacedTextSymbolIndex),zr=k.evaluateSizeForFeature(U.textSizeData,Pe,wi),hr=q.get("text-padding");Br=this.collisionIndex.placeCollisionCircles(Ue,wi,U.lineVertexArray,U.glyphOffsetArray,zr,ee,se,ue,O,vt,$e.predicate,ut.collisionCircleDiameter,hr,this.retainedQueryData[U.bucketInstanceId].tileID),Zn=Ue||Br.circles.length>0&&!Br.collisionDetected,An=An&&Br.offscreen}if(bn.iconFeatureIndex&&(ua=bn.iconFeatureIndex),bn.iconBox){const wi=zr=>{xs(zr);const hr=rt&&Ti?Wi(Ti.x,Ti.y,ot,vt,this.transform.angle):new k.pointGeometry(0,0),qr=U.getSymbolInstanceIconSize(Ne,this.transform.zoom,En);return this.collisionIndex.placeCollisionBox(qr,zr,hr,tt,me,ee,$e.predicate)};lr&&lr.box&&lr.box.length&&bn.verticalIconBox?(zi=wi(bn.verticalIconBox),kn=zi.box.length>0):(zi=wi(bn.iconBox),kn=zi.box.length>0),An=An&&zi.offscreen}const Qo=et||0===ut.numHorizontalGlyphVertices&&0===ut.numVerticalGlyphVertices,ha=mt||0===ut.numIconVertices;if(Qo||ha?ha?Qo||(kn=kn&&Zn):Zn=kn&&Zn:kn=Zn=kn&&Zn,Zn&&yr&&yr.box&&this.collisionIndex.insertCollisionBox(yr.box,q.get("text-ignore-placement"),U.bucketInstanceId,lr&&lr.box&&po?po:gr,$e.ID),kn&&zi&&this.collisionIndex.insertCollisionBox(zi.box,q.get("icon-ignore-placement"),U.bucketInstanceId,ua,$e.ID),Br&&(Zn&&this.collisionIndex.insertCollisionCircles(Br.circles,q.get("text-ignore-placement"),U.bucketInstanceId,gr,$e.ID),O)){const wi=U.bucketInstanceId;let zr=this.collisionCircleArrays[wi];void 0===zr&&(zr=this.collisionCircleArrays[wi]=new ti);for(let hr=0;hr<Br.circles.length;hr+=4)zr.circles.push(Br.circles[hr+0]),zr.circles.push(Br.circles[hr+1]),zr.circles.push(Br.circles[hr+2]),zr.circles.push(Br.collisionDetected?1:0)}this.placements[ut.crossTileID]=new zn(Zn||en,kn||sn,An||U.justReloaded),w[ut.crossTileID]=!0};if(ht){const ut=U.getSortedSymbolIndexes(this.transform.angle);for(let En=ut.length-1;En>=0;--En){const bn=ut[En];un(U.symbolInstances.get(bn),bn,U.collisionArrays[bn])}}else for(let ut=f.symbolInstanceStart;ut<f.symbolInstanceEnd;ut++)un(U.symbolInstances.get(ut),ut,U.collisionArrays[ut]);if(O&&U.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[U.bucketInstanceId];k.invert(ut.invProjMatrix,ee),ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}U.justReloaded=!1}markUsedJustification(f,w,O,U){let q;q=U===k.WritingMode.vertical?O.verticalPlacedTextSymbolIndex:{left:O.leftJustifiedTextSymbolIndex,center:O.centerJustifiedTextSymbolIndex,right:O.rightJustifiedTextSymbolIndex}[k.getAnchorJustification(w)];const ee=[O.leftJustifiedTextSymbolIndex,O.centerJustifiedTextSymbolIndex,O.rightJustifiedTextSymbolIndex,O.verticalPlacedTextSymbolIndex];for(const se of ee)se>=0&&(f.text.placedSymbolArray.get(se).crossTileID=q>=0&&se!==q?0:O.crossTileID)}markUsedOrientation(f,w,O){const U=w===k.WritingMode.horizontal||w===k.WritingMode.horizontalOnly?w:0,q=w===k.WritingMode.vertical?w:0,ee=[O.leftJustifiedTextSymbolIndex,O.centerJustifiedTextSymbolIndex,O.rightJustifiedTextSymbolIndex];for(const se of ee)f.text.placedSymbolArray.get(se).placedOrientation=U;O.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(O.verticalPlacedTextSymbolIndex).placedOrientation=q)}commit(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;const w=this.prevPlacement;let O=!1;this.prevZoomAdjustment=w?w.zoomAdjustment(this.transform.zoom):0;const U=w?w.symbolFadeChange(f):1,q=w?w.opacities:{},ee=w?w.variableOffsets:{},se=w?w.placedOrientations:{};for(const ue in this.placements){const me=this.placements[ue],Ce=q[ue];Ce?(this.opacities[ue]=new Bi(Ce,U,me.text,me.icon),O=O||me.text!==Ce.text.placed||me.icon!==Ce.icon.placed):(this.opacities[ue]=new Bi(null,U,me.text,me.icon,me.skipFade),O=O||me.text||me.icon)}for(const ue in q){const me=q[ue];if(!this.opacities[ue]){const Ce=new Bi(me,U,!1,!1);Ce.isHidden()||(this.opacities[ue]=Ce,O=O||me.text.placed||me.icon.placed)}}for(const ue in ee)this.variableOffsets[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.variableOffsets[ue]=ee[ue]);for(const ue in se)this.placedOrientations[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.placedOrientations[ue]=se[ue]);O?this.lastPlacementChangeTime=f:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=w?w.lastPlacementChangeTime:f)}updateLayerOpacities(f,w){const O={};for(const U of w){const q=U.getBucket(f);q&&U.latestFeatureIndex&&f.id===q.layerIds[0]&&this.updateBucketOpacities(q,O,U.collisionBoxArray)}}updateBucketOpacities(f,w,O){f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();const U=f.layers[0].layout,q=new Bi(null,0,!1,!1,!0),ee=U.get("text-allow-overlap"),se=U.get("icon-allow-overlap"),ue=U.get("text-variable-anchor"),me="map"===U.get("text-rotation-alignment"),Ce="map"===U.get("text-pitch-alignment"),Ae="none"!==U.get("icon-text-fit"),Pe=new Bi(null,0,ee&&(se||!f.hasIconData()||U.get("icon-optional")),se&&(ee||!f.hasTextData()||U.get("text-optional")),!0);!f.collisionArrays&&O&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(O);const Ne=($e,et,mt)=>{for(let Ue=0;Ue<et/4;Ue++)$e.opacityVertexArray.emplaceBack(mt)};for(let $e=0;$e<f.symbolInstances.length;$e++){const et=f.symbolInstances.get($e),{numHorizontalGlyphVertices:mt,numVerticalGlyphVertices:Ue,crossTileID:tt}=et;let ot=this.opacities[tt];w[tt]?ot=q:ot||(ot=Pe,this.opacities[tt]=ot),w[tt]=!0;const vt=et.numIconVertices>0,rt=this.placedOrientations[et.crossTileID],ht=rt===k.WritingMode.vertical,en=rt===k.WritingMode.horizontal||rt===k.WritingMode.horizontalOnly;if(mt>0||Ue>0){const sn=Lp(ot.text);Ne(f.text,mt,ht?ia:sn),Ne(f.text,Ue,en?ia:sn);const un=ot.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(bn=>{bn>=0&&(f.text.placedSymbolArray.get(bn).hidden=un||ht?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=un||en?1:0);const ut=this.variableOffsets[et.crossTileID];ut&&this.markUsedJustification(f,ut.anchor,et,rt);const En=this.placedOrientations[et.crossTileID];En&&(this.markUsedJustification(f,"left",et,En),this.markUsedOrientation(f,En,et))}if(vt){const sn=Lp(ot.icon);et.placedIconSymbolIndex>=0&&(Ne(f.icon,et.numIconVertices,ht?ia:sn),f.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=ot.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(Ne(f.icon,et.numVerticalIconVertices,en?ia:sn),f.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=ot.icon.isHidden())}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){const sn=f.collisionArrays[$e];if(sn){let un=new k.pointGeometry(0,0);if(sn.textBox||sn.verticalTextBox){let En=!0;if(ue){const bn=this.variableOffsets[tt];bn?(un=Mr(bn.anchor,bn.width,bn.height,bn.textOffset,bn.textScale),me&&un._rotate(Ce?this.transform.angle:-this.transform.angle)):En=!1}sn.textBox&&Sr(f.textCollisionBox.collisionVertexArray,ot.text.placed,!En||ht,un.x,un.y),sn.verticalTextBox&&Sr(f.textCollisionBox.collisionVertexArray,ot.text.placed,!En||en,un.x,un.y)}const ut=Boolean(!en&&sn.verticalIconBox);sn.iconBox&&Sr(f.iconCollisionBox.collisionVertexArray,ot.icon.placed,ut,Ae?un.x:0,Ae?un.y:0),sn.verticalIconBox&&Sr(f.iconCollisionBox.collisionVertexArray,ot.icon.placed,!ut,Ae?un.x:0,Ae?un.y:0)}}}if(f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){const $e=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=$e.invProjMatrix,f.placementViewportMatrix=$e.viewportMatrix,f.collisionCircleArray=$e.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}}symbolFadeChange(f){return 0===this.fadeDuration?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(f){return Math.max(0,(this.transform.zoom-f)/1.5)}hasTransitions(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(f,w){const O=this.zoomAtLastRecencyCheck===w?1-this.zoomAdjustment(w):1;return this.zoomAtLastRecencyCheck=w,this.commitTime+this.fadeDuration*O>f}setStale(){this.stale=!0}}function Sr(P,f,w,O,U){P.emplaceBack(f?1:0,w?1:0,O||0,U||0),P.emplaceBack(f?1:0,w?1:0,O||0,U||0),P.emplaceBack(f?1:0,w?1:0,O||0,U||0),P.emplaceBack(f?1:0,w?1:0,O||0,U||0)}const vs=Math.pow(2,25),Hs=Math.pow(2,24),ro=Math.pow(2,17),Vo=Math.pow(2,16),bu=Math.pow(2,9),hl=Math.pow(2,8),A_=Math.pow(2,1);function Lp(P){if(0===P.opacity&&!P.placed)return 0;if(1===P.opacity&&P.placed)return 4294967295;const f=P.placed?1:0,w=Math.floor(127*P.opacity);return w*vs+f*Hs+w*ro+f*Vo+w*bu+f*hl+w*A_+f}const ia=0;class Np{constructor(f){this._sortAcrossTiles="viewport-y"!==f.layout.get("symbol-z-order")&&void 0!==f.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(f,w,O,U,q){const ee=this._bucketParts;for(;this._currentTileIndex<f.length;)if(w.getBucketParts(ee,U,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,q())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort((se,ue)=>se.sortKey-ue.sortKey));this._currentPartIndex<ee.length;)if(w.placeLayerBucketPart(ee[this._currentPartIndex],this._seenCrossTileIDs,O),this._currentPartIndex++,q())return!0;return!1}}class xu{constructor(f,w,O,U,q,ee,se,ue){this.placement=new Ro(f,q,ee,se,ue),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=O,this._showCollisionBoxes=U,this._done=!1}isDone(){return this._done}continuePlacement(f,w,O){const U=k.exported.now(),q=()=>{const ee=k.exported.now()-U;return!this._forceFullPlacement&&ee>2};for(;this._currentPlacementIndex>=0;){const ee=w[f[this._currentPlacementIndex]],se=this.placement.collisionIndex.transform.zoom;if("symbol"===ee.type&&(!ee.minzoom||ee.minzoom<=se)&&(!ee.maxzoom||ee.maxzoom>se)){if(this._inProgressLayer||(this._inProgressLayer=new Np(ee)),this._inProgressLayer.continuePlacement(O[ee.source],this.placement,this._showCollisionBoxes,ee,q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(f){return this.placement.commit(f),this.placement}}const Bp=512/k.EXTENT/2;class uc{constructor(f,w,O){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=O;for(let U=0;U<w.length;U++){const q=w.get(U),ee=q.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:q.crossTileID,coord:this.getScaledCoordinates(q,f)})}}getScaledCoordinates(f,w){const O=Bp/Math.pow(2,w.canonical.z-this.tileID.canonical.z);return{x:Math.floor((w.canonical.x*k.EXTENT+f.anchorX)*O),y:Math.floor((w.canonical.y*k.EXTENT+f.anchorY)*O)}}findMatches(f,w,O){const U=this.tileID.canonical.z<w.canonical.z?1:Math.pow(2,this.tileID.canonical.z-w.canonical.z);for(let q=0;q<f.length;q++){const ee=f.get(q);if(ee.crossTileID)continue;const se=this.indexedSymbolInstances[ee.key];if(!se)continue;const ue=this.getScaledCoordinates(ee,w);for(const me of se)if(Math.abs(me.coord.x-ue.x)<=U&&Math.abs(me.coord.y-ue.y)<=U&&!O[me.crossTileID]){O[me.crossTileID]=!0,ee.crossTileID=me.crossTileID;break}}}}class mr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gd{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(f){const w=Math.round((f-this.lng)/360);if(0!==w)for(const O in this.indexes){const U=this.indexes[O],q={};for(const ee in U){const se=U[ee];se.tileID=se.tileID.unwrapTo(se.tileID.wrap+w),q[se.tileID.key]=se}this.indexes[O]=q}this.lng=f}addBucket(f,w,O){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===w.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(let q=0;q<w.symbolInstances.length;q++)w.symbolInstances.get(q).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});const U=this.usedCrossTileIDs[f.overscaledZ];for(const q in this.indexes){const ee=this.indexes[q];if(Number(q)>f.overscaledZ)for(const se in ee){const ue=ee[se];ue.tileID.isChildOf(f)&&ue.findMatches(w.symbolInstances,f,U)}else{const se=ee[f.scaledTo(Number(q)).key];se&&se.findMatches(w.symbolInstances,f,U)}}for(let q=0;q<w.symbolInstances.length;q++){const ee=w.symbolInstances.get(q);ee.crossTileID||(ee.crossTileID=O.generate(),U[ee.crossTileID]=!0)}return void 0===this.indexes[f.overscaledZ]&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new uc(f,w.symbolInstances,w.bucketInstanceId),!0}removeBucketCrossTileIDs(f,w){for(const O in w.indexedSymbolInstances)for(const U of w.indexedSymbolInstances[O])delete this.usedCrossTileIDs[f][U.crossTileID]}removeStaleBuckets(f){let w=!1;for(const O in this.indexes){const U=this.indexes[O];for(const q in U)f[U[q].bucketInstanceId]||(this.removeBucketCrossTileIDs(O,U[q]),delete U[q],w=!0)}return w}}class oh{constructor(){this.layerIndexes={},this.crossTileIDs=new mr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(f,w,O){let U=this.layerIndexes[f.id];void 0===U&&(U=this.layerIndexes[f.id]=new Gd);let q=!1;const ee={};U.handleWrapJump(O);for(const se of w){const ue=se.getBucket(f);ue&&f.id===ue.layerIds[0]&&(ue.bucketInstanceId||(ue.bucketInstanceId=++this.maxBucketInstanceId),U.addBucket(se.tileID,ue,this.crossTileIDs)&&(q=!0),ee[ue.bucketInstanceId]=!0)}return U.removeStaleBuckets(ee)&&(q=!0),q}pruneUnusedLayers(f){const w={};f.forEach(O=>{w[O]=!0});for(const O in this.layerIndexes)w[O]||delete this.layerIndexes[O]}}const jd=(P,f)=>k.emitValidationErrors(P,f&&f.filter(w=>"source.canvas"!==w.identifier)),dl=k.pick(y,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),ed=k.pick(y,["setCenter","setZoom","setBearing","setPitch"]),ra=function(){const P={},f=k.spec.$version;for(const w in k.spec.$root){const O=k.spec.$root[w];if(O.required){let U=null;U="version"===w?f:"array"===O.type?[]:{},null!=U&&(P[w]=U)}}return P}(),D_={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Uo extends k.Evented{constructor(f,w={}){super(),this.map=f,this.dispatcher=new Yt(ve(),this),this.imageManager=new Ui,this.imageManager.setEventedParent(this),this.glyphManager=new k.GlyphManager(f._requestManager,w.localFontFamily?k.LocalGlyphMode.all:w.localIdeographFontFamily?k.LocalGlyphMode.ideographs:k.LocalGlyphMode.none,w.localFontFamily||w.localIdeographFontFamily),this.lineAtlas=new k.LineAtlas(256,512),this.crossTileSymbolIndex=new oh,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new k.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",k.getReferrer());const O=this;this._rtlTextPluginCallback=Uo.registerForPluginStateChange(U=>{O.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:U.pluginStatus,pluginURL:U.pluginURL},(q,ee)=>{if(k.triggerPluginCompletionEvent(q),ee&&ee.every(se=>se))for(const se in O._sourceCaches){const ue=O._sourceCaches[se],me=ue.getSource().type;"vector"!==me&&"geojson"!==me||ue.reload()}})}),this.on("data",U=>{if("source"!==U.dataType||"metadata"!==U.sourceDataType)return;const q=this.getSource(U.sourceId);if(q&&q.vectorLayerIds)for(const ee in this._layers){const se=this._layers[ee];se.source===q.id&&this._validateLayer(se)}})}loadURL(f,w={}){this.fire(new k.Event("dataloading",{dataType:"style"}));const O="boolean"==typeof w.validate?w.validate:!k.isMapboxURL(f);f=this.map._requestManager.normalizeStyleURL(f,w.accessToken);const U=this.map._requestManager.transformRequest(f,k.ResourceType.Style);this._request=k.getJSON(U,(q,ee)=>{this._request=null,q?this.fire(new k.ErrorEvent(q)):ee&&this._load(ee,O)})}loadJSON(f,w={}){this.fire(new k.Event("dataloading",{dataType:"style"})),this._request=k.exported.frame(()=>{this._request=null,this._load(f,!1!==w.validate)})}loadEmpty(){this.fire(new k.Event("dataloading",{dataType:"style"})),this._load(ra,!1)}_updateLayerCount(f,w){const O=w?1:-1;f.is3D()&&(this._num3DLayers+=O),"circle"===f.type&&(this._numCircleLayers+=O),"symbol"===f.type&&(this._numSymbolLayers+=O)}_load(f,w){if(w&&jd(this,k.validateStyle(f)))return;this._loaded=!0,this.stylesheet=f;for(const U in f.sources)this.addSource(U,f.sources[U],{validate:!1});this._changed=!1,f.sprite?this._loadSprite(f.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(f.glyphs);const O=p(this.stylesheet.layers);this._order=O.map(U=>U.id),this._layers={},this._serializedLayers={};for(let U of O)U=k.createStyleLayer(U),U.setEventedParent(this,{layer:{id:U.id}}),this._layers[U.id]=U,this._serializedLayers[U.id]=U.serialize(),this._updateLayerCount(U,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Di(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new k.Event("data",{dataType:"style"})),this.fire(new k.Event("style.load"))}_loadSprite(f){this._spriteRequest=function(w,O,U){let q,ee,se;const ue=k.exported.devicePixelRatio>1?"@2x":"";let me=k.getJSON(O.transformRequest(O.normalizeSpriteURL(w,ue,".json"),k.ResourceType.SpriteJSON),(Pe,Ne)=>{me=null,se||(se=Pe,q=Ne,Ae())}),Ce=k.getImage(O.transformRequest(O.normalizeSpriteURL(w,ue,".png"),k.ResourceType.SpriteImage),(Pe,Ne)=>{Ce=null,se||(se=Pe,ee=Ne,Ae())});function Ae(){if(se)U(se);else if(q&&ee){const Pe=k.exported.getImageData(ee),Ne={};for(const $e in q){const{width:et,height:mt,x:Ue,y:tt,sdf:ot,pixelRatio:vt,stretchX:rt,stretchY:ht,content:en}=q[$e],sn=new k.RGBAImage({width:et,height:mt});k.RGBAImage.copy(Pe,sn,{x:Ue,y:tt},{x:0,y:0},{width:et,height:mt}),Ne[$e]={data:sn,pixelRatio:vt,sdf:ot,stretchX:rt,stretchY:ht,content:en}}U(null,Ne)}}return{cancel(){me&&(me.cancel(),me=null),Ce&&(Ce.cancel(),Ce=null)}}}(f,this.map._requestManager,(w,O)=>{if(this._spriteRequest=null,w)this.fire(new k.ErrorEvent(w));else if(O)for(const U in O)this.imageManager.addImage(U,O[U]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new k.Event("data",{dataType:"style"}))})}_validateLayer(f){const w=this.getSource(f.source);if(!w)return;const O=f.sourceLayer;O&&("geojson"===w.type||w.vectorLayerIds&&-1===w.vectorLayerIds.indexOf(O))&&this.fire(new k.ErrorEvent(new Error(`Source layer "${O}" does not exist on source "${w.id}" as specified by style layer "${f.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const f in this._sourceCaches)if(!this._sourceCaches[f].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(f){const w=[];for(const O of f){const U=this._layers[O];"custom"!==U.type&&w.push(U.serialize())}return w}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const f in this._sourceCaches)if(this._sourceCaches[f].hasTransition())return!0;for(const f in this._layers)if(this._layers[f].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(f){return!!this.terrain&&D_[f.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(f){if(!this._loaded)return;const w=this._changed;if(this._changed){const U=Object.keys(this._updatedLayers),q=Object.keys(this._removedLayers);(U.length||q.length)&&this._updateWorkerLayers(U,q);for(const ee in this._updatedSources){const se=this._updatedSources[ee];"reload"===se?this._reloadSource(ee):"clear"===se&&this._clearSource(ee)}this._updateTilesForChangedImages();for(const ee in this._updatedPaintProps)this._layers[ee].updateTransitions(f);this.light.updateTransitions(f),this.fog&&this.fog.updateTransitions(f),this._resetUpdates()}const O={};for(const U in this._sourceCaches){const q=this._sourceCaches[U];O[U]=q.used,q.used=!1}for(const U of this._order){const q=this._layers[U];if(q.recalculate(f,this._availableImages),!q.isHidden(f.zoom)){const se=this._getLayerSourceCache(q);se&&(se.used=!0)}const ee=this.map.painter;if(ee){const se=q.getProgramIds();if(!se)continue;const ue=q.getProgramConfiguration(f.zoom);for(const me of se)ee.useProgram(me,ue)}}for(const U in O){const q=this._sourceCaches[U];O[U]!==q.used&&q.getSource().fire(new k.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:q.getSource().id}))}this.light.recalculate(f),this.terrain&&this.terrain.recalculate(f),this.fog&&this.fog.recalculate(f),this.z=f.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),w&&this.fire(new k.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const f=Object.keys(this._changedImages);if(f.length){for(const w in this._sourceCaches)this._sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],f);this._changedImages={}}}_updateWorkerLayers(f,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(f),removedIds:w})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(f){if(this._checkLoaded(),jd(this,k.validateStyle(f)))return!1;(f=k.clone$2(f)).layers=p(f.layers);const w=function(U,q){if(!U)return[{command:y.setStyle,args:[q]}];let ee=[];try{if(!Be(U.version,q.version))return[{command:y.setStyle,args:[q]}];Be(U.center,q.center)||ee.push({command:y.setCenter,args:[q.center]}),Be(U.zoom,q.zoom)||ee.push({command:y.setZoom,args:[q.zoom]}),Be(U.bearing,q.bearing)||ee.push({command:y.setBearing,args:[q.bearing]}),Be(U.pitch,q.pitch)||ee.push({command:y.setPitch,args:[q.pitch]}),Be(U.sprite,q.sprite)||ee.push({command:y.setSprite,args:[q.sprite]}),Be(U.glyphs,q.glyphs)||ee.push({command:y.setGlyphs,args:[q.glyphs]}),Be(U.transition,q.transition)||ee.push({command:y.setTransition,args:[q.transition]}),Be(U.light,q.light)||ee.push({command:y.setLight,args:[q.light]}),Be(U.fog,q.fog)||ee.push({command:y.setFog,args:[q.fog]});const se={},ue=[];!function(Ae,Pe,Ne,$e){let et;for(et in Pe=Pe||{},Ae=Ae||{})Ae.hasOwnProperty(et)&&(Pe.hasOwnProperty(et)||M(et,Ne,$e));for(et in Pe)Pe.hasOwnProperty(et)&&(Ae.hasOwnProperty(et)?Be(Ae[et],Pe[et])||("geojson"===Ae[et].type&&"geojson"===Pe[et].type&&R(Ae,Pe,et)?Ne.push({command:y.setGeoJSONSourceData,args:[et,Pe[et].data]}):L(et,Pe,Ne,$e)):C(et,Pe,Ne))}(U.sources,q.sources,ue,se);const me=[];U.layers&&U.layers.forEach(Ae=>{se[Ae.source]?ee.push({command:y.removeLayer,args:[Ae.id]}):me.push(Ae)});let Ce=U.terrain;Ce&&se[Ce.source]&&(ee.push({command:y.setTerrain,args:[void 0]}),Ce=void 0),ee=ee.concat(ue),Be(Ce,q.terrain)||ee.push({command:y.setTerrain,args:[q.terrain]}),function(Ae,Pe,Ne){Pe=Pe||[];const $e=(Ae=Ae||[]).map(G),et=Pe.map(G),mt=Ae.reduce(J,{}),Ue=Pe.reduce(J,{}),tt=$e.slice(),ot=Object.create(null);let vt,rt,ht,en,sn,un,ut;for(vt=0,rt=0;vt<$e.length;vt++)ht=$e[vt],Ue.hasOwnProperty(ht)?rt++:(Ne.push({command:y.removeLayer,args:[ht]}),tt.splice(tt.indexOf(ht,rt),1));for(vt=0,rt=0;vt<et.length;vt++)ht=et[et.length-1-vt],tt[tt.length-1-vt]!==ht&&(mt.hasOwnProperty(ht)?(Ne.push({command:y.removeLayer,args:[ht]}),tt.splice(tt.lastIndexOf(ht,tt.length-rt),1)):rt++,un=tt[tt.length-vt],Ne.push({command:y.addLayer,args:[Ue[ht],un]}),tt.splice(tt.length-vt,0,ht),ot[ht]=!0);for(vt=0;vt<et.length;vt++)if(ht=et[vt],en=mt[ht],sn=Ue[ht],!ot[ht]&&!Be(en,sn))if(Be(en.source,sn.source)&&Be(en["source-layer"],sn["source-layer"])&&Be(en.type,sn.type)){for(ut in H(en.layout,sn.layout,Ne,ht,null,y.setLayoutProperty),H(en.paint,sn.paint,Ne,ht,null,y.setPaintProperty),Be(en.filter,sn.filter)||Ne.push({command:y.setFilter,args:[ht,sn.filter]}),Be(en.minzoom,sn.minzoom)&&Be(en.maxzoom,sn.maxzoom)||Ne.push({command:y.setLayerZoomRange,args:[ht,sn.minzoom,sn.maxzoom]}),en)en.hasOwnProperty(ut)&&"layout"!==ut&&"paint"!==ut&&"filter"!==ut&&"metadata"!==ut&&"minzoom"!==ut&&"maxzoom"!==ut&&(0===ut.indexOf("paint.")?H(en[ut],sn[ut],Ne,ht,ut.slice(6),y.setPaintProperty):Be(en[ut],sn[ut])||Ne.push({command:y.setLayerProperty,args:[ht,ut,sn[ut]]}));for(ut in sn)sn.hasOwnProperty(ut)&&!en.hasOwnProperty(ut)&&"layout"!==ut&&"paint"!==ut&&"filter"!==ut&&"metadata"!==ut&&"minzoom"!==ut&&"maxzoom"!==ut&&(0===ut.indexOf("paint.")?H(en[ut],sn[ut],Ne,ht,ut.slice(6),y.setPaintProperty):Be(en[ut],sn[ut])||Ne.push({command:y.setLayerProperty,args:[ht,ut,sn[ut]]}))}else Ne.push({command:y.removeLayer,args:[ht]}),un=tt[tt.lastIndexOf(ht)+1],Ne.push({command:y.addLayer,args:[sn,un]})}(me,q.layers,ee)}catch(se){console.warn("Unable to compute style diff:",se),ee=[{command:y.setStyle,args:[q]}]}return ee}(this.serialize(),f).filter(U=>!(U.command in ed));if(0===w.length)return!1;const O=w.filter(U=>!(U.command in dl));if(O.length>0)throw new Error(`Unimplemented: ${O.map(U=>U.command).join(", ")}.`);return w.forEach(U=>{"setTransition"!==U.command&&this[U.command].apply(this,U.args)}),this.stylesheet=f,!0}addImage(f,w){if(this.getImage(f))return this.fire(new k.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(f,w),this._afterImageUpdated(f)}updateImage(f,w){this.imageManager.updateImage(f,w)}getImage(f){return this.imageManager.getImage(f)}removeImage(f){if(!this.getImage(f))return this.fire(new k.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(f),this._afterImageUpdated(f)}_afterImageUpdated(f){this._availableImages=this.imageManager.listImages(),this._changedImages[f]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new k.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(f,w,O={}){if(this._checkLoaded(),void 0!==this.getSource(f))throw new Error("There is already a source with this ID");if(!w.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(w).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(w.type)>=0&&this._validate(k.validateStyle.source,`sources.${f}`,w,null,O))return;this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);const U=De(f,w,this.dispatcher,this);U.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:U.serialize(),sourceId:f}));const q=ee=>{const se=(ee?"symbol:":"other:")+f,ue=this._sourceCaches[se]=new k.SourceCache(se,U,ee);(ee?this._symbolSourceCaches:this._otherSourceCaches)[f]=ue,ue.style=this,ue.onAdd(this.map)};q(!1),"vector"!==w.type&&"geojson"!==w.type||q(!0),U.onAdd&&U.onAdd(this.map),this._changed=!0}removeSource(f){this._checkLoaded();const w=this.getSource(f);if(void 0===w)throw new Error("There is no source with this ID");for(const U in this._layers)if(this._layers[U].source===f)return this.fire(new k.ErrorEvent(new Error(`Source "${f}" cannot be removed while layer "${U}" is using it.`)));if(this.terrain&&this.terrain.get().source===f)return this.fire(new k.ErrorEvent(new Error(`Source "${f}" cannot be removed while terrain is using it.`)));const O=this._getSourceCaches(f);for(const U of O)delete this._sourceCaches[U.id],delete this._updatedSources[U.id],U.fire(new k.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:U.getSource().id})),U.setEventedParent(null),U.clearTiles();delete this._otherSourceCaches[f],delete this._symbolSourceCaches[f],w.setEventedParent(null),w.onRemove&&w.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(f,w){this._checkLoaded(),this.getSource(f).setData(w),this._changed=!0}getSource(f){const w=this._getSourceCache(f);return w&&w.getSource()}addLayer(f,w,O={}){this._checkLoaded();const U=f.id;if(this.getLayer(U))return void this.fire(new k.ErrorEvent(new Error(`Layer with id "${U}" already exists on this map`)));let q;if("custom"===f.type){if(jd(this,k.validateCustomStyleLayer(f)))return;q=k.createStyleLayer(f)}else{if("object"==typeof f.source&&(this.addSource(U,f.source),f=k.clone$2(f),f=k.extend(f,{source:U})),this._validate(k.validateStyle.layer,`layers.${U}`,f,{arrayIndex:-1},O))return;q=k.createStyleLayer(f),this._validateLayer(q),q.setEventedParent(this,{layer:{id:U}}),this._serializedLayers[q.id]=q.serialize(),this._updateLayerCount(q,!0)}const ee=w?this._order.indexOf(w):this._order.length;if(w&&-1===ee)return void this.fire(new k.ErrorEvent(new Error(`Layer with id "${w}" does not exist on this map.`)));this._order.splice(ee,0,U),this._layerOrderChanged=!0,this._layers[U]=q;const se=this._getLayerSourceCache(q);if(this._removedLayers[U]&&q.source&&se&&"custom"!==q.type){const ue=this._removedLayers[U];delete this._removedLayers[U],ue.type!==q.type?this._updatedSources[q.source]="clear":(this._updatedSources[q.source]="reload",se.pause())}this._updateLayer(q),q.onAdd&&q.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(f,w){if(this._checkLoaded(),this._changed=!0,!this._layers[f])return void this.fire(new k.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be moved.`)));if(f===w)return;const O=this._order.indexOf(f);this._order.splice(O,1);const U=w?this._order.indexOf(w):this._order.length;w&&-1===U?this.fire(new k.ErrorEvent(new Error(`Layer with id "${w}" does not exist on this map.`))):(this._order.splice(U,0,f),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(f){this._checkLoaded();const w=this._layers[f];if(!w)return void this.fire(new k.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be removed.`)));w.setEventedParent(null),this._updateLayerCount(w,!1);const O=this._order.indexOf(f);this._order.splice(O,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[f]=w,delete this._layers[f],delete this._serializedLayers[f],delete this._updatedLayers[f],delete this._updatedPaintProps[f],w.onRemove&&w.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(f){return this._layers[f]}hasLayer(f){return f in this._layers}hasLayerType(f){for(const w in this._layers)if(this._layers[w].type===f)return!0;return!1}setLayerZoomRange(f,w,O){this._checkLoaded();const U=this.getLayer(f);U?U.minzoom===w&&U.maxzoom===O||(null!=w&&(U.minzoom=w),null!=O&&(U.maxzoom=O),this._updateLayer(U)):this.fire(new k.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(f,w,O={}){this._checkLoaded();const U=this.getLayer(f);if(U){if(!Be(U.filter,w))return null==w?(U.filter=void 0,void this._updateLayer(U)):void(this._validate(k.validateStyle.filter,`layers.${U.id}.filter`,w,null,O)||(U.filter=k.clone$2(w),this._updateLayer(U)))}else this.fire(new k.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be filtered.`)))}getFilter(f){return k.clone$2(this.getLayer(f).filter)}setLayoutProperty(f,w,O,U={}){this._checkLoaded();const q=this.getLayer(f);q?Be(q.getLayoutProperty(w),O)||(q.setLayoutProperty(w,O,U),this._updateLayer(q)):this.fire(new k.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(f,w){const O=this.getLayer(f);if(O)return O.getLayoutProperty(w);this.fire(new k.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style.`)))}setPaintProperty(f,w,O,U={}){this._checkLoaded();const q=this.getLayer(f);q?Be(q.getPaintProperty(w),O)||(q.setPaintProperty(w,O,U)&&this._updateLayer(q),this._changed=!0,this._updatedPaintProps[f]=!0):this.fire(new k.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(f,w){return this.getLayer(f).getPaintProperty(w)}setFeatureState(f,w){this._checkLoaded();const O=f.source,U=f.sourceLayer,q=this.getSource(O);if(void 0===q)return void this.fire(new k.ErrorEvent(new Error(`The source '${O}' does not exist in the map's style.`)));const ee=q.type;if("geojson"===ee&&U)return void this.fire(new k.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===ee&&!U)return void this.fire(new k.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===f.id&&this.fire(new k.ErrorEvent(new Error("The feature id parameter must be provided.")));const se=this._getSourceCaches(O);for(const ue of se)ue.setFeatureState(U,f.id,w)}removeFeatureState(f,w){this._checkLoaded();const O=f.source,U=this.getSource(O);if(void 0===U)return void this.fire(new k.ErrorEvent(new Error(`The source '${O}' does not exist in the map's style.`)));const q=U.type,ee="vector"===q?f.sourceLayer:void 0;if("vector"===q&&!ee)return void this.fire(new k.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(w&&"string"!=typeof f.id&&"number"!=typeof f.id)return void this.fire(new k.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const se=this._getSourceCaches(O);for(const ue of se)ue.removeFeatureState(ee,f.id,w)}getFeatureState(f){this._checkLoaded();const w=f.source,O=f.sourceLayer,U=this.getSource(w);if(void 0!==U){if("vector"!==U.type||O)return void 0===f.id&&this.fire(new k.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(w)[0].getFeatureState(O,f.id);this.fire(new k.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new k.ErrorEvent(new Error(`The source '${w}' does not exist in the map's style.`)))}getTransition(){return k.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const f={};for(const w in this._sourceCaches){const O=this._sourceCaches[w].getSource();f[O.id]||(f[O.id]=O.serialize())}return k.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:f,layers:this._serializeLayers(this._order)},w=>void 0!==w)}_updateLayer(f){this._updatedLayers[f.id]=!0;const w=this._getLayerSourceCache(f);f.source&&!this._updatedSources[f.source]&&w&&"raster"!==w.getSource().type&&(this._updatedSources[f.source]="reload",w.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(f){const w=ee=>"fill-extrusion"===this._layers[ee].type,O={},U=[];for(let ee=this._order.length-1;ee>=0;ee--){const se=this._order[ee];if(w(se)){O[se]=ee;for(const ue of f){const me=ue[se];if(me)for(const Ce of me)U.push(Ce)}}}U.sort((ee,se)=>se.intersectionZ-ee.intersectionZ);const q=[];for(let ee=this._order.length-1;ee>=0;ee--){const se=this._order[ee];if(w(se))for(let ue=U.length-1;ue>=0;ue--){const me=U[ue].feature;if(O[me.layer.id]<ee)break;q.push(me),U.pop()}else for(const ue of f){const me=ue[se];if(me)for(const Ce of me)q.push(Ce.feature)}}return q}queryRenderedFeatures(f,w,O){w&&w.filter&&this._validate(k.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);const U={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new k.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ue of w.layers){const me=this._layers[ue];if(!me)return this.fire(new k.ErrorEvent(new Error(`The layer '${ue}' does not exist in the map's style and cannot be queried for features.`))),[];U[me.source]=!0}}const q=[];w.availableImages=this._availableImages;const ee=w&&w.layers?w.layers.some(ue=>{const me=this.getLayer(ue);return me&&me.is3D()}):this.has3DLayers(),se=hi.createFromScreenPoints(f,O);for(const ue in this._sourceCaches){const me=this._sourceCaches[ue].getSource().id;w.layers&&!U[me]||q.push(it(this._sourceCaches[ue],this._layers,this._serializedLayers,se,w,O,ee,!!this.map._showQueryGeometry))}return this.placement&&q.push(function(ue,me,Ce,Ae,Pe,Ne,$e){const et={},mt=Ne.queryRenderedSymbols(Ae),Ue=[];for(const tt of Object.keys(mt).map(Number))Ue.push($e[tt]);Ue.sort(Ot);for(const tt of Ue){const ot=tt.featureIndex.lookupSymbolFeatures(mt[tt.bucketInstanceId],me,tt.bucketIndex,tt.sourceLayerIndex,Pe.filter,Pe.layers,Pe.availableImages,ue);for(const vt in ot){const rt=et[vt]=et[vt]||[],ht=ot[vt];ht.sort((en,sn)=>{const un=tt.featureSortOrder;if(un){const ut=un.indexOf(en.featureIndex);return un.indexOf(sn.featureIndex)-ut}return sn.featureIndex-en.featureIndex});for(const en of ht)rt.push(en)}}for(const tt in et)et[tt].forEach(ot=>{const vt=ot.feature,rt=Ce(ue[tt]).getFeatureState(vt.layer["source-layer"],vt.id);vt.source=vt.layer.source,vt.layer["source-layer"]&&(vt.sourceLayer=vt.layer["source-layer"]),vt.state=rt});return et}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),se.screenGeometry,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(q)}querySourceFeatures(f,w){w&&w.filter&&this._validate(k.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);const O=this._getSourceCaches(f);let U=[];for(const q of O)U=U.concat(yt(q,w));return U}addSourceType(f,w,O){return Uo.getSourceType(f)?O(new Error(`A source type called "${f}" already exists.`)):(Uo.setSourceType(f,w),w.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:w.workerSourceURL},O):O(null,null))}getLight(){return this.light.getLight()}setLight(f,w={}){this._checkLoaded();const O=this.light.getLight();let U=!1;for(const ee in f)if(!Be(f[ee],O[ee])){U=!0;break}if(!U)return;const q={now:k.exported.now(),transition:k.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(f,w),this.light.updateTransitions(q)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(f){if(this._checkLoaded(),!f)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof f.source){const w="terrain-dem-src";this.addSource(w,f.source),f=k.clone$2(f),f=k.extend(f,{source:w})}if(!this._validate(k.validateStyle.terrain,"terrain",f)){if(this.terrain){const w=this.terrain,O=w.get();for(const U in f)if(!Be(f[U],O[U])){w.set(f),this.stylesheet.terrain=f;const q={now:k.exported.now(),transition:k.extend({duration:0},this.stylesheet.transition)};w.updateTransitions(q);break}}else this._createTerrain(f);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(f){const w=this.fog=new fn(f);this.stylesheet.fog=f;const O={now:k.exported.now(),transition:k.extend({duration:0},this.stylesheet.transition)};w.updateTransitions(O)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const f of this.map._markers)f._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(f){if(this._checkLoaded(),!f)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const w=this.fog,O=w.get();for(const U in f)if(!Be(f[U],O[U])){w.set(f),this.stylesheet.fog=f;const q={now:k.exported.now(),transition:k.extend({duration:0},this.stylesheet.transition)};w.updateTransitions(q);break}}else this._createFog(f);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const f=this._order.filter(O=>this.isLayerDraped(this._layers[O])),w=this._order.filter(O=>!this.isLayerDraped(this._layers[O]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...f),this._drapedFirstOrder.push(...w)}_createTerrain(f){const w=this.terrain=new nr(f);this.stylesheet.terrain=f,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const O={now:k.exported.now(),transition:k.extend({duration:0},this.stylesheet.transition)};w.updateTransitions(O)}_force3DLayerUpdate(){for(const f in this._layers){const w=this._layers[f];"fill-extrusion"===w.type&&this._updateLayer(w)}}_validate(f,w,O,U,q={}){return(!q||!1!==q.validate)&&jd(this,f.call(k.validateStyle,k.extend({key:w,style:this.serialize(),value:O,styleSpec:k.spec},U)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),k.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this._sourceCaches)this._sourceCaches[f].clearTiles(),this._sourceCaches[f].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(f){const w=this._getSourceCaches(f);for(const O of w)O.clearTiles()}_reloadSource(f){const w=this._getSourceCaches(f);for(const O of w)O.resume(),O.reload()}_updateSources(f){for(const w in this._sourceCaches)this._sourceCaches[w].update(f)}_generateCollisionBoxes(){for(const f in this._sourceCaches){const w=this._sourceCaches[f];w.resume(),w.reload()}}_updatePlacement(f,w,O,U,q=!1){let ee=!1,se=!1;const ue={};for(const me of this._order){const Ce=this._layers[me];if("symbol"!==Ce.type)continue;if(!ue[Ce.source]){const Pe=this._getLayerSourceCache(Ce);if(!Pe)continue;ue[Ce.source]=Pe.getRenderableIds(!0).map(Ne=>Pe.getTileByID(Ne)).sort((Ne,$e)=>$e.tileID.overscaledZ-Ne.tileID.overscaledZ||(Ne.tileID.isLessThan($e.tileID)?-1:1))}const Ae=this.crossTileSymbolIndex.addLayer(Ce,ue[Ce.source],f.center.lng);ee=ee||Ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),q=q||this._layerOrderChanged||0===O,this._layerOrderChanged&&this.fire(new k.Event("neworder")),(q||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(k.exported.now(),f.zoom))&&(this.pauseablePlacement=new xu(f,this._order,q,w,O,U,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ue),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(k.exported.now()),se=!0),ee&&this.pauseablePlacement.placement.setStale()),se||ee)for(const me of this._order){const Ce=this._layers[me];"symbol"===Ce.type&&this.placement.updateLayerOpacities(Ce,ue[Ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(k.exported.now())}_releaseSymbolFadeTiles(){for(const f in this._sourceCaches)this._sourceCaches[f].releaseSymbolFadeTiles()}getImages(f,w,O){this.imageManager.getImages(w.icons,O),this._updateTilesForChangedImages();const U=q=>{q&&q.setDependencies(w.tileID.key,w.type,w.icons)};U(this._otherSourceCaches[w.source]),U(this._symbolSourceCaches[w.source])}getGlyphs(f,w,O){this.glyphManager.getGlyphs(w.stacks,O)}getResource(f,w,O){return k.makeRequest(w,O)}_getSourceCache(f){return this._otherSourceCaches[f]}_getLayerSourceCache(f){return"symbol"===f.type?this._symbolSourceCaches[f.source]:this._otherSourceCaches[f.source]}_getSourceCaches(f){const w=[];return this._otherSourceCaches[f]&&w.push(this._otherSourceCaches[f]),this._symbolSourceCaches[f]&&w.push(this._symbolSourceCaches[f]),w}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}Uo.getSourceType=function(P){return we[P]},Uo.setSourceType=function(P,f){we[P]=f},Uo.registerForPluginStateChange=k.registerForPluginStateChange;var Yd="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",pl="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let wu={},Fi={};wu=$i("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),Fi=$i("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const fl=$i("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),sh=Yd;var ah={background:$i("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:$i("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:$i("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:$i("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$i("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec3 pos=vec3(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)));gl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:$i("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:$i("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$i("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$i("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:$i("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:$i("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:$i("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:$i("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:$i("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);gl_Position=u_matrix*vec4(pos,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:$i("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);\n#else\nvec3 p=vec3(pos_nx.xy,z);gl_Position=u_matrix*vec4(p,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:$i("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$i("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:$i("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineGradient:$i("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:$i("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineSDF:$i("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);v_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:$i("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:$i("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:$i("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:$i("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:$i("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:$i("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:$i("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",pl),skyboxGradient:$i("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",pl),skyboxCapture:$i("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}")};function $i(P,f,w){const O=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,U=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,q=f.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),ee=P.match(U),se=f.match(U),ue=Yd.match(U);let me=se?se.concat(ee):ee;w||(wu.staticUniforms&&(me=wu.staticUniforms.concat(me)),Fi.staticUniforms&&(me=Fi.staticUniforms.concat(me))),me&&(me=me.concat(ue));const Ce={};return{fragmentSource:P=P.replace(O,(Ae,Pe,Ne,$e,et)=>(Ce[et]=!0,"define"===Pe?`\n#ifndef HAS_UNIFORM_u_${et}\nvarying ${Ne} ${$e} ${et};\n#else\nuniform ${Ne} ${$e} u_${et};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${et}\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`)),vertexSource:f=f.replace(O,(Ae,Pe,Ne,$e,et)=>{const mt="float"===$e?"vec2":"vec4",Ue=et.match(/color/)?"color":mt;return Ce[et]?"define"===Pe?`\n#ifndef HAS_UNIFORM_u_${et}\nuniform lowp float u_${et}_t;\nattribute ${Ne} ${mt} a_${et};\nvarying ${Ne} ${$e} ${et};\n#else\nuniform ${Ne} ${$e} u_${et};\n#endif\n`:"vec4"===Ue?`\n#ifndef HAS_UNIFORM_u_${et}\n    ${et} = a_${et};\n#else\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${et}\n    ${et} = unpack_mix_${Ue}(a_${et}, u_${et}_t);\n#else\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`:"define"===Pe?`\n#ifndef HAS_UNIFORM_u_${et}\nuniform lowp float u_${et}_t;\nattribute ${Ne} ${mt} a_${et};\n#else\nuniform ${Ne} ${$e} u_${et};\n#endif\n`:"vec4"===Ue?`\n#ifndef HAS_UNIFORM_u_${et}\n    ${Ne} ${$e} ${et} = a_${et};\n#else\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${et}\n    ${Ne} ${$e} ${et} = unpack_mix_${Ue}(a_${et}, u_${et}_t);\n#else\n    ${Ne} ${$e} ${et} = u_${et};\n#endif\n`}),staticAttributes:q,staticUniforms:me}}class lh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(f,w,O,U,q,ee,se,ue){this.context=f;let me=this.boundPaintVertexBuffers.length!==U.length;for(let Ce=0;!me&&Ce<U.length;Ce++)this.boundPaintVertexBuffers[Ce]!==U[Ce]&&(me=!0);f.extVertexArrayObject&&this.vao&&this.boundProgram===w&&this.boundLayoutVertexBuffer===O&&!me&&this.boundIndexBuffer===q&&this.boundVertexOffset===ee&&this.boundDynamicVertexBuffer===se&&this.boundDynamicVertexBuffer2===ue?(f.bindVertexArrayOES.set(this.vao),se&&se.bind(),q&&q.dynamicDraw&&q.bind(),ue&&ue.bind()):this.freshBind(w,O,U,q,ee,se,ue)}freshBind(f,w,O,U,q,ee,se){let ue;const me=f.numAttributes,Ce=this.context,Ae=Ce.gl;if(Ce.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ce.extVertexArrayObject.createVertexArrayOES(),Ce.bindVertexArrayOES.set(this.vao),ue=0,this.boundProgram=f,this.boundLayoutVertexBuffer=w,this.boundPaintVertexBuffers=O,this.boundIndexBuffer=U,this.boundVertexOffset=q,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=se;else{ue=Ce.currentNumAttributes||0;for(let Pe=me;Pe<ue;Pe++)Ae.disableVertexAttribArray(Pe)}w.enableAttributes(Ae,f);for(const Pe of O)Pe.enableAttributes(Ae,f);ee&&ee.enableAttributes(Ae,f),se&&se.enableAttributes(Ae,f),w.bind(),w.setVertexAttribPointers(Ae,f,q);for(const Pe of O)Pe.bind(),Pe.setVertexAttribPointers(Ae,f,q);ee&&(ee.bind(),ee.setVertexAttribPointers(Ae,f,q)),U&&U.bind(),se&&(se.bind(),se.setVertexAttribPointers(Ae,f,q)),Ce.currentNumAttributes=me}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ch(P,f){const w=Math.pow(2,f.canonical.z),O=f.canonical.y;return[new k.MercatorCoordinate(0,O/w).toLngLat().lat,new k.MercatorCoordinate(0,(O+1)/w).toLngLat().lat]}function qd(P,f,w,O,U,q,ee){const se=P.context,ue=se.gl,me=w.fbo;if(!me)return;P.prepareDrawTile(f);const Ce=P.useProgram("hillshade");se.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,me.colorAttachment.get());const Ae=((Pe,Ne,$e,et)=>{const mt=$e.paint.get("hillshade-shadow-color"),Ue=$e.paint.get("hillshade-highlight-color"),tt=$e.paint.get("hillshade-accent-color");let ot=$e.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===$e.paint.get("hillshade-illumination-anchor")&&(ot-=Pe.transform.angle);const vt=!Pe.options.moving;return{u_matrix:et||Pe.transform.calculateProjMatrix(Ne.tileID.toUnwrapped(),vt),u_image:0,u_latrange:ch(0,Ne.tileID),u_light:[$e.paint.get("hillshade-exaggeration"),ot],u_shadow:mt,u_highlight:Ue,u_accent:tt}})(P,w,O,P.terrain?f.projMatrix:null);P.prepareDrawProgram(se,Ce,f.toUnwrapped()),Ce.draw(se,ue.TRIANGLES,U,q,ee,k.CullFaceMode.disabled,Ae,O.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}function Zd(P,f,w){if(!f.needsDEMTextureUpload)return;const O=P.context,U=O.gl;O.pixelStoreUnpackPremultiplyAlpha.set(!1),f.demTexture=f.demTexture||P.getTileTexture(w.stride);const q=w.getPixels();f.demTexture?f.demTexture.update(q,{premultiply:!1}):f.demTexture=new k.Texture(O,q,U.RGBA,{premultiply:!1}),f.needsDEMTextureUpload=!1}function Gs(P,f,w,O,U,q){const ee=P.context,se=ee.gl;if(!f.dem)return;const ue=f.dem;if(ee.activeTexture.set(se.TEXTURE1),Zd(P,f,ue),!f.demTexture)return;f.demTexture.bind(se.NEAREST,se.CLAMP_TO_EDGE);const me=ue.dim;ee.activeTexture.set(se.TEXTURE0);let Ce=f.fbo;if(!Ce){const Ae=new k.Texture(ee,{width:me,height:me,data:null},se.RGBA);Ae.bind(se.LINEAR,se.CLAMP_TO_EDGE),Ce=f.fbo=ee.createFramebuffer(me,me,!0),Ce.colorAttachment.set(Ae.texture)}ee.bindFramebuffer.set(Ce.framebuffer),ee.viewport.set([0,0,me,me]),P.useProgram("hillshadePrepare").draw(ee,se.TRIANGLES,O,U,q,k.CullFaceMode.disabled,((Ae,Pe)=>{const Ne=Pe.stride,$e=k.create$1();return k.ortho($e,0,k.EXTENT,-k.EXTENT,0,0,1),k.translate($e,$e,[0,-k.EXTENT,0]),{u_matrix:$e,u_image:1,u_dimension:[Ne,Ne],u_zoom:Ae.overscaledZ,u_unpack:Pe.unpackVector}})(f.tileID,ue),w.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments),f.needsHillshadePrepare=!1}const ui=(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_image0:new k.Uniform1i(P,f.u_image0),u_skirt_height:new k.Uniform1f(P,f.u_skirt_height)}),uh=(P,f)=>({u_matrix:P,u_image0:0,u_skirt_height:f}),Cu=new class{constructor(){this.operations={}}newMorphing(P,f,w,O,U){if(P in this.operations){const q=this.operations[P];q.to.tileID.key!==w.tileID.key&&(q.queued=w)}else this.operations[P]={startTime:O,phase:0,duration:U,from:f,to:w,queued:null}}getMorphValuesForProxy(P){if(!(P in this.operations))return null;const f=this.operations[P];return{from:f.from,to:f.to,phase:f.phase}}update(P){for(const f in this.operations){const w=this.operations[f];for(w.phase=(P-w.startTime)/w.duration;w.phase>=1||!this._validOp(w);)if(!this._nextOp(w,P)){delete this.operations[f];break}}}_nextOp(P,f){return!!P.queued&&(P.from=P.to,P.to=P.queued,P.queued=null,P.phase=0,P.startTime=f,!0)}_validOp(P){return P.from.hasData()&&P.to.hasData()}},hh={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function td(P,f){const w=1<<P.z;return!f&&(0===P.x||P.x===w-1)||0===P.y||P.y===w-1}const zl=P=>({u_matrix:P});function Xr(P,f,w,O,U){if(U>0){const q=k.exported.now(),ee=(q-P.timeAdded)/U,se=f?(q-f.timeAdded)/U:-1,ue=w.getSource(),me=O.coveringZoomLevel({tileSize:ue.tileSize,roundZoom:ue.roundZoom}),Ce=!f||Math.abs(f.tileID.overscaledZ-me)>Math.abs(P.tileID.overscaledZ-me),Ae=Ce&&P.refreshedUponExpiration?1:k.clamp(Ce?ee:1-se,0,1);return P.refreshedUponExpiration&&ee>=1&&(P.refreshedUponExpiration=!1),f?{opacity:1,mix:1-Ae}:{opacity:Ae,mix:0}}return{opacity:1,mix:0}}class dh extends k.SourceCache{constructor(f){const w=De("proxy",{type:"geojson",maxzoom:f.transform.maxZoom},new Yt(ve(),null),f.style);super("proxy",w,!1),w.setEventedParent(this),this.map=this.getSource().map=f,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(f,w,O){if(f.freezeTileCoverage)return;this.transform=f;const U=f.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((q,ee)=>{if(q[ee.key]="",!this._tiles[ee.key]){const se=new k.Tile(ee,this._source.tileSize*ee.overscaleFactor(),f.tileZoom);se.state="loaded",this._tiles[ee.key]=se}return q},{});for(const q in this._tiles)q in U||(this.freeFBO(q),this._tiles[q].state="unloaded",delete this._tiles[q])}freeFBO(f){const w=this.proxyCachedFBO[f];if(void 0!==w){const O=Object.values(w);this.renderCachePool.push(...O),delete this.proxyCachedFBO[f]}}deallocRenderCache(){this.renderCache.forEach(f=>f.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ii extends k.OverscaledTileID{constructor(f,w,O){super(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y),this.proxyTileKey=w,this.projMatrix=O}}class zp extends k.Elevation{constructor(f,w){super(),this.painter=f,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[O,U,q]=function(ue){const me=new k.StructArrayLayout4i8,Ce=new k.StructArrayLayout3ui6;me.reserve(17161),Ce.reserve(33800);const Pe=k.EXTENT/128,Ne=k.EXTENT+Pe/2,$e=Ne+Pe;for(let mt=-Pe;mt<$e;mt+=Pe)for(let Ue=-Pe;Ue<$e;Ue+=Pe){const tt=Ue<0||Ue>Ne||mt<0||mt>Ne?24575:0,ot=k.clamp(Math.round(Ue),0,k.EXTENT),vt=k.clamp(Math.round(mt),0,k.EXTENT);me.emplaceBack(ot+tt,vt,ot,vt)}const et=(mt,Ue)=>{const tt=131*Ue+mt;Ce.emplaceBack(tt+1,tt,tt+131),Ce.emplaceBack(tt+131,tt+131+1,tt+1)};for(let mt=1;mt<129;mt++)for(let Ue=1;Ue<129;Ue++)et(Ue,mt);return[0,129].forEach(mt=>{for(let Ue=0;Ue<130;Ue++)et(Ue,mt),et(mt,Ue)}),[me,Ce,32768]}(),ee=f.context;this.gridBuffer=ee.createVertexBuffer(O,ir.members),this.gridIndexBuffer=ee.createIndexBuffer(U),this.gridSegments=k.SegmentVector.simpleSegment(0,0,O.length,U.length),this.gridNoSkirtSegments=k.SegmentVector.simpleSegment(0,0,O.length,q),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new dh(w.map),this.orthoMatrix=k.create$1(),k.ortho(this.orthoMatrix,0,k.EXTENT,0,k.EXTENT,0,1);const se=ee.gl;this._overlapStencilMode=new k.StencilMode({func:se.GEQUAL,mask:255},0,255,se.KEEP,se.KEEP,se.REPLACE),this._previousZoom=f.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=w,this._useVertexMorphing=!0,this._exaggeration=1}set style(f){f.on("data",this._onStyleDataEvent.bind(this)),f.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=f,this._checkRenderCacheEfficiency()}update(f,w,O){if(f&&f.terrain){this._style!==f&&(this.style=f),this.enabled=!0;const U=f.terrain.properties;this.sourceCache=f._getSourceCache(U.get("source")),this._exaggeration=U.get("exaggeration");const q=()=>{this.sourceCache.used&&k.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const ee=this.sourceCache.getSource().tileSize/128,se=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(w,ee*se,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,q(),this._initializing=!0),q(),w.updateElevation(!O),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(w),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const f=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==f.efficiency&&k.warnOnce(`Terrain render cache efficiency is not optimal (${f.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${f.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(f){f.coord&&"source"===f.dataType?this._clearRenderCacheForTile(f.sourceCacheId,f.coord):"style"===f.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const f in this._style._sourceCaches)this._style._sourceCaches[f].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(f=>f.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const f=2*this.proxySourceCache.getSource().tileSize;return[f,f]}set useVertexMorphing(f){this._useVertexMorphing=f}updateTileBinding(f){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const w=this.proxySourceCache,O=this.painter.transform;this._initializing&&(this._initializing=0===O._centerAltitude&&-1===this.getAtPointOrZero(k.MercatorCoordinate.fromLngLat(O.center),-1),this._emptyDEMTextureDirty=!this._initializing);const U=this.proxyCoords=w.getIds().map(ue=>{const me=w.getTileByID(ue).tileID;return me.projMatrix=O.calculateProjMatrix(me.toUnwrapped()),me});(function(ue,me){const Ce=me.transform.pointCoordinate(me.transform.getCameraPoint()),Ae=new k.pointGeometry(Ce.x,Ce.y);ue.sort((Pe,Ne)=>{if(Ne.overscaledZ-Pe.overscaledZ)return Ne.overscaledZ-Pe.overscaledZ;const $e=new k.pointGeometry(Pe.canonical.x+(1<<Pe.canonical.z)*Pe.wrap,Pe.canonical.y),et=new k.pointGeometry(Ne.canonical.x+(1<<Ne.canonical.z)*Ne.wrap,Ne.canonical.y),mt=Ae.mult(1<<Pe.canonical.z);return mt.x-=.5,mt.y-=.5,mt.distSqr($e)-mt.distSqr(et)})})(U,this.painter),this._previousZoom=O.zoom;const q=this.proxyToSource||{};this.proxyToSource={},U.forEach(ue=>{this.proxyToSource[ue.key]={}}),this.terrainTileForTile={};const ee=this._style._sourceCaches;for(const ue in ee){const me=ee[ue];if(!me.used||(me!==this.sourceCache&&(this._findCoveringTileCache[me.id]={}),this._setupProxiedCoordsForOrtho(me,f[ue],q),me.usedForTerrain))continue;const Ce=f[ue];me.getSource().reparseOverscaled&&this._assignTerrainTiles(Ce)}this.proxiedCoords[w.id]=U.map(ue=>new Ii(ue,ue.key,this.orthoMatrix)),this._assignTerrainTiles(U),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(q),this.renderingToTexture=!1,this._updateTimestamp=k.exported.now();const se={};this._visibleDemTiles=[];for(const ue of this.proxyCoords){const me=this.terrainTileForTile[ue.key];if(!me)continue;const Ce=me.tileID.key;Ce in se||(this._visibleDemTiles.push(me),se[Ce]=Ce)}}_assignTerrainTiles(f){this._initializing||f.forEach(w=>{if(this.terrainTileForTile[w.key])return;const O=this._findTileCoveringTileID(w,this.sourceCache);O&&(this.terrainTileForTile[w.key]=O)})}_prepareDEMTextures(){const f=this.painter.context,w=f.gl;for(const O in this.terrainTileForTile){const U=this.terrainTileForTile[O],q=U.dem;!q||U.demTexture&&!U.needsDEMTextureUpload||(f.activeTexture.set(w.TEXTURE1),Zd(this.painter,U,q))}}_prepareDemTileUniforms(f,w,O,U){if(!w||null==w.demTexture)return!1;const q=f.tileID.canonical,ee=Math.pow(2,w.tileID.canonical.z-q.z),se=U||"";return O[`u_dem_tl${se}`]=[q.x*ee%1,q.y*ee%1],O[`u_dem_scale${se}`]=ee,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let f=0;const w=this._visibleDemTiles.reduce((O,U)=>{if(!U.dem)return O;const q=U.dem.tree.minimums[0];return q>0&&f++,O+q},0);return f?w/f:0}_updateEmptyDEMTexture(){const f=this.painter.context,w=f.gl;f.activeTexture.set(w.TEXTURE2);const O=this._getLoadedAreaMinimum(),U={width:1,height:1,data:new Uint8Array(k.DEMData.pack(O,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let q=this._emptyDEMTexture;return q?q.update(U,{premultiply:!1}):q=this._emptyDEMTexture=new k.Texture(f,U,w.RGBA,{premultiply:!1}),q}setupElevationDraw(f,w,O){const U=this.painter.context,q=U.gl,ee=(se=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:k.DEMData.getUnpackVector(se),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var se;ee.u_dem_size=this.sourceCache.getSource().tileSize,ee.u_exaggeration=this.exaggeration();let ue=null,me=null,Ce=1;if(O&&O.morphing&&this._useVertexMorphing){const Ae=O.morphing.srcDemTile,Pe=O.morphing.dstDemTile;Ce=O.morphing.phase,Ae&&Pe&&(this._prepareDemTileUniforms(f,Ae,ee,"_prev")&&(me=Ae),this._prepareDemTileUniforms(f,Pe,ee)&&(ue=Pe))}if(me&&ue?(U.activeTexture.set(q.TEXTURE2),ue.demTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE,q.NEAREST),U.activeTexture.set(q.TEXTURE4),me.demTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE,q.NEAREST),ee.u_dem_lerp=Ce):(ue=this.terrainTileForTile[f.tileID.key],U.activeTexture.set(q.TEXTURE2),(this._prepareDemTileUniforms(f,ue,ee)?ue.demTexture:this.emptyDEMTexture).bind(q.NEAREST,q.CLAMP_TO_EDGE,q.NEAREST)),O&&O.useDepthForOcclusion&&(U.activeTexture.set(q.TEXTURE3),this._depthTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE,q.NEAREST),ee.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),O&&O.useMeterToDem&&ue){const Ae=(1<<ue.tileID.canonical.z)*k.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;ee.u_meter_to_dem=Ae}O&&O.labelPlaneMatrixInv&&(ee.u_label_plane_matrix_inv=O.labelPlaneMatrixInv),w.setTerrainUniformValues(U,ee)}renderToBackBuffer(f){const w=this.painter,O=this.painter.context;0!==f.length&&(O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height]),this.renderingToTexture=!1,function(U,q,ee,se,ue){const me=U.context,Ce=me.gl;let Ae,Pe;const Ne=U.options.showTerrainWireframe?2:0,$e=(ot,vt)=>{if(Pe===ot)return;const rt=[hh[ot]];vt&&rt.push(hh[Ne]),Ae=U.useProgram("terrainRaster",null,rt),Pe=ot},et=U.colorModeForRenderPass(),mt=new k.DepthMode(Ce.LEQUAL,k.DepthMode.ReadWrite,U.depthRangeFor3D);Cu.update(ue);const Ue=U.transform,tt=6*Math.pow(1.5,22-Ue.zoom)*q.exaggeration();(Ne?[!1,!0]:[!1]).forEach(ot=>{Pe=-1;const vt=ot?Ce.LINES:Ce.TRIANGLES,[rt,ht]=ot?q.getWirefameBuffer():[q.gridIndexBuffer,q.gridSegments];for(const un of se){const ut=ee.getTile(un),En=k.StencilMode.disabled,bn=q.prevTerrainTileForTile[un.key],Zn=q.terrainTileForTile[un.key];sn=Zn,null!=(en=bn)&&null!=sn&&en.hasData()&&sn.hasData()&&null!=en.demTexture&&null!=sn.demTexture&&en.tileID.key!==sn.tileID.key&&Cu.newMorphing(un.key,bn,Zn,ue,250),me.activeTexture.set(Ce.TEXTURE0),ut.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);const kn=Cu.getMorphValuesForProxy(un.key),An=kn?1:0;let Ti;kn&&(Ti={morphing:{srcDemTile:kn.from,dstDemTile:kn.to,phase:k.easeCubicInOut(kn.phase)}});const ci=uh(un.projMatrix,td(un.canonical,Ue.renderWorldCopies)?tt/10:tt);$e(An,ot),q.setupElevationDraw(ut,Ae,Ti),U.prepareDrawProgram(me,Ae,un.toUnwrapped()),Ae.draw(me,vt,mt,En,et,k.CullFaceMode.backCCW,ci,"terrain_raster",q.gridBuffer,rt,ht)}var en,sn})}(w,this,this.proxySourceCache,f,this._updateTimestamp),this.renderingToTexture=!0,f.splice(0,f.length))}renderBatch(f){if(0===this._drapedRenderBatches.length)return f+1;this.renderingToTexture=!0;const w=this.painter,O=this.painter.context,U=this.proxySourceCache,q=this.proxiedCoords[U.id],ee=this._drapedRenderBatches.shift(),se=[],ue=w.style.order;let me=0;for(const Ce of q){const Ae=U.getTileByID(Ce.proxyTileKey),Pe=U.proxyCachedFBO[Ce.key]?U.proxyCachedFBO[Ce.key][f]:void 0,Ne=void 0!==Pe?U.renderCache[Pe]:this.pool[me++],$e=void 0!==Pe;if(Ae.texture=Ne.tex,$e&&!Ne.dirty){se.push(Ae.tileID);continue}let et;O.bindFramebuffer.set(Ne.fb.framebuffer),this.renderedToTile=!1,Ne.dirty&&(O.clear({color:k.Color.transparent}),Ne.dirty=!1);for(let mt=ee.start;mt<=ee.end;++mt){const Ue=w.style._layers[ue[mt]];if(Ue.isHidden(w.transform.zoom))continue;const tt=w.style._getLayerSourceCache(Ue),ot=tt?this.proxyToSource[Ce.key][tt.id]:[Ce];if(!ot)continue;const vt=ot;O.viewport.set([0,0,Ne.fb.width,Ne.fb.height]),et!==(tt?tt.id:null)&&(this._setupStencil(Ne,ot,Ue,tt),et=tt?tt.id:null),w.renderLayer(w,tt,Ue,vt)}this.renderedToTile?(Ne.dirty=!0,se.push(Ae.tileID)):$e||--me,5===me&&(me=0,this.renderToBackBuffer(se))}return this.renderToBackBuffer(se),this.renderingToTexture=!1,O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height]),ee.end+1}postRender(){}renderCacheEfficiency(f){const w=f.order.length;if(0===w)return{efficiency:100};let O,U=0,q=0,ee=!1;for(let se=0;se<w;++se){const ue=f._layers[f.order[se]];this._style.isLayerDraped(ue)?(ee&&++U,++q):ee||(ee=!0,O=ue.id)}return 0===q?{efficiency:100}:{efficiency:100*(1-U/q),firstUndrapedLayer:O}}getMinElevationBelowMSL(){let f=0;return this._visibleDemTiles.filter(w=>w.dem).forEach(w=>{f=Math.min(f,w.dem.tree.minimums[0])}),0===f?f:(f-30)*this._exaggeration}raycast(f,w,O){if(!this._visibleDemTiles)return null;const U=this._visibleDemTiles.filter(q=>q.dem).map(q=>{const ee=q.tileID,se=Math.pow(2,ee.overscaledZ),{x:ue,y:me}=ee.canonical,Ce=ue/se,Ae=(ue+1)/se,Pe=me/se,Ne=(me+1)/se;return{minx:Ce,miny:Pe,maxx:Ae,maxy:Ne,t:q.dem.tree.raycastRoot(Ce,Pe,Ae,Ne,f,w,O),tile:q}});U.sort((q,ee)=>(null!==q.t?q.t:Number.MAX_VALUE)-(null!==ee.t?ee.t:Number.MAX_VALUE));for(const q of U){if(null==q.t)return null;const ee=q.tile.dem.tree.raycast(q.minx,q.miny,q.maxx,q.maxy,f,w,O);if(null!=ee)return ee}return null}_createFBO(){const f=this.painter.context,w=f.gl,O=this.drapeBufferSize;f.activeTexture.set(w.TEXTURE0);const U=new k.Texture(f,{width:O[0],height:O[1],data:null},w.RGBA);U.bind(w.LINEAR,w.CLAMP_TO_EDGE);const q=f.createFramebuffer(O[0],O[1],!1);return q.colorAttachment.set(U.texture),q.depthAttachment=new Lt(f,q.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=f.createRenderbuffer(f.gl.DEPTH_STENCIL,O[0],O[1]),this._stencilRef=0,q.depthAttachment.set(this._sharedDepthStencil),f.clear({stencil:0})):q.depthAttachment.set(this._sharedDepthStencil),f.extTextureFilterAnisotropic&&!f.extTextureFilterAnisotropicForceOff&&w.texParameterf(w.TEXTURE_2D,f.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f.extTextureFilterAnisotropicMax),{fb:q,tex:U,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f].hasTransition())return!0;return this._style.order.some(f=>{const w=this._style._layers[f],O=w.isHidden(this.painter.transform.zoom),U=w.getCrossfadeParameters(),q=!!U&&1!==U.t,ee=w.hasTransition();return"custom"!==w.type&&!O&&(q||ee)})}_clearRasterFadeFromRenderCache(){let f=!1;for(const w in this._style._sourceCaches)if(this._style._sourceCaches[w]._source instanceof Oi){f=!0;break}if(f)for(let w=0;w<this._style.order.length;++w){const O=this._style._layers[this._style.order[w]],U=O.isHidden(this.painter.transform.zoom),q=this._style._getLayerSourceCache(O);if("raster"!==O.type||U||!q)continue;const ee=O.paint.get("raster-fade-duration");for(const se of this.proxyCoords){const ue=this.proxyToSource[se.key][q.id];if(ue)for(const me of ue){const Ce=Xr(q.getTile(me),q.findLoadedParent(me,0),q,this.painter.transform,ee);(1!==Ce.opacity||0!==Ce.mix)&&this._clearRenderCacheForTile(q.id,me)}}}}_setupDrapedRenderBatches(){const f=this._style.order,w=f.length;if(0===w)return;const O=[];let U,q=0,ee=this._style._layers[f[q]];for(;!this._style.isLayerDraped(ee)&&ee.isHidden(this.painter.transform.zoom)&&++q<w;)ee=this._style._layers[f[q]];for(;q<w;++q){const se=this._style._layers[f[q]];se.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(se)?void 0===U&&(U=q):void 0!==U&&(O.push({start:U,end:q-1}),U=void 0))}void 0!==U&&O.push({start:U,end:q-1}),this._drapedRenderBatches=O}_setupRenderCache(f){const w=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,w.renderCache.length>w.renderCachePool.length){const ee=Object.values(w.proxyCachedFBO);w.proxyCachedFBO={};for(let se=0;se<ee.length;++se){const ue=Object.values(ee[se]);w.renderCachePool.push(...ue)}}return}this._clearRasterFadeFromRenderCache();const O=this.proxyCoords,U=this._tilesDirty;for(let ee=O.length-1;ee>=0;ee--){const se=O[ee];if(w.getTileByID(se.key),void 0!==w.proxyCachedFBO[se.key]){const ue=f[se.key],me=this.proxyToSource[se.key];let Ce=0;for(const Ae in me){const Pe=me[Ae],Ne=ue[Ae];if(!Ne||Ne.length!==Pe.length||Pe.some(($e,et)=>$e!==Ne[et]||U[Ae]&&U[Ae].hasOwnProperty($e.key))){Ce=-1;break}++Ce}for(const Ae in w.proxyCachedFBO[se.key])w.renderCache[w.proxyCachedFBO[se.key][Ae]].dirty=Ce<0||Ce!==Object.values(ue).length}}const q=[...this._drapedRenderBatches];q.sort((ee,se)=>se.end-se.start-(ee.end-ee.start));for(const ee of q)for(const se of O){if(w.proxyCachedFBO[se.key])continue;let ue=w.renderCachePool.pop();void 0===ue&&w.renderCache.length<50&&(ue=w.renderCache.length,w.renderCache.push(this._createFBO())),void 0!==ue&&(w.proxyCachedFBO[se.key]={},w.proxyCachedFBO[se.key][ee.start]=ue,w.renderCache[ue].dirty=!0)}this._tilesDirty={}}_setupStencil(f,w,O,U){if(!U||!this._sourceTilesOverlap[U.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const q=this.painter.context,ee=q.gl;if(w.length<=1)return void(this._overlapStencilType=!1);let se;if(O.isTileClipped())se=w.length,this._overlapStencilMode.test={func:ee.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(w[0].overscaledZ>w[w.length-1].overscaledZ))return void(this._overlapStencilType=!1);se=1,this._overlapStencilMode.test={func:ee.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+se>255&&(q.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=se,this._overlapStencilMode.ref=this._stencilRef,O.isTileClipped()&&this._renderTileClippingMasks(w,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(f){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[f.key]),this._overlapStencilMode):k.StencilMode.disabled}_renderTileClippingMasks(f,w){const O=this.painter,U=this.painter.context,q=U.gl;O._tileClippingMaskIDs={},U.setColorMode(k.ColorMode.disabled),U.setDepthMode(k.DepthMode.disabled);const ee=O.useProgram("clippingMask");for(const se of f){const ue=O._tileClippingMaskIDs[se.key]=--w;ee.draw(U,q.TRIANGLES,k.DepthMode.disabled,new k.StencilMode({func:q.ALWAYS,mask:0},ue,255,q.KEEP,q.KEEP,q.REPLACE),k.ColorMode.disabled,k.CullFaceMode.disabled,zl(se.projMatrix),"$clipping",O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}}pointCoordinate(f){const w=this.painter.transform;if(f.x<0||f.x>w.width||f.y<0||f.y>w.height)return null;const O=[f.x,f.y,1,1];k.transformMat4(O,O,w.pixelMatrixInverse),k.scale$2(O,O,1/O[3]),O[0]/=w.worldSize,O[1]/=w.worldSize;const U=w._camera.position,q=k.mercatorZfromAltitude(1,w.center.lat),ee=[U[0],U[1],U[2]/q,0],se=k.subtract([],O.slice(0,3),ee);k.normalize(se,se);const ue=this.raycast(ee,se,this._exaggeration);return null!==ue&&ue?(k.scaleAndAdd(ee,ee,se,ue),ee[3]=ee[2],ee[2]*=q,ee):null}drawDepth(){const f=this.painter,w=f.context,O=this.proxySourceCache,U=Math.ceil(f.width),q=Math.ceil(f.height);if(!this._depthFBO||this._depthFBO.width===U&&this._depthFBO.height===q||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const ee=w.gl,se=w.createFramebuffer(U,q,!0);w.activeTexture.set(ee.TEXTURE0);const ue=new k.Texture(w,{width:U,height:q,data:null},ee.RGBA);ue.bind(ee.NEAREST,ee.CLAMP_TO_EDGE),se.colorAttachment.set(ue.texture);const me=w.createRenderbuffer(w.gl.DEPTH_COMPONENT16,U,q);se.depthAttachment.set(me),this._depthFBO=se,this._depthTexture=ue}w.bindFramebuffer.set(this._depthFBO.framebuffer),w.viewport.set([0,0,U,q]),function(ee,se,ue,me){const Ce=ee.context,Ae=Ce.gl;Ce.clear({depth:1});const Pe=ee.useProgram("terrainDepth"),Ne=new k.DepthMode(Ae.LESS,k.DepthMode.ReadWrite,ee.depthRangeFor3D);for(const $e of me){const et=ue.getTile($e),mt=uh($e.projMatrix,0);se.setupElevationDraw(et,Pe),Pe.draw(Ce,Ae.TRIANGLES,Ne,k.StencilMode.disabled,k.ColorMode.unblended,k.CullFaceMode.backCCW,mt,"terrain_depth",se.gridBuffer,se.gridIndexBuffer,se.gridNoSkirtSegments)}}(f,this,O,this.proxyCoords)}_setupProxiedCoordsForOrtho(f,w,O){if(f.getSource()instanceof Ge)return this._setupProxiedCoordsForImageSource(f,w,O);this._findCoveringTileCache[f.id]=this._findCoveringTileCache[f.id]||{};const U=this.proxiedCoords[f.id]=[],q=this.proxyCoords;for(let se=0;se<q.length;se++){const ue=q[se],me=this._findTileCoveringTileID(ue,f);if(me){const Ce=this._createProxiedId(ue,me,O[ue.key]&&O[ue.key][f.id]);U.push(Ce),this.proxyToSource[ue.key][f.id]=[Ce]}}let ee=!1;for(let se=0;se<w.length;se++){const ue=f.getTile(w[se]);if(!ue||!ue.hasData())continue;const me=this._findTileCoveringTileID(ue.tileID,this.proxySourceCache);if(me&&me.tileID.canonical.z!==ue.tileID.canonical.z){const Ce=this.proxyToSource[me.tileID.key][f.id],Ae=this._createProxiedId(me.tileID,ue,O[me.tileID.key]&&O[me.tileID.key][f.id]);Ce?Ce.splice(Ce.length-1,0,Ae):this.proxyToSource[me.tileID.key][f.id]=[Ae],U.push(Ae),ee=!0}}this._sourceTilesOverlap[f.id]=ee}_setupProxiedCoordsForImageSource(f,w,O){if(!f.getSource().loaded())return;const U=this.proxiedCoords[f.id]=[],q=this.proxyCoords,ee=f.getSource(),se=new k.pointGeometry(ee.tileID.x,ee.tileID.y)._div(1<<ee.tileID.z),ue=ee.coordinates.map(k.MercatorCoordinate.fromLngLat).reduce((Ce,Ae)=>(Ce.min.x=Math.min(Ce.min.x,Ae.x-se.x),Ce.min.y=Math.min(Ce.min.y,Ae.y-se.y),Ce.max.x=Math.max(Ce.max.x,Ae.x-se.x),Ce.max.y=Math.max(Ce.max.y,Ae.y-se.y),Ce),{min:new k.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new k.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),me=(Ce,Ae)=>{const Pe=Ce.wrap+Ce.canonical.x/(1<<Ce.canonical.z),Ne=Ce.canonical.y/(1<<Ce.canonical.z),$e=k.EXTENT/(1<<Ce.canonical.z),et=Ae.wrap+Ae.canonical.x/(1<<Ae.canonical.z),mt=Ae.canonical.y/(1<<Ae.canonical.z);return Pe+$e<et+ue.min.x||Pe>et+ue.max.x||Ne+$e<mt+ue.min.y||Ne>mt+ue.max.y};for(let Ce=0;Ce<q.length;Ce++){const Ae=q[Ce];for(let Pe=0;Pe<w.length;Pe++){const Ne=f.getTile(w[Pe]);if(!Ne||!Ne.hasData()||me(Ae,Ne.tileID))continue;const $e=this._createProxiedId(Ae,Ne,O[Ae.key]&&O[Ae.key][f.id]),et=this.proxyToSource[Ae.key][f.id];et?et.push($e):this.proxyToSource[Ae.key][f.id]=[$e],U.push($e)}}}_createProxiedId(f,w,O){let U=this.orthoMatrix;if(O){const q=O.find(ee=>ee.key===w.tileID.key);if(q)return q}if(w.tileID.key!==f.key){const q=f.canonical.z-w.tileID.canonical.z;let ee,se,ue;U=k.create$1();const me=w.tileID.wrap-f.wrap<<f.overscaledZ;q>0?(ee=k.EXTENT>>q,se=ee*((w.tileID.canonical.x<<q)-f.canonical.x+me),ue=ee*((w.tileID.canonical.y<<q)-f.canonical.y)):(ee=k.EXTENT<<-q,se=k.EXTENT*(w.tileID.canonical.x-(f.canonical.x+me<<-q)),ue=k.EXTENT*(w.tileID.canonical.y-(f.canonical.y<<-q))),k.ortho(U,0,ee,0,ee,0,1),k.translate(U,U,[se,ue,0])}return new Ii(w.tileID,f.key,U)}_findTileCoveringTileID(f,w){let O=w.getTile(f);if(O&&O.hasData())return O;const U=this._findCoveringTileCache[w.id],q=U[f.key];if(O=q?w.getTileByID(q):null,O&&O.hasData()||null===q)return O;let ee=O?O.tileID:f,se=ee.overscaledZ;const ue=w.getSource().minzoom,me=[];if(!q){const Ae=w.getSource().maxzoom;if(f.canonical.z>=Ae){const Pe=f.canonical.z-Ae;w.getSource().reparseOverscaled?(se=Math.max(f.canonical.z+2,w.transform.tileZoom),ee=new k.OverscaledTileID(se,f.wrap,Ae,f.canonical.x>>Pe,f.canonical.y>>Pe)):0!==Pe&&(se=Ae,ee=new k.OverscaledTileID(se,f.wrap,Ae,f.canonical.x>>Pe,f.canonical.y>>Pe))}ee.key!==f.key&&(me.push(ee.key),O=w.getTile(ee))}const Ce=Ae=>{me.forEach(Pe=>{U[Pe]=Ae}),me.length=0};for(se-=1;se>=ue&&(!O||!O.hasData());se--){O&&Ce(O.tileID.key);const Ae=ee.calculateScaledKey(se);if(O=w.getTileByID(Ae),O&&O.hasData())break;const Pe=U[Ae];if(null===Pe)break;void 0===Pe?me.push(Ae):O=w.getTileByID(Pe)}return Ce(O?O.tileID.key:null),O&&O.hasData()?O:null}findDEMTileFor(f){return this.enabled?this._findTileCoveringTileID(f,this.sourceCache):null}prepareDrawTile(f){this.renderedToTile=!0}_clearRenderCacheForTile(f,w){let O=this._tilesDirty[f];O||(O=this._tilesDirty[f]={}),O[w.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const f=function(w){let O,U,q;const ee=new k.StructArrayLayout2ui4;for(U=1;U<129;U++){for(O=1;O<129;O++)q=131*U+O,ee.emplaceBack(q,q+1),ee.emplaceBack(q,q+131),ee.emplaceBack(q+1,q+131),128===U&&ee.emplaceBack(q+131,q+131+1);ee.emplaceBack(q+1,q+1+131)}return ee}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(f),this.wireframeSegments=k.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,f.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function Pr(P){const f=[];for(let w=0;w<P.length;w++){if(null===P[w])continue;const O=P[w].split(" ");f.push(O.pop())}return f}class Wd{static cacheKey(f,w,O){let U=`${f}${O?O.cacheKey:""}`;for(const q of w)U+=`/${q}`;return U}constructor(f,w,O,U,q,ee){const se=f.gl;this.program=se.createProgram();const ue=Pr(O.staticAttributes),me=U?U.getBinderAttributes():[],Ce=ue.concat(me),Ae=O.staticUniforms?Pr(O.staticUniforms):[],Pe=U?U.getBinderUniforms():[],Ne=Ae.concat(Pe),$e=[];for(const rt of Ne)$e.indexOf(rt)<0&&$e.push(rt);let et=U?U.defines():[];et=et.concat(ee.map(rt=>`#define ${rt}`));const mt=et.concat(fl.fragmentSource,sh,Fi.fragmentSource,O.fragmentSource).join("\n"),Ue=et.concat(fl.vertexSource,sh,Fi.vertexSource,wu.vertexSource,O.vertexSource).join("\n"),tt=se.createShader(se.FRAGMENT_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);se.shaderSource(tt,mt),se.compileShader(tt),se.attachShader(this.program,tt);const ot=se.createShader(se.VERTEX_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);se.shaderSource(ot,Ue),se.compileShader(ot),se.attachShader(this.program,ot),this.attributes={};const vt={};this.numAttributes=Ce.length;for(let rt=0;rt<this.numAttributes;rt++)Ce[rt]&&(se.bindAttribLocation(this.program,rt,Ce[rt]),this.attributes[Ce[rt]]=rt);se.linkProgram(this.program),se.deleteShader(ot),se.deleteShader(tt);for(let rt=0;rt<$e.length;rt++){const ht=$e[rt];if(ht&&!vt[ht]){const en=se.getUniformLocation(this.program,ht);en&&(vt[ht]=en)}}var rt,ht;this.fixedUniforms=q(f,vt),this.binderUniforms=U?U.getUniforms(f,vt):[],-1!==ee.indexOf("TERRAIN")&&(this.terrainUniforms={u_dem:new k.Uniform1i(rt=f,(ht=vt).u_dem),u_dem_prev:new k.Uniform1i(rt,ht.u_dem_prev),u_dem_unpack:new k.Uniform4f(rt,ht.u_dem_unpack),u_dem_tl:new k.Uniform2f(rt,ht.u_dem_tl),u_dem_scale:new k.Uniform1f(rt,ht.u_dem_scale),u_dem_tl_prev:new k.Uniform2f(rt,ht.u_dem_tl_prev),u_dem_scale_prev:new k.Uniform1f(rt,ht.u_dem_scale_prev),u_dem_size:new k.Uniform1f(rt,ht.u_dem_size),u_dem_lerp:new k.Uniform1f(rt,ht.u_dem_lerp),u_exaggeration:new k.Uniform1f(rt,ht.u_exaggeration),u_depth:new k.Uniform1i(rt,ht.u_depth),u_depth_size_inv:new k.Uniform2f(rt,ht.u_depth_size_inv),u_meter_to_dem:new k.Uniform1f(rt,ht.u_meter_to_dem),u_label_plane_matrix_inv:new k.UniformMatrix4f(rt,ht.u_label_plane_matrix_inv)}),-1!==ee.indexOf("FOG")&&(this.fogUniforms=((rt,ht)=>({u_fog_matrix:new k.UniformMatrix4f(rt,ht.u_fog_matrix),u_fog_range:new k.Uniform2f(rt,ht.u_fog_range),u_fog_color:new k.Uniform4f(rt,ht.u_fog_color),u_fog_horizon_blend:new k.Uniform1f(rt,ht.u_fog_horizon_blend),u_fog_temporal_offset:new k.Uniform1f(rt,ht.u_fog_temporal_offset)}))(f,vt))}setTerrainUniformValues(f,w){if(!this.terrainUniforms)return;const O=this.terrainUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const U in w)O[U].set(w[U])}}setFogUniformValues(f,w){if(!this.fogUniforms)return;const O=this.fogUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const U in w)O[U].location&&O[U].set(w[U])}}draw(f,w,O,U,q,ee,se,ue,me,Ce,Ae,Pe,Ne,$e,et,mt){const Ue=f.gl;if(this.failedToCreate)return;f.program.set(this.program),f.setDepthMode(O),f.setStencilMode(U),f.setColorMode(q),f.setCullFace(ee);for(const ot in this.fixedUniforms)this.fixedUniforms[ot].set(se[ot]);$e&&$e.setUniforms(f,this.binderUniforms,Pe,{zoom:Ne});const tt={[Ue.LINES]:2,[Ue.TRIANGLES]:3,[Ue.LINE_STRIP]:1}[w];for(const ot of Ae.get()){const vt=ot.vaos||(ot.vaos={});(vt[ue]||(vt[ue]=new lh)).bind(f,this,me,$e?$e.getPaintVertexBuffers():[],Ce,ot.vertexOffset,et,mt),Ue.drawElements(w,ot.primitiveLength*tt,Ue.UNSIGNED_SHORT,ot.primitiveOffset*tt*2)}}}function oo(P,f,w){const O=1/Fn(w,1,f.transform.tileZoom),U=Math.pow(2,w.tileID.overscaledZ),q=w.tileSize*Math.pow(2,f.transform.tileZoom)/U,ee=q*(w.tileID.canonical.x+w.tileID.wrap*U),se=q*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[O,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[ee>>16,se>>16],u_pixel_coord_lower:[65535&ee,65535&se]}}const Lc=(P,f,w,O)=>{const U=f.style.light,q=U.properties.get("position"),ee=[q.x,q.y,q.z],se=k.create$2();"viewport"===U.properties.get("anchor")&&(k.fromRotation(se,-f.transform.angle),k.transformMat3(ee,ee,se));const ue=U.properties.get("color");return{u_matrix:P,u_lightpos:ee,u_lightintensity:U.properties.get("intensity"),u_lightcolor:[ue.r,ue.g,ue.b],u_vertical_gradient:+w,u_opacity:O}},Ma=(P,f,w,O,U,q,ee)=>k.extend(Lc(P,f,w,O),oo(q,f,ee),{u_height_factor:-Math.pow(2,U.overscaledZ)/ee.tileSize/8}),ph=P=>({u_matrix:P}),ka=(P,f,w,O)=>k.extend(ph(P),oo(w,f,O)),za=(P,f)=>({u_matrix:P,u_world:f}),js=(P,f,w,O,U)=>k.extend(ka(P,f,w,O),{u_world:U}),oa=(P,f,w,O)=>{const U=P.transform;let q;if("map"===O.paint.get("circle-pitch-alignment")){const ee=Fn(w,1,U.zoom);q=[ee,ee]}else q=U.pixelsToGLUnits;return{u_camera_to_center_distance:U.cameraToCenterDistance,u_matrix:P.translatePosMatrix(f.projMatrix,w,O.paint.get("circle-translate"),O.paint.get("circle-translate-anchor")),u_device_pixel_ratio:k.exported.devicePixelRatio,u_extrude_scale:q}},$d=P=>{const f=[];return"map"===P.paint.get("circle-pitch-alignment")&&f.push("PITCH_WITH_MAP"),"map"===P.paint.get("circle-pitch-scale")&&f.push("SCALE_WITH_MAP"),f},Nc=(P,f,w)=>{const O=k.EXTENT/w.tileSize;return{u_matrix:P,u_camera_to_center_distance:f.cameraToCenterDistance,u_extrude_scale:[f.pixelsToGLUnits[0]/O,f.pixelsToGLUnits[1]/O]}},Va=(P,f,w=1)=>({u_matrix:P,u_color:f,u_overlay:0,u_overlay_scale:w}),nd=(P,f,w,O)=>({u_matrix:P,u_extrude_scale:Fn(f,1,w),u_intensity:O}),Ua=(P,f,w,O)=>{const U=P.transform;return{u_matrix:Xd(P,f,w,O),u_ratio:1/Fn(f,1,U.zoom),u_device_pixel_ratio:k.exported.devicePixelRatio,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]]}},bi=(P,f,w,O,U)=>k.extend(Ua(P,f,w,O),{u_image:0,u_image_height:U}),Su=(P,f,w,O,U)=>{const q=P.transform,ee=Eu(f,q);return{u_matrix:Xd(P,f,w,U),u_texsize:f.imageAtlasTexture.size,u_ratio:1/Fn(f,1,q.zoom),u_device_pixel_ratio:k.exported.devicePixelRatio,u_image:0,u_scale:[ee,O.fromScale,O.toScale],u_fade:O.t,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},Vp=(P,f,w,O,U)=>{const q=Eu(f,P.transform);return k.extend(Ua(P,f,w,U),{u_texsize:f.lineAtlasTexture.size,u_scale:[q,O.fromScale,O.toScale],u_image:0,u_mix:O.t})};function Eu(P,f){return 1/Fn(P,1,f.tileZoom)}function Xd(P,f,w,O){return P.translatePosMatrix(O||f.tileID.projMatrix,f,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}const Rf=(P,f,w,O,U)=>{return{u_matrix:P,u_tl_parent:f,u_scale_parent:w,u_buffer_scale:1,u_fade_t:O.mix,u_opacity:O.opacity*U.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:U.paint.get("raster-brightness-min"),u_brightness_high:U.paint.get("raster-brightness-max"),u_saturation_factor:(ee=U.paint.get("raster-saturation"),ee>0?1-1/(1.001-ee):-ee),u_contrast_factor:(q=U.paint.get("raster-contrast"),q>0?1/(1-q):1+q),u_spin_weights:Tu(U.paint.get("raster-hue-rotate"))};var q,ee};function Tu(P){P*=Math.PI/180;const f=Math.sin(P),w=Math.cos(P);return[(2*w+1)/3,(-Math.sqrt(3)*f-w+1)/3,(Math.sqrt(3)*f-w+1)/3]}const fh=(P,f,w,O,U,q,ee,se,ue,me)=>{const Ce=U.transform;return{u_is_size_zoom_constant:+("constant"===P||"source"===P),u_is_size_feature_constant:+("constant"===P||"camera"===P),u_size_t:f?f.uSizeT:0,u_size:f?f.uSize:0,u_camera_to_center_distance:Ce.cameraToCenterDistance,u_pitch:Ce.pitch/360*2*Math.PI,u_rotate_symbol:+w,u_aspect_ratio:Ce.width/Ce.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:ee,u_coord_matrix:se,u_is_text:+ue,u_pitch_with_map:+O,u_texsize:me,u_texture:0}},wn=(P,f,w,O,U,q,ee,se,ue,me,Ce)=>{const{cameraToCenterDistance:Ae,_pitch:Pe}=U.transform;return k.extend(fh(P,f,w,O,U,q,ee,se,ue,me),{u_gamma_scale:O?Ae*Math.cos(U.terrain?0:Pe):1,u_device_pixel_ratio:k.exported.devicePixelRatio,u_is_halo:+Ce})},fr=(P,f,w,O,U,q,ee,se,ue,me)=>k.extend(wn(P,f,w,O,U,q,ee,se,!0,ue,!0),{u_texsize_icon:me,u_texture_icon:1}),id=(P,f,w)=>({u_matrix:P,u_opacity:f,u_color:w}),So=(P,f,w,O,U,q)=>k.extend(function(ee,se,ue,me){const Ce=ue.imageManager.getPattern(ee.from.toString()),Ae=ue.imageManager.getPattern(ee.to.toString()),{width:Pe,height:Ne}=ue.imageManager.getPixelSize(),$e=Math.pow(2,me.tileID.overscaledZ),et=me.tileSize*Math.pow(2,ue.transform.tileZoom)/$e,mt=et*(me.tileID.canonical.x+me.tileID.wrap*$e),Ue=et*me.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ce.tl,u_pattern_br_a:Ce.br,u_pattern_tl_b:Ae.tl,u_pattern_br_b:Ae.br,u_texsize:[Pe,Ne],u_mix:se.t,u_pattern_size_a:Ce.displaySize,u_pattern_size_b:Ae.displaySize,u_scale_a:se.fromScale,u_scale_b:se.toScale,u_tile_units_to_pixels:1/Fn(me,1,ue.transform.tileZoom),u_pixel_coord_upper:[mt>>16,Ue>>16],u_pixel_coord_lower:[65535&mt,65535&Ue]}}(O,q,w,U),{u_matrix:P,u_opacity:f}),rd={fillExtrusion:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_lightpos:new k.Uniform3f(P,f.u_lightpos),u_lightintensity:new k.Uniform1f(P,f.u_lightintensity),u_lightcolor:new k.Uniform3f(P,f.u_lightcolor),u_vertical_gradient:new k.Uniform1f(P,f.u_vertical_gradient),u_opacity:new k.Uniform1f(P,f.u_opacity)}),fillExtrusionPattern:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_lightpos:new k.Uniform3f(P,f.u_lightpos),u_lightintensity:new k.Uniform1f(P,f.u_lightintensity),u_lightcolor:new k.Uniform3f(P,f.u_lightcolor),u_vertical_gradient:new k.Uniform1f(P,f.u_vertical_gradient),u_height_factor:new k.Uniform1f(P,f.u_height_factor),u_image:new k.Uniform1i(P,f.u_image),u_texsize:new k.Uniform2f(P,f.u_texsize),u_pixel_coord_upper:new k.Uniform2f(P,f.u_pixel_coord_upper),u_pixel_coord_lower:new k.Uniform2f(P,f.u_pixel_coord_lower),u_scale:new k.Uniform3f(P,f.u_scale),u_fade:new k.Uniform1f(P,f.u_fade),u_opacity:new k.Uniform1f(P,f.u_opacity)}),fill:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix)}),fillPattern:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_image:new k.Uniform1i(P,f.u_image),u_texsize:new k.Uniform2f(P,f.u_texsize),u_pixel_coord_upper:new k.Uniform2f(P,f.u_pixel_coord_upper),u_pixel_coord_lower:new k.Uniform2f(P,f.u_pixel_coord_lower),u_scale:new k.Uniform3f(P,f.u_scale),u_fade:new k.Uniform1f(P,f.u_fade)}),fillOutline:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_world:new k.Uniform2f(P,f.u_world)}),fillOutlinePattern:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_world:new k.Uniform2f(P,f.u_world),u_image:new k.Uniform1i(P,f.u_image),u_texsize:new k.Uniform2f(P,f.u_texsize),u_pixel_coord_upper:new k.Uniform2f(P,f.u_pixel_coord_upper),u_pixel_coord_lower:new k.Uniform2f(P,f.u_pixel_coord_lower),u_scale:new k.Uniform3f(P,f.u_scale),u_fade:new k.Uniform1f(P,f.u_fade)}),circle:(P,f)=>({u_camera_to_center_distance:new k.Uniform1f(P,f.u_camera_to_center_distance),u_extrude_scale:new k.Uniform2f(P,f.u_extrude_scale),u_device_pixel_ratio:new k.Uniform1f(P,f.u_device_pixel_ratio),u_matrix:new k.UniformMatrix4f(P,f.u_matrix)}),collisionBox:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_camera_to_center_distance:new k.Uniform1f(P,f.u_camera_to_center_distance),u_extrude_scale:new k.Uniform2f(P,f.u_extrude_scale)}),collisionCircle:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_inv_matrix:new k.UniformMatrix4f(P,f.u_inv_matrix),u_camera_to_center_distance:new k.Uniform1f(P,f.u_camera_to_center_distance),u_viewport_size:new k.Uniform2f(P,f.u_viewport_size)}),debug:(P,f)=>({u_color:new k.UniformColor(P,f.u_color),u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_overlay:new k.Uniform1i(P,f.u_overlay),u_overlay_scale:new k.Uniform1f(P,f.u_overlay_scale)}),clippingMask:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix)}),heatmap:(P,f)=>({u_extrude_scale:new k.Uniform1f(P,f.u_extrude_scale),u_intensity:new k.Uniform1f(P,f.u_intensity),u_matrix:new k.UniformMatrix4f(P,f.u_matrix)}),heatmapTexture:(P,f)=>({u_image:new k.Uniform1i(P,f.u_image),u_color_ramp:new k.Uniform1i(P,f.u_color_ramp),u_opacity:new k.Uniform1f(P,f.u_opacity)}),hillshade:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_image:new k.Uniform1i(P,f.u_image),u_latrange:new k.Uniform2f(P,f.u_latrange),u_light:new k.Uniform2f(P,f.u_light),u_shadow:new k.UniformColor(P,f.u_shadow),u_highlight:new k.UniformColor(P,f.u_highlight),u_accent:new k.UniformColor(P,f.u_accent)}),hillshadePrepare:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_image:new k.Uniform1i(P,f.u_image),u_dimension:new k.Uniform2f(P,f.u_dimension),u_zoom:new k.Uniform1f(P,f.u_zoom),u_unpack:new k.Uniform4f(P,f.u_unpack)}),line:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_ratio:new k.Uniform1f(P,f.u_ratio),u_device_pixel_ratio:new k.Uniform1f(P,f.u_device_pixel_ratio),u_units_to_pixels:new k.Uniform2f(P,f.u_units_to_pixels)}),lineGradient:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_ratio:new k.Uniform1f(P,f.u_ratio),u_device_pixel_ratio:new k.Uniform1f(P,f.u_device_pixel_ratio),u_units_to_pixels:new k.Uniform2f(P,f.u_units_to_pixels),u_image:new k.Uniform1i(P,f.u_image),u_image_height:new k.Uniform1f(P,f.u_image_height)}),linePattern:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_texsize:new k.Uniform2f(P,f.u_texsize),u_ratio:new k.Uniform1f(P,f.u_ratio),u_device_pixel_ratio:new k.Uniform1f(P,f.u_device_pixel_ratio),u_image:new k.Uniform1i(P,f.u_image),u_units_to_pixels:new k.Uniform2f(P,f.u_units_to_pixels),u_scale:new k.Uniform3f(P,f.u_scale),u_fade:new k.Uniform1f(P,f.u_fade)}),lineSDF:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_texsize:new k.Uniform2f(P,f.u_texsize),u_ratio:new k.Uniform1f(P,f.u_ratio),u_device_pixel_ratio:new k.Uniform1f(P,f.u_device_pixel_ratio),u_units_to_pixels:new k.Uniform2f(P,f.u_units_to_pixels),u_image:new k.Uniform1i(P,f.u_image),u_scale:new k.Uniform3f(P,f.u_scale),u_mix:new k.Uniform1f(P,f.u_mix)}),raster:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_tl_parent:new k.Uniform2f(P,f.u_tl_parent),u_scale_parent:new k.Uniform1f(P,f.u_scale_parent),u_buffer_scale:new k.Uniform1f(P,f.u_buffer_scale),u_fade_t:new k.Uniform1f(P,f.u_fade_t),u_opacity:new k.Uniform1f(P,f.u_opacity),u_image0:new k.Uniform1i(P,f.u_image0),u_image1:new k.Uniform1i(P,f.u_image1),u_brightness_low:new k.Uniform1f(P,f.u_brightness_low),u_brightness_high:new k.Uniform1f(P,f.u_brightness_high),u_saturation_factor:new k.Uniform1f(P,f.u_saturation_factor),u_contrast_factor:new k.Uniform1f(P,f.u_contrast_factor),u_spin_weights:new k.Uniform3f(P,f.u_spin_weights)}),symbolIcon:(P,f)=>({u_is_size_zoom_constant:new k.Uniform1i(P,f.u_is_size_zoom_constant),u_is_size_feature_constant:new k.Uniform1i(P,f.u_is_size_feature_constant),u_size_t:new k.Uniform1f(P,f.u_size_t),u_size:new k.Uniform1f(P,f.u_size),u_camera_to_center_distance:new k.Uniform1f(P,f.u_camera_to_center_distance),u_pitch:new k.Uniform1f(P,f.u_pitch),u_rotate_symbol:new k.Uniform1i(P,f.u_rotate_symbol),u_aspect_ratio:new k.Uniform1f(P,f.u_aspect_ratio),u_fade_change:new k.Uniform1f(P,f.u_fade_change),u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_label_plane_matrix:new k.UniformMatrix4f(P,f.u_label_plane_matrix),u_coord_matrix:new k.UniformMatrix4f(P,f.u_coord_matrix),u_is_text:new k.Uniform1i(P,f.u_is_text),u_pitch_with_map:new k.Uniform1i(P,f.u_pitch_with_map),u_texsize:new k.Uniform2f(P,f.u_texsize),u_texture:new k.Uniform1i(P,f.u_texture)}),symbolSDF:(P,f)=>({u_is_size_zoom_constant:new k.Uniform1i(P,f.u_is_size_zoom_constant),u_is_size_feature_constant:new k.Uniform1i(P,f.u_is_size_feature_constant),u_size_t:new k.Uniform1f(P,f.u_size_t),u_size:new k.Uniform1f(P,f.u_size),u_camera_to_center_distance:new k.Uniform1f(P,f.u_camera_to_center_distance),u_pitch:new k.Uniform1f(P,f.u_pitch),u_rotate_symbol:new k.Uniform1i(P,f.u_rotate_symbol),u_aspect_ratio:new k.Uniform1f(P,f.u_aspect_ratio),u_fade_change:new k.Uniform1f(P,f.u_fade_change),u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_label_plane_matrix:new k.UniformMatrix4f(P,f.u_label_plane_matrix),u_coord_matrix:new k.UniformMatrix4f(P,f.u_coord_matrix),u_is_text:new k.Uniform1i(P,f.u_is_text),u_pitch_with_map:new k.Uniform1i(P,f.u_pitch_with_map),u_texsize:new k.Uniform2f(P,f.u_texsize),u_texture:new k.Uniform1i(P,f.u_texture),u_gamma_scale:new k.Uniform1f(P,f.u_gamma_scale),u_device_pixel_ratio:new k.Uniform1f(P,f.u_device_pixel_ratio),u_is_halo:new k.Uniform1i(P,f.u_is_halo)}),symbolTextAndIcon:(P,f)=>({u_is_size_zoom_constant:new k.Uniform1i(P,f.u_is_size_zoom_constant),u_is_size_feature_constant:new k.Uniform1i(P,f.u_is_size_feature_constant),u_size_t:new k.Uniform1f(P,f.u_size_t),u_size:new k.Uniform1f(P,f.u_size),u_camera_to_center_distance:new k.Uniform1f(P,f.u_camera_to_center_distance),u_pitch:new k.Uniform1f(P,f.u_pitch),u_rotate_symbol:new k.Uniform1i(P,f.u_rotate_symbol),u_aspect_ratio:new k.Uniform1f(P,f.u_aspect_ratio),u_fade_change:new k.Uniform1f(P,f.u_fade_change),u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_label_plane_matrix:new k.UniformMatrix4f(P,f.u_label_plane_matrix),u_coord_matrix:new k.UniformMatrix4f(P,f.u_coord_matrix),u_is_text:new k.Uniform1i(P,f.u_is_text),u_pitch_with_map:new k.Uniform1i(P,f.u_pitch_with_map),u_texsize:new k.Uniform2f(P,f.u_texsize),u_texsize_icon:new k.Uniform2f(P,f.u_texsize_icon),u_texture:new k.Uniform1i(P,f.u_texture),u_texture_icon:new k.Uniform1i(P,f.u_texture_icon),u_gamma_scale:new k.Uniform1f(P,f.u_gamma_scale),u_device_pixel_ratio:new k.Uniform1f(P,f.u_device_pixel_ratio),u_is_halo:new k.Uniform1i(P,f.u_is_halo)}),background:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_opacity:new k.Uniform1f(P,f.u_opacity),u_color:new k.UniformColor(P,f.u_color)}),backgroundPattern:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_opacity:new k.Uniform1f(P,f.u_opacity),u_image:new k.Uniform1i(P,f.u_image),u_pattern_tl_a:new k.Uniform2f(P,f.u_pattern_tl_a),u_pattern_br_a:new k.Uniform2f(P,f.u_pattern_br_a),u_pattern_tl_b:new k.Uniform2f(P,f.u_pattern_tl_b),u_pattern_br_b:new k.Uniform2f(P,f.u_pattern_br_b),u_texsize:new k.Uniform2f(P,f.u_texsize),u_mix:new k.Uniform1f(P,f.u_mix),u_pattern_size_a:new k.Uniform2f(P,f.u_pattern_size_a),u_pattern_size_b:new k.Uniform2f(P,f.u_pattern_size_b),u_scale_a:new k.Uniform1f(P,f.u_scale_a),u_scale_b:new k.Uniform1f(P,f.u_scale_b),u_pixel_coord_upper:new k.Uniform2f(P,f.u_pixel_coord_upper),u_pixel_coord_lower:new k.Uniform2f(P,f.u_pixel_coord_lower),u_tile_units_to_pixels:new k.Uniform1f(P,f.u_tile_units_to_pixels)}),terrainRaster:ui,terrainDepth:ui,skybox:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_sun_direction:new k.Uniform3f(P,f.u_sun_direction),u_cubemap:new k.Uniform1i(P,f.u_cubemap),u_opacity:new k.Uniform1f(P,f.u_opacity),u_temporal_offset:new k.Uniform1f(P,f.u_temporal_offset)}),skyboxGradient:(P,f)=>({u_matrix:new k.UniformMatrix4f(P,f.u_matrix),u_color_ramp:new k.Uniform1i(P,f.u_color_ramp),u_center_direction:new k.Uniform3f(P,f.u_center_direction),u_radius:new k.Uniform1f(P,f.u_radius),u_opacity:new k.Uniform1f(P,f.u_opacity),u_temporal_offset:new k.Uniform1f(P,f.u_temporal_offset)}),skyboxCapture:(P,f)=>({u_matrix_3f:new k.UniformMatrix3f(P,f.u_matrix_3f),u_sun_direction:new k.Uniform3f(P,f.u_sun_direction),u_sun_intensity:new k.Uniform1f(P,f.u_sun_intensity),u_color_tint_r:new k.Uniform4f(P,f.u_color_tint_r),u_color_tint_m:new k.Uniform4f(P,f.u_color_tint_m),u_luminance:new k.Uniform1f(P,f.u_luminance)})};let Ha;function ps(P,f,w,O,U,q,ee){const se=P.context,ue=se.gl,me=P.useProgram("collisionBox"),Ce=[];let Ae=0,Pe=0;for(let ot=0;ot<O.length;ot++){const vt=O[ot],rt=f.getTile(vt),ht=rt.getBucket(w);if(!ht)continue;let en=vt.projMatrix;0===U[0]&&0===U[1]||(en=P.translatePosMatrix(vt.projMatrix,rt,U,q));const sn=ee?ht.textCollisionBox:ht.iconCollisionBox,un=ht.collisionCircleArray;if(un.length>0){const ut=k.create$1(),En=en;k.mul$1(ut,ht.placementInvProjMatrix,P.transform.glCoordMatrix),k.mul$1(ut,ut,ht.placementViewportMatrix),Ce.push({circleArray:un,circleOffset:Pe,transform:En,invTransform:ut}),Ae+=un.length/4,Pe=Ae}sn&&(P.terrain&&P.terrain.setupElevationDraw(rt,me),me.draw(se,ue.LINES,k.DepthMode.disabled,k.StencilMode.disabled,P.colorModeForRenderPass(),k.CullFaceMode.disabled,Nc(en,P.transform,rt),w.id,sn.layoutVertexBuffer,sn.indexBuffer,sn.segments,null,P.transform.zoom,null,sn.collisionVertexBuffer,sn.collisionVertexBufferExt))}if(!ee||!Ce.length)return;const Ne=P.useProgram("collisionCircle"),$e=new k.StructArrayLayout2f1f2i16;$e.resize(4*Ae),$e._trim();let et=0;for(const ot of Ce)for(let vt=0;vt<ot.circleArray.length/4;vt++){const rt=4*vt,ht=ot.circleArray[rt+0],en=ot.circleArray[rt+1],sn=ot.circleArray[rt+2],un=ot.circleArray[rt+3];$e.emplace(et++,ht,en,sn,un,0),$e.emplace(et++,ht,en,sn,un,1),$e.emplace(et++,ht,en,sn,un,2),$e.emplace(et++,ht,en,sn,un,3)}(!Ha||Ha.length<2*Ae)&&(Ha=function(ot){const vt=2*ot,rt=new k.StructArrayLayout3ui6;rt.resize(vt),rt._trim();for(let ht=0;ht<vt;ht++){const en=6*ht;rt.uint16[en+0]=4*ht+0,rt.uint16[en+1]=4*ht+1,rt.uint16[en+2]=4*ht+2,rt.uint16[en+3]=4*ht+2,rt.uint16[en+4]=4*ht+3,rt.uint16[en+5]=4*ht+0}return rt}(Ae));const mt=se.createIndexBuffer(Ha,!0),Ue=se.createVertexBuffer($e,k.collisionCircleLayout.members,!0);for(const ot of Ce){const vt={u_matrix:ot.transform,u_inv_matrix:ot.invTransform,u_camera_to_center_distance:(tt=P.transform).cameraToCenterDistance,u_viewport_size:[tt.width,tt.height]};Ne.draw(se,ue.TRIANGLES,k.DepthMode.disabled,k.StencilMode.disabled,P.colorModeForRenderPass(),k.CullFaceMode.disabled,vt,w.id,Ue,mt,k.SegmentVector.simpleSegment(0,2*ot.circleOffset,ot.circleArray.length,ot.circleArray.length/2),null,P.transform.zoom,null,null,null)}var tt;Ue.destroy(),mt.destroy()}const ml=k.identity(new Float32Array(16));function mh(P,f,w,O,U,q){const{horizontalAlign:ee,verticalAlign:se}=k.getAnchorAlignment(P),ue=-(ee-.5)*f,me=-(se-.5)*w,Ce=k.evaluateVariableOffset(P,O);return new k.pointGeometry((ue/U+Ce[0])*q,(me/U+Ce[1])*q)}function ng(P,f,w,O,U,q,ee,se,ue,me,Ce,Ae){const Pe=P.text.placedSymbolArray,Ne=P.text.dynamicLayoutVertexArray,$e=P.icon.dynamicLayoutVertexArray,et={};Ne.clear();for(let mt=0;mt<Pe.length;mt++){const Ue=Pe.get(mt),tt=P.allowVerticalPlacement&&!Ue.placedOrientation,ot=Ue.hidden||!Ue.crossTileID||tt?null:O[Ue.crossTileID];if(ot){const vt=new k.pointGeometry(Ue.anchorX,Ue.anchorY),rt=Ae(vt),ht=xe(vt,w?se:ee,rt),en=Me(q.cameraToCenterDistance,ht.signedDistanceFromCamera);let sn=U.evaluateSizeForFeature(P.textSizeData,me,Ue)*en/k.ONE_EM;w&&(sn*=P.tilePixelRatio/ue);const{width:un,height:ut,anchor:En,textOffset:bn,textScale:Zn}=ot,kn=mh(En,un,ut,bn,Zn,sn),An=w?xe(vt.add(kn),ee,rt).point:ht.point.add(f?kn.rotate(-q.angle):kn),Ti=P.allowVerticalPlacement&&Ue.placedOrientation===k.WritingMode.vertical?Math.PI/2:0;for(let ci=0;ci<Ue.numGlyphs;ci++)k.addDynamicAttributes(Ne,An,Ti);Ce&&Ue.associatedIconIndex>=0&&(et[Ue.associatedIconIndex]={shiftedAnchor:An,angle:Ti})}else St(Ue.numGlyphs,Ne)}if(Ce){$e.clear();const mt=P.icon.placedSymbolArray;for(let Ue=0;Ue<mt.length;Ue++){const tt=mt.get(Ue);if(tt.hidden)St(tt.numGlyphs,$e);else{const ot=et[Ue];if(ot)for(let vt=0;vt<tt.numGlyphs;vt++)k.addDynamicAttributes($e,ot.shiftedAnchor,ot.angle);else St(tt.numGlyphs,$e)}}P.icon.dynamicLayoutVertexBuffer.updateData($e)}P.text.dynamicLayoutVertexBuffer.updateData(Ne)}function Up(P,f,w){return w.iconsInText&&f?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function sa(P,f,w,O,U,q,ee,se,ue,me,Ce,Ae){const Pe=P.context,Ne=Pe.gl,$e=P.transform,et="map"===se,mt="map"===ue,Ue=et&&"point"!==w.layout.get("symbol-placement"),tt=et&&!mt&&!Ue,ot=void 0!==w.layout.get("symbol-sort-key").constantOr(1);let vt=!1;const rt=P.depthModeForSublayer(0,k.DepthMode.ReadOnly),ht=w.layout.get("text-variable-anchor"),en=[],sn=P.terrain&&mt?["PITCH_WITH_MAP_TERRAIN"]:null;for(const un of O){const ut=f.getTile(un),En=ut.getBucket(w);if(!En)continue;const bn=U?En.text:En.icon;if(!bn||!bn.segments.get().length)continue;const Zn=bn.programConfigurations.get(w.id),kn=U||En.sdfIcons,An=U?En.textSizeData:En.iconSizeData,Ti=mt||0!==$e.pitch,ci=P.useProgram(Up(kn,U,En),Zn,sn),lr=k.evaluateSizeForZoom(An,$e.zoom);let yr,Br,zi,gr,po=[0,0],ua=null;if(U){if(Br=ut.glyphAtlasTexture,zi=Ne.LINEAR,yr=ut.glyphAtlasTexture.size,En.iconsInText){po=ut.imageAtlasTexture.size,ua=ut.imageAtlasTexture;const qs="composite"===An.kind||"camera"===An.kind;gr=Ti||P.options.rotating||P.options.zooming||qs?Ne.LINEAR:Ne.NEAREST}}else{const qs=1!==w.layout.get("icon-size").constantOr(0)||En.iconsNeedLinear;Br=ut.imageAtlasTexture,zi=kn||P.options.rotating||P.options.zooming||qs||Ti?Ne.LINEAR:Ne.NEAREST,yr=ut.imageAtlasTexture.size}const xs=Fn(ut,1,P.transform.zoom),Go=pe(un.projMatrix,mt,et,P.transform,xs),Qo=P.terrain&&mt&&Ue?k.invert(new Float32Array(16),Go):ml,ha=ge(un.projMatrix,mt,et,P.transform,xs),wi=ht&&En.hasTextData(),zr="none"!==w.layout.get("icon-text-fit")&&wi&&En.hasIconData();if(Ue){const qs=$e.elevation;Ke(En,un.projMatrix,P,U,Go,ha,mt,me,qs?Zs=>qs.getAtTileOffset(un,Zs.x,Zs.y):null)}const hr=P.translatePosMatrix(un.projMatrix,ut,q,ee),qr=Ue||U&&ht||zr?ml:Go,fo=P.translatePosMatrix(ha,ut,q,ee,!0),Jr=kn&&0!==w.paint.get(U?"text-halo-width":"icon-halo-width").constantOr(1);let da;da=kn?En.iconsInText?fr(An.kind,lr,tt,mt,P,hr,qr,fo,yr,po):wn(An.kind,lr,tt,mt,P,hr,qr,fo,U,yr,!0):fh(An.kind,lr,tt,mt,P,hr,qr,fo,U,yr);const Rs={program:ci,buffers:bn,uniformValues:da,atlasTexture:Br,atlasTextureIcon:ua,atlasInterpolation:zi,atlasInterpolationIcon:gr,isSDF:kn,hasHalo:Jr,tile:ut,labelPlaneMatrixInv:Qo};if(ot&&En.canOverlap){vt=!0;const qs=bn.segments.get();for(const Zs of qs)en.push({segments:new k.SegmentVector([Zs]),sortKey:Zs.sortKey,state:Rs})}else en.push({segments:bn.segments,sortKey:0,state:Rs})}vt&&en.sort((un,ut)=>un.sortKey-ut.sortKey);for(const un of en){const ut=un.state;if(P.terrain&&P.terrain.setupElevationDraw(ut.tile,ut.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:ut.labelPlaneMatrixInv}),Pe.activeTexture.set(Ne.TEXTURE0),ut.atlasTexture.bind(ut.atlasInterpolation,Ne.CLAMP_TO_EDGE),ut.atlasTextureIcon&&(Pe.activeTexture.set(Ne.TEXTURE1),ut.atlasTextureIcon&&ut.atlasTextureIcon.bind(ut.atlasInterpolationIcon,Ne.CLAMP_TO_EDGE)),ut.isSDF){const En=ut.uniformValues;ut.hasHalo&&(En.u_is_halo=1,gl(ut.buffers,un.segments,w,P,ut.program,rt,Ce,Ae,En)),En.u_is_halo=0}gl(ut.buffers,un.segments,w,P,ut.program,rt,Ce,Ae,ut.uniformValues)}}function gl(P,f,w,O,U,q,ee,se,ue){const me=O.context;U.draw(me,me.gl.TRIANGLES,q,ee,se,k.CullFaceMode.disabled,ue,w.id,P.layoutVertexBuffer,P.indexBuffer,f,w.paint,O.transform.zoom,P.programConfigurations.get(w.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function so(P,f,w,O,U,q,ee){const se=P.context.gl,ue=w.paint.get("fill-pattern"),me=ue&&ue.constantOr(1),Ce=w.getCrossfadeParameters();let Ae,Pe,Ne,$e,et;ee?(Pe=me&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=se.LINES):(Pe=me?"fillPattern":"fill",Ae=se.TRIANGLES);for(const mt of O){const Ue=f.getTile(mt);if(me&&!Ue.patternsLoaded())continue;const tt=Ue.getBucket(w);if(!tt)continue;P.prepareDrawTile(mt);const ot=tt.programConfigurations.get(w.id),vt=P.useProgram(Pe,ot);me&&(P.context.activeTexture.set(se.TEXTURE0),Ue.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),ot.updatePaintBuffers(Ce));const rt=ue.constantOr(null);if(rt&&Ue.imageAtlas){const en=Ue.imageAtlas,sn=en.patternPositions[rt.to.toString()],un=en.patternPositions[rt.from.toString()];sn&&un&&ot.setConstantPatternPositions(sn,un)}const ht=P.translatePosMatrix(mt.projMatrix,Ue,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(ee){$e=tt.indexBuffer2,et=tt.segments2;const en=P.terrain&&P.terrain.renderingToTexture?P.terrain.drapeBufferSize:[se.drawingBufferWidth,se.drawingBufferHeight];Ne="fillOutlinePattern"===Pe&&me?js(ht,P,Ce,Ue,en):za(ht,en)}else $e=tt.indexBuffer,et=tt.segments,Ne=me?ka(ht,P,Ce,Ue):ph(ht);P.prepareDrawProgram(P.context,vt,mt.toUnwrapped()),vt.draw(P.context,Ae,U,P.stencilModeForClipping(mt),q,k.CullFaceMode.disabled,Ne,w.id,tt.layoutVertexBuffer,$e,et,w.paint,P.transform.zoom,ot)}}function $o(P,f,w,O,U,q,ee){const se=P.context,ue=se.gl,me=w.paint.get("fill-extrusion-pattern"),Ce=me.constantOr(1),Ae=w.getCrossfadeParameters(),Pe=w.paint.get("fill-extrusion-opacity");for(const Ne of O){const $e=f.getTile(Ne),et=$e.getBucket(w);if(!et)continue;const mt=et.programConfigurations.get(w.id),Ue=P.useProgram(Ce?"fillExtrusionPattern":"fillExtrusion",mt);if(P.terrain){const ht=P.terrain;if(!et.enableTerrain)continue;if(ht.setupElevationDraw($e,Ue,{useMeterToDem:!0}),Of(se,f,Ne,et,w,ht),!et.centroidVertexBuffer){const en=Ue.attributes.a_centroid_pos;void 0!==en&&ue.vertexAttrib2f(en,0,0)}}Ce&&(P.context.activeTexture.set(ue.TEXTURE0),$e.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),mt.updatePaintBuffers(Ae));const tt=me.constantOr(null);if(tt&&$e.imageAtlas){const ht=$e.imageAtlas,en=ht.patternPositions[tt.to.toString()],sn=ht.patternPositions[tt.from.toString()];en&&sn&&mt.setConstantPatternPositions(en,sn)}const ot=P.translatePosMatrix(Ne.projMatrix,$e,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),vt=w.paint.get("fill-extrusion-vertical-gradient"),rt=Ce?Ma(ot,P,vt,Pe,Ne,Ae,$e):Lc(ot,P,vt,Pe);P.prepareDrawProgram(se,Ue,Ne.toUnwrapped()),Ue.draw(se,se.gl.TRIANGLES,U,q,ee,k.CullFaceMode.backCCW,rt,w.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,w.paint,P.transform.zoom,mt,P.terrain?et.centroidVertexBuffer:null)}}function Of(P,f,w,O,U,q){const ee=[Ue=>{let tt=Ue.canonical.x-1,ot=Ue.wrap;return tt<0&&(tt=(1<<Ue.canonical.z)-1,ot--),new k.OverscaledTileID(Ue.overscaledZ,ot,Ue.canonical.z,tt,Ue.canonical.y)},Ue=>{let tt=Ue.canonical.x+1,ot=Ue.wrap;return tt===1<<Ue.canonical.z&&(tt=0,ot++),new k.OverscaledTileID(Ue.overscaledZ,ot,Ue.canonical.z,tt,Ue.canonical.y)},Ue=>new k.OverscaledTileID(Ue.overscaledZ,Ue.wrap,Ue.canonical.z,Ue.canonical.x,(0===Ue.canonical.y?1<<Ue.canonical.z:Ue.canonical.y)-1),Ue=>new k.OverscaledTileID(Ue.overscaledZ,Ue.wrap,Ue.canonical.z,Ue.canonical.x,Ue.canonical.y===(1<<Ue.canonical.z)-1?0:Ue.canonical.y+1)],se=Ue=>{const tt=f.getSource().maxzoom,ot=en=>{const sn=f.getTileByID(en);if(sn&&sn.hasData())return sn.getBucket(U)};let vt,rt,ht;return(Ue.overscaledZ===Ue.canonical.z||Ue.overscaledZ>=tt)&&(vt=ot(Ue.key)),Ue.overscaledZ>=tt&&(rt=ot(Ue.calculateScaledKey(Ue.overscaledZ+1))),Ue.overscaledZ>tt&&(ht=ot(Ue.calculateScaledKey(Ue.overscaledZ-1))),vt||rt||ht},ue=[0,0,0],me=(Ue,tt)=>(ue[0]=Math.min(Ue.min.y,tt.min.y),ue[1]=Math.max(Ue.max.y,tt.max.y),ue[2]=k.EXTENT-tt.min.x>Ue.max.x?tt.min.x-k.EXTENT:Ue.max.x,ue),Ce=(Ue,tt)=>(ue[0]=Math.min(Ue.min.x,tt.min.x),ue[1]=Math.max(Ue.max.x,tt.max.x),ue[2]=k.EXTENT-tt.min.y>Ue.max.y?tt.min.y-k.EXTENT:Ue.max.y,ue),Ae=[(Ue,tt)=>me(Ue,tt),(Ue,tt)=>me(tt,Ue),(Ue,tt)=>Ce(Ue,tt),(Ue,tt)=>Ce(tt,Ue)],Pe=new k.pointGeometry(0,0);let Ne,$e,et;const mt=(Ue,tt,ot,vt,rt)=>{const ht=[[vt?ot:Ue,vt?Ue:ot,0],[vt?ot:tt,vt?tt:ot,0]],en=rt<0?k.EXTENT+rt:rt,sn=[vt?en:(Ue+tt)/2,vt?(Ue+tt)/2:en,0];return 0===ot&&rt<0||0!==ot&&rt>0?q.getForTilePoints(et,[sn],!0,$e):ht.push(sn),q.getForTilePoints(w,ht,!0,Ne),Math.max(ht[0][2],ht[1][2],sn[2])/q.exaggeration()};for(let Ue=0;Ue<4;Ue++){const tt=O.borders[Ue];if(0===tt.length&&(O.borderDone[Ue]=!0),O.borderDone[Ue])continue;const ot=et=ee[Ue](w),vt=se(ot);if(!(vt&&vt.enableTerrain&&($e=q.findDEMTileFor(ot),$e&&$e.dem)))continue;if(!Ne){const sn=q.findDEMTileFor(w);if(!sn||!sn.dem)return;Ne=sn}const rt=(Ue<2?1:5)-Ue,ht=vt.borders[rt];let en=0;for(let sn=0;sn<tt.length;sn++){const un=O.featuresOnBorder[tt[sn]],ut=un.borders[Ue];let En;for(;en<ht.length&&(En=vt.featuresOnBorder[ht[en]],!(En.borders[rt][1]>ut[0]+3));)vt.borderDone[rt]||vt.encodeCentroid(void 0,En,!1),en++;if(En&&en<ht.length){const bn=en;let Zn=0;for(;!(En.borders[rt][0]>ut[1]-3)&&(Zn++,++en!==ht.length);)En=vt.featuresOnBorder[ht[en]];if(En=vt.featuresOnBorder[ht[bn]],un.intersectsCount()>1||En.intersectsCount()>1||1!==Zn){1!==Zn&&(en=bn),O.encodeCentroid(void 0,un,!1),vt.borderDone[rt]||vt.encodeCentroid(void 0,En,!1);continue}const kn=Ae[Ue](un,En),An=Ue%2?k.EXTENT-1:0;Pe.x=mt(kn[0],Math.min(k.EXTENT-1,kn[1]),An,Ue<2,kn[2]),Pe.y=0,O.encodeCentroid(Pe,un,!1),vt.borderDone[rt]||vt.encodeCentroid(Pe,En,!1)}else O.encodeCentroid(void 0,un,!1)}O.borderDone[Ue]=O.needsCentroidUpdate=!0,vt.borderDone[rt]||(vt.borderDone[rt]=vt.needsCentroidUpdate=!0)}(O.needsCentroidUpdate||!O.centroidVertexBuffer&&0!==O.centroidVertexArray.length)&&O.uploadCentroid(P)}const Ga=new k.Color(1,0,0,1),Hi=new k.Color(0,1,0,1),Hp=new k.Color(0,0,1,1),Ff=new k.Color(1,0,1,1),Gp=new k.Color(0,1,1,1);function gh(P,f,w,O){Bc(P,0,f+w/2,P.transform.width,w,O)}function Ys(P,f,w,O){Bc(P,f-w/2,0,w,P.transform.height,O)}function Bc(P,f,w,O,U,q){const ee=P.context,se=ee.gl;se.enable(se.SCISSOR_TEST),se.scissor(f*k.exported.devicePixelRatio,w*k.exported.devicePixelRatio,O*k.exported.devicePixelRatio,U*k.exported.devicePixelRatio),ee.clear({color:q}),se.disable(se.SCISSOR_TEST)}function od(P,f,w){const O=P.context,U=O.gl,q=w.projMatrix,ee=P.useProgram("debug"),se=f.getTileByID(w.key);P.terrain&&P.terrain.setupElevationDraw(se,ee);const ue=k.DepthMode.disabled,me=k.StencilMode.disabled,Ce=P.colorModeForRenderPass();O.activeTexture.set(U.TEXTURE0),P.emptyTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),ee.draw(O,U.LINE_STRIP,ue,me,Ce,k.CullFaceMode.disabled,Va(q,k.Color.red),"$debug",P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments);const Pe=se.latestRawTileData,Ne=Math.floor((Pe&&Pe.byteLength||0)/1024),$e=f.getTile(w).tileSize,et=512/Math.min($e,512)*(w.overscaledZ/P.transform.zoom)*.5;let mt=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(mt+=` => ${w.overscaledZ}`),function(Ue,tt){Ue.initDebugOverlayCanvas();const ot=Ue.debugOverlayCanvas,vt=Ue.context.gl,rt=Ue.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,ot.width,ot.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(tt,5,5),rt.strokeText(tt,5,5),Ue.debugOverlayTexture.update(ot),Ue.debugOverlayTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)}(P,`${mt} ${Ne}kb`),ee.draw(O,U.TRIANGLES,ue,me,k.ColorMode.alphaBlended,k.CullFaceMode.disabled,Va(q,k.Color.transparent,et),"$debug",P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments)}const Mu=k.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Qd}=Mu;function Aa(P,f,w,O){P.emplaceBack(f,w,O)}class _l{constructor(f){this.vertexArray=new k.StructArrayLayout3f12,this.indices=new k.StructArrayLayout3ui6,Aa(this.vertexArray,-1,-1,1),Aa(this.vertexArray,1,-1,1),Aa(this.vertexArray,-1,1,1),Aa(this.vertexArray,1,1,1),Aa(this.vertexArray,-1,-1,-1),Aa(this.vertexArray,1,-1,-1),Aa(this.vertexArray,-1,1,-1),Aa(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=f.createVertexBuffer(this.vertexArray,Qd),this.indexBuffer=f.createIndexBuffer(this.indices),this.segment=k.SegmentVector.simpleSegment(0,0,36,12)}}function yl(P,f,w,O,U,q){const ee=P.gl,se=f.paint.get("sky-atmosphere-color"),ue=f.paint.get("sky-atmosphere-halo-color"),me=f.paint.get("sky-atmosphere-sun-intensity"),Ce={u_matrix_3f:k.fromMat4([],O),u_sun_direction:U,u_sun_intensity:me,u_color_tint_r:[($e=se).r,$e.g,$e.b,$e.a],u_color_tint_m:[(et=ue).r,et.g,et.b,et.a],u_luminance:5e-5};var $e,et;ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+q,f.skyboxTexture,0),w.draw(P,ee.TRIANGLES,k.DepthMode.disabled,k.StencilMode.disabled,k.ColorMode.unblended,k.CullFaceMode.frontCW,Ce,"skyboxCapture",f.skyboxGeometry.vertexBuffer,f.skyboxGeometry.indexBuffer,f.skyboxGeometry.segment)}const vl={symbol:function(P,f,w,O,U){if("translucent"!==P.renderPass)return;const q=k.StencilMode.disabled,ee=P.colorModeForRenderPass();w.layout.get("text-variable-anchor")&&function(se,ue,me,Ce,Ae,Pe,Ne){const $e=ue.transform,et="map"===Ae,mt="map"===Pe;for(const Ue of se){const tt=Ce.getTile(Ue),ot=tt.getBucket(me);if(!ot||!ot.text||!ot.text.segments.get().length)continue;const vt=k.evaluateSizeForZoom(ot.textSizeData,$e.zoom),rt=Fn(tt,1,ue.transform.zoom),ht=pe(Ue.projMatrix,mt,et,ue.transform,rt),en="none"!==me.layout.get("icon-text-fit")&&ot.hasIconData();if(vt){const sn=Math.pow(2,$e.zoom-tt.tileID.overscaledZ),un=$e.elevation;ng(ot,et,mt,Ne,k.symbolSize,$e,ht,Ue.projMatrix,sn,vt,en,un?ut=>un.getAtTileOffset(Ue,ut.x,ut.y):ut=>0)}}}(O,P,w,f,w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),U),0!==w.paint.get("icon-opacity").constantOr(1)&&sa(P,f,w,O,!1,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),w.layout.get("icon-rotation-alignment"),w.layout.get("icon-pitch-alignment"),w.layout.get("icon-keep-upright"),q,ee),0!==w.paint.get("text-opacity").constantOr(1)&&sa(P,f,w,O,!0,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),w.layout.get("text-keep-upright"),q,ee),f.map.showCollisionBoxes&&(ps(P,f,w,O,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),!0),ps(P,f,w,O,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),!1))},circle:function(P,f,w,O){if("translucent"!==P.renderPass)return;const U=w.paint.get("circle-opacity"),q=w.paint.get("circle-stroke-width"),ee=w.paint.get("circle-stroke-opacity"),se=void 0!==w.layout.get("circle-sort-key").constantOr(1);if(0===U.constantOr(1)&&(0===q.constantOr(1)||0===ee.constantOr(1)))return;const ue=P.context,me=ue.gl,Ce=P.depthModeForSublayer(0,k.DepthMode.ReadOnly),Ae=k.StencilMode.disabled,Pe=P.colorModeForRenderPass(),Ne=[];for(let $e=0;$e<O.length;$e++){const et=O[$e],mt=f.getTile(et),Ue=mt.getBucket(w);if(!Ue)continue;const tt=Ue.programConfigurations.get(w.id),ot=$d(w),vt={programConfiguration:tt,program:P.useProgram("circle",tt,ot),layoutVertexBuffer:Ue.layoutVertexBuffer,indexBuffer:Ue.indexBuffer,uniformValues:oa(P,et,mt,w),tile:mt};if(se){const rt=Ue.segments.get();for(const ht of rt)Ne.push({segments:new k.SegmentVector([ht]),sortKey:ht.sortKey,state:vt})}else Ne.push({segments:Ue.segments,sortKey:0,state:vt})}se&&Ne.sort(($e,et)=>$e.sortKey-et.sortKey);for(const $e of Ne){const{programConfiguration:et,program:mt,layoutVertexBuffer:Ue,indexBuffer:tt,uniformValues:ot,tile:vt}=$e.state,rt=$e.segments;P.terrain&&P.terrain.setupElevationDraw(vt,mt,{useDepthForOcclusion:!0}),P.prepareDrawProgram(ue,mt,vt.tileID.toUnwrapped()),mt.draw(ue,me.TRIANGLES,Ce,Ae,Pe,k.CullFaceMode.disabled,ot,w.id,Ue,tt,rt,w.paint,P.transform.zoom,et)}},heatmap:function(P,f,w,O){if(0!==w.paint.get("heatmap-opacity"))if("offscreen"===P.renderPass){const U=P.context,q=U.gl,ee=k.StencilMode.disabled,se=new k.ColorMode([q.ONE,q.ONE],k.Color.transparent,[!0,!0,!0,!0]);(function(ue,me,Ce){const Ae=ue.gl;ue.activeTexture.set(Ae.TEXTURE1),ue.viewport.set([0,0,me.width/4,me.height/4]);let Pe=Ce.heatmapFbo;if(Pe)Ae.bindTexture(Ae.TEXTURE_2D,Pe.colorAttachment.get()),ue.bindFramebuffer.set(Pe.framebuffer);else{const Ne=Ae.createTexture();Ae.bindTexture(Ae.TEXTURE_2D,Ne),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_S,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_T,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.LINEAR),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.LINEAR),Pe=Ce.heatmapFbo=ue.createFramebuffer(me.width/4,me.height/4,!1),function($e,et,mt,Ue){const tt=$e.gl;tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,et.width/4,et.height/4,0,tt.RGBA,$e.extRenderToTextureHalfFloat?$e.extTextureHalfFloat.HALF_FLOAT_OES:tt.UNSIGNED_BYTE,null),Ue.colorAttachment.set(mt)}(ue,me,Ne,Pe)}})(U,P,w),U.clear({color:k.Color.transparent});for(let ue=0;ue<O.length;ue++){const me=O[ue];if(f.hasRenderableParent(me))continue;const Ce=f.getTile(me),Ae=Ce.getBucket(w);if(!Ae)continue;const Pe=Ae.programConfigurations.get(w.id),Ne=P.useProgram("heatmap",Pe),{zoom:$e}=P.transform;P.terrain&&P.terrain.setupElevationDraw(Ce,Ne),P.prepareDrawProgram(U,Ne,me.toUnwrapped()),Ne.draw(U,q.TRIANGLES,k.DepthMode.disabled,ee,se,k.CullFaceMode.disabled,nd(me.projMatrix,Ce,$e,w.paint.get("heatmap-intensity")),w.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,w.paint,P.transform.zoom,Pe)}U.viewport.set([0,0,P.width,P.height])}else"translucent"===P.renderPass&&(P.context.setColorMode(P.colorModeForRenderPass()),function(U,q){const ee=U.context,se=ee.gl,ue=q.heatmapFbo;if(!ue)return;ee.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,ue.colorAttachment.get()),ee.activeTexture.set(se.TEXTURE1);let me=q.colorRampTexture;me||(me=q.colorRampTexture=new k.Texture(ee,q.colorRamp,se.RGBA)),me.bind(se.LINEAR,se.CLAMP_TO_EDGE),U.useProgram("heatmapTexture").draw(ee,se.TRIANGLES,k.DepthMode.disabled,k.StencilMode.disabled,U.colorModeForRenderPass(),k.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")},q.id,U.viewportBuffer,U.quadTriangleIndexBuffer,U.viewportSegments,q.paint,U.transform.zoom)}(P,w))},line:function(P,f,w,O){if("translucent"!==P.renderPass)return;const U=w.paint.get("line-opacity"),q=w.paint.get("line-width");if(0===U.constantOr(1)||0===q.constantOr(1))return;const ee=P.depthModeForSublayer(0,k.DepthMode.ReadOnly),se=P.colorModeForRenderPass(),ue=w.paint.get("line-dasharray"),me=ue.constantOr(1),Ce=w.layout.get("line-cap"),Ae=w.paint.get("line-pattern"),Pe=Ae.constantOr(1),Ne=w.paint.get("line-gradient"),$e=w.getCrossfadeParameters(),et=Pe?"linePattern":me?"lineSDF":Ne?"lineGradient":"line",mt=P.context,Ue=mt.gl;for(const tt of O){const ot=f.getTile(tt);if(Pe&&!ot.patternsLoaded())continue;const vt=ot.getBucket(w);if(!vt)continue;P.prepareDrawTile(tt);const rt=vt.programConfigurations.get(w.id),ht=P.useProgram(et,rt),en=Ae.constantOr(null);if(en&&ot.imageAtlas){const bn=ot.imageAtlas,Zn=bn.patternPositions[en.to.toString()],kn=bn.patternPositions[en.from.toString()];Zn&&kn&&rt.setConstantPatternPositions(Zn,kn)}const sn=ue.constantOr(null),un=Ce.constantOr(null);if(!Pe&&sn&&un&&ot.lineAtlas){const bn=ot.lineAtlas,Zn=bn.getDash(sn.to,un),kn=bn.getDash(sn.from,un);Zn&&kn&&rt.setConstantPatternPositions(Zn,kn)}const ut=P.terrain?tt.projMatrix:null,En=Pe?Su(P,ot,w,$e,ut):me?Vp(P,ot,w,$e,ut):Ne?bi(P,ot,w,ut,vt.lineClipsArray.length):Ua(P,ot,w,ut);if(Pe)mt.activeTexture.set(Ue.TEXTURE0),ot.imageAtlasTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),rt.updatePaintBuffers($e);else if(me)mt.activeTexture.set(Ue.TEXTURE0),ot.lineAtlasTexture.bind(Ue.LINEAR,Ue.REPEAT),rt.updatePaintBuffers($e);else if(Ne){const bn=vt.gradients[w.id];let Zn=bn.texture;if(w.gradientVersion!==bn.version){let kn=256;if(w.stepInterpolant){const An=f.getSource().maxzoom,Ti=tt.canonical.z===An?Math.ceil(1<<P.transform.maxZoom-tt.canonical.z):1;kn=k.clamp(k.nextPowerOfTwo(vt.maxLineLength/k.EXTENT*1024*Ti),256,mt.maxTextureSize)}bn.gradient=k.renderColorRamp({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:kn,image:bn.gradient||void 0,clips:vt.lineClipsArray}),bn.texture?bn.texture.update(bn.gradient):bn.texture=new k.Texture(mt,bn.gradient,Ue.RGBA),bn.version=w.gradientVersion,Zn=bn.texture}mt.activeTexture.set(Ue.TEXTURE0),Zn.bind(w.stepInterpolant?Ue.NEAREST:Ue.LINEAR,Ue.CLAMP_TO_EDGE)}P.prepareDrawProgram(mt,ht,tt.toUnwrapped()),ht.draw(mt,Ue.TRIANGLES,ee,P.stencilModeForClipping(tt),se,k.CullFaceMode.disabled,En,w.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,w.paint,P.transform.zoom,rt,vt.layoutVertexBuffer2)}},fill:function(P,f,w,O){const U=w.paint.get("fill-color"),q=w.paint.get("fill-opacity");if(0===q.constantOr(1))return;const ee=P.colorModeForRenderPass(),se=w.paint.get("fill-pattern"),ue=P.opaquePassEnabledForLayer()&&!se.constantOr(1)&&1===U.constantOr(k.Color.transparent).a&&1===q.constantOr(0)?"opaque":"translucent";if(P.renderPass===ue){const me=P.depthModeForSublayer(1,"opaque"===P.renderPass?k.DepthMode.ReadWrite:k.DepthMode.ReadOnly);so(P,f,w,O,me,ee,!1)}if("translucent"===P.renderPass&&w.paint.get("fill-antialias")){const me=P.depthModeForSublayer(w.getPaintProperty("fill-outline-color")?2:0,k.DepthMode.ReadOnly);so(P,f,w,O,me,ee,!0)}},"fill-extrusion":function(P,f,w,O){const U=w.paint.get("fill-extrusion-opacity");if(0!==U&&"translucent"===P.renderPass){const q=new k.DepthMode(P.context.gl.LEQUAL,k.DepthMode.ReadWrite,P.depthRangeFor3D);if(1!==U||w.paint.get("fill-extrusion-pattern").constantOr(1))$o(P,f,w,O,q,k.StencilMode.disabled,k.ColorMode.disabled),$o(P,f,w,O,q,P.stencilModeFor3D(),P.colorModeForRenderPass());else{const ee=P.colorModeForRenderPass();$o(P,f,w,O,q,k.StencilMode.disabled,ee)}}},hillshade:function(P,f,w,O){if("offscreen"!==P.renderPass&&"translucent"!==P.renderPass)return;const U=P.context,q=P.depthModeForSublayer(0,k.DepthMode.ReadOnly),ee=P.colorModeForRenderPass(),se=P.terrain&&P.terrain.renderingToTexture,[ue,me]="translucent"!==P.renderPass||se?[{},O]:P.stencilConfigForOverlap(O);for(const Ce of me){const Ae=f.getTile(Ce);if(Ae.needsHillshadePrepare&&"offscreen"===P.renderPass)Gs(P,Ae,w,q,k.StencilMode.disabled,ee);else if("translucent"===P.renderPass){const Pe=se&&P.terrain?P.terrain.stencilModeForRTTOverlap(Ce):ue[Ce.overscaledZ];qd(P,Ce,Ae,w,q,Pe,ee)}}U.viewport.set([0,0,P.width,P.height])},raster:function(P,f,w,O,U,q){if("translucent"!==P.renderPass||0===w.paint.get("raster-opacity")||!O.length)return;const ee=P.context,se=ee.gl,ue=f.getSource(),me=P.useProgram("raster"),Ce=P.colorModeForRenderPass(),Ae=P.terrain&&P.terrain.renderingToTexture,[Pe,Ne]=ue instanceof Ge||Ae?[{},O]:P.stencilConfigForOverlap(O),$e=Ne[Ne.length-1].overscaledZ,et=!P.options.moving;for(const mt of Ne){const Ue=Ae?k.DepthMode.disabled:P.depthModeForSublayer(mt.overscaledZ-$e,1===w.paint.get("raster-opacity")?k.DepthMode.ReadWrite:k.DepthMode.ReadOnly,se.LESS),tt=mt.toUnwrapped(),ot=f.getTile(mt);if(Ae&&(!ot||!ot.hasData()))continue;const vt=Ae?mt.projMatrix:P.transform.calculateProjMatrix(tt,et),rt=P.terrain&&Ae?P.terrain.stencilModeForRTTOverlap(mt):Pe[mt.overscaledZ],ht=q?0:w.paint.get("raster-fade-duration");ot.registerFadeDuration(ht);const en=f.findLoadedParent(mt,0),sn=Xr(ot,en,f,P.transform,ht);let un,ut;P.terrain&&P.terrain.prepareDrawTile(mt);const En="nearest"===w.paint.get("raster-resampling")?se.NEAREST:se.LINEAR;ee.activeTexture.set(se.TEXTURE0),ot.texture.bind(En,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),ee.activeTexture.set(se.TEXTURE1),en?(en.texture.bind(En,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),un=Math.pow(2,en.tileID.overscaledZ-ot.tileID.overscaledZ),ut=[ot.tileID.canonical.x*un%1,ot.tileID.canonical.y*un%1]):ot.texture.bind(En,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST);const bn=Rf(vt,ut||[0,0],un||1,sn,w);P.prepareDrawProgram(ee,me,tt),ue instanceof Ge?me.draw(ee,se.TRIANGLES,Ue,k.StencilMode.disabled,Ce,k.CullFaceMode.disabled,bn,w.id,ue.boundsBuffer,P.quadTriangleIndexBuffer,ue.boundsSegments):me.draw(ee,se.TRIANGLES,Ue,rt,Ce,k.CullFaceMode.disabled,bn,w.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}},background:function(P,f,w,O){const U=w.paint.get("background-color"),q=w.paint.get("background-opacity");if(0===q)return;const ee=P.context,se=ee.gl,ue=P.transform,me=ue.tileSize,Ce=w.paint.get("background-pattern");if(P.isPatternMissing(Ce))return;const Ae=!Ce&&1===U.a&&1===q&&P.opaquePassEnabledForLayer()?"opaque":"translucent";if(P.renderPass!==Ae)return;const Pe=k.StencilMode.disabled,Ne=P.depthModeForSublayer(0,"opaque"===Ae?k.DepthMode.ReadWrite:k.DepthMode.ReadOnly),$e=P.colorModeForRenderPass(),et=P.useProgram(Ce?"backgroundPattern":"background"),mt=O||ue.coveringTiles({tileSize:me});Ce&&(ee.activeTexture.set(se.TEXTURE0),P.imageManager.bind(P.context));const Ue=w.getCrossfadeParameters();for(const tt of mt){const ot=tt.toUnwrapped(),vt=O?tt.projMatrix:P.transform.calculateProjMatrix(ot);P.prepareDrawTile(tt);const rt=Ce?So(vt,q,P,Ce,{tileID:tt,tileSize:me},Ue):id(vt,q,U);P.prepareDrawProgram(ee,et,ot),et.draw(ee,se.TRIANGLES,Ne,Pe,$e,k.CullFaceMode.disabled,rt,w.id,P.tileExtentBuffer,P.quadTriangleIndexBuffer,P.tileExtentSegments)}},sky:function(P,f,w){const O=w.paint.get("sky-opacity");if(0===O)return;const U=P.context,q=w.paint.get("sky-type"),ee=new k.DepthMode(U.gl.LEQUAL,k.DepthMode.ReadOnly,[0,1]),se=P.frameCounter/1e3%1;"atmosphere"===q?"offscreen"===P.renderPass?w.needsSkyboxCapture(P)&&(function(ue,me,Ce,Ae){const Pe=ue.context,Ne=Pe.gl;let $e=me.skyboxFbo;if(!$e){$e=me.skyboxFbo=Pe.createFramebuffer(32,32,!1),me.skyboxGeometry=new _l(Pe),me.skyboxTexture=Pe.gl.createTexture(),Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,me.skyboxTexture),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_WRAP_S,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_WRAP_T,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_MIN_FILTER,Ne.LINEAR),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_MAG_FILTER,Ne.LINEAR);for(let tt=0;tt<6;++tt)Ne.texImage2D(Ne.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Ne.RGBA,32,32,0,Ne.RGBA,Ne.UNSIGNED_BYTE,null)}Pe.bindFramebuffer.set($e.framebuffer),Pe.viewport.set([0,0,32,32]);const et=me.getCenter(ue,!0),mt=ue.useProgram("skyboxCapture"),Ue=new Float64Array(16);k.identity(Ue),k.rotateY(Ue,Ue,.5*-Math.PI),yl(Pe,me,mt,Ue,et,0),k.identity(Ue),k.rotateY(Ue,Ue,.5*Math.PI),yl(Pe,me,mt,Ue,et,1),k.identity(Ue),k.rotateX(Ue,Ue,.5*-Math.PI),yl(Pe,me,mt,Ue,et,2),k.identity(Ue),k.rotateX(Ue,Ue,.5*Math.PI),yl(Pe,me,mt,Ue,et,3),k.identity(Ue),yl(Pe,me,mt,Ue,et,4),k.identity(Ue),k.rotateY(Ue,Ue,Math.PI),yl(Pe,me,mt,Ue,et,5),Pe.viewport.set([0,0,ue.width,ue.height])}(P,w),w.markSkyboxValid(P)):"sky"===P.renderPass&&function(ue,me,Ce,Ae,Pe){const Ne=ue.context,$e=Ne.gl,et=ue.transform,mt=ue.useProgram("skybox");Ne.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_CUBE_MAP,me.skyboxTexture);const Ue={u_matrix:et.skyboxMatrix,u_sun_direction:me.getCenter(ue,!1),u_cubemap:0,u_opacity:Ae,u_temporal_offset:Pe};ue.prepareDrawProgram(Ne,mt),mt.draw(Ne,$e.TRIANGLES,Ce,k.StencilMode.disabled,ue.colorModeForRenderPass(),k.CullFaceMode.backCW,Ue,"skybox",me.skyboxGeometry.vertexBuffer,me.skyboxGeometry.indexBuffer,me.skyboxGeometry.segment)}(P,w,ee,O,se):"gradient"===q&&"sky"===P.renderPass&&function(ue,me,Ce,Ae,Pe){const Ne=ue.context,$e=Ne.gl,et=ue.transform,mt=ue.useProgram("skyboxGradient");me.skyboxGeometry||(me.skyboxGeometry=new _l(Ne)),Ne.activeTexture.set($e.TEXTURE0);let Ue=me.colorRampTexture;Ue||(Ue=me.colorRampTexture=new k.Texture(Ne,me.colorRamp,$e.RGBA)),Ue.bind($e.LINEAR,$e.CLAMP_TO_EDGE);const tt=(ot=et.skyboxMatrix,vt=me.getCenter(ue,!1),rt=me.paint.get("sky-gradient-radius"),ht=Ae,en=Pe,{u_matrix:ot,u_color_ramp:0,u_center_direction:vt,u_radius:k.degToRad(rt),u_opacity:ht,u_temporal_offset:en});var ot,vt,rt,ht,en;ue.prepareDrawProgram(Ne,mt),mt.draw(Ne,$e.TRIANGLES,Ce,k.StencilMode.disabled,ue.colorModeForRenderPass(),k.CullFaceMode.backCW,tt,"skyboxGradient",me.skyboxGeometry.vertexBuffer,me.skyboxGeometry.indexBuffer,me.skyboxGeometry.segment)}(P,w,ee,O,se)},debug:function(P,f,w){for(let O=0;O<w.length;O++)od(P,f,w[O])},custom:function(P,f,w){const O=P.context,U=w.implementation;if("offscreen"===P.renderPass){const q=U.prerender;q&&(P.setCustomLayerDefaults(),O.setColorMode(P.colorModeForRenderPass()),q.call(U,O.gl,P.transform.customLayerMatrix()),O.setDirty(),P.setBaseState())}else if("translucent"===P.renderPass){P.setCustomLayerDefaults(),O.setColorMode(P.colorModeForRenderPass()),O.setStencilMode(k.StencilMode.disabled);const q="3d"===U.renderingMode?new k.DepthMode(P.context.gl.LEQUAL,k.DepthMode.ReadWrite,P.depthRangeFor3D):P.depthModeForSublayer(0,k.DepthMode.ReadOnly);O.setDepthMode(q),U.render(O.gl,P.transform.customLayerMatrix()),O.setDirty(),P.setBaseState(),O.bindFramebuffer.set(null)}}};class jp{constructor(f,w){this.context=new di(f),this.transform=w,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=k.SourceCache.maxUnderzooming+k.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new oh,this.gpuTimers={},this.frameCounter=0}updateTerrain(f,w){const O=!!f&&!!f.terrain;if(!(O||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new zp(this,f));const U=this._terrain;this.transform.elevation=O?U:null,U.update(f,this.transform,w)}_updateFog(f){const w=f.fog;if(!w||w.getOpacity(this.transform.pitch)<1||w.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[O,U]=w.getFovAdjustedRange(this.transform._fov);if(O>U)return void(this.transform.fogCullDistSq=null);const q=O+.78*(U-O);this.transform.fogCullDistSq=q*q}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(f,w){if(this.width=f*k.exported.devicePixelRatio,this.height=w*k.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const O of this.style.order)this.style._layers[O].resize()}setup(){const f=this.context,w=new k.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(k.EXTENT,0),w.emplaceBack(0,k.EXTENT),w.emplaceBack(k.EXTENT,k.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(w,k.posAttributes.members),this.tileExtentSegments=k.SegmentVector.simpleSegment(0,0,4,2);const O=new k.StructArrayLayout2i4;O.emplaceBack(0,0),O.emplaceBack(k.EXTENT,0),O.emplaceBack(0,k.EXTENT),O.emplaceBack(k.EXTENT,k.EXTENT),this.debugBuffer=f.createVertexBuffer(O,k.posAttributes.members),this.debugSegments=k.SegmentVector.simpleSegment(0,0,4,5);const U=new k.StructArrayLayout4i8;U.emplaceBack(0,0,0,0),U.emplaceBack(k.EXTENT,0,k.EXTENT,0),U.emplaceBack(0,k.EXTENT,0,k.EXTENT),U.emplaceBack(k.EXTENT,k.EXTENT,k.EXTENT,k.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(U,ir.members),this.rasterBoundsSegments=k.SegmentVector.simpleSegment(0,0,4,2);const q=new k.StructArrayLayout2i4;q.emplaceBack(-1,-1),q.emplaceBack(1,-1),q.emplaceBack(-1,1),q.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(q,k.posAttributes.members),this.viewportSegments=k.SegmentVector.simpleSegment(0,0,4,2);const ee=new k.StructArrayLayout1ui2;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(ee);const se=new k.StructArrayLayout3ui6;se.emplaceBack(0,1,2),se.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(se),this.emptyTexture=new k.Texture(f,{width:1,height:1,data:new Uint8Array([0,0,0,0])},f.gl.RGBA),this.identityMat=k.create$1();const ue=this.context.gl;this.stencilClearMode=new k.StencilMode({func:ue.ALWAYS,mask:0},0,255,ue.ZERO,ue.ZERO,ue.ZERO),this.loadTimeStamps.push(k.window.performance.now())}clearStencil(){const f=this.context,w=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this.useProgram("clippingMask").draw(f,w.TRIANGLES,k.DepthMode.disabled,this.stencilClearMode,k.ColorMode.disabled,k.CullFaceMode.disabled,zl(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(f,w,O){if(!(w&&this.currentStencilSource!==w.id&&f.isTileClipped()&&O&&O.length))return;this.currentStencilSource=w.id;const U=this.context,q=U.gl;this.nextStencilID+O.length>256&&this.clearStencil(),U.setColorMode(k.ColorMode.disabled),U.setDepthMode(k.DepthMode.disabled);const ee=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const se of O){const ue=this._tileClippingMaskIDs[se.key]=this.nextStencilID++;ee.draw(U,q.TRIANGLES,k.DepthMode.disabled,new k.StencilMode({func:q.ALWAYS,mask:0},ue,255,q.KEEP,q.KEEP,q.REPLACE),k.ColorMode.disabled,k.CullFaceMode.disabled,zl(se.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const f=this.nextStencilID++,w=this.context.gl;return new k.StencilMode({func:w.NOTEQUAL,mask:255},f,255,w.KEEP,w.KEEP,w.REPLACE)}stencilModeForClipping(f){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(f);const w=this.context.gl;return new k.StencilMode({func:w.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,w.KEEP,w.KEEP,w.REPLACE)}stencilConfigForOverlap(f){const w=this.context.gl,O=f.sort((ee,se)=>se.overscaledZ-ee.overscaledZ),U=O[O.length-1].overscaledZ,q=O[0].overscaledZ-U+1;if(q>1){this.currentStencilSource=void 0,this.nextStencilID+q>256&&this.clearStencil();const ee={};for(let se=0;se<q;se++)ee[se+U]=new k.StencilMode({func:w.GEQUAL,mask:255},se+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=q,[ee,O]}return[{[U]:k.StencilMode.disabled},O]}colorModeForRenderPass(){const f=this.context.gl;if(this._showOverdrawInspector){const w=1/8;return new k.ColorMode([f.CONSTANT_COLOR,f.ONE],new k.Color(w,w,w,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?k.ColorMode.unblended:k.ColorMode.alphaBlended}depthModeForSublayer(f,w,O){if(!this.opaquePassEnabledForLayer())return k.DepthMode.disabled;const U=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new k.DepthMode(O||this.context.gl.LEQUAL,w,[U,U])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(f,w){this.style=f,this.options=w,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(k.exported.now()),this.imageManager.beginFrame();const O=this.style.order,U=this.style._sourceCaches;for(const me in U){const Ce=U[me];Ce.used&&Ce.prepare(this.context)}const q={},ee={},se={};for(const me in U){const Ce=U[me];q[me]=Ce.getVisibleCoordinates(),ee[me]=q[me].slice().reverse(),se[me]=Ce.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let me=0;me<O.length;me++)if(this.style._layers[O[me]].is3D()){this.opaquePassCutoff=me;break}if(this.terrain&&(this.terrain.updateTileBinding(se),this.opaquePassCutoff=0),!k.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const me of O){const Ce=this.style._layers[me],Ae=f._getLayerSourceCache(Ce);if(!Ce.hasOffscreenPass()||Ce.isHidden(this.transform.zoom))continue;const Pe=Ae?ee[Ae.id]:void 0;("custom"===Ce.type||Ce.isSky()||Pe&&Pe.length)&&this.renderLayer(this,Ae,Ce,Pe)}this.depthRangeFor3D=[0,1-(f.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let ue=k.Color.transparent;if(this.style.fog&&(ue=this.style.fog.properties.get("color")),this.context.clear({color:w.showOverdrawInspector?k.Color.black:ue,depth:1}),this.clearStencil(),this._showOverdrawInspector=w.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){const me=this.style._layers[O[this.currentLayer]],Ce=f._getLayerSourceCache(me);if(me.isSky())continue;const Ae=Ce?ee[Ce.id]:void 0;this._renderTileClippingMasks(me,Ce,Ae),this.renderLayer(this,Ce,me,Ae)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const me=this.style._layers[O[this.currentLayer]],Ce=f._getLayerSourceCache(me);me.isSky()&&this.renderLayer(this,Ce,me,Ce?ee[Ce.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<O.length;){const me=this.style._layers[O[this.currentLayer]],Ce=f._getLayerSourceCache(me);if(me.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(me)){if(me.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Ae=Ce?("symbol"===me.type?se:ee)[Ce.id]:void 0;this._renderTileClippingMasks(me,Ce,Ce?q[Ce.id]:void 0),this.renderLayer(this,Ce,me,Ae),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let me=null;k.values(this.style._layers).forEach(Ce=>{const Ae=f._getLayerSourceCache(Ce);Ae&&!Ce.isHidden(this.transform.zoom)&&(!me||me.getSource().maxzoom<Ae.getSource().maxzoom)&&(me=Ae)}),me&&this.options.showTileBoundaries&&vl.debug(this,me,me.getVisibleCoordinates())}this.options.showPadding&&function(me){const Ce=me.transform.padding;gh(me,me.transform.height-(Ce.top||0),3,Ga),gh(me,Ce.bottom||0,3,Hi),Ys(me,Ce.left||0,3,Hp),Ys(me,me.transform.width-(Ce.right||0),3,Ff);const Ae=me.transform.centerPoint;var Pe,Ne,$e,et;Bc(Pe=me,(Ne=Ae.x)-1,($e=me.transform.height-Ae.y)-10,2,20,et=Gp),Bc(Pe,Ne-10,$e-1,20,2,et)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%k.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(k.window.performance.now()),this.saveCanvasCopy())}renderLayer(f,w,O,U){O.isHidden(this.transform.zoom)||("background"===O.type||"sky"===O.type||"custom"===O.type||U&&U.length)&&(this.id=O.id,this.gpuTimingStart(O),vl[O.type](f,w,O,U,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(f){if(!this.options.gpuTiming)return;const w=this.context.extTimerQuery;let O=this.gpuTimers[f.id];O||(O=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:w.createQueryEXT()}),O.calls++,w.beginQueryEXT(w.TIME_ELAPSED_EXT,O.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}collectGpuTimers(){const f=this.gpuTimers;return this.gpuTimers={},f}queryGpuTimers(f){const w={};for(const O in f){const U=f[O],q=this.context.extTimerQuery,ee=q.getQueryObjectEXT(U.query,q.QUERY_RESULT_EXT)/1e6;q.deleteQueryEXT(U.query),w[O]=ee}return w}translatePosMatrix(f,w,O,U,q){if(!O[0]&&!O[1])return f;const ee=q?"map"===U?this.transform.angle:0:"viewport"===U?-this.transform.angle:0;if(ee){const me=Math.sin(ee),Ce=Math.cos(ee);O=[O[0]*Ce-O[1]*me,O[0]*me+O[1]*Ce]}const se=[q?O[0]:Fn(w,O[0],this.transform.zoom),q?O[1]:Fn(w,O[1],this.transform.zoom),0],ue=new Float32Array(16);return k.translate(ue,f,se),ue}saveTileTexture(f){const w=this._tileTextures[f.size[0]];w?w.push(f):this._tileTextures[f.size[0]]=[f]}getTileTexture(f){const w=this._tileTextures[f];return w&&w.length>0?w.pop():null}isPatternMissing(f){if(!f)return!1;if(!f.from||!f.to)return!0;const w=this.imageManager.getPattern(f.from.toString()),O=this.imageManager.getPattern(f.to.toString());return!w||!O}currentGlobalDefines(){const f=this.terrain&&this.terrain.renderingToTexture,w=this.style&&this.style.fog,O=[];return this.terrain&&!this.terrain.renderingToTexture&&O.push("TERRAIN"),w&&!f&&0!==w.getOpacity(this.transform.pitch)&&O.push("FOG"),f&&O.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&O.push("OVERDRAW_INSPECTOR"),O}useProgram(f,w,O){this.cache=this.cache||{};const U=O||[],q=this.currentGlobalDefines().concat(U),ee=Wd.cacheKey(f,q,w);return this.cache[ee]||(this.cache[ee]=new Wd(this.context,f,ah[f],w,rd[f],q)),this.cache[ee]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=k.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new k.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(f){this.terrain&&this.terrain.prepareDrawTile(f)}prepareDrawProgram(f,w,O){if(this.terrain&&this.terrain.renderingToTexture)return;const U=this.style.fog;if(U){const q=U.getOpacity(this.transform.pitch);0!==q&&w.setFogUniformValues(f,((ee,se,ue,me)=>{const Ce=se.properties.get("color"),Ae=ee.frameCounter/1e3%1,Pe=[Ce.r/Ce.a,Ce.g/Ce.a,Ce.b/Ce.a,me];return{u_fog_matrix:ue?ee.transform.calculateFogTileMatrix(ue):ee.identityMat,u_fog_range:se.getFovAdjustedRange(ee.transform._fov),u_fog_color:Pe,u_fog_horizon_blend:se.properties.get("horizon-blend"),u_fog_temporal_offset:Ae}})(this,U,O,q))}}setTileLoadedFlag(f){this.tileLoaded=f}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const f=this.context.gl,w=f.createTexture();return f.bindTexture(f.TEXTURE_2D,w),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,0,0,f.drawingBufferWidth,f.drawingBufferHeight,0),w}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const f=this.style&&this.style.fog;return!!f&&0!==f.getOpacity(this.transform.pitch)}}class _h{constructor(f=0,w=0,O=0,U=0){if(isNaN(f)||f<0||isNaN(w)||w<0||isNaN(O)||O<0||isNaN(U)||U<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=w,this.left=O,this.right=U}interpolate(f,w,O){return null!=w.top&&null!=f.top&&(this.top=k.number(f.top,w.top,O)),null!=w.bottom&&null!=f.bottom&&(this.bottom=k.number(f.bottom,w.bottom,O)),null!=w.left&&null!=f.left&&(this.left=k.number(f.left,w.left,O)),null!=w.right&&null!=f.right&&(this.right=k.number(f.right,w.right,O)),this}getCenter(f,w){const O=k.clamp((this.left+f-this.right)/2,0,f),U=k.clamp((this.top+w-this.bottom)/2,0,w);return new k.pointGeometry(O,U)}equals(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right}clone(){return new _h(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ds(P,f){return[P[4*f],P[4*f+1],P[4*f+2],P[4*f+3]]}function ja(P,f,w){P[4*f+0]=w[0],P[4*f+1]=w[1],P[4*f+2]=w[2],P[4*f+3]=w[3]}function Jd(P,f){const w=Ds(P,3);k.fromQuat(P,f),ja(P,3,w)}function Ho(P,f){ja(P,3,[f[0],f[1],f[2],1])}function aa(P,f){const w=k.identity$1([]);return k.rotateZ$1(w,w,-f),k.rotateX$1(w,w,-P),w}function Lr(P,f){const w=[P[0],P[1],0],O=[f[0],f[1],0];if(k.length(w)>=1e-15){const ee=k.normalize([],w);k.scale(O,ee,k.dot(O,ee)),f[0]=O[0],f[1]=O[1]}const U=k.cross([],f,P);if(k.len(U)<1e-15)return null;const q=Math.atan2(-U[1],U[0]);return aa(Math.atan2(Math.sqrt(P[0]*P[0]+P[1]*P[1]),-P[2]),q)}class zc{constructor(f,w){this.position=f,this.orientation=w}get position(){return this._position}set position(f){this._position=this._renderWorldCopies?function(w){if(!w)return;const O=Array.isArray(w)?new k.MercatorCoordinate(w[0],w[1],w[2]):w;return O.x=k.wrap(O.x,0,1),O}(f):f}lookAtPoint(f,w){if(this.orientation=null,!this.position)return;const O=this._elevation?this._elevation.getAtPointOrZero(k.MercatorCoordinate.fromLngLat(f)):0,U=this.position,q=k.MercatorCoordinate.fromLngLat(f,O),ee=[q.x-U.x,q.y-U.y,q.z-U.z];w||(w=[0,0,1]),w[2]=Math.abs(w[2]),this.orientation=Lr(ee,w)}setPitchBearing(f,w){this.orientation=aa(k.degToRad(f),k.degToRad(-w))}}class Vl{constructor(f,w){this._transform=k.identity([]),this._orientation=k.identity$1([]),w&&(this._orientation=w,Jd(this._transform,this._orientation)),f&&Ho(this._transform,f)}get mercatorPosition(){const f=this.position;return new k.MercatorCoordinate(f[0],f[1],f[2])}get position(){const f=Ds(this._transform,3);return[f[0],f[1],f[2]]}set position(f){Ho(this._transform,f)}get orientation(){return this._orientation}set orientation(f){this._orientation=f,Jd(this._transform,this._orientation)}getPitchBearing(){const f=this.forward(),w=this.right();return{bearing:Math.atan2(-w[1],w[0]),pitch:Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2])}}setPitchBearing(f,w){this._orientation=aa(f,w),Jd(this._transform,this._orientation)}forward(){const f=Ds(this._transform,2);return[-f[0],-f[1],-f[2]]}up(){const f=Ds(this._transform,1);return[-f[0],-f[1],-f[2]]}right(){const f=Ds(this._transform,0);return[f[0],f[1],f[2]]}getCameraToWorld(f,w){const O=new Float64Array(16);return k.invert(O,this.getWorldToCamera(f,w)),O}getWorldToCameraPosition(f,w,O){const U=this.position;k.scale(U,U,-f);const q=new Float64Array(16);return k.fromScaling(q,[O,O,O]),k.translate(q,q,U),q[10]*=w,q}getWorldToCamera(f,w){const O=new Float64Array(16),U=new Float64Array(4),q=this.position;return k.conjugate(U,this._orientation),k.scale(q,q,-f),k.fromQuat(O,U),k.translate(O,O,q),O[1]*=-1,O[5]*=-1,O[9]*=-1,O[13]*=-1,O[8]*=w,O[9]*=w,O[10]*=w,O[11]*=w,O}getCameraToClipPerspective(f,w,O,U){const q=new Float64Array(16);return k.perspective(q,f,w,O,U),q}getDistanceToElevation(f){const w=0===f?0:k.mercatorZfromAltitude(f,this.position[1]),O=this.forward();return(w-this.position[2])/O[2]}clone(){return new Vl([...this.position],[...this.orientation])}}class yh{constructor(f,w,O,U,q){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===q||q,this._minZoom=f||0,this._maxZoom=w||22,this._minPitch=null==O?0:O,this._maxPitch=null==U?60:U,this.setMaxBounds(),this.width=0,this.height=0,this._center=new k.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _h,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new Vl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const f=new yh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f._elevation=this._elevation,f._centerAltitude=this._centerAltitude,f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f.cameraElevationReference=this.cameraElevationReference,f._center=this._center,f._setZoom(this.zoom),f._cameraZoom=this._cameraZoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._averageElevation=this._averageElevation,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._camera=this._camera.clone(),f._calcMatrices(),f.freezeTileCoverage=this.freezeTileCoverage,f}get elevation(){return this._elevation}set elevation(f){this._elevation!==f&&(this._elevation=f,f?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(f){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),f&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))}get maxZoom(){return this._maxZoom}set maxZoom(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))}get minPitch(){return this._minPitch}set minPitch(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))}get maxPitch(){return this._maxPitch}set maxPitch(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(f){void 0===f?f=!0:null===f&&(f=!1),this._renderWorldCopies=f}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const f=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(f))}get pixelsPerMeter(){return k.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return k.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new k.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(f){const w=-k.wrap(f,-180,180)*Math.PI/180;var O,U,q,ee,se,ue,me,Ce,Ae,Pe;this.angle!==w&&(this._unmodified=!1,this.angle=w,this._calcMatrices(),this.rotationMatrix=(O=new k.ARRAY_TYPE(4),k.ARRAY_TYPE!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O),U=this.rotationMatrix,ee=this.angle,se=(q=this.rotationMatrix)[0],ue=q[1],me=q[2],Ce=q[3],Ae=Math.sin(ee),Pe=Math.cos(ee),U[0]=se*Pe+me*Ae,U[1]=ue*Pe+Ce*Ae,U[2]=se*-Ae+me*Pe,U[3]=ue*-Ae+Ce*Pe)}get pitch(){return this._pitch/Math.PI*180}set pitch(f){const w=k.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==w&&(this._unmodified=!1,this._pitch=w,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(f){this._averageElevation=f,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(f){const w=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==w&&(this._unmodified=!1,this._setZoom(w),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(f){this._zoom=f,this.scale=this.zoomScale(f),this.tileZoom=Math.floor(f),this.zoomFraction=f-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const f=this._elevation.getAtPointOrZero(k.MercatorCoordinate.fromLngLat(this.center),-1);return-1===f?(this._cameraZoom=null,!1):(this._centerAltitude=f,!0)}_updateCameraOnTerrain(){const f=this.cameraToCenterDistance/this.worldSize,w=k.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(w+f)}sampleAverageElevation(){if(!this._elevation)return 0;const f=this._elevation,w=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],O=this.horizonLineFromTop();let U=0,q=0;for(let ee=0;ee<w.length;ee++){const se=new k.pointGeometry(w[ee][0]*this.width,O+w[ee][1]*(this.height-O)),ue=f.pointCoordinate(se);if(!ue)continue;const me=1/Math.hypot(ue[0]-this._camera.position[0],ue[1]-this._camera.position[1]);U+=ue[3]*me,q+=me}return 0===q?NaN:U/q}get center(){return this._center}set center(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const f=this._cameraZoom,w=this._elevation.getAtPointOrZero(k.MercatorCoordinate.fromLngLat(this.center)),O=k.mercatorZfromAltitude(w,this.center.lat),U=this._mercatorZfromZoom(f),q=this._mercatorZfromZoom(this._maxZoom),ee=Math.max(U-O,q);this._setZoom(this._zoomFromMercatorZ(ee))}get padding(){return this._edgeInsets.toJSON()}set padding(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())}computeZoomRelativeTo(f){const w=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,f.toAltitude()));let O;O=f.z<this._camera.position[2]?[w.x,w.y,w.z]:[f.x,f.y,f.z];const U=k.length(k.sub([],this._camera.position,O));return k.clamp(this._zoomFromMercatorZ(U),this._minZoom,this._maxZoom)}setFreeCameraOptions(f){if(!this.height||!f.position&&!f.orientation)return;this._updateCameraState();let w=!1;if(f.orientation&&!k.exactEquals(f.orientation,this._camera.orientation)&&(w=this._setCameraOrientation(f.orientation)),f.position){const O=[f.position.x,f.position.y,f.position.z];k.exactEquals$1(O,this._camera.position)||(this._setCameraPosition(O),w=!0)}w&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const f=this._camera.position,w=new zc;return w.position=new k.MercatorCoordinate(f[0],f[1],f[2]),w.orientation=this._camera.orientation,w._elevation=this.elevation,w._renderWorldCopies=this._renderWorldCopies,w}_setCameraOrientation(f){if(!k.length$1(f))return!1;k.normalize$1(f,f);const w=k.transformQuat([],[0,0,-1],f),O=k.transformQuat([],[0,-1,0],f);if(O[2]<0)return!1;const U=Lr(w,O);return!!U&&(this._camera.orientation=U,!0)}_setCameraPosition(f){const w=this.zoomScale(this.minZoom)*this.tileSize,O=this.zoomScale(this.maxZoom)*this.tileSize,U=this.cameraToCenterDistance;f[2]=k.clamp(f[2],U/O,U/w),this._camera.position=f}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(f){return this._edgeInsets.equals(f)}interpolatePadding(f,w,O){this._unmodified=!1,this._edgeInsets.interpolate(f,w,O),this._constrain(),this._calcMatrices()}coveringZoomLevel(f){const w=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,w)}getVisibleUnwrappedCoordinates(f){const w=[new k.UnwrappedTileID(0,f)];if(this._renderWorldCopies){const O=this.pointCoordinate(new k.pointGeometry(0,0)),U=this.pointCoordinate(new k.pointGeometry(this.width,0)),q=this.pointCoordinate(new k.pointGeometry(this.width,this.height)),ee=this.pointCoordinate(new k.pointGeometry(0,this.height)),se=Math.floor(Math.min(O.x,U.x,q.x,ee.x)),ue=Math.floor(Math.max(O.x,U.x,q.x,ee.x)),me=1;for(let Ce=se-me;Ce<=ue+me;Ce++)0!==Ce&&w.push(new k.UnwrappedTileID(Ce,f))}return w}coveringTiles(f){let w=this.coveringZoomLevel(f);const O=w,U=this.elevation&&!f.isTerrainDEM;if(void 0!==f.minzoom&&w<f.minzoom)return[];void 0!==f.maxzoom&&w>f.maxzoom&&(w=f.maxzoom);const q=k.MercatorCoordinate.fromLngLat(this.center),ee=1<<w,se=[ee*q.x,ee*q.y,0],ue=On.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w),me=this.pointCoordinate(this.getCameraPoint()),Ce=ee*k.mercatorZfromAltitude(1,this.center.lat),Ae=this._camera.position[2]/k.mercatorZfromAltitude(1,this.center.lat),Pe=[ee*me.x,ee*me.y,Ae],Ne=this.cameraToCenterDistance/f.tileSize*(f.roundZoom?1:.502),$e=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?w:0,et=f.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,mt=f.isTerrainDEM?-et:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ue=ut=>({aabb:new dn([ut*ee,0,mt],[(ut+1)*ee,ee,et]),zoom:0,x:0,y:0,wrap:ut,fullyVisible:!1}),tt=[],ot=[],vt=w,rt=f.reparseOverscaled?O:w,ht=ut=>{if(!this._elevation||!ut.tileID)return;const En=this._elevation.getMinMaxForTile(ut.tileID),bn=ut.aabb;En?(bn.min[2]=En.min,bn.max[2]=En.max,bn.center[2]=(bn.min[2]+bn.max[2])/2):(ut.shouldSplit=un(ut),ut.shouldSplit||(bn.min[2]=bn.max[2]=bn.center[2]=this._centerAltitude))},en=ut=>ut*ut,sn=en((Ae-this._centerAltitude)*Ce),un=ut=>{if(ut.zoom<$e)return!0;if(ut.zoom===vt)return!1;if(null!=ut.shouldSplit)return ut.shouldSplit;const En=ut.aabb.distanceX(Pe),bn=ut.aabb.distanceY(Pe);let Zn=sn;U&&(Zn=en(ut.aabb.distanceZ(Pe)*Ce));const kn=En*En+bn*bn+Zn;return kn<en((1<<vt-ut.zoom)*Ne*((An,Ti)=>{if(Ti*en(.707)<An)return 1;const ci=Math.sqrt(Ti/An);return ci/(1.4144271570014144+(Math.pow(1.1,ci-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Zn,sn),kn))};if(this._renderWorldCopies)for(let ut=1;ut<=3;ut++)tt.push(Ue(-ut)),tt.push(Ue(ut));for(tt.push(Ue(0));tt.length>0;){const ut=tt.pop(),En=ut.x,bn=ut.y;let Zn=ut.fullyVisible;if(!Zn){const kn=ut.aabb.intersects(ue);if(0===kn)continue;Zn=2===kn}if(ut.zoom!==vt&&un(ut))for(let kn=0;kn<4;kn++){const An=(En<<1)+kn%2,Ti=(bn<<1)+(kn>>1),ci={aabb:ut.aabb.quadrant(kn),zoom:ut.zoom+1,x:An,y:Ti,wrap:ut.wrap,fullyVisible:Zn,tileID:void 0,shouldSplit:void 0};U&&(ci.tileID=new k.OverscaledTileID(ut.zoom+1===vt?rt:ut.zoom+1,ut.wrap,ut.zoom+1,An,Ti),ht(ci)),tt.push(ci)}else{const kn=ut.zoom===vt?rt:ut.zoom;if(f.minzoom&&f.minzoom>kn)continue;const An=se[0]-(.5+En+(ut.wrap<<ut.zoom))*(1<<w-ut.zoom),Ti=se[1]-.5-bn,ci=ut.tileID?ut.tileID:new k.OverscaledTileID(kn,ut.wrap,ut.zoom,En,bn);ot.push({tileID:ci,distanceSq:An*An+Ti*Ti})}}if(this.fogCullDistSq){const ut=this.fogCullDistSq;ot.splice(0,ot.length,...ot.filter(En=>{const bn=[0,0,0,1],Zn=[k.EXTENT,k.EXTENT,0,1],kn=this.calculateFogTileMatrix(En.tileID.toUnwrapped());k.transformMat4(bn,bn,kn),k.transformMat4(Zn,Zn,kn);const An=k.getAABBPointSquareDist(bn,Zn);if(0===An)return!0;let Ti=!1;const ci=this.horizonLineFromTop();if(An>ut&&0!==ci){const lr=this.calculateProjMatrix(En.tileID.toUnwrapped());let yr;U&&this._elevation&&(yr=this._elevation.getMinMaxForTile(En.tileID)),yr||(yr={min:mt,max:et});const Br=k.furthestTileCorner(this.bearing),zi=[Br[0]*k.EXTENT,Br[1]*k.EXTENT,yr.max];k.transformMat4$1(zi,zi,lr),Ti=(1-zi[1])*this.height*.5<ci}return An<ut||Ti}))}return ot.sort((ut,En)=>ut.distanceSq-En.distanceSq).map(ut=>ut.tileID)}resize(f,w){this.width=f,this.height=w,this.pixelsToGLUnits=[2/f,-2/w],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(f){return Math.pow(2,f)}scaleZoom(f){return Math.log(f)/Math.LN2}project(f){const w=k.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new k.pointGeometry(k.mercatorXfromLng(f.lng)*this.worldSize,k.mercatorYfromLat(w)*this.worldSize)}unproject(f){return new k.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(f,w){const O=this.pointCoordinate(w),U=this.pointCoordinate(this.centerPoint),q=this.locationCoordinate(f),ee=new k.MercatorCoordinate(q.x-(O.x-U.x),q.y-(O.y-U.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(f){this.center=this.coordinateLocation(f),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(f){return this._coordinatePoint(this.locationCoordinate(f),!1)}locationPoint3D(f){return this._coordinatePoint(this.locationCoordinate(f),!0)}pointLocation(f){return this.coordinateLocation(this.pointCoordinate(f))}pointLocation3D(f){return this.coordinateLocation(this.pointCoordinate3D(f))}locationCoordinate(f){return k.MercatorCoordinate.fromLngLat(f)}coordinateLocation(f){return f.toLngLat()}pointRayIntersection(f,w){const O=null!=w?w:this._centerAltitude,U=[f.x,f.y,0,1],q=[f.x,f.y,1,1];k.transformMat4(U,U,this.pixelMatrixInverse),k.transformMat4(q,q,this.pixelMatrixInverse);const ee=q[3];k.scale$2(U,U,1/U[3]),k.scale$2(q,q,1/ee);const se=U[2],ue=q[2];return{p0:U,p1:q,t:se===ue?0:(O-se)/(ue-se)}}screenPointToMercatorRay(f){const w=[f.x,f.y,0,1],O=[f.x,f.y,1,1];return k.transformMat4(w,w,this.pixelMatrixInverse),k.transformMat4(O,O,this.pixelMatrixInverse),k.scale$2(w,w,1/w[3]),k.scale$2(O,O,1/O[3]),w[2]=k.mercatorZfromAltitude(w[2],this._center.lat)*this.worldSize,O[2]=k.mercatorZfromAltitude(O[2],this._center.lat)*this.worldSize,k.scale$2(w,w,1/this.worldSize),k.scale$2(O,O,1/this.worldSize),new Qe([w[0],w[1],w[2]],k.normalize([],k.sub([],O,w)))}rayIntersectionCoordinate(f){const{p0:w,p1:O,t:U}=f,q=k.mercatorZfromAltitude(w[2],this._center.lat),ee=k.mercatorZfromAltitude(O[2],this._center.lat);return new k.MercatorCoordinate(k.number(w[0],O[0],U)/this.worldSize,k.number(w[1],O[1],U)/this.worldSize,k.number(q,ee,U))}pointCoordinate(f){const w=this.horizonLineFromTop(!1),O=new k.pointGeometry(f.x,Math.max(w,f.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(O))}pointCoordinate3D(f){if(!this.elevation)return this.pointCoordinate(f);const w=this.elevation;let O=this.elevation.pointCoordinate(f);if(O)return new k.MercatorCoordinate(O[0],O[1],O[2]);let U=0,q=this.horizonLineFromTop();if(f.y>q)return this.pointCoordinate(f);const ee=.02*q,se=f.clone();for(let ue=0;ue<10&&q-U>ee;ue++){se.y=k.number(U,q,.66);const me=w.pointCoordinate(se);me?(q=se.y,O=me):U=se.y}return O?new k.MercatorCoordinate(O[0],O[1],O[2]):this.pointCoordinate(f)}isPointAboveHorizon(f){if(this.elevation)return!this.elevation.pointCoordinate(f);{const w=this.horizonLineFromTop();return f.y<w}}_coordinatePoint(f,w){const O=w&&this.elevation?this.elevation.getAtPointOrZero(f,this._centerAltitude):this._centerAltitude,U=[f.x*this.worldSize,f.y*this.worldSize,O+f.toAltitude(),1];return k.transformMat4(U,U,this.pixelMatrix),U[3]>0?new k.pointGeometry(U[0]/U[3],U[1]/U[3]):new k.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new k.LngLatBounds).extend(this.pointLocation(new k.pointGeometry(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new k.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new k.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new k.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}_getBounds3D(){const f=this.elevation,w=f.visibleDemTiles.reduce((U,q)=>{if(q.dem){const ee=q.dem.tree;U.min=Math.min(U.min,ee.minimums[0]),U.max=Math.max(U.max,ee.maximums[0])}return U},{min:Number.MAX_VALUE,max:0});w.min*=f.exaggeration(),w.max*=f.exaggeration();const O=this.horizonLineFromTop();return[new k.pointGeometry(0,O),new k.pointGeometry(this.width,O),new k.pointGeometry(this.width,this.height),new k.pointGeometry(0,this.height)].reduce((U,q)=>U.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(q,w.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(q,w.max)))),new k.LngLatBounds)}horizonLineFromTop(f=!0){const w=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,O=this.height/2-.97*w;return f?Math.max(0,O):O}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new k.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(f,w){const O=f.canonical,U=w/this.zoomScale(O.z),q=O.x+Math.pow(2,O.z)*f.wrap,ee=k.identity(new Float64Array(16));return k.translate(ee,ee,[q*U,O.y*U,0]),k.scale$1(ee,ee,[U/k.EXTENT,U/k.EXTENT,1]),ee}calculateFogTileMatrix(f){const w=f.key,O=this._fogTileMatrixCache;if(O[w])return O[w];const U=this.calculatePosMatrix(f,this.cameraWorldSize);return k.multiply(U,this.worldToFogMatrix,U),O[w]=new Float32Array(U),O[w]}calculateProjMatrix(f,w=!1){const O=f.key,U=w?this._alignedProjMatrixCache:this._projMatrixCache;if(U[O])return U[O];const q=this.calculatePosMatrix(f,this.worldSize);return k.multiply(q,w?this.alignedProjMatrix:this.projMatrix,q),U[O]=new Float32Array(q),U[O]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const f=this._elevation;this._updateCameraState();const w=this._camera.position,O=this._camera.forward();if(w[2]<=0||O[2]>=0)return;const U=k.mercatorZfromAltitude(1,this._center.lat);w[2]/=U,O[2]/=U,k.normalize(O,O);const q=f.raycast(w,O,f.exaggeration());if(q){const ee=k.scaleAndAdd([],w,O,q),se=new k.MercatorCoordinate(ee[0],ee[1],k.mercatorZfromAltitude(ee[2],k.latFromMercatorY(ee[1]))),ue=this._camera.position,me=se.z+k.length([se.x-ue[0],se.y-ue[1],se.z-ue[2]]);this._cameraZoom=this._zoomFromMercatorZ(me),this._centerAltitude=se.toAltitude(),this._center=se.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const f=this._elevation;this._updateCameraState();const w=f.getAtPointOrZero(this._camera.mercatorPosition),O=this._minimumHeightOverTerrain()*Math.cos(k.degToRad(this._maxPitch)),U=k.mercatorZfromAltitude(w,this._center.lat),q=this._camera.position[2]-U;if(q<O){const ee=k.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),se=this._camera.mercatorPosition,ue=[ee.x-se.x,ee.y-se.y,ee.z-se.z],me=k.length(ue);ue[2]-=O-q;const Ce=k.length(ue);if(0===Ce)return;k.scale(ue,ue,me/Ce),this._camera.position=[ee.x-ue[0],ee.y-ue[1],ee.z-ue[2]],this._camera.orientation=Lr(ue,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let f,w,O,U,q=-90,ee=90,se=-180,ue=180;const me=this.size,Ce=this._unmodified;if(this.latRange){const Ne=this.latRange;q=k.mercatorYfromLat(Ne[1])*this.worldSize,ee=k.mercatorYfromLat(Ne[0])*this.worldSize,f=ee-q<me.y?me.y/(ee-q):0}if(this.lngRange){const Ne=this.lngRange;se=k.mercatorXfromLng(Ne[0])*this.worldSize,ue=k.mercatorXfromLng(Ne[1])*this.worldSize,w=ue-se<me.x?me.x/(ue-se):0}const Ae=this.point,Pe=Math.max(w||0,f||0);if(Pe)return this.center=this.unproject(new k.pointGeometry(w?(ue+se)/2:Ae.x,f?(ee+q)/2:Ae.y)),this.zoom+=this.scaleZoom(Pe),this._unmodified=Ce,void(this._constraining=!1);if(this.latRange){const Ne=Ae.y,$e=me.y/2;Ne-$e<q&&(U=q+$e),Ne+$e>ee&&(U=ee-$e)}if(this.lngRange){const Ne=Ae.x,$e=me.x/2;Ne-$e<se&&(O=se+$e),Ne+$e>ue&&(O=ue-$e)}void 0===O&&void 0===U||(this.center=this.unproject(new k.pointGeometry(void 0!==O?O:Ae.x,void 0!==U?U:Ae.y))),this._constrainCameraAltitude(),this._unmodified=Ce,this._constraining=!1}_minZoomForBounds(){const f=(U,q)=>Math.log2(U/(this.tileSize*Math.abs(q[1]-q[0])));let w=0;if(this.latRange){const U=this.latRange;w=f(this.height,[k.mercatorYfromLat(U[0]),k.mercatorYfromLat(U[1])])}let O=0;if(this.lngRange){const U=this.lngRange;O=f(this.width,[k.mercatorXfromLng(U[0]),k.mercatorXfromLng(U[1])])}return Math.max(w,O)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const f=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const w=this.pixelsPerMeter;this._updateCameraState();const O=Math.PI/2+this._pitch,U=this.fovAboveCenter,q=this.elevation?this.elevation.getMinElevationBelowMSL()*w:0,ee=(this._camera.position[2]*this.worldSize-q)/Math.cos(this._pitch),se=Math.sin(U)*ee/Math.sin(k.clamp(Math.PI-O-U,.01,Math.PI-.01)),ue=this.point,me=ue.x,Ce=ue.y,Ae=Math.cos(Math.PI/2-this._pitch)*se+ee,Pe=Math.min(1.01*Ae,ee*(1/this._horizonShift)),Ne=this.height/50,$e=this._camera.getWorldToCamera(this.worldSize,w),et=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,Ne,Pe);et[8]=2*-f.x/this.width,et[9]=2*f.y/this.height;let mt=k.mul$1([],et,$e);this.mercatorMatrix=k.scale$1([],mt,[this.worldSize,this.worldSize,this.worldSize/w]),this.projMatrix=mt,this.invProjMatrix=k.invert(new Float64Array(16),this.projMatrix);const Ue=new Float32Array(16);k.identity(Ue),k.scale$1(Ue,Ue,[1,-1,1]),k.rotateX(Ue,Ue,this._pitch),k.rotateZ(Ue,Ue,this.angle);const tt=k.perspective(new Float32Array(16),this._fov,this.width/this.height,Ne,Pe),ot=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;tt[8]=2*-f.x/this.width,tt[9]=2*(f.y+ot)/this.height,this.skyboxMatrix=k.multiply(Ue,tt,Ue);const vt=this.width%2/2,rt=this.height%2/2,ht=Math.cos(this.angle),en=Math.sin(this.angle),sn=me-Math.round(me)+ht*vt+en*rt,un=Ce-Math.round(Ce)+ht*rt+en*vt,ut=new Float64Array(mt);if(k.translate(ut,ut,[sn>.5?sn-1:sn,un>.5?un-1:un,0]),this.alignedProjMatrix=ut,mt=k.create$1(),k.scale$1(mt,mt,[this.width/2,-this.height/2,1]),k.translate(mt,mt,[1,-1,0]),this.labelPlaneMatrix=mt,mt=k.create$1(),k.scale$1(mt,mt,[1,-1,1]),k.translate(mt,mt,[-1,-1,0]),k.scale$1(mt,mt,[2/this.width,2/this.height,1]),this.glCoordMatrix=mt,this.pixelMatrix=k.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),mt=k.invert(new Float64Array(16),this.pixelMatrix),!mt)throw new Error("failed to invert matrix");this.pixelMatrixInverse=mt,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const f=this.cameraWorldSize,w=this.cameraPixelsPerMeter,O=this._camera.position,U=1/this.height,q=[f,f,w];k.scale(q,q,U),k.scale(O,O,-1),k.multiply$1(O,O,q);const ee=k.create$1();k.translate(ee,ee,O),k.scale$1(ee,ee,q),this.mercatorFogMatrix=ee,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(f,w,U)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const f=this._camera.forward(),w=this.cameraToCenterDistance,O=this.point,U=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-k.mercatorZfromAltitude(this._centerAltitude,this.center.lat),q=this.cameraToCenterDistance/U;this._camera.position=[O.x/this.worldSize-f[0]*w/q,O.y/this.worldSize-f[1]*w/q,k.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-f[2]*w/q]}_translateCameraConstrained(f){const w=this._maxCameraBoundsDistance()*Math.cos(this._pitch),O=f[2];let U=1;O>0&&(U=Math.min((w-this._camera.position[2])/O,1)),this._camera.position=k.scaleAndAdd([],this._camera.position,f,U),this._updateStateFromCamera()}_updateStateFromCamera(){const f=this._camera.position,w=this._camera.forward(),{pitch:O,bearing:U}=this._camera.getPitchBearing(),q=k.mercatorZfromAltitude(this._centerAltitude,this.center.lat),ee=this._mercatorZfromZoom(this._maxZoom)*Math.cos(k.degToRad(this._maxPitch)),se=Math.max((f[2]-q)/Math.cos(O),ee),ue=this._zoomFromMercatorZ(se);k.scaleAndAdd(f,f,w,se),this._pitch=k.clamp(O,k.degToRad(this.minPitch),k.degToRad(this.maxPitch)),this.angle=k.wrap(U,-Math.PI,Math.PI),this._setZoom(k.clamp(ue,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new k.MercatorCoordinate(f[0],f[1],f[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(f){return Math.pow(2,f)*this.tileSize}_mercatorZfromZoom(f){return this.cameraToCenterDistance/this._worldSizeFromZoom(f)}_minimumHeightOverTerrain(){const f=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(f)}_zoomFromMercatorZ(f){return this.scaleZoom(this.cameraToCenterDistance/(f*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(f,w){const O=Math.min(f.x,w.x),U=Math.max(f.x,w.x),q=Math.min(f.y,w.y),ee=Math.max(f.y,w.y),se=[new k.pointGeometry(O,q),new k.pointGeometry(U,ee),new k.pointGeometry(O,ee),new k.pointGeometry(U,q)],ue=this._renderWorldCopies?-3:0,me=this._renderWorldCopies?4:1;for(const Ce of se){const Ae=this.pointRayIntersection(Ce);if(Ae.t<0)return!0;const Pe=this.rayIntersectionCoordinate(Ae);if(Pe.x<ue||Pe.y<0||Pe.x>me||Pe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+k.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new k.pointGeometry(0,0),new k.pointGeometry(this.width,this.height))}zoomDeltaToMovement(f,w){const O=k.length(k.sub([],this._camera.position,f)),U=this._zoomFromMercatorZ(O)+w;return O-this._mercatorZfromZoom(U)}getCameraPoint(){const f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new k.pointGeometry(0,f))}}function sd(P,f){let w=!1,O=null;const U=()=>{O=null,w&&(P(),O=setTimeout(U,f),w=!1)};return()=>(w=!0,O||U(),O)}class Da{constructor(f){this._hashName=f&&encodeURIComponent(f),k.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=sd(this._updateHashUnthrottled.bind(this),300)}addTo(f){return this._map=f,k.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return k.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(f){const w=this._map.getCenter(),O=Math.round(100*this._map.getZoom())/100,U=Math.ceil((O*Math.LN2+Math.log(512/360/.5))/Math.LN10),q=Math.pow(10,U),ee=Math.round(w.lng*q)/q,se=Math.round(w.lat*q)/q,ue=this._map.getBearing(),me=this._map.getPitch();let Ce="";if(Ce+=f?`/${ee}/${se}/${O}`:`${O}/${se}/${ee}`,(ue||me)&&(Ce+="/"+Math.round(10*ue)/10),me&&(Ce+=`/${Math.round(me)}`),this._hashName){const Ae=this._hashName;let Pe=!1;const Ne=k.window.location.hash.slice(1).split("&").map($e=>{const et=$e.split("=")[0];return et===Ae?(Pe=!0,`${et}=${Ce}`):$e}).filter($e=>$e);return Pe||Ne.push(`${Ae}=${Ce}`),`#${Ne.join("&")}`}return`#${Ce}`}_getCurrentHash(){const f=k.window.location.hash.replace("#","");if(this._hashName){let w;return f.split("&").map(O=>O.split("=")).forEach(O=>{O[0]===this._hashName&&(w=O)}),(w&&w[1]||"").split("/")}return f.split("/")}_onHashChange(){const f=this._getCurrentHash();if(f.length>=3&&!f.some(w=>isNaN(w))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:w,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const f=k.window.location.href.replace(/(#.+)?$/,this.getHashString());k.window.history.replaceState(k.window.history.state,null,f)}}const fs={linearity:.3,easing:k.bezier(0,0,.3,1)},bl=k.extend({deceleration:2500,maxSpeed:1400},fs),Ul=k.extend({deceleration:20,maxSpeed:1400},fs),vh=k.extend({deceleration:1e3,maxSpeed:360},fs),bh=k.extend({deceleration:1e3,maxSpeed:90},fs);class xl{constructor(f){this._map=f,this.clear()}clear(){this._inertiaBuffer=[]}record(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:k.exported.now(),settings:f})}_drainInertiaBuffer(){const f=this._inertiaBuffer,w=k.exported.now();for(;f.length>0&&w-f[0].time>160;)f.shift()}_onMoveEnd(f){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const w={zoom:0,bearing:0,pitch:0,pan:new k.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:q}of this._inertiaBuffer)w.zoom+=q.zoomDelta||0,w.bearing+=q.bearingDelta||0,w.pitch+=q.pitchDelta||0,q.panDelta&&w.pan._add(q.panDelta),q.around&&(w.around=q.around),q.pinchAround&&(w.pinchAround=q.pinchAround);const O=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,U={};if(w.pan.mag()){const q=os(w.pan.mag(),O,k.extend({},bl,f||{}));U.offset=w.pan.mult(q.amount/w.pan.mag()),U.center=this._map.transform.center,ku(U,q)}if(w.zoom){const q=os(w.zoom,O,Ul);U.zoom=this._map.transform.zoom+q.amount,ku(U,q)}if(w.bearing){const q=os(w.bearing,O,vh);U.bearing=this._map.transform.bearing+k.clamp(q.amount,-179,179),ku(U,q)}if(w.pitch){const q=os(w.pitch,O,bh);U.pitch=this._map.transform.pitch+q.amount,ku(U,q)}if(U.zoom||U.bearing){const q=void 0===w.pinchAround?w.around:w.pinchAround;U.around=q?this._map.unproject(q):this._map.getCenter()}return this.clear(),k.extend(U,{noMoveStart:!0})}}function ku(P,f){(!P.duration||P.duration<f.duration)&&(P.duration=f.duration,P.easing=f.easing)}function os(P,f,w){const{maxSpeed:O,linearity:U,deceleration:q}=w,ee=k.clamp(P*U/(f/1e3),-O,O),se=Math.abs(ee)/(q*U);return{easing:w.easing,duration:1e3*se,amount:ee*(se/2)}}class ms extends k.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,w,O,U={}){const q=je.mousePos(w.getCanvasContainer(),O),ee=w.unproject(q);super(f,k.extend({point:q,lngLat:ee,originalEvent:O},U)),this._defaultPrevented=!1,this.target=w}}class hc extends k.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,w,O){const U="touchend"===f?O.changedTouches:O.touches,q=je.touchPos(w.getCanvasContainer(),U),ee=q.map(ue=>w.unproject(ue)),se=q.reduce((ue,me,Ce,Ae)=>ue.add(me.div(Ae.length)),new k.pointGeometry(0,0));super(f,{points:q,point:se,lngLats:ee,lngLat:w.unproject(se),originalEvent:O}),this._defaultPrevented=!1}}class Yp extends k.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,w,O){super(f,{originalEvent:O}),this._defaultPrevented=!1}}class dc{constructor(f,w){this._map=f,this._clickTolerance=w.clickTolerance}reset(){delete this._mousedownPos}wheel(f){return this._firePreventable(new Yp(f.type,this._map,f))}mousedown(f,w){return this._mousedownPos=w,this._firePreventable(new ms(f.type,this._map,f))}mouseup(f){this._map.fire(new ms(f.type,this._map,f))}click(f,w){this._mousedownPos&&this._mousedownPos.dist(w)>=this._clickTolerance||this._map.fire(new ms(f.type,this._map,f))}dblclick(f){return this._firePreventable(new ms(f.type,this._map,f))}mouseover(f){this._map.fire(new ms(f.type,this._map,f))}mouseout(f){this._map.fire(new ms(f.type,this._map,f))}touchstart(f){return this._firePreventable(new hc(f.type,this._map,f))}touchmove(f){this._map.fire(new hc(f.type,this._map,f))}touchend(f){this._map.fire(new hc(f.type,this._map,f))}touchcancel(f){this._map.fire(new hc(f.type,this._map,f))}_firePreventable(f){if(this._map.fire(f),f.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vc{constructor(f){this._map=f}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(f){this._map.fire(new ms(f.type,this._map,f))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ms("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new ms(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kd{constructor(f,w){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=w.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(f,w){this.isEnabled()&&f.shiftKey&&0===f.button&&(je.disableDrag(),this._startPos=this._lastPos=w,this._active=!0)}mousemoveWindow(f,w){if(!this._active)return;const O=w;if(this._lastPos.equals(O)||!this._box&&O.dist(this._startPos)<this._clickTolerance)return;const U=this._startPos;this._lastPos=O,this._box||(this._box=je.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));const q=Math.min(U.x,O.x),ee=Math.max(U.x,O.x),se=Math.min(U.y,O.y),ue=Math.max(U.y,O.y);this._map._requestDomTask(()=>{this._box&&(je.setTransform(this._box,`translate(${q}px,${se}px)`),this._box.style.width=ee-q+"px",this._box.style.height=ue-se+"px")})}mouseupWindow(f,w){if(!this._active||0!==f.button)return;const O=this._startPos,U=w;if(this.reset(),je.suppressClick(),O.x!==U.x||O.y!==U.y)return this._map.fire(new k.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:q=>q.fitScreenCoordinates(O,U,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",f)}keydown(f){this._active&&27===f.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",f))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(je.remove(this._box),this._box=null),je.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(f,w){return this._map.fire(new k.Event(f,{originalEvent:w}))}}function qp(P,f){const w={};for(let O=0;O<P.length;O++)w[P[O].identifier]=f[O];return w}class ig{constructor(f){this.reset(),this.numTouches=f.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(f,w,O){(this.centroid||O.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=f.timeStamp),O.length===this.numTouches&&(this.centroid=function(U){const q=new k.pointGeometry(0,0);for(const ee of U)q._add(ee);return q.div(U.length)}(w),this.touches=qp(O,w)))}touchmove(f,w,O){if(this.aborted||!this.centroid)return;const U=qp(O,w);for(const q in this.touches){const ee=this.touches[q],se=U[q];(!se||se.dist(ee)>30)&&(this.aborted=!0)}}touchend(f,w,O){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),0===O.length){const U=!this.aborted&&this.centroid;if(this.reset(),U)return U}}}class Lf{constructor(f){this.singleTap=new ig(f),this.numTaps=f.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(f,w,O){this.singleTap.touchstart(f,w,O)}touchmove(f,w,O){this.singleTap.touchmove(f,w,O)}touchend(f,w,O){const U=this.singleTap.touchend(f,w,O);if(U){const q=f.timeStamp-this.lastTime<500,ee=!this.lastTap||this.lastTap.dist(U)<30;if(q&&ee||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=U,this.count===this.numTaps)return this.reset(),U}}}class ep{constructor(){this._zoomIn=new Lf({numTouches:1,numTaps:2}),this._zoomOut=new Lf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(f,w,O){this._zoomIn.touchstart(f,w,O),this._zoomOut.touchstart(f,w,O)}touchmove(f,w,O){this._zoomIn.touchmove(f,w,O),this._zoomOut.touchmove(f,w,O)}touchend(f,w,O){const U=this._zoomIn.touchend(f,w,O),q=this._zoomOut.touchend(f,w,O);return U?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()+1,around:ee.unproject(U)},{originalEvent:f})}):q?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()-1,around:ee.unproject(q)},{originalEvent:f})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Zp={0:1,2:2};class Qr{constructor(f){this.reset(),this._clickTolerance=f.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(f,w){return!1}_move(f,w){return{}}mousedown(f,w){if(this._lastPoint)return;const O=je.mouseButton(f);this._correctButton(f,O)&&(this._lastPoint=w,this._eventButton=O)}mousemoveWindow(f,w){const O=this._lastPoint;if(O)if(f.preventDefault(),function(U,q){const ee=Zp[q];return void 0===U.buttons||(U.buttons&ee)!==ee}(f,this._eventButton))this.reset();else if(this._moved||!(w.dist(O)<this._clickTolerance))return this._moved=!0,this._lastPoint=w,this._move(O,w)}mouseupWindow(f){this._lastPoint&&je.mouseButton(f)===this._eventButton&&(this._moved&&je.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ad extends Qr{mousedown(f,w){super.mousedown(f,w),this._lastPoint&&(this._active=!0)}_correctButton(f,w){return 0===w&&!f.ctrlKey}_move(f,w){return{around:w,panDelta:w.sub(f)}}}class wl extends Qr{_correctButton(f,w){return 0===w&&f.ctrlKey||2===w}_move(f,w){const O=.8*(w.x-f.x);if(O)return this._active=!0,{bearingDelta:O}}contextmenu(f){f.preventDefault()}}class xh extends Qr{_correctButton(f,w){return 0===w&&f.ctrlKey||2===w}_move(f,w){const O=-.5*(w.y-f.y);if(O)return this._active=!0,{pitchDelta:O}}contextmenu(f){f.preventDefault()}}class la{constructor(f){this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new k.pointGeometry(0,0)}touchstart(f,w,O){return this._calculateTransform(f,w,O)}touchmove(f,w,O){if(this._active&&!(O.length<this._minTouches))return f.preventDefault(),this._calculateTransform(f,w,O)}touchend(f,w,O){this._calculateTransform(f,w,O),this._active&&O.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(f,w,O){O.length>0&&(this._active=!0);const U=qp(O,w),q=new k.pointGeometry(0,0),ee=new k.pointGeometry(0,0);let se=0;for(const me in U){const Ce=U[me],Ae=this._touches[me];Ae&&(q._add(Ce),ee._add(Ce.sub(Ae)),se++,U[me]=Ce)}if(this._touches=U,se<this._minTouches||!ee.mag())return;const ue=ee.div(se);return this._sum._add(ue),this._sum.mag()<this._clickTolerance?void 0:{around:q.div(se),panDelta:ue}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Au{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(f){}_move(f,w,O){return{}}touchstart(f,w,O){this._firstTwoTouches||O.length<2||(this._firstTwoTouches=[O[0].identifier,O[1].identifier],this._start([w[0],w[1]]))}touchmove(f,w,O){if(!this._firstTwoTouches)return;f.preventDefault();const[U,q]=this._firstTwoTouches,ee=Uc(O,w,U),se=Uc(O,w,q);if(!ee||!se)return;const ue=this._aroundCenter?null:ee.add(se).div(2);return this._move([ee,se],ue,f)}touchend(f,w,O){if(!this._firstTwoTouches)return;const[U,q]=this._firstTwoTouches,ee=Uc(O,w,U),se=Uc(O,w,q);ee&&se||(this._active&&je.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(f){this._enabled=!0,this._aroundCenter=!!f&&"center"===f.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Uc(P,f,w){for(let O=0;O<P.length;O++)if(P[O].identifier===w)return f[O]}function Wp(P,f){return Math.log(P/f)/Math.LN2}class Du extends Au{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(f){this._startDistance=this._distance=f[0].dist(f[1])}_move(f,w){const O=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(Wp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wp(this._distance,O),pinchAround:w}}}function Nf(P,f){return 180*P.angleWith(f)/Math.PI}class tp extends Au{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])}_move(f,w){const O=this._vector;if(this._vector=f[0].sub(f[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nf(this._vector,O),pinchAround:w}}_isBelowThreshold(f){this._minDiameter=Math.min(this._minDiameter,f.mag());const w=25/(Math.PI*this._minDiameter)*360,O=Nf(f,this._startVector);return Math.abs(O)<w}}function Hl(P){return Math.abs(P.y)>Math.abs(P.x)}class pc extends Au{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(f){this._lastPoints=f,Hl(f[0].sub(f[1]))&&(this._valid=!1)}_move(f,w,O){const U=f[0].sub(this._lastPoints[0]),q=f[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(U,q,O.timeStamp),this._valid)return this._lastPoints=f,this._active=!0,{pitchDelta:(U.y+q.y)/2*-.5}}gestureBeginsVertically(f,w,O){if(void 0!==this._valid)return this._valid;const U=f.mag()>=2,q=w.mag()>=2;if(!U&&!q)return;if(!U||!q)return void 0===this._firstMove&&(this._firstMove=O),O-this._firstMove<100&&void 0;const ee=f.y>0==w.y>0;return Hl(f)&&Hl(w)&&ee}}const $p={panStep:100,bearingStep:15,pitchStep:10};class Iu{constructor(){const f=$p;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(f){if(f.altKey||f.ctrlKey||f.metaKey)return;let w=0,O=0,U=0,q=0,ee=0;switch(f.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:f.shiftKey?O=-1:(f.preventDefault(),q=-1);break;case 39:f.shiftKey?O=1:(f.preventDefault(),q=1);break;case 38:f.shiftKey?U=1:(f.preventDefault(),ee=-1);break;case 40:f.shiftKey?U=-1:(f.preventDefault(),ee=1);break;default:return}return this._rotationDisabled&&(O=0,U=0),{cameraAnimation:se=>{const ue=se.getZoom();se.easeTo({duration:300,easeId:"keyboardHandler",easing:Pu,zoom:w?Math.round(ue)+w*(f.shiftKey?2:1):ue,bearing:se.getBearing()+O*this._bearingStep,pitch:se.getPitch()+U*this._pitchStep,offset:[-q*this._panStep,-ee*this._panStep],center:se.getCenter()},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pu(P){return P*(2-P)}const qn=4.000244140625;class Xi{constructor(f,w){this._map=f,this._el=f.getCanvasContainer(),this._handler=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,k.bindAll(["_onTimeout"],this)}setZoomRate(f){this._defaultZoomRate=f}setWheelZoomRate(f){this._wheelZoomRate=f}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&"center"===f.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(f){if(!this.isEnabled())return;let w=f.deltaMode===k.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY;const O=k.exported.now(),U=O-(this._lastWheelEventTime||0);this._lastWheelEventTime=O,0!==w&&w%qn==0?this._type="wheel":0!==w&&Math.abs(w)<4?this._type="trackpad":U>400?(this._type=null,this._lastValue=w,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(U*w)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,w+=this._lastValue)),f.shiftKey&&w&&(w/=4),this._type&&(this._lastWheelEvent=f,this._delta-=w,this._active||this._start(f)),f.preventDefault()}_onTimeout(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)}_start(f){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const w=je.mousePos(this._el,f);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:w,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const f=this._map.transform,w=()=>f._terrainEnabled()?f.computeZoomRelativeTo(this._aroundCoord):f.zoom;if(0!==this._delta){const ue="wheel"===this._type&&Math.abs(this._delta)>qn?this._wheelZoomRate:this._defaultZoomRate;let me=2/(1+Math.exp(-Math.abs(this._delta*ue)));this._delta<0&&0!==me&&(me=1/me);const Ce=w(),Ae=Math.pow(2,Ce),Pe="number"==typeof this._targetZoom?f.zoomScale(this._targetZoom):Ae;this._targetZoom=Math.min(f.maxZoom,Math.max(f.minZoom,f.scaleZoom(Pe*me))),"wheel"===this._type&&(this._startZoom=w(),this._easing=this._smoothOutEasing(200)),this._delta=0}const O="number"==typeof this._targetZoom?this._targetZoom:w(),U=this._startZoom,q=this._easing;let ee,se=!1;if("wheel"===this._type&&U&&q){const ue=Math.min((k.exported.now()-this._lastWheelEventTime)/200,1),me=q(ue);ee=k.number(U,O,me),ue<1?this._frameId||(this._frameId=!0):se=!0}else ee=O,se=!0;return this._active=!0,se&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!se,zoomDelta:ee-w(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(f){let w=k.ease;if(this._prevEase){const O=this._prevEase,U=(k.exported.now()-O.start)/O.duration,q=O.easing(U+.01)-O.easing(U),ee=.27/Math.sqrt(q*q+1e-4)*.01,se=Math.sqrt(.0729-ee*ee);w=k.bezier(ee,se,.25,1)}return this._prevEase={start:k.exported.now(),duration:f,easing:w},w}reset(){this._active=!1}}class Cl{constructor(f,w){this._clickZoom=f,this._tapZoom=w}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Yr{constructor(){this.reset()}reset(){this._active=!1}dblclick(f,w){return f.preventDefault(),{cameraAnimation:O=>{O.easeTo({duration:300,zoom:O.getZoom()+(f.shiftKey?-1:1),around:O.unproject(w)},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xn{constructor(){this._tap=new Lf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(f,w,O){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?O.length>0&&(this._swipePoint=w[0],this._swipeTouch=O[0].identifier):this._tap.touchstart(f,w,O))}touchmove(f,w,O){if(this._tapTime){if(this._swipePoint){if(O[0].identifier!==this._swipeTouch)return;const U=w[0],q=U.y-this._swipePoint.y;return this._swipePoint=U,f.preventDefault(),this._active=!0,{zoomDelta:q/128}}}else this._tap.touchmove(f,w,O)}touchend(f,w,O){this._tapTime?this._swipePoint&&0===O.length&&this.reset():this._tap.touchend(f,w,O)&&(this._tapTime=f.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bs{constructor(f,w,O){this._el=f,this._mousePan=w,this._touchPan=O}enable(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ei{constructor(f,w,O){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=w,this._mousePitch=O}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class np{constructor(f,w,O,U){this._el=f,this._touchZoom=w,this._touchRotate=O,this._tapDragZoom=U,this._rotationDisabled=!1,this._enabled=!0}enable(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Nr=P=>P.zoom||P.drag||P.pitch||P.rotate;class Is extends k.Event{}class Rr{constructor(){this.constants=[1,1,.01],this.radius=0}setup(f,w){const O=k.sub([],w,f);this.radius=k.length(O[2]<0?k.div([],O,this.constants):[O[0],O[1],0])}projectRay(f){k.div(f,f,this.constants),k.normalize(f,f),k.mul$2(f,f,this.constants);const w=k.scale([],f,this.radius);if(w[2]>0){const O=k.scale([],[0,0,1],k.dot(w,[0,0,1])),U=k.scale([],k.normalize([],[w[0],w[1],0]),this.radius),q=k.add([],w,k.scale([],k.sub([],k.add([],U,O),w),2));w[0]=q[0],w[1]=q[1]}return w}}function Gl(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta}class ip{constructor(f,w){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xl(f),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Rr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(w),k.bindAll(["handleEvent","handleWindowEvent"],this);const O=this._el;this._listeners=[[O,"touchstart",{passive:!0}],[O,"touchmove",{passive:!1}],[O,"touchend",void 0],[O,"touchcancel",void 0],[O,"mousedown",void 0],[O,"mousemove",void 0],[O,"mouseup",void 0],[k.window.document,"mousemove",{capture:!0}],[k.window.document,"mouseup",void 0],[O,"mouseover",void 0],[O,"mouseout",void 0],[O,"dblclick",void 0],[O,"click",void 0],[O,"keydown",{capture:!1}],[O,"keyup",void 0],[O,"wheel",{passive:!1}],[O,"contextmenu",void 0],[k.window,"blur",void 0]];for(const[U,q,ee]of this._listeners)je.addEventListener(U,q,U===k.window.document?this.handleWindowEvent:this.handleEvent,ee)}destroy(){for(const[f,w,O]of this._listeners)je.removeEventListener(f,w,f===k.window.document?this.handleWindowEvent:this.handleEvent,O)}_addDefaultHandlers(f){const w=this._map,O=w.getCanvasContainer();this._add("mapEvent",new dc(w,f));const U=w.boxZoom=new Kd(w,f);this._add("boxZoom",U);const q=new ep,ee=new Yr;w.doubleClickZoom=new Cl(ee,q),this._add("tapZoom",q),this._add("clickZoom",ee);const se=new Xn;this._add("tapDragZoom",se);const ue=w.touchPitch=new pc;this._add("touchPitch",ue);const me=new wl(f),Ce=new xh(f);w.dragRotate=new ei(f,me,Ce),this._add("mouseRotate",me,["mousePitch"]),this._add("mousePitch",Ce,["mouseRotate"]);const Ae=new ad(f),Pe=new la(f);w.dragPan=new bs(O,Ae,Pe),this._add("mousePan",Ae),this._add("touchPan",Pe,["touchZoom","touchRotate"]);const Ne=new tp,$e=new Du;w.touchZoomRotate=new np(O,$e,Ne,se),this._add("touchRotate",Ne,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Vc(w));const et=w.scrollZoom=new Xi(w,this);this._add("scrollZoom",et,["mousePan"]);const mt=w.keyboard=new Iu;this._add("keyboard",mt);for(const Ue of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])f.interactive&&f[Ue]&&w[Ue].enable(f[Ue])}_add(f,w,O){this._handlers.push({handlerName:f,handler:w,allowed:O}),this._handlersById[f]=w}stop(f){if(!this._updatingCamera){for(const{handler:w}of this._handlers)w.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}}isActive(){for(const{handler:f}of this._handlers)if(f.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Nr(this._eventsInProgress))||this.isZooming()}_blockedByActive(f,w,O){for(const U in f)if(U!==O&&(!w||w.indexOf(U)<0))return!0;return!1}handleWindowEvent(f){this.handleEvent(f,`${f.type}Window`)}_getMapTouches(f){const w=[];for(const O of f)this._el.contains(O.target)&&w.push(O);return w}handleEvent(f,w){if("blur"===f.type)return void this.stop(!0);this._updatingCamera=!0;const O="renderFrame"===f.type,U=O?void 0:f,q={needsRenderFrame:!1},ee={},se={},ue=f.touches?this._getMapTouches(f.touches):void 0,me=ue?je.touchPos(this._el,ue):O?void 0:je.mousePos(this._el,f);for(const{handlerName:Pe,handler:Ne,allowed:$e}of this._handlers){if(!Ne.isEnabled())continue;let et;this._blockedByActive(se,$e,Pe)?Ne.reset():Ne[w||f.type]&&(et=Ne[w||f.type](f,me,ue),this.mergeHandlerResult(q,ee,et,Pe,U),et&&et.needsRenderFrame&&this._triggerRenderFrame()),(et||Ne.isActive())&&(se[Pe]=Ne)}const Ce={};for(const Pe in this._previousActiveHandlers)se[Pe]||(Ce[Pe]=U);this._previousActiveHandlers=se,(Object.keys(Ce).length||Gl(q))&&(this._changes.push([q,ee,Ce]),this._triggerRenderFrame()),(Object.keys(se).length||Gl(q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=q;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))}mergeHandlerResult(f,w,O,U,q){if(!O)return;k.extend(f,O);const ee={handlerName:U,originalEvent:O.originalEvent||q};void 0!==O.zoomDelta&&(w.zoom=ee),void 0!==O.panDelta&&(w.drag=ee),void 0!==O.pitchDelta&&(w.pitch=ee),void 0!==O.bearingDelta&&(w.rotate=ee)}_applyChanges(){const f={},w={},O={};for(const[U,q,ee]of this._changes)U.panDelta&&(f.panDelta=(f.panDelta||new k.pointGeometry(0,0))._add(U.panDelta)),U.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+U.zoomDelta),U.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+U.bearingDelta),U.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+U.pitchDelta),void 0!==U.around&&(f.around=U.around),void 0!==U.aroundCoord&&(f.aroundCoord=U.aroundCoord),void 0!==U.pinchAround&&(f.pinchAround=U.pinchAround),U.noInertia&&(f.noInertia=U.noInertia),k.extend(w,q),k.extend(O,ee);this._updateMapTransform(f,w,O),this._changes=[]}_updateMapTransform(f,w,O){const U=this._map,q=U.transform,ee=tt=>[tt.x,tt.y,tt.z];if((tt=>{const ot=this._eventsInProgress.drag;return ot&&!this._handlersById[ot.handlerName].isActive()})()&&!Gl(f)){const tt=q.zoom;q.cameraElevationReference="sea",q.recenterOnTerrain(),q.cameraElevationReference="ground",tt!==q.zoom&&this._map._update(!0)}if(!Gl(f))return this._fireEvents(w,O,!0);let{panDelta:se,zoomDelta:ue,bearingDelta:me,pitchDelta:Ce,around:Ae,aroundCoord:Pe,pinchAround:Ne}=f;void 0!==Ne&&(Ae=Ne),(tt=>w.drag&&!this._eventsInProgress.drag)()&&Ae&&(this._dragOrigin=ee(q.pointCoordinate3D(Ae)),this._trackingEllipsoid.setup(q._camera.position,this._dragOrigin)),q.cameraElevationReference="sea",U._stop(!0),Ae=Ae||U.transform.centerPoint,me&&(q.bearing+=me),Ce&&(q.pitch+=Ce),q._updateCameraState();const $e=[0,0,0];if(se){const tt=q.screenPointToMercatorRay(Ae),ot=q.screenPointToMercatorRay(Ae.sub(se)),vt=this._trackingEllipsoid.projectRay(tt.dir),rt=this._trackingEllipsoid.projectRay(ot.dir);$e[0]=rt[0]-vt[0],$e[1]=rt[1]-vt[1]}const et=q.zoom,mt=[0,0,0];if(ue){const tt=ee(Pe||q.pointCoordinate3D(Ae)),ot={dir:k.normalize([],k.sub([],tt,q._camera.position))},vt=q.screenPointToMercatorRay(q.centerPoint);if(ot.dir[2]<0){const rt=k.altitudeFromMercatorZ(tt[2],tt[1]),ht=q.rayIntersectionCoordinate(q.pointRayIntersection(q.centerPoint,rt)),en=q.zoomDeltaToMovement(ee(ht),ue)*(vt.dir[2]/ot.dir[2]);k.scale(mt,ot.dir,en)}else if(q._terrainEnabled()){const rt=q.zoomDeltaToMovement(tt,ue);k.scale(mt,ot.dir,rt)}}const Ue=k.add($e,$e,mt);q._translateCameraConstrained(Ue),ue&&Math.abs(q.zoom-et)>1e-4&&q.recenterOnTerrain(),q.cameraElevationReference="ground",this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(w,O,!0)}_fireEvents(f,w,O){const U=Nr(this._eventsInProgress),q=Nr(f),ee={};for(const Ce in f){const{originalEvent:Ae}=f[Ce];this._eventsInProgress[Ce]||(ee[`${Ce}start`]=Ae),this._eventsInProgress[Ce]=f[Ce]}!U&&q&&this._fireEvent("movestart",q.originalEvent);for(const Ce in ee)this._fireEvent(Ce,ee[Ce]);q&&this._fireEvent("move",q.originalEvent);for(const Ce in f){const{originalEvent:Ae}=f[Ce];this._fireEvent(Ce,Ae)}const se={};let ue;for(const Ce in this._eventsInProgress){const{handlerName:Ae,originalEvent:Pe}=this._eventsInProgress[Ce];this._handlersById[Ae].isActive()||(delete this._eventsInProgress[Ce],ue=w[Ae]||Pe,se[`${Ce}end`]=ue)}for(const Ce in se)this._fireEvent(Ce,se[Ce]);const me=Nr(this._eventsInProgress);if(O&&(U||q)&&!me){this._updatingCamera=!0;const Ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ae=Pe=>0!==Pe&&-this._bearingSnap<Pe&&Pe<this._bearingSnap;Ce?(Ae(Ce.bearing||this._map.getBearing())&&(Ce.bearing=0),this._map.easeTo(Ce,{originalEvent:ue})):(this._map.fire(new k.Event("moveend",{originalEvent:ue})),Ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(f,w){this._map.fire(new k.Event(f,w?{originalEvent:w}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(f=>{delete this._frameId,this.handleEvent(new Is("renderFrame",{timeStamp:f})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Xo extends k.Evented{constructor(f,w){super(),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=w.bearingSnap,k.bindAll(["_renderFrameCallback"],this)}getCenter(){return new k.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(f,w){return this.jumpTo({center:f},w)}panBy(f,w,O){return f=k.pointGeometry.convert(f).mult(-1),this.panTo(this.transform.center,k.extend({offset:f},w),O)}panTo(f,w,O){return this.easeTo(k.extend({center:f},w),O)}getZoom(){return this.transform.zoom}setZoom(f,w){return this.jumpTo({zoom:f},w),this}zoomTo(f,w,O){return this.easeTo(k.extend({zoom:f},w),O)}zoomIn(f,w){return this.zoomTo(this.getZoom()+1,f,w),this}zoomOut(f,w){return this.zoomTo(this.getZoom()-1,f,w),this}getBearing(){return this.transform.bearing}setBearing(f,w){return this.jumpTo({bearing:f},w),this}getPadding(){return this.transform.padding}setPadding(f,w){return this.jumpTo({padding:f},w),this}rotateTo(f,w,O){return this.easeTo(k.extend({bearing:f},w),O)}resetNorth(f,w){return this.rotateTo(0,k.extend({duration:1e3},f),w),this}resetNorthPitch(f,w){return this.easeTo(k.extend({bearing:0,pitch:0,duration:1e3},f),w),this}snapToNorth(f,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,w):this}getPitch(){return this.transform.pitch}setPitch(f,w){return this.jumpTo({pitch:f},w),this}cameraForBounds(f,w){f=k.LngLatBounds.convert(f);const O=w&&w.bearing||0;return this._cameraForBoxAndBearing(f.getNorthWest(),f.getSouthEast(),O,w)}_extendCameraOptions(f){const w={top:0,bottom:0,right:0,left:0};if("number"==typeof(f=k.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding){const O=f.padding;f.padding={top:O,bottom:O,right:O,left:O}}return f.padding=k.extend(w,f.padding),f}_cameraForBoxAndBearing(f,w,O,U){const q=this._extendCameraOptions(U),ee=this.transform,se=ee.padding,ue=ee.project(k.LngLat.convert(f)),me=ee.project(k.LngLat.convert(w)),Ce=ue.rotate(-k.degToRad(O)),Ae=me.rotate(-k.degToRad(O)),Pe=new k.pointGeometry(Math.max(Ce.x,Ae.x),Math.max(Ce.y,Ae.y)),Ne=new k.pointGeometry(Math.min(Ce.x,Ae.x),Math.min(Ce.y,Ae.y)),$e=Pe.sub(Ne),et=(ee.width-(se.left+se.right+q.padding.left+q.padding.right))/$e.x,mt=(ee.height-(se.top+se.bottom+q.padding.top+q.padding.bottom))/$e.y;if(mt<0||et<0)return void k.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ue=Math.min(ee.scaleZoom(ee.scale*Math.min(et,mt)),q.maxZoom),tt="number"==typeof q.offset.x?new k.pointGeometry(q.offset.x,q.offset.y):k.pointGeometry.convert(q.offset),ot=new k.pointGeometry((q.padding.left-q.padding.right)/2,(q.padding.top-q.padding.bottom)/2).rotate(O*Math.PI/180),vt=tt.add(ot).mult(ee.scale/ee.zoomScale(Ue));return{center:ee.unproject(ue.add(me).div(2).sub(vt)),zoom:Ue,bearing:O}}_cameraForBox(f,w,O,U,q){const ee=this._extendCameraOptions(q);O=O||0,U=U||0,f=k.LngLat.convert(f),w=k.LngLat.convert(w);const se=this.transform.clone();se.padding=ee.padding;const ue=this.getFreeCameraOptions(),me=new k.LngLat(.5*(f.lng+w.lng),.5*(f.lat+w.lat)),Ce=.5*(O+U);if(se._camera.position[2]<k.mercatorZfromAltitude(Ce,me.lat))return void k.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ue.lookAtPoint(me),se.setFreeCameraOptions(ue);const Ae=k.MercatorCoordinate.fromLngLat(f),Pe=k.MercatorCoordinate.fromLngLat(w),Ne=se.pointRayIntersection(se.centerPoint,Ce),$e=[(et=se.rayIntersectionCoordinate(Ne)).x,et.y,et.z];var et;const mt=se.screenPointToMercatorRay(se.centerPoint);let Ue,tt=0;do{const ot=Math.floor(se.zoom),vt=1<<ot,rt=Math.min(vt*Ae.x,vt*Pe.x),ht=Math.min(vt*Ae.y,vt*Pe.y),en=Math.max(vt*Ae.x,vt*Pe.x),sn=Math.max(vt*Ae.y,vt*Pe.y),un=new dn([rt,ht,O],[en,sn,U]),ut=On.fromInvProjectionMatrix(se.invProjMatrix,se.worldSize,ot);if(2!==un.intersects(ut)){Ue&&(se._camera.position=k.scaleAndAdd([],se._camera.position,mt.dir,-Ue),se._updateStateFromCamera());break}const En=k.sub([],se._camera.position,$e);Ue=.5*k.length(En),se._camera.position=k.scaleAndAdd([],se._camera.position,mt.dir,Ue);try{se._updateStateFromCamera()}catch(bn){return void k.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++tt<10);return{center:se.center,zoom:se.zoom,bearing:se.bearing,pitch:se.pitch}}fitBounds(f,w,O){return this._fitInternal(this.cameraForBounds(f,w),w,O)}_raycastElevationBox(f,w){const O=this.transform.elevation;if(!O)return;const U=new k.pointGeometry(f.x,w.y),q=new k.pointGeometry(w.x,f.y),ee=O.pointCoordinate(f);if(!ee)return;const se=O.pointCoordinate(w);if(!se)return;const ue=O.pointCoordinate(U);if(!ue)return;const me=O.pointCoordinate(q);if(!me)return;const Ce=new k.MercatorCoordinate(ee[0],ee[1]).toLngLat(),Ae=new k.MercatorCoordinate(se[0],se[1]).toLngLat(),Pe=new k.MercatorCoordinate(ue[0],ue[1]).toLngLat(),Ne=new k.MercatorCoordinate(me[0],me[1]).toLngLat(),$e=Math.min(Ce.lng,Math.min(Ae.lng,Math.min(Pe.lng,Ne.lng))),et=Math.min(Ce.lat,Math.min(Ae.lat,Math.min(Pe.lat,Ne.lat))),mt=Math.max(Ce.lng,Math.max(Ae.lng,Math.max(Pe.lng,Ne.lng))),Ue=Math.max(Ce.lat,Math.max(Ae.lat,Math.max(Pe.lat,Ne.lat))),tt=Math.min(ee[3],Math.min(se[3],Math.min(ue[3],me[3]))),ot=Math.max(ee[3],Math.max(se[3],Math.max(ue[3],me[3])));return{minLngLat:new k.LngLat($e,et),maxLngLat:new k.LngLat(mt,Ue),minAltitude:tt,maxAltitude:ot}}fitScreenCoordinates(f,w,O,U,q){let ee,se,ue,me;const Ce=k.pointGeometry.convert(f),Ae=k.pointGeometry.convert(w),Pe=this._raycastElevationBox(Ce,Ae);if(Pe)ee=Pe.minLngLat,se=Pe.maxLngLat,ue=Pe.minAltitude,me=Pe.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(Ce,Ae))return this;ee=this.transform.pointLocation(Ce),se=this.transform.pointLocation(Ae)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(k.pointGeometry.convert(f)),this.transform.pointLocation(k.pointGeometry.convert(w)),O,U):this._cameraForBox(ee,se,ue,me,U),U,q)}_fitInternal(f,w,O){return f?(delete(w=k.extend(f,w)).padding,w.linear?this.easeTo(w,O):this.flyTo(w,O)):this}jumpTo(f,w){this.stop();const O=this.transform;let U=!1,q=!1,ee=!1;return"zoom"in f&&O.zoom!==+f.zoom&&(U=!0,O.zoom=+f.zoom),void 0!==f.center&&(O.center=k.LngLat.convert(f.center)),"bearing"in f&&O.bearing!==+f.bearing&&(q=!0,O.bearing=+f.bearing),"pitch"in f&&O.pitch!==+f.pitch&&(ee=!0,O.pitch=+f.pitch),null==f.padding||O.isPaddingEqual(f.padding)||(O.padding=f.padding),this.fire(new k.Event("movestart",w)).fire(new k.Event("move",w)),U&&this.fire(new k.Event("zoomstart",w)).fire(new k.Event("zoom",w)).fire(new k.Event("zoomend",w)),q&&this.fire(new k.Event("rotatestart",w)).fire(new k.Event("rotate",w)).fire(new k.Event("rotateend",w)),ee&&this.fire(new k.Event("pitchstart",w)).fire(new k.Event("pitch",w)).fire(new k.Event("pitchend",w)),this.fire(new k.Event("moveend",w))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(f,w){this.stop();const O=this.transform,U=O.zoom,q=O.pitch,ee=O.bearing;O.setFreeCameraOptions(f);const se=U!==O.zoom,ue=q!==O.pitch,me=ee!==O.bearing;return this.fire(new k.Event("movestart",w)).fire(new k.Event("move",w)),se&&this.fire(new k.Event("zoomstart",w)).fire(new k.Event("zoom",w)).fire(new k.Event("zoomend",w)),me&&this.fire(new k.Event("rotatestart",w)).fire(new k.Event("rotate",w)).fire(new k.Event("rotateend",w)),ue&&this.fire(new k.Event("pitchstart",w)).fire(new k.Event("pitch",w)).fire(new k.Event("pitchend",w)),this.fire(new k.Event("moveend",w)),this}easeTo(f,w){this._stop(!1,f.easeId),(!1===(f=k.extend({offset:[0,0],duration:500,easing:k.ease},f)).animate||!f.essential&&k.exported.prefersReducedMotion)&&(f.duration=0);const O=this.transform,U=this.getZoom(),q=this.getBearing(),ee=this.getPitch(),se=this.getPadding(),ue="zoom"in f?+f.zoom:U,me="bearing"in f?this._normalizeBearing(f.bearing,q):q,Ce="pitch"in f?+f.pitch:ee,Ae="padding"in f?f.padding:O.padding,Pe=k.pointGeometry.convert(f.offset);let Ne=O.centerPoint.add(Pe);const $e=O.pointLocation(Ne),et=k.LngLat.convert(f.center||$e);this._normalizeCenter(et);const mt=O.project($e),Ue=O.project(et).sub(mt),tt=O.zoomScale(ue-U);let ot,vt;f.around&&(ot=k.LngLat.convert(f.around),vt=O.locationPoint(ot));const rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ue!==U,this._rotating=this._rotating||q!==me,this._pitching=this._pitching||Ce!==ee,this._padding=!O.isPaddingEqual(Ae),this._easeId=f.easeId,this._prepareEase(w,f.noMoveStart,rt),this._ease(ht=>{if(this._zooming&&(O.zoom=k.number(U,ue,ht)),this._rotating&&(O.bearing=k.number(q,me,ht)),this._pitching&&(O.pitch=k.number(ee,Ce,ht)),this._padding&&(O.interpolatePadding(se,Ae,ht),Ne=O.centerPoint.add(Pe)),ot)O.setLocationAtPoint(ot,vt);else{const en=O.zoomScale(O.zoom-U),sn=ue>U?Math.min(2,tt):Math.max(.5,tt),un=Math.pow(sn,1-ht),ut=O.unproject(mt.add(Ue.mult(ht*un)).mult(en));O.setLocationAtPoint(O.renderWorldCopies?ut.wrap():ut,Ne)}this._fireMoveEvents(w)},ht=>{O.recenterOnTerrain(),this._afterEase(w,ht)},f),this}_prepareEase(f,w,O={}){this._moving=!0,this.transform.cameraElevationReference="sea",w||O.moving||this.fire(new k.Event("movestart",f)),this._zooming&&!O.zooming&&this.fire(new k.Event("zoomstart",f)),this._rotating&&!O.rotating&&this.fire(new k.Event("rotatestart",f)),this._pitching&&!O.pitching&&this.fire(new k.Event("pitchstart",f))}_fireMoveEvents(f){this.fire(new k.Event("move",f)),this._zooming&&this.fire(new k.Event("zoom",f)),this._rotating&&this.fire(new k.Event("rotate",f)),this._pitching&&this.fire(new k.Event("pitch",f))}_afterEase(f,w){if(this._easeId&&w&&this._easeId===w)return;delete this._easeId,this.transform.cameraElevationReference="ground";const O=this._zooming,U=this._rotating,q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,O&&this.fire(new k.Event("zoomend",f)),U&&this.fire(new k.Event("rotateend",f)),q&&this.fire(new k.Event("pitchend",f)),this.fire(new k.Event("moveend",f))}flyTo(f,w){if(!f.essential&&k.exported.prefersReducedMotion){const An=k.pick(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(An,w)}this.stop(),f=k.extend({offset:[0,0],speed:1.2,curve:1.42,easing:k.ease},f);const O=this.transform,U=this.getZoom(),q=this.getBearing(),ee=this.getPitch(),se=this.getPadding(),ue="zoom"in f?k.clamp(+f.zoom,O.minZoom,O.maxZoom):U,me="bearing"in f?this._normalizeBearing(f.bearing,q):q,Ce="pitch"in f?+f.pitch:ee,Ae="padding"in f?f.padding:O.padding,Pe=O.zoomScale(ue-U),Ne=k.pointGeometry.convert(f.offset);let $e=O.centerPoint.add(Ne);const et=O.pointLocation($e),mt=k.LngLat.convert(f.center||et);this._normalizeCenter(mt);const Ue=O.project(et),tt=O.project(mt).sub(Ue);let ot=f.curve;const vt=Math.max(O.width,O.height),rt=vt/Pe,ht=tt.mag();if("minZoom"in f){const An=k.clamp(Math.min(f.minZoom,U,ue),O.minZoom,O.maxZoom),Ti=vt/O.zoomScale(An-U);ot=Math.sqrt(Ti/ht*2)}const en=ot*ot;function sn(An){const Ti=(rt*rt-vt*vt+(An?-1:1)*en*en*ht*ht)/(2*(An?rt:vt)*en*ht);return Math.log(Math.sqrt(Ti*Ti+1)-Ti)}function un(An){return(Math.exp(An)-Math.exp(-An))/2}function ut(An){return(Math.exp(An)+Math.exp(-An))/2}const En=sn(0);let bn=function(An){return ut(En)/ut(En+ot*An)},Zn=function(An){return vt*((ut(En)*(un(Ti=En+ot*An)/ut(Ti))-un(En))/en)/ht;var Ti},kn=(sn(1)-En)/ot;if(Math.abs(ht)<1e-6||!isFinite(kn)){if(Math.abs(vt-rt)<1e-6)return this.easeTo(f,w);const An=rt<vt?-1:1;kn=Math.abs(Math.log(rt/vt))/ot,Zn=function(){return 0},bn=function(Ti){return Math.exp(An*ot*Ti)}}return f.duration="duration"in f?+f.duration:1e3*kn/("screenSpeed"in f?+f.screenSpeed/ot:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0),this._zooming=!0,this._rotating=q!==me,this._pitching=Ce!==ee,this._padding=!O.isPaddingEqual(Ae),this._prepareEase(w,!1),this._ease(An=>{const Ti=An*kn,ci=1/bn(Ti);O.zoom=1===An?ue:U+O.scaleZoom(ci),this._rotating&&(O.bearing=k.number(q,me,An)),this._pitching&&(O.pitch=k.number(ee,Ce,An)),this._padding&&(O.interpolatePadding(se,Ae,An),$e=O.centerPoint.add(Ne));const lr=1===An?mt:O.unproject(Ue.add(tt.mult(Zn(Ti))).mult(ci));O.setLocationAtPoint(O.renderWorldCopies?lr.wrap():lr,$e),O._updateCenterElevation(),this._fireMoveEvents(w)},()=>this._afterEase(w),f),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(f,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const O=this._onEaseEnd;delete this._onEaseEnd,O.call(this,w)}if(!f){const O=this.handlers;O&&O.stop(!1)}return this}_ease(f,w,O){!1===O.animate||0===O.duration?(f(1),w()):(this._easeStart=k.exported.now(),this._easeOptions=O,this._onEaseFrame=f,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const f=Math.min((k.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(f,w){f=k.wrap(f,-180,180);const O=Math.abs(f-w);return Math.abs(f-360-w)<O&&(f-=360),Math.abs(f+360-w)<O&&(f+=360),f}_normalizeCenter(f){const w=this.transform;if(!w.renderWorldCopies||w.lngRange)return;const O=f.lng-w.center.lng;f.lng+=O>180?-360:O<-180?360:0}}class ca{constructor(f={}){this.options=f,k.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(f){const w=this.options&&this.options.compact;return this._map=f,this._container=je.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=je.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=je.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),w&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===w&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){je.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(f,w){const O=this._map._getUIString(`AttributionControl.${w}`);f.title=O,f.setAttribute("aria-label",O)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));const w=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||k.config.ACCESS_TOKEN}];if(f){const O=w.reduce((U,q,ee)=>(q.value&&(U+=`${q.key}=${q.value}${ee<w.length-1?"&":""}`),U),"?");f.href=`${k.config.FEEDBACK_URL}/${O}${this._map._hash?this._map._hash.getHashString(!0):""}`,f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}}_updateData(f){!f||"metadata"!==f.sourceDataType&&"visibility"!==f.sourceDataType&&"style"!==f.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map(U=>"string"!=typeof U?"":U)):"string"==typeof this.options.customAttribution&&f.push(this.options.customAttribution)),this._map.style.stylesheet){const U=this._map.style.stylesheet;this.styleOwner=U.owner,this.styleId=U.id}const w=this._map.style._sourceCaches;for(const U in w){const q=w[U];if(q.used){const ee=q.getSource();ee.attribution&&f.indexOf(ee.attribution)<0&&f.push(ee.attribution)}}f.sort((U,q)=>U.length-q.length),f=f.filter((U,q)=>{for(let ee=q+1;ee<f.length;ee++)if(f[ee].indexOf(U)>=0)return!1;return!0});const O=f.join(" | ");O!==this._attribHTML&&(this._attribHTML=O,f.length?(this._innerContainer.innerHTML=O,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Hc{constructor(){k.bindAll(["_updateLogo"],this),k.bindAll(["_updateCompact"],this)}onAdd(f){this._map=f,this._container=je.create("div","mapboxgl-ctrl");const w=je.create("a","mapboxgl-ctrl-logo");return w.target="_blank",w.rel="noopener nofollow",w.href="https://www.mapbox.com/",w.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),w.setAttribute("rel","noopener nofollow"),this._container.appendChild(w),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){je.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(f){f&&"metadata"!==f.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const f=this._map.style._sourceCaches;if(0===Object.entries(f).length)return!0;for(const w in f){const O=f[w].getSource();if(O.hasOwnProperty("mapbox_logo")&&!O.mapbox_logo)return!1}return!0}_updateCompact(){const f=this._container.children;if(f.length){const w=f[0];this._map.getCanvasContainer().offsetWidth<250?w.classList.add("mapboxgl-compact"):w.classList.remove("mapboxgl-compact")}}}class rp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(f){const w=++this._id;return this._queue.push({callback:f,id:w,cancelled:!1}),w}remove(f){const w=this._currentlyRunning,O=w?this._queue.concat(w):this._queue;for(const U of O)if(U.id===f)return void(U.cancelled=!0)}run(f=0){const w=this._currentlyRunning=this._queue;this._queue=[];for(const O of w)if(!O.cancelled&&(O.callback(f),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function fc(P,f,w){if(P=new k.LngLat(P.lng,P.lat),f){const O=new k.LngLat(P.lng-360,P.lat),U=new k.LngLat(P.lng+360,P.lat),q=360*Math.ceil(Math.abs(P.lng-w.center.lng)/360),ee=w.locationPoint(P).distSqr(f),se=f.x<0||f.y<0||f.x>w.width||f.y>w.height;w.locationPoint(O).distSqr(f)<ee&&(se||Math.abs(O.lng-w.center.lng)<q)?P=O:w.locationPoint(U).distSqr(f)<ee&&(se||Math.abs(U.lng-w.center.lng)<q)&&(P=U)}for(;Math.abs(P.lng-w.center.lng)>180;){const O=w.locationPoint(P);if(O.x>=0&&O.y>=0&&O.x<=w.width&&O.y<=w.height)break;P.lng>w.center.lng?P.lng-=360:P.lng+=360}return P}const wh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gc(P,f,w){const O=P.classList;for(const U in wh)O.remove(`mapboxgl-${w}-anchor-${U}`);O.add(`mapboxgl-${w}-anchor-${f}`)}class jl extends k.Evented{constructor(f,w){if(super(),(f instanceof k.window.HTMLElement||w)&&(f=k.extend({element:f},w)),k.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&"auto"!==f.pitchAlignment?f.pitchAlignment:this._rotationAlignment,f&&f.element)this._element=f.element,this._offset=k.pointGeometry.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=je.create("div"),this._element.setAttribute("aria-label","Map marker");const O=je.createNS("http://www.w3.org/2000/svg","svg"),U=41,q=27;O.setAttributeNS(null,"display","block"),O.setAttributeNS(null,"height",`${U}px`),O.setAttributeNS(null,"width",`${q}px`),O.setAttributeNS(null,"viewBox",`0 0 ${q} ${U}`);const ee=je.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"stroke","none"),ee.setAttributeNS(null,"stroke-width","1"),ee.setAttributeNS(null,"fill","none"),ee.setAttributeNS(null,"fill-rule","evenodd");const se=je.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill-rule","nonzero");const ue=je.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ue.setAttributeNS(null,"fill","#000000");const me=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of me){const ot=je.createNS("http://www.w3.org/2000/svg","ellipse");ot.setAttributeNS(null,"opacity","0.04"),ot.setAttributeNS(null,"cx","10.5"),ot.setAttributeNS(null,"cy","5.80029008"),ot.setAttributeNS(null,"rx",tt.rx),ot.setAttributeNS(null,"ry",tt.ry),ue.appendChild(ot)}const Ce=je.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"fill",this._color);const Ae=je.createNS("http://www.w3.org/2000/svg","path");Ae.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ce.appendChild(Ae);const Pe=je.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"opacity","0.25"),Pe.setAttributeNS(null,"fill","#000000");const Ne=je.createNS("http://www.w3.org/2000/svg","path");Ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Pe.appendChild(Ne);const $e=je.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$e.setAttributeNS(null,"fill","#FFFFFF");const et=je.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(8.0, 8.0)");const mt=je.createNS("http://www.w3.org/2000/svg","circle");mt.setAttributeNS(null,"fill","#000000"),mt.setAttributeNS(null,"opacity","0.25"),mt.setAttributeNS(null,"cx","5.5"),mt.setAttributeNS(null,"cy","5.5"),mt.setAttributeNS(null,"r","5.4999962");const Ue=je.createNS("http://www.w3.org/2000/svg","circle");Ue.setAttributeNS(null,"fill","#FFFFFF"),Ue.setAttributeNS(null,"cx","5.5"),Ue.setAttributeNS(null,"cy","5.5"),Ue.setAttributeNS(null,"r","5.4999962"),et.appendChild(mt),et.appendChild(Ue),se.appendChild(ue),se.appendChild(Ce),se.appendChild(Pe),se.appendChild($e),se.appendChild(et),O.appendChild(se),O.setAttributeNS(null,"height",U*this._scale+"px"),O.setAttributeNS(null,"width",q*this._scale+"px"),this._element.appendChild(O),this._offset=k.pointGeometry.convert(f&&f.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",O=>{O.preventDefault()}),this._element.addEventListener("mousedown",O=>{O.preventDefault()}),Gc(this._element,this._anchor,"marker"),this._popup=null}addTo(f){return this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._update),f.on("moveend",this._update),f.on("remove",this._clearFadeTimer),f._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),je.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=k.LngLat.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){const w=38.1,O=13.5,U=Math.sqrt(Math.pow(O,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-w],"bottom-left":[U,-1*(w-O+U)],"bottom-right":[-U,-1*(w-O+U)],left:[O,-1*(w-O)],right:[-O,-1*(w-O)]}:this._offset}this._popup=f,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(f){const w=f.code,O=f.charCode||f.keyCode;"Space"!==w&&"Enter"!==w&&32!==O&&13!==O||this.togglePopup()}_onMapClick(f){const w=f.originalEvent.target,O=this._element;this._popup&&(w===O||O.contains(w))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const f=this._popup;return f?(f.isOpen()?f.remove():f.addTo(this._map),this):this}_evaluateOpacity(){const f=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(f))return void this._clearFadeTimer();const w=this._map.unproject(f);let O=!1;if(this._map.getTerrain()){const q=this._map.getFreeCameraOptions();if(q.position){const ee=q.position.toLngLat();O=ee.distanceTo(w)<.9*ee.distanceTo(this._lngLat)}}const U=(1-this._map._queryFogOpacity(w))*(O?.2:1);this._element.style.opacity=`${U}`,this._popup&&this._popup._setOpacity(`${U}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(f){const w=this._map.transform;return!!f&&f.x>=0&&f.x<w.width&&f.y>=0&&f.y<w.height}_update(f){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=fc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let w="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?w=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let O="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?O="rotateX(0deg)":"map"===this._pitchAlignment&&(O=`rotateX(${this._map.getPitch()}deg)`),f&&"moveend"!==f.type||(this._pos=this._pos.round()),this._map._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&je.setTransform(this._element,`${wh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${O} ${w}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})}_transformedOffset(){if(!this._defaultMarker)return this._offset;const f=this._map.transform,w=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&w._rotate(f.angle),"map"===this._pitchAlignment&&(w.y*=Math.cos(f._pitch)),w}getOffset(){return this._offset}setOffset(f){return this._offset=k.pointGeometry.convert(f),this._update(),this}_onMove(f){if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new k.Event("dragstart"))),this.fire(new k.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new k.Event("dragend")),this._state="inactive"}_addDragHandler(f){this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(f){return this._draggable=!!f,this._map&&(f?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(f){return this._rotation=f||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(f){return this._rotationAlignment=f||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(f){return this._pitchAlignment=f&&"auto"!==f?f:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Ru{constructor(f){this.jumpTo(f)}getValue(f){if(f<=this._startTime)return this._start;if(f>=this._endTime)return this._end;const w=k.easeCubicInOut((f-this._startTime)/(this._endTime-this._startTime));return this._start*(1-w)+this._end*w}isEasing(f){return f>=this._startTime&&f<=this._endTime}jumpTo(f){this._startTime=-1/0,this._endTime=-1/0,this._start=f,this._end=f}easeTo(f,w,O){this._start=this.getValue(w),this._end=f,this._startTime=w,this._endTime=w+O}}const jc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:Yc,HTMLElement:mc,ImageBitmap:Ou}=k.window,rg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Ch(P){P.parentNode&&P.parentNode.removeChild(P)}const op={showCompass:!0,showZoom:!0,visualizePitch:!1};class sp{constructor(f,w,O=!1){this._clickTolerance=10,this.element=w,this.mouseRotate=new wl({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,O&&(this.mousePitch=new xh({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),k.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),je.addEventListener(w,"mousedown",this.mousedown),je.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),je.addEventListener(w,"touchmove",this.touchmove),je.addEventListener(w,"touchend",this.touchend),je.addEventListener(w,"touchcancel",this.reset)}down(f,w){this.mouseRotate.mousedown(f,w),this.mousePitch&&this.mousePitch.mousedown(f,w),je.disableDrag()}move(f,w){const O=this.map,U=this.mouseRotate.mousemoveWindow(f,w);if(U&&U.bearingDelta&&O.setBearing(O.getBearing()+U.bearingDelta),this.mousePitch){const q=this.mousePitch.mousemoveWindow(f,w);q&&q.pitchDelta&&O.setPitch(O.getPitch()+q.pitchDelta)}}off(){const f=this.element;je.removeEventListener(f,"mousedown",this.mousedown),je.removeEventListener(f,"touchstart",this.touchstart,{passive:!1}),je.removeEventListener(f,"touchmove",this.touchmove),je.removeEventListener(f,"touchend",this.touchend),je.removeEventListener(f,"touchcancel",this.reset),this.offTemp()}offTemp(){je.enableDrag(),je.removeEventListener(k.window,"mousemove",this.mousemove),je.removeEventListener(k.window,"mouseup",this.mouseup)}mousedown(f){this.down(k.extend({},f,{ctrlKey:!0,preventDefault:()=>f.preventDefault()}),je.mousePos(this.element,f)),je.addEventListener(k.window,"mousemove",this.mousemove),je.addEventListener(k.window,"mouseup",this.mouseup)}mousemove(f){this.move(f,je.mousePos(this.element,f))}mouseup(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()}touchstart(f){1!==f.targetTouches.length?this.reset():(this._startPos=this._lastPos=je.touchPos(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>f.preventDefault()},this._startPos))}touchmove(f){1!==f.targetTouches.length?this.reset():(this._lastPos=je.touchPos(this.element,f.targetTouches)[0],this.move({preventDefault:()=>f.preventDefault()},this._lastPos))}touchend(f){0===f.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Oo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Nn,Ps=0,qc=!1;const gs={maxWidth:100,unit:"metric"};function Bf(P,f,w){const O=w&&w.maxWidth||100,U=P._container.clientHeight/2,q=P.unproject([0,U]),ee=P.unproject([O,U]),se=q.distanceTo(ee);if(w&&"imperial"===w.unit){const ue=3.2808*se;ue>5280?Sh(f,O,ue/5280,P._getUIString("ScaleControl.Miles"),P):Sh(f,O,ue,P._getUIString("ScaleControl.Feet"),P)}else w&&"nautical"===w.unit?Sh(f,O,se/1852,P._getUIString("ScaleControl.NauticalMiles"),P):se>=1e3?Sh(f,O,se/1e3,P._getUIString("ScaleControl.Kilometers"),P):Sh(f,O,se,P._getUIString("ScaleControl.Meters"),P)}function Sh(P,f,w,O,U){const q=function(se){const ue=Math.pow(10,`${Math.floor(se)}`.length-1);let me=se/ue;return me=me>=10?10:me>=5?5:me>=3?3:me>=2?2:me>=1?1:function(Ce){const Ae=Math.pow(10,Math.ceil(-Math.log(Ce)/Math.LN10));return Math.round(Ce*Ae)/Ae}(me),ue*me}(w),ee=q/w;U._requestDomTask(()=>{P.style.width=f*ee+"px",P.innerHTML=`${q}&nbsp;${O}`})}const zf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ld(P){if(P){if("number"==typeof P){const f=Math.round(Math.sqrt(.5*Math.pow(P,2)));return{center:new k.pointGeometry(0,0),top:new k.pointGeometry(0,P),"top-left":new k.pointGeometry(f,f),"top-right":new k.pointGeometry(-f,f),bottom:new k.pointGeometry(0,-P),"bottom-left":new k.pointGeometry(f,-f),"bottom-right":new k.pointGeometry(-f,-f),left:new k.pointGeometry(P,0),right:new k.pointGeometry(-P,0)}}if(P instanceof k.pointGeometry||Array.isArray(P)){const f=k.pointGeometry.convert(P);return{center:f,top:f,"top-left":f,"top-right":f,bottom:f,"bottom-left":f,"bottom-right":f,left:f,right:f}}return{center:k.pointGeometry.convert(P.center||[0,0]),top:k.pointGeometry.convert(P.top||[0,0]),"top-left":k.pointGeometry.convert(P["top-left"]||[0,0]),"top-right":k.pointGeometry.convert(P["top-right"]||[0,0]),bottom:k.pointGeometry.convert(P.bottom||[0,0]),"bottom-left":k.pointGeometry.convert(P["bottom-left"]||[0,0]),"bottom-right":k.pointGeometry.convert(P["bottom-right"]||[0,0]),left:k.pointGeometry.convert(P.left||[0,0]),right:k.pointGeometry.convert(P.right||[0,0])}}return ld(new k.pointGeometry(0,0))}const ap={version:k.version,supported:gt,setRTLTextPlugin:k.setRTLTextPlugin,getRTLTextPluginStatus:k.getRTLTextPluginStatus,Map:class extends Xo{constructor(P){if(null!=(P=k.extend({},rg,P)).minZoom&&null!=P.maxZoom&&P.minZoom>P.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=P.minPitch&&null!=P.maxPitch&&P.minPitch>P.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=P.minPitch&&P.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=P.maxPitch&&P.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new yh(P.minZoom,P.maxZoom,P.minPitch,P.maxPitch,P.renderWorldCopies),P),this._interactive=P.interactive,this._maxTileCacheSize=P.maxTileCacheSize,this._failIfMajorPerformanceCaveat=P.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=P.preserveDrawingBuffer,this._antialias=P.antialias,this._trackResize=P.trackResize,this._bearingSnap=P.bearingSnap,this._refreshExpiredTiles=P.refreshExpiredTiles,this._fadeDuration=P.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=P.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=P.collectResourceTiming,this._optimizeForTerrain=P.optimizeForTerrain,this._renderTaskQueue=new rp,this._domRenderTaskQueue=new rp,this._controls=[],this._markers=[],this._mapId=k.uniqueId(),this._locale=k.extend({},jc,P.locale),this._clickTolerance=P.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Ru(0),this._requestManager=new k.RequestManager(P.transformRequest,P.accessToken,P.testMode),this._silenceAuthErrors=!!P.testMode,"string"==typeof P.container){if(this._container=k.window.document.getElementById(P.container),!this._container)throw new Error(`Container '${P.container}' not found.`)}else{if(!(P.container instanceof mc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=P.container}if(P.maxBounds&&this.setMaxBounds(P.maxBounds),k.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==k.window&&(k.window.addEventListener("online",this._onWindowOnline,!1),k.window.addEventListener("resize",this._onWindowResize,!1),k.window.addEventListener("orientationchange",this._onWindowResize,!1),k.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new ip(this,P),this._hash=P.hash&&new Da("string"==typeof P.hash&&P.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:P.center,zoom:P.zoom,bearing:P.bearing,pitch:P.pitch}),P.bounds&&(this.resize(),this.fitBounds(P.bounds,k.extend({},P.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=P.localFontFamily,this._localIdeographFontFamily=P.localIdeographFontFamily,P.style&&this.setStyle(P.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),P.attributionControl&&this.addControl(new ca({customAttribution:P.customAttribution})),this._logoControl=new Hc,this.addControl(this._logoControl,P.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",f=>{this._update("style"===f.dataType),this.fire(new k.Event(`${f.dataType}data`,f))}),this.on("dataloading",f=>{this.fire(new k.Event(`${f.dataType}dataloading`,f))})}_getMapId(){return this._mapId}addControl(P,f){if(void 0===f&&(f=P.getDefaultPosition?P.getDefaultPosition():"top-right"),!P||!P.onAdd)return this.fire(new k.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const w=P.onAdd(this);this._controls.push(P);const O=this._controlPositions[f];return-1!==f.indexOf("bottom")?O.insertBefore(w,O.firstChild):O.appendChild(w),this}removeControl(P){if(!P||!P.onRemove)return this.fire(new k.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const f=this._controls.indexOf(P);return f>-1&&this._controls.splice(f,1),P.onRemove(this),this}hasControl(P){return this._controls.indexOf(P)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(P){const f=this._containerDimensions(),w=f[0],O=f[1];this._resizeCanvas(w,O),this.transform.resize(w,O),this.painter.resize(w,O);const U=!this._moving;return U&&(this.stop(),this.fire(new k.Event("movestart",P)).fire(new k.Event("move",P))),this.fire(new k.Event("resize",P)),U&&this.fire(new k.Event("moveend",P)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(P){return this.transform.setMaxBounds(k.LngLatBounds.convert(P)),this._update()}setMinZoom(P){if((P=null==P?-2:P)>=-2&&P<=this.transform.maxZoom)return this.transform.minZoom=P,this._update(),this.getZoom()<P&&this.setZoom(P),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(P){if((P=null==P?22:P)>=this.transform.minZoom)return this.transform.maxZoom=P,this._update(),this.getZoom()>P&&this.setZoom(P),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(P){if((P=null==P?0:P)<0)throw new Error("minPitch must be greater than or equal to 0");if(P>=0&&P<=this.transform.maxPitch)return this.transform.minPitch=P,this._update(),this.getPitch()<P&&this.setPitch(P),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(P){if((P=null==P?85:P)>85)throw new Error("maxPitch must be less than or equal to 85");if(P>=this.transform.minPitch)return this.transform.maxPitch=P,this._update(),this.getPitch()>P&&this.setPitch(P),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(P){return this.transform.renderWorldCopies=P,this._update()}project(P){return this.transform.locationPoint3D(k.LngLat.convert(P))}unproject(P){return this.transform.pointLocation3D(k.pointGeometry.convert(P))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(P,f,w){if("mouseenter"===P||"mouseover"===P){let O=!1;return{layer:f,listener:w,delegates:{mousemove:q=>{const ee=this.getLayer(f)?this.queryRenderedFeatures(q.point,{layers:[f]}):[];ee.length?O||(O=!0,w.call(this,new ms(P,this,q.originalEvent,{features:ee}))):O=!1},mouseout:()=>{O=!1}}}}if("mouseleave"===P||"mouseout"===P){let O=!1;return{layer:f,listener:w,delegates:{mousemove:ee=>{(this.getLayer(f)?this.queryRenderedFeatures(ee.point,{layers:[f]}):[]).length?O=!0:O&&(O=!1,w.call(this,new ms(P,this,ee.originalEvent)))},mouseout:ee=>{O&&(O=!1,w.call(this,new ms(P,this,ee.originalEvent)))}}}}{const O=U=>{const q=this.getLayer(f)?this.queryRenderedFeatures(U.point,{layers:[f]}):[];q.length&&(U.features=q,w.call(this,U),delete U.features)};return{layer:f,listener:w,delegates:{[P]:O}}}}on(P,f,w){if(void 0===w)return super.on(P,f);const O=this._createDelegatedListener(P,f,w);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[P]=this._delegatedListeners[P]||[],this._delegatedListeners[P].push(O);for(const U in O.delegates)this.on(U,O.delegates[U]);return this}once(P,f,w){if(void 0===w)return super.once(P,f);const O=this._createDelegatedListener(P,f,w);for(const U in O.delegates)this.once(U,O.delegates[U]);return this}off(P,f,w){return void 0===w?super.off(P,f):(this._delegatedListeners&&this._delegatedListeners[P]&&(O=>{const U=this._delegatedListeners[P];for(let q=0;q<U.length;q++){const ee=U[q];if(ee.layer===f&&ee.listener===w){for(const se in ee.delegates)this.off(se,ee.delegates[se]);return U.splice(q,1),this}}})(),this)}queryRenderedFeatures(P,f){return this.style?(void 0!==f||void 0===P||P instanceof k.pointGeometry||Array.isArray(P)||(f=P,P=void 0),this.style.queryRenderedFeatures(P=P||[[0,0],[this.transform.width,this.transform.height]],f=f||{},this.transform)):[]}querySourceFeatures(P,f){return this.style.querySourceFeatures(P,f)}queryTerrainElevation(P,f){const w=this.transform.elevation;return w?(f=k.extend({},{exaggerated:!0},f),w.getAtPoint(k.MercatorCoordinate.fromLngLat(P),null,f.exaggerated)):null}setStyle(P,f){return!1!==(f=k.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},f)).diff&&f.localIdeographFontFamily===this._localIdeographFontFamily&&f.localFontFamily===this._localFontFamily&&this.style&&P?(this._diffStyle(P,f),this):(this._localIdeographFontFamily=f.localIdeographFontFamily,this._localFontFamily=f.localFontFamily,this._updateStyle(P,f))}_getUIString(P){const f=this._locale[P];if(null==f)throw new Error(`Missing UI string '${P}'`);return f}_updateStyle(P,f){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),P&&(this.style=new Uo(this,f||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof P?this.style.loadURL(P):this.style.loadJSON(P)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Uo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(P,f){if("string"==typeof P){const w=this._requestManager.normalizeStyleURL(P),O=this._requestManager.transformRequest(w,k.ResourceType.Style);k.getJSON(O,(U,q)=>{U?this.fire(new k.ErrorEvent(U)):q&&this._updateDiff(q,f)})}else"object"==typeof P&&this._updateDiff(P,f)}_updateDiff(P,f){try{this.style.setState(P)&&this._update(!0)}catch(w){k.warnOnce(`Unable to perform style diff: ${w.message||w.error||w}.  Rebuilding the style from scratch.`),this._updateStyle(P,f)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():k.warnOnce("There is no style added to the map.")}addSource(P,f){return this._lazyInitEmptyStyle(),this.style.addSource(P,f),this._update(!0)}isSourceLoaded(P){const f=this.style&&this.style._getSourceCaches(P);if(0!==f.length)return f.every(w=>w.loaded());this.fire(new k.ErrorEvent(new Error(`There is no source with ID '${P}'`)))}areTilesLoaded(){const P=this.style&&this.style._sourceCaches;for(const f in P){const w=P[f]._tiles;for(const O in w){const U=w[O];if("loaded"!==U.state&&"errored"!==U.state)return!1}}return!0}addSourceType(P,f,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(P,f,w)}removeSource(P){return this.style.removeSource(P),this._updateTerrain(),this._update(!0)}getSource(P){return this.style.getSource(P)}addImage(P,f,{pixelRatio:w=1,sdf:O=!1,stretchX:U,stretchY:q,content:ee}={}){if(this._lazyInitEmptyStyle(),f instanceof Yc||Ou&&f instanceof Ou){const{width:se,height:ue,data:me}=k.exported.getImageData(f);this.style.addImage(P,{data:new k.RGBAImage({width:se,height:ue},me),pixelRatio:w,stretchX:U,stretchY:q,content:ee,sdf:O,version:0})}else{if(void 0===f.width||void 0===f.height)return this.fire(new k.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:se,height:ue,data:me}=f,Ce=f;this.style.addImage(P,{data:new k.RGBAImage({width:se,height:ue},new Uint8Array(me)),pixelRatio:w,stretchX:U,stretchY:q,content:ee,sdf:O,version:0,userImage:Ce}),Ce.onAdd&&Ce.onAdd(this,P)}}}updateImage(P,f){const w=this.style.getImage(P);if(!w)return this.fire(new k.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const O=f instanceof Yc||Ou&&f instanceof Ou?k.exported.getImageData(f):f,{width:U,height:q,data:ee}=O;return void 0===U||void 0===q?this.fire(new k.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):U!==w.data.width||q!==w.data.height?this.fire(new k.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(ee,!(f instanceof Yc||Ou&&f instanceof Ou)),void this.style.updateImage(P,w))}hasImage(P){return P?!!this.style.getImage(P):(this.fire(new k.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(P){this.style.removeImage(P)}loadImage(P,f){k.getImage(this._requestManager.transformRequest(P,k.ResourceType.Image),(w,O)=>{f(w,O instanceof Yc?k.exported.getImageData(O):O)})}listImages(){return this.style.listImages()}addLayer(P,f){return this._lazyInitEmptyStyle(),this.style.addLayer(P,f),this._update(!0)}moveLayer(P,f){return this.style.moveLayer(P,f),this._update(!0)}removeLayer(P){return this.style.removeLayer(P),this._update(!0)}getLayer(P){return this.style.getLayer(P)}setLayerZoomRange(P,f,w){return this.style.setLayerZoomRange(P,f,w),this._update(!0)}setFilter(P,f,w={}){return this.style.setFilter(P,f,w),this._update(!0)}getFilter(P){return this.style.getFilter(P)}setPaintProperty(P,f,w,O={}){return this.style.setPaintProperty(P,f,w,O),this._update(!0)}getPaintProperty(P,f){return this.style.getPaintProperty(P,f)}setLayoutProperty(P,f,w,O={}){return this.style.setLayoutProperty(P,f,w,O),this._update(!0)}getLayoutProperty(P,f){return this.style.getLayoutProperty(P,f)}setLight(P,f={}){return this._lazyInitEmptyStyle(),this.style.setLight(P,f),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(P){return this._lazyInitEmptyStyle(),this.style.setTerrain(P),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(P){return this._lazyInitEmptyStyle(),this.style.setFog(P),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(P){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(k.LngLat.convert(P),this.transform):0}setFeatureState(P,f){return this.style.setFeatureState(P,f),this._update()}removeFeatureState(P,f){return this.style.removeFeatureState(P,f),this._update()}getFeatureState(P){return this.style.getFeatureState(P)}_containerDimensions(){let P=0,f=0;return this._container&&(P=this._container.clientWidth||400,f=this._container.clientHeight||300),[P,f]}_detectMissingCSS(){"rgb(250, 128, 114)"!==k.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&k.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const P=this._container;P.classList.add("mapboxgl-map"),(this._missingCSSCanary=je.create("div","mapboxgl-canary",P)).style.visibility="hidden",this._detectMissingCSS();const f=this._canvasContainer=je.create("div","mapboxgl-canvas-container",P);this._interactive&&f.classList.add("mapboxgl-interactive"),this._canvas=je.create("canvas","mapboxgl-canvas",f),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);const O=this._controlContainer=je.create("div","mapboxgl-control-container",P),U=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(q=>{U[q]=je.create("div",`mapboxgl-ctrl-${q}`,O)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(P,f){const w=k.exported.devicePixelRatio||1;this._canvas.width=w*P,this._canvas.height=w*f,this._canvas.style.width=`${P}px`,this._canvas.style.height=`${f}px`}_addMarker(P){this._markers.push(P)}_removeMarker(P){const f=this._markers.indexOf(P);-1!==f&&this._markers.splice(f,1)}_setupPainter(){const P=k.extend({},gt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),f=this._canvas.getContext("webgl",P)||this._canvas.getContext("experimental-webgl",P);f?(k.storeAuthState(f,!0),this.painter=new jp(f,this.transform),this.on("data",w=>{"source"===w.dataType&&this.painter.setTileLoadedFlag(!0)}),k.exported$1.testSupport(f)):this.fire(new k.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(P){P.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new k.Event("webglcontextlost",{originalEvent:P}))}_contextRestored(P){this._setupPainter(),this.resize(),this._update(),this.fire(new k.Event("webglcontextrestored",{originalEvent:P}))}_onMapScroll(P){if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(P){return this.style?(this._styleDirty=this._styleDirty||P,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(P){return this._update(),this._renderTaskQueue.add(P)}_cancelRenderFrame(P){this._renderTaskQueue.remove(P)}_requestDomTask(P){!this.isMoving()&&this.loaded()?P():this._domRenderTaskQueue.add(P)}_render(P){let f;const w=this.painter.context.extTimerQuery,O=k.exported.now();this.listens("gpu-timing-frame")&&(f=w.createQueryEXT(),w.beginQueryEXT(w.TIME_ELAPSED_EXT,f));let U=this._updateAverageElevation(O);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(P),this._domRenderTaskQueue.run(P),this._removed)return;let q=!1;const ee=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const ue=this.transform.zoom,me=k.exported.now();this.style.zoomHistory.update(ue,me);const Ce=new k.EvaluationParameters(ue,{now:me,fadeDuration:ee,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ae=Ce.crossFadingFactor();1===Ae&&Ae===this._crossFadingFactor||(q=!0,this._crossFadingFactor=Ae),this.style.update(Ce)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,ee,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:ee,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new k.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new k.Event("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ue=k.exported.now()-O;w.endQueryEXT(w.TIME_ELAPSED_EXT,f),setTimeout(()=>{const me=w.getQueryObjectEXT(f,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(f),this.fire(new k.Event("gpu-timing-frame",{cpuTime:ue,gpuTime:me}))},50)}if(this.listens("gpu-timing-layer")){const ue=this.painter.collectGpuTimers();setTimeout(()=>{const me=this.painter.queryGpuTimers(ue);this.fire(new k.Event("gpu-timing-layer",{layerTimes:me}))},50)}const se=this._sourcesDirty||this._styleDirty||this._placementDirty||U;if(se||this._repaint)this.triggerRepaint();else{const ue=!this.isMoving()&&this.loaded();if(ue&&(U=this._updateAverageElevation(O,!0)),U)this.triggerRepaint();else if(this._triggerFrame(!1),ue&&(this.fire(new k.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const me=this._calculateSpeedIndex();this.fire(new k.Event("speedindexcompleted",{speedIndex:me})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||se||(this._fullyLoaded=!0,this._authenticate()),this}_updateAverageElevation(P,f=!1){const w=O=>(this.transform.averageElevation=O,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&w(0);if((f||P-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(P)){const O=this.transform.averageElevation;let U=this.transform.sampleAverageElevation();isNaN(U)?U=0:this._averageElevationLastSampledAt=P;const q=Math.abs(O-U);if(q>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(U),w(U);this._averageElevation.easeTo(U,P,300)}else if(q>1e-4)return this._averageElevation.jumpTo(U),w(U)}return!!this._averageElevation.isEasing(P)&&w(this._averageElevation.getValue(P))}_authenticate(){k.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,P=>{if(P&&(P.message===k.AUTH_ERR_MSG||401===P.status)){const f=this.painter.context.gl;k.storeAuthState(f,!1),this._logoControl instanceof Hc&&this._logoControl._updateLogo(),f&&f.clear(f.DEPTH_BUFFER_BIT|f.COLOR_BUFFER_BIT|f.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new k.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),k.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const P=this.painter.canvasCopy(),f=this.painter.getCanvasCopiesAndTimestamps();f.timeStamps.push(performance.now());const w=this.painter.context.gl,O=w.createFramebuffer();function U(q){w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,q,0);const ee=new Uint8Array(w.drawingBufferWidth*w.drawingBufferHeight*4);return w.readPixels(0,0,w.drawingBufferWidth,w.drawingBufferHeight,w.RGBA,w.UNSIGNED_BYTE,ee),ee}return w.bindFramebuffer(w.FRAMEBUFFER,O),this._canvasPixelComparison(U(P),f.canvasCopies.map(U),f.timeStamps)}_canvasPixelComparison(P,f,w){let O=w[1]-w[0];const U=P.length/4;for(let q=0;q<f.length;q++){const ee=f[q];let se=0;for(let ue=0;ue<ee.length;ue+=4)ee[ue]===P[ue]&&ee[ue+1]===P[ue+1]&&ee[ue+2]===P[ue+2]&&ee[ue+3]===P[ue+3]&&(se+=1);O+=(w[q+2]-w[q+1])*(1-se/U)}return O}remove(){this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==k.window&&(k.window.removeEventListener("resize",this._onWindowResize,!1),k.window.removeEventListener("orientationchange",this._onWindowResize,!1),k.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),k.window.removeEventListener("online",this._onWindowOnline,!1));const P=this.painter.context.gl.getExtension("WEBGL_lose_context");P&&P.loseContext(),Ch(this._canvasContainer),Ch(this._controlContainer),Ch(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),k.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new k.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(P){this._renderNextFrame=this._renderNextFrame||P,this.style&&!this._frame&&(this._frame=k.exported.frame(f=>{const w=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,w&&this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(P){this._trackResize&&this.resize({originalEvent:P})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(P){this._showTileBoundaries!==P&&(this._showTileBoundaries=P,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(P){this._showTerrainWireframe!==P&&(this._showTerrainWireframe=P,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(P){this._speedIndexTiming!==P&&(this._speedIndexTiming=P,this._update())}get showPadding(){return!!this._showPadding}set showPadding(P){this._showPadding!==P&&(this._showPadding=P,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(P){this._showCollisionBoxes!==P&&(this._showCollisionBoxes=P,P?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(P){this._showOverdrawInspector!==P&&(this._showOverdrawInspector=P,this._update())}get repaint(){return!!this._repaint}set repaint(P){this._repaint!==P&&(this._repaint=P,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(P){this._vertices=P,this._update()}_setCacheLimits(P,f){k.setCacheLimits(P,f)}get version(){return k.version}},NavigationControl:class{constructor(P){this.options=k.extend({},op,P),this._container=je.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",f=>f.preventDefault()),this.options.showZoom&&(k.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",f=>this._map.zoomIn({},{originalEvent:f})),je.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",f=>this._map.zoomOut({},{originalEvent:f})),je.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(k.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",f=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:f}):this._map.resetNorth({},{originalEvent:f})}),this._compassIcon=je.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const P=this._map.getZoom(),f=P===this._map.getMaxZoom(),w=P===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())}_rotateCompassArrow(){const P=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=P)})}onAdd(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new sp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){je.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(P,f){const w=je.create("button",P,this._container);return w.type="button",w.addEventListener("click",f),w}_setButtonTitle(P,f){const w=this._map._getUIString(`NavigationControl.${f}`);P.title=w,P.setAttribute("aria-label",w)}},GeolocateControl:class extends k.Evented{constructor(P){super(),this.options=k.extend({},Oo,P),k.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=sd(this._updateMarkerRotation,20)}onAdd(P){var f;return this._map=P,this._container=je.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),f=this._setupUI,void 0!==Nn?f(Nn):void 0!==k.window.navigator.permissions?k.window.navigator.permissions.query({name:"geolocation"}).then(w=>{Nn="denied"!==w.state,f(Nn)}):(Nn=!!k.window.navigator.geolocation,f(Nn)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(k.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),je.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ps=0,qc=!1}_isOutOfMapMaxBounds(P){const f=this._map.getMaxBounds(),w=P.coords;return f&&(w.longitude<f.getWest()||w.longitude>f.getEast()||w.latitude<f.getSouth()||w.latitude>f.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(P){if(this._map){if(this._isOutOfMapMaxBounds(P))return this._setErrorState(),this.fire(new k.Event("outofmaxbounds",P)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=P,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(P),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(P),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new k.Event("geolocate",P)),this._finish()}}_updateCamera(P){const f=new k.LngLat(P.coords.longitude,P.coords.latitude),w=P.coords.accuracy,O=this._map.getBearing(),U=k.extend({bearing:O},this.options.fitBoundsOptions);this._map.fitBounds(f.toBounds(w),U,{geolocateSource:!0})}_updateMarker(P){if(P){const f=new k.LngLat(P.coords.longitude,P.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=P.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const P=this._map._container.clientHeight/2,f=this._map.unproject([0,P]),w=this._map.unproject([100,P]),O=f.distanceTo(w)/100,U=Math.ceil(2*this._accuracy/O);this._circleElement.style.width=`${U}px`,this._circleElement.style.height=`${U}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(P){if(this._map){if(this.options.trackUserLocation)if(1===P.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===P.code&&qc)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new k.Event("error",P)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(P){if(this._container.addEventListener("contextmenu",f=>f.preventDefault()),this._geolocateButton=je.create("button","mapboxgl-ctrl-geolocate",this._container),je.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===P){k.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=je.create("div","mapboxgl-user-location"),this._dotElement.appendChild(je.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(je.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jl({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=je.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||"ACTIVE_LOCK"!==this._watchState||f.originalEvent&&"resize"===f.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new k.Event("trackuserlocationend")))})}_onDeviceOrientation(P){this._userLocationDotMarker&&(P.webkitCompassHeading?this._heading=P.webkitCompassHeading:!0===P.absolute&&(this._heading=-1*P.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return k.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new k.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ps--,qc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new k.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new k.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let P;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ps++,Ps>1?(P={maximumAge:6e5,timeout:0},qc=!0):(P=this.options.positionOptions,qc=!1),this._geolocationWatchID=k.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,P),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else k.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const P=()=>{k.window.addEventListener("ondeviceorientationabsolute"in k.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};void 0!==k.window.DeviceMotionEvent&&"function"==typeof k.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(f=>{"granted"===f&&P()}).catch(console.error):P()}_clearWatch(){k.window.navigator.geolocation.clearWatch(this._geolocationWatchID),k.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),k.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ca,ScaleControl:class{constructor(P){this.options=k.extend({},gs,P),k.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Bf(this._map,this._container,this.options)}onAdd(P){return this._map=P,this._container=je.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){je.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(P){this.options.unit=P,Bf(this._map,this._container,this.options)}},FullscreenControl:class{constructor(P){this._fullscreen=!1,P&&P.container&&(P.container instanceof k.window.HTMLElement?this._container=P.container:k.warnOnce("Full screen control 'container' must be a DOM element.")),k.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in k.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in k.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=je.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",k.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){je.remove(this._controlContainer),this._map=null,k.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!k.window.document.fullscreenEnabled&&!k.window.document.webkitFullscreenEnabled)}_setupUI(){const P=this._fullscreenButton=je.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);je.create("span","mapboxgl-ctrl-icon",P).setAttribute("aria-hidden",!0),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),k.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(k.window.document.fullscreenElement||k.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?k.window.document.exitFullscreen?k.window.document.exitFullscreen():k.window.document.webkitCancelFullScreen&&k.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends k.Evented{constructor(P){super(),this.options=k.extend(Object.create(zf),P),k.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(P){return this._map&&this.remove(),this._map=P,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new k.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&je.remove(this._content),this._container&&(je.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new k.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(P){return this._lngLat=k.LngLat.convert(P),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(P){return this.setDOMContent(k.window.document.createTextNode(P))}setHTML(P){const f=k.window.document.createDocumentFragment(),w=k.window.document.createElement("body");let O;for(w.innerHTML=P;O=w.firstChild,O;)f.appendChild(O);return this.setDOMContent(f)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(P){return this.options.maxWidth=P,this._update(),this}setDOMContent(P){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=je.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(P),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(P){this._container&&this._container.classList.add(P)}removeClassName(P){this._container&&this._container.classList.remove(P)}setOffset(P){return this.options.offset=P,this._update(),this}toggleClassName(P){if(this._container)return this._container.classList.toggle(P)}_createCloseButton(){this.options.closeButton&&(this._closeButton=je.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(P){this._update(P.point)}_onMouseMove(P){this._update(P.point)}_onDrag(P){this._update(P.point)}_update(P){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=je.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=je.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(q=>this._container.classList.add(q)),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=fc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!P))return;const f=this._pos=this._trackPointer&&P?P:this._map.project(this._lngLat);let w=this.options.anchor;const O=ld(this.options.offset);if(!w){const q=this._container.offsetWidth,ee=this._container.offsetHeight;let se;se=f.y+O.bottom.y<ee?["top"]:f.y>this._map.transform.height-ee?["bottom"]:[],f.x<q/2?se.push("left"):f.x>this._map.transform.width-q/2&&se.push("right"),w=0===se.length?"bottom":se.join("-")}const U=f.add(O[w]).round();this._map._requestDomTask(()=>{this._container&&w&&(je.setTransform(this._container,`${wh[w]} translate(${U.x}px,${U.y}px)`),Gc(this._container,w,"popup"))})}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const P=this._container.querySelector(Zc);P&&P.focus()}_onClose(){this.remove()}_setOpacity(P){this._content&&(this._content.style.opacity=P),this._tip&&(this._tip.style.opacity=P)}},Marker:jl,Style:Uo,LngLat:k.LngLat,LngLatBounds:k.LngLatBounds,Point:k.pointGeometry,MercatorCoordinate:k.MercatorCoordinate,FreeCameraOptions:zc,Evented:k.Evented,config:k.config,prewarm:function(){ve().acquire(xt)},clearPrewarmedResources:function(){const P=tn;P&&(P.isPreloaded()&&1===P.numActive()?(P.release(xt),tn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return k.config.ACCESS_TOKEN},set accessToken(P){k.config.ACCESS_TOKEN=P},get baseApiUrl(){return k.config.API_URL},set baseApiUrl(P){k.config.API_URL=P},get workerCount(){return Ft.workerCount},set workerCount(P){Ft.workerCount=P},get maxParallelImageRequests(){return k.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(P){k.config.MAX_PARALLEL_IMAGE_REQUESTS=P},clearStorage(P){k.clearTileCache(P)},workerUrl:"",workerClass:null,setNow:k.exported.setNow,restoreNow:k.exported.restoreNow};return ap}),s}()},3098:(ai,_n,nt)=>{"use strict";nt.d(_n,{P:()=>gt});var s=nt(9193),Vt=nt(5917),Ee=nt(205);class gt{constructor(wt,Be,je){this.kind=wt,this.value=Be,this.error=je,this.hasValue="N"===wt}observe(wt){switch(this.kind){case"N":return wt.next&&wt.next(this.value);case"E":return wt.error&&wt.error(this.error);case"C":return wt.complete&&wt.complete()}}do(wt,Be,je){switch(this.kind){case"N":return wt&&wt(this.value);case"E":return Be&&Be(this.error);case"C":return je&&je()}}accept(wt,Be,je){return wt&&"function"==typeof wt.next?this.observe(wt):this.do(wt,Be,je)}toObservable(){switch(this.kind){case"N":return(0,Vt.of)(this.value);case"E":return(0,Ee._)(this.error);case"C":return(0,s.c)()}throw new Error("unexpected notification kind value")}static createNext(wt){return void 0!==wt?new gt("N",wt):gt.undefinedValueNotification}static createError(wt){return new gt("E",void 0,wt)}static createComplete(){return gt.completeNotification}}gt.completeNotification=new gt("C"),gt.undefinedValueNotification=new gt("N",void 0)},7574:(ai,_n,nt)=>{"use strict";nt.d(_n,{y:()=>Et});var s=nt(7393),Ee=nt(9181),k=nt(6490),Dt=nt(6554),wt=nt(4487);var Ve=nt(2494);let Et=(()=>{class Ct{constructor(an){this._isScalar=!1,an&&(this._subscribe=an)}lift(an){const Qe=new Ct;return Qe.source=this,Qe.operator=an,Qe}subscribe(an,Qe,On){const{operator:dn}=this,Mt=function(Ct,zt,an){if(Ct){if(Ct instanceof s.L)return Ct;if(Ct[Ee.b])return Ct[Ee.b]()}return Ct||zt||an?new s.L(Ct,zt,an):new s.L(k.c)}(an,Qe,On);if(Mt.add(dn?dn.call(Mt,this.source):this.source||Ve.v.useDeprecatedSynchronousErrorHandling&&!Mt.syncErrorThrowable?this._subscribe(Mt):this._trySubscribe(Mt)),Ve.v.useDeprecatedSynchronousErrorHandling&&Mt.syncErrorThrowable&&(Mt.syncErrorThrowable=!1,Mt.syncErrorThrown))throw Mt.syncErrorValue;return Mt}_trySubscribe(an){try{return this._subscribe(an)}catch(Qe){Ve.v.useDeprecatedSynchronousErrorHandling&&(an.syncErrorThrown=!0,an.syncErrorValue=Qe),function(Ct){for(;Ct;){const{closed:zt,destination:an,isStopped:Qe}=Ct;if(zt||Qe)return!1;Ct=an&&an instanceof s.L?an:null}return!0}(an)?an.error(Qe):console.warn(Qe)}}forEach(an,Qe){return new(Qe=lt(Qe))((On,dn)=>{let Mt;Mt=this.subscribe(Ui=>{try{an(Ui)}catch($r){dn($r),Mt&&Mt.unsubscribe()}},dn,On)})}_subscribe(an){const{source:Qe}=this;return Qe&&Qe.subscribe(an)}[Dt.L](){return this}pipe(...an){return 0===an.length?this:function(Ct){return 0===Ct.length?wt.y:1===Ct.length?Ct[0]:function(an){return Ct.reduce((Qe,On)=>On(Qe),an)}}(an)(this)}toPromise(an){return new(an=lt(an))((Qe,On)=>{let dn;this.subscribe(Mt=>dn=Mt,Mt=>On(Mt),()=>Qe(dn))})}}return Ct.create=zt=>new Ct(zt),Ct})();function lt(Ct){if(Ct||(Ct=Ve.v.Promise||Promise),!Ct)throw new Error("no Promise impl found");return Ct}},6490:(ai,_n,nt)=>{"use strict";nt.d(_n,{c:()=>Ee});var s=nt(2494),Vt=nt(4449);const Ee={closed:!0,next(k){},error(k){if(s.v.useDeprecatedSynchronousErrorHandling)throw k;(0,Vt.z)(k)},complete(){}}},9765:(ai,_n,nt)=>{"use strict";nt.d(_n,{Yc:()=>wt,xQ:()=>Be});var s=nt(7574),Vt=nt(7393),Ee=nt(5319),k=nt(7971),gt=nt(8858),Dt=nt(9181);class wt extends Vt.L{constructor(Et){super(Et),this.destination=Et}}let Be=(()=>{class Ve extends s.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Dt.b](){return new wt(this)}lift(lt){const Ct=new je(this,this);return Ct.operator=lt,Ct}next(lt){if(this.closed)throw new k.N;if(!this.isStopped){const{observers:Ct}=this,zt=Ct.length,an=Ct.slice();for(let Qe=0;Qe<zt;Qe++)an[Qe].next(lt)}}error(lt){if(this.closed)throw new k.N;this.hasError=!0,this.thrownError=lt,this.isStopped=!0;const{observers:Ct}=this,zt=Ct.length,an=Ct.slice();for(let Qe=0;Qe<zt;Qe++)an[Qe].error(lt);this.observers.length=0}complete(){if(this.closed)throw new k.N;this.isStopped=!0;const{observers:lt}=this,Ct=lt.length,zt=lt.slice();for(let an=0;an<Ct;an++)zt[an].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(lt){if(this.closed)throw new k.N;return super._trySubscribe(lt)}_subscribe(lt){if(this.closed)throw new k.N;return this.hasError?(lt.error(this.thrownError),Ee.w.EMPTY):this.isStopped?(lt.complete(),Ee.w.EMPTY):(this.observers.push(lt),new gt.W(this,lt))}asObservable(){const lt=new s.y;return lt.source=this,lt}}return Ve.create=(Et,lt)=>new je(Et,lt),Ve})();class je extends Be{constructor(Et,lt){super(),this.destination=Et,this.source=lt}next(Et){const{destination:lt}=this;lt&&lt.next&&lt.next(Et)}error(Et){const{destination:lt}=this;lt&&lt.error&&this.destination.error(Et)}complete(){const{destination:Et}=this;Et&&Et.complete&&this.destination.complete()}_subscribe(Et){const{source:lt}=this;return lt?this.source.subscribe(Et):Ee.w.EMPTY}}},8858:(ai,_n,nt)=>{"use strict";nt.d(_n,{W:()=>Vt});var s=nt(5319);class Vt extends s.w{constructor(k,gt){super(),this.subject=k,this.subscriber=gt,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const k=this.subject,gt=k.observers;if(this.subject=null,!gt||0===gt.length||k.isStopped||k.closed)return;const Dt=gt.indexOf(this.subscriber);-1!==Dt&&gt.splice(Dt,1)}}},7393:(ai,_n,nt)=>{"use strict";nt.d(_n,{L:()=>wt});var s=nt(9105),Vt=nt(6490),Ee=nt(5319),k=nt(9181),gt=nt(2494),Dt=nt(4449);class wt extends Ee.w{constructor(Ve,Et,lt){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Vt.c;break;case 1:if(!Ve){this.destination=Vt.c;break}if("object"==typeof Ve){Ve instanceof wt?(this.syncErrorThrowable=Ve.syncErrorThrowable,this.destination=Ve,Ve.add(this)):(this.syncErrorThrowable=!0,this.destination=new Be(this,Ve));break}default:this.syncErrorThrowable=!0,this.destination=new Be(this,Ve,Et,lt)}}[k.b](){return this}static create(Ve,Et,lt){const Ct=new wt(Ve,Et,lt);return Ct.syncErrorThrowable=!1,Ct}next(Ve){this.isStopped||this._next(Ve)}error(Ve){this.isStopped||(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(Ve){this.destination.next(Ve)}_error(Ve){this.destination.error(Ve),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:Ve}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=Ve,this}}class Be extends wt{constructor(Ve,Et,lt,Ct){super(),this._parentSubscriber=Ve;let zt,an=this;(0,s.m)(Et)?zt=Et:Et&&(zt=Et.next,lt=Et.error,Ct=Et.complete,Et!==Vt.c&&(an=Object.create(Et),(0,s.m)(an.unsubscribe)&&this.add(an.unsubscribe.bind(an)),an.unsubscribe=this.unsubscribe.bind(this))),this._context=an,this._next=zt,this._error=lt,this._complete=Ct}next(Ve){if(!this.isStopped&&this._next){const{_parentSubscriber:Et}=this;gt.v.useDeprecatedSynchronousErrorHandling&&Et.syncErrorThrowable?this.__tryOrSetError(Et,this._next,Ve)&&this.unsubscribe():this.__tryOrUnsub(this._next,Ve)}}error(Ve){if(!this.isStopped){const{_parentSubscriber:Et}=this,{useDeprecatedSynchronousErrorHandling:lt}=gt.v;if(this._error)lt&&Et.syncErrorThrowable?(this.__tryOrSetError(Et,this._error,Ve),this.unsubscribe()):(this.__tryOrUnsub(this._error,Ve),this.unsubscribe());else if(Et.syncErrorThrowable)lt?(Et.syncErrorValue=Ve,Et.syncErrorThrown=!0):(0,Dt.z)(Ve),this.unsubscribe();else{if(this.unsubscribe(),lt)throw Ve;(0,Dt.z)(Ve)}}}complete(){if(!this.isStopped){const{_parentSubscriber:Ve}=this;if(this._complete){const Et=()=>this._complete.call(this._context);gt.v.useDeprecatedSynchronousErrorHandling&&Ve.syncErrorThrowable?(this.__tryOrSetError(Ve,Et),this.unsubscribe()):(this.__tryOrUnsub(Et),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(Ve,Et){try{Ve.call(this._context,Et)}catch(lt){if(this.unsubscribe(),gt.v.useDeprecatedSynchronousErrorHandling)throw lt;(0,Dt.z)(lt)}}__tryOrSetError(Ve,Et,lt){if(!gt.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Et.call(this._context,lt)}catch(Ct){return gt.v.useDeprecatedSynchronousErrorHandling?(Ve.syncErrorValue=Ct,Ve.syncErrorThrown=!0,!0):((0,Dt.z)(Ct),!0)}return!1}_unsubscribe(){const{_parentSubscriber:Ve}=this;this._context=null,this._parentSubscriber=null,Ve.unsubscribe()}}},5319:(ai,_n,nt)=>{"use strict";nt.d(_n,{w:()=>Dt});var s=nt(9796),Vt=nt(1555),Ee=nt(9105);const gt=(()=>{function Be(je){return Error.call(this),this.message=je?`${je.length} errors occurred during unsubscription:\n${je.map((Ve,Et)=>`${Et+1}) ${Ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=je,this}return Be.prototype=Object.create(Error.prototype),Be})();class Dt{constructor(je){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,je&&(this._ctorUnsubscribe=!0,this._unsubscribe=je)}unsubscribe(){let je;if(this.closed)return;let{_parentOrParents:Ve,_ctorUnsubscribe:Et,_unsubscribe:lt,_subscriptions:Ct}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,Ve instanceof Dt)Ve.remove(this);else if(null!==Ve)for(let zt=0;zt<Ve.length;++zt)Ve[zt].remove(this);if((0,Ee.m)(lt)){Et&&(this._unsubscribe=void 0);try{lt.call(this)}catch(zt){je=zt instanceof gt?wt(zt.errors):[zt]}}if((0,s.k)(Ct)){let zt=-1,an=Ct.length;for(;++zt<an;){const Qe=Ct[zt];if((0,Vt.K)(Qe))try{Qe.unsubscribe()}catch(On){je=je||[],On instanceof gt?je=je.concat(wt(On.errors)):je.push(On)}}}if(je)throw new gt(je)}add(je){let Ve=je;if(!je)return Dt.EMPTY;switch(typeof je){case"function":Ve=new Dt(je);case"object":if(Ve===this||Ve.closed||"function"!=typeof Ve.unsubscribe)return Ve;if(this.closed)return Ve.unsubscribe(),Ve;if(!(Ve instanceof Dt)){const Ct=Ve;Ve=new Dt,Ve._subscriptions=[Ct]}break;default:throw new Error("unrecognized teardown "+je+" added to Subscription.")}let{_parentOrParents:Et}=Ve;if(null===Et)Ve._parentOrParents=this;else if(Et instanceof Dt){if(Et===this)return Ve;Ve._parentOrParents=[Et,this]}else{if(-1!==Et.indexOf(this))return Ve;Et.push(this)}const lt=this._subscriptions;return null===lt?this._subscriptions=[Ve]:lt.push(Ve),Ve}remove(je){const Ve=this._subscriptions;if(Ve){const Et=Ve.indexOf(je);-1!==Et&&Ve.splice(Et,1)}}}var Be;function wt(Be){return Be.reduce((je,Ve)=>je.concat(Ve instanceof gt?Ve.errors:Ve),[])}Dt.EMPTY=((Be=new Dt).closed=!0,Be)},2494:(ai,_n,nt)=>{"use strict";nt.d(_n,{v:()=>Vt});let s=!1;const Vt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Ee){if(Ee){const k=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+k.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=Ee},get useDeprecatedSynchronousErrorHandling(){return s}}},5345:(ai,_n,nt)=>{"use strict";nt.d(_n,{IY:()=>k,Ds:()=>Dt,ft:()=>Be});var s=nt(7393),Vt=nt(7574),Ee=nt(7444);class k extends s.L{constructor(Ve){super(),this.parent=Ve}_next(Ve){this.parent.notifyNext(Ve)}_error(Ve){this.parent.notifyError(Ve),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Dt extends s.L{notifyNext(Ve){this.destination.next(Ve)}notifyError(Ve){this.destination.error(Ve)}notifyComplete(){this.destination.complete()}}function Be(je,Ve){if(Ve.closed)return;if(je instanceof Vt.y)return je.subscribe(Ve);let Et;try{Et=(0,Ee.s)(je)(Ve)}catch(lt){Ve.error(lt)}return Et}},2441:(ai,_n,nt)=>{"use strict";nt.d(_n,{c:()=>gt,N:()=>Dt});var s=nt(9765),Vt=nt(7574),Ee=nt(5319),k=nt(1307);class gt extends Vt.y{constructor(Et,lt){super(),this.source=Et,this.subjectFactory=lt,this._refCount=0,this._isComplete=!1}_subscribe(Et){return this.getSubject().subscribe(Et)}getSubject(){const Et=this._subject;return(!Et||Et.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Et=this._connection;return Et||(this._isComplete=!1,Et=this._connection=new Ee.w,Et.add(this.source.subscribe(new wt(this.getSubject(),this))),Et.closed&&(this._connection=null,Et=Ee.w.EMPTY)),Et}refCount(){return(0,k.x)()(this)}}const Dt=(()=>{const Ve=gt.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Ve._subscribe},_isComplete:{value:Ve._isComplete,writable:!0},getSubject:{value:Ve.getSubject},connect:{value:Ve.connect},refCount:{value:Ve.refCount}}})();class wt extends s.Yc{constructor(Et,lt){super(Et),this.connectable=lt}_error(Et){this._unsubscribe(),super._error(Et)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Et=this.connectable;if(Et){this.connectable=null;const lt=Et._connection;Et._refCount=0,Et._subject=null,Et._connection=null,lt&&lt.unsubscribe()}}}},9193:(ai,_n,nt)=>{"use strict";nt.d(_n,{E:()=>Vt,c:()=>Ee});var s=nt(7574);const Vt=new s.y(gt=>gt.complete());function Ee(gt){return gt?function(gt){return new s.y(Dt=>gt.schedule(()=>Dt.complete()))}(gt):Vt}},4402:(ai,_n,nt)=>{"use strict";nt.d(_n,{D:()=>an});var s=nt(7574),Vt=nt(7444),Ee=nt(5319),k=nt(6554),wt=nt(4087),Be=nt(377),Et=nt(4072),lt=nt(9489);function an(Qe,On){return On?function(Qe,On){if(null!=Qe){if(function(Qe){return Qe&&"function"==typeof Qe[k.L]}(Qe))return function(Qe,On){return new s.y(dn=>{const Mt=new Ee.w;return Mt.add(On.schedule(()=>{const Ui=Qe[k.L]();Mt.add(Ui.subscribe({next($r){Mt.add(On.schedule(()=>dn.next($r)))},error($r){Mt.add(On.schedule(()=>dn.error($r)))},complete(){Mt.add(On.schedule(()=>dn.complete()))}}))})),Mt})}(Qe,On);if((0,Et.t)(Qe))return function(Qe,On){return new s.y(dn=>{const Mt=new Ee.w;return Mt.add(On.schedule(()=>Qe.then(Ui=>{Mt.add(On.schedule(()=>{dn.next(Ui),Mt.add(On.schedule(()=>dn.complete()))}))},Ui=>{Mt.add(On.schedule(()=>dn.error(Ui)))}))),Mt})}(Qe,On);if((0,lt.z)(Qe))return(0,wt.r)(Qe,On);if(function(Qe){return Qe&&"function"==typeof Qe[Be.hZ]}(Qe)||"string"==typeof Qe)return function(Qe,On){if(!Qe)throw new Error("Iterable cannot be null");return new s.y(dn=>{const Mt=new Ee.w;let Ui;return Mt.add(()=>{Ui&&"function"==typeof Ui.return&&Ui.return()}),Mt.add(On.schedule(()=>{Ui=Qe[Be.hZ](),Mt.add(On.schedule(function(){if(dn.closed)return;let $r,Vn;try{const Di=Ui.next();$r=Di.value,Vn=Di.done}catch(Di){return void dn.error(Di)}Vn?dn.complete():(dn.next($r),this.schedule())}))})),Mt})}(Qe,On)}throw new TypeError((null!==Qe&&typeof Qe||Qe)+" is not observable")}(Qe,On):Qe instanceof s.y?Qe:new s.y((0,Vt.s)(Qe))}},6693:(ai,_n,nt)=>{"use strict";nt.d(_n,{n:()=>k});var s=nt(7574),Vt=nt(5015),Ee=nt(4087);function k(gt,Dt){return Dt?(0,Ee.r)(gt,Dt):new s.y((0,Vt.V)(gt))}},6682:(ai,_n,nt)=>{"use strict";nt.d(_n,{T:()=>gt});var s=nt(7574),Vt=nt(4869),Ee=nt(3282),k=nt(6693);function gt(...Dt){let wt=Number.POSITIVE_INFINITY,Be=null,je=Dt[Dt.length-1];return(0,Vt.K)(je)?(Be=Dt.pop(),Dt.length>1&&"number"==typeof Dt[Dt.length-1]&&(wt=Dt.pop())):"number"==typeof je&&(wt=Dt.pop()),null===Be&&1===Dt.length&&Dt[0]instanceof s.y?Dt[0]:(0,Ee.J)(wt)((0,k.n)(Dt,Be))}},5917:(ai,_n,nt)=>{"use strict";nt.d(_n,{of:()=>k});var s=nt(4869),Vt=nt(6693),Ee=nt(4087);function k(...gt){let Dt=gt[gt.length-1];return(0,s.K)(Dt)?(gt.pop(),(0,Ee.r)(gt,Dt)):(0,Vt.n)(gt)}},205:(ai,_n,nt)=>{"use strict";nt.d(_n,{_:()=>Vt});var s=nt(7574);function Vt(k,gt){return new s.y(gt?Dt=>gt.schedule(Ee,0,{error:k,subscriber:Dt}):Dt=>Dt.error(k))}function Ee({error:k,subscriber:gt}){gt.error(k)}},8002:(ai,_n,nt)=>{"use strict";nt.d(_n,{U:()=>Vt});var s=nt(7393);function Vt(gt,Dt){return function(Be){if("function"!=typeof gt)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Be.lift(new Ee(gt,Dt))}}class Ee{constructor(Dt,wt){this.project=Dt,this.thisArg=wt}call(Dt,wt){return wt.subscribe(new k(Dt,this.project,this.thisArg))}}class k extends s.L{constructor(Dt,wt,Be){super(Dt),this.project=wt,this.count=0,this.thisArg=Be||this}_next(Dt){let wt;try{wt=this.project.call(this.thisArg,Dt,this.count++)}catch(Be){return void this.destination.error(Be)}this.destination.next(wt)}}},3282:(ai,_n,nt)=>{"use strict";nt.d(_n,{J:()=>Ee});var s=nt(9773),Vt=nt(4487);function Ee(k=Number.POSITIVE_INFINITY){return(0,s.zg)(Vt.y,k)}},9773:(ai,_n,nt)=>{"use strict";nt.d(_n,{zg:()=>k});var s=nt(8002),Vt=nt(4402),Ee=nt(5345);function k(Be,je,Ve=Number.POSITIVE_INFINITY){return"function"==typeof je?Et=>Et.pipe(k((lt,Ct)=>(0,Vt.D)(Be(lt,Ct)).pipe((0,s.U)((zt,an)=>je(lt,zt,Ct,an))),Ve)):("number"==typeof je&&(Ve=je),Et=>Et.lift(new gt(Be,Ve)))}class gt{constructor(je,Ve=Number.POSITIVE_INFINITY){this.project=je,this.concurrent=Ve}call(je,Ve){return Ve.subscribe(new Dt(je,this.project,this.concurrent))}}class Dt extends Ee.Ds{constructor(je,Ve,Et=Number.POSITIVE_INFINITY){super(je),this.project=Ve,this.concurrent=Et,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(je){this.active<this.concurrent?this._tryNext(je):this.buffer.push(je)}_tryNext(je){let Ve;const Et=this.index++;try{Ve=this.project(je,Et)}catch(lt){return void this.destination.error(lt)}this.active++,this._innerSub(Ve)}_innerSub(je){const Ve=new Ee.IY(this),Et=this.destination;Et.add(Ve);const lt=(0,Ee.ft)(je,Ve);lt!==Ve&&Et.add(lt)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(je){this.destination.next(je)}notifyComplete(){const je=this.buffer;this.active--,je.length>0?this._next(je.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(ai,_n,nt)=>{"use strict";nt.d(_n,{QV:()=>Ee,ht:()=>gt});var s=nt(7393),Vt=nt(3098);function Ee(wt,Be=0){return function(Ve){return Ve.lift(new k(wt,Be))}}class k{constructor(Be,je=0){this.scheduler=Be,this.delay=je}call(Be,je){return je.subscribe(new gt(Be,this.scheduler,this.delay))}}class gt extends s.L{constructor(Be,je,Ve=0){super(Be),this.scheduler=je,this.delay=Ve}static dispatch(Be){const{notification:je,destination:Ve}=Be;je.observe(Ve),this.unsubscribe()}scheduleMessage(Be){this.destination.add(this.scheduler.schedule(gt.dispatch,this.delay,new Dt(Be,this.destination)))}_next(Be){this.scheduleMessage(Vt.P.createNext(Be))}_error(Be){this.scheduleMessage(Vt.P.createError(Be)),this.unsubscribe()}_complete(){this.scheduleMessage(Vt.P.createComplete()),this.unsubscribe()}}class Dt{constructor(Be,je){this.notification=Be,this.destination=je}}},1307:(ai,_n,nt)=>{"use strict";nt.d(_n,{x:()=>Vt});var s=nt(7393);function Vt(){return function(Dt){return Dt.lift(new Ee(Dt))}}class Ee{constructor(Dt){this.connectable=Dt}call(Dt,wt){const{connectable:Be}=this;Be._refCount++;const je=new k(Dt,Be),Ve=wt.subscribe(je);return je.closed||(je.connection=Be.connect()),Ve}}class k extends s.L{constructor(Dt,wt){super(Dt),this.connectable=wt}_unsubscribe(){const{connectable:Dt}=this;if(!Dt)return void(this.connection=null);this.connectable=null;const wt=Dt._refCount;if(wt<=0)return void(this.connection=null);if(Dt._refCount=wt-1,wt>1)return void(this.connection=null);const{connection:Be}=this,je=Dt._connection;this.connection=null,je&&(!Be||je===Be)&&je.unsubscribe()}}},8819:(ai,_n,nt)=>{"use strict";nt.d(_n,{B:()=>wt});var s=nt(2441);var k=nt(1307),gt=nt(9765);function Dt(){return new gt.xQ}function wt(){return Be=>(0,k.x)()(function(Be,je){return function(Et){let lt;lt="function"==typeof Be?Be:function(){return Be};const Ct=Object.create(Et,s.N);return Ct.source=Et,Ct.subjectFactory=lt,Ct}}(Dt)(Be))}},9673:(ai,_n,nt)=>{"use strict";nt.d(_n,{R:()=>gt});var s=nt(7574),Vt=nt(4581),Ee=nt(6561);class k extends s.y{constructor(Be,je=0,Ve=Vt.e){super(),this.source=Be,this.delayTime=je,this.scheduler=Ve,(!(0,Ee.k)(je)||je<0)&&(this.delayTime=0),(!Ve||"function"!=typeof Ve.schedule)&&(this.scheduler=Vt.e)}static create(Be,je=0,Ve=Vt.e){return new k(Be,je,Ve)}static dispatch(Be){const{source:je,subscriber:Ve}=Be;return this.add(je.subscribe(Ve))}_subscribe(Be){return this.scheduler.schedule(k.dispatch,this.delayTime,{source:this.source,subscriber:Be})}}function gt(wt,Be=0){return function(Ve){return Ve.lift(new Dt(wt,Be))}}class Dt{constructor(Be,je){this.scheduler=Be,this.delay=je}call(Be,je){return new k(je,this.delay,this.scheduler).subscribe(Be)}}},3342:(ai,_n,nt)=>{"use strict";nt.d(_n,{b:()=>k});var s=nt(7393);function Vt(){}var Ee=nt(9105);function k(wt,Be,je){return function(Et){return Et.lift(new gt(wt,Be,je))}}class gt{constructor(Be,je,Ve){this.nextOrObserver=Be,this.error=je,this.complete=Ve}call(Be,je){return je.subscribe(new Dt(Be,this.nextOrObserver,this.error,this.complete))}}class Dt extends s.L{constructor(Be,je,Ve,Et){super(Be),this._tapNext=Vt,this._tapError=Vt,this._tapComplete=Vt,this._tapError=Ve||Vt,this._tapComplete=Et||Vt,(0,Ee.m)(je)?(this._context=this,this._tapNext=je):je&&(this._context=je,this._tapNext=je.next||Vt,this._tapError=je.error||Vt,this._tapComplete=je.complete||Vt)}_next(Be){try{this._tapNext.call(this._context,Be)}catch(je){return void this.destination.error(je)}this.destination.next(Be)}_error(Be){try{this._tapError.call(this._context,Be)}catch(je){return void this.destination.error(je)}this.destination.error(Be)}_complete(){try{this._tapComplete.call(this._context)}catch(Be){return void this.destination.error(Be)}return this.destination.complete()}}},4087:(ai,_n,nt)=>{"use strict";nt.d(_n,{r:()=>Ee});var s=nt(7574),Vt=nt(5319);function Ee(k,gt){return new s.y(Dt=>{const wt=new Vt.w;let Be=0;return wt.add(gt.schedule(function(){Be!==k.length?(Dt.next(k[Be++]),Dt.closed||wt.add(this.schedule())):Dt.complete()})),wt})}},6465:(ai,_n,nt)=>{"use strict";nt.d(_n,{o:()=>Ee});var s=nt(5319);class Vt extends s.w{constructor(gt,Dt){super()}schedule(gt,Dt=0){return this}}class Ee extends Vt{constructor(gt,Dt){super(gt,Dt),this.scheduler=gt,this.work=Dt,this.pending=!1}schedule(gt,Dt=0){if(this.closed)return this;this.state=gt;const wt=this.id,Be=this.scheduler;return null!=wt&&(this.id=this.recycleAsyncId(Be,wt,Dt)),this.pending=!0,this.delay=Dt,this.id=this.id||this.requestAsyncId(Be,this.id,Dt),this}requestAsyncId(gt,Dt,wt=0){return setInterval(gt.flush.bind(gt,this),wt)}recycleAsyncId(gt,Dt,wt=0){if(null!==wt&&this.delay===wt&&!1===this.pending)return Dt;clearInterval(Dt)}execute(gt,Dt){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const wt=this._execute(gt,Dt);if(wt)return wt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(gt,Dt){let Be,wt=!1;try{this.work(gt)}catch(je){wt=!0,Be=!!je&&je||new Error(je)}if(wt)return this.unsubscribe(),Be}_unsubscribe(){const gt=this.id,Dt=this.scheduler,wt=Dt.actions,Be=wt.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Be&&wt.splice(Be,1),null!=gt&&(this.id=this.recycleAsyncId(Dt,gt,null)),this.delay=null}}},6102:(ai,_n,nt)=>{"use strict";nt.d(_n,{v:()=>Vt});let s=(()=>{class Ee{constructor(gt,Dt=Ee.now){this.SchedulerAction=gt,this.now=Dt}schedule(gt,Dt=0,wt){return new this.SchedulerAction(this,gt).schedule(wt,Dt)}}return Ee.now=()=>Date.now(),Ee})();class Vt extends s{constructor(k,gt=s.now){super(k,()=>Vt.delegate&&Vt.delegate!==this?Vt.delegate.now():gt()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(k,gt=0,Dt){return Vt.delegate&&Vt.delegate!==this?Vt.delegate.schedule(k,gt,Dt):super.schedule(k,gt,Dt)}flush(k){const{actions:gt}=this;if(this.active)return void gt.push(k);let Dt;this.active=!0;do{if(Dt=k.execute(k.state,k.delay))break}while(k=gt.shift());if(this.active=!1,Dt){for(;k=gt.shift();)k.unsubscribe();throw Dt}}}},4581:(ai,_n,nt)=>{"use strict";nt.d(_n,{e:()=>lt,E:()=>Et});let s=1;const Vt=Promise.resolve(),Ee={};function k(Ct){return Ct in Ee&&(delete Ee[Ct],!0)}const gt={setImmediate(Ct){const zt=s++;return Ee[zt]=!0,Vt.then(()=>k(zt)&&Ct()),zt},clearImmediate(Ct){k(Ct)}};var wt=nt(6465),je=nt(6102);const Et=new class extends je.v{flush(zt){this.active=!0,this.scheduled=void 0;const{actions:an}=this;let Qe,On=-1,dn=an.length;zt=zt||an.shift();do{if(Qe=zt.execute(zt.state,zt.delay))break}while(++On<dn&&(zt=an.shift()));if(this.active=!1,Qe){for(;++On<dn&&(zt=an.shift());)zt.unsubscribe();throw Qe}}}(class extends wt.o{constructor(zt,an){super(zt,an),this.scheduler=zt,this.work=an}requestAsyncId(zt,an,Qe=0){return null!==Qe&&Qe>0?super.requestAsyncId(zt,an,Qe):(zt.actions.push(this),zt.scheduled||(zt.scheduled=gt.setImmediate(zt.flush.bind(zt,null))))}recycleAsyncId(zt,an,Qe=0){if(null!==Qe&&Qe>0||null===Qe&&this.delay>0)return super.recycleAsyncId(zt,an,Qe);0===zt.actions.length&&(gt.clearImmediate(an),zt.scheduled=void 0)}}),lt=Et},3637:(ai,_n,nt)=>{"use strict";nt.d(_n,{z:()=>Ee,P:()=>k});var s=nt(6465);const Ee=new(nt(6102).v)(s.o),k=Ee},7771:(ai,_n,nt)=>{"use strict";nt.d(_n,{c:()=>Dt,N:()=>gt});var s=nt(6465),Ee=nt(6102);const gt=new class extends Ee.v{}(class extends s.o{constructor(Be,je){super(Be,je),this.scheduler=Be,this.work=je}schedule(Be,je=0){return je>0?super.schedule(Be,je):(this.delay=je,this.state=Be,this.scheduler.flush(this),this)}execute(Be,je){return je>0||this.closed?super.execute(Be,je):this._execute(Be,je)}requestAsyncId(Be,je,Ve=0){return null!==Ve&&Ve>0||null===Ve&&this.delay>0?super.requestAsyncId(Be,je,Ve):Be.flush(this)}}),Dt=gt},377:(ai,_n,nt)=>{"use strict";nt.d(_n,{hZ:()=>Vt});const Vt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ai,_n,nt)=>{"use strict";nt.d(_n,{L:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ai,_n,nt)=>{"use strict";nt.d(_n,{b:()=>s});const s="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(ai,_n,nt)=>{"use strict";nt.d(_n,{N:()=>Vt});const Vt=(()=>{function Ee(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Ee.prototype=Object.create(Error.prototype),Ee})()},4449:(ai,_n,nt)=>{"use strict";function s(Vt){setTimeout(()=>{throw Vt},0)}nt.d(_n,{z:()=>s})},4487:(ai,_n,nt)=>{"use strict";function s(Vt){return Vt}nt.d(_n,{y:()=>s})},9796:(ai,_n,nt)=>{"use strict";nt.d(_n,{k:()=>s});const s=Array.isArray||(Vt=>Vt&&"number"==typeof Vt.length)},9489:(ai,_n,nt)=>{"use strict";nt.d(_n,{z:()=>s});const s=Vt=>Vt&&"number"==typeof Vt.length&&"function"!=typeof Vt},9105:(ai,_n,nt)=>{"use strict";function s(Vt){return"function"==typeof Vt}nt.d(_n,{m:()=>s})},6561:(ai,_n,nt)=>{"use strict";nt.d(_n,{k:()=>Vt});var s=nt(9796);function Vt(Ee){return!(0,s.k)(Ee)&&Ee-parseFloat(Ee)+1>=0}},1555:(ai,_n,nt)=>{"use strict";function s(Vt){return null!==Vt&&"object"==typeof Vt}nt.d(_n,{K:()=>s})},4072:(ai,_n,nt)=>{"use strict";function s(Vt){return!!Vt&&"function"!=typeof Vt.subscribe&&"function"==typeof Vt.then}nt.d(_n,{t:()=>s})},4869:(ai,_n,nt)=>{"use strict";function s(Vt){return Vt&&"function"==typeof Vt.schedule}nt.d(_n,{K:()=>s})},7444:(ai,_n,nt)=>{"use strict";nt.d(_n,{s:()=>Et});var s=nt(5015),Vt=nt(4449),k=nt(377),Dt=nt(6554),Be=nt(9489),je=nt(4072),Ve=nt(1555);const Et=lt=>{if(lt&&"function"==typeof lt[Dt.L])return(lt=>Ct=>{const zt=lt[Dt.L]();if("function"!=typeof zt.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return zt.subscribe(Ct)})(lt);if((0,Be.z)(lt))return(0,s.V)(lt);if((0,je.t)(lt))return(lt=>Ct=>(lt.then(zt=>{Ct.closed||(Ct.next(zt),Ct.complete())},zt=>Ct.error(zt)).then(null,Vt.z),Ct))(lt);if(lt&&"function"==typeof lt[k.hZ])return(lt=>Ct=>{const zt=lt[k.hZ]();for(;;){let an;try{an=zt.next()}catch(Qe){return Ct.error(Qe),Ct}if(an.done){Ct.complete();break}if(Ct.next(an.value),Ct.closed)break}return"function"==typeof zt.return&&Ct.add(()=>{zt.return&&zt.return()}),Ct})(lt);{const zt=`You provided ${(0,Ve.K)(lt)?"an invalid object":`'${lt}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(zt)}}},5015:(ai,_n,nt)=>{"use strict";nt.d(_n,{V:()=>s});const s=Vt=>Ee=>{for(let k=0,gt=Vt.length;k<gt&&!Ee.closed;k++)Ee.next(Vt[k]);Ee.complete()}},6533:(ai,_n,nt)=>{"use strict";var s=nt(7716);let Vt=null;function Ee(){return Vt}const wt=new s.OlP("DocumentToken");let Be=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:je,token:t,providedIn:"platform"}),t})();function je(){return(0,s.LFG)(Et)}const Ve=new s.OlP("Location Initialized");let Et=(()=>{class t extends Be{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ee().getBaseHref(this._doc)}onPopState(e){const o=Ee().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=Ee().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,a){lt()?this._history.pushState(e,o,a):this.location.hash=a}replaceState(e,o,a){lt()?this._history.replaceState(e,o,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt))},t.\u0275prov=(0,s.Yz7)({factory:Ct,token:t,providedIn:"platform"}),t})();function lt(){return!!window.history.pushState}function Ct(){return new Et((0,s.LFG)(wt))}function zt(t,i){if(0==t.length)return i;if(0==i.length)return t;let e=0;return t.endsWith("/")&&e++,i.startsWith("/")&&e++,2==e?t+i.substring(1):1==e?t+i:t+"/"+i}function an(t){const i=t.match(/#|\?|$/),e=i&&i.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Qe(t){return t&&"?"!==t[0]?"?"+t:t}let On=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:dn,token:t,providedIn:"root"}),t})();function dn(t){const i=(0,s.LFG)(wt).location;return new Ui((0,s.LFG)(Be),i&&i.origin||"")}const Mt=new s.OlP("appBaseHref");let Ui=(()=>{class t extends On{constructor(e,o){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return zt(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+Qe(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${o}${a}`:o}pushState(e,o,a,c){const v=this.prepareExternalUrl(a+Qe(c));this._platformLocation.pushState(e,o,v)}replaceState(e,o,a,c){const v=this.prepareExternalUrl(a+Qe(c));this._platformLocation.replaceState(e,o,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,a;null===(a=(o=this._platformLocation).historyGo)||void 0===a||a.call(o,e)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Be),s.LFG(Mt,8))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),$r=(()=>{class t extends On{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=zt(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,a,c){let v=this.prepareExternalUrl(a+Qe(c));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.pushState(e,o,v)}replaceState(e,o,a,c){let v=this.prepareExternalUrl(a+Qe(c));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,a;null===(a=(o=this._platformLocation).historyGo)||void 0===a||a.call(o,e)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Be),s.LFG(Mt,8))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),Vn=(()=>{class t{constructor(e,o){this._subject=new s.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const a=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=an(tr(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+Qe(o))}normalize(e){return t.stripTrailingSlash(function(t,i){return t&&i.startsWith(t)?i.substring(t.length):i}(this._baseHref,tr(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,o="",a=null){this._platformStrategy.pushState(a,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Qe(o)),a)}replaceState(e,o="",a=null){this._platformStrategy.replaceState(a,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Qe(o)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var o,a;null===(a=(o=this._platformStrategy).historyGo)||void 0===a||a.call(o,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(a=>a(e,o))}subscribe(e,o,a){return this._subject.subscribe({next:e,error:o,complete:a})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(On),s.LFG(Be))},t.normalizeQueryParams=Qe,t.joinWithSlash=zt,t.stripTrailingSlash=an,t.\u0275prov=(0,s.Yz7)({factory:Di,token:t,providedIn:"root"}),t})();function Di(){return new Vn((0,s.LFG)(On),(0,s.LFG)(Be))}function tr(t){return t.replace(/\/index.html$/,"")}var Gt=(()=>((Gt=Gt||{})[Gt.Zero=0]="Zero",Gt[Gt.One=1]="One",Gt[Gt.Two=2]="Two",Gt[Gt.Few=3]="Few",Gt[Gt.Many=4]="Many",Gt[Gt.Other=5]="Other",Gt))();const Ni=s.kL8;class xe{}let ze=(()=>{class t extends xe{constructor(e){super(),this.locale=e}getPluralCategory(e,o){switch(Ni(o||this.locale)(e)){case Gt.Zero:return"zero";case Gt.One:return"one";case Gt.Two:return"two";case Gt.Few:return"few";case Gt.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.soG))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();function Y(t,i){i=encodeURIComponent(i);for(const e of t.split(";")){const o=e.indexOf("="),[a,c]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(a.trim()===i)return decodeURIComponent(c)}return null}let ne=(()=>{class t{constructor(e,o,a,c){this._iterableDiffers=e,this._keyValueDiffers=o,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,s.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,s.AaK)(o.item)}`);this._toggleClass(o.item,!0)}),e.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!0)):Object.keys(e).forEach(o=>this._toggleClass(o,!!e[o])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!1)):Object.keys(e).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(e,o){(e=e.trim())&&e.split(/\s+/g).forEach(a=>{o?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.ZZ4),s.Y36(s.aQg),s.Y36(s.SBq),s.Y36(s.Qsj))},t.\u0275dir=s.lG2({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Ie{constructor(i,e,o,a){this.$implicit=i,this.ngForOf=e,this.index=o,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Je=(()=>{class t{constructor(e,o,a){this._viewContainer=e,this._template=o,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(o){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(t){return t.name||typeof t}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const o=[];e.forEachOperation((a,c,v)=>{if(null==a.previousIndex){const A=this._viewContainer.createEmbeddedView(this._template,new Ie(null,this._ngForOf,-1,-1),null===v?void 0:v),z=new Nt(a,A);o.push(z)}else if(null==v)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const A=this._viewContainer.get(c);this._viewContainer.move(A,v);const z=new Nt(a,A);o.push(z)}});for(let a=0;a<o.length;a++)this._perViewChange(o[a].view,o[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const v=this._viewContainer.get(a);v.context.index=a,v.context.count=c,v.context.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(e,o){e.context.$implicit=o.item}static ngTemplateContextGuard(e,o){return!0}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},t.\u0275dir=s.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Nt{constructor(i,e){this.record=i,this.view=e}}let Xt=(()=>{class t{constructor(e,o){this._viewContainer=e,this._context=new gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){hn("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){hn("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,o){return!0}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.Rgc))},t.\u0275dir=s.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class gn{constructor(){this.$implicit=null,this.ngIf=null}}function hn(t,i){if(i&&!i.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,s.AaK)(i)}'.`)}class Kn{constructor(i,e){this._viewContainerRef=i,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(i){i&&!this._created?this.create():!i&&this._created&&this.destroy()}}let Bi=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const o=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||o,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),o}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let o=0;o<this._defaultViews.length;o++)this._defaultViews[o].enforceState(e)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),zn=(()=>{class t{constructor(e,o,a){this.ngSwitch=a,a._addCase(),this._view=new Kn(e,o)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(Bi,9))},t.\u0275dir=s.lG2({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),ti=(()=>{class t{constructor(e,o,a){a._addDefault(new Kn(e,o))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(Bi,9))},t.\u0275dir=s.lG2({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),Wi=(()=>{class t{constructor(e,o,a){this._ngEl=e,this._differs=o,this._renderer=a,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,o){const[a,c]=e.split(".");null!=(o=null!=o&&c?`${o}${c}`:o)?this._renderer.setStyle(this._ngEl.nativeElement,a,o):this._renderer.removeStyle(this._ngEl.nativeElement,a)}_applyChanges(e){e.forEachRemovedItem(o=>this._setStyle(o.key,null)),e.forEachAddedItem(o=>this._setStyle(o.key,o.currentValue)),e.forEachChangedItem(o=>this._setStyle(o.key,o.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.aQg),s.Y36(s.Qsj))},t.\u0275dir=s.lG2({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),Ro=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const o=this._viewContainerRef;this._viewRef&&o.remove(o.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?o.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b))},t.\u0275dir=s.lG2({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[s.TTD]}),t})();class Hs{createSubscription(i,e){return i.subscribe({next:e,error:o=>{throw o}})}dispose(i){i.unsubscribe()}onDestroy(i){i.unsubscribe()}}class ro{createSubscription(i,e){return i.then(e,o=>{throw o})}dispose(i){}onDestroy(i){}}const Vo=new ro,bu=new Hs;let hl=(()=>{class t{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,o=>this._updateLatestValue(e,o))}_selectStrategy(e){if((0,s.QGY)(e))return Vo;if((0,s.F4k)(e))return bu;throw function(t,i){return Error(`InvalidPipeArgument: '${i}' for pipe '${(0,s.AaK)(t)}'`)}(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,o){e===this._obj&&(this._latestValue=o,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO,16))},t.\u0275pipe=s.Yjl({name:"async",type:t,pure:!1}),t})(),Gd=(()=>{class t{transform(e){return JSON.stringify(e,null,2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Yjl({name:"json",type:t,pure:!1}),t})(),Fi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[{provide:xe,useClass:ze}]}),t})();function ch(t){return"server"===t}let ui=(()=>{class t{}return t.\u0275prov=(0,s.Yz7)({token:t,providedIn:"root",factory:()=>new uh((0,s.LFG)(wt),window)}),t})();class uh{constructor(i,e){this.document=i,this.window=e,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const e=function(t,i){const e=t.getElementById(i)||t.getElementsByName(i)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const o=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let a=o.currentNode;for(;a;){const c=a.shadowRoot;if(c){const v=c.getElementById(i)||c.querySelector(`[name="${i}"]`);if(v)return v}a=o.nextNode()}}return null}(this.document,i);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=i)}}scrollToElement(i){const e=i.getBoundingClientRect(),o=e.left+this.window.pageXOffset,a=e.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(o-c[0],a-c[1])}attemptFocus(i){return i.focus(),this.document.activeElement===i}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=Cu(this.window.history)||Cu(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch(i){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(i){return!1}}}function Cu(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class zl{}class dh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new dh,Vt||(Vt=t)}onAndCancel(i,e,o){return i.addEventListener(e,o,!1),()=>{i.removeEventListener(e,o,!1)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,e){return(e=e||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return"window"===e?window:"document"===e?i:"body"===e?i.body:null}getBaseHref(i){const e=(Ii=Ii||document.querySelector("base"),Ii?Ii.getAttribute("href"):null);return null==e?null:function(t){Pr=Pr||document.createElement("a"),Pr.setAttribute("href",t);const i=Pr.pathname;return"/"===i.charAt(0)?i:`/${i}`}(e)}resetBaseElement(){Ii=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return Y(document.cookie,i)}}let Pr,Ii=null;const oo=new s.OlP("TRANSITION_ID"),Ma=[{provide:s.ip1,useFactory:function(t,i,e){return()=>{e.get(s.CZH).donePromise.then(()=>{const o=Ee();Array.prototype.slice.apply(i.querySelectorAll("style[ng-transition]")).filter(c=>c.getAttribute("ng-transition")===t).forEach(c=>o.remove(c))})}},deps:[oo,wt,s.zs3],multi:!0}];class ph{static init(){(0,s.VLi)(new ph)}addToWindow(i){s.dqk.getAngularTestability=(o,a=!0)=>{const c=i.findTestabilityInTree(o,a);if(null==c)throw new Error("Could not find testability for element.");return c},s.dqk.getAllAngularTestabilities=()=>i.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>i.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(o=>{const a=s.dqk.getAllAngularTestabilities();let c=a.length,v=!1;const A=function(z){v=v||z,c--,0==c&&o(v)};a.forEach(function(z){z.whenStable(A)})})}findTestabilityInTree(i,e,o){if(null==e)return null;const a=i.getTestability(e);return null!=a?a:o?Ee().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null}}let ka=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();const fh=new s.OlP("EventManagerPlugins");let wn=(()=>{class t{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(a=>a.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,a){return this._findPluginFor(o).addEventListener(e,o,a)}addGlobalEventListener(e,o,a){return this._findPluginFor(o).addGlobalEventListener(e,o,a)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const a=this._plugins;for(let c=0;c<a.length;c++){const v=a[c];if(v.supports(e))return this._eventNameToPlugin.set(e,v),v}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(fh),s.LFG(s.R0b))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();class fr{constructor(i){this._doc=i}addGlobalEventListener(i,e,o){const a=Ee().getGlobalEventTarget(this._doc,i);if(!a)throw new Error(`Unsupported event target ${a} for event ${e}`);return this.addEventListener(a,e,o)}}let id=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),o.add(a))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),So=(()=>{class t extends id{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,a){e.forEach(c=>{const v=this._doc.createElement("style");v.textContent=c,a.push(o.appendChild(v))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(rd),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,a)=>{this._addStylesToHost(e,a,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(rd))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();function rd(t){Ee().remove(t)}const Ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ps=/%COMP%/g;function so(t,i,e){for(let o=0;o<i.length;o++){let a=i[o];Array.isArray(a)?so(t,a,e):(a=a.replace(ps,t),e.push(a))}return e}function $o(t){return i=>{if("__ngUnwrap__"===i)return t;!1===t(i)&&(i.preventDefault(),i.returnValue=!1)}}let Ga=(()=>{class t{constructor(e,o,a){this.eventManager=e,this.sharedStylesHost=o,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Hi(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case s.ifc.Emulated:{let a=this.rendererByCompId.get(o.id);return a||(a=new gh(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,a)),a.applyToHost(e),a}case 1:case s.ifc.ShadowDom:return new Ys(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const a=so(o.id,o.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wn),s.LFG(So),s.LFG(s.AFp))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();class Hi{constructor(i){this.eventManager=i,this.data=Object.create(null)}destroy(){}createElement(i,e){return e?document.createElementNS(Ha[e]||e,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,e){i.appendChild(e)}insertBefore(i,e,o){i&&i.insertBefore(e,o)}removeChild(i,e){i&&i.removeChild(e)}selectRootElement(i,e){let o="string"==typeof i?document.querySelector(i):i;if(!o)throw new Error(`The selector "${i}" did not match any elements`);return e||(o.textContent=""),o}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,o,a){if(a){e=a+":"+e;const c=Ha[a];c?i.setAttributeNS(c,e,o):i.setAttribute(e,o)}else i.setAttribute(e,o)}removeAttribute(i,e,o){if(o){const a=Ha[o];a?i.removeAttributeNS(a,e):i.removeAttribute(`${o}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,o,a){a&(s.JOm.DashCase|s.JOm.Important)?i.style.setProperty(e,o,a&s.JOm.Important?"important":""):i.style[e]=o}removeStyle(i,e,o){o&s.JOm.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,o){i[e]=o}setValue(i,e){i.nodeValue=e}listen(i,e,o){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,e,$o(o)):this.eventManager.addEventListener(i,e,$o(o))}}class gh extends Hi{constructor(i,e,o,a){super(i),this.component=o;const c=so(a+"-"+o.id,o.styles,[]);e.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(ps,a+"-"+o.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(ps,t)}(a+"-"+o.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,e){const o=super.createElement(i,e);return super.setAttribute(o,this.contentAttr,""),o}}class Ys extends Hi{constructor(i,e,o,a){super(i),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=so(a.id,a.styles,[]);for(let v=0;v<c.length;v++){const A=document.createElement("style");A.textContent=c[v],this.shadowRoot.appendChild(A)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,o){return super.insertBefore(this.nodeOrShadowRoot(i),e,o)}removeChild(i,e){return super.removeChild(this.nodeOrShadowRoot(i),e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let Bc=(()=>{class t extends fr{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,a){return e.addEventListener(o,a,!1),()=>this.removeEventListener(e,o,a)}removeEventListener(e,o,a){return e.removeEventListener(o,a)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();const Ds=["alt","control","meta","shift"],Jd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ho={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let sd=(()=>{class t extends fr{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,o,a){const c=t.parseEventName(o),v=t.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ee().onAndCancel(e,c.domEventName,v))}static parseEventName(e){const o=e.toLowerCase().split("."),a=o.shift();if(0===o.length||"keydown"!==a&&"keyup"!==a)return null;const c=t._normalizeKey(o.pop());let v="";if(Ds.forEach(z=>{const $=o.indexOf(z);$>-1&&(o.splice($,1),v+=z+".")}),v+=c,0!=o.length||0===c.length)return null;const A={};return A.domEventName=a,A.fullKey=v,A}static getEventFullKey(e){let o="",a=function(t){let i=t.key;if(null==i){if(i=t.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===t.location&&Ho.hasOwnProperty(i)&&(i=Ho[i]))}return Jd[i]||i}(e);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Ds.forEach(c=>{c!=a&&yh[c](e)&&(o+=c+".")}),o+=a,o}static eventCallback(e,o,a){return c=>{t.getEventFullKey(c)===e&&a.runGuarded(()=>o(c))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),fs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:function(){return(0,s.LFG)(Ul)},token:t,providedIn:"root"}),t})(),Ul=(()=>{class t extends fs{constructor(e){super(),this._doc=e}sanitize(e,o){if(null==o)return null;switch(e){case s.q3G.NONE:return o;case s.q3G.HTML:return(0,s.qzn)(o,"HTML")?(0,s.z3N)(o):(0,s.EiD)(this._doc,String(o)).toString();case s.q3G.STYLE:return(0,s.qzn)(o,"Style")?(0,s.z3N)(o):o;case s.q3G.SCRIPT:if((0,s.qzn)(o,"Script"))return(0,s.z3N)(o);throw new Error("unsafe value used in a script context");case s.q3G.URL:return(0,s.yhl)(o),(0,s.qzn)(o,"URL")?(0,s.z3N)(o):(0,s.mCW)(String(o));case s.q3G.RESOURCE_URL:if((0,s.qzn)(o,"ResourceURL"))return(0,s.z3N)(o);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,s.JVY)(e)}bypassSecurityTrustStyle(e){return(0,s.L6k)(e)}bypassSecurityTrustScript(e){return(0,s.eBb)(e)}bypassSecurityTrustUrl(e){return(0,s.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,s.pB0)(e)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt))},t.\u0275prov=(0,s.Yz7)({factory:function(){return function(t){return new Ul(t.get(wt))}((0,s.LFG)(s.gxx))},token:t,providedIn:"root"}),t})();const dc=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:"browser"},{provide:s.g9A,useValue:function(){dh.makeCurrent(),ph.init()},multi:!0},{provide:wt,useFactory:function(){return(0,s.RDi)(document),document},deps:[]}]),Vc=[[],{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function(){return new s.qLn},deps:[]},{provide:fh,useClass:Bc,multi:!0,deps:[wt,s.R0b,s.Lbi]},{provide:fh,useClass:sd,multi:!0,deps:[wt]},[],{provide:Ga,useClass:Ga,deps:[wn,So,s.AFp]},{provide:s.FYo,useExisting:Ga},{provide:id,useExisting:So},{provide:So,useClass:So,deps:[wt]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b]},{provide:wn,useClass:wn,deps:[fh,s.R0b]},{provide:zl,useClass:ka,deps:[]},[]];let Kd=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:s.AFp,useValue:e.appId},{provide:oo,useExisting:s.AFp},Ma]}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(t,12))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:Vc,imports:[Fi,s.hGG]}),t})();"undefined"!=typeof window&&window;const qn_firebase={apiKey:"AIzaSyA0170oJhaAshcTwIbj-W97RT3TZrVFOIo",authDomain:"ump-cafe-supply-chain.firebaseapp.com",projectId:"ump-cafe-supply-chain",storageBucket:"ump-cafe-supply-chain.appspot.com",messagingSenderId:"293844040560",appId:"1:293844040560:web:f2309fd986e7bf9757adb5",measurementId:"G-8ZM1TDQ23L"};var Xi=nt(57),Cl=nt(3637),Yr=nt(7574),Xn=nt(5917),bs=nt(6682),ei=nt(8002),np=nt(8819),Nr=nt(4402),Is=nt(5345);function Rr(t,i){return"function"==typeof i?e=>e.pipe(Rr((o,a)=>(0,Nr.D)(t(o,a)).pipe((0,ei.U)((c,v)=>i(o,c,a,v))))):e=>e.lift(new Gl(t))}class Gl{constructor(i){this.project=i}call(i,e){return e.subscribe(new ip(i,this.project))}}class ip extends Is.Ds{constructor(i,e){super(i),this.project=e,this.index=0}_next(i){let e;const o=this.index++;try{e=this.project(i,o)}catch(a){return void this.destination.error(a)}this._innerSub(e)}_innerSub(i){const e=this.innerSubscription;e&&e.unsubscribe();const o=new Is.IY(this),a=this.destination;a.add(o),this.innerSubscription=(0,Is.ft)(i,o),this.innerSubscription!==o&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:i}=this;(!i||i.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(i){this.destination.next(i)}}var Xo=nt(7393);function ca(t,i){let e=!1;return arguments.length>=2&&(e=!0),function(a){return a.lift(new Hc(t,i,e))}}class Hc{constructor(i,e,o=!1){this.accumulator=i,this.seed=e,this.hasSeed=o}call(i,e){return e.subscribe(new rp(i,this.accumulator,this.seed,this.hasSeed))}}class rp extends Xo.L{constructor(i,e,o,a){super(i),this.accumulator=e,this._seed=o,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(i){this.hasSeed=!0,this._seed=i}_next(i){if(this.hasSeed)return this._tryNext(i);this.seed=i,this.destination.next(i)}_tryNext(i){const e=this.index++;let o;try{o=this.accumulator(this.seed,i,e)}catch(a){this.destination.error(a)}this.seed=o,this.destination.next(o)}}function fc(t,i){return e=>e.lift(new wh(t,i))}class wh{constructor(i,e){this.compare=i,this.keySelector=e}call(i,e){return e.subscribe(new Gc(i,this.compare,this.keySelector))}}class Gc extends Xo.L{constructor(i,e,o){super(i),this.keySelector=o,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(i,e){return i===e}_next(i){let e;try{const{keySelector:a}=this;e=a?a(i):i}catch(a){return this.destination.error(a)}let o=!1;if(this.hasKey)try{const{compare:a}=this;o=a(this.key,e)}catch(a){return this.destination.error(a)}else this.hasKey=!0;o||(this.key=e,this.destination.next(i))}}class jl extends Xo.L{notifyNext(i,e,o,a,c){this.destination.next(e)}notifyError(i,e){this.destination.error(i)}notifyComplete(i){this.destination.complete()}}class Ru extends Xo.L{constructor(i,e,o){super(),this.parent=i,this.outerValue=e,this.outerIndex=o,this.index=0}_next(i){this.parent.notifyNext(this.outerValue,i,this.outerIndex,this.index++,this)}_error(i){this.parent.notifyError(i,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var jc=nt(7444);function Yc(t,i,e,o,a=new Ru(t,e,o)){if(!a.closed)return i instanceof Yr.y?i.subscribe(a):(0,jc.s)(i)(a)}class Ou{constructor(i,e){this.observables=i,this.project=e}call(i,e){return e.subscribe(new rg(i,this.observables,this.project))}}class rg extends jl{constructor(i,e,o){super(i),this.observables=e,this.project=o,this.toRespond=[];const a=e.length;this.values=new Array(a);for(let c=0;c<a;c++)this.toRespond.push(c);for(let c=0;c<a;c++)this.add(Yc(this,e[c],void 0,c))}notifyNext(i,e,o){this.values[o]=e;const a=this.toRespond;if(a.length>0){const c=a.indexOf(o);-1!==c&&a.splice(c,1)}}notifyComplete(){}_next(i){if(0===this.toRespond.length){const e=[i,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(i){let e;try{e=this.project.apply(this,i)}catch(o){return void this.destination.error(o)}this.destination.next(e)}}class op{constructor(i){this.predicate=i}call(i,e){return e.subscribe(new sp(i,this.predicate))}}class sp extends Xo.L{constructor(i,e){super(i),this.predicate=e,this.skipping=!0,this.index=0}_next(i){const e=this.destination;this.skipping&&this.tryCallPredicate(i),this.skipping||e.next(i)}tryCallPredicate(i){try{const e=this.predicate(i,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}nt(9192);var Nn=nt(9765),Ps=nt(9746),qc=nt(7771),gs=nt(5319),Bf=nt(7971),Sh=nt(8858);class zf extends Nn.xQ{constructor(i=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=i<1?1:i,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(i){if(!this.isStopped){const e=this._events;e.push(i),e.length>this._bufferSize&&e.shift()}super.next(i)}nextTimeWindow(i){this.isStopped||(this._events.push(new Zc(this._getNow(),i)),this._trimBufferThenGetEvents()),super.next(i)}_subscribe(i){const e=this._infiniteTimeWindow,o=e?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=o.length;let v;if(this.closed)throw new Bf.N;if(this.isStopped||this.hasError?v=gs.w.EMPTY:(this.observers.push(i),v=new Sh.W(this,i)),a&&i.add(i=new Ps.ht(i,a)),e)for(let A=0;A<c&&!i.closed;A++)i.next(o[A]);else for(let A=0;A<c&&!i.closed;A++)i.next(o[A].value);return this.hasError?i.error(this.thrownError):this.isStopped&&i.complete(),v}_getNow(){return(this.scheduler||qc.c).now()}_trimBufferThenGetEvents(){const i=this._getNow(),e=this._bufferSize,o=this._windowTime,a=this._events,c=a.length;let v=0;for(;v<c&&!(i-a[v].time<o);)v++;return c>e&&(v=Math.max(v,c-e)),v>0&&a.splice(0,v),a}}class Zc{constructor(i,e){this.time=i,this.value=e}}function ld(t,i,e){let o;return o=t&&"object"==typeof t?t:{bufferSize:t,windowTime:i,refCount:!1,scheduler:e},a=>a.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:i=Number.POSITIVE_INFINITY,refCount:e,scheduler:o}){let a,v,c=0,A=!1,z=!1;return function(oe){let fe;c++,!a||A?(A=!1,a=new zf(t,i,o),fe=a.subscribe(this),v=oe.subscribe({next(ke){a.next(ke)},error(ke){A=!0,a.error(ke)},complete(){z=!0,v=void 0,a.complete()}}),z&&(v=void 0)):fe=a.subscribe(this),this.add(()=>{c--,fe.unsubscribe(),fe=void 0,v&&!z&&e&&0===c&&(v.unsubscribe(),v=void 0,a=void 0)})}}(o))}const f=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function w(t,i){return function(o){return o.lift(new O(t,i))}}class O{constructor(i,e){this.predicate=i,this.thisArg=e}call(i,e){return e.subscribe(new U(i,this.predicate,this.thisArg))}}class U extends Xo.L{constructor(i,e,o){super(i),this.predicate=e,this.thisArg=o,this.count=0}_next(i){let e;try{e=this.predicate.call(this.thisArg,i,this.count++)}catch(o){return void this.destination.error(o)}e&&this.destination.next(i)}}const ee=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var se=nt(9193);function ue(t){return i=>0===t?(0,se.c)():i.lift(new me(t))}class me{constructor(i){if(this.total=i,this.total<0)throw new ee}call(i,e){return e.subscribe(new Ce(i,this.total))}}class Ce extends Xo.L{constructor(i,e){super(i),this.total=e,this.count=0}_next(i){const e=this.total,o=++this.count;o<=e&&(this.destination.next(i),o===e&&(this.destination.complete(),this.unsubscribe()))}}function Ae(t=null){return i=>i.lift(new Pe(t))}class Pe{constructor(i){this.defaultValue=i}call(i,e){return e.subscribe(new Ne(i,this.defaultValue))}}class Ne extends Xo.L{constructor(i,e){super(i),this.defaultValue=e,this.isEmpty=!0}_next(i){this.isEmpty=!1,this.destination.next(i)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function $e(t=Ue){return i=>i.lift(new et(t))}class et{constructor(i){this.errorFactory=i}call(i,e){return e.subscribe(new mt(i,this.errorFactory))}}class mt extends Xo.L{constructor(i,e){super(i),this.errorFactory=e,this.hasValue=!1}_next(i){this.hasValue=!0,this.destination.next(i)}_complete(){if(this.hasValue)return this.destination.complete();{let i;try{i=this.errorFactory()}catch(e){i=e}this.destination.error(i)}}}function Ue(){return new f}var tt=nt(4487);function ot(t,i){const e=arguments.length>=2;return o=>o.pipe(t?w((a,c)=>t(a,c,o)):tt.y,ue(1),e?Ae(i):$e(()=>new f))}function vt(t,i){return i?Rr(()=>t,i):Rr(()=>t)}var rt=nt(9673);const en=new s.OlP("angularfire2.auth.use-emulator"),sn=new s.OlP("angularfire2.auth.settings"),un=new s.OlP("angularfire2.auth.tenant-id"),ut=new s.OlP("angularfire2.auth.langugage-code"),En=new s.OlP("angularfire2.auth.use-device-language"),bn=new s.OlP("angularfire.auth.persistence");let Zn=(()=>{class t{constructor(e,o,a,c,v,A,z,$,oe,fe){const ke=new Xi.HU(c),Oe=(0,Xi.ss)(ke),He=new Nn.xQ,ct=(0,Xn.of)(void 0).pipe((0,Ps.QV)(ke.outsideAngular),Rr(()=>c.runOutsideAngular(()=>nt.e(336).then(nt.bind(nt,1336)))),(0,ei.U)(()=>(0,Xi.on)(e,c,o)),(0,ei.U)(At=>c.runOutsideAngular(()=>{const Qt=v,Sn=A;return(0,Xi.sI)(`${At.name}.auth`,"AngularFireAuth",At,()=>{const xn=c.runOutsideAngular(()=>At.auth());if(Qt&&xn.useEmulator(`http://${Qt.join(":")}`),z&&(xn.tenantId=z),xn.languageCode=$,oe&&xn.useDeviceLanguage(),Sn)for(const[Qn,ii]of Object.entries(Sn))xn.settings[Qn]=ii;return fe&&xn.setPersistence(fe),xn},[Qt,z,$,oe,Sn,fe])})),ld({bufferSize:1,refCount:!1}));if(ch(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Xn.of)(null);else{ct.pipe(ot()).subscribe();const Qt=ct.pipe(Rr(ii=>ii.getRedirectResult().then(er=>er,()=>null)),Oe,ld({bufferSize:1,refCount:!1})),Sn=ii=>new Yr.y(er=>({unsubscribe:c.runOutsideAngular(()=>ii(er))})),xn=ct.pipe(Rr(ii=>Sn(ii.onAuthStateChanged.bind(ii)))),Qn=ct.pipe(Rr(ii=>Sn(ii.onIdTokenChanged.bind(ii))));this.authState=Qt.pipe(vt(xn),(0,rt.R)(ke.outsideAngular),(0,Ps.QV)(ke.insideAngular)),this.user=Qt.pipe(vt(Qn),(0,rt.R)(ke.outsideAngular),(0,Ps.QV)(ke.insideAngular)),this.idToken=this.user.pipe(Rr(ii=>ii?(0,Nr.D)(ii.getIdToken()):(0,Xn.of)(null))),this.idTokenResult=this.user.pipe(Rr(ii=>ii?(0,Nr.D)(ii.getIdTokenResult()):(0,Xn.of)(null))),this.credential=(0,bs.T)(Qt,He,this.authState.pipe(w(ii=>!ii))).pipe((0,ei.U)(ii=>(null==ii?void 0:ii.user)?ii:null),(0,rt.R)(ke.outsideAngular),(0,Ps.QV)(ke.insideAngular))}return(0,Xi.pX)(this,ct,c,{spy:{apply:(At,Qt,Sn)=>{(At.startsWith("signIn")||At.startsWith("createUser"))&&Sn.then(xn=>He.next(xn))}}})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Xi.Dh),s.LFG(Xi.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(en,8),s.LFG(sn,8),s.LFG(un,8),s.LFG(ut,8),s.LFG(En,8),s.LFG(bn,8))},t.\u0275prov=s.Yz7({factory:function(){return new t(s.LFG(Xi.Dh),s.LFG(Xi.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(en,8),s.LFG(sn,8),s.LFG(un,8),s.LFG(ut,8),s.LFG(En,8),s.LFG(bn,8))},token:t,providedIn:"any"}),t})();var An=nt(2329);function lr(t){return null==t}function yr(t){return"function"==typeof t.set}function Br(t,i){return yr(i)?i:t.ref(i)}function zi(t,i){if(function(t){return"string"==typeof t}(t))return i.stringCase();if(yr(t))return i.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return i.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function gr(t,i,e="on",o=Cl.z){return new Yr.y(a=>{let c=null;return c=t[e](i,(v,A)=>{o.schedule(()=>{a.next({snapshot:v,prevKey:A})}),"once"===e&&o.schedule(()=>a.complete())},v=>{o.schedule(()=>a.error(v))}),"on"===e?{unsubscribe(){null!=c&&t.off(i,c)}}:{unsubscribe(){}}}).pipe((0,ei.U)(a=>{const{snapshot:c,prevKey:v}=a;let A=null;return c.exists()&&(A=c.key),{type:i,payload:c,prevKey:v,key:A}}),(0,np.B)())}function ua(t,i){const e=t.length;for(let o=0;o<e;o++)if(t[o].payload.key===i)return o;return-1}function Go(t,i){const{payload:e,prevKey:o,key:a}=i,c=ua(t,a),v=function(t,i){if(lr(i))return 0;{const e=ua(t,i);return-1===e?t.length:e+1}}(t,o);switch(i.type){case"value":if(i.payload&&i.payload.exists()){let A=null;i.payload.forEach(z=>{const $={payload:z,type:"value",prevKey:A,key:z.key};return A=z.key,t=[...t,$],!1})}return t;case"child_added":if(c>-1){const A=t[c-1];(A&&A.key||null)!==o&&(t=t.filter(z=>z.payload.key!==e.key)).splice(v,0,i)}else{if(null==o)return[i,...t];(t=t.slice()).splice(v,0,i)}return t;case"child_removed":return t.filter(A=>A.payload.key!==e.key);case"child_changed":return t.map(A=>A.payload.key===a?i:A);case"child_moved":if(c>-1){const A=t.splice(c,1)[0];return(t=t.slice()).splice(v,0,A),t}return t;default:return t}}function Qo(t){return(lr(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function ha(t,i,e){return function(t,i,e){return gr(t,"value","once",e).pipe(Rr(o=>{const a=[(0,Xn.of)(o)];return i.forEach(c=>a.push(gr(t,c,"on",e))),(0,bs.T)(...a).pipe(ca(Go,[]))}),fc())}(t,i=Qo(i),e)}function wi(t,i,e){const o=(i=Qo(i)).map(a=>gr(t,a,"on",e));return(0,bs.T)(...o)}function fo(t,i){return function(o,a){return zi(o,{stringCase:()=>t.child(o)[i](a),firebaseCase:()=>o[i](a),snapshotCase:()=>o.ref[i](a)})}}function Jr(t){return function(e){return e?zi(e,{stringCase:()=>t.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):t.remove()}}function Rs(t,i){return function(){return gr(t,"value","on",i)}}const Zs=new s.OlP("angularfire2.realtimeDatabaseURL"),Sl=new s.OlP("angularfire2.database.use-emulator");let Wc=(()=>{class t{constructor(e,o,a,c,v,A,z){this.schedulers=new Xi.HU(v),this.keepUnstableUntilFirst=(0,Xi.ss)(this.schedulers);const $=A,oe=(0,Xi.on)(e,v,o);!An.Z.auth&&z&&(0,Xi.yq)(),this.database=(0,Xi.sI)(`${oe.name}.database.${a}`,"AngularFireDatabase",oe,()=>{const fe=v.runOutsideAngular(()=>oe.database(a||void 0));return $&&fe.useEmulator(...$),fe},[$])}list(e,o){const a=this.schedulers.ngZone.runOutsideAngular(()=>Br(this.database,e));let c=a;return o&&(c=o(a)),function(t,i){const e=i.schedulers.outsideAngular,o=i.schedulers.ngZone.run(()=>t.ref);return{query:t,update:fo(o,"update"),set:fo(o,"set"),push:a=>o.push(a),remove:Jr(o),snapshotChanges:a=>ha(t,a,e).pipe(i.keepUnstableUntilFirst),stateChanges:a=>wi(t,a,e).pipe(i.keepUnstableUntilFirst),auditTrail:a=>function(t,i,e){return function(t,i,e){return function(t,i){return gr(t,"value","on",i).pipe((0,ei.U)(e=>{let o;return e.payload.forEach(a=>(o=a.key,!1)),{data:e,lastKeyToLoad:o}}))}(t,e).pipe(function(...t){return i=>{let e;return"function"==typeof t[t.length-1]&&(e=t.pop()),i.lift(new Ou(t,e))}}(i),(0,ei.U)(([a,c])=>{const v=a.lastKeyToLoad,A=c.map(z=>z.key);return{actions:c,lastKeyToLoad:v,loadedKeys:A}}),function(t){return i=>i.lift(new op(t))}(a=>-1===a.loadedKeys.indexOf(a.lastKeyToLoad)),(0,ei.U)(a=>a.actions))}(t,wi(t,i).pipe(ca((a,c)=>[...a,c],[])),e)}(t,a,e).pipe(i.keepUnstableUntilFirst),valueChanges:(a,c)=>ha(t,a,e).pipe((0,ei.U)(A=>A.map(z=>c&&c.idField?Object.assign(Object.assign({},z.payload.val()),{[c.idField]:z.key}):z.payload.val())),i.keepUnstableUntilFirst)}}(c,this)}object(e){return function(t,i){return{query:t,snapshotChanges:()=>Rs(t,i.schedulers.outsideAngular)().pipe(i.keepUnstableUntilFirst),update:e=>t.ref.update(e),set:e=>t.ref.set(e),remove:()=>t.ref.remove(),valueChanges:()=>Rs(t,i.schedulers.outsideAngular)().pipe(i.keepUnstableUntilFirst,(0,ei.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Br(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Xi.Dh),s.LFG(Xi.xv,8),s.LFG(Zs,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Sl,8),s.LFG(en,8))},t.\u0275prov=s.Yz7({factory:function(){return new t(s.LFG(Xi.Dh),s.LFG(Xi.xv,8),s.LFG(Zs,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Sl,8),s.LFG(en,8))},token:t,providedIn:"any"}),t})(),Ws=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[Wc]}),t})(),cd=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-supplier-home-page"]],decls:2,vars:0,template:function(e,o){1&e&&(s.TgZ(0,"p"),s._uU(1,"supplier-home-page works!"),s.qZA())},styles:[""]}),t})();function $c(t,i,e,o,a,c,v){try{var A=t[c](v),z=A.value}catch($){return void e($)}A.done?i(z):Promise.resolve(z).then(o,a)}function bo(t){return function(){var i=this,e=arguments;return new Promise(function(o,a){var c=t.apply(i,e);function v(z){$c(c,o,a,v,A,"next",z)}function A(z){$c(c,o,a,v,A,"throw",z)}v(void 0)})}}class mo extends Nn.xQ{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const e=super._subscribe(i);return e&&!e.closed&&i.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Bf.N;return this._value}next(i){super.next(this._value=i)}}var Ia=nt(4869),Fu=nt(9796),I_=nt(6693);const Lu={};function Yl(...t){let i,e;return(0,Ia.K)(t[t.length-1])&&(e=t.pop()),"function"==typeof t[t.length-1]&&(i=t.pop()),1===t.length&&(0,Fu.k)(t[0])&&(t=t[0]),(0,I_.n)(t,e).lift(new Av(i))}class Av{constructor(i){this.resultSelector=i}call(i,e){return e.subscribe(new Vf(i,this.resultSelector))}}class Vf extends jl{constructor(i,e){super(i),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(i){this.values.push(Lu),this.observables.push(i)}_complete(){const i=this.observables,e=i.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let o=0;o<e;o++)this.add(Yc(this,i[o],void 0,o))}}notifyComplete(i){0==(this.active-=1)&&this.destination.complete()}notifyNext(i,e,o){const a=this.values,v=this.toRespond?a[o]===Lu?--this.toRespond:this.toRespond:0;a[o]=e,0===v&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(i){let e;try{e=this.resultSelector.apply(this,i)}catch(o){return void this.destination.error(o)}this.destination.next(e)}}var Xc=nt(3282);function Os(...t){return(0,Xc.J)(1)((0,Xn.of)(...t))}function Xp(t){return new Yr.y(i=>{let e;try{e=t()}catch(a){return void i.error(a)}return(e?(0,Nr.D)(e):(0,se.c)()).subscribe(i)})}var Uf=nt(2441);function ws(...t){const i=t[t.length-1];return(0,Ia.K)(i)?(t.pop(),e=>Os(t,e,i)):e=>Os(t,e)}function pa(t){return function(e){const o=new Eh(t),a=e.lift(o);return o.caught=a}}class Eh{constructor(i){this.selector=i}call(i,e){return e.subscribe(new Fo(i,this.selector,this.caught))}}class Fo extends Is.Ds{constructor(i,e,o){super(i),this.selector=e,this.caught=o}error(i){if(!this.isStopped){let e;try{e=this.selector(i,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const o=new Is.IY(this);this.add(o);const a=(0,Is.ft)(e,o);a!==o&&this.add(a)}}}var Cs=nt(9773);function ud(t,i){return(0,Cs.zg)(t,i,1)}function Hf(t){return function(e){return 0===t?(0,se.c)():e.lift(new Gf(t))}}class Gf{constructor(i){if(this.total=i,this.total<0)throw new ee}call(i,e){return e.subscribe(new og(i,this.total))}}class og extends Xo.L{constructor(i,e){super(i),this.total=e,this.ring=new Array,this.count=0}_next(i){const e=this.ring,o=this.total,a=this.count++;e.length<o?e.push(i):e[a%o]=i}_complete(){const i=this.destination;let e=this.count;if(e>0){const o=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<o;c++){const v=e++%o;i.next(a[v])}}i.complete()}}var jo=nt(3342),gc=nt(1307);function Fs(t){return i=>i.lift(new _c(t))}class _c{constructor(i){this.callback=i}call(i,e){return e.subscribe(new Nu(i,this.callback))}}class Nu extends Xo.L{constructor(i,e){super(i),this.add(new gs.w(e))}}class $s{constructor(i,e){this.id=i,this.url=e}}class yc extends $s{constructor(i,e,o="imperative",a=null){super(i,e),this.navigationTrigger=o,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Th extends $s{constructor(i,e,o){super(i,e),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qc extends $s{constructor(i,e,o){super(i,e),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mh extends $s{constructor(i,e,o){super(i,e),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class P_ extends $s{constructor(i,e,o,a){super(i,e),this.urlAfterRedirects=o,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R_ extends $s{constructor(i,e,o,a){super(i,e),this.urlAfterRedirects=o,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yf extends $s{constructor(i,e,o,a,c){super(i,e),this.urlAfterRedirects=o,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ql extends $s{constructor(i,e,o,a){super(i,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Iv extends $s{constructor(i,e,o,a){super(i,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class O_{constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ss{constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Er{constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qf{constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F_{constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hd{constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dd{constructor(i,e,o){this.routerEvent=i,this.position=e,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gi="primary";class Ya{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function kh(t){return new Ya(t)}const El="ngNavigationCancelingError";function vc(t){const i=Error("NavigationCancelingError: "+t);return i[El]=!0,i}function Bu(t,i,e){const o=e.path.split("/");if(o.length>t.length||"full"===e.pathMatch&&(i.hasChildren()||o.length<t.length))return null;const a={};for(let c=0;c<o.length;c++){const v=o[c],A=t[c];if(v.startsWith(":"))a[v.substring(1)]=A;else if(v!==A.path)return null}return{consumed:t.slice(0,o.length),posParams:a}}function Zl(t,i){const e=t?Object.keys(t):void 0,o=i?Object.keys(i):void 0;if(!e||!o||e.length!=o.length)return!1;let a;for(let c=0;c<e.length;c++)if(a=e[c],!sg(t[a],i[a]))return!1;return!0}function sg(t,i){if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return!1;const e=[...t].sort(),o=[...i].sort();return e.every((a,c)=>o[c]===a)}return t===i}function ag(t){return Array.prototype.concat.apply([],t)}function Wl(t){return t.length>0?t[t.length-1]:null}function ss(t,i){for(const e in t)t.hasOwnProperty(e)&&i(t[e],e)}function Tl(t){return(0,s.CqO)(t)?t:(0,s.QGY)(t)?(0,Nr.D)(Promise.resolve(t)):(0,Xn.of)(t)}const Jp={exact:function fa(t,i,e){if(!bc(t.segments,i.segments)||!Ml(t.segments,i.segments,e)||t.numberOfChildren!==i.numberOfChildren)return!1;for(const o in i.children)if(!t.children[o]||!fa(t.children[o],i.children[o],e))return!1;return!0},subset:Ls},cg={exact:function(t,i){return Zl(t,i)},subset:function(t,i){return Object.keys(i).length<=Object.keys(t).length&&Object.keys(i).every(e=>sg(t[e],i[e]))},ignored:()=>!0};function ug(t,i,e){return Jp[e.paths](t.root,i.root,e.matrixParams)&&cg[e.queryParams](t.queryParams,i.queryParams)&&!("exact"===e.fragment&&t.fragment!==i.fragment)}function Ls(t,i,e){return pd(t,i,i.segments,e)}function pd(t,i,e,o){if(t.segments.length>e.length){const a=t.segments.slice(0,e.length);return!(!bc(a,e)||i.hasChildren()||!Ml(a,e,o))}if(t.segments.length===e.length){if(!bc(t.segments,e)||!Ml(t.segments,e,o))return!1;for(const a in i.children)if(!t.children[a]||!Ls(t.children[a],i.children[a],o))return!1;return!0}{const a=e.slice(0,t.segments.length),c=e.slice(t.segments.length);return!!(bc(t.segments,a)&&Ml(t.segments,a,o)&&t.children[Gi])&&pd(t.children[Gi],i,c,o)}}function Ml(t,i,e){return i.every((o,a)=>cg[e](t[a].parameters,o.parameters))}class kl{constructor(i,e,o){this.root=i,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kh(this.queryParams)),this._queryParamMap}toString(){return fd.serialize(this)}}class oi{constructor(i,e){this.segments=i,this.children=e,this.parent=null,ss(e,(o,a)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wf(this)}}class qa{constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=kh(this.parameters)),this._parameterMap}toString(){return tf(this)}}function bc(t,i){return t.length===i.length&&t.every((e,o)=>e.path===i[o].path)}class Zf{}class pg{parse(i){const e=new Rv(i);return new kl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){var t;return`${`/${Kp(i.root,!0)}`}${function(t){const i=Object.keys(t).map(e=>{const o=t[e];return Array.isArray(o)?o.map(a=>`${md(e)}=${md(a)}`).join("&"):`${md(e)}=${md(o)}`}).filter(e=>!!e);return i.length?`?${i.join("&")}`:""}(i.queryParams)}${"string"==typeof i.fragment?`#${t=i.fragment,encodeURI(t)}`:""}`}}const fd=new pg;function Wf(t){return t.segments.map(i=>tf(i)).join("/")}function Kp(t,i){if(!t.hasChildren())return Wf(t);if(i){const e=t.children[Gi]?Kp(t.children[Gi],!1):"",o=[];return ss(t.children,(a,c)=>{c!==Gi&&o.push(`${c}:${Kp(a,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function(t,i){let e=[];return ss(t.children,(o,a)=>{a===Gi&&(e=e.concat(i(o,a)))}),ss(t.children,(o,a)=>{a!==Gi&&(e=e.concat(i(o,a)))}),e}(t,(o,a)=>a===Gi?[Kp(t.children[Gi],!1)]:[`${a}:${Kp(o,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Gi]?`${Wf(t)}/${e[0]}`:`${Wf(t)}/(${e.join("//")})`}}function Pv(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function md(t){return Pv(t).replace(/%3B/gi,";")}function Es(t){return Pv(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xc(t){return decodeURIComponent(t)}function ef(t){return xc(t.replace(/\+/g,"%20"))}function tf(t){return`${Es(t.path)}${function(t){return Object.keys(t).map(i=>`;${Es(i)}=${Es(t[i])}`).join("")}(t.parameters)}`}const nf=/^[^\/()?;=#]+/;function gd(t){const i=t.match(nf);return i?i[0]:""}const $l=/^[^=?&#]+/,Dh=/^[^?&#]+/;class Rv{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new oi([],{}):new oi([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(o[Gi]=new oi(i,e)),o}parseSegment(){const i=gd(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(i),new qa(xc(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const e=gd(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const a=gd(this.remaining);a&&(o=a,this.capture(o))}i[xc(e)]=xc(o)}parseQueryParam(i){const e=function(t){const i=t.match($l);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const v=function(t){const i=t.match(Dh);return i?i[0]:""}(this.remaining);v&&(o=v,this.capture(o))}const a=ef(e),c=ef(o);if(i.hasOwnProperty(a)){let v=i[a];Array.isArray(v)||(v=[v],i[a]=v),v.push(c)}else i[a]=c}parseParens(i){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=gd(this.remaining),a=this.remaining[o.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;o.indexOf(":")>-1?(c=o.substr(0,o.indexOf(":")),this.capture(c),this.capture(":")):i&&(c=Gi);const v=this.parseChildren();e[c]=1===Object.keys(v).length?v[Gi]:new oi([],v),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new Error(`Expected "${i}".`)}}class cp{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){const e=fg(i,this._root);return e?e.children.map(o=>o.value):[]}firstChild(i){const e=fg(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){const e=mg(i,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==i)}pathFromRoot(i){return mg(i,this._root).map(e=>e.value)}}function fg(t,i){if(t===i.value)return i;for(const e of i.children){const o=fg(t,e);if(o)return o}return null}function mg(t,i){if(t===i.value)return[i];for(const e of i.children){const o=mg(t,e);if(o.length)return o.unshift(i),o}return[]}class Vu{constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ih(t){const i={};return t&&t.children.forEach(e=>i[e.value.outlet]=e),i}class $f extends cp{constructor(i,e){super(i),this.snapshot=e,Ph(this,i)}toString(){return this.snapshot.toString()}}function up(t,i){const e=function(t,i){const v=new Qf([],{},{},"",{},Gi,i,null,t.root,-1,{});return new V_("",new Vu(v,[]))}(t,i),o=new mo([new qa("",{})]),a=new mo({}),c=new mo({}),v=new mo({}),A=new mo(""),z=new Pa(o,a,v,A,c,Gi,i,e.root);return z.snapshot=e.root,new $f(new Vu(z,[]),e)}class Pa{constructor(i,e,o,a,c,v,A,z){this.url=i,this.params=e,this.queryParams=o,this.fragment=a,this.data=c,this.outlet=v,this.component=A,this._futureSnapshot=z}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ei.U)(i=>kh(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ei.U)(i=>kh(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _d(t,i="emptyOnly"){const e=t.pathFromRoot;let o=0;if("always"!==i)for(o=e.length-1;o>=1;){const a=e[o],c=e[o-1];if(a.routeConfig&&""===a.routeConfig.path)o--;else{if(c.component)break;o--}}return function(t){return t.reduce((i,e)=>({params:Object.assign(Object.assign({},i.params),e.params),data:Object.assign(Object.assign({},i.data),e.data),resolve:Object.assign(Object.assign({},i.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(o))}class Qf{constructor(i,e,o,a,c,v,A,z,$,oe,fe){this.url=i,this.params=e,this.queryParams=o,this.fragment=a,this.data=c,this.outlet=v,this.component=A,this.routeConfig=z,this._urlSegment=$,this._lastPathIndex=oe,this._resolve=fe}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class V_ extends cp{constructor(i,e){super(e),this.url=i,Ph(this,e)}toString(){return U_(this._root)}}function Ph(t,i){i.value._routerState=t,i.children.forEach(e=>Ph(t,e))}function U_(t){const i=t.children.length>0?` { ${t.children.map(U_).join(", ")} } `:"";return`${t.value}${i}`}function gg(t){if(t.snapshot){const i=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Zl(i.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),i.fragment!==e.fragment&&t.fragment.next(e.fragment),Zl(i.params,e.params)||t.params.next(e.params),function(t,i){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!Zl(t[e],i[e]))return!1;return!0}(i.url,e.url)||t.url.next(e.url),Zl(i.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function _g(t,i){return Zl(t.params,i.params)&&function(t,i){return bc(t,i)&&t.every((e,o)=>Zl(e.parameters,i[o].parameters))}(t.url,i.url)&&!(!t.parent!=!i.parent)&&(!t.parent||_g(t.parent,i.parent))}function Wa(t,i,e){if(e&&t.shouldReuseRoute(i.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=i.value;const a=function(t,i,e){return i.children.map(o=>{for(const a of e.children)if(t.shouldReuseRoute(o.value,a.value.snapshot))return Wa(t,o,a);return Wa(t,o)})}(t,i,e);return new Vu(o,a)}{if(t.shouldAttach(i.value)){const c=t.retrieve(i.value);if(null!==c){const v=c.route;return Jc(i,v),v}}const o=function(t){return new Pa(new mo(t.url),new mo(t.params),new mo(t.queryParams),new mo(t.fragment),new mo(t.data),t.outlet,t.component,t)}(i.value),a=i.children.map(c=>Wa(t,c));return new Vu(o,a)}}function Jc(t,i){if(t.value.routeConfig!==i.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==i.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");i.value._futureSnapshot=t.value;for(let e=0;e<t.children.length;++e)Jc(t.children[e],i.children[e])}function hp(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Uu(t){return"object"==typeof t&&null!=t&&t.outlets}function of(t,i,e,o,a){let c={};return o&&ss(o,(v,A)=>{c[A]=Array.isArray(v)?v.map(z=>`${z}`):`${v}`}),new kl(e.root===t?i:yd(e.root,t,i),c,a)}function yd(t,i,e){const o={};return ss(t.children,(a,c)=>{o[c]=a===i?e:yd(a,i,e)}),new oi(t.segments,o)}class vg{constructor(i,e,o){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=o,i&&o.length>0&&hp(o[0]))throw new Error("Root segment cannot have matrix parameters");const a=o.find(Uu);if(a&&a!==Wl(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rh{constructor(i,e,o){this.segmentGroup=i,this.processChildren=e,this.index=o}}function G_(t,i,e){if(t||(t=new oi([],{})),0===t.segments.length&&t.hasChildren())return Hu(t,i,e);const o=function(t,i,e){let o=0,a=i;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<t.segments.length;){if(o>=e.length)return c;const v=t.segments[a],A=e[o];if(Uu(A))break;const z=`${A}`,$=o<e.length-1?e[o+1]:null;if(a>0&&void 0===z)break;if(z&&$&&"object"==typeof $&&void 0===$.outlets){if(!sf(z,$,v))return c;o+=2}else{if(!sf(z,{},v))return c;o++}a++}return{match:!0,pathIndex:a,commandIndex:o}}(t,i,e),a=e.slice(o.commandIndex);if(o.match&&o.pathIndex<t.segments.length){const c=new oi(t.segments.slice(0,o.pathIndex),{});return c.children[Gi]=new oi(t.segments.slice(o.pathIndex),t.children),Hu(c,0,a)}return o.match&&0===a.length?new oi(t.segments,{}):o.match&&!t.hasChildren()?Xa(t,i,e):o.match?Hu(t,0,a):Xa(t,i,e)}function Hu(t,i,e){if(0===e.length)return new oi(t.segments,{});{const o=function(t){return Uu(t[0])?t[0].outlets:{[Gi]:t}}(e),a={};return ss(o,(c,v)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[v]=G_(t.children[v],i,c))}),ss(t.children,(c,v)=>{void 0===o[v]&&(a[v]=c)}),new oi(t.segments,a)}}function Xa(t,i,e){const o=t.segments.slice(0,i);let a=0;for(;a<e.length;){const c=e[a];if(Uu(c)){const z=bg(c.outlets);return new oi(o,z)}if(0===a&&hp(e[0])){o.push(new qa(t.segments[i].path,Kc(e[0]))),a++;continue}const v=Uu(c)?c.outlets[Gi]:`${c}`,A=a<e.length-1?e[a+1]:null;v&&A&&hp(A)?(o.push(new qa(v,Kc(A))),a+=2):(o.push(new qa(v,{})),a++)}return new oi(o,{})}function bg(t){const i={};return ss(t,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(i[o]=Xa(new oi([],{}),0,e))}),i}function Kc(t){const i={};return ss(t,(e,o)=>i[o]=`${e}`),i}function sf(t,i,e){return t==e.path&&Zl(i,e.parameters)}class Fh{constructor(i,e,o,a){this.routeReuseStrategy=i,this.futureState=e,this.currState=o,this.forwardEvent=a}activate(i){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,i),gg(this.futureState.root),this.activateChildRoutes(e,o,i)}deactivateChildRoutes(i,e,o){const a=Ih(e);i.children.forEach(c=>{const v=c.value.outlet;this.deactivateRoutes(c,a[v],o),delete a[v]}),ss(a,(c,v)=>{this.deactivateRouteAndItsChildren(c,o)})}deactivateRoutes(i,e,o){const a=i.value,c=e?e.value:null;if(a===c)if(a.component){const v=o.getContext(a.outlet);v&&this.deactivateChildRoutes(i,e,v.children)}else this.deactivateChildRoutes(i,e,o);else c&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(i,e){this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){const o=e.getContext(i.value.outlet);if(o&&o.outlet){const a=o.outlet.detach(),c=o.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:a,route:i,contexts:c})}}deactivateRouteAndOutlet(i,e){const o=e.getContext(i.value.outlet),a=o&&i.value.component?o.children:e,c=Ih(i);for(const v of Object.keys(c))this.deactivateRouteAndItsChildren(c[v],a);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(i,e,o){const a=Ih(e);i.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],o),this.forwardEvent(new hd(c.value.snapshot))}),i.children.length&&this.forwardEvent(new qf(i.value.snapshot))}activateRoutes(i,e,o){const a=i.value,c=e?e.value:null;if(gg(a),a===c)if(a.component){const v=o.getOrCreateContext(a.outlet);this.activateChildRoutes(i,e,v.children)}else this.activateChildRoutes(i,e,o);else if(a.component){const v=o.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const A=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),v.children.onOutletReAttached(A.contexts),v.attachRef=A.componentRef,v.route=A.route.value,v.outlet&&v.outlet.attach(A.componentRef,A.route.value),xg(A.route)}else{const A=function(t){for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(a.snapshot),z=A?A.module.componentFactoryResolver:null;v.attachRef=null,v.route=a,v.resolver=z,v.outlet&&v.outlet.activateWith(a,z),this.activateChildRoutes(i,null,v.children)}}else this.activateChildRoutes(i,null,o)}}function xg(t){gg(t.value),t.children.forEach(xg)}class af{constructor(i,e){this.routes=i,this.module=e}}function tu(t){return"function"==typeof t}function wc(t){return t instanceof kl}const vd=Symbol("INITIAL_VALUE");function lf(){return Rr(t=>Yl(t.map(i=>i.pipe(ue(1),ws(vd)))).pipe(ca((i,e)=>{let o=!1;return e.reduce((a,c,v)=>a!==vd?a:(c===vd&&(o=!0),o||!1!==c&&v!==e.length-1&&!wc(c)?a:c),i)},vd),w(i=>i!==vd),(0,ei.U)(i=>wc(i)?i:!0===i),ue(1)))}let Lh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&s._UZ(0,"router-outlet")},directives:function(){return[jv]},encapsulation:2}),t})();function q_(t,i=""){for(let e=0;e<t.length;e++){const o=t[e];Ov(o,cf(i,o))}}function Ov(t,i){t.children&&q_(t.children,i)}function cf(t,i){return i?t||i.path?t&&!i.path?`${t}/`:!t&&i.path?i.path:`${t}/${i.path}`:"":t}function Kf(t){const i=t.children&&t.children.map(Kf),e=i?Object.assign(Object.assign({},t),{children:i}):Object.assign({},t);return!e.component&&(i||e.loadChildren)&&e.outlet&&e.outlet!==Gi&&(e.component=Lh),e}function Ra(t){return t.outlet||Gi}function em(t,i){const e=t.filter(o=>Ra(o)===i);return e.push(...t.filter(o=>Ra(o)!==i)),e}const E={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function S(t,i,e){var o;if(""===i.path)return"full"===i.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},E):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(i.matcher||Bu)(e,t,i);if(!c)return Object.assign({},E);const v={};ss(c.posParams,(z,$)=>{v[$]=z.path});const A=c.consumed.length>0?Object.assign(Object.assign({},v),c.consumed[c.consumed.length-1].parameters):v;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:A,positionalParamSegments:null!==(o=c.posParams)&&void 0!==o?o:{}}}function I(t,i,e,o,a="corrected"){if(e.length>0&&function(t,i,e){return e.some(o=>Fe(t,i,o)&&Ra(o)!==Gi)}(t,e,o)){const v=new oi(i,function(t,i,e,o){const a={};a[Gi]=o,o._sourceSegment=t,o._segmentIndexShift=i.length;for(const c of e)if(""===c.path&&Ra(c)!==Gi){const v=new oi([],{});v._sourceSegment=t,v._segmentIndexShift=i.length,a[Ra(c)]=v}return a}(t,i,o,new oi(e,t.children)));return v._sourceSegment=t,v._segmentIndexShift=i.length,{segmentGroup:v,slicedSegments:[]}}if(0===e.length&&function(t,i,e){return e.some(o=>Fe(t,i,o))}(t,e,o)){const v=new oi(t.segments,function(t,i,e,o,a,c){const v={};for(const A of o)if(Fe(t,e,A)&&!a[Ra(A)]){const z=new oi([],{});z._sourceSegment=t,z._segmentIndexShift="legacy"===c?t.segments.length:i.length,v[Ra(A)]=z}return Object.assign(Object.assign({},a),v)}(t,i,e,o,t.children,a));return v._sourceSegment=t,v._segmentIndexShift=i.length,{segmentGroup:v,slicedSegments:e}}const c=new oi(t.segments,t.children);return c._sourceSegment=t,c._segmentIndexShift=i.length,{segmentGroup:c,slicedSegments:e}}function Fe(t,i,e){return(!(t.hasChildren()||i.length>0)||"full"!==e.pathMatch)&&""===e.path}function Ye(t,i,e,o){return!!(Ra(t)===o||o!==Gi&&Fe(i,e,t))&&("**"===t.path||S(i,t,e).matched)}function st(t,i,e){return 0===i.length&&!t.children[e]}class pt{constructor(i){this.segmentGroup=i||null}}class Wt{constructor(i){this.urlTree=i}}function cn(t){return new Yr.y(i=>i.error(new pt(t)))}function Mn(t){return new Yr.y(i=>i.error(new Wt(t)))}function Wn(t){return new Yr.y(i=>i.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Qi{constructor(i,e,o,a,c){this.configLoader=e,this.urlSerializer=o,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=i.get(s.h0i)}apply(){const i=I(this.urlTree.root,[],[],this.config).segmentGroup,e=new oi(i.segments,i.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Gi).pipe((0,ei.U)(c=>this.createUrlTree(Al(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(pa(c=>{if(c instanceof Wt)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof pt?this.noMatchError(c):c}))}match(i){return this.expandSegmentGroup(this.ngModule,this.config,i.root,Gi).pipe((0,ei.U)(a=>this.createUrlTree(Al(a),i.queryParams,i.fragment))).pipe(pa(a=>{throw a instanceof pt?this.noMatchError(a):a}))}noMatchError(i){return new Error(`Cannot match any routes. URL Segment: '${i.segmentGroup}'`)}createUrlTree(i,e,o){const a=i.segments.length>0?new oi([],{[Gi]:i}):i;return new kl(a,e,o)}expandSegmentGroup(i,e,o,a){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(i,e,o).pipe((0,ei.U)(c=>new oi([],c))):this.expandSegment(i,o,e,o.segments,a,!0)}expandChildren(i,e,o){const a=[];for(const c of Object.keys(o.children))"primary"===c?a.unshift(c):a.push(c);return(0,Nr.D)(a).pipe(ud(c=>{const v=o.children[c],A=em(e,c);return this.expandSegmentGroup(i,A,v,c).pipe((0,ei.U)(z=>({segment:z,outlet:c})))}),ca((c,v)=>(c[v.outlet]=v.segment,c),{}),function(t,i){const e=arguments.length>=2;return o=>o.pipe(t?w((a,c)=>t(a,c,o)):tt.y,Hf(1),e?Ae(i):$e(()=>new f))}())}expandSegment(i,e,o,a,c,v){return(0,Nr.D)(o).pipe(ud(A=>this.expandSegmentAgainstRoute(i,e,o,A,a,c,v).pipe(pa($=>{if($ instanceof pt)return(0,Xn.of)(null);throw $}))),ot(A=>!!A),pa((A,z)=>{if(A instanceof f||"EmptyError"===A.name){if(st(e,a,c))return(0,Xn.of)(new oi([],{}));throw new pt(e)}throw A}))}expandSegmentAgainstRoute(i,e,o,a,c,v,A){return Ye(a,e,c,v)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(i,e,a,c,v):A&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,e,o,a,c,v):cn(e):cn(e)}expandSegmentAgainstRouteUsingRedirect(i,e,o,a,c,v){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,o,a,v):this.expandRegularSegmentAgainstRouteUsingRedirect(i,e,o,a,c,v)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,e,o,a){const c=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?Mn(c):this.lineralizeSegments(o,c).pipe((0,Cs.zg)(v=>{const A=new oi(v,{});return this.expandSegment(i,A,e,v,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,e,o,a,c,v){const{matched:A,consumedSegments:z,lastChild:$,positionalParamSegments:oe}=S(e,a,c);if(!A)return cn(e);const fe=this.applyRedirectCommands(z,a.redirectTo,oe);return a.redirectTo.startsWith("/")?Mn(fe):this.lineralizeSegments(a,fe).pipe((0,Cs.zg)(ke=>this.expandSegment(i,e,o,ke.concat(c.slice($)),v,!1)))}matchSegmentAgainstRoute(i,e,o,a,c){if("**"===o.path)return o.loadChildren?(o._loadedConfig?(0,Xn.of)(o._loadedConfig):this.configLoader.load(i.injector,o)).pipe((0,ei.U)(ke=>(o._loadedConfig=ke,new oi(a,{})))):(0,Xn.of)(new oi(a,{}));const{matched:v,consumedSegments:A,lastChild:z}=S(e,o,a);if(!v)return cn(e);const $=a.slice(z);return this.getChildConfig(i,o,a).pipe((0,Cs.zg)(fe=>{const ke=fe.module,Oe=fe.routes,{segmentGroup:He,slicedSegments:ct}=I(e,A,$,Oe),At=new oi(He.segments,He.children);if(0===ct.length&&At.hasChildren())return this.expandChildren(ke,Oe,At).pipe((0,ei.U)(Qn=>new oi(A,Qn)));if(0===Oe.length&&0===ct.length)return(0,Xn.of)(new oi(A,{}));const Qt=Ra(o)===c;return this.expandSegment(ke,At,Oe,ct,Qt?Gi:c,!0).pipe((0,ei.U)(xn=>new oi(A.concat(xn.segments),xn.children)))}))}getChildConfig(i,e,o){return e.children?(0,Xn.of)(new af(e.children,i)):e.loadChildren?void 0!==e._loadedConfig?(0,Xn.of)(e._loadedConfig):this.runCanLoadGuards(i.injector,e,o).pipe((0,Cs.zg)(a=>{return a?this.configLoader.load(i.injector,e).pipe((0,ei.U)(c=>(e._loadedConfig=c,c))):(t=e,new Yr.y(i=>i.error(vc(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`))));var t})):(0,Xn.of)(new af([],i))}runCanLoadGuards(i,e,o){const a=e.canLoad;if(!a||0===a.length)return(0,Xn.of)(!0);const c=a.map(v=>{const A=i.get(v);let z;if((t=A)&&tu(t.canLoad))z=A.canLoad(e,o);else{if(!tu(A))throw new Error("Invalid CanLoad guard");z=A(e,o)}var t;return Tl(z)});return(0,Xn.of)(c).pipe(lf(),(0,jo.b)(v=>{if(!wc(v))return;const A=vc(`Redirecting to "${this.urlSerializer.serialize(v)}"`);throw A.url=v,A}),(0,ei.U)(v=>!0===v))}lineralizeSegments(i,e){let o=[],a=e.root;for(;;){if(o=o.concat(a.segments),0===a.numberOfChildren)return(0,Xn.of)(o);if(a.numberOfChildren>1||!a.children[Gi])return Wn(i.redirectTo);a=a.children[Gi]}}applyRedirectCommands(i,e,o){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),i,o)}applyRedirectCreatreUrlTree(i,e,o,a){const c=this.createSegmentGroup(i,e.root,o,a);return new kl(c,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){const o={};return ss(i,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const A=a.substring(1);o[c]=e[A]}else o[c]=a}),o}createSegmentGroup(i,e,o,a){const c=this.createSegments(i,e.segments,o,a);let v={};return ss(e.children,(A,z)=>{v[z]=this.createSegmentGroup(i,A,o,a)}),new oi(c,v)}createSegments(i,e,o,a){return e.map(c=>c.path.startsWith(":")?this.findPosParam(i,c,a):this.findOrReturn(c,o))}findPosParam(i,e,o){const a=o[e.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${i}'. Cannot find '${e.path}'.`);return a}findOrReturn(i,e){let o=0;for(const a of e){if(a.path===i.path)return e.splice(o),a;o++}return i}}function Al(t){const i={};for(const o of Object.keys(t.children)){const c=Al(t.children[o]);(c.segments.length>0||c.hasChildren())&&(i[o]=c)}return function(t){if(1===t.numberOfChildren&&t.children[Gi]){const i=t.children[Gi];return new oi(t.segments.concat(i.segments),i.children)}return t}(new oi(t.segments,i))}class uf{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class xo{constructor(i,e){this.component=i,this.route=e}}function Qa(t,i,e){const o=t._root;return Eg(o,i?i._root:null,e,[o.value])}function pp(t,i,e){const o=function(t){if(!t)return null;for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(i);return(o?o.module.injector:e).get(t)}function Eg(t,i,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=Ih(i);return t.children.forEach(v=>{(function(t,i,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=t.value,v=i?i.value:null,A=e?e.getContext(t.value.outlet):null;if(v&&c.routeConfig===v.routeConfig){const z=function(t,i,e){if("function"==typeof e)return e(t,i);switch(e){case"pathParamsChange":return!bc(t.url,i.url);case"pathParamsOrQueryParamsChange":return!bc(t.url,i.url)||!Zl(t.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_g(t,i)||!Zl(t.queryParams,i.queryParams);case"paramsChange":default:return!_g(t,i)}}(v,c,c.routeConfig.runGuardsAndResolvers);z?a.canActivateChecks.push(new uf(o)):(c.data=v.data,c._resolvedData=v._resolvedData),Eg(t,i,c.component?A?A.children:null:e,o,a),z&&A&&A.outlet&&A.outlet.isActivated&&a.canDeactivateChecks.push(new xo(A.outlet.component,v))}else v&&nm(i,A,a),a.canActivateChecks.push(new uf(o)),Eg(t,null,c.component?A?A.children:null:e,o,a)})(v,c[v.value.outlet],e,o.concat([v.value]),a),delete c[v.value.outlet]}),ss(c,(v,A)=>nm(v,e.getContext(A),a)),a}function nm(t,i,e){const o=Ih(t),a=t.value;ss(o,(c,v)=>{nm(c,a.component?i?i.children.getContext(v):null:i,e)}),e.canDeactivateChecks.push(new xo(a.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,a))}class Nh{}function df(t){return new Yr.y(i=>i.error(t))}class Ww{constructor(i,e,o,a,c,v){this.rootComponentType=i,this.config=e,this.urlTree=o,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=v}recognize(){const i=I(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,i,Gi);if(null===e)return null;const o=new Qf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gi,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Vu(o,e),c=new V_(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(i){const e=i.value,o=_d(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),i.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(i,e,o){return 0===e.segments.length&&e.hasChildren()?this.processChildren(i,e):this.processSegment(i,e,e.segments,o)}processChildren(i,e){const o=[];for(const c of Object.keys(e.children)){const v=e.children[c],A=em(i,c),z=this.processSegmentGroup(A,v,c);if(null===z)return null;o.push(...z)}const a=Nx(o);return a.sort((i,e)=>i.value.outlet===Gi?-1:e.value.outlet===Gi?1:i.value.outlet.localeCompare(e.value.outlet)),a}processSegment(i,e,o,a){for(const c of i){const v=this.processSegmentAgainstRoute(c,e,o,a);if(null!==v)return v}return st(e,o,a)?[]:null}processSegmentAgainstRoute(i,e,o,a){if(i.redirectTo||!Ye(i,e,o,a))return null;let c,v=[],A=[];if("**"===i.path){const Oe=o.length>0?Wl(o).parameters:{};c=new Qf(o,Oe,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zv(i),Ra(i),i.component,i,Ji(e),Bv(e)+o.length,fp(i))}else{const Oe=S(e,i,o);if(!Oe.matched)return null;v=Oe.consumedSegments,A=o.slice(Oe.lastChild),c=new Qf(v,Oe.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zv(i),Ra(i),i.component,i,Ji(e),Bv(e)+v.length,fp(i))}const z=(t=i).children?t.children:t.loadChildren?t._loadedConfig.routes:[],{segmentGroup:$,slicedSegments:oe}=I(e,v,A,z.filter(Oe=>void 0===Oe.redirectTo),this.relativeLinkResolution);var t;if(0===oe.length&&$.hasChildren()){const Oe=this.processChildren(z,$);return null===Oe?null:[new Vu(c,Oe)]}if(0===z.length&&0===oe.length)return[new Vu(c,[])];const fe=Ra(i)===a,ke=this.processSegment(z,$,oe,fe?Gi:a);return null===ke?null:[new Vu(c,ke)]}}function Xw(t){const i=t.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function Nx(t){const i=[],e=new Set;for(const o of t){if(!Xw(o)){i.push(o);continue}const a=i.find(c=>o.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...o.children),e.add(a)):i.push(o)}for(const o of e){const a=Nx(o.children);i.push(new Vu(o.value,a))}return i.filter(o=>!e.has(o))}function Ji(t){let i=t;for(;i._sourceSegment;)i=i._sourceSegment;return i}function Bv(t){let i=t,e=i._segmentIndexShift?i._segmentIndexShift:0;for(;i._sourceSegment;)i=i._sourceSegment,e+=i._segmentIndexShift?i._segmentIndexShift:0;return e-1}function zv(t){return t.data||{}}function fp(t){return t.resolve||{}}function pf(t){return Rr(i=>{const e=t(i);return e?(0,Nr.D)(e).pipe((0,ei.U)(()=>i)):(0,Xn.of)(i)})}class iu extends class{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}}{}const mp=new s.OlP("ROUTES");class rm{constructor(i,e,o,a){this.loader=i,this.compiler=e,this.onLoadStartListener=o,this.onLoadEndListener=a}load(i,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const a=this.loadModuleFactory(e.loadChildren).pipe((0,ei.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(e);const v=c.create(i);return new af(ag(v.injector.get(mp,void 0,s.XFs.Self|s.XFs.Optional)).map(Kf),v)}),pa(c=>{throw e._loader$=void 0,c}));return e._loader$=new Uf.c(a,()=>new Nn.xQ).pipe((0,gc.x)()),e._loader$}loadModuleFactory(i){return"string"==typeof i?(0,Nr.D)(this.loader.load(i)):Tl(i()).pipe((0,Cs.zg)(e=>e instanceof s.YKP?(0,Xn.of)(e):(0,Nr.D)(this.compiler.compileModuleAsync(e))))}}class Gu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ru,this.attachRef=null}}class ru{constructor(){this.contexts=new Map}onChildOutletCreated(i,e){const o=this.getOrCreateContext(i);o.outlet=e,this.contexts.set(i,o)}onChildOutletDestroyed(i){const e=this.getContext(i);e&&(e.outlet=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let e=this.getContext(i);return e||(e=new Gu,this.contexts.set(i,e)),e}getContext(i){return this.contexts.get(i)||null}}class X_{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,e){return i}}function Jw(t){throw t}function Kw(t,i,e){return i.parse("/")}function Q_(t,i){return(0,Xn.of)(null)}const e1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Lo=(()=>{class t{constructor(e,o,a,c,v,A,z,$){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=a,this.location=c,this.config=$,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Nn.xQ,this.errorHandler=Jw,this.malformedUriErrorHandler=Kw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Q_,afterPreactivation:Q_},this.urlHandlingStrategy=new X_,this.routeReuseStrategy=new iu,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=v.get(s.h0i),this.console=v.get(s.c2e);const ke=v.get(s.R0b);this.isNgZoneEnabled=ke instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig($),this.currentUrlTree=new kl(new oi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rm(A,z,Oe=>this.triggerEvent(new O_(Oe)),Oe=>this.triggerEvent(new Ss(Oe))),this.routerState=up(this.currentUrlTree,this.rootComponentType),this.transitions=new mo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(w(a=>0!==a.id),(0,ei.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Rr(a=>{let c=!1,v=!1;return(0,Xn.of)(a).pipe((0,jo.b)(A=>{this.currentNavigation={id:A.id,initialUrl:A.currentRawUrl,extractedUrl:A.extractedUrl,trigger:A.source,extras:A.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rr(A=>{const z=!this.navigated||A.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||z)&&this.urlHandlingStrategy.shouldProcessUrl(A.rawUrl))return(0,Xn.of)(A).pipe(Rr(oe=>{const fe=this.transitions.getValue();return o.next(new yc(oe.id,this.serializeUrl(oe.extractedUrl),oe.source,oe.restoredState)),fe!==this.transitions.getValue()?se.E:Promise.resolve(oe)}),function(t,i,e,o){return Rr(a=>function(t,i,e,o,a){return new Qi(t,i,e,o,a).apply()}(t,i,e,a.extractedUrl,o).pipe((0,ei.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jo.b)(oe=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:oe.urlAfterRedirects})}),function(t,i,e,o,a){return(0,Cs.zg)(c=>function(t,i,e,o,a="emptyOnly",c="legacy"){try{const v=new Ww(t,i,e,o,a,c).recognize();return null===v?df(new Nh):(0,Xn.of)(v)}catch(v){return df(v)}}(t,i,c.urlAfterRedirects,e(c.urlAfterRedirects),o,a).pipe((0,ei.U)(v=>Object.assign(Object.assign({},c),{targetSnapshot:v}))))}(this.rootComponentType,this.config,oe=>this.serializeUrl(oe),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jo.b)(oe=>{"eager"===this.urlUpdateStrategy&&(oe.extras.skipLocationChange||this.setBrowserUrl(oe.urlAfterRedirects,oe),this.browserUrlTree=oe.urlAfterRedirects);const fe=new P_(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot);o.next(fe)}));if(z&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:fe,extractedUrl:ke,source:Oe,restoredState:He,extras:ct}=A,At=new yc(fe,this.serializeUrl(ke),Oe,He);o.next(At);const Qt=up(ke,this.rootComponentType).snapshot;return(0,Xn.of)(Object.assign(Object.assign({},A),{targetSnapshot:Qt,urlAfterRedirects:ke,extras:Object.assign(Object.assign({},ct),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=A.rawUrl,this.browserUrlTree=A.urlAfterRedirects,A.resolve(null),se.E}),pf(A=>{const{targetSnapshot:z,id:$,extractedUrl:oe,rawUrl:fe,extras:{skipLocationChange:ke,replaceUrl:Oe}}=A;return this.hooks.beforePreactivation(z,{navigationId:$,appliedUrlTree:oe,rawUrlTree:fe,skipLocationChange:!!ke,replaceUrl:!!Oe})}),(0,jo.b)(A=>{const z=new R_(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);this.triggerEvent(z)}),(0,ei.U)(A=>Object.assign(Object.assign({},A),{guards:Qa(A.targetSnapshot,A.currentSnapshot,this.rootContexts)})),function(t,i){return(0,Cs.zg)(e=>{const{targetSnapshot:o,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:v}}=e;return 0===v.length&&0===c.length?(0,Xn.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(t,i,e,o){return(0,Nr.D)(t).pipe((0,Cs.zg)(a=>function(t,i,e,o,a){const c=i&&i.routeConfig?i.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,Xn.of)(!0);const v=c.map(A=>{const z=pp(A,i,a);let $;if(function(t){return t&&tu(t.canDeactivate)}(z))$=Tl(z.canDeactivate(t,i,e,o));else{if(!tu(z))throw new Error("Invalid CanDeactivate guard");$=Tl(z(t,i,e,o))}return $.pipe(ot())});return(0,Xn.of)(v).pipe(lf())}(a.component,a.route,e,i,o)),ot(a=>!0!==a,!0))}(v,o,a,t).pipe((0,Cs.zg)(A=>A&&function(t){return"boolean"==typeof t}(A)?function(t,i,e,o){return(0,Nr.D)(i).pipe(ud(a=>Os(function(t,i){return null!==t&&i&&i(new Er(t)),(0,Xn.of)(!0)}(a.route.parent,o),function(t,i){return null!==t&&i&&i(new F_(t)),(0,Xn.of)(!0)}(a.route,o),function(t,i,e){const o=i[i.length-1],c=i.slice(0,i.length-1).reverse().map(v=>function(t){const i=t.routeConfig?t.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:t,guards:i}:null}(v)).filter(v=>null!==v).map(v=>Xp(()=>{const A=v.guards.map(z=>{const $=pp(z,v.node,e);let oe;if(function(t){return t&&tu(t.canActivateChild)}($))oe=Tl($.canActivateChild(o,t));else{if(!tu($))throw new Error("Invalid CanActivateChild guard");oe=Tl($(o,t))}return oe.pipe(ot())});return(0,Xn.of)(A).pipe(lf())}));return(0,Xn.of)(c).pipe(lf())}(t,a.path,e),function(t,i,e){const o=i.routeConfig?i.routeConfig.canActivate:null;if(!o||0===o.length)return(0,Xn.of)(!0);const a=o.map(c=>Xp(()=>{const v=pp(c,i,e);let A;if(function(t){return t&&tu(t.canActivate)}(v))A=Tl(v.canActivate(i,t));else{if(!tu(v))throw new Error("Invalid CanActivate guard");A=Tl(v(i,t))}return A.pipe(ot())}));return(0,Xn.of)(a).pipe(lf())}(t,a.route,e))),ot(a=>!0!==a,!0))}(o,c,t,i):(0,Xn.of)(A)),(0,ei.U)(A=>Object.assign(Object.assign({},e),{guardsResult:A})))})}(this.ngModule.injector,A=>this.triggerEvent(A)),(0,jo.b)(A=>{if(wc(A.guardsResult)){const $=vc(`Redirecting to "${this.serializeUrl(A.guardsResult)}"`);throw $.url=A.guardsResult,$}const z=new Yf(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot,!!A.guardsResult);this.triggerEvent(z)}),w(A=>!!A.guardsResult||(this.restoreHistory(A),this.cancelNavigationTransition(A,""),!1)),pf(A=>{if(A.guards.canActivateChecks.length)return(0,Xn.of)(A).pipe((0,jo.b)(z=>{const $=new ql(z.id,this.serializeUrl(z.extractedUrl),this.serializeUrl(z.urlAfterRedirects),z.targetSnapshot);this.triggerEvent($)}),Rr(z=>{let $=!1;return(0,Xn.of)(z).pipe(function(t,i){return(0,Cs.zg)(e=>{const{targetSnapshot:o,guards:{canActivateChecks:a}}=e;if(!a.length)return(0,Xn.of)(e);let c=0;return(0,Nr.D)(a).pipe(ud(v=>function(t,i,e,o){return function(t,i,e,o){const a=Object.keys(t);if(0===a.length)return(0,Xn.of)({});const c={};return(0,Nr.D)(a).pipe((0,Cs.zg)(v=>function(t,i,e,o){const a=pp(t,i,o);return Tl(a.resolve?a.resolve(i,e):a(i,e))}(t[v],i,e,o).pipe((0,jo.b)(A=>{c[v]=A}))),Hf(1),(0,Cs.zg)(()=>Object.keys(c).length===a.length?(0,Xn.of)(c):se.E))}(t._resolve,t,i,o).pipe((0,ei.U)(c=>(t._resolvedData=c,t.data=Object.assign(Object.assign({},t.data),_d(t,e).resolve),null)))}(v.route,o,t,i)),(0,jo.b)(()=>c++),Hf(1),(0,Cs.zg)(v=>c===a.length?(0,Xn.of)(e):se.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jo.b)({next:()=>$=!0,complete:()=>{$||(this.restoreHistory(z),this.cancelNavigationTransition(z,"At least one route resolver didn't emit any value."))}}))}),(0,jo.b)(z=>{const $=new Iv(z.id,this.serializeUrl(z.extractedUrl),this.serializeUrl(z.urlAfterRedirects),z.targetSnapshot);this.triggerEvent($)}))}),pf(A=>{const{targetSnapshot:z,id:$,extractedUrl:oe,rawUrl:fe,extras:{skipLocationChange:ke,replaceUrl:Oe}}=A;return this.hooks.afterPreactivation(z,{navigationId:$,appliedUrlTree:oe,rawUrlTree:fe,skipLocationChange:!!ke,replaceUrl:!!Oe})}),(0,ei.U)(A=>{const z=function(t,i,e){const o=Wa(t,i._root,e?e._root:void 0);return new $f(o,i)}(this.routeReuseStrategy,A.targetSnapshot,A.currentRouterState);return Object.assign(Object.assign({},A),{targetRouterState:z})}),(0,jo.b)(A=>{this.currentUrlTree=A.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl),this.routerState=A.targetRouterState,"deferred"===this.urlUpdateStrategy&&(A.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,A),this.browserUrlTree=A.urlAfterRedirects)}),((t,i,e)=>(0,ei.U)(o=>(new Fh(i,o.targetRouterState,o.currentRouterState,e).activate(t),o)))(this.rootContexts,this.routeReuseStrategy,A=>this.triggerEvent(A)),(0,jo.b)({next(){c=!0},complete(){c=!0}}),Fs(()=>{if(!c&&!v){const A=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,A)):this.cancelNavigationTransition(a,A)}this.currentNavigation=null}),pa(A=>{if(v=!0,function(t){return t&&t[El]}(A)){const z=wc(A.url);z||(this.navigated=!0,this.restoreHistory(a,!0));const $=new Qc(a.id,this.serializeUrl(a.extractedUrl),A.message);o.next($),z?setTimeout(()=>{const oe=this.urlHandlingStrategy.merge(A.url,this.rawUrlTree);this.scheduleNavigation(oe,"imperative",null,{skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const z=new Mh(a.id,this.serializeUrl(a.extractedUrl),A);o.next(z);try{a.resolve(this.errorHandler(A))}catch($){a.reject($)}}return se.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,o)&&setTimeout(()=>{const{source:a,state:c,urlTree:v}=o,A={replaceUrl:!0};if(c){const z=Object.assign({},c);delete z.navigationId,delete z.\u0275routerPageId,0!==Object.keys(z).length&&(A.state=z)}this.scheduleNavigation(v,a,c,A)},0),this.lastLocationChangeInfo=o}))}extractLocationChangeInfoFromEvent(e){var o;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(o=e.state)||void 0===o?void 0:o.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,o){if(!e)return!0;const a=o.urlTree.toString()===e.urlTree.toString();return o.transitionId!==e.transitionId||!a||!("hashchange"===o.source&&"popstate"===e.source||"popstate"===o.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){q_(e),this.config=e.map(Kf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:a,queryParams:c,fragment:v,queryParamsHandling:A,preserveFragment:z}=o,$=a||this.routerState.root,oe=z?this.currentUrlTree.fragment:v;let fe=null;switch(A){case"merge":fe=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":fe=this.currentUrlTree.queryParams;break;default:fe=c||null}return null!==fe&&(fe=this.removeEmptyProps(fe)),function(t,i,e,o,a){if(0===e.length)return of(i.root,i.root,i,o,a);const c=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new vg(!0,0,t);let i=0,e=!1;const o=t.reduce((a,c,v)=>{if("object"==typeof c&&null!=c){if(c.outlets){const A={};return ss(c.outlets,(z,$)=>{A[$]="string"==typeof z?z.split("/"):z}),[...a,{outlets:A}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===v?(c.split("/").forEach((A,z)=>{0==z&&"."===A||(0==z&&""===A?e=!0:".."===A?i++:""!=A&&a.push(A))}),a):[...a,c]},[]);return new vg(e,i,o)}(e);if(c.toRoot())return of(i.root,new oi([],{}),i,o,a);const v=function(t,i,e){if(t.isAbsolute)return new Rh(i.root,!0,0);if(-1===e.snapshot._lastPathIndex){const c=e.snapshot._urlSegment;return new Rh(c,c===i.root,0)}const o=hp(t.commands[0])?0:1;return function(t,i,e){let o=t,a=i,c=e;for(;c>a;){if(c-=a,o=o.parent,!o)throw new Error("Invalid number of '../'");a=o.segments.length}return new Rh(o,!1,a-c)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+o,t.numberOfDoubleDots)}(c,i,t),A=v.processChildren?Hu(v.segmentGroup,v.index,c.commands):G_(v.segmentGroup,v.index,c.commands);return of(v.segmentGroup,A,i,o,a)}($,this.currentUrlTree,e,fe,null!=oe?oe:null)}navigateByUrl(e,o={skipLocationChange:!1}){const a=wc(e)?e:this.parseUrl(e),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function(t){for(let i=0;i<t.length;i++){const e=t[i];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${i}`)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(a){o=this.malformedUriErrorHandler(a,this.urlSerializer,e)}return o}isActive(e,o){let a;if(a=!0===o?Object.assign({},e1):!1===o?Object.assign({},Hv):o,wc(e))return ug(this.currentUrlTree,e,a);const c=this.parseUrl(e);return ug(this.currentUrlTree,c,a)}removeEmptyProps(e){return Object.keys(e).reduce((o,a)=>{const c=e[a];return null!=c&&(o[a]=c),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Th(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,o,a,c,v){var A,z;if(this.disposed)return Promise.resolve(!1);const $=this.getTransition(),oe="imperative"!==o&&"imperative"===(null==$?void 0:$.source),Oe=(this.lastSuccessfulId===$.id||this.currentNavigation?$.rawUrl:$.urlAfterRedirects).toString()===e.toString();if(oe&&Oe)return Promise.resolve(!0);let He,ct,At;v?(He=v.resolve,ct=v.reject,At=v.promise):At=new Promise((xn,Qn)=>{He=xn,ct=Qn});const Qt=++this.navigationId;let Sn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Sn=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(A=this.browserPageId)&&void 0!==A?A:0:(null!==(z=this.browserPageId)&&void 0!==z?z:0)+1):Sn=0,this.setTransition({id:Qt,targetPageId:Sn,source:o,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:c,resolve:He,reject:ct,promise:At,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),At.catch(xn=>Promise.reject(xn))}setBrowserUrl(e,o){const a=this.urlSerializer.serialize(e),c=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(a)||o.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(e,o=!1){var a,c;if("computed"===this.canceledNavigationResolution){const v=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===v?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===v&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(v)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o){const a=new Qc(e.id,this.serializeUrl(e.extractedUrl),o);this.triggerEvent(a),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.DyG),s.LFG(Zf),s.LFG(ru),s.LFG(Vn),s.LFG(s.zs3),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(void 0))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),ff=(()=>{class t{constructor(e,o,a,c,v){this.router=e,this.route=o,this.commands=[],this.onChanges=new Nn.xQ,null==a&&c.setAttribute(v.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:Dl(this.skipLocationChange),replaceUrl:Dl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Dl(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Lo),s.Y36(Pa),s.$8M("tabindex"),s.Y36(s.Qsj),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,o){1&e&&s.NdJ("click",function(){return o.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s.TTD]}),t})(),gp=(()=>{class t{constructor(e,o,a){this.router=e,this.route=o,this.locationStrategy=a,this.commands=[],this.onChanges=new Nn.xQ,this.subscription=e.events.subscribe(c=>{c instanceof Th&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,o,a,c,v){if(0!==e||o||a||c||v||"string"==typeof this.target&&"_self"!=this.target)return!0;const A={skipLocationChange:Dl(this.skipLocationChange),replaceUrl:Dl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,A),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Dl(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Lo),s.Y36(Pa),s.Y36(On))},t.\u0275dir=s.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,o){1&e&&s.NdJ("click",function(c){return o.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&e&&(s.Ikx("href",o.href,s.LSH),s.uIk("target",o.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s.TTD]}),t})();function Dl(t){return""===t||!!t}let Bx=(()=>{class t{constructor(e,o,a,c,v,A){this.router=e,this.element=o,this.renderer=a,this.cdr=c,this.link=v,this.linkWithHref=A,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(z=>{z instanceof Th&&this.update()})}ngAfterContentInit(){(0,Xn.of)(this.links.changes,this.linksWithHrefs.changes,(0,Xn.of)(null)).pipe((0,Xc.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const o=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(a=>!!a).map(a=>a.onChanges);this.linkInputChangesSubscription=(0,Nr.D)(o).pipe((0,Xc.J)()).subscribe(a=>{this.isActive!==this.isLinkActive(this.router)(a)&&this.update()})}set routerLinkActive(e){const o=Array.isArray(e)?e:e.split(" ");this.classes=o.filter(a=>!!a)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(o=>{e?this.renderer.addClass(this.element.nativeElement,o):this.renderer.removeClass(this.element.nativeElement,o)}))})}isLinkActive(e){const o=function(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return a=>e.isActive(a.urlTree,o)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Lo),s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(ff,8),s.Y36(gp,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,ff,5),s.Suo(a,gp,5)),2&e){let c;s.iGM(c=s.CRH())&&(o.links=c),s.iGM(c=s.CRH())&&(o.linksWithHrefs=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[s.TTD]}),t})(),jv=(()=>{class t{constructor(e,o,a,c,v){this.parentContexts=e,this.location=o,this.resolver=a,this.changeDetector=v,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.name=c||Gi,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const v=(o=o||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),A=this.parentContexts.getOrCreateContext(this.name).children,z=new n1(e,A,this.location.injector);this.activated=this.location.createComponent(v,this.location.length,z),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(ru),s.Y36(s.s_b),s.Y36(s._Vd),s.$8M("name"),s.Y36(s.sBO))},t.\u0275dir=s.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class n1{constructor(i,e,o){this.route=i,this.childContexts=e,this.parent=o}get(i,e){return i===Pa?this.route:i===ru?this.childContexts:this.parent.get(i,e)}}class r1{}class zx{preload(i,e){return(0,Xn.of)(null)}}let Vx=(()=>{class t{constructor(e,o,a,c,v){this.router=e,this.injector=c,this.preloadingStrategy=v,this.loader=new rm(o,a,$=>e.triggerEvent(new O_($)),$=>e.triggerEvent(new Ss($)))}setUpPreloading(){this.subscription=this.router.events.pipe(w(e=>e instanceof Th),ud(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(s.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const a=[];for(const c of o)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const v=c._loadedConfig;a.push(this.processRoutes(v.module,v.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(e,c)):c.children&&a.push(this.processRoutes(e,c.children));return(0,Nr.D)(a).pipe((0,Xc.J)(),(0,ei.U)(c=>{}))}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?(0,Xn.of)(o._loadedConfig):this.loader.load(e.injector,o)).pipe((0,Cs.zg)(c=>(o._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Lo),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(s.zs3),s.LFG(r1))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),Yv=(()=>{class t{constructor(e,o,a={}){this.router=e,this.viewportScroller=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Th&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof dd&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new dd(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Lo),s.LFG(ui),s.LFG(void 0))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();const ju=new s.OlP("ROUTER_CONFIGURATION"),Cc=new s.OlP("ROUTER_FORROOT_GUARD"),Ux=[Vn,{provide:Zf,useClass:pg},{provide:Lo,useFactory:function(t,i,e,o,a,c,v,A={},z,$){const oe=new Lo(null,t,i,e,o,a,c,ag(v));return z&&(oe.urlHandlingStrategy=z),$&&(oe.routeReuseStrategy=$),function(t,i){t.errorHandler&&(i.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(i.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(i.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(i.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(i.urlUpdateStrategy=t.urlUpdateStrategy)}(A,oe),A.enableTracing&&oe.events.subscribe(fe=>{var ke,Oe;null===(ke=console.group)||void 0===ke||ke.call(console,`Router Event: ${fe.constructor.name}`),console.log(fe.toString()),console.log(fe),null===(Oe=console.groupEnd)||void 0===Oe||Oe.call(console)}),oe},deps:[Zf,ru,Vn,s.zs3,s.v3s,s.Sil,mp,ju,[class{},new s.FiY],[class{},new s.FiY]]},ru,{provide:Pa,useFactory:function(t){return t.routerState.root},deps:[Lo]},{provide:s.v3s,useClass:s.EAV},Vx,zx,class{preload(i,e){return e().pipe(pa(()=>(0,Xn.of)(null)))}},{provide:ju,useValue:{enableTracing:!1}}];function K_(){return new s.PXZ("Router",Lo)}let wd=(()=>{class t{constructor(e,o){}static forRoot(e,o){return{ngModule:t,providers:[Ux,ou(e),{provide:Cc,useFactory:Hx,deps:[[Lo,new s.FiY,new s.tp0]]},{provide:ju,useValue:o||{}},{provide:On,useFactory:om,deps:[Be,[new s.tBr(Mt),new s.FiY],ju]},{provide:Yv,useFactory:qv,deps:[Lo,ui,ju]},{provide:r1,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:zx},{provide:s.PXZ,multi:!0,useFactory:K_},[Mg,{provide:s.ip1,multi:!0,useFactory:s1,deps:[Mg]},{provide:mf,useFactory:Gx,deps:[Mg]},{provide:s.tb,multi:!0,useExisting:mf}]]}}static forChild(e){return{ngModule:t,providers:[ou(e)]}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Cc,8),s.LFG(Lo,8))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({}),t})();function qv(t,i,e){return e.scrollOffset&&i.setOffset(e.scrollOffset),new Yv(t,i,e)}function om(t,i,e={}){return e.useHash?new $r(t,i):new Ui(t,i)}function Hx(t){return"guarded"}function ou(t){return[{provide:s.deG,multi:!0,useValue:t},{provide:mp,multi:!0,useValue:t}]}let Mg=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Nn.xQ}appInitializer(){return this.injector.get(Ve,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const a=new Promise(A=>o=A),c=this.injector.get(Lo),v=this.injector.get(ju);return"disabled"===v.initialNavigation?(c.setUpLocationChangeListener(),o(!0)):"enabled"===v.initialNavigation||"enabledBlocking"===v.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,Xn.of)(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),c.initialNavigation()):o(!0),a})}bootstrapListener(e){const o=this.injector.get(ju),a=this.injector.get(Vx),c=this.injector.get(Yv),v=this.injector.get(Lo),A=this.injector.get(s.z2F);e===A.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&v.initialNavigation(),a.setUpPreloading(),c.init(),v.resetRootComponentType(A.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.zs3))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();function s1(t){return t.appInitializer.bind(t)}function Gx(t){return t.bootstrapListener.bind(t)}const mf=new s.OlP("Router Initializer");function Bh(){return t=>t.lift(new Wv)}class Wv{call(i,e){return e.subscribe(new _p(i))}}class _p extends Xo.L{constructor(i){super(i),this.hasPrev=!1}_next(i){let e;this.hasPrev?e=[this.prev,i]:this.hasPrev=!0,this.prev=i,e&&this.destination.next(e)}}var kg=nt(9759),We=nt(4762),Zr=nt(4685),Cd=nt(300),gf=function(t,i){return(gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])})(t,i)};function ty(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],o=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}var si,jx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},sm=sm||{},ji=jx||self;function $v(){}function am(t){var i=typeof t;return"array"==(i="object"!=i?i:t?Array.isArray(t)?"array":i:"null")||"object"==i&&"number"==typeof t.length}function yp(t){var i=typeof t;return"object"==i&&null!=t||"function"==i}var ny="closure_uid_"+(1e9*Math.random()>>>0),Xv=0;function Yx(t,i,e){return t.call.apply(t.bind,arguments)}function Ka(t,i,e){if(!t)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,o),t.apply(i,a)}}return function(){return t.apply(i,arguments)}}function Oa(t,i,e){return(Oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yx:Ka).apply(null,arguments)}function iy(t,i){var e=Array.prototype.slice.call(arguments,1);return function(){var o=e.slice();return o.push.apply(o,arguments),t.apply(this,o)}}function el(t,i){function e(){}e.prototype=i.prototype,t.Z=i.prototype,t.prototype=new e,t.prototype.constructor=t,t.Vb=function(o,a,c){for(var v=Array(arguments.length-2),A=2;A<arguments.length;A++)v[A-2]=arguments[A];return i.prototype[a].apply(o,v)}}function _f(){this.s=this.s,this.o=this.o}var _E={};_f.prototype.s=!1,_f.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,ny)&&t[ny]||(t[ny]=++Xv)}(this);delete _E[t]}},_f.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Qv=Array.prototype.indexOf?function(t,i){return Array.prototype.indexOf.call(t,i,void 0)}:function(t,i){if("string"==typeof t)return"string"!=typeof i||1!=i.length?-1:t.indexOf(i,0);for(var e=0;e<t.length;e++)if(e in t&&t[e]===i)return e;return-1},Dg=Array.prototype.forEach?function(t,i,e){Array.prototype.forEach.call(t,i,e)}:function(t,i,e){for(var o=t.length,a="string"==typeof t?t.split(""):t,c=0;c<o;c++)c in a&&i.call(e,a[c],c,t)};function Kv(t){return Array.prototype.concat.apply([],arguments)}function lm(t){var i=t.length;if(0<i){for(var e=Array(i),o=0;o<i;o++)e[o]=t[o];return e}return[]}function yf(t){return/^[\s\xa0]*$/.test(t)}var nl,Sd=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function tl(t,i){return-1!=t.indexOf(i)}function To(t,i){return t<i?-1:t>i?1:0}e:{var eb=ji.navigator;if(eb){var oy=eb.userAgent;if(oy){nl=oy;break e}}nl=""}function Ig(t,i,e){for(var o in t)i.call(e,t[o],o,t)}function sy(t){var i={};for(var e in t)i[e]=t[e];return i}var Ql="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cm(t,i){for(var e,o,a=1;a<arguments.length;a++){for(e in o=arguments[a])t[e]=o[e];for(var c=0;c<Ql.length;c++)e=Ql[c],Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}}function bp(t){return bp[" "](t),t}bp[" "]=$v;var ma,t,yE=tl(nl,"Opera"),vf=tl(nl,"Trident")||tl(nl,"MSIE"),nb=tl(nl,"Edge"),ib=nb||vf,rb=tl(nl,"Gecko")&&!(tl(nl.toLowerCase(),"webkit")&&!tl(nl,"Edge"))&&!(tl(nl,"Trident")||tl(nl,"MSIE"))&&!tl(nl,"Edge"),Pg=tl(nl.toLowerCase(),"webkit")&&!tl(nl,"Edge");function ob(){var t=ji.document;return t?t.documentMode:void 0}e:{var zh="",um=(t=nl,rb?/rv:([^\);]+)(\)|;)/.exec(t):nb?/Edge\/([\d\.]+)/.exec(t):vf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Pg?/WebKit\/(\S+)/.exec(t):yE?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(um&&(zh=um?um[1]:""),vf){var ay=ob();if(null!=ay&&ay>parseFloat(zh)){ma=String(ay);break e}}ma=zh}var sb={};function ly(){return i=sb,Object.prototype.hasOwnProperty.call(i,9)?i[9]:i[9]=function(){for(var t=0,i=Sd(String(ma)).split("."),e=Sd("9").split("."),o=Math.max(i.length,e.length),a=0;0==t&&a<o;a++){var c=i[a]||"",v=e[a]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==c[0].length&&0==v[0].length)break;t=To(0==c[1].length?0:parseInt(c[1],10),0==v[1].length?0:parseInt(v[1],10))||To(0==c[2].length,0==v[2].length)||To(c[2],v[2]),c=c[3],v=v[3]}while(0==t)}return 0<=t}();var i}var qx=ji.document&&vf&&(ob()||parseInt(ma,10))||void 0,uy=function(){if(!ji.addEventListener||!Object.defineProperty)return!1;var t=!1,i=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ji.addEventListener("test",$v,i),ji.removeEventListener("test",$v,i)}catch(e){}return t}();function il(t,i){this.type=t,this.g=this.target=i,this.defaultPrevented=!1}function hm(t,i){if(il.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var e=this.type=t.type,o=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=i,i=t.relatedTarget){if(rb){e:{try{bp(i.nodeName);var a=!0;break e}catch(c){}a=!1}a||(i=null)}}else"mouseover"==e?i=t.fromElement:"mouseout"==e&&(i=t.toElement);this.relatedTarget=i,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:lb[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&hm.Z.h.call(this)}}il.prototype.h=function(){this.defaultPrevented=!0},el(hm,il);var lb={2:"touch",3:"pen",4:"mouse"};hm.prototype.h=function(){hm.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var bf="closure_listenable_"+(1e6*Math.random()|0),Ed=0;function cb(t,i,e,o,a){this.listener=t,this.proxy=null,this.src=i,this.type=e,this.capture=!!o,this.ia=a,this.key=++Ed,this.ca=this.fa=!1}function xp(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function su(t){this.src=t,this.g={},this.h=0}function Yu(t,i){var e=i.type;if(e in t.g){var c,o=t.g[e],a=Qv(o,i);(c=0<=a)&&Array.prototype.splice.call(o,a,1),c&&(xp(i),0==t.g[e].length&&(delete t.g[e],t.h--))}}function Rg(t,i,e,o){for(var a=0;a<t.length;++a){var c=t[a];if(!c.ca&&c.listener==i&&c.capture==!!e&&c.ia==o)return a}return-1}su.prototype.add=function(t,i,e,o,a){var c=t.toString();(t=this.g[c])||(t=this.g[c]=[],this.h++);var v=Rg(t,i,o,a);return-1<v?(i=t[v],e||(i.fa=!1)):((i=new cb(i,this.src,c,!!o,a)).fa=e,t.push(i)),i};var Og="closure_lm_"+(1e6*Math.random()|0),qu={};function Td(t,i,e,o,a){if(o&&o.once)return au(t,i,e,o,a);if(Array.isArray(i)){for(var c=0;c<i.length;c++)Td(t,i[c],e,o,a);return null}return e=fm(e),t&&t[bf]?t.N(i,e,yp(o)?!!o.capture:!!o,a):Fg(t,i,e,!1,o,a)}function Fg(t,i,e,o,a,c){if(!i)throw Error("Invalid event type");var v=yp(a)?!!a.capture:!!a,A=Lg(t);if(A||(t[Og]=A=new su(t)),(e=A.add(i,e,o,v,c)).proxy)return e;if(o=function(){var i=Zx;return function t(e){return i.call(t.src,t.listener,e)}}(),e.proxy=o,o.src=t,o.listener=e,t.addEventListener)uy||(a=v),void 0===a&&(a=!1),t.addEventListener(i.toString(),o,a);else if(t.attachEvent)t.attachEvent(pm(i.toString()),o);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(o)}return e}function au(t,i,e,o,a){if(Array.isArray(i)){for(var c=0;c<i.length;c++)au(t,i[c],e,o,a);return null}return e=fm(e),t&&t[bf]?t.O(i,e,yp(o)?!!o.capture:!!o,a):Fg(t,i,e,!0,o,a)}function ub(t,i,e,o,a){if(Array.isArray(i))for(var c=0;c<i.length;c++)ub(t,i[c],e,o,a);else o=yp(o)?!!o.capture:!!o,e=fm(e),t&&t[bf]?(t=t.i,(i=String(i).toString())in t.g&&-1<(e=Rg(c=t.g[i],e,o,a))&&(xp(c[e]),Array.prototype.splice.call(c,e,1),0==c.length&&(delete t.g[i],t.h--))):t&&(t=Lg(t))&&(i=t.g[i.toString()],t=-1,i&&(t=Rg(i,e,o,a)),(e=-1<t?i[t]:null)&&dm(e))}function dm(t){if("number"!=typeof t&&t&&!t.ca){var i=t.src;if(i&&i[bf])Yu(i.i,t);else{var e=t.type,o=t.proxy;i.removeEventListener?i.removeEventListener(e,o,t.capture):i.detachEvent?i.detachEvent(pm(e),o):i.addListener&&i.removeListener&&i.removeListener(o),(e=Lg(i))?(Yu(e,t),0==e.h&&(e.src=null,i[Og]=null)):xp(t)}}}function pm(t){return t in qu?qu[t]:qu[t]="on"+t}function Zx(t,i){if(t.ca)t=!0;else{i=new hm(i,this);var e=t.listener,o=t.ia||t.src;t.fa&&dm(t),t=e.call(o,i)}return t}function Lg(t){return(t=t[Og])instanceof su?t:null}var hb="__closure_events_fn_"+(1e9*Math.random()>>>0);function fm(t){return"function"==typeof t?t:(t[hb]||(t[hb]=function(i){return t.handleEvent(i)}),t[hb])}function ga(){_f.call(this),this.i=new su(this),this.P=this,this.I=null}function Qs(t,i){var e,o=t.I;if(o)for(e=[];o;o=o.I)e.push(o);if(t=t.P,o=i.type||i,"string"==typeof i)i=new il(i,t);else if(i instanceof il)i.target=i.target||t;else{var a=i;cm(i=new il(o,t),a)}if(a=!0,e)for(var c=e.length-1;0<=c;c--){var v=i.g=e[c];a=mm(v,o,!0,i)&&a}if(a=mm(v=i.g=t,o,!0,i)&&a,a=mm(v,o,!1,i)&&a,e)for(c=0;c<e.length;c++)a=mm(v=i.g=e[c],o,!1,i)&&a}function mm(t,i,e,o){if(!(i=t.i.g[String(i)]))return!0;i=i.concat();for(var a=!0,c=0;c<i.length;++c){var v=i[c];if(v&&!v.ca&&v.capture==e){var A=v.listener,z=v.ia||v.src;v.fa&&Yu(t.i,v),a=!1!==A.call(z,o)&&a}}return a&&!o.defaultPrevented}el(ga,_f),ga.prototype[bf]=!0,ga.prototype.removeEventListener=function(t,i,e,o){ub(this,t,i,e,o)},ga.prototype.M=function(){if(ga.Z.M.call(this),this.i){var i,t=this.i;for(i in t.g){for(var e=t.g[i],o=0;o<e.length;o++)xp(e[o]);delete t.g[i],t.h--}}this.I=null},ga.prototype.N=function(t,i,e,o){return this.i.add(String(t),i,!1,e,o)},ga.prototype.O=function(t,i,e,o){return this.i.add(String(t),i,!0,e,o)};var Md=ji.JSON.stringify;function g(){var t=re,i=null;return t.g&&(i=t.g,t.g=t.g.next,t.g||(t.h=null),i.next=null),i}var B,l=function(){function t(){this.h=this.g=null}return t.prototype.add=function(i,e){var o=_.get();o.set(i,e),this.h?this.h.next=o:this.g=o,this.h=o},t}(),_=new(function(){function t(i,e){this.i=i,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var i;return 0<this.h?(this.h--,this.g=(i=this.g).next,i.next=null):i=this.i(),i},t}())(function(){return new x},function(t){return t.reset()}),x=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(i,e){this.h=i,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function D(t){ji.setTimeout(function(){throw t},0)}function F(t,i){B||function(){var t=ji.Promise.resolve(void 0);B=function(){t.then(ce)}}(),X||(B(),X=!0),re.add(t,i)}var X=!1,re=new l;function ce(){for(var t;t=g();){try{t.h.call(t.g)}catch(e){D(e)}var i=_;i.j(t),100>i.h&&(i.h++,t.next=i.g,i.g=t)}X=!1}function de(t,i){ga.call(this),this.h=t||1,this.g=i||ji,this.j=Oa(this.kb,this),this.l=Date.now()}function _e(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Se(t,i,e){if("function"==typeof t)e&&(t=Oa(t,e));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Oa(t.handleEvent,t)}return 2147483647<Number(i)?-1:ji.setTimeout(t,i||0)}function Re(t){t.g=Se(function(){t.g=null,t.i&&(t.i=!1,Re(t))},t.j);var i=t.h;t.h=null,t.m.apply(null,i)}el(de,ga),(si=de.prototype).da=!1,si.S=null,si.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qs(this,"tick"),this.da&&(_e(this),this.start()))}},si.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},si.M=function(){de.Z.M.call(this),_e(this),delete this.g};var Xe=function(t){function i(e,o){var a=t.call(this)||this;return a.m=e,a.j=o,a.h=null,a.i=!1,a.g=null,a}return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}gf(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}(i,t),i.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Re(this)},i.prototype.M=function(){t.prototype.M.call(this),this.g&&(ji.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},i}(_f);function at(t){_f.call(this),this.h=t,this.g={}}el(at,_f);var bt=[];function It(t,i,e,o){Array.isArray(e)||(e&&(bt[0]=e.toString()),e=bt);for(var a=0;a<e.length;a++){var c=Td(i,e[a],o||t.handleEvent,!1,t.h||t);if(!c)break;t.g[c.key]=c}}function Rt(t){Ig(t.g,function(i,e){this.g.hasOwnProperty(e)&&dm(i)},t),t.g={}}function Bt(){this.g=!0}function mn(t,i,e,o){t.info(function(){return"XMLHTTP TEXT ("+i+"): "+function(t,i){if(!t.g)return i;if(!i)return null;try{var e=JSON.parse(i);if(e)for(t=0;t<e.length;t++)if(Array.isArray(e[t])){var o=e[t];if(!(2>o.length)){var a=o[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var v=1;v<a.length;v++)a[v]=""}}}return Md(e)}catch(A){return i}}(t,e)+(o?" "+o:"")})}at.prototype.M=function(){at.Z.M.call(this),Rt(this)},at.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bt.prototype.Aa=function(){this.g=!1},Bt.prototype.info=function(){};var Tn={},ln=null;function pn(){return ln=ln||new ga}function In(t){il.call(this,Tn.Ma,t)}function on(t){var i=pn();Qs(i,new In(i,t))}function Mi(t,i){il.call(this,Tn.STAT_EVENT,t),this.stat=i}function gi(t){var i=pn();Qs(i,new Mi(i,t))}function Ki(t,i){il.call(this,Tn.Na,t),this.size=i}function Li(t,i){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ji.setTimeout(function(){t()},i)}Tn.Ma="serverreachability",el(In,il),Tn.STAT_EVENT="statevent",el(Mi,il),Tn.Na="timingevent",el(Ki,il);var ni={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pi(){}function as(){}pi.prototype.h=null;var go,ko={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ns(){il.call(this,"d")}function No(){il.call(this,"c")}function Vr(){}function _o(t,i,e,o){this.l=t,this.j=i,this.m=e,this.X=o||1,this.V=new at(this),this.P=Bs,this.W=new de(t=ib?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ao}function Ao(){this.i=null,this.g="",this.h=!1}el(Ns,il),el(No,il),el(Vr,pi),Vr.prototype.g=function(){return new XMLHttpRequest},Vr.prototype.i=function(){return{}},go=new Vr;var Bs=45e3,eo={},Ar={};function ls(t,i,e){t.K=1,t.v=zo(Jl(i)),t.s=e,t.U=!0,Bo(t,null)}function Bo(t,i){t.F=Date.now(),Fa(t),t.A=Jl(t.v);var e=t.A,o=t.X;Array.isArray(o)||(o=[String(o)]),zg(e.h,"t",o),t.C=0,e=t.l.H,t.h=new Ao,t.g=e0(t.l,e?i:null,!t.s),0<t.O&&(t.L=new Xe(Oa(t.Ia,t,t.g),t.O)),It(t.V,t.g,"readystatechange",t.gb),i=t.H?sy(t.H):{},t.s?(t.u||(t.u="POST"),i["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,i)):(t.u="GET",t.g.ea(t.A,t.u,null,i)),on(1),function(t,i,e,o,a,c){t.info(function(){if(t.g)if(c)for(var v="",A=c.split("&"),z=0;z<A.length;z++){var $=A[z].split("=");if(1<$.length){var oe=$[0];$=$[1];var fe=oe.split("_");v=2<=fe.length&&"type"==fe[1]?v+(oe+"=")+$+"&":v+(oe+"=redacted&")}}else v=null;else v=c;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+i+"\n"+e+"\n"+v})}(t.j,t.u,t.A,t.m,t.X,t.s)}function Yo(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Js(t,i,e){for(var a,o=!0;!t.I&&t.C<e.length;){if((a=qo(t,e))==Ar){4==i&&(t.o=4,gi(14),o=!1),mn(t.j,t.m,null,"[Incomplete Response]");break}if(a==eo){t.o=4,gi(15),mn(t.j,t.m,e,"[Invalid Chunk]"),o=!1;break}mn(t.j,t.m,a,null),_a(t,a)}Yo(t)&&a!=Ar&&a!=eo&&(t.h.g="",t.C=0),4!=i||0!=e.length||t.h.h||(t.o=1,gi(16),o=!1),t.i=t.i&&o,o?0<e.length&&!t.aa&&(t.aa=!0,(i=t.l).g==t&&i.$&&!i.L&&(i.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),x1(i),i.L=!0,gi(11))):(mn(t.j,t.m,e,"[Invalid Chunked Response]"),Ts(t),ao(t))}function qo(t,i){var e=t.C,o=i.indexOf("\n",e);return-1==o?Ar:(e=Number(i.substring(e,o)),isNaN(e)?eo:(o+=1)+e>i.length?Ar:(i=i.substr(o,e),t.C=o+e,i))}function Fa(t){t.Y=Date.now()+t.P,Ks(t,t.P)}function Ks(t,i){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Li(Oa(t.eb,t),i)}function cr(t){t.B&&(ji.clearTimeout(t.B),t.B=null)}function ao(t){0==t.l.G||t.I||IE(t.l,t)}function Ts(t){cr(t);var i=t.L;i&&"function"==typeof i.na&&i.na(),t.L=null,_e(t.W),Rt(t.V),t.g&&(i=t.g,t.g=null,i.abort(),i.na())}function _a(t,i){try{var e=t.l;if(0!=e.G&&(e.g==t||$x(e.i,t)))if(e.I=t.N,!t.J&&$x(e.i,t)&&3==e.G){try{var o=e.Ca.g.parse(i)}catch(At){o=null}if(Array.isArray(o)&&3==o.length){var a=o;if(0==a[0])e:if(e.u)e.ta=a[1],0<e.ta-e.U&&37500>a[2]&&e.N&&0==e.A&&!e.v&&(e.v=Li(Oa(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<t.F))break e;Kx(e),Jx(e)}b1(e),gi(18)}if(1>=c1(e.i)&&e.ka){try{e.ka()}catch(At){}e.ka=void 0}}else Hg(e,11)}else if((t.J||e.g==t)&&Kx(e),!yf(i))for(a=e.Ca.g.parse(i),i=0;i<a.length;i++){var c=a[i];if(e.U=c[0],c=c[1],2==e.G)if("c"==c[0]){e.J=c[1],e.la=c[2];var v=c[3];null!=v&&(e.ma=v,e.h.info("VER="+e.ma));var A=c[4];null!=A&&(e.za=A,e.h.info("SVER="+e.za));var z=c[5];null!=z&&"number"==typeof z&&0<z&&(e.K=o=1.5*z,e.h.info("backChannelRequestTimeoutMs_="+o)),o=e;var $=t.g;if($){var oe=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var fe=o.i;!fe.g&&(tl(oe,"spdy")||tl(oe,"quic")||tl(oe,"h2"))&&(fe.j=fe.l,fe.g=new Set,fe.h&&(Xx(fe,fe.h),fe.h=null))}if(o.D){var ke=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(o.sa=ke,Do(o.F,o.D,ke))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-t.F,e.h.info("Handshake RTT: "+e.O+"ms"));var Oe=t;if((o=e).oa=S1(o,o.H?o.la:null,o.W),Oe.J){wE(o.i,Oe);var He=Oe,ct=o.K;ct&&He.setTimeout(ct),He.B&&(cr(He),Fa(He)),o.g=Oe}else v1(o);0<e.l.length&&_b(e)}else"stop"!=c[0]&&"close"!=c[0]||Hg(e,7);else 3==e.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Hg(e,7):kE(e):"noop"!=c[0]&&e.j&&e.j.wa(c),e.A=0)}on(4)}catch(At){}}function Sc(t,i){if(t.forEach&&"function"==typeof t.forEach)t.forEach(i,void 0);else if(am(t)||"string"==typeof t)Dg(t,i,void 0);else{if(t.T&&"function"==typeof t.T)var e=t.T();else if(t.R&&"function"==typeof t.R)e=void 0;else if(am(t)||"string"==typeof t){e=[];for(var o=t.length,a=0;a<o;a++)e.push(a)}else for(a in e=[],o=0,t)e[o++]=a;a=(o=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(am(t)){for(var i=[],e=t.length,o=0;o<e;o++)i.push(t[o]);return i}for(o in i=[],e=0,t)i[e++]=t[o];return i}(t)).length;for(var c=0;c<a;c++)i.call(void 0,o[c],e&&e[c],t)}}function Ec(t,i){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var o=0;o<e;o+=2)this.set(arguments[o],arguments[o+1])}else if(t)if(t instanceof Ec)for(e=t.T(),o=0;o<e.length;o++)this.set(e[o],t.get(e[o]));else for(o in t)this.set(o,t[o])}function lu(t){if(t.i!=t.g.length){for(var i=0,e=0;i<t.g.length;){var o=t.g[i];cs(t.h,o)&&(t.g[e++]=o),i++}t.g.length=e}if(t.i!=t.g.length){var a={};for(e=i=0;i<t.g.length;)cs(a,o=t.g[i])||(t.g[e++]=o,a[o]=1),i++;t.g.length=e}}function cs(t,i){return Object.prototype.hasOwnProperty.call(t,i)}(si=_o.prototype).setTimeout=function(t){this.P=t},si.gb=function(t){t=t.target;var i=this.L;i&&3==xf(t)?i.l():this.Ia(t)},si.Ia=function(t){try{if(t==this.g)e:{var i=xf(this.g),e=this.g.Da(),o=this.g.ba();if(!(3>i)&&(3!=i||ib||this.g&&(this.h.h||this.g.ga()||AA(this.g)))){this.I||4!=i||7==e||on(8==e||0>=o?3:2),cr(this);var a=this.g.ba();this.N=a;t:if(Yo(this)){var c=AA(this.g);t="";var v=c.length,A=4==xf(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ts(this),ao(this);var z="";break t}this.h.i=new ji.TextDecoder}for(e=0;e<v;e++)this.h.h=!0,t+=this.h.i.decode(c[e],{stream:A&&e==v-1});c.splice(0,v),this.h.g+=t,this.C=0,z=this.h.g}else z=this.g.ga();if(this.i=200==a,function(t,i,e,o,a,c,v){t.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+a+"]: "+i+"\n"+e+"\n"+c+" "+v})}(this.j,this.u,this.A,this.m,this.X,i,a),this.i){if(this.$&&!this.J){t:{if(this.g){var $,oe=this.g;if(($=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yf($)){var fe=$;break t}}fe=null}if(!(a=fe)){this.i=!1,this.o=3,gi(12),Ts(this),ao(this);break e}mn(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_a(this,a)}this.U?(Js(this,i,z),ib&&this.i&&3==i&&(It(this.V,this.W,"tick",this.fb),this.W.start())):(mn(this.j,this.m,z,null),_a(this,z)),4==i&&Ts(this),this.i&&!this.I&&(4==i?IE(this.l,this):(this.i=!1,Fa(this)))}else 400==a&&0<z.indexOf("Unknown SID")?(this.o=3,gi(12)):(this.o=0,gi(13)),Ts(this),ao(this)}}}catch(ke){}},si.fb=function(){if(this.g){var t=xf(this.g),i=this.g.ga();this.C<i.length&&(cr(this),Js(this,t,i),this.i&&4!=t&&Fa(this))}},si.cancel=function(){this.I=!0,Ts(this)},si.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,i){t.info(function(){return"TIMEOUT: "+i})}(this.j,this.A),2!=this.K&&(on(3),gi(17)),Ts(this),this.o=2,ao(this)):Ks(this,this.Y-t)},(si=Ec.prototype).R=function(){lu(this);for(var t=[],i=0;i<this.g.length;i++)t.push(this.h[this.g[i]]);return t},si.T=function(){return lu(this),this.g.concat()},si.get=function(t,i){return cs(this.h,t)?this.h[t]:i},si.set=function(t,i){cs(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=i},si.forEach=function(t,i){for(var e=this.T(),o=0;o<e.length;o++){var a=e[o],c=this.get(a);t.call(i,c,a,this)}};var Zu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ko(t,i){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ko){this.g=void 0!==i?i:t.g,rl(this,t.j),this.s=t.s,Hh(this,t.i),cu(this,t.m),this.l=t.l,i=t.h;var e=new wp;e.i=i.i,i.g&&(e.g=new Ec(i.g),e.h=i.h),hy(this,e),this.o=t.o}else t&&(e=String(t).match(Zu))?(this.g=!!i,rl(this,e[1]||"",!0),this.s=Tc(e[2]||""),Hh(this,e[3]||"",!0),cu(this,e[4]),this.l=Tc(e[5]||"",!0),hy(this,e[6]||"",!0),this.o=Tc(e[7]||"")):(this.g=!!i,this.h=new wp(null,this.g))}function Jl(t){return new Ko(t)}function rl(t,i,e){t.j=e?Tc(i,!0):i,t.j&&(t.j=t.j.replace(/:$/,""))}function Hh(t,i,e){t.i=e?Tc(i,!0):i}function cu(t,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);t.m=i}else t.m=null}function hy(t,i,e){i instanceof wp?(t.h=i,function(t,i){i&&!t.j&&(Wu(t),t.i=null,t.g.forEach(function(e,o){var a=o.toLowerCase();o!=a&&(Ng(this,o),zg(this,a,e))},t)),t.j=i}(t.h,t.g)):(e||(i=kd(i,fy)),t.h=new wp(i,t.g))}function Do(t,i,e){t.h.set(i,e)}function zo(t){return Do(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Tc(t,i){return t?i?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kd(t,i,e){return"string"==typeof t?(t=encodeURI(t).replace(i,va),e&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function va(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ko.prototype.toString=function(){var t=[],i=this.j;i&&t.push(kd(i,Wx,!0),":");var e=this.i;return(e||"file"==i)&&(t.push("//"),(i=this.s)&&t.push(kd(i,Wx,!0),"@"),t.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&t.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&t.push("/"),t.push(kd(e,"/"==e.charAt(0)?py:dy,!0))),(e=this.h.toString())&&t.push("?",e),(e=this.o)&&t.push("#",kd(e,my)),t.join("")};var Wx=/[#\/\?@]/g,dy=/[#\?:]/g,py=/[#\?]/g,fy=/[#\?@]/g,my=/#/g;function wp(t,i){this.h=this.g=null,this.i=t||null,this.j=!!i}function Wu(t){t.g||(t.g=new Ec,t.h=0,t.i&&function(t,i){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var o=t[e].indexOf("="),a=null;if(0<=o){var c=t[e].substring(0,o);a=t[e].substring(o+1)}else c=t[e];i(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(t.i,function(i,e){t.add(decodeURIComponent(i.replace(/\+/g," ")),e)}))}function Ng(t,i){Wu(t),i=Vg(t,i),cs(t.g.h,i)&&(t.i=null,t.h-=t.g.get(i).length,cs((t=t.g).h,i)&&(delete t.h[i],t.i--,t.g.length>2*t.i&&lu(t)))}function Bg(t,i){return Wu(t),i=Vg(t,i),cs(t.g.h,i)}function zg(t,i,e){Ng(t,i),0<e.length&&(t.i=null,t.g.set(Vg(t,i),lm(e)),t.h+=e.length)}function Vg(t,i){return i=String(i),t.j&&(i=i.toLowerCase()),i}(si=wp.prototype).add=function(t,i){Wu(this),this.i=null,t=Vg(this,t);var e=this.g.get(t);return e||this.g.set(t,e=[]),e.push(i),this.h+=1,this},si.forEach=function(t,i){Wu(this),this.g.forEach(function(e,o){Dg(e,function(a){t.call(i,a,o,this)},this)},this)},si.T=function(){Wu(this);for(var t=this.g.R(),i=this.g.T(),e=[],o=0;o<i.length;o++)for(var a=t[o],c=0;c<a.length;c++)e.push(i[o]);return e},si.R=function(t){Wu(this);var i=[];if("string"==typeof t)Bg(this,t)&&(i=Kv(i,this.g.get(Vg(this,t))));else{t=this.g.R();for(var e=0;e<t.length;e++)i=Kv(i,t[e])}return i},si.set=function(t,i){return Wu(this),this.i=null,Bg(this,t=Vg(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[i]),this.h+=1,this},si.get=function(t,i){return t&&0<(t=this.R(t)).length?String(t[0]):i},si.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],i=this.g.T(),e=0;e<i.length;e++){var o=i[e],a=encodeURIComponent(String(o));o=this.R(o);for(var c=0;c<o.length;c++){var v=a;""!==o[c]&&(v+="="+encodeURIComponent(String(o[c]))),t.push(v)}}return this.i=t.join("&")};var bE=function(i,e){this.h=i,this.g=e};function a1(t){this.l=t||xE,t=ji.PerformanceNavigationTiming?0<(t=ji.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ji.g&&ji.g.Ea&&ji.g.Ea()&&ji.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xE=10;function l1(t){return!!t.h||!!t.g&&t.g.size>=t.j}function c1(t){return t.h?1:t.g?t.g.size:0}function $x(t,i){return t.h?t.h==i:!!t.g&&t.g.has(i)}function Xx(t,i){t.g?t.g.add(i):t.h=i}function wE(t,i){t.h&&t.h==i?t.h=null:t.g&&t.g.has(i)&&t.g.delete(i)}function u1(t){var i,e;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var o=t.i;try{for(var a=ty(t.g.values()),c=a.next();!c.done;c=a.next())o=o.concat(c.value.D)}catch(A){i={error:A}}finally{try{c&&!c.done&&(e=a.return)&&e.call(a)}finally{if(i)throw i.error}}return o}return lm(t.i)}function h1(){}function CE(){this.g=new h1}function SE(t,i,e){var o=e||"";try{Sc(t,function(a,c){var v=a;yp(a)&&(v=Md(a)),i.push(o+c+"="+encodeURIComponent(v))})}catch(a){throw i.push(o+"type="+encodeURIComponent("_badmap")),a}}function d1(t,i,e,o,a){try{i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null,a(o)}catch(c){}}function db(t){this.l=t.$b||null,this.j=t.ib||!1}function pb(t,i){ga.call(this),this.D=t,this.u=i,this.m=void 0,this.readyState=p1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}a1.prototype.cancel=function(){var t,i;if(this.i=u1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var e=ty(this.g.values()),o=e.next();!o.done;o=e.next())o.value.cancel()}catch(c){t={error:c}}finally{try{o&&!o.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}this.g.clear()}},h1.prototype.stringify=function(t){return ji.JSON.stringify(t,void 0)},h1.prototype.parse=function(t){return ji.JSON.parse(t,void 0)},el(db,pi),db.prototype.g=function(){return new pb(this.l,this.j)},db.prototype.i=function(t){return function(){return t}}({}),el(pb,ga);var p1=0;function f1(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function fb(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mb(t)}function mb(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(si=pb.prototype).open=function(t,i){if(this.readyState!=p1)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=i,this.readyState=1,mb(this)},si.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var i={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(i.body=t),(this.D||ji).fetch(new Request(this.B,i)).then(this.Va.bind(this),this.ha.bind(this))},si.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fb(this)),this.readyState=p1},si.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mb(this)),this.g&&(this.readyState=3,mb(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ji.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;f1(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},si.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var i=t.value?t.value:new Uint8Array(0);(i=this.A.decode(i,{stream:!t.done}))&&(this.response=this.responseText+=i)}t.done?fb(this):mb(this),3==this.readyState&&f1(this)}},si.Ua=function(t){this.g&&(this.response=this.responseText=t,fb(this))},si.Ta=function(t){this.g&&(this.response=t,fb(this))},si.ha=function(){this.g&&fb(this)},si.setRequestHeader=function(t,i){this.v.append(t,i)},si.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},si.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],i=this.h.entries(),e=i.next();!e.done;)t.push((e=e.value)[0]+": "+e[1]),e=i.next();return t.join("\r\n")},Object.defineProperty(pb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var LP=ji.JSON.parse;function ba(t){ga.call(this),this.headers=new Ec,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=m1,this.K=this.L=!1}el(ba,ga);var m1="",NP=/^https?$/i,BP=["POST","PUT"];function MA(t){return"content-type"==t.toLowerCase()}function kA(t,i){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=i,t.m=5,EE(t),gy(t)}function EE(t){t.D||(t.D=!0,Qs(t,"complete"),Qs(t,"error"))}function TE(t){if(t.h&&void 0!==sm&&(!t.C[1]||4!=xf(t)||2!=t.ba()))if(t.v&&4==xf(t))Se(t.Fa,0,t);else if(Qs(t,"readystatechange"),4==xf(t)){t.h=!1;try{var o,i=t.ba();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}if(!(o=e)){var a;if(a=0===i){var c=String(t.H).match(Zu)[1]||null;if(!c&&ji.self&&ji.self.location){var v=ji.self.location.protocol;c=v.substr(0,v.length-1)}a=!NP.test(c?c.toLowerCase():"")}o=a}if(o)Qs(t,"complete"),Qs(t,"success");else{t.m=6;try{var A=2<xf(t)?t.g.statusText:""}catch(z){A=""}t.j=A+" ["+t.ba()+"]",EE(t)}}finally{gy(t)}}}function gy(t,i){if(t.g){Qx(t);var e=t.g,o=t.C[0]?$v:null;t.g=null,t.C=null,i||Qs(t,"ready");try{e.onreadystatechange=o}catch(a){}}}function Qx(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ji.clearTimeout(t.A),t.A=null)}function xf(t){return t.g?t.g.readyState:0}function AA(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case m1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(i){return null}}function ME(t,i,e){e:{for(o in e){var o=!1;break e}o=!0}o||(e=function(t){var i="";return Ig(t,function(e,o){i+=o,i+=":",i+=e,i+="\r\n"}),i}(e),"string"==typeof t?null!=e&&encodeURIComponent(String(e)):Do(t,i,e))}function gb(t,i,e){return e&&e.internalChannelParams&&e.internalChannelParams[t]||i}function g1(t){this.za=0,this.l=[],this.h=new Bt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gb("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gb("baseRetryDelayMs",5e3,t),this.$a=gb("retryDelaySeedMs",1e4,t),this.Ya=gb("forwardChannelMaxRetries",2,t),this.ra=gb("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new a1(t&&t.concurrentRequestLimit),this.Ca=new CE,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function kE(t){if(Ug(t),3==t.G){var i=t.V++,e=Jl(t.F);Do(e,"SID",t.J),Do(e,"RID",i),Do(e,"TYPE","terminate"),gm(t,e),(i=new _o(t,t.h,i,void 0)).K=2,i.v=zo(Jl(e)),e=!1,ji.navigator&&ji.navigator.sendBeacon&&(e=ji.navigator.sendBeacon(i.v.toString(),"")),!e&&ji.Image&&((new Image).src=i.v,e=!0),e||(i.g=e0(i.l,null),i.g.ea(i.v)),i.F=Date.now(),Fa(i)}C1(t)}function Jx(t){t.g&&(x1(t),t.g.cancel(),t.g=null)}function Ug(t){Jx(t),t.u&&(ji.clearTimeout(t.u),t.u=null),Kx(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ji.clearTimeout(t.m),t.m=null)}function _1(t,i){t.l.push(new bE(t.Za++,i)),3==t.G&&_b(t)}function _b(t){l1(t.i)||t.m||(t.m=!0,F(t.Ha,t),t.C=0)}function y1(t,i){var e;e=i?i.m:t.V++;var o=Jl(t.F);Do(o,"SID",t.J),Do(o,"RID",e),Do(o,"AID",t.U),gm(t,o),t.o&&t.s&&ME(o,t.o,t.s),e=new _o(t,t.h,e,t.C+1),null===t.o&&(e.H=t.s),i&&(t.l=i.D.concat(t.l)),i=AE(t,e,1e3),e.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Xx(t.i,e),ls(e,o,i)}function gm(t,i){t.j&&Sc({},function(e,o){Do(i,o,e)})}function AE(t,i,e){e=Math.min(t.l.length,e);var o=t.j?Oa(t.j.Oa,t.j,t):null;e:for(var a=t.l,c=-1;;){var v=["count="+e];-1==c?0<e?v.push("ofs="+(c=a[0].h)):c=0:v.push("ofs="+c);for(var A=!0,z=0;z<e;z++){var $=a[z].h,oe=a[z].g;if(0>($-=c))c=Math.max(0,a[z].h-100),A=!1;else try{SE(oe,v,"req"+$+"_")}catch(fe){o&&o(oe)}}if(A){o=v.join("&");break e}}return t=t.l.splice(0,e),i.D=t,o}function v1(t){t.g||t.u||(t.Y=1,F(t.Ga,t),t.A=0)}function b1(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Li(Oa(t.Ga,t),w1(t,t.A)),t.A++,0))}function x1(t){null!=t.B&&(ji.clearTimeout(t.B),t.B=null)}function DE(t){t.g=new _o(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var i=Jl(t.oa);Do(i,"RID","rpc"),Do(i,"SID",t.J),Do(i,"CI",t.N?"0":"1"),Do(i,"AID",t.U),gm(t,i),Do(i,"TYPE","xmlhttp"),t.o&&t.s&&ME(i,t.o,t.s),t.K&&t.g.setTimeout(t.K);var e=t.g;t=t.la,e.K=1,e.v=zo(Jl(i)),e.s=null,e.U=!0,Bo(e,t)}function Kx(t){null!=t.v&&(ji.clearTimeout(t.v),t.v=null)}function IE(t,i){var e=null;if(t.g==i){Kx(t),x1(t),t.g=null;var o=2}else{if(!$x(t.i,i))return;e=i.D,wE(t.i,i),o=1}if(t.I=i.N,0!=t.G)if(i.i)if(1==o){e=i.s?i.s.length:0,i=Date.now()-i.F;var a=t.C;Qs(o=pn(),new Ki(o,e,i,a)),_b(t)}else v1(t);else if(3==(a=i.o)||0==a&&0<t.I||!(1==o&&function(t,i){return!(c1(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=i.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Li(Oa(t.Ha,t,i),w1(t,t.C)),t.C++,0)))}(t,i)||2==o&&b1(t)))switch(e&&0<e.length&&(i=t.i,i.i=i.i.concat(e)),a){case 1:Hg(t,5);break;case 4:Hg(t,10);break;case 3:Hg(t,6);break;default:Hg(t,2)}}function w1(t,i){var e=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(e*=2),e*i}function Hg(t,i){if(t.h.info("Error code "+i),2==i){var e=null;t.j&&(e=null);var o=Oa(t.jb,t);e||(e=new Ko("//www.google.com/images/cleardot.gif"),ji.location&&"http"==ji.location.protocol||rl(e,"https"),zo(e)),function(t,i){var e=new Bt;if(ji.Image){var o=new Image;o.onload=iy(d1,e,o,"TestLoadImage: loaded",!0,i),o.onerror=iy(d1,e,o,"TestLoadImage: error",!1,i),o.onabort=iy(d1,e,o,"TestLoadImage: abort",!1,i),o.ontimeout=iy(d1,e,o,"TestLoadImage: timeout",!1,i),ji.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=t}else i(!1)}(e.toString(),o)}else gi(2);t.G=0,t.j&&t.j.va(i),C1(t),Ug(t)}function C1(t){t.G=0,t.I=-1,t.j&&((0!=u1(t.i).length||0!=t.l.length)&&(t.i.i.length=0,lm(t.l),t.l.length=0),t.j.ua())}function S1(t,i,e){var o=function(t){return t instanceof Ko?Jl(t):new Ko(t,void 0)}(e);if(""!=o.i)i&&Hh(o,i+"."+o.i),cu(o,o.m);else{var a=ji.location;o=function(t,i,e,o){var a=new Ko(null,void 0);return t&&rl(a,t),i&&Hh(a,i),e&&cu(a,e),o&&(a.l=o),a}(a.protocol,i?i+"."+a.hostname:a.hostname,+a.port,e)}return t.aa&&Ig(t.aa,function(c,v){Do(o,v,c)}),e=t.sa,(i=t.D)&&e&&Do(o,i,e),Do(o,"VER",t.ma),gm(t,o),o}function e0(t,i,e){if(i&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(i=new ba(e&&t.Ba&&!t.qa?new db({ib:!0}):t.qa)).L=t.H,i}function IA(){}function _y(){if(vf&&!(10<=Number(qx)))throw Error("Environmental error: no available transport.")}function $u(t,i){ga.call(this),this.g=new g1(i),this.l=t,this.h=i&&i.messageUrlParams||null,t=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(t?t["X-WebChannel-Content-Type"]=i.messageContentType:t={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.ya&&(t?t["X-WebChannel-Client-Profile"]=i.ya:t={"X-WebChannel-Client-Profile":i.ya}),this.g.P=t,(t=i&&i.httpHeadersOverwriteParam)&&!yf(t)&&(this.g.o=t),this.A=i&&i.supportsCrossDomainXhr||!1,this.v=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!yf(i)&&(this.g.D=i,null!==(t=this.h)&&i in t&&i in(t=this.h)&&delete t[i]),this.j=new vy(this)}function PA(t){Ns.call(this);var i=t.__sm__;if(i){e:{for(var e in i){t=e;break e}t=void 0}(this.i=t)&&(t=this.i,i=null!==i&&t in i?i[t]:void 0),this.data=i}else this.data=t}function yy(){No.call(this),this.status=1}function vy(t){this.g=t}(si=ba.prototype).ea=function(t,i,e,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);i=i?i.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():go.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:go),this.g.onreadystatechange=Oa(this.Fa,this);try{this.F=!0,this.g.open(i,String(t),!0),this.F=!1}catch(c){return void kA(this,c)}t=e||"";var a=new Ec(this.headers);o&&Sc(o,function(c,v){a.set(v,c)}),o=function(t){e:{for(var i=MA,e=t.length,o="string"==typeof t?t.split(""):t,a=0;a<e;a++)if(a in o&&i.call(void 0,o[a],a,t)){i=a;break e}i=-1}return 0>i?null:"string"==typeof t?t.charAt(i):t[i]}(a.T()),e=ji.FormData&&t instanceof ji.FormData,!(0<=Qv(BP,i))||o||e||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(c,v){this.g.setRequestHeader(v,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qx(this),0<this.B&&((this.K=function(t){return vf&&ly()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oa(this.pa,this)):this.A=Se(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(c){kA(this,c)}},si.pa=function(){void 0!==sm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qs(this,"timeout"),this.abort(8))},si.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Qs(this,"complete"),Qs(this,"abort"),gy(this))},si.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gy(this,!0)),ba.Z.M.call(this)},si.Fa=function(){this.s||(this.F||this.v||this.l?TE(this):this.cb())},si.cb=function(){TE(this)},si.ba=function(){try{return 2<xf(this)?this.g.status:-1}catch(t){return-1}},si.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},si.Qa=function(t){if(this.g){var i=this.g.responseText;return t&&0==i.indexOf(t)&&(i=i.substring(t.length)),LP(i)}},si.Da=function(){return this.m},si.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(si=g1.prototype).ma=8,si.G=1,si.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(i){}},si.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var i=new _o(this,this.h,t,void 0),e=this.s;if(this.P&&(e?cm(e=sy(e),this.P):e=this.P),null===this.o&&(i.H=e),this.ja)e:{for(var o=0,a=0;a<this.l.length;a++){var c=this.l[a];if(void 0===(c="__data__"in c.g&&"string"==typeof(c=c.g.__data__)?c.length:void 0))break;if(4096<(o+=c)){o=a;break e}if(4096===o||a===this.l.length-1){o=a+1;break e}}o=1e3}else o=1e3;o=AE(this,i,o),Do(a=Jl(this.F),"RID",t),Do(a,"CVER",22),this.D&&Do(a,"X-HTTP-Session-Id",this.D),gm(this,a),this.o&&e&&ME(a,this.o,e),Xx(this.i,i),this.Ra&&Do(a,"TYPE","init"),this.ja?(Do(a,"$req",o),Do(a,"SID","null"),i.$=!0,ls(i,a,null)):ls(i,a,o),this.G=2}}else 3==this.G&&(t?y1(this,t):0==this.l.length||l1(this.i)||y1(this))},si.Ga=function(){if(this.u=null,DE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Li(Oa(this.bb,this),t)}},si.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gi(10),Jx(this),DE(this))},si.ab=function(){null!=this.v&&(this.v=null,Jx(this),b1(this),gi(19))},si.jb=function(t){t?(this.h.info("Successfully pinged google.com"),gi(2)):(this.h.info("Failed to ping google.com"),gi(1))},(si=IA.prototype).xa=function(){},si.wa=function(){},si.va=function(){},si.ua=function(){},si.Oa=function(){},_y.prototype.g=function(t,i){return new $u(t,i)},el($u,ga),$u.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,i=this.l,e=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),F(Oa(t.hb,t,i))),gi(0),t.W=i,t.aa=e||{},t.N=t.X,t.F=S1(t,null,t.W),_b(t)},$u.prototype.close=function(){kE(this.g)},$u.prototype.u=function(t){if("string"==typeof t){var i={};i.__data__=t,_1(this.g,i)}else this.v?((i={}).__data__=Md(t),_1(this.g,i)):_1(this.g,t)},$u.prototype.M=function(){this.g.j=null,delete this.j,kE(this.g),delete this.g,$u.Z.M.call(this)},el(PA,Ns),el(yy,No),el(vy,IA),vy.prototype.xa=function(){Qs(this.g,"a")},vy.prototype.wa=function(t){Qs(this.g,new PA(t))},vy.prototype.va=function(t){Qs(this.g,new yy(t))},vy.prototype.ua=function(){Qs(this.g,"b")},_y.prototype.createWebChannel=_y.prototype.g,$u.prototype.send=$u.prototype.u,$u.prototype.open=$u.prototype.m,$u.prototype.close=$u.prototype.close,ni.NO_ERROR=0,ni.TIMEOUT=8,ni.HTTP_ERROR=6,Wr.COMPLETE="complete",as.EventType=ko,ko.OPEN="a",ko.CLOSE="b",ko.ERROR="c",ko.MESSAGE="d",ga.prototype.listen=ga.prototype.N,ba.prototype.listenOnce=ba.prototype.O,ba.prototype.getLastError=ba.prototype.La,ba.prototype.getLastErrorCode=ba.prototype.Da,ba.prototype.getStatus=ba.prototype.ba,ba.prototype.getResponseJson=ba.prototype.Qa,ba.prototype.getResponseText=ba.prototype.ga,ba.prototype.send=ba.prototype.ea;var r0=ni,o0=Wr,s0=Tn,a0_PROXY=10,a0_NOPROXY=11,RA=db,yb=as,l0=ba,uu=function(){function t(i,e){var o=this;this.previousValue=i,e&&(e.sequenceNumberHandler=function(a){return o.t(a)},this.i=function(a){return e.writeSequenceNumber(a)})}return t.prototype.t=function(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue},t.prototype.next=function(){var i=++this.previousValue;return this.i&&this.i(i),i},t}();uu.o=-1;var rn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Dn=function(t){function i(e,o){var a=this;return(a=t.call(this,o)||this).code=e,a.message=o,a.name="FirebaseError",a.toString=function(){return a.name+": [code="+a.code+"]: "+a.message},a}return(0,We.ZT)(i,t),i}(Error),Xu=new Cd.Yd("@firebase/firestore");function vb(){return Xu.logLevel}function Gn(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];if(Xu.logLevel<=Cd.in.DEBUG){var o=i.map(c0);Xu.debug.apply(Xu,(0,We.ev)(["Firestore (8.8.1): "+t],o))}}function xa(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];if(Xu.logLevel<=Cd.in.ERROR){var o=i.map(c0);Xu.error.apply(Xu,(0,We.ev)(["Firestore (8.8.1): "+t],o))}}function by(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];if(Xu.logLevel<=Cd.in.WARN){var o=i.map(c0);Xu.warn.apply(Xu,(0,We.ev)(["Firestore (8.8.1): "+t],o))}}function c0(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function vi(t){void 0===t&&(t="Unexpected state");var i="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw xa(i),new Error(i)}function Zi(t,i){t||vi()}function Jn(t,i){return t}function RE(t){var i="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(t);if(i&&"function"==typeof i.getRandomValues)i.getRandomValues(e);else for(var o=0;o<t;o++)e[o]=Math.floor(256*Math.random());return e}var E1=function(){function t(){}return t.u=function(){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/i.length)*i.length,o="";o.length<20;)for(var a=RE(40),c=0;c<a.length;++c)o.length<20&&a[c]<e&&(o+=i.charAt(a[c]%i.length));return o},t}();function kr(t,i){return t<i?-1:t>i?1:0}function _m(t,i,e){return t.length===i.length&&t.every(function(o,a){return e(o,i[a])})}function T1(t){return t+"\0"}var Mc=function(){function t(i,e){if(this.seconds=i,this.nanoseconds=e,e<0)throw new Dn(rn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Dn(rn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(i<-62135596800)throw new Dn(rn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i);if(i>=253402300800)throw new Dn(rn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(i){return t.fromMillis(i.getTime())},t.fromMillis=function(i){var e=Math.floor(i/1e3);return new t(e,Math.floor(1e6*(i-1e3*e)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(i){return this.seconds===i.seconds?kr(this.nanoseconds,i.nanoseconds):kr(this.seconds,i.seconds)},t.prototype.isEqual=function(i){return i.seconds===this.seconds&&i.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),vr=function(){function t(i){this.timestamp=i}return t.fromTimestamp=function(i){return new t(i)},t.min=function(){return new t(new Mc(0,0))},t.prototype.compareTo=function(i){return this.timestamp._compareTo(i.timestamp)},t.prototype.isEqual=function(i){return this.timestamp.isEqual(i.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function M1(t){var i=0;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i++;return i}function ym(t,i){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i(e,t[e])}function k1(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}var A1=function(){function t(i,e,o){void 0===e?e=0:e>i.length&&vi(),void 0===o?o=i.length-e:o>i.length-e&&vi(),this.segments=i,this.offset=e,this.len=o}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(i){return 0===t.comparator(this,i)},t.prototype.child=function(i){var e=this.segments.slice(this.offset,this.limit());return i instanceof t?i.forEach(function(o){e.push(o)}):e.push(i),this.construct(e)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(i){return this.construct(this.segments,this.offset+(i=void 0===i?1:i),this.length-i)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(i){return this.segments[this.offset+i]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(i){if(i.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==i.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(i){if(this.length+1!==i.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==i.get(e))return!1;return!0},t.prototype.forEach=function(i){for(var e=this.offset,o=this.limit();e<o;e++)i(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(i,e){for(var o=Math.min(i.length,e.length),a=0;a<o;a++){var c=i.get(a),v=e.get(a);if(c<v)return-1;if(c>v)return 1}return i.length<e.length?-1:i.length>e.length?1:0},t}(),to=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,We.ZT)(i,t),i.prototype.construct=function(e,o,a){return new i(e,o,a)},i.prototype.canonicalString=function(){return this.toArray().join("/")},i.prototype.toString=function(){return this.canonicalString()},i.fromString=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];for(var a=[],c=0,v=e;c<v.length;c++){var A=v[c];if(A.indexOf("//")>=0)throw new Dn(rn.INVALID_ARGUMENT,"Invalid segment ("+A+"). Paths must not contain // in them.");a.push.apply(a,A.split("/").filter(function(z){return z.length>0}))}return new i(a)},i.emptyPath=function(){return new i([])},i}(A1),UP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ad=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,We.ZT)(i,t),i.prototype.construct=function(e,o,a){return new i(e,o,a)},i.isValidIdentifier=function(e){return UP.test(e)},i.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),i.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},i.prototype.toString=function(){return this.canonicalString()},i.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},i.keyField=function(){return new i(["__name__"])},i.fromServerFormat=function(e){for(var o=[],a="",c=0,v=function(){if(0===a.length)throw new Dn(rn.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");o.push(a),a=""},A=!1;c<e.length;){var z=e[c];if("\\"===z){if(c+1===e.length)throw new Dn(rn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var $=e[c+1];if("\\"!==$&&"."!==$&&"`"!==$)throw new Dn(rn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=$,c+=2}else"`"===z?(A=!A,c++):"."!==z||A?(a+=z,c++):(v(),c++)}if(v(),A)throw new Dn(rn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new i(o)},i.emptyPath=function(){return new i([])},i}(A1),xy=function(){function t(i){this.fields=i,i.sort(Ad.comparator)}return t.prototype.covers=function(i){for(var e=0,o=this.fields;e<o.length;e++)if(o[e].isPrefixOf(i))return!0;return!1},t.prototype.isEqual=function(i){return _m(this.fields,i.fields,function(e,o){return e.isEqual(o)})},t}(),Kl=function(){function t(i){this.binaryString=i}return t.fromBase64String=function(i){return new t(atob(i))},t.fromUint8Array=function(i){return new t(function(e){for(var o="",a=0;a<e.length;++a)o+=String.fromCharCode(e[a]);return o}(i))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(i){for(var e=new Uint8Array(i.length),o=0;o<i.length;o++)e[o]=i.charCodeAt(o);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(i){return kr(this.binaryString,i.binaryString)},t.prototype.isEqual=function(i){return this.binaryString===i.binaryString},t}();Kl.EMPTY_BYTE_STRING=new Kl("");var FA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(Zi(!!t),"string"==typeof t){var i=0,e=FA.exec(t);if(Zi(!!e),e[1]){var o=e[1];o=(o+"000000000").substr(0,9),i=Number(o)}var a=new Date(t);return{seconds:Math.floor(a.getTime()/1e3),nanos:i}}return{seconds:ea(t.seconds),nanos:ea(t.nanos)}}function ea(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wy(t){return"string"==typeof t?Kl.fromBase64String(t):Kl.fromUint8Array(t)}function D1(t){var i,e;return"server_timestamp"===(null===(e=((null===(i=null==t?void 0:t.mapValue)||void 0===i?void 0:i.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function I1(t){var i=t.mapValue.fields.__previous_value__;return D1(i)?I1(i):i}function bb(t){var i=es(t.mapValue.fields.__local_write_time__.timestampValue);return new Mc(i.seconds,i.nanos)}function vm(t){return null==t}function xb(t){return 0===t&&1/t==-1/0}function Gg(t){return"number"==typeof t&&Number.isInteger(t)&&!xb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ki=function(){function t(i){this.path=i}return t.fromPath=function(i){return new t(to.fromString(i))},t.fromName=function(i){return new t(to.fromString(i).popFirst(5))},t.prototype.hasCollectionId=function(i){return this.path.length>=2&&this.path.get(this.path.length-2)===i},t.prototype.isEqual=function(i){return null!==i&&0===to.comparator(this.path,i.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(i,e){return to.comparator(i.path,e.path)},t.isDocumentKey=function(i){return i.length%2==0},t.fromSegments=function(i){return new t(new to(i.slice()))},t}();function jg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?D1(t)?4:10:vi()}function Dd(t,i){var a,e=jg(t);if(e!==jg(i))return!1;switch(e){case 0:return!0;case 1:return t.booleanValue===i.booleanValue;case 4:return bb(t).isEqual(bb(i));case 3:return function(o,a){if("string"==typeof o.timestampValue&&"string"==typeof a.timestampValue&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;var c=es(o.timestampValue),v=es(a.timestampValue);return c.seconds===v.seconds&&c.nanos===v.nanos}(t,i);case 5:return t.stringValue===i.stringValue;case 6:return a=i,wy(t.bytesValue).isEqual(wy(a.bytesValue));case 7:return t.referenceValue===i.referenceValue;case 8:return function(o,a){return ea(o.geoPointValue.latitude)===ea(a.geoPointValue.latitude)&&ea(o.geoPointValue.longitude)===ea(a.geoPointValue.longitude)}(t,i);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ea(o.integerValue)===ea(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){var c=ea(o.doubleValue),v=ea(a.doubleValue);return c===v?xb(c)===xb(v):isNaN(c)&&isNaN(v)}return!1}(t,i);case 9:return _m(t.arrayValue.values||[],i.arrayValue.values||[],Dd);case 10:return function(o,a){var c=o.mapValue.fields||{},v=a.mapValue.fields||{};if(M1(c)!==M1(v))return!1;for(var A in c)if(c.hasOwnProperty(A)&&(void 0===v[A]||!Dd(c[A],v[A])))return!1;return!0}(t,i);default:return vi()}}function wb(t,i){return void 0!==(t.values||[]).find(function(e){return Dd(e,i)})}function Yg(t,i){var a,c,v,A,e=jg(t),o=jg(i);if(e!==o)return kr(e,o);switch(e){case 0:return 0;case 1:return kr(t.booleanValue,i.booleanValue);case 2:return c=i,(v=ea((a=t).integerValue||a.doubleValue))<(A=ea(c.integerValue||c.doubleValue))?-1:v>A?1:v===A?0:isNaN(v)?isNaN(A)?0:-1:1;case 3:return LA(t.timestampValue,i.timestampValue);case 4:return LA(bb(t),bb(i));case 5:return kr(t.stringValue,i.stringValue);case 6:return function(a,c){var v=wy(a),A=wy(c);return v.compareTo(A)}(t.bytesValue,i.bytesValue);case 7:return function(a,c){for(var v=a.split("/"),A=c.split("/"),z=0;z<v.length&&z<A.length;z++){var $=kr(v[z],A[z]);if(0!==$)return $}return kr(v.length,A.length)}(t.referenceValue,i.referenceValue);case 8:return function(a,c){var v=kr(ea(a.latitude),ea(c.latitude));return 0!==v?v:kr(ea(a.longitude),ea(c.longitude))}(t.geoPointValue,i.geoPointValue);case 9:return function(a,c){for(var v=a.values||[],A=c.values||[],z=0;z<v.length&&z<A.length;++z){var $=Yg(v[z],A[z]);if($)return $}return kr(v.length,A.length)}(t.arrayValue,i.arrayValue);case 10:return function(a,c){var v=a.fields||{},A=Object.keys(v),z=c.fields||{},$=Object.keys(z);A.sort(),$.sort();for(var oe=0;oe<A.length&&oe<$.length;++oe){var fe=kr(A[oe],$[oe]);if(0!==fe)return fe;var ke=Yg(v[A[oe]],z[$[oe]]);if(0!==ke)return ke}return kr(A.length,$.length)}(t.mapValue,i.mapValue);default:throw vi()}}function LA(t,i){if("string"==typeof t&&"string"==typeof i&&t.length===i.length)return kr(t,i);var e=es(t),o=es(i),a=kr(e.seconds,o.seconds);return 0!==a?a:kr(e.nanos,o.nanos)}function Cb(t){return Sb(t)}function Sb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?"time("+(a=es(t.timestampValue)).seconds+","+a.nanos+")":"stringValue"in t?t.stringValue:"bytesValue"in t?wy(t.bytesValue).toBase64():"referenceValue"in t?ki.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(i=t.geoPointValue).latitude+","+i.longitude+")":"arrayValue"in t?function(o){for(var a="[",c=!0,v=0,A=o.values||[];v<A.length;v++)c?c=!1:a+=",",a+=Sb(A[v]);return a+"]"}(t.arrayValue):"mapValue"in t?function(o){for(var a="{",c=!0,v=0,A=Object.keys(o.fields||{}).sort();v<A.length;v++){var z=A[v];c?c=!1:a+=",",a+=z+":"+Sb(o.fields[z])}return a+"}"}(t.mapValue):vi();var a,i}function Qu(t,i){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+i.path.canonicalString()}}function P1(t){return!!t&&"integerValue"in t}function u0(t){return!!t&&"arrayValue"in t}function Id(t){return!!t&&"nullValue"in t}function Gh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hu(t){return!!t&&"mapValue"in t}function Cy(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var i={mapValue:{fields:{}}};return ym(t.mapValue.fields,function(a,c){return i.mapValue.fields[a]=Cy(c)}),i}if(t.arrayValue){for(var e={arrayValue:{values:[]}},o=0;o<(t.arrayValue.values||[]).length;++o)e.arrayValue.values[o]=Cy(t.arrayValue.values[o]);return e}return Object.assign({},t)}var du=function(){function t(i){this.value=i}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(i){if(i.isEmpty())return this.value;for(var e=this.value,o=0;o<i.length-1;++o)if(!hu(e=(e.mapValue.fields||{})[i.get(o)]))return null;return(e=(e.mapValue.fields||{})[i.lastSegment()])||null},t.prototype.set=function(i,e){this.getFieldsMap(i.popLast())[i.lastSegment()]=Cy(e)},t.prototype.setAll=function(i){var e=this,o=Ad.emptyPath(),a={},c=[];i.forEach(function(A,z){if(!o.isImmediateParentOf(z)){var $=e.getFieldsMap(o);e.applyChanges($,a,c),a={},c=[],o=z.popLast()}A?a[z.lastSegment()]=Cy(A):c.push(z.lastSegment())});var v=this.getFieldsMap(o);this.applyChanges(v,a,c)},t.prototype.delete=function(i){var e=this.field(i.popLast());hu(e)&&e.mapValue.fields&&delete e.mapValue.fields[i.lastSegment()]},t.prototype.isEqual=function(i){return Dd(this.value,i.value)},t.prototype.getFieldsMap=function(i){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var o=0;o<i.length;++o){var a=e.mapValue.fields[i.get(o)];hu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[i.get(o)]=a),e=a}return e.mapValue.fields},t.prototype.applyChanges=function(i,e,o){ym(e,function(A,z){return i[A]=z});for(var a=0,c=o;a<c.length;a++)delete i[c[a]]},t.prototype.clone=function(){return new t(Cy(this.value))},t}();function OE(t){var i=[];return ym(t.fields,function(e,o){var a=new Ad([e]);if(hu(o)){var c=OE(o.mapValue).fields;if(0===c.length)i.push(a);else for(var v=0,A=c;v<A.length;v++)i.push(a.child(A[v]))}else i.push(a)}),new xy(i)}var Pl=function(){function t(i,e,o,a,c){this.key=i,this.documentType=e,this.version=o,this.data=a,this.documentState=c}return t.newInvalidDocument=function(i){return new t(i,0,vr.min(),du.empty(),0)},t.newFoundDocument=function(i,e,o){return new t(i,1,e,o,0)},t.newNoDocument=function(i,e){return new t(i,2,e,du.empty(),0)},t.newUnknownDocument=function(i,e){return new t(i,3,e,du.empty(),2)},t.prototype.convertToFoundDocument=function(i,e){return this.version=i,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(i){return this.version=i,this.documentType=2,this.data=du.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(i){return this.version=i,this.documentType=3,this.data=du.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(i){return i instanceof t&&this.key.isEqual(i.key)&&this.version.isEqual(i.version)&&this.documentType===i.documentType&&this.documentState===i.documentState&&this.data.isEqual(i.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),NA=function(t,i,e,o,a,c,v){void 0===i&&(i=null),void 0===e&&(e=[]),void 0===o&&(o=[]),void 0===a&&(a=null),void 0===c&&(c=null),void 0===v&&(v=null),this.path=t,this.collectionGroup=i,this.orderBy=e,this.filters=o,this.limit=a,this.startAt=c,this.endAt=v,this.h=null};function FE(t,i,e,o,a,c,v){return void 0===i&&(i=null),void 0===e&&(e=[]),void 0===o&&(o=[]),void 0===a&&(a=null),void 0===c&&(c=null),void 0===v&&(v=null),new NA(t,i,e,o,a,c,v)}function qg(t){var i=Jn(t);if(null===i.h){var e=i.path.canonicalString();null!==i.collectionGroup&&(e+="|cg:"+i.collectionGroup),e+="|f:",e+=i.filters.map(function(o){return(a=o).field.canonicalString()+a.op.toString()+Cb(a.value);var a}).join(","),e+="|ob:",e+=i.orderBy.map(function(o){return(a=o).field.canonicalString()+a.dir;var a}).join(","),vm(i.limit)||(e+="|l:",e+=i.limit),i.startAt&&(e+="|lb:",e+=Sy(i.startAt)),i.endAt&&(e+="|ub:",e+=Sy(i.endAt)),i.h=e}return i.h}function bm(t,i){if(t.limit!==i.limit||t.orderBy.length!==i.orderBy.length)return!1;for(var e=0;e<t.orderBy.length;e++)if(!VE(t.orderBy[e],i.orderBy[e]))return!1;if(t.filters.length!==i.filters.length)return!1;for(var o=0;o<t.filters.length;o++)if((a=t.filters[o]).op!==(c=i.filters[o]).op||!a.field.isEqual(c.field)||!Dd(a.value,c.value))return!1;var a,c;return t.collectionGroup===i.collectionGroup&&!!t.path.isEqual(i.path)&&!!F1(t.startAt,i.startAt)&&F1(t.endAt,i.endAt)}function h0(t){return ki.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var pu=function(t){function i(e,o,a){var c=this;return(c=t.call(this)||this).field=e,c.op=o,c.value=a,c}return(0,We.ZT)(i,t),i.create=function(e,o,a){return e.isKeyField()?"in"===o||"not-in"===o?this.l(e,o,a):new BA(e,o,a):"array-contains"===o?new zA(e,a):"in"===o?new BE(e,a):"not-in"===o?new zE(e,a):"array-contains-any"===o?new R1(e,a):new i(e,o,a)},i.l=function(e,o,a){return"in"===o?new LE(e,a):new NE(e,a)},i.prototype.matches=function(e){var o=e.data.field(this.field);return"!="===this.op?null!==o&&this.m(Yg(o,this.value)):null!==o&&jg(this.value)===jg(o)&&this.m(Yg(o,this.value))},i.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vi()}},i.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},i}(function(){}),BA=function(t){function i(e,o,a){var c=this;return(c=t.call(this,e,o,a)||this).key=ki.fromName(a.referenceValue),c}return(0,We.ZT)(i,t),i.prototype.matches=function(e){var o=ki.comparator(e.key,this.key);return this.m(o)},i}(pu),LE=function(t){function i(e,o){var a=this;return(a=t.call(this,e,"in",o)||this).keys=Eb(0,o),a}return(0,We.ZT)(i,t),i.prototype.matches=function(e){return this.keys.some(function(o){return o.isEqual(e.key)})},i}(pu),NE=function(t){function i(e,o){var a=this;return(a=t.call(this,e,"not-in",o)||this).keys=Eb(0,o),a}return(0,We.ZT)(i,t),i.prototype.matches=function(e){return!this.keys.some(function(o){return o.isEqual(e.key)})},i}(pu);function Eb(t,i){var e;return((null===(e=i.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(o){return ki.fromName(o.referenceValue)})}var zA=function(t){function i(e,o){return t.call(this,e,"array-contains",o)||this}return(0,We.ZT)(i,t),i.prototype.matches=function(e){var o=e.data.field(this.field);return u0(o)&&wb(o.arrayValue,this.value)},i}(pu),BE=function(t){function i(e,o){return t.call(this,e,"in",o)||this}return(0,We.ZT)(i,t),i.prototype.matches=function(e){var o=e.data.field(this.field);return null!==o&&wb(this.value.arrayValue,o)},i}(pu),zE=function(t){function i(e,o){return t.call(this,e,"not-in",o)||this}return(0,We.ZT)(i,t),i.prototype.matches=function(e){if(wb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var o=e.data.field(this.field);return null!==o&&!wb(this.value.arrayValue,o)},i}(pu),R1=function(t){function i(e,o){return t.call(this,e,"array-contains-any",o)||this}return(0,We.ZT)(i,t),i.prototype.matches=function(e){var o=this,a=e.data.field(this.field);return!(!u0(a)||!a.arrayValue.values)&&a.arrayValue.values.some(function(c){return wb(o.value.arrayValue,c)})},i}(pu),xm=function(t,i){this.position=t,this.before=i};function Sy(t){return(t.before?"b":"a")+":"+t.position.map(function(i){return Cb(i)}).join(",")}var Zg=function(t,i){void 0===i&&(i="asc"),this.field=t,this.dir=i};function VE(t,i){return t.dir===i.dir&&t.field.isEqual(i.field)}function O1(t,i,e){for(var o=0,a=0;a<t.position.length;a++){var c=i[a],v=t.position[a];if(o=c.field.isKeyField()?ki.comparator(ki.fromName(v.referenceValue),e.key):Yg(v,e.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return t.before?o<=0:o<0}function F1(t,i){if(null===t)return null===i;if(null===i||t.before!==i.before||t.position.length!==i.position.length)return!1;for(var e=0;e<t.position.length;e++)if(!Dd(t.position[e],i.position[e]))return!1;return!0}var Cp=function(t,i,e,o,a,c,v,A){void 0===i&&(i=null),void 0===e&&(e=[]),void 0===o&&(o=[]),void 0===a&&(a=null),void 0===c&&(c="F"),void 0===v&&(v=null),void 0===A&&(A=null),this.path=t,this.collectionGroup=i,this.explicitOrderBy=e,this.filters=o,this.limit=a,this.limitType=c,this.startAt=v,this.endAt=A,this.p=null,this.T=null};function L1(t,i,e,o,a,c,v,A){return new Cp(t,i,e,o,a,c,v,A)}function Wg(t){return new Cp(t)}function Tb(t){return!vm(t.limit)&&"F"===t.limitType}function d0(t){return!vm(t.limit)&&"L"===t.limitType}function N1(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function B1(t){for(var i=0,e=t.filters;i<e.length;i++){var o=e[i];if(o.g())return o.field}return null}function z1(t){return null!==t.collectionGroup}function Ey(t){var i=Jn(t);if(null===i.p){i.p=[];var e=B1(i),o=N1(i);if(null!==e&&null===o)e.isKeyField()||i.p.push(new Zg(e)),i.p.push(new Zg(Ad.keyField(),"asc"));else{for(var a=!1,c=0,v=i.explicitOrderBy;c<v.length;c++){var A=v[c];i.p.push(A),A.field.isKeyField()&&(a=!0)}if(!a){var z=i.explicitOrderBy.length>0?i.explicitOrderBy[i.explicitOrderBy.length-1].dir:"asc";i.p.push(new Zg(Ad.keyField(),z))}}}return i.p}function jh(t){var i=Jn(t);if(!i.T)if("F"===i.limitType)i.T=FE(i.path,i.collectionGroup,Ey(i),i.filters,i.limit,i.startAt,i.endAt);else{for(var e=[],o=0,a=Ey(i);o<a.length;o++){var c=a[o];e.push(new Zg(c.field,"desc"===c.dir?"asc":"desc"))}var A=i.endAt?new xm(i.endAt.position,!i.endAt.before):null,z=i.startAt?new xm(i.startAt.position,!i.startAt.before):null;i.T=FE(i.path,i.collectionGroup,e,i.filters,i.limit,A,z)}return i.T}function UE(t,i,e){return new Cp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),i,e,t.startAt,t.endAt)}function Mb(t,i){return bm(jh(t),jh(i))&&t.limitType===i.limitType}function HE(t){return qg(jh(t))+"|lt:"+t.limitType}function V1(t){return"Query(target="+(e=(i=jh(t)).path.canonicalString(),null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=", filters: ["+i.filters.map(function(o){return(a=o).field.canonicalString()+" "+a.op+" "+Cb(a.value);var a}).join(", ")+"]"),vm(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=", orderBy: ["+i.orderBy.map(function(o){return(a=o).field.canonicalString()+" ("+a.dir+")";var a}).join(", ")+"]"),i.startAt&&(e+=", startAt: "+Sy(i.startAt)),i.endAt&&(e+=", endAt: "+Sy(i.endAt)),"Target("+e+"); limitType=")+t.limitType+")";var i,e}function kb(t,i){return i.isFoundDocument()&&(a=(o=i).key.path,null!==(e=t).collectionGroup?o.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(a):ki.isDocumentKey(e.path)?e.path.isEqual(a):e.path.isImmediateParentOf(a))&&function(e,o){for(var a=0,c=e.explicitOrderBy;a<c.length;a++){var v=c[a];if(!v.field.isKeyField()&&null===o.data.field(v.field))return!1}return!0}(t,i)&&function(e,o){for(var a=0,c=e.filters;a<c.length;a++)if(!c[a].matches(o))return!1;return!0}(t,i)&&function(e,o){return!(e.startAt&&!O1(e.startAt,Ey(e),o)||e.endAt&&O1(e.endAt,Ey(e),o))}(t,i);var e,o,a}function GE(t){return function(i,e){for(var o=!1,a=0,c=Ey(t);a<c.length;a++){var v=c[a],A=VA(v,i,e);if(0!==A)return A;o=o||v.field.isKeyField()}return 0}}function VA(t,i,e){var a,v,A,z,o=t.field.isKeyField()?ki.comparator(i.key,e.key):(v=e,A=i.data.field(a=t.field),z=v.data.field(a),null!==A&&null!==z?Yg(A,z):vi());switch(t.dir){case"asc":return o;case"desc":return-1*o;default:return vi()}}function jE(t,i){if(t.I){if(isNaN(i))return{doubleValue:"NaN"};if(i===1/0)return{doubleValue:"Infinity"};if(i===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xb(i)?"-0":i}}function YE(t){return{integerValue:""+t}}function qE(t,i){return Gg(i)?YE(i):jE(t,i)}var p0=function(){this._=void 0};function ZE(t,i,e){return t instanceof $g?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(o=e).seconds,nanos:o.nanoseconds}}}},(a=i)&&(c.fields.__previous_value__=a),{mapValue:c}):t instanceof wm?H1(t,i):t instanceof Cm?G1(t,i):function(o,a){var c=U1(o,a),v=f0(c)+f0(o.A);return P1(c)&&P1(o.A)?YE(v):jE(o.R,v)}(t,i);var o,a,c}function WE(t,i,e){return t instanceof wm?H1(t,i):t instanceof Cm?G1(t,i):e}function U1(t,i){return t instanceof Xg?P1(e=i)||(o=e)&&"doubleValue"in o?i:{integerValue:0}:null;var o,e}var $g=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,We.ZT)(i,t),i}(p0),wm=function(t){function i(e){var o=this;return(o=t.call(this)||this).elements=e,o}return(0,We.ZT)(i,t),i}(p0);function H1(t,i){for(var e=m0(i),o=function(v){e.some(function(A){return Dd(A,v)})||e.push(v)},a=0,c=t.elements;a<c.length;a++)o(c[a]);return{arrayValue:{values:e}}}var Cm=function(t){function i(e){var o=this;return(o=t.call(this)||this).elements=e,o}return(0,We.ZT)(i,t),i}(p0);function G1(t,i){for(var e=m0(i),o=function(v){e=e.filter(function(A){return!Dd(A,v)})},a=0,c=t.elements;a<c.length;a++)o(c[a]);return{arrayValue:{values:e}}}var Xg=function(t){function i(e,o){var a=this;return(a=t.call(this)||this).R=e,a.A=o,a}return(0,We.ZT)(i,t),i}(p0);function f0(t){return ea(t.integerValue||t.doubleValue)}function m0(t){return u0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Pd=function(t,i){this.field=t,this.transform=i},UA=function(t,i){this.version=t,this.transformResults=i},ec=function(){function t(i,e){this.updateTime=i,this.exists=e}return t.none=function(){return new t},t.exists=function(i){return new t(void 0,i)},t.updateTime=function(i){return new t(i)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(i){return this.exists===i.exists&&(this.updateTime?!!i.updateTime&&this.updateTime.isEqual(i.updateTime):!i.updateTime)},t}();function wf(t,i){return void 0!==t.updateTime?i.isFoundDocument()&&i.version.isEqual(t.updateTime):void 0===t.exists||t.exists===i.isFoundDocument()}var j1=function(){};function Y1(t,i,e){var o,a,c,v,A;t instanceof Ai?(a=i,c=e,v=(o=t).value.clone(),A=JE(o.fieldTransforms,a,c.transformResults),v.setAll(A),a.convertToFoundDocument(c.version,v).setHasCommittedMutations()):t instanceof Sm?function(o,a,c){if(wf(o.precondition,a)){var v=JE(o.fieldTransforms,a,c.transformResults),A=a.data;A.setAll(QE(o)),A.setAll(v),a.convertToFoundDocument(c.version,A).setHasCommittedMutations()}else a.convertToUnknownDocument(c.version)}(t,i,e):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,i,e)}function $E(t,i,e){var a;t instanceof Ai?function(o,a,c){if(wf(o.precondition,a)){var v=o.value.clone(),A=Ab(o.fieldTransforms,c,a);v.setAll(A),a.convertToFoundDocument(HA(a),v).setHasLocalMutations()}}(t,i,e):t instanceof Sm?function(o,a,c){if(wf(o.precondition,a)){var v=Ab(o.fieldTransforms,c,a),A=a.data;A.setAll(QE(o)),A.setAll(v),a.convertToFoundDocument(HA(a),A).setHasLocalMutations()}}(t,i,e):wf(t.precondition,a=i)&&a.convertToNoDocument(vr.min())}function XE(t,i){for(var e=null,o=0,a=t.fieldTransforms;o<a.length;o++){var c=a[o],v=i.data.field(c.field),A=U1(c.transform,v||null);null!=A&&(null==e&&(e=du.empty()),e.set(c.field,A))}return e||null}function q1(t,i){return t.type===i.type&&!!t.key.isEqual(i.key)&&!!t.precondition.isEqual(i.precondition)&&(o=i.fieldTransforms,!!(void 0===(e=t.fieldTransforms)&&void 0===o||e&&o&&_m(e,o,function(a,c){return(v=a).field.isEqual((A=c).field)&&($=A.transform,(z=v.transform)instanceof wm&&$ instanceof wm||z instanceof Cm&&$ instanceof Cm?_m(z.elements,$.elements,Dd):z instanceof Xg&&$ instanceof Xg?Dd(z.A,$.A):z instanceof $g&&$ instanceof $g);var v,A,z,$})))&&(0===t.type?t.value.isEqual(i.value):1!==t.type||t.data.isEqual(i.data)&&t.fieldMask.isEqual(i.fieldMask));var e,o}function HA(t){return t.isFoundDocument()?t.version:vr.min()}var Ai=function(t){function i(e,o,a,c){void 0===c&&(c=[]);var v=this;return(v=t.call(this)||this).key=e,v.value=o,v.precondition=a,v.fieldTransforms=c,v.type=0,v}return(0,We.ZT)(i,t),i}(j1),Sm=function(t){function i(e,o,a,c,v){void 0===v&&(v=[]);var A=this;return(A=t.call(this)||this).key=e,A.data=o,A.fieldMask=a,A.precondition=c,A.fieldTransforms=v,A.type=1,A}return(0,We.ZT)(i,t),i}(j1);function QE(t){var i=new Map;return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var o=t.data.field(e);i.set(e,o)}}),i}function JE(t,i,e){var o=new Map;Zi(t.length===e.length);for(var a=0;a<e.length;a++){var c=t[a],v=c.transform,A=i.data.field(c.field);o.set(c.field,WE(v,A,e[a]))}return o}function Ab(t,i,e){for(var o=new Map,a=0,c=t;a<c.length;a++){var v=c[a],A=v.transform,z=e.data.field(v.field);o.set(v.field,ZE(A,z,i))}return o}var wa,Dr,Em=function(t){function i(e,o){var a=this;return(a=t.call(this)||this).key=e,a.precondition=o,a.type=2,a.fieldTransforms=[],a}return(0,We.ZT)(i,t),i}(j1),_s=function(t){function i(e,o){var a=this;return(a=t.call(this)||this).key=e,a.precondition=o,a.type=3,a.fieldTransforms=[],a}return(0,We.ZT)(i,t),i}(j1),HP=function(t){this.count=t};function Z1(t){switch(t){case rn.OK:return vi();case rn.CANCELLED:case rn.UNKNOWN:case rn.DEADLINE_EXCEEDED:case rn.RESOURCE_EXHAUSTED:case rn.INTERNAL:case rn.UNAVAILABLE:case rn.UNAUTHENTICATED:return!1;case rn.INVALID_ARGUMENT:case rn.NOT_FOUND:case rn.ALREADY_EXISTS:case rn.PERMISSION_DENIED:case rn.FAILED_PRECONDITION:case rn.ABORTED:case rn.OUT_OF_RANGE:case rn.UNIMPLEMENTED:case rn.DATA_LOSS:return!0;default:return vi()}}function g0(t){if(void 0===t)return xa("GRPC error has no .code"),rn.UNKNOWN;switch(t){case wa.OK:return rn.OK;case wa.CANCELLED:return rn.CANCELLED;case wa.UNKNOWN:return rn.UNKNOWN;case wa.DEADLINE_EXCEEDED:return rn.DEADLINE_EXCEEDED;case wa.RESOURCE_EXHAUSTED:return rn.RESOURCE_EXHAUSTED;case wa.INTERNAL:return rn.INTERNAL;case wa.UNAVAILABLE:return rn.UNAVAILABLE;case wa.UNAUTHENTICATED:return rn.UNAUTHENTICATED;case wa.INVALID_ARGUMENT:return rn.INVALID_ARGUMENT;case wa.NOT_FOUND:return rn.NOT_FOUND;case wa.ALREADY_EXISTS:return rn.ALREADY_EXISTS;case wa.PERMISSION_DENIED:return rn.PERMISSION_DENIED;case wa.FAILED_PRECONDITION:return rn.FAILED_PRECONDITION;case wa.ABORTED:return rn.ABORTED;case wa.OUT_OF_RANGE:return rn.OUT_OF_RANGE;case wa.UNIMPLEMENTED:return rn.UNIMPLEMENTED;case wa.DATA_LOSS:return rn.DATA_LOSS;default:return vi()}}(Dr=wa||(wa={}))[Dr.OK=0]="OK",Dr[Dr.CANCELLED=1]="CANCELLED",Dr[Dr.UNKNOWN=2]="UNKNOWN",Dr[Dr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dr[Dr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dr[Dr.NOT_FOUND=5]="NOT_FOUND",Dr[Dr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dr[Dr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dr[Dr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dr[Dr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dr[Dr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dr[Dr.ABORTED=10]="ABORTED",Dr[Dr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dr[Dr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dr[Dr.INTERNAL=13]="INTERNAL",Dr[Dr.UNAVAILABLE=14]="UNAVAILABLE",Dr[Dr.DATA_LOSS=15]="DATA_LOSS";var tc=function(){function t(i,e){this.comparator=i,this.root=e||Cf.EMPTY}return t.prototype.insert=function(i,e){return new t(this.comparator,this.root.insert(i,e,this.comparator).copy(null,null,Cf.BLACK,null,null))},t.prototype.remove=function(i){return new t(this.comparator,this.root.remove(i,this.comparator).copy(null,null,Cf.BLACK,null,null))},t.prototype.get=function(i){for(var e=this.root;!e.isEmpty();){var o=this.comparator(i,e.key);if(0===o)return e.value;o<0?e=e.left:o>0&&(e=e.right)}return null},t.prototype.indexOf=function(i){for(var e=0,o=this.root;!o.isEmpty();){var a=this.comparator(i,o.key);if(0===a)return e+o.left.size;a<0?o=o.left:(e+=o.left.size+1,o=o.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(i){return this.root.inorderTraversal(i)},t.prototype.forEach=function(i){this.inorderTraversal(function(e,o){return i(e,o),!1})},t.prototype.toString=function(){var i=[];return this.inorderTraversal(function(e,o){return i.push(e+":"+o),!1}),"{"+i.join(", ")+"}"},t.prototype.reverseTraversal=function(i){return this.root.reverseTraversal(i)},t.prototype.getIterator=function(){return new Db(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(i){return new Db(this.root,i,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Db(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(i){return new Db(this.root,i,this.comparator,!0)},t}(),Db=function(){function t(i,e,o,a){this.isReverse=a,this.nodeStack=[];for(var c=1;!i.isEmpty();)if(c=e?o(i.key,e):1,a&&(c*=-1),c<0)i=this.isReverse?i.left:i.right;else{if(0===c){this.nodeStack.push(i);break}this.nodeStack.push(i),i=this.isReverse?i.right:i.left}}return t.prototype.getNext=function(){var i=this.nodeStack.pop(),e={key:i.key,value:i.value};if(this.isReverse)for(i=i.left;!i.isEmpty();)this.nodeStack.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack.push(i),i=i.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var i=this.nodeStack[this.nodeStack.length-1];return{key:i.key,value:i.value}},t}(),Cf=function(){function t(i,e,o,a,c){this.key=i,this.value=e,this.color=null!=o?o:t.RED,this.left=null!=a?a:t.EMPTY,this.right=null!=c?c:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(i,e,o,a,c){return new t(null!=i?i:this.key,null!=e?e:this.value,null!=o?o:this.color,null!=a?a:this.left,null!=c?c:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(i){return this.left.inorderTraversal(i)||i(this.key,this.value)||this.right.inorderTraversal(i)},t.prototype.reverseTraversal=function(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(i,e,o){var a=this,c=o(i,a.key);return(a=c<0?a.copy(null,null,null,a.left.insert(i,e,o),null):0===c?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(i,e,o))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var i=this;return i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),(i=i.copy(null,null,null,i.left.removeMin(),null)).fixUp()},t.prototype.remove=function(i,e){var o,a=this;if(e(i,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(i,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===e(i,a.key)){if(a.right.isEmpty())return t.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(i,e))}return a.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var i=this;return i.right.isRed()&&!i.left.isRed()&&(i=i.rotateLeft()),i.left.isRed()&&i.left.left.isRed()&&(i=i.rotateRight()),i.left.isRed()&&i.right.isRed()&&(i=i.colorFlip()),i},t.prototype.moveRedLeft=function(){var i=this.colorFlip();return i.right.left.isRed()&&(i=(i=(i=i.copy(null,null,null,null,i.right.rotateRight())).rotateLeft()).colorFlip()),i},t.prototype.moveRedRight=function(){var i=this.colorFlip();return i.left.left.isRed()&&(i=(i=i.rotateRight()).colorFlip()),i},t.prototype.rotateLeft=function(){var i=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)},t.prototype.rotateRight=function(){var i=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)},t.prototype.colorFlip=function(){var i=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,e)},t.prototype.checkMaxDepth=function(){var i=this.check();return Math.pow(2,i)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vi();var i=this.left.check();if(i!==this.right.check())throw vi();return i+(this.isRed()?0:1)},t}();Cf.EMPTY=null,Cf.RED=!0,Cf.BLACK=!1,Cf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw vi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw vi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw vi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw vi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw vi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(i,e,o,a,c){return this},t.prototype.insert=function(i,e,o){return new Cf(i,e)},t.prototype.remove=function(i,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(i){return!1},t.prototype.reverseTraversal=function(i){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ca=function(){function t(i){this.comparator=i,this.data=new tc(this.comparator)}return t.prototype.has=function(i){return null!==this.data.get(i)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(i){return this.data.indexOf(i)},t.prototype.forEach=function(i){this.data.inorderTraversal(function(e,o){return i(e),!1})},t.prototype.forEachInRange=function(i,e){for(var o=this.data.getIteratorFrom(i[0]);o.hasNext();){var a=o.getNext();if(this.comparator(a.key,i[1])>=0)return;e(a.key)}},t.prototype.forEachWhile=function(i,e){var o;for(o=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();o.hasNext();)if(!i(o.getNext().key))return},t.prototype.firstAfterOrEqual=function(i){var e=this.data.getIteratorFrom(i);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new W1(this.data.getIterator())},t.prototype.getIteratorFrom=function(i){return new W1(this.data.getIteratorFrom(i))},t.prototype.add=function(i){return this.copy(this.data.remove(i).insert(i,!0))},t.prototype.delete=function(i){return this.has(i)?this.copy(this.data.remove(i)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(i){var e=this;return e.size<i.size&&(e=i,i=this),i.forEach(function(o){e=e.add(o)}),e},t.prototype.isEqual=function(i){if(!(i instanceof t)||this.size!==i.size)return!1;for(var e=this.data.getIterator(),o=i.data.getIterator();e.hasNext();){var a=e.getNext().key,c=o.getNext().key;if(0!==this.comparator(a,c))return!1}return!0},t.prototype.toArray=function(){var i=[];return this.forEach(function(e){i.push(e)}),i},t.prototype.toString=function(){var i=[];return this.forEach(function(e){return i.push(e)}),"SortedSet("+i.toString()+")"},t.prototype.copy=function(i){var e=new t(this.comparator);return e.data=i,e},t}(),W1=function(){function t(i){this.iter=i}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),GA=new tc(ki.comparator);function Yh(){return GA}var jA=new tc(ki.comparator);function Qg(){return jA}var YA=new tc(ki.comparator);function KE(){return YA}var qA=new Ca(ki.comparator);function lo(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var e=qA,o=0,a=t;o<a.length;o++){var c=a[o];e=e.add(c)}return e}var eT=new Ca(kr);function Ib(){return eT}var _0=function(){function t(i,e,o,a,c){this.snapshotVersion=i,this.targetChanges=e,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}return t.createSynthesizedRemoteEventForCurrentChange=function(i,e){var o=new Map;return o.set(i,$1.createSynthesizedTargetChangeForCurrentChange(i,e)),new t(vr.min(),o,Ib(),Yh(),lo())},t}(),$1=function(){function t(i,e,o,a,c){this.resumeToken=i,this.current=e,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}return t.createSynthesizedTargetChangeForCurrentChange=function(i,e){return new t(Kl.EMPTY_BYTE_STRING,e,lo(),lo(),lo())},t}(),Tm=function(t,i,e,o){this.v=t,this.removedTargetIds=i,this.key=e,this.P=o},Ty=function(t,i){this.targetId=t,this.V=i},tT=function(t,i,e,o){void 0===e&&(e=Kl.EMPTY_BYTE_STRING),void 0===o&&(o=null),this.state=t,this.targetIds=i,this.resumeToken=e,this.cause=o},nT=function(){function t(){this.S=0,this.D=Q1(),this.C=Kl.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(i){i.approximateByteSize()>0&&(this.F=!0,this.C=i)},t.prototype.M=function(){var i=lo(),e=lo(),o=lo();return this.D.forEach(function(a,c){switch(c){case 0:i=i.add(a);break;case 2:e=e.add(a);break;case 1:o=o.add(a);break;default:vi()}}),new $1(this.C,this.N,i,e,o)},t.prototype.L=function(){this.F=!1,this.D=Q1()},t.prototype.B=function(i,e){this.F=!0,this.D=this.D.insert(i,e)},t.prototype.q=function(i){this.F=!0,this.D=this.D.remove(i)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ZA=function(){function t(i){this.W=i,this.G=new Map,this.H=Yh(),this.J=X1(),this.Y=new Ca(kr)}return t.prototype.X=function(i){for(var e=0,o=i.v;e<o.length;e++){var a=o[e];i.P&&i.P.isFoundDocument()?this.Z(a,i.P):this.tt(a,i.key,i.P)}for(var c=0,v=i.removedTargetIds;c<v.length;c++)this.tt(a=v[c],i.key,i.P)},t.prototype.et=function(i){var e=this;this.forEachTarget(i,function(o){var a=e.nt(o);switch(i.state){case 0:e.st(o)&&a.O(i.resumeToken);break;case 1:a.K(),a.k||a.L(),a.O(i.resumeToken);break;case 2:a.K(),a.k||e.removeTarget(o);break;case 3:e.st(o)&&(a.j(),a.O(i.resumeToken));break;case 4:e.st(o)&&(e.it(o),a.O(i.resumeToken));break;default:vi()}})},t.prototype.forEachTarget=function(i,e){var o=this;i.targetIds.length>0?i.targetIds.forEach(e):this.G.forEach(function(a,c){o.st(c)&&e(c)})},t.prototype.rt=function(i){var e=i.targetId,o=i.V.count,a=this.ot(e);if(a){var c=a.target;if(h0(c))if(0===o){var v=new ki(c.path);this.tt(e,v,Pl.newNoDocument(v,vr.min()))}else Zi(1===o);else this.ct(e)!==o&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(i){var e=this,o=new Map;this.G.forEach(function(v,A){var z=e.ot(A);if(z){if(v.current&&h0(z.target)){var $=new ki(z.target.path);null!==e.H.get($)||e.at(A,$)||e.tt(A,$,Pl.newNoDocument($,i))}v.$&&(o.set(A,v.M()),v.L())}});var a=lo();this.J.forEach(function(v,A){var z=!0;A.forEachWhile(function($){var oe=e.ot($);return!oe||2===oe.purpose||(z=!1,!1)}),z&&(a=a.add(v))});var c=new _0(i,o,this.Y,this.H,a);return this.H=Yh(),this.J=X1(),this.Y=new Ca(kr),c},t.prototype.Z=function(i,e){if(this.st(i)){var o=this.at(i,e.key)?2:0;this.nt(i).B(e.key,o),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(i))}},t.prototype.tt=function(i,e,o){if(this.st(i)){var a=this.nt(i);this.at(i,e)?a.B(e,1):a.q(e),this.J=this.J.insert(e,this.ht(e).delete(i)),o&&(this.H=this.H.insert(e,o))}},t.prototype.removeTarget=function(i){this.G.delete(i)},t.prototype.ct=function(i){var e=this.nt(i).M();return this.W.getRemoteKeysForTarget(i).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(i){this.nt(i).U()},t.prototype.nt=function(i){var e=this.G.get(i);return e||(e=new nT,this.G.set(i,e)),e},t.prototype.ht=function(i){var e=this.J.get(i);return e||(e=new Ca(kr),this.J=this.J.insert(i,e)),e},t.prototype.st=function(i){var e=null!==this.ot(i);return e||Gn("WatchChangeAggregator","Detected inactive target",i),e},t.prototype.ot=function(i){var e=this.G.get(i);return e&&e.k?null:this.W.lt(i)},t.prototype.it=function(i){var e=this;this.G.set(i,new nT),this.W.getRemoteKeysForTarget(i).forEach(function(o){e.tt(i,o,null)})},t.prototype.at=function(i,e){return this.W.getRemoteKeysForTarget(i).has(e)},t}();function X1(){return new tc(ki.comparator)}function Q1(){return new tc(ki.comparator)}var iT={asc:"ASCENDING",desc:"DESCENDING"},WA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rT=function(t,i){this.databaseId=t,this.I=i};function Pb(t,i){return t.I?new Date(1e3*i.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+i.nanoseconds).slice(-9)+"Z":{seconds:""+i.seconds,nanos:i.nanoseconds}}function oT(t,i){return t.I?i.toBase64():i.toUint8Array()}function GP(t,i){return Pb(t,i.toTimestamp())}function Rl(t){return Zi(!!t),vr.fromTimestamp((e=es(t),new Mc(e.seconds,e.nanos)));var e}function sT(t,i){return(e=t,new to(["projects",e.projectId,"databases",e.database])).child("documents").child(i).canonicalString();var e}function $A(t){var i=to.fromString(t);return Zi(_T(i)),i}function My(t,i){return sT(t.databaseId,i.path)}function Ju(t,i){var e=$A(i);if(e.get(1)!==t.databaseId.projectId)throw new Dn(rn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new Dn(rn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new ki(Ay(e))}function J1(t,i){return sT(t.databaseId,i)}function aT(t){var i=$A(t);return 4===i.length?to.emptyPath():Ay(i)}function ky(t){return new to(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ay(t){return Zi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function lT(t,i,e){return{name:My(t,i),fields:e.value.mapValue.fields}}function cT(t,i,e){var o=Ju(t,i.name),a=Rl(i.updateTime),c=new du({mapValue:{fields:i.fields}}),v=Pl.newFoundDocument(o,a,c);return e&&v.setHasCommittedMutations(),e?v.setHasCommittedMutations():v}function y0(t,i){var e,a;if(i instanceof Ai)e={update:lT(t,i.key,i.value)};else if(i instanceof Em)e={delete:My(t,i.key)};else if(i instanceof Sm)e={update:lT(t,i.key,i.data),updateMask:eC(i.fieldMask)};else{if(!(i instanceof _s))return vi();e={verify:My(t,i.key)}}return i.fieldTransforms.length>0&&(e.updateTransforms=i.fieldTransforms.map(function(o){return function(a,c){var v=c.transform;if(v instanceof $g)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof wm)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Cm)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Xg)return{fieldPath:c.field.canonicalString(),increment:v.A};throw vi()}(0,o)})),i.precondition.isNone||(e.currentDocument=void 0!==(a=i.precondition).updateTime?{updateTime:GP(t,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:vi()),e}function uT(t,i){var $,e=i.currentDocument?void 0!==($=i.currentDocument).updateTime?ec.updateTime(Rl($.updateTime)):void 0!==$.exists?ec.exists($.exists):ec.none():ec.none(),o=i.updateTransforms?i.updateTransforms.map(function($){return function(oe,fe){var ke=null;"setToServerValue"in fe?(Zi("REQUEST_TIME"===fe.setToServerValue),ke=new $g):"appendMissingElements"in fe?ke=new wm(fe.appendMissingElements.values||[]):"removeAllFromArray"in fe?ke=new Cm(fe.removeAllFromArray.values||[]):"increment"in fe?ke=new Xg(oe,fe.increment):vi();var ct=Ad.fromServerFormat(fe.fieldPath);return new Pd(ct,ke)}(t,$)}):[];if(i.update){var a=Ju(t,i.update.name),c=new du({mapValue:{fields:i.update.fields}});if(i.updateMask){var v=function($){return new xy(($.fieldPaths||[]).map(function(fe){return Ad.fromServerFormat(fe)}))}(i.updateMask);return new Sm(a,c,v,e,o)}return new Ai(a,c,e,o)}if(i.delete){var A=Ju(t,i.delete);return new Em(A,e)}if(i.verify){var z=Ju(t,i.verify);return new _s(z,e)}return vi()}function hT(t,i){return{documents:[J1(t,i.path)]}}function K1(t,i){var e={structuredQuery:{}},o=i.path;null!==i.collectionGroup?(e.parent=J1(t,o),e.structuredQuery.from=[{collectionId:i.collectionGroup,allDescendants:!0}]):(e.parent=J1(t,o.popLast()),e.structuredQuery.from=[{collectionId:o.lastSegment()}]);var a=function(A){if(0!==A.length){var z=A.map(function($){return function(oe){if("=="===oe.op){if(Gh(oe.value))return{unaryFilter:{field:Kg(oe.field),op:"IS_NAN"}};if(Id(oe.value))return{unaryFilter:{field:Kg(oe.field),op:"IS_NULL"}}}else if("!="===oe.op){if(Gh(oe.value))return{unaryFilter:{field:Kg(oe.field),op:"IS_NOT_NAN"}};if(Id(oe.value))return{unaryFilter:{field:Kg(oe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kg(oe.field),op:XA(oe.op),value:oe.value}}}($)});return 1===z.length?z[0]:{compositeFilter:{op:"AND",filters:z}}}}(i.filters);a&&(e.structuredQuery.where=a);var c=function(A){if(0!==A.length)return A.map(function(z){return{field:Kg(($=z).field),direction:mT($.dir)};var $})}(i.orderBy);c&&(e.structuredQuery.orderBy=c);var z,v=(z=i.limit,t.I||vm(z)?z:{value:z});return null!==v&&(e.structuredQuery.limit=v),i.startAt&&(e.structuredQuery.startAt=Jg(i.startAt)),i.endAt&&(e.structuredQuery.endAt=Jg(i.endAt)),e}function dT(t){var i=aT(t.parent),e=t.structuredQuery,o=e.from?e.from.length:0,a=null;if(o>0){Zi(1===o);var c=e.from[0];c.allDescendants?a=c.collectionId:i=i.child(c.collectionId)}var v=[];e.where&&(v=pT(e.where));var A=[];e.orderBy&&(A=e.orderBy.map(function(fe){return new Zg(Dy((ke=fe).field),function(Oe){switch(Oe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ke.direction));var ke}));var fe,ke,z=null;e.limit&&(z=vm(ke="object"==typeof(fe=e.limit)?fe.value:fe)?null:ke);var $=null;e.startAt&&($=fT(e.startAt));var oe=null;return e.endAt&&(oe=fT(e.endAt)),L1(i,a,A,v,z,"F",$,oe)}function pT(t){return t?void 0!==t.unaryFilter?[QA(t)]:void 0!==t.fieldFilter?[gT(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(i){return pT(i)}).reduce(function(i,e){return i.concat(e)}):vi():[]}function Jg(t){return{before:t.before,values:t.position}}function fT(t){return new xm(t.values||[],!!t.before)}function mT(t){return iT[t]}function XA(t){return WA[t]}function Kg(t){return{fieldPath:t.canonicalString()}}function Dy(t){return Ad.fromServerFormat(t.fieldPath)}function gT(t){return pu.create(Dy(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return vi()}}(t.fieldFilter.op),t.fieldFilter.value)}function QA(t){switch(t.unaryFilter.op){case"IS_NAN":var i=Dy(t.unaryFilter.field);return pu.create(i,"==",{doubleValue:NaN});case"IS_NULL":var e=Dy(t.unaryFilter.field);return pu.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var o=Dy(t.unaryFilter.field);return pu.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=Dy(t.unaryFilter.field);return pu.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return vi()}}function eC(t){var i=[];return t.fields.forEach(function(e){return i.push(e.canonicalString())}),{fieldPaths:i}}function _T(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function qh(t){for(var i="",e=0;e<t.length;e++)i.length>0&&(i=vT(i)),i=yT(t.get(e),i);return vT(i)}function yT(t,i){for(var e=i,o=t.length,a=0;a<o;a++){var c=t.charAt(a);switch(c){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=c}}return e}function vT(t){return t+"\x01\x01"}function Sf(t){var i=t.length;if(Zi(i>=2),2===i)return Zi("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),to.emptyPath();for(var e=i-2,o=[],a="",c=0;c<i;){var v=t.indexOf("\x01",c);switch((v<0||v>e)&&vi(),t.charAt(v+1)){case"\x01":var A=t.substring(c,v),z=void 0;0===a.length?z=A:(z=a+=A,a=""),o.push(z);break;case"\x10":a+=t.substring(c,v),a+="\0";break;case"\x11":a+=t.substring(c,v+1);break;default:vi()}c=v+2}return new to(o)}var JA=function(t,i){this.seconds=t,this.nanoseconds=i},kc=function(t,i,e){this.ownerId=t,this.allowTabSynchronization=i,this.leaseTimestampMs=e};kc.store="owner",kc.key="owner";var Mm=function(t,i,e){this.userId=t,this.lastAcknowledgedBatchId=i,this.lastStreamToken=e};Mm.store="mutationQueues",Mm.keyPath="userId";var ts=function(t,i,e,o,a){this.userId=t,this.batchId=i,this.localWriteTimeMs=e,this.baseMutations=o,this.mutations=a};ts.store="mutations",ts.keyPath="batchId",ts.userMutationsIndex="userMutationsIndex",ts.userMutationsKeyPath=["userId","batchId"];var nc=function(){function t(){}return t.prefixForUser=function(i){return[i]},t.prefixForPath=function(i,e){return[i,qh(e)]},t.key=function(i,e,o){return[i,qh(e),o]},t}();nc.store="documentMutations",nc.PLACEHOLDER=new nc;var KA=function(t,i){this.path=t,this.readTime=i},eD=function(t,i){this.path=t,this.version=i},Vs=function(t,i,e,o,a,c){this.unknownDocument=t,this.noDocument=i,this.document=e,this.hasCommittedMutations=o,this.readTime=a,this.parentPath=c};Vs.store="remoteDocuments",Vs.readTimeIndex="readTimeIndex",Vs.readTimeIndexPath="readTime",Vs.collectionReadTimeIndex="collectionReadTimeIndex",Vs.collectionReadTimeIndexPath=["parentPath","readTime"];var Sp=function(t){this.byteSize=t};Sp.store="remoteDocumentGlobal",Sp.key="remoteDocumentGlobalKey";var fu=function(t,i,e,o,a,c,v){this.targetId=t,this.canonicalId=i,this.readTime=e,this.resumeToken=o,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=c,this.query=v};fu.store="targets",fu.keyPath="targetId",fu.queryTargetsIndexName="queryTargetsIndex",fu.queryTargetsKeyPath=["canonicalId","targetId"];var Ol=function(t,i,e){this.targetId=t,this.path=i,this.sequenceNumber=e};Ol.store="targetDocuments",Ol.keyPath=["targetId","path"],Ol.documentTargetsIndex="documentTargetsIndex",Ol.documentTargetsKeyPath=["path","targetId"];var Ku=function(t,i,e,o){this.highestTargetId=t,this.highestListenSequenceNumber=i,this.lastRemoteSnapshotVersion=e,this.targetCount=o};Ku.key="targetGlobalKey",Ku.store="targetGlobal";var km=function(t,i){this.collectionId=t,this.parent=i};km.store="collectionParents",km.keyPath=["collectionId","parent"];var Ep=function(t,i,e,o){this.clientId=t,this.updateTimeMs=i,this.networkEnabled=e,this.inForeground=o};Ep.store="clientMetadata",Ep.keyPath="clientId";var Iy=function(t,i,e){this.bundleId=t,this.createTime=i,this.version=e};Iy.store="bundles",Iy.keyPath="bundleId";var Py=function(t,i,e){this.name=t,this.readTime=i,this.bundledQuery=e};Py.store="namedQueries",Py.keyPath="name";var bT=(0,We.ev)((0,We.ev)([],(0,We.ev)((0,We.ev)([],(0,We.ev)((0,We.ev)([],(0,We.ev)((0,We.ev)([],[Mm.store,ts.store,nc.store,Vs.store,fu.store,kc.store,Ku.store,Ol.store]),[Ep.store])),[Sp.store])),[km.store])),[Iy.store,Py.store]),xT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wT=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(i){this.onCommittedListeners.push(i)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(i){return i()})},t}(),ic=function(){var t=this;this.promise=new Promise(function(i,e){t.resolve=i,t.reject=e})},Ln=function(){function t(i){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,i(function(o){e.isDone=!0,e.result=o,e.nextCallback&&e.nextCallback(o)},function(o){e.isDone=!0,e.error=o,e.catchCallback&&e.catchCallback(o)})}return t.prototype.catch=function(i){return this.next(void 0,i)},t.prototype.next=function(i,e){var o=this;return this.callbackAttached&&vi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(i,this.result):new t(function(a,c){o.nextCallback=function(v){o.wrapSuccess(i,v).next(a,c)},o.catchCallback=function(v){o.wrapFailure(e,v).next(a,c)}})},t.prototype.toPromise=function(){var i=this;return new Promise(function(e,o){i.next(e,o)})},t.prototype.wrapUserFunction=function(i){try{var e=i();return e instanceof t?e:t.resolve(e)}catch(o){return t.reject(o)}},t.prototype.wrapSuccess=function(i,e){return i?this.wrapUserFunction(function(){return i(e)}):t.resolve(e)},t.prototype.wrapFailure=function(i,e){return i?this.wrapUserFunction(function(){return i(e)}):t.reject(e)},t.resolve=function(i){return new t(function(e,o){e(i)})},t.reject=function(i){return new t(function(e,o){o(i)})},t.waitFor=function(i){return new t(function(e,o){var a=0,c=0,v=!1;i.forEach(function(A){++a,A.next(function(){++c,v&&c===a&&e()},function(z){return o(z)})}),v=!0,c===a&&e()})},t.or=function(i){for(var e=t.resolve(!1),o=function(v){e=e.next(function(A){return A?t.resolve(A):v()})},a=0,c=i;a<c.length;a++)o(c[a]);return e},t.forEach=function(i,e){var o=this,a=[];return i.forEach(function(c,v){a.push(e.call(o,c,v))}),this.waitFor(a)},t}(),v0=function(){function t(i,e){var o=this;this.action=i,this.transaction=e,this.aborted=!1,this.ft=new ic,this.transaction.oncomplete=function(){o.ft.resolve()},this.transaction.onabort=function(){e.error?o.ft.reject(new Rb(i,e.error)):o.ft.resolve()},this.transaction.onerror=function(a){var c=rC(a.target.error);o.ft.reject(new Rb(i,c))}}return t.open=function(i,e,o,a){try{return new t(e,i.transaction(a,o))}catch(c){throw new Rb(e,c)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(i){i&&this.ft.reject(i),this.aborted||(Gn("SimpleDb","Aborting transaction:",i?i.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(i){var e=this.transaction.objectStore(i);return new nC(e)},t}(),e_=function(){function t(i,e,o){this.name=i,this.version=e,this.wt=o,12.2===t._t((0,Zr.z$)())&&xa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(i){return Gn("SimpleDb","Removing database:",i),n_(window.indexedDB.deleteDatabase(i)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var i=(0,Zr.z$)(),e=t._t(i),o=0<e&&e<10,a=t.Et(i),c=0<a&&a<4.5;return!(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0||i.indexOf("Edge/")>0||o||c)},t.gt=function(){var i;return"undefined"!=typeof process&&"YES"===(null===(i=process.env)||void 0===i?void 0:i.Tt)},t.It=function(i,e){return i.store(e)},t._t=function(i){var e=i.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(o)},t.Et=function(i){var e=i.match(/Android ([\d.]+)/i),o=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(o)},t.prototype.At=function(i){return(0,We.mG)(this,void 0,void 0,function(){var e,o=this;return(0,We.Jh)(this,function(a){switch(a.label){case 0:return this.db?[3,2]:(Gn("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(c,v){var A=indexedDB.open(o.name,o.version);A.onsuccess=function(z){c(z.target.result)},A.onblocked=function(){v(new Rb(i,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},A.onerror=function(z){var $=z.target.error;v("VersionError"===$.name?new Dn(rn.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Rb(i,$))},A.onupgradeneeded=function(z){Gn("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',z.oldVersion),o.wt.Rt(z.target.result,A.transaction,z.oldVersion,o.version).next(function(){Gn("SimpleDb","Database upgrade to version "+o.version+" complete")})}})]);case 1:e.db=a.sent(),a.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(c){return o.bt(c)}),this.db)]}})})},t.prototype.vt=function(i){this.bt=i,this.db&&(this.db.onversionchange=function(e){return i(e)})},t.prototype.runTransaction=function(i,e,o,a){return(0,We.mG)(this,void 0,void 0,function(){var c,v,A,z,$;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:c="readonly"===e,v=0,A=function(){var fe,ke,Oe,He,ct;return(0,We.Jh)(this,function(At){switch(At.label){case 0:++v,At.label=1;case 1:return At.trys.push([1,4,,5]),[4,z.At(i)];case 2:return z.db=At.sent(),fe=v0.open(z.db,i,c?"readonly":"readwrite",o),ke=a(fe).catch(function(Qt){return fe.abort(Qt),Ln.reject(Qt)}).toPromise(),Oe={},ke.catch(function(){}),[4,fe.dt];case 3:return[2,(Oe.value=(At.sent(),ke),Oe)];case 4:return Gn("SimpleDb","Transaction failed with error:",(He=At.sent()).message,"Retrying:",ct="FirebaseError"!==He.name&&v<3),z.close(),ct?[3,5]:[2,{value:Promise.reject(He)}];case 5:return[2]}})},z=this,oe.label=1;case 1:return[5,A()];case 2:if("object"==typeof($=oe.sent()))return[2,$.value];oe.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),tC=function(){function t(i){this.Pt=i,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(i){this.Pt=i},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(i){this.St=i},t.prototype.delete=function(){return n_(this.Pt.delete())},t}(),Rb=function(t){function i(e,o){var a=this;return(a=t.call(this,rn.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+o)||this).name="IndexedDbTransactionError",a}return(0,We.ZT)(i,t),i}(Dn);function t_(t){return"IndexedDbTransactionError"===t.name}var nC=function(){function t(i){this.store=i}return t.prototype.put=function(i,e){var o;return void 0!==e?(Gn("SimpleDb","PUT",this.store.name,i,e),o=this.store.put(e,i)):(Gn("SimpleDb","PUT",this.store.name,"<auto-key>",i),o=this.store.put(i)),n_(o)},t.prototype.add=function(i){return Gn("SimpleDb","ADD",this.store.name,i,i),n_(this.store.add(i))},t.prototype.get=function(i){var e=this;return n_(this.store.get(i)).next(function(o){return void 0===o&&(o=null),Gn("SimpleDb","GET",e.store.name,i,o),o})},t.prototype.delete=function(i){return Gn("SimpleDb","DELETE",this.store.name,i),n_(this.store.delete(i))},t.prototype.count=function(){return Gn("SimpleDb","COUNT",this.store.name),n_(this.store.count())},t.prototype.Nt=function(i,e){var o=this.cursor(this.options(i,e)),a=[];return this.xt(o,function(c,v){a.push(v)}).next(function(){return a})},t.prototype.Ft=function(i,e){Gn("SimpleDb","DELETE ALL",this.store.name);var o=this.options(i,e);o.kt=!1;var a=this.cursor(o);return this.xt(a,function(c,v,A){return A.delete()})},t.prototype.$t=function(i,e){var o;e?o=i:(o={},e=i);var a=this.cursor(o);return this.xt(a,e)},t.prototype.Ot=function(i){var e=this.cursor({});return new Ln(function(o,a){e.onerror=function(c){var v=rC(c.target.error);a(v)},e.onsuccess=function(c){var v=c.target.result;v?i(v.primaryKey,v.value).next(function(A){A?v.continue():o()}):o()}})},t.prototype.xt=function(i,e){var o=[];return new Ln(function(a,c){i.onerror=function(v){c(v.target.error)},i.onsuccess=function(v){var A=v.target.result;if(A){var z=new tC(A),$=e(A.primaryKey,A.value,z);if($ instanceof Ln){var oe=$.catch(function(fe){return z.done(),Ln.reject(fe)});o.push(oe)}z.isDone?a():null===z.Dt?A.continue():A.continue(z.Dt)}else a()}}).next(function(){return Ln.waitFor(o)})},t.prototype.options=function(i,e){var o;return void 0!==i&&("string"==typeof i?o=i:e=i),{index:o,range:e}},t.prototype.cursor=function(i){var e="next";if(i.reverse&&(e="prev"),i.index){var o=this.store.index(i.index);return i.kt?o.openKeyCursor(i.range,e):o.openCursor(i.range,e)}return this.store.openCursor(i.range,e)},t}();function n_(t){return new Ln(function(i,e){t.onsuccess=function(o){i(o.target.result)},t.onerror=function(o){var a=rC(o.target.error);e(a)}})}var iC=!1;function rC(t){var i=e_._t((0,Zr.z$)());if(i>=12.2&&i<13){var e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){var o=new Dn("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return iC||(iC=!0,setTimeout(function(){throw o},0)),o}}return t}var oC=function(t){function i(e,o){var a=this;return(a=t.call(this)||this).Mt=e,a.currentSequenceNumber=o,a}return(0,We.ZT)(i,t),i}(wT);function Ac(t,i){var e=Jn(t);return e_.It(e.Mt,i)}var b0=function(){function t(i,e,o,a){this.batchId=i,this.localWriteTime=e,this.baseMutations=o,this.mutations=a}return t.prototype.applyToRemoteDocument=function(i,e){for(var o=e.mutationResults,a=0;a<this.mutations.length;a++){var c=this.mutations[a];c.key.isEqual(i.key)&&Y1(c,i,o[a])}},t.prototype.applyToLocalView=function(i){for(var e=0,o=this.baseMutations;e<o.length;e++)(v=o[e]).key.isEqual(i.key)&&$E(v,i,this.localWriteTime);for(var a=0,c=this.mutations;a<c.length;a++){var v;(v=c[a]).key.isEqual(i.key)&&$E(v,i,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(i){var e=this;this.mutations.forEach(function(o){var a=i.get(o.key),c=a;e.applyToLocalView(c),a.isValidDocument()||c.convertToNoDocument(vr.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(i,e){return i.add(e.key)},lo())},t.prototype.isEqual=function(i){return this.batchId===i.batchId&&_m(this.mutations,i.mutations,function(e,o){return q1(e,o)})&&_m(this.baseMutations,i.baseMutations,function(e,o){return q1(e,o)})},t}(),jP=function(){function t(i,e,o,a){this.batch=i,this.commitVersion=e,this.mutationResults=o,this.docVersions=a}return t.from=function(i,e,o){Zi(i.mutations.length===o.length);for(var a=KE(),c=i.mutations,v=0;v<c.length;v++)a=a.insert(c[v].key,o[v].version);return new t(i,e,o,a)},t}(),x0=function(){function t(i,e,o,a,c,v,A){void 0===c&&(c=vr.min()),void 0===v&&(v=vr.min()),void 0===A&&(A=Kl.EMPTY_BYTE_STRING),this.target=i,this.targetId=e,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=A}return t.prototype.withSequenceNumber=function(i){return new t(this.target,this.targetId,this.purpose,i,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(i,e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,i)},t.prototype.withLastLimboFreeSnapshotVersion=function(i){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,i,this.resumeToken)},t}(),Am=function(t){this.Lt=t};function CT(t,i){if(i.document)return cT(t.Lt,i.document,!!i.hasCommittedMutations);if(i.noDocument){var e=ki.fromSegments(i.noDocument.path),o=Oy(i.noDocument.readTime),a=Pl.newNoDocument(e,o);return i.hasCommittedMutations?a.setHasCommittedMutations():a}if(i.unknownDocument){var c=ki.fromSegments(i.unknownDocument.path);return o=Oy(i.unknownDocument.version),Pl.newUnknownDocument(c,o)}return vi()}function w0(t,i,e){var fe,ke,o=Ry(e),a=i.key.path.popLast().toArray();if(i.isFoundDocument()){var c={name:My(fe=t.Lt,(ke=i).key),fields:ke.data.value.mapValue.fields,updateTime:Pb(fe,ke.version.toTimestamp())},v=i.hasCommittedMutations;return new Vs(null,null,c,v,o,a)}if(i.isNoDocument()){var A=i.key.path.toArray(),z=Rd(i.version);return v=i.hasCommittedMutations,new Vs(null,new KA(A,z),null,v,o,a)}if(i.isUnknownDocument()){var $=i.key.path.toArray(),oe=Rd(i.version);return new Vs(new eD($,oe),null,null,!0,o,a)}return vi()}function Ry(t){var i=t.toTimestamp();return[i.seconds,i.nanoseconds]}function ST(t){var i=new Mc(t[0],t[1]);return vr.fromTimestamp(i)}function Rd(t){var i=t.toTimestamp();return new JA(i.seconds,i.nanoseconds)}function Oy(t){var i=new Mc(t.seconds,t.nanoseconds);return vr.fromTimestamp(i)}function Ob(t,i){for(var e=(i.baseMutations||[]).map(function(z){return uT(t.Lt,z)}),o=0;o<i.mutations.length-1;++o)o+1<i.mutations.length&&void 0!==i.mutations[o+1].transform&&(i.mutations[o].updateTransforms=i.mutations[o+1].transform.fieldTransforms,i.mutations.splice(o+1,1),++o);var v=i.mutations.map(function(z){return uT(t.Lt,z)}),A=Mc.fromMillis(i.localWriteTimeMs);return new b0(i.batchId,A,e,v)}function Fb(t){var i,e,o=Oy(t.readTime),a=void 0!==t.lastLimboFreeSnapshotVersion?Oy(t.lastLimboFreeSnapshotVersion):vr.min();return void 0!==t.query.documents?(Zi(1===(e=t.query).documents.length),i=jh(Wg(aT(e.documents[0])))):i=jh(dT(t.query)),new x0(i,t.targetId,0,t.lastListenSequenceNumber,o,a,Kl.fromBase64String(t.resumeToken))}function Od(t,i){var e,o=Rd(i.snapshotVersion),a=Rd(i.lastLimboFreeSnapshotVersion);e=h0(i.target)?hT(t.Lt,i.target):K1(t.Lt,i.target);var c=i.resumeToken.toBase64();return new fu(i.targetId,qg(i.target),o,c,i.sequenceNumber,a,e)}function C0(t){var i=dT({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?UE(i,i.limit,"L"):i}var YP=function(){function t(){}return t.prototype.getBundleMetadata=function(i,e){return Lb(i).get(e).next(function(o){if(o)return{id:(a=o).bundleId,createTime:Oy(a.createTime),version:a.version};var a})},t.prototype.saveBundleMetadata=function(i,e){return Lb(i).put({bundleId:(o=e).id,createTime:Rd(Rl(o.createTime)),version:o.version});var o},t.prototype.getNamedQuery=function(i,e){return ET(i).get(e).next(function(o){if(o)return{name:(a=o).name,query:C0(a.bundledQuery),readTime:Oy(a.readTime)};var a})},t.prototype.saveNamedQuery=function(i,e){return ET(i).put({name:(o=e).name,readTime:Rd(Rl(o.readTime)),bundledQuery:o.bundledQuery});var o},t}();function Lb(t){return Ac(t,Iy.store)}function ET(t){return Ac(t,Py.store)}var tD=function(){function t(){this.Bt=new TT}return t.prototype.addToCollectionParentIndex=function(i,e){return this.Bt.add(e),Ln.resolve()},t.prototype.getCollectionParents=function(i,e){return Ln.resolve(this.Bt.getEntries(e))},t}(),TT=function(){function t(){this.index={}}return t.prototype.add=function(i){var e=i.lastSegment(),o=i.popLast(),a=this.index[e]||new Ca(to.comparator),c=!a.has(o);return this.index[e]=a.add(o),c},t.prototype.has=function(i){var e=i.lastSegment(),o=i.popLast(),a=this.index[e];return a&&a.has(o)},t.prototype.getEntries=function(i){return(this.index[i]||new Ca(to.comparator)).toArray()},t}(),nD=function(){function t(){this.qt=new TT}return t.prototype.addToCollectionParentIndex=function(i,e){var o=this;if(!this.qt.has(e)){var a=e.lastSegment(),c=e.popLast();i.addOnCommittedListener(function(){o.qt.add(e)});var v={collectionId:a,parent:qh(c)};return MT(i).put(v)}return Ln.resolve()},t.prototype.getCollectionParents=function(i,e){var o=[],a=IDBKeyRange.bound([e,""],[T1(e),""],!1,!0);return MT(i).Nt(a).next(function(c){for(var v=0,A=c;v<A.length;v++){var z=A[v];if(z.collectionId!==e)break;o.push(Sf(z.parent))}return o})},t}();function MT(t){return Ac(t,km.store)}var kT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zh=function(){function t(i,e,o){this.cacheSizeCollectionThreshold=i,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=o}return t.withCacheSize=function(i){return new t(i,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function sC(t,i,e){var o=t.store(ts.store),a=t.store(nc.store),c=[],v=IDBKeyRange.only(e.batchId),A=0,z=o.$t({range:v},function(He,ct,At){return A++,At.delete()});c.push(z.next(function(){Zi(1===A)}));for(var $=[],oe=0,fe=e.mutations;oe<fe.length;oe++){var ke=fe[oe],Oe=nc.key(i,ke.key.path,e.batchId);c.push(a.delete(Oe)),$.push(ke.key)}return Ln.waitFor(c).next(function(){return $})}function Fy(t){if(!t)return 0;var i;if(t.document)i=t.document;else if(t.unknownDocument)i=t.unknownDocument;else{if(!t.noDocument)throw vi();i=t.noDocument}return JSON.stringify(i).length}Zh.DEFAULT_COLLECTION_PERCENTILE=10,Zh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zh.DEFAULT=new Zh(41943040,Zh.DEFAULT_COLLECTION_PERCENTILE,Zh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zh.DISABLED=new Zh(-1,0,0);var AT=function(){function t(i,e,o,a){this.userId=i,this.R=e,this.Ut=o,this.referenceDelegate=a,this.Kt={}}return t.Qt=function(i,e,o,a){return Zi(""!==i.uid),new t(i.isAuthenticated()?i.uid:"",e,o,a)},t.prototype.checkEmpty=function(i){var e=!0,o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return i_(i).$t({index:ts.userMutationsIndex,range:o},function(a,c,v){e=!1,v.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(i,e,o,a){var c=this,v=Ly(i),A=i_(i);return A.add({}).next(function(z){Zi("number"==typeof z);for(var $=new b0(z,e,o,a),oe=function(Qt,Sn,xn){var Qn=xn.baseMutations.map(function(er){return y0(Qt.Lt,er)}),ii=xn.mutations.map(function(er){return y0(Qt.Lt,er)});return new ts(Sn,xn.batchId,xn.localWriteTime.toMillis(),Qn,ii)}(c.R,c.userId,$),fe=[],ke=new Ca(function(Qt,Sn){return kr(Qt.canonicalString(),Sn.canonicalString())}),Oe=0,He=a;Oe<He.length;Oe++){var ct=He[Oe],At=nc.key(c.userId,ct.key.path,z);ke=ke.add(ct.key.path.popLast()),fe.push(A.put(oe)),fe.push(v.put(At,nc.PLACEHOLDER))}return ke.forEach(function(Qt){fe.push(c.Ut.addToCollectionParentIndex(i,Qt))}),i.addOnCommittedListener(function(){c.Kt[z]=$.keys()}),Ln.waitFor(fe).next(function(){return $})})},t.prototype.lookupMutationBatch=function(i,e){var o=this;return i_(i).get(e).next(function(a){return a?(Zi(a.userId===o.userId),Ob(o.R,a)):null})},t.prototype.jt=function(i,e){var o=this;return this.Kt[e]?Ln.resolve(this.Kt[e]):this.lookupMutationBatch(i,e).next(function(a){if(a){var c=a.keys();return o.Kt[e]=c,c}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(i,e){var o=this,a=e+1,c=IDBKeyRange.lowerBound([this.userId,a]),v=null;return i_(i).$t({index:ts.userMutationsIndex,range:c},function(A,z,$){z.userId===o.userId&&(Zi(z.batchId>=a),v=Ob(o.R,z)),$.done()}).next(function(){return v})},t.prototype.getHighestUnacknowledgedBatchId=function(i){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),o=-1;return i_(i).$t({index:ts.userMutationsIndex,range:e,reverse:!0},function(a,c,v){o=c.batchId,v.done()}).next(function(){return o})},t.prototype.getAllMutationBatches=function(i){var e=this,o=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return i_(i).Nt(ts.userMutationsIndex,o).next(function(a){return a.map(function(c){return Ob(e.R,c)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(i,e){var o=this,a=nc.prefixForPath(this.userId,e.path),c=IDBKeyRange.lowerBound(a),v=[];return Ly(i).$t({range:c},function(A,z,$){var oe=A[0],ke=A[2],Oe=Sf(A[1]);if(oe===o.userId&&e.path.isEqual(Oe))return i_(i).get(ke).next(function(He){if(!He)throw vi();Zi(He.userId===o.userId),v.push(Ob(o.R,He))});$.done()}).next(function(){return v})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(i,e){var o=this,a=new Ca(kr),c=[];return e.forEach(function(v){var A=nc.prefixForPath(o.userId,v.path),z=IDBKeyRange.lowerBound(A),$=Ly(i).$t({range:z},function(oe,fe,ke){var Oe=oe[0],ct=oe[2],At=Sf(oe[1]);Oe===o.userId&&v.path.isEqual(At)?a=a.add(ct):ke.done()});c.push($)}),Ln.waitFor(c).next(function(){return o.Wt(i,a)})},t.prototype.getAllMutationBatchesAffectingQuery=function(i,e){var o=this,a=e.path,c=a.length+1,v=nc.prefixForPath(this.userId,a),A=IDBKeyRange.lowerBound(v),z=new Ca(kr);return Ly(i).$t({range:A},function($,oe,fe){var ke=$[0],He=$[2],ct=Sf($[1]);ke===o.userId&&a.isPrefixOf(ct)?ct.length===c&&(z=z.add(He)):fe.done()}).next(function(){return o.Wt(i,z)})},t.prototype.Wt=function(i,e){var o=this,a=[],c=[];return e.forEach(function(v){c.push(i_(i).get(v).next(function(A){if(null===A)throw vi();Zi(A.userId===o.userId),a.push(Ob(o.R,A))}))}),Ln.waitFor(c).next(function(){return a})},t.prototype.removeMutationBatch=function(i,e){var o=this;return sC(i.Mt,this.userId,e).next(function(a){return i.addOnCommittedListener(function(){o.Gt(e.batchId)}),Ln.forEach(a,function(c){return o.referenceDelegate.markPotentiallyOrphaned(i,c)})})},t.prototype.Gt=function(i){delete this.Kt[i]},t.prototype.performConsistencyCheck=function(i){var e=this;return this.checkEmpty(i).next(function(o){if(!o)return Ln.resolve();var a=IDBKeyRange.lowerBound(nc.prefixForUser(e.userId)),c=[];return Ly(i).$t({range:a},function(v,A,z){if(v[0]===e.userId){var $=Sf(v[1]);c.push($)}else z.done()}).next(function(){Zi(0===c.length)})})},t.prototype.containsKey=function(i,e){return DT(i,this.userId,e)},t.prototype.zt=function(i){var e=this;return IT(i).get(this.userId).next(function(o){return o||new Mm(e.userId,-1,"")})},t}();function DT(t,i,e){var o=nc.prefixForPath(i,e.path),a=o[1],c=IDBKeyRange.lowerBound(o),v=!1;return Ly(t).$t({range:c,kt:!0},function(A,z,$){A[0]===i&&A[1]===a&&(v=!0),$.done()}).next(function(){return v})}function i_(t){return Ac(t,ts.store)}function Ly(t){return Ac(t,nc.store)}function IT(t){return Ac(t,Mm.store)}var S0=function(){function t(i){this.Ht=i}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),PT=function(){function t(i,e){this.referenceDelegate=i,this.R=e}return t.prototype.allocateTargetId=function(i){var e=this;return this.Xt(i).next(function(o){var a=new S0(o.highestTargetId);return o.highestTargetId=a.next(),e.Zt(i,o).next(function(){return o.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(i){return this.Xt(i).next(function(e){return vr.fromTimestamp(new Mc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(i){return this.Xt(i).next(function(e){return e.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(i,e,o){var a=this;return this.Xt(i).next(function(c){return c.highestListenSequenceNumber=e,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),e>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=e),a.Zt(i,c)})},t.prototype.addTargetData=function(i,e){var o=this;return this.te(i,e).next(function(){return o.Xt(i).next(function(a){return a.targetCount+=1,o.ee(e,a),o.Zt(i,a)})})},t.prototype.updateTargetData=function(i,e){return this.te(i,e)},t.prototype.removeTargetData=function(i,e){var o=this;return this.removeMatchingKeysForTargetId(i,e.targetId).next(function(){return r_(i).delete(e.targetId)}).next(function(){return o.Xt(i)}).next(function(a){return Zi(a.targetCount>0),a.targetCount-=1,o.Zt(i,a)})},t.prototype.removeTargets=function(i,e,o){var a=this,c=0,v=[];return r_(i).$t(function(A,z){var $=Fb(z);$.sequenceNumber<=e&&null===o.get($.targetId)&&(c++,v.push(a.removeTargetData(i,$)))}).next(function(){return Ln.waitFor(v)}).next(function(){return c})},t.prototype.forEachTarget=function(i,e){return r_(i).$t(function(o,a){var c=Fb(a);e(c)})},t.prototype.Xt=function(i){return aC(i).get(Ku.key).next(function(e){return Zi(null!==e),e})},t.prototype.Zt=function(i,e){return aC(i).put(Ku.key,e)},t.prototype.te=function(i,e){return r_(i).put(Od(this.R,e))},t.prototype.ee=function(i,e){var o=!1;return i.targetId>e.highestTargetId&&(e.highestTargetId=i.targetId,o=!0),i.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=i.sequenceNumber,o=!0),o},t.prototype.getTargetCount=function(i){return this.Xt(i).next(function(e){return e.targetCount})},t.prototype.getTargetData=function(i,e){var o=qg(e),a=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]),c=null;return r_(i).$t({range:a,index:fu.queryTargetsIndexName},function(v,A,z){var $=Fb(A);bm(e,$.target)&&(c=$,z.done())}).next(function(){return c})},t.prototype.addMatchingKeys=function(i,e,o){var a=this,c=[],v=Dm(i);return e.forEach(function(A){var z=qh(A.path);c.push(v.put(new Ol(o,z))),c.push(a.referenceDelegate.addReference(i,o,A))}),Ln.waitFor(c)},t.prototype.removeMatchingKeys=function(i,e,o){var a=this,c=Dm(i);return Ln.forEach(e,function(v){var A=qh(v.path);return Ln.waitFor([c.delete([o,A]),a.referenceDelegate.removeReference(i,o,v)])})},t.prototype.removeMatchingKeysForTargetId=function(i,e){var o=Dm(i),a=IDBKeyRange.bound([e],[e+1],!1,!0);return o.delete(a)},t.prototype.getMatchingKeysForTargetId=function(i,e){var o=IDBKeyRange.bound([e],[e+1],!1,!0),a=Dm(i),c=lo();return a.$t({range:o,kt:!0},function(v,A,z){var $=Sf(v[1]),oe=new ki($);c=c.add(oe)}).next(function(){return c})},t.prototype.containsKey=function(i,e){var o=qh(e.path),a=IDBKeyRange.bound([o],[T1(o)],!1,!0),c=0;return Dm(i).$t({index:Ol.documentTargetsIndex,kt:!0,range:a},function(v,A,z){0!==v[0]&&(c++,z.done())}).next(function(){return c>0})},t.prototype.lt=function(i,e){return r_(i).get(e).next(function(o){return o?Fb(o):null})},t}();function r_(t){return Ac(t,fu.store)}function aC(t){return Ac(t,Ku.store)}function Dm(t){return Ac(t,Ol.store)}function o_(t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){if(t.code!==rn.FAILED_PRECONDITION||t.message!==xT)throw t;return Gn("LocalStore","Unexpectedly lost primary lease"),[2]})})}function lC(t,i){var o=t[1],c=i[1],v=kr(t[0],i[0]);return 0===v?kr(o,c):v}var E0=function(){function t(i){this.ne=i,this.buffer=new Ca(lC),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(i){var e=[i,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var o=this.buffer.last();lC(e,o)<0&&(this.buffer=this.buffer.delete(o).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),iD=function(){function t(i,e){this.garbageCollector=i,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(i){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(i)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(i){var e=this,o=this.oe?3e5:6e4;Gn("LruGarbageCollector","Garbage collection scheduled in "+o+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,function(){return(0,We.mG)(e,void 0,void 0,function(){var a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:this.ce=null,this.oe=!0,c.label=1;case 1:return c.trys.push([1,3,,7]),[4,i.collectGarbage(this.garbageCollector)];case 2:return c.sent(),[3,7];case 3:return t_(a=c.sent())?(Gn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a),[3,6]):[3,4];case 4:return[4,o_(a)];case 5:c.sent(),c.label=6;case 6:return[3,7];case 7:return[4,this.ue(i)];case 8:return c.sent(),[2]}})})})},t}(),RT=function(){function t(i,e){this.ae=i,this.params=e}return t.prototype.calculateTargetCount=function(i,e){return this.ae.he(i).next(function(o){return Math.floor(e/100*o)})},t.prototype.nthSequenceNumber=function(i,e){var o=this;if(0===e)return Ln.resolve(uu.o);var a=new E0(e);return this.ae.forEachTarget(i,function(c){return a.re(c.sequenceNumber)}).next(function(){return o.ae.le(i,function(c){return a.re(c)})}).next(function(){return a.maxValue})},t.prototype.removeTargets=function(i,e,o){return this.ae.removeTargets(i,e,o)},t.prototype.removeOrphanedDocuments=function(i,e){return this.ae.removeOrphanedDocuments(i,e)},t.prototype.collect=function(i,e){var o=this;return-1===this.params.cacheSizeCollectionThreshold?(Gn("LruGarbageCollector","Garbage collection skipped; disabled"),Ln.resolve(kT)):this.getCacheSize(i).next(function(a){return a<o.params.cacheSizeCollectionThreshold?(Gn("LruGarbageCollector","Garbage collection skipped; Cache size "+a+" is lower than threshold "+o.params.cacheSizeCollectionThreshold),kT):o.fe(i,e)})},t.prototype.getCacheSize=function(i){return this.ae.getCacheSize(i)},t.prototype.fe=function(i,e){var o,a,c,v,A,z,$,oe=this,fe=Date.now();return this.calculateTargetCount(i,this.params.percentileToCollect).next(function(ke){return ke>oe.params.maximumSequenceNumbersToCollect?(Gn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+oe.params.maximumSequenceNumbersToCollect+" from "+ke),a=oe.params.maximumSequenceNumbersToCollect):a=ke,v=Date.now(),oe.nthSequenceNumber(i,a)}).next(function(ke){return o=ke,A=Date.now(),oe.removeTargets(i,o,e)}).next(function(ke){return c=ke,z=Date.now(),oe.removeOrphanedDocuments(i,o)}).next(function(ke){return $=Date.now(),vb()<=Cd.in.DEBUG&&Gn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(v-fe)+"ms\n\tDetermined least recently used "+a+" in "+(A-v)+"ms\n\tRemoved "+c+" targets in "+(z-A)+"ms\n\tRemoved "+ke+" documents in "+($-z)+"ms\nTotal Duration: "+($-fe)+"ms"),Ln.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:ke})})},t}(),T0=function(){function t(i,e){this.db=i,this.garbageCollector=new RT(this,e)}return t.prototype.he=function(i){var e=this.de(i);return this.db.getTargetCache().getTargetCount(i).next(function(o){return e.next(function(a){return o+a})})},t.prototype.de=function(i){var e=0;return this.le(i,function(o){e++}).next(function(){return e})},t.prototype.forEachTarget=function(i,e){return this.db.getTargetCache().forEachTarget(i,e)},t.prototype.le=function(i,e){return this.we(i,function(o,a){return e(a)})},t.prototype.addReference=function(i,e,o){return s_(i,o)},t.prototype.removeReference=function(i,e,o){return s_(i,o)},t.prototype.removeTargets=function(i,e,o){return this.db.getTargetCache().removeTargets(i,e,o)},t.prototype.markPotentiallyOrphaned=function(i,e){return s_(i,e)},t.prototype._e=function(i,e){return a=e,c=!1,IT(o=i).Ot(function(v){return DT(o,v,a).next(function(A){return A&&(c=!0),Ln.resolve(!A)})}).next(function(){return c});var o,a,c},t.prototype.removeOrphanedDocuments=function(i,e){var o=this,a=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[],v=0;return this.we(i,function(A,z){if(z<=e){var $=o._e(i,A).next(function(oe){if(!oe)return v++,a.getEntry(i,A).next(function(){return a.removeEntry(A),Dm(i).delete([0,qh(A.path)])})});c.push($)}}).next(function(){return Ln.waitFor(c)}).next(function(){return a.apply(i)}).next(function(){return v})},t.prototype.removeTarget=function(i,e){var o=e.withSequenceNumber(i.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(i,o)},t.prototype.updateLimboDocument=function(i,e){return s_(i,e)},t.prototype.we=function(i,e){var o,a=Dm(i),c=uu.o;return a.$t({index:Ol.documentTargetsIndex},function(v,A){var $=A.path,oe=A.sequenceNumber;0===v[0]?(c!==uu.o&&e(new ki(Sf(o)),c),c=oe,o=$):c=uu.o}).next(function(){c!==uu.o&&e(new ki(Sf(o)),c)})},t.prototype.getCacheSize=function(i){return this.db.getRemoteDocumentCache().getSize(i)},t}();function s_(t,i){return Dm(t).put((o=t.currentSequenceNumber,new Ol(0,qh(i.path),o)));var o}var Tp=function(){function t(i,e){this.mapKeyFn=i,this.equalsFn=e,this.inner={}}return t.prototype.get=function(i){var e=this.mapKeyFn(i),o=this.inner[e];if(void 0!==o)for(var a=0,c=o;a<c.length;a++){var v=c[a],z=v[1];if(this.equalsFn(v[0],i))return z}},t.prototype.has=function(i){return void 0!==this.get(i)},t.prototype.set=function(i,e){var o=this.mapKeyFn(i),a=this.inner[o];if(void 0!==a){for(var c=0;c<a.length;c++)if(this.equalsFn(a[c][0],i))return void(a[c]=[i,e]);a.push([i,e])}else this.inner[o]=[[i,e]]},t.prototype.delete=function(i){var e=this.mapKeyFn(i),o=this.inner[e];if(void 0===o)return!1;for(var a=0;a<o.length;a++)if(this.equalsFn(o[a][0],i))return 1===o.length?delete this.inner[e]:o.splice(a,1),!0;return!1},t.prototype.forEach=function(i){ym(this.inner,function(e,o){for(var a=0,c=o;a<c.length;a++){var v=c[a];i(v[0],v[1])}})},t.prototype.isEmpty=function(){return k1(this.inner)},t}(),OT=function(){function t(){this.changes=new Tp(function(i){return i.toString()},function(i,e){return i.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(i){var e=this.changes.get(i);return e?e.readTime:vr.min()},t.prototype.addEntry=function(i,e){this.assertNotApplied(),this.changes.set(i.key,{document:i,readTime:e})},t.prototype.removeEntry=function(i,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(i,{document:Pl.newInvalidDocument(i),readTime:e})},t.prototype.getEntry=function(i,e){this.assertNotApplied();var o=this.changes.get(e);return void 0!==o?Ln.resolve(o.document):this.getFromCache(i,e)},t.prototype.getEntries=function(i,e){return this.getAllFromCache(i,e)},t.prototype.apply=function(i){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(i)},t.prototype.assertNotApplied=function(){},t}(),rD=function(){function t(i,e){this.R=i,this.Ut=e}return t.prototype.addEntry=function(i,e,o){return Im(i).put(M0(e),o)},t.prototype.removeEntry=function(i,e){var o=Im(i),a=M0(e);return o.delete(a)},t.prototype.updateMetadata=function(i,e){var o=this;return this.getMetadata(i).next(function(a){return a.byteSize+=e,o.me(i,a)})},t.prototype.getEntry=function(i,e){var o=this;return Im(i).get(M0(e)).next(function(a){return o.ye(e,a)})},t.prototype.ge=function(i,e){var o=this;return Im(i).get(M0(e)).next(function(a){return{document:o.ye(e,a),size:Fy(a)}})},t.prototype.getEntries=function(i,e){var o=this,a=Yh();return this.pe(i,e,function(c,v){var A=o.ye(c,v);a=a.insert(c,A)}).next(function(){return a})},t.prototype.Ee=function(i,e){var o=this,a=Yh(),c=new tc(ki.comparator);return this.pe(i,e,function(v,A){var z=o.ye(v,A);a=a.insert(v,z),c=c.insert(v,Fy(A))}).next(function(){return{documents:a,Te:c}})},t.prototype.pe=function(i,e,o){if(e.isEmpty())return Ln.resolve();var a=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),c=e.getIterator(),v=c.getNext();return Im(i).$t({range:a},function(A,z,$){for(var oe=ki.fromSegments(A);v&&ki.comparator(v,oe)<0;)o(v,null),v=c.getNext();v&&v.isEqual(oe)&&(o(v,z),v=c.hasNext()?c.getNext():null),v?$.Ct(v.path.toArray()):$.done()}).next(function(){for(;v;)o(v,null),v=c.hasNext()?c.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(i,e,o){var a=this,c=Yh(),v=e.path.length+1,A={};if(o.isEqual(vr.min())){var z=e.path.toArray();A.range=IDBKeyRange.lowerBound(z)}else{var $=e.path.toArray(),oe=Ry(o);A.range=IDBKeyRange.lowerBound([$,oe],!0),A.index=Vs.collectionReadTimeIndex}return Im(i).$t(A,function(fe,ke,Oe){if(fe.length===v){var He=CT(a.R,ke);e.path.isPrefixOf(He.key.path)?kb(e,He)&&(c=c.insert(He.key,He)):Oe.done()}}).next(function(){return c})},t.prototype.newChangeBuffer=function(i){return new qP(this,!!i&&i.trackRemovals)},t.prototype.getSize=function(i){return this.getMetadata(i).next(function(e){return e.byteSize})},t.prototype.getMetadata=function(i){return FT(i).get(Sp.key).next(function(e){return Zi(!!e),e})},t.prototype.me=function(i,e){return FT(i).put(Sp.key,e)},t.prototype.ye=function(i,e){if(e){var o=CT(this.R,e);if(!o.isNoDocument()||!o.version.isEqual(vr.min()))return o}return Pl.newInvalidDocument(i)},t}(),qP=function(t){function i(e,o){var a=this;return(a=t.call(this)||this).Ie=e,a.trackRemovals=o,a.Ae=new Tp(function(c){return c.toString()},function(c,v){return c.isEqual(v)}),a}return(0,We.ZT)(i,t),i.prototype.applyChanges=function(e){var o=this,a=[],c=0,v=new Ca(function(A,z){return kr(A.canonicalString(),z.canonicalString())});return this.changes.forEach(function(A,z){var $=o.Ae.get(A);if(z.document.isValidDocument()){var oe=w0(o.Ie.R,z.document,o.getReadTime(A));v=v.add(A.path.popLast());var fe=Fy(oe);c+=fe-$,a.push(o.Ie.addEntry(e,A,oe))}else if(c-=$,o.trackRemovals){var ke=w0(o.Ie.R,Pl.newNoDocument(A,vr.min()),o.getReadTime(A));a.push(o.Ie.addEntry(e,A,ke))}else a.push(o.Ie.removeEntry(e,A))}),v.forEach(function(A){a.push(o.Ie.Ut.addToCollectionParentIndex(e,A))}),a.push(this.Ie.updateMetadata(e,c)),Ln.waitFor(a)},i.prototype.getFromCache=function(e,o){var a=this;return this.Ie.ge(e,o).next(function(c){return a.Ae.set(o,c.size),c.document})},i.prototype.getAllFromCache=function(e,o){var a=this;return this.Ie.Ee(e,o).next(function(c){var v=c.documents;return c.Te.forEach(function(A,z){a.Ae.set(A,z)}),v})},i}(OT);function FT(t){return Ac(t,Sp.store)}function Im(t){return Ac(t,Vs.store)}function M0(t){return t.path.toArray()}var oD=function(){function t(i){this.R=i}return t.prototype.Rt=function(i,e,o,a){var c=this;Zi(o<a&&o>=0&&a<=11);var z,v=new v0("createOrUpgrade",e);o<1&&a>=1&&(i.createObjectStore(kc.store),(z=i).createObjectStore(Mm.store,{keyPath:Mm.keyPath}),z.createObjectStore(ts.store,{keyPath:ts.keyPath,autoIncrement:!0}).createIndex(ts.userMutationsIndex,ts.userMutationsKeyPath,{unique:!0}),z.createObjectStore(nc.store),LT(i),function(z){z.createObjectStore(Vs.store)}(i));var A=Ln.resolve();return o<3&&a>=3&&(0!==o&&(function(z){z.deleteObjectStore(Ol.store),z.deleteObjectStore(fu.store),z.deleteObjectStore(Ku.store)}(i),LT(i)),A=A.next(function(){return function(z){var $=z.store(Ku.store),oe=new Ku(0,0,vr.min().toTimestamp(),0);return $.put(Ku.key,oe)}(v)})),o<4&&a>=4&&(0!==o&&(A=A.next(function(){return function(z,$){return $.store(ts.store).Nt().next(function(oe){z.deleteObjectStore(ts.store),z.createObjectStore(ts.store,{keyPath:ts.keyPath,autoIncrement:!0}).createIndex(ts.userMutationsIndex,ts.userMutationsKeyPath,{unique:!0});var fe=$.store(ts.store),ke=oe.map(function(Oe){return fe.put(Oe)});return Ln.waitFor(ke)})}(i,v)})),A=A.next(function(){!function(z){z.createObjectStore(Ep.store,{keyPath:Ep.keyPath})}(i)})),o<5&&a>=5&&(A=A.next(function(){return c.Re(v)})),o<6&&a>=6&&(A=A.next(function(){return function(z){z.createObjectStore(Sp.store)}(i),c.be(v)})),o<7&&a>=7&&(A=A.next(function(){return c.ve(v)})),o<8&&a>=8&&(A=A.next(function(){return c.Pe(i,v)})),o<9&&a>=9&&(A=A.next(function(){(function(z){z.objectStoreNames.contains("remoteDocumentChanges")&&z.deleteObjectStore("remoteDocumentChanges")})(i),function(z){var $=z.objectStore(Vs.store);$.createIndex(Vs.readTimeIndex,Vs.readTimeIndexPath,{unique:!1}),$.createIndex(Vs.collectionReadTimeIndex,Vs.collectionReadTimeIndexPath,{unique:!1})}(e)})),o<10&&a>=10&&(A=A.next(function(){return c.Ve(v)})),o<11&&a>=11&&(A=A.next(function(){(function(z){z.createObjectStore(Iy.store,{keyPath:Iy.keyPath})})(i),function(z){z.createObjectStore(Py.store,{keyPath:Py.keyPath})}(i)})),A},t.prototype.be=function(i){var e=0;return i.store(Vs.store).$t(function(o,a){e+=Fy(a)}).next(function(){var o=new Sp(e);return i.store(Sp.store).put(Sp.key,o)})},t.prototype.Re=function(i){var e=this,o=i.store(Mm.store),a=i.store(ts.store);return o.Nt().next(function(c){return Ln.forEach(c,function(v){var A=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return a.Nt(ts.userMutationsIndex,A).next(function(z){return Ln.forEach(z,function($){Zi($.userId===v.userId);var oe=Ob(e.R,$);return sC(i,v.userId,oe).next(function(){})})})})})},t.prototype.ve=function(i){var e=i.store(Ol.store),o=i.store(Vs.store);return i.store(Ku.store).get(Ku.key).next(function(a){var c=[];return o.$t(function(v,A){var z=new to(v),$=[0,qh(z)];c.push(e.get($).next(function(oe){return oe?Ln.resolve():e.put(new Ol(0,qh(z),a.highestListenSequenceNumber))}))}).next(function(){return Ln.waitFor(c)})})},t.prototype.Pe=function(i,e){i.createObjectStore(km.store,{keyPath:km.keyPath});var o=e.store(km.store),a=new TT,c=function(v){if(a.add(v)){var A=v.lastSegment(),z=v.popLast();return o.put({collectionId:A,parent:qh(z)})}};return e.store(Vs.store).$t({kt:!0},function(v,A){var z=new to(v);return c(z.popLast())}).next(function(){return e.store(nc.store).$t({kt:!0},function(v,A){var $=Sf(v[1]);return c($.popLast())})})},t.prototype.Ve=function(i){var e=this,o=i.store(fu.store);return o.$t(function(a,c){var v=Fb(c),A=Od(e.R,v);return o.put(A)})},t}();function LT(t){t.createObjectStore(Ol.store,{keyPath:Ol.keyPath}).createIndex(Ol.documentTargetsIndex,Ol.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(fu.store,{keyPath:fu.keyPath}).createIndex(fu.queryTargetsIndexName,fu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ku.store)}var cC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sD=function(){function t(i,e,o,a,c,v,A,z,$,oe){if(this.allowTabSynchronization=i,this.persistenceKey=e,this.clientId=o,this.Se=c,this.window=v,this.document=A,this.De=$,this.Ce=oe,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(fe){return Promise.resolve()},!t.yt())throw new Dn(rn.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new T0(this,a),this.Le=e+"main",this.R=new Am(z),this.Be=new e_(this.Le,11,new oD(this.R)),this.qe=new PT(this.referenceDelegate,this.R),this.Ut=new nD,this.Ue=new rD(this.R,this.Ut),this.Ke=new YP,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===oe&&xa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var i=this;return this.je().then(function(){if(!i.isPrimary&&!i.allowTabSynchronization)throw new Dn(rn.FAILED_PRECONDITION,cC);return i.We(),i.Ge(),i.ze(),i.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return i.qe.getHighestSequenceNumber(e)})}).then(function(e){i.Ne=new uu(e,i.De)}).then(function(){i.xe=!0}).catch(function(e){return i.Be&&i.Be.close(),Promise.reject(e)})},t.prototype.He=function(i){var e=this;return this.Me=function(o){return(0,We.mG)(e,void 0,void 0,function(){return(0,We.Jh)(this,function(a){return this.started?[2,i(o)]:[2]})})},i(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(i){var e=this;this.Be.vt(function(o){return(0,We.mG)(e,void 0,void 0,function(){return(0,We.Jh)(this,function(a){switch(a.label){case 0:return null===o.newVersion?[4,i()]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(i){var e=this;this.networkEnabled!==i&&(this.networkEnabled=i,this.Se.enqueueAndForget(function(){return(0,We.mG)(e,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var i=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return k0(e).put(new Ep(i.clientId,Date.now(),i.networkEnabled,i.inForeground)).next(function(){if(i.isPrimary)return i.Je(e).next(function(o){o||(i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}))})}).next(function(){return i.Ye(e)}).next(function(o){return i.isPrimary&&!o?i.Xe(e).next(function(){return!1}):!!o&&i.Ze(e).next(function(){return!0})})}).catch(function(e){if(t_(e))return Gn("IndexedDbPersistence","Failed to extend owner lease: ",e),i.isPrimary;if(!i.allowTabSynchronization)throw e;return Gn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){i.isPrimary!==e&&i.Se.enqueueRetryable(function(){return i.Me(e)}),i.isPrimary=e})},t.prototype.Je=function(i){var e=this;return Nb(i).get(kc.key).next(function(o){return Ln.resolve(e.tn(o))})},t.prototype.en=function(i){return k0(i).delete(this.clientId)},t.prototype.nn=function(){return(0,We.mG)(this,void 0,void 0,function(){var i,e,o,c=this;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(A){var z=Ac(A,Ep.store);return z.Nt().next(function($){var oe=c.rn($,18e5),fe=$.filter(function(ke){return-1===oe.indexOf(ke)});return Ln.forEach(fe,function(ke){return z.delete(ke.clientId)}).next(function(){return fe})})}).catch(function(){return[]})]);case 1:if(i=v.sent(),this.Qe)for(e=0,o=i;e<o.length;e++)this.Qe.removeItem(this.on(o[e].clientId));v.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var i=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return i.je().then(function(){return i.nn()}).then(function(){return i.ze()})})},t.prototype.tn=function(i){return!!i&&i.ownerId===this.clientId},t.prototype.Ye=function(i){var e=this;return this.Ce?Ln.resolve(!0):Nb(i).get(kc.key).next(function(o){if(null!==o&&e.sn(o.leaseTimestampMs,5e3)&&!e.cn(o.ownerId)){if(e.tn(o)&&e.networkEnabled)return!0;if(!e.tn(o)){if(!o.allowTabSynchronization)throw new Dn(rn.FAILED_PRECONDITION,cC);return!1}}return!(!e.networkEnabled||!e.inForeground)||k0(i).Nt().next(function(a){return void 0===e.rn(a,5e3).find(function(c){return!(e.clientId===c.clientId||!(!e.networkEnabled&&c.networkEnabled||!e.inForeground&&c.inForeground&&e.networkEnabled===c.networkEnabled))})})}).next(function(o){return e.isPrimary!==o&&Gn("IndexedDbPersistence","Client "+(o?"is":"is not")+" eligible for a primary lease."),o})},t.prototype.shutdown=function(){return(0,We.mG)(this,void 0,void 0,function(){var i=this;return(0,We.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[kc.store,Ep.store],function(o){var a=new oC(o,uu.o);return i.Xe(a).next(function(){return i.en(a)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(i,e){var o=this;return i.filter(function(a){return o.sn(a.updateTimeMs,e)&&!o.cn(a.clientId)})},t.prototype.fn=function(){var i=this;return this.runTransaction("getActiveClients","readonly",function(e){return k0(e).Nt().next(function(o){return i.rn(o,18e5).map(function(a){return a.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(i){return AT.Qt(i,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(i,e,o){var c,a=this;return Gn("IndexedDbPersistence","Starting transaction:",i),this.Be.runTransaction(i,"readonly"===e?"readonly":"readwrite",bT,function(A){return c=new oC(A,a.Ne?a.Ne.next():uu.o),"readwrite-primary"===e?a.Je(c).next(function(z){return!!z||a.Ye(c)}).next(function(z){if(!z)throw xa("Failed to obtain primary lease for action '"+i+"'."),a.isPrimary=!1,a.Se.enqueueRetryable(function(){return a.Me(!1)}),new Dn(rn.FAILED_PRECONDITION,xT);return o(c)}).next(function(z){return a.Ze(c).next(function(){return z})}):a.dn(c).next(function(){return o(c)})}).then(function(A){return c.raiseOnCommittedEvent(),A})},t.prototype.dn=function(i){var e=this;return Nb(i).get(kc.key).next(function(o){if(null!==o&&e.sn(o.leaseTimestampMs,5e3)&&!e.cn(o.ownerId)&&!e.tn(o)&&!(e.Ce||e.allowTabSynchronization&&o.allowTabSynchronization))throw new Dn(rn.FAILED_PRECONDITION,cC)})},t.prototype.Ze=function(i){var e=new kc(this.clientId,this.allowTabSynchronization,Date.now());return Nb(i).put(kc.key,e)},t.yt=function(){return e_.yt()},t.prototype.Xe=function(i){var e=this,o=Nb(i);return o.get(kc.key).next(function(a){return e.tn(a)?(Gn("IndexedDbPersistence","Releasing primary lease."),o.delete(kc.key)):Ln.resolve()})},t.prototype.sn=function(i,e){var o=Date.now();return!(i<o-e||i>o&&(xa("Detected an update time that is in the future: "+i+" > "+o),1))},t.prototype.We=function(){var i=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){i.Se.enqueueAndForget(function(){return i.inForeground="visible"===i.document.visibilityState,i.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var i,e=this;"function"==typeof(null===(i=this.window)||void 0===i?void 0:i.addEventListener)&&(this.Fe=function(){e.un(),(0,Zr.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(i){var e;try{var o=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(i)));return Gn("IndexedDbPersistence","Client '"+i+"' "+(o?"is":"is not")+" zombied in LocalStorage"),o}catch(a){return xa("IndexedDbPersistence","Failed to get zombied client id.",a),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(i){xa("Failed to set zombie client id.",i)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(i){}},t.prototype.on=function(i){return"firestore_zombie_"+this.persistenceKey+"_"+i},t}();function Nb(t){return Ac(t,kc.store)}function k0(t){return Ac(t,Ep.store)}function NT(t,i){var e=t.projectId;return t.isDefaultDatabase||(e+="."+t.database),"firestore/"+i+"/"+e+"/"}var aD=function(t,i){this.progress=t,this.wn=i},Ny=function(){function t(i,e,o){this.Ue=i,this._n=e,this.Ut=o}return t.prototype.mn=function(i,e){var o=this;return this._n.getAllMutationBatchesAffectingDocumentKey(i,e).next(function(a){return o.yn(i,e,a)})},t.prototype.yn=function(i,e,o){return this.Ue.getEntry(i,e).next(function(a){for(var c=0,v=o;c<v.length;c++)v[c].applyToLocalView(a);return a})},t.prototype.gn=function(i,e){i.forEach(function(o,a){for(var c=0,v=e;c<v.length;c++)v[c].applyToLocalView(a)})},t.prototype.pn=function(i,e){var o=this;return this.Ue.getEntries(i,e).next(function(a){return o.En(i,a).next(function(){return a})})},t.prototype.En=function(i,e){var o=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(i,e).next(function(a){return o.gn(e,a)})},t.prototype.getDocumentsMatchingQuery=function(i,e,o){return ki.isDocumentKey((a=e).path)&&null===a.collectionGroup&&0===a.filters.length?this.Tn(i,e.path):z1(e)?this.In(i,e,o):this.An(i,e,o);var a},t.prototype.Tn=function(i,e){return this.mn(i,new ki(e)).next(function(o){var a=Qg();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a})},t.prototype.In=function(i,e,o){var a=this,c=e.collectionGroup,v=Qg();return this.Ut.getCollectionParents(i,c).next(function(A){return Ln.forEach(A,function(z){var oe,fe,$=(oe=e,fe=z.child(c),new Cp(fe,null,oe.explicitOrderBy.slice(),oe.filters.slice(),oe.limit,oe.limitType,oe.startAt,oe.endAt));return a.An(i,$,o).next(function(oe){oe.forEach(function(fe,ke){v=v.insert(fe,ke)})})}).next(function(){return v})})},t.prototype.An=function(i,e,o){var a,c,v=this;return this.Ue.getDocumentsMatchingQuery(i,e,o).next(function(A){return a=A,v._n.getAllMutationBatchesAffectingQuery(i,e)}).next(function(A){return v.Rn(i,c=A,a).next(function(z){a=z;for(var $=0,oe=c;$<oe.length;$++)for(var fe=oe[$],ke=0,Oe=fe.mutations;ke<Oe.length;ke++){var He=Oe[ke],ct=He.key,At=a.get(ct);null==At&&(At=Pl.newInvalidDocument(ct),a=a.insert(ct,At)),$E(He,At,fe.localWriteTime),At.isFoundDocument()||(a=a.remove(ct))}})}).next(function(){return a.forEach(function(A,z){kb(e,z)||(a=a.remove(A))}),a})},t.prototype.Rn=function(i,e,o){for(var a=lo(),c=0,v=e;c<v.length;c++)for(var A=0,z=v[c].mutations;A<z.length;A++){var $=z[A];$ instanceof Sm&&null===o.get($.key)&&(a=a.add($.key))}var oe=o;return this.Ue.getEntries(i,a).next(function(fe){return fe.forEach(function(ke,Oe){Oe.isFoundDocument()&&(oe=oe.insert(ke,Oe))}),oe})},t}(),lD=function(){function t(i,e,o,a){this.targetId=i,this.fromCache=e,this.bn=o,this.vn=a}return t.Pn=function(i,e){for(var o=lo(),a=lo(),c=0,v=e.docChanges;c<v.length;c++){var A=v[c];switch(A.type){case 0:o=o.add(A.doc.key);break;case 1:a=a.add(A.doc.key)}}return new t(i,e.fromCache,o,a)},t}(),BT=function(){function t(){}return t.prototype.Vn=function(i){this.Sn=i},t.prototype.getDocumentsMatchingQuery=function(i,e,o,a){var v,c=this;return 0===(v=e).filters.length&&null===v.limit&&null==v.startAt&&null==v.endAt&&(0===v.explicitOrderBy.length||1===v.explicitOrderBy.length&&v.explicitOrderBy[0].field.isKeyField())||o.isEqual(vr.min())?this.Dn(i,e):this.Sn.pn(i,a).next(function(v){var A=c.Cn(e,v);return(Tb(e)||d0(e))&&c.Nn(e.limitType,A,a,o)?c.Dn(i,e):(vb()<=Cd.in.DEBUG&&Gn("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),V1(e)),c.Sn.getDocumentsMatchingQuery(i,e,o).next(function(z){return A.forEach(function($){z=z.insert($.key,$)}),z}))})},t.prototype.Cn=function(i,e){var o=new Ca(GE(i));return e.forEach(function(a,c){kb(i,c)&&(o=o.add(c))}),o},t.prototype.Nn=function(i,e,o,a){if(o.size!==e.size)return!0;var c="F"===i?e.last():e.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)},t.prototype.Dn=function(i,e){return vb()<=Cd.in.DEBUG&&Gn("QueryEngine","Using full collection scan to execute query:",V1(e)),this.Sn.getDocumentsMatchingQuery(i,e,vr.min())},t}(),cD=function(){function t(i,e,o,a){this.persistence=i,this.xn=e,this.R=a,this.Fn=new tc(kr),this.kn=new Tp(function(c){return qg(c)},bm),this.$n=vr.min(),this._n=i.getMutationQueue(o),this.On=i.getRemoteDocumentCache(),this.qe=i.getTargetCache(),this.Mn=new Ny(this.On,this._n,this.persistence.getIndexManager()),this.Ke=i.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(i){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(o){return i.collect(o,e.Fn)})},t}();function Bb(t,i,e,o){return new cD(t,i,e,o)}function Pm(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return e=Jn(t),o=e._n,a=e.Mn,[4,e.persistence.runTransaction("Handle user change","readonly",function(A){var z;return e._n.getAllMutationBatches(A).next(function($){return z=$,o=e.persistence.getMutationQueue(i),a=new Ny(e.On,o,e.persistence.getIndexManager()),o.getAllMutationBatches(A)}).next(function($){for(var oe=[],fe=[],ke=lo(),Oe=0,He=z;Oe<He.length;Oe++){var ct=He[Oe];oe.push(ct.batchId);for(var At=0,Qt=ct.mutations;At<Qt.length;At++)ke=ke.add(Qt[At].key)}for(var xn=0,Qn=$;xn<Qn.length;xn++){var ii=Qn[xn];fe.push(ii.batchId);for(var er=0,Or=ii.mutations;er<Or.length;er++)ke=ke.add(Or[er].key)}return a.pn(A,ke).next(function(hs){return{Ln:hs,removedBatchIds:oe,addedBatchIds:fe}})})})];case 1:return c=v.sent(),[2,(e._n=o,e.Mn=a,e.xn.Vn(e.Mn),c)]}})})}function zT(t,i){var e=Jn(t);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(o){var v,A,z,$,oe,fe,ke,a=i.batch.keys(),c=e.On.newChangeBuffer({trackRemovals:!0});return(v=e,A=o,z=i,$=c,oe=z.batch,fe=oe.keys(),ke=Ln.resolve(),fe.forEach(function(Oe){ke=ke.next(function(){return $.getEntry(A,Oe)}).next(function(He){var ct=z.docVersions.get(Oe);Zi(null!==ct),He.version.compareTo(ct)<0&&(oe.applyToRemoteDocument(He,z),He.isValidDocument()&&$.addEntry(He,z.commitVersion))})}),ke.next(function(){return v._n.removeMutationBatch(A,oe)})).next(function(){return c.apply(o)}).next(function(){return e._n.performConsistencyCheck(o)}).next(function(){return e.Mn.pn(o,a)})})}function VT(t){var i=Jn(t);return i.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return i.qe.getLastRemoteSnapshotVersion(e)})}function ZP(t,i){var e=Jn(t),o=i.snapshotVersion,a=e.Fn;return e.persistence.runTransaction("Apply remote event","readwrite-primary",function(c){var v=e.On.newChangeBuffer({trackRemovals:!0});a=e.Fn;var A=[];i.targetChanges.forEach(function(oe,fe){var ct,At,Qt,ke=a.get(fe);if(ke){A.push(e.qe.removeMatchingKeys(c,oe.removedDocuments,fe).next(function(){return e.qe.addMatchingKeys(c,oe.addedDocuments,fe)}));var Oe=oe.resumeToken;if(Oe.approximateByteSize()>0){var He=ke.withResumeToken(Oe,o).withSequenceNumber(c.currentSequenceNumber);a=a.insert(fe,He),ct=ke,Qt=oe,Zi((At=He).resumeToken.approximateByteSize()>0),(0===ct.resumeToken.approximateByteSize()||At.snapshotVersion.toMicroseconds()-ct.snapshotVersion.toMicroseconds()>=3e8||Qt.addedDocuments.size+Qt.modifiedDocuments.size+Qt.removedDocuments.size>0)&&A.push(e.qe.updateTargetData(c,He))}}});var z=Yh();if(i.documentUpdates.forEach(function(oe,fe){i.resolvedLimboDocuments.has(oe)&&A.push(e.persistence.referenceDelegate.updateLimboDocument(c,oe))}),A.push(UT(c,v,i.documentUpdates,o,void 0).next(function(oe){z=oe})),!o.isEqual(vr.min())){var $=e.qe.getLastRemoteSnapshotVersion(c).next(function(oe){return e.qe.setTargetsMetadata(c,c.currentSequenceNumber,o)});A.push($)}return Ln.waitFor(A).next(function(){return v.apply(c)}).next(function(){return e.Mn.En(c,z)}).next(function(){return z})}).then(function(c){return e.Fn=a,c})}function UT(t,i,e,o,a){var c=lo();return e.forEach(function(v){return c=c.add(v)}),i.getEntries(t,c).next(function(v){var A=Yh();return e.forEach(function(z,$){var oe=v.get(z),fe=(null==a?void 0:a.get(z))||o;$.isNoDocument()&&$.version.isEqual(vr.min())?(i.removeEntry(z,fe),A=A.insert(z,$)):!oe.isValidDocument()||$.version.compareTo(oe.version)>0||0===$.version.compareTo(oe.version)&&oe.hasPendingWrites?(i.addEntry($,fe),A=A.insert(z,$)):Gn("LocalStore","Ignoring outdated watch update for ",z,". Current version:",oe.version," Watch version:",$.version)}),A})}function A0(t,i){var e=Jn(t);return e.persistence.runTransaction("Get next mutation batch","readonly",function(o){return void 0===i&&(i=-1),e._n.getNextMutationBatchAfterBatchId(o,i)})}function By(t,i){var e=Jn(t);return e.persistence.runTransaction("Allocate target","readwrite",function(o){var a;return e.qe.getTargetData(o,i).next(function(c){return c?Ln.resolve(a=c):e.qe.allocateTargetId(o).next(function(v){return a=new x0(i,v,0,o.currentSequenceNumber),e.qe.addTargetData(o,a).next(function(){return a})})})}).then(function(o){var a=e.Fn.get(o.targetId);return(null===a||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Fn=e.Fn.insert(o.targetId,o),e.kn.set(i,o.targetId)),o})}function zy(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,c,v;return(0,We.Jh)(this,function(A){switch(A.label){case 0:o=Jn(t),a=o.Fn.get(i),c=e?"readwrite":"readwrite-primary",A.label=1;case 1:return A.trys.push([1,4,,5]),e?[3,3]:[4,o.persistence.runTransaction("Release target",c,function(z){return o.persistence.referenceDelegate.removeTarget(z,a)})];case 2:A.sent(),A.label=3;case 3:return[3,5];case 4:if(!t_(v=A.sent()))throw v;return Gn("LocalStore","Failed to update sequence numbers for target "+i+": "+v),[3,5];case 5:return o.Fn=o.Fn.remove(i),o.kn.delete(a.target),[2]}})})}function zb(t,i,e){var o=Jn(t),a=vr.min(),c=lo();return o.persistence.runTransaction("Execute query","readonly",function(v){return(A=o,z=v,$=jh(i),oe=Jn(A),fe=oe.kn.get($),void 0!==fe?Ln.resolve(oe.Fn.get(fe)):oe.qe.getTargetData(z,$)).next(function(A){if(A)return a=A.lastLimboFreeSnapshotVersion,o.qe.getMatchingKeysForTargetId(v,A.targetId).next(function(z){c=z})}).next(function(){return o.xn.getDocumentsMatchingQuery(v,i,e?a:vr.min(),e?c:lo())}).next(function(A){return{documents:A,Bn:c}});var A,z,$,oe,fe})}function uC(t,i){var e=Jn(t),o=Jn(e.qe),a=e.Fn.get(i);return a?Promise.resolve(a.target):e.persistence.runTransaction("Get target data","readonly",function(c){return o.lt(c,i).next(function(v){return v?v.target:null})})}function D0(t){var i=Jn(t);return i.persistence.runTransaction("Get new document changes","readonly",function(e){return a=e,c=i.$n,v=Jn(i.On),A=Yh(),z=Ry(c),$=Im(a),oe=IDBKeyRange.lowerBound(z,!0),$.$t({index:Vs.readTimeIndex,range:oe},function(fe,ke){var Oe=CT(v.R,ke);A=A.insert(Oe.key,Oe),z=ke.readTime}).next(function(){return{wn:A,readTime:ST(z)}});var a,c,v,A,z,$,oe}).then(function(e){var o=e.wn;return i.$n=e.readTime,o})}function HT(t){return(0,We.mG)(this,void 0,void 0,function(){var i;return(0,We.Jh)(this,function(e){return[2,(i=Jn(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(o){return c=Im(o),v=vr.min(),c.$t({index:Vs.readTimeIndex,reverse:!0},function(A,z,$){z.readTime&&(v=ST(z.readTime)),$.done()}).next(function(){return v});var c,v}).then(function(o){i.$n=o})]})})}function GT(t,i,e,o){return(0,We.mG)(this,void 0,void 0,function(){var a,c,v,A,z,$,oe,fe,ke,Oe;return(0,We.Jh)(this,function(He){switch(He.label){case 0:for(a=Jn(t),c=lo(),v=Yh(),A=KE(),z=0,$=e;z<$.length;z++)fe=i.qn((oe=$[z]).metadata.name),oe.document&&(c=c.add(fe)),v=v.insert(fe,i.Un(oe)),A=A.insert(fe,i.Kn(oe.metadata.readTime));return ke=a.On.newChangeBuffer({trackRemovals:!0}),[4,By(a,(ct=o,jh(Wg(to.fromString("__bundle__/docs/"+ct)))))];case 1:return Oe=He.sent(),[2,a.persistence.runTransaction("Apply bundle documents","readwrite",function(ct){return UT(ct,ke,v,vr.min(),A).next(function(At){return ke.apply(ct),At}).next(function(At){return a.qe.removeMatchingKeysForTargetId(ct,Oe.targetId).next(function(){return a.qe.addMatchingKeys(ct,c,Oe.targetId)}).next(function(){return a.Mn.En(ct,At)}).next(function(){return At})})})]}var ct})})}function uD(t,i,e){return void 0===e&&(e=lo()),(0,We.mG)(this,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return[4,By(t,jh(C0(i.bundledQuery)))];case 1:return o=c.sent(),[2,(a=Jn(t)).persistence.runTransaction("Save named query","readwrite",function(v){var A=Rl(i.readTime);if(o.snapshotVersion.compareTo(A)>=0)return a.Ke.saveNamedQuery(v,i);var z=o.withResumeToken(Kl.EMPTY_BYTE_STRING,A);return a.Fn=a.Fn.insert(z.targetId,z),a.qe.updateTargetData(v,z).next(function(){return a.qe.removeMatchingKeysForTargetId(v,o.targetId)}).next(function(){return a.qe.addMatchingKeys(v,e,o.targetId)}).next(function(){return a.Ke.saveNamedQuery(v,i)})})]}})})}var hD=function(){function t(i){this.R=i,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(i,e){return Ln.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(i,e){var o;return this.Qn.set(e.id,{id:(o=e).id,version:o.version,createTime:Rl(o.createTime)}),Ln.resolve()},t.prototype.getNamedQuery=function(i,e){return Ln.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(i,e){return this.jn.set(e.name,{name:(o=e).name,query:C0(o.bundledQuery),readTime:Rl(o.readTime)}),Ln.resolve();var o},t}(),I0=function(){function t(){this.Wn=new Ca(ol.Gn),this.zn=new Ca(ol.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(i,e){var o=new ol(i,e);this.Wn=this.Wn.add(o),this.zn=this.zn.add(o)},t.prototype.Jn=function(i,e){var o=this;i.forEach(function(a){return o.addReference(a,e)})},t.prototype.removeReference=function(i,e){this.Yn(new ol(i,e))},t.prototype.Xn=function(i,e){var o=this;i.forEach(function(a){return o.removeReference(a,e)})},t.prototype.Zn=function(i){var e=this,o=new ki(new to([])),a=new ol(o,i),c=new ol(o,i+1),v=[];return this.zn.forEachInRange([a,c],function(A){e.Yn(A),v.push(A.key)}),v},t.prototype.ts=function(){var i=this;this.Wn.forEach(function(e){return i.Yn(e)})},t.prototype.Yn=function(i){this.Wn=this.Wn.delete(i),this.zn=this.zn.delete(i)},t.prototype.es=function(i){var e=new ki(new to([])),o=new ol(e,i),a=new ol(e,i+1),c=lo();return this.zn.forEachInRange([o,a],function(v){c=c.add(v.key)}),c},t.prototype.containsKey=function(i){var e=new ol(i,0),o=this.Wn.firstAfterOrEqual(e);return null!==o&&i.isEqual(o.key)},t}(),ol=function(){function t(i,e){this.key=i,this.ns=e}return t.Gn=function(i,e){return ki.comparator(i.key,e.key)||kr(i.ns,e.ns)},t.Hn=function(i,e){return kr(i.ns,e.ns)||ki.comparator(i.key,e.key)},t}(),jT=function(){function t(i,e){this.Ut=i,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ca(ol.Gn)}return t.prototype.checkEmpty=function(i){return Ln.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(i,e,o,a){var c=this.ss;this.ss++;var v=new b0(c,e,o,a);this._n.push(v);for(var A=0,z=a;A<z.length;A++){var $=z[A];this.rs=this.rs.add(new ol($.key,c)),this.Ut.addToCollectionParentIndex(i,$.key.path.popLast())}return Ln.resolve(v)},t.prototype.lookupMutationBatch=function(i,e){return Ln.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(i,e){var a=this.cs(e+1),c=a<0?0:a;return Ln.resolve(this._n.length>c?this._n[c]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Ln.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(i){return Ln.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(i,e){var o=this,a=new ol(e,0),c=new ol(e,Number.POSITIVE_INFINITY),v=[];return this.rs.forEachInRange([a,c],function(A){var z=o.os(A.ns);v.push(z)}),Ln.resolve(v)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(i,e){var o=this,a=new Ca(kr);return e.forEach(function(c){var v=new ol(c,0),A=new ol(c,Number.POSITIVE_INFINITY);o.rs.forEachInRange([v,A],function(z){a=a.add(z.ns)})}),Ln.resolve(this.us(a))},t.prototype.getAllMutationBatchesAffectingQuery=function(i,e){var o=e.path,a=o.length+1,c=o;ki.isDocumentKey(c)||(c=c.child(""));var v=new ol(new ki(c),0),A=new Ca(kr);return this.rs.forEachWhile(function(z){var $=z.key.path;return!!o.isPrefixOf($)&&($.length===a&&(A=A.add(z.ns)),!0)},v),Ln.resolve(this.us(A))},t.prototype.us=function(i){var e=this,o=[];return i.forEach(function(a){var c=e.os(a);null!==c&&o.push(c)}),o},t.prototype.removeMutationBatch=function(i,e){var o=this;Zi(0===this.hs(e.batchId,"removed")),this._n.shift();var a=this.rs;return Ln.forEach(e.mutations,function(c){var v=new ol(c.key,e.batchId);return a=a.delete(v),o.referenceDelegate.markPotentiallyOrphaned(i,c.key)}).next(function(){o.rs=a})},t.prototype.Gt=function(i){},t.prototype.containsKey=function(i,e){var o=new ol(e,0),a=this.rs.firstAfterOrEqual(o);return Ln.resolve(e.isEqual(a&&a.key))},t.prototype.performConsistencyCheck=function(i){return Ln.resolve()},t.prototype.hs=function(i,e){return this.cs(i)},t.prototype.cs=function(i){return 0===this._n.length?0:i-this._n[0].batchId},t.prototype.os=function(i){var e=this.cs(i);return e<0||e>=this._n.length?null:this._n[e]},t}(),P0=function(){function t(i,e){this.Ut=i,this.ls=e,this.docs=new tc(ki.comparator),this.size=0}return t.prototype.addEntry=function(i,e,o){var a=e.key,c=this.docs.get(a),v=c?c.size:0,A=this.ls(e);return this.docs=this.docs.insert(a,{document:e.clone(),size:A,readTime:o}),this.size+=A-v,this.Ut.addToCollectionParentIndex(i,a.path.popLast())},t.prototype.removeEntry=function(i){var e=this.docs.get(i);e&&(this.docs=this.docs.remove(i),this.size-=e.size)},t.prototype.getEntry=function(i,e){var o=this.docs.get(e);return Ln.resolve(o?o.document.clone():Pl.newInvalidDocument(e))},t.prototype.getEntries=function(i,e){var o=this,a=Yh();return e.forEach(function(c){var v=o.docs.get(c);a=a.insert(c,v?v.document.clone():Pl.newInvalidDocument(c))}),Ln.resolve(a)},t.prototype.getDocumentsMatchingQuery=function(i,e,o){for(var a=Yh(),c=new ki(e.path.child("")),v=this.docs.getIteratorFrom(c);v.hasNext();){var A=v.getNext(),$=A.value,oe=$.document,fe=$.readTime;if(!e.path.isPrefixOf(A.key.path))break;fe.compareTo(o)<=0||kb(e,oe)&&(a=a.insert(oe.key,oe.clone()))}return Ln.resolve(a)},t.prototype.fs=function(i,e){return Ln.forEach(this.docs,function(o){return e(o)})},t.prototype.newChangeBuffer=function(i){return new R0(this)},t.prototype.getSize=function(i){return Ln.resolve(this.size)},t}(),R0=function(t){function i(e){var o=this;return(o=t.call(this)||this).Ie=e,o}return(0,We.ZT)(i,t),i.prototype.applyChanges=function(e){var o=this,a=[];return this.changes.forEach(function(c,v){v.document.isValidDocument()?a.push(o.Ie.addEntry(e,v.document,o.getReadTime(c))):o.Ie.removeEntry(c)}),Ln.waitFor(a)},i.prototype.getFromCache=function(e,o){return this.Ie.getEntry(e,o)},i.prototype.getAllFromCache=function(e,o){return this.Ie.getEntries(e,o)},i}(OT),WP=function(){function t(i){this.persistence=i,this.ds=new Tp(function(e){return qg(e)},bm),this.lastRemoteSnapshotVersion=vr.min(),this.highestTargetId=0,this.ws=0,this._s=new I0,this.targetCount=0,this.ys=S0.Jt()}return t.prototype.forEachTarget=function(i,e){return this.ds.forEach(function(o,a){return e(a)}),Ln.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(i){return Ln.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(i){return Ln.resolve(this.ws)},t.prototype.allocateTargetId=function(i){return this.highestTargetId=this.ys.next(),Ln.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(i,e,o){return o&&(this.lastRemoteSnapshotVersion=o),e>this.ws&&(this.ws=e),Ln.resolve()},t.prototype.te=function(i){this.ds.set(i.target,i);var e=i.targetId;e>this.highestTargetId&&(this.ys=new S0(e),this.highestTargetId=e),i.sequenceNumber>this.ws&&(this.ws=i.sequenceNumber)},t.prototype.addTargetData=function(i,e){return this.te(e),this.targetCount+=1,Ln.resolve()},t.prototype.updateTargetData=function(i,e){return this.te(e),Ln.resolve()},t.prototype.removeTargetData=function(i,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Ln.resolve()},t.prototype.removeTargets=function(i,e,o){var a=this,c=0,v=[];return this.ds.forEach(function(A,z){z.sequenceNumber<=e&&null===o.get(z.targetId)&&(a.ds.delete(A),v.push(a.removeMatchingKeysForTargetId(i,z.targetId)),c++)}),Ln.waitFor(v).next(function(){return c})},t.prototype.getTargetCount=function(i){return Ln.resolve(this.targetCount)},t.prototype.getTargetData=function(i,e){var o=this.ds.get(e)||null;return Ln.resolve(o)},t.prototype.addMatchingKeys=function(i,e,o){return this._s.Jn(e,o),Ln.resolve()},t.prototype.removeMatchingKeys=function(i,e,o){this._s.Xn(e,o);var a=this.persistence.referenceDelegate,c=[];return a&&e.forEach(function(v){c.push(a.markPotentiallyOrphaned(i,v))}),Ln.waitFor(c)},t.prototype.removeMatchingKeysForTargetId=function(i,e){return this._s.Zn(e),Ln.resolve()},t.prototype.getMatchingKeysForTargetId=function(i,e){var o=this._s.es(e);return Ln.resolve(o)},t.prototype.containsKey=function(i,e){return Ln.resolve(this._s.containsKey(e))},t}(),Vb=function(){function t(i,e){var o=this;this.gs={},this.Ne=new uu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=i(this),this.qe=new WP(this),this.Ut=new tD,this.Ue=new P0(this.Ut,function(v){return o.referenceDelegate.ps(v)}),this.R=new Am(e),this.Ke=new hD(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(i){var e=this.gs[i.toKey()];return e||(e=new jT(this.Ut,this.referenceDelegate),this.gs[i.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(i,e,o){var a=this;Gn("MemoryPersistence","Starting transaction:",i);var c=new wo(this.Ne.next());return this.referenceDelegate.Es(),o(c).next(function(v){return a.referenceDelegate.Ts(c).next(function(){return v})}).toPromise().then(function(v){return c.raiseOnCommittedEvent(),v})},t.prototype.Is=function(i,e){return Ln.or(Object.values(this.gs).map(function(o){return function(){return o.containsKey(i,e)}}))},t}(),wo=function(t){function i(e){var o=this;return(o=t.call(this)||this).currentSequenceNumber=e,o}return(0,We.ZT)(i,t),i}(wT),Rm=function(){function t(i){this.persistence=i,this.As=new I0,this.Rs=null}return t.bs=function(i){return new t(i)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw vi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(i,e,o){return this.As.addReference(o,e),this.vs.delete(o.toString()),Ln.resolve()},t.prototype.removeReference=function(i,e,o){return this.As.removeReference(o,e),this.vs.add(o.toString()),Ln.resolve()},t.prototype.markPotentiallyOrphaned=function(i,e){return this.vs.add(e.toString()),Ln.resolve()},t.prototype.removeTarget=function(i,e){var o=this;this.As.Zn(e.targetId).forEach(function(c){return o.vs.add(c.toString())});var a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(i,e.targetId).next(function(c){c.forEach(function(v){return o.vs.add(v.toString())})}).next(function(){return a.removeTargetData(i,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(i){var e=this,o=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ln.forEach(this.vs,function(a){var c=ki.fromPath(a);return e.Ps(i,c).next(function(v){v||o.removeEntry(c)})}).next(function(){return e.Rs=null,o.apply(i)})},t.prototype.updateLimboDocument=function(i,e){var o=this;return this.Ps(i,e).next(function(a){a?o.vs.delete(e.toString()):o.vs.add(e.toString())})},t.prototype.ps=function(i){return 0},t.prototype.Ps=function(i,e){var o=this;return Ln.or([function(){return Ln.resolve(o.As.containsKey(e))},function(){return o.persistence.getTargetCache().containsKey(i,e)},function(){return o.persistence.Is(i,e)}])},t}(),La=function(){function t(i){this.uid=i}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(i){return i.uid===this.uid},t}();function Vy(t,i){return"firestore_clients_"+t+"_"+i}function dD(t,i,e){var o="firestore_mutations_"+t+"_"+e;return i.isAuthenticated()&&(o+="_"+i.uid),o}function rr(t,i){return"firestore_targets_"+t+"_"+i}La.UNAUTHENTICATED=new La(null),La.GOOGLE_CREDENTIALS=new La("google-credentials-uid"),La.FIRST_PARTY=new La("first-party-uid");var eh=function(){function t(i,e,o,a){this.user=i,this.batchId=e,this.state=o,this.error=a}return t.Vs=function(i,e,o){var a,c=JSON.parse(o),v="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return v&&c.error&&(v="string"==typeof c.error.message&&"string"==typeof c.error.code)&&(a=new Dn(c.error.code,c.error.message)),v?new t(i,e,c.state,a):(xa("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+o),null)},t.prototype.Ss=function(){var i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)},t}(),Ub=function(){function t(i,e,o){this.targetId=i,this.state=e,this.error=o}return t.Vs=function(i,e){var o,a=JSON.parse(e),c="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return c&&a.error&&(c="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(o=new Dn(a.error.code,a.error.message)),c?new t(i,a.state,o):(xa("SharedClientState","Failed to parse target state for ID '"+i+"': "+e),null)},t.prototype.Ss=function(){var i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)},t}(),Om=function(){function t(i,e){this.clientId=i,this.activeTargetIds=e}return t.Vs=function(i,e){for(var o=JSON.parse(e),a="object"==typeof o&&o.activeTargetIds instanceof Array,c=Ib(),v=0;a&&v<o.activeTargetIds.length;++v)a=Gg(o.activeTargetIds[v]),c=c.add(o.activeTargetIds[v]);return a?new t(i,c):(xa("SharedClientState","Failed to parse client data for instance '"+i+"': "+e),null)},t}(),$P=function(){function t(i,e){this.clientId=i,this.onlineState=e}return t.Vs=function(i){var e=JSON.parse(i);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new t(e.clientId,e.onlineState):(xa("SharedClientState","Failed to parse online state: "+i),null)},t}(),O0=function(){function t(){this.activeTargetIds=Ib()}return t.prototype.Ds=function(i){this.activeTargetIds=this.activeTargetIds.add(i)},t.prototype.Cs=function(i){this.activeTargetIds=this.activeTargetIds.delete(i)},t.prototype.Ss=function(){var i={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(i)},t}(),F0=function(){function t(i,e,o,a,c){this.window=i,this.Se=e,this.persistenceKey=o,this.Ns=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new tc(kr),this.started=!1,this.$s=[];var v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Os=Vy(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new O0),this.Ls=new RegExp("^firestore_clients_"+v+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+v+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+v+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(A){return"firestore_bundle_loaded_"+A}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(i){return!(!i||!i.localStorage)},t.prototype.start=function(){return(0,We.mG)(this,void 0,void 0,function(){var i,e,o,a,c,v,A,z,$,oe,ke=this;return(0,We.Jh)(this,function(Oe){switch(Oe.label){case 0:return[4,this.syncEngine.fn()];case 1:for(i=Oe.sent(),e=0,o=i;e<o.length;e++)(a=o[e])!==this.Ns&&(c=this.getItem(Vy(this.persistenceKey,a)))&&(v=Om.Vs(a,c))&&(this.ks=this.ks.insert(v.clientId,v));for(this.Qs(),(A=this.storage.getItem(this.Us))&&(z=this.js(A))&&this.Ws(z),$=0,oe=this.$s;$<oe.length;$++)this.Fs(oe[$]);return this.$s=[],this.window.addEventListener("pagehide",function(){return ke.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(i){this.setItem(this.Ms,JSON.stringify(i))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(i){var e=!1;return this.ks.forEach(function(o,a){a.activeTargetIds.has(i)&&(e=!0)}),e},t.prototype.addPendingMutation=function(i){this.zs(i,"pending")},t.prototype.updateMutationState=function(i,e,o){this.zs(i,e,o),this.Hs(i)},t.prototype.addLocalQueryTarget=function(i){var e="not-current";if(this.isActiveQueryTarget(i)){var o=this.storage.getItem(rr(this.persistenceKey,i));if(o){var a=Ub.Vs(i,o);a&&(e=a.state)}}return this.Js.Ds(i),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(i){this.Js.Cs(i),this.Qs()},t.prototype.isLocalQueryTarget=function(i){return this.Js.activeTargetIds.has(i)},t.prototype.clearQueryState=function(i){this.removeItem(rr(this.persistenceKey,i))},t.prototype.updateQueryState=function(i,e,o){this.Ys(i,e,o)},t.prototype.handleUserChange=function(i,e,o){var a=this;e.forEach(function(c){a.Hs(c)}),this.currentUser=i,o.forEach(function(c){a.addPendingMutation(c)})},t.prototype.setOnlineState=function(i){this.Xs(i)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(i){var e=this.storage.getItem(i);return Gn("SharedClientState","READ",i,e),e},t.prototype.setItem=function(i,e){Gn("SharedClientState","SET",i,e),this.storage.setItem(i,e)},t.prototype.removeItem=function(i){Gn("SharedClientState","REMOVE",i),this.storage.removeItem(i)},t.prototype.Fs=function(i){var e=this,o=i;if(o.storageArea===this.storage){if(Gn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Os)return void xa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,We.mG)(e,void 0,void 0,function(){var a,c,v,A,z,$;return(0,We.Jh)(this,function(oe){if(this.started){if(null!==o.key)if(this.Ls.test(o.key)){if(null==o.newValue)return a=this.ti(o.key),[2,this.ei(a,null)];if(c=this.ni(o.key,o.newValue))return[2,this.ei(c.clientId,c)]}else if(this.Bs.test(o.key)){if(null!==o.newValue&&(v=this.si(o.key,o.newValue)))return[2,this.ii(v)]}else if(this.qs.test(o.key)){if(null!==o.newValue&&(A=this.ri(o.key,o.newValue)))return[2,this.oi(A)]}else if(o.key===this.Us){if(null!==o.newValue&&(z=this.js(o.newValue)))return[2,this.Ws(z)]}else if(o.key===this.Ms)($=function(fe){var ke=uu.o;if(null!=fe)try{var Oe=JSON.parse(fe);Zi("number"==typeof Oe),ke=Oe}catch(He){xa("SharedClientState","Failed to read sequence number from WebStorage",He)}return ke}(o.newValue))!==uu.o&&this.sequenceNumberHandler($);else if(o.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(o);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(i,e,o){var a=new eh(this.currentUser,i,e,o),c=dD(this.persistenceKey,this.currentUser,i);this.setItem(c,a.Ss())},t.prototype.Hs=function(i){var e=dD(this.persistenceKey,this.currentUser,i);this.removeItem(e)},t.prototype.Xs=function(i){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:i}))},t.prototype.Ys=function(i,e,o){var a=rr(this.persistenceKey,i),c=new Ub(i,e,o);this.setItem(a,c.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(i){var e=this.Ls.exec(i);return e?e[1]:null},t.prototype.ni=function(i,e){var o=this.ti(i);return Om.Vs(o,e)},t.prototype.si=function(i,e){var o=this.Bs.exec(i),a=Number(o[1]);return eh.Vs(new La(void 0!==o[2]?o[2]:null),a,e)},t.prototype.ri=function(i,e){var o=this.qs.exec(i),a=Number(o[1]);return Ub.Vs(a,e)},t.prototype.js=function(i){return $P.Vs(i)},t.prototype.ii=function(i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(e){return i.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(i.batchId,i.state,i.error)]:(Gn("SharedClientState","Ignoring mutation for non-active user "+i.user.uid),[2])})})},t.prototype.oi=function(i){return this.syncEngine.ai(i.targetId,i.state,i.error)},t.prototype.ei=function(i,e){var o=this,a=e?this.ks.insert(i,e):this.ks.remove(i),c=this.Gs(this.ks),v=this.Gs(a),A=[],z=[];return v.forEach(function($){c.has($)||A.push($)}),c.forEach(function($){v.has($)||z.push($)}),this.syncEngine.hi(A,z).then(function(){o.ks=a})},t.prototype.Ws=function(i){this.ks.get(i.clientId)&&this.onlineStateHandler(i.onlineState)},t.prototype.Gs=function(i){var e=Ib();return i.forEach(function(o,a){e=e.unionWith(a.activeTargetIds)}),e},t}(),pD=function(){function t(){this.li=new O0,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(i){},t.prototype.updateMutationState=function(i,e,o){},t.prototype.addLocalQueryTarget=function(i){return this.li.Ds(i),this.fi[i]||"not-current"},t.prototype.updateQueryState=function(i,e,o){this.fi[i]=e},t.prototype.removeLocalQueryTarget=function(i){this.li.Cs(i)},t.prototype.isLocalQueryTarget=function(i){return this.li.activeTargetIds.has(i)},t.prototype.clearQueryState=function(i){delete this.fi[i]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(i){return this.li.activeTargetIds.has(i)},t.prototype.start=function(){return this.li=new O0,Promise.resolve()},t.prototype.handleUserChange=function(i,e,o){},t.prototype.setOnlineState=function(i){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(i){},t.prototype.notifyBundleLoaded=function(){},t}(),fD=function(){function t(){}return t.prototype.di=function(i){},t.prototype.shutdown=function(){},t}(),YT=function(){function t(){var i=this;this.wi=function(){return i._i()},this.mi=function(){return i.yi()},this.gi=[],this.pi()}return t.prototype.di=function(i){this.gi.push(i)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Gn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var i=0,e=this.gi;i<e.length;i++)(0,e[i])(0)},t.prototype.yi=function(){Gn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var i=0,e=this.gi;i<e.length;i++)(0,e[i])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Wh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ms=function(){function t(i){this.Ei=i.Ei,this.Ti=i.Ti}return t.prototype.Ii=function(i){this.Ai=i},t.prototype.Ri=function(i){this.bi=i},t.prototype.onMessage=function(i){this.vi=i},t.prototype.close=function(){this.Ti()},t.prototype.send=function(i){this.Ei(i)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(i){this.bi(i)},t.prototype.Si=function(i){this.vi(i)},t}(),Fd=function(t){function i(e){var o=this;return(o=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,o.autoDetectLongPolling=e.autoDetectLongPolling,o.useFetchStreams=e.useFetchStreams,o}return(0,We.ZT)(i,t),i.prototype.ki=function(e,o,a,c){return new Promise(function(v,A){var z=new l0;z.listenOnce(o0.COMPLETE,function(){try{switch(z.getLastErrorCode()){case r0.NO_ERROR:var oe=z.getResponseJson();Gn("Connection","XHR received:",JSON.stringify(oe)),v(oe);break;case r0.TIMEOUT:Gn("Connection",'RPC "'+e+'" timed out'),A(new Dn(rn.DEADLINE_EXCEEDED,"Request time out"));break;case r0.HTTP_ERROR:var fe=z.getStatus();if(Gn("Connection",'RPC "'+e+'" failed with status:',fe,"response text:",z.getResponseText()),fe>0){var ke=z.getResponseJson().error;if(ke&&ke.status&&ke.message){var Oe=(ct=ke.status.toLowerCase().replace(/_/g,"-"),Object.values(rn).indexOf(ct)>=0?ct:rn.UNKNOWN);A(new Dn(Oe,ke.message))}else A(new Dn(rn.UNKNOWN,"Server responded with status "+z.getStatus()))}else A(new Dn(rn.UNAVAILABLE,"Connection failed."));break;default:vi()}}finally{Gn("Connection",'RPC "'+e+'" completed.')}var ct});var $=JSON.stringify(c);z.send(o,"POST",$,a,15)})},i.prototype.Oi=function(e,o){var a=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=new _y,v=pn(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(A.xmlHttpFactory=new RA({})),this.Fi(A.initMessageHeaders,o),(0,Zr.uI)()||(0,Zr.b$)()||(0,Zr.d)()||(0,Zr.w1)()||(0,Zr.Mn)()||(0,Zr.ru)()||(A.httpHeadersOverwriteParam="$httpHeaders");var z=a.join("");Gn("Connection","Creating WebChannel: "+z,A);var $=c.createWebChannel(z,A),oe=!1,fe=!1,ke=new Ms({Ei:function(He){fe?Gn("Connection","Not sending because WebChannel is closed:",He):(oe||(Gn("Connection","Opening WebChannel transport."),$.open(),oe=!0),Gn("Connection","WebChannel sending:",He),$.send(He))},Ti:function(){return $.close()}}),Oe=function(He,ct,At){He.listen(ct,function(Qt){try{At(Qt)}catch(Sn){setTimeout(function(){throw Sn},0)}})};return Oe($,yb.EventType.OPEN,function(){fe||Gn("Connection","WebChannel transport opened.")}),Oe($,yb.EventType.CLOSE,function(){fe||(fe=!0,Gn("Connection","WebChannel transport closed"),ke.Vi())}),Oe($,yb.EventType.ERROR,function(He){fe||(fe=!0,by("Connection","WebChannel transport errored:",He),ke.Vi(new Dn(rn.UNAVAILABLE,"The operation could not be completed")))}),Oe($,yb.EventType.MESSAGE,function(He){var ct;if(!fe){var At=He.data[0];Zi(!!At);var Sn=At.error||(null===(ct=At[0])||void 0===ct?void 0:ct.error);if(Sn){Gn("Connection","WebChannel received error:",Sn);var xn=Sn.status,Qn=function(er){var Or=wa[er];if(void 0!==Or)return g0(Or)}(xn),ii=Sn.message;void 0===Qn&&(Qn=rn.INTERNAL,ii="Unknown error status: "+xn+" with message "+Sn.message),fe=!0,ke.Vi(new Dn(Qn,ii)),$.close()}else Gn("Connection","WebChannel received:",At),ke.Si(At)}}),Oe(v,s0.STAT_EVENT,function(He){He.stat===a0_PROXY?Gn("Connection","Detected buffering proxy"):He.stat===a0_NOPROXY&&Gn("Connection","Detected no buffering proxy")}),setTimeout(function(){ke.Pi()},0),ke},i}(function(){function t(i){this.databaseInfo=i,this.databaseId=i.databaseId,this.Di=(i.ssl?"https":"http")+"://"+i.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(i,e,o,a){var c=this.xi(i,e);Gn("RestConnection","Sending: ",c,o);var v={};return this.Fi(v,a),this.ki(i,c,v,o).then(function(A){return Gn("RestConnection","Received: ",A),A},function(A){throw by("RestConnection",i+" failed with error: ",A,"url: ",c,"request:",o),A})},t.prototype.$i=function(i,e,o,a){return this.Ni(i,e,o,a)},t.prototype.Fi=function(i,e){if(i["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var o in e.authHeaders)e.authHeaders.hasOwnProperty(o)&&(i[o]=e.authHeaders[o])},t.prototype.xi=function(i,e){return this.Di+"/v1/"+e+":"+Wh[i]},t}());function hC(){return"undefined"!=typeof window?window:null}function L0(){return"undefined"!=typeof document?document:null}function Uy(t){return new rT(t,!0)}var Hb=function(){function t(i,e,o,a,c){void 0===o&&(o=1e3),void 0===a&&(a=1.5),void 0===c&&(c=6e4),this.Se=i,this.timerId=e,this.Mi=o,this.Li=a,this.Bi=c,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(i){var e=this;this.cancel();var o=Math.floor(this.qi+this.Wi()),a=Math.max(0,Date.now()-this.Ki),c=Math.max(0,o-a);c>0&&Gn("ExponentialBackoff","Backing off for "+c+" ms (base delay: "+this.qi+" ms, delay with jitter: "+o+" ms, last attempt: "+a+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,c,function(){return e.Ki=Date.now(),i()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),a_=function(){function t(i,e,o,a,c,v){this.Se=i,this.zi=o,this.Hi=a,this.Ji=c,this.listener=v,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Hb(i,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){switch(i.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var i=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return i.rr()}))},t.prototype.cr=function(i){this.ur(),this.stream.send(i)},t.prototype.rr=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(i,e){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==i?this.Zi.reset():e&&e.code===rn.RESOURCE_EXHAUSTED?(xa(e.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===rn.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=i,[4,this.listener.Ri(e)];case 1:return o.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var i=this;this.state=1;var e=this.hr(this.Yi),o=this.Yi;this.Ji.getToken().then(function(a){i.Yi===o&&i.lr(a)},function(a){e(function(){var c=new Dn(rn.UNKNOWN,"Fetching auth token failed: "+a.message);return i.dr(c)})})},t.prototype.lr=function(i){var e=this,o=this.hr(this.Yi);this.stream=this.wr(i),this.stream.Ii(function(){o(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(a){o(function(){return e.dr(a)})}),this.stream.onMessage(function(a){o(function(){return e.onMessage(a)})})},t.prototype.nr=function(){var i=this;this.state=4,this.Zi.ji(function(){return(0,We.mG)(i,void 0,void 0,function(){return(0,We.Jh)(this,function(e){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(i){return Gn("PersistentStream","close with error: "+i),this.stream=null,this.close(3,i)},t.prototype.hr=function(i){var e=this;return function(o){e.Se.enqueueAndForget(function(){return e.Yi===i?o():(Gn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Gb=function(t){function i(e,o,a,c,v){var A=this;return(A=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",o,a,v)||this).R=c,A}return(0,We.ZT)(i,t),i.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},i.prototype.onMessage=function(e){this.Zi.reset();var o=function(c,v){var A,At;if("targetChange"in v){var z="NO_CHANGE"===(At=v.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===At?1:"REMOVE"===At?2:"CURRENT"===At?3:"RESET"===At?4:vi(),$=v.targetChange.targetIds||[],oe=function(At,Qt){return At.I?(Zi(void 0===Qt||"string"==typeof Qt),Kl.fromBase64String(Qt||"")):(Zi(void 0===Qt||Qt instanceof Uint8Array),Kl.fromUint8Array(Qt||new Uint8Array))}(c,v.targetChange.resumeToken),fe=(ke=v.targetChange.cause)&&function(At){var Qt=void 0===At.code?rn.UNKNOWN:g0(At.code);return new Dn(Qt,At.message||"")}(ke);A=new tT(z,$,oe,fe||null)}else if("documentChange"in v){$=Ju(c,(z=v.documentChange).document.name),oe=Rl(z.document.updateTime);var ke=new du({mapValue:{fields:z.document.fields}}),Oe=(fe=Pl.newFoundDocument($,oe,ke),z.targetIds||[]);A=new Tm(Oe,z.removedTargetIds||[],fe.key,fe)}else if("documentDelete"in v)$=Ju(c,(z=v.documentDelete).document),oe=z.readTime?Rl(z.readTime):vr.min(),ke=Pl.newNoDocument($,oe),A=new Tm([],fe=z.removedTargetIds||[],ke.key,ke);else if("documentRemove"in v)$=Ju(c,(z=v.documentRemove).document),A=new Tm([],oe=z.removedTargetIds||[],$,null);else{if(!("filter"in v))return vi();var ct=v.filter;$=new HP(z=ct.count||0),A=new Ty(oe=ct.targetId,$)}return A}(this.R,e),a=function(c){if(!("targetChange"in c))return vr.min();var v=c.targetChange;return v.targetIds&&v.targetIds.length?vr.min():v.readTime?Rl(v.readTime):vr.min()}(e);return this.listener._r(o,a)},i.prototype.mr=function(e){var c,v,A,z,o={};o.database=ky(this.R),o.addTarget=(c=this.R,(A=h0(z=(v=e).target)?{documents:hT(c,z)}:{query:K1(c,z)}).targetId=v.targetId,v.resumeToken.approximateByteSize()>0?A.resumeToken=oT(c,v.resumeToken):v.snapshotVersion.compareTo(vr.min())>0&&(A.readTime=Pb(c,v.snapshotVersion.toTimestamp())),A);var a=function(c,v){var A=function(z,$){switch($){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vi()}}(0,v.purpose);return null==A?null:{"goog-listen-tags":A}}(0,e);a&&(o.labels=a),this.cr(o)},i.prototype.yr=function(e){var o={};o.database=ky(this.R),o.removeTarget=e,this.cr(o)},i}(a_),mD=function(t){function i(e,o,a,c,v){var A=this;return(A=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",o,a,v)||this).R=c,A.gr=!1,A}return(0,We.ZT)(i,t),Object.defineProperty(i.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},i.prototype.ar=function(){this.gr&&this.Er([])},i.prototype.wr=function(e){return this.Hi.Oi("Write",e)},i.prototype.onMessage=function(e){if(Zi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var o=(v=e.commitTime,(c=e.writeResults)&&c.length>0?(Zi(void 0!==v),c.map(function(A){return $=v,(oe=Rl((z=A).updateTime?z.updateTime:$)).isEqual(vr.min())&&(oe=Rl($)),new UA(oe,z.transformResults||[]);var z,$,oe})):[]),a=Rl(e.commitTime);return this.listener.Tr(a,o)}var c,v;return Zi(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},i.prototype.Ar=function(){var e={};e.database=ky(this.R),this.cr(e)},i.prototype.Er=function(e){var o=this,a={streamToken:this.lastStreamToken,writes:e.map(function(c){return y0(o.R,c)})};this.cr(a)},i}(a_),l_=function(t){function i(e,o,a){var c=this;return(c=t.call(this)||this).credentials=e,c.Hi=o,c.R=a,c.Rr=!1,c}return(0,We.ZT)(i,t),i.prototype.br=function(){if(this.Rr)throw new Dn(rn.FAILED_PRECONDITION,"The client has already been terminated.")},i.prototype.Ni=function(e,o,a){var c=this;return this.br(),this.credentials.getToken().then(function(v){return c.Hi.Ni(e,o,a,v)}).catch(function(v){throw"FirebaseError"===v.name?(v.code===rn.UNAUTHENTICATED&&c.credentials.invalidateToken(),v):new Dn(rn.UNKNOWN,v.toString())})},i.prototype.$i=function(e,o,a){var c=this;return this.br(),this.credentials.getToken().then(function(v){return c.Hi.$i(e,o,a,v)}).catch(function(v){throw"FirebaseError"===v.name?(v.code===rn.UNAUTHENTICATED&&c.credentials.invalidateToken(),v):new Dn(rn.UNKNOWN,v.toString())})},i.prototype.terminate=function(){this.Rr=!0},i}(function(){}),gD=function(){function t(i,e){this.asyncQueue=i,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var i=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return i.Pr=null,i.Cr("Backend didn't respond within 10 seconds."),i.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(i){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+i.toString()),this.Dr("Offline")))},t.prototype.set=function(i){this.Fr(),this.vr=0,"Online"===i&&(this.Vr=!1),this.Dr(i)},t.prototype.Dr=function(i){i!==this.state&&(this.state=i,this.onlineStateHandler(i))},t.prototype.Cr=function(i){var e="Could not reach Cloud Firestore backend. "+i+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(xa(e),this.Vr=!1):Gn("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),qT=function(t,i,e,o,a){var c=this;this.localStore=t,this.datastore=i,this.asyncQueue=e,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=a,this.Lr.di(function(v){e.enqueueAndForget(function(){return(0,We.mG)(c,void 0,void 0,function(){return(0,We.Jh)(this,function(A){switch(A.label){case 0:return Ef(this)?(Gn("RemoteStore","Restarting streams for network reachability change."),[4,function(z){return(0,We.mG)(this,void 0,void 0,function(){var $;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return($=Jn(z)).Or.add(4),[4,Mp($)];case 1:return oe.sent(),$.Br.set("Unknown"),$.Or.delete(4),[4,c_($)];case 2:return oe.sent(),[2]}})})}(this)]):[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})})}),this.Br=new gD(e,o)};function c_(t){return(0,We.mG)(this,void 0,void 0,function(){var i,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:if(!Ef(t))return[3,4];i=0,e=t.Mr,o.label=1;case 1:return i<e.length?[4,(0,e[i])(!0)]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})})}function Mp(t){return(0,We.mG)(this,void 0,void 0,function(){var i,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:i=0,e=t.Mr,o.label=1;case 1:return i<e.length?[4,(0,e[i])(!1)]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})})}function Hy(t,i){var e=Jn(t);e.$r.has(i.targetId)||(e.$r.set(i.targetId,i),N0(e)?jy(e):qb(e).er()&&Fm(e,i))}function Gy(t,i){var e=Jn(t),o=qb(e);e.$r.delete(i),o.er()&&ZT(e,i),0===e.$r.size&&(o.er()?o.ir():Ef(e)&&e.Br.set("Unknown"))}function Fm(t,i){t.qr.U(i.targetId),qb(t).mr(i)}function ZT(t,i){t.qr.U(i),qb(t).yr(i)}function jy(t){t.qr=new ZA({getRemoteKeysForTarget:function(i){return t.remoteSyncer.getRemoteKeysForTarget(i)},lt:function(i){return t.$r.get(i)||null}}),qb(t).start(),t.Br.Sr()}function N0(t){return Ef(t)&&!qb(t).tr()&&t.$r.size>0}function Ef(t){return 0===Jn(t).Or.size}function dC(t){t.qr=void 0}function B0(t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){return t.$r.forEach(function(e,o){Fm(t,e)}),[2]})})}function _D(t,i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(e){return dC(t),N0(t)?(t.Br.Nr(i),jy(t)):t.Br.set("Unknown"),[2]})})}function pC(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:if(t.Br.set("Online"),!(i instanceof tT&&2===i.state&&i.cause))return[3,6];v.label=1;case 1:return v.trys.push([1,3,,5]),[4,function(A,z){return(0,We.mG)(this,void 0,void 0,function(){var $,oe,fe,ke;return(0,We.Jh)(this,function(Oe){switch(Oe.label){case 0:$=z.cause,oe=0,fe=z.targetIds,Oe.label=1;case 1:return oe<fe.length?A.$r.has(ke=fe[oe])?[4,A.remoteSyncer.rejectListen(ke,$)]:[3,3]:[3,5];case 2:Oe.sent(),A.$r.delete(ke),A.qr.removeTarget(ke),Oe.label=3;case 3:Oe.label=4;case 4:return oe++,[3,1];case 5:return[2]}})})}(t,i)];case 2:return v.sent(),[3,5];case 3:return o=v.sent(),Gn("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),o),[4,Yy(t,o)];case 4:return v.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof Tm?t.qr.X(i):i instanceof Ty?t.qr.rt(i):t.qr.et(i),e.isEqual(vr.min()))return[3,13];v.label=7;case 7:return v.trys.push([7,11,,13]),[4,VT(t.localStore)];case 8:return a=v.sent(),e.compareTo(a)>=0?[4,(A=t,z=e,$=A.qr.ut(z),$.targetChanges.forEach(function(oe,fe){if(oe.resumeToken.approximateByteSize()>0){var ke=A.$r.get(fe);ke&&A.$r.set(fe,ke.withResumeToken(oe.resumeToken,z))}}),$.targetMismatches.forEach(function(oe){var fe=A.$r.get(oe);if(fe){A.$r.set(oe,fe.withResumeToken(Kl.EMPTY_BYTE_STRING,fe.snapshotVersion)),ZT(A,oe);var ke=new x0(fe.target,oe,1,fe.sequenceNumber);Fm(A,ke)}}),A.remoteSyncer.applyRemoteEvent($))]:[3,10];case 9:v.sent(),v.label=10;case 10:return[3,13];case 11:return Gn("RemoteStore","Failed to raise snapshot:",c=v.sent()),[4,Yy(t,c)];case 12:return v.sent(),[3,13];case 13:return[2]}var A,z,$})})}function Yy(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o=this;return(0,We.Jh)(this,function(a){switch(a.label){case 0:if(!t_(i))throw i;return t.Or.add(1),[4,Mp(t)];case 1:return a.sent(),t.Br.set("Offline"),e||(e=function(){return VT(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,We.mG)(o,void 0,void 0,function(){return(0,We.Jh)(this,function(c){switch(c.label){case 0:return Gn("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return c.sent(),t.Or.delete(1),[4,c_(t)];case 2:return c.sent(),[2]}})})}),[2]}})})}function yD(t,i){return i().catch(function(e){return Yy(t,e,i)})}function jb(t){return(0,We.mG)(this,void 0,void 0,function(){var i,e,o,a,c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:i=Jn(t),e=Lm(i),o=i.kr.length>0?i.kr[i.kr.length-1].batchId:-1,v.label=1;case 1:if(!(Ef(A=i)&&A.kr.length<10))return[3,7];v.label=2;case 2:return v.trys.push([2,4,,6]),[4,A0(i.localStore,o)];case 3:return null===(a=v.sent())?(0===i.kr.length&&e.ir(),[3,7]):(o=a.batchId,function(A,z){A.kr.push(z);var $=Lm(A);$.er()&&$.pr&&$.Er(z.mutations)}(i,a),[3,6]);case 4:return c=v.sent(),[4,Yy(i,c)];case 5:return v.sent(),[3,6];case 6:return[3,1];case 7:return or(i)&&vD(i),[2]}var A})})}function or(t){return Ef(t)&&!Lm(t).tr()&&t.kr.length>0}function vD(t){Lm(t).start()}function Yb(t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){return Lm(t).Ar(),[2]})})}function bD(t){return(0,We.mG)(this,void 0,void 0,function(){var i,e,o;return(0,We.Jh)(this,function(c){for(i=Lm(t),e=0,o=t.kr;e<o.length;e++)i.Er(o[e].mutations);return[2]})})}function xD(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return o=t.kr.shift(),a=jP.from(o,i,e),[4,yD(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)})];case 1:return c.sent(),[4,jb(t)];case 2:return c.sent(),[2]}})})}function wD(t,i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(e){switch(e.label){case 0:return i&&Lm(t).pr?[4,function(o,a){return(0,We.mG)(this,void 0,void 0,function(){var c,v;return(0,We.Jh)(this,function(A){switch(A.label){case 0:return Z1(v=a.code)&&v!==rn.ABORTED?(c=o.kr.shift(),Lm(o).sr(),[4,yD(o,function(){return o.remoteSyncer.rejectFailedWrite(c.batchId,a)})]):[3,3];case 1:return A.sent(),[4,jb(o)];case 2:A.sent(),A.label=3;case 3:return[2]}})})}(t,i)]:[3,2];case 1:e.sent(),e.label=2;case 2:return or(t)&&vD(t),[2]}})})}function WT(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return e=Jn(t),i?(e.Or.delete(2),[4,c_(e)]):[3,2];case 1:return o.sent(),[3,5];case 2:return i?[3,4]:(e.Or.add(2),[4,Mp(e)]);case 3:o.sent(),e.Br.set("Unknown"),o.label=4;case 4:o.label=5;case 5:return[2]}})})}function qb(t){var e,o,a,c,i=this;return t.Ur||(t.Ur=(e=t.datastore,o=t.asyncQueue,a={Ii:B0.bind(null,t),Ri:_D.bind(null,t),_r:pC.bind(null,t)},(c=Jn(e)).br(),new Gb(o,c.Hi,c.credentials,c.R,a)),t.Mr.push(function(e){return(0,We.mG)(i,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return e?(t.Ur.sr(),N0(t)?jy(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:o.sent(),dC(t),o.label=3;case 3:return[2]}})})})),t.Ur}function Lm(t){var e,o,a,c,i=this;return t.Kr||(t.Kr=(e=t.datastore,o=t.asyncQueue,a={Ii:Yb.bind(null,t),Ri:wD.bind(null,t),Ir:bD.bind(null,t),Tr:xD.bind(null,t)},(c=Jn(e)).br(),new mD(o,c.Hi,c.credentials,c.R,a)),t.Mr.push(function(e){return(0,We.mG)(i,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return e?(t.Kr.sr(),[4,jb(t)]):[3,2];case 1:return o.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:o.sent(),t.kr.length>0&&(Gn("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),o.label=4;case 4:return[2]}})})})),t.Kr}var rc=function(){function t(i,e,o,a,c){this.asyncQueue=i,this.timerId=e,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new ic,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(v){})}return t.createAndSchedule=function(i,e,o,a,c){var v=new t(i,e,Date.now()+o,a,c);return v.start(o),v},t.prototype.start=function(i){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},i)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(i){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Dn(rn.CANCELLED,"Operation cancelled"+(i?": "+i:""))))},t.prototype.handleDelayElapsed=function(){var i=this;this.asyncQueue.enqueueAndForget(function(){return null!==i.timerHandle?(i.clearTimeout(),i.op().then(function(e){return i.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function qy(t,i){if(xa("AsyncQueue",i+": "+t),t_(t))return new Dn(rn.UNAVAILABLE,i+": "+t);throw t}var $T=function(){function t(i){this.comparator=i?function(e,o){return i(e,o)||ki.comparator(e.key,o.key)}:function(e,o){return ki.comparator(e.key,o.key)},this.keyedMap=Qg(),this.sortedSet=new tc(this.comparator)}return t.emptySet=function(i){return new t(i.comparator)},t.prototype.has=function(i){return null!=this.keyedMap.get(i)},t.prototype.get=function(i){return this.keyedMap.get(i)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(i){var e=this.keyedMap.get(i);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(i){this.sortedSet.inorderTraversal(function(e,o){return i(e),!1})},t.prototype.add=function(i){var e=this.delete(i.key);return e.copy(e.keyedMap.insert(i.key,i),e.sortedSet.insert(i,null))},t.prototype.delete=function(i){var e=this.get(i);return e?this.copy(this.keyedMap.remove(i),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(i){if(!(i instanceof t)||this.size!==i.size)return!1;for(var e=this.sortedSet.getIterator(),o=i.sortedSet.getIterator();e.hasNext();){var a=e.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0},t.prototype.toString=function(){var i=[];return this.forEach(function(e){i.push(e.toString())}),0===i.length?"DocumentSet ()":"DocumentSet (\n  "+i.join("  \n")+"\n)"},t.prototype.copy=function(i,e){var o=new t;return o.comparator=this.comparator,o.keyedMap=i,o.sortedSet=e,o},t}(),z0=function(){function t(){this.Qr=new tc(ki.comparator)}return t.prototype.track=function(i){var e=i.doc.key,o=this.Qr.get(e);o?0!==i.type&&3===o.type?this.Qr=this.Qr.insert(e,i):3===i.type&&1!==o.type?this.Qr=this.Qr.insert(e,{type:o.type,doc:i.doc}):2===i.type&&2===o.type?this.Qr=this.Qr.insert(e,{type:2,doc:i.doc}):2===i.type&&0===o.type?this.Qr=this.Qr.insert(e,{type:0,doc:i.doc}):1===i.type&&0===o.type?this.Qr=this.Qr.remove(e):1===i.type&&2===o.type?this.Qr=this.Qr.insert(e,{type:1,doc:o.doc}):0===i.type&&1===o.type?this.Qr=this.Qr.insert(e,{type:2,doc:i.doc}):vi():this.Qr=this.Qr.insert(e,i)},t.prototype.jr=function(){var i=[];return this.Qr.inorderTraversal(function(e,o){i.push(o)}),i},t}(),V0=function(){function t(i,e,o,a,c,v,A,z){this.query=i,this.docs=e,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=v,this.syncStateChanged=A,this.excludesMetadataChanges=z}return t.fromInitialDocuments=function(i,e,o,a){var c=[];return e.forEach(function(v){c.push({type:0,doc:v})}),new t(i,e,$T.emptySet(e),c,o,a,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(i){if(!(this.fromCache===i.fromCache&&this.syncStateChanged===i.syncStateChanged&&this.mutatedKeys.isEqual(i.mutatedKeys)&&Mb(this.query,i.query)&&this.docs.isEqual(i.docs)&&this.oldDocs.isEqual(i.oldDocs)))return!1;var e=this.docChanges,o=i.docChanges;if(e.length!==o.length)return!1;for(var a=0;a<e.length;a++)if(e[a].type!==o[a].type||!e[a].doc.isEqual(o[a].doc))return!1;return!0},t}(),CD=function(){this.Wr=void 0,this.listeners=[]},SD=function(){this.queries=new Tp(function(t){return HE(t)},Mb),this.onlineState="Unknown",this.Gr=new Set};function fC(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,c,v,A,z;return(0,We.Jh)(this,function($){switch($.label){case 0:if(e=Jn(t),a=!1,(c=e.queries.get(o=i.query))||(a=!0,c=new CD),!a)return[3,4];$.label=1;case 1:return $.trys.push([1,3,,4]),v=c,[4,e.onListen(o)];case 2:return v.Wr=$.sent(),[3,4];case 3:return A=$.sent(),z=qy(A,"Initialization of query '"+V1(i.query)+"' failed"),[2,void i.onError(z)];case 4:return e.queries.set(o,c),c.listeners.push(i),i.zr(e.onlineState),c.Wr&&i.Hr(c.Wr)&&_C(e),[2]}})})}function mC(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,c,v;return(0,We.Jh)(this,function(A){return e=Jn(t),a=!1,(c=e.queries.get(o=i.query))&&(v=c.listeners.indexOf(i))>=0&&(c.listeners.splice(v,1),a=0===c.listeners.length),a?[2,(e.queries.delete(o),e.onUnlisten(o))]:[2]})})}function ED(t,i){for(var e=Jn(t),o=!1,a=0,c=i;a<c.length;a++){var v=c[a],z=e.queries.get(v.query);if(z){for(var $=0,oe=z.listeners;$<oe.length;$++)oe[$].Hr(v)&&(o=!0);z.Wr=v}}o&&_C(e)}function gC(t,i,e){var o=Jn(t),a=o.queries.get(i);if(a)for(var c=0,v=a.listeners;c<v.length;c++)v[c].onError(e);o.queries.delete(i)}function _C(t){t.Gr.forEach(function(i){i.next()})}var yC=function(){function t(i,e,o){this.query=i,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=o||{}}return t.prototype.Hr=function(i){if(!this.options.includeMetadataChanges){for(var e=[],o=0,a=i.docChanges;o<a.length;o++){var c=a[o];3!==c.type&&e.push(c)}i=new V0(i.query,i.docs,i.oldDocs,e,i.mutatedKeys,i.fromCache,i.syncStateChanged,!0)}var v=!1;return this.Yr?this.Zr(i)&&(this.Jr.next(i),v=!0):this.eo(i,this.onlineState)&&(this.no(i),v=!0),this.Xr=i,v},t.prototype.onError=function(i){this.Jr.error(i)},t.prototype.zr=function(i){this.onlineState=i;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,i)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(i,e){return!i.fromCache||!(this.options.so&&"Offline"!==e||i.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(i){return i.docChanges.length>0||!!(i.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==i.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(i){i=V0.fromInitialDocuments(i.query,i.docs,i.mutatedKeys,i.fromCache),this.Yr=!0,this.Jr.next(i)},t}(),XT=function(){function t(i,e){this.payload=i,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),U0=function(){function t(i){this.R=i}return t.prototype.qn=function(i){return Ju(this.R,i)},t.prototype.Un=function(i){return i.metadata.exists?cT(this.R,i.document,!1):Pl.newNoDocument(this.qn(i.metadata.name),this.Kn(i.metadata.readTime))},t.prototype.Kn=function(i){return Rl(i)},t}();!function(){function t(i,e,o){this.ro=i,this.localStore=e,this.R=o,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i)}t.prototype.oo=function(i){this.progress.bytesLoaded+=i.byteLength;var e=this.progress.documentsLoaded;return i.payload.namedQuery?this.queries.push(i.payload.namedQuery):i.payload.documentMetadata?(this.documents.push({metadata:i.payload.documentMetadata}),i.payload.documentMetadata.exists||++e):i.payload.document&&(this.documents[this.documents.length-1].document=i.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(i){for(var e=new Map,o=new U0(this.R),a=0,c=i;a<c.length;a++){var v=c[a];if(v.metadata.queries)for(var A=o.qn(v.metadata.name),z=0,$=v.metadata.queries;z<$.length;z++){var oe=$[z],fe=(e.get(oe)||lo()).add(A);e.set(oe,fe)}}return e},t.prototype.complete=function(){return(0,We.mG)(this,void 0,void 0,function(){var i,e,o,a,c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return[4,GT(this.localStore,new U0(this.R),this.documents,this.ro.id)];case 1:i=v.sent(),e=this.co(this.documents),o=0,a=this.queries,v.label=2;case 2:return o<a.length?[4,uD(this.localStore,c=a[o],e.get(c.name))]:[3,5];case 3:v.sent(),v.label=4;case 4:return o++,[3,2];case 5:return[2,(this.progress.taskState="Success",new aD(Object.assign({},this.progress),i))]}})})}}();var QT=function(t){this.key=t},JT=function(t){this.key=t},KT=function(){function t(i,e){this.query=i,this.uo=e,this.ao=null,this.current=!1,this.ho=lo(),this.mutatedKeys=lo(),this.lo=GE(i),this.fo=new $T(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(i,e){var o=this,a=e?e.mo:new z0,c=e?e.fo:this.fo,v=e?e.mutatedKeys:this.mutatedKeys,A=c,z=!1,$=Tb(this.query)&&c.size===this.query.limit?c.last():null,oe=d0(this.query)&&c.size===this.query.limit?c.first():null;if(i.inorderTraversal(function(ke,Oe){var He=c.get(ke),ct=kb(o.query,Oe)?Oe:null,At=!!He&&o.mutatedKeys.has(He.key),Qt=!!ct&&(ct.hasLocalMutations||o.mutatedKeys.has(ct.key)&&ct.hasCommittedMutations),Sn=!1;He&&ct?He.data.isEqual(ct.data)?At!==Qt&&(a.track({type:3,doc:ct}),Sn=!0):o.yo(He,ct)||(a.track({type:2,doc:ct}),Sn=!0,($&&o.lo(ct,$)>0||oe&&o.lo(ct,oe)<0)&&(z=!0)):!He&&ct?(a.track({type:0,doc:ct}),Sn=!0):He&&!ct&&(a.track({type:1,doc:He}),Sn=!0,($||oe)&&(z=!0)),Sn&&(ct?(A=A.add(ct),v=Qt?v.add(ke):v.delete(ke)):(A=A.delete(ke),v=v.delete(ke)))}),Tb(this.query)||d0(this.query))for(;A.size>this.query.limit;){var fe=Tb(this.query)?A.last():A.first();A=A.delete(fe.key),v=v.delete(fe.key),a.track({type:1,doc:fe})}return{fo:A,mo:a,Nn:z,mutatedKeys:v}},t.prototype.yo=function(i,e){return i.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(i,e,o){var a=this,c=this.fo;this.fo=i.fo,this.mutatedKeys=i.mutatedKeys;var v=i.mo.jr();v.sort(function(oe,fe){return Oe=fe.type,(He=function(ct){switch(ct){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vi()}})(oe.type)-He(Oe)||a.lo(oe.doc,fe.doc);var Oe,He}),this.po(o);var A=e?this.Eo():[],z=0===this.ho.size&&this.current?1:0,$=z!==this.ao;return this.ao=z,0!==v.length||$?{snapshot:new V0(this.query,i.fo,c,v,i.mutatedKeys,0===z,$,!1),To:A}:{To:A}},t.prototype.zr=function(i){return this.current&&"Offline"===i?(this.current=!1,this.applyChanges({fo:this.fo,mo:new z0,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(i){return!this.uo.has(i)&&!!this.fo.has(i)&&!this.fo.get(i).hasLocalMutations},t.prototype.po=function(i){var e=this;i&&(i.addedDocuments.forEach(function(o){return e.uo=e.uo.add(o)}),i.modifiedDocuments.forEach(function(o){}),i.removedDocuments.forEach(function(o){return e.uo=e.uo.delete(o)}),this.current=i.current)},t.prototype.Eo=function(){var i=this;if(!this.current)return[];var e=this.ho;this.ho=lo(),this.fo.forEach(function(a){i.Io(a.key)&&(i.ho=i.ho.add(a.key))});var o=[];return e.forEach(function(a){i.ho.has(a)||o.push(new JT(a))}),this.ho.forEach(function(a){e.has(a)||o.push(new QT(a))}),o},t.prototype.Ao=function(i){this.uo=i.Bn,this.ho=lo();var e=this._o(i.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return V0.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),kD=function(t,i,e){this.query=t,this.targetId=i,this.view=e},AD=function(t){this.key=t,this.bo=!1},DD=function(){function t(i,e,o,a,c,v){this.localStore=i,this.remoteStore=e,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=v,this.vo={},this.Po=new Tp(function(A){return HE(A)},Mb),this.Vo=new Map,this.So=new Set,this.Do=new tc(ki.comparator),this.Co=new Map,this.No=new I0,this.xo={},this.Fo=new Map,this.ko=S0.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Zb(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,a,c,v,A;return(0,We.Jh)(this,function(z){switch(z.label){case 0:return e=sl(t),(c=e.Po.get(i))?(e.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ro(),[3,4]):[3,1];case 1:return[4,By(e.localStore,jh(i))];case 2:return v=z.sent(),A=e.sharedClientState.addLocalQueryTarget(v.targetId),[4,vC(e,i,v.targetId,"current"===A)];case 3:a=z.sent(),e.isPrimaryClient&&Hy(e.remoteStore,v),z.label=4;case 4:return[2,a]}})})}function vC(t,i,e,o){return(0,We.mG)(this,void 0,void 0,function(){var a,c,v,A,z,$;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return t.Oo=function(fe,ke,Oe){return function(He,ct,At,Qt){return(0,We.mG)(this,void 0,void 0,function(){var Sn,xn,Qn;return(0,We.Jh)(this,function(ii){switch(ii.label){case 0:return(Sn=ct.view._o(At)).Nn?[4,zb(He.localStore,ct.query,!1).then(function(er){return ct.view._o(er.documents,Sn)})]:[3,2];case 1:Sn=ii.sent(),ii.label=2;case 2:return xn=Qt&&Qt.targetChanges.get(ct.targetId),Qn=ct.view.applyChanges(Sn,He.isPrimaryClient,xn),[2,(wC(He,ct.targetId,Qn.To),Qn.snapshot)]}})})}(t,fe,ke,Oe)},[4,zb(t.localStore,i,!0)];case 1:return a=oe.sent(),c=new KT(i,a.Bn),v=c._o(a.documents),A=$1.createSynthesizedTargetChangeForCurrentChange(e,o&&"Offline"!==t.onlineState),z=c.applyChanges(v,t.isPrimaryClient,A),wC(t,e,z.To),$=new kD(i,e,c),[2,(t.Po.set(i,$),t.Vo.has(e)?t.Vo.get(e).push(i):t.Vo.set(e,[i]),z.snapshot)]}})})}function ID(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return e=Jn(t),o=e.Po.get(i),(a=e.Vo.get(o.targetId)).length>1?[2,(e.Vo.set(o.targetId,a.filter(function(v){return!Mb(v,i)})),void e.Po.delete(i))]:e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(o.targetId),e.sharedClientState.isActiveQueryTarget(o.targetId)?[3,2]:[4,zy(e.localStore,o.targetId,!1).then(function(){e.sharedClientState.clearQueryState(o.targetId),Gy(e.remoteStore,o.targetId),u_(e,o.targetId)}).catch(o_)]):[3,3];case 1:c.sent(),c.label=2;case 2:return[3,5];case 3:return u_(e,o.targetId),[4,zy(e.localStore,o.targetId,!0)];case 4:c.sent(),c.label=5;case 5:return[2]}})})}function eM(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,c,v;return(0,We.Jh)(this,function(A){switch(A.label){case 0:o=H0(t),A.label=1;case 1:return A.trys.push([1,5,,6]),[4,(z=o.localStore,$=i,fe=Jn(z),ke=Mc.now(),Oe=$.reduce(function(He,ct){return He.add(ct.key)},lo()),fe.persistence.runTransaction("Locally write mutations","readwrite",function(He){return fe.Mn.pn(He,Oe).next(function(ct){oe=ct;for(var At=[],Qt=0,Sn=$;Qt<Sn.length;Qt++){var xn=Sn[Qt],Qn=XE(xn,oe.get(xn.key));null!=Qn&&At.push(new Sm(xn.key,Qn,OE(Qn.value.mapValue),ec.exists(!0)))}return fe._n.addMutationBatch(He,ke,At,$)})}).then(function(He){return He.applyToLocalDocumentSet(oe),{batchId:He.batchId,changes:oe}}))];case 2:return a=A.sent(),o.sharedClientState.addPendingMutation(a.batchId),function(z,$,oe){var fe=z.xo[z.currentUser.toKey()];fe||(fe=new tc(kr)),fe=fe.insert($,oe),z.xo[z.currentUser.toKey()]=fe}(o,a.batchId,e),[4,Nm(o,a.changes)];case 3:return A.sent(),[4,jb(o.remoteStore)];case 4:return A.sent(),[3,6];case 5:return c=A.sent(),v=qy(c,"Failed to persist write"),e.reject(v),[3,6];case 6:return[2]}var z,$,oe,fe,ke,Oe})})}function Zy(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o;return(0,We.Jh)(this,function(a){switch(a.label){case 0:e=Jn(t),a.label=1;case 1:return a.trys.push([1,4,,6]),[4,ZP(e.localStore,i)];case 2:return o=a.sent(),i.targetChanges.forEach(function(c,v){var A=e.Co.get(v);A&&(Zi(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?A.bo=!0:c.modifiedDocuments.size>0?Zi(A.bo):c.removedDocuments.size>0&&(Zi(A.bo),A.bo=!1))}),[4,Nm(e,o,i)];case 3:return a.sent(),[3,6];case 4:return[4,o_(a.sent())];case 5:return a.sent(),[3,6];case 6:return[2]}})})}function PD(t,i,e){var o=Jn(t);if(o.isPrimaryClient&&0===e||!o.isPrimaryClient&&1===e){var a=[];o.Po.forEach(function(c,v){var A=v.view.zr(i);A.snapshot&&a.push(A.snapshot)}),function(c,v){var A=Jn(c);A.onlineState=v;var z=!1;A.queries.forEach(function($,oe){for(var fe=0,ke=oe.listeners;fe<ke.length;fe++)ke[fe].zr(v)&&(z=!0)}),z&&_C(A)}(o.eventManager,i),a.length&&o.vo._r(a),o.onlineState=i,o.isPrimaryClient&&o.sharedClientState.setOnlineState(i)}}function tM(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,c,v,A,z;return(0,We.Jh)(this,function($){switch($.label){case 0:return(o=Jn(t)).sharedClientState.updateQueryState(i,"rejected",e),a=o.Co.get(i),(c=a&&a.key)?(v=(v=new tc(ki.comparator)).insert(c,Pl.newNoDocument(c,vr.min())),A=lo().add(c),z=new _0(vr.min(),new Map,new Ca(kr),v,A),[4,Zy(o,z)]):[3,2];case 1:return $.sent(),o.Do=o.Do.remove(c),o.Co.delete(i),iM(o),[3,4];case 2:return[4,zy(o.localStore,i,!1).then(function(){return u_(o,i,e)}).catch(o_)];case 3:$.sent(),$.label=4;case 4:return[2]}})})}function RD(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:e=Jn(t),o=i.batch.batchId,c.label=1;case 1:return c.trys.push([1,4,,6]),[4,zT(e.localStore,i)];case 2:return a=c.sent(),xC(e,o,null),bC(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),[4,Nm(e,a)];case 3:return c.sent(),[3,6];case 4:return[4,o_(c.sent())];case 5:return c.sent(),[3,6];case 6:return[2]}})})}function OD(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:o=Jn(t),c.label=1;case 1:return c.trys.push([1,4,,6]),[4,(v=o.localStore,A=i,z=Jn(v),z.persistence.runTransaction("Reject batch","readwrite-primary",function($){var oe;return z._n.lookupMutationBatch($,A).next(function(fe){return Zi(null!==fe),oe=fe.keys(),z._n.removeMutationBatch($,fe)}).next(function(){return z._n.performConsistencyCheck($)}).next(function(){return z.Mn.pn($,oe)})}))];case 2:return a=c.sent(),xC(o,i,e),bC(o,i),o.sharedClientState.updateMutationState(i,"rejected",e),[4,Nm(o,a)];case 3:return c.sent(),[3,6];case 4:return[4,o_(c.sent())];case 5:return c.sent(),[3,6];case 6:return[2]}var v,A,z})})}function FD(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,c,v;return(0,We.Jh)(this,function(A){switch(A.label){case 0:Ef((e=Jn(t)).remoteStore)||Gn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,(z=e.localStore,$=Jn(z),$.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(oe){return $._n.getHighestUnacknowledgedBatchId(oe)}))];case 2:return-1===(o=A.sent())?[2,void i.resolve()]:((a=e.Fo.get(o)||[]).push(i),e.Fo.set(o,a),[3,4]);case 3:return c=A.sent(),v=qy(c,"Initialization of waitForPendingWrites() operation failed"),i.reject(v),[3,4];case 4:return[2]}var z,$})})}function bC(t,i){(t.Fo.get(i)||[]).forEach(function(e){e.resolve()}),t.Fo.delete(i)}function xC(t,i,e){var o=Jn(t),a=o.xo[o.currentUser.toKey()];if(a){var c=a.get(i);c&&(e?c.reject(e):c.resolve(),a=a.remove(i)),o.xo[o.currentUser.toKey()]=a}}function u_(t,i,e){void 0===e&&(e=null),t.sharedClientState.removeLocalQueryTarget(i);for(var o=0,a=t.Vo.get(i);o<a.length;o++){var c=a[o];t.Po.delete(c),e&&t.vo.Mo(c,e)}t.Vo.delete(i),t.isPrimaryClient&&t.No.Zn(i).forEach(function(v){t.No.containsKey(v)||nM(t,v)})}function nM(t,i){t.So.delete(i.path.canonicalString());var e=t.Do.get(i);null!==e&&(Gy(t.remoteStore,e),t.Do=t.Do.remove(i),t.Co.delete(e),iM(t))}function wC(t,i,e){for(var o=0,a=e;o<a.length;o++){var c=a[o];c instanceof QT?(t.No.addReference(c.key,i),XP(t,c)):c instanceof JT?(Gn("SyncEngine","Document no longer in limbo: "+c.key),t.No.removeReference(c.key,i),t.No.containsKey(c.key)||nM(t,c.key)):vi()}}function XP(t,i){var e=i.key,o=e.path.canonicalString();t.Do.get(e)||t.So.has(o)||(Gn("SyncEngine","New document in limbo: "+e),t.So.add(o),iM(t))}function iM(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var i=t.So.values().next().value;t.So.delete(i);var e=new ki(to.fromString(i)),o=t.ko.next();t.Co.set(o,new AD(e)),t.Do=t.Do.insert(e,o),Hy(t.remoteStore,new x0(jh(Wg(e.path)),o,2,uu.o))}}function Nm(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,c,v;return(0,We.Jh)(this,function(A){switch(A.label){case 0:return o=Jn(t),a=[],c=[],v=[],o.Po.isEmpty()?[3,3]:(o.Po.forEach(function(z,$){v.push(o.Oo($,i,e).then(function(oe){if(oe){o.isPrimaryClient&&o.sharedClientState.updateQueryState($.targetId,oe.fromCache?"not-current":"current"),a.push(oe);var fe=lD.Pn($.targetId,oe);c.push(fe)}}))}),[4,Promise.all(v)]);case 1:return A.sent(),o.vo._r(a),[4,function(z,$){return(0,We.mG)(this,void 0,void 0,function(){var oe,fe,ke,Oe,He,ct,At,Sn;return(0,We.Jh)(this,function(xn){switch(xn.label){case 0:oe=Jn(z),xn.label=1;case 1:return xn.trys.push([1,3,,4]),[4,oe.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Qn){return Ln.forEach($,function(ii){return Ln.forEach(ii.bn,function(er){return oe.persistence.referenceDelegate.addReference(Qn,ii.targetId,er)}).next(function(){return Ln.forEach(ii.vn,function(er){return oe.persistence.referenceDelegate.removeReference(Qn,ii.targetId,er)})})})})];case 2:return xn.sent(),[3,4];case 3:if(!t_(fe=xn.sent()))throw fe;return Gn("LocalStore","Failed to update sequence numbers: "+fe),[3,4];case 4:for(ke=0,Oe=$;ke<Oe.length;ke++)ct=(He=Oe[ke]).targetId,He.fromCache||(At=oe.Fn.get(ct),Sn=At.withLastLimboFreeSnapshotVersion(At.snapshotVersion),oe.Fn=oe.Fn.insert(ct,Sn));return[2]}})})}(o.localStore,c)];case 2:A.sent(),A.label=3;case 3:return[2]}})})}function CC(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o;return(0,We.Jh)(this,function(a){switch(a.label){case 0:return(e=Jn(t)).currentUser.isEqual(i)?[3,3]:(Gn("SyncEngine","User change. New user:",i.toKey()),[4,Pm(e.localStore,i)]);case 1:return o=a.sent(),e.currentUser=i,(c=e).Fo.forEach(function(A){A.forEach(function(z){z.reject(new Dn(rn.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Fo.clear(),e.sharedClientState.handleUserChange(i,o.removedBatchIds,o.addedBatchIds),[4,Nm(e,o.Ln)];case 2:a.sent(),a.label=3;case 3:return[2]}var c})})}function LD(t,i){var e=Jn(t),o=e.Co.get(i);if(o&&o.bo)return lo().add(o.key);var a=lo(),c=e.Vo.get(i);if(!c)return a;for(var v=0,A=c;v<A.length;v++){var $=e.Po.get(A[v]);a=a.unionWith($.view.wo)}return a}function ND(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return[4,zb((e=Jn(t)).localStore,i.query,!0)];case 1:return o=c.sent(),a=i.view.Ao(o),[2,(e.isPrimaryClient&&wC(e,i.targetId,a.To),a)]}})})}function BD(t){return(0,We.mG)(this,void 0,void 0,function(){var i;return(0,We.Jh)(this,function(e){return[2,D0((i=Jn(t)).localStore).then(function(o){return Nm(i,o)})]})})}function zD(t,i,e,o){return(0,We.mG)(this,void 0,void 0,function(){var a,c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return[4,(A=(a=Jn(t)).localStore,z=i,$=Jn(A),oe=Jn($._n),$.persistence.runTransaction("Lookup mutation documents","readonly",function(fe){return oe.jt(fe,z).next(function(ke){return ke?$.Mn.pn(fe,ke):Ln.resolve(null)})}))];case 1:return null===(c=v.sent())?[3,6]:"pending"!==e?[3,3]:[4,jb(a.remoteStore)];case 2:return v.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(xC(a,i,o||null),bC(a,i),function(A,z){Jn(Jn(A)._n).Gt(z)}(a.localStore,i)):vi(),v.label=4;case 4:return[4,Nm(a,c)];case 5:return v.sent(),[3,7];case 6:Gn("SyncEngine","Cannot apply mutation batch with id: "+i),v.label=7;case 7:return[2]}var A,z,$,oe})})}function VD(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a,c,v,z,$;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return sl(e=Jn(t)),H0(e),!0!==i||!0===e.$o?[3,3]:(o=e.sharedClientState.getAllActiveQueryTargets(),[4,rM(e,o.toArray())]);case 1:return a=oe.sent(),e.$o=!0,[4,WT(e.remoteStore,!0)];case 2:for(oe.sent(),c=0,v=a;c<v.length;c++)Hy(e.remoteStore,v[c]);return[3,7];case 3:return!1!==i||!1===e.$o?[3,7]:(z=[],$=Promise.resolve(),e.Vo.forEach(function(fe,ke){e.sharedClientState.isLocalQueryTarget(ke)?z.push(ke):$=$.then(function(){return u_(e,ke),zy(e.localStore,ke,!0)}),Gy(e.remoteStore,ke)}),[4,$]);case 4:return oe.sent(),[4,rM(e,z)];case 5:return oe.sent(),(ke=Jn(e)).Co.forEach(function(Oe,He){Gy(ke.remoteStore,He)}),ke.No.ts(),ke.Co=new Map,ke.Do=new tc(ki.comparator),e.$o=!1,[4,WT(e.remoteStore,!1)];case 6:oe.sent(),oe.label=7;case 7:return[2]}var ke})})}function rM(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,c,v,A,z,$,oe,fe,ke,He,ct,At;return(0,We.Jh)(this,function(Qt){switch(Qt.label){case 0:o=Jn(t),a=[],c=[],v=0,A=i,Qt.label=1;case 1:return v<A.length?($=void 0,(oe=o.Vo.get(z=A[v]))&&0!==oe.length?[4,By(o.localStore,jh(oe[0]))]:[3,7]):[3,13];case 2:$=Qt.sent(),fe=0,ke=oe,Qt.label=3;case 3:return fe<ke.length?(He=o.Po.get(ke[fe]),[4,ND(o,He)]):[3,6];case 4:(ct=Qt.sent()).snapshot&&c.push(ct.snapshot),Qt.label=5;case 5:return fe++,[3,3];case 6:return[3,11];case 7:return[4,uC(o.localStore,z)];case 8:return At=Qt.sent(),[4,By(o.localStore,At)];case 9:return $=Qt.sent(),[4,vC(o,SC(At),z,!1)];case 10:Qt.sent(),Qt.label=11;case 11:a.push($),Qt.label=12;case 12:return v++,[3,1];case 13:return[2,(o.vo._r(c),a)]}})})}function SC(t){return L1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function EC(t){var i=Jn(t);return Jn(Jn(i.localStore).persistence).fn()}function UD(t,i,e,o){return(0,We.mG)(this,void 0,void 0,function(){var a,c,v;return(0,We.Jh)(this,function(A){switch(A.label){case 0:return(a=Jn(t)).$o?(Gn("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!a.Vo.has(i))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,D0(a.localStore)];case 3:return c=A.sent(),v=_0.createSynthesizedRemoteEventForCurrentChange(i,"current"===e),[4,Nm(a,c,v)];case 4:return A.sent(),[3,8];case 5:return[4,zy(a.localStore,i,!0)];case 6:return A.sent(),u_(a,i,o),[3,8];case 7:vi(),A.label=8;case 8:return[2]}})})}function Wy(t,i,e){return(0,We.mG)(this,void 0,void 0,function(){var o,a,c,v,A,z,$,oe,fe;return(0,We.Jh)(this,function(Oe){switch(Oe.label){case 0:if(!(o=sl(t)).$o)return[3,10];a=0,c=i,Oe.label=1;case 1:return a<c.length?o.Vo.has(v=c[a])?(Gn("SyncEngine","Adding an already active target "+v),[3,5]):[4,uC(o.localStore,v)]:[3,6];case 2:return A=Oe.sent(),[4,By(o.localStore,A)];case 3:return z=Oe.sent(),[4,vC(o,SC(A),z.targetId,!1)];case 4:Oe.sent(),Hy(o.remoteStore,z),Oe.label=5;case 5:return a++,[3,1];case 6:$=function(He){return(0,We.Jh)(this,function(ct){switch(ct.label){case 0:return o.Vo.has(He)?[4,zy(o.localStore,He,!1).then(function(){Gy(o.remoteStore,He),u_(o,He)}).catch(o_)]:[3,2];case 1:ct.sent(),ct.label=2;case 2:return[2]}})},oe=0,fe=e,Oe.label=7;case 7:return oe<fe.length?[5,$(fe[oe])]:[3,10];case 8:Oe.sent(),Oe.label=9;case 9:return oe++,[3,7];case 10:return[2]}})})}function sl(t){var i=Jn(t);return i.remoteStore.remoteSyncer.applyRemoteEvent=Zy.bind(null,i),i.remoteStore.remoteSyncer.getRemoteKeysForTarget=LD.bind(null,i),i.remoteStore.remoteSyncer.rejectListen=tM.bind(null,i),i.vo._r=ED.bind(null,i.eventManager),i.vo.Mo=gC.bind(null,i.eventManager),i}function H0(t){var i=Jn(t);return i.remoteStore.remoteSyncer.applySuccessfulWrite=RD.bind(null,i),i.remoteStore.remoteSyncer.rejectFailedWrite=OD.bind(null,i),i}var G0=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(i){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(e){switch(e.label){case 0:return this.R=Uy(i.databaseInfo.databaseId),this.sharedClientState=this.Bo(i),this.persistence=this.qo(i),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(i),this.localStore=this.Ko(i),[2]}})})},t.prototype.Uo=function(i){return null},t.prototype.Ko=function(i){return Bb(this.persistence,new BT,i.initialUser,this.R)},t.prototype.qo=function(i){return new Vb(Rm.bs,this.R)},t.prototype.Bo=function(i){return new pD},t.prototype.terminate=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){switch(i.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return i.sent(),[4,this.persistence.shutdown()];case 2:return i.sent(),[2]}})})},t}(),oM=function(t){function i(e,o,a){var c=this;return(c=t.call(this)||this).Qo=e,c.cacheSizeBytes=o,c.forceOwnership=a,c.synchronizeTabs=!1,c}return(0,We.ZT)(i,t),i.prototype.initialize=function(e){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),[4,HT(this.localStore)];case 2:return o.sent(),[4,this.Qo.initialize(this,e)];case 3:return o.sent(),[4,H0(this.Qo.syncEngine)];case 4:return o.sent(),[4,jb(this.Qo.remoteStore)];case 5:return o.sent(),[2]}})})},i.prototype.Ko=function(e){return Bb(this.persistence,new BT,e.initialUser,this.R)},i.prototype.Uo=function(e){return new iD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)},i.prototype.qo=function(e){var o=NT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Zh.withCacheSize(this.cacheSizeBytes):Zh.DEFAULT;return new sD(this.synchronizeTabs,o,e.clientId,a,e.asyncQueue,hC(),L0(),this.R,this.sharedClientState,!!this.forceOwnership)},i.prototype.Bo=function(e){return new pD},i}(G0),sM=function(t){function i(e,o){var a=this;return(a=t.call(this,e,o,!1)||this).Qo=e,a.cacheSizeBytes=o,a.synchronizeTabs=!0,a}return(0,We.ZT)(i,t),i.prototype.initialize=function(e){return(0,We.mG)(this,void 0,void 0,function(){var o,a=this;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return c.sent(),o=this.Qo.syncEngine,this.sharedClientState instanceof F0?(this.sharedClientState.syncEngine={ui:zD.bind(null,o),ai:UD.bind(null,o),hi:Wy.bind(null,o),fn:EC.bind(null,o),ci:BD.bind(null,o)},[4,this.sharedClientState.start()]):[3,3];case 2:c.sent(),c.label=3;case 3:return[4,this.persistence.He(function(v){return(0,We.mG)(a,void 0,void 0,function(){return(0,We.Jh)(this,function(A){switch(A.label){case 0:return[4,VD(this.Qo.syncEngine,v)];case 1:return A.sent(),this.gcScheduler&&(v&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):v||this.gcScheduler.stop()),[2]}})})})];case 4:return c.sent(),[2]}})})},i.prototype.Bo=function(e){var o=hC();if(!F0.yt(o))throw new Dn(rn.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var a=NT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new F0(o,e.asyncQueue,a,e.clientId,e.initialUser)},i}(oM),j0=function(){function t(){}return t.prototype.initialize=function(i,e){return(0,We.mG)(this,void 0,void 0,function(){var o=this;return(0,We.Jh)(this,function(a){switch(a.label){case 0:return this.localStore?[3,2]:(this.localStore=i.localStore,this.sharedClientState=i.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!i.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(c){return PD(o.syncEngine,c,1)},this.remoteStore.remoteSyncer.handleCredentialChange=CC.bind(null,this.syncEngine),[4,WT(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(i){return new SD},t.prototype.createDatastore=function(i){var o=Uy(i.databaseInfo.databaseId),a=new Fd(i.databaseInfo);return new l_(i.credentials,a,o)},t.prototype.createRemoteStore=function(i){var e,o,a,c,v,A=this;return e=this.localStore,o=this.datastore,a=i.asyncQueue,c=function(z){return PD(A.syncEngine,z,0)},v=YT.yt()?new YT:new fD,new qT(e,o,a,c,v)},t.prototype.createSyncEngine=function(i,e){return $=e,oe=new DD(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,i.initialUser,i.maxConcurrentLimboResolutions),$&&(oe.$o=!0),oe;var $,oe},t.prototype.terminate=function(){return function(i){return(0,We.mG)(this,void 0,void 0,function(){var e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return e=Jn(i),Gn("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Mp(e)];case 1:return o.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Y0=function(){function t(i){this.observer=i,this.muted=!1}return t.prototype.next=function(i){this.observer.next&&this.jo(this.observer.next,i)},t.prototype.error=function(i){this.observer.error?this.jo(this.observer.error,i):console.error("Uncaught Error in snapshot listener:",i)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(i,e){var o=this;this.muted||setTimeout(function(){o.muted||i(e)},0)},t}(),GD=(function(){function t(i,e){var o=this;this.Go=i,this.R=e,this.metadata=new ic,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(a){a&&a.io()?o.metadata.resolve(a.payload.metadata):o.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==a?void 0:a.payload)))},function(a){return o.metadata.reject(a)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){switch(i.label){case 0:return[4,this.getMetadata()];case 1:return[2,(i.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,We.mG)(this,void 0,void 0,function(){var i,e,o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return[4,this.Jo()];case 1:return null===(i=c.sent())?[2,null]:(e=this.zo.decode(i),o=Number(e),isNaN(o)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(o)]);case 2:return a=c.sent(),[2,new XT(JSON.parse(a),i.length+o)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(i){return i==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,We.mG)(this,void 0,void 0,function(){var i,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(o.sent())return[3,3];o.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((i=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,i),[2,(this.buffer=this.buffer.slice(i),e)])}})})},t.prototype.Xo=function(i){return(0,We.mG)(this,void 0,void 0,function(){var e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return this.buffer.length<i?[4,this.tc()]:[3,3];case 1:o.sent()&&this.Yo("Reached the end of bundle when more is expected."),o.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,i)),[2,(this.buffer=this.buffer.slice(i),e)]}})})},t.prototype.Yo=function(i){throw this.Go.cancel(),new Error("Invalid bundle format: "+i)},t.prototype.tc=function(){return(0,We.mG)(this,void 0,void 0,function(){var i,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return[4,this.Go.read()];case 1:return(i=o.sent()).done||((e=new Uint8Array(this.buffer.length+i.value.length)).set(this.buffer),e.set(i.value,this.buffer.length),this.buffer=e),[2,i.done]}})})}}(),function(){function t(i){this.datastore=i,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(i){return(0,We.mG)(this,void 0,void 0,function(){var e,o=this;return(0,We.Jh)(this,function(a){switch(a.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Dn(rn.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(c,v){return(0,We.mG)(this,void 0,void 0,function(){var A,z,$,oe,fe,ke;return(0,We.Jh)(this,function(Oe){switch(Oe.label){case 0:return A=Jn(c),z=ky(A.R)+"/documents",$={documents:v.map(function(He){return My(A.R,He)})},[4,A.$i("BatchGetDocuments",z,$)];case 1:return oe=Oe.sent(),fe=new Map,oe.forEach(function(He){var At,Qt,ct=(At=A.R,"found"in(Qt=He)?function(Sn,xn){Zi(!!xn.found);var Qn=Ju(Sn,xn.found.name),ii=Rl(xn.found.updateTime),er=new du({mapValue:{fields:xn.found.fields}});return Pl.newFoundDocument(Qn,ii,er)}(At,Qt):"missing"in Qt?function(Sn,xn){Zi(!!xn.missing),Zi(!!xn.readTime);var Qn=Ju(Sn,xn.missing),ii=Rl(xn.readTime);return Pl.newNoDocument(Qn,ii)}(At,Qt):vi());fe.set(ct.key.toString(),ct)}),ke=[],[2,(v.forEach(function(He){var ct=fe.get(He.toString());Zi(!!ct),ke.push(ct)}),ke)]}})})}(this.datastore,i)];case 1:return[2,((e=a.sent()).forEach(function(c){return o.recordVersion(c)}),e)]}})})},t.prototype.set=function(i,e){this.write(e.toMutation(i,this.precondition(i))),this.writtenDocs.add(i.toString())},t.prototype.update=function(i,e){try{this.write(e.toMutation(i,this.preconditionForUpdate(i)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(i.toString())},t.prototype.delete=function(i){this.write(new Em(i,this.precondition(i))),this.writtenDocs.add(i.toString())},t.prototype.commit=function(){return(0,We.mG)(this,void 0,void 0,function(){var i,e=this;return(0,We.Jh)(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return i=this.readVersions,this.mutations.forEach(function(a){i.delete(a.key.toString())}),i.forEach(function(a,c){var v=ki.fromPath(c);e.mutations.push(new _s(v,e.precondition(v)))}),[4,function(a,c){return(0,We.mG)(this,void 0,void 0,function(){var v,A,z;return(0,We.Jh)(this,function($){switch($.label){case 0:return v=Jn(a),A=ky(v.R)+"/documents",z={writes:c.map(function(oe){return y0(v.R,oe)})},[4,v.Ni("Commit",A,z)];case 1:return $.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return o.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(i){var e;if(i.isFoundDocument())e=i.version;else{if(!i.isNoDocument())throw vi();e=vr.min()}var o=this.readVersions.get(i.key.toString());if(o){if(!e.isEqual(o))throw new Dn(rn.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(i.key.toString(),e)},t.prototype.precondition=function(i){var e=this.readVersions.get(i.toString());return!this.writtenDocs.has(i.toString())&&e?ec.updateTime(e):ec.none()},t.prototype.preconditionForUpdate=function(i){var e=this.readVersions.get(i.toString());if(!this.writtenDocs.has(i.toString())&&e){if(e.isEqual(vr.min()))throw new Dn(rn.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ec.updateTime(e)}return ec.exists(!0)},t.prototype.write=function(i){this.ensureCommitNotCalled(),this.mutations.push(i)},t.prototype.ensureCommitNotCalled=function(){},t}()),aM=function(){function t(i,e,o,a){this.asyncQueue=i,this.datastore=e,this.updateFunction=o,this.deferred=a,this.ec=5,this.Zi=new Hb(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var i=this;this.Zi.ji(function(){return(0,We.mG)(i,void 0,void 0,function(){var e,o,a=this;return(0,We.Jh)(this,function(c){return e=new GD(this.datastore),(o=this.sc(e))&&o.then(function(v){a.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){a.deferred.resolve(v)}).catch(function(A){a.ic(A)})})}).catch(function(v){a.ic(v)}),[2]})})})},t.prototype.sc=function(i){try{var e=this.updateFunction(i);return!vm(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(o){return this.deferred.reject(o),null}},t.prototype.ic=function(i){var e=this;this.ec>0&&this.rc(i)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(i)},t.prototype.rc=function(i){if("FirebaseError"===i.name){var e=i.code;return"aborted"===e||"failed-precondition"===e||!Z1(e)}return!1},t}(),jD=function(){function t(i,e,o){var a=this;this.credentials=i,this.asyncQueue=e,this.databaseInfo=o,this.user=La.UNAUTHENTICATED,this.clientId=E1.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(c){return(0,We.mG)(a,void 0,void 0,function(){return(0,We.Jh)(this,function(v){switch(v.label){case 0:return Gn("FirestoreClient","Received user=",c.uid),[4,this.credentialListener(c)];case 1:return v.sent(),this.user=c,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(i){this.credentialListener=i},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Dn(rn.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var i=this;this.asyncQueue.enterRestrictedMode();var e=new ic;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,We.mG)(i,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:c.sent(),c.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:c.sent(),c.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return o=c.sent(),a=qy(o,"Failed to shutdown persistence"),e.reject(a),[3,6];case 6:return[2]}})})}),e.promise},t}();function YD(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o,a=this;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Gn("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return e=c.sent(),[4,i.initialize(e)];case 2:return c.sent(),o=e.initialUser,t.setCredentialChangeListener(function(v){return(0,We.mG)(a,void 0,void 0,function(){return(0,We.Jh)(this,function(A){switch(A.label){case 0:return o.isEqual(v)?[3,2]:[4,Pm(i.localStore,v)];case 1:A.sent(),o=v,A.label=2;case 2:return[2]}})})}),i.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=i,[2]}})})}function lM(t,i){return(0,We.mG)(this,void 0,void 0,function(){var e,o;return(0,We.Jh)(this,function(a){switch(a.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,MC(t)];case 1:return e=a.sent(),Gn("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return o=a.sent(),[4,i.initialize(e,o)];case 3:return a.sent(),t.setCredentialChangeListener(function(c){return function(v,A){return(0,We.mG)(this,void 0,void 0,function(){var z,$;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return(z=Jn(v)).asyncQueue.verifyOperationInProgress(),Gn("RemoteStore","RemoteStore received new credentials"),$=Ef(z),z.Or.add(3),[4,Mp(z)];case 1:return oe.sent(),$&&z.Br.set("Unknown"),[4,z.remoteSyncer.handleCredentialChange(A)];case 2:return oe.sent(),z.Or.delete(3),[4,c_(z)];case 3:return oe.sent(),[2]}})})}(i.remoteStore,c)}),t.onlineComponents=i,[2]}})})}function MC(t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){switch(i.label){case 0:return t.offlineComponents?[3,2]:(Gn("FirestoreClient","Using default OfflineComponentProvider"),[4,YD(t,new G0)]);case 1:i.sent(),i.label=2;case 2:return[2,t.offlineComponents]}})})}function Tf(t){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function(i){switch(i.label){case 0:return t.onlineComponents?[3,2]:(Gn("FirestoreClient","Using default OnlineComponentProvider"),[4,lM(t,new j0)]);case 1:i.sent(),i.label=2;case 2:return[2,t.onlineComponents]}})})}function qD(t){return MC(t).then(function(i){return i.persistence})}function q0(t){return MC(t).then(function(i){return i.localStore})}function cM(t){return Tf(t).then(function(i){return i.remoteStore})}function uM(t){return Tf(t).then(function(i){return i.syncEngine})}function h_(t){return(0,We.mG)(this,void 0,void 0,function(){var i,e;return(0,We.Jh)(this,function(o){switch(o.label){case 0:return[4,Tf(t)];case 1:return i=o.sent(),[2,((e=i.eventManager).onListen=Zb.bind(null,i.syncEngine),e.onUnlisten=ID.bind(null,i.syncEngine),e)]}})})}function hM(t,i,e){var o=this;void 0===e&&(e={});var a=new ic;return t.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(o,void 0,void 0,function(){var c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return c=function(A,z,$,oe,fe){var ke=new Y0({next:function(He){z.enqueueAndForget(function(){return mC(A,Oe)});var ct=He.docs.has($);!ct&&He.fromCache?fe.reject(new Dn(rn.UNAVAILABLE,"Failed to get document because the client is offline.")):ct&&He.fromCache&&oe&&"server"===oe.source?fe.reject(new Dn(rn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):fe.resolve(He)},error:function(He){return fe.reject(He)}}),Oe=new yC(Wg($.path),ke,{includeMetadataChanges:!0,so:!0});return fC(A,Oe)},[4,h_(t)];case 1:return[2,c.apply(void 0,[v.sent(),t.asyncQueue,i,e,a])]}})})}),a.promise}function Z0(t,i,e){var o=this;void 0===e&&(e={});var a=new ic;return t.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(o,void 0,void 0,function(){var c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return c=function(A,z,$,oe,fe){var ke=new Y0({next:function(He){z.enqueueAndForget(function(){return mC(A,Oe)}),He.fromCache&&"server"===oe.source?fe.reject(new Dn(rn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):fe.resolve(He)},error:function(He){return fe.reject(He)}}),Oe=new yC($,ke,{includeMetadataChanges:!0,so:!0});return fC(A,Oe)},[4,h_(t)];case 1:return[2,c.apply(void 0,[v.sent(),t.asyncQueue,i,e,a])]}})})}),a.promise}var dM=function(t,i,e,o,a,c,v,A){this.databaseId=t,this.appId=i,this.persistenceKey=e,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=v,this.useFetchStreams=A},Wb=function(){function t(i,e){this.projectId=i,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(i){return i instanceof t&&i.projectId===this.projectId&&i.database===this.database},t}(),kC=new Map,AC=function(t,i){this.user=i,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},DC=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(i,e){this.changeListener=e,i.enqueueRetryable(function(){return e(La.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),pM=function(){function t(i){this.token=i,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(i,e){var o=this;this.changeListener=e,i.enqueueRetryable(function(){return e(o.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),fM=function(){function t(i){var e=this;this.currentUser=La.UNAUTHENTICATED,this.oc=new ic,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var o=function(a){Gn("FirebaseCredentialsProvider","Auth detected"),e.auth=a,e.auth.addAuthTokenListener(e.uc)};i.onInit(function(a){return o(a)}),setTimeout(function(){if(!e.auth){var a=i.getImmediate({optional:!0});a?o(a):(Gn("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var i=this,e=this.cc,o=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(o).then(function(a){return i.cc!==e?(Gn("FirebaseCredentialsProvider","getToken aborted due to token change."),i.getToken()):a?(Zi("string"==typeof a.accessToken),new AC(a.accessToken,i.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(i,e){var o=this;this.asyncQueue=i,this.asyncQueue.enqueueRetryable(function(){return(0,We.mG)(o,void 0,void 0,function(){return(0,We.Jh)(this,function(a){switch(a.label){case 0:return[4,this.oc.promise];case 1:return a.sent(),[4,e(this.currentUser)];case 2:return a.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var i=this.auth&&this.auth.getUid();return Zi(null===i||"string"==typeof i),new La(i)},t}(),mM=function(){function t(i,e,o){this.hc=i,this.lc=e,this.fc=o,this.type="FirstParty",this.user=La.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var i={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(i.Authorization=e),this.fc&&(i["X-Goog-Iam-Authorization-Token"]=this.fc),i},enumerable:!1,configurable:!0}),t}(),ZD=function(){function t(i,e,o){this.hc=i,this.lc=e,this.fc=o}return t.prototype.getToken=function(){return Promise.resolve(new mM(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(i,e){i.enqueueRetryable(function(){return e(La.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function W0(t,i,e){if(!e)throw new Dn(rn.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+i+".")}function d_(t,i){if(void 0===i)return{merge:!1};if(void 0!==i.mergeFields&&void 0!==i.merge)throw new Dn(rn.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return i}function IC(t,i,e,o){if(!0===i&&!0===o)throw new Dn(rn.INVALID_ARGUMENT,t+" and "+e+" cannot be used together.")}function PC(t){if(!ki.isDocumentKey(t))throw new Dn(rn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function RC(t){if(ki.isDocumentKey(t))throw new Dn(rn.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function $b(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var i=function(e){if(e.constructor){var o=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(o&&o.length>1)return o[1]}return null}(t);return i?"a custom "+i+" object":"an object"}return"function"==typeof t?"a function":vi()}function no(t,i){if("_delegate"in t&&(t=t._delegate),!(t instanceof i)){if(i.name===t.constructor.name)throw new Dn(rn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var e=$b(t);throw new Dn(rn.INVALID_ARGUMENT,"Expected type '"+i.name+"', but it was: "+e)}return t}function OC(t,i){if(i<=0)throw new Dn(rn.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+i+".")}var gM=function(){function t(i){var e;if(void 0===i.host){if(void 0!==i.ssl)throw new Dn(rn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=i.host,this.ssl=null===(e=i.ssl)||void 0===e||e;if(this.credentials=i.credentials,this.ignoreUndefinedProperties=!!i.ignoreUndefinedProperties,void 0===i.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==i.cacheSizeBytes&&i.cacheSizeBytes<1048576)throw new Dn(rn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=i.cacheSizeBytes}this.experimentalForceLongPolling=!!i.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!i.experimentalAutoDetectLongPolling,this.useFetchStreams=!!i.useFetchStreams,IC("experimentalForceLongPolling",i.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",i.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(i){return this.host===i.host&&this.ssl===i.ssl&&this.credentials===i.credentials&&this.cacheSizeBytes===i.cacheSizeBytes&&this.experimentalForceLongPolling===i.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===i.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===i.ignoreUndefinedProperties&&this.useFetchStreams===i.useFetchStreams},t}(),$y=function(){function t(i,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gM({}),this._settingsFrozen=!1,i instanceof Wb?(this._databaseId=i,this._credentials=new DC):(this._app=i,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Dn(rn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wb(o.options.projectId)}(i),this._credentials=new fM(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Dn(rn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(i){if(this._settingsFrozen)throw new Dn(rn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gM(i),void 0!==i.credentials&&(this._credentials=function(e){if(!e)return new DC;switch(e.type){case"gapi":var o=e.client;return Zi(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new ZD(o,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Dn(rn.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(i.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(e=kC.get(this))&&(Gn("ComponentProvider","Removing Datastore"),kC.delete(this),e.terminate()),Promise.resolve();var e},t}(),ks=function(){function t(i,e,o){this.converter=e,this._key=o,this.type="document",this.firestore=i}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Bm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(i){return new t(this.firestore,i,this._key)},t}(),mu=function(){function t(i,e,o){this.converter=e,this._query=o,this.type="query",this.firestore=i}return t.prototype.withConverter=function(i){return new t(this.firestore,i,this._query)},t}(),Bm=function(t){function i(e,o,a){var c=this;return(c=t.call(this,e,o,Wg(a))||this)._path=a,c.type="collection",c}return(0,We.ZT)(i,t),Object.defineProperty(i.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ks(this.firestore,null,new ki(e))},enumerable:!1,configurable:!0}),i.prototype.withConverter=function(e){return new i(this.firestore,e,this._path)},i}(mu);function _M(t,i){for(var e,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(t=(0,Zr.m9)(t),W0("collection","path",i),t instanceof $y)return RC(e=to.fromString.apply(to,(0,We.ev)([i],o))),new Bm(t,null,e);if(!(t instanceof ks||t instanceof Bm))throw new Dn(rn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return RC(e=to.fromString.apply(to,(0,We.ev)([t.path],o)).child(to.fromString(i))),new Bm(t.firestore,null,e)}function zm(t,i){for(var e,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(t=(0,Zr.m9)(t),1===arguments.length&&(i=E1.u()),W0("doc","path",i),t instanceof $y)return PC(e=to.fromString.apply(to,(0,We.ev)([i],o))),new ks(t,null,new ki(e));if(!(t instanceof ks||t instanceof Bm))throw new Dn(rn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return PC(e=t._path.child(to.fromString.apply(to,(0,We.ev)([i],o)))),new ks(t.firestore,t instanceof Bm?t.converter:null,new ki(e))}function Xy(t,i){return t=(0,Zr.m9)(t),i=(0,Zr.m9)(i),(t instanceof ks||t instanceof Bm)&&(i instanceof ks||i instanceof Bm)&&t.firestore===i.firestore&&t.path===i.path&&t.converter===i.converter}function yM(t,i){return t=(0,Zr.m9)(t),i=(0,Zr.m9)(i),t instanceof mu&&i instanceof mu&&t.firestore===i.firestore&&Mb(t._query,i._query)&&t.converter===i.converter}var FC=function(){function t(){var i=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Hb(this,"async_queue_retry"),this.Ic=function(){var o=L0();o&&Gn("AsyncQueue","Visibility state changed to "+o.visibilityState),i.Zi.Gi()};var e=L0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(i){this.enqueue(i)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(i){this.Ac(),this.Rc(i)},t.prototype.enterRestrictedMode=function(i){if(!this._c){this._c=!0,this.Ec=i||!1;var e=L0();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(i){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var o=new ic;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(i().then(o.resolve,o.reject),o.promise)}).then(function(){return o.promise})},t.prototype.enqueueRetryable=function(i){var e=this;this.enqueueAndForget(function(){return e.wc.push(i),e.bc()})},t.prototype.bc=function(){return(0,We.mG)(this,void 0,void 0,function(){var i,e=this;return(0,We.Jh)(this,function(o){switch(o.label){case 0:if(0===this.wc.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return o.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!t_(i=o.sent()))throw i;return Gn("AsyncQueue","Operation failed with retryable error: "+i),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),o.label=5;case 5:return[2]}})})},t.prototype.Rc=function(i){var e=this,o=this.dc.then(function(){return e.gc=!0,i().catch(function(a){throw e.yc=a,e.gc=!1,xa("INTERNAL UNHANDLED ERROR: ",(v=(c=a).message||"",c.stack&&(v=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),v)),a;var c,v}).then(function(a){return e.gc=!1,a})});return this.dc=o,o},t.prototype.enqueueAfterDelay=function(i,e,o){var a=this;this.Ac(),this.Tc.indexOf(i)>-1&&(e=0);var c=rc.createAndSchedule(this,i,e,o,function(v){return a.vc(v)});return this.mc.push(c),c},t.prototype.Ac=function(){this.yc&&vi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,We.mG)(this,void 0,void 0,function(){var i;return(0,We.Jh)(this,function(e){switch(e.label){case 0:return[4,i=this.dc];case 1:e.sent(),e.label=2;case 2:if(i!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(i){for(var e=0,o=this.mc;e<o.length;e++)if(o[e].timerId===i)return!0;return!1},t.prototype.Sc=function(i){var e=this;return this.Pc().then(function(){e.mc.sort(function(v,A){return v.targetTimeMs-A.targetTimeMs});for(var o=0,a=e.mc;o<a.length;o++){var c=a[o];if(c.skipDelay(),"all"!==i&&c.timerId===i)break}return e.Pc()})},t.prototype.Dc=function(i){this.Tc.push(i)},t.prototype.vc=function(i){var e=this.mc.indexOf(i);this.mc.splice(e,1)},t}();function Dc(t){return function(i,e){if("object"!=typeof i||null===i)return!1;for(var o=i,a=0,c=["next","error","complete"];a<c.length;a++){var v=c[a];if(v in o&&"function"==typeof o[v])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new ic,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(i,e,o){this._progressObserver={next:i,error:e,complete:o}},t.prototype.catch=function(i){return this._taskCompletionResolver.promise.catch(i)},t.prototype.then=function(i,e){return this._taskCompletionResolver.promise.then(i,e)},t.prototype._completeWith=function(i){this._updateProgress(i),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(i)},t.prototype._failWith=function(i){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(i),this._taskCompletionResolver.reject(i)},t.prototype._updateProgress=function(i){this._lastProgress=i,this._progressObserver.next&&this._progressObserver.next(i)}}();var ta=function(t){function i(e,o){var a=this;return(a=t.call(this,e,o)||this).type="firestore",a._queue=new FC,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return(0,We.ZT)(i,t),i.prototype._terminate=function(){return this._firestoreClient||$D(this),this._firestoreClient.terminate()},i}($y);function al(t){return t._firestoreClient||$D(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $D(t){var i,c,A,e=t._freezeSettings(),o=(c=(null===(i=t._app)||void 0===i?void 0:i.options.appId)||"",new dM(t._databaseId,c,t._persistenceKey,(A=e).host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,A.useFetchStreams));t._firestoreClient=new jD(t._credentials,t._queue,o)}function $0(t,i,e){var o=this,a=new ic;return t.asyncQueue.enqueue(function(){return(0,We.mG)(o,void 0,void 0,function(){var c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return v.trys.push([0,3,,4]),[4,YD(t,e)];case 1:return v.sent(),[4,lM(t,i)];case 2:return v.sent(),a.resolve(),[3,4];case 3:if(!("FirebaseError"===(A=c=v.sent()).name?A.code===rn.FAILED_PRECONDITION||A.code===rn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&A instanceof DOMException)||22===A.code||20===A.code||11===A.code))throw c;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),a.reject(c),[3,4];case 4:return[2]}var A})})}).then(function(){return a.promise})}function X0(t){if(t._initialized||t._terminated)throw new Dn(rn.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Nd=function(){function t(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var o=0;o<i.length;++o)if(0===i[o].length)throw new Dn(rn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ad(i)}return t.prototype.isEqual=function(i){return this._internalPath.isEqual(i._internalPath)},t}(),Mf=function(){function t(i){this._byteString=i}return t.fromBase64String=function(i){try{return new t(Kl.fromBase64String(i))}catch(e){throw new Dn(rn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(i){return new t(Kl.fromUint8Array(i))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(i){return this._byteString.isEqual(i._byteString)},t}(),kf=function(t){this._methodName=t},Q0=function(){function t(i,e){if(!isFinite(i)||i<-90||i>90)throw new Dn(rn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+i);if(!isFinite(e)||e<-180||e>180)throw new Dn(rn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=i,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(i){return this._lat===i._lat&&this._long===i._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(i){return kr(this._lat,i._lat)||kr(this._long,i._long)},t}(),XD=/^__.*__$/,QD=function(){function t(i,e,o){this.data=i,this.fieldMask=e,this.fieldTransforms=o}return t.prototype.toMutation=function(i,e){return null!==this.fieldMask?new Sm(i,this.data,this.fieldMask,e,this.fieldTransforms):new Ai(i,this.data,e,this.fieldTransforms)},t}(),vM=function(){function t(i,e,o){this.data=i,this.fieldMask=e,this.fieldTransforms=o}return t.prototype.toMutation=function(i,e){return new Sm(i,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function LC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vi()}}var J0=function(){function t(i,e,o,a,c,v){this.settings=i,this.databaseId=e,this.R=o,this.ignoreUndefinedProperties=a,void 0===c&&this.Cc(),this.fieldTransforms=c||[],this.fieldMask=v||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(i){return new t(Object.assign(Object.assign({},this.settings),i),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(i){var e,o=null===(e=this.path)||void 0===e?void 0:e.child(i),a=this.xc({path:o,kc:!1});return a.$c(i),a},t.prototype.Oc=function(i){var e,o=null===(e=this.path)||void 0===e?void 0:e.child(i),a=this.xc({path:o,kc:!1});return a.Cc(),a},t.prototype.Mc=function(i){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(i){return tw(i,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(i){return void 0!==this.fieldMask.find(function(e){return i.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return i.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var i=0;i<this.path.length;i++)this.$c(this.path.get(i))},t.prototype.$c=function(i){if(0===i.length)throw this.Lc("Document fields must not be empty");if(LC(this.Nc)&&XD.test(i))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),bM=function(){function t(i,e,o){this.databaseId=i,this.ignoreUndefinedProperties=e,this.R=o||Uy(i)}return t.prototype.Uc=function(i,e,o,a){return void 0===a&&(a=!1),new J0({Nc:i,methodName:e,qc:o,path:Ad.emptyPath(),kc:!1,Bc:a},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Vm(t){var i=t._freezeSettings(),e=Uy(t._databaseId);return new bM(t._databaseId,!!i.ignoreUndefinedProperties,e)}function Qb(t,i,e,o,a,c){void 0===c&&(c={});var v=t.Uc(c.merge||c.mergeFields?2:0,i,e,a);kM("Data must be an object, but it was:",v,o);var A,z,$=TM(o,v);if(c.merge)A=new xy(v.fieldMask),z=v.fieldTransforms;else if(c.mergeFields){for(var oe=[],fe=0,ke=c.mergeFields;fe<ke.length;fe++){var Oe=p_(i,ke[fe],e);if(!v.contains(Oe))throw new Dn(rn.INVALID_ARGUMENT,"Field '"+Oe+"' is specified in your field mask but missing from your input data.");NC(oe,Oe)||oe.push(Oe)}A=new xy(oe),z=v.fieldTransforms.filter(function(He){return A.covers(He.field)})}else A=null,z=v.fieldTransforms;return new QD(new du($),A,z)}var K0=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,We.ZT)(i,t),i.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw e.Lc(1===e.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},i.prototype.isEqual=function(e){return e instanceof i},i}(kf);function xM(t,i,e){return new J0({Nc:3,qc:i.settings.qc,methodName:t._methodName,kc:e},i.databaseId,i.R,i.ignoreUndefinedProperties)}var wM=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,We.ZT)(i,t),i.prototype._toFieldTransform=function(e){return new Pd(e.path,new $g)},i.prototype.isEqual=function(e){return e instanceof i},i}(kf),CM=function(t){function i(e,o){var a=this;return(a=t.call(this,e)||this).Kc=o,a}return(0,We.ZT)(i,t),i.prototype._toFieldTransform=function(e){var o=xM(this,e,!0),a=this.Kc.map(function(v){return $h(v,o)}),c=new wm(a);return new Pd(e.path,c)},i.prototype.isEqual=function(e){return this===e},i}(kf),JD=function(t){function i(e,o){var a=this;return(a=t.call(this,e)||this).Kc=o,a}return(0,We.ZT)(i,t),i.prototype._toFieldTransform=function(e){var o=xM(this,e,!0),a=this.Kc.map(function(v){return $h(v,o)}),c=new Cm(a);return new Pd(e.path,c)},i.prototype.isEqual=function(e){return this===e},i}(kf),SM=function(t){function i(e,o){var a=this;return(a=t.call(this,e)||this).Qc=o,a}return(0,We.ZT)(i,t),i.prototype._toFieldTransform=function(e){var o=new Xg(e.R,qE(e.R,this.Qc));return new Pd(e.path,o)},i.prototype.isEqual=function(e){return this===e},i}(kf);function ew(t,i,e,o){var a=t.Uc(1,i,e);kM("Data must be an object, but it was:",a,o);var c=[],v=du.empty();ym(o,function(z,$){var oe=Jb(i,z,e);$=(0,Zr.m9)($);var fe=a.Oc(oe);if($ instanceof K0)c.push(oe);else{var ke=$h($,fe);null!=ke&&(c.push(oe),v.set(oe,ke))}});var A=new xy(c);return new vM(v,A,a.fieldTransforms)}function EM(t,i,e,o,a,c){var v=t.Uc(1,i,e),A=[p_(i,o,e)],z=[a];if(c.length%2!=0)throw new Dn(rn.INVALID_ARGUMENT,"Function "+i+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var $=0;$<c.length;$+=2)A.push(p_(i,c[$])),z.push(c[$+1]);for(var oe=[],fe=du.empty(),ke=A.length-1;ke>=0;--ke)if(!NC(oe,A[ke])){var Oe=A[ke],He=z[ke];He=(0,Zr.m9)(He);var ct=v.Oc(Oe);if(He instanceof K0)oe.push(Oe);else{var At=$h(He,ct);null!=At&&(oe.push(Oe),fe.set(Oe,At))}}var Qt=new xy(oe);return new vM(fe,Qt,v.fieldTransforms)}function oc(t,i,e,o){return void 0===o&&(o=!1),$h(e,t.Uc(o?4:3,i))}function $h(t,i){if(MM(t=(0,Zr.m9)(t)))return kM("Unsupported field value:",i,t),TM(t,i);if(t instanceof kf)return function(e,o){if(!LC(o.Nc))throw o.Lc(e._methodName+"() can only be used with update() and set()");if(!o.path)throw o.Lc(e._methodName+"() is not currently supported inside arrays");var a=e._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(t,i),null;if(void 0===t&&i.ignoreUndefinedProperties)return null;if(i.path&&i.fieldMask.push(i.path),t instanceof Array){if(i.settings.kc&&4!==i.Nc)throw i.Lc("Nested arrays are not supported");return function(e,o){for(var a=[],c=0,v=0,A=e;v<A.length;v++){var z=$h(A[v],o.Mc(c));null==z&&(z={nullValue:"NULL_VALUE"}),a.push(z),c++}return{arrayValue:{values:a}}}(t,i)}return function(e,o){if(null===(e=(0,Zr.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qE(o.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var a=Mc.fromDate(e);return{timestampValue:Pb(o.R,a)}}if(e instanceof Mc)return a=new Mc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:Pb(o.R,a)};if(e instanceof Q0)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Mf)return{bytesValue:oT(o.R,e._byteString)};if(e instanceof ks){var c=e.firestore._databaseId;if(!c.isEqual(a=o.databaseId))throw o.Lc("Document reference is for database "+c.projectId+"/"+c.database+" but should be for database "+a.projectId+"/"+a.database);return{referenceValue:sT(e.firestore._databaseId||o.databaseId,e._key.path)}}throw o.Lc("Unsupported field value: "+$b(e))}(t,i)}function TM(t,i){var e={};return k1(t)?i.path&&i.path.length>0&&i.fieldMask.push(i.path):ym(t,function(o,a){var c=$h(a,i.Fc(o));null!=c&&(e[o]=c)}),{mapValue:{fields:e}}}function MM(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Mc||t instanceof Q0||t instanceof Mf||t instanceof ks||t instanceof kf)}function kM(t,i,e){if(!MM(e)||"object"!=typeof(a=e)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){var o=$b(e);throw i.Lc("an object"===o?t+" a custom object":t+" "+o)}var a}function p_(t,i,e){if((i=(0,Zr.m9)(i))instanceof Nd)return i._internalPath;if("string"==typeof i)return Jb(t,i);throw tw("Field path arguments must be of type string or FieldPath.",t,!1,void 0,e)}var KD=new RegExp("[~\\*/\\[\\]]");function Jb(t,i,e){if(i.search(KD)>=0)throw tw("Invalid field path ("+i+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,e);try{return(new(Nd.bind.apply(Nd,(0,We.ev)([void 0],i.split(".")))))._internalPath}catch(o){throw tw("Invalid field path ("+i+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,e)}}function tw(t,i,e,o,a){var c=o&&!o.isEmpty(),v=void 0!==a,A="Function "+i+"() called with invalid data";e&&(A+=" (via `toFirestore()`)");var z="";return(c||v)&&(z+=" (found",c&&(z+=" in field "+o),v&&(z+=" in document "+a),z+=")"),new Dn(rn.INVALID_ARGUMENT,(A+=". ")+t+z)}function NC(t,i){return t.some(function(e){return e.isEqual(i)})}var Kb=function(){function t(i,e,o,a,c){this._firestore=i,this._userDataWriter=e,this._key=o,this._document=a,this._converter=c}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ks(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var i=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(i)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(i){if(this._document){var e=this._document.data.field(Qy("DocumentSnapshot.get",i));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),eI=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,We.ZT)(i,t),i.prototype.data=function(){return t.prototype.data.call(this)},i}(Kb);function Qy(t,i){return"string"==typeof i?Jb(t,i):i instanceof Nd?i._internalPath:i._delegate._internalPath}var Um=function(){function t(i,e){this.hasPendingWrites=i,this.fromCache=e}return t.prototype.isEqual=function(i){return this.hasPendingWrites===i.hasPendingWrites&&this.fromCache===i.fromCache},t}(),kp=function(t){function i(e,o,a,c,v,A){var z=this;return(z=t.call(this,e,o,a,c,A)||this)._firestore=e,z._firestoreImpl=e,z.metadata=v,z}return(0,We.ZT)(i,t),i.prototype.exists=function(){return t.prototype.exists.call(this)},i.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var o=new Hm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},i.prototype.get=function(e,o){if(void 0===o&&(o={}),this._document){var a=this._document.data.field(Qy("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,o.serverTimestamps)}},i}(Kb),Hm=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,We.ZT)(i,t),i.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},i}(kp),Ap=function(){function t(i,e,o,a){this._firestore=i,this._userDataWriter=e,this._snapshot=a,this.metadata=new Um(a.hasPendingWrites,a.fromCache),this.query=o}return Object.defineProperty(t.prototype,"docs",{get:function(){var i=[];return this.forEach(function(e){return i.push(e)}),i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(i,e){var o=this;this._snapshot.docs.forEach(function(a){i.call(e,new Hm(o._firestore,o._userDataWriter,a.key,a,new Um(o._snapshot.mutatedKeys.has(a.key),o._snapshot.fromCache),o.query.converter))})},t.prototype.docChanges=function(i){void 0===i&&(i={});var e=!!i.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Dn(rn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){var c=0;return o._snapshot.docChanges.map(function(A){return{type:"added",doc:new Hm(o._firestore,o._userDataWriter,A.doc.key,A.doc,new Um(o._snapshot.mutatedKeys.has(A.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:c++}})}var v=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(function(A){return a||3!==A.type}).map(function(A){var z=new Hm(o._firestore,o._userDataWriter,A.doc.key,A.doc,new Um(o._snapshot.mutatedKeys.has(A.doc.key),o._snapshot.fromCache),o.query.converter),$=-1,oe=-1;return 0!==A.type&&($=v.indexOf(A.doc.key),v=v.delete(A.doc.key)),1!==A.type&&(oe=(v=v.add(A.doc)).indexOf(A.doc.key)),{type:QP(A.type),doc:z,oldIndex:$,newIndex:oe}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function QP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vi()}}function BC(t,i){return t instanceof kp&&i instanceof kp?t._firestore===i._firestore&&t._key.isEqual(i._key)&&(null===t._document?null===i._document:t._document.isEqual(i._document))&&t._converter===i._converter:t instanceof Ap&&i instanceof Ap&&t._firestore===i._firestore&&yM(t.query,i.query)&&t.metadata.isEqual(i.metadata)&&t._snapshot.isEqual(i._snapshot)}function AM(t){if(d0(t)&&0===t.explicitOrderBy.length)throw new Dn(rn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Jy=function(){};function Bd(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];for(var o=0,a=i;o<a.length;o++){var c=a[o];t=c._apply(t)}return t}var DM=function(t){function i(e,o,a){var c=this;return(c=t.call(this)||this).jc=e,c.Wc=o,c.Gc=a,c.type="where",c}return(0,We.ZT)(i,t),i.prototype._apply=function(e){var c,A,o=Vm(e.firestore),a=function(c,v,A,z,$,oe,fe){var ke;if($.isKeyField()){if("array-contains"===oe||"array-contains-any"===oe)throw new Dn(rn.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+oe+"' queries on FieldPath.documentId().");if("in"===oe||"not-in"===oe){VC(fe,oe);for(var Oe=[],He=0,ct=fe;He<ct.length;He++)Oe.push(zC(z,c,ct[He]));ke={arrayValue:{values:Oe}}}else ke=zC(z,c,fe)}else"in"!==oe&&"not-in"!==oe&&"array-contains-any"!==oe||VC(fe,oe),ke=oc(A,"where",fe,"in"===oe||"not-in"===oe);var Qt=pu.create($,oe,ke);return function(Sn,xn){if(xn.g()){var Qn=B1(Sn);if(null!==Qn&&!Qn.isEqual(xn.field))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Qn.toString()+"' and '"+xn.field.toString()+"'");var ii=N1(Sn);null!==ii&&UC(0,xn.field,ii)}var er=function(Or,na){for(var hs=0,ac=Or.filters;hs<ac.length;hs++){var uE=ac[hs];if(na.indexOf(uE.op)>=0)return uE.op}return null}(Sn,function(Or){switch(Or){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(xn.op));if(null!==er)throw new Dn(rn.INVALID_ARGUMENT,er===xn.op?"Invalid query. You cannot use more than one '"+xn.op.toString()+"' filter.":"Invalid query. You cannot use '"+xn.op.toString()+"' filters with '"+er.toString()+"' filters.")}(c,Qt),Qt}(e._query,0,o,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new mu(e.firestore,e.converter,(A=(c=e._query).filters.concat([a]),new Cp(c.path,c.collectionGroup,c.explicitOrderBy.slice(),A,c.limit,c.limitType,c.startAt,c.endAt)))},i}(Jy),tI=function(t){function i(e,o){var a=this;return(a=t.call(this)||this).jc=e,a.zc=o,a.type="orderBy",a}return(0,We.ZT)(i,t),i.prototype._apply=function(e){var a,v,o=function(a,c,v){if(null!==a.startAt)throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var A=new Zg(c,v);return function(z,$){if(null===N1(z)){var oe=B1(z);null!==oe&&UC(0,oe,$.field)}}(a,A),A}(e._query,this.jc,this.zc);return new mu(e.firestore,e.converter,(v=(a=e._query).explicitOrderBy.concat([o]),new Cp(a.path,a.collectionGroup,v,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)))},i}(Jy),nw=function(t){function i(e,o,a){var c=this;return(c=t.call(this)||this).type=e,c.Hc=o,c.Jc=a,c}return(0,We.ZT)(i,t),i.prototype._apply=function(e){return new mu(e.firestore,e.converter,UE(e._query,this.Hc,this.Jc))},i}(Jy),iw=function(t){function i(e,o,a){var c=this;return(c=t.call(this)||this).type=e,c.Yc=o,c.Xc=a,c}return(0,We.ZT)(i,t),i.prototype._apply=function(e){var a,c,o=PM(e,this.type,this.Yc,this.Xc);return new mu(e.firestore,e.converter,(c=o,new Cp((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)))},i}(Jy),IM=function(t){function i(e,o,a){var c=this;return(c=t.call(this)||this).type=e,c.Yc=o,c.Xc=a,c}return(0,We.ZT)(i,t),i.prototype._apply=function(e){var a,c,o=PM(e,this.type,this.Yc,this.Xc);return new mu(e.firestore,e.converter,(c=o,new Cp((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)))},i}(Jy);function PM(t,i,e,o){if(e[0]=(0,Zr.m9)(e[0]),e[0]instanceof Kb)return function(c,v,A,z,$){if(!z)throw new Dn(rn.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+A+"().");for(var oe=[],fe=0,ke=Ey(c);fe<ke.length;fe++){var Oe=ke[fe];if(Oe.field.isKeyField())oe.push(Qu(v,z.key));else{var He=z.data.field(Oe.field);if(D1(He))throw new Dn(rn.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Oe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===He){var ct=Oe.field.canonicalString();throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+ct+"' (used as the orderBy) does not exist.")}oe.push(He)}}return new xm(oe,$)}(t._query,t.firestore._databaseId,i,e[0]._document,o);var a=Vm(t.firestore);return function(c,v,A,z,$,oe){var fe=c.explicitOrderBy;if($.length>fe.length)throw new Dn(rn.INVALID_ARGUMENT,"Too many arguments provided to "+z+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var ke=[],Oe=0;Oe<$.length;Oe++){var He=$[Oe];if(fe[Oe].field.isKeyField()){if("string"!=typeof He)throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+z+"(), but got a "+typeof He);if(!z1(c)&&-1!==He.indexOf("/"))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+z+"() must be a plain document ID, but '"+He+"' contains a slash.");var ct=c.path.child(to.fromString(He));if(!ki.isDocumentKey(ct))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+z+"() must result in a valid document path, but '"+ct+"' is not because it contains an odd number of segments.");var At=new ki(ct);ke.push(Qu(v,At))}else{var Qt=oc(A,z,He);ke.push(Qt)}}return new xm(ke,oe)}(t._query,t.firestore._databaseId,a,i,e,o)}function zC(t,i,e){if("string"==typeof(e=(0,Zr.m9)(e))){if(""===e)throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!z1(i)&&-1!==e.indexOf("/"))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var o=i.path.child(to.fromString(e));if(!ki.isDocumentKey(o))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+o+"' is not because it has an odd number of segments ("+o.length+").");return Qu(t,new ki(o))}if(e instanceof ks)return Qu(t,e._key);throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$b(e)+".")}function VC(t,i){if(!Array.isArray(t)||0===t.length)throw new Dn(rn.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+i.toString()+"' filters.");if(t.length>10)throw new Dn(rn.INVALID_ARGUMENT,"Invalid Query. '"+i.toString()+"' filters support a maximum of 10 elements in the value array.")}function UC(t,i,e){if(!e.isEqual(i))throw new Dn(rn.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+i.toString()+"' and so you must also use '"+i.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+e.toString()+"' instead.")}var HC=function(){function t(){}return t.prototype.convertValue=function(i,e){switch(void 0===e&&(e="none"),jg(i)){case 0:return null;case 1:return i.booleanValue;case 2:return ea(i.integerValue||i.doubleValue);case 3:return this.convertTimestamp(i.timestampValue);case 4:return this.convertServerTimestamp(i,e);case 5:return i.stringValue;case 6:return this.convertBytes(wy(i.bytesValue));case 7:return this.convertReference(i.referenceValue);case 8:return this.convertGeoPoint(i.geoPointValue);case 9:return this.convertArray(i.arrayValue,e);case 10:return this.convertObject(i.mapValue,e);default:throw vi()}},t.prototype.convertObject=function(i,e){var o=this,a={};return ym(i.fields,function(c,v){a[c]=o.convertValue(v,e)}),a},t.prototype.convertGeoPoint=function(i){return new Q0(ea(i.latitude),ea(i.longitude))},t.prototype.convertArray=function(i,e){var o=this;return(i.values||[]).map(function(a){return o.convertValue(a,e)})},t.prototype.convertServerTimestamp=function(i,e){switch(e){case"previous":var o=I1(i);return null==o?null:this.convertValue(o,e);case"estimate":return this.convertTimestamp(bb(i));default:return null}},t.prototype.convertTimestamp=function(i){var e=es(i);return new Mc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(i,e){var o=to.fromString(i);Zi(_T(o));var a=new Wb(o.get(1),o.get(3)),c=new ki(o.popFirst(5));return a.isEqual(e)||xa("Document "+c+" contains a document reference within a different database ("+a.projectId+"/"+a.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),c},t}();function ex(t,i,e){return t?e&&(e.merge||e.mergeFields)?t.toFirestore(i,e):t.toFirestore(i):i}var RM=function(t){function i(e){var o=this;return(o=t.call(this)||this).firestore=e,o}return(0,We.ZT)(i,t),i.prototype.convertBytes=function(e){return new Mf(e)},i.prototype.convertReference=function(e){var o=this.convertDocumentKey(e,this.firestore._databaseId);return new ks(this.firestore,null,o)},i}(HC),nI=function(){function t(i,e){this._firestore=i,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Vm(i)}return t.prototype.set=function(i,e,o){this._verifyNotCommitted();var a=Gm(i,this._firestore),c=ex(a.converter,e,o),v=Qb(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,o);return this._mutations.push(v.toMutation(a._key,ec.none())),this},t.prototype.update=function(i,e,o){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];this._verifyNotCommitted();var v,A=Gm(i,this._firestore);return v="string"==typeof(e=(0,Zr.m9)(e))||e instanceof Nd?EM(this._dataReader,"WriteBatch.update",A._key,e,o,a):ew(this._dataReader,"WriteBatch.update",A._key,e),this._mutations.push(v.toMutation(A._key,ec.exists(!0))),this},t.prototype.delete=function(i){this._verifyNotCommitted();var e=Gm(i,this._firestore);return this._mutations=this._mutations.concat(new Em(e._key,ec.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Dn(rn.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Gm(t,i){if((t=(0,Zr.m9)(t)).firestore!==i)throw new Dn(rn.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var jm=function(t){function i(e){var o=this;return(o=t.call(this)||this).firestore=e,o}return(0,We.ZT)(i,t),i.prototype.convertBytes=function(e){return new Mf(e)},i.prototype.convertReference=function(e){var o=this.convertDocumentKey(e,this.firestore._databaseId);return new ks(this.firestore,null,o)},i}(HC);function OM(t,i,e){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];t=no(t,ks);var c=no(t.firestore,ta),v=Vm(c);return Ky(c,[("string"==typeof(i=(0,Zr.m9)(i))||i instanceof Nd?EM(v,"updateDoc",t._key,i,e,o):ew(v,"updateDoc",t._key,i)).toMutation(t._key,ec.exists(!0))])}function GC(t){for(var i,e,o,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];t=(0,Zr.m9)(t);var v={includeMetadataChanges:!1},A=0;"object"!=typeof a[A]||Dc(a[A])||(v=a[A],A++);var z,$,oe,fe={includeMetadataChanges:v.includeMetadataChanges};if(Dc(a[A])){var ke=a[A];a[A]=null===(i=ke.next)||void 0===i?void 0:i.bind(ke),a[A+1]=null===(e=ke.error)||void 0===e?void 0:e.bind(ke),a[A+2]=null===(o=ke.complete)||void 0===o?void 0:o.bind(ke)}if(t instanceof ks)$=no(t.firestore,ta),oe=Wg(t._key.path),z={next:function(ct){a[A]&&a[A](rw($,t,ct))},error:a[A+1],complete:a[A+2]};else{var Oe=no(t,mu);$=no(Oe.firestore,ta),oe=Oe._query;var He=new jm($);z={next:function(ct){a[A]&&a[A](new Ap($,He,Oe,ct))},error:a[A+1],complete:a[A+2]},AM(t._query)}return function(ct,At,Qt,Sn){var xn=this,Qn=new Y0(Sn),ii=new yC(At,Qn,Qt);return ct.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(xn,void 0,void 0,function(){var er;return(0,We.Jh)(this,function(Or){switch(Or.label){case 0:return er=fC,[4,h_(ct)];case 1:return[2,er.apply(void 0,[Or.sent(),ii])]}})})}),function(){Qn.Wo(),ct.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(xn,void 0,void 0,function(){var er;return(0,We.Jh)(this,function(Or){switch(Or.label){case 0:return er=mC,[4,h_(ct)];case 1:return[2,er.apply(void 0,[Or.sent(),ii])]}})})})}}(al($),oe,fe,z)}function Ky(t,i){return function(e,o){var a=this,c=new ic;return e.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(a,void 0,void 0,function(){var v;return(0,We.Jh)(this,function(A){switch(A.label){case 0:return v=eM,[4,uM(e)];case 1:return[2,v.apply(void 0,[A.sent(),o,c])]}})})}),c.promise}(al(t),i)}function rw(t,i,e){var o=e.docs.get(i._key),a=new jm(t);return new kp(t,a,i._key,o,new Um(e.hasPendingWrites,e.fromCache),i.converter)}var FM=function(t){function i(e,o){var a=this;return(a=t.call(this,e,o)||this)._firestore=e,a}return(0,We.ZT)(i,t),i.prototype.get=function(e){var o=this,a=Gm(e,this._firestore),c=new jm(this._firestore);return t.prototype.get.call(this,e).then(function(v){return new kp(o._firestore,c,a._key,v._document,new Um(!1,!1),a.converter)})},i}(function(){function t(i,e){this._firestore=i,this._transaction=e,this._dataReader=Vm(i)}return t.prototype.get=function(i){var e=this,o=Gm(i,this._firestore),a=new RM(this._firestore);return this._transaction.lookup([o._key]).then(function(c){if(!c||1!==c.length)return vi();var v=c[0];if(v.isFoundDocument())return new Kb(e._firestore,a,v.key,v,o.converter);if(v.isNoDocument())return new Kb(e._firestore,a,o._key,null,o.converter);throw vi()})},t.prototype.set=function(i,e,o){var a=Gm(i,this._firestore),c=ex(a.converter,e,o),v=Qb(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,o);return this._transaction.set(a._key,v),this},t.prototype.update=function(i,e,o){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var v,A=Gm(i,this._firestore);return v="string"==typeof(e=(0,Zr.m9)(e))||e instanceof Nd?EM(this._dataReader,"Transaction.update",A._key,e,o,a):ew(this._dataReader,"Transaction.update",A._key,e),this._transaction.update(A._key,v),this},t.prototype.delete=function(i){var e=Gm(i,this._firestore);return this._transaction.delete(e._key),this},t}());function LM(){if("undefined"==typeof Uint8Array)throw new Dn(rn.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function NM(){if("undefined"==typeof atob)throw new Dn(rn.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var BM=function(){function t(i){this._delegate=i}return t.fromBase64String=function(i){return NM(),new t(Mf.fromBase64String(i))},t.fromUint8Array=function(i){return LM(),new t(Mf.fromUint8Array(i))},t.prototype.toBase64=function(){return NM(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return LM(),this._delegate.toUint8Array()},t.prototype.isEqual=function(i){return this._delegate.isEqual(i._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),zM=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(i,e){return function(o,a){X0(o=no(o,ta));var c=al(o),v=o._freezeSettings(),A=new j0;return $0(c,A,new oM(A,v.cacheSizeBytes,null==a?void 0:a.forceOwnership))}(i._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(i){return function(e){X0(e=no(e,ta));var o=al(e),a=e._freezeSettings(),c=new j0;return $0(o,c,new sM(c,a.cacheSizeBytes))}(i._delegate)},t.prototype.clearIndexedDbPersistence=function(i){return function(e){var o=this;if(e._initialized&&!e._terminated)throw new Dn(rn.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var a=new ic;return e._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,We.mG)(o,void 0,void 0,function(){var c;return(0,We.Jh)(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),[4,function(A){return(0,We.mG)(this,void 0,void 0,function(){return(0,We.Jh)(this,function($){switch($.label){case 0:return e_.yt()?[4,e_.delete(A+"main")]:[2,Promise.resolve()];case 1:return $.sent(),[2]}})})}(NT(e._databaseId,e._persistenceKey))];case 1:return v.sent(),a.resolve(),[3,3];case 2:return c=v.sent(),a.reject(c),[3,3];case 3:return[2]}})})}),a.promise}(i._delegate)},t}(),iI=function(){function t(i,e,o){var a=this;this._delegate=e,this.Zc=o,this.INTERNAL={delete:function(){return a.terminate()}},i instanceof Wb||(this.tu=i)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(i){var e=this._delegate._getSettings();i.merge||e.host===i.host||by("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),i.merge&&delete(i=Object.assign(Object.assign({},e),i)).merge,this._delegate._setSettings(i)},t.prototype.useEmulator=function(i,e,o){void 0===o&&(o={}),function(a,c,v,A){void 0===A&&(A={});var z=(a=no(a,$y))._getSettings();if("firestore.googleapis.com"!==z.host&&z.host!==c&&by("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},z),{host:c+":"+v,ssl:!1})),A.mockUserToken){var $=(0,Zr.Sg)(A.mockUserToken),oe=A.mockUserToken.sub||A.mockUserToken.user_id;if(!oe)throw new Dn(rn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a._credentials=new pM(new AC($,new La(oe)))}}(this._delegate,i,e,o)},t.prototype.enableNetwork=function(){return function(i){var e=this;return i.asyncQueue.enqueue(function(){return(0,We.mG)(e,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return[4,qD(i)];case 1:return o=c.sent(),[4,cM(i)];case 2:return a=c.sent(),[2,(o.setNetworkEnabled(!0),v=a,A=Jn(v),A.Or.delete(0),c_(A))]}var v,A})})})}(al(no(this._delegate,ta)))},t.prototype.disableNetwork=function(){return function(i){var e=this;return i.asyncQueue.enqueue(function(){return(0,We.mG)(e,void 0,void 0,function(){var o,a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return[4,qD(i)];case 1:return o=c.sent(),[4,cM(i)];case 2:return a=c.sent(),[2,(o.setNetworkEnabled(!1),function(v){return(0,We.mG)(this,void 0,void 0,function(){var A;return(0,We.Jh)(this,function(z){switch(z.label){case 0:return(A=Jn(v)).Or.add(0),[4,Mp(A)];case 1:return z.sent(),A.Br.set("Offline"),[2]}})})}(a))]}})})})}(al(no(this._delegate,ta)))},t.prototype.enablePersistence=function(i){var e=!1,o=!1;return i&&IC("synchronizeTabs",e=!!i.synchronizeTabs,"experimentalForceOwningTab",o=!!i.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,o)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(i){var e=this,o=new ic;return i.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(e,void 0,void 0,function(){var a;return(0,We.Jh)(this,function(c){switch(c.label){case 0:return a=FD,[4,uM(i)];case 1:return[2,a.apply(void 0,[c.sent(),o])]}})})}),o.promise}(al(no(this._delegate,ta)))},t.prototype.onSnapshotsInSync=function(i){return o=i,function(a,c){var v=this,A=new Y0(c);return a.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(v,void 0,void 0,function(){var z;return(0,We.Jh)(this,function($){switch($.label){case 0:return z=function(oe,fe){Jn(oe).Gr.add(fe),fe.next()},[4,h_(a)];case 1:return[2,z.apply(void 0,[$.sent(),A])]}})})}),function(){A.Wo(),a.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(v,void 0,void 0,function(){var z;return(0,We.Jh)(this,function($){switch($.label){case 0:return z=function(oe,fe){Jn(oe).Gr.delete(fe)},[4,h_(a)];case 1:return[2,z.apply(void 0,[$.sent(),A])]}})})})}}(al(no(this._delegate,ta)),Dc(o)?o:{next:o});var o},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Dn(rn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(i){try{return new qC(this,_M(this._delegate,i))}catch(e){throw gu(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(i){try{return new ev(this,zm(this._delegate,i))}catch(e){throw gu(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(i){try{return new aw(this,function(e,o){if(e=no(e,$y),W0("collectionGroup","collection id",o),o.indexOf("/")>=0)throw new Dn(rn.INVALID_ARGUMENT,"Invalid collection ID '"+o+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new mu(e,null,(a=o,new Cp(to.emptyPath(),a)));var a}(this._delegate,i))}catch(e){throw gu(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(i){var o,e=this;return function(c,v){var A=this,z=new ic;return c.asyncQueue.enqueueAndForget(function(){return(0,We.mG)(A,void 0,void 0,function(){var $;return(0,We.Jh)(this,function(oe){switch(oe.label){case 0:return[4,(fe=c,Tf(fe).then(function(ke){return ke.datastore}))];case 1:return $=oe.sent(),new aM(c.asyncQueue,$,v,z).run(),[2]}var fe})})}),z.promise}(al(o=this._delegate),function(c){return function(o){return i(new rI(e,o))}(new FM(o,c))})},t.prototype.batch=function(){var i=this;return al(this._delegate),new oI(new nI(this._delegate,function(e){return Ky(i._delegate,e)}))},t.prototype.loadBundle=function(i){throw new Dn(rn.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(i){throw new Dn(rn.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),jC=function(t){function i(e){var o=this;return(o=t.call(this)||this).firestore=e,o}return(0,We.ZT)(i,t),i.prototype.convertBytes=function(e){return new BM(new Mf(e))},i.prototype.convertReference=function(e){var o=this.convertDocumentKey(e,this.firestore._databaseId);return ev.eu(o,this.firestore,null)},i}(HC),rI=function(){function t(i,e){this._firestore=i,this._delegate=e,this._userDataWriter=new jC(i)}return t.prototype.get=function(i){var e=this,o=tv(i);return this._delegate.get(o).then(function(a){return new ow(e._firestore,new kp(e._firestore._delegate,e._userDataWriter,a._key,a._document,a.metadata,o.converter))})},t.prototype.set=function(i,e,o){var a=tv(i);return o?(d_("Transaction.set",o),this._delegate.set(a,e,o)):this._delegate.set(a,e),this},t.prototype.update=function(i,e,o){for(var a,c=[],v=3;v<arguments.length;v++)c[v-3]=arguments[v];var A=tv(i);return 2===arguments.length?this._delegate.update(A,e):(a=this._delegate).update.apply(a,(0,We.ev)([A,e,o],c)),this},t.prototype.delete=function(i){var e=tv(i);return this._delegate.delete(e),this},t}(),oI=function(){function t(i){this._delegate=i}return t.prototype.set=function(i,e,o){var a=tv(i);return o?(d_("WriteBatch.set",o),this._delegate.set(a,e,o)):this._delegate.set(a,e),this},t.prototype.update=function(i,e,o){for(var a,c=[],v=3;v<arguments.length;v++)c[v-3]=arguments[v];var A=tv(i);return 2===arguments.length?this._delegate.update(A,e):(a=this._delegate).update.apply(a,(0,We.ev)([A,e,o],c)),this},t.prototype.delete=function(i){var e=tv(i);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),YC=function(){function t(i,e,o){this._firestore=i,this._userDataWriter=e,this._delegate=o}return t.prototype.fromFirestore=function(i,e){var o=new Hm(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,null);return this._delegate.fromFirestore(new sw(this._firestore,o),null!=e?e:{})},t.prototype.toFirestore=function(i,e){return e?this._delegate.toFirestore(i,e):this._delegate.toFirestore(i)},t.nu=function(i,e){var o=t.su,a=o.get(i);a||(a=new WeakMap,o.set(i,a));var c=a.get(e);return c||(c=new t(i,new jC(i),e),a.set(e,c)),c},t}();YC.su=new WeakMap;var ev=function(){function t(i,e){this.firestore=i,this._delegate=e,this._userDataWriter=new jC(i)}return t.iu=function(i,e,o){if(i.length%2!=0)throw new Dn(rn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+i.canonicalString()+" has "+i.length);return new t(e,new ks(e._delegate,o,new ki(i)))},t.eu=function(i,e,o){return new t(e,new ks(e._delegate,o,i))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new qC(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(i){try{return new qC(this.firestore,_M(this._delegate,i))}catch(e){throw gu(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(i){return(i=(0,Zr.m9)(i))instanceof ks&&Xy(this._delegate,i)},t.prototype.set=function(i,e){e=d_("DocumentReference.set",e);try{return function(o,a,c){o=no(o,ks);var v=no(o.firestore,ta),A=ex(o.converter,a,c);return Ky(v,[Qb(Vm(v),"setDoc",o._key,A,null!==o.converter,c).toMutation(o._key,ec.none())])}(this._delegate,i,e)}catch(o){throw gu(o,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(i,e){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];try{return 1===arguments.length?OM(this._delegate,i):OM.apply(void 0,(0,We.ev)([this._delegate,i,e],o))}catch(c){throw gu(c,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ky(no((i=this._delegate).firestore,ta),[new Em(i._key,ec.none())]);var i},t.prototype.onSnapshot=function(){for(var i=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a=sI(e),c=aI(e,function(v){return new ow(i.firestore,new kp(i.firestore._delegate,i._userDataWriter,v._key,v._document,v.metadata,i._delegate.converter))});return GC(this._delegate,a,c)},t.prototype.get=function(i){var e=this;return("cache"===(null==i?void 0:i.source)?function(o){o=no(o,ks);var a=no(o.firestore,ta),c=al(a),v=new jm(a);return function(A,z){var $=this,oe=new ic;return A.asyncQueue.enqueueAndForget(function(){return(0,We.mG)($,void 0,void 0,function(){var fe;return(0,We.Jh)(this,function(ke){switch(ke.label){case 0:return fe=function(Oe,He,ct){return(0,We.mG)(this,void 0,void 0,function(){var At,Qt;return(0,We.Jh)(this,function(Sn){switch(Sn.label){case 0:return Sn.trys.push([0,2,,3]),[4,(xn=Oe,Qn=He,ii=Jn(xn),ii.persistence.runTransaction("read document","readonly",function(er){return ii.Mn.mn(er,Qn)}))];case 1:return(Qt=Sn.sent()).isFoundDocument()?ct.resolve(Qt):Qt.isNoDocument()?ct.resolve(null):ct.reject(new Dn(rn.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return At=Sn.sent(),Qt=qy(At,"Failed to get document '"+He+" from cache"),ct.reject(Qt),[3,3];case 3:return[2]}var xn,Qn,ii})})},[4,q0(A)];case 1:return[2,fe.apply(void 0,[ke.sent(),z,oe])]}})})}),oe.promise}(c,o._key).then(function(A){return new kp(a,v,o._key,A,new Um(null!==A&&A.hasLocalMutations,!0),o.converter)})}(this._delegate):"server"===(null==i?void 0:i.source)?function(o){o=no(o,ks);var a=no(o.firestore,ta);return hM(al(a),o._key,{source:"server"}).then(function(c){return rw(a,o,c)})}(this._delegate):function(o){o=no(o,ks);var a=no(o.firestore,ta);return hM(al(a),o._key).then(function(c){return rw(a,o,c)})}(this._delegate)).then(function(o){return new ow(e.firestore,new kp(e.firestore._delegate,e._userDataWriter,o._key,o._document,o.metadata,e._delegate.converter))})},t.prototype.withConverter=function(i){return new t(this.firestore,this._delegate.withConverter(i?YC.nu(this.firestore,i):null))},t}();function gu(t,i,e){return t.message=t.message.replace(i,e),t}function sI(t){for(var i=0,e=t;i<e.length;i++){var o=e[i];if("object"==typeof o&&!Dc(o))return o}return{}}function aI(t,i){var e,o,a;return{next:function(c){a.next&&a.next(i(c))},error:null===(e=(a=Dc(t[0])?t[0]:Dc(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===e?void 0:e.bind(a),complete:null===(o=a.complete)||void 0===o?void 0:o.bind(a)}}var ow=function(){function t(i,e){this._firestore=i,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new ev(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(i){return this._delegate.data(i)},t.prototype.get=function(i,e){return this._delegate.get(i,e)},t.prototype.isEqual=function(i){return BC(this._delegate,i._delegate)},t}(),sw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return(0,We.ZT)(i,t),i.prototype.data=function(e){return this._delegate.data(e)},i}(ow),aw=function(){function t(i,e){this.firestore=i,this._delegate=e,this._userDataWriter=new jC(i)}return t.prototype.where=function(i,e,o){try{return new t(this.firestore,Bd(this._delegate,(v=o,A=e,z=Qy("where",a=i),new DM(z,A,v))))}catch(a){throw gu(a,/(orderBy|where)\(\)/,"Query.$1()")}var a,v,A,z},t.prototype.orderBy=function(i,e){try{return new t(this.firestore,Bd(this._delegate,function(o,a){void 0===a&&(a="asc");var c=a,v=Qy("orderBy",o);return new tI(v,c)}(i,e)))}catch(o){throw gu(o,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(i){try{return new t(this.firestore,Bd(this._delegate,(OC("limit",e=i),new nw("limit",e,"F"))))}catch(e){throw gu(e,"limit()","Query.limit()")}var e},t.prototype.limitToLast=function(i){try{return new t(this.firestore,Bd(this._delegate,(OC("limitToLast",e=i),new nw("limitToLast",e,"L"))))}catch(e){throw gu(e,"limitToLast()","Query.limitToLast()")}var e},t.prototype.startAt=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];try{return new t(this.firestore,Bd(this._delegate,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new iw("startAt",o,!0)}.apply(void 0,i)))}catch(o){throw gu(o,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];try{return new t(this.firestore,Bd(this._delegate,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new iw("startAfter",o,!1)}.apply(void 0,i)))}catch(o){throw gu(o,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];try{return new t(this.firestore,Bd(this._delegate,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new IM("endBefore",o,!0)}.apply(void 0,i)))}catch(o){throw gu(o,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];try{return new t(this.firestore,Bd(this._delegate,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new IM("endAt",o,!1)}.apply(void 0,i)))}catch(o){throw gu(o,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(i){return yM(this._delegate,i._delegate)},t.prototype.get=function(i){var e=this;return("cache"===(null==i?void 0:i.source)?function(o){o=no(o,mu);var a=no(o.firestore,ta),c=al(a),v=new jm(a);return function(A,z){var $=this,oe=new ic;return A.asyncQueue.enqueueAndForget(function(){return(0,We.mG)($,void 0,void 0,function(){var fe;return(0,We.Jh)(this,function(ke){switch(ke.label){case 0:return fe=function(Oe,He,ct){return(0,We.mG)(this,void 0,void 0,function(){var At,Qt,Sn,xn,Qn;return(0,We.Jh)(this,function(ii){switch(ii.label){case 0:return ii.trys.push([0,2,,3]),[4,zb(Oe,He,!0)];case 1:return Qn=ii.sent(),At=new KT(He,Qn.Bn),Qt=At._o(Qn.documents),Sn=At.applyChanges(Qt,!1),ct.resolve(Sn.snapshot),[3,3];case 2:return xn=ii.sent(),Qn=qy(xn,"Failed to execute query '"+He+" against cache"),ct.reject(Qn),[3,3];case 3:return[2]}})})},[4,q0(A)];case 1:return[2,fe.apply(void 0,[ke.sent(),z,oe])]}})})}),oe.promise}(c,o._query).then(function(A){return new Ap(a,v,o,A)})}(this._delegate):"server"===(null==i?void 0:i.source)?function(o){o=no(o,mu);var a=no(o.firestore,ta),c=al(a),v=new jm(a);return Z0(c,o._query,{source:"server"}).then(function(A){return new Ap(a,v,o,A)})}(this._delegate):function(o){o=no(o,mu);var a=no(o.firestore,ta),c=al(a),v=new jm(a);return AM(o._query),Z0(c,o._query).then(function(A){return new Ap(a,v,o,A)})}(this._delegate)).then(function(o){return new VM(e.firestore,new Ap(e.firestore._delegate,e._userDataWriter,e._delegate,o._snapshot))})},t.prototype.onSnapshot=function(){for(var i=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a=sI(e),c=aI(e,function(v){return new VM(i.firestore,new Ap(i.firestore._delegate,i._userDataWriter,i._delegate,v._snapshot))});return GC(this._delegate,a,c)},t.prototype.withConverter=function(i){return new t(this.firestore,this._delegate.withConverter(i?YC.nu(this.firestore,i):null))},t}(),KP=function(){function t(i,e){this._firestore=i,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new sw(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),VM=function(){function t(i,e){this._firestore=i,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new aw(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var i=this;return this._delegate.docs.map(function(e){return new sw(i._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(i){var e=this;return this._delegate.docChanges(i).map(function(o){return new KP(e._firestore,o)})},t.prototype.forEach=function(i,e){var o=this;this._delegate.forEach(function(a){i.call(e,new sw(o._firestore,a))})},t.prototype.isEqual=function(i){return BC(this._delegate,i._delegate)},t}(),qC=function(t){function i(e,o){var a=this;return(a=t.call(this,e,o)||this).firestore=e,a._delegate=o,a}return(0,We.ZT)(i,t),Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new ev(this.firestore,e):null},enumerable:!1,configurable:!0}),i.prototype.doc=function(e){try{return new ev(this.firestore,void 0===e?zm(this._delegate):zm(this._delegate,e))}catch(o){throw gu(o,"doc()","CollectionReference.doc()")}},i.prototype.add=function(e){var a,c,v,A,z,o=this;return(a=this._delegate,c=e,v=no(a.firestore,ta),A=zm(a),z=ex(a.converter,c),Ky(v,[Qb(Vm(a.firestore),"addDoc",A._key,z,null!==a.converter,{}).toMutation(A._key,ec.exists(!1))]).then(function(){return A})).then(function(a){return new ev(o.firestore,a)})},i.prototype.isEqual=function(e){return Xy(this._delegate,e._delegate)},i.prototype.withConverter=function(e){return new i(this.firestore,this._delegate.withConverter(e?YC.nu(this.firestore,e):null))},i}(aw);function tv(t){return no(t,ks)}var lI=function(){function t(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];this._delegate=new(Nd.bind.apply(Nd,(0,We.ev)([void 0],i)))}return t.documentId=function(){return new t(Ad.keyField().canonicalString())},t.prototype.isEqual=function(i){return(i=(0,Zr.m9)(i))instanceof Nd&&this._delegate._internalPath.isEqual(i._internalPath)},t}(),cI=function(){function t(i){this._delegate=i}return t.serverTimestamp=function(){var i=new wM("serverTimestamp");return i._methodName="FieldValue.serverTimestamp",new t(i)},t.delete=function(){var i=new K0("deleteField");return i._methodName="FieldValue.delete",new t(i)},t.arrayUnion=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var o=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new CM("arrayUnion",a)}.apply(void 0,i);return o._methodName="FieldValue.arrayUnion",new t(o)},t.arrayRemove=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var o=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new JD("arrayRemove",a)}.apply(void 0,i);return o._methodName="FieldValue.arrayRemove",new t(o)},t.increment=function(i){var e=new SM("increment",i);return e._methodName="FieldValue.increment",new t(e)},t.prototype.isEqual=function(i){return this._delegate.isEqual(i._delegate)},t}(),tR=nt(6034),nR={Firestore:iI,GeoPoint:Q0,Timestamp:Mc,Blob:BM,Transaction:rI,WriteBatch:oI,DocumentReference:ev,DocumentSnapshot:ow,Query:aw,QueryDocumentSnapshot:sw,QuerySnapshot:VM,CollectionReference:qC,FieldPath:lI,FieldValue:cI,setLogLevel:function(t){Xu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function UM(t,i){return function(t,i=Cl.z){return new Yr.y(e=>{let o;return null!=i?i.schedule(()=>{o=t.onSnapshot({includeMetadataChanges:!0},e)}):o=t.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=o&&o()}})}(t,i)}function HM(t,i){return UM(t,i).pipe((0,ei.U)(e=>({payload:e,type:"query"})))}function ZC(t,i){return HM(t,i).pipe(ws(void 0),Bh(),(0,ei.U)(([e,o])=>{const a=o.payload.docChanges(),c=a.map(v=>({type:v.type,payload:v}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((v,A)=>{const z=a.find(oe=>oe.doc.ref.isEqual(v.ref)),$=null==e?void 0:e.payload.docs.find(oe=>oe.ref.isEqual(v.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(v.metadata)||!z&&$&&JSON.stringify($.metadata)===JSON.stringify(v.metadata)||c.push({type:"modified",payload:{oldIndex:A,newIndex:A,type:"modified",doc:v}})}),c}))}function dI(t,i,e){return ZC(t,e).pipe(ca((o,a)=>function(t,i,e){return i.forEach(o=>{e.indexOf(o.type)>-1&&(t=function(t,i){switch(i.type){case"added":if(!t[i.newIndex]||!t[i.newIndex].doc.ref.isEqual(i.doc.ref))return GM(t,i.newIndex,0,i);break;case"modified":if(null==t[i.oldIndex]||t[i.oldIndex].doc.ref.isEqual(i.doc.ref)){if(i.oldIndex!==i.newIndex){const e=t.slice();return e.splice(i.oldIndex,1),e.splice(i.newIndex,0,i),e}return GM(t,i.newIndex,1,i)}break;case"removed":if(t[i.oldIndex]&&t[i.oldIndex].doc.ref.isEqual(i.doc.ref))return GM(t,i.oldIndex,1)}return t}(t,o))}),t}(o,a.map(c=>c.payload),i),[]),fc(),(0,ei.U)(o=>o.map(a=>({type:a.type,payload:a}))))}function GM(t,i,e,...o){const a=t.slice();return a.splice(i,e,...o),a}function lw(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}!function(t){t.INTERNAL.registerComponent(new tR.wA("firestore",function(o){return i=o.getProvider("app").getImmediate(),e=o.getProvider("auth-internal"),new iI(i,new ta(i,e),new zM);var i,e},"PUBLIC").setServiceProps(Object.assign({},nR))),t.registerVersion("@firebase/firestore","2.3.10")}(kg.Z);class f_{constructor(i,e,o){this.ref=i,this.query=e,this.afs=o}stateChanges(i){let e=ZC(this.query,this.afs.schedulers.outsideAngular);return i&&i.length>0&&(e=e.pipe((0,ei.U)(o=>o.filter(a=>i.indexOf(a.type)>-1)))),e.pipe(ws(void 0),Bh(),w(([o,a])=>a.length>0||!o),(0,ei.U)(([o,a])=>a),this.afs.keepUnstableUntilFirst)}auditTrail(i){return this.stateChanges(i).pipe(ca((e,o)=>[...e,...o],[]))}snapshotChanges(i){const e=lw(i);return dI(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(i={}){return HM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ei.U)(e=>e.payload.docs.map(o=>i.idField?Object.assign(Object.assign({},o.data()),{[i.idField]:o.id}):o.data())),this.afs.keepUnstableUntilFirst)}get(i){return(0,Nr.D)(this.query.get(i)).pipe((0,Ps.QV)(this.afs.schedulers.insideAngular))}add(i){return this.ref.add(i)}doc(i){return new WC(this.ref.doc(i),this.afs)}}class WC{constructor(i,e){this.ref=i,this.afs=e}set(i,e){return this.ref.set(i,e)}update(i){return this.ref.update(i)}delete(){return this.ref.delete()}collection(i,e){const o=this.ref.collection(i),{ref:a,query:c}=JC(o,e);return new f_(a,c,this.afs)}snapshotChanges(){return function(t,i){return UM(t,i).pipe(ws(void 0),Bh(),(0,ei.U)(([e,o])=>o.exists?(null==e?void 0:e.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(i={}){return this.snapshotChanges().pipe((0,ei.U)(({payload:e})=>i.idField?Object.assign(Object.assign({},e.data()),{[i.idField]:e.id}):e.data()))}get(i){return(0,Nr.D)(this.ref.get(i)).pipe((0,Ps.QV)(this.afs.schedulers.insideAngular))}}class mI{constructor(i,e){this.query=i,this.afs=e}stateChanges(i){return i&&0!==i.length?ZC(this.query,this.afs.schedulers.outsideAngular).pipe((0,ei.U)(e=>e.filter(o=>i.indexOf(o.type)>-1)),w(e=>e.length>0),this.afs.keepUnstableUntilFirst):ZC(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(i){return this.stateChanges(i).pipe(ca((e,o)=>[...e,...o],[]))}snapshotChanges(i){const e=lw(i);return dI(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(i={}){return HM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ei.U)(o=>o.payload.docs.map(a=>i.idField?Object.assign({[i.idField]:a.id},a.data()):a.data())),this.afs.keepUnstableUntilFirst)}get(i){return(0,Nr.D)(this.query.get(i)).pipe((0,Ps.QV)(this.afs.schedulers.insideAngular))}}const $C=new s.OlP("angularfire2.enableFirestorePersistence"),tx=new s.OlP("angularfire2.firestore.persistenceSettings"),XC=new s.OlP("angularfire2.firestore.settings"),QC=new s.OlP("angularfire2.firestore.use-emulator");function JC(t,i=(e=>e)){return{query:i(t),ref:t}}let tk,_u=(()=>{class t{constructor(e,o,a,c,v,A,z,$,oe){this.schedulers=new Xi.HU(A),this.keepUnstableUntilFirst=(0,Xi.ss)(this.schedulers);const fe=(0,Xi.on)(e,A,o);!An.Z.auth&&oe&&(0,Xi.yq)();const ke=$;[this.firestore,this.persistenceEnabled$]=(0,Xi.sI)(`${fe.name}.firestore`,"AngularFirestore",fe,()=>{const Oe=A.runOutsideAngular(()=>fe.firestore());if(c&&Oe.settings(c),ke&&Oe.useEmulator(...ke),a&&!ch(v)){const He=()=>{try{return(0,Nr.D)(Oe.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(ct){return"undefined"!=typeof console&&console.warn(ct),(0,Xn.of)(!1)}};return[Oe,A.runOutsideAngular(He)]}return[Oe,(0,Xn.of)(!1)]},[c,ke,a])}collection(e,o){let a;a="string"==typeof e?this.firestore.collection(e):e;const{ref:c,query:v}=JC(a,o),A=this.schedulers.ngZone.run(()=>c);return new f_(A,v,this)}collectionGroup(e,o){const a=o||(v=>v),c=this.firestore.collectionGroup(e);return new mI(a(c),this)}doc(e){let o;o="string"==typeof e?this.firestore.doc(e):e;const a=this.schedulers.ngZone.run(()=>o);return new WC(a,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Xi.Dh),s.LFG(Xi.xv,8),s.LFG($C,8),s.LFG(XC,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(tx,8),s.LFG(QC,8),s.LFG(en,8))},t.\u0275prov=s.Yz7({factory:function(){return new t(s.LFG(Xi.Dh),s.LFG(Xi.xv,8),s.LFG($C,8),s.LFG(XC,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(tx,8),s.LFG(QC,8),s.LFG(en,8))},token:t,providedIn:"any"}),t})(),jM=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:$C,useValue:!0},{provide:tx,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[_u]}),t})(),zd=(()=>{class t{constructor(e,o,a,c){this.fauth=e,this.route=o,this.router=a,this.firestore=c,this.tempo="",this.user$=this.fauth.authState,this.user$.subscribe(v=>{this.uid=null==v?void 0:v.uid,console.log("User Logged in "+this.uid)}),e.setPersistence("local").then(v=>{console.log("local session")})}login(e,o){var a=this;return bo(function*(){return new Promise(c=>{a.fauth.signInWithEmailAndPassword(e,o).then(v=>{var A,z;a.uid=null===(A=v.user)||void 0===A?void 0:A.uid,a.firestore.collection("Admin").doc(a.uid).valueChanges().subscribe($=>{$&&a.router.navigateByUrl("/adminpage")}),a.firestore.collection("Student").doc(a.uid).valueChanges().subscribe($=>{$&&a.router.navigateByUrl("/studentpage")}),a.firestore.collection("Supplier").doc(a.uid).valueChanges().subscribe($=>{$&&a.router.navigateByUrl("/supplierpage")}),(null===(z=v.user)||void 0===z?void 0:z.emailVerified)||(a.emailVerified=!1),c(!0)}).catch(v=>{"auth/wrong-password"===v.code&&(console.log("wrong password"),a.passwordVerified=!1,a.passwordVerified||(a.passwordVerified=!1)),"auth/user-not-found"===v.code&&(a.userVerified=!1),c(!1)})})})()}register(e,o,a,c,v,A,z,$,oe){var fe=this;return bo(function*(){return new Promise((ke,Oe)=>{fe.fauth.createUserWithEmailAndPassword(e,o).then(He=>{var ct,At;console.log(He),ke({validate:!0}),fe.fauth.currentUser.then(Qt=>{null==Qt||Qt.sendEmailVerification()}).then(Qt=>{console.log(Qt)}),"1"===a?(console.log("student"),fe.firestore.collection("Student").doc(null===(ct=He.user)||void 0===ct?void 0:ct.uid).set({name:c,email:e,dob:v,phone:A,gender:z,matrixid:$,isStudent:!1})):"2"===a&&(console.log("supplier"),fe.firestore.collection("Supplier").doc(null===(At=He.user)||void 0===At?void 0:At.uid).set({name:c,email:e,dob:v,phone:A,gender:z,compname:oe,isSupplier:!1}))}).catch(He=>{console.log(He),"auth/email-already-in-use"===He.code&&ke({validate:!1})})})})()}getAdminStatus(){var e=this;return bo(function*(){return new Promise(o=>{e.admin$=e.firestore.collection("Admin").doc(e.uid).valueChanges(),e.admin$.subscribe(a=>{o(null==a?void 0:a.isAdmin)})})})()}getStudentStatus(){var e=this;return bo(function*(){return new Promise(o=>{e.student$=e.firestore.collection("Student").doc(e.uid).valueChanges(),e.student$.subscribe(a=>{o(null==a?void 0:a.isStudent)})})})()}getSupplierStatus(){var e=this;return bo(function*(){return new Promise(o=>{e.supplier$=e.firestore.collection("Supplier").doc(e.uid).valueChanges(),e.supplier$.subscribe(a=>{o(null==a?void 0:a.isSupplier)})})})()}verificationemail(){this.fauth.user.subscribe(e=>{null==e||e.sendEmailVerification(),console.log("Verification email sent")},e=>{console.log(e)})}checkExistedEmail(e){var o=this;return bo(function*(){return new Promise(a=>{o.fauth.fetchSignInMethodsForEmail(e).then(c=>{console.log(c),o.emailExistedStatus=!0,a(!0)},c=>{console.log(c)})})})()}forgotPassword(e){var o=this;return bo(function*(){return new Promise(a=>{o.fauth.sendPasswordResetEmail(e).then(c=>{console.log("success"),a(!0)},c=>{console.log(c.code),"auth/user-not-found"===c.code&&a(!1)})})})()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Zn),s.LFG(Pa),s.LFG(Lo),s.LFG(_u))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),KC=(()=>{class t{constructor(e,o){this.auth=e,this.router=o}canActivate(e,o){var a=this;return bo(function*(){let c=yield a.auth.getAdminStatus();return console.log(c),0!=c||(a.router.navigateByUrl(""),!1)})()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(zd),s.LFG(Lo))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ym=(()=>{class t{constructor(e,o,a){this.fauth=e,this.router=o,this.af=a,this.fauth.authState.subscribe(c=>{let v=null==c?void 0:c.uid;this.username$=this.af.collection("Admin").doc(v).valueChanges()})}ngOnInit(){}logout(){this.fauth.signOut(),localStorage.removeItem("admin"),this.router.navigateByUrl("")}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Zn),s.Y36(Lo),s.Y36(_u))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-adminnavbarpage"]],decls:32,vars:5,consts:[[1,"navbar","navbar-expand-lg","navbar-light","shadow-sm"],[1,"container-fluid"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],["routerLink","/adminpage",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLinkActive","active","aria-current","page","routerLink","/adminpage",1,"nav-link","active"],["routerLinkActive","active","routerLink","/adminmanageinv",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],["routerLink","/adminprofile",1,"dropdown-item"],["routerLink","/adminpermissionpage",1,"dropdown-item"],["routerLink","/adminmenupage",1,"dropdown-item"],[1,"dropdown-item",3,"click"]],template:function(e,o){if(1&e&&(s.TgZ(0,"nav",0),s.TgZ(1,"div",1),s._UZ(2,"img",2),s.TgZ(3,"a",3),s._uU(4,"UMP SCMS"),s.qZA(),s.TgZ(5,"button",4),s._UZ(6,"span",5),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"ul",7),s.TgZ(9,"li",8),s.TgZ(10,"a",9),s._uU(11,"Home"),s.qZA(),s.qZA(),s.TgZ(12,"li",8),s.TgZ(13,"a",10),s._uU(14,"Manage Inventory"),s.qZA(),s.qZA(),s.TgZ(15,"li",11),s.TgZ(16,"a",12),s._uU(17),s.ALo(18,"async"),s.qZA(),s.TgZ(19,"ul",13),s.TgZ(20,"li"),s.TgZ(21,"a",14),s._uU(22,"My Profile"),s.qZA(),s.qZA(),s.TgZ(23,"li"),s.TgZ(24,"a",15),s._uU(25,"Manage Permission"),s.qZA(),s.qZA(),s.TgZ(26,"li"),s.TgZ(27,"a",16),s._uU(28,"Manage Menu"),s.qZA(),s.qZA(),s.TgZ(29,"li"),s.TgZ(30,"a",17),s.NdJ("click",function(){return o.logout()}),s._uU(31,"Logout"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){let a;s.Udp("background","#b8ab97"),s.xp6(17),s.hij(" ",null==(a=s.lcZ(18,3,o.username$))?null:a.username," ")}},directives:[gp,Bx],pipes:[hl],styles:["img[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;margin-right:10px}"]}),t})(),rR=(()=>{class t{constructor(e,o,a){this.fauth=e,this.router=o,this.af=a}ngAfterViewInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Zn),s.Y36(Lo),s.Y36(_u))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-home-page"]],decls:1,vars:0,template:function(e,o){1&e&&s._UZ(0,"app-adminnavbarpage")},directives:[Ym],styles:["mat-progress-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5}body[_ngcontent-%COMP%]{background:#f0f0f0}.chart[_ngcontent-%COMP%]{background:black;display:flex;justify-content:center}.loader-container[_ngcontent-%COMP%]{position:fixed;width:100%;z-index:999}"]}),t})();function br(t){return null!=t&&"false"!=`${t}`}function Fl(t,i=0){return gI(t)?Number(t):i}function gI(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function m_(t){return Array.isArray(t)?t:[t]}function Sa(t){return null==t?"":"string"==typeof t?t:`${t}px`}function qm(t){return t instanceof s.SBq?t.nativeElement:t}function Na(t,...i){return i.length?i.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function oS(t,i=Cl.P){return e=>e.lift(new BI(t,i))}class BI{constructor(i,e){this.dueTime=i,this.scheduler=e}call(i,e){return e.subscribe(new zI(i,this.dueTime,this.scheduler))}}class zI extends Xo.L{constructor(i,e,o){super(i),this.dueTime=e,this.scheduler=o,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(i){this.clearDebounce(),this.lastValue=i,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(VI,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:i}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(i)}}clearDebounce(){const i=this.debouncedSubscription;null!==i&&(this.remove(i),i.unsubscribe(),this.debouncedSubscription=null)}}function VI(t){t.debouncedNext()}try{tk="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(t){tk=!1}let ov,Co=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(t){return"browser"===t}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!tk)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.Lbi))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(s.Lbi))},token:t,providedIn:"root"}),t})(),nx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({}),t})();const sv=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function sS(){if(ov)return ov;if("object"!=typeof document||!document)return ov=new Set(sv),ov;let t=document.createElement("input");return ov=new Set(sv.filter(i=>(t.setAttribute("type",i),t.type===i))),ov}let pw,aS,av,lS;function fw(t){return function(){if(null==pw&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pw=!0}))}finally{pw=pw||!1}return pw}()?t:!!t.capture}function mw(){if(null==av){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return av=!1,av;if("scrollBehavior"in document.documentElement.style)av=!0;else{const t=Element.prototype.scrollTo;av=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return av}function ix(){if("object"!=typeof document||!document)return 0;if(null==aS){const t=document.createElement("div"),i=t.style;t.dir="rtl",i.width="1px",i.overflow="auto",i.visibility="hidden",i.pointerEvents="none",i.position="absolute";const e=document.createElement("div"),o=e.style;o.width="2px",o.height="1px",t.appendChild(e),document.body.appendChild(t),aS=0,0===t.scrollLeft&&(t.scrollLeft=1,aS=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return aS}function GI(t){if(function(){if(null==lS){const t="undefined"!=typeof document?document.head:null;lS=!(!t||!t.createShadowRoot&&!t.attachShadow)}return lS}()){const i=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&i instanceof ShadowRoot)return i}return null}let cS=(()=>{class t{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),nk=(()=>{class t{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,o)=>this._cleanupObserver(o))}observe(e){const o=qm(e);return new Yr.y(a=>{const v=this._observeElement(o).subscribe(a);return()=>{v.unsubscribe(),this._unobserveElement(o)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const o=new Nn.xQ,a=this._mutationObserverFactory.create(c=>o.next(c));a&&a.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:a,stream:o,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:o,stream:a}=this._observedElements.get(e);o&&o.disconnect(),a.complete(),this._observedElements.delete(e)}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(cS))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(cS))},token:t,providedIn:"root"}),t})(),ik=(()=>{class t{constructor(e,o,a){this._contentObserver=e,this._elementRef=o,this._ngZone=a,this.event=new s.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=br(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Fl(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(oS(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(nk),s.Y36(s.SBq),s.Y36(s.R0b))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),th=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[cS]}),t})();function rx(t,i){return(t.getAttribute(i)||"").match(/\S+/g)||[]}const uS="cdk-describedby-message-container",hS="cdk-describedby-message",lv="cdk-describedby-host";let dS=0;const Xh=new Map;let Ea=null,ox=(()=>{class t{constructor(e){this._document=e}describe(e,o,a){if(!this._canBeDescribed(e,o))return;const c=gw(o,a);"string"!=typeof o?(pS(o),Xh.set(c,{messageElement:o,referenceCount:0})):Xh.has(c)||this._createMessageElement(o,a),this._isElementDescribedByMessage(e,c)||this._addMessageReference(e,c)}removeDescription(e,o,a){if(!o||!this._isElementNode(e))return;const c=gw(o,a);if(this._isElementDescribedByMessage(e,c)&&this._removeMessageReference(e,c),"string"==typeof o){const v=Xh.get(c);v&&0===v.referenceCount&&this._deleteMessageElement(c)}Ea&&0===Ea.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const e=this._document.querySelectorAll(`[${lv}]`);for(let o=0;o<e.length;o++)this._removeCdkDescribedByReferenceIds(e[o]),e[o].removeAttribute(lv);Ea&&this._deleteMessagesContainer(),Xh.clear()}_createMessageElement(e,o){const a=this._document.createElement("div");pS(a),a.textContent=e,o&&a.setAttribute("role",o),this._createMessagesContainer(),Ea.appendChild(a),Xh.set(gw(e,o),{messageElement:a,referenceCount:0})}_deleteMessageElement(e){const o=Xh.get(e),a=o&&o.messageElement;Ea&&a&&Ea.removeChild(a),Xh.delete(e)}_createMessagesContainer(){if(!Ea){const e=this._document.getElementById(uS);e&&e.parentNode&&e.parentNode.removeChild(e),Ea=this._document.createElement("div"),Ea.id=uS,Ea.style.visibility="hidden",Ea.classList.add("cdk-visually-hidden"),this._document.body.appendChild(Ea)}}_deleteMessagesContainer(){Ea&&Ea.parentNode&&(Ea.parentNode.removeChild(Ea),Ea=null)}_removeCdkDescribedByReferenceIds(e){const o=rx(e,"aria-describedby").filter(a=>0!=a.indexOf(hS));e.setAttribute("aria-describedby",o.join(" "))}_addMessageReference(e,o){const a=Xh.get(o);(function(t,i,e){const o=rx(t,i);o.some(a=>a.trim()==e.trim())||(o.push(e.trim()),t.setAttribute(i,o.join(" ")))})(e,"aria-describedby",a.messageElement.id),e.setAttribute(lv,""),a.referenceCount++}_removeMessageReference(e,o){const a=Xh.get(o);a.referenceCount--,function(t,i,e){const a=rx(t,i).filter(c=>c!=e.trim());a.length?t.setAttribute(i,a.join(" ")):t.removeAttribute(i)}(e,"aria-describedby",a.messageElement.id),e.removeAttribute(lv)}_isElementDescribedByMessage(e,o){const a=rx(e,"aria-describedby"),c=Xh.get(o),v=c&&c.messageElement.id;return!!v&&-1!=a.indexOf(v)}_canBeDescribed(e,o){if(!this._isElementNode(e))return!1;if(o&&"object"==typeof o)return!0;const a=null==o?"":`${o}`.trim(),c=e.getAttribute("aria-label");return!(!a||c&&c.trim()===a)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(wt))},token:t,providedIn:"root"}),t})();function gw(t,i){return"string"==typeof t?`${i||""}/${t}`:t}function pS(t){t.id||(t.id=`${hS}-${dS++}`)}class ok{constructor(i){this._items=i,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Nn.xQ,this._typeaheadSubscription=gs.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Nn.xQ,this.change=new Nn.xQ,i instanceof s.n_E&&i.changes.subscribe(e=>{if(this._activeItem){const a=e.toArray().indexOf(this._activeItem);a>-1&&a!==this._activeItemIndex&&(this._activeItemIndex=a)}})}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,jo.b)(e=>this._pressedLetters.push(e)),oS(i),w(()=>this._pressedLetters.length>0),(0,ei.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const o=this._getItemsArray();for(let a=1;a<o.length+1;a++){const c=(this._activeItemIndex+a)%o.length,v=o[c];if(!this._skipPredicateFn(v)&&0===v.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}setActiveItem(i){const e=this._activeItem;this.updateActiveItem(i),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(i){const e=i.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!i[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&a){this.setNextItemActive();break}return;case 38:if(this._vertical&&a){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&a){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&a){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&a){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&a){this.setLastItemActive();break}return;default:return void((a||Na(i,"shiftKey"))&&(i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){const e=this._getItemsArray(),o="number"==typeof i?i:e.indexOf(i),a=e[o];this._activeItem=null==a?null:a,this._activeItemIndex=o}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){const e=this._getItemsArray();for(let o=1;o<=e.length;o++){const a=(this._activeItemIndex+i*o+e.length)%e.length;if(!this._skipPredicateFn(e[a]))return void this.setActiveItem(a)}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,e){const o=this._getItemsArray();if(o[i]){for(;this._skipPredicateFn(o[i]);)if(!o[i+=e])return;this.setActiveItem(i)}}_getItemsArray(){return this._items instanceof s.n_E?this._items.toArray():this._items}}class qI extends ok{setActiveItem(i){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(i),this.activeItem&&this.activeItem.setActiveStyles()}}class fS extends ok{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}}let sk=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const o=function(t){try{return t.frameElement}catch(i){return null}}(function(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(o&&(-1===yw(o)||!this.isVisible(o)))return!1;let a=e.nodeName.toLowerCase(),c=yw(e);return e.hasAttribute("contenteditable")?-1!==c:!("iframe"===a||"object"===a||this._platform.WEBKIT&&this._platform.IOS&&!function(t){let i=t.nodeName.toLowerCase(),e="input"===i&&t.type;return"text"===e||"password"===e||"select"===i||"textarea"===i}(e))&&("audio"===a?!!e.hasAttribute("controls")&&-1!==c:"video"===a?-1!==c&&(null!==c||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,o){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let i=t.nodeName.toLowerCase();return"input"===i||"select"===i||"button"===i||"textarea"===i}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||ax(t))}(e)&&!this.isDisabled(e)&&((null==o?void 0:o.ignoreVisibility)||this.isVisible(e))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Co))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(Co))},token:t,providedIn:"root"}),t})();function ax(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let i=t.getAttribute("tabindex");return"-32768"!=i&&!(!i||isNaN(parseInt(i,10)))}function yw(t){if(!ax(t))return null;const i=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(i)?-1:i}class XI{constructor(i,e,o,a,c=!1){this._element=i,this._checker=e,this._ngZone=o,this._document=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,c||this.attachAnchors()}get enabled(){return this._enabled}set enabled(i){this._enabled=i,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}destroy(){const i=this._startAnchor,e=this._endAnchor;i&&(i.removeEventListener("focus",this.startAnchorListener),i.parentNode&&i.parentNode.removeChild(i)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(i=>{this._executeOnStable(()=>i(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(i=>{this._executeOnStable(()=>i(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(i=>{this._executeOnStable(()=>i(this.focusLastTabbableElement()))})}_getRegionBoundary(i){let e=this._element.querySelectorAll(`[cdk-focus-region-${i}], [cdkFocusRegion${i}], [cdk-focus-${i}]`);for(let o=0;o<e.length;o++)e[o].hasAttribute(`cdk-focus-${i}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${i}', use 'cdkFocusRegion${i}' instead. The deprecated attribute will be removed in 8.0.0.`,e[o]):e[o].hasAttribute(`cdk-focus-region-${i}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${i}', use 'cdkFocusRegion${i}' instead. The deprecated attribute will be removed in 8.0.0.`,e[o]);return"start"==i?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const i=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(i){if(i.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",i),!this._checker.isFocusable(i)){const e=this._getFirstTabbableElement(i);return null==e||e.focus(),!!e}return i.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const i=this._getRegionBoundary("start");return i&&i.focus(),!!i}focusLastTabbableElement(){const i=this._getRegionBoundary("end");return i&&i.focus(),!!i}hasAttached(){return this._hasAttached}_getFirstTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;let e=i.children||i.childNodes;for(let o=0;o<e.length;o++){let a=e[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[o]):null;if(a)return a}return null}_getLastTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;let e=i.children||i.childNodes;for(let o=e.length-1;o>=0;o--){let a=e[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[o]):null;if(a)return a}return null}_createAnchor(){const i=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,i),i.classList.add("cdk-visually-hidden"),i.classList.add("cdk-focus-trap-anchor"),i.setAttribute("aria-hidden","true"),i}_toggleAnchorTabIndex(i,e){i?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(i){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}_executeOnStable(i){this._ngZone.isStable?i():this._ngZone.onStable.pipe(ue(1)).subscribe(i)}}let ck=(()=>{class t{constructor(e,o,a){this._checker=e,this._ngZone=o,this._document=a}create(e,o=!1){return new XI(e,this._checker,this._ngZone,this._document,o)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(sk),s.LFG(s.R0b),s.LFG(wt))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(sk),(0,s.LFG)(s.R0b),(0,s.LFG)(wt))},token:t,providedIn:"root"}),t})();"undefined"!=typeof Element&&Element;const xw=new s.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),gS=new s.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let lx=(()=>{class t{constructor(e,o,a,c){this._ngZone=o,this._defaultOptions=c,this._document=a,this._liveElement=e||this._createLiveElement()}announce(e,...o){const a=this._defaultOptions;let c,v;return 1===o.length&&"number"==typeof o[0]?v=o[0]:[c,v]=o,this.clear(),clearTimeout(this._previousTimeout),c||(c=a&&a.politeness?a.politeness:"polite"),null==v&&a&&(v=a.duration),this._liveElement.setAttribute("aria-live",c),this._ngZone.runOutsideAngular(()=>new Promise(A=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,A(),"number"==typeof v&&(this._previousTimeout=setTimeout(()=>this.clear(),v))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e="cdk-live-announcer-element",o=this._document.getElementsByClassName(e),a=this._document.createElement("div");for(let c=0;c<o.length;c++)o[c].parentNode.removeChild(o[c]);return a.classList.add(e),a.classList.add("cdk-visually-hidden"),a.setAttribute("aria-atomic","true"),a.setAttribute("aria-live","polite"),this._document.body.appendChild(a),a}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(xw,8),s.LFG(s.R0b),s.LFG(wt),s.LFG(gS,8))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(xw,8),(0,s.LFG)(s.R0b),(0,s.LFG)(wt),(0,s.LFG)(gS,8))},token:t,providedIn:"root"}),t})();function _S(t){return 0===t.buttons}function yS(t){const i=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}const cv=new s.OlP("cdk-focus-monitor-default-options"),Pc=fw({passive:!0,capture:!0});let nh=(()=>{class t{constructor(e,o,a,c){this._ngZone=e,this._platform=o,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=v=>{if(!this._lastTouchTarget){const A=_S(v)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(A)}},this._documentTouchstartListener=v=>{yS(v)?this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard"):(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=Df(v),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650))},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=v=>{const A=Df(v),z="focus"===v.type?this._onFocus:this._onBlur;for(let $=A;$;$=$.parentElement)z.call(this,v,$)},this._document=a,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(e,o=!1){const a=qm(e);if(!this._platform.isBrowser||1!==a.nodeType)return(0,Xn.of)(null);const c=GI(a)||this._getDocument(),v=this._elementInfo.get(a);if(v)return o&&(v.checkChildren=!0),v.subject;const A={checkChildren:o,subject:new Nn.xQ,rootNode:c};return this._elementInfo.set(a,A),this._registerGlobalListeners(A),A.subject}stopMonitoring(e){const o=qm(e),a=this._elementInfo.get(o);a&&(a.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(a))}focusVia(e,o,a){const c=qm(e);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([A,z])=>this._originChanged(A,o,z)):(this._setOriginForCurrentEventQueue(o),"function"==typeof c.focus&&c.focus(a))}ngOnDestroy(){this._elementInfo.forEach((e,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,o,a){a?e.classList.add(o):e.classList.remove(o)}_getFocusOrigin(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}_setClasses(e,o){this._toggleClass(e,"cdk-focused",!!o),this._toggleClass(e,"cdk-touch-focused","touch"===o),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===o),this._toggleClass(e,"cdk-mouse-focused","mouse"===o),this._toggleClass(e,"cdk-program-focused","program"===o)}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(e){const o=Df(e);return this._lastTouchTarget instanceof Node&&o instanceof Node&&(o===this._lastTouchTarget||o.contains(this._lastTouchTarget))}_onFocus(e,o){const a=this._elementInfo.get(o);!a||!a.checkChildren&&o!==Df(e)||this._originChanged(o,this._getFocusOrigin(e),a)}_onBlur(e,o){const a=this._elementInfo.get(o);!a||a.checkChildren&&e.relatedTarget instanceof Node&&o.contains(e.relatedTarget)||(this._setClasses(o),this._emitOrigin(a.subject,null))}_emitOrigin(e,o){this._ngZone.run(()=>e.next(o))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const o=e.rootNode,a=this._rootNodeFocusListenerCount.get(o)||0;a||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,Pc),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,Pc)}),this._rootNodeFocusListenerCount.set(o,a+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const c=this._getDocument(),v=this._getWindow();c.addEventListener("keydown",this._documentKeydownListener,Pc),c.addEventListener("mousedown",this._documentMousedownListener,Pc),c.addEventListener("touchstart",this._documentTouchstartListener,Pc),v.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(e){const o=e.rootNode;if(this._rootNodeFocusListenerCount.has(o)){const a=this._rootNodeFocusListenerCount.get(o);a>1?this._rootNodeFocusListenerCount.set(o,a-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Pc),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Pc),this._rootNodeFocusListenerCount.delete(o))}if(!--this._monitoredElementCount){const a=this._getDocument(),c=this._getWindow();a.removeEventListener("keydown",this._documentKeydownListener,Pc),a.removeEventListener("mousedown",this._documentMousedownListener,Pc),a.removeEventListener("touchstart",this._documentTouchstartListener,Pc),c.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(e,o,a){this._setClasses(e,o),this._emitOrigin(a.subject,o),this._lastFocusOrigin=o}_getClosestElementsInfo(e){const o=[];return this._elementInfo.forEach((a,c)=>{(c===e||a.checkChildren&&c.contains(e))&&o.push([c,a])}),o}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.R0b),s.LFG(Co),s.LFG(wt,8),s.LFG(cv,8))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(s.R0b),(0,s.LFG)(Co),(0,s.LFG)(wt,8),(0,s.LFG)(cv,8))},token:t,providedIn:"root"}),t})();function Df(t){return t.composedPath?t.composedPath()[0]:t.target}const hk="cdk-high-contrast-black-on-white",dk="cdk-high-contrast-white-on-black",ww="cdk-high-contrast-active";let vS=(()=>{class t{constructor(e,o){this._platform=e,this._document=o}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const o=this._document.defaultView||window,a=o&&o.getComputedStyle?o.getComputedStyle(e):null,c=(a&&a.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(ww),e.remove(hk),e.remove(dk);const o=this.getHighContrastMode();1===o?(e.add(ww),e.add(hk)):2===o&&(e.add(ww),e.add(dk))}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Co),s.LFG(wt))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(Co),(0,s.LFG)(wt))},token:t,providedIn:"root"}),t})(),bS=(()=>{class t{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(vS))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[nx,th]]}),t})();const xS=new s.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,s.f3M)(wt)}});let Qh=(()=>{class t{constructor(e){if(this.value="ltr",this.change=new s.vpe,e){const a=e.documentElement?e.documentElement.dir:null,c=(e.body?e.body.dir:null)||a;this.value="ltr"===c||"rtl"===c?c:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(xS,8))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(xS,8))},token:t,providedIn:"root"}),t})(),uv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({}),t})();const Wm=new s.GfV("11.2.13");class Cw{}const If="*";function ns(t,i){return{type:7,name:t,definitions:i,options:{}}}function dr(t,i=null){return{type:4,styles:i,timings:t}}function r2(t,i=null){return{type:2,steps:t,options:i}}function Rn(t){return{type:6,styles:t,offset:null}}function co(t,i,e){return{type:0,name:t,styles:i,options:e}}function g_(t){return{type:5,steps:t}}function ur(t,i,e=null){return{type:1,expr:t,animation:i,options:e}}function cx(t,i=null){return{type:8,animation:t,options:i}}function CS(t=null){return{type:9,options:t}}function SS(t,i=null){return{type:10,animation:t,options:i}}function ES(t,i,e=null){return{type:11,selector:t,animation:i,options:e}}function o2(t){Promise.resolve(null).then(t)}class ux{constructor(i=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=i+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){o2(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(i){this._position=this.totalTime?i*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class u{constructor(i){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=i;let e=0,o=0,a=0;const c=this.players.length;0==c?o2(()=>this._onFinish()):this.players.forEach(v=>{v.onDone(()=>{++e==c&&this._onFinish()}),v.onDestroy(()=>{++o==c&&this._onDestroy()}),v.onStart(()=>{++a==c&&this._onStart()})}),this.totalTime=this.players.reduce((v,A)=>Math.max(v,A.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this.players.forEach(i=>i.init())}onStart(i){this._onStartFns.push(i)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(i=>i()),this._onStartFns=[])}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(i=>i.play())}pause(){this.players.forEach(i=>i.pause())}restart(){this.players.forEach(i=>i.restart())}finish(){this._onFinish(),this.players.forEach(i=>i.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(i=>i.destroy()),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this.players.forEach(i=>i.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(i){const e=i*this.totalTime;this.players.forEach(o=>{const a=o.totalTime?Math.min(1,e/o.totalTime):1;o.setPosition(a)})}getPosition(){const i=this.players.reduce((e,o)=>null===e||o.totalTime>e.totalTime?o:e,null);return null!=i?i.getPosition():0}beforeDestroy(){this.players.forEach(i=>{i.beforeDestroy&&i.beforeDestroy()})}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}function m(){return"undefined"!=typeof window&&void 0!==window.document}function b(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function T(t){switch(t.length){case 0:return new ux;case 1:return t[0];default:return new u(t)}}function N(t,i,e,o,a={},c={}){const v=[],A=[];let z=-1,$=null;if(o.forEach(oe=>{const fe=oe.offset,ke=fe==z,Oe=ke&&$||{};Object.keys(oe).forEach(He=>{let ct=He,At=oe[He];if("offset"!==He)switch(ct=i.normalizePropertyName(ct,v),At){case"!":At=a[He];break;case If:At=c[He];break;default:At=i.normalizeStyleValue(He,ct,At,v)}Oe[ct]=At}),ke||A.push(Oe),$=Oe,z=fe}),v.length){const oe="\n - ";throw new Error(`Unable to animate due to the following errors:${oe}${v.join(oe)}`)}return A}function j(t,i,e,o){switch(i){case"start":t.onStart(()=>o(e&&W(e,"start",t)));break;case"done":t.onDone(()=>o(e&&W(e,"done",t)));break;case"destroy":t.onDestroy(()=>o(e&&W(e,"destroy",t)))}}function W(t,i,e){const o=e.totalTime,c=ie(t.element,t.triggerName,t.fromState,t.toState,i||t.phaseName,null==o?t.totalTime:o,!!e.disabled),v=t._data;return null!=v&&(c._data=v),c}function ie(t,i,e,o,a="",c=0,v){return{element:t,triggerName:i,fromState:e,toState:o,phaseName:a,totalTime:c,disabled:!!v}}function he(t,i,e){let o;return t instanceof Map?(o=t.get(i),o||t.set(i,o=e)):(o=t[i],o||(o=t[i]=e)),o}function Te(t){const i=t.indexOf(":");return[t.substring(1,i),t.substr(i+1)]}let Le=(t,i)=>!1,_t=(t,i)=>!1,nn=(t,i,e)=>[];const Pn=b();(Pn||"undefined"!=typeof Element)&&(Le=m()?(t,i)=>{for(;i&&i!==document.documentElement;){if(i===t)return!0;i=i.parentNode||i.host}return!1}:(t,i)=>t.contains(i),_t=(()=>{if(Pn||Element.prototype.matches)return(t,i)=>t.matches(i);{const t=Element.prototype,i=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return i?(e,o)=>i.apply(e,[o]):_t}})(),nn=(t,i,e)=>{let o=[];if(e){const a=t.querySelectorAll(i);for(let c=0;c<a.length;c++)o.push(a[c])}else{const a=t.querySelector(i);a&&o.push(a)}return o});let fi=null,Yi=!1;function Tr(t){fi||(fi=("undefined"!=typeof document?document.body:null)||{},Yi=!!fi.style&&"WebkitAppearance"in fi.style);let i=!0;return fi.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(i=t in fi.style,!i&&Yi&&(i="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in fi.style)),i}const yu=_t,__=Le,$m=nn;function y_(t){const i={};return Object.keys(t).forEach(e=>{const o=e.replace(/([a-z])([A-Z])/g,"$1-$2");i[o]=t[e]}),i}let v_=(()=>{class t{validateStyleProperty(e){return Tr(e)}matchesElement(e,o){return yu(e,o)}containsElement(e,o){return __(e,o)}query(e,o,a){return $m(e,o,a)}computeStyle(e,o,a){return a||""}animate(e,o,a,c,v,A=[],z){return new ux(a,c)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();class hv{}hv.NOOP=new v_;const hx="ng-enter",pk="ng-leave",fk="ng-trigger",mk=".ng-trigger",uO="ng-animating",s2=".ng-animating";function dx(t){if("number"==typeof t)return t;const i=t.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:a2(parseFloat(i[1]),i[2])}function a2(t,i){switch(i){case"s":return 1e3*t;default:return t}}function gk(t,i,e){return t.hasOwnProperty("duration")?t:function(t,i,e){let a,c=0,v="";if("string"==typeof t){const A=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===A)return i.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};a=a2(parseFloat(A[1]),A[2]);const z=A[3];null!=z&&(c=a2(parseFloat(z),A[4]));const $=A[5];$&&(v=$)}else a=t;if(!e){let A=!1,z=i.length;a<0&&(i.push("Duration values below 0 are not allowed for this animation step."),A=!0),c<0&&(i.push("Delay values below 0 are not allowed for this animation step."),A=!0),A&&i.splice(z,0,`The provided timing value "${t}" is invalid.`)}return{duration:a,delay:c,easing:v}}(t,i,e)}function Ew(t,i={}){return Object.keys(t).forEach(e=>{i[e]=t[e]}),i}function dv(t,i,e={}){if(i)for(let o in t)e[o]=t[o];else Ew(t,e);return e}function dO(t,i,e){return e?i+":"+e+";":""}function pO(t){let i="";for(let e=0;e<t.style.length;e++){const o=t.style.item(e);i+=dO(0,o,t.style.getPropertyValue(o))}for(const e in t.style)t.style.hasOwnProperty(e)&&!e.startsWith("_")&&(i+=dO(0,fB(e),t.style[e]));t.setAttribute("style",i)}function Xm(t,i,e){t.style&&(Object.keys(i).forEach(o=>{const a=c2(o);e&&!e.hasOwnProperty(o)&&(e[o]=t.style[a]),t.style[a]=i[o]}),b()&&pO(t))}function px(t,i){t.style&&(Object.keys(i).forEach(e=>{const o=c2(e);t.style[o]=""}),b()&&pO(t))}function kS(t){return Array.isArray(t)?1==t.length?t[0]:r2(t):t}const l2=new RegExp("{{\\s*(.+?)\\s*}}","g");function fO(t){let i=[];if("string"==typeof t){let e;for(;e=l2.exec(t);)i.push(e[1]);l2.lastIndex=0}return i}function _k(t,i,e){const o=t.toString(),a=o.replace(l2,(c,v)=>{let A=i[v];return i.hasOwnProperty(v)||(e.push(`Please provide a value for the animation param ${v}`),A=""),A.toString()});return a==o?t:a}function yk(t){const i=[];let e=t.next();for(;!e.done;)i.push(e.value),e=t.next();return i}const pB=/-+([a-z0-9])/g;function c2(t){return t.replace(pB,(...i)=>i[1].toUpperCase())}function fB(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function mO(t,i){return 0===t||0===i}function gO(t,i,e){const o=Object.keys(e);if(o.length&&i.length){let c=i[0],v=[];if(o.forEach(A=>{c.hasOwnProperty(A)||v.push(A),c[A]=e[A]}),v.length)for(var a=1;a<i.length;a++){let A=i[a];v.forEach(function(z){A[z]=u2(t,z)})}}return i}function Vd(t,i,e){switch(i.type){case 7:return t.visitTrigger(i,e);case 0:return t.visitState(i,e);case 1:return t.visitTransition(i,e);case 2:return t.visitSequence(i,e);case 3:return t.visitGroup(i,e);case 4:return t.visitAnimate(i,e);case 5:return t.visitKeyframes(i,e);case 6:return t.visitStyle(i,e);case 8:return t.visitReference(i,e);case 9:return t.visitAnimateChild(i,e);case 10:return t.visitAnimateRef(i,e);case 11:return t.visitQuery(i,e);case 12:return t.visitStagger(i,e);default:throw new Error(`Unable to resolve animation metadata node #${i.type}`)}}function u2(t,i){return window.getComputedStyle(t)[i]}function mB(t,i){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(o=>function(t,i,e){if(":"==t[0]){const z=function(t,i){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,o)=>parseFloat(o)>parseFloat(e);case":decrement":return(e,o)=>parseFloat(o)<parseFloat(e);default:return i.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,e);if("function"==typeof z)return void i.push(z);t=z}const o=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==o||o.length<4)return e.push(`The provided transition expression "${t}" is not supported`),i;const a=o[1],c=o[2],v=o[3];i.push(_O(a,v));"<"==c[0]&&!("*"==a&&"*"==v)&&i.push(_O(v,a))}(o,e,i)):e.push(t),e}const bk=new Set(["true","1"]),xk=new Set(["false","0"]);function _O(t,i){const e=bk.has(t)||xk.has(t),o=bk.has(i)||xk.has(i);return(a,c)=>{let v="*"==t||t==a,A="*"==i||i==c;return!v&&e&&"boolean"==typeof a&&(v=a?bk.has(t):xk.has(t)),!A&&o&&"boolean"==typeof c&&(A=c?bk.has(i):xk.has(i)),v&&A}}const yB=new RegExp("s*:selfs*,?","g");function h2(t,i,e){return new vB(t).build(i,e)}class vB{constructor(i){this._driver=i}build(i,e){const o=new wB(e);return this._resetContextStyleTimingState(o),Vd(this,kS(i),o)}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles={},i.collectedStyles[""]={},i.currentTime=0}visitTrigger(i,e){let o=e.queryCount=0,a=e.depCount=0;const c=[],v=[];return"@"==i.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),i.definitions.forEach(A=>{if(this._resetContextStyleTimingState(e),0==A.type){const z=A,$=z.name;$.toString().split(/\s*,\s*/).forEach(oe=>{z.name=oe,c.push(this.visitState(z,e))}),z.name=$}else if(1==A.type){const z=this.visitTransition(A,e);o+=z.queryCount,a+=z.depCount,v.push(z)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:i.name,states:c,transitions:v,queryCount:o,depCount:a,options:null}}visitState(i,e){const o=this.visitStyle(i.styles,e),a=i.options&&i.options.params||null;if(o.containsDynamicStyles){const c=new Set,v=a||{};if(o.styles.forEach(A=>{if(wk(A)){const z=A;Object.keys(z).forEach($=>{fO(z[$]).forEach(oe=>{v.hasOwnProperty(oe)||c.add(oe)})})}}),c.size){const A=yk(c.values());e.errors.push(`state("${i.name}", ...) must define default values for all the following style substitutions: ${A.join(", ")}`)}}return{type:0,name:i.name,style:o,options:a?{params:a}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;const o=Vd(this,kS(i.animation),e);return{type:1,matchers:mB(i.expr,e.errors),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:fx(i.options)}}visitSequence(i,e){return{type:2,steps:i.steps.map(o=>Vd(this,o,e)),options:fx(i.options)}}visitGroup(i,e){const o=e.currentTime;let a=0;const c=i.steps.map(v=>{e.currentTime=o;const A=Vd(this,v,e);return a=Math.max(a,e.currentTime),A});return e.currentTime=a,{type:3,steps:c,options:fx(i.options)}}visitAnimate(i,e){const o=function(t,i){let e=null;if(t.hasOwnProperty("duration"))e=t;else if("number"==typeof t)return d2(gk(t,i).duration,0,"");const o=t;if(o.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=d2(0,0,"");return c.dynamic=!0,c.strValue=o,c}return e=e||gk(o,i),d2(e.duration,e.delay,e.easing)}(i.timings,e.errors);e.currentAnimateTimings=o;let a,c=i.styles?i.styles:Rn({});if(5==c.type)a=this.visitKeyframes(c,e);else{let v=i.styles,A=!1;if(!v){A=!0;const $={};o.easing&&($.easing=o.easing),v=Rn($)}e.currentTime+=o.duration+o.delay;const z=this.visitStyle(v,e);z.isEmptyStep=A,a=z}return e.currentAnimateTimings=null,{type:4,timings:o,style:a,options:null}}visitStyle(i,e){const o=this._makeStyleAst(i,e);return this._validateStyleAst(o,e),o}_makeStyleAst(i,e){const o=[];Array.isArray(i.styles)?i.styles.forEach(v=>{"string"==typeof v?v==If?o.push(v):e.errors.push(`The provided style string value ${v} is not allowed.`):o.push(v)}):o.push(i.styles);let a=!1,c=null;return o.forEach(v=>{if(wk(v)){const A=v,z=A.easing;if(z&&(c=z,delete A.easing),!a)for(let $ in A)if(A[$].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:o,easing:c,offset:i.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(i,e){const o=e.currentAnimateTimings;let a=e.currentTime,c=e.currentTime;o&&c>0&&(c-=o.duration+o.delay),i.styles.forEach(v=>{"string"!=typeof v&&Object.keys(v).forEach(A=>{if(!this._driver.validateStyleProperty(A))return void e.errors.push(`The provided animation property "${A}" is not a supported CSS property for animations`);const z=e.collectedStyles[e.currentQuerySelector],$=z[A];let oe=!0;$&&(c!=a&&c>=$.startTime&&a<=$.endTime&&(e.errors.push(`The CSS property "${A}" that exists between the times of "${$.startTime}ms" and "${$.endTime}ms" is also being animated in a parallel animation between the times of "${c}ms" and "${a}ms"`),oe=!1),c=$.startTime),oe&&(z[A]={startTime:c,endTime:a}),e.options&&function(t,i,e){const o=i.params||{},a=fO(t);a.length&&a.forEach(c=>{o.hasOwnProperty(c)||e.push(`Unable to resolve the local animation param ${c} in the given list of values`)})}(v[A],e.options,e.errors)})})}visitKeyframes(i,e){const o={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),o;let c=0;const v=[];let A=!1,z=!1,$=0;const oe=i.steps.map(Qt=>{const Sn=this._makeStyleAst(Qt,e);let xn=null!=Sn.offset?Sn.offset:function(t){if("string"==typeof t)return null;let i=null;if(Array.isArray(t))t.forEach(e=>{if(wk(e)&&e.hasOwnProperty("offset")){const o=e;i=parseFloat(o.offset),delete o.offset}});else if(wk(t)&&t.hasOwnProperty("offset")){const e=t;i=parseFloat(e.offset),delete e.offset}return i}(Sn.styles),Qn=0;return null!=xn&&(c++,Qn=Sn.offset=xn),z=z||Qn<0||Qn>1,A=A||Qn<$,$=Qn,v.push(Qn),Sn});z&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),A&&e.errors.push("Please ensure that all keyframe offsets are in order");const fe=i.steps.length;let ke=0;c>0&&c<fe?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(ke=1/(fe-1));const Oe=fe-1,He=e.currentTime,ct=e.currentAnimateTimings,At=ct.duration;return oe.forEach((Qt,Sn)=>{const xn=ke>0?Sn==Oe?1:ke*Sn:v[Sn],Qn=xn*At;e.currentTime=He+ct.delay+Qn,ct.duration=Qn,this._validateStyleAst(Qt,e),Qt.offset=xn,o.styles.push(Qt)}),o}visitReference(i,e){return{type:8,animation:Vd(this,kS(i.animation),e),options:fx(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:9,options:fx(i.options)}}visitAnimateRef(i,e){return{type:10,animation:this.visitReference(i.animation,e),options:fx(i.options)}}visitQuery(i,e){const o=e.currentQuerySelector,a=i.options||{};e.queryCount++,e.currentQuery=i;const[c,v]=function(t){const i=!!t.split(/\s*,\s*/).find(e=>":self"==e);return i&&(t=t.replace(yB,"")),[t=t.replace(/@\*/g,mk).replace(/@\w+/g,e=>mk+"-"+e.substr(1)).replace(/:animating/g,s2),i]}(i.selector);e.currentQuerySelector=o.length?o+" "+c:c,he(e.collectedStyles,e.currentQuerySelector,{});const A=Vd(this,kS(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=o,{type:11,selector:c,limit:a.limit||0,optional:!!a.optional,includeSelf:v,animation:A,originalSelector:i.selector,options:fx(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const o="full"===i.timings?{duration:0,delay:0,easing:"full"}:gk(i.timings,e.errors,!0);return{type:12,animation:Vd(this,kS(i.animation),e),timings:o,options:null}}}class wB{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function wk(t){return!Array.isArray(t)&&"object"==typeof t}function fx(t){return t?(t=Ew(t)).params&&(t.params=function(t){return t?Ew(t):null}(t.params)):t={},t}function d2(t,i,e){return{duration:t,delay:i,easing:e}}function p2(t,i,e,o,a,c,v=null,A=!1){return{type:1,element:t,keyframes:i,preStyleProps:e,postStyleProps:o,duration:a,delay:c,totalTime:a+c,easing:v,subTimeline:A}}class Ck{constructor(){this._map=new Map}consume(i){let e=this._map.get(i);return e?this._map.delete(i):e=[],e}append(i,e){let o=this._map.get(i);o||this._map.set(i,o=[]),o.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const MB=new RegExp(":enter","g"),AB=new RegExp(":leave","g");function f2(t,i,e,o,a,c={},v={},A,z,$=[]){return(new DB).buildKeyframes(t,i,e,o,a,c,v,A,z,$)}class DB{buildKeyframes(i,e,o,a,c,v,A,z,$,oe=[]){$=$||new Ck;const fe=new m2(i,e,$,a,c,oe,[]);fe.options=z,fe.currentTimeline.setStyles([v],null,fe.errors,z),Vd(this,o,fe);const ke=fe.timelines.filter(Oe=>Oe.containsAnimation());if(ke.length&&Object.keys(A).length){const Oe=ke[ke.length-1];Oe.allowOnlyTimelineStyles()||Oe.setStyles([A],null,fe.errors,z)}return ke.length?ke.map(Oe=>Oe.buildKeyframes()):[p2(e,[],[],[],0,0,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){const o=e.subInstructions.consume(e.element);if(o){const a=e.createSubContext(i.options),c=e.currentTimeline.currentTime,v=this._visitSubInstructions(o,a,a.options);c!=v&&e.transformIntoNewTimeline(v)}e.previousNode=i}visitAnimateRef(i,e){const o=e.createSubContext(i.options);o.transformIntoNewTimeline(),this.visitReference(i.animation,o),e.transformIntoNewTimeline(o.currentTimeline.currentTime),e.previousNode=i}_visitSubInstructions(i,e,o){let c=e.currentTimeline.currentTime;const v=null!=o.duration?dx(o.duration):null,A=null!=o.delay?dx(o.delay):null;return 0!==v&&i.forEach(z=>{const $=e.appendInstructionToTimeline(z,v,A);c=Math.max(c,$.duration+$.delay)}),c}visitReference(i,e){e.updateOptions(i.options,!0),Vd(this,i.animation,e),e.previousNode=i}visitSequence(i,e){const o=e.subContextCount;let a=e;const c=i.options;if(c&&(c.params||c.delay)&&(a=e.createSubContext(c),a.transformIntoNewTimeline(),null!=c.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Sk);const v=dx(c.delay);a.delayNextStep(v)}i.steps.length&&(i.steps.forEach(v=>Vd(this,v,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>o&&a.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){const o=[];let a=e.currentTimeline.currentTime;const c=i.options&&i.options.delay?dx(i.options.delay):0;i.steps.forEach(v=>{const A=e.createSubContext(i.options);c&&A.delayNextStep(c),Vd(this,v,A),a=Math.max(a,A.currentTimeline.currentTime),o.push(A.currentTimeline)}),o.forEach(v=>e.currentTimeline.mergeTimelineCollectedStyles(v)),e.transformIntoNewTimeline(a),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){const o=i.strValue;return gk(e.params?_k(o,e.params,e.errors):o,e.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){const o=e.currentAnimateTimings=this._visitTiming(i.timings,e),a=e.currentTimeline;o.delay&&(e.incrementTime(o.delay),a.snapshotCurrentStyles());const c=i.style;5==c.type?this.visitKeyframes(c,e):(e.incrementTime(o.duration),this.visitStyle(c,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){const o=e.currentTimeline,a=e.currentAnimateTimings;!a&&o.getCurrentStyleProperties().length&&o.forwardFrame();const c=a&&a.easing||i.easing;i.isEmptyStep?o.applyEmptyStep(c):o.setStyles(i.styles,c,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){const o=e.currentAnimateTimings,a=e.currentTimeline.duration,c=o.duration,A=e.createSubContext().currentTimeline;A.easing=o.easing,i.styles.forEach(z=>{A.forwardTime((z.offset||0)*c),A.setStyles(z.styles,z.easing,e.errors,e.options),A.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(A),e.transformIntoNewTimeline(a+c),e.previousNode=i}visitQuery(i,e){const o=e.currentTimeline.currentTime,a=i.options||{},c=a.delay?dx(a.delay):0;c&&(6===e.previousNode.type||0==o&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Sk);let v=o;const A=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=A.length;let z=null;A.forEach(($,oe)=>{e.currentQueryIndex=oe;const fe=e.createSubContext(i.options,$);c&&fe.delayNextStep(c),$===e.element&&(z=fe.currentTimeline),Vd(this,i.animation,fe),fe.currentTimeline.applyStylesToKeyframe(),v=Math.max(v,fe.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(v),z&&(e.currentTimeline.mergeTimelineCollectedStyles(z),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){const o=e.parentContext,a=e.currentTimeline,c=i.timings,v=Math.abs(c.duration),A=v*(e.currentQueryTotal-1);let z=v*e.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":z=A-z;break;case"full":z=o.currentStaggerTime}const oe=e.currentTimeline;z&&oe.delayNextStep(z);const fe=oe.currentTime;Vd(this,i.animation,e),e.previousNode=i,o.currentStaggerTime=a.currentTime-fe+(a.startTime-o.currentTimeline.startTime)}}const Sk={};class m2{constructor(i,e,o,a,c,v,A,z){this._driver=i,this.element=e,this.subInstructions=o,this._enterClassName=a,this._leaveClassName=c,this.errors=v,this.timelines=A,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Sk,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=z||new Ek(this._driver,e,0),A.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;const o=i;let a=this.options;null!=o.duration&&(a.duration=dx(o.duration)),null!=o.delay&&(a.delay=dx(o.delay));const c=o.params;if(c){let v=a.params;v||(v=this.options.params={}),Object.keys(c).forEach(A=>{(!e||!v.hasOwnProperty(A))&&(v[A]=_k(c[A],v,this.errors))})}}_copyOptions(){const i={};if(this.options){const e=this.options.params;if(e){const o=i.params={};Object.keys(e).forEach(a=>{o[a]=e[a]})}}return i}createSubContext(i=null,e,o){const a=e||this.element,c=new m2(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,o||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(i),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(i){return this.previousNode=Sk,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,o){const a={duration:null!=e?e:i.duration,delay:this.currentTimeline.currentTime+(null!=o?o:0)+i.delay,easing:""},c=new IB(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,a,i.stretchStartingKeyframe);return this.timelines.push(c),a}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,o,a,c,v){let A=[];if(a&&A.push(this.element),i.length>0){i=(i=i.replace(MB,"."+this._enterClassName)).replace(AB,"."+this._leaveClassName);let $=this._driver.query(this.element,i,1!=o);0!==o&&($=o<0?$.slice($.length+o,$.length):$.slice(0,o)),A.push(...$)}return!c&&0==A.length&&v.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),A}}class Ek{constructor(i,e,o,a){this._driver=i,this.element=e,this.startTime=o,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new Ek(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles[i]=e,this._globalTimelineStyles[i]=e,this._styleSummary[i]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&(this._previousKeyframe.easing=i),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||If,this._currentKeyframe[e]=If}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,o,a){e&&(this._previousKeyframe.easing=e);const c=a&&a.params||{},v=function(t,i){const e={};let o;return t.forEach(a=>{"*"===a?(o=o||Object.keys(i),o.forEach(c=>{e[c]=If})):dv(a,!1,e)}),e}(i,this._globalTimelineStyles);Object.keys(v).forEach(A=>{const z=_k(v[A],c,o);this._pendingStyles[A]=z,this._localTimelineStyles.hasOwnProperty(A)||(this._backFill[A]=this._globalTimelineStyles.hasOwnProperty(A)?this._globalTimelineStyles[A]:If),this._updateStyle(A,z)})}applyStylesToKeyframe(){const i=this._pendingStyles,e=Object.keys(i);0!=e.length&&(this._pendingStyles={},e.forEach(o=>{this._currentKeyframe[o]=i[o]}),Object.keys(this._localTimelineStyles).forEach(o=>{this._currentKeyframe.hasOwnProperty(o)||(this._currentKeyframe[o]=this._localTimelineStyles[o])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(i=>{const e=this._localTimelineStyles[i];this._pendingStyles[i]=e,this._updateStyle(i,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){Object.keys(i._styleSummary).forEach(e=>{const o=this._styleSummary[e],a=i._styleSummary[e];(!o||a.time>o.time)&&this._updateStyle(e,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,e=new Set,o=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((A,z)=>{const $=dv(A,!0);Object.keys($).forEach(oe=>{const fe=$[oe];"!"==fe?i.add(oe):fe==If&&e.add(oe)}),o||($.offset=z/this.duration),a.push($)});const c=i.size?yk(i.values()):[],v=e.size?yk(e.values()):[];if(o){const A=a[0],z=Ew(A);A.offset=0,z.offset=1,a=[A,z]}return p2(this.element,a,c,v,this.duration,this.startTime,this.easing,!1)}}class IB extends Ek{constructor(i,e,o,a,c,v,A=!1){super(i,e,v.delay),this.keyframes=o,this.preStyleProps=a,this.postStyleProps=c,this._stretchStartingKeyframe=A,this.timings={duration:v.duration,delay:v.delay,easing:v.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:o,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){const c=[],v=o+e,A=e/v,z=dv(i[0],!1);z.offset=0,c.push(z);const $=dv(i[0],!1);$.offset=bO(A),c.push($);const oe=i.length-1;for(let fe=1;fe<=oe;fe++){let ke=dv(i[fe],!1);ke.offset=bO((e+ke.offset*o)/v),c.push(ke)}o=v,e=0,a="",i=c}return p2(this.element,i,this.preStyleProps,this.postStyleProps,o,e,a,!0)}}function bO(t,i=3){const e=Math.pow(10,i-1);return Math.round(t*e)/e}class g2{}class RB extends g2{normalizePropertyName(i,e){return c2(i)}normalizeStyleValue(i,e,o,a){let c="";const v=o.toString().trim();if(OB[e]&&0!==o&&"0"!==o)if("number"==typeof o)c="px";else{const A=o.match(/^[+-]?[\d\.]+([a-z]*)$/);A&&0==A[1].length&&a.push(`Please provide a CSS unit value for ${i}:${o}`)}return v+c}}const OB=(()=>function(t){const i={};return t.forEach(e=>i[e]=!0),i}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function xO(t,i,e,o,a,c,v,A,z,$,oe,fe,ke){return{type:0,element:t,triggerName:i,isRemovalTransition:a,fromState:e,fromStyles:c,toState:o,toStyles:v,timelines:A,queriedElements:z,preStyleProps:$,postStyleProps:oe,totalTime:fe,errors:ke}}const _2={};class wO{constructor(i,e,o){this._triggerName=i,this.ast=e,this._stateStyles=o}match(i,e,o,a){return function(t,i,e,o,a){return t.some(c=>c(i,e,o,a))}(this.ast.matchers,i,e,o,a)}buildStyles(i,e,o){const a=this._stateStyles["*"],c=this._stateStyles[i],v=a?a.buildStyles(e,o):{};return c?c.buildStyles(e,o):v}build(i,e,o,a,c,v,A,z,$,oe){const fe=[],ke=this.ast.options&&this.ast.options.params||_2,He=this.buildStyles(o,A&&A.params||_2,fe),ct=z&&z.params||_2,At=this.buildStyles(a,ct,fe),Qt=new Set,Sn=new Map,xn=new Map,Qn="void"===a,ii={params:Object.assign(Object.assign({},ke),ct)},er=oe?[]:f2(i,e,this.ast.animation,c,v,He,At,ii,$,fe);let Or=0;if(er.forEach(hs=>{Or=Math.max(hs.duration+hs.delay,Or)}),fe.length)return xO(e,this._triggerName,o,a,Qn,He,At,[],[],Sn,xn,Or,fe);er.forEach(hs=>{const ac=hs.element,uE=he(Sn,ac,{});hs.preStyleProps.forEach(kx=>uE[kx]=!0);const hE=he(xn,ac,{});hs.postStyleProps.forEach(kx=>hE[kx]=!0),ac!==e&&Qt.add(ac)});const na=yk(Qt.values());return xO(e,this._triggerName,o,a,Qn,He,At,er,na,Sn,xn,Or)}}class NB{constructor(i,e,o){this.styles=i,this.defaultParams=e,this.normalizer=o}buildStyles(i,e){const o={},a=Ew(this.defaultParams);return Object.keys(i).forEach(c=>{const v=i[c];null!=v&&(a[c]=v)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const v=c;Object.keys(v).forEach(A=>{let z=v[A];z.length>1&&(z=_k(z,a,e));const $=this.normalizer.normalizePropertyName(A,e);z=this.normalizer.normalizeStyleValue(A,$,z,e),o[$]=z})}}),o}}class zB{constructor(i,e,o){this.name=i,this.ast=e,this._normalizer=o,this.transitionFactories=[],this.states={},e.states.forEach(a=>{this.states[a.name]=new NB(a.style,a.options&&a.options.params||{},o)}),CO(this.states,"true","1"),CO(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new wO(i,a,this.states))}),this.fallbackTransition=function(t,i,e){return new wO(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(v,A)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,o,a){return this.transitionFactories.find(v=>v.match(i,e,o,a))||null}matchStyles(i,e,o){return this.fallbackTransition.buildStyles(i,e,o)}}function CO(t,i,e){t.hasOwnProperty(i)?t.hasOwnProperty(e)||(t[e]=t[i]):t.hasOwnProperty(e)&&(t[i]=t[e])}const UB=new Ck;class HB{constructor(i,e,o){this.bodyNode=i,this._driver=e,this._normalizer=o,this._animations={},this._playersById={},this.players=[]}register(i,e){const o=[],a=h2(this._driver,e,o);if(o.length)throw new Error(`Unable to build the animation due to the following errors: ${o.join("\n")}`);this._animations[i]=a}_buildPlayer(i,e,o){const a=i.element,c=N(0,this._normalizer,0,i.keyframes,e,o);return this._driver.animate(a,c,i.duration,i.delay,i.easing,[],!0)}create(i,e,o={}){const a=[],c=this._animations[i];let v;const A=new Map;if(c?(v=f2(this._driver,e,c,hx,pk,{},{},o,UB,a),v.forEach(oe=>{const fe=he(A,oe.element,{});oe.postStyleProps.forEach(ke=>fe[ke]=null)})):(a.push("The requested animation doesn't exist or has already been destroyed"),v=[]),a.length)throw new Error(`Unable to create the animation due to the following errors: ${a.join("\n")}`);A.forEach((oe,fe)=>{Object.keys(oe).forEach(ke=>{oe[ke]=this._driver.computeStyle(fe,ke,If)})});const $=T(v.map(oe=>{const fe=A.get(oe.element);return this._buildPlayer(oe,{},fe)}));return this._playersById[i]=$,$.onDestroy(()=>this.destroy(i)),this.players.push($),$}destroy(i){const e=this._getPlayer(i);e.destroy(),delete this._playersById[i];const o=this.players.indexOf(e);o>=0&&this.players.splice(o,1)}_getPlayer(i){const e=this._playersById[i];if(!e)throw new Error(`Unable to find the timeline player referenced by ${i}`);return e}listen(i,e,o,a){const c=ie(e,"","","");return j(this._getPlayer(i),o,c,a),()=>{}}command(i,e,o,a){if("register"==o)return void this.register(i,a[0]);if("create"==o)return void this.create(i,e,a[0]||{});const c=this._getPlayer(i);switch(o){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(i)}}}const SO="ng-animate-queued",EO="ng-animate-disabled",TO=".ng-animate-disabled",qB=[],MO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ZB={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pp="__ng_removed";class y2{constructor(i,e=""){this.namespaceId=e;const o=i&&i.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(o?i.value:i),o){const c=Ew(i);delete c.value,this.options=c}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(i){const e=i.params;if(e){const o=this.options.params;Object.keys(e).forEach(a=>{null==o[a]&&(o[a]=e[a])})}}}const AS="void",v2=new y2(AS);class WB{constructor(i,e,o){this.id=i,this.hostElement=e,this._engine=o,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,Rp(e,this._hostClassName)}listen(i,e,o,a){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${o}" because the animation trigger "${e}" doesn't exist!`);if(null==o||0==o.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(t){return"start"==t||"done"==t}(o))throw new Error(`The provided animation trigger event "${o}" for the animation trigger "${e}" is not supported!`);const c=he(this._elementListeners,i,[]),v={name:e,phase:o,callback:a};c.push(v);const A=he(this._engine.statesByElement,i,{});return A.hasOwnProperty(e)||(Rp(i,fk),Rp(i,fk+"-"+e),A[e]=v2),()=>{this._engine.afterFlush(()=>{const z=c.indexOf(v);z>=0&&c.splice(z,1),this._triggers[e]||delete A[e]})}}register(i,e){return!this._triggers[i]&&(this._triggers[i]=e,!0)}_getTrigger(i){const e=this._triggers[i];if(!e)throw new Error(`The provided animation trigger "${i}" has not been registered!`);return e}trigger(i,e,o,a=!0){const c=this._getTrigger(e),v=new b2(this.id,e,i);let A=this._engine.statesByElement.get(i);A||(Rp(i,fk),Rp(i,fk+"-"+e),this._engine.statesByElement.set(i,A={}));let z=A[e];const $=new y2(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&z&&$.absorbOptions(z.options),A[e]=$,z||(z=v2),$.value!==AS&&z.value===$.value){if(!function(t,i){const e=Object.keys(t),o=Object.keys(i);if(e.length!=o.length)return!1;for(let a=0;a<e.length;a++){const c=e[a];if(!i.hasOwnProperty(c)||t[c]!==i[c])return!1}return!0}(z.params,$.params)){const ct=[],At=c.matchStyles(z.value,z.params,ct),Qt=c.matchStyles($.value,$.params,ct);ct.length?this._engine.reportError(ct):this._engine.afterFlush(()=>{px(i,At),Xm(i,Qt)})}return}const ke=he(this._engine.playersByElement,i,[]);ke.forEach(ct=>{ct.namespaceId==this.id&&ct.triggerName==e&&ct.queued&&ct.destroy()});let Oe=c.matchTransition(z.value,$.value,i,$.params),He=!1;if(!Oe){if(!a)return;Oe=c.fallbackTransition,He=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:Oe,fromState:z,toState:$,player:v,isFallbackTransition:He}),He||(Rp(i,SO),v.onStart(()=>{Tw(i,SO)})),v.onDone(()=>{let ct=this.players.indexOf(v);ct>=0&&this.players.splice(ct,1);const At=this._engine.playersByElement.get(i);if(At){let Qt=At.indexOf(v);Qt>=0&&At.splice(Qt,1)}}),this.players.push(v),ke.push(v),v}deregister(i){delete this._triggers[i],this._engine.statesByElement.forEach((e,o)=>{delete e[i]}),this._elementListeners.forEach((e,o)=>{this._elementListeners.set(o,e.filter(a=>a.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const e=this._engine.playersByElement.get(i);e&&(e.forEach(o=>o.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){const o=this._engine.driver.query(i,mk,!0);o.forEach(a=>{if(a[Pp])return;const c=this._engine.fetchNamespacesByElement(a);c.size?c.forEach(v=>v.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(i,e,o,a){const c=this._engine.statesByElement.get(i);if(c){const v=[];if(Object.keys(c).forEach(A=>{if(this._triggers[A]){const z=this.trigger(i,A,AS,a);z&&v.push(z)}}),v.length)return this._engine.markElementAsRemoved(this.id,i,!0,e),o&&T(v).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const e=this._elementListeners.get(i),o=this._engine.statesByElement.get(i);if(e&&o){const a=new Set;e.forEach(c=>{const v=c.name;if(a.has(v))return;a.add(v);const z=this._triggers[v].fallbackTransition,$=o[v]||v2,oe=new y2(AS),fe=new b2(this.id,v,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:v,transition:z,fromState:$,toState:oe,player:fe,isFallbackTransition:!0})})}}removeNode(i,e){const o=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let a=!1;if(o.totalAnimations){const c=o.players.length?o.playersByQueriedElement.get(i):[];if(c&&c.length)a=!0;else{let v=i;for(;v=v.parentNode;)if(o.statesByElement.get(v)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(i),a)o.markElementAsRemoved(this.id,i,!1,e);else{const c=i[Pp];(!c||c===MO)&&(o.afterFlush(()=>this.clearElementCache(i)),o.destroyInnerAnimations(i),o._onRemovalComplete(i,e))}}insertNode(i,e){Rp(i,this._hostClassName)}drainQueuedTransitions(i){const e=[];return this._queue.forEach(o=>{const a=o.player;if(a.destroyed)return;const c=o.element,v=this._elementListeners.get(c);v&&v.forEach(A=>{if(A.name==o.triggerName){const z=ie(c,o.triggerName,o.fromState.value,o.toState.value);z._data=i,j(o.player,A.phase,z,A.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(o)}),this._queue=[],e.sort((o,a)=>{const c=o.transition.ast.depCount,v=a.transition.ast.depCount;return 0==c||0==v?c-v:this._engine.driver.containsElement(o.element,a.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}elementContainsData(i){let e=!1;return this._elementListeners.has(i)&&(e=!0),e=!!this._queue.find(o=>o.element===i)||e,e}}class $B{constructor(i,e,o){this.bodyNode=i,this.driver=e,this._normalizer=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,c)=>{}}_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}get queuedPlayers(){const i=[];return this._namespaceList.forEach(e=>{e.players.forEach(o=>{o.queued&&i.push(o)})}),i}createNamespace(i,e){const o=new WB(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(o,e):(this.newHostElements.set(e,o),this.collectEnterElement(e)),this._namespaceLookup[i]=o}_balanceNamespaceList(i,e){const o=this._namespaceList.length-1;if(o>=0){let a=!1;for(let c=o;c>=0;c--)if(this.driver.containsElement(this._namespaceList[c].hostElement,e)){this._namespaceList.splice(c+1,0,i),a=!0;break}a||this._namespaceList.splice(0,0,i)}else this._namespaceList.push(i);return this.namespacesByHostElement.set(e,i),i}register(i,e){let o=this._namespaceLookup[i];return o||(o=this.createNamespace(i,e)),o}registerTrigger(i,e,o){let a=this._namespaceLookup[i];a&&a.register(e,o)&&this.totalAnimations++}destroy(i,e){if(!i)return;const o=this._fetchNamespace(i);this.afterFlush(()=>{this.namespacesByHostElement.delete(o.hostElement),delete this._namespaceLookup[i];const a=this._namespaceList.indexOf(o);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>o.destroy(e))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const e=new Set,o=this.statesByElement.get(i);if(o){const a=Object.keys(o);for(let c=0;c<a.length;c++){const v=o[a[c]].namespaceId;if(v){const A=this._fetchNamespace(v);A&&e.add(A)}}}return e}trigger(i,e,o,a){if(Tk(e)){const c=this._fetchNamespace(i);if(c)return c.trigger(e,o,a),!0}return!1}insertNode(i,e,o,a){if(!Tk(e))return;const c=e[Pp];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const v=this.collectedLeaveElements.indexOf(e);v>=0&&this.collectedLeaveElements.splice(v,1)}if(i){const v=this._fetchNamespace(i);v&&v.insertNode(e,o)}a&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),Rp(i,EO)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),Tw(i,EO))}removeNode(i,e,o,a){if(Tk(e)){const c=i?this._fetchNamespace(i):null;if(c?c.removeNode(e,a):this.markElementAsRemoved(i,e,!1,a),o){const v=this.namespacesByHostElement.get(e);v&&v.id!==i&&v.removeNode(e,a)}}else this._onRemovalComplete(e,a)}markElementAsRemoved(i,e,o,a){this.collectedLeaveElements.push(e),e[Pp]={namespaceId:i,setForRemoval:a,hasAnimation:o,removedBeforeQueried:!1}}listen(i,e,o,a,c){return Tk(e)?this._fetchNamespace(i).listen(e,o,a,c):()=>{}}_buildInstruction(i,e,o,a,c){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,o,a,i.fromState.options,i.toState.options,e,c)}destroyInnerAnimations(i){let e=this.driver.query(i,mk,!0);e.forEach(o=>this.destroyActiveAnimationsForElement(o)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(i,s2,!0),e.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(i){const e=this.playersByElement.get(i);e&&e.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(i){const e=this.playersByQueriedElement.get(i);e&&e.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return T(this.players).onDone(()=>i());i()})}processLeaveNode(i){const e=i[Pp];if(e&&e.setForRemoval){if(i[Pp]=MO,e.namespaceId){this.destroyInnerAnimations(i);const o=this._fetchNamespace(e.namespaceId);o&&o.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}this.driver.matchesElement(i,TO)&&this.markElementAsDisabled(i,!1),this.driver.query(i,TO,!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,a)=>this._balanceNamespaceList(o,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++)Rp(this.collectedEnterElements[o],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const o=[];try{e=this._flushAnimations(o,i)}finally{for(let a=0;a<o.length;a++)o[a]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){const o=this._whenQuietFns;this._whenQuietFns=[],e.length?T(e).onDone(()=>{o.forEach(a=>a())}):o.forEach(a=>a())}}reportError(i){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${i.join("\n")}`)}_flushAnimations(i,e){const o=new Ck,a=[],c=new Map,v=[],A=new Map,z=new Map,$=new Map,oe=new Set;this.disabledNodes.forEach(_i=>{oe.add(_i);const Vi=this.driver.query(_i,".ng-animate-queued",!0);for(let pr=0;pr<Vi.length;pr++)oe.add(Vi[pr])});const fe=this.bodyNode,ke=Array.from(this.statesByElement.keys()),Oe=DO(ke,this.collectedEnterElements),He=new Map;let ct=0;Oe.forEach((_i,Vi)=>{const pr=hx+ct++;He.set(Vi,pr),_i.forEach(yo=>Rp(yo,pr))});const At=[],Qt=new Set,Sn=new Set;for(let _i=0;_i<this.collectedLeaveElements.length;_i++){const Vi=this.collectedLeaveElements[_i],pr=Vi[Pp];pr&&pr.setForRemoval&&(At.push(Vi),Qt.add(Vi),pr.hasAnimation?this.driver.query(Vi,".ng-star-inserted",!0).forEach(yo=>Qt.add(yo)):Sn.add(Vi))}const xn=new Map,Qn=DO(ke,Array.from(Qt));Qn.forEach((_i,Vi)=>{const pr=pk+ct++;xn.set(Vi,pr),_i.forEach(yo=>Rp(yo,pr))}),i.push(()=>{Oe.forEach((_i,Vi)=>{const pr=He.get(Vi);_i.forEach(yo=>Tw(yo,pr))}),Qn.forEach((_i,Vi)=>{const pr=xn.get(Vi);_i.forEach(yo=>Tw(yo,pr))}),At.forEach(_i=>{this.processLeaveNode(_i)})});const ii=[],er=[];for(let _i=this._namespaceList.length-1;_i>=0;_i--)this._namespaceList[_i].drainQueuedTransitions(e).forEach(pr=>{const yo=pr.player,lc=pr.element;if(ii.push(yo),this.collectedEnterElements.length){const tg=lc[Pp];if(tg&&tg.setForMove)return void yo.destroy()}const eg=!fe||!this.driver.containsElement(fe,lc),Hd=xn.get(lc),kv=He.get(lc),Ta=this._buildInstruction(pr,o,kv,Hd,eg);if(Ta.errors&&Ta.errors.length)er.push(Ta);else{if(eg)return yo.onStart(()=>px(lc,Ta.fromStyles)),yo.onDestroy(()=>Xm(lc,Ta.toStyles)),void a.push(yo);if(pr.isFallbackTransition)return yo.onStart(()=>px(lc,Ta.fromStyles)),yo.onDestroy(()=>Xm(lc,Ta.toStyles)),void a.push(yo);Ta.timelines.forEach(tg=>tg.stretchStartingKeyframe=!0),o.append(lc,Ta.timelines),v.push({instruction:Ta,player:yo,element:lc}),Ta.queriedElements.forEach(tg=>he(A,tg,[]).push(yo)),Ta.preStyleProps.forEach((tg,dE)=>{const SA=Object.keys(tg);if(SA.length){let Ax=z.get(dE);Ax||z.set(dE,Ax=new Set),SA.forEach(FP=>Ax.add(FP))}}),Ta.postStyleProps.forEach((tg,dE)=>{const SA=Object.keys(tg);let Ax=$.get(dE);Ax||$.set(dE,Ax=new Set),SA.forEach(FP=>Ax.add(FP))})}});if(er.length){const _i=[];er.forEach(Vi=>{_i.push(`@${Vi.triggerName} has failed due to:\n`),Vi.errors.forEach(pr=>_i.push(`- ${pr}\n`))}),ii.forEach(Vi=>Vi.destroy()),this.reportError(_i)}const Or=new Map,na=new Map;v.forEach(_i=>{const Vi=_i.element;o.has(Vi)&&(na.set(Vi,Vi),this._beforeAnimationBuild(_i.player.namespaceId,_i.instruction,Or))}),a.forEach(_i=>{const Vi=_i.element;this._getPreviousPlayers(Vi,!1,_i.namespaceId,_i.triggerName,null).forEach(yo=>{he(Or,Vi,[]).push(yo),yo.destroy()})});const hs=At.filter(_i=>PO(_i,z,$)),ac=new Map;AO(ac,this.driver,Sn,$,If).forEach(_i=>{PO(_i,z,$)&&hs.push(_i)});const hE=new Map;Oe.forEach((_i,Vi)=>{AO(hE,this.driver,new Set(_i),z,"!")}),hs.forEach(_i=>{const Vi=ac.get(_i),pr=hE.get(_i);ac.set(_i,Object.assign(Object.assign({},Vi),pr))});const kx=[],B3=[],z3={};v.forEach(_i=>{const{element:Vi,player:pr,instruction:yo}=_i;if(o.has(Vi)){if(oe.has(Vi))return pr.onDestroy(()=>Xm(Vi,yo.toStyles)),pr.disabled=!0,pr.overrideTotalTime(yo.totalTime),void a.push(pr);let lc=z3;if(na.size>1){let Hd=Vi;const kv=[];for(;Hd=Hd.parentNode;){const Ta=na.get(Hd);if(Ta){lc=Ta;break}kv.push(Hd)}kv.forEach(Ta=>na.set(Ta,lc))}const eg=this._buildAnimation(pr.namespaceId,yo,Or,c,hE,ac);if(pr.setRealPlayer(eg),lc===z3)kx.push(pr);else{const Hd=this.playersByElement.get(lc);Hd&&Hd.length&&(pr.parentPlayer=T(Hd)),a.push(pr)}}else px(Vi,yo.fromStyles),pr.onDestroy(()=>Xm(Vi,yo.toStyles)),B3.push(pr),oe.has(Vi)&&a.push(pr)}),B3.forEach(_i=>{const Vi=c.get(_i.element);if(Vi&&Vi.length){const pr=T(Vi);_i.setRealPlayer(pr)}}),a.forEach(_i=>{_i.parentPlayer?_i.syncPlayerEvents(_i.parentPlayer):_i.destroy()});for(let _i=0;_i<At.length;_i++){const Vi=At[_i],pr=Vi[Pp];if(Tw(Vi,pk),pr&&pr.hasAnimation)continue;let yo=[];if(A.size){let eg=A.get(Vi);eg&&eg.length&&yo.push(...eg);let Hd=this.driver.query(Vi,s2,!0);for(let kv=0;kv<Hd.length;kv++){let Ta=A.get(Hd[kv]);Ta&&Ta.length&&yo.push(...Ta)}}const lc=yo.filter(eg=>!eg.destroyed);lc.length?KB(this,Vi,lc):this.processLeaveNode(Vi)}return At.length=0,kx.forEach(_i=>{this.players.push(_i),_i.onDone(()=>{_i.destroy();const Vi=this.players.indexOf(_i);this.players.splice(Vi,1)}),_i.play()}),kx}elementContainsData(i,e){let o=!1;const a=e[Pp];return a&&a.setForRemoval&&(o=!0),this.playersByElement.has(e)&&(o=!0),this.playersByQueriedElement.has(e)&&(o=!0),this.statesByElement.has(e)&&(o=!0),this._fetchNamespace(i).elementContainsData(e)||o}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,o,a,c){let v=[];if(e){const A=this.playersByQueriedElement.get(i);A&&(v=A)}else{const A=this.playersByElement.get(i);if(A){const z=!c||c==AS;A.forEach($=>{$.queued||!z&&$.triggerName!=a||v.push($)})}}return(o||a)&&(v=v.filter(A=>!(o&&o!=A.namespaceId||a&&a!=A.triggerName))),v}_beforeAnimationBuild(i,e,o){const c=e.element,v=e.isRemovalTransition?void 0:i,A=e.isRemovalTransition?void 0:e.triggerName;for(const z of e.timelines){const $=z.element,oe=$!==c,fe=he(o,$,[]);this._getPreviousPlayers($,oe,v,A,e.toState).forEach(Oe=>{const He=Oe.getRealPlayer();He.beforeDestroy&&He.beforeDestroy(),Oe.destroy(),fe.push(Oe)})}px(c,e.fromStyles)}_buildAnimation(i,e,o,a,c,v){const A=e.triggerName,z=e.element,$=[],oe=new Set,fe=new Set,ke=e.timelines.map(He=>{const ct=He.element;oe.add(ct);const At=ct[Pp];if(At&&At.removedBeforeQueried)return new ux(He.duration,He.delay);const Qt=ct!==z,Sn=function(t){const i=[];return IO(t,i),i}((o.get(ct)||qB).map(Or=>Or.getRealPlayer())).filter(Or=>!!Or.element&&Or.element===ct),xn=c.get(ct),Qn=v.get(ct),ii=N(0,this._normalizer,0,He.keyframes,xn,Qn),er=this._buildPlayer(He,ii,Sn);if(He.subTimeline&&a&&fe.add(ct),Qt){const Or=new b2(i,A,ct);Or.setRealPlayer(er),$.push(Or)}return er});$.forEach(He=>{he(this.playersByQueriedElement,He.element,[]).push(He),He.onDone(()=>function(t,i,e){let o;if(t instanceof Map){if(o=t.get(i),o){if(o.length){const a=o.indexOf(e);o.splice(a,1)}0==o.length&&t.delete(i)}}else if(o=t[i],o){if(o.length){const a=o.indexOf(e);o.splice(a,1)}0==o.length&&delete t[i]}return o}(this.playersByQueriedElement,He.element,He))}),oe.forEach(He=>Rp(He,uO));const Oe=T(ke);return Oe.onDestroy(()=>{oe.forEach(He=>Tw(He,uO)),Xm(z,e.toStyles)}),fe.forEach(He=>{he(a,He,[]).push(Oe)}),Oe}_buildPlayer(i,e,o){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,o):new ux(i.duration,i.delay)}}class b2{constructor(i,e,o){this.namespaceId=i,this.triggerName=e,this.element=o,this._player=new ux,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(o=>j(i,e,void 0,o))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){he(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const e=this._player;e.triggerCallback&&e.triggerCallback(i)}}function Tk(t){return t&&1===t.nodeType}function kO(t,i){const e=t.style.display;return t.style.display=null!=i?i:"none",e}function AO(t,i,e,o,a){const c=[];e.forEach(z=>c.push(kO(z)));const v=[];o.forEach((z,$)=>{const oe={};z.forEach(fe=>{const ke=oe[fe]=i.computeStyle($,fe,a);(!ke||0==ke.length)&&($[Pp]=ZB,v.push($))}),t.set($,oe)});let A=0;return e.forEach(z=>kO(z,c[A++])),v}function DO(t,i){const e=new Map;if(t.forEach(A=>e.set(A,[])),0==i.length)return e;const a=new Set(i),c=new Map;function v(A){if(!A)return 1;let z=c.get(A);if(z)return z;const $=A.parentNode;return z=e.has($)?$:a.has($)?1:v($),c.set(A,z),z}return i.forEach(A=>{const z=v(A);1!==z&&e.get(z).push(A)}),e}const Mk="$$classes";function Rp(t,i){if(t.classList)t.classList.add(i);else{let e=t[Mk];e||(e=t[Mk]={}),e[i]=!0}}function Tw(t,i){if(t.classList)t.classList.remove(i);else{let e=t[Mk];e&&delete e[i]}}function KB(t,i,e){T(e).onDone(()=>t.processLeaveNode(i))}function IO(t,i){for(let e=0;e<t.length;e++){const o=t[e];o instanceof u?IO(o.players,i):i.push(o)}}function PO(t,i,e){const o=e.get(t);if(!o)return!1;let a=i.get(t);return a?o.forEach(c=>a.add(c)):i.set(t,o),e.delete(t),!0}class kk{constructor(i,e,o){this.bodyNode=i,this._driver=e,this._normalizer=o,this._triggerCache={},this.onRemovalComplete=(a,c)=>{},this._transitionEngine=new $B(i,e,o),this._timelineEngine=new HB(i,e,o),this._transitionEngine.onRemovalComplete=(a,c)=>this.onRemovalComplete(a,c)}registerTrigger(i,e,o,a,c){const v=i+"-"+a;let A=this._triggerCache[v];if(!A){const z=[],$=h2(this._driver,c,z);if(z.length)throw new Error(`The animation trigger "${a}" has failed to build due to the following errors:\n - ${z.join("\n - ")}`);A=function(t,i,e){return new zB(t,i,e)}(a,$,this._normalizer),this._triggerCache[v]=A}this._transitionEngine.registerTrigger(e,a,A)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,o,a){this._transitionEngine.insertNode(i,e,o,a)}onRemove(i,e,o,a){this._transitionEngine.removeNode(i,e,a||!1,o)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,o,a){if("@"==o.charAt(0)){const[c,v]=Te(o);this._timelineEngine.command(c,e,v,a)}else this._transitionEngine.trigger(i,e,o,a)}listen(i,e,o,a,c){if("@"==o.charAt(0)){const[v,A]=Te(o);return this._timelineEngine.listen(v,e,A,c)}return this._transitionEngine.listen(i,e,o,a,c)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function RO(t,i){let e=null,o=null;return Array.isArray(i)&&i.length?(e=x2(i[0]),i.length>1&&(o=x2(i[i.length-1]))):i&&(e=x2(i)),e||o?new Mw(t,e,o):null}class Mw{constructor(i,e,o){this._element=i,this._startStyles=e,this._endStyles=o,this._state=0;let a=Mw.initialStylesByElement.get(i);a||Mw.initialStylesByElement.set(i,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Xm(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xm(this._element,this._initialStyles),this._endStyles&&(Xm(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Mw.initialStylesByElement.delete(this._element),this._startStyles&&(px(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(px(this._element,this._endStyles),this._endStyles=null),Xm(this._element,this._initialStyles),this._state=3)}}function x2(t){let i=null;const e=Object.keys(t);for(let o=0;o<e.length;o++){const a=e[o];nz(a)&&(i=i||{},i[a]=t[a])}return i}function nz(t){return"display"===t||"position"===t}Mw.initialStylesByElement=new WeakMap;const OO="animation",FO="animationend";class oz{constructor(i,e,o,a,c,v,A){this._element=i,this._name=e,this._duration=o,this._delay=a,this._easing=c,this._fillMode=v,this._onDoneFn=A,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=z=>this._handleCallback(z)}apply(){(function(t,i){const e=C2(t,"").trim();let o=0;e.length&&(function(t,i){let e=0;for(let o=0;o<t.length;o++)","===t.charAt(o)&&e++;return e}(e)+1,i=`${e}, ${i}`),Ak(t,"",i)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),BO(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){LO(this._element,this._name,"paused")}resume(){LO(this._element,this._name,"running")}setPosition(i){const e=NO(this._element,this._name);this._position=i*this._duration,Ak(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(i){const e=i._ngTestManualTimestamp||Date.now(),o=1e3*parseFloat(i.elapsedTime.toFixed(3));i.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&o>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),BO(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,i){const o=C2(t,"").split(","),a=w2(o,i);a>=0&&(o.splice(a,1),Ak(t,"",o.join(",")))}(this._element,this._name))}}function LO(t,i,e){Ak(t,"PlayState",e,NO(t,i))}function NO(t,i){const e=C2(t,"");return e.indexOf(",")>0?w2(e.split(","),i):w2([e],i)}function w2(t,i){for(let e=0;e<t.length;e++)if(t[e].indexOf(i)>=0)return e;return-1}function BO(t,i,e){e?t.removeEventListener(FO,i):t.addEventListener(FO,i)}function Ak(t,i,e,o){const a=OO+i;if(null!=o){const c=t.style[a];if(c.length){const v=c.split(",");v[o]=e,e=v.join(",")}}t.style[a]=e}function C2(t,i){return t.style[OO+i]||""}class zO{constructor(i,e,o,a,c,v,A,z){this.element=i,this.keyframes=e,this.animationName=o,this._duration=a,this._delay=c,this._finalStyles=A,this._specialStyles=z,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=v||"linear",this.totalTime=a+c,this._buildStyler()}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(i=>i()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(i){this._styler.setPosition(i)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new oz(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}beforeDestroy(){this.init();const i={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(o=>{"offset"!=o&&(i[o]=e?this._finalStyles[o]:u2(this.element,o))})}this.currentSnapshot=i}}class hz extends ux{constructor(i,e){super(),this.element=i,this._startingStyles={},this.__initialized=!1,this._styles=y_(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(i=>{this._startingStyles[i]=this.element.style[i]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(i=>this.element.style.setProperty(i,this._styles[i])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(i=>{const e=this._startingStyles[i];e?this.element.style.setProperty(i,e):this.element.style.removeProperty(i)}),this._startingStyles=null,super.destroy())}}class UO{constructor(){this._count=0}validateStyleProperty(i){return Tr(i)}matchesElement(i,e){return yu(i,e)}containsElement(i,e){return __(i,e)}query(i,e,o){return $m(i,e,o)}computeStyle(i,e,o){return window.getComputedStyle(i)[e]}buildKeyframeElement(i,e,o){o=o.map(A=>y_(A));let a=`@keyframes ${e} {\n`,c="";o.forEach(A=>{c=" ";const z=parseFloat(A.offset);a+=`${c}${100*z}% {\n`,c+=" ",Object.keys(A).forEach($=>{const oe=A[$];switch($){case"offset":return;case"easing":return void(oe&&(a+=`${c}animation-timing-function: ${oe};\n`));default:return void(a+=`${c}${$}: ${oe};\n`)}}),a+=`${c}}\n`}),a+="}\n";const v=document.createElement("style");return v.textContent=a,v}animate(i,e,o,a,c,v=[],A){const z=v.filter(At=>At instanceof zO),$={};mO(o,a)&&z.forEach(At=>{let Qt=At.currentSnapshot;Object.keys(Qt).forEach(Sn=>$[Sn]=Qt[Sn])});const oe=function(t){let i={};return t&&(Array.isArray(t)?t:[t]).forEach(o=>{Object.keys(o).forEach(a=>{"offset"==a||"easing"==a||(i[a]=o[a])})}),i}(e=gO(i,e,$));if(0==o)return new hz(i,oe);const fe="gen_css_kf_"+this._count++,ke=this.buildKeyframeElement(i,fe,e);(function(t){var i;const e=null===(i=t.getRootNode)||void 0===i?void 0:i.call(t);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(i).appendChild(ke);const He=RO(i,e),ct=new zO(i,e,fe,o,a,c,oe,He);return ct.onDestroy(()=>function(t){t.parentNode.removeChild(t)}(ke)),ct}}class GO{constructor(i,e,o,a){this.element=i,this.keyframes=e,this.options=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(i,e,o){return i.animate(e,o)}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(i[e]=this._finished?this._finalKeyframe[e]:u2(this.element,e))}),this.currentSnapshot=i}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class gz{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(jO().toString()),this._cssKeyframesDriver=new UO}validateStyleProperty(i){return Tr(i)}matchesElement(i,e){return yu(i,e)}containsElement(i,e){return __(i,e)}query(i,e,o){return $m(i,e,o)}computeStyle(i,e,o){return window.getComputedStyle(i)[e]}overrideWebAnimationsSupport(i){this._isNativeImpl=i}animate(i,e,o,a,c,v=[],A){if(!A&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(i,e,o,a,c,v);const oe={duration:o,delay:a,fill:0==a?"both":"forwards"};c&&(oe.easing=c);const fe={},ke=v.filter(He=>He instanceof GO);mO(o,a)&&ke.forEach(He=>{let ct=He.currentSnapshot;Object.keys(ct).forEach(At=>fe[At]=ct[At])});const Oe=RO(i,e=gO(i,e=e.map(He=>dv(He,!1)),fe));return new GO(i,e,oe,Oe)}}function jO(){return m()&&Element.prototype.animate||{}}let yz=(()=>{class t extends Cw{constructor(e,o){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(o.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(e){const o=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(e)?r2(e):e;return YO(this._renderer,null,o,"register",[a]),new vz(o,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.FYo),s.LFG(wt))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();class vz extends class{}{constructor(i,e){super(),this._id=i,this._renderer=e}create(i,e){return new bz(this._id,i,e||{},this._renderer)}}class bz{constructor(i,e,o,a){this.id=i,this.element=e,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",o)}_listen(i,e){return this._renderer.listen(this.element,`@@${this.id}:${i}`,e)}_command(i,...e){return YO(this._renderer,this.element,this.id,i,e)}onDone(i){this._listen("done",i)}onStart(i){this._listen("start",i)}onDestroy(i){this._listen("destroy",i)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(i){this._command("setPosition",i)}getPosition(){var i,e;return null!==(e=null===(i=this._renderer.engine.players[+this.id])||void 0===i?void 0:i.getPosition())&&void 0!==e?e:0}}function YO(t,i,e,o,a){return t.setProperty(i,`@@${e}:${o}`,a)}const qO="@.disabled";let xz=(()=>{class t{constructor(e,o,a){this.delegate=e,this.engine=o,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),o.onRemovalComplete=(c,v)=>{v&&v.parentNode(c)&&v.removeChild(c.parentNode,c)}}createRenderer(e,o){const c=this.delegate.createRenderer(e,o);if(!(e&&o&&o.data&&o.data.animation)){let oe=this._rendererCache.get(c);return oe||(oe=new ZO("",c,this.engine),this._rendererCache.set(c,oe)),oe}const v=o.id,A=o.id+"-"+this._currentId;this._currentId++,this.engine.register(A,e);const z=oe=>{Array.isArray(oe)?oe.forEach(z):this.engine.registerTrigger(v,A,e,oe.name,oe)};return o.data.animation.forEach(z),new wz(this,A,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,o,a){e>=0&&e<this._microtaskId?this._zone.run(()=>o(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[v,A]=c;v(A)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([o,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.FYo),s.LFG(kk),s.LFG(s.R0b))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();class ZO{constructor(i,e,o){this.namespaceId=i,this.delegate=e,this.engine=o,this.destroyNode=this.delegate.destroyNode?a=>e.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,o,a=!0){this.delegate.insertBefore(i,e,o),this.engine.onInsert(this.namespaceId,e,i,a)}removeChild(i,e,o){this.engine.onRemove(this.namespaceId,e,this.delegate,o)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,o,a){this.delegate.setAttribute(i,e,o,a)}removeAttribute(i,e,o){this.delegate.removeAttribute(i,e,o)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,o,a){this.delegate.setStyle(i,e,o,a)}removeStyle(i,e,o){this.delegate.removeStyle(i,e,o)}setProperty(i,e,o){"@"==e.charAt(0)&&e==qO?this.disableAnimations(i,!!o):this.delegate.setProperty(i,e,o)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,o){return this.delegate.listen(i,e,o)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}}class wz extends ZO{constructor(i,e,o,a){super(e,o,a),this.factory=i,this.namespaceId=e}setProperty(i,e,o){"@"==e.charAt(0)?"."==e.charAt(1)&&e==qO?this.disableAnimations(i,o=void 0===o||!!o):this.engine.process(this.namespaceId,i,e.substr(1),o):this.delegate.setProperty(i,e,o)}listen(i,e,o){if("@"==e.charAt(0)){const a=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(i);let c=e.substr(1),v="";return"@"!=c.charAt(0)&&([c,v]=function(t){const i=t.indexOf(".");return[t.substring(0,i),t.substr(i+1)]}(c)),this.engine.listen(this.namespaceId,a,c,v,A=>{this.factory.scheduleListenerCallback(A._data||-1,o,A)})}return this.delegate.listen(i,e,o)}}let Ez=(()=>{class t extends kk{constructor(e,o,a){super(e.body,o,a)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt),s.LFG(hv),s.LFG(g2))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();const ih=new s.OlP("AnimationModuleType"),WO=[{provide:Cw,useClass:yz},{provide:g2,useFactory:function(){return new RB}},{provide:kk,useClass:Ez},{provide:s.FYo,useFactory:function(t,i,e){return new xz(t,i,e)},deps:[Ga,kk,s.R0b]}],$O=[{provide:hv,useFactory:function(){return"function"==typeof jO()?new gz:new UO}},{provide:ih,useValue:"BrowserAnimations"},...WO],XO=[{provide:hv,useClass:v_},{provide:ih,useValue:"NoopAnimations"},...WO];let Az=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?XO:$O}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:$O,imports:[Kd]}),t})();function Pz(t,i){if(1&t&&s._UZ(0,"mat-pseudo-checkbox",4),2&t){const e=s.oxw();s.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function Rz(t,i){if(1&t&&(s.TgZ(0,"span",5),s._uU(1),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.hij("(",e.group.label,")")}}const Oz=["*"];let Fz=(()=>{class t{}return t.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",t.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",t.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",t.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",t})(),Lz=(()=>{class t{}return t.COMPLEX="375ms",t.ENTERING="225ms",t.EXITING="195ms",t})();const QO=new s.GfV("11.2.13"),Bz=new s.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let mx,Ir=(()=>{class t{constructor(e,o,a){this._hasDoneGlobalChecks=!1,this._document=a,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=o,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const e=this._document.defaultView||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return(0,s.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const e=this._getWindow();return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const o=this._document.createElement("div");o.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(o);const a=getComputedStyle(o);a&&"none"!==a.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(o)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&QO.full!==Wm.full&&console.warn("The Angular Material version ("+QO.full+") does not match the Angular CDK version ("+Wm.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(vS),s.LFG(Bz,8),s.LFG(wt))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[uv],uv]}),t})();function b_(t){return class extends t{constructor(...i){super(...i),this._disabled=!1}get disabled(){return this._disabled}set disabled(i){this._disabled=br(i)}}}function kw(t,i){return class extends t{constructor(...e){super(...e),this.defaultColor=i,this.color=i}get color(){return this._color}set color(e){const o=e||this.defaultColor;o!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),o&&this._elementRef.nativeElement.classList.add(`mat-${o}`),this._color=o)}}}function Ik(t){return class extends t{constructor(...o){super(...o),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(o){this._disableRipple=br(o)}}}function JO(t,i=0){return class extends t{constructor(...a){super(...a),this._tabIndex=i,this.defaultTabIndex=i}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(a){this._tabIndex=null!=a?Fl(a):this.defaultTabIndex}}}function KO(t){return class extends t{constructor(...i){super(...i),this.errorState=!1,this.stateChanges=new Nn.xQ}updateErrorState(){const i=this.errorState,c=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);c!==i&&(this.errorState=c,this.stateChanges.next())}}}function eF(t){return class extends t{constructor(...i){super(...i),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Yr.y(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(i){i.next(),i.complete()}}}try{mx="undefined"!=typeof Intl}catch(t){mx=!1}let S2=(()=>{class t{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t},token:t,providedIn:"root"}),t})();class Xz{constructor(i,e,o){this._renderer=i,this.element=e,this.config=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const nF={enterDuration:450,exitDuration:400},E2=fw({passive:!0}),iF=["mousedown","touchstart"],rF=["mouseup","mouseleave","touchend","touchcancel"];class Jz{constructor(i,e,o,a){this._target=i,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=qm(o))}fadeInRipple(i,e,o={}){const a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=Object.assign(Object.assign({},nF),o.animation);o.centered&&(i=a.left+a.width/2,e=a.top+a.height/2);const v=o.radius||function(t,i,e){const o=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),a=Math.max(Math.abs(i-e.top),Math.abs(i-e.bottom));return Math.sqrt(o*o+a*a)}(i,e,a),A=i-a.left,z=e-a.top,$=c.enterDuration,oe=document.createElement("div");oe.classList.add("mat-ripple-element"),oe.style.left=A-v+"px",oe.style.top=z-v+"px",oe.style.height=2*v+"px",oe.style.width=2*v+"px",null!=o.color&&(oe.style.backgroundColor=o.color),oe.style.transitionDuration=`${$}ms`,this._containerElement.appendChild(oe),function(t){window.getComputedStyle(t).getPropertyValue("opacity")}(oe),oe.style.transform="scale(1)";const fe=new Xz(this,oe,o);return fe.state=0,this._activeRipples.add(fe),o.persistent||(this._mostRecentTransientRipple=fe),this._runTimeoutOutsideZone(()=>{const ke=fe===this._mostRecentTransientRipple;fe.state=1,!o.persistent&&(!ke||!this._isPointerDown)&&fe.fadeOut()},$),fe}fadeOutRipple(i){const e=this._activeRipples.delete(i);if(i===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const o=i.element,a=Object.assign(Object.assign({},nF),i.config.animation);o.style.transitionDuration=`${a.exitDuration}ms`,o.style.opacity="0",i.state=2,this._runTimeoutOutsideZone(()=>{i.state=3,o.parentNode.removeChild(o)},a.exitDuration)}fadeOutAll(){this._activeRipples.forEach(i=>i.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(i=>{i.config.persistent||i.fadeOut()})}setupTriggerEvents(i){const e=qm(i);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(iF))}handleEvent(i){"mousedown"===i.type?this._onMousedown(i):"touchstart"===i.type?this._onTouchStart(i):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(rF),this._pointerUpEventsRegistered=!0)}_onMousedown(i){const e=_S(i),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(i.clientX,i.clientY,this._target.rippleConfig))}_onTouchStart(i){if(!this._target.rippleDisabled&&!yS(i)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=i.changedTouches;for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(i=>{!i.config.persistent&&(1===i.state||i.config.terminateOnPointerUp&&0===i.state)&&i.fadeOut()}))}_runTimeoutOutsideZone(i,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(i,e))}_registerEvents(i){this._ngZone.runOutsideAngular(()=>{i.forEach(e=>{this._triggerElement.addEventListener(e,this,E2)})})}_removeTriggerEvents(){this._triggerElement&&(iF.forEach(i=>{this._triggerElement.removeEventListener(i,this,E2)}),this._pointerUpEventsRegistered&&rF.forEach(i=>{this._triggerElement.removeEventListener(i,this,E2)}))}}const tV=new s.OlP("mat-ripple-global-options");let pv=(()=>{class t{constructor(e,o,a,c,v){this._elementRef=e,this._animationMode=v,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new Jz(this,o,e,a)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,o=0,a){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,o,Object.assign(Object.assign({},this.rippleConfig),a)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Co),s.Y36(tV,8),s.Y36(ih,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("mat-ripple-unbounded",o.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),IS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ir,nx],Ir]}),t})(),nV=(()=>{class t{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(ih,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,o){2&e&&s.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===o.state)("mat-pseudo-checkbox-checked","checked"===o.state)("mat-pseudo-checkbox-disabled",o.disabled)("_mat-animation-noopable","NoopAnimations"===o._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,o){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),t})(),iV=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ir]]}),t})();const T2=new s.OlP("MAT_OPTION_PARENT_COMPONENT");class rV{}const oV=b_(rV);let sV=0,oF=(()=>{class t extends oV{constructor(e){var o;super(),this._labelId="mat-optgroup-label-"+sV++,this._inert=null!==(o=null==e?void 0:e.inertGroups)&&void 0!==o&&o}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(T2,8))},t.\u0275dir=s.lG2({type:t,inputs:{label:"label"},features:[s.qOj]}),t})();const M2=new s.OlP("MatOptgroup");let aV=0;class lV{constructor(i,e=!1){this.source=i,this.isUserInput=e}}let cV=(()=>{class t{constructor(e,o,a,c){this._element=e,this._changeDetectorRef=o,this._parent=a,this.group=c,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+aV++,this.onSelectionChange=new s.vpe,this._stateChanges=new Nn.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=br(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,o){const a=this._getHostElement();"function"==typeof a.focus&&a.focus(o)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Na(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new lV(this,e))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(void 0),s.Y36(oF))},t.\u0275dir=s.lG2({type:t,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),t})(),sF=(()=>{class t extends cV{constructor(e,o,a,c){super(e,o,a,c)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(T2,8),s.Y36(M2,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,o){1&e&&s.NdJ("click",function(){return o._selectViaInteraction()})("keydown",function(c){return o._handleKeydown(c)}),2&e&&(s.Ikx("id",o.id),s.uIk("tabindex",o._getTabIndex())("aria-selected",o._getAriaSelected())("aria-disabled",o.disabled.toString()),s.ekj("mat-selected",o.selected)("mat-option-multiple",o.multiple)("mat-active",o.active)("mat-option-disabled",o.disabled))},exportAs:["matOption"],features:[s.qOj],ngContentSelectors:Oz,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,o){1&e&&(s.F$t(),s.YNc(0,Pz,1,2,"mat-pseudo-checkbox",0),s.TgZ(1,"span",1),s.Hsn(2),s.qZA(),s.YNc(3,Rz,2,1,"span",2),s._UZ(4,"div",3)),2&e&&(s.Q6J("ngIf",o.multiple),s.xp6(3),s.Q6J("ngIf",o.group&&o.group._inert),s.xp6(1),s.Q6J("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disabled||o.disableRipple))},directives:[Xt,pv,nV],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),t})();function aF(t,i,e){if(e.length){let o=i.toArray(),a=e.toArray(),c=0;for(let v=0;v<t+1;v++)o[v].group&&o[v].group===a[c]&&c++;return c}return 0}let lF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[IS,Fi,Ir,iV]]}),t})();const hV=["mat-sort-header",""];function dV(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",3),s.NdJ("@arrowPosition.start",function(){return s.CHM(e),s.oxw()._disableViewStateAnimation=!0})("@arrowPosition.done",function(){return s.CHM(e),s.oxw()._disableViewStateAnimation=!1}),s._UZ(1,"div",4),s.TgZ(2,"div",5),s._UZ(3,"div",6),s._UZ(4,"div",7),s._UZ(5,"div",8),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),s.xp6(2),s.Q6J("@indicator",e._getArrowDirectionState()),s.xp6(1),s.Q6J("@leftPointer",e._getArrowDirectionState()),s.xp6(1),s.Q6J("@rightPointer",e._getArrowDirectionState())}}const pV=["*"],fV=new s.OlP("MAT_SORT_DEFAULT_OPTIONS");class mV{}const gV=eF(b_(mV));let x_=(()=>{class t extends gV{constructor(e){super(),this._defaultOptions=e,this.sortables=new Map,this._stateChanges=new Nn.xQ,this.start="asc",this._direction="",this.sortChange=new s.vpe}get direction(){return this._direction}set direction(e){this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=br(e)}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){var o,a,c;if(!e)return"";const v=null!==(a=null!==(o=null==e?void 0:e.disableClear)&&void 0!==o?o:this.disableClear)&&void 0!==a?a:!!(null===(c=this._defaultOptions)||void 0===c?void 0:c.disableClear);let A=function(t,i){let e=["asc","desc"];return"desc"==t&&e.reverse(),i||e.push(""),e}(e.start||this.start,v),z=A.indexOf(this.direction)+1;return z>=A.length&&(z=0),A[z]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(fV,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[s.qOj,s.TTD]}),t})();const fv=Lz.ENTERING+" "+Fz.STANDARD_CURVE,Aw={indicator:ns("indicator",[co("active-asc, asc",Rn({transform:"translateY(0px)"})),co("active-desc, desc",Rn({transform:"translateY(10px)"})),ur("active-asc <=> active-desc",dr(fv))]),leftPointer:ns("leftPointer",[co("active-asc, asc",Rn({transform:"rotate(-45deg)"})),co("active-desc, desc",Rn({transform:"rotate(45deg)"})),ur("active-asc <=> active-desc",dr(fv))]),rightPointer:ns("rightPointer",[co("active-asc, asc",Rn({transform:"rotate(45deg)"})),co("active-desc, desc",Rn({transform:"rotate(-45deg)"})),ur("active-asc <=> active-desc",dr(fv))]),arrowOpacity:ns("arrowOpacity",[co("desc-to-active, asc-to-active, active",Rn({opacity:1})),co("desc-to-hint, asc-to-hint, hint",Rn({opacity:.54})),co("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",Rn({opacity:0})),ur("* => asc, * => desc, * => active, * => hint, * => void",dr("0ms")),ur("* <=> *",dr(fv))]),arrowPosition:ns("arrowPosition",[ur("* => desc-to-hint, * => desc-to-active",dr(fv,g_([Rn({transform:"translateY(-25%)"}),Rn({transform:"translateY(0)"})]))),ur("* => hint-to-desc, * => active-to-desc",dr(fv,g_([Rn({transform:"translateY(0)"}),Rn({transform:"translateY(25%)"})]))),ur("* => asc-to-hint, * => asc-to-active",dr(fv,g_([Rn({transform:"translateY(25%)"}),Rn({transform:"translateY(0)"})]))),ur("* => hint-to-asc, * => active-to-asc",dr(fv,g_([Rn({transform:"translateY(0)"}),Rn({transform:"translateY(-25%)"})]))),co("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",Rn({transform:"translateY(0)"})),co("hint-to-desc, active-to-desc, desc",Rn({transform:"translateY(-25%)"})),co("hint-to-asc, active-to-asc, asc",Rn({transform:"translateY(25%)"}))]),allowChildren:ns("allowChildren",[ur("* <=> *",[ES("@*",CS(),{optional:!0})])])};let Rk=(()=>{class t{constructor(){this.changes=new Nn.xQ,this.sortButtonLabel=e=>`Change sorting for ${e}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const vV={provide:Rk,deps:[[new s.FiY,new s.tp0,Rk]],useFactory:function(t){return t||new Rk}};class bV{}const xV=b_(bV);let Ok=(()=>{class t extends xV{constructor(e,o,a,c,v,A){super(),this._intl=e,this._changeDetectorRef=o,this._sort=a,this._columnDef=c,this._focusMonitor=v,this._elementRef=A,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._handleStateChanges()}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=br(e)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const o=!!e;o!==this._showIndicatorHint&&(this._setIndicatorHintVisible(o),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(32===e.keyCode||13===e.keyCode)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_handleStateChanges(){this._rerenderSubscription=(0,bs.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Rk),s.Y36(s.sBO),s.Y36(x_,8),s.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),s.Y36(nh),s.Y36(s.SBq))},t.\u0275cmp=s.Xpm({type:t,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(e,o){1&e&&s.NdJ("click",function(){return o._handleClick()})("keydown",function(c){return o._handleKeydown(c)})("mouseenter",function(){return o._setIndicatorHintVisible(!0)})("mouseleave",function(){return o._setIndicatorHintVisible(!1)}),2&e&&(s.uIk("aria-sort",o._getAriaSortAttribute()),s.ekj("mat-sort-header-disabled",o._isDisabled()))},inputs:{disabled:"disabled",arrowPosition:"arrowPosition",disableClear:"disableClear",id:["mat-sort-header","id"],start:"start"},exportAs:["matSortHeader"],features:[s.qOj],attrs:hV,ngContentSelectors:pV,decls:4,vars:6,consts:[["role","button",1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(e,o){1&e&&(s.F$t(),s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.Hsn(2),s.qZA(),s.YNc(3,dV,6,6,"div",2),s.qZA()),2&e&&(s.ekj("mat-sort-header-sorted",o._isSorted())("mat-sort-header-position-before","before"==o.arrowPosition),s.uIk("tabindex",o._isDisabled()?null:0),s.xp6(3),s.Q6J("ngIf",o._renderArrow()))},directives:[Xt],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n"],encapsulation:2,data:{animation:[Aw.indicator,Aw.leftPointer,Aw.rightPointer,Aw.arrowOpacity,Aw.arrowPosition,Aw.allowChildren]},changeDetection:0}),t})(),wV=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[vV],imports:[[Fi,Ir]]}),t})();const cF=["mat-button",""],uF=["*"],SV=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class EV{constructor(i){this._elementRef=i}}const TV=kw(b_(Ik(EV)));let mv=(()=>{class t extends TV{constructor(e,o,a){super(e),this._focusMonitor=o,this._animationMode=a,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const c of SV)this._hasHostAttributes(c)&&this._getHostElement().classList.add(c);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,o){e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(o=>this._getHostElement().hasAttribute(o))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(nh),s.Y36(ih,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,o){if(1&e&&s.Gf(pv,5),2&e){let a;s.iGM(a=s.CRH())&&(o.ripple=a.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,o){2&e&&(s.uIk("disabled",o.disabled||null),s.ekj("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-button-disabled",o.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[s.qOj],attrs:cF,ngContentSelectors:uF,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,o){1&e&&(s.F$t(),s.TgZ(0,"span",0),s.Hsn(1),s.qZA(),s._UZ(2,"span",1),s._UZ(3,"span",2)),2&e&&(s.xp6(2),s.ekj("mat-button-ripple-round",o.isRoundButton||o.isIconButton),s.Q6J("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",o.isIconButton)("matRippleTrigger",o._getHostElement()))},directives:[pv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),k2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[IS,Ir],Ir]}),t})();var MV=nt(9105);function Dw(t,i,e,o){return(0,MV.m)(e)&&(o=e,e=void 0),o?Dw(t,i,e).pipe((0,ei.U)(a=>(0,Fu.k)(a)?o(...a):o(a))):new Yr.y(a=>{dF(t,i,function(v){a.next(arguments.length>1?Array.prototype.slice.call(arguments):v)},a,e)})}function dF(t,i,e,o,a){let c;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const v=t;t.addEventListener(i,e,a),c=()=>v.removeEventListener(i,e,a)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const v=t;t.on(i,e),c=()=>v.off(i,e)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const v=t;t.addListener(i,e),c=()=>v.removeListener(i,e)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let v=0,A=t.length;v<A;v++)dF(t[v],i,e,o,a)}o.add(c)}var IV=nt(6465),RV=nt(6102);const FV=new class extends RV.v{flush(i){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let o,a=-1,c=e.length;i=i||e.shift();do{if(o=i.execute(i.state,i.delay))break}while(++a<c&&(i=e.shift()));if(this.active=!1,o){for(;++a<c&&(i=e.shift());)i.unsubscribe();throw o}}}(class extends IV.o{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,o=0){return null!==o&&o>0?super.requestAsyncId(i,e,o):(i.actions.push(this),i.scheduled||(i.scheduled=requestAnimationFrame(()=>i.flush(null))))}recycleAsyncId(i,e,o=0){if(null!==o&&o>0||null===o&&this.delay>0)return super.recycleAsyncId(i,e,o);0===i.actions.length&&(cancelAnimationFrame(e),i.scheduled=void 0)}});var PS=nt(4581);function A2(t){return!!t&&(t instanceof Yr.y||"function"==typeof t.lift&&"function"==typeof t.subscribe)}class NV{constructor(i){this.durationSelector=i}call(i,e){return e.subscribe(new BV(i,this.durationSelector))}}class BV extends Is.Ds{constructor(i,e){super(i),this.durationSelector=e,this.hasValue=!1}_next(i){if(this.value=i,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:a}=this;e=a(i)}catch(a){return this.destination.error(a)}const o=(0,Is.ft)(e,new Is.IY(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}}clearThrottle(){const{value:i,hasValue:e,throttled:o}=this;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(i))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var pF=nt(6561);function VV(t){const{index:i,period:e,subscriber:o}=t;if(o.next(i),!o.closed){if(-1===e)return o.complete();t.index=i+1,this.schedule(t,e)}}function Fk(t,i=Cl.P){return function(t){return function(e){return e.lift(new NV(t))}}(()=>function(t=0,i,e){let o=-1;return(0,pF.k)(i)?o=Number(i)<1?1:Number(i):(0,Ia.K)(i)&&(e=i),(0,Ia.K)(e)||(e=Cl.P),new Yr.y(a=>{const c=(0,pF.k)(t)?t:+t-e.now();return e.schedule(VV,c,{index:0,period:o,subscriber:a})})}(t,i))}function Zo(t){return i=>i.lift(new UV(t))}class UV{constructor(i){this.notifier=i}call(i,e){const o=new HV(i),a=(0,Is.ft)(this.notifier,new Is.IY(o));return a&&!o.seenValue?(o.add(a),e.subscribe(o)):o}}class HV extends Is.Ds{constructor(i){super(i),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class fF{}function Lk(t){return t&&"function"==typeof t.connect}class GV extends fF{constructor(i){super(),this._data=i}connect(){return A2(this._data)?this._data:(0,Xn.of)(this._data)}disconnect(){}}class mF{applyChanges(i,e,o,a,c){i.forEachOperation((v,A,z)=>{let $,oe;if(null==v.previousIndex){const fe=o(v,A,z);$=e.createEmbeddedView(fe.templateRef,fe.context,fe.index),oe=1}else null==z?(e.remove(A),oe=3):($=e.get(A),e.move($,z),oe=2);c&&c({context:null==$?void 0:$.context,operation:oe,record:v})})}detach(){}}class jV{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(i,e,o,a,c){i.forEachOperation((v,A,z)=>{let $,oe;null==v.previousIndex?($=this._insertView(()=>o(v,A,z),z,e,a(v)),oe=$?1:0):null==z?(this._detachAndCacheView(A,e),oe=3):($=this._moveView(A,z,e,a(v)),oe=2),c&&c({context:null==$?void 0:$.context,operation:oe,record:v})})}detach(){for(const i of this._viewCache)i.destroy();this._viewCache=[]}_insertView(i,e,o,a){const c=this._insertViewFromCache(e,o);if(c)return void(c.context.$implicit=a);const v=i();return o.createEmbeddedView(v.templateRef,v.context,v.index)}_detachAndCacheView(i,e){const o=e.detach(i);this._maybeCacheView(o,e)}_moveView(i,e,o,a){const c=o.get(i);return o.move(c,e),c.context.$implicit=a,c}_maybeCacheView(i,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(i);else{const o=e.indexOf(i);-1===o?i.destroy():e.remove(o)}}_insertViewFromCache(i,e){const o=this._viewCache.pop();return o&&e.insert(o,i),o||null}}class YV{constructor(i=!1,e,o=!0){this._multiple=i,this._emitChanges=o,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Nn.xQ,e&&e.length&&(i?e.forEach(a=>this._markSelected(a)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...i){this._verifyValueAssignment(i),i.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...i){this._verifyValueAssignment(i),i.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(i){this.isSelected(i)?this.deselect(i):this.select(i)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(i){return this._selection.has(i)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(i){this._multiple&&this.selected&&this._selected.sort(i)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(i){this.isSelected(i)||(this._multiple||this._unmarkAll(),this._selection.add(i),this._emitChanges&&this._selectedToEmit.push(i))}_unmarkSelected(i){this.isSelected(i)&&(this._selection.delete(i),this._emitChanges&&this._deselectedToEmit.push(i))}_unmarkAll(){this.isEmpty()||this._selection.forEach(i=>this._unmarkSelected(i))}_verifyValueAssignment(i){}}const RS=new s.OlP("_ViewRepeater"),qV=["contentWrapper"],ZV=["*"],_F=new s.OlP("VIRTUAL_SCROLL_STRATEGY");class WV{constructor(i,e,o){this._scrolledIndexChange=new Nn.xQ,this.scrolledIndexChange=this._scrolledIndexChange.pipe(fc()),this._viewport=null,this._itemSize=i,this._minBufferPx=e,this._maxBufferPx=o}attach(i){this._viewport=i,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(i,e,o){this._itemSize=i,this._minBufferPx=e,this._maxBufferPx=o,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(i,e){this._viewport&&this._viewport.scrollToOffset(i*this._itemSize,e)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const i=this._viewport.getRenderedRange(),e={start:i.start,end:i.end},o=this._viewport.getViewportSize(),a=this._viewport.getDataLength();let c=this._viewport.measureScrollOffset(),v=this._itemSize>0?c/this._itemSize:0;if(e.end>a){const z=Math.ceil(o/this._itemSize),$=Math.max(0,Math.min(v,a-z));v!=$&&(v=$,c=$*this._itemSize,e.start=Math.floor(v)),e.end=Math.max(0,Math.min(a,e.start+z))}const A=c-e.start*this._itemSize;if(A<this._minBufferPx&&0!=e.start){const z=Math.ceil((this._maxBufferPx-A)/this._itemSize);e.start=Math.max(0,e.start-z),e.end=Math.min(a,Math.ceil(v+(o+this._minBufferPx)/this._itemSize))}else{const z=e.end*this._itemSize-(c+o);if(z<this._minBufferPx&&e.end!=a){const $=Math.ceil((this._maxBufferPx-z)/this._itemSize);$>0&&(e.end=Math.min(a,e.end+$),e.start=Math.max(0,Math.floor(v-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(v))}}function $V(t){return t._scrollStrategy}let yF=(()=>{class t{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new WV(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=Fl(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Fl(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Fl(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[s._Bn([{provide:_F,useFactory:$V,deps:[(0,s.Gpc)(()=>t)]}]),s.TTD]}),t})(),OS=(()=>{class t{constructor(e,o,a){this._ngZone=e,this._platform=o,this._scrolled=new Nn.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Yr.y(o=>{this._globalSubscription||this._addGlobalListener();const a=e>0?this._scrolled.pipe(Fk(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Xn.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){const a=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(w(c=>!c||a.indexOf(c)>-1))}getAncestorScrollContainers(e){const o=[];return this.scrollContainers.forEach((a,c)=>{this._scrollableContainsElement(c,e)&&o.push(c)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let a=qm(o),c=e.getElementRef().nativeElement;do{if(a==c)return!0}while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Dw(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.R0b),s.LFG(Co),s.LFG(wt,8))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(s.R0b),(0,s.LFG)(Co),(0,s.LFG)(wt,8))},token:t,providedIn:"root"}),t})(),vF=(()=>{class t{constructor(e,o,a,c){this.elementRef=e,this.scrollDispatcher=o,this.ngZone=a,this.dir=c,this._destroyed=new Nn.xQ,this._elementScrolled=new Yr.y(v=>this.ngZone.runOutsideAngular(()=>Dw(this.elementRef.nativeElement,"scroll").pipe(Zo(this._destroyed)).subscribe(v)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const o=this.elementRef.nativeElement,a=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=a?e.end:e.start),null==e.right&&(e.right=a?e.start:e.end),null!=e.bottom&&(e.top=o.scrollHeight-o.clientHeight-e.bottom),a&&0!=ix()?(null!=e.left&&(e.right=o.scrollWidth-o.clientWidth-e.left),2==ix()?e.left=e.right:1==ix()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=o.scrollWidth-o.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const o=this.elementRef.nativeElement;mw()?o.scrollTo(e):(null!=e.top&&(o.scrollTop=e.top),null!=e.left&&(o.scrollLeft=e.left))}measureScrollOffset(e){const o="left",a="right",c=this.elementRef.nativeElement;if("top"==e)return c.scrollTop;if("bottom"==e)return c.scrollHeight-c.clientHeight-c.scrollTop;const v=this.dir&&"rtl"==this.dir.value;return"start"==e?e=v?a:o:"end"==e&&(e=v?o:a),v&&2==ix()?e==o?c.scrollWidth-c.clientWidth-c.scrollLeft:c.scrollLeft:v&&1==ix()?e==o?c.scrollLeft+c.scrollWidth-c.clientWidth:-c.scrollLeft:e==o?c.scrollLeft:c.scrollWidth-c.clientWidth-c.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(OS),s.Y36(s.R0b),s.Y36(Qh,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),gx=(()=>{class t{constructor(e,o,a){this._platform=e,this._change=new Nn.xQ,this._changeListener=c=>{this._change.next(c)},this._document=a,o.runOutsideAngular(()=>{if(e.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:o,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+o,height:a,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,o=this._getWindow(),a=e.documentElement,c=a.getBoundingClientRect();return{top:-c.top||e.body.scrollTop||o.scrollY||a.scrollTop||0,left:-c.left||e.body.scrollLeft||o.scrollX||a.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Fk(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Co),s.LFG(s.R0b),s.LFG(wt,8))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(Co),(0,s.LFG)(s.R0b),(0,s.LFG)(wt,8))},token:t,providedIn:"root"}),t})();const KV="undefined"!=typeof requestAnimationFrame?FV:PS.E;let FS=(()=>{class t extends vF{constructor(e,o,a,c,v,A,z){super(e,A,a,v),this.elementRef=e,this._changeDetectorRef=o,this._scrollStrategy=c,this._detachedSubject=new Nn.xQ,this._renderedRangeSubject=new Nn.xQ,this._orientation="vertical",this.scrolledIndexChange=new Yr.y($=>this._scrollStrategy.scrolledIndexChange.subscribe(oe=>Promise.resolve().then(()=>this.ngZone.run(()=>$.next(oe))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=gs.w.EMPTY,this._viewportChanges=z.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe(ws(null),Fk(0,KV)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(Zo(this._detachedSubject)).subscribe(o=>{const a=o.length;a!==this._dataLength&&(this._dataLength=a,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function(t,i){return t.start==i.start&&t.end==i.end})(this._renderedRange,e)||(this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,o="to-start"){const c="horizontal"==this.orientation,v=c?"X":"Y";let z=`translate${v}(${Number((c&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===o&&(z+=` translate${v}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=z&&(this._renderedContentTransform=z,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,o="auto"){const a={behavior:o};"horizontal"===this.orientation?a.start=e:a.top=e,this.scrollTo(a)}scrollToIndex(e,o="auto"){this._scrollStrategy.scrollToIndex(e,o)}measureScrollOffset(e){return super.measureScrollOffset(e||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const e=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?e.clientWidth:e.clientHeight}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const o of e)o()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(_F,8),s.Y36(Qh,8),s.Y36(OS),s.Y36(gx))},t.\u0275cmp=s.Xpm({type:t,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,o){if(1&e&&s.Gf(qV,7),2&e){let a;s.iGM(a=s.CRH())&&(o._contentWrapper=a.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===o.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==o.orientation)},inputs:{orientation:"orientation"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[s._Bn([{provide:vF,useExisting:t}]),s.qOj],ngContentSelectors:ZV,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,o){1&e&&(s.F$t(),s.TgZ(0,"div",0,1),s.Hsn(2),s.qZA(),s._UZ(3,"div",2)),2&e&&(s.xp6(3),s.Udp("width",o._totalContentWidth)("height",o._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),t})();function bF(t,i,e){if(!e.getBoundingClientRect)return 0;const a=e.getBoundingClientRect();return"horizontal"===t?"start"===i?a.left:a.right:"start"===i?a.top:a.bottom}let xF=(()=>{class t{constructor(e,o,a,c,v,A){this._viewContainerRef=e,this._template=o,this._differs=a,this._viewRepeater=c,this._viewport=v,this.viewChange=new Nn.xQ,this._dataSourceChanges=new Nn.xQ,this.dataStream=this._dataSourceChanges.pipe(ws(null),Bh(),Rr(([z,$])=>this._changeDataSource(z,$)),ld(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new Nn.xQ,this.dataStream.subscribe(z=>{this._data=z,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(Zo(this._destroyed)).subscribe(z=>{this._renderedRange=z,A.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,Lk(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new GV(A2(e)?e:Array.from(e||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(o,a)=>e(o+(this._renderedRange?this._renderedRange.start:0),a):void 0}set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=Fl(e)}measureRangeSize(e,o){if(e.start>=e.end)return 0;const a=e.start-this._renderedRange.start,c=e.end-e.start;let v,A;for(let z=0;z<c;z++){const $=this._viewContainerRef.get(z+a);if($&&$.rootNodes.length){v=A=$.rootNodes[0];break}}for(let z=c-1;z>-1;z--){const $=this._viewContainerRef.get(z+a);if($&&$.rootNodes.length){A=$.rootNodes[$.rootNodes.length-1];break}}return v&&A?bF(o,"end",A)-bF(o,"start",v):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){!this._renderedRange||(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,o)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,o):o)),this._needsUpdate=!0)}_changeDataSource(e,o){return e&&e.disconnect(this),this._needsUpdate=!0,o?o.connect(this):(0,Xn.of)()}_updateContext(){const e=this._data.length;let o=this._viewContainerRef.length;for(;o--;){const a=this._viewContainerRef.get(o);a.context.index=this._renderedRange.start+o,a.context.count=e,this._updateComputedContextProperties(a.context),a.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(c,v,A)=>this._getEmbeddedViewArgs(c,A),c=>c.item),e.forEachIdentityChange(c=>{this._viewContainerRef.get(c.currentIndex).context.$implicit=c.item});const o=this._data.length;let a=this._viewContainerRef.length;for(;a--;){const c=this._viewContainerRef.get(a);c.context.index=this._renderedRange.start+a,c.context.count=o,this._updateComputedContextProperties(c.context)}}_updateComputedContextProperties(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}_getEmbeddedViewArgs(e,o){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:o}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(RS),s.Y36(FS,4),s.Y36(s.R0b))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[s._Bn([{provide:RS,useClass:jV}])]}),t})(),LS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({}),t})(),_x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[uv,nx,LS],uv,LS]}),t})();class D2{attach(i){return this._attachedHost=i,i.attach(this)}detach(){let i=this._attachedHost;null!=i&&(this._attachedHost=null,i.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(i){this._attachedHost=i}}class Iw extends D2{constructor(i,e,o,a){super(),this.component=i,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=a}}class gv extends D2{constructor(i,e,o){super(),this.templateRef=i,this.viewContainerRef=e,this.context=o}get origin(){return this.templateRef.elementRef}attach(i,e=this.context){return this.context=e,super.attach(i)}detach(){return this.context=void 0,super.detach()}}class e4 extends D2{constructor(i){super(),this.element=i instanceof s.SBq?i.nativeElement:i}}class Nk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(i){return i instanceof Iw?(this._attachedPortal=i,this.attachComponentPortal(i)):i instanceof gv?(this._attachedPortal=i,this.attachTemplatePortal(i)):this.attachDomPortal&&i instanceof e4?(this._attachedPortal=i,this.attachDomPortal(i)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(i){this._disposeFn=i}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class wF extends Nk{constructor(i,e,o,a,c){super(),this.outletElement=i,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=a,this.attachDomPortal=v=>{const A=v.element,z=this._document.createComment("dom-portal");A.parentNode.insertBefore(z,A),this.outletElement.appendChild(A),this._attachedPortal=v,super.setDisposeFn(()=>{z.parentNode&&z.parentNode.replaceChild(A,z)})},this._document=c}attachComponentPortal(i){const o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component);let a;return i.viewContainerRef?(a=i.viewContainerRef.createComponent(o,i.viewContainerRef.length,i.injector||i.viewContainerRef.injector),this.setDisposeFn(()=>a.destroy())):(a=o.create(i.injector||this._defaultInjector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(a)),this._attachedPortal=i,a}attachTemplatePortal(i){let e=i.viewContainerRef,o=e.createEmbeddedView(i.templateRef,i.context);return o.rootNodes.forEach(a=>this.outletElement.appendChild(a)),o.detectChanges(),this.setDisposeFn(()=>{let a=e.indexOf(o);-1!==a&&e.remove(a)}),this._attachedPortal=i,o}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(i){return i.hostView.rootNodes[0]}}let yx=(()=>{class t extends Nk{constructor(e,o,a){super(),this._componentFactoryResolver=e,this._viewContainerRef=o,this._isInitialized=!1,this.attached=new s.vpe,this.attachDomPortal=c=>{const v=c.element,A=this._document.createComment("dom-portal");c.setAttachedHost(this),v.parentNode.insertBefore(A,v),this._getRootNode().appendChild(v),this._attachedPortal=c,super.setDisposeFn(()=>{A.parentNode&&A.parentNode.replaceChild(v,A)})},this._document=a}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const o=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,c=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),v=o.createComponent(c,o.length,e.injector||o.injector);return o!==this._viewContainerRef&&this._getRootNode().appendChild(v.hostView.rootNodes[0]),super.setDisposeFn(()=>v.destroy()),this._attachedPortal=e,this._attachedRef=v,this.attached.emit(v),v}attachTemplatePortal(e){e.setAttachedHost(this);const o=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s._Vd),s.Y36(s.s_b),s.Y36(wt))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[s.qOj]}),t})(),Bk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({}),t})();class n4{constructor(i,e){this.predicate=i,this.inclusive=e}call(i,e){return e.subscribe(new r4(i,this.predicate,this.inclusive))}}class r4 extends Xo.L{constructor(i,e,o){super(i),this.predicate=e,this.inclusive=o,this.index=0}_next(i){const e=this.destination;let o;try{o=this.predicate(i,this.index++)}catch(a){return void e.error(a)}this.nextOrComplete(i,o)}nextOrComplete(i,e){const o=this.destination;Boolean(e)?o.next(i):(this.inclusive&&o.next(i),o.complete())}}const SF=mw();class o4{constructor(i,e){this._viewportRuler=i,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const i=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=i.style.left||"",this._previousHTMLStyles.top=i.style.top||"",i.style.left=Sa(-this._previousScrollPosition.left),i.style.top=Sa(-this._previousScrollPosition.top),i.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const i=this._document.documentElement,o=i.style,a=this._document.body.style,c=o.scrollBehavior||"",v=a.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,i.classList.remove("cdk-global-scrollblock"),SF&&(o.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),SF&&(o.scrollBehavior=c,a.scrollBehavior=v)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}}class s4{constructor(i,e,o,a){this._scrollDispatcher=i,this._ngZone=e,this._viewportRuler=o,this._config=a,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(i){this._overlayRef=i}enable(){if(this._scrollSubscription)return;const i=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=i.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=i.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class EF{enable(){}disable(){}attach(){}}function I2(t,i){return i.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function TF(t,i){return i.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class a4{constructor(i,e,o,a){this._scrollDispatcher=i,this._viewportRuler=e,this._ngZone=o,this._config=a,this._scrollSubscription=null}attach(i){this._overlayRef=i}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:a}=this._viewportRuler.getViewportSize();I2(e,[{width:o,height:a,bottom:a,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let l4=(()=>{class t{constructor(e,o,a,c){this._scrollDispatcher=e,this._viewportRuler=o,this._ngZone=a,this.noop=()=>new EF,this.close=v=>new s4(this._scrollDispatcher,this._ngZone,this._viewportRuler,v),this.block=()=>new o4(this._viewportRuler,this._document),this.reposition=v=>new a4(this._scrollDispatcher,this._viewportRuler,this._ngZone,v),this._document=c}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(OS),s.LFG(gx),s.LFG(s.R0b),s.LFG(wt))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(OS),(0,s.LFG)(gx),(0,s.LFG)(s.R0b),(0,s.LFG)(wt))},token:t,providedIn:"root"}),t})();class NS{constructor(i){if(this.scrollStrategy=new EF,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,i){const e=Object.keys(i);for(const o of e)void 0!==i[o]&&(this[o]=i[o])}}}class c4{constructor(i,e,o,a,c){this.offsetX=o,this.offsetY=a,this.panelClass=c,this.originX=i.originX,this.originY=i.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class u4{constructor(i,e){this.connectionPair=i,this.scrollableViewProperties=e}}let MF=(()=>{class t{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(wt))},token:t,providedIn:"root"}),t})(),h4=(()=>{class t extends MF{constructor(e){super(e),this._keydownListener=o=>{const a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){a[c]._keydownEvents.next(o);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(wt))},token:t,providedIn:"root"}),t})(),d4=(()=>{class t extends MF{constructor(e,o){super(e),this._platform=o,this._cursorStyleIsSet=!1,this._clickListener=a=>{const c=a.composedPath?a.composedPath()[0]:a.target,v=this._attachedOverlays.slice();for(let A=v.length-1;A>-1;A--){const z=v[A];if(!(z._outsidePointerEvents.observers.length<1)&&z.hasAttached()){if(z.overlayElement.contains(c))break;z._outsidePointerEvents.next(a)}}}}add(e){if(super.add(e),!this._isAttached){const o=this._document.body;o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt),s.LFG(Co))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(wt),(0,s.LFG)(Co))},token:t,providedIn:"root"}),t})();const kF=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let BS=(()=>{class t{constructor(e,o){this._platform=o,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||kF){const a=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let c=0;c<a.length;c++)a[c].parentNode.removeChild(a[c])}const o=this._document.createElement("div");o.classList.add(e),kF?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt),s.LFG(Co))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(wt),(0,s.LFG)(Co))},token:t,providedIn:"root"}),t})();class p4{constructor(i,e,o,a,c,v,A,z,$){this._portalOutlet=i,this._host=e,this._pane=o,this._config=a,this._ngZone=c,this._keyboardDispatcher=v,this._document=A,this._location=z,this._outsideClickDispatcher=$,this._backdropElement=null,this._backdropClick=new Nn.xQ,this._attachments=new Nn.xQ,this._detachments=new Nn.xQ,this._locationChanges=gs.w.EMPTY,this._backdropClickHandler=oe=>this._backdropClick.next(oe),this._keydownEvents=new Nn.xQ,this._outsidePointerEvents=new Nn.xQ,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(i){let e=this._portalOutlet.attach(i);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ue(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const i=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),i}dispose(){const i=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,i&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(i){i!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=i,this.hasAttached()&&(i.attach(this),this.updatePosition()))}updateSize(i){this._config=Object.assign(Object.assign({},this._config),i),this._updateElementSize()}setDirection(i){this._config=Object.assign(Object.assign({},this._config),{direction:i}),this._updateElementDirection()}addPanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!0)}removePanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!1)}getDirection(){const i=this._config.direction;return i?"string"==typeof i?i:i.value:"ltr"}updateScrollStrategy(i){i!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=i,this.hasAttached()&&(i.attach(this),i.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const i=this._pane.style;i.width=Sa(this._config.width),i.height=Sa(this._config.height),i.minWidth=Sa(this._config.minWidth),i.minHeight=Sa(this._config.minHeight),i.maxWidth=Sa(this._config.maxWidth),i.maxHeight=Sa(this._config.maxHeight)}_togglePointerEvents(i){this._pane.style.pointerEvents=i?"":"none"}_attachBackdrop(){const i="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(i)})}):this._backdropElement.classList.add(i)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let i=this._backdropElement;if(!i)return;let e,o=()=>{i&&(i.removeEventListener("click",this._backdropClickHandler),i.removeEventListener("transitionend",o),i.parentNode&&i.parentNode.removeChild(i)),this._backdropElement==i&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(i,this._config.backdropClass,!1),clearTimeout(e)};i.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{i.addEventListener("transitionend",o)}),i.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(o,500))}_toggleClasses(i,e,o){const a=i.classList;m_(e).forEach(c=>{c&&(o?a.add(c):a.remove(c))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const i=this._ngZone.onStable.pipe(Zo((0,bs.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),i.unsubscribe())})})}_disposeScrollStrategy(){const i=this._scrollStrategy;i&&(i.disable(),i.detach&&i.detach())}}const AF="cdk-overlay-connected-position-bounding-box",f4=/([A-Za-z%]+)$/;class DF{constructor(i,e,o,a,c){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Nn.xQ,this._resizeSubscription=gs.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(i)}get positions(){return this._preferredPositions}attach(i){this._validatePositions(),i.hostElement.classList.add(AF),this._overlayRef=i,this._boundingBox=i.hostElement,this._pane=i.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const i=this._originRect,e=this._overlayRect,o=this._viewportRect,a=[];let c;for(let v of this._preferredPositions){let A=this._getOriginPoint(i,v),z=this._getOverlayPoint(A,e,v),$=this._getOverlayFit(z,e,o,v);if($.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(v,A);this._canFitWithFlexibleDimensions($,z,o)?a.push({position:v,origin:A,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(A,v)}):(!c||c.overlayFit.visibleArea<$.visibleArea)&&(c={overlayFit:$,overlayPoint:z,originPoint:A,position:v,overlayRect:e})}if(a.length){let v=null,A=-1;for(const z of a){const $=z.boundingBoxRect.width*z.boundingBoxRect.height*(z.position.weight||1);$>A&&(A=$,v=z)}return this._isPushed=!1,void this._applyPosition(v.position,v.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&vx(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(AF),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const i=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,i);this._applyPosition(i,e)}}withScrollableContainers(i){return this._scrollables=i,this}withPositions(i){return this._preferredPositions=i,-1===i.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(i){return this._viewportMargin=i,this}withFlexibleDimensions(i=!0){return this._hasFlexibleDimensions=i,this}withGrowAfterOpen(i=!0){return this._growAfterOpen=i,this}withPush(i=!0){return this._canPush=i,this}withLockedPosition(i=!0){return this._positionLocked=i,this}setOrigin(i){return this._origin=i,this}withDefaultOffsetX(i){return this._offsetX=i,this}withDefaultOffsetY(i){return this._offsetY=i,this}withTransformOriginOn(i){return this._transformOriginSelector=i,this}_getOriginPoint(i,e){let o,a;if("center"==e.originX)o=i.left+i.width/2;else{const c=this._isRtl()?i.right:i.left,v=this._isRtl()?i.left:i.right;o="start"==e.originX?c:v}return a="center"==e.originY?i.top+i.height/2:"top"==e.originY?i.top:i.bottom,{x:o,y:a}}_getOverlayPoint(i,e,o){let a,c;return a="center"==o.overlayX?-e.width/2:"start"===o.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,c="center"==o.overlayY?-e.height/2:"top"==o.overlayY?0:-e.height,{x:i.x+a,y:i.y+c}}_getOverlayFit(i,e,o,a){const c=PF(e);let{x:v,y:A}=i,z=this._getOffset(a,"x"),$=this._getOffset(a,"y");z&&(v+=z),$&&(A+=$);let ke=0-A,Oe=A+c.height-o.height,He=this._subtractOverflows(c.width,0-v,v+c.width-o.width),ct=this._subtractOverflows(c.height,ke,Oe),At=He*ct;return{visibleArea:At,isCompletelyWithinViewport:c.width*c.height===At,fitsInViewportVertically:ct===c.height,fitsInViewportHorizontally:He==c.width}}_canFitWithFlexibleDimensions(i,e,o){if(this._hasFlexibleDimensions){const a=o.bottom-e.y,c=o.right-e.x,v=IF(this._overlayRef.getConfig().minHeight),A=IF(this._overlayRef.getConfig().minWidth),$=i.fitsInViewportHorizontally||null!=A&&A<=c;return(i.fitsInViewportVertically||null!=v&&v<=a)&&$}return!1}_pushOverlayOnScreen(i,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:i.x+this._previousPushAmount.x,y:i.y+this._previousPushAmount.y};const a=PF(e),c=this._viewportRect,v=Math.max(i.x+a.width-c.width,0),A=Math.max(i.y+a.height-c.height,0),z=Math.max(c.top-o.top-i.y,0),$=Math.max(c.left-o.left-i.x,0);let oe=0,fe=0;return oe=a.width<=c.width?$||-v:i.x<this._viewportMargin?c.left-o.left-i.x:0,fe=a.height<=c.height?z||-A:i.y<this._viewportMargin?c.top-o.top-i.y:0,this._previousPushAmount={x:oe,y:fe},{x:i.x+oe,y:i.y+fe}}_applyPosition(i,e){if(this._setTransformOrigin(i),this._setOverlayElementStyles(e,i),this._setBoundingBoxStyles(e,i),i.panelClass&&this._addPanelClasses(i.panelClass),this._lastPosition=i,this._positionChanges.observers.length){const o=this._getScrollVisibility(),a=new u4(i,o);this._positionChanges.next(a)}this._isInitialRender=!1}_setTransformOrigin(i){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,a=i.overlayY;o="center"===i.overlayX?"center":this._isRtl()?"start"===i.overlayX?"right":"left":"start"===i.overlayX?"left":"right";for(let c=0;c<e.length;c++)e[c].style.transformOrigin=`${o} ${a}`}_calculateBoundingBoxRect(i,e){const o=this._viewportRect,a=this._isRtl();let c,v,A,oe,fe,ke;if("top"===e.overlayY)v=i.y,c=o.height-v+this._viewportMargin;else if("bottom"===e.overlayY)A=o.height-i.y+2*this._viewportMargin,c=o.height-A+this._viewportMargin;else{const Oe=Math.min(o.bottom-i.y+o.top,i.y),He=this._lastBoundingBoxSize.height;c=2*Oe,v=i.y-Oe,c>He&&!this._isInitialRender&&!this._growAfterOpen&&(v=i.y-He/2)}if("end"===e.overlayX&&!a||"start"===e.overlayX&&a)ke=o.width-i.x+this._viewportMargin,oe=i.x-this._viewportMargin;else if("start"===e.overlayX&&!a||"end"===e.overlayX&&a)fe=i.x,oe=o.right-i.x;else{const Oe=Math.min(o.right-i.x+o.left,i.x),He=this._lastBoundingBoxSize.width;oe=2*Oe,fe=i.x-Oe,oe>He&&!this._isInitialRender&&!this._growAfterOpen&&(fe=i.x-He/2)}return{top:v,left:fe,bottom:A,right:ke,width:oe,height:c}}_setBoundingBoxStyles(i,e){const o=this._calculateBoundingBoxRect(i,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,v=this._overlayRef.getConfig().maxWidth;a.height=Sa(o.height),a.top=Sa(o.top),a.bottom=Sa(o.bottom),a.width=Sa(o.width),a.left=Sa(o.left),a.right=Sa(o.right),a.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",a.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",c&&(a.maxHeight=Sa(c)),v&&(a.maxWidth=Sa(v))}this._lastBoundingBoxSize=o,vx(this._boundingBox.style,a)}_resetBoundingBoxStyles(){vx(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){vx(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(i,e){const o={},a=this._hasExactPosition(),c=this._hasFlexibleDimensions,v=this._overlayRef.getConfig();if(a){const oe=this._viewportRuler.getViewportScrollPosition();vx(o,this._getExactOverlayY(e,i,oe)),vx(o,this._getExactOverlayX(e,i,oe))}else o.position="static";let A="",z=this._getOffset(e,"x"),$=this._getOffset(e,"y");z&&(A+=`translateX(${z}px) `),$&&(A+=`translateY(${$}px)`),o.transform=A.trim(),v.maxHeight&&(a?o.maxHeight=Sa(v.maxHeight):c&&(o.maxHeight="")),v.maxWidth&&(a?o.maxWidth=Sa(v.maxWidth):c&&(o.maxWidth="")),vx(this._pane.style,o)}_getExactOverlayY(i,e,o){let a={top:"",bottom:""},c=this._getOverlayPoint(e,this._overlayRect,i);this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,o));let v=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return c.y-=v,"bottom"===i.overlayY?a.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":a.top=Sa(c.y),a}_getExactOverlayX(i,e,o){let v,a={left:"",right:""},c=this._getOverlayPoint(e,this._overlayRect,i);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,o)),v=this._isRtl()?"end"===i.overlayX?"left":"right":"end"===i.overlayX?"right":"left","right"===v?a.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":a.left=Sa(c.x),a}_getScrollVisibility(){const i=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:TF(i,o),isOriginOutsideView:I2(i,o),isOverlayClipped:TF(e,o),isOverlayOutsideView:I2(e,o)}}_subtractOverflows(i,...e){return e.reduce((o,a)=>o-Math.max(a,0),i)}_getNarrowedViewportRect(){const i=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+i-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:i-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(i,e){return"x"===e?null==i.offsetX?this._offsetX:i.offsetX:null==i.offsetY?this._offsetY:i.offsetY}_validatePositions(){}_addPanelClasses(i){this._pane&&m_(i).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(i=>{this._pane.classList.remove(i)}),this._appliedPanelClasses=[])}_getOriginRect(){const i=this._origin;if(i instanceof s.SBq)return i.nativeElement.getBoundingClientRect();if(i instanceof Element)return i.getBoundingClientRect();const e=i.width||0,o=i.height||0;return{top:i.y,bottom:i.y+o,left:i.x,right:i.x+e,height:o,width:e}}}function vx(t,i){for(let e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}function IF(t){if("number"!=typeof t&&null!=t){const[i,e]=t.split(f4);return e&&"px"!==e?null:parseFloat(i)}return t||null}function PF(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class m4{constructor(i,e,o,a,c,v,A){this._preferredPositions=[],this._positionStrategy=new DF(o,a,c,v,A).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(i,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(i){this._overlayRef=i,this._positionStrategy.attach(i),this._direction&&(i.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(i){this._positionStrategy.withScrollableContainers(i)}withFallbackPosition(i,e,o,a){const c=new c4(i,e,o,a);return this._preferredPositions.push(c),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(i){return this._overlayRef?this._overlayRef.setDirection(i):this._direction=i,this}withOffsetX(i){return this._positionStrategy.withDefaultOffsetX(i),this}withOffsetY(i){return this._positionStrategy.withDefaultOffsetY(i),this}withLockedPosition(i){return this._positionStrategy.withLockedPosition(i),this}withPositions(i){return this._preferredPositions=i.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(i){return this._positionStrategy.setOrigin(i),this}}const RF="cdk-global-overlay-wrapper";class g4{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(i){const e=i.getConfig();this._overlayRef=i,this._width&&!e.width&&i.updateSize({width:this._width}),this._height&&!e.height&&i.updateSize({height:this._height}),i.hostElement.classList.add(RF),this._isDisposed=!1}top(i=""){return this._bottomOffset="",this._topOffset=i,this._alignItems="flex-start",this}left(i=""){return this._rightOffset="",this._leftOffset=i,this._justifyContent="flex-start",this}bottom(i=""){return this._topOffset="",this._bottomOffset=i,this._alignItems="flex-end",this}right(i=""){return this._leftOffset="",this._rightOffset=i,this._justifyContent="flex-end",this}width(i=""){return this._overlayRef?this._overlayRef.updateSize({width:i}):this._width=i,this}height(i=""){return this._overlayRef?this._overlayRef.updateSize({height:i}):this._height=i,this}centerHorizontally(i=""){return this.left(i),this._justifyContent="center",this}centerVertically(i=""){return this.top(i),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:a,height:c,maxWidth:v,maxHeight:A}=o,z=!("100%"!==a&&"100vw"!==a||v&&"100%"!==v&&"100vw"!==v),$=!("100%"!==c&&"100vh"!==c||A&&"100%"!==A&&"100vh"!==A);i.position=this._cssPosition,i.marginLeft=z?"0":this._leftOffset,i.marginTop=$?"0":this._topOffset,i.marginBottom=this._bottomOffset,i.marginRight=this._rightOffset,z?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=$?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(RF),o.justifyContent=o.alignItems=i.marginTop=i.marginBottom=i.marginLeft=i.marginRight=i.position="",this._overlayRef=null,this._isDisposed=!0}}let _4=(()=>{class t{constructor(e,o,a,c){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=c}global(){return new g4}connectedTo(e,o,a){return new m4(o,a,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new DF(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(gx),s.LFG(wt),s.LFG(Co),s.LFG(BS))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(gx),(0,s.LFG)(wt),(0,s.LFG)(Co),(0,s.LFG)(BS))},token:t,providedIn:"root"}),t})(),y4=0,Ud=(()=>{class t{constructor(e,o,a,c,v,A,z,$,oe,fe,ke){this.scrollStrategies=e,this._overlayContainer=o,this._componentFactoryResolver=a,this._positionBuilder=c,this._keyboardDispatcher=v,this._injector=A,this._ngZone=z,this._document=$,this._directionality=oe,this._location=fe,this._outsideClickDispatcher=ke}create(e){const o=this._createHostElement(),a=this._createPaneElement(o),c=this._createPortalOutlet(a),v=new NS(e);return v.direction=v.direction||this._directionality.value,new p4(c,o,a,v,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const o=this._document.createElement("div");return o.id="cdk-overlay-"+y4++,o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(s.z2F)),new wF(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(l4),s.LFG(BS),s.LFG(s._Vd),s.LFG(_4),s.LFG(h4),s.LFG(s.zs3),s.LFG(s.R0b),s.LFG(wt),s.LFG(Qh),s.LFG(Vn),s.LFG(d4))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();const v4=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],OF=new s.OlP("cdk-connected-overlay-scroll-strategy");let b4=(()=>{class t{constructor(e){this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),t})(),FF=(()=>{class t{constructor(e,o,a,c,v){this._overlay=e,this._dir=v,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=gs.w.EMPTY,this._attachSubscription=gs.w.EMPTY,this._detachSubscription=gs.w.EMPTY,this._positionSubscription=gs.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new s.vpe,this.positionChange=new s.vpe,this.attach=new s.vpe,this.detach=new s.vpe,this.overlayKeydown=new s.vpe,this.overlayOutsideClick=new s.vpe,this._templatePortal=new gv(o,a),this._scrollStrategyFactory=c,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=br(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=br(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=br(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=br(e)}get push(){return this._push}set push(e){this._push=br(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=v4);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(o=>{this.overlayKeydown.next(o),27===o.keyCode&&!this.disableClose&&!Na(o)&&(o.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(o=>{this.overlayOutsideClick.next(o)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),o=new NS({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(o.width=this.width),(this.height||0===this.height)&&(o.height=this.height),(this.minWidth||0===this.minWidth)&&(o.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(o.minHeight=this.minHeight),this.backdropClass&&(o.backdropClass=this.backdropClass),this.panelClass&&(o.panelClass=this.panelClass),o}_updatePositionStrategy(e){const o=this.positions.map(a=>({originX:a.originX,originY:a.originY,overlayX:a.overlayX,overlayY:a.overlayY,offsetX:a.offsetX||this.offsetX,offsetY:a.offsetY||this.offsetY,panelClass:a.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(o).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(t,i=!1){return e=>e.lift(new n4(t,i))}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ud),s.Y36(s.Rgc),s.Y36(s.s_b),s.Y36(OF),s.Y36(Qh,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[s.TTD]}),t})();const w4={provide:OF,deps:[Ud],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let zS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[Ud,w4],imports:[[uv,Bk,_x],_x]}),t})();const C4=["underline"],S4=["connectionContainer"],E4=["inputContainer"],T4=["label"];function M4(t,i){1&t&&(s.ynx(0),s.TgZ(1,"div",14),s._UZ(2,"div",15),s._UZ(3,"div",16),s._UZ(4,"div",17),s.qZA(),s.TgZ(5,"div",18),s._UZ(6,"div",15),s._UZ(7,"div",16),s._UZ(8,"div",17),s.qZA(),s.BQk())}function k4(t,i){1&t&&(s.TgZ(0,"div",19),s.Hsn(1,1),s.qZA())}function A4(t,i){if(1&t&&(s.ynx(0),s.Hsn(1,2),s.TgZ(2,"span"),s._uU(3),s.qZA(),s.BQk()),2&t){const e=s.oxw(2);s.xp6(3),s.Oqu(e._control.placeholder)}}function D4(t,i){1&t&&s.Hsn(0,3,["*ngSwitchCase","true"])}function I4(t,i){1&t&&(s.TgZ(0,"span",23),s._uU(1," *"),s.qZA())}function P4(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"label",20,21),s.NdJ("cdkObserveContent",function(){return s.CHM(e),s.oxw().updateOutlineGap()}),s.YNc(2,A4,4,1,"ng-container",12),s.YNc(3,D4,1,0,"ng-content",12),s.YNc(4,I4,2,0,"span",22),s.qZA()}if(2&t){const e=s.oxw();s.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),s.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),s.uIk("for",e._control.id)("aria-owns",e._control.id),s.xp6(2),s.Q6J("ngSwitchCase",!1),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function R4(t,i){1&t&&(s.TgZ(0,"div",24),s.Hsn(1,4),s.qZA())}function O4(t,i){if(1&t&&(s.TgZ(0,"div",25,26),s._UZ(2,"span",27),s.qZA()),2&t){const e=s.oxw();s.xp6(2),s.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function F4(t,i){if(1&t&&(s.TgZ(0,"div"),s.Hsn(1,5),s.qZA()),2&t){const e=s.oxw();s.Q6J("@transitionMessages",e._subscriptAnimationState)}}function L4(t,i){if(1&t&&(s.TgZ(0,"div",31),s._uU(1),s.qZA()),2&t){const e=s.oxw(2);s.Q6J("id",e._hintLabelId),s.xp6(1),s.Oqu(e.hintLabel)}}function N4(t,i){if(1&t&&(s.TgZ(0,"div",28),s.YNc(1,L4,2,2,"div",29),s.Hsn(2,6),s._UZ(3,"div",30),s.Hsn(4,7),s.qZA()),2&t){const e=s.oxw();s.Q6J("@transitionMessages",e._subscriptAnimationState),s.xp6(1),s.Q6J("ngIf",e.hintLabel)}}const B4=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],z4=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],LF=new s.OlP("MatError"),U4={transitionMessages:ns("transitionMessages",[co("enter",Rn({opacity:1,transform:"translateY(0%)"})),ur("void => enter",[Rn({opacity:0,transform:"translateY(-5px)"}),dr("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let zk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t}),t})();const NF=new s.OlP("MatHint");let bx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t,selectors:[["mat-label"]]}),t})(),G4=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t,selectors:[["mat-placeholder"]]}),t})();const BF=new s.OlP("MatPrefix"),zF=new s.OlP("MatSuffix");let VF=0;class Y4{constructor(i){this._elementRef=i}}const q4=kw(Y4,"primary"),Z4=new s.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),P2=new s.OlP("MatFormField");let Pw=(()=>{class t extends q4{constructor(e,o,a,c,v,A,z,$){super(e),this._elementRef=e,this._changeDetectorRef=o,this._dir=c,this._defaults=v,this._platform=A,this._ngZone=z,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Nn.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+VF++,this._labelId="mat-form-field-label-"+VF++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==$,this.appearance=v&&v.appearance?v.appearance:"legacy",this._hideRequiredMarker=!(!v||null==v.hideRequiredMarker)&&v.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const o=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&o!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=br(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(ws(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Zo(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Zo(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,bs.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ws(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ws(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Zo(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const o=this._control?this._control.ngControl:null;return o&&o[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Dw(this._label.nativeElement,"transitionend").pipe(ue(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const o=this._hintChildren?this._hintChildren.find(c=>"start"===c.align):null,a=this._hintChildren?this._hintChildren.find(c=>"end"===c.align):null;o?e.push(o.id):this._hintLabel&&e.push(this._hintLabelId),a&&e.push(a.id)}else this._errorChildren&&e.push(...this._errorChildren.map(o=>o.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&e&&e.children.length&&e.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const c=this._connectionContainerRef.nativeElement,v=c.querySelectorAll(".mat-form-field-outline-start"),A=c.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const z=c.getBoundingClientRect();if(0===z.width&&0===z.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const $=this._getStartEnd(z),oe=e.children,fe=this._getStartEnd(oe[0].getBoundingClientRect());let ke=0;for(let Oe=0;Oe<oe.length;Oe++)ke+=oe[Oe].offsetWidth;o=Math.abs(fe-$)-5,a=ke>0?.75*ke+10:0}for(let z=0;z<v.length;z++)v[z].style.width=`${o}px`;for(let z=0;z<A.length;z++)A[z].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const o=e.getRootNode();return o&&o!==e}return document.documentElement.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(s.SBq),s.Y36(Qh,8),s.Y36(Z4,8),s.Y36(Co),s.Y36(s.R0b),s.Y36(ih,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-form-field"]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,zk,5),s.Suo(a,zk,7),s.Suo(a,bx,5),s.Suo(a,bx,7),s.Suo(a,G4,5),s.Suo(a,LF,5),s.Suo(a,NF,5),s.Suo(a,BF,5),s.Suo(a,zF,5)),2&e){let c;s.iGM(c=s.CRH())&&(o._controlNonStatic=c.first),s.iGM(c=s.CRH())&&(o._controlStatic=c.first),s.iGM(c=s.CRH())&&(o._labelChildNonStatic=c.first),s.iGM(c=s.CRH())&&(o._labelChildStatic=c.first),s.iGM(c=s.CRH())&&(o._placeholderChild=c.first),s.iGM(c=s.CRH())&&(o._errorChildren=c),s.iGM(c=s.CRH())&&(o._hintChildren=c),s.iGM(c=s.CRH())&&(o._prefixChildren=c),s.iGM(c=s.CRH())&&(o._suffixChildren=c)}},viewQuery:function(e,o){if(1&e&&(s.Gf(C4,5),s.Gf(S4,7),s.Gf(E4,5),s.Gf(T4,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.underlineRef=a.first),s.iGM(a=s.CRH())&&(o._connectionContainerRef=a.first),s.iGM(a=s.CRH())&&(o._inputContainerRef=a.first),s.iGM(a=s.CRH())&&(o._label=a.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,o){2&e&&s.ekj("mat-form-field-appearance-standard","standard"==o.appearance)("mat-form-field-appearance-fill","fill"==o.appearance)("mat-form-field-appearance-outline","outline"==o.appearance)("mat-form-field-appearance-legacy","legacy"==o.appearance)("mat-form-field-invalid",o._control.errorState)("mat-form-field-can-float",o._canLabelFloat())("mat-form-field-should-float",o._shouldLabelFloat())("mat-form-field-has-label",o._hasFloatingLabel())("mat-form-field-hide-placeholder",o._hideControlPlaceholder())("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-focused",o._control.focused)("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))("_mat-animation-noopable",!o._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[s._Bn([{provide:P2,useExisting:t}]),s.qOj],ngContentSelectors:z4,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,o){1&e&&(s.F$t(B4),s.TgZ(0,"div",0),s.TgZ(1,"div",1,2),s.NdJ("click",function(c){return o._control.onContainerClick&&o._control.onContainerClick(c)}),s.YNc(3,M4,9,0,"ng-container",3),s.YNc(4,k4,2,0,"div",4),s.TgZ(5,"div",5,6),s.Hsn(7),s.TgZ(8,"span",7),s.YNc(9,P4,5,16,"label",8),s.qZA(),s.qZA(),s.YNc(10,R4,2,0,"div",9),s.qZA(),s.YNc(11,O4,3,4,"div",10),s.TgZ(12,"div",11),s.YNc(13,F4,2,1,"div",12),s.YNc(14,N4,5,2,"div",13),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Q6J("ngIf","outline"==o.appearance),s.xp6(1),s.Q6J("ngIf",o._prefixChildren.length),s.xp6(5),s.Q6J("ngIf",o._hasFloatingLabel()),s.xp6(1),s.Q6J("ngIf",o._suffixChildren.length),s.xp6(1),s.Q6J("ngIf","outline"!=o.appearance),s.xp6(1),s.Q6J("ngSwitch",o._getDisplayedMessages()),s.xp6(1),s.Q6J("ngSwitchCase","error"),s.xp6(1),s.Q6J("ngSwitchCase","hint"))},directives:[Xt,Bi,zn,ik],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[U4.transitionMessages]},changeDetection:0}),t})(),Vk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Ir,th],Ir]}),t})();var W4=nt(1555);function HF(...t){if(1===t.length){const i=t[0];if((0,Fu.k)(i))return Uk(i,null);if((0,W4.K)(i)&&Object.getPrototypeOf(i)===Object.prototype){const e=Object.keys(i);return Uk(e.map(o=>i[o]),e)}}if("function"==typeof t[t.length-1]){const i=t.pop();return Uk(t=1===t.length&&(0,Fu.k)(t[0])?t[0]:t,null).pipe((0,ei.U)(e=>i(...e)))}return Uk(t,null)}function Uk(t,i){return new Yr.y(e=>{const o=t.length;if(0===o)return void e.complete();const a=new Array(o);let c=0,v=0;for(let A=0;A<o;A++){const z=(0,Nr.D)(t[A]);let $=!1;e.add(z.subscribe({next:oe=>{$||($=!0,v++),a[A]=oe},error:oe=>e.error(oe),complete:()=>{c++,(c===o||!$)&&(v===o&&e.next(i?i.reduce((oe,fe,ke)=>(oe[fe]=a[ke],oe),{}):a),e.complete())}}))}})}let GF=(()=>{class t{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Qsj),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t}),t})(),xx=(()=>{class t extends GF{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,features:[s.qOj]}),t})();const ll=new s.OlP("NgValueAccessor"),X4={provide:ll,useExisting:(0,s.Gpc)(()=>wx),multi:!0},J4=new s.OlP("CompositionEventMode");let wx=(()=>{class t extends GF{constructor(e,o,a){super(e,o),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Ee()?Ee().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(J4,8))},t.\u0275dir=s.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&s.NdJ("input",function(c){return o._handleInput(c.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(c){return o._compositionEnd(c.target.value)})},features:[s._Bn([X4]),s.qOj]}),t})();function _v(t){return null==t||0===t.length}function YF(t){return null!=t&&"number"==typeof t.length}const Rc=new s.OlP("NgValidators"),yv=new s.OlP("NgAsyncValidators"),K4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class us{static min(i){return function(t){return i=>{if(_v(i.value)||_v(t))return null;const e=parseFloat(i.value);return!isNaN(e)&&e<t?{min:{min:t,actual:i.value}}:null}}(i)}static max(i){return function(t){return i=>{if(_v(i.value)||_v(t))return null;const e=parseFloat(i.value);return!isNaN(e)&&e>t?{max:{max:t,actual:i.value}}:null}}(i)}static required(i){return WF(i)}static requiredTrue(i){return function(t){return!0===t.value?null:{required:!0}}(i)}static email(i){return function(t){return _v(t.value)||K4.test(t.value)?null:{email:!0}}(i)}static minLength(i){return QF(i)}static maxLength(i){return function(t){return i=>YF(i.value)&&i.value.length>t?{maxlength:{requiredLength:t,actualLength:i.value.length}}:null}(i)}static pattern(i){return function(t){if(!t)return vv;let i,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),i=new RegExp(e)):(e=t.toString(),i=t),o=>{if(_v(o.value))return null;const a=o.value;return i.test(a)?null:{pattern:{requiredPattern:e,actualValue:a}}}}(i)}static nullValidator(i){return null}static compose(i){return oL(i)}static composeAsync(i){return sL(i)}}function WF(t){return _v(t.value)?{required:!0}:null}function QF(t){return i=>_v(i.value)||!YF(i.value)?null:i.value.length<t?{minlength:{requiredLength:t,actualLength:i.value.length}}:null}function vv(t){return null}function eL(t){return null!=t}function tL(t){const i=(0,s.QGY)(t)?(0,Nr.D)(t):t;return(0,s.CqO)(i),i}function nL(t){let i={};return t.forEach(e=>{i=null!=e?Object.assign(Object.assign({},i),e):i}),0===Object.keys(i).length?null:i}function iL(t,i){return i.map(e=>e(t))}function rL(t){return t.map(i=>function(t){return!t.validate}(i)?i:e=>i.validate(e))}function oL(t){if(!t)return null;const i=t.filter(eL);return 0==i.length?null:function(e){return nL(iL(e,i))}}function R2(t){return null!=t?oL(rL(t)):null}function sL(t){if(!t)return null;const i=t.filter(eL);return 0==i.length?null:function(e){return HF(iL(e,i).map(tL)).pipe((0,ei.U)(nL))}}function O2(t){return null!=t?sL(rL(t)):null}function aL(t,i){return null===t?[i]:Array.isArray(t)?[...t,i]:[t,i]}function lL(t){return t._rawValidators}function cL(t){return t._rawAsyncValidators}function F2(t){return t?Array.isArray(t)?t:[t]:[]}function Hk(t,i){return Array.isArray(t)?t.includes(i):t===i}function uL(t,i){const e=F2(i);return F2(t).forEach(a=>{Hk(e,a)||e.push(a)}),e}function hL(t,i){return F2(i).filter(e=>!Hk(t,e))}let dL=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=R2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=O2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,o){return!!this.control&&this.control.hasError(e,o)}getError(e,o){return this.control?this.control.getError(e,o):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t}),t})(),rh=(()=>{class t extends dL{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,features:[s.qOj]}),t})();class Qm extends dL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pL{constructor(i){this._cd=i}is(i){var e,o,a;return"submitted"===i?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(a=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===a?void 0:a[i])}}let bv=(()=>{class t extends pL{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Qm,2))},t.\u0275dir=s.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&s.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[s.qOj]}),t})(),VS=(()=>{class t extends pL{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(rh,10))},t.\u0275dir=s.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,o){2&e&&s.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))("ng-submitted",o.is("submitted"))},features:[s.qOj]}),t})();function Gk(t,i){return[...i.path,t]}function US(t,i){L2(t,i),i.valueAccessor.writeValue(t.value),function(t,i){i.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&fL(t,i)})}(t,i),function(t,i){const e=(o,a)=>{i.valueAccessor.writeValue(o),a&&i.viewToModelUpdate(o)};t.registerOnChange(e),i._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,i),function(t,i){i.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&fL(t,i),"submit"!==t.updateOn&&t.markAsTouched()})}(t,i),function(t,i){if(i.valueAccessor.setDisabledState){const e=o=>{i.valueAccessor.setDisabledState(o)};t.registerOnDisabledChange(e),i._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,i)}function jk(t,i,e=!0){const o=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(o),i.valueAccessor.registerOnTouched(o)),qk(t,i),t&&(i._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Yk(t,i){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function L2(t,i){const e=lL(t);null!==i.validator?t.setValidators(aL(e,i.validator)):"function"==typeof e&&t.setValidators([e]);const o=cL(t);null!==i.asyncValidator?t.setAsyncValidators(aL(o,i.asyncValidator)):"function"==typeof o&&t.setAsyncValidators([o]);const a=()=>t.updateValueAndValidity();Yk(i._rawValidators,a),Yk(i._rawAsyncValidators,a)}function qk(t,i){let e=!1;if(null!==t){if(null!==i.validator){const a=lL(t);if(Array.isArray(a)&&a.length>0){const c=a.filter(v=>v!==i.validator);c.length!==a.length&&(e=!0,t.setValidators(c))}}if(null!==i.asyncValidator){const a=cL(t);if(Array.isArray(a)&&a.length>0){const c=a.filter(v=>v!==i.asyncValidator);c.length!==a.length&&(e=!0,t.setAsyncValidators(c))}}}const o=()=>{};return Yk(i._rawValidators,o),Yk(i._rawAsyncValidators,o),e}function fL(t,i){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function mL(t,i){L2(t,i)}function N2(t,i){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}function gL(t,i){t._syncPendingControls(),i.forEach(e=>{const o=e.control;"submit"===o.updateOn&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}function B2(t,i){if(!i)return null;let e,o,a;return Array.isArray(i),i.forEach(c=>{c.constructor===wx?e=c:function(t){return Object.getPrototypeOf(t.constructor)===xx}(c)?o=c:a=c}),a||o||e||null}function Zk(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}const HS="VALID",Wk="INVALID",Rw="PENDING",GS="DISABLED";function z2(t){return(U2(t)?t.validators:t)||null}function _L(t){return Array.isArray(t)?R2(t):t||null}function V2(t,i){return(U2(i)?i.asyncValidators:t)||null}function yL(t){return Array.isArray(t)?O2(t):t||null}function U2(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class H2{constructor(i,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=_L(this._rawValidators),this._composedAsyncValidatorFn=yL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===HS}get invalid(){return this.status===Wk}get pending(){return this.status==Rw}get disabled(){return this.status===GS}get enabled(){return this.status!==GS}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=_L(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=yL(i)}addValidators(i){this.setValidators(uL(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(uL(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(hL(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(hL(i,this._rawAsyncValidators))}hasValidator(i){return Hk(this._rawValidators,i)}hasAsyncValidator(i){return Hk(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=Rw,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=GS,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=HS,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===HS||this.status===Rw)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?GS:HS}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=Rw,this._hasOwnPendingAsyncValidator=!0;const e=tL(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){return function(t,i,e){if(null==i||(Array.isArray(i)||(i=i.split(".")),Array.isArray(i)&&0===i.length))return null;let o=t;return i.forEach(a=>{o=o instanceof jS?o.controls.hasOwnProperty(a)?o.controls[a]:null:o instanceof G2&&o.at(a)||null}),o}(this,i)}getError(i,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?GS:this.errors?Wk:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rw)?Rw:this._anyControlsHaveStatus(Wk)?Wk:HS}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_isBoxedValue(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){U2(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class xv extends H2{constructor(i=null,e,o){super(z2(e),V2(o,e)),this._onChange=[],this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=null,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){Zk(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){Zk(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){this._isBoxedValue(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}}class jS extends H2{constructor(i,e,o){super(z2(e),V2(o,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,o={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,o={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){this._checkAllValuesPresent(i),Object.keys(i).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(i[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(i[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((o,a)=>{o.reset(i[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,o)=>(i[o]=e instanceof xv?e.value:e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_throwIfControlMissing(i){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[i])throw new Error(`Cannot find form control with name: ${i}.`)}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&i(o,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const e of Object.keys(this.controls)){const o=this.controls[e];if(this.contains(e)&&i(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(i,e,o)=>((e.enabled||this.disabled)&&(i[o]=e.value),i))}_reduceChildren(i,e){let o=i;return this._forEachChild((a,c)=>{o=e(o,a,c)}),o}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(i){this._forEachChild((e,o)=>{if(void 0===i[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class G2 extends H2{constructor(i,e,o){super(z2(e),V2(o,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[i]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,o={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,o={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){this._checkAllValuesPresent(i),i.forEach((o,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((o,a)=>{this.at(a)&&this.at(a).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((o,a)=>{o.reset(i[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>i instanceof xv?i.value:i.getRawValue())}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_syncPendingControls(){let i=this.controls.reduce((e,o)=>!!o._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_throwIfControlMissing(i){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(i))throw new Error(`Cannot find form control at index ${i}`)}_forEachChild(i){this.controls.forEach((e,o)=>{i(e,o)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_checkAllValuesPresent(i){this._forEachChild((e,o)=>{if(void 0===i[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}}const h6={provide:rh,useExisting:(0,s.Gpc)(()=>qS)},YS=(()=>Promise.resolve(null))();let qS=(()=>{class t extends rh{constructor(e,o){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new s.vpe,this.form=new jS({},R2(e),O2(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){YS.then(()=>{const o=this._findContainer(e.path);e.control=o.registerControl(e.name,e.control),US(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){YS.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name),Zk(this._directives,e)})}addFormGroup(e){YS.then(()=>{const o=this._findContainer(e.path),a=new jS({});mL(a,e),o.registerControl(e.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){YS.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,o){YS.then(()=>{this.form.get(e.path).setValue(o)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,gL(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Rc,10),s.Y36(yv,10))},t.\u0275dir=s.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,o){1&e&&s.NdJ("submit",function(c){return o.onSubmit(c)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([h6]),s.qOj]}),t})();const p6={provide:Qm,useExisting:(0,s.Gpc)(()=>Ow)},xL=(()=>Promise.resolve(null))();let Ow=(()=>{class t extends Qm{constructor(e,o,a,c){super(),this.control=new xv,this._registered=!1,this.update=new s.vpe,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=B2(0,c)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),N2(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Gk(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){US(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){xL.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const o=e.isDisabled.currentValue,a=""===o||o&&"false"!==o;xL.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(rh,9),s.Y36(Rc,10),s.Y36(yv,10),s.Y36(ll,10))},t.\u0275dir=s.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s._Bn([p6]),s.qOj,s.TTD]}),t})(),ZS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),CL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({}),t})();const j2=new s.OlP("NgModelWithFormControlWarning"),v6={provide:rh,useExisting:(0,s.Gpc)(()=>w_)};let w_=(()=>{class t extends rh{constructor(e,o){super(),this.validators=e,this.asyncValidators=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new s.vpe,this._setValidators(e),this._setAsyncValidators(o)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qk(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const o=this.form.get(e.path);return US(o,e),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),o}getControl(e){return this.form.get(e.path)}removeControl(e){jk(e.control||null,e,!1),Zk(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,o){this.form.get(e.path).setValue(o)}onSubmit(e){return this.submitted=!0,gL(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const o=e.control,a=this.form.get(e.path);o!==a&&(jk(o||null,e),a instanceof xv&&(US(a,e),e.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const o=this.form.get(e.path);mL(o,e),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const o=this.form.get(e.path);o&&function(t,i){return qk(t,i)}(o,e)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){L2(this.form,this),this._oldForm&&qk(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Rc,10),s.Y36(yv,10))},t.\u0275dir=s.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,o){1&e&&s.NdJ("submit",function(c){return o.onSubmit(c)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([v6]),s.qOj,s.TTD]}),t})();const w6={provide:Qm,useExisting:(0,s.Gpc)(()=>Fw)};let Fw=(()=>{class t extends Qm{constructor(e,o,a,c,v){super(),this._ngModelWarningConfig=v,this._added=!1,this.update=new s.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=B2(0,c)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),N2(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Gk(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(rh,13),s.Y36(Rc,10),s.Y36(yv,10),s.Y36(ll,10),s.Y36(j2,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[s._Bn([w6]),s.qOj,s.TTD]}),t._ngModelWarningSentOnce=!1,t})();const C6={provide:ll,useExisting:(0,s.Gpc)(()=>$k),multi:!0};function kL(t,i){return null==t?`${i}`:(i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let $k=(()=>{class t extends xx{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=this._getOptionId(e);null==o&&this.setProperty("selectedIndex",-1);const a=kL(o,e);this.setProperty("value",a)}registerOnChange(e){this.onChange=o=>{this.value=this._getOptionValue(o),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o),e))return o;return null}_getOptionValue(e){const o=function(t){return t.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o):e}}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,o){1&e&&s.NdJ("change",function(c){return o.onChange(c.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([C6]),s.qOj]}),t})(),AL=(()=>{class t{constructor(e,o,a){this._element=e,this._renderer=o,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(kL(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36($k,9))},t.\u0275dir=s.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const E6={provide:ll,useExisting:(0,s.Gpc)(()=>Z2),multi:!0};function DL(t,i){return null==t?`${i}`:("string"==typeof i&&(i=`'${i}'`),i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let Z2=(()=>{class t extends xx{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let o;if(this.value=e,Array.isArray(e)){const a=e.map(c=>this._getOptionId(c));o=(c,v)=>{c._setSelected(a.indexOf(v.toString())>-1)}}else o=(a,c)=>{a._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(e){this.onChange=o=>{const a=[];if(void 0!==o.selectedOptions){const c=o.selectedOptions;for(let v=0;v<c.length;v++){const A=c.item(v),z=this._getOptionValue(A.value);a.push(z)}}else{const c=o.options;for(let v=0;v<c.length;v++){const A=c.item(v);if(A.selected){const z=this._getOptionValue(A.value);a.push(z)}}}this.value=a,e(a)}}_registerOption(e){const o=(this._idCounter++).toString();return this._optionMap.set(o,e),o}_getOptionId(e){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o)._value,e))return o;return null}_getOptionValue(e){const o=function(t){return t.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o)._value:e}}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,o){1&e&&s.NdJ("change",function(c){return o.onChange(c.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([E6]),s.qOj]}),t})(),IL=(()=>{class t{constructor(e,o,a){this._element=e,this._renderer=o,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(DL(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(DL(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Z2,9))},t.\u0275dir=s.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const A6={provide:Rc,useExisting:(0,s.Gpc)(()=>Lw),multi:!0};let Lw=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?WF(e):null}registerOnValidatorChange(e){this._onChange=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,o){2&e&&s.uIk("required",o.required?"":null)},inputs:{required:"required"},features:[s._Bn([A6])]}),t})();const P6={provide:Rc,useExisting:(0,s.Gpc)(()=>$2),multi:!0};let $2=(()=>{class t{constructor(){this._validator=vv}ngOnChanges(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return this.enabled()?this._validator(e):null}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=this.enabled()?QF(function(t){return"number"==typeof t?t:parseInt(t,10)}(this.minlength)):vv}enabled(){return null!=this.minlength}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,o){2&e&&s.uIk("minlength",o.enabled()?o.minlength:null)},inputs:{minlength:"minlength"},features:[s._Bn([P6]),s.TTD]}),t})(),zL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[CL]]}),t})(),Xk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[zL]}),t})(),VL=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:j2,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[zL]}),t})(),Qk=(()=>{class t{group(e,o=null){const a=this._reduceControls(e);let A,c=null,v=null;return null!=o&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(o)?(c=null!=o.validators?o.validators:null,v=null!=o.asyncValidators?o.asyncValidators:null,A=null!=o.updateOn?o.updateOn:void 0):(c=null!=o.validator?o.validator:null,v=null!=o.asyncValidator?o.asyncValidator:null)),new jS(a,{asyncValidators:v,updateOn:A,validators:c})}control(e,o,a){return new xv(e,o,a)}array(e,o,a){const c=e.map(v=>this._createControl(v));return new G2(c,o,a)}_reduceControls(e){const o={};return Object.keys(e).forEach(a=>{o[a]=this._createControl(e[a])}),o}_createControl(e){return e instanceof xv||e instanceof jS||e instanceof G2?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t},token:t,providedIn:VL}),t})();const L6=["trigger"],N6=["panel"];function B6(t,i){if(1&t&&(s.TgZ(0,"span",8),s._uU(1),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Oqu(e.placeholder)}}function z6(t,i){if(1&t&&(s.TgZ(0,"span",12),s._uU(1),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Oqu(e.triggerValue)}}function V6(t,i){1&t&&s.Hsn(0,0,["*ngSwitchCase","true"])}function U6(t,i){if(1&t&&(s.TgZ(0,"span",9),s.YNc(1,z6,2,1,"span",10),s.YNc(2,V6,1,0,"ng-content",11),s.qZA()),2&t){const e=s.oxw();s.Q6J("ngSwitch",!!e.customTrigger),s.xp6(2),s.Q6J("ngSwitchCase",!0)}}function H6(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",13),s.TgZ(1,"div",14,15),s.NdJ("@transformPanel.done",function(a){return s.CHM(e),s.oxw()._panelDoneAnimatingStream.next(a.toState)})("keydown",function(a){return s.CHM(e),s.oxw()._handleKeydown(a)}),s.Hsn(3,1),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("@transformPanelWrap",void 0),s.xp6(1),s.Gre("mat-select-panel ",e._getPanelTheme(),""),s.Udp("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),s.Q6J("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),s.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const G6=[[["mat-select-trigger"]],"*"],j6=["mat-select-trigger","*"],UL={transformPanelWrap:ns("transformPanelWrap",[ur("* => void",ES("@transformPanel",[CS()],{optional:!0}))]),transformPanel:ns("transformPanel",[co("void",Rn({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),co("showing",Rn({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),co("showing-multiple",Rn({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),ur("void => *",dr("120ms cubic-bezier(0, 0, 0.2, 1)")),ur("* => void",dr("100ms 25ms linear",Rn({opacity:0})))])};let HL=0;const jL=new s.OlP("mat-select-scroll-strategy"),W6=new s.OlP("MAT_SELECT_CONFIG"),$6={provide:jL,deps:[Ud],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};class X6{constructor(i,e){this.source=i,this.value=e}}class Q6{constructor(i,e,o,a,c){this._elementRef=i,this._defaultErrorStateMatcher=e,this._parentForm=o,this._parentFormGroup=a,this.ngControl=c}}const J6=Ik(JO(b_(KO(Q6)))),YL=new s.OlP("MatSelectTrigger");let K6=(()=>{class t extends J6{constructor(e,o,a,c,v,A,z,$,oe,fe,ke,Oe,He,ct){var At,Qt,Sn;super(v,c,z,$,fe),this._viewportRuler=e,this._changeDetectorRef=o,this._ngZone=a,this._dir=A,this._parentFormField=oe,this.ngControl=fe,this._liveAnnouncer=He,this._defaultOptions=ct,this._panelOpen=!1,this._compareWith=(xn,Qn)=>xn===Qn,this._uid="mat-select-"+HL++,this._triggerAriaLabelledBy=null,this._destroy=new Nn.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+HL++,this._panelDoneAnimatingStream=new Nn.xQ,this._overlayPanelClass=(null===(At=this._defaultOptions)||void 0===At?void 0:At.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(Sn=null===(Qt=this._defaultOptions)||void 0===Qt?void 0:Qt.disableOptionCentering)&&void 0!==Sn&&Sn,this.ariaLabel="",this.optionSelectionChanges=Xp(()=>{const xn=this.options;return xn?xn.changes.pipe(ws(xn),Rr(()=>(0,bs.T)(...xn.map(Qn=>Qn.onSelectionChange)))):this._ngZone.onStable.pipe(ue(1),Rr(()=>this.optionSelectionChanges))}),this.openedChange=new s.vpe,this._openedStream=this.openedChange.pipe(w(xn=>xn),(0,ei.U)(()=>{})),this._closedStream=this.openedChange.pipe(w(xn=>!xn),(0,ei.U)(()=>{})),this.selectionChange=new s.vpe,this.valueChange=new s.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ct?void 0:ct.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ct.typeaheadDebounceInterval),this._scrollStrategyFactory=Oe,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(ke)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=br(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=br(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=br(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Fl(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new YV(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(fc(),Zo(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Zo(this._destroy)).subscribe(e=>{e.added.forEach(o=>o.select()),e.removed.forEach(o=>o.deselect())}),this.options.changes.pipe(ws(null),Zo(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const o=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?o.setAttribute("aria-labelledby",e):o.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(o=>o.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const o=e.keyCode,a=40===o||38===o||37===o||39===o,c=13===o||32===o,v=this._keyManager;if(!v.isTyping()&&c&&!Na(e)||(this.multiple||e.altKey)&&a)e.preventDefault(),this.open();else if(!this.multiple){const A=this.selected;v.onKeydown(e);const z=this.selected;z&&A!==z&&this._liveAnnouncer.announce(z.viewValue,1e4)}}_handleOpenKeydown(e){const o=this._keyManager,a=e.keyCode,c=40===a||38===a,v=o.isTyping();if(c&&e.altKey)e.preventDefault(),this.close();else if(v||13!==a&&32!==a||!o.activeItem||Na(e))if(!v&&this._multiple&&65===a&&e.ctrlKey){e.preventDefault();const A=this.options.some(z=>!z.disabled&&!z.selected);this.options.forEach(z=>{z.disabled||(A?z.select():z.deselect())})}else{const A=o.activeItemIndex;o.onKeydown(e),this._multiple&&c&&e.shiftKey&&o.activeItem&&o.activeItemIndex!==A&&o.activeItem._selectViaInteraction()}else e.preventDefault(),o.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(ue(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(o=>o.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(o=>this._selectValue(o)),this._sortValues();else{const o=this._selectValue(e);o?this._keyManager.updateActiveItem(o):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const o=this.options.find(a=>{if(this._selectionModel.isSelected(a))return!1;try{return null!=a.value&&this._compareWith(a.value,e)}catch(c){return!1}});return o&&this._selectionModel.select(o),o}_initKeyManager(){this._keyManager=new qI(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Zo(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Zo(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,bs.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Zo(e)).subscribe(o=>{this._onSelect(o.source,o.isUserInput),o.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,bs.T)(...this.options.map(o=>o._stateChanges)).pipe(Zo(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,o){const a=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(a!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),o&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),o&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),a!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((o,a)=>this.sortComparator?this.sortComparator(o,a,e):e.indexOf(o)-e.indexOf(a)),this.stateChanges.next()}}_propagateChanges(e){let o=null;o=this.multiple?this.selected.map(a=>a.value):this.selected?this.selected.value:e,this._value=o,this.valueChange.emit(o),this._onChange(o),this.selectionChange.emit(this._getChangeEvent(o)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const o=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(o?o+" ":"")+this.ariaLabelledby:o}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const o=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let a=(o?o+" ":"")+this._valueId;return this.ariaLabelledby&&(a+=" "+this.ariaLabelledby),a}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(gx),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(S2),s.Y36(s.SBq),s.Y36(Qh,8),s.Y36(qS,8),s.Y36(w_,8),s.Y36(P2,8),s.Y36(Qm,10),s.$8M("tabindex"),s.Y36(jL),s.Y36(lx),s.Y36(W6,8))},t.\u0275dir=s.lG2({type:t,viewQuery:function(e,o){if(1&e&&(s.Gf(L6,5),s.Gf(N6,5),s.Gf(FF,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.trigger=a.first),s.iGM(a=s.CRH())&&(o.panel=a.first),s.iGM(a=s.CRH())&&(o.overlayDir=a.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[s.qOj,s.TTD]}),t})(),eU=(()=>{class t extends K6{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,o,a){const c=this._getItemHeight();return Math.min(Math.max(0,c*e-o+c/2),a)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Zo(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(ue(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const o=aF(e,this.options,this.optionGroups),a=this._getItemHeight();this.panel.nativeElement.scrollTop=function(t,i,e,o){return t<e?t:t+i>e+256?Math.max(0,t-256+i):e}((e+o)*a,a,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new X6(this,e)}_calculateOverlayOffsetX(){const e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),o=this._viewportRuler.getViewportSize(),a=this._isRtl(),c=this.multiple?56:32;let v;if(this.multiple)v=40;else if(this.disableOptionCentering)v=16;else{let $=this._selectionModel.selected[0]||this.options.first;v=$&&$.group?32:16}a||(v*=-1);const A=0-(e.left+v-(a?c:0)),z=e.right+v-o.width+(a?0:c);A>0?v+=A+8:z>0&&(v-=z+8),this.overlayDir.offsetX=Math.round(v),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,o,a){const c=this._getItemHeight(),v=(c-this._triggerRect.height)/2,A=Math.floor(256/c);let z;return this.disableOptionCentering?0:(z=0===this._scrollTop?e*c:this._scrollTop===a?(e-(this._getItemCount()-A))*c+(c-(this._getItemCount()*c-256)%c):o-c/2,Math.round(-1*z-v))}_checkOverlayWithinViewport(e){const o=this._getItemHeight(),a=this._viewportRuler.getViewportSize(),c=this._triggerRect.top-8,v=a.height-this._triggerRect.bottom-8,A=Math.abs(this._offsetY),$=Math.min(this._getItemCount()*o,256)-A-this._triggerRect.height;$>v?this._adjustPanelUp($,v):A>c?this._adjustPanelDown(A,c,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,o){const a=Math.round(e-o);this._scrollTop-=a,this._offsetY-=a,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,o,a){const c=Math.round(e-o);if(this._scrollTop+=c,this._offsetY+=c,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=a)return this._scrollTop=a,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),o=this._getItemCount(),a=Math.min(o*e,256),v=o*e-a;let A;A=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),A+=aF(A,this.options,this.optionGroups);const z=a/2;this._scrollTop=this._calculateOverlayScroll(A,z,v),this._offsetY=this._calculateOverlayOffsetY(A,z,v),this._checkOverlayWithinViewport(v)}_getOriginBasedOnOption(){const e=this._getItemHeight(),o=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-o+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-select"]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,YL,5),s.Suo(a,sF,5),s.Suo(a,M2,5)),2&e){let c;s.iGM(c=s.CRH())&&(o.customTrigger=c.first),s.iGM(c=s.CRH())&&(o.options=c),s.iGM(c=s.CRH())&&(o.optionGroups=c)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,o){1&e&&s.NdJ("keydown",function(c){return o._handleKeydown(c)})("focus",function(){return o._onFocus()})("blur",function(){return o._onBlur()}),2&e&&(s.uIk("id",o.id)("tabindex",o.tabIndex)("aria-controls",o.panelOpen?o.id+"-panel":null)("aria-expanded",o.panelOpen)("aria-label",o.ariaLabel||null)("aria-required",o.required.toString())("aria-disabled",o.disabled.toString())("aria-invalid",o.errorState)("aria-describedby",o._ariaDescribedby||null)("aria-activedescendant",o._getAriaActiveDescendant()),s.ekj("mat-select-disabled",o.disabled)("mat-select-invalid",o.errorState)("mat-select-required",o.required)("mat-select-empty",o.empty)("mat-select-multiple",o.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[s._Bn([{provide:zk,useExisting:t},{provide:T2,useExisting:t}]),s.qOj],ngContentSelectors:j6,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,o){if(1&e&&(s.F$t(G6),s.TgZ(0,"div",0,1),s.NdJ("click",function(){return o.toggle()}),s.TgZ(3,"div",2),s.YNc(4,B6,2,1,"span",3),s.YNc(5,U6,3,2,"span",4),s.qZA(),s.TgZ(6,"div",5),s._UZ(7,"div",6),s.qZA(),s.qZA(),s.YNc(8,H6,4,14,"ng-template",7),s.NdJ("backdropClick",function(){return o.close()})("attach",function(){return o._onAttached()})("detach",function(){return o.close()})),2&e){const a=s.MAs(1);s.uIk("aria-owns",o.panelOpen?o.id+"-panel":null),s.xp6(3),s.Q6J("ngSwitch",o.empty),s.uIk("id",o._valueId),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngSwitchCase",!1),s.xp6(3),s.Q6J("cdkConnectedOverlayPanelClass",o._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",o._scrollStrategy)("cdkConnectedOverlayOrigin",a)("cdkConnectedOverlayOpen",o.panelOpen)("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayMinWidth",null==o._triggerRect?null:o._triggerRect.width)("cdkConnectedOverlayOffsetY",o._offsetY)}},directives:[b4,Bi,zn,FF,ti,ne],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px}\n'],encapsulation:2,data:{animation:[UL.transformPanelWrap,UL.transformPanel]},changeDetection:0}),t})(),qL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[$6],imports:[[Fi,zS,lF,Ir],LS,Vk,lF,Ir]}),t})();class nU{constructor(i){this.total=i}call(i,e){return e.subscribe(new iU(i,this.total))}}class iU extends Xo.L{constructor(i,e){super(i),this.total=e,this.count=0}_next(i){++this.count>this.total&&this.destination.next(i)}}const ZL=new Set;let Bw,WL=(()=>{class t{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):oU}matchMedia(e){return this._platform.WEBKIT&&function(t){if(!ZL.has(t))try{Bw||(Bw=document.createElement("style"),Bw.setAttribute("type","text/css"),document.head.appendChild(Bw)),Bw.sheet&&(Bw.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),ZL.add(t))}catch(i){console.error(i)}}(e),this._matchMedia(e)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Co))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(Co))},token:t,providedIn:"root"}),t})();function oU(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let X2=(()=>{class t{constructor(e,o){this._mediaMatcher=e,this._zone=o,this._queries=new Map,this._destroySubject=new Nn.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return $L(m_(e)).some(a=>this._registerQuery(a).mql.matches)}observe(e){let c=Yl($L(m_(e)).map(v=>this._registerQuery(v).observable));return c=Os(c.pipe(ue(1)),c.pipe(i=>i.lift(new nU(1)),oS(0))),c.pipe((0,ei.U)(v=>{const A={matches:!1,breakpoints:{}};return v.forEach(({matches:z,query:$})=>{A.matches=A.matches||z,A.breakpoints[$]=z}),A}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const o=this._mediaMatcher.matchMedia(e),c={observable:new Yr.y(v=>{const A=z=>this._zone.run(()=>v.next(z));return o.addListener(A),()=>{o.removeListener(A)}}).pipe(ws(o),(0,ei.U)(({matches:v})=>({query:e,matches:v})),Zo(this._destroySubject)),mql:o};return this._queries.set(e,c),c}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(WL),s.LFG(s.R0b))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(WL),(0,s.LFG)(s.R0b))},token:t,providedIn:"root"}),t})();function $L(t){return t.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}const sU={tooltipState:ns("state",[co("initial, void, hidden",Rn({opacity:0,transform:"scale(0)"})),co("visible",Rn({transform:"scale(1)"})),ur("* => visible",dr("200ms cubic-bezier(0, 0, 0.2, 1)",g_([Rn({opacity:0,transform:"scale(0)",offset:0}),Rn({opacity:.5,transform:"scale(0.99)",offset:.5}),Rn({opacity:1,transform:"scale(1)",offset:1})]))),ur("* => hidden",dr("100ms cubic-bezier(0, 0, 0.2, 1)",Rn({opacity:0})))])},QL=fw({passive:!0}),JL=new s.OlP("mat-tooltip-scroll-strategy"),hU={provide:JL,deps:[Ud],useFactory:function(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}},dU=new s.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let fU=(()=>{class t{constructor(e,o,a,c,v,A,z,$,oe,fe,ke,Oe){this._overlay=e,this._elementRef=o,this._scrollDispatcher=a,this._viewContainerRef=c,this._ngZone=v,this._platform=A,this._ariaDescriber=z,this._focusMonitor=$,this._dir=fe,this._defaultOptions=ke,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Nn.xQ,this._handleKeydown=He=>{this._isTooltipVisible()&&27===He.keyCode&&!Na(He)&&(He.preventDefault(),He.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=oe,ke&&(ke.position&&(this.position=ke.position),ke.touchGestures&&(this.touchGestures=ke.touchGestures)),v.runOutsideAngular(()=>{o.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=br(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Zo(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([o,a])=>{e.removeEventListener(o,a,QL)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const o=this._createOverlay();this._detach(),this._portal=this._portal||new Iw(mU,this._viewContainerRef),this._tooltipInstance=o.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Zo(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),o=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(e);return o.positionChanges.pipe(Zo(this._destroyed)).subscribe(a=>{this._tooltipInstance&&a.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:o,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(Zo(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(){const e=this._overlayRef.getConfig().positionStrategy,o=this._getOrigin(),a=this._getOverlayPosition();e.withPositions([Object.assign(Object.assign({},o.main),a.main),Object.assign(Object.assign({},o.fallback),a.fallback)])}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,o=this.position;let a;"above"==o||"below"==o?a={originX:"center",originY:"above"==o?"top":"bottom"}:"before"==o||"left"==o&&e||"right"==o&&!e?a={originX:"start",originY:"center"}:("after"==o||"right"==o&&e||"left"==o&&!e)&&(a={originX:"end",originY:"center"});const{x:c,y:v}=this._invertPosition(a.originX,a.originY);return{main:a,fallback:{originX:c,originY:v}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,o=this.position;let a;"above"==o?a={overlayX:"center",overlayY:"bottom"}:"below"==o?a={overlayX:"center",overlayY:"top"}:"before"==o||"left"==o&&e||"right"==o&&!e?a={overlayX:"end",overlayY:"center"}:("after"==o||"right"==o&&e||"left"==o&&!e)&&(a={overlayX:"start",overlayY:"center"});const{x:c,y:v}=this._invertPosition(a.overlayX,a.overlayY);return{main:a,fallback:{overlayX:c,overlayY:v}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(ue(1),Zo(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,o){return"above"===this.position||"below"===this.position?"top"===o?o="bottom":"bottom"===o&&(o="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",()=>this.hide()],["wheel",o=>this._wheelListener(o)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const o=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",o],["touchcancel",o])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([o,a])=>{this._elementRef.nativeElement.addEventListener(o,a,QL)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const a=(this._document||document).elementFromPoint(e.clientX,e.clientY),c=this._elementRef.nativeElement;a!==c&&!c.contains(a)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const o=this._elementRef.nativeElement,a=o.style;("on"===e||"INPUT"!==o.nodeName&&"TEXTAREA"!==o.nodeName)&&(a.userSelect=a.msUserSelect=a.webkitUserSelect=a.MozUserSelect="none"),("on"===e||!o.draggable)&&(a.webkitUserDrag="none"),a.touchAction="none",a.webkitTapHighlightColor="transparent"}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ud),s.Y36(s.SBq),s.Y36(OS),s.Y36(s.s_b),s.Y36(s.R0b),s.Y36(Co),s.Y36(ox),s.Y36(nh),s.Y36(JL),s.Y36(Qh,8),s.Y36(dU,8),s.Y36(wt))},t.\u0275dir=s.lG2({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),t})(),mU=(()=>{class t{constructor(e,o){this._changeDetectorRef=e,this._breakpointObserver=o,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new Nn.xQ,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}show(e){this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=null,this._markForCheck()},e)}hide(e){this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=null,this._markForCheck()},e)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){const o=e.toState;"hidden"===o&&!this.isVisible()&&this._onHide.next(),("visible"===o||"hidden"===o)&&(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO),s.Y36(X2))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,o){1&e&&s.NdJ("click",function(){return o._handleBodyInteraction()},!1,s.pYS)("auxclick",function(){return o._handleBodyInteraction()},!1,s.pYS),2&e&&s.Udp("zoom","visible"===o._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,o){if(1&e&&(s.TgZ(0,"div",0),s.NdJ("@state.start",function(){return o._animationStart()})("@state.done",function(c){return o._animationDone(c)}),s.ALo(1,"async"),s._uU(2),s.qZA()),2&e){let a;s.ekj("mat-tooltip-handset",null==(a=s.lcZ(1,5,o._isHandset))?null:a.matches),s.Q6J("ngClass",o.tooltipClass)("@state",o._visibility),s.xp6(2),s.Oqu(o.message)}},directives:[ne],pipes:[hl],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[sU.tooltipState]},changeDetection:0}),t})(),gU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[hU],imports:[[bS,Fi,zS,Ir],Ir,LS]}),t})();function _U(t,i){if(1&t&&(s.TgZ(0,"mat-option",19),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e," ")}}function yU(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"mat-form-field",16),s.TgZ(1,"mat-select",17),s.NdJ("selectionChange",function(a){return s.CHM(e),s.oxw(2)._changePageSize(a.value)}),s.YNc(2,_U,2,2,"mat-option",18),s.qZA(),s.qZA()}if(2&t){const e=s.oxw(2);s.Q6J("appearance",e._formFieldAppearance)("color",e.color),s.xp6(1),s.Q6J("value",e.pageSize)("disabled",e.disabled)("aria-label",e._intl.itemsPerPageLabel),s.xp6(1),s.Q6J("ngForOf",e._displayedPageSizeOptions)}}function vU(t,i){if(1&t&&(s.TgZ(0,"div",20),s._uU(1),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Oqu(e.pageSize)}}function bU(t,i){if(1&t&&(s.TgZ(0,"div",12),s.TgZ(1,"div",13),s._uU(2),s.qZA(),s.YNc(3,yU,3,6,"mat-form-field",14),s.YNc(4,vU,2,1,"div",15),s.qZA()),2&t){const e=s.oxw();s.xp6(2),s.hij(" ",e._intl.itemsPerPageLabel," "),s.xp6(1),s.Q6J("ngIf",e._displayedPageSizeOptions.length>1),s.xp6(1),s.Q6J("ngIf",e._displayedPageSizeOptions.length<=1)}}function xU(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",21),s.NdJ("click",function(){return s.CHM(e),s.oxw().firstPage()}),s.O4$(),s.TgZ(1,"svg",7),s._UZ(2,"path",22),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),s.uIk("aria-label",e._intl.firstPageLabel)}}function wU(t,i){if(1&t){const e=s.EpF();s.O4$(),s.kcU(),s.TgZ(0,"button",23),s.NdJ("click",function(){return s.CHM(e),s.oxw().lastPage()}),s.O4$(),s.TgZ(1,"svg",7),s._UZ(2,"path",24),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),s.uIk("aria-label",e._intl.lastPageLabel)}}let $S=(()=>{class t{constructor(){this.changes=new Nn.xQ,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,o,a)=>{if(0==a||0==o)return`0 of ${a}`;const c=e*o;return`${c+1} \u2013 ${c<(a=Math.max(a,0))?Math.min(c+o,a):c+o} of ${a}`}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const SU={provide:$S,deps:[[new s.FiY,new s.tp0,$S]],useFactory:function(t){return t||new $S}},TU=new s.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS");class MU{}const kU=b_(eF(MU));let AU=(()=>{class t extends kU{constructor(e,o,a){if(super(),this._intl=e,this._changeDetectorRef=o,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new s.vpe,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),a){const{pageSize:c,pageSizeOptions:v,hidePageSize:A,showFirstLastButtons:z}=a;null!=c&&(this._pageSize=c),null!=v&&(this._pageSizeOptions=v),null!=A&&(this._hidePageSize=A),null!=z&&(this._showFirstLastButtons=z)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(Fl(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=Fl(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(Fl(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(o=>Fl(o)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=br(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=br(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex++,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex--,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const a=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(a)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,o)=>e-o),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36($S),s.Y36(s.sBO),s.Y36(void 0))},t.\u0275dir=s.lG2({type:t,inputs:{pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",color:"color"},outputs:{page:"page"},features:[s.qOj]}),t})(),wv=(()=>{class t extends AU{constructor(e,o,a){super(e,o,a),a&&null!=a.formFieldAppearance&&(this._formFieldAppearance=a.formFieldAppearance)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36($S),s.Y36(s.sBO),s.Y36(TU,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[s.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.YNc(2,bU,5,3,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s._uU(5),s.qZA(),s.YNc(6,xU,3,5,"button",5),s.TgZ(7,"button",6),s.NdJ("click",function(){return o.previousPage()}),s.O4$(),s.TgZ(8,"svg",7),s._UZ(9,"path",8),s.qZA(),s.qZA(),s.kcU(),s.TgZ(10,"button",9),s.NdJ("click",function(){return o.nextPage()}),s.O4$(),s.TgZ(11,"svg",7),s._UZ(12,"path",10),s.qZA(),s.qZA(),s.YNc(13,wU,3,5,"button",11),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",!o.hidePageSize),s.xp6(3),s.hij(" ",o._intl.getRangeLabel(o.pageIndex,o.pageSize,o.length)," "),s.xp6(1),s.Q6J("ngIf",o.showFirstLastButtons),s.xp6(1),s.Q6J("matTooltip",o._intl.previousPageLabel)("matTooltipDisabled",o._previousButtonsDisabled())("matTooltipPosition","above")("disabled",o._previousButtonsDisabled()),s.uIk("aria-label",o._intl.previousPageLabel),s.xp6(3),s.Q6J("matTooltip",o._intl.nextPageLabel)("matTooltipDisabled",o._nextButtonsDisabled())("matTooltipPosition","above")("disabled",o._nextButtonsDisabled()),s.uIk("aria-label",o._intl.nextPageLabel),s.xp6(3),s.Q6J("ngIf",o.showFirstLastButtons))},directives:[Xt,mv,fU,Pw,eU,Je,sF],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}\n"],encapsulation:2,changeDetection:0}),t})(),DU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[SU],imports:[[Fi,k2,qL,gU,Ir]]}),t})();const IU=[[["caption"]],[["colgroup"],["col"]]],PU=["caption","colgroup, col"];function Q2(t){return class extends t{constructor(...i){super(...i),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(i){const e=this._sticky;this._sticky=br(i),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const i=this._hasStickyChanged;return this._hasStickyChanged=!1,i}resetStickyChanged(){this._hasStickyChanged=!1}}}const zw=new s.OlP("CDK_TABLE");let Vw=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkCellDef",""]]}),t})(),Uw=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkHeaderCellDef",""]]}),t})(),Kk=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkFooterCellDef",""]]}),t})();class LU{}const NU=Q2(LU);let C_=(()=>{class t extends NU{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const o=this._stickyEnd;this._stickyEnd=br(e),this._hasStickyChanged=o!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(zw,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,Vw,5),s.Suo(a,Uw,5),s.Suo(a,Kk,5)),2&e){let c;s.iGM(c=s.CRH())&&(o.cell=c.first),s.iGM(c=s.CRH())&&(o.headerCell=c.first),s.iGM(c=s.CRH())&&(o.footerCell=c.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[s._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),s.qOj]}),t})();class J2{constructor(i,e){const o=e.nativeElement.classList;for(const a of i._columnCssClassName)o.add(a)}}let K2=(()=>{class t extends J2{constructor(e,o){super(e,o)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(C_),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[s.qOj]}),t})(),eP=(()=>{class t extends J2{constructor(e,o){super(e,o)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(C_),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:["role","gridcell",1,"cdk-cell"],features:[s.qOj]}),t})();class eN{constructor(){this.tasks=[],this.endTasks=[]}}const tP=new s.OlP("_COALESCED_STYLE_SCHEDULER");let tN=(()=>{class t{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Nn.xQ}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new eN,this._getScheduleObservable().pipe(Zo(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new eN;for(const o of e.tasks)o();for(const o of e.endTasks)o()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,Nr.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(ue(1))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(s.R0b))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),nP=(()=>{class t{constructor(e,o){this.template=e,this._differs=o}ngOnChanges(e){if(!this._columnsDiffer){const o=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(o).create(),this._columnsDiffer.diff(o)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof XS?e.headerCell.template:this instanceof QS?e.footerCell.template:e.cell.template}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc),s.Y36(s.ZZ4))},t.\u0275dir=s.lG2({type:t,features:[s.TTD]}),t})();class BU extends nP{}const zU=Q2(BU);let XS=(()=>{class t extends zU{constructor(e,o,a){super(e,o),this._table=a}ngOnChanges(e){super.ngOnChanges(e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(zw,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[s.qOj,s.TTD]}),t})();class VU extends nP{}const UU=Q2(VU);let QS=(()=>{class t extends UU{constructor(e,o,a){super(e,o),this._table=a}ngOnChanges(e){super.ngOnChanges(e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(zw,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[s.qOj,s.TTD]}),t})(),eA=(()=>{class t extends nP{constructor(e,o,a){super(e,o),this._table=a}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(zw,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[s.qOj]}),t})(),S_=(()=>{class t{constructor(e){this._viewContainer=e,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b))},t.\u0275dir=s.lG2({type:t,selectors:[["","cdkCellOutlet",""]]}),t.mostRecentCellOutlet=null,t})(),iP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,o){1&e&&s.GkF(0,0)},directives:[S_],encapsulation:2}),t})(),oP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,o){1&e&&s.GkF(0,0)},directives:[S_],encapsulation:2}),t})(),tA=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc))},t.\u0275dir=s.lG2({type:t,selectors:[["ng-template","cdkNoDataRow",""]]}),t})();const nN=["top","bottom","left","right"];class HU{constructor(i,e,o,a,c=!0,v=!0,A){this._isNativeHtmlTable=i,this._stickCellCss=e,this.direction=o,this._coalescedStyleScheduler=a,this._isBrowser=c,this._needsPositionStickyOnElement=v,this._positionListener=A,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(i,e){const o=[];for(const a of i)if(a.nodeType===a.ELEMENT_NODE){o.push(a);for(let c=0;c<a.children.length;c++)o.push(a.children[c])}this._scheduleStyleChanges(()=>{for(const a of o)this._removeStickyStyle(a,e)})}updateStickyColumns(i,e,o,a=!0){if(!i.length||!this._isBrowser||!e.some(ke=>ke)&&!o.some(ke=>ke))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const c=i[0],v=c.children.length,A=this._getCellWidths(c,a),z=this._getStickyStartColumnPositions(A,e),$=this._getStickyEndColumnPositions(A,o),oe=e.lastIndexOf(!0),fe=o.indexOf(!0);this._scheduleStyleChanges(()=>{const ke="rtl"===this.direction,Oe=ke?"right":"left",He=ke?"left":"right";for(const ct of i)for(let At=0;At<v;At++){const Qt=ct.children[At];e[At]&&this._addStickyStyle(Qt,Oe,z[At],At===oe),o[At]&&this._addStickyStyle(Qt,He,$[At],At===fe)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===oe?[]:A.slice(0,oe+1).map((ct,At)=>e[At]?ct:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===fe?[]:A.slice(fe).map((ct,At)=>o[At+fe]?ct:null).reverse()}))})}stickRows(i,e,o){if(!this._isBrowser)return;const a="bottom"===o?i.slice().reverse():i,c="bottom"===o?e.slice().reverse():e,v=[],A=[],z=[];for(let oe=0,fe=0;oe<a.length;oe++){if(v[oe]=fe,!c[oe])continue;const ke=a[oe];z[oe]=this._isNativeHtmlTable?Array.from(ke.children):[ke];const Oe=ke.getBoundingClientRect().height;fe+=Oe,A[oe]=Oe}const $=c.lastIndexOf(!0);this._scheduleStyleChanges(()=>{var oe,fe;for(let ke=0;ke<a.length;ke++){if(!c[ke])continue;const Oe=v[ke],He=ke===$;for(const ct of z[ke])this._addStickyStyle(ct,o,Oe,He)}"top"===o?null===(oe=this._positionListener)||void 0===oe||oe.stickyHeaderRowsUpdated({sizes:A,elements:z}):null===(fe=this._positionListener)||void 0===fe||fe.stickyFooterRowsUpdated({sizes:A,elements:z})})}updateStickyFooterContainer(i,e){if(!this._isNativeHtmlTable)return;const o=i.querySelector("tfoot");this._scheduleStyleChanges(()=>{e.some(a=>!a)?this._removeStickyStyle(o,["bottom"]):this._addStickyStyle(o,"bottom",0,!1)})}_removeStickyStyle(i,e){for(const a of e)i.style[a]="",i.classList.remove(this._borderCellCss[a]);nN.some(a=>-1===e.indexOf(a)&&i.style[a])?i.style.zIndex=this._getCalculatedZIndex(i):(i.style.zIndex="",this._needsPositionStickyOnElement&&(i.style.position=""),i.classList.remove(this._stickCellCss))}_addStickyStyle(i,e,o,a){i.classList.add(this._stickCellCss),a&&i.classList.add(this._borderCellCss[e]),i.style[e]=`${o}px`,i.style.zIndex=this._getCalculatedZIndex(i),this._needsPositionStickyOnElement&&(i.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(i){const e={top:100,bottom:10,left:1,right:1};let o=0;for(const a of nN)i.style[a]&&(o+=e[a]);return o?`${o}`:""}_getCellWidths(i,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const o=[],a=i.children;for(let c=0;c<a.length;c++)o.push(a[c].getBoundingClientRect().width);return this._cachedCellWidths=o,o}_getStickyStartColumnPositions(i,e){const o=[];let a=0;for(let c=0;c<i.length;c++)e[c]&&(o[c]=a,a+=i[c]);return o}_getStickyEndColumnPositions(i,e){const o=[];let a=0;for(let c=i.length;c>0;c--)e[c]&&(o[c]=a,a+=i[c]);return o}_scheduleStyleChanges(i){this._coalescedStyleScheduler?this._coalescedStyleScheduler.schedule(i):i()}}const iN=new s.OlP("CDK_SPL");let nA=(()=>{class t{constructor(e,o){this.viewContainer=e,this.elementRef=o}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","rowOutlet",""]]}),t})(),iA=(()=>{class t{constructor(e,o){this.viewContainer=e,this.elementRef=o}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","headerRowOutlet",""]]}),t})(),rA=(()=>{class t{constructor(e,o){this.viewContainer=e,this.elementRef=o}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","footerRowOutlet",""]]}),t})(),oA=(()=>{class t{constructor(e,o){this.viewContainer=e,this.elementRef=o}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.s_b),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","noDataRowOutlet",""]]}),t})(),sA=(()=>{class t{constructor(e,o,a,c,v,A,z,$,oe,fe,ke){this._differs=e,this._changeDetectorRef=o,this._elementRef=a,this._dir=v,this._platform=z,this._viewRepeater=$,this._coalescedStyleScheduler=oe,this._stickyPositioningListener=fe,this._viewportRuler=ke,this._onDestroy=new Nn.xQ,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.viewChange=new mo({start:0,end:Number.MAX_VALUE}),c||this._elementRef.nativeElement.setAttribute("role","grid"),this._document=A,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=br(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=br(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,o)=>this.trackBy?this.trackBy(o.dataIndex,o.data):o),this._viewportRuler&&this._viewportRuler.change().pipe(Zo(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const o=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||o,this._forceRecalculateCellWidths=o,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){this._rowOutlet.viewContainer.clear(),this._noDataRowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),Lk(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return void this._updateNoDataRow();const o=this._rowOutlet.viewContainer;this._viewRepeater?this._viewRepeater.applyChanges(e,o,(a,c,v)=>this._getEmbeddedViewArgs(a.item,v),a=>a.item.data,a=>{1===a.operation&&a.context&&this._renderCellTemplateForItem(a.record.item.rowDef,a.context)}):e.forEachOperation((a,c,v)=>{if(null==a.previousIndex){const A=a.item;this._renderRow(this._rowOutlet,A.rowDef,v,{$implicit:A.data})}else if(null==v)o.remove(c);else{const A=o.get(c);o.move(A,v)}}),this._updateRowIndexContext(),e.forEachIdentityChange(a=>{o.get(a.currentIndex).context.$implicit=a.item.data}),this._updateNoDataRow(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),a=this._elementRef.nativeElement.querySelector("thead");a&&(a.style.display=e.length?"":"none");const c=this._headerRowDefs.map(v=>v.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,c,"top"),this._headerRowDefs.forEach(v=>v.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),a=this._elementRef.nativeElement.querySelector("tfoot");a&&(a.style.display=e.length?"":"none");const c=this._footerRowDefs.map(v=>v.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,c,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,c),this._footerRowDefs.forEach(v=>v.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),o=this._getRenderedRows(this._rowOutlet),a=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...o,...a],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((c,v)=>{this._addStickyColumnStyles([c],this._headerRowDefs[v])}),this._rowDefs.forEach(c=>{const v=[];for(let A=0;A<o.length;A++)this._renderRows[A].rowDef===c&&v.push(o[A]);this._addStickyColumnStyles(v,c)}),a.forEach((c,v)=>{this._addStickyColumnStyles([c],this._footerRowDefs[v])}),Array.from(this._columnDefsByName.values()).forEach(c=>c.resetStickyChanged())}_getAllRenderRows(){const e=[],o=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let a=0;a<this._data.length;a++){let c=this._data[a];const v=this._getRenderRowsForData(c,a,o.get(c));this._cachedRenderRowsMap.has(c)||this._cachedRenderRowsMap.set(c,new WeakMap);for(let A=0;A<v.length;A++){let z=v[A];const $=this._cachedRenderRowsMap.get(z.data);$.has(z.rowDef)?$.get(z.rowDef).push(z):$.set(z.rowDef,[z]),e.push(z)}}return e}_getRenderRowsForData(e,o,a){return this._getRowDefs(e,o).map(v=>{const A=a&&a.has(v)?a.get(v):[];if(A.length){const z=A.shift();return z.dataIndex=o,z}return{data:e,rowDef:v,dataIndex:o}})}_cacheColumnDefs(){this._columnDefsByName.clear(),aA(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(o=>{this._columnDefsByName.has(o.name),this._columnDefsByName.set(o.name,o)})}_cacheRowDefs(){this._headerRowDefs=aA(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=aA(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=aA(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(o=>!o.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(v,A)=>v||!!A.getColumnsDiff(),o=this._rowDefs.reduce(e,!1);o&&this._forceRenderDataRows();const a=this._headerRowDefs.reduce(e,!1);a&&this._forceRenderHeaderRows();const c=this._footerRowDefs.reduce(e,!1);return c&&this._forceRenderFooterRows(),o||a||c}_switchDataSource(e){this._data=[],Lk(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;Lk(this.dataSource)?e=this.dataSource.connect(this):A2(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=(0,Xn.of)(this.dataSource)),this._renderChangeSubscription=e.pipe(Zo(this._onDestroy)).subscribe(o=>{this._data=o||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,o)=>this._renderRow(this._headerRowOutlet,e,o)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,o)=>this._renderRow(this._footerRowOutlet,e,o)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,o){const a=Array.from(o.columns||[]).map(A=>this._columnDefsByName.get(A)),c=a.map(A=>A.sticky),v=a.map(A=>A.stickyEnd);this._stickyStyler.updateStickyColumns(e,c,v,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const o=[];for(let a=0;a<e.viewContainer.length;a++){const c=e.viewContainer.get(a);o.push(c.rootNodes[0])}return o}_getRowDefs(e,o){if(1==this._rowDefs.length)return[this._rowDefs[0]];let a=[];if(this.multiTemplateDataRows)a=this._rowDefs.filter(c=>!c.when||c.when(o,e));else{let c=this._rowDefs.find(v=>v.when&&v.when(o,e))||this._defaultRowDef;c&&a.push(c)}return a}_getEmbeddedViewArgs(e,o){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:o}}_renderRow(e,o,a,c={}){const v=e.viewContainer.createEmbeddedView(o.template,c,a);return this._renderCellTemplateForItem(o,c),v}_renderCellTemplateForItem(e,o){for(let a of this._getCellTemplates(e))S_.mostRecentCellOutlet&&S_.mostRecentCellOutlet._viewContainer.createEmbeddedView(a,o);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let o=0,a=e.length;o<a;o++){const v=e.get(o).context;v.count=a,v.first=0===o,v.last=o===a-1,v.even=o%2==0,v.odd=!v.even,this.multiTemplateDataRows?(v.dataIndex=this._renderRows[o].dataIndex,v.renderIndex=o):v.index=this._renderRows[o].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,o=>{const a=this._columnDefsByName.get(o);return e.extractCellTemplate(a)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),o=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const a of o){const c=this._document.createElement(a.tag);c.setAttribute("role","rowgroup");for(const v of a.outlets)c.appendChild(v.elementRef.nativeElement);e.appendChild(c)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(o,a)=>o||a.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new HU(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,Xn.of)()).pipe(Zo(this._onDestroy)).subscribe(o=>{this._stickyStyler.direction=o,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(o=>!o._table||o._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(e){const o=0===this._rowOutlet.viewContainer.length;if(o!==this._isShowingNoDataRow){const a=this._noDataRowOutlet.viewContainer;o?a.createEmbeddedView(e.templateRef):a.clear(),this._isShowingNoDataRow=o}}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.ZZ4),s.Y36(s.sBO),s.Y36(s.SBq),s.$8M("role"),s.Y36(Qh,8),s.Y36(wt),s.Y36(Co),s.Y36(RS,8),s.Y36(tP,8),s.Y36(iN,12),s.Y36(gx,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,tA,5),s.Suo(a,C_,5),s.Suo(a,eA,5),s.Suo(a,XS,5),s.Suo(a,QS,5)),2&e){let c;s.iGM(c=s.CRH())&&(o._noDataRow=c.first),s.iGM(c=s.CRH())&&(o._contentColumnDefs=c),s.iGM(c=s.CRH())&&(o._contentRowDefs=c),s.iGM(c=s.CRH())&&(o._contentHeaderRowDefs=c),s.iGM(c=s.CRH())&&(o._contentFooterRowDefs=c)}},viewQuery:function(e,o){if(1&e&&(s.Gf(nA,7),s.Gf(iA,7),s.Gf(rA,7),s.Gf(oA,7)),2&e){let a;s.iGM(a=s.CRH())&&(o._rowOutlet=a.first),s.iGM(a=s.CRH())&&(o._headerRowOutlet=a.first),s.iGM(a=s.CRH())&&(o._footerRowOutlet=a.first),s.iGM(a=s.CRH())&&(o._noDataRowOutlet=a.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("cdk-table-fixed-layout",o.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},exportAs:["cdkTable"],features:[s._Bn([{provide:zw,useExisting:t},{provide:RS,useClass:mF},{provide:tP,useClass:tN},{provide:iN,useValue:null}])],ngContentSelectors:PU,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,o){1&e&&(s.F$t(IU),s.Hsn(0),s.Hsn(1,1),s.GkF(2,0),s.GkF(3,1),s.GkF(4,2),s.GkF(5,3))},directives:[iA,nA,oA,rA],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),t})();function aA(t,i){return t.concat(Array.from(i))}let GU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[_x]]}),t})();const jU=[[["caption"]],[["colgroup"],["col"]]],YU=["caption","colgroup, col"];let JS=(()=>{class t extends sA{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("mat-table-fixed-layout",o.fixedLayout)},exportAs:["matTable"],features:[s._Bn([{provide:RS,useClass:mF},{provide:sA,useExisting:t},{provide:zw,useExisting:t},{provide:tP,useClass:tN}]),s.qOj],ngContentSelectors:YU,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,o){1&e&&(s.F$t(jU),s.Hsn(0),s.Hsn(1,1),s.GkF(2,0),s.GkF(3,1),s.GkF(4,2),s.GkF(5,3))},directives:[iA,nA,oA,rA],styles:['mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-row::after,mat-header-row::after,mat-footer-row::after{display:inline-block;min-height:inherit;content:""}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:-webkit-sticky !important;position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n'],encapsulation:2}),t})(),Hw=(()=>{class t extends Vw{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["","matCellDef",""]],features:[s._Bn([{provide:Vw,useExisting:t}]),s.qOj]}),t})(),Gw=(()=>{class t extends Uw{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["","matHeaderCellDef",""]],features:[s._Bn([{provide:Uw,useExisting:t}]),s.qOj]}),t})(),jw=(()=>{class t extends C_{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[s._Bn([{provide:C_,useExisting:t},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),s.qOj]}),t})(),Yw=(()=>{class t extends K2{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[s.qOj]}),t})(),qw=(()=>{class t extends eP{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[s.qOj]}),t})(),KS=(()=>{class t extends XS{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[s._Bn([{provide:XS,useExisting:t}]),s.qOj]}),t})(),eE=(()=>{class t extends eA{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[s._Bn([{provide:eA,useExisting:t}]),s.qOj]}),t})(),tE=(()=>{class t extends iP{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[s._Bn([{provide:iP,useExisting:t}]),s.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,o){1&e&&s.GkF(0,0)},directives:[S_],encapsulation:2}),t})(),nE=(()=>{class t extends oP{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[s._Bn([{provide:oP,useExisting:t}]),s.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,o){1&e&&s.GkF(0,0)},directives:[S_],encapsulation:2}),t})(),iE=(()=>{class t extends tA{}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275dir=s.lG2({type:t,selectors:[["ng-template","matNoDataRow",""]],features:[s._Bn([{provide:tA,useExisting:t}]),s.qOj]}),t})(),KU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[GU,Ir],Ir]}),t})();class tH extends fF{constructor(i=[]){super(),this._renderData=new mo([]),this._filter=new mo(""),this._internalPageChanges=new Nn.xQ,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,o)=>{const a=e[o];if(gI(a)){const c=Number(a);return c<9007199254740991?c:a}return a},this.sortData=(e,o)=>{const a=o.active,c=o.direction;return a&&""!=c?e.sort((v,A)=>{let z=this.sortingDataAccessor(v,a),$=this.sortingDataAccessor(A,a);const oe=typeof z,fe=typeof $;oe!==fe&&("number"===oe&&(z+=""),"number"===fe&&($+=""));let ke=0;return null!=z&&null!=$?z>$?ke=1:z<$&&(ke=-1):null!=z?ke=1:null!=$&&(ke=-1),ke*("asc"==c?1:-1)}):e},this.filterPredicate=(e,o)=>{const a=Object.keys(e).reduce((v,A)=>v+e[A]+"\u25ec","").toLowerCase(),c=o.trim().toLowerCase();return-1!=a.indexOf(c)},this._data=new mo(i),this._updateChangeSubscription()}get data(){return this._data.value}set data(i){this._data.next(i),this._renderChangesSubscription||this._filterData(i)}get filter(){return this._filter.value}set filter(i){this._filter.next(i),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(i){this._sort=i,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(i){this._paginator=i,this._updateChangeSubscription()}_updateChangeSubscription(){var i;const e=this._sort?(0,bs.T)(this._sort.sortChange,this._sort.initialized):(0,Xn.of)(null),o=this._paginator?(0,bs.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):(0,Xn.of)(null),c=Yl([this._data,this._filter]).pipe((0,ei.U)(([z])=>this._filterData(z))),v=Yl([c,e]).pipe((0,ei.U)(([z])=>this._orderData(z))),A=Yl([v,o]).pipe((0,ei.U)(([z])=>this._pageData(z)));null===(i=this._renderChangesSubscription)||void 0===i||i.unsubscribe(),this._renderChangesSubscription=A.subscribe(z=>this._renderData.next(z))}_filterData(i){return this.filteredData=null==this.filter||""===this.filter?i:i.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(i){return this.sort?this.sortData(i.slice(),this.sort):i}_pageData(i){if(!this.paginator)return i;const e=this.paginator.pageIndex*this.paginator.pageSize;return i.slice(e,e+this.paginator.pageSize)}_updatePaginator(i){Promise.resolve().then(()=>{const e=this.paginator;if(e&&(e.length=i,e.pageIndex>0)){const o=Math.ceil(e.length/e.pageSize)-1||0,a=Math.min(e.pageIndex,o);a!==e.pageIndex&&(e.pageIndex=a,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){var i;null===(i=this._renderChangesSubscription)||void 0===i||i.unsubscribe(),this._renderChangesSubscription=null}}class Cx extends tH{}class Ci{static equals(i,e,o){return o?this.resolveFieldData(i,o)===this.resolveFieldData(e,o):this.equalsByValue(i,e)}static equalsByValue(i,e){if(i===e)return!0;if(i&&e&&"object"==typeof i&&"object"==typeof e){var c,v,A,o=Array.isArray(i),a=Array.isArray(e);if(o&&a){if((v=i.length)!=e.length)return!1;for(c=v;0!=c--;)if(!this.equalsByValue(i[c],e[c]))return!1;return!0}if(o!=a)return!1;var z=i instanceof Date,$=e instanceof Date;if(z!=$)return!1;if(z&&$)return i.getTime()==e.getTime();var oe=i instanceof RegExp,fe=e instanceof RegExp;if(oe!=fe)return!1;if(oe&&fe)return i.toString()==e.toString();var ke=Object.keys(i);if((v=ke.length)!==Object.keys(e).length)return!1;for(c=v;0!=c--;)if(!Object.prototype.hasOwnProperty.call(e,ke[c]))return!1;for(c=v;0!=c--;)if(!this.equalsByValue(i[A=ke[c]],e[A]))return!1;return!0}return i!=i&&e!=e}static resolveFieldData(i,e){if(i&&e){if(this.isFunction(e))return e(i);if(-1==e.indexOf("."))return i[e];{let o=e.split("."),a=i;for(let c=0,v=o.length;c<v;++c){if(null==a)return null;a=a[o[c]]}return a}}return null}static isFunction(i){return!!(i&&i.constructor&&i.call&&i.apply)}static reorderArray(i,e,o){i&&e!==o&&(o>=i.length&&(o%=i.length,e%=i.length),i.splice(o,0,i.splice(e,1)[0]))}static insertIntoOrderedArray(i,e,o,a){if(o.length>0){let c=!1;for(let v=0;v<o.length;v++)if(this.findIndexInList(o[v],a)>e){o.splice(v,0,i),c=!0;break}c||o.push(i)}else o.push(i)}static findIndexInList(i,e){let o=-1;if(e)for(let a=0;a<e.length;a++)if(e[a]==i){o=a;break}return o}static removeAccents(i){return i&&i.search(/[\xC0-\xFF]/g)>-1&&(i=i.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),i}}var oN=0;function sP(){return"pr_id_"+ ++oN}var Oc=function(){let t=[];const a=c=>c&&parseInt(c.style.zIndex,10)||0;return{get:a,set:(c,v,A)=>{v&&(v.style.zIndex=String(((c,v)=>{let A=t.length>0?t[t.length-1]:{key:c,value:v},z=A.value+(A.key===c?0:v)+1;return t.push({key:c,value:z}),z})(c,A)))},clear:c=>{c&&((c=>{t=t.filter(v=>v.value!==c)})(a(c)),c.style.zIndex="")},getCurrent:()=>t.length>0?t[t.length-1].value:0}}();const iH=["*"];let Fc=(()=>{class t{}return t.STARTS_WITH="startsWith",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.ENDS_WITH="endsWith",t.EQUALS="equals",t.NOT_EQUALS="notEquals",t.IN="in",t.LESS_THAN="lt",t.LESS_THAN_OR_EQUAL_TO="lte",t.GREATER_THAN="gt",t.GREATER_THAN_OR_EQUAL_TO="gte",t.BETWEEN="between",t.IS="is",t.IS_NOT="isNot",t.BEFORE="before",t.AFTER="after",t.DATE_IS="dateIs",t.DATE_IS_NOT="dateIsNot",t.DATE_BEFORE="dateBefore",t.DATE_AFTER="dateAfter",t})(),Jm=(()=>{class t{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Fc.STARTS_WITH,Fc.CONTAINS,Fc.NOT_CONTAINS,Fc.ENDS_WITH,Fc.EQUALS,Fc.NOT_EQUALS],numeric:[Fc.EQUALS,Fc.NOT_EQUALS,Fc.LESS_THAN,Fc.LESS_THAN_OR_EQUAL_TO,Fc.GREATER_THAN,Fc.GREATER_THAN_OR_EQUAL_TO],date:[Fc.DATE_IS,Fc.DATE_IS_NOT,Fc.DATE_BEFORE,Fc.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Nn.xQ,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation=Object.assign(Object.assign({},this.translation),e),this.translationSource.next(this.translation)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cl=(()=>{class t{}return t.STARTS_WITH="startsWith",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.ENDS_WITH="endsWith",t.EQUALS="equals",t.NOT_EQUALS="notEquals",t.NO_FILTER="noFilter",t.LT="lt",t.LTE="lte",t.GT="gt",t.GTE="gte",t.IS="is",t.IS_NOT="isNot",t.BEFORE="before",t.AFTER="after",t.CLEAR="clear",t.APPLY="apply",t.MATCH_ALL="matchAll",t.MATCH_ANY="matchAny",t.ADD_RULE="addRule",t.REMOVE_RULE="removeRule",t.ACCEPT="accept",t.REJECT="reject",t.CHOOSE="choose",t.UPLOAD="upload",t.CANCEL="cancel",t.DAY_NAMES="dayNames",t.DAY_NAMES_SHORT="dayNamesShort",t.DAY_NAMES_MIN="dayNamesMin",t.MONTH_NAMES="monthNames",t.MONTH_NAMES_SHORT="monthNamesShort",t.TODAY="today",t.WEEK_HEADER="weekHeader",t.WEAK="weak",t.MEDIUM="medium",t.STRONG="strong",t.PASSWORD_PROMPT="passwordPrompt",t.EMPTY_MESSAGE="emptyMessage",t.EMPTY_FILTER_MESSAGE="emptyFilterMessage",t})();var Cv=(()=>(function(t){t[t.ACCEPT=0]="ACCEPT",t[t.REJECT=1]="REJECT",t[t.CANCEL=2]="CANCEL"}(Cv||(Cv={})),Cv))();let Sx=(()=>{class t{constructor(){this.requireConfirmationSource=new Nn.xQ,this.acceptConfirmationSource=new Nn.xQ,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),sN=(()=>{class t{constructor(){this.filters={startsWith:(e,o,a)=>{if(null==o||""===o.trim())return!0;if(null==e)return!1;let c=Ci.removeAccents(o.toString()).toLocaleLowerCase(a);return Ci.removeAccents(e.toString()).toLocaleLowerCase(a).slice(0,c.length)===c},contains:(e,o,a)=>{if(null==o||"string"==typeof o&&""===o.trim())return!0;if(null==e)return!1;let c=Ci.removeAccents(o.toString()).toLocaleLowerCase(a);return-1!==Ci.removeAccents(e.toString()).toLocaleLowerCase(a).indexOf(c)},notContains:(e,o,a)=>{if(null==o||"string"==typeof o&&""===o.trim())return!0;if(null==e)return!1;let c=Ci.removeAccents(o.toString()).toLocaleLowerCase(a);return-1===Ci.removeAccents(e.toString()).toLocaleLowerCase(a).indexOf(c)},endsWith:(e,o,a)=>{if(null==o||""===o.trim())return!0;if(null==e)return!1;let c=Ci.removeAccents(o.toString()).toLocaleLowerCase(a),v=Ci.removeAccents(e.toString()).toLocaleLowerCase(a);return-1!==v.indexOf(c,v.length-c.length)},equals:(e,o,a)=>null==o||"string"==typeof o&&""===o.trim()||null!=e&&(e.getTime&&o.getTime?e.getTime()===o.getTime():Ci.removeAccents(e.toString()).toLocaleLowerCase(a)==Ci.removeAccents(o.toString()).toLocaleLowerCase(a)),notEquals:(e,o,a)=>!(null==o||"string"==typeof o&&""===o.trim()||null!=e&&(e.getTime&&o.getTime?e.getTime()===o.getTime():Ci.removeAccents(e.toString()).toLocaleLowerCase(a)==Ci.removeAccents(o.toString()).toLocaleLowerCase(a))),in:(e,o)=>{if(null==o||0===o.length)return!0;for(let a=0;a<o.length;a++)if(Ci.equals(e,o[a]))return!0;return!1},between:(e,o)=>null==o||null==o[0]||null==o[1]||null!=e&&(e.getTime?o[0].getTime()<=e.getTime()&&e.getTime()<=o[1].getTime():o[0]<=e&&e<=o[1]),lt:(e,o,a)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()<o.getTime():e<o),lte:(e,o,a)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()<=o.getTime():e<=o),gt:(e,o,a)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()>o.getTime():e>o),gte:(e,o,a)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()>=o.getTime():e>=o),is:(e,o,a)=>this.filters.equals(e,o,a),isNot:(e,o,a)=>this.filters.notEquals(e,o,a),before:(e,o,a)=>this.filters.lt(e,o,a),after:(e,o,a)=>this.filters.gt(e,o,a),dateIs:(e,o)=>null==o||null!=e&&e.toDateString()===o.toDateString(),dateIsNot:(e,o)=>null==o||null!=e&&e.toDateString()!==o.toDateString(),dateBefore:(e,o)=>null==o||null!=e&&e.getTime()<o.getTime(),dateAfter:(e,o)=>null==o||null!=e&&e.getTime()>o.getTime()}}filter(e,o,a,c,v){let A=[];if(e)for(let z of e)for(let $ of o){let oe=Ci.resolveFieldData(z,$);if(this.filters[c](oe,a,v)){A.push(z);break}}return A}register(e,o){this.filters[e]=o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aP=(()=>{class t{constructor(){this.messageSource=new Nn.xQ,this.clearSource=new Nn.xQ,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),rE=(()=>{class t{constructor(){this.clickSource=new Nn.xQ,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aN=(()=>{class t{}return t.AND="and",t.OR="or",t})(),rH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-footer"]],ngContentSelectors:iH,decls:1,vars:0,template:function(e,o){1&e&&(s.F$t(),s.Hsn(0))},encapsulation:2}),t})(),Sv=(()=>{class t{constructor(e){this.template=e}getType(){return this.name}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc))},t.\u0275dir=s.lG2({type:t,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),t})(),Jh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})(),lA=(()=>{class t{constructor(e,o){this.fs=e,this.auth=o,this.data=[],this.temp=!0,this.index=1,this.isLoading=new mo(this.temp),this.auth.authState.subscribe(a=>{this.uid=null==a?void 0:a.uid,this.fs.collection("Admin").doc(null==a?void 0:a.uid).valueChanges().subscribe(c=>{this.name=c,console.log(this.name),this.isLoading=new mo(!1)})})}getAdminInfo(){var e=this;return bo(function*(){return new Promise((o,a)=>{e.auth.authState.subscribe(c=>{e.fs.collection("Admin").doc(null==c?void 0:c.uid).valueChanges().subscribe(A=>{console.log(A),o(A)})})})})()}updateInfo(e,o,a){this.fs.collection("Admin").doc(this.uid).update({username:e,email:o,phone:a}),this.auth.authState.subscribe(c=>{null==c||c.updateEmail(o)})}getPurchaseHistory(e){return bo(function*(){return new Promise((o,a)=>{})})()}getcartInfo(){var e=this;return bo(function*(){return new Promise((o,a)=>{let c=[];e.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").snapshotChanges().subscribe(v=>{v.map(A=>{console.log(A);let z={brand:A.payload.doc.data().brand,compname:A.payload.doc.data().compname,price:A.payload.doc.data().price,quantity:A.payload.doc.data().quantity,totalprice:A.payload.doc.data().totalprice};c.push(z),o(c)})})})})()}getSupplierInfo(){var e=this;return bo(function*(){return new Promise((o,a)=>{let c;e.fs.collection("Supplier").snapshotChanges().subscribe(v=>{v.map(A=>{let z={compname:A.payload.doc.data().compname,shippingfee:A.payload.doc.data().shippingfee};c.push(z),o(c)})})})})()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(_u),s.LFG(Zn))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const lN=fw({passive:!0});let cN=(()=>{class t{constructor(e,o){this._platform=e,this._ngZone=o,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return se.E;const o=qm(e),a=this._monitoredElements.get(o);if(a)return a.subject;const c=new Nn.xQ,v="cdk-text-field-autofilled",A=z=>{"cdk-text-field-autofill-start"!==z.animationName||o.classList.contains(v)?"cdk-text-field-autofill-end"===z.animationName&&o.classList.contains(v)&&(o.classList.remove(v),this._ngZone.run(()=>c.next({target:z.target,isAutofilled:!1}))):(o.classList.add(v),this._ngZone.run(()=>c.next({target:z.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{o.addEventListener("animationstart",A,lN),o.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(o,{subject:c,unlisten:()=>{o.removeEventListener("animationstart",A,lN)}}),c}stopMonitoring(e){const o=qm(e),a=this._monitoredElements.get(o);a&&(a.unlisten(),a.subject.complete(),o.classList.remove("cdk-text-field-autofill-monitored"),o.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(o))}ngOnDestroy(){this._monitoredElements.forEach((e,o)=>this.stopMonitoring(o))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Co),s.LFG(s.R0b))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(Co),(0,s.LFG)(s.R0b))},token:t,providedIn:"root"}),t})(),uN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[nx]]}),t})();const sH=new s.OlP("MAT_INPUT_VALUE_ACCESSOR"),aH=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let lH=0;class cH{constructor(i,e,o,a){this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=o,this.ngControl=a}}const uH=KO(cH);let oE=(()=>{class t extends uH{constructor(e,o,a,c,v,A,z,$,oe,fe){super(A,c,v,a),this._elementRef=e,this._platform=o,this.ngControl=a,this._autofillMonitor=$,this._formField=fe,this._uid="mat-input-"+lH++,this.focused=!1,this.stateChanges=new Nn.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(He=>sS().has(He));const ke=this._elementRef.nativeElement,Oe=ke.nodeName.toLowerCase();this._inputValueAccessor=z||ke,this._previousNativeValue=this.value,this.id=this.id,o.IOS&&oe.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",He=>{let ct=He.target;!ct.value&&!ct.selectionStart&&!ct.selectionEnd&&(ct.setSelectionRange(1,1),ct.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Oe,this._isTextarea="textarea"===Oe,this._isNativeSelect&&(this.controlType=ke.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=br(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=br(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&sS().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=br(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(!this.readonly||!e)&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,o;const a=(null===(o=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===o?void 0:o.call(e))?null:this.placeholder;if(a!==this._previousPlaceholder){const c=this._elementRef.nativeElement;this._previousPlaceholder=a,a?c.setAttribute("placeholder",a):c.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){aH.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,o=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&o&&o.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(Co),s.Y36(Qm,10),s.Y36(qS,8),s.Y36(w_,8),s.Y36(S2),s.Y36(sH,10),s.Y36(cN),s.Y36(s.R0b),s.Y36(P2,8))},t.\u0275dir=s.lG2({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(e,o){1&e&&s.NdJ("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),2&e&&(s.Ikx("disabled",o.disabled)("required",o.required),s.uIk("id",o.id)("data-placeholder",o.placeholder)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.errorState&&!o.empty)("aria-required",o.required),s.ekj("mat-input-server",o._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[s._Bn([{provide:zk,useExisting:t}]),s.qOj,s.TTD]}),t})(),hH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[S2],imports:[[uN,Vk,Ir],uN,Vk]}),t})();const cA="undefined"!=typeof performance&&void 0!==performance.now&&"function"==typeof performance.mark&&"function"==typeof performance.measure&&("function"==typeof performance.clearMarks||"function"==typeof performance.clearMeasures),dH="undefined"!=typeof PerformanceObserver&&void 0!==PerformanceObserver.prototype&&"function"==typeof PerformanceObserver.prototype.constructor,lP="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);let uA={},Zw={};const cP=()=>cA?performance.now():Date.now(),hN=t=>{uA[t]=void 0,Zw[t]&&(Zw[t]=void 0),cA&&(lP||performance.clearMeasures(t),performance.clearMarks(t))},dN=t=>{if(cA){if(lP&&dH){const i=new PerformanceObserver(e=>{Zw[t]=e.getEntries().find(o=>o.name===t),i.disconnect()});i.observe({entryTypes:["measure"]})}performance.mark(t)}uA[t]=cP()},pN=(t,i)=>{try{const e=uA[t];return cA?(i||performance.mark(`${t}-end`),performance.measure(t,t,i||`${t}-end`),lP?Zw[t]?Zw[t]:e?{duration:cP()-e,startTime:e,entryType:"measure",name:t}:{}:performance.getEntriesByName(t).pop()||{}):e?{duration:cP()-e,startTime:e,entryType:"measure",name:t}:{}}catch(e){return{}}finally{hN(t),hN(i||`${t}-end`)}},pH=function(t,i,e,o){return{circle:t,progress:i,"progress-dark":e,pulse:o}};function fH(t,i){if(1&t&&s._UZ(0,"span",1),2&t){const e=s.oxw();s.Q6J("ngClass",s.l5B(4,pH,"circle"===e.appearance,"progress"===e.animation,"progress-dark"===e.animation,"pulse"===e.animation))("ngStyle",e.theme),s.uIk("aria-label",e.ariaLabel)("aria-valuetext",e.loadingText)}}const fN=new s.OlP("ngx-skeleton-loader.config");let mH=(()=>{class t{constructor(e){const{appearance:o="line",animation:a="progress",theme:c=null,loadingText:v="Loading...",count:A=1,ariaLabel:z="loading"}=e||{};this.appearance=o,this.animation=a,this.theme=c,this.loadingText=v,this.count=A,this.items=[],this.ariaLabel=z}ngOnInit(){dN("NgxSkeletonLoader:Rendered"),dN("NgxSkeletonLoader:Loaded"),this.validateInputValues()}validateInputValues(){/^\d+$/.test(`${this.count}`)||((0,s.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'count' a numeric value. Forcing default to \"1\"."),this.count=1),this.items.length=this.count;const e=["progress","progress-dark","pulse","false"];-1===e.indexOf(String(this.animation))&&((0,s.X6Q)()&&console.error(`\`NgxSkeletonLoaderComponent\` need to receive 'animation' as: ${e.join(", ")}. Forcing default to "progress".`),this.animation="progress"),-1===["circle","line",""].indexOf(String(this.appearance))&&((0,s.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'appearance' as: circle or line or empty string. Forcing default to \"''\"."),this.appearance="")}ngOnChanges(e){["count","animation","appearance"].find(o=>e[o]&&(e[o].isFirstChange()||e[o].previousValue===e[o].currentValue))||this.validateInputValues()}ngAfterViewInit(){pN("NgxSkeletonLoader:Rendered")}ngOnDestroy(){pN("NgxSkeletonLoader:Loaded")}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(fN,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["ngx-skeleton-loader"]],inputs:{appearance:"appearance",animation:"animation",theme:"theme",loadingText:"loadingText",count:"count",ariaLabel:"ariaLabel"},features:[s.TTD],decls:1,vars:1,consts:[["class","loader","aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],["aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",1,"loader",3,"ngClass","ngStyle"]],template:function(e,o){1&e&&s.YNc(0,fH,1,9,"span",0),2&e&&s.Q6J("ngForOf",o.items)},directives:[Je,ne,Wi],styles:['.loader[_ngcontent-%COMP%]{background:#eff1f6 no-repeat;border-radius:4px;box-sizing:border-box;display:inline-block;height:20px;margin-bottom:10px;overflow:hidden;position:relative;width:100%;will-change:transform}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{box-sizing:border-box}.loader.circle[_ngcontent-%COMP%]{border-radius:50%;height:40px;margin:5px;width:40px}.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%]{transform:translateZ(0)}.loader.progress-dark[_ngcontent-%COMP%]:after, .loader.progress-dark[_ngcontent-%COMP%]:before, .loader.progress[_ngcontent-%COMP%]:after, .loader.progress[_ngcontent-%COMP%]:before{box-sizing:border-box}.loader.progress-dark[_ngcontent-%COMP%]:before, .loader.progress[_ngcontent-%COMP%]:before{-webkit-animation:progress 2s ease-in-out infinite;animation:progress 2s ease-in-out infinite;background-size:200px 100%;content:"";height:100%;left:0;position:absolute;top:0;width:200px;z-index:1}.loader.progress[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.6),hsla(0,0%,100%,0))}.loader.progress-dark[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,transparent,rgba(0,0,0,.2),transparent)}.loader.pulse[_ngcontent-%COMP%]{-webkit-animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;-webkit-animation-delay:.5s;animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;animation-delay:.5s}@media (prefers-reduced-motion:reduce){.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%], .loader.pulse[_ngcontent-%COMP%]{-webkit-animation:none;animation:none}.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%]{background-image:none}}@-webkit-keyframes progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}@keyframes progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}'],changeDetection:0}),t})(),gH=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:fN,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})(),Jt=(()=>{class t{static addClass(e,o){e.classList?e.classList.add(o):e.className+=" "+o}static addMultipleClasses(e,o){if(e.classList){let a=o.trim().split(" ");for(let c=0;c<a.length;c++)e.classList.add(a[c])}else{let a=o.split(" ");for(let c=0;c<a.length;c++)e.className+=" "+a[c]}}static removeClass(e,o){e.classList?e.classList.remove(o):e.className=e.className.replace(new RegExp("(^|\\b)"+o.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,o){return e.classList?e.classList.contains(o):new RegExp("(^| )"+o+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(o){return o!==e})}static find(e,o){return Array.from(e.querySelectorAll(o))}static findSingle(e,o){return e?e.querySelector(o):null}static index(e){let o=e.parentNode.childNodes,a=0;for(var c=0;c<o.length;c++){if(o[c]==e)return a;1==o[c].nodeType&&a++}return-1}static indexWithinGroup(e,o){let a=e.parentNode?e.parentNode.childNodes:[],c=0;for(var v=0;v<a.length;v++){if(a[v]==e)return c;a[v].attributes&&a[v].attributes[o]&&1==a[v].nodeType&&c++}return-1}static relativePosition(e,o){let a=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const c=o.offsetHeight,v=o.getBoundingClientRect(),A=this.getViewport();let z,$;v.top+c+a.height>A.height?(z=-1*a.height,e.style.transformOrigin="bottom",v.top+z<0&&(z=-1*v.top)):(z=c,e.style.transformOrigin="top"),$=a.width>A.width?-1*v.left:v.left+a.width>A.width?-1*(v.left+a.width-A.width):0,e.style.top=z+"px",e.style.left=$+"px"}static absolutePosition(e,o){let Oe,He,a=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),c=a.height,v=a.width,A=o.offsetHeight,z=o.offsetWidth,$=o.getBoundingClientRect(),oe=this.getWindowScrollTop(),fe=this.getWindowScrollLeft(),ke=this.getViewport();$.top+A+c>ke.height?(Oe=$.top+oe-c,e.style.transformOrigin="bottom",Oe<0&&(Oe=oe)):(Oe=A+$.top+oe,e.style.transformOrigin="top"),He=$.left+v>ke.width?Math.max(0,$.left+fe+z-v):$.left+fe,e.style.top=Oe+"px",e.style.left=He+"px"}static getParents(e,o=[]){return null===e.parentNode?o:this.getParents(e.parentNode,o.concat([e.parentNode]))}static getScrollableParents(e){let o=[];if(e){let a=this.getParents(e);const c=/(auto|scroll)/,v=A=>{let z=window.getComputedStyle(A,null);return c.test(z.getPropertyValue("overflow"))||c.test(z.getPropertyValue("overflowX"))||c.test(z.getPropertyValue("overflowY"))};for(let A of a){let z=1===A.nodeType&&A.dataset.scrollselectors;if(z){let $=z.split(",");for(let oe of $){let fe=this.findSingle(A,oe);fe&&v(fe)&&o.push(fe)}}9!==A.nodeType&&v(A)&&o.push(A)}}return o}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let o=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",o}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let o=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",o}static getHiddenElementDimensions(e){let o={};return e.style.visibility="hidden",e.style.display="block",o.width=e.offsetWidth,o.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",o}static scrollInView(e,o){let a=getComputedStyle(e).getPropertyValue("borderTopWidth"),c=a?parseFloat(a):0,v=getComputedStyle(e).getPropertyValue("paddingTop"),A=v?parseFloat(v):0,z=e.getBoundingClientRect(),oe=o.getBoundingClientRect().top+document.body.scrollTop-(z.top+document.body.scrollTop)-c-A,fe=e.scrollTop,ke=e.clientHeight,Oe=this.getOuterHeight(o);oe<0?e.scrollTop=fe+oe:oe+Oe>ke&&(e.scrollTop=fe+oe-ke+Oe)}static fadeIn(e,o){e.style.opacity=0;let a=+new Date,c=0,v=function(){c=+e.style.opacity.replace(",",".")+((new Date).getTime()-a)/o,e.style.opacity=c,a=+new Date,+c<1&&(window.requestAnimationFrame&&requestAnimationFrame(v)||setTimeout(v,16))};v()}static fadeOut(e,o){var a=1,A=50/o;let z=setInterval(()=>{(a-=A)<=0&&(a=0,clearInterval(z)),e.style.opacity=a},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,o){var a=Element.prototype;return(a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||function(v){return-1!==[].indexOf.call(document.querySelectorAll(v),this)}).call(e,o)}static getOuterWidth(e,o){let a=e.offsetWidth;if(o){let c=getComputedStyle(e);a+=parseFloat(c.marginLeft)+parseFloat(c.marginRight)}return a}static getHorizontalPadding(e){let o=getComputedStyle(e);return parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)}static getHorizontalMargin(e){let o=getComputedStyle(e);return parseFloat(o.marginLeft)+parseFloat(o.marginRight)}static innerWidth(e){let o=e.offsetWidth,a=getComputedStyle(e);return o+=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),o}static width(e){let o=e.offsetWidth,a=getComputedStyle(e);return o-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),o}static getInnerHeight(e){let o=e.offsetHeight,a=getComputedStyle(e);return o+=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),o}static getOuterHeight(e,o){let a=e.offsetHeight;if(o){let c=getComputedStyle(e);a+=parseFloat(c.marginTop)+parseFloat(c.marginBottom)}return a}static getHeight(e){let o=e.offsetHeight,a=getComputedStyle(e);return o-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom)+parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth),o}static getWidth(e){let o=e.offsetWidth,a=getComputedStyle(e);return o-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight)+parseFloat(a.borderLeftWidth)+parseFloat(a.borderRightWidth),o}static getViewport(){let e=window,o=document,a=o.documentElement,c=o.getElementsByTagName("body")[0];return{width:e.innerWidth||a.clientWidth||c.clientWidth,height:e.innerHeight||a.clientHeight||c.clientHeight}}static getOffset(e){var o=e.getBoundingClientRect();return{top:o.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:o.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,o){let a=e.parentNode;if(!a)throw"Can't replace element";return a.replaceChild(o,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static appendChild(e,o){if(this.isElement(o))o.appendChild(e);else{if(!o.el||!o.el.nativeElement)throw"Cannot append "+o+" to "+e;o.el.nativeElement.appendChild(e)}}static removeChild(e,o){if(this.isElement(o))o.removeChild(e);else{if(!o.el||!o.el.nativeElement)throw"Cannot remove "+e+" from "+o;o.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let o=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let o=document.createElement("div");o.className="p-scrollbar-measure",document.body.appendChild(o);let a=o.offsetWidth-o.clientWidth;return document.body.removeChild(o),this.calculatedScrollbarWidth=a,a}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let o=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=o,o}static invokeElementMethod(e,o,a){e[o].apply(e,a)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),o=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:o[1]||"",version:o[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let o=t.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])'),a=[];for(let c of o)"none"!=getComputedStyle(c).display&&"hidden"!=getComputedStyle(c).visibility&&a.push(c);return a}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return t.zindex=1e3,t.calculatedScrollbarWidth=null,t.calculatedScrollbarHeight=null,t})();class sE{constructor(i,e=(()=>{})){this.element=i,this.listener=e}bindScrollListener(){this.scrollableParents=Jt.getScrollableParents(this.element);for(let i=0;i<this.scrollableParents.length;i++)this.scrollableParents[i].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let i=0;i<this.scrollableParents.length;i++)this.scrollableParents[i].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let Ex=(()=>{class t{constructor(e,o,a){this.el=e,this.zone=o,this.config=a}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let o=this.getInk();if(!o||"none"===getComputedStyle(o,null).display)return;if(Jt.removeClass(o,"p-ink-active"),!Jt.getHeight(o)&&!Jt.getWidth(o)){let A=Math.max(Jt.getOuterWidth(this.el.nativeElement),Jt.getOuterHeight(this.el.nativeElement));o.style.height=A+"px",o.style.width=A+"px"}let a=Jt.getOffset(this.el.nativeElement),c=e.pageX-a.left+document.body.scrollTop-Jt.getWidth(o)/2,v=e.pageY-a.top+document.body.scrollLeft-Jt.getHeight(o)/2;o.style.top=v+"px",o.style.left=c+"px",Jt.addClass(o,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&Jt.removeClass(e,"p-ink-active")}onAnimationEnd(e){Jt.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),Jt.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Jm,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","pRipple",""]],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("p-ripple",!0)}}),t})(),Pf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})(),aE=(()=>{class t{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,Jt.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),this.icon&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let o=this.label?"p-button-icon-"+this.iconPos:null;o&&Jt.addClass(e,o),Jt.addMultipleClasses(e,this.getIconClass());let a=Jt.findSingle(this.el.nativeElement,".p-button-label");a?this.el.nativeElement.insertBefore(e,a):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=Jt.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=Jt.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(Jt.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","pButton",""]],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),t})(),E_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Pf]]}),t})();const yH=["content"];function vH(t,i){1&t&&s.GkF(0)}function bH(t,i){if(1&t&&(s.TgZ(0,"div",10),s.YNc(1,vH,1,0,"ng-container",11),s.qZA()),2&t){const e=s.oxw(3);s.xp6(1),s.Q6J("ngTemplateOutlet",e.headerTemplate)}}function xH(t,i){if(1&t&&(s.TgZ(0,"span",15),s._uU(1),s.qZA()),2&t){const e=s.oxw(4);s.xp6(1),s.Oqu(e.option("header"))}}const wH=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function CH(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(a){return s.CHM(e),s.oxw(4).close(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(4).close(a)}),s._UZ(1,"span",17),s.qZA()}2&t&&s.Q6J("ngClass",s.DdM(1,wH))}function SH(t,i){if(1&t&&(s.TgZ(0,"div",10),s.YNc(1,xH,2,1,"span",12),s.TgZ(2,"div",13),s.YNc(3,CH,2,2,"button",14),s.qZA(),s.qZA()),2&t){const e=s.oxw(3);s.xp6(1),s.Q6J("ngIf",e.option("header")),s.xp6(2),s.Q6J("ngIf",e.closable)}}function EH(t,i){if(1&t&&s._UZ(0,"i",1),2&t){const e=s.oxw(3);s.Tol(e.option("icon")),s.Q6J("ngClass","p-confirm-dialog-icon")}}function TH(t,i){1&t&&s.GkF(0)}function MH(t,i){if(1&t&&(s.TgZ(0,"div",18),s.Hsn(1),s.YNc(2,TH,1,0,"ng-container",11),s.qZA()),2&t){const e=s.oxw(3);s.xp6(2),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}function kH(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",20),s.NdJ("click",function(){return s.CHM(e),s.oxw(4).reject()}),s.qZA()}if(2&t){const e=s.oxw(4);s.Tol(e.option("rejectButtonStyleClass")),s.Q6J("icon",e.option("rejectIcon"))("label",e.rejectButtonLabel)("ngClass","p-confirm-dialog-reject"),s.uIk("aria-label",e.rejectAriaLabel)}}function AH(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",20),s.NdJ("click",function(){return s.CHM(e),s.oxw(4).accept()}),s.qZA()}if(2&t){const e=s.oxw(4);s.Tol(e.option("acceptButtonStyleClass")),s.Q6J("icon",e.option("acceptIcon"))("label",e.acceptButtonLabel)("ngClass","p-confirm-dialog-accept"),s.uIk("aria-label",e.acceptAriaLabel)}}function DH(t,i){if(1&t&&(s.TgZ(0,"div",18),s.YNc(1,kH,1,6,"button",19),s.YNc(2,AH,1,6,"button",19),s.qZA()),2&t){const e=s.oxw(3);s.xp6(1),s.Q6J("ngIf",e.option("rejectVisible")),s.xp6(1),s.Q6J("ngIf",e.option("acceptVisible"))}}const IH=function(t){return{"p-dialog p-confirm-dialog p-component":!0,"p-dialog-rtl":t}},PH=function(t,i){return{transform:t,transition:i}},RH=function(t){return{value:"visible",params:t}};function OH(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",3),s.NdJ("mousedown",function(){return s.CHM(e),s.oxw(2).moveOnTop()})("@animation.start",function(a){return s.CHM(e),s.oxw(2).onAnimationStart(a)})("@animation.done",function(a){return s.CHM(e),s.oxw(2).onAnimationEnd(a)}),s.YNc(1,bH,2,1,"div",4),s.YNc(2,SH,4,2,"div",4),s.TgZ(3,"div",5,6),s.YNc(5,EH,1,3,"i",7),s._UZ(6,"span",8),s.qZA(),s.YNc(7,MH,3,1,"div",9),s.YNc(8,DH,3,2,"div",9),s.qZA()}if(2&t){const e=s.oxw(2);s.Tol(e.styleClass),s.Q6J("ngClass",s.VKq(11,IH,e.rtl))("ngStyle",e.style)("@animation",s.VKq(16,RH,s.WLB(13,PH,e.transformOptions,e.transitionOptions))),s.xp6(1),s.Q6J("ngIf",e.headerTemplate),s.xp6(1),s.Q6J("ngIf",!e.headerTemplate),s.xp6(3),s.Q6J("ngIf",e.option("icon")),s.xp6(1),s.Q6J("innerHTML",e.option("message"),s.oJD),s.xp6(1),s.Q6J("ngIf",e.footer||e.footerTemplate),s.xp6(1),s.Q6J("ngIf",!e.footer&&!e.footerTemplate)}}function FH(t,i){if(1&t&&(s.TgZ(0,"div",1),s.YNc(1,OH,9,18,"div",2),s.qZA()),2&t){const e=s.oxw();s.Tol(e.maskStyleClass),s.Q6J("ngClass",e.getMaskClass()),s.xp6(1),s.Q6J("ngIf",e.visible)}}const LH=[[["p-footer"]]],NH=["p-footer"],BH=cx([Rn({transform:"{{transform}}",opacity:0}),dr("{{transition}}",Rn({transform:"none",opacity:1}))]),zH=cx([dr("{{transition}}",Rn({transform:"{{transform}}",opacity:0}))]);let VH=(()=>{class t{constructor(e,o,a,c,v,A){this.el=e,this.renderer=o,this.confirmationService=a,this.zone=c,this.cd=v,this.config=A,this.acceptIcon="pi pi-check",this.acceptVisible=!0,this.rejectIcon="pi pi-times",this.rejectVisible=!0,this.closeOnEscape=!0,this.blockScroll=!0,this.closable=!0,this.autoZIndex=!0,this.baseZIndex=0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.focusTrap=!0,this.defaultFocus="accept",this.onHide=new s.vpe,this._position="center",this.transformOptions="scale(0.7)",this.id=sP(),this.subscription=this.confirmationService.requireConfirmation$.subscribe(z=>{z?z.key===this.key&&(this.confirmation=z,this.confirmationOptions={message:this.confirmation.message||this.message,icon:this.confirmation.icon||this.icon,header:this.confirmation.header||this.header,rejectVisible:null==this.confirmation.rejectVisible?this.rejectVisible:this.confirmation.rejectVisible,acceptVisible:null==this.confirmation.acceptVisible?this.acceptVisible:this.confirmation.acceptVisible,acceptLabel:this.confirmation.acceptLabel||this.acceptLabel,rejectLabel:this.confirmation.rejectLabel||this.rejectLabel,acceptIcon:this.confirmation.acceptIcon||this.acceptIcon,rejectIcon:this.confirmation.rejectIcon||this.rejectIcon,acceptButtonStyleClass:this.confirmation.acceptButtonStyleClass||this.acceptButtonStyleClass,rejectButtonStyleClass:this.confirmation.rejectButtonStyleClass||this.rejectButtonStyleClass,defaultFocus:this.confirmation.defaultFocus||this.defaultFocus,blockScroll:!1===this.confirmation.blockScroll||!0===this.confirmation.blockScroll?this.confirmation.blockScroll:this.blockScroll,closeOnEscape:!1===this.confirmation.closeOnEscape||!0===this.confirmation.closeOnEscape?this.confirmation.closeOnEscape:this.closeOnEscape,dismissableMask:!1===this.confirmation.dismissableMask||!0===this.confirmation.dismissableMask?this.confirmation.dismissableMask:this.dismissableMask},this.confirmation.accept&&(this.confirmation.acceptEvent=new s.vpe,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new s.vpe,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"top-left":case"bottom-left":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"top-right":case"bottom-right":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}option(e){const o=this.confirmationOptions||this;if(o.hasOwnProperty(e))return o[e]}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.contentContainer=Jt.findSingle(this.container,".p-dialog-content"),this.container.setAttribute(this.id,"");const o=this.getElementToFocus();o&&o.focus(),this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.enableModality()}}onAnimationEnd(e){switch(e.toState){case"void":this.onOverlayHide()}}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":return Jt.findSingle(this.container,".p-confirm-dialog-accept");case"reject":return Jt.findSingle(this.container,".p-confirm-dialog-reject");case"close":return Jt.findSingle(this.container,".p-dialog-header-close");case"none":return null;default:return Jt.findSingle(this.container,".p-confirm-dialog-accept")}}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):Jt.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.wrapper&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}enableModality(){this.option("blockScroll")&&Jt.addClass(document.body,"p-overflow-hidden"),this.option("dismissableMask")&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)}))}disableModality(){this.maskVisible=!1,this.option("blockScroll")&&Jt.removeClass(document.body,"p-overflow-hidden"),this.dismissableMask&&this.unbindMaskClickListener(),this.container&&!this.cd.destroyed&&this.cd.detectChanges()}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let o in this.breakpoints)e+=`\n                    @media screen and (max-width: ${o}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[o]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}close(e){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(Cv.CANCEL),this.hide(Cv.CANCEL),e.preventDefault()}hide(e){this.onHide.emit(e),this.visible=!1,this.confirmation=null,this.confirmationOptions=null}moveOnTop(){this.autoZIndex&&(this.container.style.zIndex=String(this.baseZIndex+ ++Jt.zindex),this.wrapper.style.zIndex=String(this.baseZIndex+(Jt.zindex-1)))}getMaskClass(){let e={"p-dialog-mask p-component-overlay":!0,"p-dialog-mask-scrollblocker":this.blockScroll};return e[this.getPositionClass().toString()]=!0,e}getPositionClass(){const o=["left","right","top","top-left","top-right","bottom","bottom-left","bottom-right"].find(a=>a===this.position);return o?`p-dialog-${o}`:""}bindGlobalListeners(){(this.option("closeOnEscape")&&this.closable||this.focusTrap&&!this.documentEscapeListener)&&(this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",o=>{if(27==o.which&&this.option("closeOnEscape")&&this.closable&&parseInt(this.container.style.zIndex)===Jt.zindex+this.baseZIndex&&this.visible&&this.close(o),9===o.which&&this.focusTrap){o.preventDefault();let a=Jt.getFocusableElements(this.container);if(a&&a.length>0)if(a[0].ownerDocument.activeElement){let c=a.indexOf(a[0].ownerDocument.activeElement);o.shiftKey?-1==c||0===c?a[a.length-1].focus():a[c-1].focus():-1==c||c===a.length-1?a[0].focus():a[c+1].focus()}else a[0].focus()}}))}unbindGlobalListeners(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}onOverlayHide(){this.disableModality(),this.unbindGlobalListeners(),this.container=null}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.restoreAppend(),this.onOverlayHide(),this.subscription.unsubscribe(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle()}accept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(Cv.ACCEPT)}reject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(Cv.REJECT),this.hide(Cv.REJECT)}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(cl.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(cl.REJECT)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Sx),s.Y36(s.R0b),s.Y36(s.sBO),s.Y36(Jm))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-confirmDialog"]],contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,rH,5),s.Suo(a,Sv,4)),2&e){let c;s.iGM(c=s.CRH())&&(o.footer=c.first),s.iGM(c=s.CRH())&&(o.templates=c)}},viewQuery:function(e,o){if(1&e&&s.Gf(yH,5),2&e){let a;s.iGM(a=s.CRH())&&(o.contentViewChild=a.first)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:"acceptVisible",rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:"rejectVisible",acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",blockScroll:"blockScroll",rtl:"rtl",closable:"closable",appendTo:"appendTo",key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",transitionOptions:"transitionOptions",focusTrap:"focusTrap",defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position"},outputs:{onHide:"onHide"},ngContentSelectors:NH,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass","ngStyle","class","mousedown",4,"ngIf"],[3,"ngClass","ngStyle","mousedown"],["class","p-dialog-header",4,"ngIf"],[1,"p-dialog-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-dialog-message",3,"innerHTML"],["class","p-dialog-footer",4,"ngIf"],[1,"p-dialog-header"],[4,"ngTemplateOutlet"],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button",3,"ngClass","click","keydown.enter"],[1,"pi","pi-times"],[1,"p-dialog-footer"],["type","button","pRipple","","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],["type","button","pRipple","","pButton","",3,"icon","label","ngClass","click"]],template:function(e,o){1&e&&(s.F$t(LH),s.YNc(0,FH,2,4,"div",0)),2&e&&s.Q6J("ngIf",o.maskVisible)},directives:[Xt,ne,Wi,Ro,Ex,aE],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none;background-color:transparent;transition-property:background-color}.p-dialog,.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-dialog-mask.p-dialog-mask-leave{background-color:transparent}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-top .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top,.p-dialog-top-left{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}"],encapsulation:2,data:{animation:[ns("animation",[ur("void => visible",[SS(BH)]),ur("visible => void",[SS(zH)])])]},changeDetection:0}),t})(),UH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,E_,Pf],E_,Jh]}),t})();const HH=["primaryValueBar"];class GH{constructor(i){this._elementRef=i}}const jH=kw(GH,"primary"),YH=new s.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=(0,s.f3M)(wt),i=t?t.location:null;return{getPathname:()=>i?i.pathname+i.search:""}}});let ZH=0,uP=(()=>{class t extends jH{constructor(e,o,a,c){super(e),this._elementRef=e,this._ngZone=o,this._animationMode=a,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new s.vpe,this._animationEndSubscription=gs.w.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+ZH++;const v=c?c.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${v}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===a}get value(){return this._value}set value(e){this._value=mN(Fl(e)||0)}get bufferValue(){return this._bufferValue}set bufferValue(e){this._bufferValue=mN(e||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=this._primaryValueBar.nativeElement;this._animationEndSubscription=Dw(e,"transitionend").pipe(w(o=>o.target===e)).subscribe(()=>{("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(ih,8),s.Y36(YH,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-progress-bar"]],viewQuery:function(e,o){if(1&e&&s.Gf(HH,5),2&e){let a;s.iGM(a=s.CRH())&&(o._primaryValueBar=a.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(e,o){2&e&&(s.uIk("aria-valuenow","indeterminate"===o.mode||"query"===o.mode?null:o.value)("mode",o.mode),s.ekj("_mat-animation-noopable",o._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[s.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.O4$(),s.TgZ(1,"svg",1),s.TgZ(2,"defs"),s.TgZ(3,"pattern",2),s._UZ(4,"circle",3),s.qZA(),s.qZA(),s._UZ(5,"rect",4),s.qZA(),s.kcU(),s._UZ(6,"div",5),s._UZ(7,"div",6,7),s._UZ(9,"div",8),s.qZA()),2&e&&(s.xp6(3),s.Q6J("id",o.progressbarId),s.xp6(2),s.uIk("fill",o._rectangleFillValue),s.xp6(1),s.Q6J("ngStyle",o._bufferTransform()),s.xp6(1),s.Q6J("ngStyle",o._primaryTransform()))},directives:[Wi],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),t})();function mN(t,i=0,e=100){return Math.max(i,Math.min(e,t))}let gN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Ir],Ir]}),t})();function WH(t,i){1&t&&(s.TgZ(0,"div",25),s._UZ(1,"mat-progress-bar",26),s.qZA())}function $H(t,i){1&t&&(s.TgZ(0,"th",27),s._uU(1,"No"),s.qZA())}function XH(t,i){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.x)}}function QH(t,i){1&t&&(s.TgZ(0,"th",27),s._uU(1,"Item Name"),s.qZA()),2&t&&s.Udp("width","30%")}function JH(t,i){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.id)}}function KH(t,i){1&t&&(s.TgZ(0,"th",27),s._uU(1,"Quantity"),s.qZA())}function e5(t,i){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.key)}}function t5(t,i){1&t&&(s.TgZ(0,"th",27),s._uU(1,"Lowest Margin"),s.qZA()),2&t&&s.Udp("width","10%")}function n5(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"td",28),s.TgZ(1,"input",29),s.NdJ("click",function(a){const v=s.CHM(e).$implicit;return s.oxw().update(a,v.id)})("keyup.enter",function(a){const v=s.CHM(e).$implicit;return s.oxw().update(a,v.id)}),s.qZA(),s.qZA()}if(2&t){const e=i.$implicit;s.xp6(1),s.Q6J("value",e.lowestmargin)}}function r5(t,i){1&t&&(s.TgZ(0,"th",27),s._uU(1," Action"),s.qZA())}const o5=function(t){return["/adminviewhistory/",t]};function s5(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"td",28),s.TgZ(1,"button",30),s._uU(2,"VIEW HISTORY"),s.qZA(),s.TgZ(3,"button",31),s.NdJ("click",function(){const c=s.CHM(e).$implicit;return s.oxw().delete(c.id)}),s._uU(4,"DELETE"),s.qZA(),s.qZA()}if(2&t){const e=i.$implicit;s.xp6(1),s.Q6J("routerLink",s.VKq(2,o5,e.id)),s.xp6(2),s.Q6J("disabled",e.key>0)}}function a5(t,i){1&t&&s._UZ(0,"tr",32)}function l5(t,i){1&t&&s._UZ(0,"tr",33)}function c5(t,i){if(1&t&&(s.TgZ(0,"tr",34),s.TgZ(1,"td",35),s._uU(2),s.qZA(),s.qZA()),2&t){s.oxw();const e=s.MAs(14);s.xp6(2),s.hij(' No data matching the filter "',e.value,'" ')}}const u5=function(){return[5,10,20]};let h5=(()=>{class t{constructor(e,o,a,c){this.fs=e,this.admins=o,this.confirmationService=a,this.primengConfig=c,this.temp=!0,this.isLoading2=new mo(this.temp),this.displayedColumns=["x","id","key","lowestmargin","action"],this.data=[],this.index=0,this.tableinfo$=this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("inventory").snapshotChanges(),this.tableinfo$.subscribe(v=>{this.data=[];let A=1;v.map(z=>{let $={x:A+++".",id:z.payload.doc.id,key:z.payload.doc.data().quantity,lowestmargin:z.payload.doc.data().lowestmargin};this.data.push($),console.log(this.data),this.dataSource=new Cx(this.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading2=new mo(!1)})})}ngOnInit(){this.primengConfig.ripple=!0}ngAfterViewInit(){}update(e,o){console.log(e.target.value),console.log(o),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("inventory").doc(o).update({lowestmargin:e.target.value})}delete(e){this.confirmationService.confirm({message:"Are you sure that you want to perform this action?",accept:()=>{this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("inventory").doc(e).delete()}})}value(e){console.log(e)}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase().toString()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(_u),s.Y36(lA),s.Y36(Sx),s.Y36(Jm))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-manage-inventory"]],viewQuery:function(e,o){if(1&e&&(s.Gf(wv,5),s.Gf(x_,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.paginator=a.first),s.iGM(a=s.CRH())&&(o.sort=a.first)}},features:[s._Bn([Sx])],decls:39,vars:10,consts:[["class","loader-container",4,"ngIf"],[1,"title"],["id","invtitle"],["id","add","mat-raised-button","","routerLink","/adminaddorder"],["appearance","standard","id","filter"],[1,"fas","fa-search"],["matInput","","placeholder","Ex. Egg",3,"keyup"],["input",""],["id","table",1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","x"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[1,"name"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",3,"width",4,"matHeaderCellDef"],["matColumnDef","key"],["matColumnDef","lowestmargin"],["matColumnDef","action"],["count","1","appearance","line"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"loader-container"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number","id","form1","min","0",1,"form-control",3,"value","click","keyup.enter"],["mat-raised-button","",3,"routerLink"],["mat-raised-button","",3,"disabled","click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(s.TgZ(0,"body"),s._UZ(1,"app-adminnavbarpage"),s.YNc(2,WH,2,0,"div",0),s.ALo(3,"async"),s.TgZ(4,"div",1),s.TgZ(5,"h4",2),s._uU(6,"Manage Inventory"),s.qZA(),s.TgZ(7,"button",3),s._uU(8,"ADD ORDER"),s.qZA(),s.qZA(),s.TgZ(9,"mat-form-field",4),s.TgZ(10,"mat-label"),s._UZ(11,"i",5),s._uU(12," Search"),s.qZA(),s.TgZ(13,"input",6,7),s.NdJ("keyup",function(c){return o.applyFilter(c)}),s.qZA(),s.qZA(),s.TgZ(15,"div",8),s.TgZ(16,"table",9),s.ynx(17,10),s.YNc(18,$H,2,0,"th",11),s.YNc(19,XH,2,1,"td",12),s.BQk(),s.TgZ(20,"div",13),s.ynx(21,14),s.YNc(22,QH,2,2,"th",15),s.YNc(23,JH,2,1,"td",12),s.BQk(),s.qZA(),s.ynx(24,16),s.YNc(25,KH,2,0,"th",11),s.YNc(26,e5,2,1,"td",12),s.BQk(),s.ynx(27,17),s.YNc(28,t5,2,2,"th",15),s.YNc(29,n5,2,1,"td",12),s.BQk(),s.ynx(30,18),s.YNc(31,r5,2,0,"th",11),s.YNc(32,s5,5,4,"td",12),s._UZ(33,"ngx-skeleton-loader",19),s.BQk(),s.YNc(34,a5,1,0,"tr",20),s.YNc(35,l5,1,0,"tr",21),s.YNc(36,c5,3,1,"tr",22),s.qZA(),s._UZ(37,"mat-paginator",23),s.qZA(),s._UZ(38,"p-confirmDialog",24),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",s.lcZ(3,7,o.isLoading2)),s.xp6(14),s.Udp("width","100%"),s.Q6J("dataSource",o.dataSource),s.xp6(18),s.Q6J("matHeaderRowDef",o.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",o.displayedColumns),s.xp6(2),s.Q6J("pageSizeOptions",s.DdM(9,u5)))},directives:[Ym,Xt,mv,ff,Pw,bx,oE,JS,x_,jw,Gw,Hw,mH,KS,eE,iE,wv,VH,uP,Yw,Ok,qw,tE,nE],pipes:[hl],styles:["body[_ngcontent-%COMP%]{background:#f5f5f5;margin:0;padding:0}.tableInv[_ngcontent-%COMP%]{margin:20px}.mat-elevation-z8[_ngcontent-%COMP%]{width:90%;margin:auto}td[_ngcontent-%COMP%]:hover{background:#f5f5f5}.title[_ngcontent-%COMP%]{display:flex;width:100%;position:relative}#add[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:3.4rem;margin-top:20px}#invtitle[_ngcontent-%COMP%]{position:absolute;left:0;margin-left:3.4rem;margin-top:20px}button[_ngcontent-%COMP%]{margin:0 10px}button[_ngcontent-%COMP%]:hover{color:red}button[_ngcontent-%COMP%]:disabled{background:grey}#table[_ngcontent-%COMP%]{margin-top:8rem}#filter[_ngcontent-%COMP%]{position:absolute;right:4.5rem;z-index:999;top:8rem}ngx-skeleton-loader[_ngcontent-%COMP%]{z-index:99}"]}),t})(),Km=(()=>{class t{constructor(e,o,a,c){this.auth=e,this.router=o,this.fauth=a,this.fs=c}canActivate(e,o){var a=this;return bo(function*(){return 0!=(yield a.auth.getAdminStatus())||(a.router.navigateByUrl(""),!1)})()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(zd),s.LFG(Lo),s.LFG(Zn),s.LFG(_u))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Fp=(()=>{class t{constructor(e,o,a){this.auth=e,this.router=o,this.fauth=a}canActivate(e,o){return this.fauth.authState.pipe((0,ei.U)(a=>(console.log(a),!!a||(this.router.navigate([""],{queryParams:{returnUrl:o.url}}),!1))))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(zd),s.LFG(Lo),s.LFG(Zn))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_N=(()=>{class t{constructor(e,o,a,c){this.auth=e,this.as=o,this.fs=a,this.router=c}canActivate(e,o){var a=this;return bo(function*(){let c=yield a.as.getStudentStatus();return console.log(c),0!=c||(a.router.navigateByUrl(""),!1)})()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Zn),s.LFG(zd),s.LFG(_u),s.LFG(Lo))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function d5(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",1),s.TgZ(1,"button",2),s.NdJ("click",function(){return s.CHM(e),s.oxw().action()}),s._uU(2),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.xp6(2),s.Oqu(e.data.action)}}function p5(t,i){}const yN=new s.OlP("MatSnackBarData");class hA{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const f5=Math.pow(2,31)-1;class hP{constructor(i,e){this._overlayRef=e,this._afterDismissed=new Nn.xQ,this._afterOpened=new Nn.xQ,this._onAction=new Nn.xQ,this._dismissedByAction=!1,this.containerInstance=i,this.onAction().subscribe(()=>this.dismiss()),i._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(i){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(i,f5))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let m5=(()=>{class t{constructor(e,o){this.snackBarRef=e,this.data=o}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(hP),s.Y36(yN))},t.\u0275cmp=s.Xpm({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,o){1&e&&(s.TgZ(0,"span"),s._uU(1),s.qZA(),s.YNc(2,d5,3,1,"div",0)),2&e&&(s.xp6(1),s.Oqu(o.data.message),s.xp6(1),s.Q6J("ngIf",o.hasAction))},directives:[Xt,mv],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),t})();const g5={snackBarState:ns("state",[co("void, hidden",Rn({transform:"scale(0.8)",opacity:0})),co("visible",Rn({transform:"scale(1)",opacity:1})),ur("* => visible",dr("150ms cubic-bezier(0, 0, 0.2, 1)")),ur("* => void, * => hidden",dr("75ms cubic-bezier(0.4, 0.0, 1, 1)",Rn({opacity:0})))])};let _5=(()=>{class t extends Nk{constructor(e,o,a,c,v){super(),this._ngZone=e,this._elementRef=o,this._changeDetectorRef=a,this._platform=c,this.snackBarConfig=v,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Nn.xQ,this._onExit=new Nn.xQ,this._onEnter=new Nn.xQ,this._animationState="void",this.attachDomPortal=A=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(A)),this._live="assertive"!==v.politeness||v.announcementMessage?"off"===v.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:o,toState:a}=e;if(("void"===a&&"void"!==o||"hidden"===a)&&this._completeExit(),"visible"===a){const c=this._onEnter;this._ngZone.run(()=>{c.next(),c.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(ue(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,o=this.snackBarConfig.panelClass;o&&(Array.isArray(o)?o.forEach(a=>e.classList.add(a)):e.classList.add(o)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),o=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&o){let a=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(a=document.activeElement),e.removeAttribute("aria-hidden"),o.appendChild(e),null==a||a.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(Co),s.Y36(hA))},t.\u0275cmp=s.Xpm({type:t,selectors:[["snack-bar-container"]],viewQuery:function(e,o){if(1&e&&s.Gf(yx,7),2&e){let a;s.iGM(a=s.CRH())&&(o._portalOutlet=a.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,o){1&e&&s.WFA("@state.done",function(c){return o.onAnimationEnd(c)}),2&e&&s.d8E("@state",o._animationState)},features:[s.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.YNc(1,p5,0,0,"ng-template",1),s.qZA(),s._UZ(2,"div")),2&e&&(s.xp6(2),s.uIk("aria-live",o._live)("role",o._role))},directives:[yx],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[g5.snackBarState]}}),t})(),vN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[zS,Bk,Fi,k2,Ir],Ir]}),t})();const bN=new s.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new hA}});let xN=(()=>{class t{constructor(e,o,a,c,v,A){this._overlay=e,this._live=o,this._injector=a,this._breakpointObserver=c,this._parentSnackBar=v,this._defaultConfig=A,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=m5,this.snackBarContainerComponent=_5,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,o){return this._attach(e,o)}openFromTemplate(e,o){return this._attach(e,o)}open(e,o="",a){const c=Object.assign(Object.assign({},this._defaultConfig),a);return c.data={message:e,action:o},c.announcementMessage===e&&(c.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,c)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,o){const c=s.zs3.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:hA,useValue:o}]}),v=new Iw(this.snackBarContainerComponent,o.viewContainerRef,c),A=e.attach(v);return A.instance.snackBarConfig=o,A.instance}_attach(e,o){const a=Object.assign(Object.assign(Object.assign({},new hA),this._defaultConfig),o),c=this._createOverlay(a),v=this._attachSnackBarContainer(c,a),A=new hP(v,c);if(e instanceof s.Rgc){const z=new gv(e,null,{$implicit:a.data,snackBarRef:A});A.instance=v.attachTemplatePortal(z)}else{const z=this._createInjector(a,A),$=new Iw(e,void 0,z),oe=v.attachComponentPortal($);A.instance=oe.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Zo(c.detachments())).subscribe(z=>{const $=c.overlayElement.classList;z.matches?$.add(this.handsetCssClass):$.remove(this.handsetCssClass)}),a.announcementMessage&&v._onAnnounce.subscribe(()=>{this._live.announce(a.announcementMessage,a.politeness)}),this._animateSnackBar(A,a),this._openedSnackBarRef=A,this._openedSnackBarRef}_animateSnackBar(e,o){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),o.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),o.duration&&o.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(o.duration))}_createOverlay(e){const o=new NS;o.direction=e.direction;let a=this._overlay.position().global();const c="rtl"===e.direction,v="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!c||"end"===e.horizontalPosition&&c,A=!v&&"center"!==e.horizontalPosition;return v?a.left("0"):A?a.right("0"):a.centerHorizontally(),"top"===e.verticalPosition?a.top("0"):a.bottom("0"),o.positionStrategy=a,this._overlay.create(o)}_createInjector(e,o){return s.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:hP,useValue:o},{provide:yN,useValue:e.data}]})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Ud),s.LFG(lx),s.LFG(s.zs3),s.LFG(X2),s.LFG(t,12),s.LFG(bN))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(Ud),(0,s.LFG)(lx),(0,s.LFG)(s.gxx),(0,s.LFG)(X2),(0,s.LFG)(t,12),(0,s.LFG)(bN))},token:t,providedIn:vN}),t})();function v5(t,i){1&t&&(s.TgZ(0,"div",17),s._uU(1," Email Address is not registered. "),s.qZA())}function b5(t,i){1&t&&s._UZ(0,"i",20)}function x5(t,i){1&t&&s._UZ(0,"i",21)}function w5(t,i){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,b5,1,0,"i",18),s.YNc(2,x5,1,0,"i",19),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.fp.errors.required),s.xp6(1),s.Q6J("ngIf",e.fp.errors.email)}}let C5=(()=>{class t{constructor(e,o,a,c){this.fb=e,this.service=o,this._snackBar=a,this.router=c,this.form2=this.fb.group({fpassword:["",[us.required,us.email]]})}ngOnInit(){}get fp(){return this.form2.get("fpassword")}forgotPassword(){var e=this;return bo(function*(){let o=yield e.service.forgotPassword(e.form2.get("fpassword").value);1==o?(e.form2.setErrors({notfound:!1}),e._snackBar.open("Forgot Password Email Successfully!","Close",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"}),setTimeout(()=>{e.router.navigateByUrl("")},4e3)):0==o&&e.form2.setErrors({notfound:!0})})()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Qk),s.Y36(zd),s.Y36(xN),s.Y36(Lo))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-forgotpassword-page"]],decls:26,vars:4,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"forgotpassword"],["class","alert alert-danger",4,"ngIf"],["action","",3,"formGroup"],[1,"error"],["type","email","placeholder","Email Address","required","","formControlName","fpassword"],[4,"ngIf"],[3,"disabled","click"],[1,"special"],["routerLink","/","href",""],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"alert","alert-danger"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Please enter your email address.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Formatting of email address is invalid.",4,"ngIf"],["id","tooltip","data-tooltip","Please enter your email address.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","Formatting of email address is invalid.",1,"fas","fa-exclamation-triangle"]],template:function(e,o){1&e&&(s._UZ(0,"link",0),s._UZ(1,"link",1),s._UZ(2,"link",2),s.TgZ(3,"body"),s.TgZ(4,"div",3),s.TgZ(5,"div",4),s._UZ(6,"img",5),s.TgZ(7,"h1"),s._uU(8," UMP Supply Chain "),s._UZ(9,"br"),s._uU(10," Management System "),s.qZA(),s.qZA(),s.TgZ(11,"div",6),s.TgZ(12,"h3"),s._uU(13,"Forgot Password?"),s.qZA(),s.YNc(14,v5,2,0,"div",7),s.TgZ(15,"form",8),s.TgZ(16,"div",9),s._UZ(17,"input",10),s.YNc(18,w5,3,2,"div",11),s.qZA(),s.TgZ(19,"button",12),s.NdJ("click",function(){return o.forgotPassword()}),s._uU(20," Reset Password "),s.qZA(),s.TgZ(21,"div",13),s.TgZ(22,"a",14),s._uU(23,"Back to Login?"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.O4$(),s.TgZ(24,"svg",15),s._UZ(25,"path",16),s.qZA(),s.qZA()),2&e&&(s.xp6(14),s.Q6J("ngIf",1==(null==o.form2.errors?null:o.form2.errors.notfound)),s.xp6(1),s.Q6J("formGroup",o.form2),s.xp6(3),s.Q6J("ngIf",o.fp.touched&&o.fp.invalid),s.xp6(1),s.Q6J("disabled",o.form2.invalid))},directives:[Xt,ZS,VS,w_,wx,Lw,bv,Fw,gp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.forgotpassword[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999}h3[_ngcontent-%COMP%]{margin-left:.6rem}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;position:relative;margin-left:4.8rem}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center;margin-top:-1rem}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 25px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:2rem;top:-2rem;left:-2.5rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999}.login[_ngcontent-%COMP%]{margin-top:10px}.title[_ngcontent-%COMP%]{margin-top:100px}.special[_ngcontent-%COMP%]{margin-left:1rem}}']}),t})();function S5(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",22),s._uU(1," Please verify your email address. "),s.TgZ(2,"a",23),s.NdJ("click",function(){return s.CHM(e),s.oxw().sendVerifyEmail()}),s._uU(3," Click"),s.qZA(),s._uU(4," Here to send the verification email again. "),s.qZA()}}function E5(t,i){1&t&&(s.TgZ(0,"div",22),s._uU(1," Your password is invalid. "),s.qZA())}function T5(t,i){1&t&&(s.TgZ(0,"div",22),s._uU(1," Your email address is not registered. "),s.qZA())}function M5(t,i){1&t&&s._UZ(0,"i",26)}function k5(t,i){1&t&&s._UZ(0,"i",27)}function A5(t,i){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,M5,1,0,"i",24),s.YNc(2,k5,1,0,"i",25),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.emailaddress.errors.required),s.xp6(1),s.Q6J("ngIf",e.emailaddress.errors.email)}}function D5(t,i){1&t&&s._UZ(0,"i",29)}function I5(t,i){if(1&t&&(s.TgZ(0,"div",9),s.YNc(1,D5,1,0,"i",28),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.getpassword.errors.required)}}const P5=function(t,i){return{"fa-eye":t,"fa-eye-slash":i}};let R5=(()=>{class t{constructor(e,o){this.fb=e,this.service=o,this.email="",this.password="",this.errMessage="",this.visibility=!0,this.form=e.group({email:["",[us.required,us.email]],password:["",[us.required]]})}ngOnInit(){}example(e){return(0,Xn.of)(e)}onVisible(){this.visibility=!this.visibility}login(){var e=this;return bo(function*(){console.log(e.form),yield e.service.login(e.form.value.email,e.form.value.password),!1===e.service.emailVerified?e.form.setErrors({emailVerify:!0,wrongpassword:!1,notregister:!1}):!1===e.service.passwordVerified?(console.log("wrong password ts"),e.form.setErrors({wrongpassword:!0,notregister:!1})):!1===e.service.userVerified&&e.form.setErrors({notregister:!0,wrongpassword:!1})})()}sendVerifyEmail(){this.service.verificationemail()}get emailaddress(){return this.form.get("email")}get getpassword(){return this.form.get("password")}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Qk),s.Y36(zd))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-home-page"]],decls:34,vars:13,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"login"],[3,"formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"error"],["type","email","name","email","formControlName","email","placeholder","Email Address","required","",1,"icon-email",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"visible"],["name","password","placeholder","Password","formControlName","password","required","",1,"icon-password",3,"type"],[1,"far",3,"ngClass","click"],["class","error",4,"ngIf"],[1,"special"],["routerLink","/register",1,"new-user"],["routerLink","/forgotpassword",1,"forgot-password"],[3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"alert","alert-danger"],[1,"link",3,"click"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip"," Email Address is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","  Formatting of Email Address\n            is incorrect.",4,"ngIf"],["id","tooltip","data-tooltip"," Email Address is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","  Formatting of Email Address\n            is incorrect.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Password is required.",4,"ngIf"],["id","tooltip2","data-tooltip"," Password is required.",1,"fas","fa-exclamation-triangle"]],template:function(e,o){1&e&&(s._UZ(0,"link",0),s._UZ(1,"link",1),s._UZ(2,"link",2),s.TgZ(3,"body"),s.TgZ(4,"div",3),s.TgZ(5,"div",4),s._UZ(6,"img",5),s.TgZ(7,"h1"),s._uU(8," UMP Supply Chain "),s._UZ(9,"br"),s._uU(10," Management System "),s.qZA(),s.qZA(),s.TgZ(11,"div",6),s.TgZ(12,"h3"),s._uU(13,"User Login"),s.qZA(),s.TgZ(14,"form",7),s.YNc(15,S5,5,0,"div",8),s.YNc(16,E5,2,0,"div",8),s.YNc(17,T5,2,0,"div",8),s.TgZ(18,"div",9),s.TgZ(19,"input",10),s.NdJ("ngModelChange",function(c){return o.email=c}),s.qZA(),s.YNc(20,A5,3,2,"div",11),s.qZA(),s.TgZ(21,"div",12),s._UZ(22,"input",13),s.TgZ(23,"i",14),s.NdJ("click",function(){return o.onVisible()}),s.qZA(),s.qZA(),s.YNc(24,I5,2,1,"div",15),s.TgZ(25,"div",16),s.TgZ(26,"a",17),s._uU(27,"New User? Create one!"),s.qZA(),s.TgZ(28,"a",18),s._uU(29,"Forgot Password?"),s.qZA(),s.qZA(),s.TgZ(30,"button",19),s.NdJ("click",function(){return o.login()}),s._uU(31,"Login"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.O4$(),s.TgZ(32,"svg",20),s._UZ(33,"path",21),s.qZA(),s.qZA()),2&e&&(s.xp6(14),s.Q6J("formGroup",o.form),s.xp6(1),s.Q6J("ngIf",null==o.form.error?null:o.form.error.emailVerify),s.xp6(1),s.Q6J("ngIf",1==(null==o.form.errors?null:o.form.errors.wrongpassword)),s.xp6(1),s.Q6J("ngIf",1==(null==o.form.errors?null:o.form.errors.notregister)),s.xp6(2),s.Q6J("ngModel",o.email),s.xp6(1),s.Q6J("ngIf",o.emailaddress.invalid&&o.emailaddress.touched),s.xp6(2),s.Q6J("type",o.visibility?"password":"text"),s.xp6(1),s.Q6J("ngClass",s.WLB(10,P5,!o.visibility,o.visibility)),s.xp6(1),s.Q6J("ngIf",o.getpassword.touched&&o.getpassword.invalid),s.xp6(6),s.Q6J("disabled",o.form.invalid))},directives:[ZS,VS,w_,Xt,wx,bv,Fw,Lw,ne,gp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.alert.alert-danger[_ngcontent-%COMP%]{text-align:justify}.login[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;margin-left:10%;position:relative}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px auto}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.visible[_ngcontent-%COMP%]{position:relative}.far.fa-eye[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.far.fa-eye-slash[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}.link[_ngcontent-%COMP%]{color:red;text-decoration:underline;margin:0}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 1rem 2px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}p[_ngcontent-%COMP%]{font-size:12px;height:1px;margin-top:-10px;color:red}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:red;transition:.3s all ease-in-out}#tooltip2[_ngcontent-%COMP%]{position:absolute;right:1.4rem;margin-right:10px;bottom:1.2rem;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}#tooltip2[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:1rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999}.login[_ngcontent-%COMP%]{margin-top:10px}.title[_ngcontent-%COMP%]{margin-top:100px}}']}),t})();class dP{constructor(){}static passwordVerification(i){let e=i.get("rpassword"),o=i.get("rconfirmpassword");return(null==e?void 0:e.value)!==(null==o?void 0:o.value)?{passwordVerification:!0}:null}static checkRole(i){return"Role"===i.value?(console.log("Role"),{checkRole:!0}):null}static checkGender(i){return"Gender"===i.value?(console.log("Gender"),{gender:!0}):null}static checkMatricCard(i){return"Matric Card Number"===i.value?(console.log("Matric Card Number"),{checkMatrixCard:!0}):null}static checkCompanyName(i){return"Company Name"===i.value?(console.log("Matrix Card"),{checkMatrixCard:!0}):null}}let O5=(()=>{class t{constructor(e){this.el=e}onBlur(){this.el.nativeElement.value=this.el.nativeElement.value.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","appRegisterD",""]],hostBindings:function(e,o){1&e&&s.NdJ("blur",function(){return o.onBlur()})}}),t})();function F5(t,i){1&t&&s._UZ(0,"i",34)}function L5(t,i){1&t&&s._UZ(0,"i",35)}function N5(t,i){if(1&t&&(s.TgZ(0,"div",31),s.YNc(1,F5,1,0,"i",32),s.YNc(2,L5,1,0,"i",33),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.e.errors.required),s.xp6(1),s.Q6J("ngIf",e.e.errors.email)}}function B5(t,i){1&t&&(s.TgZ(0,"div",36),s._uU(1," Email Address is existed. "),s.qZA())}function z5(t,i){1&t&&s._UZ(0,"i",39)}function V5(t,i){1&t&&s._UZ(0,"i",40)}function U5(t,i){if(1&t&&(s.TgZ(0,"div",31),s.YNc(1,z5,1,0,"i",37),s.YNc(2,V5,1,0,"i",38),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.p.errors.required),s.xp6(1),s.Q6J("ngIf",e.p.errors.minlength)}}function H5(t,i){1&t&&s._UZ(0,"i",39)}function G5(t,i){if(1&t&&(s.TgZ(0,"div",31),s.YNc(1,H5,1,0,"i",37),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.cp.errors.required)}}function j5(t,i){1&t&&(s.TgZ(0,"div",31),s._UZ(1,"i",41),s.qZA())}function Y5(t,i){1&t&&s._UZ(0,"i",43)}function q5(t,i){if(1&t&&(s.TgZ(0,"div",31),s.YNc(1,Y5,1,0,"i",42),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.name.errors.required)}}function Z5(t,i){1&t&&s._UZ(0,"i",45)}function W5(t,i){if(1&t&&(s.TgZ(0,"div",31),s.YNc(1,Z5,1,0,"i",44),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.pn.errors.required)}}function $5(t,i){1&t&&(s.TgZ(0,"div",36),s._uU(1," Date of Birth is required. "),s.qZA())}function X5(t,i){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,$5,2,0,"div",10),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.d.errors.required)}}function Q5(t,i){1&t&&(s.TgZ(0,"div",36),s._uU(1," Gender is required. "),s.qZA())}function J5(t,i){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,Q5,2,0,"div",10),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.g.errors.required)}}function K5(t,i){1&t&&s._UZ(0,"i",47)}function eG(t,i){if(1&t&&(s.TgZ(0,"div",31),s.YNc(1,K5,1,0,"i",46),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.r.errors.role)}}function tG(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"input",48),s.NdJ("change",function(a){return s.CHM(e),s.oxw().checkEmpty(a)}),s.qZA()}}function nG(t,i){1&t&&s._UZ(0,"i",50)}function iG(t,i){if(1&t&&(s.TgZ(0,"div",31),s.YNc(1,nG,1,0,"i",49),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.matrix.errors.role)}}function rG(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"input",51),s.NdJ("change",function(a){return s.CHM(e),s.oxw().checkEmpty(a)}),s.qZA()}}const wN=function(t,i){return{"fa-eye":t,"fa-eye-slash":i}};let oG=(()=>{class t{constructor(e,o,a,c,v,A){this.fb=e,this.auth=o,this.firestore=a,this.service=c,this._snackBar=v,this.router=A,this.visibility=!0,this.triggedMessage=!0,this.student=!1,this.supplier=!1,this.form1=e.group({remail:["",[us.required,us.email]],rpassword:["",[us.required,us.minLength]],rconfirmpassword:["",[us.required]],name:["",[us.required]],phonenumber:["",us.required],date:["",us.required],role:["Role",[us.required,dP.checkRole]],gender:["Gender",[us.required,dP.checkGender]],matrix:[""],comp:[""]},{validator:dP.passwordVerification})}ngOnInit(){}onVisible(){this.visibility=!this.visibility}getRole(e){this.role=e.target.value,1==this.role?(this.student=!0,this.supplier=!1):2==this.role?(this.supplier=!0,this.student=!1):"Role"==this.role&&(this.student=!1,this.supplier=!1),console.log(this.role)}checkform(e){console.log(e);for(let o in this.form1.controls)this.form1.controls[o].errors&&console.log(o)}checkEmpty(e){console.log(e.target.value.length),0==e.target.value.length?this.form1.setErrors({matrixError:!0}):e.target.value.length>0&&this.form1.setErrors(null)}getDate(e){this.date=e.target.value}getGender(e){this.gender=e.target.value}get cp(){return this.form1.get("rconfirmpassword")}get p(){return this.form1.get("rpassword")}get e(){return this.form1.get("remail")}get name(){return this.form1.get("name")}get pn(){return this.form1.get("phonenumber")}get d(){return this.form1.get("date")}get g(){return this.form1.get("gender")}get r(){return this.form1.get("role")}get matrix(){return this.form1.get("matrix")}get comp(){return this.form1.get("comp")}submit(){var e=this;return bo(function*(){var o,a,c,v,A,z,$,oe,fe;yield e.service.checkExistedEmail(null===(o=e.form1.get("remail"))||void 0===o?void 0:o.value),console.log(e.service.emailExistedStatus);let ke=yield e.service.register(null===(a=e.form1.get("remail"))||void 0===a?void 0:a.value,e.form1.get("rpassword").value,null===(c=e.form1.get("role"))||void 0===c?void 0:c.value,null===(v=e.form1.get("name"))||void 0===v?void 0:v.value,null===(A=e.form1.get("date"))||void 0===A?void 0:A.value,null===(z=e.form1.get("phonenumber"))||void 0===z?void 0:z.value,null===($=e.form1.get("gender"))||void 0===$?void 0:$.value,null===(oe=e.form1.get("matrix"))||void 0===oe?void 0:oe.value,null===(fe=e.form1.get("comp"))||void 0===fe?void 0:fe.value);1==ke?(e.form1.setErrors({emailExist:!0}),console.log(e.form1)):e.form1.setErrors({emailExist:!1}),!0===ke.validate?(e._snackBar.open("Register Successfully!","Close",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"}),setTimeout(()=>{e.router.navigateByUrl("")},4e3)):e._snackBar.open("Please try again!","Close",{duration:3e3,verticalPosition:"top"})})()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Qk),s.Y36(Zn),s.Y36(_u),s.Y36(zd),s.Y36(xN),s.Y36(Lo))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-register-page"]],decls:59,vars:25,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap","rel","stylesheet"],[1,"container"],[1,"title"],["src","https://i.ibb.co/v1fQ3JN/Whats-App-Image-2021-08-20-at-11-40-42-AM.jpg","alt",""],[1,"registration"],[3,"formGroup","change"],["type","text","placeholder","Email Address","formControlName","remail","required","",1,"icon-email"],["class","error",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"visible"],["name","rpassword","placeholder","Password","required","","formControlName","rpassword","minlength","6",1,"i",3,"type"],[1,"far",3,"ngClass","click"],["name","rconfirmpassword","placeholder","Confirm Password","required","","formControlName","rconfirmpassword",1,"i",3,"type"],["type","text","name","","placeholder","Name","formControlName","name","required","","appRegisterD","",1,"i"],["type","text","placeholder","Phone Number","formControlName","phonenumber","required","",1,"i"],["type","date","placeholder","Date","formControlName","date","required","",1,"i",3,"change"],[4,"ngIf"],["aria-label","Default select example","formControlName","gender","required","",1,"form-select",3,"change"],["selected",""],["value","1"],["value","2"],["aria-label","Default select example","required","","formControlName","role",1,"form-select","mt-2",3,"change"],["type","text","placeholder","Matrix Card Number","formControlName","matrix","class","i",3,"change",4,"ngIf"],["type","text","placeholder","Company Name","formControlName","comp","class","i",3,"change",4,"ngIf"],[1,"special"],["routerLink","/",1,"new-user"],[3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#f3f4f5","fill-opacity","1","d","M0,160L40,186.7C80,213,160,267,240,250.7C320,235,400,149,480,101.3C560,53,640,43,720,69.3C800,96,880,160,960,165.3C1040,171,1120,117,1200,85.3C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"error"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Email Address is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Formatting of Email Address is invalid.",4,"ngIf"],["id","tooltip","data-tooltip","Email Address is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip","data-tooltip","Formatting of Email Address is invalid.",1,"fas","fa-exclamation-triangle"],[1,"alert","alert-danger"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Password is required.",4,"ngIf"],["class","fas fa-exclamation-triangle","id","tooltip2","data-tooltip"," Minimum Length must be at least mixed of 6 characters.",4,"ngIf"],["id","tooltip2","data-tooltip"," Password is required.",1,"fas","fa-exclamation-triangle"],["id","tooltip2","data-tooltip"," Minimum Length must be at least mixed of 6 characters.",1,"fas","fa-exclamation-triangle"],["id","tooltip2","data-tooltip"," Password is not matched.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Name is required.",4,"ngIf"],["id","tooltip","data-tooltip","Name is required.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Phone Number is required.",4,"ngIf"],["id","tooltip","data-tooltip","Phone Number is required.",1,"fas","fa-exclamation-triangle"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Role is required.",4,"ngIf"],["id","tooltip","data-tooltip","Role is required.",1,"fas","fa-exclamation-triangle"],["type","text","placeholder","Matrix Card Number","formControlName","matrix",1,"i",3,"change"],["class","fas fa-exclamation-triangle","id","tooltip","data-tooltip","Matrix Card is required.",4,"ngIf"],["id","tooltip","data-tooltip","Matrix Card is required.",1,"fas","fa-exclamation-triangle"],["type","text","placeholder","Company Name","formControlName","comp",1,"i",3,"change"]],template:function(e,o){1&e&&(s._UZ(0,"link",0),s._UZ(1,"link",1),s._UZ(2,"link",2),s.TgZ(3,"body"),s.TgZ(4,"div",3),s.TgZ(5,"div",4),s._UZ(6,"img",5),s.TgZ(7,"h1"),s._uU(8," UMP Supply Chain "),s._UZ(9,"br"),s._uU(10," Management System "),s.qZA(),s.qZA(),s.TgZ(11,"div",6),s.TgZ(12,"h3"),s._uU(13,"Sign Up "),s.qZA(),s.TgZ(14,"form",7),s.NdJ("change",function(){return o.checkform(o.form1)}),s._UZ(15,"input",8),s.YNc(16,N5,3,2,"div",9),s.YNc(17,B5,2,0,"div",10),s.TgZ(18,"div",11),s._UZ(19,"input",12),s.TgZ(20,"i",13),s.NdJ("click",function(){return o.onVisible()}),s.qZA(),s.qZA(),s.YNc(21,U5,3,2,"div",9),s.TgZ(22,"div",11),s._UZ(23,"input",14),s.TgZ(24,"i",13),s.NdJ("click",function(){return o.onVisible()}),s.qZA(),s.qZA(),s.YNc(25,G5,2,1,"div",9),s.YNc(26,j5,2,0,"div",9),s._UZ(27,"input",15),s.YNc(28,q5,2,1,"div",9),s._UZ(29,"input",16),s.YNc(30,W5,2,1,"div",9),s.TgZ(31,"input",17),s.NdJ("change",function(c){return o.getDate(c)}),s.qZA(),s.YNc(32,X5,2,1,"div",18),s.TgZ(33,"select",19),s.NdJ("change",function(c){return o.getGender(c)}),s.TgZ(34,"option",20),s._uU(35,"Gender"),s.qZA(),s.TgZ(36,"option",21),s._uU(37,"Male"),s.qZA(),s.TgZ(38,"option",22),s._uU(39,"Female"),s.qZA(),s.qZA(),s.YNc(40,J5,2,1,"div",18),s.TgZ(41,"select",23),s.NdJ("change",function(c){return o.getRole(c)}),s.TgZ(42,"option"),s._uU(43,"Role"),s.qZA(),s.TgZ(44,"option",21),s._uU(45,"Student"),s.qZA(),s.TgZ(46,"option",22),s._uU(47,"Supplier"),s.qZA(),s.qZA(),s.YNc(48,eG,2,1,"div",9),s.YNc(49,tG,1,0,"input",24),s.YNc(50,iG,2,1,"div",9),s.YNc(51,rG,1,0,"input",25),s.TgZ(52,"div",26),s.TgZ(53,"a",27),s._uU(54,"Already Registered? Login Now!"),s.qZA(),s.qZA(),s.TgZ(55,"button",28),s.NdJ("click",function(){return o.submit()}),s._uU(56,"Sign Up"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.O4$(),s.TgZ(57,"svg",29),s._UZ(58,"path",30),s.qZA(),s.qZA()),2&e&&(s.xp6(14),s.Q6J("formGroup",o.form1),s.xp6(2),s.Q6J("ngIf",o.e.touched&&o.e.invalid),s.xp6(1),s.Q6J("ngIf",null==o.form1.errors?null:o.form1.errors.emailExist),s.xp6(2),s.Q6J("type",o.visibility?"password":"text"),s.xp6(1),s.Q6J("ngClass",s.WLB(19,wN,!o.visibility,o.visibility)),s.xp6(1),s.Q6J("ngIf",o.p.touched&&o.p.invalid),s.xp6(2),s.Q6J("type",o.visibility?"password":"text"),s.xp6(1),s.Q6J("ngClass",s.WLB(22,wN,!o.visibility,o.visibility)),s.xp6(1),s.Q6J("ngIf",o.cp.touched&&o.cp.invalid),s.xp6(1),s.Q6J("ngIf",(null==o.form1.errors?null:o.form1.errors.passwordVerification)&&o.cp.valid&&o.p.valid),s.xp6(2),s.Q6J("ngIf",o.name.touched&&o.name.invalid),s.xp6(2),s.Q6J("ngIf",o.pn.touched&&o.pn.invalid),s.xp6(2),s.Q6J("ngIf",o.d.touched&&o.d.invalid),s.xp6(8),s.Q6J("ngIf",o.g.touched&&o.g.invalid),s.xp6(8),s.Q6J("ngIf",o.r.touched&&o.r.invalid),s.xp6(1),s.Q6J("ngIf",1==o.student),s.xp6(1),s.Q6J("ngIf",o.matrix.touched&&o.matrix.invalid),s.xp6(1),s.Q6J("ngIf",1==o.supplier),s.xp6(4),s.Q6J("disabled",o.form1.invalid))},directives:[ZS,VS,w_,wx,bv,Fw,Lw,Xt,$2,ne,O5,$k,AL,IL,gp],styles:['body[_ngcontent-%COMP%]{background-color:#7395ae;font-family:"Sora",sans-serif}.container[_ngcontent-%COMP%]{height:100vh;display:flex;color:#fff;justify-content:space-around;align-items:center;flex-grow:0;z-index:999}.registration[_ngcontent-%COMP%]{background:#b1a296;padding:20px 40px 20px 20px;margin-left:5%;margin-right:5%;flex-grow:0;border-radius:4px;box-shadow:11px 11px 3px -4px #5d5c61bf;-webkit-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);-moz-box-shadow:11px 11px 3px -4px rgba(93,92,97,.75);z-index:999;width:400px}.vl[_ngcontent-%COMP%]{height:300px;border-left:1px solid grey;position:absolute;left:50%}.title[_ngcontent-%COMP%]{text-shadow:4px 4px 2px #5d5c61;z-index:999;position:relative;padding-left:8rem}img[_ngcontent-%COMP%]{position:absolute;left:-12rem;border-radius:50%;top:-2.5rem;z-index:-999}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{content:"";display:block;border:1px solid white}img[_ngcontent-%COMP%]{position:absolute;left:-4rem;border-radius:50%;top:-2.5rem;z-index:-999}input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;border-radius:4px!important;border:none;margin:10px auto}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #159ce466}.special[_ngcontent-%COMP%]{font-size:12px;display:flex;justify-content:space-around;align-items:center;padding-top:10px}.new-user[_ngcontent-%COMP%]{margin-right:10px}.forgot-password[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#505055}a[_ngcontent-%COMP%]{margin:2px 15px 10px;color:#fff;text-decoration:none}button[_ngcontent-%COMP%]{display:block;margin:10px 10px 25px 2.5px;padding:10px;width:100%;border-radius:4px;border:none;background-color:#5d5c61;color:#fff;transition:all .2s ease-in}button[_ngcontent-%COMP%]:hover{background:#505055}button[_ngcontent-%COMP%]:disabled{background:grey}svg[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:22}.error[_ngcontent-%COMP%]{position:relative}#tooltip[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:-2.25rem;color:red;transition:.3s all ease-in-out}#tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}.visible[_ngcontent-%COMP%]{position:relative}.far.fa-eye[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}.far.fa-eye-slash[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:10px;top:30%;color:#000}#tooltip2[_ngcontent-%COMP%]{position:absolute;right:1.4rem;margin-right:10px;bottom:1.2rem;color:red;transition:.3s all ease-in-out}#tooltip2[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);display:block;position:absolute;right:0;z-index:999;background-color:#fc7676cc;margin-top:-3rem;width:-webkit-max-content;width:max-content;height:auto;color:#fff;padding:10px}@media (max-width: 420px){.container[_ngcontent-%COMP%]{height:100%;display:flex;color:#fff;justify-content:center;align-content:center;flex-grow:0;flex-wrap:wrap;z-index:999}h1[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{right:4rem;top:-2rem}img[_ngcontent-%COMP%]{position:absolute;left:3.5rem;top:-12rem;z-index:-999;display:none}.registration[_ngcontent-%COMP%]{margin-top:-1.5rem}.title[_ngcontent-%COMP%]{margin-top:100px}}.i.ng-pristine.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}']}),t})(),sG=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-student-home-page"]],decls:2,vars:0,template:function(e,o){1&e&&(s.TgZ(0,"p"),s._uU(1,"student-home-page works!"),s.qZA())},styles:[""]}),t})();function aG(t,i){1&t&&(s.TgZ(0,"div",8),s._UZ(1,"mat-progress-bar",9),s.qZA())}let lG=(()=>{class t{constructor(e,o,a){this.asS=e,this.fb=o,this.fs=a,this.form=this.fb.group({name:[""],email:[""],phone:[""]}),this.getInfo()}ngOnInit(){}update(){this.asS.updateInfo(this.form.get("name").value,this.form.get("email").value,this.form.get("phone").value)}getInfo(){var e=this;return bo(function*(){e.data=yield e.asS.getAdminInfo()})()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(lA),s.Y36(Qk),s.Y36(_u))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-profile-page"]],decls:22,vars:11,consts:[["class","loader-container",4,"ngIf"],[1,"form"],["action","",3,"formGroup"],["appearance","standard","id",""],["matInput","","formControlName","name",3,"ngModel","value"],["matInput","","formControlName","email",3,"ngModel","value"],["matInput","","formControlName","phone",3,"ngModel","value"],["mat-raised-button","","routerLink","/adminprofile",3,"click"],[1,"loader-container"],["mode","indeterminate"]],template:function(e,o){1&e&&(s.TgZ(0,"body"),s._UZ(1,"app-adminnavbarpage"),s.YNc(2,aG,2,0,"div",0),s.ALo(3,"async"),s.TgZ(4,"div",1),s.TgZ(5,"form",2),s.TgZ(6,"h5"),s._uU(7),s.qZA(),s.TgZ(8,"mat-form-field",3),s.TgZ(9,"mat-label"),s._uU(10,"Name"),s.qZA(),s._UZ(11,"input",4),s.qZA(),s.TgZ(12,"mat-form-field",3),s.TgZ(13,"mat-label"),s._uU(14,"Email"),s.qZA(),s._UZ(15,"input",5),s.qZA(),s.TgZ(16,"mat-form-field",3),s.TgZ(17,"mat-label"),s._uU(18,"Phone"),s.qZA(),s._UZ(19,"input",6),s.qZA(),s.TgZ(20,"button",7),s.NdJ("click",function(){return o.update()}),s._uU(21,"Update"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",s.lcZ(3,9,o.asS.isLoading)),s.xp6(3),s.Q6J("formGroup",o.form),s.xp6(2),s.hij("Profile - ",null==o.asS.name?null:o.asS.name.username,""),s.xp6(4),s.s9C("value",null==o.asS.name?null:o.asS.name.username),s.Q6J("ngModel",null==o.asS.name?null:o.asS.name.username),s.xp6(4),s.s9C("value",null==o.asS.name?null:o.asS.name.email),s.Q6J("ngModel",null==o.asS.name?null:o.asS.name.email),s.xp6(4),s.s9C("value",null==o.asS.name?null:o.asS.name.phone),s.Q6J("ngModel",null==o.asS.name?null:o.asS.name.phone))},directives:[Ym,Xt,ZS,VS,w_,Pw,bx,oE,wx,bv,Fw,mv,ff,uP],pipes:[hl],styles:["body[_ngcontent-%COMP%]{width:100vw;background-color:#f5f5f5;height:100vh;color:#000}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#c0ad91;width:30%;margin:50px auto auto;padding:10px}mat-form-field[_ngcontent-%COMP%]{width:300px}"]}),t})();function cG(t,i){1&t&&(s.TgZ(0,"th",19),s._uU(1,"Name"),s.qZA())}function uG(t,i){if(1&t&&(s.TgZ(0,"td",20),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.brand)}}function hG(t,i){1&t&&(s.TgZ(0,"th",19),s._uU(1,"Name"),s.qZA()),2&t&&s.Udp("width","30%")}function dG(t,i){if(1&t&&(s.TgZ(0,"td",20),s.TgZ(1,"b"),s._uU(2),s.qZA(),s._UZ(3,"br"),s._uU(4),s.qZA()),2&t){const e=i.$implicit;s.xp6(2),s.Oqu(e.company),s.xp6(2),s.hij("",e.brand," ")}}function pG(t,i){1&t&&(s.TgZ(0,"th",19),s._uU(1,"Quantity"),s.qZA())}function fG(t,i){if(1&t&&(s.TgZ(0,"td",20),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.quantity)}}function mG(t,i){1&t&&(s.TgZ(0,"th",19),s._uU(1,"Total Price"),s.qZA())}function gG(t,i){if(1&t&&(s.TgZ(0,"td",20),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.hij("RM ",e.totalprice,"")}}function _G(t,i){1&t&&(s.TgZ(0,"th",19),s._uU(1,"Action"),s.qZA())}function yG(t,i){1&t&&(s.TgZ(0,"td",20),s.TgZ(1,"button",21),s._uU(2,"View Details"),s.qZA(),s.TgZ(3,"button",21),s._uU(4,"Buy Again"),s.qZA(),s.qZA())}function vG(t,i){1&t&&s._UZ(0,"tr",22)}function bG(t,i){1&t&&s._UZ(0,"tr",23)}function xG(t,i){if(1&t&&(s.TgZ(0,"tr",24),s.TgZ(1,"td",25),s._uU(2),s.qZA(),s.qZA()),2&t){s.oxw();const e=s.MAs(10);s.xp6(2),s.hij(' No data matching the filter "',e.value,'" ')}}const wG=function(){return[5,10,25,100]};let CG=(()=>{class t{constructor(e,o,a,c){this.fs=e,this.fa=o,this.route=a,this.adminAuthService=c,this.displayedColumns=["company","quantity","totalprice","action"],this.data=[],this.route.paramMap.subscribe(v=>{console.log(v.get("id")),this.category=v.get("id")||""}),this.fa.authState.subscribe(v=>{this.uid=null==v?void 0:v.uid,this.fs.collection("Admin").doc(this.uid).collection("inventory").doc(this.category).collection("purchasehistory").snapshotChanges().subscribe(z=>{console.log(z),this.data=[],z.map($=>{let oe={company:$.payload.doc.id,totalprice:$.payload.doc.data().totalprice,quantity:$.payload.doc.data().quantity,brand:$.payload.doc.data().brand};this.data.push(oe),this.dataSource=new Cx(this.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,console.log(this.data)})})})}ngOnInit(){}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(_u),s.Y36(Zn),s.Y36(Pa),s.Y36(lA))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-pur-chase-history-page"]],viewQuery:function(e,o){if(1&e&&(s.Gf(wv,5),s.Gf(x_,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.paginator=a.first),s.iGM(a=s.CRH())&&(o.sort=a.first)}},decls:32,vars:8,consts:[[1,"title"],["appearance","standard"],[1,"fas","fa-search"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","brand"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","company"],["mat-header-cell","","mat-sort-header","",3,"width",4,"matHeaderCellDef"],["matColumnDef","quantity"],["matColumnDef","totalprice"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(s.TgZ(0,"body"),s._UZ(1,"app-adminnavbarpage"),s.TgZ(2,"h4"),s._uU(3),s.qZA(),s.TgZ(4,"div",0),s.TgZ(5,"mat-form-field",1),s.TgZ(6,"mat-label"),s._UZ(7,"i",2),s._uU(8," Search"),s.qZA(),s.TgZ(9,"input",3,4),s.NdJ("keyup",function(c){return o.applyFilter(c)}),s.qZA(),s.qZA(),s.TgZ(11,"div",5),s.TgZ(12,"table",6),s.ynx(13,7),s.YNc(14,cG,2,0,"th",8),s.YNc(15,uG,2,1,"td",9),s.ynx(16,10),s.YNc(17,hG,2,2,"th",11),s.YNc(18,dG,5,2,"td",9),s.BQk(),s.BQk(),s.ynx(19,12),s.YNc(20,pG,2,0,"th",8),s.YNc(21,fG,2,1,"td",9),s.BQk(),s.ynx(22,13),s.YNc(23,mG,2,0,"th",8),s.YNc(24,gG,2,1,"td",9),s.BQk(),s.ynx(25,14),s.YNc(26,_G,2,0,"th",8),s.YNc(27,yG,5,0,"td",9),s.BQk(),s.YNc(28,vG,1,0,"tr",15),s.YNc(29,bG,1,0,"tr",16),s.YNc(30,xG,3,1,"tr",17),s.qZA(),s._UZ(31,"mat-paginator",18),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.hij("Purchase History - ",o.category,""),s.xp6(9),s.Udp("width","100%"),s.Q6J("dataSource",o.dataSource),s.xp6(16),s.Q6J("matHeaderRowDef",o.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",o.displayedColumns),s.xp6(2),s.Q6J("pageSizeOptions",s.DdM(7,wG)))},directives:[Ym,Pw,bx,oE,JS,x_,jw,Gw,Hw,KS,eE,iE,wv,Yw,Ok,qw,mv,tE,nE],styles:["body[_ngcontent-%COMP%]{background:#f5f5f5;margin:0;padding:0}h4[_ngcontent-%COMP%]{margin:20px}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;width:80%;margin:3rem auto auto}mat-form-field[_ngcontent-%COMP%]{width:200px;align-self:flex-end}button[_ngcontent-%COMP%]{margin-right:5px}.mat-sort-header-content[_ngcontent-%COMP%]{justify-content:end}"]}),t})();var CN=nt(3098);function SN(t,i=Cl.P){const o=function(t){return t instanceof Date&&!isNaN(+t)}(t)?+t-i.now():Math.abs(t);return a=>a.lift(new EG(o,i))}class EG{constructor(i,e){this.delay=i,this.scheduler=e}call(i,e){return e.subscribe(new pP(i,this.delay,this.scheduler))}}class pP extends Xo.L{constructor(i,e,o){super(i),this.delay=e,this.scheduler=o,this.queue=[],this.active=!1,this.errored=!1}static dispatch(i){const e=i.source,o=e.queue,a=i.scheduler,c=i.destination;for(;o.length>0&&o[0].time-a.now()<=0;)o.shift().notification.observe(c);if(o.length>0){const v=Math.max(0,o[0].time-a.now());this.schedule(i,v)}else this.unsubscribe(),e.active=!1}_schedule(i){this.active=!0,this.destination.add(i.schedule(pP.dispatch,this.delay,{source:this,destination:this.destination,scheduler:i}))}scheduleNotification(i){if(!0===this.errored)return;const e=this.scheduler,o=new TG(e.now()+this.delay,i);this.queue.push(o),!1===this.active&&this._schedule(e)}_next(i){this.scheduleNotification(CN.P.createNext(i))}_error(i){this.errored=!0,this.queue=[],this.destination.error(i),this.unsubscribe()}_complete(){this.scheduleNotification(CN.P.createComplete()),this.unsubscribe()}}class TG{constructor(i,e){this.time=i,this.notification=e}}const MG=["mat-menu-item",""],EN=["*"];function kG(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",0),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw()._handleKeydown(a)})("click",function(){return s.CHM(e),s.oxw().closed.emit("click")})("@transformMenu.start",function(a){return s.CHM(e),s.oxw()._onAnimationStart(a)})("@transformMenu.done",function(a){return s.CHM(e),s.oxw()._onAnimationDone(a)}),s.TgZ(1,"div",1),s.Hsn(2),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),s.uIk("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const dA={transformMenu:ns("transformMenu",[co("void",Rn({opacity:0,transform:"scale(0.8)"})),ur("void => enter",dr("120ms cubic-bezier(0, 0, 0.2, 1)",Rn({opacity:1,transform:"scale(1)"}))),ur("* => void",dr("100ms 25ms linear",Rn({opacity:0})))]),fadeInItems:ns("fadeInItems",[co("showing",Rn({opacity:1})),ur("void => *",[Rn({opacity:0}),dr("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},TN=new s.OlP("MatMenuContent"),fP=new s.OlP("MAT_MENU_PANEL");class AG{}const DG=Ik(b_(AG));let pA=(()=>{class t extends DG{constructor(e,o,a,c){super(),this._elementRef=e,this._focusMonitor=a,this._parentMenu=c,this.role="menuitem",this._hovered=new Nn.xQ,this._focused=new Nn.xQ,this._highlighted=!1,this._triggersSubmenu=!1,c&&c.addItem&&c.addItem(this)}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e,o;const a=this._elementRef.nativeElement.cloneNode(!0),c=a.querySelectorAll("mat-icon, .material-icons");for(let v=0;v<c.length;v++){const A=c[v];null===(e=A.parentNode)||void 0===e||e.removeChild(A)}return(null===(o=a.textContent)||void 0===o?void 0:o.trim())||""}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(wt),s.Y36(nh),s.Y36(fP,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,o){1&e&&s.NdJ("click",function(c){return o._checkDisabled(c)})("mouseenter",function(){return o._handleMouseEnter()}),2&e&&(s.uIk("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled.toString())("disabled",o.disabled||null),s.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",o._highlighted)("mat-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[s.qOj],attrs:MG,ngContentSelectors:EN,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(e,o){1&e&&(s.F$t(),s.Hsn(0),s._UZ(1,"div",0)),2&e&&(s.xp6(1),s.Q6J("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()))},directives:[pv],encapsulation:2,changeDetection:0}),t})();const MN=new s.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let RG=0,lE=(()=>{class t{constructor(e,o,a){this._elementRef=e,this._ngZone=o,this._defaultOptions=a,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new s.n_E,this._tabSubscription=gs.w.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Nn.xQ,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new s.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+RG++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=br(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=br(e)}set panelClass(e){const o=this._previousPanelClass;o&&o.length&&o.split(" ").forEach(a=>{this._classList[a]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(a=>{this._classList[a]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new fS(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(ws(this._directDescendantItems),Rr(e=>(0,bs.T)(...e.map(o=>o._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(ws(this._directDescendantItems),Rr(o=>(0,bs.T)(...o.map(a=>a._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const o=e.keyCode,a=this._keyManager;switch(o){case 27:Na(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===o||40===o)&&a.setFocusOrigin("keyboard"),a.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(ue(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const o=this._keyManager;if(o.setFocusOrigin(e).setFirstItemActive(),!o.activeItem&&this._directDescendantItems.length){let a=this._directDescendantItems.first._getHostElement().parentElement;for(;a;){if("menu"===a.getAttribute("role")){a.focus();break}a=a.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const a=`mat-elevation-z${Math.min(4+e,24)}`,c=Object.keys(this._classList).find(v=>v.startsWith("mat-elevation-z"));(!c||c===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[a]=!0,this._previousElevation=a)}setPositionClasses(e=this.xPosition,o=this.yPosition){const a=this._classList;a["mat-menu-before"]="before"===e,a["mat-menu-after"]="after"===e,a["mat-menu-above"]="above"===o,a["mat-menu-below"]="below"===o}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(ws(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(o=>o._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(MN))},t.\u0275dir=s.lG2({type:t,contentQueries:function(e,o,a){if(1&e&&(s.Suo(a,TN,5),s.Suo(a,pA,5),s.Suo(a,pA,4)),2&e){let c;s.iGM(c=s.CRH())&&(o.lazyContent=c.first),s.iGM(c=s.CRH())&&(o._allItems=c),s.iGM(c=s.CRH())&&(o.items=c)}},viewQuery:function(e,o){if(1&e&&s.Gf(s.Rgc,5),2&e){let a;s.iGM(a=s.CRH())&&(o.templateRef=a.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),t})(),OG=(()=>{class t extends lE{constructor(e,o,a){super(e,o,a)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(MN))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,o){2&e&&s.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[s._Bn([{provide:fP,useExisting:t}]),s.qOj],ngContentSelectors:EN,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,o){1&e&&(s.F$t(),s.YNc(0,kG,3,6,"ng-template"))},directives:[ne],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[dA.transformMenu,dA.fadeInItems]},changeDetection:0}),t})();const kN=new s.OlP("mat-menu-scroll-strategy"),AN={provide:kN,deps:[Ud],useFactory:function(t){return()=>t.scrollStrategies.reposition()}},IN=fw({passive:!0});let LG=(()=>{class t{constructor(e,o,a,c,v,A,z,$){this._overlay=e,this._element=o,this._viewContainerRef=a,this._menuItemInstance=A,this._dir=z,this._focusMonitor=$,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=gs.w.EMPTY,this._hoverSubscription=gs.w.EMPTY,this._menuCloseSubscription=gs.w.EMPTY,this._handleTouchStart=oe=>{yS(oe)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new s.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new s.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=c,this._parentMaterialMenu=v instanceof lE?v:void 0,o.nativeElement.addEventListener("touchstart",this._handleTouchStart,IN),A&&(A._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(o=>{this._destroyMenu(o),("click"===o||"tab"===o)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(o)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,IN),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),o=e.getConfig();this._setPosition(o.positionStrategy),o.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof lE&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,o):this._element.nativeElement.focus(o)}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const o=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,o instanceof lE?(o._resetAnimation(),o.lazyContent?o._animationDone.pipe(w(a=>"void"===a.toState),ue(1),Zo(o.lazyContent._attached)).subscribe({next:()=>o.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),o.lazyContent&&o.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,o=this.menu.parentMenu;for(;o;)e++,o=o.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new NS({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(o=>{this.menu.setPositionClasses("start"===o.connectionPair.overlayX?"after":"before","top"===o.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[o,a]="before"===this.menu.xPosition?["end","start"]:["start","end"],[c,v]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[A,z]=[c,v],[$,oe]=[o,a],fe=0;this.triggersSubmenu()?(oe=o="before"===this.menu.xPosition?"start":"end",a=$="end"===o?"start":"end",fe="bottom"===c?8:-8):this.menu.overlapTrigger||(A="top"===c?"bottom":"top",z="top"===v?"bottom":"top"),e.withPositions([{originX:o,originY:A,overlayX:$,overlayY:c,offsetY:fe},{originX:a,originY:A,overlayX:oe,overlayY:c,offsetY:fe},{originX:o,originY:z,overlayX:$,overlayY:v,offsetY:-fe},{originX:a,originY:z,overlayX:oe,overlayY:v,offsetY:-fe}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),o=this._overlayRef.detachments(),a=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,Xn.of)(),c=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(w(v=>v!==this._menuItemInstance),w(()=>this._menuOpen)):(0,Xn.of)();return(0,bs.T)(e,a,c,o)}_handleMousedown(e){_S(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const o=e.keyCode;(13===o||32===o)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===o&&"ltr"===this.dir||37===o&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(w(e=>e===this._menuItemInstance&&!e.disabled),SN(0,PS.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof lE&&this.menu._isAnimating?this.menu._animationDone.pipe(ue(1),SN(0,PS.E),Zo(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new gv(this.menu.templateRef,this._viewContainerRef)),this._portal}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ud),s.Y36(s.SBq),s.Y36(s.s_b),s.Y36(kN),s.Y36(fP,8),s.Y36(pA,10),s.Y36(Qh,8),s.Y36(nh))},t.\u0275dir=s.lG2({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(e,o){1&e&&s.NdJ("mousedown",function(c){return o._handleMousedown(c)})("keydown",function(c){return o._handleKeydown(c)})("click",function(c){return o._handleClick(c)}),2&e&&s.uIk("aria-expanded",o.menuOpen||null)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),t})(),PN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[AN],imports:[Ir]}),t})(),NG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[AN],imports:[[Fi,Ir,IS,zS,PN],LS,Ir,PN]}),t})();var BG=nt(205);class RN{}class ON{}class T_{constructor(i){this.normalizedNames=new Map,this.lazyUpdate=null,i?this.lazyInit="string"==typeof i?()=>{this.headers=new Map,i.split("\n").forEach(e=>{const o=e.indexOf(":");if(o>0){const a=e.slice(0,o),c=a.toLowerCase(),v=e.slice(o+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(v):this.headers.set(c,[v])}})}:()=>{this.headers=new Map,Object.keys(i).forEach(e=>{let o=i[e];const a=e.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(a,o),this.maybeSetNormalizedName(e,a))})}:this.headers=new Map}has(i){return this.init(),this.headers.has(i.toLowerCase())}get(i){this.init();const e=this.headers.get(i.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(i){return this.init(),this.headers.get(i.toLowerCase())||null}append(i,e){return this.clone({name:i,value:e,op:"a"})}set(i,e){return this.clone({name:i,value:e,op:"s"})}delete(i,e){return this.clone({name:i,value:e,op:"d"})}maybeSetNormalizedName(i,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,i)}init(){this.lazyInit&&(this.lazyInit instanceof T_?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(i=>this.applyUpdate(i)),this.lazyUpdate=null))}copyFrom(i){i.init(),Array.from(i.headers.keys()).forEach(e=>{this.headers.set(e,i.headers.get(e)),this.normalizedNames.set(e,i.normalizedNames.get(e))})}clone(i){const e=new T_;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof T_?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([i]),e}applyUpdate(i){const e=i.name.toLowerCase();switch(i.op){case"a":case"s":let o=i.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(i.name,e);const a=("a"===i.op?this.headers.get(e):void 0)||[];a.push(...o),this.headers.set(e,a);break;case"d":const c=i.value;if(c){let v=this.headers.get(e);if(!v)return;v=v.filter(A=>-1===c.indexOf(A)),0===v.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,v)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(i){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>i(this.normalizedNames.get(e),this.headers.get(e)))}}class zG{encodeKey(i){return FN(i)}encodeValue(i){return FN(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}}function FN(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function LN(t){return`${t}`}class Ev{constructor(i={}){if(this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new zG,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,i){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[v,A]=-1==c?[i.decodeKey(a),""]:[i.decodeKey(a.slice(0,c)),i.decodeValue(a.slice(c+1))],z=e.get(v)||[];z.push(A),e.set(v,z)}),e}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach(e=>{const o=i.fromObject[e];this.map.set(e,Array.isArray(o)?o:[o])})):this.map=null}has(i){return this.init(),this.map.has(i)}get(i){this.init();const e=this.map.get(i);return e?e[0]:null}getAll(i){return this.init(),this.map.get(i)||null}keys(){return this.init(),Array.from(this.map.keys())}append(i,e){return this.clone({param:i,value:e,op:"a"})}appendAll(i){const e=[];return Object.keys(i).forEach(o=>{const a=i[o];Array.isArray(a)?a.forEach(c=>{e.push({param:o,value:c,op:"a"})}):e.push({param:o,value:a,op:"a"})}),this.clone(e)}set(i,e){return this.clone({param:i,value:e,op:"s"})}delete(i,e){return this.clone({param:i,value:e,op:"d"})}toString(){return this.init(),this.keys().map(i=>{const e=this.encoder.encodeKey(i);return this.map.get(i).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(i=>""!==i).join("&")}clone(i){const e=new Ev({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(i),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(i=>this.map.set(i,this.cloneFrom.map.get(i))),this.updates.forEach(i=>{switch(i.op){case"a":case"s":const e=("a"===i.op?this.map.get(i.param):void 0)||[];e.push(LN(i.value)),this.map.set(i.param,e);break;case"d":if(void 0===i.value){this.map.delete(i.param);break}{let o=this.map.get(i.param)||[];const a=o.indexOf(LN(i.value));-1!==a&&o.splice(a,1),o.length>0?this.map.set(i.param,o):this.map.delete(i.param)}}}),this.cloneFrom=this.updates=null)}}class UG{constructor(){this.map=new Map}set(i,e){return this.map.set(i,e),this}get(i){return this.map.has(i)||this.map.set(i,i.defaultValue()),this.map.get(i)}delete(i){return this.map.delete(i),this}keys(){return this.map.keys()}}function NN(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function BN(t){return"undefined"!=typeof Blob&&t instanceof Blob}function zN(t){return"undefined"!=typeof FormData&&t instanceof FormData}class cE{constructor(i,e,o,a){let c;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=i.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==o?o:null,c=a):c=o,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new T_),this.context||(this.context=new UG),this.params){const v=this.params.toString();if(0===v.length)this.urlWithParams=e;else{const A=e.indexOf("?");this.urlWithParams=e+(-1===A?"?":A<e.length-1?"&":"")+v}}else this.params=new Ev,this.urlWithParams=e}serializeBody(){return null===this.body?null:NN(this.body)||BN(this.body)||zN(this.body)||function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ev?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zN(this.body)?null:BN(this.body)?this.body.type||null:NN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ev?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(i={}){var e;const o=i.method||this.method,a=i.url||this.url,c=i.responseType||this.responseType,v=void 0!==i.body?i.body:this.body,A=void 0!==i.withCredentials?i.withCredentials:this.withCredentials,z=void 0!==i.reportProgress?i.reportProgress:this.reportProgress;let $=i.headers||this.headers,oe=i.params||this.params;const fe=null!==(e=i.context)&&void 0!==e?e:this.context;return void 0!==i.setHeaders&&($=Object.keys(i.setHeaders).reduce((ke,Oe)=>ke.set(Oe,i.setHeaders[Oe]),$)),i.setParams&&(oe=Object.keys(i.setParams).reduce((ke,Oe)=>ke.set(Oe,i.setParams[Oe]),oe)),new cE(o,a,v,{params:oe,headers:$,context:fe,reportProgress:z,responseType:c,withCredentials:A})}}var ul=(()=>((ul=ul||{})[ul.Sent=0]="Sent",ul[ul.UploadProgress=1]="UploadProgress",ul[ul.ResponseHeader=2]="ResponseHeader",ul[ul.DownloadProgress=3]="DownloadProgress",ul[ul.Response=4]="Response",ul[ul.User=5]="User",ul))();class mP{constructor(i,e=200,o="OK"){this.headers=i.headers||new T_,this.status=void 0!==i.status?i.status:e,this.statusText=i.statusText||o,this.url=i.url||null,this.ok=this.status>=200&&this.status<300}}class gP extends mP{constructor(i={}){super(i),this.type=ul.ResponseHeader}clone(i={}){return new gP({headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class fA extends mP{constructor(i={}){super(i),this.type=ul.Response,this.body=void 0!==i.body?i.body:null}clone(i={}){return new fA({body:void 0!==i.body?i.body:this.body,headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class VN extends mP{constructor(i){super(i,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${i.url||"(unknown url)"}`:`Http failure response for ${i.url||"(unknown url)"}: ${i.status} ${i.statusText}`,this.error=i.error||null}}function _P(t,i){return{body:i,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let mA=(()=>{class t{constructor(e){this.handler=e}request(e,o,a={}){let c;if(e instanceof cE)c=e;else{let z,$;z=a.headers instanceof T_?a.headers:new T_(a.headers),a.params&&($=a.params instanceof Ev?a.params:new Ev({fromObject:a.params})),c=new cE(e,o,void 0!==a.body?a.body:null,{headers:z,context:a.context,params:$,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const v=(0,Xn.of)(c).pipe(ud(z=>this.handler.handle(z)));if(e instanceof cE||"events"===a.observe)return v;const A=v.pipe(w(z=>z instanceof fA));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return A.pipe((0,ei.U)(z=>{if(null!==z.body&&!(z.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return z.body}));case"blob":return A.pipe((0,ei.U)(z=>{if(null!==z.body&&!(z.body instanceof Blob))throw new Error("Response is not a Blob.");return z.body}));case"text":return A.pipe((0,ei.U)(z=>{if(null!==z.body&&"string"!=typeof z.body)throw new Error("Response is not a string.");return z.body}));case"json":default:return A.pipe((0,ei.U)(z=>z.body))}case"response":return A;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:(new Ev).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,a={}){return this.request("PATCH",e,_P(a,o))}post(e,o,a={}){return this.request("POST",e,_P(a,o))}put(e,o,a={}){return this.request("PUT",e,_P(a,o))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(RN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();class UN{constructor(i,e){this.next=i,this.interceptor=e}handle(i){return this.interceptor.intercept(i,this.next)}}const yP=new s.OlP("HTTP_INTERCEPTORS");let jG=(()=>{class t{intercept(e,o){return o.handle(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();const YG=/^\)\]\}',?\n/;let HN=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Yr.y(o=>{const a=this.xhrFactory.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((Oe,He)=>a.setRequestHeader(Oe,He.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Oe=e.detectContentTypeHeader();null!==Oe&&a.setRequestHeader("Content-Type",Oe)}if(e.responseType){const Oe=e.responseType.toLowerCase();a.responseType="json"!==Oe?Oe:"text"}const c=e.serializeBody();let v=null;const A=()=>{if(null!==v)return v;const Oe=1223===a.status?204:a.status,He=a.statusText||"OK",ct=new T_(a.getAllResponseHeaders()),At=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(a)||e.url;return v=new gP({headers:ct,status:Oe,statusText:He,url:At}),v},z=()=>{let{headers:Oe,status:He,statusText:ct,url:At}=A(),Qt=null;204!==He&&(Qt=void 0===a.response?a.responseText:a.response),0===He&&(He=Qt?200:0);let Sn=He>=200&&He<300;if("json"===e.responseType&&"string"==typeof Qt){const xn=Qt;Qt=Qt.replace(YG,"");try{Qt=""!==Qt?JSON.parse(Qt):null}catch(Qn){Qt=xn,Sn&&(Sn=!1,Qt={error:Qn,text:Qt})}}Sn?(o.next(new fA({body:Qt,headers:Oe,status:He,statusText:ct,url:At||void 0})),o.complete()):o.error(new VN({error:Qt,headers:Oe,status:He,statusText:ct,url:At||void 0}))},$=Oe=>{const{url:He}=A(),ct=new VN({error:Oe,status:a.status||0,statusText:a.statusText||"Unknown Error",url:He||void 0});o.error(ct)};let oe=!1;const fe=Oe=>{oe||(o.next(A()),oe=!0);let He={type:ul.DownloadProgress,loaded:Oe.loaded};Oe.lengthComputable&&(He.total=Oe.total),"text"===e.responseType&&!!a.responseText&&(He.partialText=a.responseText),o.next(He)},ke=Oe=>{let He={type:ul.UploadProgress,loaded:Oe.loaded};Oe.lengthComputable&&(He.total=Oe.total),o.next(He)};return a.addEventListener("load",z),a.addEventListener("error",$),a.addEventListener("timeout",$),a.addEventListener("abort",$),e.reportProgress&&(a.addEventListener("progress",fe),null!==c&&a.upload&&a.upload.addEventListener("progress",ke)),a.send(c),o.next({type:ul.Sent}),()=>{a.removeEventListener("error",$),a.removeEventListener("abort",$),a.removeEventListener("load",z),a.removeEventListener("timeout",$),e.reportProgress&&(a.removeEventListener("progress",fe),null!==c&&a.upload&&a.upload.removeEventListener("progress",ke)),a.readyState!==a.DONE&&a.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(zl))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();const vP=new s.OlP("XSRF_COOKIE_NAME"),bP=new s.OlP("XSRF_HEADER_NAME");class GN{}let ZG=(()=>{class t{constructor(e,o,a){this.doc=e,this.platform=o,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Y(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(wt),s.LFG(s.Lbi),s.LFG(vP))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),xP=(()=>{class t{constructor(e,o){this.tokenService=e,this.headerName=o}intercept(e,o){const a=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||a.startsWith("http://")||a.startsWith("https://"))return o.handle(e);const c=this.tokenService.getToken();return null!==c&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,c)})),o.handle(e)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(GN),s.LFG(bP))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),WG=(()=>{class t{constructor(e,o){this.backend=e,this.injector=o,this.chain=null}handle(e){if(null===this.chain){const o=this.injector.get(yP,[]);this.chain=o.reduceRight((a,c)=>new UN(a,c),this.backend)}return this.chain.handle(e)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(ON),s.LFG(s.zs3))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),$G=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:xP,useClass:jG}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:vP,useValue:e.cookieName}:[],e.headerName?{provide:bP,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[xP,{provide:yP,useExisting:xP,multi:!0},{provide:GN,useClass:ZG},{provide:vP,useValue:"XSRF-TOKEN"},{provide:bP,useValue:"X-XSRF-TOKEN"}]}),t})(),XG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[mA,{provide:RN,useClass:WG},HN,{provide:ON,useExisting:HN}],imports:[[$G.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();const QG=["*"];function jN(t){return Error(`Unable to find icon with the name "${t}"`)}function YN(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function qN(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Tx{constructor(i,e,o){this.url=i,this.svgText=e,this.options=o}}let gA=(()=>{class t{constructor(e,o,a,c){this._httpClient=e,this._sanitizer=o,this._errorHandler=c,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=a}addSvgIcon(e,o,a){return this.addSvgIconInNamespace("",e,o,a)}addSvgIconLiteral(e,o,a){return this.addSvgIconLiteralInNamespace("",e,o,a)}addSvgIconInNamespace(e,o,a,c){return this._addSvgIconConfig(e,o,new Tx(a,null,c))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,o,a,c){const v=this._sanitizer.sanitize(s.q3G.HTML,a);if(!v)throw qN(a);return this._addSvgIconConfig(e,o,new Tx("",v,c))}addSvgIconSet(e,o){return this.addSvgIconSetInNamespace("",e,o)}addSvgIconSetLiteral(e,o){return this.addSvgIconSetLiteralInNamespace("",e,o)}addSvgIconSetInNamespace(e,o,a){return this._addSvgIconSetConfig(e,new Tx(o,null,a))}addSvgIconSetLiteralInNamespace(e,o,a){const c=this._sanitizer.sanitize(s.q3G.HTML,o);if(!c)throw qN(o);return this._addSvgIconSetConfig(e,new Tx("",c,a))}registerFontClassAlias(e,o=e){return this._fontCssClassesByAlias.set(e,o),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const o=this._sanitizer.sanitize(s.q3G.RESOURCE_URL,e);if(!o)throw YN(e);const a=this._cachedIconsByUrl.get(o);return a?(0,Xn.of)(_A(a)):this._loadSvgIconFromConfig(new Tx(e,null)).pipe((0,jo.b)(c=>this._cachedIconsByUrl.set(o,c)),(0,ei.U)(c=>_A(c)))}getNamedSvgIcon(e,o=""){const a=ZN(o,e);let c=this._svgIconConfigs.get(a);if(c)return this._getSvgFromConfig(c);if(c=this._getIconConfigFromResolvers(o,e),c)return this._svgIconConfigs.set(a,c),this._getSvgFromConfig(c);const v=this._iconSetConfigs.get(o);return v?this._getSvgFromIconSetConfigs(e,v):(0,BG._)(jN(a))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,Xn.of)(_A(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,ei.U)(o=>_A(o)))}_getSvgFromIconSetConfigs(e,o){const a=this._extractIconWithNameFromAnySet(e,o);return a?(0,Xn.of)(a):HF(o.filter(v=>!v.svgText).map(v=>this._loadSvgIconSetFromConfig(v).pipe(pa(A=>{const $=`Loading icon set URL: ${this._sanitizer.sanitize(s.q3G.RESOURCE_URL,v.url)} failed: ${A.message}`;return this._errorHandler.handleError(new Error($)),(0,Xn.of)(null)})))).pipe((0,ei.U)(()=>{const v=this._extractIconWithNameFromAnySet(e,o);if(!v)throw jN(e);return v}))}_extractIconWithNameFromAnySet(e,o){for(let a=o.length-1;a>=0;a--){const c=o[a];if(c.svgText&&c.svgText.indexOf(e)>-1){const v=this._svgElementFromConfig(c),A=this._extractSvgIconFromSet(v,e,c.options);if(A)return A}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,jo.b)(o=>e.svgText=o),(0,ei.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,Xn.of)(null):this._fetchIcon(e).pipe((0,jo.b)(o=>e.svgText=o))}_extractSvgIconFromSet(e,o,a){const c=e.querySelector(`[id="${o}"]`);if(!c)return null;const v=c.cloneNode(!0);if(v.removeAttribute("id"),"svg"===v.nodeName.toLowerCase())return this._setSvgAttributes(v,a);if("symbol"===v.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(v),a);const A=this._svgElementFromString("<svg></svg>");return A.appendChild(v),this._setSvgAttributes(A,a)}_svgElementFromString(e){const o=this._document.createElement("DIV");o.innerHTML=e;const a=o.querySelector("svg");if(!a)throw Error("<svg> tag not found");return a}_toSvgElement(e){const o=this._svgElementFromString("<svg></svg>"),a=e.attributes;for(let c=0;c<a.length;c++){const{name:v,value:A}=a[c];"id"!==v&&o.setAttribute(v,A)}for(let c=0;c<e.childNodes.length;c++)e.childNodes[c].nodeType===this._document.ELEMENT_NODE&&o.appendChild(e.childNodes[c].cloneNode(!0));return o}_setSvgAttributes(e,o){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),o&&o.viewBox&&e.setAttribute("viewBox",o.viewBox),e}_fetchIcon(e){var o;const{url:a,options:c}=e,v=null!==(o=null==c?void 0:c.withCredentials)&&void 0!==o&&o;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==a)throw Error(`Cannot fetch icon from URL "${a}".`);const A=this._sanitizer.sanitize(s.q3G.RESOURCE_URL,a);if(!A)throw YN(a);const z=this._inProgressUrlFetches.get(A);if(z)return z;const $=this._httpClient.get(A,{responseType:"text",withCredentials:v}).pipe(Fs(()=>this._inProgressUrlFetches.delete(A)),(0,np.B)());return this._inProgressUrlFetches.set(A,$),$}_addSvgIconConfig(e,o,a){return this._svgIconConfigs.set(ZN(e,o),a),this}_addSvgIconSetConfig(e,o){const a=this._iconSetConfigs.get(e);return a?a.push(o):this._iconSetConfigs.set(e,[o]),this}_svgElementFromConfig(e){if(!e.svgElement){const o=this._svgElementFromString(e.svgText);this._setSvgAttributes(o,e.options),e.svgElement=o}return e.svgElement}_getIconConfigFromResolvers(e,o){for(let a=0;a<this._resolvers.length;a++){const c=this._resolvers[a](o,e);if(c)return ej(c)?new Tx(c.url,null,c.options):new Tx(c,null)}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(mA,8),s.LFG(fs),s.LFG(wt,8),s.LFG(s.qLn))},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t((0,s.LFG)(mA,8),(0,s.LFG)(fs),(0,s.LFG)(wt,8),(0,s.LFG)(s.qLn))},token:t,providedIn:"root"}),t})();function _A(t){return t.cloneNode(!0)}function ZN(t,i){return t+":"+i}function ej(t){return!(!t.url||!t.options)}class tj{constructor(i){this._elementRef=i}}const nj=kw(tj),ij=new s.OlP("mat-icon-location",{providedIn:"root",factory:function(){const t=(0,s.f3M)(wt),i=t?t.location:null;return{getPathname:()=>i?i.pathname+i.search:""}}}),WN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],sj=WN.map(t=>`[${t}]`).join(", "),aj=/^url\(['"]?#(.*?)['"]?\)$/;let wP=(()=>{class t extends nj{constructor(e,o,a,c,v){super(e),this._iconRegistry=o,this._location=c,this._errorHandler=v,this._inline=!1,this._currentIconFetch=gs.w.EMPTY,a||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=br(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const o=this._cleanupFontValue(e);o!==this._fontSet&&(this._fontSet=o,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const o=this._cleanupFontValue(e);o!==this._fontIcon&&(this._fontIcon=o,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const o=e.split(":");switch(o.length){case 1:return["",o[0]];case 2:return o;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const o=this._location.getPathname();o!==this._previousPath&&(this._previousPath=o,this._prependPathToReferences(o))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const o=e.querySelectorAll("style");for(let c=0;c<o.length;c++)o[c].textContent+=" ";const a=this._location.getPathname();this._previousPath=a,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(a),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let o=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();o--;){const a=e.childNodes[o];(1!==a.nodeType||"svg"===a.nodeName.toLowerCase())&&e.removeChild(a)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,o=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();o!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),o&&e.classList.add(o),this._previousFontSetClass=o),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const o=this._elementsWithExternalReferences;o&&o.forEach((a,c)=>{a.forEach(v=>{c.setAttribute(v.name,`url('${e}#${v.value}')`)})})}_cacheChildrenWithExternalReferences(e){const o=e.querySelectorAll(sj),a=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let c=0;c<o.length;c++)WN.forEach(v=>{const A=o[c],z=A.getAttribute(v),$=z?z.match(aj):null;if($){let oe=a.get(A);oe||(oe=[],a.set(A,oe)),oe.push({name:v,value:$[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[o,a]=this._splitIconName(e);o&&(this._svgNamespace=o),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,o).pipe(ue(1)).subscribe(c=>this._setSvgElement(c),c=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${o}:${a}! ${c.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(gA),s.$8M("aria-hidden"),s.Y36(ij),s.Y36(s.qLn))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,o){2&e&&(s.uIk("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet),s.ekj("mat-icon-inline",o.inline)("mat-icon-no-color","primary"!==o.color&&"accent"!==o.color&&"warn"!==o.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[s.qOj],ngContentSelectors:QG,decls:1,vars:0,template:function(e,o){1&e&&(s.F$t(),s.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),$N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ir],Ir]}),t})(),lj=0;class cj{}const uj=b_(cj);let hj=(()=>{class t extends uj{constructor(e,o,a,c,v){super(),this._ngZone=e,this._elementRef=o,this._ariaDescriber=a,this._renderer=c,this._animationMode=v,this._hasContent=!1,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=lj++}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=br(e)}get description(){return this._description}set description(e){if(e!==this._description){const o=this._badgeElement;this._updateHostAriaDescription(e,this._description),this._description=e,o&&(e?o.setAttribute("aria-label",e):o.removeAttribute("aria-label"))}}get hidden(){return this._hidden}set hidden(e){this._hidden=br(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}ngOnChanges(e){const o=e.content;if(o){const a=o.currentValue;this._hasContent=null!=a&&`${a}`.trim().length>0,this._updateTextContent()}}ngOnDestroy(){const e=this._badgeElement;e&&(this.description&&this._ariaDescriber.removeDescription(e,this.description),this._renderer.destroyNode&&this._renderer.destroyNode(e))}getBadgeElement(){return this._badgeElement}_updateTextContent(){return this._badgeElement?this._badgeElement.textContent=this._stringifyContent():this._badgeElement=this._createBadgeElement(),this._badgeElement}_createBadgeElement(){const e=this._renderer.createElement("span"),o="mat-badge-active",a="mat-badge-content";return this._clearExistingBadges(a),e.setAttribute("id",`mat-badge-content-${this._id}`),e.classList.add(a),e.textContent=this._stringifyContent(),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this.description&&e.setAttribute("aria-label",this.description),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(o)})}):e.classList.add(o),e}_updateHostAriaDescription(e,o){const a=this._updateTextContent();o&&this._ariaDescriber.removeDescription(a,o),e&&this._ariaDescriber.describe(a,e)}_setColor(e){if(e!==this._color){const o=this._elementRef.nativeElement.classList;this._color&&o.remove(`mat-badge-${this._color}`),e&&o.add(`mat-badge-${e}`)}}_clearExistingBadges(e){const o=this._elementRef.nativeElement;let a=o.children.length;for(;a--;){const c=o.children[a];c.classList.contains(e)&&o.removeChild(c)}}_stringifyContent(){const e=this.content;return null==e?"":`${e}`}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(ox),s.Y36(s.Qsj),s.Y36(ih,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,o){2&e&&s.ekj("mat-badge-overlap",o.overlap)("mat-badge-above",o.isAbove())("mat-badge-below",!o.isAbove())("mat-badge-before",!o.isAfter())("mat-badge-after",o.isAfter())("mat-badge-small","small"===o.size)("mat-badge-medium","medium"===o.size)("mat-badge-large","large"===o.size)("mat-badge-hidden",o.hidden||!o._hasContent)("mat-badge-disabled",o.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],position:["matBadgePosition","position"],size:["matBadgeSize","size"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],description:["matBadgeDescription","description"],hidden:["matBadgeHidden","hidden"],content:["matBadge","content"]},features:[s.qOj,s.TTD]}),t})(),dj=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[bS,Ir],Ir]}),t})();function pj(t,i){if(1&t&&(s.TgZ(0,"button",32),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.AsE(" ",e.brand," ------\x3e RM",e.price," ")}}function fj(t,i){1&t&&(s.TgZ(0,"button",33),s._uU(1,"View Cart"),s.qZA())}function mj(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",18),s.NdJ("click",function(){const c=s.CHM(e).$implicit;return s.oxw().filterCategory(c)}),s._uU(1),s.qZA()}if(2&t){const e=i.$implicit;s.xp6(1),s.hij(" ",e," ")}}function gj(t,i){1&t&&(s.TgZ(0,"th",34),s._uU(1," Product Name "),s.qZA())}function _j(t,i){if(1&t&&(s.TgZ(0,"td",35),s._uU(1),s._UZ(2,"br"),s._uU(3),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.hij(" ",e.brand," "),s.xp6(2),s.hij(" ",e.compname.compname," ")}}function yj(t,i){1&t&&(s.TgZ(0,"th",34),s._uU(1," Product Name "),s.qZA())}function vj(t,i){1&t&&s._UZ(0,"td",35)}function bj(t,i){1&t&&(s.TgZ(0,"th",34),s._uU(1,"Rating"),s.qZA())}function xj(t,i){if(1&t&&(s.TgZ(0,"td",35),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.rating)}}function wj(t,i){1&t&&(s.TgZ(0,"th",34),s._uU(1,"Price/Item"),s.qZA())}function Cj(t,i){if(1&t&&(s.TgZ(0,"td",35),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.price)}}function Sj(t,i){1&t&&(s.TgZ(0,"th",34),s._uU(1,"Action"),s.qZA())}function Ej(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"td",35),s.TgZ(1,"button",36),s.NdJ("click",function(){const c=s.CHM(e).$implicit;return s.oxw().addtocart(c.brand,c.price,c.compname.compname)}),s._uU(2," Add to Cart "),s.qZA(),s.qZA()}}function Tj(t,i){1&t&&s._UZ(0,"tr",37)}function Mj(t,i){1&t&&s._UZ(0,"tr",38)}function kj(t,i){if(1&t&&(s.TgZ(0,"tr",39),s.TgZ(1,"td",40),s._uU(2),s.qZA(),s.qZA()),2&t){s.oxw();const e=s.MAs(18);s.xp6(2),s.hij(' No data matching the filter "',e.value,'" ')}}const Aj=function(){return[5,10,25,100]};let Dj=(()=>{class t{constructor(e){this.fs=e,this.supplierid=[],this.overallmenu=[],this.supplier=[],this.loader=!0,this.cart=[],this.newArray=[],this.status="ONLINE",this.isConnected=!0,this.newCategory=[],this.displayedColumns=["brand","rating","price","action"],this.checkDuplicate=[],this.filter2=[],this.filter3=[],this.quantity=[],this.temp=[],this.isModified=!1,this.fs.collection("Supplier").snapshotChanges().subscribe(o=>{o.map(a=>{let c=a.payload.doc.data();this.fs.collection("Supplier").doc(a.payload.doc.id).collection("menu").snapshotChanges().subscribe(v=>{v.map(A=>{if("added"==A.type){let z={compname:c,brand:A.payload.doc.data().brand,rating:A.payload.doc.data().rating,price:A.payload.doc.data().price,category:A.payload.doc.data().category};this.overallmenu.push(z),this.dataSource=new Cx(this.overallmenu),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}})})})}),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").snapshotChanges().subscribe(o=>{this.filter2=[],this.cartlength=o.length,o.map(a=>{console.log(a);let c={brand:a.payload.doc.id,quantity:a.payload.doc.data().quantity,price:a.payload.doc.data().price};this.filter2.push(c),this.filter3=[...new Set(this.filter2)]})})}ngOnInit(){}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}filter(){for(let e=0;e<this.overallmenu.length;e++)this.newArray.push(this.overallmenu[e].category);this.newCategory=[...new Set(this.newArray)]}filterCategory(e){if(console.log(e),"clear"==e)this.dataSource=new Cx(this.overallmenu),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort;else{let o=this.overallmenu.filter(a=>{if(a.category==e)return a});this.dataSource=new Cx(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}}addtocart(e,o,a){let c=o;const v=o;0==this.filter3.length&&this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e).set({quantity:1,price:v,brand:e,compname:a,totalprice:c});for(let A=0;A<this.filter3.length;A++){let z=[];const $=this.filter3[A];if(this.filter3.filter(oe=>{z.push(oe.brand),this.isExisted=!0}),0==z.includes(e)&&(this.isExisted=!1),$.brand==e){const fe=this.filter3[A].quantity+1;console.log(A);const ke=fe*v;this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e).update({quantity:fe,price:v,brand:e,compname:a,totalprice:ke})}else!1===this.isExisted&&this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e).set({quantity:1,price:v,brand:e,compname:a})}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(_u))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-add-order-page"]],viewQuery:function(e,o){if(1&e&&(s.Gf(wv,5),s.Gf(x_,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.paginator=a.first),s.iGM(a=s.CRH())&&(o.sort=a.first)}},decls:48,vars:12,consts:[[1,"content"],[1,"combine"],[1,"search"],["mat-button","",3,"matMenuTriggerFor","mouseenter"],["menuTrigger","matMenuTrigger"],["matBadgePosition","after","matBadgeColor","accent",3,"matBadge"],[3,"overlapTrigger"],["menu","matMenu"],[3,"mouseleave"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-raised-button","","routerLink","/admincartpage",4,"ngIf"],["appearance","standard"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"filter"],["mat-button","",3,"matMenuTriggerFor","click"],["category","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[1,"mat-elevation-z8","table"],["mat-table","","matSort","","width","100%",3,"dataSource"],["matColumnDef","brand"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","compname"],["matColumnDef","rating"],["matColumnDef","price"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-menu-item",""],["mat-raised-button","","routerLink","/admincartpage"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){if(1&e){const a=s.EpF();s.TgZ(0,"body"),s._UZ(1,"app-adminnavbarpage"),s.TgZ(2,"div",0),s.TgZ(3,"div",1),s.TgZ(4,"div",2),s.TgZ(5,"button",3,4),s.NdJ("mouseenter",function(){return s.CHM(a),s.MAs(6).openMenu()}),s.TgZ(7,"mat-icon",5),s._uU(8,"shopping_cart"),s.qZA(),s.qZA(),s.TgZ(9,"mat-menu",6,7),s.TgZ(11,"span",8),s.NdJ("mouseleave",function(){return s.CHM(a),s.MAs(6).closeMenu()}),s.YNc(12,pj,2,2,"button",9),s.YNc(13,fj,2,0,"button",10),s.qZA(),s.qZA(),s.TgZ(14,"mat-form-field",11),s.TgZ(15,"mat-label"),s._uU(16,"Search"),s.qZA(),s.TgZ(17,"input",12,13),s.NdJ("keyup",function(v){return o.applyFilter(v)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"div",14),s.TgZ(20,"button",15),s.NdJ("click",function(){return o.filter()}),s._uU(21," Category "),s.qZA(),s.TgZ(22,"mat-menu",null,16),s.YNc(24,mj,2,1,"button",17),s.TgZ(25,"button",18),s.NdJ("click",function(){return o.filterCategory("clear")}),s._uU(26,"Clear"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div",19),s.TgZ(28,"table",20),s.ynx(29,21),s.YNc(30,gj,2,0,"th",22),s.YNc(31,_j,4,2,"td",23),s.ynx(32,24),s.YNc(33,yj,2,0,"th",22),s.YNc(34,vj,1,0,"td",23),s.BQk(),s.BQk(),s.ynx(35,25),s.YNc(36,bj,2,0,"th",22),s.YNc(37,xj,2,1,"td",23),s.BQk(),s.ynx(38,26),s.YNc(39,wj,2,0,"th",22),s.YNc(40,Cj,2,1,"td",23),s.BQk(),s.ynx(41,27),s.YNc(42,Sj,2,0,"th",22),s.YNc(43,Ej,3,0,"td",23),s.BQk(),s.YNc(44,Tj,1,0,"tr",28),s.YNc(45,Mj,1,0,"tr",29),s.YNc(46,kj,3,1,"tr",30),s.qZA(),s._UZ(47,"mat-paginator",31),s.qZA(),s.qZA(),s.qZA()}if(2&e){const a=s.MAs(10),c=s.MAs(23);s.xp6(5),s.Q6J("matMenuTriggerFor",a),s.xp6(2),s.s9C("matBadge",o.cartlength),s.xp6(2),s.Q6J("overlapTrigger",!1),s.xp6(3),s.Q6J("ngForOf",o.filter3),s.xp6(1),s.Q6J("ngIf",o.filter3.length>0),s.xp6(7),s.Q6J("matMenuTriggerFor",c),s.xp6(4),s.Q6J("ngForOf",o.newCategory),s.xp6(4),s.Q6J("dataSource",o.dataSource),s.xp6(16),s.Q6J("matHeaderRowDef",o.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",o.displayedColumns),s.xp6(2),s.Q6J("pageSizeOptions",s.DdM(11,Aj))}},directives:[Ym,mv,LG,wP,hj,OG,Je,Xt,Pw,bx,oE,pA,JS,x_,jw,Gw,Hw,KS,eE,iE,wv,ff,Yw,Ok,qw,tE,nE],styles:["mgl-map[_ngcontent-%COMP%]{height:80%;width:50%}.table[_ngcontent-%COMP%]{width:80%;margin:auto}.combine[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.filter[_ngcontent-%COMP%]{order:1;margin-top:1.5rem}.search[_ngcontent-%COMP%]{order:2;margin-left:5rem}"]}),t})(),Ij=(()=>{class t{constructor(e,o,a){this.el=e,this.zone=o,this.config=a,this.escape=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!1,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{"hover"===this.getOption("tooltipEvent")?(this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener)):"focus"===this.getOption("tooltipEvent")&&(this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this),this.el.nativeElement.addEventListener("focus",this.focusListener),this.el.nativeElement.addEventListener("blur",this.blurListener))})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({showDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions=Object.assign(Object.assign({},this._tooltipOptions),e.tooltipOptions.currentValue),this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Jt.appendChild(this.container,this.el.nativeElement):Jt.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block"}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Jt.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Oc.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Oc.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+Jt.getWindowScrollLeft(),top:e.top+Jt.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),o=e.left+Jt.getOuterWidth(this.el.nativeElement),a=e.top+(Jt.getOuterHeight(this.el.nativeElement)-Jt.getOuterHeight(this.container))/2;this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=a+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),o=e.left-Jt.getOuterWidth(this.container),a=e.top+(Jt.getOuterHeight(this.el.nativeElement)-Jt.getOuterHeight(this.container))/2;this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=a+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),o=e.left+(Jt.getOuterWidth(this.el.nativeElement)-Jt.getOuterWidth(this.container))/2,a=e.top-Jt.getOuterHeight(this.container);this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=a+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),o=e.left+(Jt.getOuterWidth(this.el.nativeElement)-Jt.getOuterWidth(this.container))/2,a=e.top+Jt.getOuterHeight(this.el.nativeElement);this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=a+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions=Object.assign(Object.assign({},this._tooltipOptions),e)}getOption(e){return this._tooltipOptions[e]}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let o="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?o+" "+this.getOption("tooltipStyleClass"):o}isOutOfBounds(){let e=this.container.getBoundingClientRect(),o=e.top,a=e.left,c=Jt.getOuterWidth(this.container),v=Jt.getOuterHeight(this.container),A=Jt.getViewport();return a+c>A.width||a<0||o<0||o+v>A.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new sE(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){"hover"===this.getOption("tooltipEvent")?(this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener)):"focus"===this.getOption("tooltipEvent")&&(this.el.nativeElement.removeEventListener("focus",this.focusListener),this.el.nativeElement.removeEventListener("blur",this.blurListener)),this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Jt.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Oc.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Jm))},t.\u0275dir=s.lG2({type:t,selectors:[["","pTooltip",""]],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[s.TTD]}),t})(),Pj=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})();function Rj(t,i){if(1&t&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Oqu(e.label||"empty")}}function Oj(t,i){1&t&&s.GkF(0)}const XN=function(t){return{height:t}},Fj=function(t,i){return{"p-dropdown-item":!0,"p-highlight":t,"p-disabled":i}},CP=function(t){return{$implicit:t}},Lj=["container"],Nj=["filter"],Bj=["in"],zj=["editableInput"];function Vj(t,i){if(1&t&&(s.ynx(0),s._uU(1),s.BQk()),2&t){const e=s.oxw(2);s.xp6(1),s.Oqu(e.label||"empty")}}function Uj(t,i){1&t&&s.GkF(0)}const Hj=function(t){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":t}};function Gj(t,i){if(1&t&&(s.TgZ(0,"span",12),s.YNc(1,Vj,2,1,"ng-container",13),s.YNc(2,Uj,1,0,"ng-container",14),s.qZA()),2&t){const e=s.oxw();s.Q6J("ngClass",s.VKq(8,Hj,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),s.xp6(1),s.Q6J("ngIf",!e.selectedItemTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",s.VKq(10,CP,e.selectedOption))}}const jj=function(t){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":t}};function Yj(t,i){if(1&t&&(s.TgZ(0,"span",15),s._uU(1),s.qZA()),2&t){const e=s.oxw();s.Q6J("ngClass",s.VKq(2,jj,null==e.placeholder||0===e.placeholder.length)),s.xp6(1),s.Oqu(e.placeholder||"empty")}}function qj(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"input",16,17),s.NdJ("click",function(){return s.CHM(e),s.oxw().onEditableInputClick()})("input",function(a){return s.CHM(e),s.oxw().onEditableInputChange(a)})("focus",function(a){return s.CHM(e),s.oxw().onEditableInputFocus(a)})("blur",function(a){return s.CHM(e),s.oxw().onInputBlur(a)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("disabled",e.disabled),s.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function Zj(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"i",18),s.NdJ("click",function(a){return s.CHM(e),s.oxw().clear(a)}),s.qZA()}}function Wj(t,i){1&t&&s.GkF(0)}function $j(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",26),s.TgZ(1,"div",27),s.NdJ("click",function(a){return a.stopPropagation()}),s.TgZ(2,"input",28,29),s.NdJ("keydown.enter",function(a){return a.preventDefault()})("keydown",function(a){return s.CHM(e),s.oxw(2).onKeydown(a,!1)})("input",function(a){return s.CHM(e),s.oxw(2).onFilterInputChange(a)}),s.qZA(),s._UZ(4,"span",30),s.qZA(),s.qZA()}if(2&t){const e=s.oxw(2);s.xp6(2),s.Q6J("value",e.filterValue||""),s.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)}}function Xj(t,i){if(1&t&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&t){const e=s.oxw().$implicit,o=s.oxw(3);s.xp6(1),s.Oqu(o.getOptionGroupLabel(e)||"empty")}}function Qj(t,i){1&t&&s.GkF(0)}function Jj(t,i){1&t&&s.GkF(0)}const QN=function(t,i){return{$implicit:t,selectedOption:i}};function Kj(t,i){if(1&t&&(s.TgZ(0,"li",32),s.YNc(1,Xj,2,1,"span",13),s.YNc(2,Qj,1,0,"ng-container",14),s.qZA(),s.YNc(3,Jj,1,0,"ng-container",14)),2&t){const e=i.$implicit;s.oxw(2);const o=s.MAs(8),a=s.oxw();s.xp6(1),s.Q6J("ngIf",!a.groupTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",a.groupTemplate)("ngTemplateOutletContext",s.VKq(5,CP,e)),s.xp6(1),s.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",s.WLB(7,QN,a.getOptionGroupChildren(e),a.selectedOption))}}function eY(t,i){if(1&t&&(s.ynx(0),s.YNc(1,Kj,4,10,"ng-template",31),s.BQk()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",e.optionsToDisplay)}}function tY(t,i){1&t&&s.GkF(0)}function nY(t,i){if(1&t&&(s.ynx(0),s.YNc(1,tY,1,0,"ng-container",14),s.BQk()),2&t){s.oxw();const e=s.MAs(8),o=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",s.WLB(2,QN,o.optionsToDisplay,o.selectedOption))}}function iY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"p-dropdownItem",35),s.NdJ("onClick",function(a){return s.CHM(e),s.oxw(4).onItemClick(a)}),s.qZA()}if(2&t){const e=i.$implicit,o=s.oxw(2).selectedOption,a=s.oxw(2);s.Q6J("option",e)("selected",o==e)("label",a.getOptionLabel(e))("disabled",a.isOptionDisabled(e))("template",a.itemTemplate)}}function rY(t,i){if(1&t&&(s.ynx(0),s.YNc(1,iY,1,5,"ng-template",31),s.BQk()),2&t){const e=s.oxw().$implicit;s.xp6(1),s.Q6J("ngForOf",e)}}function oY(t,i){if(1&t){const e=s.EpF();s.ynx(0),s.TgZ(1,"p-dropdownItem",35),s.NdJ("onClick",function(a){return s.CHM(e),s.oxw(5).onItemClick(a)}),s.qZA(),s.BQk()}if(2&t){const e=i.$implicit,o=s.oxw(3).selectedOption,a=s.oxw(2);s.xp6(1),s.Q6J("option",e)("selected",o==e)("label",a.getOptionLabel(e))("disabled",a.isOptionDisabled(e))("template",a.itemTemplate)}}function sY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"cdk-virtual-scroll-viewport",37,38),s.NdJ("scrolledIndexChange",function(){return s.CHM(e),s.oxw(4).scrollToSelectedVirtualScrollElement()}),s.YNc(2,oY,2,5,"ng-container",39),s.qZA()}if(2&t){const e=s.oxw(2).$implicit,o=s.oxw(2);s.Q6J("ngStyle",s.VKq(3,XN,o.scrollHeight))("itemSize",o.itemSize),s.xp6(2),s.Q6J("cdkVirtualForOf",e)}}function aY(t,i){if(1&t&&s.YNc(0,sY,3,5,"cdk-virtual-scroll-viewport",36),2&t){const e=s.oxw(3);s.Q6J("ngIf",e.virtualScroll&&e.optionsToDisplay&&e.optionsToDisplay.length)}}function lY(t,i){if(1&t&&(s.YNc(0,rY,2,1,"ng-container",33),s.YNc(1,aY,1,1,"ng-template",null,34,s.W1O)),2&t){const e=s.MAs(2),o=s.oxw(2);s.Q6J("ngIf",!o.virtualScroll)("ngIfElse",e)}}function cY(t,i){if(1&t&&(s.ynx(0),s._uU(1),s.BQk()),2&t){const e=s.oxw(3);s.xp6(1),s.hij(" ",e.emptyFilterMessageLabel," ")}}function uY(t,i){1&t&&s.GkF(0,null,41)}function hY(t,i){if(1&t&&(s.TgZ(0,"li",40),s.YNc(1,cY,2,1,"ng-container",33),s.YNc(2,uY,2,0,"ng-container",20),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),s.xp6(1),s.Q6J("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function dY(t,i){if(1&t&&(s.ynx(0),s._uU(1),s.BQk()),2&t){const e=s.oxw(3);s.xp6(1),s.hij(" ",e.emptyMessageLabel," ")}}function pY(t,i){1&t&&s.GkF(0,null,42)}function fY(t,i){if(1&t&&(s.TgZ(0,"li",40),s.YNc(1,dY,2,1,"ng-container",33),s.YNc(2,pY,2,0,"ng-container",20),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),s.xp6(1),s.Q6J("ngTemplateOutlet",e.emptyTemplate)}}function mY(t,i){1&t&&s.GkF(0)}const gY=function(t,i){return{showTransitionParams:t,hideTransitionParams:i}},_Y=function(t){return{value:"visible",params:t}},yY=function(t){return{"p-dropdown-virtualscroll":t}};function vY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",19),s.NdJ("click",function(a){return s.CHM(e),s.oxw().onOverlayClick(a)})("@overlayAnimation.start",function(a){return s.CHM(e),s.oxw().onOverlayAnimationStart(a)})("@overlayAnimation.start",function(a){return s.CHM(e),s.oxw().onOverlayAnimationEnd(a)}),s.YNc(1,Wj,1,0,"ng-container",20),s.YNc(2,$j,5,3,"div",21),s.TgZ(3,"div",22),s.TgZ(4,"ul",23),s.YNc(5,eY,2,1,"ng-container",13),s.YNc(6,nY,2,5,"ng-container",13),s.YNc(7,lY,3,2,"ng-template",null,24,s.W1O),s.YNc(9,hY,3,3,"li",25),s.YNc(10,fY,3,3,"li",25),s.qZA(),s.qZA(),s.YNc(11,mY,1,0,"ng-container",20),s.qZA()}if(2&t){const e=s.oxw();s.Tol(e.panelStyleClass),s.Q6J("ngClass","p-dropdown-panel p-component")("@overlayAnimation",s.VKq(18,_Y,s.WLB(15,gY,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),s.xp6(1),s.Q6J("ngTemplateOutlet",e.headerTemplate),s.xp6(1),s.Q6J("ngIf",e.filter),s.xp6(1),s.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),s.xp6(1),s.Q6J("ngClass",s.VKq(20,yY,e.virtualScroll)),s.xp6(1),s.Q6J("ngIf",e.group),s.xp6(1),s.Q6J("ngIf",!e.group),s.xp6(3),s.Q6J("ngIf",e.filterValue&&e.isEmpty()),s.xp6(1),s.Q6J("ngIf",!e.filterValue&&e.isEmpty()),s.xp6(1),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}const bY=function(t,i,e,o){return{"p-dropdown p-component":!0,"p-disabled":t,"p-dropdown-open":i,"p-focus":e,"p-dropdown-clearable":o}},xY={provide:ll,useExisting:(0,s.Gpc)(()=>JN),multi:!0};let wY=(()=>{class t{constructor(){this.onClick=new s.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-dropdownItem"]],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:14,consts:[["role","option","pRipple","",3,"ngStyle","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(s.TgZ(0,"li",0),s.NdJ("click",function(c){return o.onOptionClick(c)}),s.YNc(1,Rj,2,1,"span",1),s.YNc(2,Oj,1,0,"ng-container",2),s.qZA()),2&e&&(s.Q6J("ngStyle",s.VKq(7,XN,o.itemSize+"px"))("ngClass",s.WLB(9,Fj,o.selected,o.disabled)),s.uIk("aria-label",o.label)("aria-selected",o.selected),s.xp6(1),s.Q6J("ngIf",!o.template),s.xp6(1),s.Q6J("ngTemplateOutlet",o.template)("ngTemplateOutletContext",s.VKq(12,CP,o.option)))},directives:[Ex,Wi,ne,Xt,Ro],encapsulation:2}),t})(),JN=(()=>{class t{constructor(e,o,a,c,v,A,z){this.el=e,this.renderer=o,this.cd=a,this.zone=c,this.filterService=v,this.config=A,this.overlayService=z,this.scrollHeight="200px",this.appendTo="body",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new s.vpe,this.onFilter=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onClick=new s.vpe,this.onShow=new s.vpe,this.onHide=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.viewPortOffsetTop=0}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;default:this.itemTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null)}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(cl.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(cl.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?Ci.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ci.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ci.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?Ci.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ci.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const o=e.option;this.isOptionDisabled(o)||(this.selectItem(e,o),this.accessibleViewChild.nativeElement.focus()),setTimeout(()=>{this.hide()},150)}selectItem(e,o){this.selectedOption!=o&&(this.selectedOption=o,this.value=this.getOptionValue(o),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e.originalEvent,value:this.value}),this.virtualScroll&&setTimeout(()=>{this.viewPortOffsetTop=this.viewPort?this.viewPort.measureScrollOffset():0},1))}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.virtualScroll&&this.updateVirtualScrollSelectedIndex(!0),this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){if(this.virtualScroll&&this.viewPort){let o=this.viewPort.getRenderedRange();this.updateVirtualScrollSelectedIndex(!1),(o.start>this.virtualScrollSelectedIndex||o.end<this.virtualScrollSelectedIndex)&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)}Jt.findSingle(this.overlay,"li.p-highlight")&&Jt.scrollInView(this.itemsWrapper,Jt.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1}}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.optionsToDisplay[0]),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus(),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return Jt.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=Jt.findSingle(this.overlay,this.virtualScroll?".cdk-virtual-scroll-viewport":".p-dropdown-items-wrapper"),this.appendOverlay(),this.autoZIndex&&Oc.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length&&!this.virtualScroll){let a=Jt.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");a&&Jt.scrollInView(this.itemsWrapper,a)}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){switch(e.toState){case"void":Oc.clear(e.element)}}scrollToSelectedVirtualScrollElement(){this.virtualAutoScrolled||(this.viewPortOffsetTop?this.viewPort.scrollToOffset(this.viewPortOffsetTop):this.virtualScrollSelectedIndex>-1&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)),this.virtualAutoScrolled=!0}updateVirtualScrollSelectedIndex(e){this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&(e&&(this.viewPortOffsetTop=0),this.virtualScrollSelectedIndex=this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay))}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Jt.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Jt.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.virtualScroll&&(this.virtualAutoScrolled=!1),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?Jt.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Jt.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let o;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let a=e-1;0<=a;a--){let c=this.optionsToDisplay[a];if(!c.disabled){o=c;break}}if(!o)for(let a=this.optionsToDisplay.length-1;a>=e;a--){let c=this.optionsToDisplay[a];if(!this.isOptionDisabled(c)){o=c;break}}}return o}findNextEnabledOption(e){let o;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let a=e+1;a<this.optionsToDisplay.length;a++){let c=this.optionsToDisplay[a];if(!this.isOptionDisabled(c)){o=c;break}}if(!o)for(let a=0;a<e;a++){let c=this.optionsToDisplay[a];if(!this.isOptionDisabled(c)){o=c;break}}}return o}onKeydown(e,o){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let a=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==a){let c=a.itemIndex+1;c<this.getOptionGroupChildren(this.optionsToDisplay[a.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[a.groupIndex])[c]),this.selectedOptionUpdated=!0):this.optionsToDisplay[a.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[a.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let a=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,c=this.findNextEnabledOption(a);c&&(this.selectItem(e,c),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let a=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==a){let c=a.itemIndex-1;if(c>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[a.groupIndex])[c]),this.selectedOptionUpdated=!0;else if(c<0){let v=this.optionsToDisplay[a.groupIndex-1];v&&(this.selectItem(e,this.getOptionGroupChildren(v)[this.getOptionGroupChildren(v).length-1]),this.selectedOptionUpdated=!0)}}}else{let a=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,c=this.findPrevEnabledOption(a);c&&(this.selectItem(e,c),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 13:(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)&&this.hide(),e.preventDefault();break;case 27:case 9:this.hide();break;default:o&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const o=e.key;let a;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=o,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+o:o,this.group){let c=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};a=this.searchOptionWithinGroup(c)}else{let c=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;a=this.searchOption(++c)}a&&!this.isOptionDisabled(a)&&(this.selectItem(e,a),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let o;return this.searchValue&&(o=this.searchOptionInRange(e,this.optionsToDisplay.length),o||(o=this.searchOptionInRange(0,e))),o}searchOptionInRange(e,o){for(let a=e;a<o;a++){let c=this.optionsToDisplay[a];if(this.getOptionLabel(c).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(c))return c}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let a=e.groupIndex;a<this.optionsToDisplay.length;a++)for(let c=e.groupIndex===a?e.itemIndex+1:0;c<this.getOptionGroupChildren(this.optionsToDisplay[a]).length;c++){let v=this.getOptionGroupChildren(this.optionsToDisplay[a])[c];if(this.getOptionLabel(v).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(v))return v}for(let a=0;a<=e.groupIndex;a++)for(let c=0;c<(e.groupIndex===a?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[a]).length);c++){let v=this.getOptionGroupChildren(this.optionsToDisplay[a])[c];if(this.getOptionLabel(v).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(v))return v}}return null}findOptionIndex(e,o){let a=-1;if(o)for(let c=0;c<o.length;c++)if(null==e&&null==this.getOptionValue(o[c])||Ci.equals(e,this.getOptionValue(o[c]),this.dataKey)){a=c;break}return a}findOptionGroupIndex(e,o){let a,c;if(o)for(let v=0;v<o.length&&(a=v,c=this.findOptionIndex(e,this.getOptionGroupChildren(o[v])),-1===c);v++);return-1!==c?{groupIndex:a,itemIndex:c}:-1}findOption(e,o,a){if(this.group&&!a){let c;if(o&&o.length)for(let v of o)if(c=this.findOption(e,this.getOptionGroupChildren(v),!0),c)break;return c}{let c=this.findOptionIndex(e,o);return-1!=c?o[c]:null}}onFilterInputChange(e){let o=e.target.value;o&&o.length?(this._filterValue=o,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let o=[];for(let a of this.options){let c=this.filterService.filter(this.getOptionGroupChildren(a),e,this.filterValue,this.filterMatchMode,this.filterLocale);c&&c.length&&o.push(Object.assign(Object.assign({},a),{[this.optionGroupChildren]:c}))}this.optionsToDisplay=o}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?Jt.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Jt.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",o=>{this.isOutsideClicked(o)&&(this.hide(),this.unbindDocumentClickListener()),this.cd.markForCheck()}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){Jt.isAndroid()||this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new sE(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Oc.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(sN),s.Y36(Jm),s.Y36(rE))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-dropdown"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,Sv,4),2&e){let c;s.iGM(c=s.CRH())&&(o.templates=c)}},viewQuery:function(e,o){if(1&e&&(s.Gf(Lj,5),s.Gf(Nj,5),s.Gf(Bj,5),s.Gf(FS,5),s.Gf(zj,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.containerViewChild=a.first),s.iGM(a=s.CRH())&&(o.filterViewChild=a.first),s.iGM(a=s.CRH())&&(o.accessibleViewChild=a.first),s.iGM(a=s.CRH())&&(o.viewPort=a.first),s.iGM(a=s.CRH())&&(o.editableInputViewChild=a.first)}},hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focused||o.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",virtualScroll:"virtualScroll",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide"},features:[s._Bn([xY])],decls:12,vars:22,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox",3,"disabled","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",4,"ngIf"],[1,"p-dropdown-items-wrapper"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["itemslist",""],["class","p-dropdown-empty-message",4,"ngIf"],[1,"p-dropdown-header"],[1,"p-dropdown-filter-container",3,"click"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],[3,"option","selected","label","disabled","template","onClick"],[3,"ngStyle","itemSize","scrolledIndexChange",4,"ngIf"],[3,"ngStyle","itemSize","scrolledIndexChange"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"p-dropdown-empty-message"],["emptyFilter",""],["empty",""]],template:function(e,o){1&e&&(s.TgZ(0,"div",0,1),s.NdJ("click",function(c){return o.onMouseclick(c)}),s.TgZ(2,"div",2),s.TgZ(3,"input",3,4),s.NdJ("focus",function(c){return o.onInputFocus(c)})("blur",function(c){return o.onInputBlur(c)})("keydown",function(c){return o.onKeydown(c,!0)}),s.qZA(),s.qZA(),s.YNc(5,Gj,3,12,"span",5),s.YNc(6,Yj,2,4,"span",6),s.YNc(7,qj,2,4,"input",7),s.YNc(8,Zj,1,0,"i",8),s.TgZ(9,"div",9),s._UZ(10,"span",10),s.qZA(),s.YNc(11,vY,12,22,"div",11),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",s.l5B(17,bY,o.disabled,o.overlayVisible,o.focused,o.showClear&&!o.disabled))("ngStyle",o.style),s.xp6(3),s.Q6J("disabled",o.disabled),s.uIk("id",o.inputId)("aria-expanded",o.overlayVisible)("aria-labelledby",o.ariaLabelledBy)("tabindex",o.tabindex)("autofocus",o.autofocus),s.xp6(2),s.Q6J("ngIf",!o.editable&&null!=o.label),s.xp6(1),s.Q6J("ngIf",!o.editable&&null==o.label),s.xp6(1),s.Q6J("ngIf",o.editable),s.xp6(1),s.Q6J("ngIf",null!=o.value&&o.showClear&&!o.disabled),s.xp6(1),s.uIk("aria-expanded",o.overlayVisible),s.xp6(1),s.Q6J("ngClass",o.dropdownIcon),s.xp6(1),s.Q6J("ngIf",o.overlayVisible))},directives:[ne,Wi,Xt,Ij,Ro,Je,wY,FS,yF,xF],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}"],encapsulation:2,data:{animation:[ns("overlayAnimation",[ur(":enter",[Rn({opacity:0,transform:"scaleY(0.8)"}),dr("{{showTransitionParams}}")]),ur(":leave",[dr("{{hideTransitionParams}}",Rn({opacity:0}))])])]},changeDetection:0}),t})(),yA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Jh,_x,Pj,Pf],Jh,_x]}),t})();function CY(t,i){1&t&&s.GkF(0)}const SP=function(t){return{$implicit:t}};function SY(t,i){if(1&t&&(s.TgZ(0,"div",14),s.YNc(1,CY,1,0,"ng-container",15),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",s.VKq(2,SP,e.paginatorState))}}function EY(t,i){if(1&t&&(s.TgZ(0,"span",16),s._uU(1),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Oqu(e.currentPageReport)}}const vA=function(t){return{"p-disabled":t}};function TY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",17),s.NdJ("click",function(a){return s.CHM(e),s.oxw(2).changePageToFirst(a)}),s._UZ(1,"span",18),s.qZA()}if(2&t){const e=s.oxw(2);s.Q6J("disabled",e.isFirstPage())("ngClass",s.VKq(2,vA,e.isFirstPage()))}}const MY=function(t){return{"p-highlight":t}};function kY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",21),s.NdJ("click",function(a){const v=s.CHM(e).$implicit;return s.oxw(3).onPageLinkClick(a,v-1)}),s._uU(1),s.qZA()}if(2&t){const e=i.$implicit,o=s.oxw(3);s.Q6J("ngClass",s.VKq(2,MY,e-1==o.getPage())),s.xp6(1),s.Oqu(e)}}function AY(t,i){if(1&t&&(s.TgZ(0,"span",19),s.YNc(1,kY,2,4,"button",20),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",e.pageLinks)}}function DY(t,i){if(1&t&&s._uU(0),2&t){const e=s.oxw(3);s.Oqu(e.currentPageReport)}}function IY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"p-dropdown",22),s.NdJ("onChange",function(a){return s.CHM(e),s.oxw(2).onPageDropdownChange(a)}),s.YNc(1,DY,1,1,"ng-template",23),s.qZA()}if(2&t){const e=s.oxw(2);s.Q6J("options",e.pageItems)("ngModel",e.getPage())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function PY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",24),s.NdJ("click",function(a){return s.CHM(e),s.oxw(2).changePageToLast(a)}),s._UZ(1,"span",25),s.qZA()}if(2&t){const e=s.oxw(2);s.Q6J("disabled",e.isLastPage())("ngClass",s.VKq(2,vA,e.isLastPage()))}}function RY(t,i){1&t&&s.GkF(0)}function OY(t,i){if(1&t&&s.YNc(0,RY,1,0,"ng-container",15),2&t){const e=i.$implicit,o=s.oxw(4);s.Q6J("ngTemplateOutlet",o.dropdownItemTemplate)("ngTemplateOutletContext",s.VKq(2,SP,e))}}function FY(t,i){1&t&&(s.ynx(0),s.YNc(1,OY,1,4,"ng-template",28),s.BQk())}function LY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"p-dropdown",26),s.NdJ("ngModelChange",function(a){return s.CHM(e),s.oxw(2).rows=a})("onChange",function(a){return s.CHM(e),s.oxw(2).onRppChange(a)}),s.YNc(1,FY,2,0,"ng-container",27),s.qZA()}if(2&t){const e=s.oxw(2);s.Q6J("options",e.rowsPerPageItems)("ngModel",e.rows)("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),s.xp6(1),s.Q6J("ngIf",e.dropdownItemTemplate)}}function NY(t,i){1&t&&s.GkF(0)}function BY(t,i){if(1&t&&(s.TgZ(0,"div",29),s.YNc(1,NY,1,0,"ng-container",15),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",s.VKq(2,SP,e.paginatorState))}}function zY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",1),s.YNc(1,SY,2,4,"div",2),s.YNc(2,EY,2,1,"span",3),s.YNc(3,TY,2,4,"button",4),s.TgZ(4,"button",5),s.NdJ("click",function(a){return s.CHM(e),s.oxw().changePageToPrev(a)}),s._UZ(5,"span",6),s.qZA(),s.YNc(6,AY,2,1,"span",7),s.YNc(7,IY,2,4,"p-dropdown",8),s.TgZ(8,"button",9),s.NdJ("click",function(a){return s.CHM(e),s.oxw().changePageToNext(a)}),s._UZ(9,"span",10),s.qZA(),s.YNc(10,PY,2,4,"button",11),s.YNc(11,LY,2,5,"p-dropdown",12),s.YNc(12,BY,2,4,"div",13),s.qZA()}if(2&t){const e=s.oxw();s.Tol(e.styleClass),s.Q6J("ngStyle",e.style)("ngClass","p-paginator p-component"),s.xp6(1),s.Q6J("ngIf",e.templateLeft),s.xp6(1),s.Q6J("ngIf",e.showCurrentPageReport),s.xp6(1),s.Q6J("ngIf",e.showFirstLastIcon),s.xp6(1),s.Q6J("disabled",e.isFirstPage())("ngClass",s.VKq(16,vA,e.isFirstPage())),s.xp6(2),s.Q6J("ngIf",e.showPageLinks),s.xp6(1),s.Q6J("ngIf",e.showJumpToPageDropdown),s.xp6(1),s.Q6J("disabled",e.isLastPage())("ngClass",s.VKq(18,vA,e.isLastPage())),s.xp6(2),s.Q6J("ngIf",e.showFirstLastIcon),s.xp6(1),s.Q6J("ngIf",e.rowsPerPageOptions),s.xp6(1),s.Q6J("ngIf",e.templateRight)}}let VY=(()=>{class t{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new s.vpe,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)||1}calculatePageLinkBoundaries(){let e=this.getPageCount(),o=Math.min(this.pageLinkSize,e),a=Math.max(0,Math.ceil(this.getPage()-o/2)),c=Math.min(e-1,a+o-1);return a=Math.max(0,a-(this.pageLinkSize-(c-a+1))),[a,c]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),a=e[1];for(let c=e[0];c<=a;c++)this.pageLinks.push(c+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let c=0;c<this.getPageCount();c++)this.pageItems.push({label:String(c+1),value:c})}}changePage(e){var o=this.getPageCount();if(e>=0&&e<o){this._first=this.rows*e;var a={page:e,first:this.first,rows:this.rows,pageCount:o};this.updatePageLinks(),this.onPageChange.emit(a),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,o){this.changePage(o),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.getPage()+1)).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-paginator"]],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[s.TTD],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,o){1&e&&s.YNc(0,zY,13,20,"div",0),2&e&&s.Q6J("ngIf",!!o.alwaysShow||o.pageLinks&&o.pageLinks.length>1)},directives:[Xt,Wi,ne,Ex,Ro,Je,JN,bv,Ow,Sv],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-current,.p-paginator-first,.p-paginator-last,.p-paginator-next,.p-paginator-page,.p-paginator-prev{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}"],encapsulation:2,changeDetection:0}),t})(),UY=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,yA,Xk,Jh,Pf],yA,Xk,Jh]}),t})(),KN=(()=>{class t{constructor(e,o){this.el=e,this.ngModel=o}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(Ow,8))},t.\u0275dir=s.lG2({type:t,selectors:[["","pInputText",""]],hostVars:6,hostBindings:function(e,o){1&e&&s.NdJ("input",function(c){return o.onInput(c)}),2&e&&s.ekj("p-inputtext",!0)("p-component",!0)("p-filled",o.filled)}}),t})(),EP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})();function HY(t,i){if(1&t&&s._UZ(0,"span",8),2&t){const e=s.oxw(2).$implicit;s.Tol(e.icon),s.Q6J("ngClass","p-button-icon p-button-icon-left")}}function GY(t,i){if(1&t&&(s.ynx(0),s.YNc(1,HY,1,3,"span",6),s.TgZ(2,"span",7),s._uU(3),s.qZA(),s.BQk()),2&t){const e=s.oxw().$implicit,o=s.oxw();s.xp6(1),s.Q6J("ngIf",e.icon),s.xp6(2),s.Oqu(o.getOptionLabel(e))}}function jY(t,i){1&t&&s.GkF(0)}const YY=function(t,i){return{$implicit:t,index:i}};function qY(t,i){if(1&t&&s.YNc(0,jY,1,0,"ng-container",9),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw();s.Q6J("ngTemplateOutlet",c.itemTemplate)("ngTemplateOutletContext",s.WLB(2,YY,o,a))}}const ZY=function(t,i,e){return{"p-highlight":t,"p-disabled":i,"p-button-icon-only":e}};function WY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",2,3),s.NdJ("click",function(a){const c=s.CHM(e),v=c.$implicit,A=c.index;return s.oxw().onItemClick(a,v,A)})("keydown.enter",function(a){const c=s.CHM(e),v=c.$implicit,A=c.index;return s.oxw().onItemClick(a,v,A)})("blur",function(){return s.CHM(e),s.oxw().onBlur()}),s.YNc(2,GY,4,2,"ng-container",4),s.YNc(3,qY,1,5,"ng-template",null,5,s.W1O),s.qZA()}if(2&t){const e=i.$implicit,o=s.MAs(4),a=s.oxw();s.Tol(e.styleClass),s.Q6J("ngClass",s.kEZ(10,ZY,a.isSelected(e),a.disabled||a.isOptionDisabled(e),e.icon&&!a.getOptionLabel(e))),s.uIk("aria-pressed",a.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",a.disabled?null:a.tabindex)("aria-labelledby",a.getOptionLabel(e)),s.xp6(2),s.Q6J("ngIf",!a.itemTemplate)("ngIfElse",o)}}const $Y={provide:ll,useExisting:(0,s.Gpc)(()=>XY),multi:!0};let XY=(()=>{class t{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new s.vpe,this.onChange=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?Ci.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ci.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ci.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,o,a){this.disabled||this.isOptionDisabled(o)||(this.multiple?this.isSelected(o)?this.removeOption(o):this.value=[...this.value||[],this.getOptionValue(o)]:this.value=this.getOptionValue(o),this.onOptionClick.emit({originalEvent:e,option:o,index:a}),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(o=>!Ci.equals(o,this.getOptionValue(e),this.dataKey))}isSelected(e){let o=!1,a=this.getOptionValue(e);if(this.multiple){if(this.value)for(let c of this.value)if(Ci.equals(c,a,this.dataKey)){o=!0;break}}else o=Ci.equals(this.getOptionValue(e),this.value,this.dataKey);return o}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-selectButton"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,s.Rgc,5),2&e){let c;s.iGM(c=s.CRH())&&(o.itemTemplate=c.first)}},inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[s._Bn([$Y])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.YNc(1,WY,5,14,"div",1),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",o.style),s.xp6(1),s.Q6J("ngForOf",o.options))},directives:[ne,Wi,Je,Ex,Xt,Ro],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}.p-button-label{transition:all .2s}"],encapsulation:2,changeDetection:0}),t})(),QY=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Pf]]}),t})();const JY=function(t,i,e){return{"p-checkbox-label-active":t,"p-disabled":i,"p-checkbox-label-focus":e}};function KY(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"label",7),s.NdJ("click",function(a){s.CHM(e);const c=s.oxw(),v=s.MAs(3);return c.onClick(a,v)}),s._uU(1),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("ngClass",s.kEZ(3,JY,null!=e.value,e.disabled,e.focused)),s.uIk("for",e.inputId),s.xp6(1),s.Oqu(e.label)}}const eq=function(t,i){return{"p-checkbox p-component":!0,"p-checkbox-disabled":t,"p-checkbox-focused":i}},tq=function(t,i,e){return{"p-highlight":t,"p-disabled":i,"p-focus":e}},nq={provide:ll,useExisting:(0,s.Gpc)(()=>iq),multi:!0};let iq=(()=>{class t{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,o){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,o.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-triStateCheckbox"]],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[s._Bn([nq])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,o){if(1&e){const a=s.EpF();s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"input",2,3),s.NdJ("keyup",function(v){return o.onKeyup(v)})("keydown",function(v){return o.onKeydown(v)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),s.qZA(),s.qZA(),s.TgZ(4,"div",4),s.NdJ("click",function(v){s.CHM(a);const A=s.MAs(3);return o.onClick(v,A)}),s._UZ(5,"span",5),s.qZA(),s.qZA(),s.YNc(6,KY,2,7,"label",6)}2&e&&(s.Tol(o.styleClass),s.Q6J("ngStyle",o.style)("ngClass",s.WLB(14,eq,o.disabled,o.focused)),s.xp6(2),s.Q6J("name",o.name)("readonly",o.readonly)("disabled",o.disabled),s.uIk("id",o.inputId)("tabindex",o.tabindex)("aria-labelledby",o.ariaLabelledBy),s.xp6(2),s.Q6J("ngClass",s.kEZ(17,tq,null!=o.value,o.disabled,o.focused)),s.uIk("aria-checked",!0===o.value),s.xp6(1),s.Q6J("ngClass",!0===o.value?o.checkboxTrueIcon:!1===o.value?o.checkboxFalseIcon:""),s.xp6(1),s.Q6J("ngIf",o.label))},directives:[Wi,ne,Xt],encapsulation:2,changeDetection:0}),t})(),rq=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})();const oq=["container"],sq=["inputfield"],aq=["contentWrapper"];function lq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(a){s.CHM(e),s.oxw();const c=s.MAs(1);return s.oxw().onButtonClick(a,c)}),s.qZA()}if(2&t){const e=s.oxw(2);s.Q6J("icon",e.icon)("disabled",e.disabled)}}function cq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"input",4,5),s.NdJ("focus",function(a){return s.CHM(e),s.oxw().onInputFocus(a)})("keydown",function(a){return s.CHM(e),s.oxw().onInputKeydown(a)})("click",function(){return s.CHM(e),s.oxw().onInputClick()})("blur",function(a){return s.CHM(e),s.oxw().onInputBlur(a)})("input",function(a){return s.CHM(e),s.oxw().onUserInput(a)}),s.qZA(),s.YNc(2,lq,1,2,"button",6)}if(2&t){const e=s.oxw();s.Tol(e.inputStyleClass),s.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),s.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),s.xp6(2),s.Q6J("ngIf",e.showIcon)}}function uq(t,i){1&t&&s.GkF(0)}function hq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",27),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(4).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(4).onPrevButtonClick(a)}),s._UZ(1,"span",28),s.qZA()}}function dq(t,i){if(1&t&&(s.TgZ(0,"span",29),s._uU(1),s.qZA()),2&t){const e=s.oxw().$implicit,o=s.oxw(3);s.xp6(1),s.Oqu(o.getTranslation("monthNames")[e.month])}}function pq(t,i){if(1&t&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&t){const e=i.$implicit,o=i.index,a=s.oxw(2).$implicit;s.Q6J("value",o)("selected",o===a.month),s.xp6(1),s.Oqu(e)}}function fq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"select",30),s.NdJ("change",function(a){return s.CHM(e),s.oxw(4).onMonthDropdownChange(a.target.value)}),s.YNc(1,pq,2,3,"option",31),s.qZA()}if(2&t){const e=s.oxw(4);s.xp6(1),s.Q6J("ngForOf",e.getTranslation("monthNames"))}}function mq(t,i){if(1&t&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&t){const e=i.$implicit,o=s.oxw(5);s.Q6J("value",e)("selected",e===o.currentYear),s.xp6(1),s.Oqu(e)}}function gq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"select",33),s.NdJ("change",function(a){return s.CHM(e),s.oxw(4).onYearDropdownChange(a.target.value)}),s.YNc(1,mq,2,3,"option",31),s.qZA()}if(2&t){const e=s.oxw(4);s.xp6(1),s.Q6J("ngForOf",e.yearOptions)}}function _q(t,i){if(1&t&&(s.TgZ(0,"span",34),s._uU(1),s.qZA()),2&t){const e=s.oxw().$implicit,o=s.oxw(3);s.xp6(1),s.Oqu("month"===o.view?o.currentYear:e.year)}}function yq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",35),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(4).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(4).onNextButtonClick(a)}),s._UZ(1,"span",36),s.qZA()}}function vq(t,i){if(1&t&&(s.TgZ(0,"th",42),s.TgZ(1,"span"),s._uU(2),s.qZA(),s.qZA()),2&t){const e=s.oxw(5);s.xp6(2),s.Oqu(e.getTranslation("weekHeader"))}}function bq(t,i){if(1&t&&(s.TgZ(0,"th",43),s.TgZ(1,"span"),s._uU(2),s.qZA(),s.qZA()),2&t){const e=i.$implicit;s.xp6(2),s.Oqu(e)}}function xq(t,i){if(1&t&&(s.TgZ(0,"td",46),s.TgZ(1,"span",47),s._uU(2),s.qZA(),s.qZA()),2&t){const e=s.oxw().index,o=s.oxw(2).$implicit;s.xp6(2),s.hij(" ",o.weekNumbers[e]," ")}}function wq(t,i){if(1&t&&(s.ynx(0),s._uU(1),s.BQk()),2&t){const e=s.oxw(2).$implicit;s.xp6(1),s.Oqu(e.day)}}function Cq(t,i){1&t&&s.GkF(0)}const e3=function(t,i){return{"p-highlight":t,"p-disabled":i}},Sq=function(t){return{$implicit:t}};function Eq(t,i){if(1&t){const e=s.EpF();s.ynx(0),s.TgZ(1,"span",49),s.NdJ("click",function(a){s.CHM(e);const c=s.oxw().$implicit;return s.oxw(6).onDateSelect(a,c)})("keydown",function(a){s.CHM(e);const c=s.oxw().$implicit,v=s.oxw(3).index;return s.oxw(3).onDateCellKeydown(a,c,v)}),s.YNc(2,wq,2,1,"ng-container",11),s.YNc(3,Cq,1,0,"ng-container",50),s.qZA(),s.BQk()}if(2&t){const e=s.oxw().$implicit,o=s.oxw(6);s.xp6(1),s.Q6J("ngClass",s.WLB(4,e3,o.isSelected(e),!e.selectable)),s.xp6(1),s.Q6J("ngIf",!o.dateTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",o.dateTemplate)("ngTemplateOutletContext",s.VKq(7,Sq,e))}}const Tq=function(t,i){return{"p-datepicker-other-month":t,"p-datepicker-today":i}};function Mq(t,i){if(1&t&&(s.TgZ(0,"td",48),s.YNc(1,Eq,4,9,"ng-container",11),s.qZA()),2&t){const e=i.$implicit,o=s.oxw(6);s.Q6J("ngClass",s.WLB(2,Tq,e.otherMonth,e.today)),s.xp6(1),s.Q6J("ngIf",!e.otherMonth||o.showOtherMonths)}}function kq(t,i){if(1&t&&(s.TgZ(0,"tr"),s.YNc(1,xq,3,1,"td",44),s.YNc(2,Mq,2,5,"td",45),s.qZA()),2&t){const e=i.$implicit,o=s.oxw(5);s.xp6(1),s.Q6J("ngIf",o.showWeek),s.xp6(1),s.Q6J("ngForOf",e)}}function Aq(t,i){if(1&t&&(s.TgZ(0,"div",37),s.TgZ(1,"table",38),s.TgZ(2,"thead"),s.TgZ(3,"tr"),s.YNc(4,vq,3,1,"th",39),s.YNc(5,bq,3,1,"th",40),s.qZA(),s.qZA(),s.TgZ(6,"tbody"),s.YNc(7,kq,3,2,"tr",41),s.qZA(),s.qZA(),s.qZA()),2&t){const e=s.oxw().$implicit,o=s.oxw(3);s.xp6(4),s.Q6J("ngIf",o.showWeek),s.xp6(1),s.Q6J("ngForOf",o.weekDays),s.xp6(2),s.Q6J("ngForOf",e.dates)}}function Dq(t,i){if(1&t&&(s.TgZ(0,"div",17),s.TgZ(1,"div",18),s.YNc(2,hq,2,0,"button",19),s.TgZ(3,"div",20),s.YNc(4,dq,2,1,"span",21),s.YNc(5,fq,2,1,"select",22),s.YNc(6,gq,2,1,"select",23),s.YNc(7,_q,2,1,"span",24),s.qZA(),s.YNc(8,yq,2,0,"button",25),s.qZA(),s.YNc(9,Aq,8,3,"div",26),s.qZA()),2&t){const e=i.index,o=s.oxw(3);s.xp6(2),s.Q6J("ngIf",0===e),s.xp6(2),s.Q6J("ngIf",!o.monthNavigator&&"month"!==o.view),s.xp6(1),s.Q6J("ngIf",o.monthNavigator&&"month"!==o.view&&1===o.numberOfMonths),s.xp6(1),s.Q6J("ngIf",o.yearNavigator&&1===o.numberOfMonths),s.xp6(1),s.Q6J("ngIf",!o.yearNavigator),s.xp6(1),s.Q6J("ngIf",1===o.numberOfMonths||e===o.numberOfMonths-1),s.xp6(1),s.Q6J("ngIf","date"===o.view)}}function Iq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"span",53),s.NdJ("click",function(a){const v=s.CHM(e).index;return s.oxw(4).onMonthSelect(a,v)})("keydown",function(a){const v=s.CHM(e).index;return s.oxw(4).onMonthCellKeydown(a,v)}),s._uU(1),s.qZA()}if(2&t){const e=i.$implicit,o=i.index,a=s.oxw(4);s.Q6J("ngClass",s.WLB(2,e3,a.isMonthSelected(o),!a.isSelectable(1,o,a.currentYear,!1))),s.xp6(1),s.hij(" ",e," ")}}function Pq(t,i){if(1&t&&(s.TgZ(0,"div",51),s.YNc(1,Iq,2,5,"span",52),s.qZA()),2&t){const e=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",e.monthPickerValues)}}function Rq(t,i){if(1&t&&(s.ynx(0),s.TgZ(1,"div",14),s.YNc(2,Dq,10,7,"div",15),s.qZA(),s.YNc(3,Pq,2,1,"div",16),s.BQk()),2&t){const e=s.oxw(2);s.xp6(2),s.Q6J("ngForOf",e.months),s.xp6(1),s.Q6J("ngIf","month"===e.view)}}function Oq(t,i){1&t&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function Fq(t,i){1&t&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function Lq(t,i){if(1&t&&(s.TgZ(0,"div",59),s.TgZ(1,"span"),s._uU(2),s.qZA(),s.qZA()),2&t){const e=s.oxw(3);s.xp6(2),s.Oqu(e.timeSeparator)}}function Nq(t,i){1&t&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function Bq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",64),s.TgZ(1,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(3).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(3).incrementSecond(a)})("mousedown",function(a){return s.CHM(e),s.oxw(3).onTimePickerElementMouseDown(a,2,1)})("mouseup",function(a){return s.CHM(e),s.oxw(3).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(3).onTimePickerElementMouseLeave()}),s._UZ(2,"span",57),s.qZA(),s.TgZ(3,"span"),s.YNc(4,Nq,2,0,"ng-container",11),s._uU(5),s.qZA(),s.TgZ(6,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(3).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(3).decrementSecond(a)})("mousedown",function(a){return s.CHM(e),s.oxw(3).onTimePickerElementMouseDown(a,2,-1)})("mouseup",function(a){return s.CHM(e),s.oxw(3).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(3).onTimePickerElementMouseLeave()}),s._UZ(7,"span",58),s.qZA(),s.qZA()}if(2&t){const e=s.oxw(3);s.xp6(4),s.Q6J("ngIf",e.currentSecond<10),s.xp6(1),s.Oqu(e.currentSecond)}}function zq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",65),s.TgZ(1,"button",66),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(3).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(3).toggleAMPM(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(3).toggleAMPM(a)}),s._UZ(2,"span",57),s.qZA(),s.TgZ(3,"span"),s._uU(4),s.qZA(),s.TgZ(5,"button",66),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(3).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(3).toggleAMPM(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(3).toggleAMPM(a)}),s._UZ(6,"span",58),s.qZA(),s.qZA()}if(2&t){const e=s.oxw(3);s.xp6(4),s.Oqu(e.pm?"PM":"AM")}}function Vq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",54),s.TgZ(1,"div",55),s.TgZ(2,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(2).incrementHour(a)})("mousedown",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseDown(a,0,1)})("mouseup",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(2).onTimePickerElementMouseLeave()}),s._UZ(3,"span",57),s.qZA(),s.TgZ(4,"span"),s.YNc(5,Oq,2,0,"ng-container",11),s._uU(6),s.qZA(),s.TgZ(7,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(2).decrementHour(a)})("mousedown",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseDown(a,0,-1)})("mouseup",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(2).onTimePickerElementMouseLeave()}),s._UZ(8,"span",58),s.qZA(),s.qZA(),s.TgZ(9,"div",59),s.TgZ(10,"span"),s._uU(11),s.qZA(),s.qZA(),s.TgZ(12,"div",60),s.TgZ(13,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(2).incrementMinute(a)})("mousedown",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseDown(a,1,1)})("mouseup",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(2).onTimePickerElementMouseLeave()}),s._UZ(14,"span",57),s.qZA(),s.TgZ(15,"span"),s.YNc(16,Fq,2,0,"ng-container",11),s._uU(17),s.qZA(),s.TgZ(18,"button",56),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw(2).decrementMinute(a)})("mousedown",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseDown(a,1,-1)})("mouseup",function(a){return s.CHM(e),s.oxw(2).onTimePickerElementMouseUp(a)})("mouseleave",function(){return s.CHM(e),s.oxw(2).onTimePickerElementMouseLeave()}),s._UZ(19,"span",58),s.qZA(),s.qZA(),s.YNc(20,Lq,3,1,"div",61),s.YNc(21,Bq,8,2,"div",62),s.YNc(22,zq,7,1,"div",63),s.qZA()}if(2&t){const e=s.oxw(2);s.xp6(5),s.Q6J("ngIf",e.currentHour<10),s.xp6(1),s.Oqu(e.currentHour),s.xp6(5),s.Oqu(e.timeSeparator),s.xp6(5),s.Q6J("ngIf",e.currentMinute<10),s.xp6(1),s.Oqu(e.currentMinute),s.xp6(3),s.Q6J("ngIf",e.showSeconds),s.xp6(1),s.Q6J("ngIf",e.showSeconds),s.xp6(1),s.Q6J("ngIf","12"==e.hourFormat)}}const t3=function(t){return[t]};function Uq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",67),s.TgZ(1,"button",68),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(2).onTodayButtonClick(a)}),s.qZA(),s.TgZ(2,"button",68),s.NdJ("keydown",function(a){return s.CHM(e),s.oxw(2).onContainerButtonKeydown(a)})("click",function(a){return s.CHM(e),s.oxw(2).onClearButtonClick(a)}),s.qZA(),s.qZA()}if(2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("label",e.getTranslation("today"))("ngClass",s.VKq(4,t3,e.todayButtonStyleClass)),s.xp6(1),s.Q6J("label",e.getTranslation("clear"))("ngClass",s.VKq(6,t3,e.clearButtonStyleClass))}}function Hq(t,i){1&t&&s.GkF(0)}const Gq=function(t,i,e,o,a,c){return{"p-datepicker p-component":!0,"p-datepicker-inline":t,"p-disabled":i,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":o,"p-datepicker-monthpicker":a,"p-datepicker-touch-ui":c}},n3=function(t,i){return{showTransitionParams:t,hideTransitionParams:i}},jq=function(t){return{value:"visibleTouchUI",params:t}},Yq=function(t){return{value:"visible",params:t}};function qq(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",8,9),s.NdJ("@overlayAnimation.start",function(a){return s.CHM(e),s.oxw().onOverlayAnimationStart(a)})("@overlayAnimation.done",function(a){return s.CHM(e),s.oxw().onOverlayAnimationDone(a)})("click",function(a){return s.CHM(e),s.oxw().onOverlayClick(a)}),s.Hsn(2),s.YNc(3,uq,1,0,"ng-container",10),s.YNc(4,Rq,4,2,"ng-container",11),s.YNc(5,Vq,23,8,"div",12),s.YNc(6,Uq,3,8,"div",13),s.Hsn(7,1),s.YNc(8,Hq,1,0,"ng-container",10),s.qZA()}if(2&t){const e=s.oxw();s.Tol(e.panelStyleClass),s.Q6J("ngStyle",e.panelStyle)("ngClass",s.HTZ(11,Gq,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?s.VKq(21,jq,s.WLB(18,n3,e.showTransitionOptions,e.hideTransitionOptions)):s.VKq(26,Yq,s.WLB(23,n3,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),s.xp6(3),s.Q6J("ngTemplateOutlet",e.headerTemplate),s.xp6(1),s.Q6J("ngIf",!e.timeOnly),s.xp6(1),s.Q6J("ngIf",e.showTime||e.timeOnly),s.xp6(1),s.Q6J("ngIf",e.showButtonBar),s.xp6(2),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}const Zq=[[["p-header"]],[["p-footer"]]],Wq=function(t,i,e,o){return{"p-calendar":!0,"p-calendar-w-btn":t,"p-calendar-timeonly":i,"p-calendar-disabled":e,"p-focus":o}},$q=["p-header","p-footer"],Xq={provide:ll,useExisting:(0,s.Gpc)(()=>Qq),multi:!0};let Qq=(()=>{class t{constructor(e,o,a,c,v,A){this.el=e,this.renderer=o,this.cd=a,this.zone=c,this.config=v,this.overlayService=A,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.numberOfMonths=1,this.view="date",this.timeSeparator=":",this.focusTrap=!0,this.firstDayOfWeek=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onClose=new s.vpe,this.onSelect=new s.vpe,this.onInput=new s.vpe,this.onTodayClick=new s.vpe,this.onClearClick=new s.vpe,this.onMonthChange=new s.vpe,this.onYearChange=new s.vpe,this.onClickOutside=new s.vpe,this.onShow=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this.convertTo24Hour=function(z,$){return"12"==this.hourFormat?12===z?$?12:0:$?z+12:z:z}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.initFocusableCell())}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const o=e||new Date;this.currentMonth=o.getMonth(),this.currentYear=o.getFullYear(),this.initTime(o),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const o=e.split(":"),a=parseInt(o[0]),c=parseInt(o[1]);this.populateYearOptions(a,c)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){const e=this.defaultDate||new Date;this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),"date"===this.view?(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7):"month"===this.view&&this.createMonthPickerValues(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":this.dateTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.dateTemplate=e.template}})}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,o){this.yearOptions=[];for(let a=e;a<=o;a++)this.yearOptions.push(a)}createWeekDays(){this.weekDays=[];let e=this.firstDayOfWeek,o=this.getTranslation(cl.DAY_NAMES_MIN);for(let a=0;a<7;a++)this.weekDays.push(o[e]),e=6==e?0:++e}createMonthPickerValues(){this.monthPickerValues=[];let e=this.getTranslation(cl.MONTH_NAMES_SHORT);for(let o=0;o<=11;o++)this.monthPickerValues.push(e[o])}createMonths(e,o){this.months=this.months=[];for(let a=0;a<this.numberOfMonths;a++){let c=e+a,v=o;c>11&&(c=c%11-1,v=o+1),this.months.push(this.createMonth(c,v))}}getWeekNumber(e){let o=new Date(e.getTime());o.setDate(o.getDate()+4-(o.getDay()||7));let a=o.getTime();return o.setMonth(0),o.setDate(1),Math.floor(Math.round((a-o.getTime())/864e5)/7)+1}createMonth(e,o){let a=[],c=this.getFirstDayOfMonthIndex(e,o),v=this.getDaysCountInMonth(e,o),A=this.getDaysCountInPrevMonth(e,o),z=1,$=new Date,oe=[],fe=Math.ceil((v+c)/7);for(let ke=0;ke<fe;ke++){let Oe=[];if(0==ke){for(let ct=A-c+1;ct<=A;ct++){let At=this.getPreviousMonthAndYear(e,o);Oe.push({day:ct,month:At.month,year:At.year,otherMonth:!0,today:this.isToday($,ct,At.month,At.year),selectable:this.isSelectable(ct,At.month,At.year,!0)})}let He=7-Oe.length;for(let ct=0;ct<He;ct++)Oe.push({day:z,month:e,year:o,today:this.isToday($,z,e,o),selectable:this.isSelectable(z,e,o,!1)}),z++}else for(let He=0;He<7;He++){if(z>v){let ct=this.getNextMonthAndYear(e,o);Oe.push({day:z-v,month:ct.month,year:ct.year,otherMonth:!0,today:this.isToday($,z-v,ct.month,ct.year),selectable:this.isSelectable(z-v,ct.month,ct.year,!0)})}else Oe.push({day:z,month:e,year:o,today:this.isToday($,z,e,o),selectable:this.isSelectable(z,e,o,!1)});z++}this.showWeek&&oe.push(this.getWeekNumber(new Date(Oe[0].year,Oe[0].month,Oe[0].day))),a.push(Oe)}return{month:e,year:o,dates:a,weekNumbers:oe}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){e.stopPropagation(),this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.view?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){e.stopPropagation(),this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.view?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}onDateSelect(e,o){!this.disabled&&o.selectable?(this.isMultipleSelection()&&this.isSelected(o)?(this.value=this.value.filter((a,c)=>!this.isDateEquals(a,o)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(o)&&this.selectDate(o),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,o){Jt.hasClass(e.target,"p-disabled")||this.onDateSelect(e,{year:this.currentYear,month:o,day:1,selectable:!0})}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let o=0;o<this.value.length;o++)e+=this.formatDateTime(this.value[o]),o!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let a=this.value[1];e=this.formatDateTime(this.value[0]),a&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(a))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let o=null;return e&&(this.timeOnly?o=this.formatTime(e):(o=this.formatDate(e,this.getDateFormat()),this.showTime&&(o+=" "+this.formatTime(e)))),o}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}selectDate(e){let o=new Date(e.year,e.month,e.day);if(this.showTime&&(o.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),o.setMinutes(this.currentMinute),o.setSeconds(this.currentSecond)),this.minDate&&this.minDate>o&&(o=this.minDate,this.setCurrentHourPM(o.getHours()),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds()),this.maxDate&&this.maxDate<o&&(o=this.maxDate,this.setCurrentHourPM(o.getHours()),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds()),this.isSingleSelection())this.updateModel(o);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,o]:[o]);else if(this.isRangeSelection())if(this.value&&this.value.length){let a=this.value[0],c=this.value[1];!c&&o.getTime()>=a.getTime()?c=o:(a=o,c=null),this.updateModel([a,c])}else this.updateModel([o,null]);this.onSelect.emit(o)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let o=null;this.value&&(o=this.value.map(a=>this.formatDateTime(a))),this.onModelChange(o)}}getFirstDayOfMonthIndex(e,o){let a=new Date;a.setDate(1),a.setMonth(e),a.setFullYear(o);let c=a.getDay()+this.getSundayIndex();return c>=7?c-7:c}getDaysCountInMonth(e,o){return 32-this.daylightSavingAdjust(new Date(o,e,32)).getDate()}getDaysCountInPrevMonth(e,o){let a=this.getPreviousMonthAndYear(e,o);return this.getDaysCountInMonth(a.month,a.year)}getPreviousMonthAndYear(e,o){let a,c;return 0===e?(a=11,c=o-1):(a=e-1,c=o),{month:a,year:c}}getNextMonthAndYear(e,o){let a,c;return 11===e?(a=0,c=o+1):(a=e+1,c=o),{month:a,year:c}}getSundayIndex(){return this.firstDayOfWeek>0?7-this.firstDayOfWeek:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let o=!1;for(let a of this.value)if(o=this.isDateEquals(a,e),o)break;return o}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isMonthSelected(e){let o=this.value?Array.isArray(this.value)?this.value[0].getDate():this.value.getDate():1;return this.isSelected({year:this.currentYear,month:e,day:o,selectable:!0})}isDateEquals(e,o){return!!e&&e.getDate()===o.day&&e.getMonth()===o.month&&e.getFullYear()===o.year}isDateBetween(e,o,a){if(e&&o){let v=new Date(a.year,a.month,a.day);return e.getTime()<=v.getTime()&&o.getTime()>=v.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,o,a,c){return e.getDate()===o&&e.getMonth()===a&&e.getFullYear()===c}isSelectable(e,o,a,c){let v=!0,A=!0,z=!0,$=!0;return!(c&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>a||this.minDate.getFullYear()===a&&(this.minDate.getMonth()>o||this.minDate.getMonth()===o&&this.minDate.getDate()>e))&&(v=!1),this.maxDate&&(this.maxDate.getFullYear()<a||this.maxDate.getFullYear()===a&&(this.maxDate.getMonth()<o||this.maxDate.getMonth()===o&&this.maxDate.getDate()<e))&&(A=!1),this.disabledDates&&(z=!this.isDateDisabled(e,o,a)),this.disabledDays&&($=!this.isDayDisabled(e,o,a)),v&&A&&z&&$)}isDateDisabled(e,o,a){if(this.disabledDates)for(let c of this.disabledDates)if(c.getFullYear()===a&&c.getMonth()===o&&c.getDate()===e)return!0;return!1}isDayDisabled(e,o,a){if(this.disabledDays){let v=new Date(a,o,e).getDay();return-1!==this.disabledDays.indexOf(v)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,o){this.overlayVisible?this.hideOverlay():(o.focus(),this.showOverlay())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(Jt.getFocusableElements(this.contentViewChild.nativeElement).forEach(o=>o.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,o,a){const c=e.currentTarget,v=c.parentElement;switch(e.which){case 40:{c.tabIndex="-1";let A=Jt.index(v),z=v.parentElement.nextElementSibling;z?Jt.hasClass(z.children[A].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(z.children[A].children[0].tabIndex="0",z.children[A].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{c.tabIndex="-1";let A=Jt.index(v),z=v.parentElement.previousElementSibling;if(z){let $=z.children[A].children[0];Jt.hasClass($,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):($.tabIndex="0",$.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{c.tabIndex="-1";let A=v.previousElementSibling;if(A){let z=A.children[0];Jt.hasClass(z,"p-disabled")||Jt.hasClass(z.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,a):(z.tabIndex="0",z.focus())}else this.navigateToMonth(!0,a);e.preventDefault();break}case 39:{c.tabIndex="-1";let A=v.nextElementSibling;if(A){let z=A.children[0];Jt.hasClass(z,"p-disabled")?this.navigateToMonth(!1,a):(z.tabIndex="0",z.focus())}else this.navigateToMonth(!1,a);e.preventDefault();break}case 13:this.onDateSelect(e,o),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,o){const a=e.currentTarget;switch(e.which){case 38:case 40:{a.tabIndex="-1";var c=a.parentElement.children,v=Jt.index(a);let A=c[40===e.which?v+3:v-3];A&&(A.tabIndex="0",A.focus()),e.preventDefault();break}case 37:{a.tabIndex="-1";let A=a.previousElementSibling;A&&(A.tabIndex="0",A.focus()),e.preventDefault();break}case 39:{a.tabIndex="-1";let A=a.nextElementSibling;A&&(A.tabIndex="0",A.focus()),e.preventDefault();break}case 13:this.onMonthSelect(e,o),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}navigateToMonth(e,o){if(e)if(1===this.numberOfMonths||0===o)this.navigationState={backward:!0},this.navBackward(event);else{let c=Jt.find(this.contentViewChild.nativeElement.children[o-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),v=c[c.length-1];v.tabIndex="0",v.focus()}else if(1===this.numberOfMonths||o===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let c=Jt.findSingle(this.contentViewChild.nativeElement.children[o+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");c.tabIndex="0",c.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?Jt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():Jt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let o=Jt.find(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e=o[o.length-1]}else e=Jt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.view){let o=Jt.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),a=Jt.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");o.forEach(c=>c.tabIndex=-1),e=a||o[0],0===o.length&&Jt.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(v=>v.tabIndex=-1)}else if(e=Jt.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){e=Jt.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)")||Jt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0")}trapFocus(e){let o=Jt.getFocusableElements(this.contentViewChild.nativeElement);if(o&&o.length>0)if(o[0].ownerDocument.activeElement){let a=o.indexOf(o[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==a||0===a)if(this.focusTrap)o[o.length-1].focus();else{if(-1===a)return this.hideOverlay();if(0===a)return}else o[a-1].focus();else if(-1==a||a===o.length-1){if(!this.focusTrap&&-1!=a)return this.hideOverlay();o[0].focus()}else o[a+1].focus()}else o[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,o,a,c){let v=this.value;const A=this.convertTo24Hour(e,c);this.isRangeSelection()&&(v=this.value[1]||this.value[0]),this.isMultipleSelection()&&(v=this.value[this.value.length-1]);const z=v?v.toDateString():null;return!(this.minDate&&z&&this.minDate.toDateString()===z&&(this.minDate.getHours()>A||this.minDate.getHours()===A&&(this.minDate.getMinutes()>o||this.minDate.getMinutes()===o&&this.minDate.getSeconds()>a))||this.maxDate&&z&&this.maxDate.toDateString()===z&&(this.maxDate.getHours()<A||this.maxDate.getHours()===A&&(this.maxDate.getMinutes()<o||this.maxDate.getMinutes()===o&&this.maxDate.getSeconds()<a)))}incrementHour(e){let a=this.currentHour+this.stepHour,c=this.pm;"24"==this.hourFormat?a=a>=24?a-24:a:"12"==this.hourFormat&&(this.currentHour<12&&a>11&&(c=!this.pm),a=a>=13?a-12:a),this.validateTime(a,this.currentMinute,this.currentSecond,c)&&(this.currentHour=a,this.pm=c),e.preventDefault()}onTimePickerElementMouseDown(e,o,a){this.disabled||(this.repeat(e,null,o,a),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,o,a,c){let v=o||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,a,c),this.cd.markForCheck()},v),a){case 0:1===c?this.incrementHour(e):this.decrementHour(e);break;case 1:1===c?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===c?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let o=this.currentHour-this.stepHour,a=this.pm;"24"==this.hourFormat?o=o<0?24+o:o:"12"==this.hourFormat&&(12===this.currentHour&&(a=!this.pm),o=o<=0?12+o:o),this.validateTime(o,this.currentMinute,this.currentSecond,a)&&(this.currentHour=o,this.pm=a),e.preventDefault()}incrementMinute(e){let o=this.currentMinute+this.stepMinute;o=o>59?o-60:o,this.validateTime(this.currentHour,o,this.currentSecond,this.pm)&&(this.currentMinute=o),e.preventDefault()}decrementMinute(e){let o=this.currentMinute-this.stepMinute;o=o<0?60+o:o,this.validateTime(this.currentHour,o,this.currentSecond,this.pm)&&(this.currentMinute=o),e.preventDefault()}incrementSecond(e){let o=this.currentSecond+this.stepSecond;o=o>59?o-60:o,this.validateTime(this.currentHour,this.currentMinute,o,this.pm)&&(this.currentSecond=o),e.preventDefault()}decrementSecond(e){let o=this.currentSecond-this.stepSecond;o=o<0?60+o:o,this.validateTime(this.currentHour,this.currentMinute,o,this.pm)&&(this.currentSecond=o),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const o=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,o)&&(this.pm=o,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let o=e.target.value;try{let a=this.parseValueFromString(o);this.isValidSelection(a)&&(this.updateModel(a),this.updateUI())}catch(a){this.updateModel(null)}this.filled=null!=o&&o.length,this.onInput.emit(e)}isValidSelection(e){let o=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(o=!1):e.every(a=>this.isSelectable(a.getDate(),a.getMonth(),a.getFullYear(),!1))&&this.isRangeSelection()&&(o=e.length>1&&e[1]>e[0]),o}parseValueFromString(e){if(!e||0===e.trim().length)return null;let o;if(this.isSingleSelection())o=this.parseDateTime(e);else if(this.isMultipleSelection()){let a=e.split(this.multipleSeparator);o=[];for(let c of a)o.push(this.parseDateTime(c.trim()))}else if(this.isRangeSelection()){let a=e.split(" "+this.rangeSeparator+" ");o=[];for(let c=0;c<a.length;c++)o[c]=this.parseDateTime(a[c].trim())}return o}parseDateTime(e){let o,a=e.split(" ");if(this.timeOnly)o=new Date,this.populateTime(o,a[0],a[1]);else{const c=this.getDateFormat();if(this.showTime){let v="12"==this.hourFormat?a.pop():null,A=a.pop();o=this.parseDate(a.join(" "),c),this.populateTime(o,A,v)}else o=this.parseDate(e,c)}return o}populateTime(e,o,a){if("12"==this.hourFormat&&!a)throw"Invalid Time";this.pm="PM"===a||"pm"===a;let c=this.parseTime(o);e.setHours(c.hour),e.setMinutes(c.minute),e.setSeconds(c.second)}updateUI(){let e=this.value||this.defaultDate||new Date;Array.isArray(e)&&(e=e[0]),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(e.getHours()),this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.appendOverlay(),this.autoZIndex&&(this.touchUI?Oc.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Oc.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Oc.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Jt.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.appendTo?Jt.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement):Jt.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement)}enableModality(e){this.mask||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),Jt.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker"),this.maskClickListener=this.renderer.listen(this.mask,"click",a=>{this.disableModality()}),document.body.appendChild(this.mask),Jt.addClass(document.body,"p-overflow-hidden"))}disableModality(){if(this.mask){document.body.removeChild(this.mask);let o,e=document.body.children;for(let a=0;a<e.length;a++)if(Jt.hasClass(e[a],"p-datepicker-mask-scrollblocker")){o=!0;break}o||Jt.removeClass(document.body,"p-overflow-hidden"),this.unbindMaskClickListener(),this.mask=null}}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}writeValue(e){this.value=e,this.value&&"string"==typeof this.value&&(this.value=this.parseValueFromString(this.value)),this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}formatDate(e,o){if(!e)return"";let a;const c=oe=>{const fe=a+1<o.length&&o.charAt(a+1)===oe;return fe&&a++,fe},v=(oe,fe,ke)=>{let Oe=""+fe;if(c(oe))for(;Oe.length<ke;)Oe="0"+Oe;return Oe},A=(oe,fe,ke,Oe)=>c(oe)?Oe[fe]:ke[fe];let z="",$=!1;if(e)for(a=0;a<o.length;a++)if($)"'"!==o.charAt(a)||c("'")?z+=o.charAt(a):$=!1;else switch(o.charAt(a)){case"d":z+=v("d",e.getDate(),2);break;case"D":z+=A("D",e.getDay(),this.getTranslation(cl.DAY_NAMES_SHORT),this.getTranslation(cl.DAY_NAMES));break;case"o":z+=v("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":z+=v("m",e.getMonth()+1,2);break;case"M":z+=A("M",e.getMonth(),this.getTranslation(cl.MONTH_NAMES_SHORT),this.getTranslation(cl.MONTH_NAMES));break;case"y":z+=c("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":z+=e.getTime();break;case"!":z+=1e4*e.getTime()+this.ticksTo1970;break;case"'":c("'")?z+="'":$=!0;break;default:z+=o.charAt(a)}return z}formatTime(e){if(!e)return"";let o="",a=e.getHours(),c=e.getMinutes(),v=e.getSeconds();return"12"==this.hourFormat&&a>11&&12!=a&&(a-=12),o+="12"==this.hourFormat&&0===a?12:a<10?"0"+a:a,o+=":",o+=c<10?"0"+c:c,this.showSeconds&&(o+=":",o+=v<10?"0"+v:v),"12"==this.hourFormat&&(o+=e.getHours()>11?" PM":" AM"),o}parseTime(e){let o=e.split(":");if(o.length!==(this.showSeconds?3:2))throw"Invalid time";let c=parseInt(o[0]),v=parseInt(o[1]),A=this.showSeconds?parseInt(o[2]):null;if(isNaN(c)||isNaN(v)||c>23||v>59||"12"==this.hourFormat&&c>12||this.showSeconds&&(isNaN(A)||A>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==c&&this.pm?c+=12:!this.pm&&12===c&&(c-=12)),{hour:c,minute:v,second:A}}parseDate(e,o){if(null==o||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let a,c,v,He,A=0,z="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),$=-1,oe=-1,fe=-1,ke=-1,Oe=!1,ct=xn=>{let Qn=a+1<o.length&&o.charAt(a+1)===xn;return Qn&&a++,Qn},At=xn=>{let Qn=ct(xn),ii="@"===xn?14:"!"===xn?20:"y"===xn&&Qn?4:"o"===xn?3:2,Or=new RegExp("^\\d{"+("y"===xn?ii:1)+","+ii+"}"),na=e.substring(A).match(Or);if(!na)throw"Missing number at position "+A;return A+=na[0].length,parseInt(na[0],10)},Qt=(xn,Qn,ii)=>{let er=-1,Or=ct(xn)?ii:Qn,na=[];for(let hs=0;hs<Or.length;hs++)na.push([hs,Or[hs]]);na.sort((hs,ac)=>-(hs[1].length-ac[1].length));for(let hs=0;hs<na.length;hs++){let ac=na[hs][1];if(e.substr(A,ac.length).toLowerCase()===ac.toLowerCase()){er=na[hs][0],A+=ac.length;break}}if(-1!==er)return er+1;throw"Unknown name at position "+A},Sn=()=>{if(e.charAt(A)!==o.charAt(a))throw"Unexpected literal at position "+A;A++};for("month"===this.view&&(fe=1),a=0;a<o.length;a++)if(Oe)"'"!==o.charAt(a)||ct("'")?Sn():Oe=!1;else switch(o.charAt(a)){case"d":fe=At("d");break;case"D":Qt("D",this.getTranslation(cl.DAY_NAMES_SHORT),this.getTranslation(cl.DAY_NAMES));break;case"o":ke=At("o");break;case"m":oe=At("m");break;case"M":oe=Qt("M",this.getTranslation(cl.MONTH_NAMES_SHORT),this.getTranslation(cl.MONTH_NAMES));break;case"y":$=At("y");break;case"@":He=new Date(At("@")),$=He.getFullYear(),oe=He.getMonth()+1,fe=He.getDate();break;case"!":He=new Date((At("!")-this.ticksTo1970)/1e4),$=He.getFullYear(),oe=He.getMonth()+1,fe=He.getDate();break;case"'":ct("'")?Sn():Oe=!0;break;default:Sn()}if(A<e.length&&(v=e.substr(A),!/^\s+/.test(v)))throw"Extra/unparsed characters found in date: "+v;if(-1===$?$=(new Date).getFullYear():$<100&&($+=(new Date).getFullYear()-(new Date).getFullYear()%100+($<=z?0:-100)),ke>-1)for(oe=1,fe=ke;c=this.getDaysCountInMonth($,oe-1),!(fe<=c);)oe++,fe-=c;if(He=this.daylightSavingAdjust(new Date($,oe-1,fe)),He.getFullYear()!==$||He.getMonth()+1!==oe||He.getDate()!==fe)throw"Invalid date";return He}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let o=new Date,a={day:o.getDate(),month:o.getMonth(),year:o.getFullYear(),otherMonth:o.getMonth()!==this.currentMonth||o.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,a),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",o=>{this.isOutsideClicked(o)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(o),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new sE(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return Jt.hasClass(e.target,"p-datepicker-prev")||Jt.hasClass(e.target,"p-datepicker-prev-icon")||Jt.hasClass(e.target,"p-datepicker-next")||Jt.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!Jt.isAndroid()&&this.hideOverlay()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindMaskClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.disableModality()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Oc.clear(this.overlay),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(Jm),s.Y36(rE))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-calendar"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,Sv,4),2&e){let c;s.iGM(c=s.CRH())&&(o.templates=c)}},viewQuery:function(e,o){if(1&e&&(s.Gf(oq,5),s.Gf(sq,5),s.Gf(aq,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.containerViewChild=a.first),s.iGM(a=s.CRH())&&(o.inputfieldViewChild=a.first),s.iGM(a=s.CRH())&&(o.content=a.first)}},hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focus)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",numberOfMonths:"numberOfMonths",view:"view",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",firstDayOfWeek:"firstDayOfWeek",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[s._Bn([Xq])],ngContentSelectors:$q,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["class","p-datepicker-month",4,"ngIf"],["tabindex","0","class","p-datepicker-month",3,"change",4,"ngIf"],["tabindex","0","class","p-datepicker-year",3,"change",4,"ngIf"],["class","p-datepicker-year",4,"ngIf"],["class","p-datepicker-next p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],[1,"p-datepicker-month"],["tabindex","0",1,"p-datepicker-month",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],["tabindex","0",1,"p-datepicker-year",3,"change"],[1,"p-datepicker-year"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","mousedown","mouseup","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,o){1&e&&(s.F$t(Zq),s.TgZ(0,"span",0,1),s.YNc(2,cq,3,16,"ng-template",2),s.YNc(3,qq,9,28,"div",3),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",s.l5B(6,Wq,o.showIcon,o.timeOnly,o.disabled,o.focus))("ngStyle",o.style),s.xp6(2),s.Q6J("ngIf",!o.inline),s.xp6(1),s.Q6J("ngIf",o.inline||o.overlayVisible))},directives:[ne,Wi,Xt,aE,Ex,Ro,Je],styles:[".p-calendar{position:relative;display:inline-flex}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{position:static}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-next,.p-datepicker-prev{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;margin:0 auto}.p-datepicker td>span,.p-monthpicker-month{justify-content:center;align-items:center;cursor:pointer;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker,.p-timepicker button{display:flex;justify-content:center;align-items:center}.p-timepicker button{cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-calendar .p-datepicker-touch-ui,.p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}"],encapsulation:2,data:{animation:[ns("overlayAnimation",[co("visibleTouchUI",Rn({transform:"translate(-50%,-50%)",opacity:1})),ur("void => visible",[Rn({opacity:0,transform:"scaleY(0.8)"}),dr("{{showTransitionParams}}",Rn({opacity:1,transform:"*"}))]),ur("visible => void",[dr("{{hideTransitionParams}}",Rn({opacity:0}))]),ur("void => visibleTouchUI",[Rn({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),dr("{{showTransitionParams}}")]),ur("visibleTouchUI => void",[dr("{{hideTransitionParams}}",Rn({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),t})(),Jq=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,E_,Jh,Pf],E_,Jh]}),t})();const Kq=["input"],r3=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},o3=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function eZ(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"span",5),s.TgZ(1,"button",6),s.NdJ("mousedown",function(a){return s.CHM(e),s.oxw().onUpButtonMouseDown(a)})("mouseup",function(){return s.CHM(e),s.oxw().onUpButtonMouseUp()})("mouseleave",function(){return s.CHM(e),s.oxw().onUpButtonMouseLeave()})("keydown",function(a){return s.CHM(e),s.oxw().onUpButtonKeyDown(a)})("keyup",function(){return s.CHM(e),s.oxw().onUpButtonKeyUp()}),s.qZA(),s.TgZ(2,"button",6),s.NdJ("mousedown",function(a){return s.CHM(e),s.oxw().onDownButtonMouseDown(a)})("mouseup",function(){return s.CHM(e),s.oxw().onDownButtonMouseUp()})("mouseleave",function(){return s.CHM(e),s.oxw().onDownButtonMouseLeave()})("keydown",function(a){return s.CHM(e),s.oxw().onDownButtonKeyDown(a)})("keyup",function(){return s.CHM(e),s.oxw().onDownButtonKeyUp()}),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.xp6(1),s.Tol(e.incrementButtonClass),s.Q6J("ngClass",s.DdM(10,r3))("icon",e.incrementButtonIcon)("disabled",e.disabled),s.xp6(1),s.Tol(e.decrementButtonClass),s.Q6J("ngClass",s.DdM(11,o3))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function tZ(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",6),s.NdJ("mousedown",function(a){return s.CHM(e),s.oxw().onUpButtonMouseDown(a)})("mouseup",function(){return s.CHM(e),s.oxw().onUpButtonMouseUp()})("mouseleave",function(){return s.CHM(e),s.oxw().onUpButtonMouseLeave()})("keydown",function(a){return s.CHM(e),s.oxw().onUpButtonKeyDown(a)})("keyup",function(){return s.CHM(e),s.oxw().onUpButtonKeyUp()}),s.qZA()}if(2&t){const e=s.oxw();s.Tol(e.incrementButtonClass),s.Q6J("ngClass",s.DdM(5,r3))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function nZ(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",6),s.NdJ("mousedown",function(a){return s.CHM(e),s.oxw().onDownButtonMouseDown(a)})("mouseup",function(){return s.CHM(e),s.oxw().onDownButtonMouseUp()})("mouseleave",function(){return s.CHM(e),s.oxw().onDownButtonMouseLeave()})("keydown",function(a){return s.CHM(e),s.oxw().onDownButtonKeyDown(a)})("keyup",function(){return s.CHM(e),s.oxw().onDownButtonKeyUp()}),s.qZA()}if(2&t){const e=s.oxw();s.Tol(e.decrementButtonClass),s.Q6J("ngClass",s.DdM(5,o3))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const iZ=function(t,i,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":t,"p-inputnumber-buttons-horizontal":i,"p-inputnumber-buttons-vertical":e}},rZ={provide:ll,useExisting:(0,s.Gpc)(()=>s3),multi:!0};let s3=(()=>{class t{constructor(e,o){this.el=e,this.cd=o,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.step=1,this.onInput=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onKeyDown=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar="",this._modeOption="decimal",this._useGroupingOption=!0}get locale(){return this._localeOption}set locale(e){this._localeOption=e,this.updateConstructParser()}get localeMatcher(){return this._localeMatcherOption}set localeMatcher(e){this._localeMatcherOption=e,this.updateConstructParser()}get mode(){return this._modeOption}set mode(e){this._modeOption=e,this.updateConstructParser()}get currency(){return this._currencyOption}set currency(e){this._currencyOption=e,this.updateConstructParser()}get currencyDisplay(){return this._currencyDisplayOption}set currencyDisplay(e){this._currencyDisplayOption=e,this.updateConstructParser()}get useGrouping(){return this._useGroupingOption}set useGrouping(e){this._useGroupingOption=e,this.updateConstructParser()}get minFractionDigits(){return this._minFractionDigitsOption}set minFractionDigits(e){this._minFractionDigitsOption=e,this.updateConstructParser()}get maxFractionDigits(){return this._maxFractionDigitsOption}set maxFractionDigits(e){this._maxFractionDigitsOption=e,this.updateConstructParser()}get prefix(){return this._prefixOption}set prefix(e){this._prefixOption=e,this.updateConstructParser()}get suffix(){return this._suffixOption}set suffix(e){this._suffixOption=e,this.updateConstructParser()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),o=new Map(e.map((a,c)=>[a,c]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._decimal=this.getDecimalExpression(),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=a=>o.get(a)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(1.1).trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._decimal,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let a=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(a=this.prefix+a),this.suffix&&(a+=this.suffix),a}return e.toString()}return""}parseValue(e){let o=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(o){if("-"===o)return o;let a=+o;return isNaN(a)?null:a}return null}repeat(e,o,a){let c=o||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,a)},c),this.spin(e,a)}spin(e,o){let a=this.step*o,c=this.parseValue(this.input.nativeElement.value)||0,v=this.validateValue(c+a);this.maxlength&&this.maxlength<this.formatValue(v).length||(this.updateInput(v,null,"spin"),this.updateModel(e,v),this.handleOnInput(e,c,v))}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1}onInputKeyDown(e){if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let o=e.target.selectionStart,a=e.target.selectionEnd,c=e.target.value,v=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(c.charAt(o-1))||e.preventDefault();break;case 39:this.isNumeralChar(c.charAt(o))||e.preventDefault();break;case 13:let A=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(A),this.input.nativeElement.setAttribute("aria-valuenow",A),this.updateModel(e,A);break;case 8:if(e.preventDefault(),o===a){let z=c.charAt(o-1),$=c.search(this._decimal);this._decimal.lastIndex=0,this.isNumeralChar(z)&&(this._group.test(z)?(this._group.lastIndex=0,v=c.slice(0,o-2)+c.slice(o-1)):this._decimal.test(z)?(this._decimal.lastIndex=0,this.input.nativeElement.setSelectionRange(o-1,o-1)):$>0&&o>$?v=c.slice(0,o-1)+"0"+c.slice(o):$>0&&1===$?(v=c.slice(0,o-1)+"0"+c.slice(o),v=this.parseValue(v)>0?v:""):v=c.slice(0,o-1)+c.slice(o)),this.updateValue(e,v,null,"delete-single")}else v=this.deleteRange(c,o,a),this.updateValue(e,v,null,"delete-range");break;case 46:if(e.preventDefault(),o===a){let z=c.charAt(o),$=c.search(this._decimal);this._decimal.lastIndex=0,this.isNumeralChar(z)&&(this._group.test(z)?(this._group.lastIndex=0,v=c.slice(0,o)+c.slice(o+2)):this._decimal.test(z)?(this._decimal.lastIndex=0,this.input.nativeElement.setSelectionRange(o+1,o+1)):$>0&&o>$?v=c.slice(0,o)+"0"+c.slice(o+1):$>0&&1===$?(v=c.slice(0,o)+"0"+c.slice(o+1),v=this.parseValue(v)>0?v:""):v=c.slice(0,o)+c.slice(o+1)),this.updateValue(e,v,null,"delete-back-single")}else v=this.deleteRange(c,o,a),this.updateValue(e,v,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){e.preventDefault();let o=e.which||e.keyCode,a=String.fromCharCode(o);const c=this.isDecimalSign(a),v=this.isMinusSign(a);(48<=o&&o<=57||v||c)&&this.insert(e,a,{isDecimalSign:c,isMinusSign:v})}onPaste(e){if(!this.disabled){e.preventDefault();let o=(e.clipboardData||window.clipboardData).getData("Text");if(o){let a=this.parseValue(o);null!=a&&this.insert(e,a.toString())}}}isMinusSign(e){return!!this._minusSign.test(e)&&(this._minusSign.lastIndex=0,!0)}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}insert(e,o,a={isDecimalSign:!1,isMinusSign:!1}){let c=this.input.nativeElement.selectionStart,v=this.input.nativeElement.selectionEnd,A=this.input.nativeElement.value.trim();const z=A.search(this._decimal);this._decimal.lastIndex=0;const $=A.search(this._minusSign);let oe;if(this._minusSign.lastIndex=0,a.isMinusSign)0===c&&(oe=A,(-1===$||0!==v)&&(oe=this.insertText(A,o,0,v)),this.updateValue(e,oe,o,"insert"));else if(a.isDecimalSign)z>0&&c===z?this.updateValue(e,A,o,"insert"):z>c&&z<v&&(oe=this.insertText(A,o,c,v),this.updateValue(e,oe,o,"insert"));else{const fe=this.numberFormat.resolvedOptions().maximumFractionDigits,ke=c!==v?"range-insert":"insert";z>0&&c>z?c+o.length-(z+1)<=fe&&(oe=A.slice(0,c)+o+A.slice(c+o.length),this.updateValue(e,oe,o,ke)):(oe=this.insertText(A,o,c,v),this.updateValue(e,oe,o,ke))}}insertText(e,o,a,c){if(2==o.split(".").length){const A=e.slice(a,c).search(this._decimal);return this._decimal.lastIndex=0,A>0?e.slice(0,a)+this.formatValue(o)+e.slice(c):e||this.formatValue(o)}return c-a===e.length?this.formatValue(o):0===a?o+e.slice(c):c===e.length?e.slice(0,a)+o:e.slice(0,a)+o+e.slice(c)}deleteRange(e,o,a){let c;return c=a-o===e.length?"":0===o?e.slice(a):a===e.length?e.slice(0,o):e.slice(0,o)+e.slice(a),c}initCursor(){let e=this.input.nativeElement.selectionStart,o=this.input.nativeElement.value,a=o.length,c=null,v=o.charAt(e);if(this.isNumeralChar(v))return;let A=e-1;for(;A>=0;){if(v=o.charAt(A),this.isNumeralChar(v)){c=A;break}A--}if(null!==c)this.input.nativeElement.setSelectionRange(c+1,c+1);else{for(A=e+1;A<a;){if(v=o.charAt(A),this.isNumeralChar(v)){c=A;break}A++}null!==c&&this.input.nativeElement.setSelectionRange(c,c)}}onInputClick(){this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,o,a,c){let v=this.input.nativeElement.value,A=null;null!=o&&(A=this.parseValue(o),this.updateInput(A,a,c)),this.handleOnInput(e,v,A)}handleOnInput(e,o,a){this.isValueChanged(o,a)&&this.onInput.emit({originalEvent:e,value:a})}isValueChanged(e,o){return null===o&&null!==e||null!=o&&o!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return null!==this.min&&e<this.min?this.min:null!==this.max&&e>this.max?this.max:"-"===e?null:e}updateInput(e,o,a){o=o||"";let c=this.input.nativeElement.value,v=this.formatValue(e),A=c.length;if(0===A){this.input.nativeElement.value=v,this.input.nativeElement.setSelectionRange(0,0),this.initCursor();const $=(this.prefixChar||"").length+o.length;this.input.nativeElement.setSelectionRange($,$)}else{let z=this.input.nativeElement.selectionStart,$=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<v.length)return;this.input.nativeElement.value=v;let oe=v.length;if("range-insert"===a){const fe=this.parseValue((c||"").slice(0,z)),Oe=(null!==fe?fe.toString():"").split("").join(`(${this.groupChar})?`),He=new RegExp(Oe,"g");He.test(v);const ct=o.split("").join(`(${this.groupChar})?`),At=new RegExp(ct,"g");At.test(v.slice(He.lastIndex)),$=He.lastIndex+At.lastIndex,this.input.nativeElement.setSelectionRange($,$)}else if(oe===A)"insert"===a||"delete-back-single"===a?this.input.nativeElement.setSelectionRange($+1,$+1):"delete-single"===a?this.input.nativeElement.setSelectionRange($-1,$-1):("delete-range"===a||"spin"===a)&&this.input.nativeElement.setSelectionRange($,$);else if("delete-back-single"===a){let fe=c.charAt($-1),ke=c.charAt($),Oe=A-oe,He=this._group.test(ke);He&&1===Oe?$+=1:!He&&this.isNumeralChar(fe)&&($+=-1*Oe+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange($,$)}else $+=oe-A,this.input.nativeElement.setSelectionRange($,$)}this.input.nativeElement.setAttribute("aria-valuenow",e)}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let o=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(e,o),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value)}updateModel(e,o){this.value!==o&&(this.value=o,this.onModelChange(o)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-inputNumber"]],viewQuery:function(e,o){if(1&e&&s.Gf(Kq,5),2&e){let a;s.iGM(a=s.CRH())&&(o.input=a.first)}},hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focused)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",step:"step",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown"},features:[s._Bn([rZ])],decls:6,vars:30,consts:[[3,"ngClass","ngStyle"],["pInputText","",3,"ngClass","ngStyle","value","disabled","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,o){1&e&&(s.TgZ(0,"span",0),s.TgZ(1,"input",1,2),s.NdJ("input",function(c){return o.onUserInput(c)})("keydown",function(c){return o.onInputKeyDown(c)})("keypress",function(c){return o.onInputKeyPress(c)})("paste",function(c){return o.onPaste(c)})("click",function(){return o.onInputClick()})("focus",function(c){return o.onInputFocus(c)})("blur",function(c){return o.onInputBlur(c)}),s.qZA(),s.YNc(3,eZ,3,12,"span",3),s.YNc(4,tZ,1,6,"button",4),s.YNc(5,nZ,1,6,"button",4),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",s.kEZ(26,iZ,o.showButtons&&"stacked"===o.buttonLayout,o.showButtons&&"horizontal"===o.buttonLayout,o.showButtons&&"vertical"===o.buttonLayout))("ngStyle",o.style),s.xp6(1),s.Tol(o.inputStyleClass),s.Q6J("ngClass","p-inputnumber-input")("ngStyle",o.inputStyle)("value",o.formattedValue())("disabled",o.disabled),s.uIk("placeholder",o.placeholder)("title",o.title)("id",o.inputId)("size",o.size)("name",o.name)("autocomplete",o.autocomplete)("maxlength",o.maxlength)("tabindex",o.tabindex)("aria-label",o.ariaLabel)("aria-required",o.ariaRequired)("required",o.required)("aria-valuemin",o.min)("aria-valuemax",o.max),s.xp6(2),s.Q6J("ngIf",o.showButtons&&"stacked"===o.buttonLayout),s.xp6(1),s.Q6J("ngIf",o.showButtons&&"stacked"!==o.buttonLayout),s.xp6(1),s.Q6J("ngIf",o.showButtons&&"stacked"!==o.buttonLayout))},directives:[ne,Wi,KN,Xt,aE],styles:[".p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}"],encapsulation:2,changeDetection:0}),t})(),a3=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,EP,E_]]}),t})();const oZ=["container"],sZ=["resizeHelper"],aZ=["reorderIndicatorUp"],lZ=["reorderIndicatorDown"],cZ=["wrapper"],uZ=["table"],hZ=["tableHeader"];function dZ(t,i){if(1&t&&(s.TgZ(0,"div",14),s._UZ(1,"i"),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Tol("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function pZ(t,i){1&t&&s.GkF(0)}function fZ(t,i){if(1&t&&(s.TgZ(0,"div",15),s.YNc(1,pZ,1,0,"ng-container",16),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.captionTemplate)}}function mZ(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"p-paginator",17),s.NdJ("onPageChange",function(a){return s.CHM(e),s.oxw().onPageChange(a)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function gZ(t,i){1&t&&s.GkF(0)}function _Z(t,i){1&t&&s.GkF(0)}function yZ(t,i){if(1&t&&s._UZ(0,"tbody",25),2&t){const e=s.oxw(2);s.Q6J("value",e.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",e.frozenBodyTemplate)("frozen",!0)}}function vZ(t,i){1&t&&s.GkF(0)}const Tv=function(t){return{$implicit:t}};function bZ(t,i){if(1&t&&(s.TgZ(0,"tfoot",26),s.YNc(1,vZ,1,0,"ng-container",20),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.footerGroupedTemplate||e.footerTemplate)("ngTemplateOutletContext",s.VKq(2,Tv,e.columns))}}function xZ(t,i){if(1&t&&(s.TgZ(0,"table",18,19),s.YNc(2,gZ,1,0,"ng-container",20),s.TgZ(3,"thead",21),s.YNc(4,_Z,1,0,"ng-container",20),s.qZA(),s.YNc(5,yZ,1,5,"tbody",22),s._UZ(6,"tbody",23),s.YNc(7,bZ,2,4,"tfoot",24),s.qZA()),2&t){const e=s.oxw();s.Q6J("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),s.xp6(2),s.Q6J("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",s.VKq(11,Tv,e.columns)),s.xp6(2),s.Q6J("ngTemplateOutlet",e.headerGroupedTemplate||e.headerTemplate)("ngTemplateOutletContext",s.VKq(13,Tv,e.columns)),s.xp6(1),s.Q6J("ngIf",e.frozenValue||e.frozenBodyTemplate),s.xp6(1),s.Q6J("value",e.dataToRender)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate),s.xp6(1),s.Q6J("ngIf",e.footerGroupedTemplate||e.footerTemplate)}}function wZ(t,i){1&t&&s.GkF(0)}function CZ(t,i){1&t&&s.GkF(0)}function SZ(t,i){if(1&t&&s._UZ(0,"tbody",25),2&t){const e=s.oxw(2);s.Q6J("value",e.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate)("frozen",!0)}}function EZ(t,i){1&t&&s.GkF(0)}function TZ(t,i){if(1&t&&(s.TgZ(0,"tfoot",26),s.YNc(1,EZ,1,0,"ng-container",20),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.footerGroupedTemplate||e.footerTemplate)("ngTemplateOutletContext",s.VKq(2,Tv,e.columns))}}function MZ(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"cdk-virtual-scroll-viewport",27),s.NdJ("scrolledIndexChange",function(a){return s.CHM(e),s.oxw().onScrollIndexChange(a)}),s.TgZ(1,"table",18,19),s.YNc(3,wZ,1,0,"ng-container",20),s.TgZ(4,"thead",21,28),s.YNc(6,CZ,1,0,"ng-container",20),s.qZA(),s.YNc(7,SZ,1,5,"tbody",22),s._UZ(8,"tbody",23),s.YNc(9,TZ,2,4,"tfoot",24),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.Udp("height","flex"!==e.scrollHeight?e.scrollHeight:void 0),s.Q6J("itemSize",e.virtualRowHeight)("minBufferPx",e.minBufferPx)("maxBufferPx",e.maxBufferPx),s.xp6(1),s.Q6J("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),s.xp6(2),s.Q6J("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",s.VKq(16,Tv,e.columns)),s.xp6(3),s.Q6J("ngTemplateOutlet",e.headerGroupedTemplate||e.headerTemplate)("ngTemplateOutletContext",s.VKq(18,Tv,e.columns)),s.xp6(1),s.Q6J("ngIf",e.frozenValue||e.frozenBodyTemplate),s.xp6(1),s.Q6J("value",e.dataToRender)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate),s.xp6(1),s.Q6J("ngIf",e.footerGroupedTemplate||e.footerTemplate)}}function kZ(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"p-paginator",29),s.NdJ("onPageChange",function(a){return s.CHM(e),s.oxw().onPageChange(a)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function AZ(t,i){1&t&&s.GkF(0)}function DZ(t,i){if(1&t&&(s.TgZ(0,"div",30),s.YNc(1,AZ,1,0,"ng-container",16),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.summaryTemplate)}}function IZ(t,i){1&t&&s._UZ(0,"div",31,32)}function PZ(t,i){1&t&&s._UZ(0,"span",33,34)}function RZ(t,i){1&t&&s._UZ(0,"span",35,36)}const OZ=function(t,i,e,o,a,c,v,A,z,$,oe,fe,ke,Oe){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":t,"p-datatable-auto-layout":i,"p-datatable-resizable":e,"p-datatable-resizable-fit":o,"p-datatable-scrollable":a,"p-datatable-scrollable-vertical":c,"p-datatable-scrollable-horizontal":v,"p-datatable-scrollable-both":A,"p-datatable-flex-scrollable":z,"p-datatable-responsive-stack":$,"p-datatable-responsive-scroll":oe,"p-datatable-responsive":fe,"p-datatable-grouped-header":ke,"p-datatable-grouped-footer":Oe}},FZ=function(t){return{height:t}},LZ=["pTableBody",""];function NZ(t,i){1&t&&s.GkF(0)}const bA=function(t,i,e,o,a){return{$implicit:t,rowIndex:i,columns:e,editing:o,frozen:a}};function BZ(t,i){if(1&t&&(s.ynx(0,3),s.YNc(1,NZ,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.dt.groupHeaderTemplate)("ngTemplateOutletContext",s.qbA(2,bA,o,c.dt.paginator?c.dt.first+a:a,c.columns,"row"===c.dt.editMode&&c.dt.isRowEditing(o),c.frozen))}}function zZ(t,i){1&t&&s.GkF(0)}function VZ(t,i){if(1&t&&(s.ynx(0),s.YNc(1,zZ,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.template)("ngTemplateOutletContext",s.qbA(2,bA,o,c.dt.paginator?c.dt.first+a:a,c.columns,"row"===c.dt.editMode&&c.dt.isRowEditing(o),c.frozen))}}function UZ(t,i){1&t&&s.GkF(0)}const HZ=function(t,i,e,o,a,c,v){return{$implicit:t,rowIndex:i,columns:e,editing:o,frozen:a,rowgroup:c,rowspan:v}};function GZ(t,i){if(1&t&&(s.ynx(0),s.YNc(1,UZ,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.template)("ngTemplateOutletContext",s.Hh0(2,HZ,o,c.dt.paginator?c.dt.first+a:a,c.columns,"row"===c.dt.editMode&&c.dt.isRowEditing(o),c.frozen,c.shouldRenderRowspan(c.value,o,a),c.calculateRowGroupSize(c.value,o,a)))}}function jZ(t,i){1&t&&s.GkF(0)}function YZ(t,i){if(1&t&&(s.ynx(0,3),s.YNc(1,jZ,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.dt.groupFooterTemplate)("ngTemplateOutletContext",s.qbA(2,bA,o,c.dt.paginator?c.dt.first+a:a,c.columns,"row"===c.dt.editMode&&c.dt.isRowEditing(o),c.frozen))}}function qZ(t,i){if(1&t&&(s.YNc(0,BZ,2,8,"ng-container",2),s.YNc(1,VZ,2,8,"ng-container",0),s.YNc(2,GZ,2,10,"ng-container",0),s.YNc(3,YZ,2,8,"ng-container",2)),2&t){const e=i.$implicit,o=i.index,a=s.oxw(2);s.Q6J("ngIf",a.dt.groupHeaderTemplate&&"subheader"===a.dt.rowGroupMode&&a.shouldRenderRowGroupHeader(a.value,e,o)),s.xp6(1),s.Q6J("ngIf","rowspan"!==a.dt.rowGroupMode),s.xp6(1),s.Q6J("ngIf","rowspan"===a.dt.rowGroupMode),s.xp6(1),s.Q6J("ngIf",a.dt.groupFooterTemplate&&"subheader"===a.dt.rowGroupMode&&a.shouldRenderRowGroupFooter(a.value,e,o))}}function ZZ(t,i){if(1&t&&(s.ynx(0),s.YNc(1,qZ,4,4,"ng-template",1),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function WZ(t,i){1&t&&s.GkF(0)}function $Z(t,i){if(1&t&&s.YNc(0,WZ,1,0,"ng-container",4),2&t){const e=i.$implicit,o=i.index,a=s.oxw(2);s.Q6J("ngTemplateOutlet",e?a.template:a.dt.loadingBodyTemplate)("ngTemplateOutletContext",s.qbA(2,bA,e,a.dt.paginator?a.dt.first+o:o,a.columns,"row"===a.dt.editMode&&a.dt.isRowEditing(e),a.frozen))}}function XZ(t,i){if(1&t&&(s.ynx(0),s.YNc(1,$Z,1,8,"ng-template",5),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("cdkVirtualForOf",e.value)("cdkVirtualForTrackBy",e.dt.rowTrackBy)("cdkVirtualForTemplateCacheSize",0)}}function QZ(t,i){1&t&&s.GkF(0)}const xA=function(t,i,e,o,a,c){return{$implicit:t,rowIndex:i,columns:e,expanded:o,editing:a,frozen:c}};function JZ(t,i){if(1&t&&(s.ynx(0),s.YNc(1,QZ,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.template)("ngTemplateOutletContext",s.HTZ(2,xA,o,c.dt.paginator?c.dt.first+a:a,c.columns,c.dt.isRowExpanded(o),"row"===c.dt.editMode&&c.dt.isRowEditing(o),c.frozen))}}function KZ(t,i){1&t&&s.GkF(0)}function eW(t,i){if(1&t&&(s.ynx(0,3),s.YNc(1,KZ,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.dt.groupHeaderTemplate)("ngTemplateOutletContext",s.HTZ(2,xA,o,c.dt.paginator?c.dt.first+a:a,c.columns,c.dt.isRowExpanded(o),"row"===c.dt.editMode&&c.dt.isRowEditing(o),c.frozen))}}function tW(t,i){1&t&&s.GkF(0)}function nW(t,i){1&t&&s.GkF(0)}function iW(t,i){if(1&t&&(s.ynx(0,3),s.YNc(1,nW,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw(2),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.dt.groupFooterTemplate)("ngTemplateOutletContext",s.HTZ(2,xA,o,c.dt.paginator?c.dt.first+a:a,c.columns,c.dt.isRowExpanded(o),"row"===c.dt.editMode&&c.dt.isRowEditing(o),c.frozen))}}const l3=function(t,i,e,o){return{$implicit:t,rowIndex:i,columns:e,frozen:o}};function rW(t,i){if(1&t&&(s.ynx(0),s.YNc(1,tW,1,0,"ng-container",4),s.YNc(2,iW,2,9,"ng-container",2),s.BQk()),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.dt.expandedRowTemplate)("ngTemplateOutletContext",s.l5B(3,l3,o,c.dt.paginator?c.dt.first+a:a,c.columns,c.frozen)),s.xp6(1),s.Q6J("ngIf",c.dt.groupFooterTemplate&&"subheader"===c.dt.rowGroupMode&&c.shouldRenderRowGroupFooter(c.value,o,a))}}function oW(t,i){if(1&t&&(s.YNc(0,JZ,2,9,"ng-container",0),s.YNc(1,eW,2,9,"ng-container",2),s.YNc(2,rW,3,8,"ng-container",0)),2&t){const e=i.$implicit,o=i.index,a=s.oxw(2);s.Q6J("ngIf",!a.dt.groupHeaderTemplate),s.xp6(1),s.Q6J("ngIf",a.dt.groupHeaderTemplate&&"subheader"===a.dt.rowGroupMode&&a.shouldRenderRowGroupHeader(a.value,e,o)),s.xp6(1),s.Q6J("ngIf",a.dt.isRowExpanded(e))}}function sW(t,i){if(1&t&&(s.ynx(0),s.YNc(1,oW,3,3,"ng-template",1),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function aW(t,i){1&t&&s.GkF(0)}function lW(t,i){1&t&&s.GkF(0)}function cW(t,i){if(1&t&&(s.ynx(0),s.YNc(1,lW,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw(),o=e.$implicit,a=e.index,c=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",c.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",s.l5B(2,l3,o,c.dt.paginator?c.dt.first+a:a,c.columns,c.frozen))}}function uW(t,i){if(1&t&&(s.YNc(0,aW,1,0,"ng-container",4),s.YNc(1,cW,2,7,"ng-container",0)),2&t){const e=i.$implicit,o=i.index,a=s.oxw(2);s.Q6J("ngTemplateOutlet",a.template)("ngTemplateOutletContext",s.HTZ(3,xA,e,a.dt.paginator?a.dt.first+o:o,a.columns,a.dt.isRowExpanded(e),"row"===a.dt.editMode&&a.dt.isRowEditing(e),a.frozen)),s.xp6(1),s.Q6J("ngIf",a.dt.isRowExpanded(e))}}function hW(t,i){if(1&t&&(s.ynx(0),s.YNc(1,uW,2,10,"ng-template",1),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function dW(t,i){1&t&&s.GkF(0)}const c3=function(t,i){return{$implicit:t,frozen:i}};function pW(t,i){if(1&t&&(s.ynx(0),s.YNc(1,dW,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",s.WLB(2,c3,e.columns,e.frozen))}}function fW(t,i){1&t&&s.GkF(0)}function mW(t,i){if(1&t&&(s.ynx(0),s.YNc(1,fW,1,0,"ng-container",4),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",s.WLB(2,c3,e.columns,e.frozen))}}const yW=["box"],vW=function(t,i){return{"p-checkbox-box p-component":!0,"p-highlight":t,"p-disabled":i}},bW=function(t){return{"pi pi-check":t}};let wA=(()=>{class t{constructor(){this.sortSource=new Nn.xQ,this.selectionSource=new Nn.xQ,this.contextMenuSource=new Nn.xQ,this.valueSource=new Nn.xQ,this.totalRecordsSource=new Nn.xQ,this.columnsSource=new Nn.xQ,this.resetSource=new Nn.xQ,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next()}onResetChange(){this.resetSource.next()}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),TP=(()=>{class t{constructor(e,o,a,c,v,A){this.el=e,this.zone=o,this.tableService=a,this.cd=c,this.filterService=v,this.overlayService=A,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectionChange=new s.vpe,this.contextMenuSelectionChange=new s.vpe,this.contextMenuSelectionMode="separate",this.rowTrackBy=(z,$)=>$,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.virtualRowHeight=28,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new s.vpe,this.onRowUnselect=new s.vpe,this.onPage=new s.vpe,this.onSort=new s.vpe,this.onFilter=new s.vpe,this.onLazyLoad=new s.vpe,this.onRowExpand=new s.vpe,this.onRowCollapse=new s.vpe,this.onContextMenuSelect=new s.vpe,this.onColResize=new s.vpe,this.onColReorder=new s.vpe,this.onRowReorder=new s.vpe,this.onEditInit=new s.vpe,this.onEditComplete=new s.vpe,this.onEditCancel=new s.vpe,this.onHeaderCheckboxToggle=new s.vpe,this.sortFunction=new s.vpe,this.firstChange=new s.vpe,this.rowsChange=new s.vpe,this.onStateSave=new s.vpe,this.onStateRestore=new s.vpe,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=sP()}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths(),this.scrollable&&("vertical"!==this.scrollDirection||"subheader"===this.rowGroupMode)&&this.updateScrollWidth(),this.scrollable&&this.virtualScroll&&(this.virtualScrollSubscription=this.virtualScrollBody.renderedRangeStream.subscribe(e=>{this.tableHeaderViewChild.nativeElement.style.top=e.start*this.virtualRowHeight*-1+"px"}))}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue),this.scrollable&&("vertical"!==this.scrollDirection||"subheader"===this.rowGroupMode)&&this.updateScrollWidth()),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder(),this.scrollable&&("vertical"!==this.scrollDirection||"subheader"===this.rowGroupMode)&&this.updateScrollWidth()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get dataToRender(){let e=this.filteredValue||this.value;return e?this.paginator&&!this.lazy?e.slice(this.first,this.first+this.rows):e:[]}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(Ci.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(Ci.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let o=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let a=o.metaKey||o.ctrlKey,c=this.getSortMeta(e.field);c?a?c.order=-1*c.order:(this._multiSortMeta=[{field:e.field,order:-1*c.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!a||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){if(this.sortField&&this.sortOrder){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):(this.value.sort((o,a)=>{let c=Ci.resolveFieldData(o,this.sortField),v=Ci.resolveFieldData(a,this.sortField),A=null;return A=null==c&&null!=v?-1:null!=c&&null==v?1:null==c&&null==v?0:"string"==typeof c&&"string"==typeof v?c.localeCompare(v):c<v?-1:c>v?1:0,this.sortOrder*A}),this._value=[...this.value]),this.hasFilter()&&this._filter());let e={field:this.sortField,order:this.sortOrder};this.onSort.emit(e),this.tableService.onSort(e)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,o)=>this.multisortField(e,o,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,o,a,c){let v=Ci.resolveFieldData(e,a[c].field),A=Ci.resolveFieldData(o,a[c].field),z=null;if(null==v&&null!=A)z=-1;else if(null!=v&&null==A)z=1;else if(null==v&&null==A)z=0;else if("string"==typeof v||v instanceof String){if(v.localeCompare&&v!=A)return a[c].order*v.localeCompare(A)}else z=v<A?-1:1;return v==A?a.length-1>c?this.multisortField(e,o,a,c+1):0:a[c].order*z}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let o=0;o<this.multiSortMeta.length;o++)if(this.multiSortMeta[o].field===e)return this.multiSortMeta[o];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let o=!1;if(this.multiSortMeta)for(let a=0;a<this.multiSortMeta.length;a++)if(this.multiSortMeta[a].field==e){o=!0;break}return o}}handleRowClick(e){let o=e.originalEvent.target,a=o.nodeName,c=o.parentElement&&o.parentElement.nodeName;if("INPUT"!=a&&"BUTTON"!=a&&"A"!=a&&"INPUT"!=c&&"BUTTON"!=c&&"A"!=c&&!Jt.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)Jt.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=e.rowIndex,this.selectRange(e.originalEvent,e.rowIndex);else{let v=e.rowData,A=this.isSelected(v),z=!this.rowTouched&&this.metaKeySelection,$=this.dataKey?String(Ci.resolveFieldData(v,this.dataKey)):null;if(this.anchorRowIndex=e.rowIndex,this.rangeRowIndex=e.rowIndex,z){let oe=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(A&&oe){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let fe=this.findIndexInSelection(v);this._selection=this.selection.filter((ke,Oe)=>Oe!=fe),this.selectionChange.emit(this.selection),$&&delete this.selectionKeys[$]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:v,type:"row"})}else this.isSingleSelectionMode()?(this._selection=v,this.selectionChange.emit(v),$&&(this.selectionKeys={},this.selectionKeys[$]=1)):this.isMultipleSelectionMode()&&(oe?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,v],this.selectionChange.emit(this.selection),$&&(this.selectionKeys[$]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex})}else if("single"===this.selectionMode)A?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex})):(this._selection=v,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex}),$&&(this.selectionKeys={},this.selectionKeys[$]=1));else if("multiple"===this.selectionMode)if(A){let oe=this.findIndexInSelection(v);this._selection=this.selection.filter((fe,ke)=>ke!=oe),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex}),$&&delete this.selectionKeys[$]}else this._selection=this.selection?[...this.selection,v]:[v],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:v,type:"row",index:e.rowIndex}),$&&(this.selectionKeys[$]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const o=e.rowData;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=o,this.contextMenuSelectionChange.emit(o),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:o,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(o);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let a=this.isSelected(o),c=this.dataKey?String(Ci.resolveFieldData(o,this.dataKey)):null;a||(this.isSingleSelectionMode()?(this.selection=o,this.selectionChange.emit(o),c&&(this.selectionKeys={},this.selectionKeys[c]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),c&&(this.selectionKeys[c]=1))),this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:o,index:e.rowIndex})}}}selectRange(e,o){let a,c;this.anchorRowIndex>o?(a=o,c=this.anchorRowIndex):this.anchorRowIndex<o?(a=this.anchorRowIndex,c=o):(a=o,c=o),this.lazy&&this.paginator&&(a-=this.first,c-=this.first);let v=[];for(let A=a;A<=c;A++){let z=this.filteredValue?this.filteredValue[A]:this.value[A];if(!this.isSelected(z)){v.push(z),this._selection=[...this.selection,z];let $=this.dataKey?String(Ci.resolveFieldData(z,this.dataKey)):null;$&&(this.selectionKeys[$]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:v,type:"row"})}clearSelectionRange(e){let o,a;this.rangeRowIndex>this.anchorRowIndex?(o=this.anchorRowIndex,a=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(o=this.rangeRowIndex,a=this.anchorRowIndex):(o=this.rangeRowIndex,a=this.rangeRowIndex);for(let c=o;c<=a;c++){let v=this.value[c],A=this.findIndexInSelection(v);this._selection=this.selection.filter(($,oe)=>oe!=A);let z=this.dataKey?String(Ci.resolveFieldData(v,this.dataKey)):null;z&&delete this.selectionKeys[z],this.onRowUnselect.emit({originalEvent:e,data:v,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[Ci.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let o=-1;if(this.selection&&this.selection.length)for(let a=0;a<this.selection.length;a++)if(this.equals(e,this.selection[a])){o=a;break}return o}toggleRowWithRadio(e,o){this.preventSelectionSetterPropagation=!0,this.selection!=o?(this._selection=o,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:o,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(Ci.resolveFieldData(o,this.dataKey))]=1)):(this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:o,type:"radiobutton"})),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,o){this.selection=this.selection||[];let a=this.isSelected(o),c=this.dataKey?String(Ci.resolveFieldData(o,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,a){let v=this.findIndexInSelection(o);this._selection=this.selection.filter((A,z)=>z!=v),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:o,type:"checkbox"}),c&&delete this.selectionKeys[c]}else this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:o,type:"checkbox"}),c&&(this.selectionKeys[c]=1);this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,o){this._selection=o?this.filteredValue?this.filteredValue.slice():this.value.slice():[],this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:o}),this.isStateful()&&this.saveState()}equals(e,o){return"equals"===this.compareSelectionBy?e===o:Ci.equals(e,o,this.dataKey)}filter(e,o,a){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[o]&&delete this.filters[o]:this.filters[o]={value:e,matchMode:a},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,o){this.filter(e,"global",o)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let o=0;o<this.value.length;o++){let A,a=!0,c=!1,v=!1;for(let z in this.filters)if(this.filters.hasOwnProperty(z)&&"global"!==z){v=!0;let $=z,oe=this.filters[$];if(Array.isArray(oe)){for(let fe of oe)if(a=this.executeLocalFilter($,this.value[o],fe),fe.operator===aN.OR&&a||fe.operator===aN.AND&&!a)break}else a=this.executeLocalFilter($,this.value[o],oe);if(!a)break}if(this.filters.global&&!c&&e)for(let z=0;z<e.length&&(c=this.filterService.filters[this.filters.global.matchMode](Ci.resolveFieldData(this.value[o],e[z].field||e[z]),this.filters.global.value,this.filterLocale),!c);z++);A=this.filters.global?v?v&&a&&c:c:v&&a,A&&this.filteredValue.push(this.value[o])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,o,a){let c=a.value,v=a.matchMode||Fc.STARTS_WITH,A=Ci.resolveFieldData(o,e);return this.filterService.filters[v](A,c,this.filterLocale)}hasFilter(){let e=!0;for(let o in this.filters)if(this.filters.hasOwnProperty(o)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}exportCSV(e){let o,a="",c=this.frozenColumns?[...this.frozenColumns,...this.columns]:this.columns;e&&e.selectionOnly?o=this.selection||[]:(o=this.filteredValue||this.value,this.frozenValue&&(o=o?[...this.frozenValue,...o]:this.frozenValue));for(let A=0;A<c.length;A++){let z=c[A];!1!==z.exportable&&z.field&&(a+='"'+(z.header||z.field)+'"',A<c.length-1&&(a+=this.csvSeparator))}o.forEach((A,z)=>{a+="\n";for(let $=0;$<c.length;$++){let oe=c[$];if(!1!==oe.exportable&&oe.field){let fe=Ci.resolveFieldData(A,oe.field);fe=null!=fe?this.exportFunction?this.exportFunction({data:fe,field:oe.field}):String(fe).replace(/"/g,'""'):"",a+='"'+fe+'"',$<c.length-1&&(a+=this.csvSeparator)}}});let v=new Blob([a],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(v,this.exportFilename+".csv");else{let A=document.createElement("a");A.style.display="none",document.body.appendChild(A),void 0!==A.download?(A.setAttribute("href",URL.createObjectURL(v)),A.setAttribute("download",this.exportFilename+".csv"),A.click()):(a="data:text/csv;charset=utf-8,"+a,window.open(encodeURI(a))),document.body.removeChild(A)}}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScrollBody&&this.virtualScrollBody.scrollToIndex(e)}onScrollIndexChange(e){this.lazy&&(this.virtualScrollTimeout&&clearTimeout(this.virtualScrollTimeout),this.virtualScrollTimeout=setTimeout(()=>{let o=Math.floor(e/this.rows),a=0===o?0:(o-1)*this.rows,c=0===o?2*this.rows:3*this.rows;o!==this.virtualPage&&(this.virtualPage=o,this.onLazyLoad.emit({first:a,rows:c,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}))},this.virtualScrollDelay))}scrollTo(e){this.virtualScrollBody?this.virtualScrollBody.scrollTo(e):this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top)}updateEditingCell(e,o,a,c){this.editingCell=e,this.editingCellData=o,this.editingCellField=a,this.editingCellRowIndex=c,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Jt.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(Jt.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let o=String(Ci.resolveFieldData(e,this.dataKey));this.editingRowKeys[o]=!0}saveRowEdit(e,o){if(0===Jt.find(o,".ng-invalid.ng-dirty").length){let a=String(Ci.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[a]}}cancelRowEdit(e){let o=String(Ci.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[o]}toggleRow(e,o){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let a=String(Ci.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[a]?(delete this.expandedRowKeys[a],this.onRowCollapse.emit({originalEvent:o,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[a]=!0,this.onRowExpand.emit({originalEvent:o,data:e})),o&&o.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(Ci.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(Ci.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let o=Jt.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-o+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let o=Jt.getOffset(this.containerViewChild.nativeElement).left;Jt.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-o+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,a=this.resizeColumnElement.offsetWidth+e;if(a>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let v=this.resizeColumnElement.nextElementSibling,A=v.offsetWidth-e;a>15&&A>15&&(this.scrollable?this.resizeTableCells(a,A):(this.resizeColumnElement.style.width=a+"px",v&&(v.style.width=A+"px")))}else if("expand"===this.columnResizeMode){let v=this.tableViewChild.nativeElement.offsetWidth+e;if(this.scrollable){this.resizeTableCells(a,null);let A=Jt.calculateScrollbarWidth(this.wrapperViewChild.nativeElement),z=this.containerViewChild.nativeElement.offsetWidth>v+A;this.tableViewChild.nativeElement.style.width=v+"px",this.wrapperViewChild.nativeElement.style.width=z?v+A+"px":"auto"}else this.tableViewChild.nativeElement.style.width=v+"px",this.resizeColumnElement.style.width=a+"px"}this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",Jt.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,o){let a=Jt.index(this.resizeColumnElement),c=[];Jt.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(z=>c.push(Jt.getOuterWidth(z))),this.destroyStyleElement(),this.createStyleElement();let A="";c.forEach((z,$)=>{let oe=$===a?e:o&&$===a+1?o:z;A+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${$+1}) {\n                    flex: 0 0 ${oe}px;\n                }\n\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${$+1}) {\n                    flex: 0 0 ${oe}px;\n                }\n            `}),this.styleElement.innerHTML=A}onColumnDragStart(e,o){this.reorderIconWidth=Jt.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Jt.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=o,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,o){if(this.reorderableColumns&&this.draggedColumn&&o){e.preventDefault();let a=Jt.getOffset(this.containerViewChild.nativeElement),c=Jt.getOffset(o);if(this.draggedColumn!=o){let v=Jt.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),A=Jt.indexWithinGroup(o,"preorderablecolumn"),z=c.left-a.left,oe=c.left+o.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=c.top-a.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=c.top-a.top+o.offsetHeight+"px",e.pageX>oe?(this.reorderIndicatorUpViewChild.nativeElement.style.left=z+o.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=z+o.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=z-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=z-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),A-v==1&&-1===this.dropPosition||A-v==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,o){if(e.preventDefault(),this.draggedColumn){let a=Jt.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),c=Jt.indexWithinGroup(o,"preorderablecolumn"),v=a!=c;v&&(c-a==1&&-1===this.dropPosition||a-c==1&&1===this.dropPosition)&&(v=!1),v&&c<a&&1===this.dropPosition&&(c+=1),v&&c>a&&-1===this.dropPosition&&(c-=1),v&&(Ci.reorderArray(this.columns,a,c),this.onColReorder.emit({dragIndex:a,dropIndex:c,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,o){this.rowDragging=!0,this.draggedRowIndex=o,e.dataTransfer.setData("text","b")}onRowDragOver(e,o,a){if(this.rowDragging&&this.draggedRowIndex!==o){let c=Jt.getOffset(a).top+Jt.getWindowScrollTop(),v=e.pageY,A=c+Jt.getOuterHeight(a)/2,z=a.previousElementSibling;v<A?(Jt.removeClass(a,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=o,z?Jt.addClass(z,"p-datatable-dragpoint-bottom"):Jt.addClass(a,"p-datatable-dragpoint-top")):(z?Jt.removeClass(z,"p-datatable-dragpoint-bottom"):Jt.addClass(a,"p-datatable-dragpoint-top"),this.droppedRowIndex=o+1,Jt.addClass(a,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,o){let a=o.previousElementSibling;a&&Jt.removeClass(a,"p-datatable-dragpoint-bottom"),Jt.removeClass(o,"p-datatable-dragpoint-bottom"),Jt.removeClass(o,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,o){if(null!=this.droppedRowIndex){let a=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;Ci.reorderArray(this.value,this.draggedRowIndex,a),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:a})}this.onRowDragLeave(e,o),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let o={};this.paginator&&(o.first=this.first,o.rows=this.rows),this.sortField&&(o.sortField=this.sortField,o.sortOrder=this.sortOrder),this.multiSortMeta&&(o.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(o.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(o),this.reorderableColumns&&this.saveColumnOrder(o),this.selection&&(o.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(o.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(o)),this.onStateSave.emit(o)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const o=this.getStorage().getItem(this.stateKey),a=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(o){let v=JSON.parse(o,function(v,A){return"string"==typeof A&&a.test(A)?new Date(A):A});this.paginator&&(void 0!==this.first&&(this.first=v.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=v.rows,this.rowsChange.emit(this.rows))),v.sortField&&(this.restoringSort=!0,this._sortField=v.sortField,this._sortOrder=v.sortOrder),v.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=v.multiSortMeta),v.filters&&(this.restoringFilter=!0,this.filters=v.filters),this.resizableColumns&&(this.columnWidthsState=v.columnWidths,this.tableWidthState=v.tableWidth,this.wrapperWidthState=v.wrapperWidth),v.expandedRowKeys&&(this.expandedRowKeys=v.expandedRowKeys),v.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(v.selection)),this.stateRestored=!0,this.onStateRestore.emit(v)}}saveColumnWidths(e){let o=[];Jt.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(c=>o.push(Jt.getOuterWidth(c))),e.columnWidths=o.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=Jt.getOuterWidth(this.tableViewChild.nativeElement)+"px",e.wrapperWidth=this.wrapperViewChild.nativeElement.style.width)}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&(this.tableWidthState&&(this.tableViewChild.nativeElement.style.width=this.tableWidthState),this.wrapperWidthState&&(this.wrapperViewChild.nativeElement.style.width=this.wrapperWidthState)),this.createStyleElement(),this.scrollable&&e&&e.length>0){let o="";e.forEach((a,c)=>{o+=`\n                            #${this.id} .p-datatable-thead > tr > th:nth-child(${c+1}) {\n                                flex: 0 0 ${a}px;\n                            }\n\n                            #${this.id} .p-datatable-tbody > tr > td:nth-child(${c+1}) {\n                                flex: 0 0 ${a}px;\n                            }\n                        `}),this.styleElement.innerHTML=o}else Jt.find(this.tableViewChild.nativeElement,".p-datatable-thead > tr > th").forEach((o,a)=>{o.style.width=e[a]+"px"})}}saveColumnOrder(e){if(this.columns){let o=[];this.columns.map(a=>{o.push(a.field||a.key)}),e.columnOrder=o}}restoreColumnOrder(){const o=this.getStorage().getItem(this.stateKey);if(o){let c=JSON.parse(o).columnOrder;if(c){let v=[];c.map(A=>{let z=this.findColumnByKey(A);z&&v.push(z)}),this.columnOrderStateRestored=!0,this.columns=v}}}updateScrollWidth(){if(this.tableViewChild&&this.tableViewChild.nativeElement){let e=Jt.getWidth(this.tableViewChild.nativeElement.parentElement);this.tableViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.scrollWidth>e?this.tableViewChild.nativeElement.scrollWidth+"px":e-Jt.calculateScrollbarHeight()+"px"}}findColumnByKey(e){if(!this.columns)return null;for(let o of this.columns)if(o.key===e||o.field===e)return o}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.virtualScrollSubscription&&this.virtualScrollSubscription.unsubscribe(),this.destroyStyleElement(),this.destroyResponsiveStyle()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(wA),s.Y36(s.sBO),s.Y36(sN),s.Y36(rE))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-table"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,Sv,4),2&e){let c;s.iGM(c=s.CRH())&&(o.templates=c)}},viewQuery:function(e,o){if(1&e&&(s.Gf(oZ,5),s.Gf(sZ,5),s.Gf(aZ,5),s.Gf(lZ,5),s.Gf(cZ,5),s.Gf(uZ,5),s.Gf(hZ,5),s.Gf(FS,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.containerViewChild=a.first),s.iGM(a=s.CRH())&&(o.resizeHelperViewChild=a.first),s.iGM(a=s.CRH())&&(o.reorderIndicatorUpViewChild=a.first),s.iGM(a=s.CRH())&&(o.reorderIndicatorDownViewChild=a.first),s.iGM(a=s.CRH())&&(o.wrapperViewChild=a.first),s.iGM(a=s.CRH())&&(o.tableViewChild=a.first),s.iGM(a=s.CRH())&&(o.tableHeaderViewChild=a.first),s.iGM(a=s.CRH())&&(o.virtualScrollBody=a.first)}},inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollDelay:"virtualScrollDelay",virtualRowHeight:"virtualRowHeight",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[s._Bn([wA]),s.TTD],decls:14,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],["role","table","class","p-datatable-table",3,"ngClass","ngStyle",4,"ngIf"],["tabindex","0","class","p-datatable-virtual-scrollable-body",3,"itemSize","height","minBufferPx","maxBufferPx","scrolledIndexChange",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"value","pTableBody","pTableBodyTemplate"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["tabindex","0",1,"p-datatable-virtual-scrollable-body",3,"itemSize","minBufferPx","maxBufferPx","scrolledIndexChange"],["tableHeader",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,o){1&e&&(s.TgZ(0,"div",0,1),s.YNc(2,dZ,2,2,"div",2),s.YNc(3,fZ,2,1,"div",3),s.YNc(4,mZ,1,16,"p-paginator",4),s.TgZ(5,"div",5,6),s.YNc(7,xZ,8,15,"table",7),s.YNc(8,MZ,10,20,"cdk-virtual-scroll-viewport",8),s.qZA(),s.YNc(9,kZ,1,16,"p-paginator",9),s.YNc(10,DZ,2,1,"div",10),s.YNc(11,IZ,2,0,"div",11),s.YNc(12,PZ,2,0,"span",12),s.YNc(13,RZ,2,0,"span",13),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngStyle",o.style)("ngClass",s.rFY(16,OZ,[o.rowHover||o.selectionMode,o.autoLayout,o.resizableColumns,o.resizableColumns&&"fit"===o.columnResizeMode,o.scrollable,o.scrollable&&"vertical"===o.scrollDirection,o.scrollable&&"horizontal"===o.scrollDirection,o.scrollable&&"both"===o.scrollDirection,o.scrollable&&"flex"===o.scrollHeight,"stack"===o.responsiveLayout,"scroll"===o.responsiveLayout,o.responsive,null!=o.headerGroupedTemplate,null!=o.footerGroupedTemplate])),s.uIk("id",o.id),s.xp6(2),s.Q6J("ngIf",o.loading&&o.showLoader),s.xp6(1),s.Q6J("ngIf",o.captionTemplate),s.xp6(1),s.Q6J("ngIf",o.paginator&&("top"===o.paginatorPosition||"both"==o.paginatorPosition)),s.xp6(1),s.Q6J("ngStyle",s.VKq(31,FZ,o.scrollHeight)),s.xp6(2),s.Q6J("ngIf",!o.virtualScroll),s.xp6(1),s.Q6J("ngIf",o.virtualScroll),s.xp6(1),s.Q6J("ngIf",o.paginator&&("bottom"===o.paginatorPosition||"both"==o.paginatorPosition)),s.xp6(1),s.Q6J("ngIf",o.summaryTemplate),s.xp6(1),s.Q6J("ngIf",o.resizableColumns),s.xp6(1),s.Q6J("ngIf",o.reorderableColumns),s.xp6(1),s.Q6J("ngIf",o.reorderableColumns))},directives:function(){return[Wi,ne,Xt,Ro,VY,GW,FS,yF]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-badge,.p-datatable .p-sortable-column .p-sortable-column-icon{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table,.p-datatable-responsive-scroll>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-table,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot,.p-datatable-scrollable .p-datatable-thead{display:block}.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr,.p-datatable-scrollable .p-datatable-thead>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td,.p-datatable-scrollable .p-datatable-thead>tr>th{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable .p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable .p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable .p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th\n.p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot,.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr,.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td,.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th{display:table-cell}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-tbody>tr>td,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-thead>tr>th{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-cancel,.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-down,.p-datatable-reorder-indicator-up{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-clear-button,.p-column-filter-menu-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}cdk-virtual-scroll-viewport{outline:0 none}"],encapsulation:2}),t})(),GW=(()=>{class t{constructor(e,o,a,c){this.dt=e,this.tableService=o,this.cd=a,this.el=c,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}shouldRenderRowGroupHeader(e,o,a){let c=Ci.resolveFieldData(o,this.dt.groupRowsBy),v=e[a-1];return!v||c!==Ci.resolveFieldData(v,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,o,a){let c=Ci.resolveFieldData(o,this.dt.groupRowsBy),v=e[a+1];return!v||c!==Ci.resolveFieldData(v,this.dt.groupRowsBy)}shouldRenderRowspan(e,o,a){let c=Ci.resolveFieldData(o,this.dt.groupRowsBy),v=e[a-1];return!v||c!==Ci.resolveFieldData(v,this.dt.groupRowsBy)}calculateRowGroupSize(e,o,a){let c=Ci.resolveFieldData(o,this.dt.groupRowsBy),v=c,A=0;for(;c===v;){A++;let z=e[++a];if(!z)break;v=Ci.resolveFieldData(z,this.dt.groupRowsBy)}return 1===A?null:A}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=Jt.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=Jt.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(TP),s.Y36(wA),s.Y36(s.sBO),s.Y36(s.SBq))},t.\u0275cmp=s.Xpm({type:t,selectors:[["","pTableBody",""]],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows"},attrs:LZ,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkVirtualFor","",3,"cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"]],template:function(e,o){1&e&&(s.YNc(0,ZZ,2,2,"ng-container",0),s.YNc(1,XZ,2,3,"ng-container",0),s.YNc(2,sW,2,2,"ng-container",0),s.YNc(3,hW,2,2,"ng-container",0),s.YNc(4,pW,2,5,"ng-container",0),s.YNc(5,mW,2,5,"ng-container",0)),2&e&&(s.Q6J("ngIf",!o.dt.expandedRowTemplate&&!o.dt.virtualScroll),s.xp6(1),s.Q6J("ngIf",!o.dt.expandedRowTemplate&&o.dt.virtualScroll),s.xp6(1),s.Q6J("ngIf",o.dt.expandedRowTemplate&&!(o.frozen&&o.dt.frozenExpandedRowTemplate)),s.xp6(1),s.Q6J("ngIf",o.dt.frozenExpandedRowTemplate&&o.frozen),s.xp6(1),s.Q6J("ngIf",o.dt.loading),s.xp6(1),s.Q6J("ngIf",o.dt.isEmpty()&&!o.dt.loading))},directives:[Xt,Je,Ro,xF],encapsulation:2}),t})(),jW=(()=>{class t{constructor(e,o,a){this.dt=e,this.tableService=o,this.cd=a,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),Jt.clearSelection()}onFocus(){Jt.addClass(this.boxViewChild.nativeElement,"p-focus")}onBlur(){Jt.removeClass(this.boxViewChild.nativeElement,"p-focus")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(TP),s.Y36(wA),s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-tableCheckbox"]],viewQuery:function(e,o){if(1&e&&s.Gf(yW,5),2&e){let a;s.iGM(a=s.CRH())&&(o.boxViewChild=a.first)}},inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:14,consts:[[1,"p-checkbox","p-component",3,"click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.NdJ("click",function(c){return o.onClick(c)}),s.TgZ(1,"div",1),s.TgZ(2,"input",2),s.NdJ("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),s.qZA(),s.qZA(),s.TgZ(3,"div",3,4),s._UZ(5,"span",5),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("checked",o.checked)("disabled",o.disabled),s.uIk("id",o.inputId)("name",o.name)("required",o.required)("aria-label",o.ariaLabel),s.xp6(1),s.Q6J("ngClass",s.WLB(9,vW,o.checked,o.disabled)),s.uIk("aria-checked",o.checked),s.xp6(2),s.Q6J("ngClass",s.VKq(12,bW,o.checked)))},directives:[ne],encapsulation:2,changeDetection:0}),t})(),YW=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,UY,EP,yA,_x,Xk,E_,QY,Jq,a3,rq],Jh,_x]}),t})();const qW=["*",[["mat-card-footer"]]],ZW=["*","mat-card-footer"];let u3=(()=>{class t{constructor(e){this._animationMode=e}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(ih,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,o){2&e&&s.ekj("_mat-animation-noopable","NoopAnimations"===o._animationMode)},exportAs:["matCard"],ngContentSelectors:ZW,decls:2,vars:0,template:function(e,o){1&e&&(s.F$t(qW),s.Hsn(0),s.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),h3=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ir],Ir]}),t})();function KW(t,i){1&t&&(s.TgZ(0,"tr"),s._UZ(1,"th",5),s.TgZ(2,"th"),s._uU(3,"Company Name"),s.qZA(),s.TgZ(4,"th"),s._uU(5,"Product"),s.qZA(),s.TgZ(6,"th"),s._uU(7,"Unit Price"),s.qZA(),s.TgZ(8,"th"),s._uU(9,"Quantity"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Total Price"),s.qZA(),s.TgZ(12,"th"),s._uU(13,"Action"),s.qZA(),s.qZA())}function e8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s.TgZ(2,"p-tableCheckbox",6,7),s.NdJ("click",function(a){const c=s.CHM(e),v=c.$implicit,A=c.rowIndex,z=s.MAs(3);return s.oxw().info(v,A,z,a)}),s.qZA(),s.qZA(),s.TgZ(4,"td"),s._uU(5),s.qZA(),s.TgZ(6,"td"),s._uU(7),s.qZA(),s.TgZ(8,"td"),s._uU(9),s.qZA(),s.TgZ(10,"td"),s.TgZ(11,"p-inputNumber",8,9),s.NdJ("ngModelChange",function(a){const v=s.CHM(e).rowIndex;return s.oxw().products[v].quantity=a})("click",function(){const a=s.CHM(e),c=a.rowIndex,v=a.$implicit,A=s.oxw();return A.quantityControl(c,A.products[c].quantity,v.brand,v.price)}),s.qZA(),s.qZA(),s.TgZ(13,"td"),s._uU(14),s.qZA(),s.TgZ(15,"td"),s.TgZ(16,"button",4),s.NdJ("click",function(){const c=s.CHM(e).$implicit;return s.oxw().deleteCart(c.brand)}),s._uU(17,"Delete"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const e=i.$implicit,o=i.rowIndex,a=s.oxw();s.xp6(2),s.Q6J("value",e),s.xp6(3),s.Oqu(e.compname),s.xp6(2),s.Oqu(e.brand),s.xp6(2),s.Oqu(e.price),s.xp6(2),s.Udp("margin-left","-6rem")("text-align","center"),s.Q6J("disabled",a.x3.length>0)("ngModel",a.products[o].quantity)("showButtons",!0)("step",1),s.xp6(3),s.Oqu(e.totalprice),s.xp6(2),s.Q6J("disabled",a.x3.length>0)}}let t8=(()=>{class t{constructor(e,o){this.fs=e,this.router=o,this.products=[],this.selectedProducts3=[],this.cartinfo=[],this.cartinfo2=[],this.isMofile=!1,this.difference=0,this.x=0,this.checkInfo2=[],this.totalprice=0,this.checked=!1,this.overallprice=0,this.overallquantity=0,this.checkInfo=[],this.x1=[],this.x2=[],this.x3=[],this.x4=[],this.total=0,this.total2=0,this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").snapshotChanges().subscribe(a=>{this.cartinfo=[],a.map(c=>{this.totalprice=Number(c.payload.doc.data().quantity)*c.payload.doc.data().price;let v={brand:c.payload.doc.data().brand,price:c.payload.doc.data().price,quantity:c.payload.doc.data().quantity,compname:c.payload.doc.data().compname,totalprice:this.totalprice};this.cartinfo.push(v),this.products=this.cartinfo})}),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("checkout")}ngOnInit(){}info(e,o,a,c){this.status=a.checked,a.checked?(this.x1.push(e),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("checkout").doc(e.brand).set(e),this.overallprice+=a.value.totalprice,this.disablequantity=!0,this.overallquantity+=a.value.quantity,this.x3.push(o)):a.checked||(this.x1.splice(o,1),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("checkout").doc(e.brand).delete(),this.x3.splice(o-this.cartinfo.length,1),this.disablequantity=!1,this.overallprice-=a.value.totalprice,this.overallquantity-=a.value.quantity),new Set(this.x3),0===this.x3.length&&(this.overallprice=0,this.overallquantity=0),this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e.brand).update({totalprice:e.totalprice,quantity:e.quantity})}quantityControl(e,o,a,c){this.total=0,this.total2=0;let v=o*c;this.x2=[],this.x4=[],this.cartinfo.forEach(A=>{this.x2.push(A.quantity*A.price),this.x4.push(A.quantity),console.log(this.x2),console.log(this.x4)});for(let A=0;A<this.x3.length;A++){let $=this.x2[A],oe=this.x4[A];this.total+=$,this.total2+=oe,console.log($),console.log(oe)}this.overallprice=this.total,this.overallquantity=this.total2,this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(a).update({quantity:o,totalprice:v})}totalBar(){this.x1.forEach(e=>{this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e.brand).snapshotChanges().subscribe(o=>{var a;let c=null===(a=o.payload.data())||void 0===a?void 0:a.totalprice;console.log(c)})})}deleteCart(e){this.fs.collection("Admin").doc("oMWhzMQgufX3WpRQs9WsB4JmQFv2").collection("cart").doc(e).delete()}checkout(){this.router.navigateByUrl("/admincheckoutpage",{state:this.x1})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(_u),s.Y36(Lo))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-cart-page"]],decls:10,vars:5,consts:[[1,"card"],["dataKey","brand",3,"value","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["mat-raised-button","",3,"disabled","click"],[2,"width","3rem"],[3,"value","click"],["e",""],["buttonLayout","horizontal","spinnerMode","horizontal","decrementButtonClass","p-button-danger","incrementButtonClass","p-button-success","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"disabled","ngModel","showButtons","step","ngModelChange","click"],["p",""]],template:function(e,o){1&e&&(s._UZ(0,"app-adminnavbarpage"),s.TgZ(1,"div",0),s.TgZ(2,"p-table",1),s.NdJ("selectionChange",function(c){return o.selectedProducts3=c}),s.YNc(3,KW,14,0,"ng-template",2),s.YNc(4,e8,18,14,"ng-template",3),s.qZA(),s.qZA(),s.TgZ(5,"mat-card"),s._uU(6),s.TgZ(7,"span"),s.TgZ(8,"button",4),s.NdJ("click",function(){return o.checkout()}),s._uU(9,"Check Out"),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("value",o.products)("selection",o.selectedProducts3),s.xp6(4),s.AsE("Total (",o.overallquantity,"): RM ",o.overallprice," "),s.xp6(2),s.Q6J("disabled",0==o.x3.length))},directives:[Ym,TP,Sv,u3,mv,jW,s3,bv,Ow],styles:["table[_ngcontent-%COMP%]{width:100%}input[type=number][_ngcontent-%COMP%]{padding:10px}p-inputNumber[_ngcontent-%COMP%]{margin-left:-20px}"]}),t})();var d3="https://js.stripe.com/v3",n8=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,p3="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",CA=null,l8=function(i,e,o){if(null===i)return null;var a=i.apply(void 0,e);return function(i,e){!i||!i._registerWrapper||i._registerWrapper({name:"stripe-js",version:"1.17.1",startTime:e})}(a,o),a},f3=Promise.resolve().then(function(){return i=null,null!==CA||(CA=new Promise(function(e,o){if("undefined"!=typeof window)if(window.Stripe&&i&&console.warn(p3),window.Stripe)e(window.Stripe);else try{var a=function(){for(var i=document.querySelectorAll('script[src^="'.concat(d3,'"]')),e=0;e<i.length;e++){var o=i[e];if(n8.test(o.src))return o}return null}();a&&i?console.warn(p3):a||(a=function(i){var e=i&&!i.advancedFraudSignals?"?advancedFraudSignals=false":"",o=document.createElement("script");o.src="".concat(d3).concat(e);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(o),o}(i)),a.addEventListener("load",function(){window.Stripe?e(window.Stripe):o(new Error("Stripe.js not available"))}),a.addEventListener("error",function(){o(new Error("Failed to load Stripe.js"))})}catch(c){return void o(c)}else e(null)})),CA;var i}),m3=!1;f3.catch(function(t){m3||console.warn(t)});const g3=new s.OlP("angularfire2.functions.origin"),_3=new s.OlP("angularfire2.functions.region"),y3=new s.OlP("angularfire2.functions.new-origin-behavior"),v3=new s.OlP("angularfire2.functions.use-emulator");let b3=(()=>{class t{constructor(e,o,a,c,v,A,z){const $=new Xi.HU(a),oe=z,fe=(0,Xn.of)(void 0).pipe((0,Ps.QV)($.outsideAngular),Rr(()=>nt.e(253).then(nt.bind(nt,1253))),(0,ei.U)(()=>(0,Xi.on)(e,a,o)),(0,ei.U)(ke=>(0,Xi.sI)(`${ke.name}.functions.${c||v}`,"AngularFireFunctions",ke,()=>{let Oe;if(A){if(c&&v)throw new Error("REGION and ORIGIN can't be used at the same time.");Oe=ke.functions(c||v||void 0)}else Oe=ke.functions(c||void 0);return!A&&!oe&&v&&Oe.useFunctionsEmulator(v),oe&&Oe.useEmulator(...oe),Oe},[c,v,oe])),ld({bufferSize:1,refCount:!1}));return this.httpsCallable=(ke,Oe)=>He=>(0,Nr.D)(fe).pipe((0,Ps.QV)($.insideAngular),Rr(ct=>ct.httpsCallable(ke,Oe)(He)),(0,ei.U)(ct=>ct.data)),(0,Xi.pX)(this,fe,a)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Xi.Dh),s.LFG(Xi.xv,8),s.LFG(s.R0b),s.LFG(_3,8),s.LFG(g3,8),s.LFG(y3,8),s.LFG(v3,8))},t.\u0275prov=s.Yz7({factory:function(){return new t(s.LFG(Xi.Dh),s.LFG(Xi.xv,8),s.LFG(s.R0b),s.LFG(_3,8),s.LFG(g3,8),s.LFG(y3,8),s.LFG(v3,8))},token:t,providedIn:"any"}),t})();function h8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"p",3),s.NdJ("change",function(){s.CHM(e);const a=s.oxw().$implicit;return s.oxw(2).hello(a)}),s._uU(1),s.ALo(2,"json"),s.qZA()}if(2&t){const e=s.oxw().$implicit;s.xp6(1),s.Oqu(s.lcZ(2,1,e))}}function d8(t,i){if(1&t&&(s.TgZ(0,"span"),s.YNc(1,h8,3,3,"p",2),s.qZA()),2&t){const e=i.$implicit,o=s.oxw().$implicit;s.xp6(1),s.Q6J("ngIf",o==e.compname)}}function p8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div"),s._uU(1),s.YNc(2,d8,2,1,"span",0),s.TgZ(3,"button",1),s.NdJ("click",function(){return s.CHM(e),s.oxw().donate()}),s._uU(4,"Donate"),s.qZA(),s.qZA()}if(2&t){const e=i.$implicit,o=s.oxw();s.xp6(1),s.hij(" ",e," "),s.xp6(1),s.Q6J("ngForOf",o.x1)}}let f8=(()=>{class t{constructor(e,o,a,c){var v,A;this.activatedroute=e,this.router=o,this.fs=a,this.fns=c,this.checkoutInfoarray=[],this.compname=[],this.x2=[],this.x=0,this.obj=[],this.x3=[],this.obj2=[],this.x4=[],this.x5=[],this.donationAmount=5,this.isGettingCheckout=!1,this.checkoutInfo=null===(v=this.router.getCurrentNavigation())||void 0===v?void 0:v.extras.state,this.checkoutInfoarray=this.checkoutInfo,null==this.checkoutInfo&&this.router.navigateByUrl("/admincartpage"),console.log(this.compname),this.x1=null===(A=this.checkoutInfoarray)||void 0===A?void 0:A.sort(function($,oe){return $.compname<oe.compname?-1:$.compname>oe.compname?1:0}),this.x1.filter(($,oe)=>{this.x2.push($.compname)}),this.compname.filter($=>{console.log($)}),this.x3=[...new Set(this.x2)],console.log(this.x1)}ngOnInit(){}hello(e){console.log(e)}donate(){var e=this;return bo(function*(){e.isGettingCheckout=!0,e.stripe=yield function(){for(var i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];m3=!0;var a=Date.now();return f3.then(function(c){return l8(c,e,a)})}("pk_test_51JWyo0FAyW0TeHuLxronXkW18xbGcUCeGeOnk0CCq3W6Kl8gZ3OViSOqMctnmuMTptcchsU1ZsieUf4LAMHCfwxu00Hd2Nl8Rz"),e.fns.httpsCallable("createCheckoutSession")({product_name:"Glass of Whiskey",quantity:1,unit_amount:e.donationAmount}).toPromise().then(a=>e.stripe.redirectToCheckout({sessionId:a})).catch(a=>console.log("Error Buying a glass of whiskey",a)).finally(()=>e.isGettingCheckout=!1)})()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Pa),s.Y36(Lo),s.Y36(_u),s.Y36(b3))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-check-out-page"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"click"],[3,"change",4,"ngIf"],[3,"change"]],template:function(e,o){1&e&&(s._UZ(0,"app-adminnavbarpage"),s.YNc(1,p8,5,2,"div",0)),2&e&&(s.xp6(1),s.Q6J("ngForOf",o.x3))},directives:[Ym,Je,Xt],pipes:[Gd],styles:[""]}),t})();const m8=function(t,i){return{"p-button-icon":!0,"p-button-icon-left":t,"p-button-icon-right":i}};function g8(t,i){if(1&t&&s._UZ(0,"span",3),2&t){const e=s.oxw();s.Tol(e.checked?e.onIcon:e.offIcon),s.Q6J("ngClass",s.WLB(3,m8,"left"===e.iconPos,"right"===e.iconPos))}}const _8=function(t,i,e){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":t,"p-highlight":i,"p-disabled":e}},y8={provide:ll,useExisting:(0,s.Gpc)(()=>x3),multi:!0};let x3=(()=>{class t{constructor(e){this.cd=e,this.iconPos="left",this.onChange=new s.vpe,this.checked=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}toggle(e){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:e,checked:this.checked}),this.cd.markForCheck())}onBlur(){this.onModelTouched()}writeValue(e){this.checked=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get hasOnLabel(){return this.onLabel&&this.onLabel.length>0}get hasOffLabel(){return this.onLabel&&this.onLabel.length>0}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-toggleButton"]],inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:"tabindex",iconPos:"iconPos"},outputs:{onChange:"onChange"},features:[s._Bn([y8])],decls:4,vars:12,consts:[["role","checkbox","pRipple","",3,"ngClass","ngStyle","click","keydown.enter"],[3,"class","ngClass",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.NdJ("click",function(c){return o.toggle(c)})("keydown.enter",function(c){return o.toggle(c)}),s.YNc(1,g8,1,6,"span",1),s.TgZ(2,"span",2),s._uU(3),s.qZA(),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",s.kEZ(8,_8,o.onIcon&&o.offIcon&&!o.hasOnLabel&&!o.hasOffLabel,o.checked,o.disabled))("ngStyle",o.style),s.uIk("tabindex",o.disabled?null:"0")("aria-checked",o.checked),s.xp6(1),s.Q6J("ngIf",o.onIcon||o.offIcon),s.xp6(2),s.Oqu(o.checked?o.hasOnLabel?o.onLabel:"":o.hasOffLabel?o.offLabel:""))},directives:[Ex,ne,Wi,Xt],styles:[".p-button[_ngcontent-%COMP%]{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label[_ngcontent-%COMP%]{flex:1 1 auto}.p-button-icon-right[_ngcontent-%COMP%]{order:1}.p-button[_ngcontent-%COMP%]:disabled{cursor:default}.p-button-icon-only[_ngcontent-%COMP%]{justify-content:center}.p-button-icon-only[_ngcontent-%COMP%]   .p-button-label[_ngcontent-%COMP%]{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical[_ngcontent-%COMP%]{flex-direction:column}.p-button-icon-bottom[_ngcontent-%COMP%]{order:2}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child){border-right:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus{position:relative;z-index:1}.p-button-label[_ngcontent-%COMP%]{transition:all .2s}"],changeDetection:0}),t})(),v8=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Pf]]}),t})();const w3=["container"],b8=function(t,i,e,o){return{"pi-info-circle":t,"pi-exclamation-triangle":i,"pi-times-circle":e,"pi-check":o}};function x8(t,i){if(1&t&&(s.ynx(0),s._UZ(1,"span",6),s.TgZ(2,"div",7),s.TgZ(3,"div",8),s._uU(4),s.qZA(),s.TgZ(5,"div",9),s._uU(6),s.qZA(),s.qZA(),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Tol("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),s.Q6J("ngClass",s.l5B(5,b8,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),s.xp6(3),s.Oqu(e.message.summary),s.xp6(2),s.Oqu(e.message.detail)}}function w8(t,i){1&t&&s.GkF(0)}function C8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",10),s.NdJ("click",function(a){return s.CHM(e),s.oxw().onCloseIconClick(a)})("keydown.enter",function(a){return s.CHM(e),s.oxw().onCloseIconClick(a)}),s._UZ(1,"span",11),s.qZA()}}const S8=function(t){return[t,"p-toast-message"]},E8=function(t,i,e,o){return{showTransformParams:t,hideTransformParams:i,showTransitionParams:e,hideTransitionParams:o}},T8=function(t){return{value:"visible",params:t}},M8=function(t){return{$implicit:t}};function k8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"p-toastItem",3),s.NdJ("onClose",function(a){return s.CHM(e),s.oxw().onMessageClose(a)})("@toastAnimation.start",function(a){return s.CHM(e),s.oxw().onAnimationStart(a)}),s.qZA()}if(2&t){const e=i.$implicit,o=i.index,a=s.oxw();s.Q6J("message",e)("index",o)("template",a.template)("@toastAnimation",void 0)("showTransformOptions",a.showTransformOptions)("hideTransformOptions",a.hideTransformOptions)("showTransitionOptions",a.showTransitionOptions)("hideTransitionOptions",a.hideTransitionOptions)}}let A8=(()=>{class t{constructor(e){this.zone=e,this.onClose=new s.vpe}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.R0b))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-toastItem"]],viewQuery:function(e,o){if(1&e&&s.Gf(w3,5),2&e){let a;s.iGM(a=s.CRH())&&(o.containerViewChild=a.first)}},inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0,1),s.NdJ("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()}),s.TgZ(2,"div",2),s.YNc(3,x8,7,10,"ng-container",3),s.YNc(4,w8,1,0,"ng-container",4),s.YNc(5,C8,2,0,"button",5),s.qZA(),s.qZA()),2&e&&(s.Tol(o.message.styleClass),s.Q6J("ngClass",s.VKq(10,S8,"p-toast-message-"+o.message.severity))("@messageState",s.VKq(17,T8,s.l5B(12,E8,o.showTransformOptions,o.hideTransformOptions,o.showTransitionOptions,o.hideTransitionOptions))),s.uIk("id",o.message.id),s.xp6(2),s.Q6J("ngClass",o.message.contentStyleClass),s.xp6(1),s.Q6J("ngIf",!o.template),s.xp6(1),s.Q6J("ngTemplateOutlet",o.template)("ngTemplateOutletContext",s.VKq(19,M8,o.message)),s.xp6(1),s.Q6J("ngIf",!1!==o.message.closable))},directives:[ne,Xt,Ro,Ex],encapsulation:2,data:{animation:[ns("messageState",[co("visible",Rn({transform:"translateY(0)",opacity:1})),ur("void => *",[Rn({transform:"{{showTransformParams}}",opacity:0}),dr("{{showTransitionParams}}")]),ur("* => void",[dr("{{hideTransitionParams}}",Rn({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),t})(),D8=(()=>{class t{constructor(e,o,a){this.messageService=e,this.cd=o,this.config=a,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new s.vpe,this.id=sP()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const o=e.filter(a=>this.canAdd(a));this.add(o)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.autoZIndex&&Oc.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal),this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let o=this.key===e.key;return o&&this.preventOpenDuplicates&&(o=!this.containsMessage(this.messages,e)),o&&this.preventDuplicates&&(o=!this.containsMessage(this.messagesArchieve,e)),o}containsMessage(e,o){return!!e&&null!=e.find(a=>a.summary===o.summary&&a.detail==o.detail&&a.severity===o.severity)}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"message":default:this.template=e.template}})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&this.autoZIndex&&(this.containerViewChild.nativeElement.style.zIndex=String(this.baseZIndex+ ++Jt.zindex),this.containerViewChild.nativeElement.setAttribute(this.id,""))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let o in this.breakpoints){let a="";for(let c in this.breakpoints[o])a+=c+":"+this.breakpoints[o][c]+" !important;";e+=`\n                    @media screen and (max-width: ${o}) {\n                        .p-toast[${this.id}] {\n                           ${a}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Oc.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(aP),s.Y36(s.sBO),s.Y36(Jm))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-toast"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,Sv,4),2&e){let c;s.iGM(c=s.CRH())&&(o.templates=c)}},viewQuery:function(e,o){if(1&e&&s.Gf(w3,5),2&e){let a;s.iGM(a=s.CRH())&&(o.containerViewChild=a.first)}},inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0,1),s.YNc(2,k8,1,8,"p-toastItem",2),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass","p-toast p-component p-toast-"+o.position)("ngStyle",o.style),s.xp6(2),s.Q6J("ngForOf",o.messages))},directives:[ne,Wi,Je,A8],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translateX(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translateX(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}"],encapsulation:2,data:{animation:[ns("toastAnimation",[ur(":enter, :leave",[ES("@*",CS())])])]},changeDetection:0}),t})(),I8=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Pf],Jh]}),t})();function P8(t,i){if(1&t&&s._UZ(0,"i",8),2&t){const e=s.oxw(2);s.Tol(e.confirmation.icon),s.Q6J("ngClass","p-confirm-popup-icon")}}function R8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).reject()}),s.qZA()}if(2&t){const e=s.oxw(2);s.Tol(e.confirmation.rejectButtonStyleClass||"p-button-text"),s.Q6J("icon",e.confirmation.rejectIcon)("label",e.rejectButtonLabel)("ngClass","p-confirm-popup-reject p-button-sm"),s.uIk("aria-label",e.rejectButtonLabel)}}function O8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).accept()}),s.qZA()}if(2&t){const e=s.oxw(2);s.Tol(e.confirmation.acceptButtonStyleClass),s.Q6J("icon",e.confirmation.acceptIcon)("label",e.acceptButtonLabel)("ngClass","p-confirm-popup-accept p-button-sm"),s.uIk("aria-label",e.acceptButtonLabel)}}const F8=function(t,i){return{showTransitionParams:t,hideTransitionParams:i}},L8=function(t){return{value:"open",params:t}};function N8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",1),s.NdJ("click",function(a){return s.CHM(e),s.oxw().onOverlayClick(a)})("@animation.start",function(a){return s.CHM(e),s.oxw().onAnimationStart(a)})("@animation.done",function(a){return s.CHM(e),s.oxw().onAnimationEnd(a)}),s.TgZ(1,"div",2,3),s.YNc(3,P8,1,3,"i",4),s.TgZ(4,"span",5),s._uU(5),s.qZA(),s.qZA(),s.TgZ(6,"div",6),s.YNc(7,R8,1,6,"button",7),s.YNc(8,O8,1,6,"button",7),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.Tol(e.styleClass),s.Q6J("ngClass","p-confirm-popup p-component")("ngStyle",e.style)("@animation",s.VKq(12,L8,s.WLB(9,F8,e.showTransitionOptions,e.hideTransitionOptions))),s.xp6(3),s.Q6J("ngIf",e.confirmation.icon),s.xp6(2),s.Oqu(e.confirmation.message),s.xp6(2),s.Q6J("ngIf",!1!==e.confirmation.rejectVisible),s.xp6(1),s.Q6J("ngIf",!1!==e.confirmation.acceptVisible)}}let B8=(()=>{class t{constructor(e,o,a,c,v,A){this.el=e,this.confirmationService=o,this.renderer=a,this.cd=c,this.config=v,this.overlayService=A,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autoZIndex=!0,this.baseZIndex=0,this.subscription=this.confirmationService.requireConfirmation$.subscribe(z=>{z?z.key===this.key&&(this.confirmation=z,this.confirmation.accept&&(this.confirmation.acceptEvent=new s.vpe,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new s.vpe,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this.cd.markForCheck()}onAnimationStart(e){"open"===e.toState&&(this.container=e.element,document.body.appendChild(this.container),this.align(),this.bindListeners())}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy()}}align(){this.autoZIndex&&Oc.set("overlay",this.container,this.config.zIndex.overlay),Jt.absolutePosition(this.container,this.confirmation.target);const e=Jt.getOffset(this.container),o=Jt.getOffset(this.confirmation.target);let a=0;e.left<o.left&&(a=o.left-e.left),this.container.style.setProperty("--overlayArrowLeft",`${a}px`),e.top<o.top&&Jt.addClass(this.container,"p-confirm-popup-flipped")}hide(){this.visible=!1}accept(){this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide()}reject(){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(),this.hide()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}bindListeners(){this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener()}unbindListeners(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}bindDocumentClickListener(){if(!this.documentClickListener){let e=Jt.isIOS()?"touchstart":"click";const o=this.el?this.el.nativeElement.ownerDocument:document;this.documentClickListener=this.renderer.listen(o,e,a=>{let c=this.confirmation.target;this.container!==a.target&&!this.container.contains(a.target)&&c!==a.target&&!c.contains(a.target)&&this.hide()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}onWindowResize(){this.hide()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new sE(this.confirmation.target,()=>{this.visible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unsubscribeConfirmationSubscriptions(){this.confirmation&&(this.confirmation.acceptEvent&&this.confirmation.acceptEvent.unsubscribe(),this.confirmation.rejectEvent&&this.confirmation.rejectEvent.unsubscribe())}onContainerDestroy(){this.unbindListeners(),this.unsubscribeConfirmationSubscriptions(),this.autoZIndex&&Oc.clear(this.container),this.confirmation=null,this.container=null}restoreAppend(){this.container&&document.body.removeChild(this.container),this.onContainerDestroy()}get acceptButtonLabel(){return this.confirmation.acceptLabel||this.config.getTranslation(cl.ACCEPT)}get rejectButtonLabel(){return this.confirmation.rejectLabel||this.config.getTranslation(cl.REJECT)}ngOnDestroy(){this.restoreAppend(),this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(Sx),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(Jm),s.Y36(rE))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-confirmPopup"]],inputs:{key:"key",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",visible:"visible"},decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-confirm-popup-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-popup-message"],[1,"p-confirm-popup-footer"],["type","button","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],[3,"ngClass"],["type","button","pButton","",3,"icon","label","ngClass","click"]],template:function(e,o){1&e&&s.YNc(0,N8,9,14,"div",0),2&e&&s.Q6J("ngIf",o.visible)},directives:[Xt,ne,Wi,aE],styles:['.p-confirm-popup{position:absolute;margin-top:10px;top:0;left:0}.p-confirm-popup-flipped{margin-top:0;margin-bottom:10px}.p-confirm-popup:after,.p-confirm-popup:before{bottom:100%;left:calc(0 + 1.25rem);left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-confirm-popup:after{border-width:8px;margin-left:-8px}.p-confirm-popup:before{border-width:10px;margin-left:-10px}.p-confirm-popup-flipped:after,.p-confirm-popup-flipped:before{bottom:auto;top:100%}.p-confirm-popup.p-confirm-popup-flipped:after,.p-confirm-popup.p-confirm-popup-flipped:before{border-bottom-color:transparent}.p-confirm-popup .p-confirm-popup-content{display:flex;align-items:center}'],encapsulation:2,data:{animation:[ns("animation",[co("void",Rn({transform:"scaleY(0.8)",opacity:0})),co("open",Rn({transform:"translateY(0)",opacity:1})),ur("void => open",dr("{{showTransitionParams}}")),ur("open => void",dr("{{hideTransitionParams}}"))])]},changeDetection:0}),t})(),z8=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,E_]]}),t})();function V8(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"UID"),s.qZA())}function U8(t,i){if(1&t&&(s.TgZ(0,"td",19),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.id)}}function H8(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"Matrix Card ID"),s.qZA())}function G8(t,i){if(1&t&&(s.TgZ(0,"td",19),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.matrix)}}function j8(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"Student Name"),s.qZA())}function Y8(t,i){if(1&t&&(s.TgZ(0,"td",19),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.name)}}function q8(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"Permission"),s.qZA())}function Z8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"td",19),s.TgZ(1,"p-toggleButton",20,21),s.NdJ("ngModelChange",function(a){return s.CHM(e).$implicit.isStudent=a})("click",function(){const c=s.CHM(e).$implicit,v=s.MAs(2);return s.oxw().change(v,c.id)}),s.qZA(),s.qZA()}if(2&t){const e=i.$implicit;s.xp6(1),s.Q6J("ngModel",e.isStudent)("onIcon","pi pi-check")}}function W8(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"Action"),s.qZA())}function $8(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"td",19),s._UZ(1,"p-toast"),s._UZ(2,"p-confirmPopup"),s.TgZ(3,"button",22),s.NdJ("click",function(a){const v=s.CHM(e).$implicit;return s.oxw().confirm(a,v.id)}),s.qZA(),s.qZA()}}function X8(t,i){1&t&&s._UZ(0,"tr",23)}function Q8(t,i){1&t&&s._UZ(0,"tr",24)}function J8(t,i){if(1&t&&(s.TgZ(0,"tr",25),s.TgZ(1,"td",26),s._uU(2),s.qZA(),s.qZA()),2&t){s.oxw();const e=s.MAs(5);s.xp6(2),s.hij(' No data matching the filter "',e.value,'" ')}}function K8(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"UID"),s.qZA())}function e$(t,i){if(1&t&&(s.TgZ(0,"td",19),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.id)}}function t$(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"Company Name"),s.qZA())}function n$(t,i){if(1&t&&(s.TgZ(0,"td",19),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.compname)}}function i$(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"Supplier Name"),s.qZA())}function r$(t,i){if(1&t&&(s.TgZ(0,"td",19),s._uU(1),s.qZA()),2&t){const e=i.$implicit;s.xp6(1),s.Oqu(e.name)}}function o$(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"Permission"),s.qZA())}function s$(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"td",19),s.TgZ(1,"p-toggleButton",20,21),s.NdJ("ngModelChange",function(a){return s.CHM(e).$implicit.isSupplier=a})("click",function(){const c=s.CHM(e).$implicit,v=s.MAs(2);return s.oxw().change2(v,c.id)}),s.qZA(),s.qZA()}if(2&t){const e=i.$implicit;s.xp6(1),s.Q6J("ngModel",e.isSupplier)("onIcon","pi pi-check")}}function a$(t,i){1&t&&(s.TgZ(0,"th",18),s._uU(1,"Action"),s.qZA())}function l$(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"td",19),s._UZ(1,"p-toast"),s._UZ(2,"p-confirmPopup"),s.TgZ(3,"button",22),s.NdJ("click",function(a){const v=s.CHM(e).$implicit;return s.oxw().confirm2(a,v.id)}),s.qZA(),s.qZA()}}function c$(t,i){1&t&&s._UZ(0,"tr",23)}function u$(t,i){1&t&&s._UZ(0,"tr",24)}function h$(t,i){if(1&t&&(s.TgZ(0,"tr",25),s.TgZ(1,"td",26),s._uU(2),s.qZA(),s.qZA()),2&t){s.oxw();const e=s.MAs(5);s.xp6(2),s.hij(' No data matching the filter "',e.value,'" ')}}const C3=function(){return[5,10,25,100]},d$=[{path:"",component:R5},{path:"register",component:oG},{path:"forgotpassword",component:C5},{path:"adminpage",component:rR,canActivate:[Fp,Km]},{path:"adminmanageinv",component:h5,canActivate:[Fp,Km]},{path:"studentpage",component:sG,canActivate:[Fp,_N]},{path:"supplierpage",component:cd,canActivate:[Fp,KC]},{path:"adminprofile",component:lG,canActivate:[Fp,Km]},{path:"adminviewhistory/:id",component:CG,canActivate:[Fp,Km]},{path:"adminaddorder",component:Dj,canActivate:[Fp,Km]},{path:"admincartpage",component:t8,canActivate:[Fp,Km]},{path:"admincheckoutpage",component:f8,canActivate:[Fp,Km]},{path:"adminpermissionpage",component:(()=>{class t{constructor(e,o,a,c){this.fs=e,this.confirmationService=o,this.messageService=a,this.primengConfig=c,this.displayedColumns=["id","matrix","name","isStudent","action"],this.displayedColumns2=["id","compname","name","isSupplier","action"],this.fs.collection("Student").snapshotChanges().subscribe(v=>{this.studentPermissions=[],v.map(A=>{let z={id:A.payload.doc.id,matrix:A.payload.doc.data().matrixid,isStudent:A.payload.doc.data().isStudent,name:A.payload.doc.data().name};this.studentPermissions.push(z),this.dataSource=new Cx(this.studentPermissions),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}),this.fs.collection("Supplier").snapshotChanges().subscribe(v=>{this.supplierPermissions=[],v.map(A=>{let z={id:A.payload.doc.id,compname:A.payload.doc.data().compname,isSupplier:A.payload.doc.data().isSupplier,name:A.payload.doc.data().name};this.supplierPermissions.push(z),this.dataSource2=new Cx(this.supplierPermissions),this.dataSource2.paginator=this.paginator,this.dataSource2.sort=this.sort})})}ngOnInit(){}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}applyFilter2(e){this.dataSource2.filter=e.target.value.trim().toLowerCase(),this.dataSource2.paginator&&this.dataSource2.paginator.firstPage()}change(e,o){console.log(e,o),this.fs.collection("Student").doc(o).update({isStudent:e.checked})}change2(e,o){console.log(e,o),this.fs.collection("Supplier").doc(o).update({isSupplier:e.checked})}confirm(e,o){this.confirmationService.confirm({target:e.target,message:"Are you sure that you want to proceed?",icon:"pi pi-exclamation-triangle",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.fs.collection("Student").doc(o).delete()},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected"})}})}confirm2(e,o){this.confirmationService.confirm({target:e.target,message:"Are you sure that you want to proceed?",icon:"pi pi-exclamation-triangle",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.fs.collection("Supplier").doc(o).delete()},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected"})}})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(_u),s.Y36(Sx),s.Y36(aP),s.Y36(Jm))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-permission-page"]],viewQuery:function(e,o){if(1&e&&(s.Gf(wv,5),s.Gf(x_,5)),2&e){let a;s.iGM(a=s.CRH())&&(o.paginator=a.first),s.iGM(a=s.CRH())&&(o.sort=a.first)}},decls:57,vars:14,consts:[["appearance","standard"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","matrix"],["matColumnDef","name"],["matColumnDef","isStudent"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["matColumnDef","compname"],["matColumnDef","isSupplier"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange","click"],["p",""],["id","delete","pButton","","icon","pi pi-check","label","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(s._UZ(0,"app-adminnavbarpage"),s.TgZ(1,"mat-form-field",0),s.TgZ(2,"mat-label"),s._uU(3,"Filter"),s.qZA(),s.TgZ(4,"input",1,2),s.NdJ("keyup",function(c){return o.applyFilter(c)}),s.qZA(),s.qZA(),s.TgZ(6,"div",3),s.TgZ(7,"h4"),s._uU(8,"Student's List"),s.qZA(),s.TgZ(9,"table",4),s.ynx(10,5),s.YNc(11,V8,2,0,"th",6),s.YNc(12,U8,2,1,"td",7),s.BQk(),s.ynx(13,8),s.YNc(14,H8,2,0,"th",6),s.YNc(15,G8,2,1,"td",7),s.BQk(),s.ynx(16,9),s.YNc(17,j8,2,0,"th",6),s.YNc(18,Y8,2,1,"td",7),s.BQk(),s.ynx(19,10),s.YNc(20,q8,2,0,"th",6),s.YNc(21,Z8,3,2,"td",7),s.BQk(),s.ynx(22,11),s.YNc(23,W8,2,0,"th",6),s.YNc(24,$8,4,0,"td",7),s.BQk(),s.YNc(25,X8,1,0,"tr",12),s.YNc(26,Q8,1,0,"tr",13),s.YNc(27,J8,3,1,"tr",14),s.qZA(),s._UZ(28,"mat-paginator",15),s.qZA(),s.TgZ(29,"mat-form-field",0),s.TgZ(30,"mat-label"),s._uU(31,"Filter"),s.qZA(),s.TgZ(32,"input",1,2),s.NdJ("keyup",function(c){return o.applyFilter2(c)}),s.qZA(),s.qZA(),s.TgZ(34,"div",3),s.TgZ(35,"h4"),s._uU(36,"Supplier's List"),s.qZA(),s.TgZ(37,"table",4),s.ynx(38,5),s.YNc(39,K8,2,0,"th",6),s.YNc(40,e$,2,1,"td",7),s.BQk(),s.ynx(41,16),s.YNc(42,t$,2,0,"th",6),s.YNc(43,n$,2,1,"td",7),s.BQk(),s.ynx(44,9),s.YNc(45,i$,2,0,"th",6),s.YNc(46,r$,2,1,"td",7),s.BQk(),s.ynx(47,17),s.YNc(48,o$,2,0,"th",6),s.YNc(49,s$,3,2,"td",7),s.BQk(),s.ynx(50,11),s.YNc(51,a$,2,0,"th",6),s.YNc(52,l$,4,0,"td",7),s.BQk(),s.YNc(53,c$,1,0,"tr",12),s.YNc(54,u$,1,0,"tr",13),s.YNc(55,h$,3,1,"tr",14),s.qZA(),s._UZ(56,"mat-paginator",15),s.qZA()),2&e&&(s.xp6(9),s.Q6J("dataSource",o.dataSource),s.xp6(1),s.Udp("display","none"),s.xp6(15),s.Q6J("matHeaderRowDef",o.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",o.displayedColumns),s.xp6(2),s.Q6J("pageSizeOptions",s.DdM(12,C3)),s.xp6(9),s.Q6J("dataSource",o.dataSource2),s.xp6(1),s.Udp("display","none"),s.xp6(15),s.Q6J("matHeaderRowDef",o.displayedColumns2),s.xp6(1),s.Q6J("matRowDefColumns",o.displayedColumns2),s.xp6(2),s.Q6J("pageSizeOptions",s.DdM(13,C3)))},directives:[Ym,Pw,bx,oE,JS,x_,jw,Gw,Hw,KS,eE,iE,wv,Yw,Ok,qw,x3,bv,Ow,D8,B8,aE,tE,nE],styles:["table[_ngcontent-%COMP%]{width:100%}#delete[_ngcontent-%COMP%]{background-color:#d32f2f;border:none}"]}),t})(),canActivate:[Fp,Km]},{path:"adminmenupage",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-admin-menu-list-page"]],decls:1,vars:0,template:function(e,o){1&e&&s._UZ(0,"app-adminnavbarpage")},directives:[Ym],styles:[""]}),t})(),canActivate:[Fp,Km]}];let p$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[wd.forRoot(d$)],wd]}),t})(),f$=(()=>{class t{constructor(){this.title="UMPCafeSupplyChainManagementSystem"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){1&e&&s._UZ(0,"router-outlet")},directives:[jv],styles:[""]}),t})();function S3(t,i,e){const o={timing:t,delay:0,rotateX:i,rotateY:e};return cx([Rn({"backface-visibility":"visible"}),dr("{{ timing }}s {{ delay }}s ease-in",g_([Rn({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),Rn({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),Rn({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),Rn({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),Rn({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:o})}RegExp(/^(?=.*?[a-z])/),RegExp(/^(?=.*?[A-Z])/),RegExp(/^(?=.*?[0-9])/),RegExp(/^(?=.*?[" !"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"])/),S3(1,1,0),S3(1,0,1),cx(dr("{{ timing }}s {{ delay }}s",g_([Rn({transform:"translate3d(0, 0, 0)",offset:0}),Rn({transform:"translate3d(-10px, 0, 0)",offset:.1}),Rn({transform:"translate3d(10px, 0, 0)",offset:.2}),Rn({transform:"translate3d(-10px, 0, 0)",offset:.3}),Rn({transform:"translate3d(10px, 0, 0)",offset:.4}),Rn({transform:"translate3d(-10px, 0, 0)",offset:.5}),Rn({transform:"translate3d(10px, 0, 0)",offset:.6}),Rn({transform:"translate3d(-10px, 0, 0)",offset:.7}),Rn({transform:"translate3d(10px, 0, 0)",offset:.8}),Rn({transform:"translate3d(-10px, 0, 0)",offset:.9}),Rn({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}});let Y$=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,gN,h3,$N,IS]]}),t})();var q$=nt(3300);window.ApexCharts=nt.n(q$)();let $$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[]]}),t})();function X$(t,i){if(1&t&&(s.O4$(),s._UZ(0,"circle",3)),2&t){const e=s.oxw();s.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),s.uIk("r",e._getCircleRadius())}}function Q$(t,i){if(1&t&&(s.O4$(),s._UZ(0,"circle",3)),2&t){const e=s.oxw();s.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),s.uIk("r",e._getCircleRadius())}}class t9{constructor(i){this._elementRef=i}}const n9=kw(t9,"primary"),M3=new s.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class M_ extends n9{constructor(i,e,o,a,c){super(i),this._elementRef=i,this._document=o,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const v=M_._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),v.has(o.head)||v.set(o.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations="NoopAnimations"===a&&!!c&&!c._forceAnimations,c&&(c.diameter&&(this.diameter=c.diameter),c.strokeWidth&&(this.strokeWidth=c.strokeWidth))}get diameter(){return this._diameter}set diameter(i){this._diameter=Fl(i),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(i){this._strokeWidth=Fl(i)}get value(){return"determinate"===this.mode?this._value:0}set value(i){this._value=Math.max(0,Math.min(100,Fl(i)))}ngOnInit(){const i=this._elementRef.nativeElement;this._styleRoot=GI(i)||this._document.head,this._attachStyleNode(),i.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const i=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${i} ${i}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const i=this._styleRoot,e=this._diameter,o=M_._diameters;let a=o.get(i);if(!a||!a.has(e)){const c=this._document.createElement("style");c.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),c.textContent=this._getAnimationText(),i.appendChild(c),a||(a=new Set,o.set(i,a)),a.add(e)}}_getAnimationText(){const i=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*i).replace(/END_VALUE/g,""+.2*i).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}M_.\u0275fac=function(i){return new(i||M_)(s.Y36(s.SBq),s.Y36(Co),s.Y36(wt,8),s.Y36(ih,8),s.Y36(M3))},M_.\u0275cmp=s.Xpm({type:M_,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(i,e){2&i&&(s.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),s.Udp("width",e.diameter,"px")("height",e.diameter,"px"),s.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[s.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(i,e){1&i&&(s.O4$(),s.TgZ(0,"svg",0),s.YNc(1,X$,1,9,"circle",1),s.YNc(2,Q$,1,7,"circle",2),s.qZA()),2&i&&(s.Udp("width",e.diameter,"px")("height",e.diameter,"px"),s.Q6J("ngSwitch","indeterminate"===e.mode),s.uIk("viewBox",e._getViewBox()),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngSwitchCase",!1))},directives:[Bi,zn],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),M_._diameters=new WeakMap;let s9=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ir,Fi],Ir]}),t})(),a9=(()=>{class t{constructor(e){this.admins=e}intercept(e,o){return this.admins.isLoading.next(!0),o.handle(e).pipe(Fs(()=>{this.admins.isLoading.next(!1)}))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(lA))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function l9(t,i){}class kP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const c9={dialogContainer:ns("dialogContainer",[co("void, exit",Rn({opacity:0,transform:"scale(0.7)"})),co("enter",Rn({transform:"none"})),ur("* => enter",dr("150ms cubic-bezier(0, 0, 0.2, 1)",Rn({transform:"none",opacity:1}))),ur("* => void, * => exit",dr("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Rn({opacity:0})))])};let u9=(()=>{class t extends Nk{constructor(e,o,a,c,v,A){super(),this._elementRef=e,this._focusTrapFactory=o,this._changeDetectorRef=a,this._config=v,this._focusMonitor=A,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=z=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(z)),this._ariaLabelledBy=v.ariaLabelledBy||null,this._document=c}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const o=this._getActiveElement(),a=this._elementRef.nativeElement;(!o||o===this._document.body||o===a||a.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._getActiveElement())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,o=this._getActiveElement();return e===o||e.contains(o)}_getActiveElement(){var e;const o=this._document.activeElement;return(null===(e=null==o?void 0:o.shadowRoot)||void 0===e?void 0:e.activeElement)||o}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(ck),s.Y36(s.sBO),s.Y36(wt,8),s.Y36(kP),s.Y36(nh))},t.\u0275dir=s.lG2({type:t,viewQuery:function(e,o){if(1&e&&s.Gf(yx,7),2&e){let a;s.iGM(a=s.CRH())&&(o._portalOutlet=a.first)}},features:[s.qOj]}),t})(),h9=(()=>{class t extends u9{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:o}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:o})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:o}))}_onAnimationStart({toState:e,totalTime:o}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:o}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:o})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let i;return function(o){return(i||(i=s.n5z(t)))(o||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,o){1&e&&s.WFA("@dialogContainer.start",function(c){return o._onAnimationStart(c)})("@dialogContainer.done",function(c){return o._onAnimationDone(c)}),2&e&&(s.Ikx("id",o._id),s.uIk("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),s.d8E("@dialogContainer",o._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,o){1&e&&s.YNc(0,l9,0,0,"ng-template",0)},directives:[yx],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[c9.dialogContainer]}}),t})(),d9=0;class AP{constructor(i,e,o="mat-dialog-"+d9++){this._overlayRef=i,this._containerInstance=e,this.id=o,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Nn.xQ,this._afterClosed=new Nn.xQ,this._beforeClosed=new Nn.xQ,this._state=0,e._id=o,e._animationStateChanged.pipe(w(a=>"opened"===a.state),ue(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(w(a=>"closed"===a.state),ue(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),i.keydownEvents().pipe(w(a=>27===a.keyCode&&!this.disableClose&&!Na(a))).subscribe(a=>{a.preventDefault(),DP(this,"keyboard")}),i.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():DP(this,"mouse")})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe(w(e=>"closing"===e.state),ue(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(i){let e=this._getPositionStrategy();return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(i="",e=""){return this._overlayRef.updateSize({width:i,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(i){return this._overlayRef.addPanelClass(i),this}removePanelClass(i){return this._overlayRef.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function DP(t,i,e){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=i),t.close(e)}const p9=new s.OlP("MatDialogData"),f9=new s.OlP("mat-dialog-default-options"),k3=new s.OlP("mat-dialog-scroll-strategy"),g9={provide:k3,deps:[Ud],useFactory:function(t){return()=>t.scrollStrategies.block()}};let _9=(()=>{class t{constructor(e,o,a,c,v,A,z,$,oe){this._overlay=e,this._injector=o,this._defaultOptions=a,this._parentDialog=c,this._overlayContainer=v,this._dialogRefConstructor=z,this._dialogContainerType=$,this._dialogDataToken=oe,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Nn.xQ,this._afterOpenedAtThisLevel=new Nn.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=Xp(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ws(void 0))),this._scrollStrategy=A}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,o){(o=function(t,i){return Object.assign(Object.assign({},i),t)}(o,this._defaultOptions||new kP)).id&&this.getDialogById(o.id);const a=this._createOverlay(o),c=this._attachDialogContainer(a,o),v=this._attachDialogContent(e,c,a,o);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(v),v.afterClosed().subscribe(()=>this._removeOpenDialog(v)),this.afterOpened.next(v),c._initializeWithAttachedContent(),v}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(o=>o.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const o=this._getOverlayConfig(e);return this._overlay.create(o)}_getOverlayConfig(e){const o=new NS({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(o.backdropClass=e.backdropClass),o}_attachDialogContainer(e,o){const c=s.zs3.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:kP,useValue:o}]}),v=new Iw(this._dialogContainerType,o.viewContainerRef,c,o.componentFactoryResolver);return e.attach(v).instance}_attachDialogContent(e,o,a,c){const v=new this._dialogRefConstructor(a,o,c.id);if(e instanceof s.Rgc)o.attachTemplatePortal(new gv(e,null,{$implicit:c.data,dialogRef:v}));else{const A=this._createInjector(c,v,o),z=o.attachComponentPortal(new Iw(e,c.viewContainerRef,A));v.componentInstance=z.instance}return v.updateSize(c.width,c.height).updatePosition(c.position),v}_createInjector(e,o,a){const c=e&&e.viewContainerRef&&e.viewContainerRef.injector,v=[{provide:this._dialogContainerType,useValue:a},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:o}];return e.direction&&(!c||!c.get(Qh,null))&&v.push({provide:Qh,useValue:{value:e.direction,change:(0,Xn.of)()}}),s.zs3.create({parent:c||this._injector,providers:v})}_removeOpenDialog(e){const o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,c)=>{a?c.setAttribute("aria-hidden",a):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const o=e.parentElement.children;for(let a=o.length-1;a>-1;a--){let c=o[a];c!==e&&"SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName&&!c.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(c,c.getAttribute("aria-hidden")),c.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let o=e.length;for(;o--;)e[o].close()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ud),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(BS),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},t.\u0275dir=s.lG2({type:t}),t})(),IP=(()=>{class t extends _9{constructor(e,o,a,c,v,A,z){super(e,o,c,A,z,v,AP,h9,p9)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Ud),s.LFG(s.zs3),s.LFG(Vn,8),s.LFG(f9,8),s.LFG(k3),s.LFG(t,12),s.LFG(BS))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),b9=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[IP,g9],imports:[[zS,Bk,Ir],Ir]}),t})(),w9=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi],Jh]}),t})(),PP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Pf]]}),t})();const F9=["input"];function L9(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"i",4),s.NdJ("click",function(){return s.CHM(e),s.oxw().onMaskToggle()}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("ngClass",e.toggleIconClass())}}function N9(t,i){1&t&&s.GkF(0)}function B9(t,i){1&t&&s.GkF(0)}function z9(t,i){if(1&t&&(s.ynx(0),s.YNc(1,B9,1,0,"ng-container",6),s.BQk()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.contentTemplate)}}const V9=function(t){return{width:t}};function U9(t,i){if(1&t&&(s.TgZ(0,"div",9),s._UZ(1,"div",0),s.qZA(),s.TgZ(2,"div",10),s._uU(3),s.qZA()),2&t){const e=s.oxw(2);s.xp6(1),s.Q6J("ngClass",e.strengthClass())("ngStyle",s.VKq(3,V9,e.meter?e.meter.width:"")),s.xp6(2),s.Oqu(e.infoText)}}function H9(t,i){1&t&&s.GkF(0)}const G9=function(t,i){return{showTransitionParams:t,hideTransitionParams:i}},j9=function(t){return{value:"visible",params:t}};function Y9(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"div",4,5),s.NdJ("click",function(a){return s.CHM(e),s.oxw().onOverlayClick(a)})("@overlayAnimation.start",function(a){return s.CHM(e),s.oxw().onAnimationStart(a)})("@overlayAnimation.done",function(a){return s.CHM(e),s.oxw().onAnimationEnd(a)}),s.YNc(2,N9,1,0,"ng-container",6),s.YNc(3,z9,2,1,"ng-container",7),s.YNc(4,U9,4,5,"ng-template",null,8,s.W1O),s.YNc(6,H9,1,0,"ng-container",6),s.qZA()}if(2&t){const e=s.MAs(5),o=s.oxw();s.Q6J("ngClass","p-password-panel p-component")("@overlayAnimation",s.VKq(9,j9,s.WLB(6,G9,o.showTransitionOptions,o.hideTransitionOptions))),s.xp6(2),s.Q6J("ngTemplateOutlet",o.headerTemplate),s.xp6(1),s.Q6J("ngIf",o.contentTemplate)("ngIfElse",e),s.xp6(3),s.Q6J("ngTemplateOutlet",o.footerTemplate)}}const q9={provide:ll,useExisting:(0,s.Gpc)(()=>Z9),multi:!0};let Z9=(()=>{class t{constructor(e,o,a,c){this.cd=e,this.config=o,this.el=a,this.overlayService=c,this.mediumRegex="^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})",this.strongRegex="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})",this.feedback=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.overlayVisible=!1,this.focused=!1,this.unmasked=!1,this.value=null,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.contentTemplate=e.template}})}ngOnInit(){this.infoText=this.promptText(),this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.updateUI(this.value||"")})}onAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,Oc.set("overlay",this.overlay,this.config.zIndex.overlay),this.appendContainer(),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener();break;case"void":this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null}}onAnimationEnd(e){switch(e.toState){case"void":Oc.clear(e.element)}}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):document.getElementById(this.appendTo).appendChild(this.overlay))}alignOverlay(){this.appendTo?(this.overlay.style.minWidth=Jt.getOuterWidth(this.input.nativeElement)+"px",Jt.absolutePosition(this.overlay,this.input.nativeElement)):Jt.relativePosition(this.overlay,this.input.nativeElement)}onInput(e){this.value=e.target.value,this.onModelChange(this.value),this.onModelTouched()}onFocus(){this.focused=!0,this.feedback&&(this.overlayVisible=!0)}onBlur(){this.focused=!1,this.feedback&&(this.overlayVisible=!1)}onKeyUp(e){this.feedback&&(this.updateUI(e.target.value),this.overlayVisible||(this.overlayVisible=!0))}updateUI(e){let o=null,a=null;switch(this.testStrength(e)){case 1:o=this.weakText(),a={strength:"weak",width:"33.33%"};break;case 2:o=this.mediumText(),a={strength:"medium",width:"66.66%"};break;case 3:o=this.strongText(),a={strength:"strong",width:"100%"};break;default:o=this.promptText(),a=null}this.meter=a,this.infoText=o}onMaskToggle(){this.unmasked=!this.unmasked}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}testStrength(e){let o=0;return this.strongCheckRegExp.test(e)?o=3:this.mediumCheckRegExp.test(e)?o=2:e.length&&(o=1),o}writeValue(e){this.value=void 0===e?null:e,this.feedback&&this.updateUI(this.value||""),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new sE(this.input.nativeElement,()=>{this.overlayVisible&&(this.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()}bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&(this.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}containerClass(){return{"p-password p-component p-inputwrapper":!0,"p-input-icon-right":this.toggleMask}}inputFieldClass(){return{"p-password-input":!0,"p-disabled":this.disabled}}toggleIconClass(){return this.unmasked?"pi pi-eye-slash":"pi pi-eye"}strengthClass(){return`p-password-strength ${this.meter?this.meter.strength:""}`}filled(){return null!=this.value&&this.value.toString().length>0}promptText(){return this.promptLabel||this.getTranslation(cl.PASSWORD_PROMPT)}weakText(){return this.weakLabel||this.getTranslation(cl.WEAK)}mediumText(){return this.mediumLabel||this.getTranslation(cl.MEDIUM)}strongText(){return this.strongLabel||this.getTranslation(cl.STRONG)}restoreAppend(){this.overlay&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.overlay):document.getElementById(this.appendTo).removeChild(this.overlay))}inputType(){return this.unmasked?"text":"password"}getTranslation(e){return this.config.getTranslation(e)}ngOnDestroy(){this.overlay&&(Oc.clear(this.overlay),this.overlay=null),this.restoreAppend(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO),s.Y36(Jm),s.Y36(s.SBq),s.Y36(rE))},t.\u0275cmp=s.Xpm({type:t,selectors:[["p-password"]],contentQueries:function(e,o,a){if(1&e&&s.Suo(a,Sv,4),2&e){let c;s.iGM(c=s.CRH())&&(o.templates=c)}},viewQuery:function(e,o){if(1&e&&s.Gf(F9,5),2&e){let a;s.iGM(a=s.CRH())&&(o.input=a.first)}},hostVars:4,hostBindings:function(e,o){2&e&&s.ekj("p-inputwrapper-filled",o.filled())("p-inputwrapper-focus",o.focused)},inputs:{disabled:"disabled",promptLabel:"promptLabel",mediumRegex:"mediumRegex",strongRegex:"strongRegex",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",inputId:"inputId",feedback:"feedback",appendTo:"appendTo",toggleMask:"toggleMask",inputStyleClass:"inputStyleClass",styleClass:"styleClass",style:"style",inputStyle:"inputStyle",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",placeholder:"placeholder"},features:[s._Bn([q9])],decls:5,vars:14,consts:[[3,"ngClass","ngStyle"],["pInputText","",3,"ngClass","ngStyle","value","input","focus","blur","keyup"],["input",""],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],["overlay",""],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["content",""],[1,"p-password-meter"],["className","p-password-info"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"input",1,2),s.NdJ("input",function(c){return o.onInput(c)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()})("keyup",function(c){return o.onKeyUp(c)}),s.qZA(),s.YNc(3,L9,1,1,"i",3),s.YNc(4,Y9,7,11,"div",3),s.qZA()),2&e&&(s.Tol(o.styleClass),s.Q6J("ngClass",o.containerClass())("ngStyle",o.style),s.xp6(1),s.Tol(o.inputStyleClass),s.Q6J("ngClass",o.inputFieldClass())("ngStyle",o.inputStyle)("value",o.value),s.uIk("id",o.inputId)("type",o.inputType())("placeholder",o.placeholder),s.xp6(2),s.Q6J("ngIf",o.toggleMask),s.xp6(1),s.Q6J("ngIf",o.overlayVisible))},directives:[ne,Wi,KN,Xt,Ro],styles:[".p-password{position:relative;display:inline-flex}.p-password-panel{position:absolute;top:0;left:0}.p-password .p-password-panel{min-width:100%}.p-password-meter{height:10px}.p-password-strength{height:100%;width:0;transition:width 1s ease-in-out}.p-fluid .p-password{display:flex}"],encapsulation:2,data:{animation:[ns("overlayAnimation",[ur(":enter",[Rn({opacity:0,transform:"scaleY(0.8)"}),dr("{{showTransitionParams}}")]),ur(":leave",[dr("{{hideTransitionParams}}",Rn({opacity:0}))])])]},changeDetection:0}),t})(),W9=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,EP],Jh]}),t})();nt(2958);const K9=new s.OlP("MapboxApiKey"),eX=new s.OlP("MapboxApiKey");let tX=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:K9,useValue:e.accessToken},{provide:eX,useValue:e.geocoderAccessToken||e.accessToken}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})(),aX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({}),t})(),bX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Ir,aX,Bk]]}),t})();class k_{constructor(){this.connectionMonitor=new Yr.y(i=>{window.addEventListener("offline",e=>{i.next(!1)}),window.addEventListener("online",e=>{i.next(!0)})})}monitor(){return this.connectionMonitor}}k_.\u0275fac=function(i){return new(i||k_)},k_.\u0275prov=s.Yz7({token:k_,factory:k_.\u0275fac,providedIn:"root"}),k_.ngInjectableDef=(0,s.Ez6)({factory:function(){return new k_},token:k_,providedIn:"root"});let xX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[k_],imports:[[]]}),t})(),L3=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({}),t})(),OX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[IS,Ir,th,L3],Ir,L3]}),t})(),LX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})(),zX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})(),N3=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})(),t7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,Jh,E_,N3,PP,Pf],Jh,E_,N3,PP]}),t})(),n7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi]]}),t})();cx([Rn({transform:"{{transform}}",opacity:0}),dr("{{transition}}")]),cx([dr("{{transition}}",Rn({transform:"{{transform}}",opacity:0}))]);let x7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Fi,n7,Pf],Jh]}),t})(),w7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t,bootstrap:[f$]}),t.\u0275inj=s.cJS({providers:[Fp,zd,Km,{provide:yP,useClass:a9,multi:!0},Sx,KC,_N,Sx,aP],imports:[[Kd,p$,Xi.hO.initializeApp(qn_firebase),Ws,Xk,VL.withConfig({warnOnNgModelWithFormControl:"never"}),Y$,Vk,jM,Az,vN,$$,KU,DU,wV,hH,s9,gN,k2,b9,UH,w9,PP,$N,W9,gH,tX.withConfig({accessToken:"pk.eyJ1Ijoib3NjYXJjaHVhd2Vpd2VuLWZzZCIsImEiOiJja3N4eXYycjgxYXp6Mm9wdTg5bTZ5eGUzIn0.uR8fYkY2kZhEjP43Cx-f6w",geocoderAccessToken:"pk.eyJ1Ijoib3NjYXJjaHVhd2Vpd2VuLWZzZCIsImEiOiJja3N4eXYycjgxYXp6Mm9wdTg5bTZ5eGUzIn0.uR8fYkY2kZhEjP43Cx-f6w"}),XG,NG,dj,qL,bX,xX,OX,LX,h3,YW,a3,yA,v8,z8,I8,zX,t7,x7]]}),t})();(0,s.G48)(),dc().bootstrapModule(w7).catch(t=>console.error(t))},4762:(ai,_n,nt)=>{"use strict";nt.d(_n,{ZT:()=>Vt,pi:()=>Ee,mG:()=>Be,Jh:()=>je,XA:()=>lt,CR:()=>Ct,ev:()=>Qe});var s=function(Zt,Gt){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($t,Ht){$t.__proto__=Ht}||function($t,Ht){for(var fn in Ht)Object.prototype.hasOwnProperty.call(Ht,fn)&&($t[fn]=Ht[fn])})(Zt,Gt)};function Vt(Zt,Gt){if("function"!=typeof Gt&&null!==Gt)throw new TypeError("Class extends value "+String(Gt)+" is not a constructor or null");function $t(){this.constructor=Zt}s(Zt,Gt),Zt.prototype=null===Gt?Object.create(Gt):($t.prototype=Gt.prototype,new $t)}var Ee=function(){return(Ee=Object.assign||function(Gt){for(var $t,Ht=1,fn=arguments.length;Ht<fn;Ht++)for(var Yt in $t=arguments[Ht])Object.prototype.hasOwnProperty.call($t,Yt)&&(Gt[Yt]=$t[Yt]);return Gt}).apply(this,arguments)};function Be(Zt,Gt,$t,Ht){return new($t||($t=Promise))(function(Yt,Fn){function hi(ri){try{Un(Ht.next(ri))}catch(Hn){Fn(Hn)}}function mi(ri){try{Un(Ht.throw(ri))}catch(Hn){Fn(Hn)}}function Un(ri){ri.done?Yt(ri.value):function(Yt){return Yt instanceof $t?Yt:new $t(function(Fn){Fn(Yt)})}(ri.value).then(hi,mi)}Un((Ht=Ht.apply(Zt,Gt||[])).next())})}function je(Zt,Gt){var Ht,fn,Yt,Fn,$t={label:0,sent:function(){if(1&Yt[0])throw Yt[1];return Yt[1]},trys:[],ops:[]};return Fn={next:hi(0),throw:hi(1),return:hi(2)},"function"==typeof Symbol&&(Fn[Symbol.iterator]=function(){return this}),Fn;function hi(Un){return function(ri){return function(Un){if(Ht)throw new TypeError("Generator is already executing.");for(;$t;)try{if(Ht=1,fn&&(Yt=2&Un[0]?fn.return:Un[0]?fn.throw||((Yt=fn.return)&&Yt.call(fn),0):fn.next)&&!(Yt=Yt.call(fn,Un[1])).done)return Yt;switch(fn=0,Yt&&(Un=[2&Un[0],Yt.value]),Un[0]){case 0:case 1:Yt=Un;break;case 4:return $t.label++,{value:Un[1],done:!1};case 5:$t.label++,fn=Un[1],Un=[0];continue;case 7:Un=$t.ops.pop(),$t.trys.pop();continue;default:if(!(Yt=(Yt=$t.trys).length>0&&Yt[Yt.length-1])&&(6===Un[0]||2===Un[0])){$t=0;continue}if(3===Un[0]&&(!Yt||Un[1]>Yt[0]&&Un[1]<Yt[3])){$t.label=Un[1];break}if(6===Un[0]&&$t.label<Yt[1]){$t.label=Yt[1],Yt=Un;break}if(Yt&&$t.label<Yt[2]){$t.label=Yt[2],$t.ops.push(Un);break}Yt[2]&&$t.ops.pop(),$t.trys.pop();continue}Un=Gt.call(Zt,$t)}catch(ri){Un=[6,ri],fn=0}finally{Ht=Yt=0}if(5&Un[0])throw Un[1];return{value:Un[0]?Un[1]:void 0,done:!0}}([Un,ri])}}}function lt(Zt){var Gt="function"==typeof Symbol&&Symbol.iterator,$t=Gt&&Zt[Gt],Ht=0;if($t)return $t.call(Zt);if(Zt&&"number"==typeof Zt.length)return{next:function(){return Zt&&Ht>=Zt.length&&(Zt=void 0),{value:Zt&&Zt[Ht++],done:!Zt}}};throw new TypeError(Gt?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ct(Zt,Gt){var $t="function"==typeof Symbol&&Zt[Symbol.iterator];if(!$t)return Zt;var fn,Fn,Ht=$t.call(Zt),Yt=[];try{for(;(void 0===Gt||Gt-- >0)&&!(fn=Ht.next()).done;)Yt.push(fn.value)}catch(hi){Fn={error:hi}}finally{try{fn&&!fn.done&&($t=Ht.return)&&$t.call(Ht)}finally{if(Fn)throw Fn.error}}return Yt}function Qe(Zt,Gt,$t){if($t||2===arguments.length)for(var Yt,Ht=0,fn=Gt.length;Ht<fn;Ht++)(Yt||!(Ht in Gt))&&(Yt||(Yt=Array.prototype.slice.call(Gt,0,Ht)),Yt[Ht]=Gt[Ht]);return Zt.concat(Yt||Array.prototype.slice.call(Gt))}}},ai=>{ai(ai.s=6533)}]);